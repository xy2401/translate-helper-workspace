<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">
      <meta name="description" content="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">
      <title>Data Access Using URIs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="how-to-write-XML-DB-applications-in-Java.html" title="Previous" type="text/html">
      <link rel="next" href="native-XML-DB-web-services.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="how-to-write-XML-DB-applications-in-Java.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="native-XML-DB-web-services.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name"> Oracle XML&nbsp;DB Repository</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Data Access Using URIs</li>
            </ol>
            <a id="GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" name="GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798"></a><a id="ADXDB1900"></a>
            
            <h2 id="ADXDB-GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" class="sect2"><span class="enumeration_chapter">32 </span> Data Access Using URIs
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='data-access-using-URIs'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2">Overview of Oracle XML&nbsp;DB URI Features</a><br>You can use a URI as an indirection mechanism to access database data, and you can use a URI that targets database data to produce XML documents.
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-DC41C382-C911-42C1-8430-0612B4633504">URIs and URLs</a><br>In developing Web-based XML applications, you often refer to data located on a network using <strong class="term">Uniform Resource Identifiers</strong>, or <strong class="term">URI</strong>s. A <strong class="term">URL</strong>, or <strong class="term">Uniform Resource Locator</strong>, is a URI that accesses an object using an Internet protocol.
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02">URIType and its Subtypes</a><br>You can represent paths of various kinds as database objects. These provide unified access to data stored inside and outside the server, and they can be used to map URIs in XML documents to database columns, letting documents reference data stored in relational columns and expose it externally.
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4">Accessing Data Using URIType Instances</a><br>To use instances of <code class="codeph">URIType</code> subtypes for indirection, you store such instances in the database and then query to retrieve the targeted data with a PL/SQL method such as <code class="codeph">getCLOB()</code>. 
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0">XDBUris: Pointers to Repository Resources</a><br><code class="codeph">XDBURIType</code> is a subtype of <code class="codeph">URIType</code> that exposes resources in Oracle XML&nbsp;DB Repository using URIs. Instances of object type <code class="codeph">XDBURIType</code> are called <strong class="term">XDBUris</strong>.
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B">DBUris: Pointers to Database Data</a><br>A DBUri is a URI that targets <span class="italic">database data</span>. As for all instances of <code class="codeph">URIType</code> subtypes, a DBUri provides indirect access to data. <code class="codeph">DBURIType</code> also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6">Create New Subtypes of URIType Using Package URIFACTORY</a><br>You can define your own subtypes of <code class="codeph">URIType</code> that correspond to particular protocols. You can use PL/SQL package <code class="codeph">URIFACTORY</code> to obtain the URI of a <code class="codeph">URIType</code> instance, escape characters in a URI string or remove such escaping, and register or unregister a type name for handling a given URL. 
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82">SYS_DBURIGEN SQL Function</a><br>You can create a DBUri by providing an XPath expression to constructor <code class="codeph">DBURIType</code> or to appropriate <code class="codeph">URIFACTORY</code> PL/SQL methods. With Oracle SQL function <code class="codeph">sys_DburiGen</code>, you can alternatively create a DBUri using an <span class="italic">XPath that is composed</span> from database columns and their values.
                  </li>
                  <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3">DBUriServlet</a><br>You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, <strong class="term">DBUriServlet</strong>, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML&nbsp;DB Repository lets you version your data, implement and manage security, and use APIs to access and manipulate repository resources.">Oracle XML&nbsp;DB Repository</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5224"></a><div class="props_rev_3"><a id="GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2" name="GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2"></a><h3 id="ADXDB-GUID-B691F5CF-4AB9-48D1-AEB4-5B962A8413E2" class="sect3"><span class="enumeration_section">32.1 </span>Overview of Oracle XML&nbsp;DB URI Features
               </h3>
               <div>
                  <p>You can use a URI as an indirection mechanism to access database data, and you can use a URI that targets database data to produce XML documents.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic">Using paths as an indirection mechanism &#x2013;</span> You can store a path in the database and then access its target <span class="italic">indirectly</span> by referring to the path. The paths in question are various kinds of Uniform Resource Identifier (URI).
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Using paths that target database data to produce XML documents &#x2013;</span> One kind of URI that you can use for indirection in particular, a <span class="italic">DBUri</span>, provides a convenient XPath notation for addressing <span class="italic">database data</span>. You can use a DBUri to construct an <span class="italic">XML document</span> that contains database data and whose structure reflects the database structure.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5225"></a><div class="props_rev_3"><a id="GUID-DC41C382-C911-42C1-8430-0612B4633504" name="GUID-DC41C382-C911-42C1-8430-0612B4633504"></a><h3 id="ADXDB-GUID-DC41C382-C911-42C1-8430-0612B4633504" class="sect3"><span class="enumeration_section">32.2 </span>URIs and URLs
               </h3>
               <div>
                  <p>In developing Web-based XML applications, you often refer to data located on a network using <strong class="term">Uniform Resource Identifiers</strong>, or <strong class="term">URI</strong>s. A <strong class="term">URL</strong>, or <strong class="term">Uniform Resource Locator</strong>, is a URI that accesses an object using an Internet protocol.
                  </p>
                  <p>A URI has two parts, separated by a number sign (<span class="bold"><code class="codeph">#</code></span>):
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A URL part, that identifies a document.</p>
                     </li>
                     <li>
                        <p>A fragment part, that identifies a fragment within the document. The notation for the fragment depends on the document type. For HTML documents, it is an anchor name. For XML documents, it is an XPath expression.</p>
                     </li>
                  </ul>
                  <p>These are typical URIs:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic">For HTML &#x2013;</span> <code class="codeph">http://www.example.com/document1#some_anchor</code>, where <code class="codeph">some_anchor</code> is a named anchor in the HTML document.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">For XML &#x2013;</span> <code class="codeph">http://www.example.com/xml_doc#/po/cust/custname</code>, where:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">http://www.example.com/xml_doc</code> identifies the location of the XML document.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">/po/cust/custname</code> identifies a fragment within the document. This portion is defined by the W3C XPointer recommendation.
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-DC41C382-C911-42C1-8430-0612B4633504__GUID-DE9C5981-3847-4D80-9000-33D64672C43D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_ws_activity" target="_blank">Web Services Activity Statement</a> for an explanation of HTTP(S) URL notation
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xpath" target="_blank">XML Path Language (XPath)</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xpointer" target="_blank">XML Pointer Language (XPointer)</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=xml_coverpages_mime_types" target="_blank">XML and MIME Media-Types</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5226"></a><div class="props_rev_3"><a id="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" name="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02"></a><h3 id="ADXDB-GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" class="sect3"><span class="enumeration_section">32.3 </span>URIType and its Subtypes
               </h3>
               <div>
                  <p>You can represent paths of various kinds as database objects. These provide unified access to data stored inside and outside the server, and they can be used to map URIs in XML documents to database columns, letting documents reference data stored in relational columns and expose it externally.</p>
                  <p>The available path object types are <code class="codeph">HTTPURIType</code>, <code class="codeph">DBURIType</code>, and <code class="codeph">XDBURIType</code>, all of which are derived from abstract object type <code class="codeph">URIType</code>.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold"><code class="codeph">HTTPURIType</code></span> &#x2013; An object of this type is called an <strong class="term">HTTPUri</strong> and represents a URL that begins with <span class="bold"><code class="codeph">http://</code></span>. With <code class="codeph">HTTPURIType</code>, you can create objects that represent links to remote <span class="italic">Web pages</span> (or files) and retrieve those Web pages by calling object methods. Applications using <code class="codeph">HTTPUriType</code> must have the proper access privileges. <code class="codeph">HTTPUriType</code> implements the Hyper Text Transfer Protocol (HTTP(S)) for accessing remote Web pages. <code class="codeph">HTTPURIType</code> uses package <code class="codeph">UTL_HTTP</code> to fetch data, so session settings and access control for this package can also be used to influence HTTP fetches.
                        </p>
                        <div class="infoboxnotealso" id="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02__GUID-3B06F18D-8BC2-456F-8EA8-55F812E3D786">
                           <p class="notep1">See Also:</p>
                           <p><a href="../dbseg/managing-fine-grained-access-in-pl-sql-packages-and-types.html#DBSEG40012" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for information about managing fine-grained access to external network services
                           </p>
                        </div>
                     </li>
                     <li>
                        <p><span class="bold"><code class="codeph">DBURIType</code></span> &#x2013; An object of this type is called a <strong class="term">DBUri</strong> and represents a URI that targets database data &#x2013; a table, one or more rows, or a single column. With <code class="codeph">DBURIType</code>, you can create objects that represent links to <span class="italic">database data</span>, and retrieve such data <span class="italic">as XML</span> by calling object methods. A DBUri uses a simple form of XPath expression as its URI syntax &#x2013; for example, the following XPath expression is a DBUri reference to the row of table <code class="codeph">HR.employees</code> where column <code class="codeph">first_name</code> has value <code class="codeph">Jack</code>:
                        </p><pre class="pre codeblock"><code>/HR/EMPLOYEES/ROW[FIRST_NAME="Jack"] </code></pre></li>
                     <li>
                        <p><span class="bold"><code class="codeph">XDBURIType</code></span> &#x2013; An object of this type is called an <strong class="term">XDBUri</strong>, and represents a URI that targets a resource in Oracle XML&nbsp;DB Repository. With PL/SQL constructor <code class="codeph">XDBURIType</code> you can create objects that represent links to <span class="italic">repository resources</span>. You can then retrieve all or part of any resource by calling methods on those objects. The URI syntax for an XDBUri is a repository resource address, optionally followed by an XPath expression. For example, <code class="codeph">/public/hr/doc1.xml#/purchaseOrder/lineItem</code> is an XDBUri reference to the <code class="codeph">lineItem</code> child element of the root element <code class="codeph">purchaseOrder</code> in repository file <code class="codeph">doc1.xml</code> in folder <code class="codeph">/public/hr</code>.
                        </p>
                     </li>
                  </ul>
                  <p>Each of these object types is derived from an <span class="italic">abstract</span> object type, <span class="bold"><code class="codeph">URIType</code></span>. As an abstract type, it has <span class="italic">no </span>instances (objects). Only its subtypes have instances. 
                  </p>
                  <p>Type <code class="codeph">URIType</code> provides the following features:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic">Unified access to data stored inside and outside the server. </span>Because you can use <code class="codeph">URIType</code> values to store pointers to HTTP(S) and DBUris, you can create queries and indexes without worrying about where the data resides.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Mapping of URIs in XML Documents to Database Columns. </span>When an XML document is broken up and stored in object-relational tables and columns, any URIs contained in the document are mapped to database columns of the appropriate <code class="codeph">URIType</code> subtype.
                        </p>
                     </li>
                  </ul>
                  <p>You can reference data stored in relational columns and expose it to the external world using URIs. Oracle Database provides a standard servlet, DBUriServlet, that interprets DBUris. It also provides PL/SQL package <code class="codeph">UTL_HTTP</code> and Java class <code class="codeph">java.net.URL</code>, which you can use to fetch URL references.
                  </p>
                  <p><code class="codeph">URIType</code> columns can be indexed natively in Oracle Database using Oracle Text &#x2013; no special data store is needed. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E2C058E7-921B-4BC0-9032-8308AC33528D">Overview of DBUris and XDBUris</a><br>Important uses of DBUris and XDBUris include referencing XSLT stylesheets from Web pages, referencing data in database tables or in repository folders without using SQL, and improving performance by bypassing the Web server. 
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1">URIType PL/SQL Methods</a><br>Abstract object type <code class="codeph">URIType</code> includes PL/SQL methods that can be used with each of its subtypes. Each of these methods can be overridden by any of the subtypes. 
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="data-access-using-URIs.html#GUID-184D639E-8F1A-455D-8709-84123F42C10E" title="HTTPURIType PL/SQL method getContentType() returns the MIME information for its targeted document. You can use this information to decide whether to retrieve the document as a BLOB instance or a CLOB instance.">HTTPURIType PL/SQL Method GETCONTENTTYPE()</a></li>
                        <li><a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="A DBUri is a URI that targets database data. As for all instances of URIType subtypes, a DBUri provides indirect access to data. DBURIType also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.">DBUris: Pointers to Database Data</a></li>
                        <li><a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" title="XDBURIType is a subtype of URIType that exposes resources in Oracle XML&nbsp;DB Repository using URIs. Instances of object type XDBURIType are called XDBUris.">XDBUris: Pointers to Repository Resources</a></li>
                        <li><a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="You can create indexes on your XML data, to focus on particular parts of it that you query often and thus improve performance. There are various ways that you can index XMLType data, whether it is XML schema-based or non-schema-based, and regardless of the XMLType storage model you use.">Indexes for XMLType Data</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02__GUID-14FFF376-5B1E-471B-B6F9-FF26D43662EC">
                     <p class="notep1">See Also:</p>
                     <p><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="You can define your own subtypes of URIType that correspond to particular protocols. You can use PL/SQL package URIFACTORY to obtain the URI of a URIType instance, escape characters in a URI string or remove such escaping, and register or unregister a type name for handling a given URL.">Create New Subtypes of URIType Using Package URIFACTORY</a> for information about defining new <code class="codeph">URIType</code> subtypes
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5227"></a><div class="props_rev_3"><a id="GUID-E2C058E7-921B-4BC0-9032-8308AC33528D" name="GUID-E2C058E7-921B-4BC0-9032-8308AC33528D"></a><h4 id="ADXDB-GUID-E2C058E7-921B-4BC0-9032-8308AC33528D" class="sect4"><span class="enumeration_section">32.3.1 </span>Overview of DBUris and XDBUris
                  </h4>
                  <div>
                     <p>Important uses of DBUris and XDBUris include referencing XSLT stylesheets from Web pages, referencing data in database tables or in repository folders without using SQL, and improving performance by bypassing the Web server. </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can reference XSLT stylesheets from within database-generated Web pages. PL/SQL package <code class="codeph">DBMS_METADATA</code> uses DBUris to reference XSLT stylesheets. An XDBUri can be used to reference XSLT stylesheets stored in Oracle XML&nbsp;DB Repository.
                           </p>
                        </li>
                        <li>
                           <p>You can reference HTML text, images and other data stored in the database. URLs can be used to point to data stored in database tables or in repository folders.</p>
                        </li>
                        <li>
                           <p>You can improve performance by bypassing the Web server. Replace a global URL in your XML document with a reference to the database, and use a servlet, a DBUri, or an XDBUri to retrieve the targeted content. Using a DBUri or an XDBUri generally provides better performance than using a servlet, because you interact directly with the database rather than through a Web server.</p>
                        </li>
                        <li>
                           <p>With a DBUri, you can access an XML document in the database without using SQL.</p>
                        </li>
                        <li>
                           <p>Whenever a repository resource is stored in a database table to which you have access, you can use either an XDBUri or a DBUri to access its content. </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E2C058E7-921B-4BC0-9032-8308AC33528D__GUID-739AFF4D-1C94-4424-86EF-0B904761290A">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_METADATA.html#ARPLS026" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, "DBMS_METADATA package"
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" title="You can represent paths of various kinds as database objects. These provide unified access to data stored inside and outside the server, and they can be used to map URIs in XML documents to database columns, letting documents reference data stored in relational columns and expose it externally.">URIType and its Subtypes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5229"></a><a id="ADXDB5228"></a><div class="props_rev_3"><a id="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" name="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1"></a><h4 id="ADXDB-GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" class="sect4"><span class="enumeration_section">32.3.2 </span>URIType PL/SQL Methods
                  </h4>
                  <div>
                     <p>Abstract object type <code class="codeph">URIType</code> includes PL/SQL methods that can be used with each of its subtypes. Each of these methods can be overridden by any of the subtypes. 
                     </p>
                     <p><a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1__G1032380" title="This table describes the URIType member functions.">Table 32-1</a> lists the <code class="codeph">URIType</code> PL/SQL methods. In addition, each of the subtypes has a constructor with the same name as the subtype.
                     </p>
                     <div class="tblformal" id="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1__G1032380">
                        <p class="titleintable">Table 32-1 URIType PL/SQL Methods </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="URIType PL/SQL Methods " summary="This table describes the URIType member functions." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d157948e771">URIType Method</th>
                                 <th align="left" valign="bottom" width="79%" id="d157948e774">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e779" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getURL()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e779 d157948e774 ">
                                    <p>Returns the URL of the <code class="codeph">URIType</code> instance. 
                                    </p>
                                    <p>Use this method instead of referencing a URL directly. <code class="codeph">URIType</code> subtypes override this method to provide the correct URL. For example, <code class="codeph">HTTPURIType</code> stores a URL without prefix <code class="codeph">http://</code>. Method <code class="codeph">getURL()</code> then prepends the prefix and returns the entire URL.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e803" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getExternalURL()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e803 d157948e774 ">
                                    <p>Similar to <code class="codeph">getURL()</code>, but <code class="codeph">getExternalURL()</code> escapes characters in the URL, to conform with the URL specification. For example, spaces are converted to the escaped value <code class="codeph">%20</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e819" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getContentType()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e819 d157948e774 ">
                                    <p>Returns the MIME content type for the URI. </p>
                                    <p><span class="italic">HTTPUri:</span> To return the content type, the URL is followed and the MIME header examined.
                                    </p>
                                    <p><span class="italic">DBUri: </span>The returned content type is either <code class="codeph">text/plain</code> (for a scalar value) or <code class="codeph">text/xml</code> (otherwise).
                                    </p>
                                    <p><span class="italic">XDBUri:</span> The value of the <code class="codeph">ContentType</code> metadata property of the repository resource is returned.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e847" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getCLOB()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e847 d157948e774 ">
                                    <p>Returns the target of the URI as a <code class="codeph">CLOB</code> instance. The database character set is used for encoding the data.
                                    </p>
                                    <p><span class="italic">DBUri:</span> <span class="italic">XML</span> data is returned (unless node-test <code class="codeph">text()</code> is used, in which case the targeted data is returned as is). When a <code class="codeph">BLOB</code> column is targeted, the binary data in the column is <span class="italic">translated as hexadecimal character data</span>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e873" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getBLOB()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e873 d157948e774 ">
                                    <p>Returns the target of the URI as a <code class="codeph">BLOB</code> value. No character conversion is performed, and the character encoding is that of the URI target. This method can also be used to fetch binary data.
                                    </p>
                                    <p><span class="italic">DBUri:</span> When applied to a DBUri that targets a <code class="codeph">BLOB</code> column, <code class="codeph">getBLOB()</code> returns the binary data <span class="italic">translated as hexadecimal character data</span>. When applied to a DBUri that targets <span class="italic">non</span>-binary data, the data is returned in the database character set.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e899" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">getXML()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e899 d157948e774 ">
                                    <p>Returns the target of the URI as an <code class="codeph">XMLType</code> instance. Using this, an application that performs operations other than <code class="codeph">getCLOB()</code> and <code class="codeph">getBLOB()</code> can use <code class="codeph">XMLType</code> methods to do those operations. This throws an exception if the URI does not target a well-formed XML document.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d157948e918" headers="d157948e771 "><pre class="oac_no_warn" dir="ltr">createURI()</pre></td>
                                 <td align="left" valign="top" width="79%" headers="d157948e918 d157948e774 ">
                                    <p>Constructs an instance of one of the <code class="codeph">URIType</code> subtypes.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-184D639E-8F1A-455D-8709-84123F42C10E">HTTPURIType PL/SQL Method GETCONTENTTYPE()</a><br><code class="codeph">HTTPURIType</code> PL/SQL method <code class="codeph">getContentType()</code> returns the MIME information for its targeted document. You can use this information to decide whether to retrieve the document as a <code class="codeph">BLOB</code> instance or a <code class="codeph">CLOB</code> instance. 
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4">DBURIType PL/SQL Method GETCONTENTTYPE()</a><br>PL/SQL method <code class="codeph">getContentType()</code> returns the MIME information for a URL. If a DBUri targets a scalar value, then the MIME content type returned is <code class="codeph">text/plain</code>. Otherwise, the type returned is <code class="codeph">text/xml</code>.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE">DBURIType PL/SQL Method GETCLOB()</a><br>When PL/SQL method <code class="codeph">getCLOB()</code> is applied to a DBUri, the targeted data is returned as <span class="italic">XML</span> data, using the targeted column or table name as an XML element name. If the target XPath uses node-test <code class="codeph">text()</code> then the data is returned as text without an enclosing XML tag. 
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF">DBURIType PL/SQL Method GETBLOB()</a><br>When applied to a DBUri that targets a <code class="codeph">BLOB</code> column, PL/SQL method <code class="codeph">getBLOB()</code> returns the binary data <span class="italic">translated as hexadecimal character data</span>. When applied to a DBUri that targets <span class="italic">non</span>-binary data, method <code class="codeph">getBLOB()</code> returns the data (as a <code class="codeph">BLOB</code> value) in the database character set.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-D141D949-19B4-4759-9187-5A0D010A0CA1__GUID-62F5582C-9626-46F3-977F-E00869844A20">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/Database-URI-TYPEs.html#ARPLS800" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F1EC54E6-614C-45EC-B5FA-973E127B8B02" title="You can represent paths of various kinds as database objects. These provide unified access to data stored inside and outside the server, and they can be used to map URIs in XML documents to database columns, letting documents reference data stored in relational columns and expose it externally.">URIType and its Subtypes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5231"></a><a id="ADXDB5230"></a><div class="props_rev_3"><a id="GUID-184D639E-8F1A-455D-8709-84123F42C10E" name="GUID-184D639E-8F1A-455D-8709-84123F42C10E"></a><h5 id="ADXDB-GUID-184D639E-8F1A-455D-8709-84123F42C10E" class="sect5"><span class="enumeration_section">32.3.2.1 </span>HTTPURIType PL/SQL Method GETCONTENTTYPE()
                     </h5>
                     <div>
                        <p><code class="codeph">HTTPURIType</code> PL/SQL method <code class="codeph">getContentType()</code> returns the MIME information for its targeted document. You can use this information to decide whether to retrieve the document as a <code class="codeph">BLOB</code> instance or a <code class="codeph">CLOB</code> instance. 
                        </p>
                        <p>For example, you might treat a Web page with a MIME type of <code class="codeph">x/jpeg </code>as a <code class="codeph">BLOB</code> instance, and one with a MIME type of <code class="codeph">text/plain</code> or <code class="codeph">text/html</code> as a <code class="codeph">CLOB</code> instance.
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-184D639E-8F1A-455D-8709-84123F42C10E__CBAFDAFH">Example 32-1</a> tests the HTTP content type to determine whether to retrieve data as a <code class="codeph">CLOB</code> or <code class="codeph">BLOB</code> instance. The content-type data is the HTTP header, for <code class="codeph">HTTPURIType</code>, or the metadata of the database column, for <code class="codeph">DBURIType</code>. 
                        </p>
                        <div class="example" id="GUID-184D639E-8F1A-455D-8709-84123F42C10E__CBAFDAFH">
                           <p class="titleinexample">Example 32-1 Using HTTPURIType PL/SQL Method GETCONTENTTYPE()</p><pre class="pre codeblock"><code>DECLARE
  httpuri HTTPURIType;
  y CLOB;
  x BLOB;
BEGIN
  httpuri := HTTPURIType('http://www.oracle.com/index.html');
  DBMS_OUTPUT.put_line(httpuri.<span class="bold">getContentType</span>());
  IF httpuri.getContentType() = 'text/html'
  THEN
     y := httpuri.getCLOB();
  END IF;
  IF httpuri.getContentType() = 'application-x/bin'
  THEN
     x := httpuri.getBLOB();
  END IF;
END;
/
<span class="bold">text/html</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="Abstract object type URIType includes PL/SQL methods that can be used with each of its subtypes. Each of these methods can be overridden by any of the subtypes.">URIType PL/SQL Methods</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5232"></a><div class="props_rev_3"><a id="GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4" name="GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4"></a><h5 id="ADXDB-GUID-4BC0E2A9-C10B-4FE1-9E36-53C6DB3B79E4" class="sect5"><span class="enumeration_section">32.3.2.2 </span>DBURIType PL/SQL Method GETCONTENTTYPE()
                     </h5>
                     <div>
                        <p>PL/SQL method <code class="codeph">getContentType()</code> returns the MIME information for a URL. If a DBUri targets a scalar value, then the MIME content type returned is <code class="codeph">text/plain</code>. Otherwise, the type returned is <code class="codeph">text/xml</code>.
                        </p><pre class="pre codeblock"><code>CREATE TABLE dbtab (a VARCHAR2(20), b BLOB);
</code></pre><p>DBUris corresponding to the following XPath expressions have content type <code class="codeph">text/xml</code>, because each targets a complete column of XML data.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">/HR/DBTAB/ROW/A</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">/HR/DBTAB/ROW/B</code></p>
                           </li>
                        </ul>
                        <p>DBUris corresponding to the following XPath expressions have content type <code class="codeph">text/plain</code>, because each targets a scalar value.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">/HR/DBTAB/ROW/A/text()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">/HR/DBTAB/ROW/B/text()</code></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="Abstract object type URIType includes PL/SQL methods that can be used with each of its subtypes. Each of these methods can be overridden by any of the subtypes.">URIType PL/SQL Methods</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5233"></a><div class="props_rev_3"><a id="GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE" name="GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE"></a><h5 id="ADXDB-GUID-3CDCAFBB-BEB2-4684-BB2A-8058CB72FECE" class="sect5"><span class="enumeration_section">32.3.2.3 </span>DBURIType PL/SQL Method GETCLOB()
                     </h5>
                     <div>
                        <p>When PL/SQL method <code class="codeph">getCLOB()</code> is applied to a DBUri, the targeted data is returned as <span class="italic">XML</span> data, using the targeted column or table name as an XML element name. If the target XPath uses node-test <code class="codeph">text()</code> then the data is returned as text without an enclosing XML tag. 
                        </p>
                        <p>In both cases, the returned data is in the database character set.</p>
                        <p>For example: If applied to a DBUri with XPath <code class="codeph">/HR/DBTAB/ROW/A/text(),</code> where <code class="codeph">A</code> is a non-binary column, the data in column <code class="codeph">A</code> is returned as is. Without XPath node-test <code class="codeph">text()</code>, the result is the data wrapped in XML:
                        </p><pre class="pre codeblock"><code>&lt;HR&gt;&lt;DBTAB&gt;&lt;ROW&gt;&lt;A&gt;<span class="italic">...data_in_column_A...</span>&lt;/A&gt;&lt;/ROW&gt;&lt;/DBTAB&gt;&lt;/HR&gt;
</code></pre><p>When applied to a DBUri that targets a <span class="italic">binary</span> (<code class="codeph">BLOB</code>) column, the binary data in the column is <span class="italic">translated as hexadecimal character data</span>. 
                        </p>
                        <p>For example: If applied to a DBUri with XPath <code class="codeph">/HR/DBTAB/ROW/B/text(),</code> where <code class="codeph">B</code> is a <code class="codeph">BLOB</code> column, the targeted binary data is translated to hexadecimal character data and returned. Without XPath node-test <code class="codeph">text()</code>, the result is the translated data wrapped in XML: 
                        </p><pre class="pre codeblock"><code>&lt;HR&gt;&lt;DBTAB&gt;&lt;ROW&gt;&lt;B&gt;<span class="italic">...data_translated_to_hex...</span>&lt;/B&gt;&lt;/ROW&gt;&lt;/DBTAB&gt;&lt;/HR&gt;</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="Abstract object type URIType includes PL/SQL methods that can be used with each of its subtypes. Each of these methods can be overridden by any of the subtypes.">URIType PL/SQL Methods</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5234"></a><div class="props_rev_3"><a id="GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF" name="GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF"></a><h5 id="ADXDB-GUID-E33B9174-B16A-4D09-A8F9-DD595467E7EF" class="sect5"><span class="enumeration_section">32.3.2.4 </span>DBURIType PL/SQL Method GETBLOB()
                     </h5>
                     <div>
                        <p>When applied to a DBUri that targets a <code class="codeph">BLOB</code> column, PL/SQL method <code class="codeph">getBLOB()</code> returns the binary data <span class="italic">translated as hexadecimal character data</span>. When applied to a DBUri that targets <span class="italic">non</span>-binary data, method <code class="codeph">getBLOB()</code> returns the data (as a <code class="codeph">BLOB</code> value) in the database character set.
                        </p>
                        <p>For example, consider table <code class="codeph">dbtab</code>:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dbtab (a VARCHAR2(20), b BLOB);
</pre><p>When <code class="codeph">getBLOB()</code> is applied to a DBUri corresponding to XPath expression <code class="codeph">/HR/DBTAB/ROW/B</code>, it returns a <code class="codeph">BLOB</code> value containing an XML document with root element <code class="codeph">B</code> whose content is the hexadecimal-character translation of the binary data of column <code class="codeph">B</code>.
                        </p>
                        <p>When <code class="codeph">getBLOB()</code> is applied to a DBUri corresponding to XPath expression <code class="codeph">/HR/DBTAB/ROW/B/text()</code>, it returns a <code class="codeph">BLOB</code> value containing only the hexadecimal-character translation of the binary data of column <code class="codeph">B</code>.
                        </p>
                        <p>When <code class="codeph">getBLOB()</code> is applied to a DBUri corresponding to XPath expression <code class="codeph">/HR/DBTAB/ROW/</code><span class="bold"><code class="codeph">A</code></span><code class="codeph">/text()</code>, which targets <span class="italic">non</span>-binary data, it returns a <code class="codeph">BLOB</code> value containing the data of column <code class="codeph">A</code>, in the database character set.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D141D949-19B4-4759-9187-5A0D010A0CA1" title="Abstract object type URIType includes PL/SQL methods that can be used with each of its subtypes. Each of these methods can be overridden by any of the subtypes.">URIType PL/SQL Methods</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5236"></a><a id="ADXDB5237"></a><a id="ADXDB5235"></a><div class="props_rev_3"><a id="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4" name="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4"></a><h3 id="ADXDB-GUID-888C6A6E-9642-4213-88D4-BBEED24458A4" class="sect3"><span class="enumeration_section">32.4 </span>Accessing Data Using URIType Instances
               </h3>
               <div>
                  <p>To use instances of <code class="codeph">URIType</code> subtypes for indirection, you store such instances in the database and then query to retrieve the targeted data with a PL/SQL method such as <code class="codeph">getCLOB()</code>. 
                  </p>
                  <div class="section">
                     <p>You can create database columns using <code class="codeph">URIType</code> or any of its subtypes, or you can store just the text of each URI as a string and then create the needed <code class="codeph">URIType</code> instances on demand, when the URIs are accessed. You can store objects of different <code class="codeph">URIType</code> subtypes in the same <code class="codeph">URIType</code> database column.
                     </p>
                     <p>You can also define your own object types that inherit from the <code class="codeph">URIType</code> subtypes. Deriving new types lets you use custom techniques to retrieve, transform, or filter data.
                     </p>
                     <p><a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__BABBACBF">Example 32-2</a> stores an HTTPUri and a DBUri (instances of <code class="codeph">URIType</code> subtypes <code class="codeph">HTTPURIType</code> and <code class="codeph">DBURIType</code>) in the same database column of type <code class="codeph">URIType</code>. A query retrieves the data addressed by each of the URIs. The first URI is a Web-page URL. The second URI references data in table <code class="codeph">employees</code> of standard database schema <code class="codeph">HR</code>. (For brevity, only the beginning of the Web page is shown.)
                     </p>
                     <p>To use <code class="codeph">URIType</code> PL/SQL method <code class="codeph">createURI()</code>, you must know the particular <code class="codeph">URIType</code> subtype to use. PL/SQL method <code class="codeph">getURI()</code> of package <code class="codeph">URIFACTORY</code> lets you instead use the flexibility of late binding, determining the particular type information at run time. 
                     </p>
                     <p>PL/SQL factory method <code class="codeph">URIFACTORY.getURI()</code> takes as argument a URI string. It returns a <code class="codeph">URIType</code> instance of the appropriate subtype (<code class="codeph">HTTPURIType, DBURIType,</code> or <code class="codeph">XDBURIType</code>), based on the form of the URI string:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the URI starts with <code class="codeph">http://</code>, then <code class="codeph">getURI()</code> creates and returns an HTTPUri.
                           </p>
                        </li>
                        <li>
                           <p>If the URI starts with either <code class="codeph">/oradb/</code> or <code class="codeph">/dburi/</code>, then <code class="codeph">getURI()</code> creates and returns a DBUri.
                           </p>
                        </li>
                        <li>
                           <p>Otherwise, <code class="codeph">getURI()</code> creates and returns an XDBUri.
                           </p>
                        </li>
                     </ul>
                     <p><a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__CBABEBGC">Example 32-3</a> is similar to <a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__BABBACBF">Example 32-2</a>, but it uses two different ways to obtain documents targeted by URIs:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>PL/SQL method <code class="codeph">SYS.URIFACTORY.getURI()</code> with <span class="italic">absolute</span> URIs:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>an HTTPUri that targets HTTP address <code class="codeph">http://www.oracle.com</code></p>
                              </li>
                              <li>
                                 <p>a DBUri that targets database address <code class="codeph">/oradb/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Constructor <code class="codeph">SYS.HTTPURIType()</code> with a <span class="italic">relative</span> URL (no <code class="codeph">http://</code>). The same HTTPUri is used as for the absolute URI: the Oracle home page.
                           </p>
                        </li>
                     </ul>
                     <p>In <a href="data-access-using-URIs.html#GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__CBABEBGC">Example 32-3</a>, the URI strings passed to <code class="codeph">getURI()</code> are hard-coded, but they could just as easily be string values that are obtained by an application at run time.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__BABBACBF">
                     <p class="titleinexample">Example 32-2 Creating and Querying a URI Column</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (url URIType);
Table created.
 
INSERT INTO uri_tab VALUES (<span class="bold">HTTPURIType.createURI</span>('http://www.oracle.com'));
1 row created.
 
INSERT INTO uri_tab VALUES (<span class="bold">DBURIType.createURI</span>(
                              '/HR/EMPLOYEES/ROW[FIRST_NAME="Jack"]'));
1 row created.
 
SELECT e.url.getCLOB() FROM uri_tab e;
 
E.URL.GETCLOB()
-------------------------------------------------------------------
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;
<span class="bold">. . .</span>
 
&lt;?xml version="1.0"?&gt;
 &lt;ROW&gt;
  &lt;EMPLOYEE_ID&gt;177&lt;/EMPLOYEE_ID&gt;
  &lt;FIRST_NAME&gt;Jack&lt;/FIRST_NAME&gt;
  &lt;LAST_NAME&gt;Livingston&lt;/LAST_NAME&gt;
  &lt;EMAIL&gt;JLIVINGS&lt;/EMAIL&gt;
  &lt;PHONE_NUMBER&gt;011.44.1644.429264&lt;/PHONE_NUMBER&gt;
  &lt;HIRE_DATE&gt;23-APR-06&lt;/HIRE_DATE&gt;
  &lt;JOB_ID&gt;SA_REP&lt;/JOB_ID&gt;
  &lt;SALARY&gt;8400&lt;/SALARY&gt;
  &lt;COMMISSION_PCT&gt;.2&lt;/COMMISSION_PCT&gt;
  &lt;MANAGER_ID&gt;149&lt;/MANAGER_ID&gt;
  &lt;DEPARTMENT_ID&gt;80&lt;/DEPARTMENT_ID&gt;
 &lt;/ROW&gt;
 
2 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-888C6A6E-9642-4213-88D4-BBEED24458A4__CBABEBGC">
                     <p class="titleinexample">Example 32-3 Using Different Kinds of URI, Created in Different Ways</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (docUrl SYS.URIType, docName VARCHAR2(200));
Table created.
 
-- Insert an HTTPUri with absolute URL into SYS.URIType using URIFACTORY.
-- The target is Oracle home page.
INSERT INTO uri_tab VALUES
  (SYS.URIFACTORY.<span class="bold">getURI</span>('http://www.oracle.com'), '<span class="bold">AbsURL</span>');
1 row created.
 
-- Insert an HTTPUri with relative URL using constructor SYS.HTTPURIType.
-- Note the absence of prefix http://. The target is the same.
INSERT INTO uri_tab VALUES (SYS.<span class="bold">HTTPURIType</span>('www.oracle.com'), '<span class="bold">RelURL</span>');
1 row created.

-- Insert a DBUri that targets employee data from table HR.employees.
INSERT INTO uri_tab VALUES
  (SYS.URIFACTORY.<span class="bold">getURI</span>('/oradb/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]'), '<span class="bold">Emp200</span>');
1 row created.

-- Extract all of the documents.
SELECT e.docUrl.getCLOB(), docName FROM uri_tab e;
 
E.DOCURL.GETCLOB()
-----------------
DOCNAME
------------------------------------
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;
<span class="bold">. . .</span>
<span class="bold">AbsURL</span>
 
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;
<span class="bold">. . .</span>
<span class="bold">RelURL</span>

&lt;?xml version="1.0"?&gt;
 &lt;ROW&gt;
  &lt;EMPLOYEE_ID&gt;200&lt;/EMPLOYEE_ID&gt;
  &lt;FIRST_NAME&gt;Jennifer&lt;/FIRST_NAME&gt;
  &lt;LAST_NAME&gt;Whalen&lt;/LAST_NAME&gt;
  &lt;EMAIL&gt;JWHALEN&lt;/EMAIL&gt;
  &lt;PHONE_NUMBER&gt;515.123.4444&lt;/PHONE_NUMBER&gt;
  &lt;HIRE_DATE&gt;17-SEP-03&lt;/HIRE_DATE&gt;
  &lt;JOB_ID&gt;AD_ASST&lt;/JOB_ID&gt;
  &lt;SALARY&gt;4400&lt;/SALARY&gt;
  &lt;MANAGER_ID&gt;101&lt;/MANAGER_ID&gt;
  &lt;DEPARTMENT_ID&gt;10&lt;/DEPARTMENT_ID&gt;
 &lt;/ROW&gt;
<span class="bold">Emp200</span>

3 rows selected.
 
-- In PL/SQL
CREATE OR REPLACE FUNCTION returnclob
  RETURN CLOB
  IS a SYS.URIType;
BEGIN
  SELECT docUrl INTO a FROM uri_Tab WHERE docName LIKE '<span class="bold">Emp200</span>%';
  RETURN a.getCLOB;
END;
/
Function created.
 
SELECT returnclob() FROM DUAL;
 
RETURNCLOB()
---------------------------------------------------------------
&lt;?xml version="1.0"?&gt;
 &lt;ROW&gt;
  &lt;EMPLOYEE_ID&gt;200&lt;/EMPLOYEE_ID&gt;
  &lt;FIRST_NAME&gt;Jennifer&lt;/FIRST_NAME&gt;
  &lt;LAST_NAME&gt;Whalen&lt;/LAST_NAME&gt;
  &lt;EMAIL&gt;JWHALEN&lt;/EMAIL&gt;
  &lt;PHONE_NUMBER&gt;515.123.4444&lt;/PHONE_NUMBER&gt;
  &lt;HIRE_DATE&gt;17-SEP-03&lt;/HIRE_DATE&gt;
  &lt;JOB_ID&gt;AD_ASST&lt;/JOB_ID&gt;
  &lt;SALARY&gt;4400&lt;/SALARY&gt;
  &lt;MANAGER_ID&gt;101&lt;/MANAGER_ID&gt;
  &lt;DEPARTMENT_ID&gt;10&lt;/DEPARTMENT_ID&gt;
 &lt;/ROW&gt;
 
1 row selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="You can define your own subtypes of URIType that correspond to particular protocols. You can use PL/SQL package URIFACTORY to obtain the URI of a URIType instance, escape characters in a URI string or remove such escaping, and register or unregister a type name for handling a given URL.">Create New Subtypes of URIType Using Package URIFACTORY</a></li>
                        <li><a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D" title="You can apply XSL transformations to XML Schema-based documents using the built-in Oracle XML&nbsp;DB XSLT processor. In-database XML-specific optimizations can significantly reduce the memory required, eliminate the overhead associated with parsing, and reduce network traffic.">XSL Transformation and Oracle XML&nbsp;DB</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5238"></a><div class="props_rev_3"><a id="GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" name="GUID-62CFB196-932C-4193-B4FA-D9762778DEA0"></a><h3 id="ADXDB-GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" class="sect3"><span class="enumeration_section">32.5 </span>XDBUris: Pointers to Repository Resources
               </h3>
               <div>
                  <p><code class="codeph">XDBURIType</code> is a subtype of <code class="codeph">URIType</code> that exposes resources in Oracle XML&nbsp;DB Repository using URIs. Instances of object type <code class="codeph">XDBURIType</code> are called <strong class="term">XDBUris</strong>.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E">XDBUri URI Syntax</a><br>The URL portion of an XDBUri URI is the hierarchical address of the targeted repository resource &#x2013; it is a <span class="italic">repository</span> path (<span class="italic">not</span> an XPath expression). An optional fragment portion of the URI, after the number-sign (<code class="codeph">#</code>), uses XPath syntax to target parts of an XML document.
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B">Using XDBUri: Examples</a><br>XDBUri examples here use URIs in a table to access a repository resource and, together with PL/SQL method <code class="codeph">getXML</code>, to query and retrieve XML documents.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5239"></a><div class="props_rev_3"><a id="GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E" name="GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E"></a><h4 id="ADXDB-GUID-37839CCF-A6FA-46C9-B7CD-6C2DDE27269E" class="sect4"><span class="enumeration_section">32.5.1 </span>XDBUri URI Syntax
                  </h4>
                  <div>
                     <p>The URL portion of an XDBUri URI is the hierarchical address of the targeted repository resource &#x2013; it is a <span class="italic">repository</span> path (<span class="italic">not</span> an XPath expression). An optional fragment portion of the URI, after the number-sign (<code class="codeph">#</code>), uses XPath syntax to target parts of an XML document.
                     </p>
                     <div class="section">
                        <p>The optional fragment portion of the URI is appropriate only if the targeted resource is an <span class="italic">XML</span> document, in which case the fragment portion targets one or more its parts. If the targeted resource is not an XML document, then omit the fragment and number-sign.
                        </p>
                        <p>The following are examples of XDBUri URIs:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">/public/hr/image27.jpg</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">/public/hr/doc1.xml#/PurchaseOrder/LineItem</code></p>
                           </li>
                        </ul>
                        <p>Based on the form of these URIs:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">/public/hr</code> is a folder resource in Oracle XML&nbsp;DB Repository.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image27.jpg</code> and <code class="codeph">doc1.xml</code> are resources in folder <code class="codeph">/public/hr</code>.
                              </p>
                           </li>
                           <li>
                              <p>Resource <code class="codeph">doc1.xml</code> is a file resource, and it contains an XML document.
                              </p>
                           </li>
                           <li>
                              <p>The XPath expression /<code class="codeph">PurchaseOrder/LineItem</code> refers to the <code class="codeph">LineItem</code> child element in element <code class="codeph">PurchaseOrder</code> of XML document <code class="codeph">doc1.xml</code>.
                              </p>
                           </li>
                        </ul>
                        <p>You can create an XDBUri using PL/SQL method <code class="codeph">getURI()</code> of package <code class="codeph">URIFACTORY</code>.
                        </p>
                        <p><code class="codeph">XDBURIType</code> is the <span class="italic">default</span> <code class="codeph">URIType</code> used when generating instances using <code class="codeph">URIFACTORY</code> PL/SQL method <code class="codeph">getURI()</code>, unless the URI has one of the recognized prefixes <code class="codeph">http://</code>, <code class="codeph">/dburi</code>, or <code class="codeph">/oradb</code>.
                        </p>
                        <p>For example, if resource <code class="codeph">doc1.xml</code> is present in repository folder <code class="codeph">/public/hr</code>, then the following query returns an XDBUri that targets that resource. 
                        </p><pre class="pre codeblock"><code>SELECT SYS.URIFACTORY.getURI('/public/hr/doc1.xml') FROM DUAL;
</code></pre><p>It is the lack of a special prefix that determines that the object type is <code class="codeph">XDBURIType</code>, not any particular resource file extension or the presence of <code class="codeph">#</code> followed by an XPath expression. Even if the resource were named <code class="codeph">foo.bar</code> instead of <code class="codeph">doc1.xml</code>, the returned <code class="codeph">URIType</code> instance would still be an XDBUri.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" title="XDBURIType is a subtype of URIType that exposes resources in Oracle XML&nbsp;DB Repository using URIs. Instances of object type XDBURIType are called XDBUris.">XDBUris: Pointers to Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5241"></a><a id="ADXDB5242"></a><a id="ADXDB5240"></a><div class="props_rev_3"><a id="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B" name="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B"></a><h4 id="ADXDB-GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B" class="sect4"><span class="enumeration_section">32.5.2 </span>Using XDBUri: Examples
                  </h4>
                  <div>
                     <p>XDBUri examples here use URIs in a table to access a repository resource and, together with PL/SQL method <code class="codeph">getXML</code>, to query and retrieve XML documents.
                     </p>
                     <div class="section">
                        <p><a href="data-access-using-URIs.html#GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAHDCAA">Example 32-4</a> creates an XDBUri, inserts values into a purchase-order table, and then selects all of the purchase orders. Because there is no special prefix used in the URI passed to <code class="codeph">URIFACTORY.getURI()</code>, the created <code class="codeph">URIType</code> instance is an XDBUri.
                        </p>
                        <p>Because PL/SQL method <code class="codeph">getXML()</code> returns an <code class="codeph">XMLType</code> instance, you can use it with SQL/XML functions such as <code class="codeph">XMLQuery</code>. The query in <a href="data-access-using-URIs.html#GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAEABDF">Example 32-5</a> illustrates this. The query retrieves all purchase orders numbered 999.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAHDCAA">
                        <p class="titleinexample">Example 32-4 Access a Repository Resource by URI Using an XDBUri</p><pre class="pre codeblock"><code>DECLARE
res BOOLEAN;
postring VARCHAR2(100):= '&lt;?xml version="1.0"?&gt;
&lt;ROW&gt;
&lt;PO&gt;999&lt;/PO&gt;
&lt;/ROW&gt;';
BEGIN
res:=DBMS_XDB_REPOS.createFolder('/public/orders/');
res:=DBMS_XDB_REPOS.createResource('/public/orders/po1.xml', postring);
END;
/
PL/SQL procedure successfully completed.
 
CREATE TABLE uri_tab (poUrl SYS.URIType, poName VARCHAR2(1000));
Table created.
 
-- Create an abstract type column so any type of URI can be used
-- Insert an absolute URL into poUrl.
-- The factory will create an XDBURIType because there is no prefix.
-- Here, po1.xml is an XML file that is stored in /public/orders/
-- of the XML repository.
INSERT INTO uri_tab VALUES
  (URIFACTORY.getURI('/public/orders/po1.xml'), 'SomePurchaseOrder');
1 row created.
 
-- Get all the purchase orders
SELECT e.poUrl.getCLOB(), poName FROM uri_tab e;
 
E.POURL.GETCLOB()
-----------------
PONAME
------
&lt;?xml version="1.0"?&gt;
&lt;ROW&gt;
&lt;PO&gt;999&lt;/PO&gt;
&lt;/ROW&gt;
SomePurchaseOrder
 
1 row selected.
 
-- Using PL/SQL, you can access table uri_tab as follows:
CREATE OR REPLACE FUNCTION returnclob
  RETURN CLOB
  IS a URIType;
BEGIN
  -- Get absolute URL for purchase order named like 'Some%'
   SELECT poUrl INTO a FROM uri_tab WHERE poName LIKE 'Some%';
   RETURN a.getCLOB();
END;
/ 
Function created.
 
SELECT returnclob() FROM DUAL;
 
RETURNCLOB()
---------------------
&lt;?xml version="1.0"?&gt;
&lt;ROW&gt;
&lt;PO&gt;999&lt;/PO&gt;
&lt;/ROW&gt;
 
1 row selected.
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-855A4F8C-95B9-49BC-89DA-7130E07E7E9B__CBAEABDF">
                        <p class="titleinexample">Example 32-5 Using PL/SQL Method GETXML with XMLCAST and XMLQUERY </p><pre class="pre codeblock"><code>SELECT e.poUrl.getCLOB() FROM uri_tab e
  WHERE XMLCast(XMLQuery('$po/ROW/PO'
                         PASSING e.poUrl.getXML() AS "po"
                         RETURNING CONTENT)
                AS VARCHAR2(24))
        = '999';

E.POURL.GETCLOB()
---------------------
&lt;?xml version="1.0"?&gt;
&lt;ROW&gt;
&lt;PO&gt;999&lt;/PO&gt;
&lt;/ROW&gt;
 
1 row selected.</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-62CFB196-932C-4193-B4FA-D9762778DEA0" title="XDBURIType is a subtype of URIType that exposes resources in Oracle XML&nbsp;DB Repository using URIs. Instances of object type XDBURIType are called XDBUris.">XDBUris: Pointers to Repository Resources</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5243"></a><div class="props_rev_3"><a id="GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" name="GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B"></a><h3 id="ADXDB-GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" class="sect3"><span class="enumeration_section">32.6 </span>DBUris: Pointers to Database Data
               </h3>
               <div>
                  <p>A DBUri is a URI that targets <span class="italic">database data</span>. As for all instances of <code class="codeph">URIType</code> subtypes, a DBUri provides indirect access to data. <code class="codeph">DBURIType</code> also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Address database data using XPath notation. This, in effect, lets you visualize and access the database as if it were XML data.</p>
                        <p>For example, a DBUri can use an expression such as <code class="codeph">/HR/EMPLOYEES/ROW[FIRST_NAME="Jack"]</code> to target the row of table <code class="codeph">HR.employees</code> where column <code class="codeph">first_name</code> has value <code class="codeph">Jack</code>.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Construct an XML document</span> that contains database data targeted by a DBUri and whose structure reflects the database structure.
                        </p>
                        <p>For example: A DBUri with XPath <code class="codeph">/HR/DBTAB/ROW/A</code> can be used to construct an XML document that wraps the data of column <code class="codeph">A</code> in XML elements that reflect the database structure and are named accordingly:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;HR&gt;&lt;DBTAB&gt;&lt;ROW&gt;&lt;A&gt;<span class="italic">...data_in_column_A...</span>&lt;/A&gt;&lt;/ROW&gt;&lt;/DBTAB&gt;&lt;/HR&gt;
</pre></li>
                  </ul>
                  <p>A DBUri does not reference a global location as does an HTTPUri. You can, however, also access objects addressed by a DBUri in a global manner, by appending the DBUri to an HTTPUri that identifies a servlet that handles DBUris &#x2013; see <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a> .
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-B091D77A-9774-4BD4-9D83-274377D35B4A">View the Database as XML Data</a><br>Using <code class="codeph">DBURIType</code>, you can have what amounts to <span class="italic">XML</span> views of the portions of the database to which you have access, presented <span class="italic">in the form of XML data</span>. When visualized this way, the database data is effectively wrapped in XML elements, resulting in one or more XML documents.
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-5243076D-6390-4DCE-83D1-852E3E98109E">DBUri URI Syntax</a><br>An XPath expression is a path into XML data that addresses one or more nodes. A DBUri exploits virtual XML visualization of the database to use a <span class="italic">simple form</span> of XPath expression as a URI to address database data. This is so, whether or not the data is XML. 
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22">DBUris are Scoped to a Database and Session</a><br>A DBUri is scoped to a given database session, so the same DBUri can give different results in the same query, depending on the session context (which user is connected and what privileges the user has).
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0">Using DBUris Examples</a><br>A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5245"></a><a id="ADXDB5244"></a><div class="props_rev_3"><a id="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A" name="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A"></a><h4 id="ADXDB-GUID-B091D77A-9774-4BD4-9D83-274377D35B4A" class="sect4"><span class="enumeration_section">32.6.1 </span>View the Database as XML Data
                  </h4>
                  <div>
                     <p>Using <code class="codeph">DBURIType</code>, you can have what amounts to <span class="italic">XML</span> views of the portions of the database to which you have access, presented <span class="italic">in the form of XML data</span>. When visualized this way, the database data is effectively wrapped in XML elements, resulting in one or more XML documents.
                     </p>
                     <p>You can access only those database schemas to which you have been granted access privileges. This portion of the database is, in effect, your own view of the database. This applies to all kinds database data, not just data that is stored as XML.</p>
                     <p>Such "XML views" are not database views, in the technical sense of the term. "View" here means only an abstract perspective that can be useful for understanding <code class="codeph">DBURIType</code>. You can think of <code class="codeph">DBURIType</code> as providing a way to visualize and access the database <span class="italic">as if it were</span> XML data. 
                     </p>
                     <p>However, <code class="codeph">DBURIType</code> does not just provide an exercise in visualization and an additional means to access database data. Each "XML view" can be realized as an XML document &#x2013; that is, you can use <code class="codeph">DBURIType</code> to generate XML documents using database data. 
                     </p>
                     <p>All of this is another way of saying that <code class="codeph">DBURIType</code> lets you use XPath notation to 1) address and access any database data to which you have access and 2) construct XML representations of that data.
                     </p>
                     <p><a href="data-access-using-URIs.html#GUID-B091D77A-9774-4BD4-9D83-274377D35B4A__I1030162">Figure 32-1</a> illustrates the relation between a relational table, <code class="codeph">HR.employees</code>, a corresponding XML view of a portion of that table, and the corresponding DBUri URI (a simple XPath expression). In this case, the portion of the data exposed as XML is the row where <code class="codeph">employee_id</code> is <code class="codeph">200</code>. The URI can be used to access the data and construct an XML document that reflects the "XML view".
                     </p>
                     <div class="figure" id="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A__I1030162">
                        <p class="titleinfigure">Figure 32-1 A DBUri Corresponds to an XML Visualization of Relational Data</p><img src="img/adxdb053.gif" width="567" alt="Description of Figure 32-1 follows" title="Description of Figure 32-1 follows" longdesc="img_text/adxdb053.html"><br><a href="img_text/adxdb053.html">Description of "Figure 32-1 A DBUri Corresponds to an XML Visualization of Relational Data"</a></div>
                     <!-- class="figure" -->
                     <p>The XML elements in the "XML view" and the steps in the URI XPath expression both reflect the database table and column names. Note the use of <span class="bold"><code class="codeph">ROW</code></span> to indicate a row in the database table &#x2013; both in the "XML view" and in the URI XPath expression.
                     </p>
                     <p>Note also that the XPath expression contains a root-element step, <span class="bold"><code class="codeph">oradb</code></span>. This is used to indicate that the URI corresponds to a DBUri, not an HTTPUri or an XDBUri. Whenever this correspondence is understood from context, this XPath step can be skipped. For example, if it is known that the path in question is a path to database data, the following URIs are equivalent:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold"><code class="codeph">/oradb</code></span><code class="codeph">/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/LAST_NAME</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/LAST_NAME</code></p>
                        </li>
                     </ul>
                     <p>Whenever the URI context is not clear, however, you must use the prefix <code class="codeph">/oradb</code> to distinguish a URI as corresponding to a DBUri. In particular, you must supply the prefix to <code class="codeph">URIFACTORY</code> PL/SQL methods and to DBUriServlet.
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="You can define your own subtypes of URIType that correspond to particular protocols. You can use PL/SQL package URIFACTORY to obtain the URI of a URIType instance, escape characters in a URI string or remove such escaping, and register or unregister a type name for handling a given URL.">Create New Subtypes of URIType Using Package URIFACTORY</a></li>
                           <li><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B091D77A-9774-4BD4-9D83-274377D35B4A__GUID-D55C9620-5591-452B-81F0-6EFAD123DE40">
                        <p class="notep1">See Also:</p>
                        <p><a href="generation-of-XML-data-from-relational-data.html#GUID-3BEB9A88-8B44-4AA3-89F4-8CBF6F8FA686" title="Oracle XML&nbsp;DB provides features for generating (constructing) XML data from relational data in the database. There are both SQL/XML standard functions and Oracle-specific functions and packages for generating XML data from relational content.">Generation of XML Data from Relational Data</a> for other ways to generate XML from database data
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="A DBUri is a URI that targets database data. As for all instances of URIType subtypes, a DBUri provides indirect access to data. DBURIType also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.">DBUris: Pointers to Database Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5246"></a><div class="props_rev_3"><a id="GUID-5243076D-6390-4DCE-83D1-852E3E98109E" name="GUID-5243076D-6390-4DCE-83D1-852E3E98109E"></a><h4 id="ADXDB-GUID-5243076D-6390-4DCE-83D1-852E3E98109E" class="sect4"><span class="enumeration_section">32.6.2 </span>DBUri URI Syntax
                  </h4>
                  <div>
                     <p>An XPath expression is a path into XML data that addresses one or more nodes. A DBUri exploits virtual XML visualization of the database to use a <span class="italic">simple form</span> of XPath expression as a URI to address database data. This is so, whether or not the data is XML. 
                     </p>
                     <div class="section">
                        <p>Thus, for <code class="codeph">DBURIType</code>, Oracle Database supports only a subset of the full XPath or XPointer syntax. There are no syntax restrictions for <span class="italic"><span class="bold">X</span></span>DBUri XPath expressions. There is also an exception in the DBUri case: data in <code class="codeph">XMLType</code> tables. For an <code class="codeph">XMLType</code> table, the simple XPath form is used to address the table itself within the database. Then, to address particular XML data in the table, the remainder of the XPath expression can use the full XPath syntax. This exception applies only to <code class="codeph">XMLType</code> <span class="italic">tables</span>, not to <code class="codeph">XMLType</code> columns.
                        </p>
                        <p>In any case, unlike an XDBUri, a DBUri URI does not use a number-sign (<code class="codeph">#</code>) to separate the URL portion of a URI from a fragment (XPath) portion. <code class="codeph">DBURIType</code> does not use URI fragments. Instead, the entire URI is treated as a (simple) XPath expression.
                        </p>
                        <p>You can create DBUris to any database data to which you have access. XPath expressions such as the following are allowed:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">/</code><span class="italic"><code class="codeph">database_schema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">table</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">/</code><span class="italic"><code class="codeph">database_schema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">table</code></span><code class="codeph">/ROW[</code><span class="italic"><code class="codeph">predicate_expression</code></span><code class="codeph">]/</code><span class="italic"><code class="codeph">column</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">/</code><span class="italic"><code class="codeph">database_schema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">table</code></span><code class="codeph">/ROW[</code><span class="italic"><code class="codeph">predicate_expression</code></span><code class="codeph">]/</code><span class="italic"><code class="codeph">object_column</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">attribute</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">/</code><span class="italic"><code class="codeph">database_schema</code></span><code class="codeph">/</code><span class="italic"><span class="bold"><code class="codeph">XMLType_table</code></span></span><code class="codeph">/ROW/</code><span class="italic"><code class="codeph">XPath_expression</code></span></p>
                           </li>
                        </ul>
                        <p>In the last case, <span class="italic"><code class="codeph">XMLType_table</code></span> is an <code class="codeph">XMLType</code> table, and <span class="italic"><code class="codeph">XPath_expression</code></span> is <span class="italic">any</span> XPath expression. For tables that are <span class="italic">not</span> <code class="codeph">XMLType</code>, a DBUri XPath expression must end at a column (it cannot address specific data inside a column). This restriction includes <code class="codeph">XMLType</code> columns, LOB columns, and <code class="codeph">VARCHAR2</code> columns that contain XML data.
                        </p>
                        <p>A DBUri XPath expression can do any of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Target an entire table. </p>
                              <p>For example, <code class="codeph">/HR/EMPLOYEES</code> targets table <code class="codeph">employees</code> of database schema <code class="codeph">HR</code>.
                              </p>
                           </li>
                           <li>
                              <p>Include XPath predicates at any step in the path, except the database schema and table steps. </p>
                              <p>For example, <code class="codeph">/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/EMAIL</code> targets column <code class="codeph">email</code> of table <code class="codeph">HR.employees</code>, where <code class="codeph">employee_id</code> is <code class="codeph">200</code>.
                              </p>
                           </li>
                           <li>
                              <p>Use the <code class="codeph">text()</code> XPath node test on data with scalar content. This is the <span class="italic">only</span> node test that can be used, and it cannot be used with the table or row step.
                              </p>
                           </li>
                        </ul>
                        <p>The following can be used in DBUri (XPath) <span class="italic">predicate</span> expressions:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Boolean operators <code class="codeph">and</code>, <code class="codeph">or</code>, and <code class="codeph">not</code></p>
                           </li>
                           <li>
                              <p>Relational operators <code class="codeph">&lt;</code>, <code class="codeph">&gt;</code>, <code class="codeph">&lt;=</code>, <code class="codeph">!=</code>, <code class="codeph">&gt;=</code>, <code class="codeph">=</code>, <code class="codeph">mod</code>, <code class="codeph">div</code>, <code class="codeph">*</code> (multiply)
                              </p>
                           </li>
                        </ul>
                        <p>A DBUri XPath expression <span class="italic">must</span> do all of the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use only the <span class="italic">child</span> XPath axis &#x2013; other axes, such as parent, are not allowed.
                              </p>
                           </li>
                           <li>
                              <p>Either specify a database schema or specify <code class="codeph">PUBLIC</code> to resolve the table name without a specific schema.
                              </p>
                           </li>
                           <li>
                              <p>Specify a database view or table name.</p>
                           </li>
                           <li>
                              <p>Include a <code class="codeph">ROW</code> step, if a database column is targeted.
                              </p>
                           </li>
                           <li>
                              <p>Identify a <span class="italic">single</span> data value, which can be an object-type instance or a collection.
                              </p>
                           </li>
                           <li>
                              <p>Result in well-formed XML when it is used to generate XML data using database data.</p>
                              <p>An example of a DBUri that does <span class="italic">not</span> result in well-formed XML is <code class="codeph">/HR/EMPLOYEES/ROW/LAST_NAME</code>. It returns more than one <code class="codeph">&lt;LAST_NAME&gt;</code> element fragment, with no single root element.
                              </p>
                           </li>
                           <li>
                              <p>Use <span class="italic">none</span> of the following:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">*</code> (wildcard)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">.</code> (self)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">..</code> (parent)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">//</code> (descendant or self)
                                    </p>
                                 </li>
                                 <li>
                                    <p>XPath functions, such as <code class="codeph">count</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>A DBUri XPath expression can optionally be prefixed by <span class="bold"><code class="codeph">/oradb</code></span> or <span class="bold"><code class="codeph">/dburi</code></span> (the two are equivalent) to distinguish it. This prefix is case-insensitive. However, the rest of the DBUri XPath expression is <span class="italic">case-sensitive</span>, as are XPath expressions generally. Thus, for example, to specify table <code class="codeph">HR.employees</code> as a DBUri XPath expression, you must use <code class="codeph">HR/EMPLOYEES</code>, not <code class="codeph">hr/employees</code> (or a mixed-case combination), because table and column names are uppercase, by default.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5243076D-6390-4DCE-83D1-852E3E98109E__GUID-AD68A903-D3B6-47AA-804F-959FC254D98B">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xpath" target="_blank">XML Path Language (XPath)</a> on XPath notation
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="A DBUri is a URI that targets database data. As for all instances of URIType subtypes, a DBUri provides indirect access to data. DBURIType also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.">DBUris: Pointers to Database Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5247"></a><div class="props_rev_3"><a id="GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22" name="GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22"></a><h4 id="ADXDB-GUID-44FF7A63-1218-4E15-B35F-FBE85B776B22" class="sect4"><span class="enumeration_section">32.6.3 </span>DBUris are Scoped to a Database and Session
                  </h4>
                  <div>
                     <p>A DBUri is scoped to a given database session, so the same DBUri can give different results in the same query, depending on the session context (which user is connected and what privileges the user has).</p>
                     <p>The content of the XML views you have of the database, and hence of the XML documents that you can construct, reflects the permissions you have for accessing particular database data at a given time. </p>
                     <p>To complicate things a bit, there is also an XML element <code class="codeph">PUBLIC</code>, under which database data is accessible without any database-schema qualification. This is a convenience feature, but it can also lead to some confusion if you forget that the XML views of the database for a given user depend on the specific access the user has to the database at a given time.
                     </p>
                     <p>XML element <code class="codeph">PUBLIC</code> corresponds to the use of a <span class="italic">public synonym</span>. For example, when queried by user <code class="codeph">quine</code>, the following query tries to match table <code class="codeph">foo</code> under database schema <code class="codeph">quine</code>, but if no such table exists, it tries to match a public synonym named <code class="codeph">foo</code>.
                     </p><pre class="pre codeblock"><code>SELECT * FROM foo;
</code></pre><p>In the same way, XML element <code class="codeph">PUBLIC</code> contains all of the database data visible to a given user and all of the data visible to that user through public synonyms. So, the same DBUri URI <code class="codeph">/PUBLIC/FOO</code> can resolve to <code class="codeph">quine.foo</code> when user <code class="codeph">quine</code> is connected, and resolve to <code class="codeph">curry.foo</code> when user <code class="codeph">curry</code> is connected.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="A DBUri is a URI that targets database data. As for all instances of URIType subtypes, a DBUri provides indirect access to data. DBURIType also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.">DBUris: Pointers to Database Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5248"></a><div class="props_rev_3"><a id="GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" name="GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0"></a><h4 id="ADXDB-GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" class="sect4"><span class="enumeration_section">32.6.4 </span>Using DBUris Examples
                  </h4>
                  <div>
                     <p>A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1">Targeting a Table Using a DBUri</a><br>An example uses a DBUri that targets a complete table. An XML document is returned that corresponds to the table contents. The top-level XML element is named for the table. The values of each row are enclosed in a <code class="codeph">ROW</code> element.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3">Targeting a Row in a Table Using a DBUri</a><br>An example uses a DBUri that targets a single table row. The XPath predicate expression identifies the single table row that corresponds to employee number 200. The result is an XML document with <code class="codeph">ROW</code> as the top-level element.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012">Targeting a Column Using a DBUri</a><br>You can target a given column, a given attribute of an object column, or an object column whose attributes have given values. Examples illustrate these possibilities.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45">Retrieving the Text Value of a Column Using a DBUri</a><br>In many cases, it can be useful to retrieve only the text values of a column and not the enclosing tags. For example, if XSLT stylesheets are stored in a <code class="codeph">CLOB</code> column, you can retrieve the document text without having any enclosing column-name tags. An example illustrates this.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90">Targeting a Collection Using a DBUri</a><br>You can target a database collection, such as an ordered collection table (OCT). You must, however, target the entire collection &#x2013; you cannot target individual members. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-8945A71D-EB81-4165-88DC-F84C9C466E6B" title="A DBUri is a URI that targets database data. As for all instances of URIType subtypes, a DBUri provides indirect access to data. DBURIType also lets you address database data using XPath and construct XML documents containing database data that is targeted by a DBUri that reflects the database structure.">DBUris: Pointers to Database Data</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5250"></a><a id="ADXDB5249"></a><div class="props_rev_3"><a id="GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1" name="GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1"></a><h5 id="ADXDB-GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1" class="sect5"><span class="enumeration_section">32.6.4.1 </span>Targeting a Table Using a DBUri
                     </h5>
                     <div>
                        <p>An example uses a DBUri that targets a complete table. An XML document is returned that corresponds to the table contents. The top-level XML element is named for the table. The values of each row are enclosed in a <code class="codeph">ROW</code> element.
                        </p>
                        <div class="section">
                           <p>This is shown in <a href="data-access-using-URIs.html#GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1__BABHFEIC">Example 32-6</a>. You target a complete database table using this syntax:
                           </p><pre class="pre codeblock"><code>/<span class="italic">database_schema</span>/<span class="italic">table</span>
</code></pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-AD513CF0-BB11-4850-89DF-4B6088803FC1__BABHFEIC">
                           <p class="titleinexample">Example 32-6 Targeting a Complete Table Using a DBUri</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (url URIType);
Table created.
 
INSERT INTO uri_tab VALUES
       (DBURIType.createURI('/HR/EMPLOYEES'));
1 row created.
 
SELECT e.url.getCLOB() FROM uri_tab e;

E.URL.GETCLOB()
---------------
&lt;?xml version="1.0"?&gt;
&lt;<span class="bold">EMPLOYEES</span>&gt;
 &lt;<span class="bold">ROW</span>&gt;
  &lt;EMPLOYEE_ID&gt;100&lt;/EMPLOYEE_ID&gt;
  &lt;FIRST_NAME&gt;Steven&lt;/FIRST_NAME&gt;
  &lt;LAST_NAME&gt;King&lt;/LAST_NAME&gt;
  &lt;EMAIL&gt;SKING&lt;/EMAIL&gt;
  &lt;PHONE_NUMBER&gt;515.123.4567&lt;/PHONE_NUMBER&gt;
  &lt;HIRE_DATE&gt;17-JUN-03&lt;/HIRE_DATE&gt;
  &lt;JOB_ID&gt;AD_PRES&lt;/JOB_ID&gt;
  &lt;SALARY&gt;24000&lt;/SALARY&gt;
  &lt;DEPARTMENT_ID&gt;90&lt;/DEPARTMENT_ID&gt;
 &lt;/<code class="codeph">ROW</code>&gt;
 &lt;<code class="codeph">ROW</code>&gt;
  &lt;EMPLOYEE_ID&gt;101&lt;/EMPLOYEE_ID&gt;
  &lt;FIRST_NAME&gt;Neena&lt;/FIRST_NAME&gt;
  &lt;LAST_NAME&gt;Kochhar&lt;/LAST_NAME&gt;
  &lt;EMAIL&gt;NKOCHHAR&lt;/EMAIL&gt;
  &lt;PHONE_NUMBER&gt;515.123.4568&lt;/PHONE_NUMBER&gt;
  &lt;HIRE_DATE&gt;21-SEP-05&lt;/HIRE_DATE&gt;
  &lt;JOB_ID&gt;AD_VP&lt;/JOB_ID&gt;
  &lt;SALARY&gt;17000&lt;/SALARY&gt;
  &lt;MANAGER_ID&gt;100&lt;/MANAGER_ID&gt;
  &lt;DEPARTMENT_ID&gt;90&lt;/DEPARTMENT_ID&gt;
 &lt;/<code class="codeph">ROW</code>&gt;
 <span class="bold">. . .</span>
 
1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.">Using DBUris Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5252"></a><a id="ADXDB5251"></a><div class="props_rev_3"><a id="GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3" name="GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3"></a><h5 id="ADXDB-GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3" class="sect5"><span class="enumeration_section">32.6.4.2 </span>Targeting a Row in a Table Using a DBUri
                     </h5>
                     <div>
                        <p>An example uses a DBUri that targets a single table row. The XPath predicate expression identifies the single table row that corresponds to employee number 200. The result is an XML document with <code class="codeph">ROW</code> as the top-level element.
                        </p>
                        <div class="section">
                           <p>This is shown in <a href="data-access-using-URIs.html#GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3__BABIIEEF">Example 32-7</a>. You target one or more specific rows of a table using this syntax:
                           </p><pre class="pre codeblock"><code>/<span class="italic">database_schema</span>/<span class="italic">table</span>/ROW[<span class="italic">predicate_expression</span>]
</code></pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3__BABIIEEF">
                           <p class="titleinexample">Example 32-7 Targeting a Particular Row in a Table Using a DBUri</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (url URIType);
Table created.
 
INSERT INTO uri_tab VALUES
       (DBURIType.createURI('/HR/EMPLOYEES/<span class="bold">ROW[EMPLOYEE_ID=200]</span>'));
1 row created.
 
SELECT e.url.getCLOB() FROM uri_tab e;
 
E.URL.GETCLOB()
-------------------------------------------------------
&lt;?xml version="1.0"?&gt;
 &lt;ROW&gt;
  &lt;EMPLOYEE_ID&gt;<span class="bold">200</span>&lt;/EMPLOYEE_ID&gt;
  &lt;FIRST_NAME&gt;Jennifer&lt;/FIRST_NAME&gt;
  &lt;LAST_NAME&gt;Whalen&lt;/LAST_NAME&gt;
  &lt;EMAIL&gt;JWHALEN&lt;/EMAIL&gt;
  &lt;PHONE_NUMBER&gt;515.123.4444&lt;/PHONE_NUMBER&gt;
  &lt;HIRE_DATE&gt;17-SEP-03&lt;/HIRE_DATE&gt;
  &lt;JOB_ID&gt;AD_ASST&lt;/JOB_ID&gt;
  &lt;SALARY&gt;4400&lt;/SALARY&gt;
  &lt;MANAGER_ID&gt;101&lt;/MANAGER_ID&gt;
  &lt;DEPARTMENT_ID&gt;10&lt;/DEPARTMENT_ID&gt;
 &lt;/ROW&gt;
 
1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.">Using DBUris Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5254"></a><a id="ADXDB5255"></a><a id="ADXDB5253"></a><div class="props_rev_3"><a id="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012" name="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012"></a><h5 id="ADXDB-GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012" class="sect5"><span class="enumeration_section">32.6.4.3 </span>Targeting a Column Using a DBUri
                     </h5>
                     <div>
                        <p>You can target a given column, a given attribute of an object column, or an object column whose attributes have given values. Examples illustrate these possibilities.</p>
                        <div class="section">
                           <p>You can target a specific column, using this syntax:</p><pre class="pre codeblock"><code>/<span class="italic">database_schema</span>/<span class="italic">table</span>/ROW[<span class="italic">predicate_expression</span>]/<span class="italic">column</span>
</code></pre><p>You can target a specific attribute of an object column, using this syntax:</p><pre class="pre codeblock"><code>/<span class="italic">database_schema</span>/<span class="italic">table</span>/ROW[<span class="italic">predicate_expression</span>]/<span class="italic">object_column</span>/<span class="italic">attribute</span>
</code></pre><p>You can target a specific object column whose attributes have specific values, using this syntax:</p><pre class="pre codeblock"><code>/<span class="italic">database_schema</span>/<span class="italic">table</span>/ROW[<span class="italic">predicate_expression_with_attributes</span>]/<span class="italic">object_column</span>
</code></pre><p><a href="data-access-using-URIs.html#GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__BABGJBEB">Example 32-8</a> uses a DBUri that targets column <code class="codeph">last_name</code> for the same employee as in <a href="data-access-using-URIs.html#GUID-7A8F1C4E-2ACE-40D0-89A7-2A0F0A7B9EE3__BABIIEEF">Example 32-7</a>. The top-level XML element is named for the targeted column.
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__CBAEGIHJ">Example 32-9</a> uses a DBUri that targets a <code class="codeph">CUST_ADDRESS</code> object column containing city and postal code attributes with certain values. The top-level XML element is named for the column, and it contains child elements for each of the object attributes.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__BABGJBEB">
                           <p class="titleinexample">Example 32-8 Targeting a Specific Column Using a DBUri</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (url URIType);
Table created.
 
INSERT INTO uri_tab VALUES
       (DBURIType.createURI('/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/LAST_NAME'));
1 row created.
 
SELECT e.url.getCLOB() FROM uri_tab e;
 
E.URL.GETCLOB()
------------------------------
&lt;?xml version="1.0"?&gt;
 &lt;LAST_NAME&gt;Whalen&lt;/LAST_NAME&gt;
 
1 row selected.
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-AF7766D5-8C9C-4DB3-BE5F-344DEFCF9012__CBAEGIHJ">
                           <p class="titleinexample">Example 32-9 Targeting an Object Column with Specific Attribute Values Using a DBUri</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (url URIType);
Table created.
 
INSERT INTO uri_tab VALUES
  (DBURIType.createURI(
     '/OE/CUSTOMERS/ROW[CUST_ADDRESS/CITY="Poughkeepsie" and
                        CUST_ADDRESS/POSTAL_CODE=12601]/CUST_ADDRESS'));
1 row created.
 
SELECT e.url.getCLOB() FROM uri_tab e;
 
E.URL.GETCLOB()
---------------
&lt;?xml version="1.0"?&gt;
 &lt;CUST_ADDRESS&gt;
  &lt;STREET_ADDRESS&gt;33 Fulton St&lt;/STREET_ADDRESS&gt;
  &lt;POSTAL_CODE&gt;12601&lt;/POSTAL_CODE&gt;
  &lt;CITY&gt;Poughkeepsie&lt;/CITY&gt;
  &lt;STATE_PROVINCE&gt;NY&lt;/STATE_PROVINCE&gt;
  &lt;COUNTRY_ID&gt;US&lt;/COUNTRY_ID&gt;
 &lt;/CUST_ADDRESS&gt;
 
1 row selected.
</code></pre><p>The DBUri here identifies the object that has a <code class="codeph">CITY</code> attribute with <code class="codeph">Poughkeepsie</code> as value and a <code class="codeph">POSTAL_CODE</code> attribute with <code class="codeph">12601</code> as value.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.">Using DBUris Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5257"></a><a id="ADXDB5256"></a><div class="props_rev_3"><a id="GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45" name="GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45"></a><h5 id="ADXDB-GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45" class="sect5"><span class="enumeration_section">32.6.4.4 </span>Retrieving the Text Value of a Column Using a DBUri
                     </h5>
                     <div>
                        <p>In many cases, it can be useful to retrieve only the text values of a column and not the enclosing tags. For example, if XSLT stylesheets are stored in a <code class="codeph">CLOB</code> column, you can retrieve the document text without having any enclosing column-name tags. An example illustrates this.
                        </p>
                        <div class="section">
                           <p>You can use the <code class="codeph">text()</code> XPath node test for this. It specifies that you want only the text value of the node. Use the following syntax:
                           </p><pre class="pre codeblock"><code>/oradb/<span class="italic">database_schema</span>/<span class="italic">table</span>/ROW[<span class="italic">predicate_expression</span>]/<span class="italic">column</span>/<span class="bold">text()</span>
</code></pre><p><a href="data-access-using-URIs.html#GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45__CBAGJCHE">Example 32-10</a> retrieves the text value of the employee <code class="codeph">last_name</code> column for employee number 200, without the XML tags. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4A1589B4-ACC6-4719-A9D5-48FBFB2E6D45__CBAGJCHE">
                           <p class="titleinexample">Example 32-10 Retrieve Only the Text Value of a Node Using a DBUri</p><pre class="pre codeblock"><code>CREATE TABLE uri_tab (url URIType);
Table created.

INSERT INTO uri_tab VALUES
       (DBURIType.createURI(
          '/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/LAST_NAME/text()'));

1 row created.

SELECT e.url.getCLOB() FROM uri_tab e;

E.URL.GETCLOB()
---------------
Whalen
 
1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.">Using DBUris Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5259"></a><a id="ADXDB5258"></a><div class="props_rev_3"><a id="GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90" name="GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90"></a><h5 id="ADXDB-GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90" class="sect5"><span class="enumeration_section">32.6.4.5 </span>Targeting a Collection Using a DBUri
                     </h5>
                     <div>
                        <p>You can target a database collection, such as an ordered collection table (OCT). You must, however, target the entire collection &#x2013; you cannot target individual members. </p>
                        <div class="section">
                           <p>When a collection is targeted, the XML document produced by the DBUri contains each collection member as an XML element, with all such elements enclosed in a element named for the <span class="italic">type</span> of the collection.
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90__CBABCBGH">Example 32-11</a> uses a DBUri that targets a collection of numbers. The top-level XML element is named for the collection, and its children are named for the collection <span class="italic">type</span> (<code class="codeph">NUMBER</code>).
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E1CBFB79-5B87-4EAD-A176-5001C2251A90__CBABCBGH">
                           <p class="titleinexample">Example 32-11 Targeting a Collection Using a DBUri</p><pre class="pre codeblock"><code>CREATE TYPE num_collection AS VARRAY(10) OF NUMBER;
/
Type created.
 
CREATE TABLE orders (item VARCHAR2(10), quantities num_collection);
Table created.
 
INSERT INTO orders VALUES ('boxes', num_collection(3, 7, 4, 9));
1 row created.
 
SELECT * FROM orders;
 
ITEM
----
QUANTITIES
----------
boxes
NUM_COLLECTION(3, 7, 4, 9)
 
1 row selected.
 
SELECT DBURIType('/HR/ORDERS/ROW[ITEM="boxes"]/QUANTITIES').getCLOB() FROM DUAL;
 
DBURITYPE('/HR/ORDERS/ROW[ITEM="BOXES"]/QUANTITIES').GETCLOB()
--------------------------------------------------------------
&lt;?xml version="1.0"?&gt;
 &lt;QUANTITIES&gt;
  &lt;NUMBER&gt;3&lt;/NUMBER&gt;
  &lt;NUMBER&gt;7&lt;/NUMBER&gt;
  &lt;NUMBER&gt;4&lt;/NUMBER&gt;
  &lt;NUMBER&gt;9&lt;/NUMBER&gt;
 &lt;/QUANTITIES&gt;
 
1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-B3BCD96D-8BDC-4DD7-969A-38135F46C2B0" title="A DBUri can identify a table, a row, a column in a row, or an attribute of an object column. Examples here show how to target different object types.">Using DBUris Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5261"></a><a id="ADXDB5260"></a><div class="props_rev_3"><a id="GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" name="GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6"></a><h3 id="ADXDB-GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" class="sect3"><span class="enumeration_section">32.7 </span>Create New Subtypes of URIType Using Package URIFACTORY 
               </h3>
               <div>
                  <p>You can define your own subtypes of <code class="codeph">URIType</code> that correspond to particular protocols. You can use PL/SQL package <code class="codeph">URIFACTORY</code> to obtain the URI of a <code class="codeph">URIType</code> instance, escape characters in a URI string or remove such escaping, and register or unregister a type name for handling a given URL. 
                  </p>
                  <p>Additional PL/SQL methods are listed in <a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6__G1047970" title="This table describes UriFactory functions and procedures.">Table 32-2</a>.
                  </p>
                  <div class="tblformalwide" id="GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6__G1047970">
                     <p class="titleintable">Table 32-2 URIFACTORY PL/SQL Methods</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="URIFACTORY PL/SQL Methods" summary="This table describes UriFactory functions and procedures." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d157948e3385">PL/SQL Method</th>
                              <th align="left" valign="bottom" width="73%" id="d157948e3388">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3393" headers="d157948e3385 ">
                                 <p><code class="codeph">getURI()</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3393 d157948e3388 ">
                                 <p>Returns the URI of the <code class="codeph">URIType</code> instance. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3404" headers="d157948e3385 ">
                                 <p><code class="codeph">escapeURI()</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3404 d157948e3388 ">
                                 <p>Escapes the URI string by replacing characters that are not permitted in URIs by their equivalent escape sequence.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3412" headers="d157948e3385 ">
                                 <p><code class="codeph">unescapeURI()</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3412 d157948e3388 ">
                                 <p>Removes escaping from a given URI.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3420" headers="d157948e3385 ">
                                 <p><code class="codeph">registerURLHandler()</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3420 d157948e3388 ">
                                 <p>Registers a particular type name for handling a particular URL. This is called by <code class="codeph">getURI()</code> to generate an instance of the type. 
                                 </p>
                                 <p>A Boolean argument can be used to indicate that the prefix must be stripped off before calling the appropriate type constructor.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d157948e3433" headers="d157948e3385 ">
                                 <p><code class="codeph">unregisterURLHandler()</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d157948e3433 d157948e3388 ">
                                 <p>Unregisters a URL handler.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>Of particular note is that you can use package <code class="codeph">URIFACTORY</code> to define new subtypes of type <code class="codeph">URIType</code>. You can then use those subtypes to provide specialized processing of URIs. In particular, you can define <code class="codeph">URIType</code> subtypes that correspond to particular protocols &#x2013; <code class="codeph">URIFACTORY</code> then recognizes and processes instances of those subtypes accordingly.
                  </p>
                  <p>Defining new types and creating database columns specific to the new types has these advantages:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>It provides an implicit <span class="italic">constraint</span> on the columns to contain only instances of those types. This can be useful for implementing specialized indexes on a column for specific protocols. For a DBUri, for instance, you can implement specialized indexes that fetch data directly from disk blocks, rather than executing SQL queries.
                        </p>
                     </li>
                     <li>
                        <p>You can have different constraints on different columns, based on the type. For a HTTPUri, for instance, you can define proxy and firewall constraints on a column, so that any access through the HTTP uses the proxy server.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A">Registering New URIType Subtypes with Package URIFACTORY</a><br>To provide specialized processing of URIs, you define and register a new URIType subtype.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5263"></a><a id="ADXDB5262"></a><div class="props_rev_3"><a id="GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A" name="GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A"></a><h4 id="ADXDB-GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A" class="sect4"><span class="enumeration_section">32.7.1 </span>Registering New URIType Subtypes with Package URIFACTORY 
                  </h4>
                  <div>
                     <p>To provide specialized processing of URIs, you define and register a new URIType subtype.</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Create the new type using SQL statement <code class="codeph">CREATE TYPE</code>. The type must implement PL/SQL method <code class="codeph">createURI()</code>.
                              </p>
                           </li>
                           <li>
                              <p>Optionally override the default methods, to perform specialized processing when retrieving data or to transform the XML data before displaying it.</p>
                           </li>
                           <li>
                              <p>Choose a new URI prefix, to identify URIs that use this specialized processing.</p>
                           </li>
                           <li>
                              <p>Register the new prefix using PL/SQL method <code class="codeph">registerURLHandler()</code>, so that package <code class="codeph">URIFACTORY</code> can create an instance of your new subtype when it receives a URI starting with the new prefix you defined.
                              </p>
                           </li>
                        </ol>
                        <p>After the new subtype is defined, a URI with the new prefix is recognized by <code class="codeph">URIFACTORY</code> methods, and you can create and use instances of the new type. 
                        </p>
                        <p>For example, suppose that you define a new protocol prefix, <code class="codeph">ecom://</code>, and define a subtype of <code class="codeph">URIType</code> to handle it. Perhaps the new subtype implements some special logic for PL/SQL method <code class="codeph">getCLOB()</code>, or perhaps it makes some changes to XML tags or data in method <code class="codeph">getXML()</code>. After you register prefix <code class="codeph">ecom://</code> with <code class="codeph">URIFACTORY</code>, a call to <code class="codeph">getURI()</code> generates an instance of the new <code class="codeph">URIType</code> subtype for a URI with that prefix.
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A__CBAHBBAG">Example 32-12</a> creates a new type, <code class="codeph">ECOMURIType</code>, to handle a new protocol, <code class="codeph">ecom://</code>. The example stores three different kinds of URIs in a single table: an HTTPUri, a DBUri, and an instance of the new type, <code class="codeph">ECOMURIType</code>. To run this example, you would need to define each of the <code class="codeph">ECOMURIType</code> member functions. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6CF03290-E943-4BD5-BA0C-BB9A6634FF4A__CBAHBBAG">
                        <p class="titleinexample">Example 32-12 URIFACTORY: Registering the ECOM Protocol </p><pre class="pre codeblock"><code>CREATE TABLE url_tab (urlcol varchar2(80));
Table created.
 
-- Insert an HTTP URL reference
INSERT INTO url_tab VALUES ('http://www.oracle.com/');
1 row created.
 
-- Insert a DBUri
INSERT INTO url_tab VALUES ('/oradb/HR/EMPLOYEES/ROW[FIRST_NAME="Jack"]');
1 row created.
 
-- Create a new type to handle a new protocol called ecom://
-- This is just an example template. For this to run, the implementations
-- of these functions must be specified.
CREATE OR REPLACE TYPE ECOMURIType UNDER SYS.URIType (
  OVERRIDING MEMBER FUNCTION getCLOB RETURN CLOB,
  OVERRIDING MEMBER FUNCTION getBLOB RETURN BLOB,
  OVERRIDING MEMBER FUNCTION getExternalURL RETURN VARCHAR2,
  OVERRIDING MEMBER FUNCTION getURI RETURN VARCHAR2,
  -- Must have this for registering with the URL handler
  STATIC FUNCTION createURI(url IN VARCHAR2) RETURN ECOMURIType);
/
-- Register a new handler for the ecom:// prefixes
BEGIN
  -- The handler type name is ECOMURIType; schema is HR
  -- Ignore the prefix case, so that URIFACTORY creates the same subtype
  -- for URIs beginning with ECOM://, ecom://, eCom://, and so on.
  -- Strip the prefix before calling PL/SQL method createURI(),
  -- so that the string 'ecom://' is not stored inside the
  -- ECOMURIType object. It is added back automatically when
  -- you call ECOMURIType.getURI().
  URIFACTORY.registerURLHandler (prefix =&gt; 'ecom://',
                                 schemaname =&gt; 'HR',
                                 typename =&gt; 'ECOMURITYPE',
                                 ignoreprefixcase =&gt; TRUE,
                                 stripprefix =&gt; TRUE);
END;
/
PL/SQL procedure successfully completed.
 
-- Insert this new type of URI into the table
INSERT INTO url_tab VALUES ('ECOM://company1/company2=22/comp');
1 row created.
 
-- Use the factory to generate an instance of the appropriate
-- subtype for each URI in the table.

-- You would need to define the member functions for this to work:
SELECT urifactory.getURI(urlcol) FROM url_tab;

-- This would generate:
HTTPURIType('www.oracle.com'); -- an HTTPUri
DBURIType('/oradb/HR/EMPLOYEES/ROW[FIRST_NAME="Jack"]', null); -- a DBUri
ECOMURIType('company1/company2=22/comp'); -- an ECOMURIType instance</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-590A6F12-9D64-4C6B-BD4C-0A7F6FA2B4F6" title="You can define your own subtypes of URIType that correspond to particular protocols. You can use PL/SQL package URIFACTORY to obtain the URI of a URIType instance, escape characters in a URI string or remove such escaping, and register or unregister a type name for handling a given URL.">Create New Subtypes of URIType Using Package URIFACTORY</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5265"></a><a id="ADXDB5266"></a><a id="ADXDB5264"></a><div class="props_rev_3"><a id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" name="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82"></a><h3 id="ADXDB-GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" class="sect3"><span class="enumeration_section">32.8 </span>SYS_DBURIGEN SQL Function
               </h3>
               <div>
                  <p>You can create a DBUri by providing an XPath expression to constructor <code class="codeph">DBURIType</code> or to appropriate <code class="codeph">URIFACTORY</code> PL/SQL methods. With Oracle SQL function <code class="codeph">sys_DburiGen</code>, you can alternatively create a DBUri using an <span class="italic">XPath that is composed</span> from database columns and their values.
                  </p>
                  <p>Oracle SQL function <code class="codeph">sys_DburiGen</code> takes as its argument one or more database columns or attributes, and optionally a rowid, and generates a DBUri that targets a particular column or row object. Function <code class="codeph">sys_DburiGen</code> takes an additional parameter that indicates whether the text value of the node is needed. See <a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__I1030921">Figure 32-2</a>.
                  </p>
                  <div class="figure" id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__I1030921">
                     <p class="titleinfigure">Figure 32-2 SYS_DBURIGEN Syntax</p><img src="img/sys_dburigen.gif" width="509" alt="Description of Figure 32-2 follows" title="Description of Figure 32-2 follows" longdesc="img_text/sys_dburigen.html"><br><a href="img_text/sys_dburigen.html">Description of "Figure 32-2 SYS_DBURIGEN Syntax"</a></div>
                  <!-- class="figure" -->
                  <p>All columns or attributes referenced must reside in the same table. They must each reference a unique value. If you specify multiple columns, then the initial columns identify the row, and the last column identifies the column within that row. If you do not specify a database schema, then the table name is interpreted as a public synonym.</p>
                  <div class="infoboxnotealso" id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__GUID-8C68C7EC-9122-41D6-AF87-D409F74CC015">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/SYS_DBURIGEN.html#SQLRF06118" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></p>
                  </div>
                  <p><a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__CBAHAHIB">Example 32-13</a> uses Oracle SQL function <code class="codeph">sys_DburiGen</code> to generate a DBUri that targets column <code class="codeph">email</code> of table <code class="codeph">HR.employees</code> where <code class="codeph">employee_id</code> is <code class="codeph">206</code>: 
                  </p>
                  <div class="example" id="GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82__CBAHAHIB">
                     <p class="titleinexample">Example 32-13 SYS_DBURIGEN: Generating a DBUri that Targets a Column</p><pre class="oac_no_warn" dir="ltr">SELECT sys_DburiGen(employee_id, email)
  FROM employees
  WHERE employee_id = 206;

SYS_DBURIGEN(EMPLOYEE_ID,EMAIL)(URL, SPARE)
-------------------------------------------------------------------
DBURITYPE('/PUBLIC/EMPLOYEES/ROW[EMPLOYEE_ID = "206"]/EMAIL', NULL)

1 row selected.</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37">Rules for Passing Columns or Object Attributes to SYS_DBURIGEN</a><br>A column or attribute passed to Oracle SQL function <code class="codeph">sys_DburiGen</code> must obey certain rules.
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB">Using SQL Function SYS_DBURIGEN: Examples</a><br>Examples are presented that use SQL function <code class="codeph">sys_DburiGen</code> to insert database references, return partial results from a large column, and return URLs to inserted objects.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5268"></a><a id="ADXDB5267"></a><div class="props_rev_3"><a id="GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37" name="GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37"></a><h4 id="ADXDB-GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37" class="sect4"><span class="enumeration_section">32.8.1 </span>Rules for Passing Columns or Object Attributes to SYS_DBURIGEN
                  </h4>
                  <div>
                     <p>A column or attribute passed to Oracle SQL function <code class="codeph">sys_DburiGen</code> must obey certain rules.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">Same table:</span> All columns referenced in function <code class="codeph">sys_DburiGen</code> must come from the same table or view.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">Unique mapping:</span> The column or object attribute must be uniquely mappable back to the table or view from which it came. The only virtual columns allowed are those produced with <code class="codeph">value</code> or <code class="codeph">ref</code>. The column can come from a subquery with a SQL <code class="codeph">TABLE</code> collection expression, that is, <code class="codeph">TABLE(...)</code>, or from an inline view (as long as the inline view does not rename the columns).
                           </p>
                           <p>See <a href="../sqlrf/SELECT.html#SQLRF30047" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the SQL <code class="codeph">TABLE</code> collection expression.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">Key columns:</span> Either the rowid or a set of key columns must be specified. The list of key columns is not required to be declared as a unique or primary key, as long as the columns uniquely identify a particular row in the result.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold"><code class="codeph">PUBLIC</code></span> <span class="italic">element:</span> If the table or view targeted by the rowid or key columns does not specify a database schema, then the <code class="codeph">PUBLIC</code> keyword is used. When a DBUri is accessed, the table name resolves to the same table, synonym, or database view that was visible by that name when the DBUri was created.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">Optional</span> <span class="bold"><code class="codeph">text()</code></span> <span class="italic">argument:</span> By default, <code class="codeph">DBURIType</code> constructs an XML document. Use <code class="codeph">text()</code> as the third argument to <code class="codeph">sys_DburiGen</code> to create a DBUri that targets a text node (no XML elements). For example:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT sys_DburiGen(employee_id, last_name, 'text()') FROM hr.employees,
  WHERE employee_id=200;
</pre><p>This constructs a DBUri with the following URI: </p><pre class="oac_no_warn" dir="ltr">/HR/EMPLOYEES/ROW[EMPLOYEE_ID=200]/LAST_NAME/text()
</pre></li>
                        <li>
                           <p><span class="italic">Single-column argument:</span> If there is a single-column argument, then the column is used as both the key column to identify the row and the referenced column. 
                           </p>
                        </li>
                     </ul>
                     <p>The query in <a href="data-access-using-URIs.html#GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37__CBAHEEEI">Example 32-14</a> uses <code class="codeph">employee_id</code> as both the key column and the referenced column. It generates a DBUri that targets the row with <code class="codeph">employee_id</code> 200.
                     </p>
                     <div class="example" id="GUID-13C7A746-93C5-47A6-8E7B-43A019E45E37__CBAHEEEI">
                        <p class="titleinexample">Example 32-14 Passing Columns with Single Arguments to SYS_DBURIGEN</p><pre class="oac_no_warn" dir="ltr">SELECT sys_DburiGen(employee_id) FROM employees
  WHERE employee_id=200;
 
SYS_DBURIGEN(EMPLOYEE_ID)(URL, SPARE)
-------------------------------------
DBURITYPE('/PUBLIC/EMPLOYEES/ROW[EMPLOYEE_ID=''200'']/EMPLOYEE_ID', NULL)
 
1 row selected.</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" title="You can create a DBUri by providing an XPath expression to constructor DBURIType or to appropriate URIFACTORY PL/SQL methods. With Oracle SQL function sys_DburiGen, you can alternatively create a DBUri using an XPath that is composed from database columns and their values.">SYS_DBURIGEN SQL Function</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5269"></a><div class="props_rev_3"><a id="GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" name="GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB"></a><h4 id="ADXDB-GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" class="sect4"><span class="enumeration_section">32.8.2 </span>Using SQL Function SYS_DBURIGEN: Examples
                  </h4>
                  <div>
                     <p>Examples are presented that use SQL function <code class="codeph">sys_DburiGen</code> to insert database references, return partial results from a large column, and return URLs to inserted objects.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-4F147081-D1CB-4BBA-843B-7A14931BD907">Inserting Database References Using SYS__DBURIGEN</a><br>You can use SQL function <code class="codeph">sys_DburiGen</code> to insert DBUris that reference specific database data. An example illustrates this.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730">Returning Partial Results Using SYS__DBURIGEN</a><br>When selecting data from a large column, you might sometimes want to retrieve only a portion of the result, and create a URL that provides access to the full column.
                        </li>
                        <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B">Returning URLs to Inserted Objects Using SYS_DBURIGEN</a><br>You can use Oracle SQL function <code class="codeph">sys_DburiGen</code> in the <code class="codeph">RETURNING</code> clause of DML statements to retrieve the URL of an object as it is inserted. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-787BEE6B-0F47-4CB9-B83F-41979732BF82" title="You can create a DBUri by providing an XPath expression to constructor DBURIType or to appropriate URIFACTORY PL/SQL methods. With Oracle SQL function sys_DburiGen, you can alternatively create a DBUri using an XPath that is composed from database columns and their values.">SYS_DBURIGEN SQL Function</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5270"></a><div class="sect4"><a id="GUID-4F147081-D1CB-4BBA-843B-7A14931BD907" name="GUID-4F147081-D1CB-4BBA-843B-7A14931BD907"></a><h5 id="ADXDB-GUID-4F147081-D1CB-4BBA-843B-7A14931BD907" class="sect5"><span class="enumeration_section">32.8.2.1 </span>Inserting Database References Using SYS__DBURIGEN
                     </h5>
                     <div>
                        <p>You can use SQL function <code class="codeph">sys_DburiGen</code> to insert DBUris that reference specific database data. An example illustrates this.
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4F147081-D1CB-4BBA-843B-7A14931BD907__GUID-85D75149-429A-4470-8142-708E15E2AB0A">
                           <p class="titleinexample">Example 32-15 Inserting Database References Using SYS_DBURIGEN</p><pre class="pre codeblock"><code>CREATE TABLE doc_list_tab (docno NUMBER PRIMARY KEY, doc_ref SYS.DBURIType);
Table created.

-- Insert a DBUri that targets the row with employee_id=177
INSERT INTO doc_list_tab VALUES(1001, (SELECT sys_DburiGen(rowid, employee_id)
                                         FROM employees WHERE employee_id=177));
1 row created.
 
-- Insert a DBUri that targets the last_name column of table employees
INSERT INTO doc_list_tab VALUES(1002,
                                (SELECT sys_DburiGen(employee_id, last_name)
                                   FROM employees WHERE employee_id=177));
1 row created.
 
SELECT * FROM doc_list_tab;
 
     DOCNO
----------
DOC_REF(URL, SPARE)
-----------------------------------------------------
      1001
DBURITYPE('/PUBLIC/EMPLOYEES/ROW[ROWID=''AAAQCcAAFAAAABSABN'']/EMPLOYEE_ID', NULL)
 
      1002
DBURITYPE('/PUBLIC/EMPLOYEES/ROW[EMPLOYEE_ID=''177'']/LAST_NAME', NULL)
 
2 rows selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" title="Examples are presented that use SQL function sys_DburiGen to insert database references, return partial results from a large column, and return URLs to inserted objects.">Using SQL Function SYS_DBURIGEN: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5272"></a><a id="ADXDB5912"></a><a id="ADXDB5913"></a><a id="ADXDB5911"></a><div class="props_rev_3"><a id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730" name="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730"></a><h5 id="ADXDB-GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730" class="sect5"><span class="enumeration_section">32.8.2.2 </span>Returning Partial Results Using SYS__DBURIGEN
                     </h5>
                     <div>
                        <p>When selecting data from a large column, you might sometimes want to retrieve only a portion of the result, and create a URL that provides access to the full column.</p>
                        <div class="section">
                           <p>For example, consider the case of a travel story website. If travel stories are stored in a table and users search for a set of relevant stories, you do not want to list each entire story in the search-result page. Instead, you might show just the first 20 characters of each story, to represent the gist, and then return a URL to the full story. This can be done as follows:</p>
                           <p><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAFABCA">Example 32-16</a> creates the travel story table.
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGCAJC">Example 32-17</a> creates a function that returns only the first 20 characters from the story.
                           </p>
                           <p><a href="data-access-using-URIs.html#GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGFCHF">Example 32-18</a> creates a view that selects only the first twenty characters from the travel story, and returns a DBUri to the story column.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAFABCA">
                           <p class="titleinexample">Example 32-16 Creating the Travel Story Table</p><pre class="pre codeblock"><code>CREATE TABLE travel_story (story_name VARCHAR2(100), story CLOB);
Table created.

INSERT INTO travel_story
  VALUES ('Egypt', 'This is the story of my time in Egypt....');
1 row created.
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGCAJC">
                           <p class="titleinexample">Example 32-17 A Function that Returns the First 20 Characters</p><pre class="pre codeblock"><code>CREATE OR REPLACE FUNCTION charfunc(clobval IN CLOB) RETURN VARCHAR2 IS
  res VARCHAR2(20);
  amount NUMBER := 20;
BEGIN
  DBMS_LOB.read(clobval, amount, 1, res);
  RETURN res;
END;
/
Function created.
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-121FFB7F-A140-4AB0-B0A4-663C41EF0730__CBAGFCHF">
                           <p class="titleinexample">Example 32-18 Creating a Travel View for Use with SYS_DBURIGEN</p><pre class="pre codeblock"><code>CREATE OR REPLACE VIEW travel_view AS
  SELECT story_name, charfunc(story) short_story,
         sys_DburiGen(story_name, story, 'text()') story_link
  FROM travel_story;
View created.
 
SELECT * FROM travel_view;
 
STORY_NAME
----------
SHORT_STORY
-----------
STORY_LINK(URL, SPARE)
----------------------
Egypt
This is the story of
DBURITYPE('/PUBLIC/TRAVEL_STORY/ROW[STORY_NAME=''Egypt'']/STORY/text()', NULL)
 
1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" title="Examples are presented that use SQL function sys_DburiGen to insert database references, return partial results from a large column, and return URLs to inserted objects.">Using SQL Function SYS_DBURIGEN: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5274"></a><a id="ADXDB5914"></a><div class="props_rev_3"><a id="GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B" name="GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B"></a><h5 id="ADXDB-GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B" class="sect5"><span class="enumeration_section">32.8.2.3 </span>Returning URLs to Inserted Objects Using SYS_DBURIGEN
                     </h5>
                     <div>
                        <p>You can use Oracle SQL function <code class="codeph">sys_DburiGen</code> in the <code class="codeph">RETURNING</code> clause of DML statements to retrieve the URL of an object as it is inserted. 
                        </p>
                        <div class="section">
                           <p>In <a href="data-access-using-URIs.html#GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B__CBAFEDEH">Example 32-19</a>, whenever a document is inserted into table <code class="codeph">clob_tab</code>, its URL is inserted into table <code class="codeph">uri_tab</code>. This is done using Oracle SQL function <code class="codeph">sys_DburiGen</code> in the <code class="codeph">RETURNING</code> clause of the <code class="codeph">INSERT</code> statement.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-37E24B75-9E1A-425F-B98A-451A7C713F9B__CBAFEDEH">
                           <p class="titleinexample">Example 32-19 Retrieving a URL Using SYS_DBURIGEN in RETURNING Clause</p><pre class="pre codeblock"><code>CREATE TABLE clob_tab (docid NUMBER, doc CLOB);
Table created.

CREATE TABLE uri_tab (docs SYS.DBURIType);
Table created.
</code></pre><p>In PL/SQL, specify the storage of the URL of the inserted document as part of the insertion operation, using the <code class="codeph">RETURNING</code> clause and <code class="codeph">EXECUTE IMMEDIATE</code>:
                           </p><pre class="pre codeblock"><code>DECLARE
  ret SYS.DBURIType;
BEGIN
  -- execute the insert operation and get the URL
  EXECUTE IMMEDIATE 
    'INSERT INTO clob_tab VALUES (1, ''TEMP CLOB TEST'') 
       RETURNING sys_DburiGen(docid, doc, ''text()'') INTO :1'
    RETURNING INTO ret;
  -- Insert the URL into uri_tab
  INSERT INTO uri_tab VALUES (ret);
END;
/

SELECT e.docs.getURL() FROM hr.uri_tab e;
E.DOCS.GETURL()
------------------------------------------------
/ORADB/PUBLIC/CLOB_TAB/ROW[DOCID='1']/DOC/text()
 
1 row selected.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-D55D9C0A-64F2-4D42-9D9D-F43C78726BCB" title="Examples are presented that use SQL function sys_DburiGen to insert database references, return partial results from a large column, and return URLs to inserted objects.">Using SQL Function SYS_DBURIGEN: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5277"></a><a id="ADXDB5275"></a><div class="props_rev_3"><a id="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" name="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3"></a><h3 id="ADXDB-GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" class="sect3"><span class="enumeration_section">32.9 </span>DBUriServlet
               </h3>
               <div>
                  <p>You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, <strong class="term">DBUriServlet</strong>, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.
                  </p>
                  <p>A Web client or application can access such data without using SQL or a specialized database API. You can retrieve the data by linking to it on a Web page or by requesting it through HTTP-aware APIs of Java, PL/SQL, and Perl. You can display or process the data using an application such as a Web browser or an XML-aware spreadsheet. DBUriServlet can generate content that is XML data or not, and it can transform the result using XSLT stylesheets.</p>
                  <p>You make database data Web-accessible by using a URI that is composed of a servlet address (URL) plus a DBUri URI that specifies which database data to retrieve. This is the syntax, where <code class="codeph">http://</code><span class="italic"><code class="codeph">server:port</code></span> is the URL of the servlet (server and port), and <code class="codeph">/oradb/</code><span class="italic"><code class="codeph">database_schema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">table</code></span> is the DBUri URI (any DBUri URI can be used):
                  </p><pre class="oac_no_warn" dir="ltr">http://<span class="italic">server</span>:<span class="italic">port</span>/<span class="bold">oradb</span>/<span class="italic">database_schema</span><span class="italic">/</span><span class="italic">table</span>
</pre><p>When using XPath notation in a URL for the servlet, you might need to escape certain characters. You can use <code class="codeph">URIType</code> PL/SQL method <code class="codeph">getExternalURL()</code> to do this.
                  </p>
                  <p>You can either use <code class="codeph">DBUriServlet</code>, which is pre-installed as part of Oracle XML&nbsp;DB, or write your own servlet that runs on a servlet engine. The servlet reads the URI portion of the invoking URL, creates a DBUri using that URI, calls <code class="codeph">URIType</code> PL/SQL methods to retrieve the data, and returns the values in a form such as a Web page, an XML document, or a plain-text document. 
                  </p>
                  <p>The MIME type to use is specified to the servlet through the URI:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>By default, the servlet produces MIME types <code class="codeph">text/xml</code> and <code class="codeph">text/plain</code>. If the DBUri path ends in <code class="codeph">text()</code>, then <code class="codeph">text/plain</code> is used. Otherwise, an XML document is generated with MIME type <code class="codeph">text/xml</code>.
                        </p>
                     </li>
                     <li>
                        <p>You can override the default MIME type, setting it to <code class="codeph">binary/x-jpeg</code> or some other value, by using the <code class="codeph">contenttype</code> argument to the servlet. 
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3__GUID-68CB0AAD-629F-471F-91B1-36C3DE92A4BC">
                     <p class="notep1">See Also:</p>
                     <p><a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="Design guidelines are presented for writing Oracle XML&nbsp;DB applications in Java. This includes guidelines for writing and configuring Java servlets for Oracle XML&nbsp;DB.">Guidelines for Oracle XML&nbsp;DB Applications in Java</a>, for information about Oracle XML&nbsp;DB servlets
                     </p>
                  </div>
                  <p><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3__G1049621" title="This table describes the DBUri Servlet optional arguments.">Table 32-3</a> describes each of the optional URL parameters you can pass to DBUriServlet to customize its output. 
                  </p>
                  <div class="tblformal" id="GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3__G1049621">
                     <p class="titleintable">Table 32-3 DBUriServlet: Optional Arguments </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBUriServlet: Optional Arguments " summary="This table describes the DBUri Servlet optional arguments." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="15%" id="d157948e4330">Argument</th>
                              <th align="left" valign="bottom" width="85%" id="d157948e4333">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d157948e4338" headers="d157948e4330 "><pre class="oac_no_warn" dir="ltr">rowsettag</pre></td>
                              <td align="left" valign="top" width="85%" headers="d157948e4338 d157948e4333 ">
                                 <p>Changes the default root tag name for the XML document. For example: </p><pre class="oac_no_warn" dir="ltr">http://<span class="italic">server</span>:8080/oradb/HR/EMPLOYEES<span class="bold">?rowsettag=OracleEmployees</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d157948e4352" headers="d157948e4330 "><pre class="oac_no_warn" dir="ltr">contenttype</pre></td>
                              <td align="left" valign="top" width="85%" headers="d157948e4352 d157948e4333 ">
                                 <p>Specifies the MIME type of the generated document. For example: </p><pre class="oac_no_warn" dir="ltr">http://<span class="italic">server</span>:8080/oradb/HR/EMPLOYEES<span class="bold">?contenttype=text/plain</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d157948e4366" headers="d157948e4330 "><pre class="oac_no_warn" dir="ltr">transform</pre></td>
                              <td align="left" valign="top" width="85%" headers="d157948e4366 d157948e4333 ">
                                 <p>Passes a URL to <code class="codeph">URIFACTORY</code>, which retrieves the XSLT stylesheet at that location. This stylesheet is then applied to the XML document being returned by the servlet. For example:
                                 </p><pre class="oac_no_warn" dir="ltr">http://<span class="italic">server</span>:8080/oradb/HR/EMPLOYEES<span class="bold">?transform=</span>
<span class="bold">/oradb/QUINE/XSLS/DOC/text()</span>&amp;contenttype=text/html<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "This URL is split across two lines for the purpose of documentation.")"><sup>Foot&nbsp;1</sup></a></pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>This URL is split across two lines for the purpose of documentation.</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076">Overriding the MIME Type Using a URL</a><br>You can override MIME content type by using a URL that passes a different MIME type to the servlet as the <code class="codeph">contenttype</code> parameter.
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8">Customizing DBUriServlet</a><br>To customize DBUriServlet you modify the Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>. 
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-A439EB9D-7733-4B73-B323-7D33753755A2">Using Roles for DBUriServlet Security</a><br>Servlet security is handled by Oracle Database using roles. When users log in to the servlet, they use their database user name and password. The servlet checks to ensure that the user logging has one of the roles specified in the configuration file using parameter <code class="codeph">security-role-ref</code>). 
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15">Configuring Package URIFACTORY to Handle DBUris</a><br>To improve efficiency, you can teach <code class="codeph">URIFACTORY</code> that a URI of a given form represents database access and so should be realized as a DBUri, not an HTTPUri. You do this by registering a handler for the URI as a prefix, specifying <code class="codeph">DBURIType</code> as the type of instance to generate.
                     </li>
                     <li class="ulchildlink"><a href="data-access-using-URIs.html#GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87">Table or View Access from a Web Browser Using DBUri Servlet</a><br>Oracle XML&nbsp;DB includes the DBUri servlet, which lets you access the content of any table or view directly from a web browser. It uses <code class="codeph">DBURIType</code> to generate a simple XML document from the table contents. The servlet is C language-based and installed in the Oracle XML&nbsp;DB HTTP server. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-0F5F6D4C-0C27-4EC0-926C-CDCC0C1F9798" title="You can generate and store URIs in the database and use them to retrieve the database data they target. There are three kinds of URIs you can use this way: DBUris, XDBUris, and HTTPUris.">Data Access Using URIs</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5915"></a><div class="props_rev_3"><a id="GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076" name="GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076"></a><h4 id="ADXDB-GUID-E0DD3BB9-4CD5-4037-AD0D-90BCF3325076" class="sect4"><span class="enumeration_section">32.9.1 </span>Overriding the MIME Type Using a URL
                  </h4>
                  <div>
                     <p>You can override MIME content type by using a URL that passes a different MIME type to the servlet as the <code class="codeph">contenttype</code> parameter.
                     </p>
                     <div class="section">
                        <p>To retrieve column <code class="codeph">employee_id</code> of table <code class="codeph">employee</code>, you can use a URL such as one of the following, where computer <span class="italic"><code class="codeph">server.oracle.com</code></span> is running Oracle Database with a Web service listening to requests on port 8080. Step <code class="codeph">oradb</code> is the virtual path that maps to the servlet.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li><pre class="pre codeblock"><code>http://<span class="italic">server.oracle.com</span>:8080/oradb/QUINE/A/ROW[B=200]/C/text()</code></pre><p>Produces a content type of text/plain</p>
                           </li>
                           <li><pre class="pre codeblock"><code>http://<span class="italic">server.oracle.com</span>:8080/oradb/QUINE/A/ROW[B=200]/C</code></pre><p>Produces a content type of text/xml</p>
                           </li>
                        </ul>
                        <p>To override the content type, you can use a URL that passes <code class="codeph">text/html</code> to the servlet as the <code class="codeph">contenttype</code> parameter:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li><pre class="pre codeblock"><code>http://<span class="italic">server.oracle.com</span>:8080/oradb/QUINE/A/ROW[B=200]/C<span class="bold">?contenttype=text/html</span></code></pre><p>Produces a content type of text/html</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5279"></a><a id="ADXDB5278"></a><div class="props_rev_3"><a id="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8" name="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8"></a><h4 id="ADXDB-GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8" class="sect4"><span class="enumeration_section">32.9.2 </span>Customizing DBUriServlet
                  </h4>
                  <div>
                     <p>To customize DBUriServlet you modify the Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>. 
                     </p>
                     <div class="section">
                        <p>You can edit the Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>, using database schema (user account) <code class="codeph">XDB</code> with WebDAV, FTP, Oracle Enterprise Manager, or PL/SQL. To update the file using FTP or WebDAV, download the document, edit it, and save it back into the database. PL/SQL package&nbsp;<code class="codeph">DBMS_XDB_CONFIG</code> provides a particularly convenient way to access the file, and it provides subprograms that perform specific configuration modifications. For example, you can use <code class="codeph">DBMS_XDB_CONFIG.deleteservletmapping</code> to remove a servlet mapping.
                        </p>
                        <p>DBUriServlet is installed at <code class="codeph">/oradb/*</code>, which is the address specified in the <code class="codeph">servlet-pattern</code> tag of <code class="codeph">xdbconfig.xml</code>. The asterisk (<code class="codeph">*</code>) is necessary to indicate that any path following <code class="codeph">oradb</code> is to be mapped to the same servlet. <code class="codeph">oradb</code> is published as the virtual path. You can change the path that is used to access the servlet. 
                        </p>
                        <p>In <a href="data-access-using-URIs.html#GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8__CBABGAJC">Example 32-20</a>, the configuration file is modified to install DBUriServlet under <code class="codeph">/dburi/*</code>. (The long XPath expression has been split here for documentation purposes. It actually needs to be on a single line.)
                        </p>
                        <p>Security parameters, the servlet display-name, and the description can also be customized in configuration file <code class="codeph">xdbconfig.xml</code>. The servlet can be removed by deleting its servlet-pattern. This can also be done using XQuery Update to update the servlet-mapping element to <code class="codeph">NULL</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8__GUID-BFD55169-7D75-4BC9-A37F-616D9BE0877F">
                           <p class="notep1">See Also:</p>
                           <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-D3770171-8E64-461C-92A4-045248EE42E1" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-419A9542-C2D5-41BA-AF66-AD898FF38BC8__CBABGAJC">
                        <p class="titleinexample">Example 32-20 Changing the Installation Location of DBUriServlet</p><pre class="oac_no_warn" dir="ltr">DECLARE
  doc XMLType;
  doc2 XMLType;
BEGIN
  doc := DBMS_XDB_CONFIG.cfg_get();
  SELECT XMLQuery('declare default element namespace 
                   "http://xmlns.oracle.com/xdb/xdbconfig.xsd";
                   copy $i := $doc modify
                   for $j in
$i/xdbconfig/sysconfig/protocolconfig/httpconfig/webappconfig/servletconfig/servlet-mappings<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "This XQuery expression is split across two lines only for the purpose of documentation.")"><sup>Foot&nbsp;2</sup></a>
/servlet-mapping[servlet-name="DBUriServlet"]/<span class="bold">servlet-pattern</span>
                   return replace value of node $j with $i<span class="bold">/dburi/*</span>
                   return $i'
                  PASSING DBMS_XDB_CONFIG.cfg_get() AS "doc"
                  RETURNING CONTENT) INTO doc2 FROM DUAL;
  DBMS_XDB_CONFIG.cfg_update(doc2);
  COMMIT;
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="Design guidelines are presented for writing Oracle XML&nbsp;DB applications in Java. This includes guidelines for writing and configuring Java servlets for Oracle XML&nbsp;DB.">Guidelines for Oracle XML&nbsp;DB Applications in Java</a></li>
                           <li><a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Administration of Oracle XML&nbsp;DB includes installing, upgrading, and configuring it.">Administration of Oracle XML&nbsp;DB</a></li>
                           <li><a href="administration-of-XML-DB.html#GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C" title="You can access the Oracle XML&nbsp;DB configuration file, xdbconfig.xml, the same way you access any other XML schema-based resource. You can use FTP, HTTP(S), WebDAV, Oracle Enterprise Manager, or any of the resource and Document Object Model (DOM) APIs for Java, PL/SQL, or C (OCI).">Oracle XML&nbsp;DB Configuration API</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5281"></a><a id="ADXDB5280"></a><div class="props_rev_3"><a id="GUID-A439EB9D-7733-4B73-B323-7D33753755A2" name="GUID-A439EB9D-7733-4B73-B323-7D33753755A2"></a><h4 id="ADXDB-GUID-A439EB9D-7733-4B73-B323-7D33753755A2" class="sect4"><span class="enumeration_section">32.9.3 </span>Using Roles for DBUriServlet Security
                  </h4>
                  <div>
                     <p>Servlet security is handled by Oracle Database using roles. When users log in to the servlet, they use their database user name and password. The servlet checks to ensure that the user logging has one of the roles specified in the configuration file using parameter <code class="codeph">security-role-ref</code>). 
                     </p>
                     <div class="section">
                        <p>By default, the servlet is available to role <code class="codeph">authenticatedUser</code>, and any user who logs into the servlet with a valid database password has this role. 
                        </p>
                        <p>The role parameter can be changed to restrict access to any specific database roles. To change from the default <code class="codeph">authenticatedUser</code> role to a role that you have created, you modify the Oracle XML&nbsp;DB configuration file.
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-A439EB9D-7733-4B73-B323-7D33753755A2__CBABCHAE">Example 32-21</a> changes the default role <code class="codeph">authenticatedUser</code> to role <code class="codeph">servlet-users</code> (which you must have created).
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A439EB9D-7733-4B73-B323-7D33753755A2__CBABCHAE">
                        <p class="titleinexample">Example 32-21 Restricting Servlet Access to a Database Role</p><pre class="pre codeblock"><code>DECLARE
  doc  XMLType;
  doc2 XMLType;
  doc3 XMLType;
BEGIN
  doc := DBMS_XDB_CONFIG.cfg_get();
  SELECT XMLQuery('copy $i := $p1 modify
                     (for $j in $i/xdbconfig/sysconfig/protocolconfig/httpconfig/webappconfig/servletconfig/<a id="fn_3" name="fn_3" href="#fn_3" onclick="footdisplay(3, "This XQuery expression is split across two lines only for the purpose of documentation.")"><sup>Foot&nbsp;3</sup></a>
servlet-list/servlet[servlet-name="DBUriServlet"]/security-role-ref/<span class="bold">role-name</span>
                      return replace value of node $j with $p2)
                  return $i'
                 PASSING DOC AS "p1", '<span class="bold">servlet-users</span>' AS "p2" RETURNING CONTENT)
    INTO doc2 FROM DUAL;
  SELECT XMLQuery('copy $i := $p1 modify
                      (for $j in $i/xdbconfig/sysconfig/protocolconfig/httpconfig/webappconfig/servletconfig/
servlet-list/servlet[servlet-name="DBUriServlet"]/security-role-ref/<span class="bold">role-link</span>
                    return replace value of node $j with $p2)
                   return $i'
                  PASSING DOC2 AS "p1", '<span class="bold">servlet-users</span>' AS "p2" RETURNING CONTENT)
    INTO doc3 FROM DUAL;
  DBMS_XDB_CONFIG.cfg_update(doc3);
  COMMIT;
END;
/</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5283"></a><a id="ADXDB5282"></a><div class="props_rev_3"><a id="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15" name="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15"></a><h4 id="ADXDB-GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15" class="sect4"><span class="enumeration_section">32.9.4 </span>Configuring Package URIFACTORY to Handle DBUris
                  </h4>
                  <div>
                     <p>To improve efficiency, you can teach <code class="codeph">URIFACTORY</code> that a URI of a given form represents database access and so should be realized as a DBUri, not an HTTPUri. You do this by registering a handler for the URI as a prefix, specifying <code class="codeph">DBURIType</code> as the type of instance to generate.
                     </p>
                     <div class="section">
                        <p>A URL such as <code class="codeph">http://</code><span class="italic"><code class="codeph">server</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">servlets</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">oradb</code></span> is handled by DBUriServlet (or by a custom servlet). When a URL such as this is stored as a <code class="codeph">URIType</code> instance, it is generally desirable to use subtype <code class="codeph">DBURIType</code>, since this URI targets database data.
                        </p>
                        <p>However, if a <code class="codeph">URIType</code> instance is created using the methods of PL/SQL package <code class="codeph">URIFACTORY</code> then, by default, the subtype used is <code class="codeph">HTTPURIType</code>, not <code class="codeph">DBURIType</code>. This is because <code class="codeph">URIFACTORY</code> looks only at the URI prefix, sees <code class="codeph">http://</code>, and assumes that the URI targets a Web page. This results in unnecessary layers of communication and perhaps extra character conversions.
                        </p>
                        <p>To teach <code class="codeph">URIFACTORY</code> that URIs of the given form represent database accesses and so should be realized as DBUris, not HTTPUris, you register a handler for the URIs as a prefix, specifying <code class="codeph">DBURIType</code> as the type of instance to generate.
                        </p>
                        <p><a href="data-access-using-URIs.html#GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15__CBAHACBC">Example 32-22</a> effectively tells <code class="codeph">URIFACTORY</code> that any URI string starting with <code class="codeph">http://</code><span class="italic"><code class="codeph">server</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">servlets</code></span><code class="codeph">/oradb</code> corresponds to a database access.
                        </p>
                        <p>After you execute this code, all <code class="codeph">getURI()</code> calls in the same session automatically create DBUris for any URI strings with prefix <code class="codeph">http://</code><span class="italic"><code class="codeph">server</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">servlets</code></span><code class="codeph">/oradb</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15__GUID-00ECE9CF-8A1C-43A4-82FF-660F45EDE2D4">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/Database-URI-TYPEs.html#ARPLS800" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>for information about <code class="codeph">URIFACTORY</code> functions
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EDB23A06-6FD5-466F-9B37-74A96EACBC15__CBAHACBC">
                        <p class="titleinexample">Example 32-22 Registering a Handler for a DBUri Prefix </p><pre class="oac_no_warn" dir="ltr">BEGIN
  URIFACTORY.registerURLHandler('http://<span class="italic">server</span>/<span class="italic">servlets</span>/oradb',
                             'SYS', 'DBURIType', true, true);
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4225"></a><div class="props_rev_3"><a id="GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87" name="GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87"></a><h4 id="ADXDB-GUID-D5E47EC0-CD19-4485-85A0-3C850FB02F87" class="sect4"><span class="enumeration_section">32.9.5 </span>Table or View Access from a Web Browser Using DBUri Servlet
                  </h4>
                  <div>
                     <p>Oracle XML&nbsp;DB includes the DBUri servlet, which lets you access the content of any table or view directly from a web browser. It uses <code class="codeph">DBURIType</code> to generate a simple XML document from the table contents. The servlet is C language-based and installed in the Oracle XML&nbsp;DB HTTP server. 
                     </p>
                     <p>By default, the servlet is installed under the virtual directory <code class="codeph">/oradb</code>. 
                     </p>
                     <p>The URL passed to the <code class="codeph">DBUri</code> Servlet is an extension of the URL passed to the <code class="codeph">DBURIType</code>. The URL is extended with the address and port number of the Oracle XML&nbsp;DB HTTP server and the virtual root that directs HTTP(S) requests to the <code class="codeph">DBUri</code> servlet. The default configuration for this is <code class="codeph">/oradb</code>. 
                     </p>
                     <p>The URL <code class="codeph">http://localhost:8080/oradb/HR/DEPARTMENTS</code> would thus return an XML document containing the contents of the <code class="codeph">DEPARTMENTS</code> table in the <code class="codeph">HR</code> database schema. This assumes that the Oracle XML&nbsp;DB HTTP server is running on port 8080, the virtual root for the DBUri servlet is <code class="codeph">/oradb</code>, and that the user making the request has access to the <code class="codeph">HR</code> database schema. 
                     </p>
                     <p><code class="codeph">DBUri</code> servlet accepts parameters that allow you to specify the name of the <code class="codeph">ROW</code> tag and MIME-type of the document that is returned to the client. 
                     </p>
                     <p>Content in <code class="codeph">XMLType</code> table or view can also be accessed through the DBUri servlet. When the URL passed to the DBUri servlet references an <code class="codeph">XMLType</code> table or <code class="codeph">XMLType</code> view the URL can be extended with an XPath expression that can determine which documents in the table or row are returned. The XPath expression appended to the URL can reference any node in the document. 
                     </p>
                     <p>XML generated by DBUri servlet can be transformed using the XSLT processor built into Oracle XML&nbsp;DB. This lets XML that is generated by DBUri servlet be presented in a more legible format such as HTML.</p>
                     <p>XSLT stylesheet processing is initiated by specifying a transform parameter as part of the URL passed to DBUri servlet. The stylesheet is specified using a URI that references the location of the stylesheet within database. The URI can either be a <code class="codeph">DBURIType</code> value that identifies a <code class="codeph">XMLType</code> column in a table or view, or a path to a document stored in Oracle XML&nbsp;DB Repository. The stylesheet is applied directly to the generated XML before it is returned to the client. When using DBUri servlet for XSLT processing, it is good practice to use the <code class="codeph">contenttype</code> parameter to explicitly specify the MIME type of the generated output. 
                     </p>
                     <p>If the XML document being transformed is stored as an XML schema-based <code class="codeph">XMLType</code> instance, then Oracle XML&nbsp;DB can reduce the overhead associated with XSL transformation by leveraging the capabilities of the lazily loaded virtual DOM.
                     </p>
                     <p>The root of the URL is <code class="codeph">/oradb</code>, so the URL is passed to the DBUri servlet that accesses the <code class="codeph">purchaseorder</code> table in the <code class="codeph">SCOTT</code> database schema, rather than as a resource in Oracle XML&nbsp;DB Repository. The URL includes an XPath expression that restricts the result set to those documents where node <code class="codeph">/PurchaseOrder/Reference/text()</code> contains the value specified in the predicate. The <code class="codeph">contenttype</code> parameter sets the MIME type of the generated document to <code class="codeph">text/xml</code>.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="data-access-using-URIs.html#GUID-F9F4D101-D592-4A5C-80E7-02B3DFD3A3B3" title="You can retrieve repository resources using the Oracle XML&nbsp;DB HTTP server. Oracle Database also includes a servlet, DBUriServlet, that makes any kind of database data available through HTTP(S) URLs. The data can be returned as plain text, HTML, or XML.">DBUriServlet</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;2: 
            <p>This XQuery expression is split across two lines only for the purpose of documentation.</p><br>Footnote&nbsp;3: 
            <p>This XQuery expression is split across two lines only for the purpose of documentation.</p><br></div>
      </article>
   </body>
</html>
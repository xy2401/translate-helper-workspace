<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Attribute Clustering</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Warehousing Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Warehousing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96243-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="advanced-query-rewrite-materialized-views.html" title="Previous" type="text/html">
      <link rel="next" href="using-zone-maps.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide">
    <meta name="dcterms.isVersionOf" content="DWHSG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="advanced-query-rewrite-materialized-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-zone-maps.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Warehousing Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-optimizing-dw.html" property="item" typeof="WebPage"><span property="name">Optimizing Data Warehouses</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Attribute Clustering</li>
            </ol>
            <a id="GUID-7B007A3C-53C2-4437-9E71-9ECECF8B4FAB" name="GUID-7B007A3C-53C2-4437-9E71-9ECECF8B4FAB"></a>
            
            <h2 id="DWHSG-GUID-7B007A3C-53C2-4437-9E71-9ECECF8B4FAB" class="sect2"><span class="enumeration_chapter">13 </span>Attribute Clustering
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Attribute clustering is a table-level directive that clusters data in close physical proximity based on the content of certain columns. Storing data that logically belongs together in close physical proximity can greatly reduce the amount of data to be processed and can lead to better performance of certain queries in the workload.</p>
               <p>This chapter includes the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="attribute-clustering.html#GUID-08788616-8D61-4550-9871-301503557E60">About Attribute Clustering</a></p>
                  </li>
                  <li>
                     <p><a href="attribute-clustering.html#GUID-B38DC1A3-3236-4741-BC33-613FE6B59C4F">Attribute Clustering Operations</a></p>
                  </li>
                  <li>
                     <p><a href="attribute-clustering.html#GUID-BA91F630-389F-417D-A07C-D53A57D80F61">Viewing Attribute Clustering Information</a></p>
                  </li>
               </ul>
            </div><a id="DWHSG8917"></a><div class="props_rev_3"><a id="GUID-08788616-8D61-4550-9871-301503557E60" name="GUID-08788616-8D61-4550-9871-301503557E60"></a><h3 id="DWHSG-GUID-08788616-8D61-4550-9871-301503557E60" class="sect3"><span class="enumeration_section">13.1 </span>About Attribute Clustering
               </h3>
               <div>
                  <p>An attri<a id="d53740e51" class="indexterm-anchor"></a><a id="d53740e53" class="indexterm-anchor"></a><a id="d53740e55" class="indexterm-anchor"></a>bute-clustered table stores data in close proximity on disk in an ordered way based on the values of a certain set of columns in the table or a set of columns in the other tables.
                  </p>
                  <p>You can cluster according to the linear order of specified columns or by using a function that permits multi-dimensional clustering (also known as interleaved clustering). Attribute clustering improves the effectiveness of zone maps, Exadata Storage Indexes, and In-memory min/max pruning. Queries that qualify clustered columns will access only the clustered regions. When attribute clustering is defined on a partitioned table, the clustering applies to all partitions.</p>
                  <p>Attribute clustering is a directive property of a table. It is not enforced for every DML operation, but only affects direct-path insert operations, data movement, or table creation. Conventional DML operations on the table are not affected by attribute clustering. This means that whatever is done to cluster the data is an operation that is only done on the current working data set. This is in contrast to a manually-applied <code class="codeph">ORDER</code> <code class="codeph">BY</code> command, such as what occurs as part of a CTAS operation.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="attribute-clustering.html#GUID-0655904B-79FF-409C-9AD9-C05F5E1010E1">Methods of Clustering Data</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-CD788885-2FD1-460B-9844-4035CF76CDCE">Types of Attribute Clustering</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-CFA30358-183D-4770-9A79-C6720BF9D753">Example: Attribute Clustered Table</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-0314F65B-3015-4911-92E9-2C4117BC9579">Guidelines for Using Attribute Clustering</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-739B232C-969C-4506-AA12-6B52D6F20D70">Advantages of Attribute-Clustered Tables</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-6C7C444C-5796-4A43-AE3C-B7A373CC932D">About Defining Attribute Clustering for Tables</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-636BB068-94D6-41FA-9FCE-5F3E71A1CF0A">About Specifying When Attribute Clustering Must be Performed</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-0655904B-79FF-409C-9AD9-C05F5E1010E1" name="GUID-0655904B-79FF-409C-9AD9-C05F5E1010E1"></a><h4 id="DWHSG-GUID-0655904B-79FF-409C-9AD9-C05F5E1010E1" class="sect4"><span class="enumeration_section">13.1.1 </span>Methods of Clustering Data
                  </h4>
                  <div>
                     <p>You can <a id="d53740e129" class="indexterm-anchor"></a>cluster data using the following methods:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Clustering based on one or more columns of the table on which attribute clustering is defined.</p>
                        </li>
                        <li>
                           <p>Clustering based on one or more columns that are joined with the table on which attribute clustering is defined. Clustering based on joined columns is called <span class="bold">join attribute clustering</span>. The tables should be connected through a primary key-foreign key relationship but foreign keys do not have to be enforced.
                           </p>
                           <p>Because star queries typically qualify dimension hierarchies, it can be beneficial if fact tables are clustered based on columns (attributes) of one or more dimension tables. With join attribute clustering, you can join one or more dimension tables with a fact table and then cluster the fact table data by dimension hierarchy columns. To cluster a fact table on columns from one or more dimension tables, the join to the dimension tables must be on a primary or unique key of the dimension tables. Join attribute clustering in the context of star queries is also known as <span class="italic">hierarchical clustering</span> because the table data is clustered by dimension hierarchies, each made up of an ordered list of hierarchical columns (for example, the <code class="codeph">nation</code>, <code class="codeph">state</code>, and <code class="codeph">city</code> columns forming a <code class="codeph">location</code> hierarchy).
                           </p>
                           <p><span class="bold">Note:</span> In contrast with Oracle Table Clusters, join attribute clustered tables do not store data from a group of tables in the same database blocks. For example, consider an attribute clustered table <code class="codeph">sales</code> joined with a dimension table <code class="codeph">products</code>. The <code class="codeph">sales</code> table will only contain rows from the <code class="codeph">sales</code> table, but the ordering of the rows will be based on the values of columns joined from <code class="codeph">products</code> table. The appropriate join will be executed during data movement, direct path insert and CTAS operations.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9338"></a><div class="props_rev_3"><a id="GUID-CD788885-2FD1-460B-9844-4035CF76CDCE" name="GUID-CD788885-2FD1-460B-9844-4035CF76CDCE"></a><h4 id="DWHSG-GUID-CD788885-2FD1-460B-9844-4035CF76CDCE" class="sect4"><span class="enumeration_section">13.1.2 </span>Types of Attribute Clustering
                  </h4>
                  <div>
                     <p>Attribute <a id="d53740e202" class="indexterm-anchor"></a><a id="d53740e206" class="indexterm-anchor"></a>clustering is a user-defined table directive that provides data clustering on one or more columns in a table. The directives can be specified when the table is created or modified.
                     </p>
                     <p>Oracle Database provides the following types of attribute clustering:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="attribute-clustering.html#GUID-F22430E9-5A2E-4128-B91A-63414121BF88">Attribute Clustering with Linear Ordering</a></p>
                        </li>
                        <li>
                           <p><a href="attribute-clustering.html#GUID-C10C10DF-DB77-4F40-B4CA-7F5612DA5CE4">Attribute Clustering with Interleaved Ordering</a></p>
                        </li>
                     </ul>
                     <p>Regardless of the type of attribute clustering used, you can either cluster data based on a single table or by joining multiple tables (join attribute clustering).</p>
                  </div><a id="DWHSG9339"></a><div class="props_rev_3"><a id="GUID-F22430E9-5A2E-4128-B91A-63414121BF88" name="GUID-F22430E9-5A2E-4128-B91A-63414121BF88"></a><h5 id="DWHSG-GUID-F22430E9-5A2E-4128-B91A-63414121BF88" class="sect5"><span class="enumeration_section">13.1.2.1 </span>Attribute Clustering with Linear Ordering
                     </h5>
                     <div>
                        <p>Linear ordering stores the data according to the order of specified columns. This is the default type of clustering. For example, linear ordering on the <code class="codeph">(prod_id, channel_id)</code> columns of the table <code class="codeph">SALES</code> sorts the data by <code class="codeph">prod_id</code> first and then by <code class="codeph">channel_id</code>. The sorted data is stored on disk with the data for clustered columns being in close proximity.
                        </p>
                        <p>Linear ordering can be defined on single tables or multiple tables that are connected through a primary key-foreign key relationship.</p>
                        <p>Use the <code class="codeph">CLUSTERING</code> <code class="codeph">...</code> <code class="codeph">BY</code> <code class="codeph">LINEAR</code> <code class="codeph">ORDER</code> directive to perform attribute clustering based on the order of specified columns. 
                        </p>
                        <p>Attribute clustering based on linear ordering of columns is best used in the following scenarios:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Queries specify the prefix of columns included in the <code class="codeph">CLUSTERING</code> clause in a single table
                              </p>
                              <p>For example, if queries on <code class="codeph">sales</code> often specify either a customer ID or a combination of customer ID and product ID, then you could cluster data in the table using the column order <code class="codeph">cust_id</code>, <code class="codeph">prod_id</code>.
                              </p>
                           </li>
                           <li>
                              <p>Columns used in the <code class="codeph">CLUSTERING</code> clause have an acceptable level of cardinality
                              </p>
                              <p>The potential data reduction that can be obtained in the scenarios described in <span class="q">"<a href="attribute-clustering.html#GUID-739B232C-969C-4506-AA12-6B52D6F20D70">Advantages of Attribute-Clustered Tables</a>"</span> increases in direct proportion to the data reduction obtained from a predicate on a column.
                              </p>
                           </li>
                        </ul>
                        <p>Linear clustering combined with zone maps is very effective in I/O reduction.</p>
                     </div>
                  </div><a id="DWHSG9340"></a><div class="props_rev_3"><a id="GUID-C10C10DF-DB77-4F40-B4CA-7F5612DA5CE4" name="GUID-C10C10DF-DB77-4F40-B4CA-7F5612DA5CE4"></a><h5 id="DWHSG-GUID-C10C10DF-DB77-4F40-B4CA-7F5612DA5CE4" class="sect5"><span class="enumeration_section">13.1.2.2 </span>Attribute Clustering with Interleaved Ordering
                     </h5>
                     <div>
                        <p>Interleaved ordering uses a special multidimensional clustering technique based on Z-order curve fitting. It maps multiple column attribute values (multidimensional data points) to a single one-dimensional value while preserving the multidimensional locality of column values (data points). Interleaved ordering is supported on single tables or multiple tables. Unlike linear ordering, this method does not require the leading columns of the clustering definition to be present to achieve I/O pruning benefits for the scenarios described in <span class="q">"<a href="attribute-clustering.html#GUID-739B232C-969C-4506-AA12-6B52D6F20D70">Advantages of Attribute-Clustered Tables</a>"</span>.
                        </p>
                        <p>Columns can be used individually or grouped together into column groups. Each individual column or column group will be used to constitute one of the multidimensional data points in the cluster. Grouped columns are bracketed by '('..')', and must follow the dimensional hierarchy from the coarsest to the finest level of granularity. For example, (<code class="codeph">product_category</code>, <code class="codeph">product_subcategory</code>).
                        </p>
                        <p>Use the <code class="codeph">CLUSTERING</code> <code class="codeph">...</code> <code class="codeph">BY</code> <code class="codeph">INTERLEAVED</code> <code class="codeph">ORDER</code> directive to perform clustering by interleaved ordering.
                        </p>
                        <p>Interleaved clustering is most beneficial for SQL operations with varying predicates on multiple columns. This is often the case for star queries against a dimensional model, where the query predicates are on dimension tables and the number of predicates vary. Using interleaved join attribute clustering is most common in environments where the fact table is clustered based on columns from the dimension tables. The columns from a dimension table will likely contain a hierarchy, for example, the hierarchy of a product category and sub-category. In this case, clustering of the fact table would occur on dimension columns forming a hierarchy. This is the reason join attribute clustering for star schemas is sometimes referred to as hierarchical clustering. For example, if queries on <code class="codeph">sales</code> specify columns from different dimensions, then you could cluster data in the <code class="codeph">sales</code> table according to columns in these dimensions.
                        </p>
                        <p>Interleaved clustering combined with zone maps is very effective in I/O pruning for star schema queries. In addition, it enables you to provide a very efficient I/O pruning for queries using zone maps, and enhances compression because the same column values are close to each other and can be easily compressed.</p>
                     </div>
                  </div>
               </div><a id="DWHSG8918"></a><a id="DWHSG9341"></a><div class="props_rev_3"><a id="GUID-CFA30358-183D-4770-9A79-C6720BF9D753" name="GUID-CFA30358-183D-4770-9A79-C6720BF9D753"></a><h4 id="DWHSG-GUID-CFA30358-183D-4770-9A79-C6720BF9D753" class="sect4"><span class="enumeration_section">13.1.3 </span>Example: Attribute Clustered Table
                  </h4>
                  <div>
                     <p>An example of how a clustered table looks is illustrated in <a href="attribute-clustering.html#GUID-CFA30358-183D-4770-9A79-C6720BF9D753__CHDHBIID">Figure 13-1</a>. Assume you have a table <code class="codeph">sales</code> with columns <code class="codeph">(category, country)</code>. The table on the left is clustered using linear ordering, and the table on the right is clustered using interleaved ordering. Observe that, in the interleaved-ordered table, there are contiguous regions on disk that contain data with a given category and country.
                     </p>
                     <div class="figure" id="GUID-CFA30358-183D-4770-9A79-C6720BF9D753__CHDHBIID">
                        <p class="titleinfigure">Figure 13-1 Attribute-Clustered Tables</p><img src="img/dwhsg136.png" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" longdesc="img_text/dwhsg136.html"><br><a href="img_text/dwhsg136.html">Description of "Figure 13-1 Attribute-Clustered Tables"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="DWHSG9342"></a><div class="props_rev_3"><a id="GUID-0314F65B-3015-4911-92E9-2C4117BC9579" name="GUID-0314F65B-3015-4911-92E9-2C4117BC9579"></a><h4 id="DWHSG-GUID-0314F65B-3015-4911-92E9-2C4117BC9579" class="sect4"><span class="enumeration_section">13.1.4 </span>Guidelines for Using Attribute Clustering
                  </h4>
                  <div>
                     <p>The following are some <a id="d53740e451" class="indexterm-anchor"></a>considerations when defining an attribute clustered table:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use attribute clustering in combination with zone maps to facilitate zone pruning and its associated I/O reduction.</p>
                        </li>
                        <li>
                           <p>Consider large tables that are frequently queried with predicates on medium to low cardinality columns.</p>
                        </li>
                        <li>
                           <p>Consider fact tables that are frequently queried by dimensional hierarchies.</p>
                        </li>
                        <li>
                           <p>For a partitioned table, consider including columns that correlate with partition keys (to facilitate zone map partition pruning).</p>
                        </li>
                        <li>
                           <p>For linear ordering, list columns in prefix-to-suffix order.</p>
                        </li>
                        <li>
                           <p>Group together columns that form a dimensional hierarchy. This constitutes a column group. Within each column group, list columns in order of coarsest to finest granularity.</p>
                        </li>
                        <li>
                           <p>If there are more than four dimension tables, include the dimensions that are most commonly specified with filters. Limit the number of dimensions to two or three for better clustering effect.</p>
                        </li>
                        <li>
                           <p>Consider using attribute clustering instead of indexes on low to medium cardinality columns.</p>
                        </li>
                        <li>
                           <p>If the primary key of a dimension table is composed of dimension hierarchy values (for example, the primary key is made up of year, quarter, month, day values), make the corresponding foreign key as clustering column instead of dimension hierarchy.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG8919"></a><div class="props_rev_3"><a id="GUID-739B232C-969C-4506-AA12-6B52D6F20D70" name="GUID-739B232C-969C-4506-AA12-6B52D6F20D70"></a><h4 id="DWHSG-GUID-739B232C-969C-4506-AA12-6B52D6F20D70" class="sect4"><span class="enumeration_section">13.1.5 </span>Advantages of Attribute-Clustered Tables
                  </h4>
                  <div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Eliminates storage costs associated with using indexes</p>
                        </li>
                        <li>
                           <p>Enables the accessing of clustered regions rather than performing random I/O or full table scans when used in conjunction with zone maps</p>
                        </li>
                        <li>
                           <p>Provides I/O reduction when used in conjunction with any of the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle Exadata Storage Indexes</p>
                              </li>
                              <li>
                                 <p>Oracle In-memory min/max pruning</p>
                              </li>
                              <li>
                                 <p>Zone maps</p>
                              </li>
                           </ul>
                           <p>Attribute clustering provides data clustering based on the attributes that are used as filter predicates. Because both Exadata Storage Indexes and Oracle In-memory min/max pruning track the minimum and maximum values of columns stored in each physical region, clustering reduces the I/O required to access data.</p>
                           <p>I/O pruning using zone maps can significantly reduce I/O costs and CPU cost of table scans and index scans.</p>
                        </li>
                        <li>
                           <p>Enables clustering of fact tables based on dimension columns in star schemas</p>
                           <p>Techniques such as traditional table clusters do not provide for ordering by columns of other tables. In star schemas, most queries qualify dimension tables and not fact tables, so clustering by fact table columns is not effective. Oracle Database supports clustering on columns in dimension tables.</p>
                        </li>
                        <li>
                           <p>Improves data compression ratios and in this way indirectly improves table scan costs</p>
                           <p>Compression can be improved because, with clustering, there is a high probability that clustered columns with the same values are close to each other on disk, hence the database can more easily compress them.</p>
                        </li>
                        <li>
                           <p>Minimizes table lookup and single block I/O operations for index range scan operations when the attribute clustering is on the index selection criteria.</p>
                        </li>
                        <li>
                           <p>Enables I/O reduction in OLTP applications for queries that qualify a prefix in and use attribute clustering with linear order</p>
                        </li>
                        <li>
                           <p>Enables I/O reduction on a subset of the clustering columns for attribute clustering with interleaved ordering</p>
                           <p>If table data is ordered on multiple columns, as in an index-organized table, then a query must specify a prefix of the columns to gain I/O savings. In contrast, a <code class="codeph">BY</code> <code class="codeph">INTERLEAVED</code> table permits queries to benefit from I/O pruning when they specify columns from multiple tables in a non-prefix order.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9343"></a><div class="props_rev_3"><a id="GUID-6C7C444C-5796-4A43-AE3C-B7A373CC932D" name="GUID-6C7C444C-5796-4A43-AE3C-B7A373CC932D"></a><h4 id="DWHSG-GUID-6C7C444C-5796-4A43-AE3C-B7A373CC932D" class="sect4"><span class="enumeration_section">13.1.6 </span>About Defining Attribute Clustering for Tables
                  </h4>
                  <div>
                     <p>Attribute clustering information is part of the table metadata. You can define attribute clustering for a table either when table is first created or subsequently, by altering the table definition.</p>
                     <p>Use the <code class="codeph">CLUSTERING</code> clause of the <code class="codeph">CREATE TABLE</code> statement to define attribute clustering for a table. The type of attribute clustering is specified by including <code class="codeph">BY LINEAR ORDER</code> or <code class="codeph">BY INTERLEAVED ORDER</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-6C7C444C-5796-4A43-AE3C-B7A373CC932D__GUID-C64C44E3-7098-45DD-AF39-611DE105E25B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="attribute-clustering.html#GUID-DAECFBC5-FD1A-45A5-8C2C-DC9884D0857B">Creating Attribute-Clustered Tables with Linear Ordering</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="attribute-clustering.html#GUID-41510560-706B-4AF8-A59B-C8949BC5F4A1">Creating Attribute-Clustered Tables with Interleaved Ordering</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <p>If attribute clustering was not defined when the table was created, you can modify the table definition and add clustering. Use the <code class="codeph">ALTER TABLE ... ADD CLUSTERING</code> statement to define attribute clustering for an existing table.
                     </p>
                     <div class="infoboxnotealso" id="GUID-6C7C444C-5796-4A43-AE3C-B7A373CC932D__GUID-482A1B13-A82D-40B8-86A4-34B683A74BC4">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="attribute-clustering.html#GUID-B30ECC81-6C05-48EB-B21D-F7923C1E1C30">Adding Attribute Clustering to an Existing Table</a>"</span></p>
                     </div>
                  </div>
               </div><a id="DWHSG9344"></a><div class="props_rev_3"><a id="GUID-636BB068-94D6-41FA-9FCE-5F3E71A1CF0A" name="GUID-636BB068-94D6-41FA-9FCE-5F3E71A1CF0A"></a><h4 id="DWHSG-GUID-636BB068-94D6-41FA-9FCE-5F3E71A1CF0A" class="sect4"><span class="enumeration_section">13.1.7 </span>About Specifying When Attribute Clustering Must be Performed
                  </h4>
                  <div>
                     <p>Performing clustering may be expensive because it involves reorganization of the table and clustering data during DML operations. Oracle Database does not enforce the clustering of data on conventional DML, conventional insert, update, and merge. </p>
                     <p>Clustering can be performed in two ways. The first is to automatically perform clustering for certain DML operations on the table. This is done by defining, as part of the table metadata, the operations for which clustering is triggered. The second is to explicitly specify that clustering must be performed as described in <span class="q">"<a href="attribute-clustering.html#GUID-E45539BB-1A1A-43A2-BE13-E1BDA3756996">Using Hints to Control Attribute Clustering for DML Operations</a>"</span> and <span class="q">"<a href="attribute-clustering.html#GUID-286AE59E-1285-4CE8-9287-C47A4C8D3F12">Overriding Table-level Settings for Attribute Clustering During DDL Operations</a>"</span>. In this case, you can perform clustering for a table even if its metadata definition does not include clustering.
                     </p>
                     <p>As part of the table definition, you can specify that attribute clustering must be performed when the following operations are triggered:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Direct-path insert operations</p>
                           <p>Set the <code class="codeph">ON LOAD</code> option to <code class="codeph">YES</code> to specify that attribute clustering must be performed during direct-path insert operations.
                           </p>
                        </li>
                        <li>
                           <p>Data movement operations</p>
                           <p>Set the <code class="codeph">ON DATA MOVEMENT</code> option to <code class="codeph">YES</code> to specify clustering must be performed during data movement operations. This includes online table redefinition and the following partition operations: <code class="codeph">MOVE</code>, <code class="codeph">MERGE</code>, <code class="codeph">SPLIT</code>, and <code class="codeph">COALESCE</code>.
                           </p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">ON LOAD</code> and <code class="codeph">ON DATA MOVEMENT</code> options can be included in a <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statement. If neither <code class="codeph">YES</code> <code class="codeph">ON</code> <code class="codeph">LOAD</code> nor <code class="codeph">YES</code> <code class="codeph">ON</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code> is specified, then clustering is not enforced automatically.
                     </p>
                     <p>It will serve only as metadata defining natural clustering of the table that may be used later for zone map creation. In this case, it is up to the user to enforce clustering during loads.</p>
                     <div class="infoboxnotealso" id="GUID-636BB068-94D6-41FA-9FCE-5F3E71A1CF0A__GUID-D330AE90-4DBA-44D7-993D-7F2047179F52">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="attribute-clustering.html#GUID-B30ECC81-6C05-48EB-B21D-F7923C1E1C30">Adding Attribute Clustering to an Existing Table</a>"</span> for an example on using the <code class="codeph">ON LOAD</code> and <code class="codeph">ON DATA MOVEMENT</code> options
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG8922"></a><div class="props_rev_3"><a id="GUID-B38DC1A3-3236-4741-BC33-613FE6B59C4F" name="GUID-B38DC1A3-3236-4741-BC33-613FE6B59C4F"></a><h3 id="DWHSG-GUID-B38DC1A3-3236-4741-BC33-613FE6B59C4F" class="sect3"><span class="enumeration_section">13.2 </span>Attribute Clustering Operations
               </h3>
               <div>
                  <p>This section describes common tasks involving attribute clustering and includes:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="attribute-clustering.html#GUID-C7B6D6CF-50C6-4556-BD4C-737B5B5D2653">Privileges for Attribute-Clustered Tables</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-DAECFBC5-FD1A-45A5-8C2C-DC9884D0857B">Creating Attribute-Clustered Tables with Linear Ordering</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-41510560-706B-4AF8-A59B-C8949BC5F4A1">Creating Attribute-Clustered Tables with Interleaved Ordering</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-589A37EE-61C9-4F12-BD8F-CB12F3A67675">Maintaining Attribute Clustering</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9163"></a><div class="props_rev_3"><a id="GUID-C7B6D6CF-50C6-4556-BD4C-737B5B5D2653" name="GUID-C7B6D6CF-50C6-4556-BD4C-737B5B5D2653"></a><h4 id="DWHSG-GUID-C7B6D6CF-50C6-4556-BD4C-737B5B5D2653" class="sect4"><span class="enumeration_section">13.2.1 </span>Privileges for Attribute-Clustered Tables
                  </h4>
                  <div>
                     <p>To define attribute clustering for a table, you must have the <code class="codeph">CREATE</code> or <code class="codeph">ALTER</code> privilege on the table. Additionally, for join attribute clustering, you must also have the <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on the joined table or tables.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C7B6D6CF-50C6-4556-BD4C-737B5B5D2653__GUID-627D0F7D-97C0-4D04-9119-CA4847127144">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and semantics of the <code class="codeph">CLUSTERING</code> clause of <code class="codeph">CREATE</code> <code class="codeph">TABLE</code></p>
                     </div>
                  </div>
               </div><a id="DWHSG8923"></a><div class="props_rev_3"><a id="GUID-DAECFBC5-FD1A-45A5-8C2C-DC9884D0857B" name="GUID-DAECFBC5-FD1A-45A5-8C2C-DC9884D0857B"></a><h4 id="DWHSG-GUID-DAECFBC5-FD1A-45A5-8C2C-DC9884D0857B" class="sect4"><span class="enumeration_section">13.2.2 </span>Creating Attribute-Clustered Tables with Linear Ordering
                  </h4>
                  <div>
                     <div class="section">
                        <p>Linear ordering stores the data according to the order of specified columns, equivalent to an <code class="codeph">ORDER BY</code> clause. Linear ordering is supported on columns of a single table or multiple tables in a star schema. <a href="attribute-clustering.html#GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3">Examples of Attribute Clustering with Linear Ordering</a> contains examples of attribute-clustered tables with linear ordering.
                        </p>
                        <div class="infoboxnotealso" id="GUID-DAECFBC5-FD1A-45A5-8C2C-DC9884D0857B__GUID-B72C193B-A5FC-42F8-85C5-0287C815F1E0">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56843" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about attribute clustering restrictions
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG9156"></a><a id="DWHSG9157"></a><a id="DWHSG8924"></a><div class="props_rev_3"><a id="GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3" name="GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3"></a><h5 id="DWHSG-GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3" class="sect5"><span class="enumeration_section">13.2.2.1 </span>Examples of Attribute Clustering with Linear Ordering
                     </h5>
                     <div>
                        <div class="section">
                           <p><a href="attribute-clustering.html#GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3__CHDFCDGE">Example 13-1</a> and <a href="attribute-clustering.html#GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3__CHDFGDED">Example 13-2</a> illustrate linear ordering.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3__CHDFCDGE">
                           <p class="titleinexample">Example 13-1 Creating a Table with Linear Ordering</p>
                           <p>Assume that queries on <code class="codeph">sales</code> often specify either a customer ID or a combination of a customer ID and product ID. You can create an attribute-clustered table so that such queries benefit from I/O reduction for the scenarios described in <span class="q">"<a href="attribute-clustering.html#GUID-739B232C-969C-4506-AA12-6B52D6F20D70">Advantages of Attribute-Clustered Tables</a>"</span>. 
                           </p>
                           <p>The following statement creates the <code class="codeph">sales</code> table with linear ordering:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE sales (
  prod_id        NUMBER(6) NOT NULL,
  cust_id        NUMBER NOT NULL,
  time_id        DATE NOT NULL,
  channel_id     CHAR(1) NOT NULL,
  promo_id       NUMBER(6) NOT NULL,
  quantity_sold  NUMBER(3) NOT NULL,
  amount_sold    NUMBER(10,2) NOT NULL
)
CLUSTERING
  BY LINEAR ORDER (cust_id, prod_id);
</pre><p>This clustered table is useful for queries containing a predicate on <code class="codeph">cust_id</code> or predicates on both <code class="codeph">cust_id</code> and <code class="codeph">prod_id</code>.
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3__CHDFGDED">
                           <p class="titleinexample">Example 13-2 Creating a Table with Linear Ordering and a Join</p>
                           <p>Assume that the <code class="codeph">products</code> dimension table has a unique key or primary key on the <code class="codeph">prod_id</code> column. Other columns in this table include, but are not limited to, <code class="codeph">prod_name</code>, <code class="codeph">prod_desc</code>, <code class="codeph">prod_category</code>, <code class="codeph">prod_subcategory</code>, and <code class="codeph">prod_status</code>. Queries on the <code class="codeph">my_sales</code> fact table often contain one of the following:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>a predicate on <code class="codeph">cust_id</code></p>
                              </li>
                              <li>
                                 <p>predicates on <code class="codeph">cust_id</code> and <code class="codeph">prod_category</code></p>
                              </li>
                              <li>
                                 <p>predicates on <code class="codeph">cust_id</code>, <code class="codeph">prod_category</code>, and <code class="codeph">prod_subcategory</code></p>
                              </li>
                           </ul>
                           <p>Defining attribute clustering for the <code class="codeph">my_sales</code> table is useful for queries that contain the predicates included in the <code class="codeph">CLUSTERING</code> clause.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE my_sales (
  prod_id        NUMBER(6) NOT NULL,
  cust_id        NUMBER NOT NULL,
  time_id        DATE NOT NULL,
  channel_id     CHAR(1) NOT NULL,
  promo_id       NUMBER(6) NOT NULL,
  quantity_sold  NUMBER(3) NOT NULL,
  amount_sold    NUMBER(10,2) NOT NULL
)
CLUSTERING
  my_sales JOIN products ON (my_sales.prod_id = products.prod_id)
  BY LINEAR ORDER (cust_id, prod_category, prod_subcategory);
</pre><div class="infoboxnotealso" id="GUID-F04D6A23-9E72-4283-BFFF-F4406BD9BFC3__GUID-A41D0B21-30CC-4D98-9065-E418A7159A75">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56830" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and semantics of the <code class="codeph">BY</code> <code class="codeph">LINEAR</code> <code class="codeph">ORDER</code> clause
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DWHSG8927"></a><div class="props_rev_3"><a id="GUID-41510560-706B-4AF8-A59B-C8949BC5F4A1" name="GUID-41510560-706B-4AF8-A59B-C8949BC5F4A1"></a><h4 id="DWHSG-GUID-41510560-706B-4AF8-A59B-C8949BC5F4A1" class="sect4"><span class="enumeration_section">13.2.3 </span>Creating Attribute-Clustered Tables with Interleaved Ordering
                  </h4>
                  <div>
                     <div class="section">
                        <p>Interleaved ordering uses a special multidimensional clustering technique similar to a Z-order sort. It is especially beneficial when you have a specific set of predicates that are commonly used most of the time, but do not always use all of them. Interleaved ordering is useful for dimensional hierarchies of star schemas in a data warehouse. <span class="q">"<a href="attribute-clustering.html#GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03">Examples of Attribute Clustering with Interleaved Ordering</a>"</span> contains examples of attribute-clustered tables with interleaved ordering.
                        </p>
                        <div class="infoboxnotealso" id="GUID-41510560-706B-4AF8-A59B-C8949BC5F4A1__GUID-A5A35016-8771-456D-A82F-DAC88B463124">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56843" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about attribute clustering restrictions
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG9159"></a><a id="DWHSG9160"></a><a id="DWHSG8928"></a><div class="props_rev_3"><a id="GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03" name="GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03"></a><h5 id="DWHSG-GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03" class="sect5"><span class="enumeration_section">13.2.3.1 </span>Examples of Attribute Clustering with Interleaved Ordering
                     </h5>
                     <div>
                        <div class="section">
                           <p><a href="attribute-clustering.html#GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03__CCHGFFIB">Example 13-3</a> and <a href="attribute-clustering.html#GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03__CCHCGHCD">Example 13-4</a> illustrate interleaved ordering.
                           </p>
                           <p>You can also create an attribute clustered table so that queries benefit from pruning with zone maps. <span class="q">"<a href="using-zone-maps.html#GUID-655206D5-CD38-4CE3-AD20-DC984BB7CE26">Creating Zone Maps with Attribute Clustering</a>"</span> contains examples of defining zone maps with attribute clustering.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03__CCHGFFIB">
                           <p class="titleinexample">Example 13-3 Creating a Table with Interleaved Ordering</p>
                           <p>Assume that queries on <code class="codeph">sales</code> often specify either a time ID or a combination of time ID and product ID. You can create <code class="codeph">sales</code> with interleaved attribute clustering using the following command:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE sales (
  prod_id        NUMBER(6) NOT NULL,
  cust_id        NUMBER NOT NULL,
  time_id        DATE NOT NULL,
  channel_id     CHAR(1) NOT NULL,
  promo_id       NUMBER(6) NOT NULL,
  quantity_sold  NUMBER(3) NOT NULL,
  amount_sold    NUMBER(10,2) NOT NULL
)
CLUSTERING
  BY INTERLEAVED ORDER (time_id, prod_id);
</pre><p>This clustered table is useful for queries containing one of the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>a predicate on <code class="codeph">time_id</code></p>
                              </li>
                              <li>
                                 <p>a predicate on <code class="codeph">prod_id</code></p>
                              </li>
                              <li>
                                 <p>predicates on <code class="codeph">time_id</code> and <code class="codeph">prod_id</code></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03__CCHCGHCD">
                           <p class="titleinexample">Example 13-4 Creating a Table with Interleaved Ordering and a Join</p>
                           <p>Large data warehouses frequently organize data in star schemas. A dimension table uses a parent-child hierarchy and is connected to a fact table by a foreign key. Clustering a fact table with interleaved ordering enables the database to use a special function to skip values in dimension columns during table scans. Note that clustering does not require an enforced foreign key relationship. However, Oracle Database does require primary or unique keys on the dimension tables.</p>
                           <p>The following command defines attribute clustering using interleaved ordering for the <code class="codeph">sales</code> fact table:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE sales (
  prod_id        NUMBER(6) NOT NULL,
  cust_id        NUMBER NOT NULL,
  time_id        DATE NOT NULL,
  channel_id     CHAR(1) NOT NULL,
  promo_id       NUMBER(6) NOT NULL,
  quantity_sold  NUMBER(3) NOT NULL,
  amount_sold    NUMBER(10,2) NOT NULL
)
CLUSTERING
  sales JOIN products ON (sales.prod_id = products.prod_id)
  BY INTERLEAVED ORDER ((time_id), (prod_category, prod_subcategory));
</pre><p>This clustered table is useful for queries containing one of the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>a predicate on <code class="codeph">time_id</code></p>
                              </li>
                              <li>
                                 <p>a predicate on <code class="codeph">prod_category</code></p>
                              </li>
                              <li>
                                 <p>predicates on <code class="codeph">prod_category</code> and <code class="codeph">prod_subcategory</code></p>
                              </li>
                              <li>
                                 <p>predicates on <code class="codeph">time_id</code> and <code class="codeph">prod_category</code></p>
                              </li>
                              <li>
                                 <p>predicates on <code class="codeph">time_id</code>, <code class="codeph">prod_category</code>, and <code class="codeph">prod_subcategory</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-96DF0C3A-1AC4-443D-AC07-0FC845ECEB03__GUID-187E1692-9F80-4969-9801-A47634F75AA8">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information on the <code class="codeph">CREATE TABLE</code> statement and <code class="codeph">CLUSTERING</code> clause
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DWHSG8932"></a><div class="props_rev_3"><a id="GUID-589A37EE-61C9-4F12-BD8F-CB12F3A67675" name="GUID-589A37EE-61C9-4F12-BD8F-CB12F3A67675"></a><h4 id="DWHSG-GUID-589A37EE-61C9-4F12-BD8F-CB12F3A67675" class="sect4"><span class="enumeration_section">13.2.4 </span>Maintaining Attribute Clustering
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can add, drop, and update the attribute clustering definition of a table at any point in time. The modified definition does not affect existing table data, but can only be used as directive for future operations.</p>
                        <p>The following maintenance operations modify table metadata:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="attribute-clustering.html#GUID-B30ECC81-6C05-48EB-B21D-F7923C1E1C30">Adding Attribute Clustering to an Existing Table</a></p>
                           </li>
                           <li>
                              <p><a href="attribute-clustering.html#GUID-C92FB7F3-ED86-4CD6-A152-7B1F4786E475">Modifying Attribute Clustering Definitions</a></p>
                           </li>
                           <li>
                              <p><a href="attribute-clustering.html#GUID-091E20D7-ED91-4716-B765-4D265A82DEAC">Dropping Attribute Clustering for an Existing Table</a></p>
                           </li>
                        </ul>
                        <p>You can also override the attribute clustering definitions on a table at runtime. The maintenance operations that influence attribute clustering behavior at runtime are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="attribute-clustering.html#GUID-E45539BB-1A1A-43A2-BE13-E1BDA3756996">Using Hints to Control Attribute Clustering for DML Operations</a></p>
                           </li>
                           <li>
                              <p><a href="attribute-clustering.html#GUID-286AE59E-1285-4CE8-9287-C47A4C8D3F12">Overriding Table-level Settings for Attribute Clustering During DDL Operations</a></p>
                           </li>
                           <li>
                              <p><a href="attribute-clustering.html#GUID-CF11EB18-EF2A-430F-8AB0-86FBB3AC063B">Clustering Table Data During Online Table Redefinition</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG8930"></a><div class="props_rev_3"><a id="GUID-B30ECC81-6C05-48EB-B21D-F7923C1E1C30" name="GUID-B30ECC81-6C05-48EB-B21D-F7923C1E1C30"></a><h5 id="DWHSG-GUID-B30ECC81-6C05-48EB-B21D-F7923C1E1C30" class="sect5"><span class="enumeration_section">13.2.4.1 </span>Adding Attribute Clustering to an Existing Table
                     </h5>
                     <div>
                        <div class="section">
                           <p>When you <a id="d53740e1289" class="indexterm-anchor"></a>create a table with clustering, it is created with a zone map by default. You can, however, explicitly prevent this by using <code class="codeph">WITHOUT</code> <code class="codeph">ZONEMAP</code>. This could be done for several reasons, such as wanting to create a zone map on clustering columns plus additional columns that correlate to clustering columns, or to use specific zone map storage options instead of the defaults.
                           </p>
                           <p>Use the <code class="codeph">ALTER TABLE ... ADD CLUSTERING</code> command to add attribute clustering to an existing table that does not currently use attribute clustering.
                           </p>
                           <p>The following command adds attribute clustering to the <code class="codeph">SALES</code> fact table. The modified table will use interleaved clustering that is based on the joined dimension tables <code class="codeph">CUSTOMERS</code> and <code class="codeph">PRODUCTS</code>. 
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales 
ADD CLUSTERING sales JOIN customers ON (sales.cust_id = customers.cust_id)
                     JOIN products ON (sales.prod_id = products.prod_id)
    BY INTERLEAVED ORDER ((prod_category, prod_subcategory),
                          (country_id, cust_state_province, cust_city))
    YES ON LOAD YES ON DATA MOVEMENT
    WITHOUT MATERLALIZED ZONEMAP;
</pre><p>When you add clustering to a table, the existing data is not clustered. To force the existing data to be clustered, you need to move the content of the table using an <code class="codeph">ALTER TABLE...MOVE</code> statement. You can do this partition by partition.
                           </p>
                           <p>The following command clusters data in the <code class="codeph">sales</code> table:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales MOVE PARTITION sales_1995 UPDATE INDEXES ALLOW CLUSTERING;
</pre><p>For more information about zone maps, see <span class="q">"<a href="using-zone-maps.html#GUID-7E5C3F5A-C1F5-4A5E-A501-DB50B8948263">About Zone Maps</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9345"></a><div class="props_rev_3"><a id="GUID-C92FB7F3-ED86-4CD6-A152-7B1F4786E475" name="GUID-C92FB7F3-ED86-4CD6-A152-7B1F4786E475"></a><h5 id="DWHSG-GUID-C92FB7F3-ED86-4CD6-A152-7B1F4786E475" class="sect5"><span class="enumeration_section">13.2.4.2 </span>Modifying Attribute Clustering Definitions
                     </h5>
                     <div>
                        <div class="section">
                           <p>Use the <code class="codeph">ALTER TABLE ... MODIFY CLUSTERING</code> statement <a id="d53740e1363" class="indexterm-anchor"></a>to modify when attribute clustering is triggered for a table. Modifying clustering definitions does not affect the existing table data. The modified definitions are applicable only to future data movement or direct-path insert operations.
                           </p>
                           <p>The following command modifies the clustering definition of the <code class="codeph">SALES</code> table and enables clustering during data movement.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales MODIFY CLUSTERING YES ON DATA MOVEMENT;
</pre><p>You can also modify a table definition and create or drop a zone map that is based on the attribute clustering. The following statement modifies the definition of the <code class="codeph">SALES</code> table and adds a zone map:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales MODIFY CLUSTERING WITH MATERIALIZED ZONEMAP;
</pre><p>Use the following statement to modify the definition of the attribute-clustered table <code class="codeph">SALES</code> and remove zone maps.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales MODIFY CLUSTERING WITHOUT MATERIALIZED ZONEMAP;
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9346"></a><div class="props_rev_3"><a id="GUID-091E20D7-ED91-4716-B765-4D265A82DEAC" name="GUID-091E20D7-ED91-4716-B765-4D265A82DEAC"></a><h5 id="DWHSG-GUID-091E20D7-ED91-4716-B765-4D265A82DEAC" class="sect5"><span class="enumeration_section">13.2.4.3 </span>Dropping Attribute Clustering for an Existing Table
                     </h5>
                     <div>
                        <div class="section">
                           <p>If attribute clustering is <a id="d53740e1413" class="indexterm-anchor"></a>defined for an existing table, use the <code class="codeph">ALTER TABLE ... DROP CLUSTERING</code> statement to remove attribute clustering. Dropping a clustering definition does not have any impact on the existing table data.
                           </p>
                           <p>The following command removes attribute clustering for the <code class="codeph">SALES</code> table:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales DROP CLUSTERING;
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9347"></a><div class="props_rev_3"><a id="GUID-E45539BB-1A1A-43A2-BE13-E1BDA3756996" name="GUID-E45539BB-1A1A-43A2-BE13-E1BDA3756996"></a><h5 id="DWHSG-GUID-E45539BB-1A1A-43A2-BE13-E1BDA3756996" class="sect5"><span class="enumeration_section">13.2.4.4 </span>Using Hints to Control Attribute Clustering for DML Operations
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can use hints to <a id="d53740e1452" class="indexterm-anchor"></a>enforce the use of clustering or to prevent its use during direct-path insert operations. Use the <code class="codeph">CLUSTERING</code> hint to enforce clustering for a table and <code class="codeph">NO_CLUSTERING</code> hint to prevent the use of clustering.
                           </p>
                           <p>The following command disables attribute clustering while inserting data into the <code class="codeph">SALES</code> table. This table was created with the <code class="codeph">YES ON LOAD</code> option.
                           </p><pre class="oac_no_warn" dir="ltr">INSERT /*+ APPEND NO_CLUSTERING */ INTO sales SELECT * FROM external_sales;
</pre><p>See <span class="q">"<a href="using-zone-maps.html#GUID-8266B0F1-29B0-418C-90F5-09B0AAA87F8F">Controlling the Use of Zone Maps</a>"</span> for more information about hints.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9348"></a><div class="props_rev_3"><a id="GUID-286AE59E-1285-4CE8-9287-C47A4C8D3F12" name="GUID-286AE59E-1285-4CE8-9287-C47A4C8D3F12"></a><h5 id="DWHSG-GUID-286AE59E-1285-4CE8-9287-C47A4C8D3F12" class="sect5"><span class="enumeration_section">13.2.4.5 </span>Overriding Table-level Settings for Attribute Clustering During DDL Operations
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can override the attribute clustering definition during data movement DDL operations such as partition maintenance that creates new data segments (split or merge operations) or moving a table, partition, or subpartition. For example, if a table was defined using the <code class="codeph">NO ON DATA MOVEMENT</code> option, then you can cluster data for this table during a data movement operation by using the <code class="codeph">ALTER TABLE ... ALLOW CLUSTERING</code> statement.
                           </p>
                           <p>The following command allows clustering during data movement for the <code class="codeph">sales_2010</code> partition of the <code class="codeph">SALES</code> tables that was defined using the <code class="codeph">NO ON DATA MOVEMENT</code> option:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales MOVE PARTITION sales_2010 UPDATE INDEXES ALLOW CLUSTERING;
</pre><p>Similarly, you can disable clustering during data movement for a table that was defined using the <code class="codeph">YES ON DATA MOVEMENT</code> option by including the <code class="codeph">DISALLOW CLUSTERING</code> clause in the <code class="codeph">ALTER TABLE</code> command that is used to move data.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG8934"></a><a id="DWHSG9349"></a><div class="props_rev_3"><a id="GUID-CF11EB18-EF2A-430F-8AB0-86FBB3AC063B" name="GUID-CF11EB18-EF2A-430F-8AB0-86FBB3AC063B"></a><h5 id="DWHSG-GUID-CF11EB18-EF2A-430F-8AB0-86FBB3AC063B" class="sect5"><span class="enumeration_section">13.2.4.6 </span>Clustering Table Data During Online Table Redefinition
                     </h5>
                     <div>
                        <div class="section">
                           <p>Online table redefinition enables you to modify the logical or physical structure of a table without significantly affecting its availability. The table is accessible to both queries and DML during much of the redefinition process.</p>
                           <p>You can redefine a table online and add attribute clustering to a table that did not previously use attribute clustering. The <code class="codeph">DBMS_REDEFINITION</code> package enables you redefine tables online and add attribute clustering to them.
                           </p>
                           <div class="infoboxnotealso" id="GUID-CF11EB18-EF2A-430F-8AB0-86FBB3AC063B__GUID-171C5639-35C6-43DB-B0F6-9415EB2C5925">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_REDEFINITION.html#ARPLS-GUID-2BA796C4-8B4D-49B4-8A35-4C6F789CD374" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">DBMS_REDEFINITION</code> package
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-CF11EB18-EF2A-430F-8AB0-86FBB3AC063B__GUID-2351793D-179F-4839-A474-B3A60A181295">
                           <p class="titleinexample">Example 13-5 Redefining an Attribute-Clustered Table Online</p>
                           <p>Assume that you want to redefine the <code class="codeph">sales</code> table to change the data type of <code class="codeph">amount_sold</code> from a number to a float, add attribute clustering to the table, and cluster the data during online redefinition.
                           </p>
                           <p>Use the following steps to redefine the <code class="codeph">sales</code> table in the <code class="codeph">SH</code> schema and cluster its data during online table redefinition:
                           </p>
                           <ol>
                              <li>
                                 <p>Verify that the table can be redefined online by invoking the <code class="codeph">CAN_REDEF_TABLE</code> procedure of the <code class="codeph">DBMS_REDEFINITION</code> package.
                                 </p>
                                 <p>The following command verifies that the <code class="codeph">sales</code> table can be redefined online:
                                 </p><pre class="oac_no_warn" dir="ltr">exec DBMS_REDEFINITION.CAN_REDEF_TABLE('SH','SALES');
</pre></li>
                              <li>
                                 <p>Create the interim table in the <code class="codeph">SH</code> schema with the desired physical and logical attributes that you want to use for the redefined table.
                                 </p>
                                 <p>The following command creates the interim table <code class="codeph">sales_interim</code>. The data type of the <code class="codeph">amount_sold</code> column is <code class="codeph">binary_double</code> and the <code class="codeph">CLUSTERING</code> clause specifies how attribute clustering must be performed.
                                 </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE sales_interim
(
 PROD_ID        NUMBER(6) PRIMARY KEY,
 CUST_ID        NUMBER NOT NULL,
 TIME_ID        DATE NOT NULL,
 CHANNEL_ID     CHAR(1) NOT NULL,
 PROMO_ID       NUMBER(6),
 QUANTITY_SOLD  NUMBER(3) NOT NULL,
 AMOUNT_SOLD    binary_double
)
CLUSTERING sales_interim JOIN customers ON 
          (sales_interim.cust_id = customers.cust_id)
                 JOIN products ON (sales_interim.prod_id = products.prod_id)
    BY INTERLEAVED ORDER ( (prod_category, prod_subcategory),
                            (country_id, cust_state_province, cust_city));
</pre></li>
                              <li>
                                 <p>Start the online table redefinition process using the <code class="codeph">DBMS_REDEFINITON.START_REDEF_TABLE</code> procedure. The <code class="codeph">sales</code> table is available for queries and DML during this process.
                                 </p>
                                 <p>The following command starts the redefinition process for the <code class="codeph">sales</code> table:
                                 </p><pre class="oac_no_warn" dir="ltr">exec DBMS_REDEFINITION.START_REDEF_TABLE(uname =&gt; 'SH',orig_table  =&gt; 'SALES', int_table =&gt; 'SALES_INTERIM', options_flag =&gt; DBMS_REDEFINITION.CONS_USE_ROWID);
 </pre></li>
                              <li>
                                 <p>Optionally synchronize the interim table with the original table.</p>
                                 <p>Synchronization is recommended if a large number of DML statements may have been executed on the original table after the redefinition was started. This step reduces the time taken to finish the redefinition process.</p>
                                 <p>The following command synchronizes the <code class="codeph">sales_interim</code> table with the original <code class="codeph">sales</code> table:
                                 </p><pre class="oac_no_warn" dir="ltr">exec DBMS_REDEFINITION.SYNC_INTERIM_TABLE('SH', 'SALES', 'SALES_INTERIM');
</pre></li>
                              <li>
                                 <p>Complete the online table redefinition using the <code class="codeph">DBMS_REDEFINITION.FINISH_REDEF_TABLE</code> procedure.
                                 </p>
                                 <p>The following command completes the online redefinition of the <code class="codeph">sales</code> table:
                                 </p><pre class="oac_no_warn" dir="ltr">exec DBMS_REDEFINITION.FINISH_REDEF_TABLE('SH', 'SALES', 'SALES_INTERIM');
</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9350"></a><div class="props_rev_3"><a id="GUID-BA91F630-389F-417D-A07C-D53A57D80F61" name="GUID-BA91F630-389F-417D-A07C-D53A57D80F61"></a><h3 id="DWHSG-GUID-BA91F630-389F-417D-A07C-D53A57D80F61" class="sect3"><span class="enumeration_section">13.3 </span>Viewing Attribute Clustering Information
               </h3>
               <div>
                  <p>Oracle Database provides a set of data dictionary <a id="d53740e1699" class="indexterm-anchor"></a>views that contain information about attribute clustering. This section describes how you can use these views to obtain information about attribute clustering.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="attribute-clustering.html#GUID-D8519D08-CBC2-4AE2-92C4-ABCB7CEEBAAD">Determining if Attribute Clustering is Defined for Tables </a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-75816833-5DDA-4211-B751-8C294B543E1F">Viewing Attribute-Clustering Information for Tables</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-F618CFC7-99A8-4459-B248-36AAFD9B57D1">Viewing Information About the Columns on Which Attribute Clustering is Performed</a></p>
                     </li>
                     <li>
                        <p><a href="attribute-clustering.html#GUID-425947F0-5949-4D59-8013-0380AF939933">Viewing Information About Dimensions and Joins on Which Attribute Clustering is Performed</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9351"></a><div class="props_rev_3"><a id="GUID-D8519D08-CBC2-4AE2-92C4-ABCB7CEEBAAD" name="GUID-D8519D08-CBC2-4AE2-92C4-ABCB7CEEBAAD"></a><h4 id="DWHSG-GUID-D8519D08-CBC2-4AE2-92C4-ABCB7CEEBAAD" class="sect4"><span class="enumeration_section">13.3.1 </span>Determining if Attribute Clustering is Defined for Tables 
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">CLUSTERING</code> column in the views <code class="codeph">DBA_TABLES</code>, <code class="codeph">USER_TABLES</code>, and <code class="codeph">ALL_TABLES</code> specifies if attribute clustering is defined for the tables. The <code class="codeph">CLUSTERING</code> column displays <code class="codeph">YES</code> if attribute clustering is defined for the table and <code class="codeph">NO</code> otherwise.
                        </p>
                        <p>The following query displays the names of tables in the <code class="codeph">SH</code> schema and indicates if they use attribute clustering.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT TABLE_NAME, CLUSTERING FROM DBA_TABLES WHERE OWNER='SH';

TABLE_NAME      CLUSTERING
-----------    ------------
SALES             YES
PRODUCTS          NO
MY_SALES          YES
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9352"></a><div class="props_rev_3"><a id="GUID-75816833-5DDA-4211-B751-8C294B543E1F" name="GUID-75816833-5DDA-4211-B751-8C294B543E1F"></a><h4 id="DWHSG-GUID-75816833-5DDA-4211-B751-8C294B543E1F" class="sect4"><span class="enumeration_section">13.3.2 </span>Viewing Attribute-Clustering Information for Tables
                  </h4>
                  <div>
                     <div class="section">
                        <p>Use one of the following data dictionary views to obtain details about attribute clustering for tables:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">DBA_CLUSTERING_TABLES</code> to describe all attribute-clustered tables in the database
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALL_CLUSTERING_TABLES</code> to describe attribute-clustered table accessible to the user
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_CLUSTERING_TABLES</code> to describe attribute-clustered tables owned by the user
                              </p>
                           </li>
                        </ul>
                        <p>The following query displays details about the attribute clustering for the <code class="codeph">SALES</code> table. The details include the type of attribute clustering and the operations for which clustering is enabled for the table. The output has been formatted to fit on the page.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT owner, table_name, clustering_type, on_load, on_datamovement, with_zonemap
FROM DBA_CLUSTERING_TABLES WHERE table_name='SALES';

OWNER    TABLE_NAME CLUSTERING_TYPE  ON_LOAD  ON_DATAMOVEMENT  WITH_ZONEMAP
------   ---------- ---------------  -------- ---------------  -------------
SH       SALES       LINEAR          YES      YES              YES
</pre><pre class="oac_no_warn" dir="ltr">SELECT owner, table_name, clustering_type, on_load, on_datamovement
FROM DBA_CLUSTERING_TABLES WHERE table_name='SALES';

OWNER    TABLE_NAME CLUSTERING_TYPE  ON_LOAD  ON_DATAMOVEMENT 
------   ---------- ---------------  -------- --------------- 
SH       SALES       LINEAR          YES      YES            
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9353"></a><div class="props_rev_3"><a id="GUID-F618CFC7-99A8-4459-B248-36AAFD9B57D1" name="GUID-F618CFC7-99A8-4459-B248-36AAFD9B57D1"></a><h4 id="DWHSG-GUID-F618CFC7-99A8-4459-B248-36AAFD9B57D1" class="sect4"><span class="enumeration_section">13.3.3 </span>Viewing Information About the Columns on Which Attribute Clustering is Performed
                  </h4>
                  <div>
                     <div class="section">
                        <p>Use one of the following data dictionary views to obtain information about the columns on which attribute clustering is defined for tables:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">DBA_CLUSTERING_KEYS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALL_CLUSTERING_KEYS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_CLUSTERING_KEYS</code></p>
                           </li>
                        </ul>
                        <p>For example, the data in the table <code class="codeph">SALES</code> is clustered using linear ordering. Use the following command to display the columns on which table is clustered. The output has been formatted to fit in the page.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT detail_owner, detail_name, detail_column, position
FROM DBA_CLUSTERING_KEYS
WHERE table_name='SALES';

DETAIL_OWNER    DETAIL_NAME       DETAIL_COLUMN      POSITION
------------   --------------   -----------------   ---------
SH             SALES             PROD_ID                2       
SH             SALES             TIME_ID                1        
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9354"></a><div class="props_rev_3"><a id="GUID-425947F0-5949-4D59-8013-0380AF939933" name="GUID-425947F0-5949-4D59-8013-0380AF939933"></a><h4 id="DWHSG-GUID-425947F0-5949-4D59-8013-0380AF939933" class="sect4"><span class="enumeration_section">13.3.4 </span>Viewing Information About Dimensions and Joins on Which Attribute Clustering is Performed
                  </h4>
                  <div>
                     <div class="section">
                        <p>To view information about the dimension tables by which a fact table is clustered, query the <code class="codeph">DBA_CLUSTERING_DIMENSIONS</code>, <code class="codeph">ALL_CLUSTERING_DIMENSIONS</code>, or <code class="codeph">USER_CLUSTERING_DIMENSIONS</code> data dictionary views.
                        </p>
                        <p>To view details about the joins of the fact table and dimension tables, query the <code class="codeph">DBA_CLUSTERING_JOINS</code>, <code class="codeph">ALL_CLUSTERING_JOINS</code>, or <code class="codeph">USER_CLUSTERING_JOINS</code> views. The output has been formatted to fit in the page.
                        </p>
                        <p>The following query displays the dimension tables by which the fact table <code class="codeph">SALES</code> is attribute-clustered.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_CLUSTERING_DIMENSIONS WHERE table_name='MY_SALES';

OWNER      TABLE_NAME      DIMENSION_OWNER        DIMENSION_NAME
------   --------------   -------------------  ---------------------
SH         MY_SALES           SH                   PRODUCTS
</pre><p>The following query displays the columns used to join the fact table <code class="codeph">my_sales</code> with dimension table <code class="codeph">products</code>. The output has been formatted to fit in the page.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT tab1_owner, tab1_name,tab1_column
FROM DBA_CLUSTERING_JOINS 
WHERE table_name='MY_SALES';

TAB1_OWNER       TAB1_NAME     TAB1_COLUMN
-----------   -------------   --------------------
SH               MY_SALES        PROD_ID
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
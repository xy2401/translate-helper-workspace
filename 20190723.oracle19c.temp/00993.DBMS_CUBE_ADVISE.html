<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="DBMS_CUBE_ADVISE contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite.">
      <meta name="description" content="DBMS_CUBE_ADVISE contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite.">
      <title>DBMS_CUBE_ADVISE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="DBMS_CUBE_ADVISE contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_CUBE.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_CUBE_LOG.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_CUBE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_CUBE_LOG.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_CUBE_ADVISE</li>
            </ol>
            <a id="GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5" name="GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5"></a><a id="ARPLS219"></a><a id="ARPLS219"></a>
            
            <h2 id="ARPLS-GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5" class="sect2"><span class="enumeration_chapter">42 </span> DBMS_CUBE_ADVISE
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_CUBE_ADVISE</code> contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite.
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_CUBE_ADVISE.html#GUID-4899577E-FF97-476A-97EE-7596E1362C9C" title="The MV_CUBE_ADVICE function requires the ADVISOR privilege.">DBMS_CUBE_ADVISE Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE_ADVISE.html#GUID-04693F90-D788-485E-BEA8-B3A8E23C445A" title="This table lists and describes the DBMS_CUBE_ADVISE subprograms.">Summary of DBMS_CUBE_ADVISE Subprograms</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5__GUID-E53B29B9-3BE2-4ACA-A06C-A242236AB8C9">
                  <p class="notep1">See Also:</p>
                  <p><a href="../olaug/administering-oracle-olap.html#OLAUG700" target="_blank"><span class="italic">Oracle OLAP User's Guide</span></a> for information about cube materialized views
                  </p>
               </div>
            </div><a id="ARPLS73172"></a><a id="ARPLS73172"></a><div class="props_rev_3"><a id="GUID-4899577E-FF97-476A-97EE-7596E1362C9C" name="GUID-4899577E-FF97-476A-97EE-7596E1362C9C"></a><h3 id="ARPLS-GUID-4899577E-FF97-476A-97EE-7596E1362C9C" class="sect3"><span class="enumeration_section">42.1 </span>DBMS_CUBE_ADVISE Security Model
               </h3>
               <div>
                  <p>The <code class="codeph">MV_CUBE_ADVICE</code> function requires the <code class="codeph">ADVISOR</code> privilege.
                  </p>
               </div>
            </div><a id="ARPLS65764"></a><a id="ARPLS65765"></a><a id="ARPLS65765"></a><a id="ARPLS65764"></a><div class="props_rev_3"><a id="GUID-04693F90-D788-485E-BEA8-B3A8E23C445A" name="GUID-04693F90-D788-485E-BEA8-B3A8E23C445A"></a><h3 id="ARPLS-GUID-04693F90-D788-485E-BEA8-B3A8E23C445A" class="sect3"><span class="enumeration_section">42.2 </span>Summary of DBMS_CUBE_ADVISE Subprograms
               </h3>
               <div>
                  <p>This table lists and describes the <code class="codeph">DBMS_CUBE_ADVISE</code> subprograms.
                  </p>
                  <div class="tblformal" id="GUID-04693F90-D788-485E-BEA8-B3A8E23C445A__GUID-F037CEAA-C228-48A1-BF7D-41AC7AD9CC07">
                     <p class="titleintable">Table 42-1 Summary of DBMS_CUBE_ADVISE Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of DBMS_CUBE_ADVISE Subprograms" summary="This table lists and describes the DBMS_CUBE_ADVISE subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d214849e331">Subprogram</th>
                              <th align="left" valign="bottom" width="67%" id="d214849e334">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d214849e339" headers="d214849e331 ">
                                 <p><a href="DBMS_CUBE_ADVISE.html#GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4" title="This table function evaluates the metadata for a specified cube materialized view. It generates recommendations and returns them as a SQL result set. These SQL statements can be used to create constraints, SQL dimension objects, and materialized view logs that allow the broadest range of query rewrite transformations and log-based fast refresh of the cube materialized view.">MV_CUBE_ADVICE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d214849e339 d214849e334 ">
                                 <p>Evaluates the metadata of a cube materialized view and generates recommendations for constraints, SQL dimension objects, and materialized view logs to support a broad range of query rewrite and fast refresh opportunities.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d214849e351" headers="d214849e331 ">
                                 <p><a href="DBMS_CUBE_ADVISE.html#GUID-A7B56393-EC3D-4F66-B844-740756B443AB" title="This procedure identifies the name of an exception log used in validated constraints generated by MV_CUBE_ADVICE.">SET_CNS_EXCEPTION_LOG Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d214849e351 d214849e334 ">
                                 <p>Identifies the name of an exception log used in validated constraints generated by <code class="codeph">MV_CUBE_ADVICE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d214849e369" headers="d214849e331 ">
                                 <p><a href="DBMS_CUBE_ADVISE.html#GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9" title="This procedure turns on and off diagnostic messages to server output for the MV_CUBE_ADVICE function.">TRACE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d214849e369 d214849e334 ">
                                 <p>Displays or suppresses diagnostic messages for <code class="codeph">MV_CUBE_ADVICE</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65766"></a><a id="ARPLS65767"></a><a id="ARPLS65768"></a><a id="ARPLS65767"></a><a id="ARPLS65768"></a><a id="ARPLS65766"></a><div class="props_rev_3"><a id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4" name="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4"></a><h4 id="ARPLS-GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4" class="sect4"><span class="enumeration_section">42.2.1 </span>MV_CUBE_ADVICE Function
                  </h4>
                  <div>
                     <p>This table function evaluates the metadata for a specified cube materialized view. It generates recommendations and returns them as a SQL result set. These SQL statements can be used to create constraints, SQL dimension objects, and materialized view logs that allow the broadest range of query rewrite transformations and log-based fast refresh of the cube materialized view.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-AD69413D-D239-4EC9-93C2-FC0E68FA5595">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE_ADVISE.MV_CUBE_ADVICE (
          owner        IN  VARCHAR2  DEFAULT USER,
          mvname       IN  VARCHAR2,
          reqtype      IN  VARCHAR2  DEFAULT '0',
          validate     IN  NUMBER    DEFAULT 0)
     RETURN COAD_ADVICE_T  PIPELINED;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-9A65249D-F5C8-41B4-B85C-0A7290596A45">Parameters</p>
                        <div class="tblformal" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-9D2EB9DE-0162-496D-AEFA-C4A78B3CA98A">
                           <p class="titleintable">Table 42-2 MV_CUBE_ADVICE Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MV_CUBE_ADVICE Function Parameters" summary="DBMS_CUBE_ADVISE.MV_CUBE_ADVICE parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d214849e498">Parameter</th>
                                    <th align="left" valign="bottom" width="77%" id="d214849e501">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e506" headers="d214849e498 ">
                                       <p><code class="codeph">owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e506 d214849e501 ">
                                       <p>Owner of the cube materialized view</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e514" headers="d214849e498 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e514 d214849e501 ">
                                       <p>Name of the cube, such as <code class="codeph">UNITS_CUBE</code>, or the cube materialized view, such as <code class="codeph">CB$UNITS_CUBE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e527" headers="d214849e498 ">
                                       <p><code class="codeph">reqtype</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e527 d214849e501 ">
                                       <p>Type of advice to generate:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">0</code>: All applicable advice types
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">1</code>: Column <code class="codeph">NOT NULL</code> constraints
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">2</code>: Primary key constraints
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">3</code>: Foreign key constraints
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">4</code>: Relational dimension objects
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">5</code>: Cube materialized view logs with primary key
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e569" headers="d214849e498 ">
                                       <p><code class="codeph">validate</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e569 d214849e501 ">
                                       <p>Validation option:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">0</code>: Validate the constraints
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">1</code>: Do not validate the constraints
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-9C2BCE3E-B1ED-47F9-83D8-A18A7AD88E0E">Returns</p>
                        <p>A table of type <code class="codeph">COAD_ADVICE_T</code>, consisting of a set of rows of type <code class="codeph">COAD_ADVICE_REC</code>. <a href="DBMS_CUBE_ADVISE.html#GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__BABEGCDE" title="Column descriptions for table type COAD_ADVICE_T">Table 42-3</a> describes the columns.
                        </p>
                        <div class="tblformal" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__BABEGCDE">
                           <p class="titleintable">Table 42-3 MV_CUBE_ADVICE Return Values</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MV_CUBE_ADVICE Return Values" summary="Column descriptions for table type COAD_ADVICE_T" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d214849e614">Column</th>
                                    <th align="left" valign="bottom" width="21%" id="d214849e617">Datatype</th>
                                    <th align="left" valign="bottom" width="59%" id="d214849e620">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e625" headers="d214849e614 ">
                                       <p><code class="codeph">OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e625 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2(30)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e625 d214849e620 ">
                                       <p>Owner of the dimensional object identified in <code class="codeph">APIOBJECT</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e640" headers="d214849e614 ">
                                       <p><code class="codeph">APIOBJECT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e640 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2(30)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e640 d214849e620 ">
                                       <p>Name of a cube enhanced with materialized view capabilities, such as <code class="codeph">UNITS_CUBE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e655" headers="d214849e614 ">
                                       <p><code class="codeph">SQLOBJOWN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e655 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2(30)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e655 d214849e620 ">
                                       <p>Owner of the relational object identified in <code class="codeph">SQLOBJECT</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e670" headers="d214849e614 ">
                                       <p><code class="codeph">SQLOBJECT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e670 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2(65)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e670 d214849e620 ">
                                       <p>Name of the master table, such as <code class="codeph">UNITS_FACT</code>, or the cube materialized view, such as <code class="codeph">CB$UNITS_CUBE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e688" headers="d214849e614 ">
                                       <p><code class="codeph">ADVICETYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e688 d214849e617 ">
                                       <p><code class="codeph">NUMBER(38,0)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e688 d214849e620 ">
                                       <p>Type of recommendation:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">1</code>: Create <code class="codeph">NOT NULL</code> constraints on the foreign key columns
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">2</code>: Create primary key constraints on the master table
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">3</code>: Create primary key constraints on the master view
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">4</code>: Create foreign key constraints on the master table
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">5</code>: Create foreign key constraints on the master view
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">6</code>: Create relational dimensions on the master dimension tables
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">7</code>: Create a materialized view log
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">8</code>: Compile the materialized view
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e744" headers="d214849e614 ">
                                       <p><code class="codeph">DISPOSITION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e744 d214849e617 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e744 d214849e620 ">
                                       <p>Pre-existing conditions that conflict with the recommendations and should be resolved before <code class="codeph">SQLTEXT</code> can be executed.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e759" headers="d214849e614 ">
                                       <p><code class="codeph">SQLTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e759 d214849e617 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e759 d214849e620 ">
                                       <p>SQL statement that implements the recommendation.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e771" headers="d214849e614 ">
                                       <p><code class="codeph">DROPTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e771 d214849e617 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e771 d214849e620 ">
                                       <p>SQL statement that reverses <code class="codeph">SQLTEXT</code>.
                                       </p>
                                       <p>Pre-existing conditions may prevent these statements from restoring the schema to its previous state.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-751DD6C3-2516-4716-80AB-1E59CC3B0A56">Usage Notes</p>
                        <p>This function is available in Analytic Workspace Manager as the Materialized View Advisor, which will generate a SQL script with the recommendations.</p>
                        <p>You can query the returned rows the same as any other table, as shown in the example.</p>
                        <p><code class="codeph">MV_CUBE_ADVICE</code> generates unique object names each time it is called. You should execute the function once, capture the results, and work with those SQL statements.
                        </p>
                        <p>Take care when dropping database objects. If a table already has a materialized view log, it will have the same name used in the SQL <code class="codeph">DROP MATERIALIZED VIEW LOG</code> statement in the <code class="codeph">DROPTEXT</code> column. You should avoid inadvertently dropping materialized view logs, especially when they may be used for remote data replication.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-5D83DDF5-B72F-47A8-A12D-8E018723EACF">Examples</p>
                        <p>The following query displays the SQL statements recommended by <code class="codeph">MV_CUBE_ADVICE</code>. <code class="codeph">UNITS_FACT</code> is the master table for <code class="codeph">UNITS_CUBE</code>, and <code class="codeph">MV_CUBE_ADVICE</code> generates an ALTER <code class="codeph">TABLE</code> command to add primary key constraints. 
                        </p>
                        <p>It also generates an <code class="codeph">ALTER MATERIALIZED VIEW</code> command to compile the <code class="codeph">CB$UNITS_CUBE</code> cube materialized view.
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT apiobject, sqlobject, sqltext 
      FROM TABLE(dbms_cube_advise.mv_cube_advice('GLOBAL', 'CB$UNITS_CUBE'));

APIOBJECT    SQLOBJECT       SQLTEXT
------------ --------------- ---------------------------------------------
UNITS_CUBE   UNITS_FACT      alter table "GLOBAL"."UNITS_FACT" add constra
                             int "COAD_PK000208" PRIMARY KEY ("CHANNEL_ID"
                             , "ITEM_ID", "SHIP_TO_ID", "MONTH_ID") rely d
                             isable novalidate
 
UNITS_CUBE   CB$UNITS_CUBE   alter materialized view "GLOBAL"."CB$UNITS_CU
                             BE" compile</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65769"></a><a id="ARPLS65770"></a><a id="ARPLS65770"></a><a id="ARPLS65769"></a><div class="props_rev_3"><a id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB" name="GUID-A7B56393-EC3D-4F66-B844-740756B443AB"></a><h4 id="ARPLS-GUID-A7B56393-EC3D-4F66-B844-740756B443AB" class="sect4"><span class="enumeration_section">42.2.2 </span>SET_CNS_EXCEPTION_LOG Procedure
                  </h4>
                  <div>
                     <p>This procedure identifies the name of an exception log used in validated constraints generated by <code class="codeph">MV_CUBE_ADVICE</code>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-31965870-B2D7-4409-A3E2-AF5A03CE52E5">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE_ADVISE.SET_CNS_EXCEPTION_LOG (
       exceptlogtab     IN   VARCHAR2  DEFAULT user.EXCEPTIONS);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-1602C6B2-1461-49E7-9CE2-1D278DFFB127">Parameters</p>
                        <div class="tblformal" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-5B98D948-7B92-4413-B21A-7AC7BBC65943">
                           <p class="titleintable">Table 42-4 SET_CNS_EXCEPTION_LOG Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_CNS_EXCEPTION_LOG Procedure Parameters" summary="This table describes the parameters of the SET_CNS_EXCEPTION_LOG procedure." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d214849e950">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d214849e953">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d214849e958" headers="d214849e950 ">
                                       <p><code class="codeph">exceptlogtab</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d214849e958 d214849e953 ">
                                       <p>The name of an existing exception log. </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-CB6D437A-EF96-4B5F-A0F3-3C2144EB0731">Usage Notes</p>
                        <p>To create an exception log, use the <code class="codeph">utlexcpt.sql</code> or the <code class="codeph">utlexpt1.sql</code> script before executing <code class="codeph">SET_CNS_EXCEPTION_LOG</code>.
                        </p>
                        <p>The <code class="codeph">validate</code> parameter of <code class="codeph">MV_CUBE_ADVICE</code> must be set to <code class="codeph">1</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-713F45AA-E3C6-46F0-9E8C-C74FA98229FC">Examples</p>
                        <p>The <code class="codeph">utlexcpt.sql</code> script creates a table named <code class="codeph">EXCEPTIONS</code>, and the <code class="codeph">SET_CNS_EXCEPTION_LOG</code> procedure identifies it as the exception log for <code class="codeph">MV_CUBE_ADVICE</code>. The <code class="codeph">ALTER TABLE</code> statement now includes the clause <code class="codeph">VALIDATE EXCEPTIONS INTO "GLOBAL"."EXCEPTIONS"</code>. 
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @utlexcpt
Table created.
 
SQL&gt; EXECUTE dbms_cube_advise.set_cns_exception_log;
PL/SQL procedure successfully completed.

SQL&gt; SELECT apiobject, sqlobject, advicetype type, sqltext 
     FROM TABLE(
     dbms_cube_advise.mv_cube_advice('GLOBAL', 'CB$UNITS_CUBE', '2', 1));

APIOBJECT    SQLOBJECT       TYPE SQLTEXT
------------ --------------- ---- ----------------------------------------------
UNITS_CUBE   UNITS_FACT         2 alter table "GLOBAL"."UNITS_FACT" add constrai
                                  nt "COAD_PK000219" PRIMARY KEY ("CHANNEL_ID",
                                  "ITEM_ID", "SHIP_TO_ID", "MONTH_ID") norely en
                                  able validate exceptions into "GLOBAL"."EXCEPT
                                  IONS"
 
UNITS_CUBE   CB$UNITS_CUBE      8 alter materialized view "GLOBAL"."CB$UNITS_CUB
                                  E" compile</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65771"></a><a id="ARPLS65772"></a><a id="ARPLS65772"></a><a id="ARPLS65771"></a><div class="props_rev_3"><a id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9" name="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9"></a><h4 id="ARPLS-GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9" class="sect4"><span class="enumeration_section">42.2.3 </span>TRACE Procedure
                  </h4>
                  <div>
                     <p>This procedure turns on and off diagnostic messages to server output for the <code class="codeph">MV_CUBE_ADVICE</code> function.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-5BA6CB10-4B7A-43C4-85C0-B953A5256828">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE_ADVISE.TRACE (
     diaglevel       IN  BINARY_INTEGER DEFAULT 0);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-AC8F466D-5393-47B3-A7C6-247C0B88C84C">Parameters</p>
                        <div class="tblformal" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-2C22F4EF-CC4E-47AA-8DEA-723490E65F55">
                           <p class="titleintable">Table 42-5 TRACE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TRACE Procedure Parameters" summary="Parameter Descriptions" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d214849e1129">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d214849e1132">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d214849e1137" headers="d214849e1129 ">
                                       <p><code class="codeph">diaglevel</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d214849e1137 d214849e1132 ">
                                       <p><code class="codeph">0</code> to turn tracing off, or <code class="codeph">1</code> to turn tracing on.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-49351EE3-FDCA-44E7-939D-101EBA3D08E5">Examples</p>
                        <p>The following example directs the diagnostic messages to server output. The SQL*Plus <code class="codeph">SERVEROUTPUT</code> setting displays the messages.
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET SERVEROUT ON FORMAT WRAPPED
SQL&gt; EXECUTE dbms_cube_advise.trace(1);
DBMS_COAD_DIAG: Changing diagLevel from [0] to [1]
 
PL/SQL procedure successfully completed.
 
SQL&gt; SELECT sqlobject, sqltext, droptext 
     FROM TABLE(
     dbms_cube_advise.mv_cube_advice('GLOBAL', 'CB$UNITS_CUBE')) 
     WHERE apiobject='UNITS_CUBE';
 
SQLOBJECT       SQLTEXT                                  DROPTEXT
--------------- ---------------------------------------- ----------------------------------------
UNITS_FACT      alter table "GLOBAL"."UNITS_FACT" add co alter table "GLOBAL"."UNITS_FACT" drop c
                nstraint "COAD_PK000222" PRIMARY KEY ("C onstraint "COAD_PK000222" cascade
                HANNEL_ID", "ITEM_ID", "SHIP_TO_ID", "MO
                NTH_ID") rely disable novalidate
 
CB$UNITS_CUBE   alter materialized view "GLOBAL"."CB$UNI alter materialized view "GLOBAL"."CB$UNI
                TS_CUBE" compile                         TS_CUBE" compile
 
 
20070706 07:25:27.462780000 DBMS_COAD_DIAG NOTE: Parameter mvOwner  : GLOBAL
20070706 07:25:27.462922000 DBMS_COAD_DIAG NOTE: Parameter mvName   : CB$UNITS_CUBE
20070706 07:25:27.462967000 DBMS_COAD_DIAG NOTE: Parameter factTab  : .
20070706 07:25:27.463011000 DBMS_COAD_DIAG NOTE: Parameter cubeName : UNITS_CUBE
20070706 07:25:27.463053000 DBMS_COAD_DIAG NOTE: Parameter cnsState : rely disable novalidate
20070706 07:25:27.463094000 DBMS_COAD_DIAG NOTE: Parameter NNState  : disable novalidate
20070706 07:25:27.462368000 DBMS_COAD_DIAG NOTE: Begin NN:
20070706 07:25:27.833530000 DBMS_COAD_DIAG NOTE: End   NN:
20070706 07:25:27.833620000 DBMS_COAD_DIAG NOTE: Begin PK:
20070706 07:25:28.853418000 DBMS_COAD_DIAG NOTE: End   PK:
20070706 07:25:28.853550000 DBMS_COAD_DIAG NOTE: Begin FK:
20070706 07:25:28.853282000 DBMS_COAD_DIAG NOTE: End   FK:
20070706 07:25:28.853359000 DBMS_COAD_DIAG NOTE: Begin RD:
20070706 07:25:29.660471000 DBMS_COAD_DIAG NOTE: End   RD:
20070706 07:25:29.661363000 DBMS_COAD_DIAG NOTE: Begin CM:
20070706 07:25:29.665106000 DBMS_COAD_DIAG NOTE: End   CM:

SQL&gt; EXECUTE dbms_cube_advise.trace(0);
DBMS_COAD_DIAG: Changing diagLevel from [1] to [0]
 
PL/SQL procedure successfully completed.</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
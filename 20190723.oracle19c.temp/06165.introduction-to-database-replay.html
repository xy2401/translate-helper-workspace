<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use Database Replay to capture a workload on the production system and replay it on a test system with the exact timing, concurrency, and transaction characteristics of the original workload. This enables you to test the effects of a system change without affecting the production system.">
      <meta name="description" content="You can use Database Replay to capture a workload on the production system and replay it on a test system with the exact timing, concurrency, and transaction characteristics of the original workload. This enables you to test the effects of a system change without affecting the production system.">
      <title>Introduction to Database Replay</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="You can use Database Replay to capture a workload on the production system and replay it on a test system with the exact timing, concurrency, and transaction characteristics of the original workload. This enables you to test the effects of a system change without affecting the production system.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="database-replay.html" title="Previous" type="text/html">
      <link rel="next" href="capturing-a-database-workload.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-replay.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="capturing-a-database-workload.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name"> Database Replay </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Introduction to Database Replay </li>
            </ol>
            <a id="GUID-5AA30327-74FB-4406-8F7C-5D442F307534" name="GUID-5AA30327-74FB-4406-8F7C-5D442F307534"></a><a id="RATUG238"></a><a id="RATUG104"></a>
            
            <h2 id="RATUG-GUID-5AA30327-74FB-4406-8F7C-5D442F307534" class="sect2"><span class="enumeration_chapter">9 </span> Introduction to Database Replay 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use Database Replay to capture a workload on the production system and replay it on a test system with the exact timing, concurrency, and transaction characteristics of the original workload. This enables you to test the effects of a system change without affecting the production system.</p>
               <p>Database Replay supports workload capture on a system running Oracle Database 10<span class="italic">g</span> Release 2 and newer releases. In order to capture a workload on a system running Oracle Database 10<span class="italic">g</span> Release 2, the database version must be 10.2.0.4 or higher. Workload replay is only supported on systems running Oracle Database 11<span class="italic">g</span> Release 1 and newer releases.
               </p>
               <div class="infoboxnote" id="GUID-5AA30327-74FB-4406-8F7C-5D442F307534__GUID-7A3C39E9-F46B-408C-9367-C2D7799D68FA">
                  <p class="notep1">Note:</p>
                  <p>To use the workload capture feature on a system running Oracle9<span class="italic">i</span> Database or an earlier version of Oracle Database 10<span class="italic">g</span>, refer to My Oracle Support note ID 560977.1 at the URL below for information about the required patches, or contact Oracle Support for more information:
                  </p>
                  <p><a href="https://support.oracle.com/rs?type=doc&amp;id=560977.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=560977.1</a></p>
               </div>
               <p>Analyzing the effect of system changes using <a id="d17171e109" class="indexterm-anchor"></a><a id="d17171e113" class="indexterm-anchor"></a>Database Replay involves the following steps, as illustrated in <a href="introduction-to-database-replay.html#GUID-5AA30327-74FB-4406-8F7C-5D442F307534__CCHJBGCE">Figure 9-1</a>:
               </p>
               <div class="figure" id="GUID-5AA30327-74FB-4406-8F7C-5D442F307534__CCHJBGCE">
                  <p class="titleinfigure">Figure 9-1 Database Replay Workflow</p><img src="img/ratug001.gif" width="497" alt="Description of Figure 9-1 follows" title="Description of Figure 9-1 follows" longdesc="img_text/ratug001.html"><br><a href="img_text/ratug001.html">Description of "Figure 9-1 Database Replay Workflow"</a></div>
               <!-- class="figure" -->
               <ol>
                  <li>
                     <p>On the production system, capture the workload into capture files, as described in <span class="q">"<a href="introduction-to-database-replay.html#GUID-36DE5567-5A64-493B-A154-6581C678FC8A" title="The first step in using Database Replay is to capture the production workload. Capturing a workload involves recording all requests made by external clients to Oracle Database.">Workload Capture</a>"</span>.	
                     </p>
                  </li>
                  <li>
                     <p>Copy the capture files to the test system and preprocess them, as described in <span class="q">"<a href="introduction-to-database-replay.html#GUID-585D38D1-C63F-420C-B4F1-5AD11A6E3DE1" title="Once the workload has been captured, the information in the capture files must be preprocessed. Preprocessing creates all necessary metadata needed for replaying the workload. This must be done once for every captured workload before they can be replayed.">Workload Preprocessing</a>"</span>.
                     </p>
                  </li>
                  <li>
                     <p>On the test system, replay the preprocessed files, as described in <span class="q">"<a href="introduction-to-database-replay.html#GUID-6A7A45F0-27B2-41D8-B1DA-1CE39F49AA7C" title="After a captured workload has been preprocessed, it can be replayed on a test system.">Workload Replay</a>"</span>.
                     </p>
                  </li>
                  <li>
                     <p>Using the reports generated by Database Replay, perform detailed analysis of both the workload capture and workload replay, as described in <span class="q">"<a href="introduction-to-database-replay.html#GUID-E9DA3C3B-C44D-4DBB-B75C-7F012EDD6514" title="Once the workload is replayed, in-depth reporting is provided for you to perform detailed analysis of both workload capture and replay.">Analysis and Reporting</a>"</span>.
                     </p>
                  </li>
               </ol>
            </div><a id="RATUG105"></a><div class="props_rev_3"><a id="GUID-36DE5567-5A64-493B-A154-6581C678FC8A" name="GUID-36DE5567-5A64-493B-A154-6581C678FC8A"></a><h3 id="RATUG-GUID-36DE5567-5A64-493B-A154-6581C678FC8A" class="sect3"><span class="enumeration_section">9.1 </span>Workload Capture
               </h3>
               <div>
                  <p>The first step in using Database Replay is to capture the production workload. Capturing a workload involves recording all requests made by external clients to Oracle Database.</p>
                  <p>When workload capture is enabled, all external client requests directed to Oracle Database are tracked and stored in binary files—called <a id="d17171e254" class="indexterm-anchor"></a>capture files—on the file system. You can specify the location where the capture files will be stored. Once workload capture begins, all external database calls are written to the capture files. The capture files contain all relevant information about the client request, such as SQL text, bind values, and transaction information. Background activities and database scheduler jobs are not captured. These capture files are platform independent and can be transported to another system.
                  </p>
                  <div class="infoboxnotealso" id="GUID-36DE5567-5A64-493B-A154-6581C678FC8A__GUID-999747EC-64CD-4E0C-AD95-D7A4F92A833A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="capturing-a-database-workload.html#GUID-E774C161-98C0-43EF-8B78-DD74E2A2A219" title="This chapter describes how to capture a database workload on the production system.">Capturing a Database Workload</a> for information about how to capture a workload on the production system
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG106"></a><div class="props_rev_3"><a id="GUID-585D38D1-C63F-420C-B4F1-5AD11A6E3DE1" name="GUID-585D38D1-C63F-420C-B4F1-5AD11A6E3DE1"></a><h3 id="RATUG-GUID-585D38D1-C63F-420C-B4F1-5AD11A6E3DE1" class="sect3"><span class="enumeration_section">9.2 </span>Workload Preprocessing
               </h3>
               <div>
                  <div><span>Once the workload has been captured, the information in the capture files must be preprocessed. Preprocessing creates all necessary metadata needed for replaying the workload. This must be done once for every captured workload before they can be replayed.</span> After the captured workload is preprocessed, it can be replayed repeatedly on a replay system running the same version of Oracle Database. Typically, the capture files should be copied to a test system for preprocessing. As workload preprocessing can be time consuming and resource intensive, it is recommended that this step be performed on the test system where the workload will be replayed.
                  </div>
                  <div class="infoboxnotealso" id="GUID-585D38D1-C63F-420C-B4F1-5AD11A6E3DE1__GUID-7685AE30-8994-4DE4-8684-8CC922582B45">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a> for information about how to preprocess a captured workload
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG107"></a><div class="props_rev_3"><a id="GUID-6A7A45F0-27B2-41D8-B1DA-1CE39F49AA7C" name="GUID-6A7A45F0-27B2-41D8-B1DA-1CE39F49AA7C"></a><h3 id="RATUG-GUID-6A7A45F0-27B2-41D8-B1DA-1CE39F49AA7C" class="sect3"><span class="enumeration_section">9.3 </span>Workload Replay
               </h3>
               <div>
                  <div><span>After a captured workload has been preprocessed, it can be replayed on a test system.</span> During the workload replay phase, Oracle Database performs the actions recorded during the workload capture phase on the test system by re-creating all captured external client requests with the same timing, concurrency, and transaction dependencies of the production system.
                  </div>
                  <p>Database Replay uses a client program called the <a id="d17171e460" class="indexterm-anchor"></a>replay client to re-create all external client requests recorded during workload capture. Depending on the captured workload, you may need one or more replay clients to properly replay the workload. A calibration tool is provided to help determine the number of replay clients needed for a particular workload. Because the entire workload is replayed—including DML and SQL queries—the data in the replay system should be as logically similar to the data in the capture system as possible. This will minimize replay divergence and enable a more reliable analysis of the replay.
                  </p>
                  <div class="infoboxnotealso" id="GUID-6A7A45F0-27B2-41D8-B1DA-1CE39F49AA7C__GUID-64FC641A-95C9-4897-AA76-57C3F6C200BF">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B" title="After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.">Replaying a Database Workload</a> for information about how to replay a preprocessed workload on the test system
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG108"></a><div class="props_rev_3"><a id="GUID-E9DA3C3B-C44D-4DBB-B75C-7F012EDD6514" name="GUID-E9DA3C3B-C44D-4DBB-B75C-7F012EDD6514"></a><h3 id="RATUG-GUID-E9DA3C3B-C44D-4DBB-B75C-7F012EDD6514" class="sect3"><span class="enumeration_section">9.4 </span>Analysis and Reporting
               </h3>
               <div>
                  <p>Once the workload is replayed, in-depth reporting is provided for you to perform detailed analysis of both workload capture and replay.</p>
                  <p>The workload capture report and workload replay report provide basic information about the workload capture and replay, such as errors encountered during replay and data divergence in rows returned by DML or SQL queries. A comparison of several statistics—such as database time, average active sessions, and user calls—between the workload capture and the workload replay is also provided.</p>
                  <p>The replay compare period report can be used to perform a high-level comparison of one workload replay to its capture or to another replay of the same capture. A divergence summary with an analysis of whether any data divergence occurred and if there were any significant performance changes is also provided. Furthermore, Automatic Database Diagnostic Monitor (ADDM) findings are incorporated into these reports.</p>
                  <p>For advanced analysis, Automatic Workload Repository (AWR) reports are available to enable detailed comparison of performance statistics between the workload capture and the workload replay. The information available in these reports is very detailed, and some differences between the workload capture and replay can be expected. Furthermore, Workload Intelligence operates on data recorded during a workload capture to create a model that describes the workload. This model can be used to identify significant patterns in templates that are executed as part of the workload. For each pattern, you can view important statistics, such as the number of executions of a given pattern and the database time consumed by the pattern during its execution.</p>
                  <p>The SQL Performance Analyzer report can be used to compare a SQL tuning set from a workload capture to another SQL tuning set from a workload replay, or two SQL tuning sets from two workload replays. Comparing SQL tuning sets with Database Replay provides more information than SQL Performance Analyzer test-execute because it considers and shows all execution plans for each SQL statement, while SQL Performance Analyzer test-execute generates only one execution plan per SQL statement for each SQL trial. Moreover, the SQL statements are executed in a more authentic environment because Database Replay captures all bind values and reproduces dynamic session state such as PL/SQL package state more accurately. It is recommended that you run SQL Performance Analyzer test-execute first as a sanity test to ensure SQL statements have not regressed and the test system is set up properly before using Database Replay to perform load and currency testing.</p>
                  <p>Besides using replay divergence information to analyze replay characteristics of a given system change, you should also use an application-level validation procedure to assess the system change. Consider developing a script to assess the overall success of the replay. For example, if 10,000 orders are processed during workload capture, you should validate that a similar number of orders are also processed during replay.</p>
                  <p>After the replay analysis is complete, you can restore the database to its original state at the time of workload capture and repeat workload replay to test other changes to the system.</p>
                  <div class="infoboxnotealso" id="GUID-E9DA3C3B-C44D-4DBB-B75C-7F012EDD6514__GUID-51E73BCF-AFD8-49AB-BD4B-830AC4F7DDE7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" title="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports.">Analyzing Captured and Replayed Workloads</a> for information about how to analyze data and performance divergence using Database Replay reports
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B47B8419-A618-4EB5-A402-54157C609AAA" name="GUID-B47B8419-A618-4EB5-A402-54157C609AAA"></a><h3 id="RATUG-GUID-B47B8419-A618-4EB5-A402-54157C609AAA" class="sect3"><span class="enumeration_section">9.5 </span>Workload Capture and Replay in a PDB
               </h3>
               <div>
                  <p>A workload capture can be enabled and a workload replay can be started at the pluggable database (PDB) level.</p>
                  <p>Before Oracle Database Release 19c, workload capture and replay were strictly for container database (CDB) administrators where capture and replay were started from CDB root. Starting with Oracle Database Release 19c, a workload capture can be enabled for the current pluggable database (PDB). A workload replay can also be started for the current PDB.</p>
                  <div class="infoboxnote" id="GUID-B47B8419-A618-4EB5-A402-54157C609AAA__GUID-AD7CAA04-7B0A-4B5B-98F1-0A72AF3B62CE">
                     <p class="notep1">Note:</p>
                     <p>Concurrent workload captures and replays are not supported at the PDB level.</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
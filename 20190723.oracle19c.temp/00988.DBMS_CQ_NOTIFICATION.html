<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_CQ_NOTIFICATION package is part of the database change notification feature that provides the functionality to create registration on queries designated by a client application and so to receive notifications in response to DML or DDL changes on the objects associated with the queries. The notifications are published by the database when the DML or DDL transaction commits.">
      <meta name="description" content="The DBMS_CQ_NOTIFICATION package is part of the database change notification feature that provides the functionality to create registration on queries designated by a client application and so to receive notifications in response to DML or DDL changes on the objects associated with the queries. The notifications are published by the database when the DML or DDL transaction commits.">
      <title>DBMS_CQ_NOTIFICATION</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_CQ_NOTIFICATION package is part of the database change notification feature that provides the functionality to create registration on queries designated by a client application and so to receive notifications in response to DML or DDL changes on the objects associated with the queries. The notifications are published by the database when the DML or DDL transaction commits.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_CONNECTION_POOL.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_CREDENTIAL.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_CONNECTION_POOL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_CREDENTIAL.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_CQ_NOTIFICATION</li>
            </ol>
            <a id="GUID-02733C2D-4C40-4558-9988-3486DF0FA268" name="GUID-02733C2D-4C40-4558-9988-3486DF0FA268"></a><a id="ARPLS201"></a><a id="ARPLS201"></a>
            
            <h2 id="ARPLS-GUID-02733C2D-4C40-4558-9988-3486DF0FA268" class="sect2"><span class="enumeration_chapter">37 </span> DBMS_CQ_NOTIFICATION
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">The DBMS_CQ_NOTIFICATION</code> package is part of the database change notification feature that provides the functionality to create registration on queries designated by a client application and so to receive notifications in response to DML or DDL changes on the objects associated with the queries. The notifications are published by the database when the DML or DDL transaction commits.
               </p>
               <div class="infoboxnotealso" id="GUID-02733C2D-4C40-4558-9988-3486DF0FA268__GUID-6ADCF549-5D34-470A-9F71-64C0894BA83E">
                  <p class="notep1">See Also:</p>
                  <p><a href="../adfns/cqn.html#ADFNS018" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> regarding implementing database change notification.
                  </p>
               </div>
               <p>This chapter contains the following topics:<a id="d186645e95" class="indexterm-anchor"></a></p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-181A77A5-BCA3-4050-B31E-9AC092294CF3" title="The DBMS_CQ_NOTIFICATION package provides PL/SQL based registration interfaces. A client can use this interface to create registrations on queries based on objects of interest and specify a PL/SQL callback handler to receive notifications. In case of object level registration, when a transaction changes any of the objects associated with the registered queries and |COMMIT|s, the PL/SQL callback, specified during registration for those objects, is invoked. The application can define client-specific processing inside the implementation of its PL/SQL callback handler.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-299A450B-5DF0-48B6-9795-C5E3913716B9" title="The DBMS_CQ_NOTIFICATION package requires that the user have the CHANGE NOTIFICATION system privilege in order to receive notifications, and be granted EXECUTE privilege on the DBMS_CQ_NOTIFICATION package.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-766AE3C6-D1ED-4B7E-B346-82EC6C8C77ED" title="DBMS_CQ_NOTIFICATION constants are used as flag parameters either during registration or when received during the notification.">Constants</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-359BFA35-64EF-477D-B98D-96E5373888E6" title="The following are DBMS_CQ_NOTIFICATION operational notes.">Operational Notes</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-A252A88A-6B2D-49F9-8CB8-4F790F2B2534" title="Suppose that a mid-tier application has a lot of queries on the HR.EMPLOYEES table. If the EMPLOYEES table is infrequently updated, it can obtain better performance by caching rows from the table because that would avoid a round-trip to the backend database server and server side execution latency. Let us assume that the application has implemented a mid-tier HTTP listener that listens for notifications and updates the mid-tier cache in response to a notification.">Examples</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-542B69EF-9E64-4E9B-A15F-C69BE5747622" title="The DBMS_CQ_NOTIFICATION package defines several OBJECT types.">Data Structures</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-5F2171F0-D166-4BE2-B2D0-F5C370979FBC" title="This table lists the DBMS_CQ_NOTIFICATION subprograms and briefly describes them.">Summary of DBMS_CQ_NOTIFICATION Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS65635"></a><a id="ARPLS65636"></a><a id="ARPLS65636"></a><a id="ARPLS65635"></a><div class="props_rev_3"><a id="GUID-181A77A5-BCA3-4050-B31E-9AC092294CF3" name="GUID-181A77A5-BCA3-4050-B31E-9AC092294CF3"></a><h3 id="ARPLS-GUID-181A77A5-BCA3-4050-B31E-9AC092294CF3" class="sect3"><span class="enumeration_section">37.1 </span>DBMS_CQ_NOTIFICATION Overview
               </h3>
               <div>
                  <p><code class="codeph">The DBMS_CQ_NOTIFICATION</code> package provides PL/SQL based registration interfaces. A client can use this interface to create registrations on queries based on objects of interest and specify a PL/SQL callback handler to receive notifications. In case of object level registration, when a transaction changes any of the objects associated with the registered queries and |COMMIT|s, the PL/SQL callback, specified during registration for those objects, is invoked. The application can define client-specific processing inside the implementation of its PL/SQL callback handler.
                  </p>
                  <div class="section">
                     <p>The interface lets you define a registration block (using a mechanism similar to a <code class="codeph">BEGIN-END</code> block). The recipient of notifications namely the name of the PL/SQL callback handler and a few other registration properties like time-outs can be specified during the BEGIN phase. Any queries executed subsequently (inside the registration block) are considered "interesting queries" and objects referenced by those queries during query execution are registered. The registration is completed by <code class="codeph">END</code>ing the registration block.The registration block lets you create new registrations or add objects to existing registrations.
                     </p>
                     <p>When a registration is created through the PL/SQL interface, a unique registration ID is assigned to the registration by the RDBMS. The client application can use the registration ID to keep track of registrations created by it. When a notification is published by the RDBMS, the registration ID will be part of the notification.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-181A77A5-BCA3-4050-B31E-9AC092294CF3__GUID-550C89A9-A1C4-45DB-BEB9-54B457945773">Typical Applications</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This functionality is useful for example to applications that cache query result sets on mostly read-only objects in the mid-tier to avoid network round trips to the database. Such an application can create a registration on the queries it is interested in caching. On changes to objects referenced inside those queries, the database publishes a notification when the underlying transaction commits. In response to the notification, the mid-tier application can refresh its cache by re-executing the query/queries.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS65637"></a><a id="ARPLS65637"></a><div class="props_rev_3"><a id="GUID-299A450B-5DF0-48B6-9795-C5E3913716B9" name="GUID-299A450B-5DF0-48B6-9795-C5E3913716B9"></a><h3 id="ARPLS-GUID-299A450B-5DF0-48B6-9795-C5E3913716B9" class="sect3"><span class="enumeration_section">37.2 </span>DBMS_CQ_NOTIFICATION Security Model
               </h3>
               <div>
                  <p><code class="codeph">The DBMS_CQ_NOTIFICATION</code> package requires that the user have the <code class="codeph">CHANGE</code> <code class="codeph">NOTIFICATION</code> system privilege in order to receive notifications, and be granted <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_CQ_NOTIFICATION</code> package.
                  </p>
                  <div class="section">
                     <p>In addition the user is required to have <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on all objects to be registered. Note that if the <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on an object was granted at the time of registration creation but lost subsequently (due to a revoke), then the registration will be purged and a notification to that effect will be published.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS65638"></a><a id="ARPLS65639"></a><a id="ARPLS65639"></a><a id="ARPLS65638"></a><div class="props_rev_3"><a id="GUID-766AE3C6-D1ED-4B7E-B346-82EC6C8C77ED" name="GUID-766AE3C6-D1ED-4B7E-B346-82EC6C8C77ED"></a><h3 id="ARPLS-GUID-766AE3C6-D1ED-4B7E-B346-82EC6C8C77ED" class="sect3"><span class="enumeration_section">37.3 </span>DBMS_CQ_NOTIFICATION Constants
               </h3>
               <div>
                  <p>DBMS_CQ_NOTIFICATION constants are used as flag parameters either during registration or when received during the notification.</p>
                  <div class="section">
                     <p>The <code class="codeph">DBMS_CQ_NOTIFICATION</code> package has sets of constants:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">EVENT_STARTUP</code>, <code class="codeph">EVENT_SHUTDOWN</code>, <code class="codeph">EVENT_SHUTDOWN_ANY</code>, <code class="codeph">EVENT_DEREG</code> describe the type of the notification published by the database.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERTOP</code>, <code class="codeph">DELETEOP</code>, <code class="codeph">UPDATEOP</code>, <code class="codeph">ALTEROP</code>, <code class="codeph">DROPOP</code> and <code class="codeph">UNKNOWNOP</code> describe the type of operation on a table (during a notification published by the database).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">QOS_RELIABLE</code>, <code class="codeph">QOS_DEREG_NFY</code>, <code class="codeph">QOS_ROWIDs</code> describe registration Quality of Service properties that the client requires. These are specified during registration.
                           </p>
                        </li>
                     </ul>
                     <p>The constants are shown in the following table. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-766AE3C6-D1ED-4B7E-B346-82EC6C8C77ED__CIHHIGIG">
                     <p class="titleintable">Table 37-1 DBMS_CQ_NOTIFICATION Constants</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_CQ_NOTIFICATION Constants" summary="This table describes the Constants used by DBMS_CQ_NOTIFICATION subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d186645e565">Name</th>
                              <th align="left" valign="bottom" width="22%" id="d186645e568">Type</th>
                              <th align="left" valign="bottom" width="8%" id="d186645e571">Value</th>
                              <th align="left" valign="bottom" width="43%" id="d186645e574">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e579" headers="d186645e565 ">
                                 <p><code class="codeph">ALL_OPERATIONS</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e579 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e579 d186645e571 ">
                                 <p><code class="codeph">0</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e579 d186645e574 ">
                                 <p>Interested in being notified on all operations, specified as a parameter during registration</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e595" headers="d186645e565 ">
                                 <p><code class="codeph">ALL_ROWS</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e595 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e595 d186645e571 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e595 d186645e574 ">
                                 <p>All rows within the table may have been potentially modified</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e611" headers="d186645e565 ">
                                 <p><code class="codeph">EVENT_STARTUP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e611 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e611 d186645e571 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e611 d186645e574 ">
                                 <p>Instance startup notification</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e627" headers="d186645e565 ">
                                 <p><code class="codeph">EVENT_SHUTDOWN</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e627 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e627 d186645e571 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e627 d186645e574 ">
                                 <p>Instance shutdown notification</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e643" headers="d186645e565 ">
                                 <p><code class="codeph">EVENT_SHUTDOWN_ANY</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e643 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e643 d186645e571 ">
                                 <p><code class="codeph">3</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e643 d186645e574 ">
                                 <p>Any instance shutdown when running Oracle Real Application Clusters (Oracle RAC)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e659" headers="d186645e565 ">
                                 <p><code class="codeph">EVENT_DEREG</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e659 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e659 d186645e571 ">
                                 <p><code class="codeph">5</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e659 d186645e574 ">
                                 <p>Registration has been removed</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e675" headers="d186645e565 ">
                                 <p><code class="codeph">EVENT_OBJCHANGE</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e675 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e675 d186645e571 ">
                                 <p><code class="codeph">6</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e675 d186645e574 ">
                                 <p>Notification for object change</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e691" headers="d186645e565 ">
                                 <p><code class="codeph">EVENT_QUERYCHANGE</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e691 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e691 d186645e571 ">
                                 <p><code class="codeph">7</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e691 d186645e574 ">
                                 <p>Notification for query result set change</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e707" headers="d186645e565 ">
                                 <p><code class="codeph">INSERTOP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e707 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e707 d186645e571 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e707 d186645e574 ">
                                 <p>Insert operation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e723" headers="d186645e565 ">
                                 <p><code class="codeph">UPDATEOP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e723 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e723 d186645e571 ">
                                 <p><code class="codeph">4</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e723 d186645e574 ">
                                 <p>Update operation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e739" headers="d186645e565 ">
                                 <p><code class="codeph">DELETEOP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e739 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e739 d186645e571 ">
                                 <p><code class="codeph">8</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e739 d186645e574 ">
                                 <p>Delete operation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e756" headers="d186645e565 ">
                                 <p><code class="codeph">ALTEROP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e756 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e756 d186645e571 ">
                                 <p><code class="codeph">16</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e756 d186645e574 ">
                                 <p>Table altered</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e772" headers="d186645e565 ">
                                 <p><code class="codeph">DROPOP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e772 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e772 d186645e571 ">
                                 <p><code class="codeph">32</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e772 d186645e574 ">
                                 <p>Table dropped</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e788" headers="d186645e565 ">
                                 <p><code class="codeph">UNKNOWNOP</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e788 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e788 d186645e571 ">
                                 <p><code class="codeph">64</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e788 d186645e574 ">
                                 <p>Unknown operation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e804" headers="d186645e565 ">
                                 <p><code class="codeph">QOS_RELIABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e804 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e804 d186645e571 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e804 d186645e574 ">
                                 <p>Reliable or persistent notification. Also implies that the notifications will be inserted into the persistent storage atomically with the committing transaction that results in an object change.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e820" headers="d186645e565 ">
                                 <p><code class="codeph">QOS_DEREG_NFY</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e820 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e820 d186645e571 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e820 d186645e574 ">
                                 <p>Purge registration on first notification</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e836" headers="d186645e565 ">
                                 <p><code class="codeph">QOS_ROWIDS</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e836 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e836 d186645e571 ">
                                 <p><code class="codeph">4</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e836 d186645e574 ">
                                 <p>Require rowids of modified rows</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e852" headers="d186645e565 ">
                                 <p><code class="codeph">QOS_QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e852 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e852 d186645e571 ">
                                 <p><code class="codeph">8</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e852 d186645e574 ">
                                 <p>Register at query granularity</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e868" headers="d186645e565 ">
                                 <p><code class="codeph">QOS_BEST_EFFORT</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e868 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e868 d186645e571 ">
                                 <p><code class="codeph">16</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e868 d186645e574 ">
                                 <p>Best effort evaluation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e884" headers="d186645e565 ">
                                 <p><code class="codeph">NTFN_GROUPING_CLASS_TIME</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e884 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e884 d186645e571 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e884 d186645e574 ">
                                 <p>Group notifications by time</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e900" headers="d186645e565 ">
                                 <p><code class="codeph">NTFN_GROUPING_TYPE_SUMMARY</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e900 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e900 d186645e571 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e900 d186645e574 ">
                                 <p>Summary grouping of notifications</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e916" headers="d186645e565 ">
                                 <p><code class="codeph">NTFN_GROUPING_TYPE_LAST</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e916 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e916 d186645e571 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e916 d186645e574 ">
                                 <p>Last notification in the group</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d186645e933" headers="d186645e565 ">
                                 <p><code class="codeph">NTFN_GROUPING_FOREVER</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d186645e933 d186645e568 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d186645e933 d186645e571 ">
                                 <p><code class="codeph">-1</code></p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d186645e933 d186645e574 ">
                                 <p>Repeat notifications forever</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS65640"></a><a id="ARPLS65641"></a><a id="ARPLS65641"></a><a id="ARPLS65640"></a><div class="props_rev_3"><a id="GUID-359BFA35-64EF-477D-B98D-96E5373888E6" name="GUID-359BFA35-64EF-477D-B98D-96E5373888E6"></a><h3 id="ARPLS-GUID-359BFA35-64EF-477D-B98D-96E5373888E6" class="sect3"><span class="enumeration_section">37.4 </span>DBMS_CQ_NOTIFICATION Operational Notes
               </h3>
               <div>
                  <p>The following are DBMS_CQ_NOTIFICATION operational notes.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-359BFA35-64EF-477D-B98D-96E5373888E6__GUID-00698BF2-D839-4F0C-8115-E0D18EA32480">Object Level Registration</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The notifications are published by the database when a transaction changes the registered objects and <code class="codeph">COMMIT</code>s.
                           </p>
                        </li>
                        <li>
                           <p>All objects referenced in the queries executed inside the registration block starting from the previous <code class="codeph">NEW_REG_START</code> or <code class="codeph">ENABLE_REG</code> to <code class="codeph">REG_END</code> are considered interesting objects and added to the registration.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-359BFA35-64EF-477D-B98D-96E5373888E6__GUID-F17C53B8-36CA-43B5-AF02-930776C0636B">Query Result Change Registration</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The notifications are published by the database when a transaction changes the result set of the registered query and <code class="codeph">COMMIT</code>s.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-359BFA35-64EF-477D-B98D-96E5373888E6__GUID-ECFDD301-D261-465C-B30F-F1C733C6B380">Troubleshooting</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>If you have created a registration and seem to not receive notifications when the underlying tables are changed, please check the following.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Is the <code class="codeph">job_queue_processes</code> parameter set to a nonzero value? This parameter needs to be configured to a nonzero value in order to receive PL/SQL notifications through the handler.
                           </p>
                        </li>
                        <li>
                           <p>Are the registrations being created as a non-<code class="codeph">SYS</code> user?
                           </p>
                        </li>
                        <li>
                           <p>If you are attempting DML changes on the registered object, are you <code class="codeph">COMMIT</code>ing the transaction? Please note that the notifications are transactional and will be generated when the transaction <code class="codeph">COMMIT</code>s.
                           </p>
                        </li>
                        <li>
                           <p>It maybe possible that there are run-time errors during the execution of the PL/SQL callback due to implementation errors. If so, they would be logged to the trace file of the <code class="codeph">JOBQ</code> process that attempts to execute the procedure. The trace file would be usually named &lt;<code class="codeph">ORACLE_SID</code>&gt;<code class="codeph">_j*_</code>&lt;<code class="codeph">PID</code>&gt;.<code class="codeph">trc</code>. '
                           </p>
                           <p>For example, if the ORACLE_SID is 'dbs1' and the process is 12483, the trace file might be named '<code class="codeph">dbs1_j000_12483</code>.<code class="codeph">trc</code>.
                           </p>
                           <p>Suppose a registration is created with '<code class="codeph">chnf_callback</code> as the notification handler and with <code class="codeph">registration_id</code> 100. Let us suppose the user forgets to define the <code class="codeph">chnf_callback</code> procedure. Then the <code class="codeph">JOBQ</code> trace file might contain a message of the following form.
                           </p><pre class="oac_no_warn" dir="ltr">Runtime error during execution of PL/SQL cbk chnf_callback for reg CHNF100
   Error in PLSQL notification of msgid:
   Queue : 
   Consumer Name :
   PLSQL function :chnf_callback
   Exception Occured, Error msg:
   ORA-00604: error occurred at recursive SQL level 2
   ORA-06550: line 1, column 7: 
   PLS-00201: identifier 'CHNF_CALLBACK' must be declared
   ORA-06550: line 1, column 7:
   PL/SQL: Statement ignored </pre></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-359BFA35-64EF-477D-B98D-96E5373888E6__GUID-09496318-F1CD-492E-AC22-AD1DBCF87FE9">
                        <p class="notep1">See Also:</p>
                        <p>For more information about troubleshooting Database Change Notification, see <a href="../adfns/cqn.html#ADFNS1020" target="_blank"><span class="italic">Oracle Database Development Guide</span></a>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73675"></a><a id="ARPLS73676"></a><a id="ARPLS73677"></a><a id="ARPLS73676"></a><a id="ARPLS73677"></a><a id="ARPLS73675"></a><div class="props_rev_3"><a id="GUID-A252A88A-6B2D-49F9-8CB8-4F790F2B2534" name="GUID-A252A88A-6B2D-49F9-8CB8-4F790F2B2534"></a><h3 id="ARPLS-GUID-A252A88A-6B2D-49F9-8CB8-4F790F2B2534" class="sect3"><span class="enumeration_section">37.5 </span>DBMS_CQ_NOTIFICATION Examples
               </h3>
               <div>
                  <p>Suppose that a mid-tier application has a lot of queries on the <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code> table. If the <code class="codeph">EMPLOYEES</code> table is infrequently updated, it can obtain better performance by caching rows from the table because that would avoid a round-trip to the backend database server and server side execution latency. Let us assume that the application has implemented a mid-tier HTTP listener that listens for notifications and updates the mid-tier cache in response to a notification.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-A252A88A-6B2D-49F9-8CB8-4F790F2B2534__GUID-DA4B45EB-A08C-4D4C-B3CB-2B60ED14B760">Object Change Registration Example </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The <code class="codeph">DBMS_CQ_NOTIFICATION</code> package can be utilized in this scenario to send notifications about changes to the table by means of the following steps:
                     </p>
                     <ol>
                        <li>
                           <p>Implement a mid-tier listener component of the cache management system (for example, using HTTP) that listens to notification messages sent from the database and refreshes the mid-tier cache in response to the notification.</p>
                        </li>
                        <li>
                           <p>Create a server side stored procedure to process notifications</p><pre class="oac_no_warn" dir="ltr">CONNECT system;
Enter password: <span class="italic">password</span>
GRANT CHANGE NOTIFICATION TO hr;
GRANT EXECUTE ON DBMS_CQ_NOTIFICATION TO hr;
 
Rem Enable job queue processes to receive notifications.
ALTER SYSTEM SET "job_queue_processes"=2;
 
CONNECT hr;
Enter password: <span class="italic">password</span>
Rem Create a table to record notification events
CREATE TABLE nfevents(regid number, event_type number);
 
Rem create a table to record changes to registered tables
CREATE TABLE nftablechanges(regid number, table_name varchar2(100),
                            table_operation number);
 
Rem create a table to record rowids of changed rows.
CREATE TABLE nfrowchanges(regid number, table_name varchar2(100), 
                          row_id varchar2(30));
 
Rem Create a PL/SQL callback handler to process notifications.
CREATE OR REPLACE PROCEDURE chnf_callback(ntfnds IN SYS.CHNF$_DESC) IS
   regid           NUMBER;
   tbname          VARCHAR2(60);
   event_type      NUMBER;
   numtables       NUMBER;
   operation_type  NUMBER;
   numrows         NUMBER;
   row_id          VARCHAR2(20);
 BEGIN
     regid      := ntfnds.registration_id;
     numtables  := ntfnds.numtables;
     event_type := ntfnds.event_type;
 
  INSERT INTO nfevents VALUES(regid, event_type);
  IF (event_type = DBMS_CQ_NOTIFICATION.EVENT_OBJCHANGE) THEN
    FOR i IN 1..numtables LOOP
      tbname          := ntfnds.table_desc_array(i).table_name;
      operation_type  := ntfnds.table_desc_array(I). Opflags;
      INSERT INTO nftablechanges VALUES(regid, tbname, operation_type);
      /* Send the table name and operation_type to client side listener using UTL_HTTP */
      /* If interested in the rowids, obtain them as follows */
      IF (bitand(operation_type, DBMS_CQ_NOTIFICATION.ALL_ROWS) = 0) THEN
        numrows := ntfnds.table_desc_array(i).numrows;
      ELSE 
        numrows :=0;   /* ROWID INFO NOT AVAILABLE */
      END IF;
      
      /* The body of the loop is not executed when numrows is ZERO */
      FOR j IN 1..numrows LOOP
          Row_id := ntfnds.table_desc_array(i).row_desc_array(j).row_id;
          INSERT INTO nfrowchanges VALUES(regid, tbname, Row_id);
         /* optionally Send out row_ids to client side listener using UTL_HTTP; */
      END LOOP;
      
    END LOOP;
  END IF;
  COMMIT;
END;
/ </pre><p>In <span>Step 2</span><span> </span>we can send as much information about the invalidation as the mid-tier application needs based on the information obtained from the notification descriptor.
                           </p>
                           <p>Notes</p>
                           <ol type="a">
                              <li>
                                 <p>In the above example, a registration was created on the <code class="codeph">EMPLOYEES</code> table with '<code class="codeph">chnf_callback</code>' as the PL/SQL handler for notifications. During registration, the client specified reliable notifications (<code class="codeph">QOS_RELIABLE</code>) and rowid notifications (<code class="codeph">QOS_ROWIDS</code>)
                                 </p>
                              </li>
                              <li>
                                 <p>The handler accesses the table descriptor array from the notification descriptor only if the notification type is of <code class="codeph">EVENT_OBJCHANGE</code>. In all other cases (e.g <code class="codeph">EVENT_DEREG</code>, <code class="codeph">EVENT_SHUTDOWN</code>), the table descriptor array should not be accessed.
                                 </p>
                              </li>
                              <li>
                                 <p>The handler accesses the row descriptor array from the table notification descriptor only if the <code class="codeph">ALL_ROWS</code> bit is not set in the table operation flag. If the <code class="codeph">ALL_ROWS</code> bit is set in the table operation flag, then it means that all rows within the table may have been potentially modified. In addition to operations like <code class="codeph">TRUNCATE</code> that affect all rows in the tables, this bit may also be set if individual rowids have been rolled up into a FULL table invalidation. 
                                 </p>
                                 <p>This can occur if too many rows were modified on a given table in a single transaction (more than 80) or the total shared memory consumption due to rowids on the RDBMS is determined too large (exceeds 1% of the dynamic shared pool size). In this case, the recipient must conservatively assume that the entire table has been invalidated and the callback/application must be able to handle this condition.</p>
                                 <p>Also note that the implementation of the user defined callback is up to the developer. In the above example, the callback was used to record event details into database tables. The application can additionally send the notification details to a mid-tier <code class="codeph">HTTP</code> listener of its cache management system (as in the example) using <code class="codeph">UTL_HTTP</code>. The listener could then refresh its cache by querying from the back-end database.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Create a registrations on the tables that we wish to be notified about. We pass in the previously defined procedure name (<code class="codeph">chnf_callback</code>) as the name of the server side PL/SQL procedure to be executed when a notification is generated.
                           </p><pre class="oac_no_warn" dir="ltr">Rem Create a REGISTRATION on the EMPLOYEES TABLE    
DECLARE
  REGDS      SYS.CHNF$_REG_INFO;
  regid      NUMBER;
  mgr_id     NUMBER;
  dept_id    NUMBER;
  qosflags   NUMBER;
BEGIN
 qosflags := DBMS_CQ_NOTIFICATION.QOS_RELIABLE +
         DBMS_CQ_NOTIFICATION.QOS_ROWIDS;
REGDS := SYS.CHNF$_REG_INFO ('chnf_callback', qosflags, 0,0,0);
regid := DBMS_CQ_NOTIFICATION.NEW_REG_START (REGDS); 
SELECT manager_id INTO mgr_id FROM EMPLOYEES WHERE employee_id = 200;
DBMS_CQ_NOTIFICATION.REG_END;
END;
/</pre><p>Once the registration is created in Step 3 above, the server side PL/SQL procedure defined in Step 2 is executed in response to any <code class="codeph">COMMIT</code>ted changes to the <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code> table. As an example, let us assume that the following update is performed on the employees table.
                           </p><pre class="oac_no_warn" dir="ltr">UPDATE employees SET salary=salary*1.05 WHERE employee_id=203;COMMIT;</pre><p>Once the notification is processed, you will find rows which might look like the following in the <code class="codeph">nfevents</code>, <code class="codeph">nftablechanges</code> and <code class="codeph">nfrowchanges</code> tables.
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM nfevents;
 
     REGID     EVENT_TYPE
---------------------------
     20045          6
 
 
SQL&gt; SELECT * FROM nftablechanges;
 
  REGID      TABLE_NAME         TABLE_OPERATION
-------------------------------------------
  20045      HR.EMPLOYEES            4
 

SQL&gt; select * from nfrowchanges;
 
    REGID      TABLE_NAME          ROW_ID
------------------------------------------------------
    20045     HR.EMPLOYEES    AAAKB/AABAAAJ8zAAF

</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A252A88A-6B2D-49F9-8CB8-4F790F2B2534__GUID-48DC7885-7821-40CA-8331-8EACF4403780">Query Result Change Registration Example </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>Creating a Callback</p><pre class="oac_no_warn" dir="ltr">CONNECT system;
Enter password: <span class="italic">password</span>
GRANT CHANGE NOTIFICATION TO hr;
GRANT EXECUTE ON DBMS_CQ_NOTIFICATION TO hr;
CONNECT hr;
Enter password: <span class="italic">password</span>
Rem Create a table to record notification events
CREATE TABLE nfevents(regid NUMBER, event_type NUMBER);

Rem Create a table to record notification queries
CREATE TABLE nfqueries (qid NUMBER, qop NUMBER);

Rem Create a table to record changes to registered tables
CREATE TABLE nftablechanges(
       qid                NUMBER,
       table_name         VARCHAR2(100),
       table_operation    NUMBER);

Rem Create a table to record rowids of changed rows.
CREATE TABLE nfrowchanges(
       qid                NUMBER,
       table_name         VARCHAR2(100),
       row_id             VARCHAR2(2000));
 
 
CREATE OR REPLACE PROCEDURE chnf_callback
  (ntfnds IN CQ_NOTIFICATION$_DESCRIPTOR)
IS
  regid           NUMBER;
  tbname          VARCHAR2(60);
  event_type      NUMBER;
  numtables       NUMBER;
  operation_type  NUMBER;
  numrows         NUMBER;
  row_id          VARCHAR2(2000);
  numqueries      NUMBER;
  qid NUMBER;
  qop NUMBER;

BEGIN
  regid := ntfnds.registration_id;
  event_type := ntfnds.event_type;
  INSERT INTO nfevents VALUES(regid, event_type);
  numqueries :=0;
  IF (event_type = DBMS_CQ_NOTIFICATION.EVENT_QUERYCHANGE) THEN
      numqueries := ntfnds.query_desc_array.count;
      FOR i in 1..numqueries LOOP
         qid := ntfnds.QUERY_DESC_ARRAY(i).queryid;
         qop := ntfnds.QUERY_DESC_ARRAY(i).queryop;
         INSERT INTO nfqueries VALUES(qid, qop);
         numtables := 0;
         numtables := ntfnds.QUERY_DESC_ARRAY(i).table_desc_array.count;
         FOR j IN 1..numtables LOOP
           tbname := ntfnds.QUERY_DESC_ARRAY(i).table_desc_array(j).table_name;
           operation_type := ntfnds.QUERY_DESC_ARRAY(i).table_desc_array(j).Opflags;
           INSERT INTO nftablechanges VALUES(qid, tbname, operation_type);
           IF (bitand(operation_type, DBMS_CQ_NOTIFICATION.ALL_ROWS) = 0)
           THEN
             numrows := ntfnds.query_desc_array(i).table_desc_array(j).numrows;
           ELSE
             numrows :=0;   /* ROWID INFO NOT AVAILABLE */
           END IF;
 
            /* The body of the loop is not executed when numrows is ZERO */
            FOR k IN 1..numrows LOOP
               Row_id := ntfnds.query_desc_array(i).table_desc_array(j).row_desc_array(k).row_id;
               INSERT INTO nfrowchanges VALUES(qid, tbname, Row_id);
               
            END LOOP;  /* loop over rows */
         END LOOP;     /* loop over tables */
       END LOOP;        /* loop over queries */
  END IF;
  COMMIT;
END;
/

</pre></li>
                        <li>
                           <p>Creates a query registration</p><pre class="oac_no_warn" dir="ltr">DECLARE
  reginfo    cq_notification$_reg_info;
  mgr_id     NUMBER;
  dept_id    NUMBER;
  v_cursor   SYS_REFCURSOR;
  regid      NUMBER;
  qosflags   NUMBER;  

BEGIN
  /* Register two queries for result-set-change notifications: */

  /* 1. Construct registration information.
        'chnf_callback' is name of notification handler.
        QOS_QUERY specifies result-set-change notifications. */
 
   qosflags := DBMS_CQ_NOTIFICATION.QOS_QUERY + 
               DBMS_CQ_NOTIFICATION.QOS_ROWIDS;

   reginfo := cq_notification$_reg_info('chnf_callback', qosflags,0, 0, 0);
 
  /* 2. Create registration */
 
        regid := DBMS_CQ_NOTIFICATION.NEW_REG_START(reginfo);
 
        OPEN v_cursor FOR 
           SELECT DBMS_CQ_NOTIFICATION.CQ_NOTIFICATION_QUERYID, manager_id
           FROM HR.employees
           WHERE employee_id = 7902;
        CLOSE v_cursor;
 
       OPEN v_cursor for
        SELECT DBMS_CQ_NOTIFICATION.CQ_NOTIFICATION_QUERYID, department_id
        FROM HR.departments
        WHERE department_name = 'IT';
       CLOSE v_cursor;
 
  DBMS_CQ_NOTIFICATION.REG_END;
END;
/
</pre></li>
                        <li>
                           <p>After creating the query registrations, the output from <code class="codeph">USER_CQ_NOTIFICATION_QUERIES</code> would appear as follows.
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT queryid, regid, to_char(querytext) 
     FROM user_cq_notification_queries;
 
   QUERYID      REGID
---------- ----------
TO_CHAR(QUERYTEXT)
--------------------------------------------------------------------------------
        22         41
 SELECT HR.DEPARTMENTS.DEPARTMENT_ID  FROM HR.DEPARTMENTS  WHERE HR.DEPARTMENTS.
DEPARTMENT_NAME  = 'IT'
 
        21         41
 SELECT HR.EMPLOYEES.MANAGER_ID  FROM HR.EMPLOYEES  WHERE HR.EMPLOYEES.EMPLOYEE_
ID  = 7902
 
 
Now, let us perform an UPDATE that changes the result of the query with queryid 22
by renaming the department with name 'IT' to FINANCE.
 
SQL&gt;  update departments set department_name = 'FINANCE' where department_name = 'IT';
 
1 row updated.
 
SQL&gt; commit;
 
Commit complete.
 
Now we can query the notifications that we recorded in the callback.
 
SQL&gt; select * from nfevents;
 
     REGID EVENT_TYPE
---------- ----------
        61          7
 
 
Event type 7 corresponds to EVENT_QUERYCHANGE
 
SQL&gt; select * from nfqueries;
 
       QID        QOP
---------- ----------
        42          7
 
Event type 7 corresponds to EVENT_QUERYCHANGE
 
SQL&gt; select * from nftablechanges;
SQL&gt; select * from nftablechanges;
 
     REGID
----------
TABLE_NAME
--------------------------------------------------------------------------------
TABLE_OPERATION
---------------
        42
HR.DEPARTMENTS
              4
 
 
TABLE_OPERATION 4 corresponds to UPDATEOP
 
SQL&gt; select * from nfrowchanges;
     REGID
----------
TABLE_NAME
--------------------------------------------------------------------------------
ROW_ID
--------------------------------------------------------------------------------
        61
HR.DEPARTMENTS
AAANkdAABAAALinAAF</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS65645"></a><a id="ARPLS65645"></a><div class="props_rev_3"><a id="GUID-542B69EF-9E64-4E9B-A15F-C69BE5747622" name="GUID-542B69EF-9E64-4E9B-A15F-C69BE5747622"></a><h3 id="ARPLS-GUID-542B69EF-9E64-4E9B-A15F-C69BE5747622" class="sect3"><span class="enumeration_section">37.6 </span>DBMS_CQ_NOTIFICATION Data Structures
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_CQ_NOTIFICATION</code> package defines several <code class="codeph">OBJECT</code> types.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-542B69EF-9E64-4E9B-A15F-C69BE5747622__GUID-F54B4BBB-C9A0-4754-A34A-1174D4959AA2">OBJECT Types</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217" title="This is the top level change notification descriptor type. It is a synonym for the SYS.CHNF$_DESC type.">CQ_NOTIFICATION$_DESCRIPTOR Object Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5" title="The object type describes the changes to a query result caused by an event such as a transaction commit.">CQ_NOTIFICATION$_QUERY Object Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-7D75D705-33A3-4169-8F70-978F2DA36808" title="This type corresponds to an array of CQ_NOTIFICATION$_QUERY objects. It is a synonym for the SYS.CHNF$_QUERY_ARRAY type.">CQ_NOTIFICATION$_QUERY_ARRAY Object (Array) Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-8080C006-03AE-4475-96AA-16EB6A028E04" title="This descriptor type describes a change to a table and is embedded inside the top level change notification descriptor type for EVENT_OBJCHANGE event types. For query result set changes (event type will be set to EVENT_QUERYCHANGE), the array of table descriptors is embedded inside each query change descriptor.">CQ_NOTIFICATION$_TABLE Object Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-0465C1A2-178A-4C08-87E0-9DCAD11A03FB" title="This type corresponds to an array of CQ_NOTIFICATION$_TABLE objects. It is a synonym for the SYS.CHNF$_TDESC_ARRAY type.">CQ_NOTIFICATION$_TABLE_ARRAY Object (Array) Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-20407C5F-E147-47C0-B092-5E8A88E813BA" title="An array of CQ_NOTIFICATION$_ROW is embedded inside a CQ_NOTIFICATION$_TABLE (table change descriptor), if the QOS_ROWIDS option was chosen at registration and the ALL_ROWS bit is not set in the opflags field of the table change descriptor.">CQ_NOTIFICATION$_ROW Object Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-72159DCF-5C34-4B42-838B-A2C441261CDF" title="This object type corresponds to an array of CQ_NOTIFICATION$_ROW objects. It is embedded inside the CQ_NOTIFICATION$_TABLE if QOS_ROWIDS was specified during registration and the ALL_ROWS bit is not set in the opflags field of the table change descriptor.">CQ_NOTIFICATION$_ROW_ARRAY Object (Array) Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA" title="The object type describes the attributes associated with creating a new registration. It is a synonym for the type previously named SYS.CHNF$_REG_INFO.">CQ_NOTIFICATION$_REG_INFO Object Type</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS65646"></a><a id="ARPLS65647"></a><a id="ARPLS65647"></a><a id="ARPLS65646"></a><div class="props_rev_3"><a id="GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217" name="GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217"></a><h4 id="ARPLS-GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217" class="sect4"><span class="enumeration_section">37.6.1 </span>CQ_NOTIFICATION$_DESCRIPTOR Object Type
                  </h4>
                  <div>
                     <p>This is the top level change notification descriptor type. It is a synonym for the <code class="codeph">SYS.CHNF$_DESC</code> type.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217__GUID-80E2D688-737C-4661-89EE-F0832CA352DE">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.CHNF$_DESC IS OBJECT(
   registration_id    NUMBER,
   transaction_id     RAW(8),
   dbname             VARCHAR2(30),
   event_type         NUMBER,
   numtables          NUMBER,
   table_desc_array   CQ_NOTIFICATION$_TABLE_ARRAY,
   query_desc_array   CQ_NOTIFICATION$_QUERY_ARRAY);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217__GUID-C3B14A4C-8387-4600-BB87-4E0D551BB509">Attributes</p>
                        <div class="tblformal" id="GUID-4FCD5A6C-D1EE-45A6-95D4-8C82D6319217__GUID-F67417F1-3A54-4F64-A316-A5153E5BAD56">
                           <p class="titleintable">Table 37-2 CQ_NOTIFICATION$_DESCRIPTOR Object Type</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CQ_NOTIFICATION$_DESCRIPTOR Object Type" summary="This table liststhe attributes of the CHNF$_DESC object type and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d186645e1719">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d186645e1722">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1727" headers="d186645e1719 ">
                                       <p><code class="codeph">registration_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1727 d186645e1722 ">
                                       <p>Registration ID returned during registration</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1735" headers="d186645e1719 ">
                                       <p><code class="codeph">transaction_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1735 d186645e1722 ">
                                       <p>Transaction ID. <code class="codeph">transaction_id</code> of the transaction that made the change. Will be <code class="codeph">NULL</code> unless the event_type is <code class="codeph">EVENT_OBJCHANGE</code> or <code class="codeph">EVENT_QUERYCHANGE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1755" headers="d186645e1719 ">
                                       <p><code class="codeph">dbname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1755 d186645e1722 ">
                                       <p>Name of database</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1763" headers="d186645e1719 ">
                                       <p><code class="codeph">event_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1763 d186645e1722 ">
                                       <p>Database event associated with the notification. Can be one of <code class="codeph">EVENT_OBJCHANGE</code> (change to a registered object), <code class="codeph">EVENT_STARTUP</code>, or <code class="codeph">EVENT_QUERYCHANGE</code>, <code class="codeph">EVENT_SHUTDOWN</code> or <code class="codeph">EVENT_DEREG</code> (registration has been removed due to a timeout or other reason)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1786" headers="d186645e1719 ">
                                       <p><code class="codeph">numtables</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1786 d186645e1722 ">
                                       <p>Number of modified tables. Will be <code class="codeph">NULL</code> unless the <code class="codeph">event_type</code> is <code class="codeph">EVENT_OBJCHANGE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1803" headers="d186645e1719 ">
                                       <p><code class="codeph">table_desc_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1803 d186645e1722 ">
                                       <p>Array of table descriptors. Will be <code class="codeph">NULL</code> unless the <code class="codeph">event_type</code> is <code class="codeph">EVENT_OBJCHANGE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e1820" headers="d186645e1719 ">
                                       <p><code class="codeph">query_desc_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e1820 d186645e1722 ">
                                       <p>Array of queries changed. This will be <code class="codeph">NULL</code> unless event_type is <code class="codeph">EVENT_QUERYCHANGE</code> 
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65648"></a><a id="ARPLS65649"></a><a id="ARPLS65649"></a><a id="ARPLS65648"></a><div class="props_rev_3"><a id="GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5" name="GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5"></a><h4 id="ARPLS-GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5" class="sect4"><span class="enumeration_section">37.6.2 </span>CQ_NOTIFICATION$_QUERY Object Type
                  </h4>
                  <div>
                     <p>The object type describes the changes to a query result caused by an event such as a transaction commit. </p>
                     <div class="section">
                        <p>An array of <code class="codeph">CQ_NOTIFICATION$_QUERY</code> descriptors is embedded inside the top level notification descriptor (<code class="codeph">CQ_NOTIFICATION$_DESCRIPTOR</code>) for events of type <code class="codeph">EVENT_QUERYCHANGE</code>. The array corresponds to the <code class="codeph">SET</code> of queryids which were invalidated as a result of the event.
                        </p>
                        <p>This is a synonym for the base type<code class="codeph"> SYS.CHNF$_QDESC</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5__GUID-0A1EA12F-0414-47AB-8F3C-904D47A215C6">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.CHNF$_QDESC IS OBJECT (
  queryid            NUMBER,
  queryop            NUMBER,
  table_desc_array   CQ_NOTIFICATION$_TABLE_ARRAY);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5__GUID-090DA591-8C35-41AA-B4A5-34F06D5157B3">Attributes</p>
                        <div class="tblformal" id="GUID-808CBE68-12DC-40E9-8EEC-DDDB9073E6B5__GUID-B4FF435A-C663-4953-819D-EB101467D7CE">
                           <p class="titleintable">Table 37-3 TYPE SYS.CQ_NOTIFICATION$_QUERY Object Type</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TYPE SYS.CQ_NOTIFICATION$_QUERY Object Type" summary="This table describes the fields of the Object Type CQ_NOTIFICATION$_QUERY and briefly describes them" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d186645e1964">Attribute</th>
                                    <th align="left" valign="bottom" width="60%" id="d186645e1967">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e1972" headers="d186645e1964 ">
                                       <p><code class="codeph">queryid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e1972 d186645e1967 ">
                                       <p>QueryId of the changed query</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e1980" headers="d186645e1964 ">
                                       <p><code class="codeph">queryop</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e1980 d186645e1967 ">
                                       <p>Operation describing change to the query</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e1988" headers="d186645e1964 ">
                                       <p><code class="codeph">table_desc_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e1988 d186645e1967 ">
                                       <p>Array of table changes which contributed to the query Result Set change</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65650"></a><a id="ARPLS65650"></a><div class="props_rev_3"><a id="GUID-7D75D705-33A3-4169-8F70-978F2DA36808" name="GUID-7D75D705-33A3-4169-8F70-978F2DA36808"></a><h4 id="ARPLS-GUID-7D75D705-33A3-4169-8F70-978F2DA36808" class="sect4"><span class="enumeration_section">37.6.3 </span>CQ_NOTIFICATION$_QUERY_ARRAY Object (Array) Type
                  </h4>
                  <div>
                     <p>This type corresponds to an array of <code class="codeph">CQ_NOTIFICATION$_QUERY</code> objects. It is a synonym for the <code class="codeph">SYS.CHNF$_QUERY_ARRAY</code> type.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7D75D705-33A3-4169-8F70-978F2DA36808__GUID-BF6497F2-22BB-42F9-8414-933DAA13006D">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE CQ_NOTIFICATION$_TABLE_ARRAY IS VARRAY (1073741824) OF <code class="codeph">CQ_NOTIFICATION$_TABLE</code>;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65651"></a><a id="ARPLS65652"></a><a id="ARPLS65652"></a><a id="ARPLS65651"></a><div class="props_rev_3"><a id="GUID-8080C006-03AE-4475-96AA-16EB6A028E04" name="GUID-8080C006-03AE-4475-96AA-16EB6A028E04"></a><h4 id="ARPLS-GUID-8080C006-03AE-4475-96AA-16EB6A028E04" class="sect4"><span class="enumeration_section">37.6.4 </span>CQ_NOTIFICATION$_TABLE Object Type
                  </h4>
                  <div>
                     <p>This descriptor type describes a change to a table and is embedded inside the top level change notification descriptor type for <code class="codeph">EVENT_OBJCHANGE</code> event types. For query result set changes (event type will be set to <code class="codeph">EVENT_QUERYCHANGE</code>), the array of table descriptors is embedded inside each query change descriptor.
                     </p>
                     <div class="section">
                        <p>Note that this is a synonym for the type<code class="codeph"> previously named SYS.CHNF$_TDESC</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8080C006-03AE-4475-96AA-16EB6A028E04__GUID-F27375A8-A4F2-42E5-8B9F-415D898745EC">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.CHNF$_TDESC IS OBJECT (
  opflags            NUMBER,
  table_name         VARCHAR2(2*M_IDEN+1),
  numrows            NUMBER,
  row_desc_array     CQ_NOTIFICATION$_ROW_ARRAY)</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8080C006-03AE-4475-96AA-16EB6A028E04__GUID-791967B5-EF8C-4954-B1C6-854EFBF72012">Attributes</p>
                        <div class="tblformal" id="GUID-8080C006-03AE-4475-96AA-16EB6A028E04__GUID-0019038C-CB0C-430E-A915-838CE8FA78A4">
                           <p class="titleintable">Table 37-4 TYPE SYS.CQ_NOTIFICATION$_TABLE Object Type</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TYPE SYS.CQ_NOTIFICATION$_TABLE Object Type" summary="This table describes the fields of the Object Type SYS.CQ_NOTIFICATION$_TABLE and briefly describes them" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d186645e2221">Attribute</th>
                                    <th align="left" valign="bottom" width="60%" id="d186645e2224">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2229" headers="d186645e2221 ">
                                       <p>opflags</p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2229 d186645e2224 ">
                                       <p>Table level operation flags. This is a flag field (bit-vector) that describes the operations that occurred on the table. It can be an <code class="codeph">OR</code> of the following bit fields - <code class="codeph">INSERTOP</code>, <code class="codeph">UPDATEOP</code>, <code class="codeph">DELETEOP</code>, <code class="codeph">DROPOP</code>, <code class="codeph">ALTEROP</code>, <code class="codeph">ALL_ROWS</code>. If the <code class="codeph">ALL_ROWS</code> (0x1) bit is set it means that either the entire table is modified (for example, <code class="codeph">DELETE</code> * <code class="codeph">FROM</code> <code class="codeph">t</code>) or row level granularity of information is not requested or not available in the notification and the receiver has to conservatively assume that the entire table has been invalidated.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2270" headers="d186645e2221 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2270 d186645e2224 ">
                                       <p>Name of modified table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2278" headers="d186645e2221 ">
                                       <p><code class="codeph">numrows</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2278 d186645e2224 ">
                                       <p>Number of modified rows within the table. numrows will be <code class="codeph">NULL</code> and hence should not be accessed if the <code class="codeph">ALL_ROWS</code> bit is set in the table change descriptor.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2292" headers="d186645e2221 ">
                                       <p><code class="codeph">row_desc_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2292 d186645e2224 ">
                                       <p>Array of row descriptors. This field will be <code class="codeph">NULL</code> if the <code class="codeph">ALL_ROWS</code> bit is set in <code class="codeph">opflags</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65653"></a><a id="ARPLS65653"></a><div class="props_rev_3"><a id="GUID-0465C1A2-178A-4C08-87E0-9DCAD11A03FB" name="GUID-0465C1A2-178A-4C08-87E0-9DCAD11A03FB"></a><h4 id="ARPLS-GUID-0465C1A2-178A-4C08-87E0-9DCAD11A03FB" class="sect4"><span class="enumeration_section">37.6.5 </span>CQ_NOTIFICATION$_TABLE_ARRAY Object (Array) Type
                  </h4>
                  <div>
                     <p>This type corresponds to an array of <code class="codeph">CQ_NOTIFICATION$_TABLE</code> objects. It is a synonym for the <code class="codeph">SYS.CHNF$_TDESC_ARRAY</code> type.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0465C1A2-178A-4C08-87E0-9DCAD11A03FB__GUID-D3029FAE-23E7-4E12-B2A9-E535A53540CD">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE CQ_NOTIFICATION$_TABLE_ARRAY IS VARRAY (1073741824) OF <code class="codeph">CQ_NOTIFICATION$_TABLE</code>;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65654"></a><a id="ARPLS65655"></a><a id="ARPLS65655"></a><a id="ARPLS65654"></a><div class="props_rev_3"><a id="GUID-20407C5F-E147-47C0-B092-5E8A88E813BA" name="GUID-20407C5F-E147-47C0-B092-5E8A88E813BA"></a><h4 id="ARPLS-GUID-20407C5F-E147-47C0-B092-5E8A88E813BA" class="sect4"><span class="enumeration_section">37.6.6 </span>CQ_NOTIFICATION$_ROW Object Type
                  </h4>
                  <div>
                     <p>An array of <code class="codeph">CQ_NOTIFICATION$_ROW</code> is embedded inside a <code class="codeph">CQ_NOTIFICATION$_TABLE</code> (table change descriptor), if the <code class="codeph">QOS_ROWIDS</code> option was chosen at registration and the <code class="codeph">ALL_ROWS</code> bit is not set in the <code class="codeph">opflags</code> field of the table change descriptor.
                     </p>
                     <div class="section">
                        <p>Note that this is a synonym for the type<code class="codeph"> previously named </code><code class="codeph">SYS.CHNF$_RDESC</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-20407C5F-E147-47C0-B092-5E8A88E813BA__GUID-DD5959D0-684A-4518-9252-A8E6102B7050">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.CHNF$_RDESC IS OBJECT (
  opflags            NUMBER,
  row_id             VARCAHR2 (2000));</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-20407C5F-E147-47C0-B092-5E8A88E813BA__GUID-0361588E-894E-45A3-AB27-6446FE89C97E">Attributes</p>
                        <div class="tblformal" id="GUID-20407C5F-E147-47C0-B092-5E8A88E813BA__GUID-46214F6E-FECF-48C9-9132-6CCDA2F32836">
                           <p class="titleintable">Table 37-5 TYPE SYS.CQ_NOTIFICATION$_ROW Object Type</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TYPE SYS.CQ_NOTIFICATION$_ROW Object Type" summary="This table describes the fields of the Object Type SYS.CQ_NOTIFICATION$_ROW and briefly describes them" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d186645e2546">Attribute</th>
                                    <th align="left" valign="bottom" width="60%" id="d186645e2549">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2554" headers="d186645e2546 ">
                                       <p>opflags</p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2554 d186645e2549 ">
                                       <p>Row level operation flags. The flag field (bit vector) describes the operations in the row (could be <code class="codeph">INSERTOP</code>, <code class="codeph">UPDATEOP</code> or <code class="codeph">DELETEOP</code>).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2570" headers="d186645e2546 ">
                                       <p><code class="codeph">row_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2570 d186645e2549 ">
                                       <p>The rowid of the modified row</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65656"></a><a id="ARPLS65656"></a><div class="props_rev_3"><a id="GUID-72159DCF-5C34-4B42-838B-A2C441261CDF" name="GUID-72159DCF-5C34-4B42-838B-A2C441261CDF"></a><h4 id="ARPLS-GUID-72159DCF-5C34-4B42-838B-A2C441261CDF" class="sect4"><span class="enumeration_section">37.6.7 </span>CQ_NOTIFICATION$_ROW_ARRAY Object (Array) Type
                  </h4>
                  <div>
                     <p>This object type corresponds to an array of <code class="codeph">CQ_NOTIFICATION$_ROW</code> objects. It is embedded inside the <code class="codeph">CQ_NOTIFICATION$_TABLE</code> if <code class="codeph">QOS_ROWIDS</code> was specified during registration and the <code class="codeph">ALL_ROWS</code> bit is not set in the <code class="codeph">opflags</code> field of the table change descriptor.
                     </p>
                     <div class="section">
                        <p>This type is a synonym for the <code class="codeph">SYS.CHNF$_RDESC_ARRAY</code> type.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-72159DCF-5C34-4B42-838B-A2C441261CDF__GUID-521FCD5B-66EE-4D83-8C4A-1FAC517F2D5C">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE CQ_NOTIFICATION$_ROW_ARRAY IS VARRAY (1073741824) OF CQ_NOTIFICATION$_ROW;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65657"></a><a id="ARPLS65658"></a><a id="ARPLS65658"></a><a id="ARPLS65657"></a><div class="props_rev_3"><a id="GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA" name="GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA"></a><h4 id="ARPLS-GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA" class="sect4"><span class="enumeration_section">37.6.8 </span>CQ_NOTIFICATION$_REG_INFO Object Type
                  </h4>
                  <div>
                     <p>The object type describes the attributes associated with creating a new registration. It is a synonym for the type previously named <code class="codeph">SYS.CHNF$_REG_INFO</code>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA__GUID-86ED62F1-3D1E-4BD9-BC7F-D43520C5253C">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.CHNF$_REG_INFO IS OBJECT (
  callback                        VARCHAR2(20),
  qosflags                        NUMBER,
  timeout                         NUMBER,
  operations_filter               NUMBER,
  transaction_lag                 NUMBER,
  ntfn_grouping_class             NUMBER,
  ntfn_grouping_value             NUMBER,
  ntfn_grouping_type              NUMBER,
  ntfn_grouping_start_time        TIMESTAMP WITH TIME ZONE,
  ntfn_grouping_repeat_count      NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA__GUID-E77DE6A5-3169-4B4C-9FE3-1C341E442232">Attributes</p>
                        <div class="tblformal" id="GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA__GUID-974E7848-EDC2-44B2-B74D-A310E416D3F3">
                           <p class="titleintable">Table 37-6 TYPE CQ_NOTIFICATION$_REG_INFO Object Type</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TYPE CQ_NOTIFICATION$_REG_INFO Object Type" summary="This table describes the fields of the Object Type CQ_NOTIFICATION$_REG_INFO and briefly describes them" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d186645e2803">Attribute</th>
                                    <th align="left" valign="bottom" width="60%" id="d186645e2806">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2811" headers="d186645e2803 ">
                                       <p><code class="codeph">callback</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2811 d186645e2806 ">
                                       <p>Name of the server side PL/SQL procedure to be executed on a notification. Prototype is <code class="codeph">&lt;call_backname&gt;(ntfnds IN SYS.chnf$_desc)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2821" headers="d186645e2803 ">
                                       <p><code class="codeph">qosflags</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2821 d186645e2806 ">
                                       <p>Quality of service flags. Can be set to an <code class="codeph">OR</code> of the following values:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">QOS_RELIABLE</code> (<code class="codeph">0x1</code>): Notifications are reliable (persistent) and survive instance death. This means that on an instance death in an Oracle RAC cluster, surviving instances will be able to deliver any queued invalidations. Similarly, pending invalidations can be delivered on instance restart, in a single instance configuration. The disadvantage is that there is a CPU cost/ latency involved in inserting the invalidation message to a persistent store. If this parameter is false, then server side CPU and latency are minimized, because invalidations are buffered into an in memory queue but the client could lose invalidation messages on an instance shutdown.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">QOS_DEREG_NFY</code> (<code class="codeph">0x2</code>): The registration will be expunged on the first notification
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">QOS_ROWIDS</code> (<code class="codeph">0x4</code>): The notification needs to include information about the rowids that were modified
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">QOS_QUERY</code> <code class="codeph">(0x8)</code>: specifies query result change notification as opposed to object change notification
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">QOS_BEST_EFFORT (0x10)</code> or <code class="codeph">QOS_BEST_EFFORT (0x16)</code>: can register simplified versions of queries and minimizes evaluation with some false positives.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2873" headers="d186645e2803 ">
                                       <p><code class="codeph">timeout</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2873 d186645e2806 ">
                                       <p>If set to a nonzero value, specifies the time in seconds after which the registration is automatically expunged by the database. If zero / <code class="codeph">NULL</code>, the registration lives until explicitly deregistered. Note that the <code class="codeph">timeout</code> option can be combined with the purge on notification (QOS_DEREG_NFY) option as well.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2887" headers="d186645e2803 ">
                                       <p><code class="codeph">operations_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2887 d186645e2806 ">
                                       <p>if nonzero, specifies a filter to be selectively notified on certain operations. These flags can be used to filter based on specific operation types:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>0: Notify on all operations (<code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">ALL_OPERATIONS</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>0x2: Notify on every <code class="codeph">INSERT</code> (<code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">INSERTOP</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>0x4: Notify on every <code class="codeph">UPDATE</code> (<code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">UPDATEOP</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>0x8: Notify on every <code class="codeph">DELETE</code> (<code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">DELETEOP</code>)
                                             </p>
                                          </li>
                                       </ul>
                                       <p>A combination of operations can be specified by using a bitwise <code class="codeph">OR</code>.
                                       </p>
                                       <p>Caution: This parameter will be honored for object level registrations but ignored for query result change registrations. To implement notification flow control in 11g, the applications can use the "<code class="codeph">GROUPING</code> notification" option.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2951" headers="d186645e2803 ">
                                       <p><code class="codeph">transaction_lag</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2951 d186645e2806 ">
                                       <p>Lag between consecutive notifications in units of transactions. Can be used to specify the number of transactions/database changes, by which the client is willing to lag behind the database. If 0, it means that the client needs to receive an invalidation message as soon as it is generated.</p>
                                       <p><span class="bold">Caution</span>: This parameter will be honored for object level registrations but ignored for query result change notification registrations.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2963" headers="d186645e2803 ">
                                       <p><code class="codeph">ntfn_grouping_class</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2963 d186645e2806 ">
                                       <p>When grouping notifications, the class based on which the group is derived. Currently, the only allowed value is <code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">NTFN_GROUPING_CLASS_TIME</code> by which notifications are grouped by time.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2977" headers="d186645e2803 ">
                                       <p><code class="codeph">ntfn_grouping_value</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2977 d186645e2806 ">
                                       <p>The grouping value. This describes the time interval that defines the group in seconds. For example, if this were set to 900, it would mean that notifications that were generated in each 15 minute interval would be grouped together.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e2986" headers="d186645e2803 ">
                                       <p><code class="codeph">ntfn_grouping_type</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e2986 d186645e2806 ">
                                       <p>The type of grouping desired. It can be one of two allowed values</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">NTFN_GROUPING_TYPE_SUMMARY</code> - all notifications in the group are summarized into a single notification
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">NTFN_GROUPING_TYPE_LAST</code> - only the last notification in the group is published and the earlier ones discarded
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e3012" headers="d186645e2803 ">
                                       <p><code class="codeph">ntfn_grouping_start_time</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e3012 d186645e2806 ">
                                       <p>When to start generating notifications. If specified as <code class="codeph">NULL</code>, it defaults to the current system generated time.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d186645e3024" headers="d186645e2803 ">
                                       <p><code class="codeph">ntfn_grouping_repeat_count</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d186645e3024 d186645e2806 ">
                                       <p>How many times the notification should be repeated. Set this to <code class="codeph">DBMS_CQ_NOTIFICATION</code>.<code class="codeph">NTFN_GROUPING_FOREVER</code> to receive notifications for the life time of the registration. Set to a nonzero value if only a certain number of notifications are desired for the life time of the registration.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1732CD12-503B-43EA-8BB7-522C1FA235CA__GUID-C70B10CA-31A0-45DA-8EBC-CA57669DFF21">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The type declaration incorporates three other alternative constructors. In the first case all other parameters default to their default values.</p><pre class="oac_no_warn" dir="ltr">TYPE CQ_NOTIFICATION$_REG_INFO IS OBJECT (
  callback                        VARCHAR2(20),
  qosflags                        NUMBER,
  timeout                         NUMBER);
</pre><p>The second option applies to the type constructor defined in a previous release, and which is retained for backward compatibility:</p><pre class="oac_no_warn" dir="ltr">TYPE CQ_NOTIFICATION$_REG_INFO IS OBJECT (
  callback                        VARCHAR2(20),
  qosflags                        NUMBER,
  timeout                         NUMBER,
  operations_filter               NUMBER,
  transaction_lag                 NUMBER);
</pre><p>The third definition contains all the members of the type except <code class="codeph">transaction_lag</code> which is being deprecated:
                              </p><pre class="oac_no_warn" dir="ltr">TYPE CQ_NOTIFICATION$_REG_INFO IS OBJECT (
  callback                        VARCHAR2(20),
  qosflags                        NUMBER,
  timeout                         NUMBER,
  operations_filter               NUMBER,
  ntfn_grouping_class             NUMBER,
  ntfn_grouping_value             NUMBER,
  ntfn_grouping_type              NUMBER,
  ntfn_grouping_start_time        TIMESTAMP WITH TIME ZONE,
  ntfn_grouping_repeat_count      NUMBER);
</pre></li>
                           <li>
                              <p>In response to a database change, the server side PL/SQL procedure specified by "callback" is executed. The PL/SQL procedure name has to be specified in the format <code class="codeph">s</code><code class="codeph">chema_name.procedure_name</code>. The procedure must have the following signature:
                              </p><pre class="oac_no_warn" dir="ltr">PROCEDURE &lt;procedure_name&gt;(ntfnds IN SYS.chnf$_desc)
</pre><p><code class="codeph">CHNF$_DESC</code> describes the change notification descriptor.
                              </p>
                           </li>
                           <li>
                              <p>The init.ora parameter <code class="codeph">job_queue_processes</code> must be set to a nonzero value to receive PL/SQL notifications, because the specified procedure is executed inside a job queue process when a notification is generated.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS65659"></a><a id="ARPLS65660"></a><a id="ARPLS65660"></a><a id="ARPLS65659"></a><div class="props_rev_3"><a id="GUID-5F2171F0-D166-4BE2-B2D0-F5C370979FBC" name="GUID-5F2171F0-D166-4BE2-B2D0-F5C370979FBC"></a><h3 id="ARPLS-GUID-5F2171F0-D166-4BE2-B2D0-F5C370979FBC" class="sect3"><span class="enumeration_section">37.7 </span>Summary of DBMS_CQ_NOTIFICATION Subprograms
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">DBMS_CQ_NOTIFICATION</code> subprograms and briefly describes them.
                  </p>
                  <div class="tblformal" id="GUID-5F2171F0-D166-4BE2-B2D0-F5C370979FBC__GUID-0F2E9C0B-2C64-43A9-8D26-AF00158AC204">
                     <p class="titleintable">Table 37-7  DBMS_CQ_NOTIFICATION Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title=" DBMS_CQ_NOTIFICATION Package Subprograms" summary="This table lists the DBMS_CQ_NOTIFICATION subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d186645e3179">Subprogram</th>
                              <th align="left" valign="bottom" width="69%" id="d186645e3182">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d186645e3187" headers="d186645e3179 ">
                                 <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-C620AA0E-DC5F-43E5-8338-EE7FF0604166" title="This function returns the queryid of the most recent query that was attempted to be registered in a registration block.">CQ_NOTIFICATION_QUERYID Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d186645e3187 d186645e3182 ">
                                 <p>Returns the queryid of the most recent query that was attempted to be registered in a registration block</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d186645e3199" headers="d186645e3179 ">
                                 <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12" title="This procedure describes the client with the specified registration identifier (ID).">DEREGISTER Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d186645e3199 d186645e3182 ">
                                 <p>De-subscribes the client with the supplied registration identifier (ID)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d186645e3211" headers="d186645e3179 ">
                                 <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-1207FB2C-D487-49C4-A629-2E7155478AC7" title="This procedure adds objects to an existing registration identifier (ID).">ENABLE_REG Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d186645e3211 d186645e3182 ">
                                 <p>Begins a registration block using an existing registration identifier (ID)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d186645e3223" headers="d186645e3179 ">
                                 <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA" title="This procedure begins a new registration block.">NEW_REG_START Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d186645e3223 d186645e3182 ">
                                 <p>Begins a new registration block</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d186645e3235" headers="d186645e3179 ">
                                 <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-16A5ABD4-2949-498D-ABE3-98AFF9AF3A5F" title="This procedure marks the end of the registration block. No newly executed queries are tracked.">REG_END Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d186645e3235 d186645e3182 ">
                                 <p>Ends the registration boundary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d186645e3247" headers="d186645e3179 ">
                                 <p><a href="DBMS_CQ_NOTIFICATION.html#GUID-B64F324A-89C9-4E5C-9694-16D56E995798" title="This procedure configures the maximum number of rows of a table published in a change notification if the rows of the table are modified in a transaction.">SET_ROWID_THRESHOLD Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d186645e3247 d186645e3182 ">
                                 <p>Configures the maximum number of rows of a table published in a change notification if the rows of the table are modified in a transaction</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65661"></a><a id="ARPLS65661"></a><div class="props_rev_3"><a id="GUID-C620AA0E-DC5F-43E5-8338-EE7FF0604166" name="GUID-C620AA0E-DC5F-43E5-8338-EE7FF0604166"></a><h4 id="ARPLS-GUID-C620AA0E-DC5F-43E5-8338-EE7FF0604166" class="sect4"><span class="enumeration_section">37.7.1 </span>CQ_NOTIFICATION_QUERYID Function
                  </h4>
                  <div>
                     <p>This function returns the queryid of the most recent query that was attempted to be registered in a registration block.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C620AA0E-DC5F-43E5-8338-EE7FF0604166__GUID-F1EE2DFB-0040-4C3D-BECC-64F78E6122B3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CQ_NOTIFICATION.CQ_NOTIFICATION_QUERYID
 RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C620AA0E-DC5F-43E5-8338-EE7FF0604166__GUID-9F2497D0-5775-421E-92BD-E10E0E7A894A">Return Values</p>
                        <p>Returns the queryid of the most recently registered query. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65662"></a><a id="ARPLS65663"></a><a id="ARPLS65663"></a><a id="ARPLS65662"></a><div class="props_rev_3"><a id="GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12" name="GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12"></a><h4 id="ARPLS-GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12" class="sect4"><span class="enumeration_section">37.7.2 </span>DEREGISTER Procedure
                  </h4>
                  <div>
                     <p>This procedure describes the client with the specified registration identifier (ID).</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12__GUID-89AF8F48-C54C-4F56-BA5A-3F014FD62AE5">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CQ_NOTIFICATION.DEREGISTER (
  regid IN NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12__GUID-1DECCC99-562D-4D19-99FC-B61A8539B133">Parameters</p>
                        <div class="tblformal" id="GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12__GUID-FFF2B2FA-52A4-4B03-9E6A-EBD876D48B47">
                           <p class="titleintable">Table 37-8 DEREGISTER Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DEREGISTER Procedure Parameters" summary="This table describes the parameters of DBMS_CQ_NOTIFICATION.DEREGISTER." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d186645e3469">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d186645e3472">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e3477" headers="d186645e3469 ">
                                       <p><code class="codeph">regid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e3477 d186645e3472 ">
                                       <p>Client registration ID</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A89399FD-CCE6-4B01-83A1-77DD3296EF12__GUID-E4A113F6-CFCA-46FF-A51E-0BCF02C57870">Usage Notes</p>
                        <p>Only the user that created the registration (or the <code class="codeph">SYS</code> user) will be able to desubscribe the registration.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65664"></a><a id="ARPLS65665"></a><a id="ARPLS65665"></a><a id="ARPLS65664"></a><div class="props_rev_3"><a id="GUID-1207FB2C-D487-49C4-A629-2E7155478AC7" name="GUID-1207FB2C-D487-49C4-A629-2E7155478AC7"></a><h4 id="ARPLS-GUID-1207FB2C-D487-49C4-A629-2E7155478AC7" class="sect4"><span class="enumeration_section">37.7.3 </span>ENABLE_REG Procedure
                  </h4>
                  <div>
                     <p>This procedure adds objects to an existing registration identifier (ID).</p>
                     <div class="section">
                        <p>It is similar to the interface for creating a new registration, except that it takes an existing <code class="codeph">regid</code> to which to add objects.Subsequent execution of queries causes the objects referenced in the queries to be added to the specified <code class="codeph">regid</code>, and the registration is completed on invoking the <a href="DBMS_CQ_NOTIFICATION.html#GUID-16A5ABD4-2949-498D-ABE3-98AFF9AF3A5F" title="This procedure marks the end of the registration block. No newly executed queries are tracked.">REG_END Procedure</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1207FB2C-D487-49C4-A629-2E7155478AC7__GUID-ED87B4FD-92A4-4E6B-AEAB-204701858E9A">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CQ_NOTIFICATION.ENABLE_REG (  
  regid IN NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1207FB2C-D487-49C4-A629-2E7155478AC7__GUID-B847AF91-2E09-4568-BDD5-BC0EE92A3EA1">Parameters</p>
                        <div class="tblformal" id="GUID-1207FB2C-D487-49C4-A629-2E7155478AC7__GUID-BDE381BF-2F81-4967-9FBD-B6CF894B7CFC">
                           <p class="titleintable">Table 37-9 ENABLE_REG Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ENABLE_REG Procedure Parameters" summary="This table describes the parameters of DBMS_CQ_NOTIFICATION.ENABLE_REG.ENABLE_REG." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d186645e3618">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d186645e3621">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e3626" headers="d186645e3618 ">
                                       <p><code class="codeph">regid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e3626 d186645e3621 ">
                                       <p>Client registration ID</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1207FB2C-D487-49C4-A629-2E7155478AC7__GUID-C2CD1888-A395-4C1E-9A13-FC0EA3A8B890">Usage Notes</p>
                        <p>Only the user that created the registration will be able to add further objects to the registration.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65666"></a><a id="ARPLS65667"></a><a id="ARPLS65667"></a><a id="ARPLS65666"></a><div class="props_rev_3"><a id="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA" name="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA"></a><h4 id="ARPLS-GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA" class="sect4"><span class="enumeration_section">37.7.4 </span>NEW_REG_START Function
                  </h4>
                  <div>
                     <p>This procedure begins a new registration block.</p>
                     <div class="section">
                        <p>Any objects referenced by queries executed within the registration block are considered interesting objects and added to the registration. The registration block ends upon calling the <code class="codeph">REG_END</code> procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA__GUID-3DB055C2-796F-476C-86F9-F73834B722A0">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CQ_NOTIFICATION.NEW_REG_START (  
  regds IN sys.chnf$_reg_info)
 RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA__GUID-33413E35-365B-422C-BED8-BA7487262B83">Parameters</p>
                        <div class="tblformal" id="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA__GUID-10612A33-CCC4-4A64-95D1-D97FAC6DDA92">
                           <p class="titleintable">Table 37-10 NEW_REG_START Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="NEW_REG_START Function Parameters" summary="This table describes the parameters of DBMS_CQ_NOTIFICATION.NEW_REG_START." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d186645e3750">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d186645e3753">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e3758" headers="d186645e3750 ">
                                       <p><code class="codeph">sys.chnf$_reg_info</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e3758 d186645e3753 ">
                                       <p>Registration descriptor describing the notification handler and other properties of the registration</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA__GUID-6E8786D7-7C75-42F4-A2D5-EE138144605E">Return Values</p>
                        <p>The procedure returns a registration-id which is a unique integer assigned by the database to this registration. The registration-id will be echoed back in every notification received for this registration.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C92C877D-5795-4DB4-8C50-E694A15E27FA__GUID-7377B3AE-7A20-4A4F-B871-1A88FDEE66C0">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The only operations permitted inside a registration block are queries (the ones the user wishes to register). DML and DDL operations are not permitted.</p>
                           </li>
                           <li>
                              <p>The registration block is a session property and implicitly terminates upon exiting the session. While the registration block is a session property, the registration itself is a persistent database entity. Once created, the registration survives until explicitly deregistered by the client application or timed-out or removed by the database for some other reason (such as loss of privileges).</p>
                           </li>
                           <li>
                              <p>The user must have the <code class="codeph">CHANGE NOTIFICATION</code> system privilege and <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on any objects to be registered.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">SYS</code> user will not be permitted to create new registrations.
                              </p>
                           </li>
                           <li>
                              <p>Nesting of registration block is not permitted.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65668"></a><a id="ARPLS65668"></a><div class="props_rev_3"><a id="GUID-16A5ABD4-2949-498D-ABE3-98AFF9AF3A5F" name="GUID-16A5ABD4-2949-498D-ABE3-98AFF9AF3A5F"></a><h4 id="ARPLS-GUID-16A5ABD4-2949-498D-ABE3-98AFF9AF3A5F" class="sect4"><span class="enumeration_section">37.7.5 </span>REG_END Procedure
                  </h4>
                  <div>
                     <p>This procedure marks the end of the registration block. No newly executed queries are tracked.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-16A5ABD4-2949-498D-ABE3-98AFF9AF3A5F__GUID-E5784804-10B6-4D5C-AF12-242C4CBCCB59">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CQ_NOTIFICATION.REG_END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73678"></a><a id="ARPLS73679"></a><a id="ARPLS73679"></a><a id="ARPLS73678"></a><div class="props_rev_3"><a id="GUID-B64F324A-89C9-4E5C-9694-16D56E995798" name="GUID-B64F324A-89C9-4E5C-9694-16D56E995798"></a><h4 id="ARPLS-GUID-B64F324A-89C9-4E5C-9694-16D56E995798" class="sect4"><span class="enumeration_section">37.7.6 </span>SET_ROWID_THRESHOLD Procedure
                  </h4>
                  <div>
                     <p>This procedure configures the maximum number of rows of a table published in a change notification if the rows of the table are modified in a transaction.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B64F324A-89C9-4E5C-9694-16D56E995798__GUID-28387C9D-6F51-4ACB-8101-A81A7299BC49">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CQ_NOTIFICATION.SET_ROWID_THRESHOLD (  
  tbname     IN  VARCHAR2,
  threshold  IN  NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B64F324A-89C9-4E5C-9694-16D56E995798__GUID-5F63C10B-AD56-4453-8238-DD76394F6693">Parameters</p>
                        <div class="tblformal" id="GUID-B64F324A-89C9-4E5C-9694-16D56E995798__GUID-CB15802B-A442-4EA2-A27B-C1BC4A3EA2D6">
                           <p class="titleintable">Table 37-11 SET_ROWID_THRESHOLD Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_ROWID_THRESHOLD Procedure Parameters" summary="This table describes the parameters of DBMS_CHANGE_NOTIFICATION.SET_ROWID_THRESHOLD." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d186645e4007">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d186645e4010">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e4015" headers="d186645e4007 ">
                                       <p><code class="codeph">tbname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e4015 d186645e4010 ">
                                       <p>Table name qualified by the schema name in the form <code class="codeph">schemaname.tablename</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d186645e4025" headers="d186645e4007 ">
                                       <p><code class="codeph">threshold</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d186645e4025 d186645e4010 ">
                                       <p>Maximum number of modified rows of the table to be published in the change notification</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B64F324A-89C9-4E5C-9694-16D56E995798__GUID-40D18071-93DA-4D83-A900-3E1C80FAC27E">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The table needs to be registered for change notification either at object change granularity or at query result set granularity.</p>
                           </li>
                           <li>
                              <p>The threshold set by means of this subprogram applies to that instance only and does not persist across instance startup/shutdown.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
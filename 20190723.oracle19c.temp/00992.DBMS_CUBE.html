<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="DBMS_CUBE contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying.">
      <meta name="description" content="DBMS_CUBE contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying.">
      <title>DBMS_CUBE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="DBMS_CUBE contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_CSX_ADMIN.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_CUBE_ADVISE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_CSX_ADMIN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_CUBE_ADVISE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_CUBE</li>
            </ol>
            <a id="GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56" name="GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56"></a><a id="ARPLS218"></a><a id="ARPLS218"></a>
            
            <h2 id="ARPLS-GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56" class="sect2"><span class="enumeration_chapter">41 </span> DBMS_CUBE
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_CUBE</code> contains subprograms that create OLAP cubes and dimensions, and that load and process the data for querying.
               </p>
               <div class="infoboxnotealso" id="GUID-73E024C5-CB5D-4153-AEEB-BF50E15A2B56__GUID-388E6705-0F64-4967-9713-97EA82132DFE">
                  <p class="notep1">See Also:</p>
                  <p><a href="../olaug/overview.html#OLAUG-GUID-E2056FE4-C623-4D29-B7D8-C4762F941966" target="_blank">OLAP Technology in the Oracle Database</a> in <cite><span><cite>Oracle OLAP Userâ€™s Guide</cite></span></cite> regarding use of the OLAP option to support business intelligence and analytical applications.
                  </p>
               </div>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953" title="Cubes and cube dimensions are first class data objects that support multidimensional analytics. They are stored in a container called an analytic workspace. Multidimensional objects and analytics are available with the OLAP option to Oracle Database.">Using DBMS_CUBE</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL Aggregation Management is a group of PL/SQL subprograms in DBMS_CUBE that supports the rapid deployment of cube materialized views from existing relational materialized views.">Using SQL Aggregation Management</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">Upgrading 10g Analytic Workspaces</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE.html#GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3" title="This table lists and describes the DBMS_CUBE procedure subprograms.">Summary of DBMS_CUBE Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS65728"></a><a id="ARPLS65728"></a><div class="props_rev_3"><a id="GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953" name="GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953"></a><h3 id="ARPLS-GUID-D7FA45F4-21CB-4DC9-8AA9-1BA38110A953" class="sect3"><span class="enumeration_section">41.1 </span>Using DBMS_CUBE
               </h3>
               <div>
                  <p>Cubes and cube dimensions are first class data objects that support multidimensional analytics. They are stored in a container called an analytic workspace. Multidimensional objects and analytics are available with the OLAP option to Oracle Database.</p>
                  <div class="section">
                     <p>Cubes can be enabled as cube materialized views for automatic refresh of the cubes and dimensions, and for query rewrite. Several <code class="codeph">DBMS_CUBE</code> subprograms support the creation and maintenance of cube materialized views as a replacement for relational materialized views. These subprograms are discussed in <span class="q">"<a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL Aggregation Management is a group of PL/SQL subprograms in DBMS_CUBE that supports the rapid deployment of cube materialized views from existing relational materialized views.">Using SQL Aggregation Management</a>"</span>.
                     </p>
                     <p>The metadata for cubes and dimensions is defined in XML documents, called <span class="italic">templates</span>, which you can derive from relational materialized views using the <code class="codeph">CREATE_CUBE</code> or <code class="codeph">DERIVE_FROM_MVIEW</code> functions. Using a graphical tool named Analytic Workspace Manager, you can enhance the cube with analytic content or create the metadata for new cubes and cube dimensions from scratch.
                     </p>
                     <p>Several other <code class="codeph">DBMS_CUBE</code> subprograms provide a SQL alternative to Analytic Workspace Manager for creating an analytic workspace from an XML template and for refreshing the data stored in cubes and dimensions. The <code class="codeph">IMPORT_XML</code> procedure creates an analytic workspace with its cubes and cube dimensions from an XML template. The <code class="codeph">BUILD</code> procedure loads data into the cubes and dimensions from their data sources and performs whatever processing steps are needed to prepare the data for querying.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS73170"></a><a id="ARPLS73170"></a><div class="props_rev_3"><a id="GUID-3E317D67-8751-41A6-9706-63439F1B4837" name="GUID-3E317D67-8751-41A6-9706-63439F1B4837"></a><h4 id="ARPLS-GUID-3E317D67-8751-41A6-9706-63439F1B4837" class="sect4"><span class="enumeration_section">41.1.1 </span>DBMS_CUBE Security Model
                  </h4>
                  <div>
                     <p>Certain roles and system privileges are required to use the DBMS_CUBE package.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-E77B646D-2DAB-42F0-B98A-95CC6CF5100C">To create dimensional objects in the user's own schema:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d202489e376" class="indexterm-anchor"></a><a id="d202489e378" class="indexterm-anchor"></a><code class="codeph">OLAP_USER</code> role
                              </p>
                           </li>
                           <li>
                              <p><a id="d202489e385" class="indexterm-anchor"></a><code class="codeph">CREATE SESSION</code> privilege
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-FBDC4853-F45B-46B3-B333-84FCC4E5F6BA">To create dimensional objects in different schemas:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d202489e396" class="indexterm-anchor"></a><code class="codeph">OLAP_DBA</code> role
                              </p>
                           </li>
                           <li>
                              <p><a id="d202489e403" class="indexterm-anchor"></a><code class="codeph">CREATE SESSION</code> privilege
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-C39F6BDA-214E-4686-9A81-A43E538A32F0">To create cube materialized views in the user's own schema:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d202489e414" class="indexterm-anchor"></a><code class="codeph">CREATE MATERIALIZED VIEW</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><a id="d202489e421" class="indexterm-anchor"></a><code class="codeph">CREATE DIMENSION</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><a id="d202489e428" class="indexterm-anchor"></a><code class="codeph">ADVISOR</code> privilege
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E317D67-8751-41A6-9706-63439F1B4837__GUID-970FB435-42D4-498A-A68C-B79D37005A98">To create cube materialized views in different schemas:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d202489e439" class="indexterm-anchor"></a><code class="codeph">CREATE ANY MATERIALIZED VIEW</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><a id="d202489e446" class="indexterm-anchor"></a><code class="codeph">CREATE ANY DIMENSION</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><a id="d202489e453" class="indexterm-anchor"></a><code class="codeph">ADVISOR</code> privilege
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If the source tables are in a different schema, then the owner of the dimensional objects needs <code class="codeph">SELECT</code> object privileges on those tables.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS65729"></a><a id="ARPLS65729"></a><div class="props_rev_3"><a id="GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" name="GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184"></a><h3 id="ARPLS-GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" class="sect3"><span class="enumeration_section">41.2 </span>Using SQL Aggregation Management
               </h3>
               <div>
                  <p>SQL Aggregation Management is a group of PL/SQL subprograms in <code class="codeph">DBMS_CUBE</code> that supports the rapid deployment of cube materialized views from existing relational materialized views. 
                  </p>
                  <div class="section">
                     <p>Cube materialized views are cubes that have been enhanced to use the automatic refresh and query rewrite features of Oracle Database. A single cube materialized view can replace many of the relational materialized views of summaries on a fact table, providing uniform response time to all summary data.</p>
                     <p>Cube materialized views bring the fast update and fast query capabilities of the OLAP option to applications that query summaries of detail relational tables. The summary data is generated and stored in a cube, and query rewrite automatically redirects queries to the cube materialized views. Applications experience excellent querying performance. </p>
                     <p>In the process of creating the cube materialized views, <code class="codeph">DBMS_CUBE</code> also creates a fully functional analytic workspace including a cube and the cube dimensions. The cube stores the data for a cube materialized view instead of the table that stores the data for a relational materialized view. A cube can also support a wide range of analytic functions that enhance the database with information-rich content. 
                     </p>
                     <p>Cube materialized views are registered in the data dictionary along with all other materialized views. A <a id="d202489e576" class="indexterm-anchor"></a><code class="codeph">CB$</code> prefix identifies a cube materialized view. 
                     </p>
                     <p>The <code class="codeph">DBMS_CUBE</code> subprograms also support life-cycle management of cube materialized views.
                     </p>
                     <div class="infoboxnotealso" id="GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184__GUID-E64F2ACF-42F1-459C-A626-0C18EBC0357D">
                        <p class="notep1">See Also:</p>
                        <p><a href="../olaug/creating-dimensions-and-cubes.html#OLAUG-GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C" target="_blank">Adding Materialized View Capability to a Cube</a> in <span><cite>Oracle OLAP Userâ€™s Guide</cite></span> for more information about cube materialized views and enhanced OLAP analytics.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS65730"></a><a id="ARPLS65730"></a><div class="props_rev_3"><a id="GUID-1A253423-FD1A-4452-B91E-C199D0A93CDE" name="GUID-1A253423-FD1A-4452-B91E-C199D0A93CDE"></a><h4 id="ARPLS-GUID-1A253423-FD1A-4452-B91E-C199D0A93CDE" class="sect4"><span class="enumeration_section">41.2.1 </span>Subprograms in SQL Aggregation Management
                  </h4>
                  <div>
                     <p>SQL Aggregation Management includes four subprograms.</p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" title="This function creates a cube materialized view from the definition of a relational materialized view.">CREATE_MVIEW Function</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="This function generates an XML template that defines a cube with materialized view capabilities, using the information derived from an existing relational materialized view.">DERIVE_FROM_MVIEW Function</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" title="This procedure drops a cube materialized view and all associated objects from the database. These objects include the dimension materialized views, cubes, cube dimensions, levels, hierarchies, and the analytic workspace.">DROP_MVIEW Procedure</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_CUBE.html#GUID-861E4292-7C61-4D22-860D-18D894E882CA" title="This procedure refreshes the data in a cube materialized view.">REFRESH_MVIEW Procedure</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65731"></a><a id="ARPLS65731"></a><div class="props_rev_3"><a id="GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" name="GUID-0601BA46-A24E-496B-8E6A-92B6640428D7"></a><h4 id="ARPLS-GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" class="sect4"><span class="enumeration_section">41.2.2 </span>Requirements for the Relational Materialized View
                  </h4>
                  <div>
                     <p>SQL Aggregation Management uses an existing relational materialized view to derive all the information needed to generate a cube materialized view. The relational materialized view determines the detail level of data that is stored in the cube materialized view. The related relational dimension objects determine the scope of the aggregates, from the lowest level specified in the GROUP BY clause of the materialized view subquery, to the highest level of the dimension hierarchy.</p>
                     <div class="section">
                        <p>The relational materialized view must conform to these requirements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Explicit <code class="codeph">GROUP BY</code> clause for one or more columns.
                              </p>
                           </li>
                           <li>
                              <p>No expressions in the select list or <code class="codeph">GROUP BY</code> clause.
                              </p>
                           </li>
                           <li>
                              <p>At least one of these numeric aggregation methods: <code class="codeph">SUM</code>, <code class="codeph">MIN</code>, <code class="codeph">MAX</code>, or <code class="codeph">AVG</code>.
                              </p>
                           </li>
                           <li>
                              <p>No outer joins.</p>
                           </li>
                           <li>
                              <p>Summary keys with at least one simple column associated with a relational dimension.</p>
                              <p><span class="italic"><span class="bold">or</span></span></p>
                              <p>Summary keys with at least one simple column and no hierarchies or levels.</p>
                           </li>
                           <li>
                              <p>Numeric datatype of any type for the fact columns. All facts are converted to <code class="codeph">NUMBER</code>.
                              </p>
                           </li>
                           <li>
                              <p>Eligible for rewrite. <code class="codeph">REWRITE_CAPABILITY</code> should be <code class="codeph">GENERAL</code>; it cannot be <code class="codeph">NONE</code>. Refer to the <code class="codeph">ALL_MVIEWS</code> entry in the <a href="../refrn/ALL_MVIEWS.html#REFRN20139" target="_blank"><span class="italic">Oracle Database Reference</span></a>.
                              </p>
                           </li>
                           <li>
                              <p>Cannot use the <code class="codeph">DISTINCT</code> or <code class="codeph">UNIQUE</code> keywords with an aggregate function in the defining query. For example, <code class="codeph">AVG(DISTINCT units)</code> causes an error in <code class="codeph">STRICT</code> mode and is ignored in <code class="codeph">LOOSE</code> mode.
                              </p>
                           </li>
                        </ul>
                        <p>You can choose between two modes when rendering the cube materialized view, <code class="codeph">LOOSE</code> and <code class="codeph">STRICT</code>. In <code class="codeph">STRICT</code> mode, any deviation from the requirements raises an exception and prevents the materialized view from being created. In <code class="codeph">LOOSE</code> mode (the default), some deviations are allowed, but they affect the content of the materialized view. These elements in the relational materialized view generate warning messages:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Complex expressions in the defining query are ignored and do not appear in the cube materialized view.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">AVG</code> function is changed to <code class="codeph">SUM</code> and <code class="codeph">COUNT</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">COUNT</code> function without a <code class="codeph">SUM</code>, <code class="codeph">MIN</code>, <code class="codeph">MAX</code>, or <code class="codeph">AVG</code> function is ignored.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">STDDEV</code> and <code class="codeph">VARIANCE</code> functions are ignored.
                              </p>
                           </li>
                        </ul>
                        <p>You can also choose how conditions in the <code class="codeph">WHERE</code> clause are filtered. When filtering is turned off, the conditions are ignored. When turned on, valid conditions are rendered in the cube materialized view, but asymmetric conditions among dimension levels raise an exception. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65732"></a><a id="ARPLS65732"></a><div class="props_rev_3"><a id="GUID-56532689-6F4A-4001-B94B-FB5E4E2C9EE0" name="GUID-56532689-6F4A-4001-B94B-FB5E4E2C9EE0"></a><h4 id="ARPLS-GUID-56532689-6F4A-4001-B94B-FB5E4E2C9EE0" class="sect4"><span class="enumeration_section">41.2.3 </span>Permissions for Managing and Querying Cube Materialized Views
                  </h4>
                  <div>
                     <p>Certain permissions are required to manage and query cube materialized views. </p>
                     <div class="section">
                        <p>To create cube materialized views, you must have these privileges:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CREATE [ANY] MATERIALIZED VIEW</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE [ANY] DIMENSION</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ADVISOR</code> privilege
                              </p>
                           </li>
                        </ul>
                        <p>To access cube materialized views from another schema using query rewrite, you must have these privileges:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">GLOBAL QUERY REWRITE</code> privilege
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on the relational source tables
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on the analytic workspace (<code class="codeph">AW$</code><span class="italic"><code class="codeph">name</code></span>) that supports the cube materialized view
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on the cube
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on the dimensions of the cube
                              </p>
                           </li>
                        </ul>
                        <p>Note that you need <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on the database objects that <span class="italic">support</span> the cube materialized views, but not on the cube materialized views.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65733"></a><a id="ARPLS65733"></a><div class="props_rev_3"><a id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC" name="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC"></a><h4 id="ARPLS-GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC" class="sect4"><span class="enumeration_section">41.2.4 </span>Example of SQL Aggregation Management
                  </h4>
                  <div>
                     <p>Six examples of SQL Aggregate Management are given. All these examples use the sample Sales History schema, which is installed in Oracle Database with two relational materialized views: <code class="codeph">CAL_MONTH_SALES_MV</code> and <code class="codeph">FWEEK_PSCAT_SALES_MV</code>. 
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>About Relational Materialized View CAL_MONTH_SALES_MV</p>
                           </li>
                           <li>
                              <p>Creating the Cube Materialized View</p>
                           </li>
                           <li>
                              <p>Disabling the Relational Materialized Views</p>
                           </li>
                           <li>
                              <p>Creating Execution Plans for Cube Materialized Views</p>
                           </li>
                           <li>
                              <p>Maintaining Cube Materialized Views</p>
                           </li>
                           <li>
                              <p>New Database Objects</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-7DBC759D-586E-4EC1-9B2A-F462C0389029">About Relational Materialized View CAL_MONTH_SALES_MV</p>
                        <p>This example uses <code class="codeph">CAL_MONTH_SALES_MV</code> as the basis for creating a cube materialized view. The following query was used to create <code class="codeph">CAL_MONTH_SALES_MV</code>. <code class="codeph">CAL_MONTH_SALES_MV</code> summarizes the daily sales data stored in the <code class="codeph">SALES</code> table by month. 
                        </p><pre class="oac_no_warn" dir="ltr">SELECT query FROM user_mviews 
     WHERE mview_name='CAL_MONTH_SALES_MV';
 
QUERY
--------------------------------------------
SELECT   t.calendar_month_desc
  ,        sum(s.amount_sold) AS dollars
  FROM     sales s
  ,        times t
  WHERE    s.time_id = t.time_id
  GROUP BY t.calendar_month_desc
</pre><p><code class="codeph">DBMS_CUBE</code> uses relational dimensions to derive levels and hierarchies for the cube materialized view. The <code class="codeph">SH</code> schema has relational dimensions for most dimension tables in the schema, as shown by the following query. 
                        </p><pre class="oac_no_warn" dir="ltr">SELECT dimension_name FROM user_dimensions;
 
DIMENSION_NAME
-------------------------------------
CUSTOMERS_DIM
PRODUCTS_DIM
TIMES_DIM
CHANNELS_DIM
PROMOTIONS_DIM</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-477CB87A-86D6-401C-89C6-1485066E4689">Creating the Cube Materialized View</p>
                        <p>This PL/SQL script uses the <a id="d202489e1259" class="indexterm-anchor"></a><code class="codeph">CREATE_MVIEW</code> function to create a cube materialized view from <code class="codeph">CAL_MONTH_SALES_MV</code>. <code class="codeph">CREATE_MVIEW</code> sets the optional <code class="codeph">BUILD</code> parameter to refresh the cube materialized view immediately.
                        </p><pre class="oac_no_warn" dir="ltr">SET serverout ON format wrapped
 
DECLARE
     salesaw  varchar2(30);
          
BEGIN
     salesaw := dbms_cube.create_mview('SH', 'CAL_MONTH_SALES_MV',
                'build=immediate');
END;
/
</pre><p>These messages confirm that the script created and refreshed <code class="codeph">CB$CAL_MONTH_SALES</code> successfully:
                        </p><pre class="oac_no_warn" dir="ltr">Completed refresh of cube mview "SH"."CB$CAL_MONTH_SALES" at 20130212 08:42:58.0
03.
Created cube organized materialized view "CB$CAL_MONTH_SALES" for rewrite at 200
130212 08:42:58.004.
</pre><p>The following query lists the materialized views in the <code class="codeph">SH</code> schema:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT mview_name FROM user_mviews;

MVIEW_NAME
------------------------------
CB$CAL_MONTH_SALES
CB$TIMES_DIM_D1_CAL_ROLLUP
CAL_MONTH_SALES_MV
FWEEK_PSCAT_SALES_MV
</pre><p>Two new materialized views are registered in the data dictionary: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CB$CAL_MONTH_SALES</code>: Cube materialized view
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CB$TIMES_DIM_D1_CAL_ROLLUP</code>: Cube dimension materialized view for the <code class="codeph">TIME_DIM</code> Calendar Rollup hierarchy 
                              </p>
                           </li>
                        </ul>
                        <p>Cube dimension materialized views support refresh of the cube materialized view. You do not directly administer dimension materialized views. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-324BE3AB-69AF-45C8-BA3C-DE3CC4E27BF5">Disabling the Relational Materialized Views</p>
                        <p>After creating a cube materialized view, disable query rewrite on all relational materialized views for the facts now supported by the cube materialized view. You can drop them when you are sure that you created the cube materialized view with the optimal parameters.</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED VIEW cal_month_sales_mv DISABLE QUERY REWRITE;
 
Materialized view altered.
</pre><p>You can also use the <code class="codeph">DISABLEQRW</code> parameter in the <code class="codeph">CREATE_MVIEW</code> function, which disables query rewrite on the source materialized view as described in <a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACDIIJC" title="Parameter descriptions for SQL Aggregation Management.">Table 41-7</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-CD02524E-59FA-461E-B3F9-858B8DCD0A01">Creating Execution Plans for Cube Materialized Views</p>
                        <p>You can create execution plans for cube materialized views the same as for relational materialized views. The following command generates an execution plan for a query against the <code class="codeph">SALES</code> table, which contains data at the day level. The answer set requires data summarized by quarter. Query rewrite would not use the original relational materialized view for this query, because its data is summarized by month. However, query rewrite can use the new cube materialized view for summary data for months, quarters, years, and all years.
                        </p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR SELECT
           t.calendar_quarter_desc,
           sum(s.amount_sold) AS dollars
  FROM     sales s,
           times t
  WHERE    s.time_id = t.time_id
  AND      t.calendar_quarter_desc LIKE '2001%'
  GROUP BY t.calendar_quarter_desc
  ORDER BY t.calendar_quarter_desc;
</pre><p>The query returns these results:</p><pre class="oac_no_warn" dir="ltr">CALENDAR_QUARTER_DESC    DOLLARS
--------------------- ----------
2001-01               6547097.44
2001-02               6922468.39
2001-03               7195998.63
2001-04               7470897.52
</pre><p>The execution plan shows that query rewrite returned the summary data from the cube materialized view, <code class="codeph">CB$CAL_MONTH_SALES</code>, instead of recalculating it from the <code class="codeph">SALES</code> table.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT plan_table_output FROM TABLE(dbms_xplan.display());

PLAN_TABLE_OUTPUT
---------------------------------------------------------------------------------------------------------------
Plan hash value: 2999729407

-----------------------------------------------------------------------------------------------------
| Id  | Operation                      | Name               | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT               |                    |     1 |    30 |     3  (34)| 00:00:01 |
|   1 |  SORT GROUP BY                 |                    |     1 |    30 |     3  (34)| 00:00:01 |
|*  2 |   MAT_VIEW REWRITE CUBE ACCESS | CB$CAL_MONTH_SALES |     1 |    30 |     2   (0)| 00:00:01 |
-----------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter("CB$CAL_MONTH_SALES"."D1_CALENDAR_QUARTER_DESC" LIKE '2001%' AND
              "CB$CAL_MONTH_SALES"."SYS_GID"=63)

15 rows selected.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-3919278C-EC0A-4CF2-9951-FCB92EDC30C1">Maintaining Cube Materialized Views</p>
                        <p><a id="d202489e1355" class="indexterm-anchor"></a>You can create a cube materialized view that refreshes automatically. However, you can force a refresh at any time using the <a href="DBMS_CUBE.html#GUID-861E4292-7C61-4D22-860D-18D894E882CA" title="This procedure refreshes the data in a cube materialized view.">REFRESH_MVIEW Procedure</a>:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
     dbms_cube.refresh_mview('SH', 'CB$CAL_MONTH_SALES');
END;
/ 

Completed refresh of cube mview "SH"."CB$CAL_MONTH_SALES" at 20130212
14:30:59.534.
</pre><p><a id="d202489e1368" class="indexterm-anchor"></a>If you want to drop a cube materialized view, use the <a href="DBMS_CUBE.html#GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" title="This procedure drops a cube materialized view and all associated objects from the database. These objects include the dimension materialized views, cubes, cube dimensions, levels, hierarchies, and the analytic workspace.">DROP_MVIEW Procedure</a> so that all supporting database objects (analytic workspace, cube, cube dimensions, and so forth) are also dropped:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
     dbms_cube.drop_mview('SH', 'CB$CAL_MONTH_SALES');
END;
/ 

Dropped cube organized materialized view "SH"."CAL_MONTH_SALES" including
container analytic workspace "SH"."CAL_MONTH_SALES_AW" at 20130212 13:38:47.878.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FB844E2-62DB-41AD-B8DC-C872EA390AAC__GUID-92C4D9C3-9BD6-406F-98A6-ABB551E82E74">New Database Objects</p>
                        <p>The <code class="codeph">CREATE_MVIEW</code> function creates several first class database objects in addition to the cube materialized views. You can explore these objects through the data dictionary by querying views such as <code class="codeph">ALL_CUBES</code> and <code class="codeph">ALL_CUBE_DIMENSIONS</code>.
                        </p>
                        <p>This example created the following supporting objects:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Analytic workspace <code class="codeph">CAL_MONTH_SALES_AW</code> (<code class="codeph">AW$CAL_MONTH_SALES_AW</code> table)
                              </p>
                           </li>
                           <li>
                              <p>Cube <code class="codeph">CAL_MONTH_SALES</code></p>
                           </li>
                           <li>
                              <p>Cube dimension <code class="codeph">TIMES_DIM_D1</code></p>
                           </li>
                           <li>
                              <p>Dimension hierarchy <code class="codeph">CAL_ROLLUP</code></p>
                           </li>
                           <li>
                              <p>Dimension levels <code class="codeph">ALL_TIMES_DIM</code>, <code class="codeph">YEAR</code>, <code class="codeph">QUARTER</code>, and <code class="codeph">MONTH</code></p>
                           </li>
                           <li>
                              <p>Numerous attributes for levels in the <code class="codeph">CAL_ROLLUP</code> hierarchy
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS73596"></a><a id="ARPLS73596"></a><div class="props_rev_3"><a id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" name="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D"></a><h3 id="ARPLS-GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" class="sect3"><span class="enumeration_section">41.3 </span>Upgrading 10<span class="italic">g</span> Analytic Workspaces
               </h3>
               <div>
                  <p>You can upgrade an OLAP 10<span class="italic">g</span> analytic workspace to OLAP 12<span class="italic">c</span> by saving the OLAP 10<span class="italic">g</span> objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.
                  </p>
                  <div class="section">
                     <p>Oracle OLAP metadata is the same in OLAP 11<span class="italic">g</span> and OLAP 12<span class="italic">c</span> so you do not need to upgrade an OLAP 11<span class="italic">g</span> analytic workspace to OLAP 12<span class="italic">c</span>. This topic describes upgrading an Oracle OLAP 10<span class="italic">g</span> analytic workspace to OLAP 12<span class="italic">c</span>.
                     </p>
                     <div class="infobox-tip" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-EF30425E-6131-44C9-A623-E84F414BBCCB">
                        <p class="notep1">Tip:</p>
                        <p>Oracle recommends using Analytic Workspace Manager for performing upgrades. See <a href="../olaug/getting-started-oracle-olap.html#OLAUG-GUID-5F3116A1-3752-4B54-A840-06CA44759BF8" target="_blank">Upgrading Metadata From Oracle OLAP 10<span class="italic">g</span></a> in <cite><span><cite>Oracle OLAP Userâ€™s Guide</cite></span></cite>.
                        </p>
                     </div>
                     <p>These subprograms in <code class="codeph">DBMS_CUBE</code> support the upgrade process:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.">CREATE_EXPORT_OPTIONS Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.">CREATE_IMPORT_OPTIONS Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="This procedure writes OLAP metadata to a CLOB.">EXPORT_XML Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46" title="This procedure exports OLAP metadata to a file. This file can be imported into a new or existing analytic workspace using the IMPORT_XML procedure. In this way, you can create a copy of the analytic workspace in another schema or database.">EXPORT_XML_TO_FILE Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="This procedure creates, modifies, or drops an analytic workspace by using an XML template.">IMPORT_XML Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" title="This procedure processes analytic workspaces created in Oracle OLAP 10g so they can be used by Oracle OLAP 12c clients. It processes all analytic workspaces in the current schema. Run this procedure once for each schema in which there are 10g analytic workspaces.">INITIALIZE_CUBE_UPGRADE Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_CUBE.html#GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" title="This procedure creates an Oracle OLAP 12c analytic workspace from a copy of the metadata contained in an OLAP 10g analytic workspace. The original OLAP 10g analytic workspace is not affected and can exist at the same time and in the same schema as the OLAP 12c analytic workspace.">UPGRADE_AW Procedure</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-D4E17214-5A90-4344-9402-03BA5D233532">Prerequisites:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The OLAP 10<span class="italic">g</span> analytic workspace can use OLAP standard form metadata.
                           </p>
                        </li>
                        <li>
                           <p>Customizations to the OLAP 10<span class="italic">g</span> analytic workspace may not be exported to the XML template. You must re-create them in OLAP 12<span class="italic">c</span>.
                           </p>
                        </li>
                        <li>
                           <p>The original relational source data must be available to load into the new analytic workspace. If the data is in a different schema or the table names are different, then you must remap the dimensional objects to the new relational sources after the upgrade.</p>
                        </li>
                        <li>
                           <p>You can create the OLAP 12<span class="italic">c</span> analytic workspace in the same schema as the OLAP 10<span class="italic">g</span> analytic workspace. However, if you prefer to create it in a different schema, then create a new user with the following privileges:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on the OLAP 10<span class="italic">g</span> analytic workspace (<code class="codeph">GRANT SELECT ON </code><span class="italic"><code class="codeph">schema</code></span><code class="codeph">.AW$</code><span class="italic"><code class="codeph">analytic_workspace</code></span>).
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on all database tables and views that contain the source data for the OLAP 10<span class="italic">g</span> analytic workspace. 
                                 </p>
                              </li>
                              <li>
                                 <p>Appropriate privileges for an OLAP administrator. </p>
                              </li>
                              <li>
                                 <p>Same default tablespace as the Oracle 10<span class="italic">g</span> user.
                                 </p>
                              </li>
                           </ul>
                           <p>See the <a href="../olaug/getting-started-oracle-olap.html#OLAUG9119" target="_blank"><span class="italic">Oracle OLAP User's Guide</span></a>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-763F1320-A48E-4305-86A7-1DC605DC4008">Correcting Naming Conflicts</p>
                     <p>The namespaces are different in OLAP 10<span class="italic">g</span> than those in OLAP 12<span class="italic">c</span>. For a successful upgrade, you must identify any 10<span class="italic">g</span> object names that are used multiple times under the 12<span class="italic">c</span> naming rules and provide unique names for them.
                     </p>
                     <p>The following namespaces control the uniqueness of OLAP object names in Oracle 12<span class="italic">c</span>: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Schema</span>: The names of cubes, dimensions, and measure folders must be unique within a schema. They cannot conflict with the names of tables, views, indexes, relational dimensions, or any other first class objects. However, these OLAP 12<span class="italic">c</span> object names do not need to be distinct from 10<span class="italic">g</span> object names, because they are in different namespaces.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Cube</span>: The names of measures must be unique within a cube. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Dimension</span>: The names of hierarchies, levels, and attributes must be unique within a dimension. For example, a dimension cannot have a hierarchy named Customers and a level named Customers.
                           </p>
                        </li>
                     </ul>
                     <p>You can use an initialization table and a rename table to rename objects in the upgraded 12<span class="italic">c</span> analytic workspace.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-919468AA-98EB-4AFA-BEC4-9E7E443CD2F9">Initialization Table</p>
                     <p>The <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> procedure identifies ambiguous names under the OLAP 12<span class="italic">c</span> naming rules. For example, a 10<span class="italic">g </span>dimension might have a hierarchy and a level with the same name. Because hierarchies and levels are in the same 12<span class="italic">c</span> namespace, the name is not unique in 12<span class="italic">c</span>; to a 12<span class="italic">c</span> client, the hierarchy and the level cannot be differentiated by name.
                     </p>
                     <p><code class="codeph">INITIALIZE_CUBE_UPGRADE</code> creates and populates a table named <code class="codeph">CUBE_UPGRADE_INFO</code> with unique names for these levels, hierarchies, and attributes. By using the unique names provided in the table, a 12<span class="italic">c</span> client can browse the OLAP 12<span class="italic">c</span> metadata. You cannot attach an OLAP 12<span class="italic">c</span> client to the analytic workspace or perform an upgrade without a <code class="codeph">CUBE_UPGRADE_INFO</code> table, if the 10<span class="italic">g</span> metadata contains ambiguous names.
                     </p>
                     <p>You can edit <code class="codeph">CUBE_UPGRADE_INFO</code> to change the default unique names to names of your choosing. You can also add rows to change the names of any other objects. When using an 12<span class="italic">c</span> client, you see the new object names. When using an 10<span class="italic">g</span> client, you see the original names. However, the <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> procedure overwrites this table, so you may prefer to enter customizations in a rename table.
                     </p>
                     <p>During an upgrade from OLAP 10<span class="italic">g,</span> the unique object names in <code class="codeph">CUBE_UPGRADE_INFO</code> are used as the names of 12<span class="italic">c</span> objects in the new analytic workspace. However, <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> does not automatically provide unique names for cubes, dimensions, and measure folders. To complete an upgrade, you must assure that these objects have unique names within the 12<span class="italic">c</span> namespace. You can provide these objects with new names in the <code class="codeph">CUBE_UPGRADE_INFO</code> table or in a rename table.
                     </p>
                     <p>OLAP 12<span class="italic">c</span> clients automatically use <code class="codeph">CUBE_UPGRADE_INFO</code> when it exists in the same schema as the OLAP 10<span class="italic">g</span> analytic workspace.
                     </p>
                     <div class="infoboxnotealso" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-0F67A884-A751-4C78-86CD-1251C634ED2F">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="DBMS_CUBE.html#GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" title="This procedure processes analytic workspaces created in Oracle OLAP 10g so they can be used by Oracle OLAP 12c clients. It processes all analytic workspaces in the current schema. Run this procedure once for each schema in which there are 10g analytic workspaces.">INITIALIZE_CUBE_UPGRADE Procedure</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-2D01392A-5F38-4403-B557-15E59F8CFBE4">Rename Table</p>
                     <p>You can create a rename table that contains new object names for an OLAP 12<span class="italic">c</span> analytic workspace. You can then use the rename table in the <code class="codeph">CREATE_IMPORT_OPTIONS</code> and <code class="codeph">UPGRADE_AW</code> procedures. 
                     </p>
                     <p>When upgrading within the same schema, you must provide a unique name for the 12<span class="italic">c</span> analytic workspace. The <code class="codeph">UPGRADE_AW</code> procedure provides a parameter for this purpose; otherwise, you must provide the new name in the rename table. The duplication of cube names does not create ambiguity because the 12<span class="italic">c</span> cubes are created in a different namespace than the 10<span class="italic">g</span> cubes.
                     </p>
                     <p>The names provided in a rename table are used only during an upgrade and overwrite any names entered in the <code class="codeph">CUBE_UPGRADE_INFO</code> table.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-BC1F017E-F3DC-4BC8-BB61-86AFA105ED88">To create a rename table:</p>
                     <ol>
                        <li>
                           <p>Open SQL*Plus or another SQL client, and connect to Oracle Database as the owner of the 10<span class="italic">g</span> analytic workspace.
                           </p>
                        </li>
                        <li>
                           <p>Issue a command like the following:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE table_name (
          source_id    VARCHAR2(300),
          new_name     VARCHAR2(30),
          object_type  VARCHAR2(30));
 </pre></li>
                        <li>
                           <p>Populate the rename table with the appropriate values, as follows.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">table_name</code> is the name of the rename table.
                     </p>
                     <p><code class="codeph">source_id</code> is the identifier for an object described in the XML document supplied to IMPORT_XML. The identifier must have this format:
                     </p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema_name</span>.<span class="italic">object_name</span>[.<span class="italic">subobject_name</span>]
</pre><p><code class="codeph">new_name</code> is the object name given during the import to the object specified by <code class="codeph">source_id</code>. 
                     </p>
                     <p><code class="codeph">object_type</code> is the object type as described in the XML, such as StandardDimension or DerivedMeasure.
                     </p>
                     <p>For example, these SQL statements populate the table with new names for the analytic workspace, a cube, and four dimensions:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO my_object_map VALUES('GLOBAL_AW.GLOBAL10.AW', 'GLOBAL12', 'AW');
INSERT INTO my_object_map VALUES('GLOBAL_AW.UNITS_CUBE', 'UNIT_SALES_CUBE', 'Cube');
INSERT INTO my_object_map VALUES('GLOBAL_AW.CUSTOMER', 'CUSTOMERS', 'StandardDimension');
INSERT INTO my_object_map VALUES('GLOBAL_AW.CHANNEL', 'CHANNELS', 'StandardDimension');
INSERT INTO my_object_map VALUES('GLOBAL_AW.PRODUCT', 'PRODUCTS', 'StandardDimension');
INSERT INTO my_object_map VALUES('GLOBAL_AW.TIME', 'TIME_PERIODS', 'TimeDimension');</pre><div class="infoboxnotealso" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-A1D6C8C1-F558-4499-9DD2-146891FEA6D8">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.">CREATE_IMPORT_OPTIONS Procedure</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-434DD4C2-6FE0-43B3-A27B-B2F16ED87DFE">Simple Upgrade</p>
                     <p>A simple upgrade creates an OLAP 12<span class="italic">c</span> analytic workspace from an OLAP 10<span class="italic">g</span> analytic workspace.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-9D512353-0711-48CC-8B5E-0DCD415FA55B">To perform a simple upgrade of an Oracle OLAP 10<span class="italic">g</span> analytic workspace:
                     </p>
                     <ol>
                        <li>
                           <p>Open SQL*Plus or a similar SQL command-line interface and connect to Oracle Database 12<span class="italic">c</span> as the schema owner for the OLAP 12<span class="italic">c</span> analytic workspace.
                           </p>
                        </li>
                        <li>
                           <p>To rename any objects in the 12<span class="italic">c</span> analytic workspace, create a rename table as described in the Rename Table section.<a id="d202489e2035" class="indexterm-anchor"></a> (Optional) 
                           </p>
                        </li>
                        <li>
                           <p>Perform the upgrade, as described in <span class="q">"<a href="DBMS_CUBE.html#GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" title="This procedure creates an Oracle OLAP 12c analytic workspace from a copy of the metadata contained in an OLAP 10g analytic workspace. The original OLAP 10g analytic workspace is not affected and can exist at the same time and in the same schema as the OLAP 12c analytic workspace.">UPGRADE_AW Procedure</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">DBMS_CUBE.BUILD</code> procedure to load data into the cube.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-932CAB20-13D9-4F8F-A5CB-354F409E790E">
                     <p class="titleinexample">Example 41-1 Performing a Simple Upgrade to the GLOBAL Analytic Workspace</p>
                     <p>This example creates an OLAP 12<span class="italic">c</span> analytic workspace named <code class="codeph">GLOBAL12</code> from an OLAP 10<span class="italic">g</span> analytic workspace named <code class="codeph">GLOBAL10</code>. <code class="codeph">GLOBAL10</code> contains no naming conflicts between cubes, dimensions, measure folders, or tables in the schema, so a rename table is not needed in this example.
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN 
 
  -- Upgrade the analytic workspace
  dbms_cube.upgrade_aw(sourceaw =&gt;'GLOBAL10', destaw =&gt; 'GLOBAL12');
  
  -- Load and aggregate the data
  dbms_cube.build(script =&gt; 'UNITS_CUBE, PRICE_AND_COST_CUBE');
   
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-8E069EEF-76C4-460C-BD18-496669DBE742">Custom Upgrade</p>
                     <p>A custom upgrade enables you to set the export and import options.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-95153723-7DAD-4577-B4A8-8F4417F5B78F">To perform a custom upgrade of an Oracle OLAP 10<span class="italic">g</span> analytic workspace:
                     </p>
                     <ol>
                        <li>
                           <p>Open SQL*Plus or a similar SQL command-line interface and connect to Oracle Database 12<span class="italic">c</span> as the schema owner of the OLAP 12<span class="italic">c</span> analytic workspace.
                           </p>
                        </li>
                        <li>
                           <p><a id="d202489e2113" class="indexterm-anchor"></a>Generate an initialization table, as described in the Initialization Table section. Review the new, default object names and modify them as desired.
                           </p>
                        </li>
                        <li>
                           <p>Create a rename table, as described in the Rename Table section. If you are upgrading in the same schema, you must use a rename table to provide a unique name for the 12<span class="italic">c</span> analytic workspace. Otherwise, a rename table is needed only if names are duplicated among the cubes, dimensions, and measure folders of the analytic workspace, or between those names and the existing cubes, dimensions, measure folders, or tables of the destination schema.
                           </p>
                        </li>
                        <li>
                           <p>Create a SQL script that does the following:</p>
                           <ol type="a">
                              <li>
                                 <p>Create an XML document for the export options, as described in <span class="q">"<a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.">CREATE_EXPORT_OPTIONS Procedure</a>"</span>. The <code class="codeph">SUPPRESS_NAMESPACE</code> option must be set to <code class="codeph">TRUE</code> for the upgrade to occur.
                                 </p>
                              </li>
                              <li>
                                 <p>Create an XML document for the import options, as described in <span class="q">"<a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.">CREATE_IMPORT_OPTIONS Procedure</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d202489e2156" class="indexterm-anchor"></a>Create an XML template in OLAP 12<span class="italic">c</span> format, as described in <span class="q">"<a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="This procedure writes OLAP metadata to a CLOB.">EXPORT_XML Procedure</a>"</span>. 
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d202489e2172" class="indexterm-anchor"></a>Create an OLAP 12<span class="italic">c</span> analytic workspace from the XML template, as described in <span class="q">"<a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="This procedure creates, modifies, or drops an analytic workspace by using an XML template.">IMPORT_XML Procedure</a>"</span>.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Load and aggregate the data in the new analytic workspace, as described in <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" title="This procedure loads data into one or more cubes and dimensions, and generates aggregate values in the cubes. The results are automatically committed to the database.">BUILD Procedure</a>"</span>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D__GUID-0A82797F-A27F-44C2-88CE-917B1E00FF62">
                     <p class="titleinexample">Example 41-2 Performing a Custom Upgrade to the GLOBAL Analytic Workspace</p>
                     <p>This example upgrades the <code class="codeph">GLOBAL10</code> analytic workspace from OLAP 10<span class="italic">g</span> metadata to OLAP 12<span class="italic">c</span> metadata in the <code class="codeph">GLOBAL_AW</code> schema. 
                     </p>
                     <p>The rename table provides the new name of the analytic workspace. These commands define the rename table.</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE my_object_map(
       source_id    VARCHAR2(300),
       new_name     VARCHAR2(30),
       object_type  VARCHAR2(30));
 
INSERT INTO my_object_map VALUES('GLOBAL_AW.GLOBAL10.AW',  'GLOBAL12', 'AW');
COMMIT;
</pre><p>Following is the script for performing the upgrade.</p><pre class="oac_no_warn" dir="ltr">set serverout on
 
DECLARE
  importClob    clob;
  exportClob    clob;
  exportOptClob clob;
  importOptClob clob;
  
BEGIN
 
  -- Create table of reconciled names
  dbms_cube.initialize_cube_upgrade;
  
  -- Create a CLOB containing the export options
  dbms_lob.createtemporary(exportOptClob, TRUE);
  dbms_cube.create_export_options(out_options_xml=&gt;exportOptClob, suppress_namespace=&gt;TRUE, preserve_table_owners=&gt;TRUE);
  
  -- Create a CLOB containing the import options
  dbms_lob.createtemporary(importOptClob, TRUE);
  dbms_cube.create_import_options(out_options_xml=&gt;importOptClob, rename_table =&gt; 'MY_OBJECT_MAP');
   
   -- Create CLOBs for the metadata
  dbms_lob.createtemporary(importClob, TRUE);
  dbms_lob.createtemporary(exportClob, TRUE);
  
  -- Export metadata from a 10g analytic workspace to a CLOB
  dbms_cube.export_xml(object_ids=&gt;'GLOBAL_AW', options_xml=&gt;exportOptClob, out_xml=&gt;exportClob); 
  
  -- Import metadata from the CLOB
  dbms_cube.import_xml(in_xml =&gt; exportClob, options_xml=&gt;importOptClob, out_xml=&gt;importClob);
   
  -- Load and aggregate the data
  dbms_cube.build('UNITS_CUBE, PRICE_AND_COST_CUBE');
 
END;
/</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ARPLS65740"></a><a id="ARPLS65741"></a><a id="ARPLS65741"></a><a id="ARPLS65740"></a><div class="props_rev_3"><a id="GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3" name="GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3"></a><h3 id="ARPLS-GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3" class="sect3"><span class="enumeration_section">41.4 </span>Summary of DBMS_CUBE Subprograms
               </h3>
               <div>
                  <p>This table lists and describes the <code class="codeph">DBMS_CUBE</code> procedure subprograms.
                  </p>
                  <div class="tblformal" id="GUID-3DC165E8-194C-46F3-959E-F5F9E0DEA1F3__GUID-78F5181C-5876-4886-8919-051773E6D9BF">
                     <p class="titleintable">Table 41-1 DBMS_CUBE Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_CUBE Subprograms" summary="This table lists and describes the DBMS_CUBE procedure subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d202489e2323">Subprogram</th>
                              <th align="left" valign="bottom" width="69%" id="d202489e2326">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2331" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" title="This procedure loads data into one or more cubes and dimensions, and generates aggregate values in the cubes. The results are automatically committed to the database.">BUILD Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2331 d202489e2326 ">
                                 <p>Loads data into one or more cubes and dimensions, and prepares the data for querying.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2343" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.">CREATE_EXPORT_OPTIONS Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2343 d202489e2326 ">
                                 <p>Creates an input XML document of processing options for the EXPORT_XML procedure.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2355" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.">CREATE_IMPORT_OPTIONS Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2355 d202489e2326 ">
                                 <p>Creates an input XML document of processing options for the IMPORT_XML procedure.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2367" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" title="This function creates a cube materialized view from the definition of a relational materialized view.">CREATE_MVIEW Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2367 d202489e2326 ">
                                 <p>Creates a cube materialized view from the definition of a relational materialized view.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2379" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="This function generates an XML template that defines a cube with materialized view capabilities, using the information derived from an existing relational materialized view.">DERIVE_FROM_MVIEW Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2379 d202489e2326 ">
                                 <p>Creates an XML template for a cube materialized view from the definition of a relational materialized view.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2391" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" title="This procedure drops a cube materialized view and all associated objects from the database. These objects include the dimension materialized views, cubes, cube dimensions, levels, hierarchies, and the analytic workspace.">DROP_MVIEW Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2391 d202489e2326 ">
                                 <p>Drops a cube materialized view.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2403" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="This procedure writes OLAP metadata to a CLOB.">EXPORT_XML Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2403 d202489e2326 ">
                                 <p>Exports the XML of an analytic workspace to a CLOB.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2415" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46" title="This procedure exports OLAP metadata to a file. This file can be imported into a new or existing analytic workspace using the IMPORT_XML procedure. In this way, you can create a copy of the analytic workspace in another schema or database.">EXPORT_XML_TO_FILE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2415 d202489e2326 ">
                                 <p>Exports the XML of an analytic workspace to a file.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2430" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="This procedure creates, modifies, or drops an analytic workspace by using an XML template.">IMPORT_XML Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2430 d202489e2326 ">
                                 <p>Creates, modifies, or drops an analytic workspace by using an XML template</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2442" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" title="This procedure processes analytic workspaces created in Oracle OLAP 10g so they can be used by Oracle OLAP 12c clients. It processes all analytic workspaces in the current schema. Run this procedure once for each schema in which there are 10g analytic workspaces.">INITIALIZE_CUBE_UPGRADE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2442 d202489e2326 ">
                                 <p>Processes Oracle OLAP 10<span class="italic">g</span> objects with naming conflicts to enable Oracle 12<span class="italic">c</span> clients to access them.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2469" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-861E4292-7C61-4D22-860D-18D894E882CA" title="This procedure refreshes the data in a cube materialized view.">REFRESH_MVIEW Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2469 d202489e2326 ">
                                 <p>Refreshes a cube materialized view.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2482" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" title="This procedure creates an Oracle OLAP 12c analytic workspace from a copy of the metadata contained in an OLAP 10g analytic workspace. The original OLAP 10g analytic workspace is not affected and can exist at the same time and in the same schema as the OLAP 12c analytic workspace.">UPGRADE_AW Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2482 d202489e2326 ">
                                 <p>Upgrades an analytic workspace from Oracle OLAP 10<span class="italic">g</span> to 12<span class="italic">c</span>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d202489e2512" headers="d202489e2323 ">
                                 <p><a href="DBMS_CUBE.html#GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74" title="This procedure checks the XML to assure that it is valid without committing the results to the database. It does not create an analytic workspace.">VALIDATE_XML Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d202489e2512 d202489e2326 ">
                                 <p>Checks the XML to assure that it is valid, without committing the results to the database.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65742"></a><a id="ARPLS65743"></a><a id="ARPLS65744"></a><a id="ARPLS65745"></a><a id="ARPLS65746"></a><a id="ARPLS65747"></a><a id="ARPLS73604"></a><a id="ARPLS65748"></a><a id="ARPLS65749"></a><a id="ARPLS65750"></a><a id="ARPLS73605"></a><a id="ARPLS73606"></a><a id="ARPLS73607"></a><a id="ARPLS73608"></a><a id="ARPLS65743"></a><a id="ARPLS65744"></a><a id="ARPLS65745"></a><a id="ARPLS65746"></a><a id="ARPLS65747"></a><a id="ARPLS73604"></a><a id="ARPLS65748"></a><a id="ARPLS65749"></a><a id="ARPLS65750"></a><a id="ARPLS73605"></a><a id="ARPLS73606"></a><a id="ARPLS73607"></a><a id="ARPLS73608"></a><a id="ARPLS65742"></a><div class="props_rev_3"><a id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" name="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104"></a><h4 id="ARPLS-GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" class="sect4"><span class="enumeration_section">41.4.1 </span>BUILD Procedure
                  </h4>
                  <div>
                     <p>This procedure loads data into one or more cubes and dimensions, and generates aggregate values in the cubes. The results are automatically committed to the database.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-4D764591-AC2E-4E3D-BEFB-37678F799179">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD (
       script                IN  VARCHAR2,
       method                IN  VARCHAR2        DEFAULT NULL,
       refresh_after_errors  IN  BOOLEAN         DEFAULT FALSE,
       parallelism           IN  BINARY_INTEGER  DEFAULT 0,
       atomic_refresh        IN  BOOLEAN         DEFAULT FALSE,
       automatic_order       IN  BOOLEAN         DEFAULT TRUE,
       add_dimensions        IN  BOOLEAN         DEFAULT TRUE,
       scheduler_job         IN  VARCHAR2        DEFAULT NULL,
       master_build_id       IN  BINARY_INTEGER  DEFAULT 0,
       nested                IN  BOOLEAN         DEFAULT FALSE);
       job_class             IN  VARCHAR2        DEFAULT 'DEFAULT_JOB_CLASS'</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-E281407D-CC04-44F1-9552-F0A51DBE87D5">Parameters</p>
                        <div class="tblformal" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-CB7503FA-CEC4-4BD0-8E3A-78C91E360100">
                           <p class="titleintable">Table 41-2 BUILD Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="BUILD Procedure Parameters" summary="DBMS_CUBE.BUILD parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e2663">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e2666">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2671" headers="d202489e2663 ">
                                       <p><code class="codeph">script</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2671 d202489e2666 ">
                                       <p>A list of cubes and dimensions and their build options (see <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDJBHEH">SCRIPT Parameter</a>"</span>).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2683" headers="d202489e2663 ">
                                       <p><code class="codeph">method</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2683 d202489e2666 ">
                                       <p>A full or a fast (partial) refresh. In a fast refresh, only changed rows are inserted in the cube and the affected areas of the cube are re-aggregated.</p>
                                       <p>You can specify a method for each cube and dimension in sequential order, or a single method to apply to all cubes and dimensions. If you list more objects than methods, then the last method applies to the additional objects.</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">C</code>: Complete refresh clears all dimension values before loading. (Default)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">F</code>: Fast refresh of a cube materialized view, which performs an incremental refresh and re-aggregation of only changed rows in the source table.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">?</code>: Fast refresh if possible, and otherwise a complete refresh.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">P</code>: Recomputes rows in a cube materialized view that are affected by changed partitions in the detail tables.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">S</code>: Fast solve of a compressed cube. A fast solve reloads all the detail data and re-aggregates only the changed values.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>See the <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">Usage Notes</a>"</span> for additional details.
                                       </p>
                                       <p>Methods do not apply to dimensions.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2727" headers="d202489e2663 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2727 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code> to roll back just the cube or dimension with errors, and then continue building the other objects.
                                       </p>
                                       <p><code class="codeph">FALSE</code> to roll back all objects in the build.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2741" headers="d202489e2663 ">
                                       <p><code class="codeph">parallelism</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2741 d202489e2666 ">
                                       <p>Number of parallel processes to allocate to this job (see Usage Notes).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2749" headers="d202489e2663 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2749 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code> prevents users from accessing intermediate results during a build. It freezes the current state of an analytic workspace at the beginning of the build to provide current sessions with consistent data. This option thaws the analytic workspace at the end of the build to give new sessions access to the refreshed data. If an error occurs during the build, then all objects are rolled back to the frozen state. 
                                       </p>
                                       <p><code class="codeph">FALSE</code> enables users to access intermediate results during an build.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2763" headers="d202489e2663 ">
                                       <p><code class="codeph">automatic_order</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2763 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code> enables optimization of the build order. Dimensions are loaded before cubes.
                                       </p>
                                       <p><code class="codeph">FALSE</code> builds objects in the order you list them in the script.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2777" headers="d202489e2663 ">
                                       <p><code class="codeph">add_dimensions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2777 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code> automatically includes all the dimensions of the cubes in the build, whether or not you list them in the script. If a cube materialized view with a particular dimension is fresh, then that dimension is not reloaded. You can list a cube once in the script.
                                       </p>
                                       <p><code class="codeph">FALSE</code> includes only dimensions specifically listed in the script.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2791" headers="d202489e2663 ">
                                       <p><code class="codeph">scheduler_job</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2791 d202489e2666 ">
                                       <p>Any text identifier for the job, which will appear in the log table. The string does not need to be unique.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2799" headers="d202489e2663 ">
                                       <p><code class="codeph">master_build_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2799 d202489e2666 ">
                                       <p>A unique name for the build.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2807" headers="d202489e2663 ">
                                       <p><code class="codeph">nested</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2807 d202489e2666 ">
                                       <p><code class="codeph">TRUE</code> performs nested refresh operations for the specified set of cube materialized views. Nested refresh operations refresh all the depending materialized views and the specified set of materialized views based on a dependency order to ensure the nested materialized views are truly fresh with respect to the underlying base tables.
                                       </p>
                                       <p>All objects must reside in a single analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e2819" headers="d202489e2663 ">
                                       <p><code class="codeph">job_class</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e2819 d202489e2666 ">
                                       <p>The class this job is associated with.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDJBHEH">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-5AAEB0EA-B562-4F41-92CA-081DF5194008">SCRIPT Parameter</p>
                        <p>The <code class="codeph">SCRIPT</code> parameter identifies the objects to include in the build, and specifies the type of processing to perform on each one. The parameter has this syntax:
                        </p><pre class="oac_no_warn" dir="ltr">[VALIDATE | NO COMMIT] objects [ USING ( commands ) ][,...]
</pre><p><span class="italic">Where</span>:
                        </p>
                        <p><code class="codeph">VALIDATE</code> checks all steps of the build and sends the planned steps to <code class="codeph">CUBE_BUILD_LOG</code> without executing the steps. You can view all generated SQL in the <code class="codeph">OUTPUT</code> column of the log table.
                        </p>
                        <p><code class="codeph">NO COMMIT</code> builds the objects in the current attach mode (or Read Only when the analytic workspace is not attached) but does not commit the changes. This option supports what-if analysis, since it enables you to change data values temporarily. See <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEBDIIH">SCRIPT Parameter: USING Clause: SET command</a>"</span>.
                        </p>
                        <p><code class="codeph">objects</code> is the qualified name of one or more cubes or dimensions, separated by commas, in the form <span class="italic"><code class="codeph">[aw_name.]object</code></span>, such as <code class="codeph">UNITS_CUBE</code> or <code class="codeph">GLOBAL.UNITS_CUBE</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-D26DE92B-60D7-4985-9263-FC7F8BC412E4">SCRIPT Parameter: USING Clause</p>
                        <p>The <code class="codeph">USING</code> clause specifies the processing options. It consists of one or more commands separated by commas. 
                        </p>
                        <div class="infoboxnote" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-315529B9-32F3-4456-8611-AC2BC14C1674">
                           <p class="notep1">Note:</p>
                           <p>A cube with a rewrite materialized view cannot have a <code class="codeph">USING</code> clause, except for the <code class="codeph">ANALYZE</code> command. It uses the default build options.
                           </p>
                        </div>
                        <p>The <code class="codeph">commands</code> can be any of the following. 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">AGGREGATE USING [MEASURE]</code></p>
                              <p>Generates aggregate values using the syntax described in <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDBFHEG">SCRIPT Parameter: USING Clause: AGGREGATE command</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ANALYZE</code></p>
                              <p>Runs <code class="codeph">DBMS_AW_STATS.ANALYZE</code>, which generates and stores optimizer statistics for cubes and dimensions. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLEAR [VALUES | LEAVES | AGGREGATES] [SERIAL | PARALLEL]</code></p>
                              <p>Prepares the cube for a data refresh. It can also be used on dimensions, but <code class="codeph">CLEAR</code> removes all dimension keys, and thus deletes all data values for cubes that use the dimension.
                              </p>
                              <p>These optional arguments control the refresh method. If you omit the argument, then the behavior of <code class="codeph">CLEAR</code> depends on the refresh method. The <code class="codeph">'C'</code> (complete) refresh method runs <code class="codeph">CLEAR VALUES</code>, and all other refresh methods run <code class="codeph">CLEAR LEAVES</code>.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">VALUES</code>: Clears all data in the cube. All facts must be reloaded and all aggregates must be recomputed. This option supports the <code class="codeph">COMPLETE</code> refresh method. (Default for the <code class="codeph">C</code> and <code class="codeph">F</code> methods)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LEAVES</code>: Clears the detail data and retains the aggregates. All facts must be reloaded, and the aggregates for any new or changed facts must be computed. This option supports the <code class="codeph">FAST</code> refresh method. (Default for the <code class="codeph">?</code> method)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">AGGREGATES</code>: Retains the detail data and clears the aggregates. All aggregates must be recomputed.
                                    </p>
                                 </li>
                              </ul>
                              <p>These optional arguments control the load method, and can be combined with any of the refresh options:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code>: Each partition is cleared separately. (Default)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code>: All partitions are cleared together.
                                    </p>
                                 </li>
                              </ul>
                              <p>If you omit the <code class="codeph">CLEAR</code> command, <code class="codeph">DBMS_CUBE</code> loads new and updated facts, but does not delete any old detail data. This is equivalent to a <code class="codeph">LOAD NO SYNC</code> for dimensions.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPILE [SORT | NO SORT | SORT ONLY]</code></p>
                              <p>Creates the supporting structures for the dimension. (Dimensions only)</p>
                              <p>These options control the use of a sort order attribute:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">SORT</code>: The user-defined sort order attribute populates the sort column in the embedded-total (ET) view. (Default)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">NO SORT</code>: Any sort order attribute is ignored. This option is for very large dimensions where sorting could consume too many resources.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SORT ONLY</code>: The compile step only runs the sort.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">EXECUTE PLSQL string</code></p>
                              <p>Executes a PL/SQL command or script in the database.</p>
                           </li>
                           <li>
                              <p><code class="codeph">EXECUTE OLAP DML string [PARALLEL | SERIAL]</code></p>
                              <p>Executes an OLAP DML command or program in the analytic workspace. The options control execution of the command or program:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code>: Execute the command or program once for each partition. This option can be used to provide a performance boost to complex DML operations, such as forecasts and models.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code>: Execute the command or program once for the entire cube. (Default)
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">[INSERT | MERGE] INTO [ALL HIERARCHIES | HIERARCHIES </code>(<span class="italic"><code class="codeph">dimension.hierarchy</code></span>)]<code class="codeph"> VALUES </code>(<span class="italic"><code class="codeph">dim_key, parent, level_name</code></span>)
                              </p>
                              <p>Adds a dimension member to one or more hierarchies. <code class="codeph">INSERT</code> throws an error if the member already exists, while <code class="codeph">MERGE</code> does not. See <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">Dimension Maintenance Example</a>"</span>.
                              </p>
                              <p><span class="italic"><code class="codeph">dimension.hierarchy</code></span>: The name of a hierarchy the new member belongs to. Enclose each part of the name in double quotes, for example, <code class="codeph">"PRODUCT"."PRIMARY"</code>.
                              </p>
                              <p><span class="italic"><code class="codeph">dim_key</code></span>: The <code class="codeph">DIM_KEY</code> value of the dimension member. 
                              </p>
                              <p><span class="italic"><code class="codeph">parent</code></span>: The parent of the dimension key.
                              </p>
                              <p><span class="italic"><code class="codeph">level_name</code></span>: The level of the dimension key.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UPDATE [ALL HIERARCHIES | HIERARCHIES (</code><span class="italic"><code class="codeph">dimension.hierarchy</code></span><code class="codeph">)] SET PARENT = </code><span class="italic"><code class="codeph">parent</code></span><code class="codeph">, LEVEL=</code><span class="italic"><code class="codeph">level_name</code></span><code class="codeph"> WHERE MEMBER = </code><span class="italic"><code class="codeph">dim_key</code></span></p>
                              <p>Alters the level or parent of an existing dimension member. See <code class="codeph">INSERT</code> for a description of the options. Also see <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">Dimension Maintenance Example</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DELETE FROM DIMENSION WHERE MEMBER=</code><span class="italic"><code class="codeph">dim_key</code></span></p>
                              <p>Deletes a dimension member. See <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">Dimension Maintenance Example</a>"</span>.
                              </p>
                              <p><span class="italic"><code class="codeph">dim_key</code></span>: The <code class="codeph">DIM_KEY</code> value of the dimension member to be deleted. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SET </code><span class="italic"><code class="codeph">dimension.attribute[qdr]</code></span><code class="codeph"> = CAST('</code><span class="italic"><code class="codeph">attribute_value</code></span><code class="codeph">' AS VARCHAR2))</code></p>
                              <p>Sets the value of an attribute for a dimension member. See <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">Dimension Maintenance Example</a>"</span>.
                              </p>
                              <p><span class="italic"><code class="codeph">dimension.attribute</code></span>: The name of the attribute. Enclose each part of the name in double quotes, for example, <code class="codeph">"PRODUCT"."LONG_DESCRIPTION"</code>.
                              </p>
                              <p><span class="italic"><code class="codeph">qdr</code></span>: The dimension member being given an attribute value in the form of a qualified data reference, such as <code class="codeph">"PRODUCT"='OPT MOUSE'</code>.
                              </p>
                              <p><span class="italic"><code class="codeph">attribute_value</code></span>: The value of the attribute, such as 'Optical Mouse'.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FOR </code><span class="italic"><code class="codeph">dimension_clause measure_clause </code></span><code class="codeph">BUILD (</code><span class="italic"><code class="codeph">commands</code></span><code class="codeph">)</code></p>
                              <p>Restricts the build to particular measures and dimension values, using the following arguments. See <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAECGBDG">FOR Clause Example</a>"</span>.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="italic"><code class="codeph">dimension_clause</code></span>:
                                    </p>
                                    <p><span class="italic"><code class="codeph">dimension</code></span><code class="codeph"> ALL | NONE | WHERE</code><span class="italic"><code class="codeph"> condition</code></span> <code class="codeph">| LEVELS (</code><span class="italic"><code class="codeph">level </code></span><code class="codeph">[,</code><span class="italic"><code class="codeph"> level</code></span><code class="codeph">...])</code></p>
                                    <p><span class="italic"><code class="codeph">dimension</code></span> is the name of a dimension of the cube.
                                    </p>
                                    <p><code class="codeph">ALL</code> sets the dimension status to all members before executing the list of commands.
                                    </p>
                                    <p><code class="codeph">NONE</code> loads values for no dimension members.
                                    </p>
                                    <p><code class="codeph">WHERE</code> loads values for those dimension members that match the condition.
                                    </p>
                                    <p><code class="codeph">LEVELS</code> loads values for dimension members in the named levels.
                                    </p>
                                    <p><span class="italic"><code class="codeph">level</code></span> is a level of the named dimension.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">measure_clause</code></span>:
                                    </p>
                                    <p><code class="codeph">MEASURES (</code><span class="italic"><code class="codeph">measure</code></span> [, <span class="italic"><code class="codeph">measure</code></span><code class="codeph">...])</code></p>
                                    <p><span class="italic"><code class="codeph">measure</code></span> is the name of a measure in the cube.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">commands</code></span>: Any of the other <code class="codeph">USING</code> commands.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">LOAD [SYNCH | NO SYNCH | RETAIN] [PRUNE | PARALLEL | SERIAL] [WHERE </code><span class="italic"><code class="codeph">condition]</code></span></p>
                              <p>Loads data into the dimension or cube. </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">WHERE</code> limits the load to those values in the mapped relational table that match <span class="italic"><code class="codeph">condition</code></span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">condition</code></span> is a valid predicate based on the columns of the mapped table. See the <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEIBIEJ">Examples</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                              <p>These optional arguments apply only to dimensions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">SYNCH</code> matches the dimension keys to the relational data source. (Default)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">NO SYNCH</code> loads new dimension keys but does not delete old keys.
                                    </p>
                                    <p>If the parent of a dimension key has changed in the relational data source, this option allows the load to change the parent/child relation in the analytic workspace.</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">RETAIN</code> loads new dimension keys but does not delete old keys.
                                    </p>
                                    <p>This option does not allow the parent of a dimension key to change. If the parent has changed, the load rejects the record. The rejection generates an error in the rejected records log, if the log is enabled.</p>
                                 </li>
                              </ul>
                              <p>These optional arguments apply only to cubes:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">PRUNE</code>: Runs a full table scan on the fact table to determine which partitions to load. For example, if a cube is partitioned by month and the fact table has values only for the last two months, then jobs are only started to load the partitions for the last two months.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PARALLEL</code>: Each partition is loaded separately. (Default)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code>: All partitions are loaded in one <code class="codeph">SELECT</code> statement.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">MODEL model_name [PARALLEL | SERIAL]</code></p>
                              <p>Executes a model previously created for the cube. It accepts these arguments:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code>: The model runs separately on each partition.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code>: The model runs on all cubes at the same time. (Default)
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">SET</code></p>
                              <p>Supports write-back to the cube using the syntax described in <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEBDIIH">SCRIPT Parameter: USING Clause: SET command</a>"</span>. (Cubes only)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SOLVE [PARALLEL | SERIAL]</code></p>
                              <p>Aggregates the cube using the rules defined for the cube, including the aggregation operator and the precompute specifications. (Cubes only)</p>
                              <p>It accepts these arguments:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">PARALLEL</code>: Each partition is solved separately. (Default)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SERIAL</code>: All partitions are solved at the same time. 
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CHDBFHEG">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-06383871-04D7-45E1-8237-6E2032DBE5E5">SCRIPT Parameter: USING Clause: AGGREGATE command</p>
                        <p>The <code class="codeph">AGGREGATE</code> command in a script specifies the aggregation rules for one or more measures.
                        </p>
                        <div class="infoboxnote" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-ABD5B224-558C-4210-952A-7247C78B1A87">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">AGGREGATE</code> command is available only for uncompressed cubes. 
                           </p>
                        </div>
                        <p><code class="codeph">AGGREGATE</code> has the following syntax:
                        </p><pre class="oac_no_warn" dir="ltr">{ AGGREGATE USING MEASURE
     WHEN measure1 THEN operator1
     WHEN measure2 THEN operator2...
          ELSE default_operator
|
 [AGGREGATE USING] operator_clause }
processing_options
OVER { ALL | dimension | dimension HIERARCHIES (hierarchy)}</pre><p>USING MEASURE Clause</p>
                        <p>This clause enables you to specify different aggregation operators for different measures in the cube.</p>
                        <p>Operator Clause</p>
                        <p><a id="d202489e3439" class="indexterm-anchor"></a><a id="d202489e3441" class="indexterm-anchor"></a>The <code class="codeph">operator_clause</code> has this syntax:
                        </p><pre class="oac_no_warn" dir="ltr">operator(WEIGHTBY expression | SCALEBY expression)
</pre><p><code class="codeph">WEIGHTBY</code> multiplies each data value by an expression before aggregation.
                        </p>
                        <p><code class="codeph">SCALEBY</code> adds the value of an expression to each data value before aggregation.
                        </p>
                        <div class="tblformal" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-4C7129E4-2F3C-419D-A7DE-EE68C755C626">
                           <p class="titleintable">Table 41-3 Aggregation Operators</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Aggregation Operators" summary="OLAP aggregation operators" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d202489e3469">Operator</th>
                                    <th align="left" valign="bottom" width="18%" id="d202489e3472">Option</th>
                                    <th align="left" valign="bottom" width="60%" id="d202489e3475">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3480" headers="d202489e3469 ">
                                       <p><code class="codeph">AVG</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3480 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3480 d202489e3475 ">
                                       <p>Adds data values, then divides the sum by the number of data values that were added together.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3492" headers="d202489e3469 ">
                                       <p><code class="codeph">FIRST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3492 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3492 d202489e3475 ">
                                       <p>The first real data value.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3504" headers="d202489e3469 ">
                                       <p><code class="codeph">HIER_AVG</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3504 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3504 d202489e3475 ">
                                       <p>Adds data values, then divides the sum by the number of the children in the dimension hierarchy. Unlike AVERAGE, which counts only non-NA children, HAVERAGE counts all of the logical children of a parent, regardless of whether each child does or does not have a value.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3516" headers="d202489e3469 ">
                                       <p><code class="codeph">HIER_FIRST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3516 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3516 d202489e3475 ">
                                       <p>The first data value in the hierarchy, even when that value is NA.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3528" headers="d202489e3469 ">
                                       <p><code class="codeph">HIER_LAST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3528 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3528 d202489e3475 ">
                                       <p>The last data value in the hierarchy, even when that value is NA.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3540" headers="d202489e3469 ">
                                       <p><code class="codeph">LAST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3540 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3540 d202489e3475 ">
                                       <p>The last real data value.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3552" headers="d202489e3469 ">
                                       <p><code class="codeph">MAX</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3552 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3552 d202489e3475 ">
                                       <p>The largest data value among the children of each parent. </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3564" headers="d202489e3469 ">
                                       <p><code class="codeph">MIN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3564 d202489e3472 ">
                                       <p><code class="codeph">WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3564 d202489e3475 ">
                                       <p>The smallest data value among the children of each parent. </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3576" headers="d202489e3469 ">
                                       <p><code class="codeph">NO AGGREGATION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3576 d202489e3472 ">
                                       <p>No option</p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3576 d202489e3475 ">
                                       <p>Do not aggregate the values of the dimension or dimensions. Leave all aggregated values as NA. </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d202489e3587" headers="d202489e3469 ">
                                       <p><code class="codeph">SUM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d202489e3587 d202489e3472 ">
                                       <p><code class="codeph">SCALEBY | WEIGHTBY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d202489e3587 d202489e3475 ">
                                       <p>Adds data values. (Default)</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Processing Options</p>
                        <p>You can specify these processing options for aggregation:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">(ALLOW | DISALLOW) OVERFLOW</code></p>
                              <p>Specifies whether to allow decimal overflow, which occurs when the result of a calculation is very large and can no longer be represented by the exponent portion of the numerical representation. </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ALLOW</code>: A calculation that generates overflow executes without error and produces null results. (Default) 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISALLOW</code>: A calculation involving overflow stops executing and generates an error message. 
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">(ALLOW | DISALLOW) DIVISION BY ZERO</code></p>
                              <p>Specifies whether to allow division by zero.</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ALLOW</code>: A calculation involving division by zero executes without error but returns a null value. (Default)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISALLOW</code>: A calculation involving division by zero stops executing and generates an error message.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">(CONSIDER | IGNORE) NULLS</code></p>
                              <p>Specifies whether nulls are included in the calculations. </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">CONSIDER</code>: Nulls are included in the calculations. A calculation that includes a null value returns a null value.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IGNORE</code>: Only actual data values are used in calculations. Nulls are treated as if they do not exist. (Default)
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">MAINTAIN COUNT</code></p>
                              <p>Stores an up-to-date count of the number of dimension members for use in calculating averages. Omit this option to count the members on the fly.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEBDIIH">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-4DDBFD85-EFB1-4082-8565-70A703A6AC49">SCRIPT Parameter: USING Clause: SET command</p>
                        <p>The <code class="codeph">SET</code> command in a script assigns values to one or more cells in a stored measure. It has this syntax:
                        </p><pre class="oac_no_warn" dir="ltr">SET <span class="italic">target</span> = <span class="italic">expression</span>
</pre><p><span class="italic">Where:</span> 
                        </p>
                        <p><span class="italic"><code class="codeph">target</code></span> is a a measure or a qualified data reference. 
                        </p>
                        <p><span class="italic"><code class="codeph">expression</code></span> returns values of the appropriate datatype for <span class="italic"><code class="codeph">target</code></span>. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-40A8E168-850C-44FA-8F8F-0DB015AAF42D">Qualified Data References</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Qualified data references (QDRs) limit a dimensional object to a single member in one or more dimensions for the duration of a query. </p>
                        <p>A QDR has the following syntax: </p><pre class="oac_no_warn" dir="ltr">expression <span class="bold">[</span> { dimension = member }[ , { dimension = member } ...] <span class="bold">]</span>
</pre><p><span class="italic">Where:</span></p>
                        <p><span class="italic"><code class="codeph">expression</code></span> is a dimensional expression, typically the name of a measure.
                        </p>
                        <p><span class="italic"><code class="codeph">dimension</code></span> is a primary dimension of expression.
                        </p>
                        <p><span class="italic"><code class="codeph">member</code></span> is a value of dimension.
                        </p>
                        <p>The outside square brackets shown in bold are literal syntax elements; they do not indicate an optional argument. The inside square brackets shown in regular text delimit an optional argument and are not syntax elements.</p>
                        <p>This example returns Sales values for calendar year 2007:</p><pre class="oac_no_warn" dir="ltr">global.sales[global.time = 'CY2007'
]</pre><p>The next example returns Sales values only for the United States in calendar year 2007:</p><pre class="oac_no_warn" dir="ltr">sales[customer = 'US', time = 'CY2007'
]</pre><p>See the Examples for qualified data references in SET commands.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-F1637D70-8CC2-47FD-9668-DA84E8964924">Usage Notes</p>
                        <p>Build Methods</p>
                        <p>The <code class="codeph">C</code>, <code class="codeph">S</code>, and <code class="codeph">?</code> methods always succeed and can be used on any cube.
                        </p>
                        <p>The <code class="codeph">F</code> and <code class="codeph">P</code> methods require that the cube have a materialized view that was created as a fast or a rewrite materialized view.
                        </p>
                        <p>Parallelism</p>
                        <p>Partitioned cubes can be loaded and aggregated in parallel processes. For example, a cube with five partitions can use up to five processes. Dimensions are always loaded serially.</p>
                        <p>The number of parallel processes actually allocated by a build is controlled by the smallest of these factors:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Number of cubes in the build and the number of partitions in each cube.</p>
                           </li>
                           <li>
                              <p>Setting of the <code class="codeph">PARALLELISM</code> argument of the <code class="codeph">BUILD</code> procedure.
                              </p>
                           </li>
                           <li>
                              <p>Setting of the <code class="codeph">JOB_QUEUE_PROCESSES</code> database initialization parameter.
                              </p>
                           </li>
                        </ul>
                        <p>Suppose <code class="codeph">UNITS_CUBE</code> has 12 partitions, <code class="codeph">PARALLELISM</code> is set to 10, and <code class="codeph">JOB_QUEUE_PROCESSES</code> is set to 4. OLAP uses four processes, which appear as slave processes in the build log.
                        </p>
                        <p>The SQL engine may allocate additional processes when the PARALLEL_DEGREE_POLICY database initialization parameter is set to AUTO or LIMITED. For example, if OLAP allocates four processes, the SQL engine might determine that two of those processes should be done by four processes instead, for a total of six processes.</p>
                        <p>Build Logs</p>
                        <p>OLAP generates three logs that provide diagnostic information about builds:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Cube build log</p>
                           </li>
                           <li>
                              <p>Rejected records log</p>
                           </li>
                           <li>
                              <p>Cube dimension compile log</p>
                           </li>
                        </ul>
                        <p>Analytic Workspace Manager creates these logs automatically as tables in the same schema as the analytic workspace. If you do not use Analytic Workspace Manager, you can create and manage the logs in PL/SQL using the <code class="codeph">DBMS_CUBE_LOG</code> package.
                        </p>
                        <p>You can also create the cube log file by running <code class="codeph">$ORACLE_HOME/olap/admin/utlolaplog.sql</code>. This script creates three additional views:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d202489e3831" class="indexterm-anchor"></a><code class="codeph">CUBE_BUILD_LATEST</code>: Returns rows only from the last build.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CUBE_BUILD_REPORT</code>: Returns one row for each command with elapsed times.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CUBE_BUILD_REPORT_LATEST</code>: Returns a report like <code class="codeph">CUBE_BUILD_REPORT</code> only from the last build.
                              </p>
                           </li>
                        </ul>
                        <p>This report shows a successfully completed build of the objects in the <code class="codeph">GLOBAL</code> analytic workspace, which has four dimensions and two cubes.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT command, status, build_object, build_object_type type 
     FROM cube_build_report_latest;
 
COMMAND                   STATUS     BUILD_OBJECT                   TYPE
------------------------- ---------- ------------------------------ ----------
BUILD                     COMPLETED                                 BUILD
FREEZE                    COMPLETED                                 BUILD
LOAD NO SYNCH             COMPLETED  CHANNEL                        DIMENSION
COMPILE                   COMPLETED  CHANNEL                        DIMENSION
UPDATE/COMMIT             COMPLETED  CHANNEL                        DIMENSION
LOAD NO SYNCH             COMPLETED  CUSTOMER                       DIMENSION
COMPILE                   COMPLETED  CUSTOMER                       DIMENSION
UPDATE/COMMIT             COMPLETED  CUSTOMER                       DIMENSION
LOAD NO SYNCH             COMPLETED  PRODUCT                        DIMENSION
COMPILE                   COMPLETED  PRODUCT                        DIMENSION
UPDATE/COMMIT             COMPLETED  PRODUCT                        DIMENSION
LOAD NO SYNCH             COMPLETED  TIME                           DIMENSION
COMPILE                   COMPLETED  TIME                           DIMENSION
UPDATE/COMMIT             COMPLETED  TIME                           DIMENSION
COMPILE AGGMAP            COMPLETED  PRICE_CUBE                     CUBE
UPDATE/COMMIT             COMPLETED  PRICE_CUBE                     CUBE
COMPILE AGGMAP            COMPLETED  UNITS_CUBE                     CUBE
UPDATE/COMMIT             COMPLETED  UNITS_CUBE                     CUBE
DBMS_SCHEDULER.CREATE_JOB COMPLETED  PRICE_CUBE                     CUBE
DBMS_SCHEDULER.CREATE_JOB COMPLETED  UNITS_CUBE                     CUBE
BUILD                     COMPLETED                                 BUILD
LOAD                      COMPLETED  PRICE_CUBE                     CUBE
SOLVE                     COMPLETED  PRICE_CUBE                     CUBE
UPDATE/COMMIT             COMPLETED  PRICE_CUBE                     CUBE
BUILD                     COMPLETED                                 BUILD
LOAD                      COMPLETED  UNITS_CUBE                     CUBE
SOLVE                     COMPLETED  UNITS_CUBE                     CUBE
UPDATE/COMMIT             COMPLETED  UNITS_CUBE                     CUBE
ANALYZE                   COMPLETED  PRICE_CUBE                     CUBE
ANALYZE                   COMPLETED  UNITS_CUBE                     CUBE
THAW                      COMPLETED                                 BUILD
 
31 rows selected.</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEIBIEJ">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-522FD216-5E46-414B-8C8C-D0BE01082A21">Examples</p>
                        <p>This example uses the default parameters to build <code class="codeph">UNITS_CUBE</code>.
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_CUBE.BUILD('GLOBAL.UNITS_CUBE');
</pre><p>The next example builds <code class="codeph">UNITS_CUBE</code> and explicitly builds two of its dimensions, <code class="codeph">TIME</code> and <code class="codeph">CHANNEL</code>. The dimensions use the complete (<code class="codeph">C</code>) method, and the cube uses the fast solve (<code class="codeph">S</code>) method.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_CUBE.BUILD(
    script=&gt;'GLOBAL."TIME", GLOBAL.CHANNEL, GLOBAL.UNITS_CUBE',
    method=&gt;'CCS',
    parallelism=&gt;2);
END;
/
</pre><p>The following example loads only the selection of data identified by the <code class="codeph">WHERE</code> clause:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_CUBE.BUILD(q'!
  GLOBAL."TIME", 
  GLOBAL.CHANNEL, 
  GLOBAL.CUSTOMER, 
  GLOBAL.PRODUCT, 
  GLOBAL.UNITS_CUBE USING (LOAD NO SYNCH 
     WHERE UNITS_FACT.MONTH_ID LIKE '2006%' 
     AND UNITS_FACT.SALES &gt; 5000)!');
END;
/</pre><p id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAECGBDG">FOR Clause Example</p>
                        <p>In this example, the Time dimension is partitioned by calendar year, and <code class="codeph">DBMS_CUBE</code> builds only the partition identified by <code class="codeph">CY2006</code>. The <code class="codeph">HIER_ANCESTOR</code> is an analytic function in the OLAP expression syntax.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
   dbms_cube.build(q'!
   UNITS_CUBE USING
   (
   FOR "TIME" 
     WHERE HIER_ANCESTOR(WITHIN "TIME".CALENDAR LEVEL "TIME".CALENDAR_YEAR) = 'CY2006'
     BUILD (LOAD, SOLVE)
   )!', 
   parallelism=&gt;1);
END;
/</pre><p>The next example uses a <code class="codeph">FOR</code> clause to limit the build to the <code class="codeph">SALES</code> measure in 2006. All objects are built using the complete (<code class="codeph">C</code>) method.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_CUBE.BUILD(
  script =&gt; '
  GLOBAL."TIME", 
  GLOBAL.CHANNEL, 
  GLOBAL.CUSTOMER, 
  GLOBAL.PRODUCT, 
  GLOBAL.UNITS_CUBE USING 
  (
    FOR MEASURES(GLOBAL.UNITS_CUBE.SALES)
      BUILD(LOAD NO SYNCH WHERE GLOBAL.UNITS_FACT.MONTH_ID LIKE ''2006%'')
   )',
  method =&gt; 'C',
  parallelism =&gt; 2);
END;
/</pre><p>Write-Back Examples</p>
                        <p>The following examples show various use of the <code class="codeph">SET</code> command in a <code class="codeph">USING</code> clause.
                        </p>
                        <p>This example sets Sales Target to Sales increased by 5%:</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD('UNITS_CUBE USING(
   SET UNITS_CUBE.SALES_TARGET = UNITS_CUBE.SALES * 1.05, SOLVE)');
 </pre><p>This example sets the price of the Deluxe Mouse in May 2007 to $29.99:</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD('PRICE_CUBE USING(
  SET PRICE_CUBE.UNIT_PRICE["TIME"=''2007.05'', "PRODUCT"=''DLX MOUSE''] 
  = 29.99, SOLVE)');
</pre><p>The next example contains two SET commands, but does not reaggregate the cube:</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.BUILD('PRICE_CUBE USING(
   SET PRICE_CUBE.UNIT_PRICE["TIME"=''2006.12'', "PRODUCT"=''DLX MOUSE'']
   = 29.49, 
   SET PRICE_CUBE.UNIT_PRICE["TIME"=''2007.05'', "PRODUCT"=''DLX MOUSE'']
   = 29.99)'); </pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CAEJJACB">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-A92AB9B8-8371-4439-BE03-594858BC96E4">Dimension Maintenance Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This script shows dimension maintenance. It adds a new dimension member named <code class="codeph">OPT MOUSE</code> to all hierarchies, alters its position in the Primary hierarchy, assigns it a long description, then deletes it from the dimension.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
dbms_output.put_line('Add optical mouse');
dbms_cube.build(q'!
   "PRODUCT" using (MERGE INTO ALL HIERARCHIES 
   VALUES ('ITEM_OPT MOUSE', 'CLASS_SFT', "PRODUCT"."FAMILY"))
!');
 
dbms_output.put_line('Alter optical mouse');
dbms_cube.build(q'!
   "PRODUCT" using (UPDATE HIERARCHIES ("PRODUCT"."PRIMARY") 
   SET PARENT = 'FAMILY_ACC', LEVEL = "PRODUCT"."ITEM"
   WHERE MEMBER = 'ITEM_OPT MOUSE')
!');
 
dbms_output.put_line('Provide attributes to optical mouse');
dbms_cube.build(q'!
   "PRODUCT" USING (SET "PRODUCT"."LONG_DESCRIPTION"["PRODUCT" = 'ITEM_OPT MOUSE']
    = CAST('Optical Mouse' AS VARCHAR2))
!');

dbms_output.put_line('Delete optical mouse');
dbms_cube.build(q'!
   "PRODUCT" USING (DELETE FROM DIMENSION WHERE MEMBER='ITEM_OPT MOUSE')
!');
 
END;
/</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__GUID-7BD77E78-E323-42BE-8356-21B598DF2547">OLAP DML Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example uses the OLAP DML to add comments to the cube build log:</p><pre class="oac_no_warn" dir="ltr">BEGIN 
 <code class="codeph">DBMS_CUBE.BUILD</code>(q'!
  global.units_cube USING (
   EXECUTE OLAP DML 'SHOW STATLEN(units_cube_prt_list)' PARALLEL,
   EXECUTE OLAP DML 'SHOW LIMIT(units_cube_prt_list KEEP ALL)' PARALLEL,
   EXECUTE OLAP DML 'SHOW STATLEN(time)' parallel,
   EXECUTE OLAP DML 'SHOW LIMIT(time KEEP time_levelrel ''CALENDAR_YEAR'')' parallel)!', 
  parallelism=&gt;2, 
  add_dimensions=&gt;false);
END;
/
</pre><p>This query shows the comments in the cube build log:</p><pre class="oac_no_warn" dir="ltr">SELECT partition, slave_number, TO_CHAR(output) output
   FROM cube_build_log
   WHERE command = 'OLAP DML'
   AND status = 'COMPLETED'
   ORDER BY slave_number, time;

PARTITION    SLAVE_NUMBER OUTPUT
------------ ------------ -------------------------------------------------------
P10:CY2007              1 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(statlen(units_cube_prt_list))"
                            Value="1"/&gt;
 
P10:CY2007              1 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(limit(units_cube_prt_list keep al
                          l))"
                            Value="P10"/&gt;
 
P10:CY2007              1 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(statlen(time))"
                            Value="17"/&gt;
 
P10:CY2007              1 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(limit(time keep time_levelrel &amp;ap
                          os;CALENDAR_YEAR&amp;apos;))"
                            Value="CALENDAR_YEAR_CY2007"/&gt;
 
P9:CY2006               2 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(statlen(units_cube_prt_list))"
                            Value="1"/&gt;
 
P9:CY2006               2 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(limit(units_cube_prt_list keep al
                          l))"
                            Value="P9"/&gt;
 
P9:CY2006               2 &lt;OLAPDMLExpression
                            Expression="TO_CHAR(statlen(time))"
                            Value="17"/&gt;
               .
               .
               .</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73609"></a><a id="ARPLS73610"></a><a id="ARPLS73610"></a><a id="ARPLS73609"></a><div class="props_rev_3"><a id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19" name="GUID-3A117D72-2F22-4192-A6EF-49057200CA19"></a><h4 id="ARPLS-GUID-3A117D72-2F22-4192-A6EF-49057200CA19" class="sect4"><span class="enumeration_section">41.4.2 </span>CREATE_EXPORT_OPTIONS Procedure
                  </h4>
                  <div>
                     <p>This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-05674E2C-D6A2-4EE6-97F6-FECE00AF0726">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.CREATE_EXPORT_OPTIONS (
          out_options_xml        IN/OUT  CLOB,
          target_version         IN      VARCHAR2  DEFAULT NULL,
          suppress_owner         IN      BOOLEAN   DEFAULT FALSE,
          suppress_namespace     IN      BOOLEAN   DEFAULT FALSE,
          preserve_table_owners  IN      BOOLEAN   DEFAULT FALSE,
          metadata_changes       IN      CLOB      DEFAULT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-22BBF340-F93C-448A-B9E8-217E2D4F72AE">Parameters</p>
                        <div class="tblformal" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-ADF759ED-C7A3-4CB0-967A-CAAF8FE00281">
                           <p class="titleintable">Table 41-4 CREATE_EXPORT_OPTIONS Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_EXPORT_OPTIONS Procedure Parameters" summary="DBMS_CUBE.CREATE_EXPORT_OPTIONS parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4077">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4080">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4085" headers="d202489e4077 ">
                                       <p><code class="codeph">out_options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4085 d202489e4080 ">
                                       <p>Contains the generated XML document, which can be passed into the <code class="codeph">options_xml</code> parameter of the <a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="This procedure writes OLAP metadata to a CLOB.">EXPORT_XML Procedure</a>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4103" headers="d202489e4077 ">
                                       <p><code class="codeph">target_version</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4103 d202489e4080 ">
                                       <p>Specifies the version of Oracle Database in which the XML document generated by EXPORT_XML or EXPORT_XML_TO_FILE will be imported. You can specify two to five digits, such as 12.1 or 12.1.0.1.0. This parameter defaults to the current database version, and so can typically be omitted.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4111" headers="d202489e4077 ">
                                       <p><code class="codeph">suppress_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4111 d202489e4080 ">
                                       <p>Controls the use of the Owner attribute in XML elements and the owner qualifier in object names. Enter <code class="codeph">True</code> to drop the owner from the XML, or enter <code class="codeph">False</code> to retain it. Enter <code class="codeph">True</code> if you plan to import the exported metadata into a different schema.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4128" headers="d202489e4077 ">
                                       <p><code class="codeph">suppress_namespace</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4128 d202489e4080 ">
                                       <p>Controls the use of Namespace attributes in XML elements and the namespace qualifier in object names. Enter <code class="codeph">True</code> to drop the namespace from the XML, or enter <code class="codeph">False</code> to retain it (default). Enter <code class="codeph">True</code> when upgrading to Oracle OLAP 12<span class="italic">c</span> metadata.
                                       </p>
                                       <p>Namespaces allow objects created in Oracle 10<span class="italic">g</span> to coexist with objects created in Oracle 12<span class="italic">c</span>. You cannot set or change namespaces.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4156" headers="d202489e4077 ">
                                       <p><code class="codeph">preserve_table_owners</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4156 d202489e4080 ">
                                       <p>Controls the use of the owner in qualifying table names in the mapping elements, such as GLOBAL.UNITS_HISTORY_FACT instead of UNITS_HISTORY_FACT. Enter <code class="codeph">True</code> to retain the table owner, or enter <code class="codeph">False</code> to default to the current schema for table mappings. If you plan to import the exported metadata to a different schema, you must set this option to <code class="codeph">True</code> to load data from tables and views in the original schema, unless the destination schema has its own copies of the tables and views.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4173" headers="d202489e4077 ">
                                       <p><code class="codeph">metadata_changes</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4173 d202489e4080 ">
                                       <p>Contains an 12<span class="italic">c</span> XML description of an object that overwrites the exported object description. The XML document must contain all parent XML elements of the modified element with the attributes needed to uniquely identify them. Use the Name attribute if it exists. See the Examples.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A117D72-2F22-4192-A6EF-49057200CA19__GUID-82470FEB-E5E7-48B2-9932-D7104118C6FE">Examples</p>
                        <p>The following example generates an XML document of export options:</p><pre class="oac_no_warn" dir="ltr">DECLARE
   optionsClob  CLOB;
 
BEGIN
   dbms_lob.createtemporary(optionsClob, false, dbms_lob.CALL); 
   dbms_cube.create_export_options(out_options_xml=&gt;optionsClob, suppress_namespace=&gt;TRUE);
   dbms_output.put_line(optionsClob);
END;
/
</pre><p>The <code class="codeph">DBMS_OUTPUT.PUT_LINE</code> procedure displays this XML document (formatted for readability:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;Export TargetVersion="12.1.0.1"&gt;
  &lt;ExportOptions&gt;
    &lt;Option Name="SuppressOwner" Value="FALSE"/&gt;
    &lt;Option Name="SuppressNamespace" Value="TRUE"/&gt;
    &lt;Option Name="PreserveTableOwners" Value="FALSE"/&gt;
  &lt;/ExportOptions&gt;
&lt;/Export&gt;
</pre><p>The next example generates an XML document with a metadata change to the mapping of the American long description attribute of the <code class="codeph">CHANNEL</code> dimension.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  importClob         clob;
  exportClob         clob;
  overClob           clob;
  exportOptClob      clob;
  importOptClob      clob;
 
BEGIN
  dbms_lob.createtemporary(overClob, TRUE);
  dbms_lob.open(overClob, DBMS_LOB.LOB_READWRITE);
  dbms_lob.writeappend(overClob,58, '&lt;Metadata Version="1.3" MinimumDatabaseVersion="12.1.0.1"&gt;');
  dbms_lob.writeappend(overClob,34, '&lt;StandardDimension Name="CHANNEL"&gt;');
  dbms_lob.writeappend(overClob,75, '&lt;Description Type="Description" Language="AMERICAN" Value="Sales Channel"/&gt;');
  dbms_lob.writeappend(overClob,20, '&lt;/StandardDimension&gt;');
  dbms_lob.writeappend(overClob,11, '&lt;/Metadata&gt;');
  dbms_lob.close(overClob); 
 
  -- Enable Oracle Database 12c Release 1 (12.1) clients to access 10g metadata
  dbms_cube.initialize_cube_upgrade;
  
  -- Create a CLOB containing the export options
  dbms_lob.createtemporary(exportOptClob, TRUE);
  dbms_cube.create_export_options(out_options_xml=&gt;exportOptClob, suppress_namespace=&gt;TRUE, metadata_changes=&gt;overClob);
  
  -- Create a CLOB containing the import options
  dbms_lob.createtemporary(importOptClob, TRUE);
  dbms_cube.create_import_options(out_options_xml=&gt;importOptClob, rename_table =&gt; 'MY_OBJECT_MAP');
   
   -- Create CLOBs for the metadata
  dbms_lob.createtemporary(importClob, TRUE);
  dbms_lob.createtemporary(exportClob, TRUE);
 
  -- Export metadata from a 10g analytic workspace to a CLOB
  dbms_cube.export_xml(object_ids=&gt;'GLOBAL_AW', options_xml=&gt;exportOptClob, out_xml=&gt;exportClob); 
  
  -- Import metadata from the CLOB
  dbms_cube.import_xml(in_xml =&gt; exportClob, options_xml=&gt;importOptClob, out_xml=&gt;importClob);
 
  -- Load and aggregate the data
  dbms_cube.build(script=&gt;'UNITS_CUBE, PRICE_AND_COST_CUBE');
 
END;
/
 </pre><p>The following is the content of <code class="codeph">exportClob</code> (formatting added for readability). The XML document changes the description of Channel to Sales Channel.
                        </p><pre class="oac_no_warn" dir="ltr">&lt;Metadata Version="1.3" MinimumDatabaseVersion="12.1.0.1"&gt;
  &lt;StandardDimension Name="CHANNEL"&gt;
    &lt;Description Type="Description" Language="AMERICAN" Value="Sales Channel"/&gt;
  &lt;/StandardDimension&gt;
&lt;/Metadata&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="DBMS_CUBE.html#GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" title="This procedure writes OLAP metadata to a CLOB.">EXPORT_XML Procedure</a></li>
                           <li><a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46" title="This procedure exports OLAP metadata to a file. This file can be imported into a new or existing analytic workspace using the IMPORT_XML procedure. In this way, you can create a copy of the analytic workspace in another schema or database.">EXPORT_XML_TO_FILE Procedure</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS73611"></a><a id="ARPLS73612"></a><a id="ARPLS73612"></a><a id="ARPLS73611"></a><div class="props_rev_3"><a id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" name="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976"></a><h4 id="ARPLS-GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" class="sect4"><span class="enumeration_section">41.4.3 </span>CREATE_IMPORT_OPTIONS Procedure
                  </h4>
                  <div>
                     <p>This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-97DB922C-9DF4-479D-BCCE-FAA90726E71E">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.CREATE_IMPORT_OPTIONS (
          out_options_xml  IN/OUT  CLOB,
          validate_only    IN      BOOLEAN   DEFAULT FALSE,
          rename_table     IN      VARCHAR2  DEFAULT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-EEC7143E-3031-43D3-AE62-1D44564EC92F">Parameters</p>
                        <div class="tblformal" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-AAAD0892-6623-4CB3-86BB-AE8392625AC0">
                           <p class="titleintable">Table 41-5 CREATE_IMPORT_OPTIONS Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_IMPORT_OPTIONS Procedure Parameters" summary="DBMS_CUBE.CREATE_IMPORT_OPTIONS parameteres" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4335">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4338">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4343" headers="d202489e4335 ">
                                       <p><code class="codeph">out_options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4343 d202489e4338 ">
                                       <p>Contains the generated XML document, which can be passed to the <code class="codeph">options_xml</code> parameter of the <a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="This procedure creates, modifies, or drops an analytic workspace by using an XML template.">IMPORT_XML Procedure</a>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4361" headers="d202489e4335 ">
                                       <p><code class="codeph">validate_only</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4361 d202489e4338 ">
                                       <p><code class="codeph">TRUE</code> causes the <code class="codeph">IMPORT_XML</code> procedure to validate the metadata described in the input file or the <code class="codeph">in_xml</code> parameter, without committing the changes to the metadata.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4377" headers="d202489e4335 ">
                                       <p><code class="codeph">rename_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4377 d202489e4338 ">
                                       <p>The name of a table identifying new names for the imported objects, in the form [<span class="italic"><code class="codeph">schema_name</code></span>.]<span class="italic"><code class="codeph">table_name</code></span>. The <code class="codeph">IMPORT_XML</code> procedure creates objects using the names specified in the table instead of the ones specified in the XML document. See the Usage Notes for the format of the rename table.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-861491F5-7168-48C2-8571-1DA634B93DBA">Usage Notes</p>
                        <p>See the information about using a rename table in <a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976__GUID-F4857086-5353-44B4-8776-6790068375ED">Examples</p>
                        <p>This example specifies validation only and a rename table. For an example of the import CLOB being used in an import, see <span class="q">"<a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="This procedure creates, modifies, or drops an analytic workspace by using an XML template.">IMPORT_XML Procedure</a>"</span>.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
importClob  clob;
 
BEGIN
  dbms_lob.createtemporary(importClob, TRUE);
 
  dbms_cube.create_import_options(out_options_xml =&gt; importClob, rename_table =&gt; 'MY_OBJECT_MAP', validate_only =&gt; TRUE);
  
  dbms_output.put_line(importClob);
END;
/
</pre><p>It generates the following XML document:</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;Import&gt;
  &lt;ImportOptions&gt;
    &lt;Option Name="ValidateOnly" Value="TRUE"/&gt;
    &lt;Option Name="RenameTable" Value="MY_OBJECT_MAP"/&gt;
  &lt;/ImportOptions&gt;
&lt;/Import&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="DBMS_CUBE.html#GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" title="This procedure creates, modifies, or drops an analytic workspace by using an XML template.">IMPORT_XML Procedure</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS65751"></a><a id="ARPLS65752"></a><a id="ARPLS65753"></a><a id="ARPLS65752"></a><a id="ARPLS65753"></a><a id="ARPLS65751"></a><div class="props_rev_3"><a id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" name="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3"></a><h4 id="ARPLS-GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" class="sect4"><span class="enumeration_section">41.4.4 </span>CREATE_MVIEW Function
                  </h4>
                  <div>
                     <p>This function creates a cube materialized view from the definition of a relational materialized view.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-CEDC095F-8F81-43F4-91F8-021AB55850AB">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.CREATE_MVIEW (
          mvowner        IN  VARCHAR2,
          mvname         IN  VARCHAR2,
          sam_parameters IN  CLOB  DEFAULT NULL)
     RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-08C698C1-55E5-4719-9692-AFA3035507B5">Parameters</p>
                        <div class="tblformal" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-89CE71A5-1CB3-4041-8A85-DAD99958E0D3">
                           <p class="titleintable">Table 41-6 CREATE_MVIEW Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_MVIEW Function Parameters" summary="Parameter descriptions for CREATE_MVIEW" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4559">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4562">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4567" headers="d202489e4559 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4567 d202489e4562 ">
                                       <p>Owner of the relational materialized view.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4575" headers="d202489e4559 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4575 d202489e4562 ">
                                       <p>Name of the relational materialized view. For restrictions, see <span class="q">"<a href="DBMS_CUBE.html#GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" title="SQL Aggregation Management uses an existing relational materialized view to derive all the information needed to generate a cube materialized view. The relational materialized view determines the detail level of data that is stored in the cube materialized view. The related relational dimension objects determine the scope of the aggregates, from the lowest level specified in the GROUP BY clause of the materialized view subquery, to the highest level of the dimension hierarchy.">Requirements for the Relational Materialized View</a>"</span>.
                                       </p>
                                       <p>A single cube materialized view can replace many of the relational materialized views for a table. Choose the materialized view that has the lowest levels of the dimension hierarchies that you want represented in the cube materialized view.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4593" headers="d202489e4559 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4593 d202489e4562 ">
                                       <p>Parameters in the form '<span class="italic">parameter1</span>=<span class="italic">value1</span>, <span class="italic">parameter2</span>=<span class="italic">value2</span>,...'. See <span class="q">"<a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACECDBE">SQL Aggregation Management Parameters</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACECDBE">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-552C769D-B601-4AFE-BA5C-D106DB8C7813">SQL Aggregation Management Parameters</p>
                        <p>The <code class="codeph">CREATE_MVIEW</code> and <code class="codeph">DERIVE_FROM_MVIEW</code> functions use the SQL aggregation management (SAM) parameters described in <a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACDIIJC" title="Parameter descriptions for SQL Aggregation Management.">Table 41-7</a>. Some parameters support the development of cubes with advanced analytics. Other parameters support the development of Java applications. The default settings are appropriate for cube materialized views that are direct replacements for relational materialized views. 
                        </p>
                        <div class="tblformal" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACDIIJC">
                           <p class="titleintable">Table 41-7 SQL Aggregation Management Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL Aggregation Management Parameters" summary="Parameter descriptions for SQL Aggregation Management." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e4642">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e4645">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4650" headers="d202489e4642 ">
                                       <p><code class="codeph">ADDTOPS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4650 d202489e4645 ">
                                       <p>Adds a top level and a level member to every dimension hierarchy in the cube. If the associated relational dimension has no hierarchy, then a dimension hierarchy is created.</p>
                                       <p><code class="codeph">TRUE</code>: Creates levels named <code class="codeph">ALL_</code><span class="italic"><code class="codeph">dimension</code></span> with level members <code class="codeph">All_</code><span class="italic"><code class="codeph">dimension</code></span>. (Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Creates only the hierarchies and levels identified by the relational dimensions.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4678" headers="d202489e4642 ">
                                       <p><code class="codeph">ADDUNIQUEKEYPREFIX</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4678 d202489e4645 ">
                                       <p>Controls the creation of dimension keys.</p>
                                       <p><code class="codeph">TRUE</code>: Creates cube dimension keys by concatenating the level name with the relational dimension key. This practice assures that the dimension keys are unique across all levels, such as <code class="codeph">CITY_NEW_YORK</code> and <code class="codeph">STATE_NEW_YORK</code>. (Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Uses the relational dimension keys as cube dimension keys.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4700" headers="d202489e4642 ">
                                       <p><code class="codeph">ATRMAPTYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4700 d202489e4645 ">
                                       <p>Specifies whether attributes are mapped by hierarchy levels, dimension levels, or both.</p>
                                       <p><code class="codeph">HIER_LEVEL</code>: Maps attributes to the levels of a particular dimension hierarchy. (Default)
                                       </p>
                                       <p><code class="codeph">DIM_LEVEL</code>: Maps attributes to the levels of the dimension regardless of hierarchy.
                                       </p>
                                       <p><code class="codeph">BOTH</code>: Maps attributes to both dimension and hierarchy levels.
                                       </p>
                                       <p><code class="codeph">AUTO</code>: Maps attributes to the levels of the dimension for a star schema and to the levels of a particular dimension hierarchy for a snowflake schema.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4724" headers="d202489e4642 ">
                                       <p><code class="codeph">AWNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4724 d202489e4645 ">
                                       <p>Provides the name of the analytic workspace that owns the cube. Choose a simple database object name of 1 to 30 bytes. The default name is <span class="italic"><code class="codeph">fact_tablename</code></span><code class="codeph">_AW</code><span class="italic"><code class="codeph">n</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4741" headers="d202489e4642 ">
                                       <p><code class="codeph">BUILD</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4741 d202489e4645 ">
                                       <p>Specifies whether a data refresh will immediately follow creation of the cube materialized view.</p>
                                       <p><code class="codeph">IMMEDIATE</code>: Refreshes immediately.
                                       </p>
                                       <p><code class="codeph">DEFERRED</code>: Does not perform a data refresh. (Default)
                                       </p>
                                       <p><span class="bold">Note</span>: Only the <code class="codeph">CREATE_MVIEW</code> function uses this parameter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4764" headers="d202489e4642 ">
                                       <p><code class="codeph">CUBEMVOPTION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4764 d202489e4645 ">
                                       <p>Controls validation and creation of a cube materialized view. Regardless of this setting, the function creates an analytic workspace containing a cube and its related cube dimensions.</p>
                                       <p><code class="codeph">COMPLETE_REFRESH</code>: Creates a complete refresh cube materialized view (full update).
                                       </p>
                                       <p><code class="codeph">FAST_REFRESH</code>: Creates a fast refresh materialized view (incremental update).
                                       </p>
                                       <p><code class="codeph">REWRITE_READY</code>: Runs validation checks for a rewrite cube materialized view, but does not create it.
                                       </p>
                                       <p><code class="codeph">REWRITE</code>: Creates a rewrite cube materialized view.
                                       </p>
                                       <p><code class="codeph">REWRITE_WITH_ATTRIBUTES</code>: Creates a rewrite cube materialized view that includes columns with dimension attributes, resulting in faster query response times. (Default)
                                       </p>
                                       <p><span class="bold">Note</span>: <span class="italic">The following settings do not create a cube materialized view.</span> Use Analytic Workspace Manager to drop an analytic workspace that does not have a cube materialized view. You can use the <code class="codeph">DROP_MVIEW</code> procedure to delete an analytic workspace only when it supports a cube materialized view.
                                       </p>
                                       <p><code class="codeph">NONE</code>: Does not create a cube materialized view.
                                       </p>
                                       <p><code class="codeph">COMPLETE_REFRESH_READY</code>: Runs validation checks for a complete refresh cube materialized view, but does not create it.
                                       </p>
                                       <p><code class="codeph">FAST_REFRESH_READY</code>: Runs validation checks for fast refresh, but does not create the cube materialized view.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4814" headers="d202489e4642 ">
                                       <p><code class="codeph">CUBENAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4814 d202489e4645 ">
                                       <p>Provides the name of the cube derived from the relational materialized view. Choose simple database object name of 1 to 30 bytes. The default name is <span class="italic"><code class="codeph">fact_tablename</code></span><code class="codeph">_C</code><span class="italic"><code class="codeph">n</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4831" headers="d202489e4642 ">
                                       <p><code class="codeph">DIMJAVABINDVARS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4831 d202489e4645 ">
                                       <p>Supports access by Java programs to the XML document. </p>
                                       <p><code class="codeph">TRUE</code>: Generates an XML template that uses Java bind variable notation for the names of dimensions. No XML validation is performed. You cannot use the <code class="codeph">IMPORT_XML</code> procedure to create a cube using this template.
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Generates an XML template that does not support Java bind variables. (Default)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4850" headers="d202489e4642 ">
                                       <p><code class="codeph">DISABLEQRW</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4850 d202489e4645 ">
                                       <p>Controls disabling of query rewrite on the source relational materialized view.</p>
                                       <p><code class="codeph">TRUE</code>: Issues an <code class="codeph">ALTER MATERIALIZED VIEW</code> <span class="italic"><code class="codeph">mview_name</code></span> <code class="codeph">DISABLE QUERY REWRITE</code> command.
                                       </p>
                                       <p><code class="codeph">FALSE</code>: No action.
                                       </p>
                                       <p><span class="bold">Note</span>: Only the <code class="codeph">CREATE_MVIEW</code> function with <code class="codeph">BUILD=IMMEDIATE</code> uses this parameter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4886" headers="d202489e4642 ">
                                       <p><code class="codeph">EXPORTXML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4886 d202489e4645 ">
                                       <p>Exports the XML that defines the dimensional objects to a file, which you specify as <span class="italic"><code class="codeph">dir/filename</code></span>. Both the directory and the file name are case sensitive.
                                       </p>
                                       <p><span class="italic"><code class="codeph">dir</code></span>: Name of a database directory.
                                       </p>
                                       <p><span class="italic"><code class="codeph">filename</code></span>: The name of the file, typically given an XML filename extension. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4908" headers="d202489e4642 ">
                                       <p><code class="codeph">FILTERPARTITIONANCESTORLEVELS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4908 d202489e4645 ">
                                       <p>Controls the generation of aggregate values above the partitioning level of a partitioned cube.</p>
                                       <p><code class="codeph">TRUE</code>: Removes levels above the partitioning level from the cube. Requests for summary values above the partitioning level are solved by SQL. 
                                       </p>
                                       <p><code class="codeph">FALSE</code>: All levels are retained in the cube. Requests for summary values are solved by OLAP. (Default)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4925" headers="d202489e4642 ">
                                       <p><code class="codeph">LOGDEST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4925 d202489e4645 ">
                                       <p>Directs and stores log messages. By default, the messages are not available.</p>
                                       <p><code class="codeph">SERVEROUT</code>: Sends messages to server output (typically the screen), which is suitable when working interactively such as in SQL*Plus or SQL Developer.
                                       </p>
                                       <p><code class="codeph">TRACEFILE</code>: Sends messages to the session trace file.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4941" headers="d202489e4642 ">
                                       <p><code class="codeph">PARTITIONOPTION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4941 d202489e4645 ">
                                       <p>Controls partitioning of the cube.</p>
                                       <p><code class="codeph">NONE</code>: Prevents partitioning.
                                       </p>
                                       <p><code class="codeph">DEFAULT</code>: Allows the Sparsity Advisor to determine whether partitioning is needed and how to partition the cube. (Default)
                                       </p>
                                       <p><code class="codeph">FORCE</code>: Partitions the cube even when the Sparsity Advisor recommends against it. The Sparsity Advisor identifies the best dimension, hierarchy, and level to use for partitioning. 
                                       </p>
                                       <p><span class="italic"><code class="codeph">dimension.hierarchy.level</code></span>: Partitions the cube using the specified dimension, hierarchy, and level.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4966" headers="d202489e4642 ">
                                       <p><code class="codeph">POPULATELINEAGE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4966 d202489e4645 ">
                                       <p>Controls the appearance of attributes in a cube materialized view.</p>
                                       <p><code class="codeph">TRUE</code>: Includes all dimension attributes in the cube materialized view. (Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Omits all dimension attributes from the cube materialized view.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e4982" headers="d202489e4642 ">
                                       <p><code class="codeph">PRECOMPUTE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e4982 d202489e4645 ">
                                       <p>Identifies a percentage of the data that is aggregated and stored. The remaining values are calculated as required by queries during the session.</p>
                                       <p><span class="italic"><code class="codeph">precompute_percentage</code></span>[:<span class="italic"><code class="codeph">precompute_top_percentage</code></span>]
                                       </p>
                                       <p>Specify the top percentage for partitioned cubes. The default value is 35:0, which specifies precomputing 35% of the bottom partition and 0% of the top partition. If the cube is not partitioned, then the second number is ignored.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5001" headers="d202489e4642 ">
                                       <p><code class="codeph">REMAPCOMPOSITEKEYS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5001 d202489e4645 ">
                                       <p>Controls how multicolumn keys are rendered in the cube. </p>
                                       <p><code class="codeph">TRUE</code>: Creates a unique key attribute whose values are concatenated string expressions with an underscore between the column values. For example, the value <code class="codeph">BOSTON_MA_USA</code> might be an expression produced from a multicolumn key composed of <code class="codeph">CITY</code>, <code class="codeph">STATE</code>, and <code class="codeph">COUNTRY</code> columns. In addition, an attribute is created for each individual column to store the relational keys. (Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Creates a unique key attribute for each column.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5029" headers="d202489e4642 ">
                                       <p><code class="codeph">RENDERINGMODE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5029 d202489e4645 ">
                                       <p>Controls whether a loss in fidelity between the relational materialized view and the cube materialized view results in a warning message or an exception. See <span class="q">"<a href="DBMS_CUBE.html#GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" title="SQL Aggregation Management uses an existing relational materialized view to derive all the information needed to generate a cube materialized view. The relational materialized view determines the detail level of data that is stored in the cube materialized view. The related relational dimension objects determine the scope of the aggregates, from the lowest level specified in the GROUP BY clause of the materialized view subquery, to the highest level of the dimension hierarchy.">Requirements for the Relational Materialized View</a>"</span>.
                                       </p>
                                       <p><code class="codeph">LOOSE</code>: Losses are noted in the optional logs generated by the <a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3" title="This function creates a cube materialized view from the definition of a relational materialized view.">CREATE_MVIEW Function</a> and the <a href="DBMS_CUBE.html#GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" title="This function generates an XML template that defines a cube with materialized view capabilities, using the information derived from an existing relational materialized view.">DERIVE_FROM_MVIEW Function</a>. No exceptions are raised. (Default)
                                       </p>
                                       <p><code class="codeph">STRICT</code>: Any loss in fidelity raises an exception so that no XML template is created.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5067" headers="d202489e4642 ">
                                       <p><code class="codeph">SEEFILTERS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5067 d202489e4645 ">
                                       <p>Controls whether conditions in the <code class="codeph">WHERE</code> clause of the relational materialized view's defining query are retained or ignored.
                                       </p>
                                       <p><code class="codeph">TRUE</code>: Renders valid conditions in the XML template. (Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Ignores all conditions.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5086" headers="d202489e4642 ">
                                       <p><code class="codeph">UNIQUENAMES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5086 d202489e4645 ">
                                       <p>Controls whether top level dimensional objects have unique names. Cross namespace conflicts may occur because dimensional objects have different namespaces than relational objects.</p>
                                       <p><code class="codeph">TRUE</code>: Modifies all relational names when they are rendered in the cube.(Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Duplicates relational names in the cube unless a naming conflict is detected. In that case, a unique name is created.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5102" headers="d202489e4642 ">
                                       <p><code class="codeph">UNKNOWNKEYASDIM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5102 d202489e4645 ">
                                       <p>Controls handling of simple columns with no levels or hierarchies in the <code class="codeph">GROUP BY</code> clause of the relational materialized view's defining query.
                                       </p>
                                       <p><code class="codeph">TRUE</code>: Renders a simple column without a relational dimension as a cube dimension with no levels or hierarchies. 
                                       </p>
                                       <p><code class="codeph">FALSE</code>: Raises an exception when no relational dimension is found for the column. (Default)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5121" headers="d202489e4642 ">
                                       <p><code class="codeph">VALIDATEXML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5121 d202489e4645 ">
                                       <p>Controls whether the generated XML document is validated.</p>
                                       <p><code class="codeph">TRUE</code>: Validates the template using the <code class="codeph">VALIDATE_XML</code> procedure. (Default)
                                       </p>
                                       <p><code class="codeph">FALSE</code>: No validation is done.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-6DBEBBC0-AE99-4AAA-9097-3A846CF8B1FB">Returns</p>
                        <p>The name of the cube materialized view created by the function. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-FC6BF907-7E1C-4CEA-8A11-01EC6176DDC2">Usage Notes</p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL Aggregation Management is a group of PL/SQL subprograms in DBMS_CUBE that supports the rapid deployment of cube materialized views from existing relational materialized views.">Using SQL Aggregation Management</a>"</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__GUID-E4616368-C59D-41EB-B01D-7D368DC2CADA">Examples</p>
                        <p>All examples for the SQL Aggregate Management subprograms use the sample Sales History schema, which is installed in Oracle Database with two relational materialized views: <code class="codeph">CAL_MONTH_SALES_MV</code> and <code class="codeph">FWEEK_PSCAT_SALES_MV</code>.
                        </p>
                        <p>The following script creates a cube materialized view using <code class="codeph">CAL_MONTH_SALES_MV</code> as the relational materialized view. It uses all default options.
                        </p><pre class="oac_no_warn" dir="ltr">SET serverout ON format wrapped
 
DECLARE
     salesaw  varchar2(30);

BEGIN
     salesaw := dbms_cube.create_mview('SH', 'CAL_MONTH_SALES_MV');
END;
/
</pre><p>The next example sets several parameters for creating a cube materialized view from <code class="codeph">FWEEK_PSCAT_SALES_MV</code>. These parameters change the cube materialized view in the following ways:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ADDTOPS</code>: Adds a top level consisting of a single value to the hierarchies. All of the dimensions in Sales History have a top level already.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PRECOMPUTE</code>: Changes the percentage of materialized aggregates from 35:0 to 40:10.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXPORTXML</code>: Creates a text file for the XML document.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">BUILD</code>: Performs a data refresh.
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">DECLARE
     salescubemv   varchar2(30);
     sam_param     clob := 'ADDTOPS=FALSE,
                            PRECOMPUTE=40:10,
                            EXPORTXML=WORK_DIR/sales.xml,
                            BUILD=IMMEDIATE';
  
BEGIN
     salescubemv := dbms_cube.create_mview('SH', 'FWEEK_PSCAT_SALES_MV', 
                    sam_param);
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65754"></a><a id="ARPLS65755"></a><a id="ARPLS65755"></a><a id="ARPLS65754"></a><div class="props_rev_3"><a id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" name="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416"></a><h4 id="ARPLS-GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416" class="sect4"><span class="enumeration_section">41.4.5 </span>DERIVE_FROM_MVIEW Function
                  </h4>
                  <div>
                     <p>This function generates an XML template that defines a cube with materialized view capabilities, using the information derived from an existing relational materialized view.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-0614A7EC-C23C-4A4B-B0CE-1E4E8F936A93">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.DERIVE_FROM_MVIEW (
          mvowner        IN  VARCHAR2,
          mvname         IN  VARCHAR2,
          sam_parameters IN  CLOB  DEFAULT NULL)
     RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-AE0A87F6-DB0B-463A-877F-8F5FF7E1D86C">Parameters</p>
                        <div class="tblformal" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-285079F0-6C1D-471B-A85E-148F16EF4953">
                           <p class="titleintable">Table 41-8 DERIVE_FROM_MVIEW Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DERIVE_FROM_MVIEW Function Parameters" summary="Parameter descriptions for DERIVE_FROM_MVIEW" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e5316">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e5319">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5324" headers="d202489e5316 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5324 d202489e5319 ">
                                       <p>Owner of the relational materialized view.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5332" headers="d202489e5316 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5332 d202489e5319 ">
                                       <p>Name of the relational materialized view. For restrictions, see <span class="q">"<a href="DBMS_CUBE.html#GUID-0601BA46-A24E-496B-8E6A-92B6640428D7" title="SQL Aggregation Management uses an existing relational materialized view to derive all the information needed to generate a cube materialized view. The relational materialized view determines the detail level of data that is stored in the cube materialized view. The related relational dimension objects determine the scope of the aggregates, from the lowest level specified in the GROUP BY clause of the materialized view subquery, to the highest level of the dimension hierarchy.">Requirements for the Relational Materialized View</a>"</span>.
                                       </p>
                                       <p>A single cube materialized view can replace many of the relational materialized views for a table. Choose the materialized view that has the lowest levels of the dimension hierarchies that you want represented in the cube materialized view.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5350" headers="d202489e5316 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5350 d202489e5319 ">
                                       <p>Optional list of parameters in the form '<span class="italic">parameter1</span>=<span class="italic">value1</span>, <span class="italic">parameter2</span>=<span class="italic">value2</span>,...'. See <span class="q">"<a href="DBMS_CUBE.html#GUID-EA8DFF1A-3E56-4BB6-96F2-A8694287FFE3__CACECDBE">SQL Aggregation Management Parameters</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-C0D86720-9489-4B8E-AC08-26276890CC62">Returns</p>
                        <p>An XML template that defines an analytic workspace containing a cube enabled as a materialized view.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-7F54A2F2-0C73-44CC-99EB-27023D258EC6">Usage Notes</p>
                        <p>To create a cube materialized view from an XML template, use the <code class="codeph">IMPORT_XML</code> procedure. Then use the <code class="codeph">REFRESH_MVIEW</code> procedure to refresh the cube materialized view with data.
                        </p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL Aggregation Management is a group of PL/SQL subprograms in DBMS_CUBE that supports the rapid deployment of cube materialized views from existing relational materialized views.">Using SQL Aggregation Management</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-438B94F0-1B2C-4E2C-BBE2-E8B5F995E416__GUID-FBCA63D8-C618-4D0C-BF56-0BD5F5BFC821">Examples</p>
                        <p>The following example generates an XML template named <code class="codeph">sales_cube.xml</code> from the <code class="codeph">CAL_MONTH_SALES_MV</code> relational materialized view in the <code class="codeph">SH</code> schema.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DECLARE
     salescubexml  clob := null;
     sam_param     clob := 'exportXML=WORK_DIR/sales_cube.xml';
     
BEGIN
     salescubexml := dbms_cube.derive_from_mview('SH', 'CAL_MONTH_SALES_MV',
     sam_param);
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65756"></a><a id="ARPLS65757"></a><a id="ARPLS65757"></a><a id="ARPLS65756"></a><div class="props_rev_3"><a id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" name="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142"></a><h4 id="ARPLS-GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142" class="sect4"><span class="enumeration_section">41.4.6 </span>DROP_MVIEW Procedure
                  </h4>
                  <div>
                     <p>This procedure drops a cube materialized view and all associated objects from the database. These objects include the dimension materialized views, cubes, cube dimensions, levels, hierarchies, and the analytic workspace.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-69E31C2C-8497-43DE-8A8E-437BFCABA790">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.DROP_MVIEW (
          mvowner        IN  VARCHAR2,
          mvname         IN  VARCHAR2,
          sam_parameters IN  CLOB  DEFAULT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-B63F8F77-1338-403A-9E4A-6CAF4F0B1B37">Parameters</p>
                        <div class="tblformal" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-E1AE6F5D-A5CF-414A-9ECC-AE6604675324">
                           <p class="titleintable">Table 41-9 DROP_MVIEW Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_MVIEW Procedure Parameters" summary="Parameter descriptions for DROP_MVIEW" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e5529">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e5532">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5537" headers="d202489e5529 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5537 d202489e5532 ">
                                       <p>Owner of the cube materialized view</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5545" headers="d202489e5529 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5545 d202489e5532 ">
                                       <p>Name of the cube materialized view</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5553" headers="d202489e5529 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5553 d202489e5532 ">
                                       <p><code class="codeph">EXPORTXML</code>: Exports the XML that drops the dimensional objects to a file, which you specify as <span class="italic"><code class="codeph">dir/filename</code></span>. Both the directory and the file name are case sensitive.
                                       </p>
                                       <p><span class="italic"><code class="codeph">dir</code></span>: Name of a database directory.
                                       </p>
                                       <p><span class="italic"><code class="codeph">filename</code></span>: The name of the file, typically given an XML filename extension. 
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-46284046-5F3B-49E9-820E-98BF70E283D4">Usage Notes</p>
                        <p>Use this procedure to drop a cube materialized view that you created using the <code class="codeph">CREATE_MVIEW</code> and <code class="codeph">DERIVE_FROM_MVIEW</code> functions. If you make modifications to the cubes or dimensions, then <code class="codeph">DROP_MVIEW</code> may not be able to drop the cube materialized view.
                        </p>
                        <p>Some of the <code class="codeph">CUBEMVOPTION</code> parameters used by the <code class="codeph">CREATE_MVIEW</code> and <code class="codeph">DERIVE_FROM_MVIEW</code> functions do not create a materialized view. Use Analytic Workspace Manager to drop the analytic workspace, cubes, and cube dimensions.
                        </p>
                        <p>If you use the <code class="codeph">EXPORTXML</code> parameter, then you can use the XML document to drop the cube materialized view, after you re-create it. Use the <code class="codeph">IMPORT_XML</code> procedure.
                        </p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-13C8F22F-1F8B-4335-9271-1C84DFBD0184" title="SQL Aggregation Management is a group of PL/SQL subprograms in DBMS_CUBE that supports the rapid deployment of cube materialized views from existing relational materialized views.">Using SQL Aggregation Management</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D39AC52-2EB0-465F-BD9D-503CB1737142__GUID-B8024024-78D5-4874-84B0-A61B5CBD89A0">Examples</p>
                        <p>The current schema has four materialized views. <code class="codeph">CB$CAL_MONTH_SALES</code> is a cube materialized view for the <code class="codeph">SALES</code> table. <code class="codeph">CB$TIMES_DIM_D1_CAL_ROLLUP</code> is a cube dimension materialized view for the <code class="codeph">TIMES_DIM</code> dimension on the <code class="codeph">TIMES</code> dimension table. The others are relational materialized views.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT mview_name FROM user_mviews;
 
MVIEW_NAME
------------------------------
CB$CAL_MONTH_SALES
CB$TIMES_DIM_D1_CAL_ROLLUP
CAL_MONTH_SALES_MV
FWEEK_PSCAT_SALES_MV
 </pre><p>The following command drops both <code class="codeph">CB$CAL_MONTH_SALES</code> and <code class="codeph">CB$TIMES_DIM_D1_CAL_ROLLUP</code>.
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.drop_mview('SH', 'CB$CAL_MONTH_SALES');

Dropped cube organized materialized view "SH"."CAL_MONTH_SALES" 
including container analytic workspace "SH"."CAL_MONTH_SALES_AW" 
at 20130213 16:31:40.056.
</pre><p>This query against the data dictionary confirms that the materialized views have been dropped.</p><pre class="oac_no_warn" dir="ltr">SELECT mview_name FROM user_mviews;
 
MVIEW_NAME
------------------------------
CAL_MONTH_SALES_MV
FWEEK_PSCAT_SALES_MV</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72232"></a><a id="ARPLS72233"></a><a id="ARPLS72233"></a><a id="ARPLS72232"></a><div class="props_rev_3"><a id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" name="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A"></a><h4 id="ARPLS-GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A" class="sect4"><span class="enumeration_section">41.4.7 </span>EXPORT_XML Procedure
                  </h4>
                  <div>
                     <p>This procedure writes OLAP metadata to a CLOB.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-3452FA7C-3687-4780-B888-3D8A619E38AF">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.EXPORT_XML
       (object_ids            IN      VARCHAR2,
        out_xml               IN/OUT  CLOB;

DBMS_CUBE.EXPORT_XML
       (object_ids            IN      VARCHAR2,
        options_xml           IN      CLOB,
        out_xml               IN/OUT  CLOB;

DBMS_CUBE.EXPORT_XML
       (object_ids            IN      VARCHAR2,
        options_dirname       IN      VARCHAR2,
        options_filename      IN      VARCHAR2,
        out_xml               IN/OUT  CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-09EA6B68-AADE-4D65-9525-4C765BDA77ED">Parameters</p>
                        <div class="tblformal" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-39299D73-41E8-4FD8-85E3-424CD78D7776">
                           <p class="titleintable">Table 41-10 EXPORT_XML Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPORT_XML Procedure Parameters" summary="DBMS_CUBE.EXPORT_XML parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e5768">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e5771">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5776" headers="d202489e5768 ">
                                       <p><code class="codeph">object_ids</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5776 d202489e5771 ">
                                       <p>Any of these identifiers. </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The name of a schema, such as <code class="codeph">GLOBAL</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The fully qualified name of an analytic workspace in the form <span class="italic"><code class="codeph">owner.aw_name</code></span><code class="codeph">.AW</code>, such as <code class="codeph">GLOBAL.GLOBAL.AW</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Cube</p>
                                          </li>
                                          <li>
                                             <p>Dimension</p>
                                          </li>
                                          <li>
                                             <p>Named build process</p>
                                          </li>
                                          <li>
                                             <p>Measure folder</p>
                                          </li>
                                       </ul>
                                       <p>You can specify multiple objects by separating the names with commas. </p>
                                       <p><span class="bold">Note</span>: When exporting an individual object, be sure to export any objects required to reconstruct it. For example, when exporting a cube, you must also export the dimensions of the cube.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5821" headers="d202489e5768 ">
                                       <p><code class="codeph">options_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5821 d202489e5771 ">
                                       <p>The case-sensitive name of a database directory that contains <span class="italic"><code class="codeph">options_filename</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5833" headers="d202489e5768 ">
                                       <p><code class="codeph">options_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5833 d202489e5771 ">
                                       <p>A file containing an XML document of export options.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5841" headers="d202489e5768 ">
                                       <p><code class="codeph">options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5841 d202489e5771 ">
                                       <p>A CLOB variable that contains an XML document of export options. Use the <a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.">CREATE_EXPORT_OPTIONS Procedure</a> to generate this document.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e5856" headers="d202489e5768 ">
                                       <p><code class="codeph">out_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e5856 d202489e5771 ">
                                       <p>A CLOB variable that will store the XML document of OLAP metadata for the objects listed in <span class="italic"><code class="codeph">object_ids</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-96D1BDC8-9F90-47DB-AF39-F3E4C4DBDB18">Export Options</p>
                        <p>The default settings for the export options are appropriate in many cases, so you can omit the <span class="italic"><code class="codeph">options_xml</code></span> parameter or the <span class="italic"><code class="codeph">options_dirname</code></span> and <span class="italic"><code class="codeph">options_filename</code></span> parameters. However, when upgrading Oracle OLAP 10<span class="italic">g</span> metadata to OLAP 12<span class="italic">c</span>, you must specify an XML document that changes the default settings. This example changes all of the parameters from False to True; set them appropriately for your schema.
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;Export&gt;
  &lt;ExportOptions&gt;
    &lt;Option Name="SuppressNamespace" Value="True"/&gt; 
    &lt;Option Name="SuppressOwner" Value="True"/&gt; 
    &lt;Option Name="PreserveTableOwners" Value="True"/&gt; 
  &lt;/ExportOptions&gt;
&lt;/Export&gt; 
</pre><p>You can create this XML document manually or by using the <a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.">CREATE_EXPORT_OPTIONS Procedure</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-5BB66D73-315C-40D7-85CB-7C7C91E6F4A4">Usage Notes</p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D52DCFF-A1D8-4196-947E-2B42BEC6531A__GUID-272A0D9C-97F6-4E70-BBD4-4F4C82756CC2">Example</p>
                        <p>For an example of using <code class="codeph">EXPORT_XML</code> in an upgrade to the same schema, see <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                        <p>The following PL/SQL script copies an OLAP 12<span class="italic">c</span> analytic workspace named <code class="codeph">GLOBAL12</code> from the <code class="codeph">GLOBAL_AW</code> schema to the <code class="codeph">GLOBAL</code> schema. No upgrade is performed.
                        </p>
                        <p>To upgrade into a different schema, change the example as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Call the <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> procedure.
                              </p>
                           </li>
                           <li>
                              <p>Call the <code class="codeph">CREATE_EXPORT_OPTIONS</code> procedure with the additional parameter setting <code class="codeph">SUPPRESS_NAMESPACE=&gt;TRUE</code>.
                              </p>
                           </li>
                        </ul>
                        <p>The PL/SQL client must be connected to the database as <code class="codeph">GLOBAL</code>. The <code class="codeph">GLOBAL</code> user must have <code class="codeph">SELECT</code> permissions on <code class="codeph">GLOBAL_AW.AW$GLOBAL</code> and on all relational data sources.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  -- Create a CLOB for the export options
  dbms_lob.createtemporary(optionsClob, TRUE);
  dbms_cube.create_export_options(out_options_xml=&gt;optionsClob, suppress_owner=&gt;TRUE, preserve_table_owners=&gt;TRUE);
 
  -- Create a CLOB for the XML template
  dbms_lob.createtemporary(exportClob, TRUE);
  
  -- Export metadata from an analytic workspace to a CLOB
  dbms_cube.export_xml(object_ids=&gt;'GLOBAL_AW.GLOBAL12.AW', options_xml=&gt;optionsClob, out_xml=&gt;exportClob); 
 
  -- Import metadata from the CLOB
  dbms_cube.import_xml(in_xml=&gt;exportClob);
 
  -- Load and aggregate the data
  dbms_cube.build(script=&gt;'GLOBAL.UNITS_CUBE, GLOBAL.PRICE_AND_COST_CUBE');
 
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72888"></a><a id="ARPLS72889"></a><a id="ARPLS72889"></a><a id="ARPLS72888"></a><div class="props_rev_3"><a id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46" name="GUID-12A6C317-F339-475C-910C-E30F40D8CB46"></a><h4 id="ARPLS-GUID-12A6C317-F339-475C-910C-E30F40D8CB46" class="sect4"><span class="enumeration_section">41.4.8 </span>EXPORT_XML_TO_FILE Procedure
                  </h4>
                  <div>
                     <p>This procedure exports OLAP metadata to a file. This file can be imported into a new or existing analytic workspace using the <code class="codeph">IMPORT_XML</code> procedure. In this way, you can create a copy of the analytic workspace in another schema or database. 
                     </p>
                     <div class="section">
                        <p>This procedure can also be used as part of the process for upgrading OLAP standard form metadata contained in an Oracle OLAP 10<span class="italic">g</span> analytic workspace to OLAP 12<span class="italic">c</span> format.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-4E65C64C-E1A9-40C4-ADB0-814D35C9D18A">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.EXPORT_XML_TO_FILE
       (object_ids            IN      VARCHAR2,
        output_dirname        IN      VARCHAR2,
        output_filename       IN      VARCHAR2;

DBMS_CUBE.EXPORT_XML_TO_FILE
       (object_ids            IN      VARCHAR2,
        options_dirname       IN      VARCHAR2,
        options_filename      IN      VARCHAR2,
        output_dirname        IN      VARCHAR2,
        output_filename       IN      VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-F8D13BDA-4B6E-42A9-966D-DA90E74FF651">Parameters</p>
                        <div class="tblformal" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-00A4B91F-7BC3-4457-9293-BDC14CB8B22A">
                           <p class="titleintable">Table 41-11 EXPORT_XML_TO_FILE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPORT_XML_TO_FILE Procedure Parameters" summary="DBMS_CUBE.IMPORT_XML_TO_FILE parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e6123">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e6126">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6131" headers="d202489e6123 ">
                                       <p><code class="codeph">object_ids</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6131 d202489e6126 ">
                                       <p>Any of these identifiers. </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The name of a schema, such as <code class="codeph">GLOBAL</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The fully qualified name of an analytic workspace in the form <span class="italic"><code class="codeph">owner.aw_name</code></span><code class="codeph">.AW</code>, such as <code class="codeph">GLOBAL.GLOBAL.AW</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Cube</p>
                                          </li>
                                          <li>
                                             <p>Dimension</p>
                                          </li>
                                          <li>
                                             <p>Named build process</p>
                                          </li>
                                          <li>
                                             <p>Measure folder</p>
                                          </li>
                                       </ul>
                                       <p>You can specify multiple objects by separating the names with commas. </p>
                                       <p><span class="bold">Note</span>: When exporting an individual object, be sure to export any objects required to reconstruct it. For example, when you export a cube, you must also export the dimensions of the cube.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6176" headers="d202489e6123 ">
                                       <p><code class="codeph">options_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6176 d202489e6126 ">
                                       <p>The case-sensitive name of a database directory that contains <code class="codeph">options_filename</code>. See <span class="q">"<a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46__CACHFBBI">Export Options</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6191" headers="d202489e6123 ">
                                       <p><code class="codeph">options_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6191 d202489e6126 ">
                                       <p>The name of a file containing an XML document of export options. See <span class="q">"<a href="DBMS_CUBE.html#GUID-12A6C317-F339-475C-910C-E30F40D8CB46__CACHFBBI">Export Options</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6203" headers="d202489e6123 ">
                                       <p><code class="codeph">output_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6203 d202489e6126 ">
                                       <p>The case-sensitive name of a database directory where<span class="italic"><code class="codeph"> output_filename</code></span> is created.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6215" headers="d202489e6123 ">
                                       <p><code class="codeph">output_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6215 d202489e6126 ">
                                       <p>The name of the template file created by the procedure.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__CACHFBBI">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-FAB81B36-605A-44FE-B718-F87F7FD7E6B2">Export Options</p>
                        <p>The default settings for the export options are appropriate in most cases, and you can omit the <span class="italic"><code class="codeph">options_dirname</code></span> and <span class="italic"><code class="codeph">options_filename</code></span> parameters. However, when upgrading Oracle OLAP 10<span class="italic">g</span> metadata to OLAP 12<span class="italic">c</span>, you must specify an XML document that changes the default settings, like the following:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="2.0"?&gt;
&lt;Export&gt;
  &lt;ExportOptions&gt;
    &lt;Option Name="SuppressNamespace" Value="True"/&gt; 
    &lt;Option Name="SuppressOwner" Value="True"/&gt; 
    &lt;Option Name="PreserveTableOwners" Value="True"/&gt; 
  &lt;/ExportOptions&gt;
&lt;/Export&gt; 
</pre><p>You can create this XML document manually or by using the <a href="DBMS_CUBE.html#GUID-3A117D72-2F22-4192-A6EF-49057200CA19" title="This procedure creates an input XML document that describes processing options for the EXPORT_XML Procedure and the EXPORT_XML_TO_FILE Procedure.">CREATE_EXPORT_OPTIONS Procedure</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-C0A23ACE-0CAD-4040-A234-4DD6A5EE8F55">Usage Notes</p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12A6C317-F339-475C-910C-E30F40D8CB46__GUID-106922E9-9B47-49BF-B395-768E15567AAC">Examples</p>
                        <p>The following example generates an XML file named global.xml in OLAP 12<span class="italic">c</span> format using the default export settings. The metadata is derived from all analytic workspaces and CWM metadata in the <code class="codeph">GLOBAL_AW</code> schema. The output file is generated in the <code class="codeph">WORK_DIR</code> database directory.
                        </p><pre class="oac_no_warn" dir="ltr">execute dbms_cube.export_xml_to_file('GLOBAL_AW', 'WORK_DIR', 'global.xml');
</pre><p>The next example also generates an XML file named global.xml in OLAP 12<span class="italic">c</span> format using the export options set in options.xml. The metadata is derived from the GLOBAL analytic workspace in the <code class="codeph">GLOBAL_AW</code> schema. Both the options file and the output file are in the <code class="codeph">WORK_DIR</code> database directory. 
                        </p><pre class="oac_no_warn" dir="ltr">execute dbms_cube.export_xml_to_file('GLOBAL_AW.GLOBAL.AW', 'WORK_DIR', 'options.xml', 'WORK_DIR', 'global.xml');</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65758"></a><a id="ARPLS65759"></a><a id="ARPLS65759"></a><a id="ARPLS65758"></a><div class="props_rev_3"><a id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" name="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC"></a><h4 id="ARPLS-GUID-2C33759E-DF17-4396-8E17-7864E59A52DC" class="sect4"><span class="enumeration_section">41.4.9 </span>IMPORT_XML Procedure
                  </h4>
                  <div>
                     <p>This procedure creates, modifies, or drops an analytic workspace by using an XML template.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-57C400E8-8203-43AB-A19D-D24C7108C944">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.IMPORT_XML
       (dirname               IN      VARCHAR2,
        filename              IN      VARCHAR2 );

DBMS_CUBE.IMPORT_XML
       (dirname               IN      VARCHAR2,
        filename              IN      VARCHAR2,
        out_xml               IN/OUT  CLOB );

DBMS_CUBE.IMPORT_XML
       (input_dirname         IN      VARCHAR2,
        input_filename        IN      VARCHAR2 
        options_dirname       IN      VARCHAR2,
        options_filename      IN      VARCHAR2,
        out_xml               IN/OUT  CLOB );

DBMS_CUBE.IMPORT_XML
       (in_xml                IN      CLOB );

DBMS_CUBE.IMPORT_XML
       (in_xml                IN      CLOB,
        out_xml               IN/OUT  CLOB );

DBMS_CUBE.IMPORT_XML

       (in_xml                IN      CLOB,
        options_xml           IN      CLOB,
        out_xml               IN/OUT  CLOB );</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-E0E8E420-9CA4-4654-8DFC-ED2B69AE47BF">Parameters</p>
                        <div class="tblformal" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-BF66BE9E-C51F-4213-8438-13998A732809">
                           <p class="titleintable">Table 41-12 IMPORT_XML Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="IMPORT_XML Procedure Parameters" summary="DBMS_CUBE.IMPORT_XML parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e6413">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e6416">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6421" headers="d202489e6413 ">
                                       <p><code class="codeph">dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6421 d202489e6416 ">
                                       <p>The case-sensitive name of a database directory containing the XML document describing an analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6429" headers="d202489e6413 ">
                                       <p><code class="codeph">filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6429 d202489e6416 ">
                                       <p>A file containing an XML document describing an analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6437" headers="d202489e6413 ">
                                       <p><code class="codeph">in_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6437 d202489e6416 ">
                                       <p>A CLOB containing an XML document describing an analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6445" headers="d202489e6413 ">
                                       <p><code class="codeph">input_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6445 d202489e6416 ">
                                       <p>The case-sensitive name of a database directory containing the XML document describing an analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6453" headers="d202489e6413 ">
                                       <p><code class="codeph">input_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6453 d202489e6416 ">
                                       <p>A file containing an XML document describing an analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6461" headers="d202489e6413 ">
                                       <p><code class="codeph">options_dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6461 d202489e6416 ">
                                       <p>The case-sensitive name of a database directory containing a file of import options.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6469" headers="d202489e6413 ">
                                       <p><code class="codeph">options_filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6469 d202489e6416 ">
                                       <p>A file of import options.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6477" headers="d202489e6413 ">
                                       <p><code class="codeph">options_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6477 d202489e6416 ">
                                       <p>An XML document describing the import options. Use the <a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.">CREATE_IMPORT_OPTIONS Procedure</a> to generate this document.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e6492" headers="d202489e6413 ">
                                       <p><code class="codeph">out_xml</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e6492 d202489e6416 ">
                                       <p>An XML document that either describes the analytic workspace or, for validation only, describes any errors. It may contain changes that <code class="codeph">DBMS_CUBE</code> made to the imported XML, such as setting default values or making minor corrections to the XML.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-4D34EB75-586B-45AB-B7E6-6810BDBCC3BE">Usage Notes</p>
                        <p>The XML can define, modify, or drop an entire analytic workspace, or one or more cubes or dimensions. When defining just cubes or dimensions, you must do so within an existing analytic workspace.</p>
                        <p>You can also use <code class="codeph">IMPORT_XML</code> to drop an analytic workspace by using the XML document generated by the <code class="codeph">DROP_MVIEW</code> procedure with the <code class="codeph">EXPORTXML</code> parameter.
                        </p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C33759E-DF17-4396-8E17-7864E59A52DC__GUID-771A6A74-08D0-4BDE-AC63-E6B0D26252C8">Example</p>
                        <p>This example loads an XML template from a file named <code class="codeph">GLOBAL.XML</code> and located in a database directory named <code class="codeph">XML_DIR</code>.
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.import_xml('XML_DIR', 'GLOBAL.XML');
</pre><p>The next example exports an OLAP 10<span class="italic">g</span> template and uses <code class="codeph">IMPORT_XML</code> to validate it before an upgrade to 12<span class="italic">c</span>.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
 
  exportOptClob clob;
  importOptClob clob;
  importClob    clob;
  exportClob    clob;
  
BEGIN
 
  -- Create a CLOB for the export options
  dbms_lob.createtemporary(exportOptClob, TRUE);
  dbms_cube.create_export_options(out_options_xml=&gt;exportOptClob, suppress_namespace=&gt;TRUE, preserve_table_owners=&gt;TRUE);
 
  -- Create a CLOB for the XML template
  dbms_lob.createtemporary(exportClob, TRUE);
 
  -- Create a CLOB for import options
  dbms_lob.createtemporary(importOptClob, TRUE);
  dbms_cube.create_import_options(out_options_xml=&gt;importOptClob, validate_only=&gt;TRUE);
   
  -- Create a CLOB for the change log
  dbms_lob.createtemporary(importClob, TRUE);
  
  -- Enable Oracle Database 12c Release 1 (12.1) clients to access 10g metadata
  dbms_cube.initialize_cube_upgrade;
 
  -- Export metadata from an analytic workspace to a CLOB
  dbms_cube.export_xml(object_ids=&gt;'GLOBAL_AW', options_xml=&gt;exportOptClob, out_xml=&gt;exportClob); 
 
  /* Import metadata from the CLOB. No objects are committed to the database
     because the validate_only parameter of CREATE_IMPORT_OPTIONS is set to
     TRUE.
  */
 
  dbms_cube.import_xml(in_xml=&gt;exportClob, options_xml=&gt;importOptClob, out_xml=&gt;importClob);
 
   -- Output the metadata changes
  dbms_output.put_line('This is the validation log:');
  dbms_output.put_line(importClob);
  
END;
/
</pre><p>The contents of <code class="codeph">importClob</code> show that the XML is valid. Otherwise, error messages appear in the <code class="codeph">&lt;RootCommitResult&gt;</code> element.
                        </p><pre class="oac_no_warn" dir="ltr">This is the validation log:
&lt;?xml version="1.0" encoding="UTF-16"?&gt;
&lt;RootCommitResult&gt;
 
&lt;/RootCommitResult&gt;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>For an example of <code class="codeph">IMPORT_XML</code> within the context of an upgrade from 10<span class="italic">g</span> to 12<span class="italic">c</span> metadata, see the Custom Upgrade section of <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72891"></a><a id="ARPLS72891"></a><div class="props_rev_3"><a id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" name="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703"></a><h4 id="ARPLS-GUID-478D4764-1AE1-40B3-A25C-4BE05659C703" class="sect4"><span class="enumeration_section">41.4.10 </span>INITIALIZE_CUBE_UPGRADE Procedure
                  </h4>
                  <div>
                     <p>This procedure processes analytic workspaces created in Oracle OLAP 10<span class="italic">g</span> so they can be used by Oracle OLAP 12<span class="italic">c</span> clients. It processes all analytic workspaces in the current schema. Run this procedure once for each schema in which there are 10<span class="italic">g</span> analytic workspaces.
                     </p>
                     <div class="section">
                        <p>Without this processing step, 12<span class="italic">c</span> clients cannot connect to a database containing a 10<span class="italic">g</span> analytic workspace with subobjects of a dimension or cube having the same name. Additionally, some <code class="codeph">DBMS_CUBE</code> procedures and functions, such as <code class="codeph">EXPORT_XML</code> and <code class="codeph">EXPORT_XML_TO_FILE</code>, do not work on the 10<span class="italic">g</span> metadata.
                        </p>
                        <p>After processing, OLAP 12<span class="italic">c</span> clients can connect and use the alternate names provided by <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> for the conflicting subobjects. OLAP 10<span class="italic">g</span> clients continue to use the original names.
                        </p>
                        <p><code class="codeph">INITIALIZE_CUBE_UPGRADE</code> does not upgrade any OLAP 10<span class="italic">g</span> objects to OLAP 12<span class="italic">c</span> format.
                        </p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-335F4599-CDC1-416C-8D1E-BB7FB580D87D">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.INITIALIZE_CUBE_UPGRADE;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-72007CCF-7C3B-4CB4-A5B9-AF0F2BEADBE0">Usage Notes</p>
                        <p>This procedure creates and populates a table named <a id="d202489e6773" class="indexterm-anchor"></a><code class="codeph">CUBE_UPGRADE_INFO</code>. If it already exists, the table is truncated and repopulated.
                        </p>
                        <p>While the 10<span class="italic">g</span> namespace allowed subobjects with the same name in the same dimension or cube, the 12<span class="italic">c</span> namespace does not. When <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> detects a name conflict among subobjects such as levels, hierarchies, and dimension attributes, it creates a row in <code class="codeph">CUBE_UPGRADE_INFO</code> providing a new, unique name for each one. Rows may also be created for objects that do not require renaming; these rows are distinguished by a value of 0 or null in the <code class="codeph">CONFLICT</code> column. Top-level objects, such as dimensions and cubes, are not listed. 
                        </p>
                        <p>You can edit the table using SQL <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> if you want to customize the names of OLAP 10<span class="italic">g</span> objects on OLAP 12<span class="italic">c</span> clients.
                        </p>
                        <p>The <code class="codeph">UPGRADE_AW</code>, <code class="codeph">EXPORT_XML</code> and <code class="codeph">EXPORT_XML_TO_FILE</code> procedures use the names specified in the <code class="codeph">NEW_NAME</code> column of the table to identify objects in CWM or OLAP standard form (AWXML) analytic workspaces, rather than the original names. 
                        </p>
                        <p>The following table describes the columns of <code class="codeph">CUBE_UPGRADE_INFO</code>.
                        </p>
                        <div class="tblformal" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-EC32C115-BEB0-41BE-A076-AA669D0C64F3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column descriptions for CUBE_UPGRADE_INFO" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d202489e6838">Column</th>
                                    <th align="left" valign="bottom" width="13%" id="d202489e6841">Datatype</th>
                                    <th align="left" valign="bottom" width="12%" id="d202489e6844">NULL</th>
                                    <th align="left" valign="bottom" width="59%" id="d202489e6847">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6852" headers="d202489e6838 ">
                                       <p><code class="codeph">OWNER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6852 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6852 d202489e6844 ">
                                       <p><code class="codeph">NOT NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6852 d202489e6847 ">
                                       <p>Owner of the analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6868" headers="d202489e6838 ">
                                       <p><code class="codeph">AW</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6868 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6868 d202489e6844 ">
                                       <p><code class="codeph">NOT NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6868 d202489e6847 ">
                                       <p>Name of the analytic workspace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6884" headers="d202489e6838 ">
                                       <p><code class="codeph">AWXML_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6884 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6884 d202489e6844 ">
                                       <p><code class="codeph">NOT NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6884 d202489e6847 ">
                                       <p>Full logical name of the object requiring modification, in the form <span class="italic"><code class="codeph">simple_name.[subtype_name].object_type</code></span>. For example, <code class="codeph">TIME.DIMENSION</code> and <code class="codeph">PRODUCT.COLOR.ATTRIBUTE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6910" headers="d202489e6838 ">
                                       <p><code class="codeph">NEW_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6910 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6910 d202489e6844 ">
                                       <p><code class="codeph">NOT NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6910 d202489e6847 ">
                                       <p>The name the object will have in Oracle 12<span class="italic">c</span> after the upgrade.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6929" headers="d202489e6838 ">
                                       <p><code class="codeph">OBJECT_CLASS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6929 d202489e6841 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6929 d202489e6844 ">
                                       <p>--</p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6929 d202489e6847 ">
                                       <p><code class="codeph">DerivedMeasure</code> for calculated measures, or empty for all other object types.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d202489e6946" headers="d202489e6838 ">
                                       <p><code class="codeph">CONFLICT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d202489e6946 d202489e6841 ">
                                       <p><code class="codeph">NUMBER</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d202489e6946 d202489e6844 ">
                                       <p>--</p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d202489e6946 d202489e6847 ">
                                       <p>Indicates the reason that the row was added to CUBE_UPGRADE_INFO:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">0</code>: The object does not have a naming conflict but appears in the table for other reasons.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">1</code>: Two objects have the same name and would create a conflict in the OLAP 12<span class="italic">c</span> namespace. The object type (such as level or hierarchy) will be added to the names.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-478D4764-1AE1-40B3-A25C-4BE05659C703__GUID-FE51E026-C1BD-4846-A9C4-F307F0D812D7">Examples</p>
                        <p>The following command creates and populates the CUBE_UPGRADE_INFO table:</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.initialize_cube_upgrade;
</pre><p>The table shows that the OLAP 10<span class="italic">g</span> analytic workspace has a hierarchy and a level named MARKET_SEGMENT, which will be renamed. The table also contains rows for calculated measures, but these objects do not require renaming: The value of <code class="codeph">CONFLICT</code> is <code class="codeph">0</code>.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT awxml_id, new_name, conflict FROM cube_upgrade_info;

AWXML_ID                                 NEW_NAME                    CONFLICT
---------------------------------------- ------------------------- ----------
CUSTOMER.MARKET_SEGMENT.HIERARCHY        MARKET_SEGMENT_HIERARCHY           1
CUSTOMER.MARKET_SEGMENT.LEVEL            MARKET_SEGMENT_LEVEL               1
UNITS_CUBE.EXTENDED_COST.MEASURE         EXTENDED_COST                      0
UNITS_CUBE.EXTENDED_MARGIN.MEASURE       EXTENDED_MARGIN                    0
UNITS_CUBE.CHG_SALES_PP.MEASURE          CHG_SALES_PP                       0
UNITS_CUBE.CHG_SALES_PY.MEASURE          CHG_SALES_PY                       0
UNITS_CUBE.PCTCHG_SALES_PP.MEASURE       PCTCHG_SALES_PP                    0
UNITS_CUBE.PCTCHG_SALES_PY.MEASURE       PCTCHG_SALES_PY                    0
UNITS_CUBE.PRODUCT_SHARE.MEASURE         PRODUCT_SHARE                      0
UNITS_CUBE.CHANNEL_SHARE.MEASURE         CHANNEL_SHARE                      0
UNITS_CUBE.MARKET_SHARE.MEASURE          MARKET_SHARE                       0
UNITS_CUBE.CHG_EXTMRGN_PP.MEASURE        CHG_EXTMRGN_PP                     0
UNITS_CUBE.CHG_EXTMRGN_PY.MEASURE        CHG_EXTMRGN_PY                     0
UNITS_CUBE.PCTCHG_EXTMRGN_PP.MEASURE     PCTCHG_EXTMRGN_PP                  0
UNITS_CUBE.PCTCHG_EXTMRGN_PY.MEASURE     PCTCHG_EXTMRGN_PY                  0
UNITS_CUBE.CHG_UNITS_PP.MEASURE          CHG_UNITS_PP                       0
UNITS_CUBE.EXTMRGN_PER_UNIT.MEASURE      EXTMRGN_PER_UNIT                   0
UNITS_CUBE.SALES_YTD.MEASURE             SALES_YTD                          0
UNITS_CUBE.SALES_YTD_PY.MEASURE          SALES_YTD_PY                       0
UNITS_CUBE.PCTCHG_SALES_YTD_PY.MEASURE   PCTCHG_SALES_YTD_PY                0
UNITS_CUBE.SALES_QTD.MEASURE             SALES_QTD                          0
UNITS_CUBE.CHG_UNITS_PY.MEASURE          CHG_UNITS_PY                       0</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65760"></a><a id="ARPLS65761"></a><a id="ARPLS65761"></a><a id="ARPLS65760"></a><div class="props_rev_3"><a id="GUID-861E4292-7C61-4D22-860D-18D894E882CA" name="GUID-861E4292-7C61-4D22-860D-18D894E882CA"></a><h4 id="ARPLS-GUID-861E4292-7C61-4D22-860D-18D894E882CA" class="sect4"><span class="enumeration_section">41.4.11 </span>REFRESH_MVIEW Procedure
                  </h4>
                  <div>
                     <p>This procedure refreshes the data in a cube materialized view.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-5624169F-1172-41CB-8C0E-C538E1F4BBCA">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.REFRESH_MVIEW (
          mvowner              IN  VARCHAR2,
          mvname               IN  VARCHAR2,
          method               IN  VARCHAR2       DEFAULT NULL,
          refresh_after_errors IN  BOOLEAN        DEFAULT FALSE,
          parallelism          IN  BINARY_INTEGER DEFAULT 0,
          atomic_refresh       IN  BOOLEAN        DEFAULT FALSE,
          scheduler_job        IN  VARCHAR2       DEFAULT NULL,
          sam_parameters       IN  CLOB           DEFAULT NULL,
          nested               IN  BOOLEAN        DEFAULT FALSE );</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-528D64D8-F84A-43FA-AFAC-473C7FE3507F">Parameters</p>
                        <div class="tblformal" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-1DAFB717-A939-417C-A9D2-B48D30254A46">
                           <p class="titleintable">Table 41-13 REFRESH_MVIEW Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REFRESH_MVIEW Procedure Parameters" summary="Parameter descriptions for REFRESH_MVIEW" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e7105">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e7108">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7113" headers="d202489e7105 ">
                                       <p><code class="codeph">mvowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7113 d202489e7108 ">
                                       <p>Owner of the cube materialized view.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7121" headers="d202489e7105 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7121 d202489e7108 ">
                                       <p>Name of the cube materialized view.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7129" headers="d202489e7105 ">
                                       <p><code class="codeph">method</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7129 d202489e7108 ">
                                       <p>A full or a fast (partial) refresh. In a fast refresh, only changed rows are inserted in the cube and the affected areas of the cube are re-aggregated.</p>
                                       <p>You can specify a method for each cube in sequential order, or a single method to apply to all cubes. If you list more cubes than methods, then the last method applies to the additional cubes.</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">C</code>: Complete refresh clears all dimension values before loading. (Default)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">F</code>: Fast refresh of a cube materialized view, which performs an incremental refresh and re-aggregation of only changed rows in the source table.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">?</code>: Fast refresh if possible, and otherwise a complete refresh.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">P</code>: Recomputes rows in a cube materialized view that are affected by changed partitions in the detail tables.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">S</code>: Fast solve of a compressed cube. A fast solve reloads all the detail data and re-aggregates only the changed values.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>See the <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">Usage Notes</a>"</span> for the <code class="codeph">BUILD</code> procedure for additional details.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7174" headers="d202489e7105 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7174 d202489e7108 ">
                                       <p><code class="codeph">TRUE</code> to roll back just the cube or dimension with errors, and then continue building the other objects.
                                       </p>
                                       <p><code class="codeph">FALSE</code> to roll back all objects in the build.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7188" headers="d202489e7105 ">
                                       <p><code class="codeph">parallelism</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7188 d202489e7108 ">
                                       <p>Number of parallel processes to allocate to this job.</p>
                                       <p>See the <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104__CACEIEFG">Usage Notes</a>"</span> for the <code class="codeph">BUILD</code> procedure for additional details.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7205" headers="d202489e7105 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7205 d202489e7108 ">
                                       <p><code class="codeph">TRUE</code> prevents users from accessing intermediate results during a build. It freezes the current state of an analytic workspace at the beginning of the build to provide current sessions with consistent data. This option thaws the analytic workspace at the end of the build to give new sessions access to the refreshed data. If an error occurs during the build, then all objects are rolled back to the frozen state. 
                                       </p>
                                       <p><code class="codeph">FALSE</code> enables users to access intermediate results during an build.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7219" headers="d202489e7105 ">
                                       <p><code class="codeph">scheduler_job</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7219 d202489e7108 ">
                                       <p>Any text identifier for the job, which will appear in the log table. The string does not need to be unique.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7227" headers="d202489e7105 ">
                                       <p><code class="codeph">sam_parameters</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7227 d202489e7108 ">
                                       <p>None.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7235" headers="d202489e7105 ">
                                       <p><code class="codeph">nested</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7235 d202489e7108 ">
                                       <p><code class="codeph">TRUE</code> performs nested refresh operations for the specified set of cube materialized views. Nested refresh operations refresh all the depending materialized views and the specified set of materialized views based on a dependency order to ensure the nested materialized views are truly fresh with respect to the underlying base tables.
                                       </p>
                                       <p>All objects must reside in a single analytic workspace.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-4FB3AFB4-094F-4A4E-9986-ABC223CE9612">Usage Notes</p>
                        <p><code class="codeph">REFRESH_MVIEW</code> changes <span class="italic"><code class="codeph">mvname</code></span> to the name of the cube, then passes the cube name and all parameters to the <code class="codeph">BUILD</code> procedure. Thus, you can use the <code class="codeph">BUILD</code> procedure to refresh a cube materialized view. See the <span class="q">"<a href="DBMS_CUBE.html#GUID-18B5FD4F-6877-4F11-B237-4BF23E976104" title="This procedure loads data into one or more cubes and dimensions, and generates aggregate values in the cubes. The results are automatically committed to the database.">BUILD Procedure</a>"</span> for additional information about the parameters.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-861E4292-7C61-4D22-860D-18D894E882CA__GUID-A8632C6B-EA3C-4326-BA53-7BD6A49E8010">Examples</p>
                        <p>The following example uses the default settings to refresh a cube materialized view named <code class="codeph">CB$FWEEK_PSCAT_SALES</code>.
                        </p><pre class="oac_no_warn" dir="ltr">SET serverout ON format wrapped
 
EXECUTE dbms_cube.refresh_mview('SH', 'CB$FWEEK_PSCAT_SALES');
</pre><p>The next example changes the refresh method to use fast refresh if possible, continue refreshing after an error, and use two parallel processes.</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.refresh_mview('SH', 'CB$FWEEK_PSCAT_SALES', '?', TRUE, 2);
</pre><p>After successfully refreshing the cube materialized view, <code class="codeph">REFRESH_MVIEW</code> returns a message like the following:
                        </p><pre class="oac_no_warn" dir="ltr">Completed refresh of cube mview "SH"."CB$FWEEK_PSCAT_SALES" at 20130212 15:04:46.370.</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73613"></a><a id="ARPLS73614"></a><a id="ARPLS73614"></a><a id="ARPLS73613"></a><div class="props_rev_3"><a id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" name="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780"></a><h4 id="ARPLS-GUID-50D050C8-155D-4C7B-849E-5D7AA1216780" class="sect4"><span class="enumeration_section">41.4.12 </span>UPGRADE_AW Procedure
                  </h4>
                  <div>
                     <p>This procedure creates an Oracle OLAP 12<span class="italic">c</span> analytic workspace from a copy of the metadata contained in an OLAP 10<span class="italic">g</span> analytic workspace. The original OLAP 10<span class="italic">g</span> analytic workspace is not affected and can exist at the same time and in the same schema as the OLAP 12<span class="italic">c</span> analytic workspace.
                     </p>
                     <div class="section">
                        <p><code class="codeph">UPGRADE_AW</code> automatically runs <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> if the <code class="codeph">CUBE_UPGRADE_INFO</code> table does not exist. If it does exist, then <code class="codeph">UPGRADE_AW</code> does not overwrite it, thus preserving any changes you made to the table.
                        </p>
                        <p>See <span class="q">"<a href="DBMS_CUBE.html#GUID-FE41955A-3A4D-4C73-82BD-BBEB2295381D" title="You can upgrade an OLAP 10g analytic workspace to OLAP 12c by saving the OLAP 10g objects as an XML template and importing the XML into a different schema. The original analytic workspace remains accessible and unchanged by the upgrade process.">DBMS_CUBE - Upgrading 10g Analytic Workspaces</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-7DB357F5-D00D-4036-8253-3806CAED8372">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.UPGRADE_AW
       (sourceaw              IN  VARCHAR2,
        destaw                IN  VARCHAR2,
        upgoptions            IN  CLOB DEFAULT NULL); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-B1F5187C-299E-4792-8A00-FA6FFF663790">Parameters</p>
                        <div class="tblformal" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-DFF89229-573C-4D14-8FEF-C1A18998A48A">
                           <p class="titleintable">Table 41-14 UPGRADE_AW Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UPGRADE_AW Procedure Parameters" summary="DBMS_CUBE.UPGRADE_AW parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e7447">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e7450">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7455" headers="d202489e7447 ">
                                       <p><code class="codeph">sourceaw</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7455 d202489e7450 ">
                                       <p>The name of a 10<span class="italic">g</span> analytic workspace.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7466" headers="d202489e7447 ">
                                       <p><code class="codeph">destaw</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7466 d202489e7450 ">
                                       <p>A new name for the generated 12<span class="italic">c</span> analytic workspace. It cannot be the same as <span class="italic"><code class="codeph">sourceaw</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7481" headers="d202489e7447 ">
                                       <p><code class="codeph">upgoptions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7481 d202489e7450 ">
                                       <p>One or more of these upgrade options, as a string in the form '<span class="italic">OPTION</span>=<span class="italic">VALUE</span>'. Separate multiple options with commas.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">PRESERVE_TABLE_OWNERS</code>: 
                                             </p>
                                             <p><code class="codeph">YES</code> preserves the original source table mappings. Use this option when creating an OLAP 12<span class="italic">c</span> analytic workspace in a different schema from the 10<span class="italic">g</span> analytic workspace, and you want the new objects mapped to tables in the original schema. (Default)
                                             </p>
                                             <p><code class="codeph">NO</code> removes the schema owner from the source table mappings. Use this option when creating an OLAP 12<span class="italic">c</span> analytic workspace in a different schema from the 10<span class="italic">g</span> analytic workspace, and you want the new objects mapped to tables in the destination schema.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RENAME_TABLE</code>: The name of a table that specifies new names for objects as they are created in OLAP 12<span class="italic">c</span> format. These changes are in addition to those specified by the <code class="codeph">INITIALIZE_CUBE_UPGRADE</code> procedure. See <span class="q">"<a href="DBMS_CUBE.html#GUID-34602174-B6F4-4BED-A5E5-CAFA8ADCA976" title="This procedure creates an input XML document that describes processing options for the IMPORT_XML Procedure.">CREATE_IMPORT_OPTIONS Procedure</a>"</span> for information about creating a rename table.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TARGET_VERSION</code>: The version of the upgrade, specified by a 2- to 5-part number, such as 11.2 or 11.2.0.2.0. If you enter an unsupported version number, then the closest version below it is used.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50D050C8-155D-4C7B-849E-5D7AA1216780__GUID-E8F29F9F-A2B9-4F40-873F-8B2E1F1927B0">Examples</p>
                        <p>This example upgrades an OLAP 10<span class="italic">g</span> analytic workspace named <code class="codeph">GLOBAL10</code> to an OLAP 12<span class="italic">c</span> analytic workspace named <code class="codeph">GLOBAL12</code>, using a rename table named <code class="codeph">MY_OBJECT_MAP</code>:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN 
 
  -- Upgrade the analytic workspace
  dbms_cube.upgrade_aw(sourceaw =&gt;'GLOBAL10', destaw =&gt; 'GLOBAL12', upgoptions =&gt; 'RENAME_TABLE=MY_OBJECT_MAP');
  
  -- Load and aggregate the data
  dbms_cube.build(script=&gt;'UNITS_CUBE, PRICE_AND_COST_CUBE');
   
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65762"></a><a id="ARPLS65763"></a><a id="ARPLS65763"></a><a id="ARPLS65762"></a><div class="props_rev_3"><a id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74" name="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74"></a><h4 id="ARPLS-GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74" class="sect4"><span class="enumeration_section">41.4.13 </span>VALIDATE_XML Procedure
                  </h4>
                  <div>
                     <p>This procedure checks the XML to assure that it is valid without committing the results to the database. It does not create an analytic workspace.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-7DE7D6F3-BF22-4D08-8218-717ED4EAC27C">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE.VALIDATE_XML
       (dirname               IN  VARCHAR2,
        filename              IN  VARCHAR2 ); 

DBMS_CUBE.VALIDATE_XML
       (in_xml                IN  CLOB ); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-9F50D738-DF71-469F-A099-A895F8A58397">Parameters</p>
                        <div class="tblformal" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-82A97B50-9918-4378-8849-89224196E6FC">
                           <p class="titleintable">Table 41-15 VALIDATE_XML Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="VALIDATE_XML Procedure Parameters" summary="DBMS_CUBE.VALIDATE_XML parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d202489e7680">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d202489e7683">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7688" headers="d202489e7680 ">
                                       <p><code class="codeph">dirname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7688 d202489e7683 ">
                                       <p>The case-sensitive name of a database directory.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7696" headers="d202489e7680 ">
                                       <p><code class="codeph">filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7696 d202489e7683 ">
                                       <p>The name of a file containing an XML template.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d202489e7704" headers="d202489e7680 ">
                                       <p><code class="codeph">IN_XML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d202489e7704 d202489e7683 ">
                                       <p>The name of a CLOB containing an XML template.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-E6E89F7E-1107-46DA-8696-B5FD435B4738">Usage Notes</p>
                        <p>You should always load a template into the same version and release of Oracle Database as the one used to generate the template. The XML may not be valid if it was generated by a different release of the software.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F474252B-38A9-4FE2-9B7A-01D938BC8A74__GUID-D81AC0B5-B106-4431-9E7B-BB1A659EB0AE">Example</p>
                        <p>This example reports a problem in the schema: </p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.validate_xml('UPGRADE_DIR', 'MYGLOBAL.XML');
BEGIN dbms_cube.validate_xml('UPGRADE_DIR', 'MYGLOBAL.XML'); END;
 
*
ERROR at line 1:
ORA-37162: OLAP error
'GLOBAL.PRICE_CUBE.$AW_ORGANIZATION': XOQ-01950: The AWCubeOrganization for
cube "GLOBAL.PRICE_CUBE" contains multiple BuildSpecifications with the same
name.
'GLOBAL.UNITS_CUBE.$AW_ORGANIZATION': XOQ-01950: The AWCubeOrganization for
cube "GLOBAL.UNITS_CUBE" contains multiple BuildSpecifications with the same
name.
XOQ-01400: invalid metadata objects
ORA-06512: at "SYS.DBMS_CUBE", line 411
ORA-06512: at "SYS.DBMS_CUBE", line 441
ORA-06512: at "SYS.DBMS_CUBE", line 501
ORA-06512: at "SYS.DBMS_CUBE", line 520
ORA-06512: at line 1
</pre><p>After the problems are corrected, the procedure reports no errors:</p><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_cube.validate_xml('UPGRADE_DIR', 'MYGLOBAL.XML');
 
PL/SQL procedure successfully completed.</pre><p>This example loads an XML template into a temporary CLOB, then validates it. The script is named <code class="codeph">GLOBAL.XML</code>, and it is located in a database directory named <code class="codeph">XML_DIR</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE xml_file = 'GLOBAL.XML';
 
SET ECHO ON;
SET SERVEROUT ON;
 
 
DECLARE
     xml_file     BFILE := bfilename('XML_DIR', '&amp;xml_file');
     in_xml       CLOB;
     out_xml      CLOB := NULL;
     dest_offset  INTEGER := 1;
     src_offset   INTEGER := 1;
     lang_context INTEGER := 0;
     warning      INTEGER;
BEGIN
     -- Setup the clob from a file
     DBMS_LOB.CREATETEMPORARY(in_xml, TRUE);
     DBMS_LOB.OPEN(in_xml, DBMS_LOB.LOB_READWRITE);
     DBMS_LOB.OPEN(xml_file, DBMS_LOB.FILE_READONLY);
     DBMS_LOB.LOADCLOBFROMFILE(in_xml, xml_file, DBMS_LOB.LOBMAXSIZE,
        dest_offset, src_offset, 0, lang_context, warning);
  
     -- Validate the xml
     DBMS_CUBE.VALIDATE_XML(in_xml);
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
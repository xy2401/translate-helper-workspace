<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This tutorial demonstrates how to create Oracle Label Security levels.">
      <meta name="description" content="This tutorial demonstrates how to create Oracle Label Security levels.">
      <title>Tutorial: Configuring Levels in Oracle Label Security</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide">
      <meta property="og:description" content="This tutorial demonstrates how to create Oracle Label Security levels.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96303-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-label-security-tutorials.html" title="Previous" type="text/html">
      <link rel="next" href="configuring-ols-compartments.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="OLSAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-label-security-tutorials.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuring-ols-compartments.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-label-security-tutorials.html" property="item" typeof="WebPage"><span property="name">Oracle Label Security Tutorials</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Tutorial: Configuring Levels in Oracle Label Security</li>
            </ol>
            <a id="GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" name="GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638"></a>
            
            <h2 id="OLSAG-GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" class="sect2"><span class="enumeration_chapter">8 </span>Tutorial: Configuring Levels in Oracle Label Security
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This tutorial demonstrates how to create Oracle Label Security levels. </p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-394CFFA4-2F49-4372-B982-B35C210B992A">About This Tutorial</a><br>In this tutorial, you will use the <code class="codeph">HR</code> schema to learn how to use Oracle Label Security levels.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6">Step 1: Create a Role and User Accounts</a><br>The role that you create will enable any user who is granted it to have the <code class="codeph">SELECT</code> privilege on the <code class="codeph">HR.EMPLOYEES</code> table. The user accounts are for the two Human Resources employees, Susan Mavris and Ida Neau.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501">Step 2: Create the Oracle Label Security Policy Container</a><br>As an Oracle Label Security administrator, you must create and then enable the policy container.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-48E80610-F446-4D56-A42E-5116CF631CC1">Step 3: Create the Two Level Components for the Oracle Label Security Policy</a><br>After you create the Oracle Label Security policy container, you are ready to create two levels to represent two different levels of sensitivity.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592">Step 4: Create the Data Labels for the Levels</a><br>A data label tags data records for use with the Oracle Label Security policy.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-7D011E64-63F8-4990-871B-39465C2CC3DF">Step 5: Set User Authorizations for the Oracle Label Security Policy</a><br>Setting user authorizations entails associating the user with the policy and the minimum and maximum levels that are associated with the Oracle Label Security policy. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D">Step 6: Apply the Oracle Label Security Policy to the HR Schema</a><br>After you apply the policy to the <code class="codeph">HR</code> schema, you must enable the policy association with <code class="codeph">HR</code>.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88">Step 7: Add the Policy Labels to the HR.EMPLOYEES Table Data</a><br>Both the Oracle Label Security administrator and the <code class="codeph">HR</code> user will add the policy labels to the <code class="codeph">HR.EMPLOYEES</code> table data in the <code class="codeph">EMPLOYEE_ID</code> column. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24">Step 8: Test the Oracle Label Security Policy</a><br>To test the policy, each user will try to query the <code class="codeph">HR.EMPLOYEES</code> table. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-levels.html#GUID-F48DC204-C45C-496A-9125-FBD568ADACC4">Step 9: Optionally, Remove the Oracle Label Security Policy Components</a><br>You can remove the Oracle Label Security policy, <code class="codeph">HR_ROLE</code> role, and users Ida Neau and Susan Mavris. 
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-label-security-tutorials.html" title="Part III provides tutorials on how to create Oracle Label Security policies.">Oracle Label Security Tutorials</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-394CFFA4-2F49-4372-B982-B35C210B992A" name="GUID-394CFFA4-2F49-4372-B982-B35C210B992A"></a><h3 id="OLSAG-GUID-394CFFA4-2F49-4372-B982-B35C210B992A" class="sect3">About This Tutorial</h3>
               <div>
                  <p>In this tutorial, you will use the <code class="codeph">HR</code> schema to learn how to use Oracle Label Security levels.
                  </p>
                  <p>The Human Resources representative, Susan Mavris, has an assistant working for her, Ida Neau. Susan Mavris must have access to all employee records, including records of employees who have left the company. Ida Neau must have access only to employees who are current. </p>
                  <p>You will create an Oracle Label Security policy that will use the following levels of sensitivity to govern access to current and former employees:</p>
                  <ul style="list-style-type: disc;" id="GUID-394CFFA4-2F49-4372-B982-B35C210B992A__UL_PBD_J4R_4GB">
                     <li><code class="codeph">SENSITIVE</code> enables access to current employees only. User Ida Neau will be assigned this level. 
                     </li>
                     <li><code class="codeph">HIGHLY_SENSITIVE</code> enables access to former employees. User Susan Mavris will be assigned this level. This level is a higher level than <code class="codeph">SENSITIVE</code>, which means that it will also provide access to rows protected by <code class="codeph">SENSITIVE</code>. In other words, Susan Mavris will have access to both former and current employee records. 
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6" name="GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6"></a><h3 id="OLSAG-GUID-1809C3F9-F89F-45C4-AA95-BCFCFFDAB1A6" class="sect3">Step 1: Create a Role and User Accounts</h3>
               <div>
                  <p>The role that you create will enable any user who is granted it to have the <code class="codeph">SELECT</code> privilege on the <code class="codeph">HR.EMPLOYEES</code> table. The user accounts are for the two Human Resources employees, Susan Mavris and Ida Neau.
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Log in to SQL*Plus as a user who has privileges to create roles, grant privileges, and create user accounts. </span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the role as follows:</span><div><pre class="oac_no_warn" dir="ltr">CREATE ROLE HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant the <code class="codeph">SELECT</code> privilege on <code class="codeph">HR.EMPLOYEES</code> to <code class="codeph">HR_ROLE</code>. </span><div><pre class="oac_no_warn" dir="ltr">GRANT SELECT ON HR.EMPLOYEES TO HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the user accounts for Susan Mavris and Ida Neau, and grant them the <code class="codeph">HR_ROLE</code> role. </span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT, HR_ROLE TO SMAVRIS IDENTIFIED BY <span class="italic">password</span>;
GRANT CONNECT, HR_ROLE TO INEAU IDENTIFIED BY <span class="italic">password</span>;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501" name="GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501"></a><h3 id="OLSAG-GUID-8E658D6A-FF7D-48E1-8DA2-E25C6976E501" class="sect3">Step 2: Create the Oracle Label Security Policy Container</h3>
               <div>
                  <p>As an Oracle Label Security administrator, you must create and then enable the policy container.</p>
                  <ol>
                     <li class="stepexpand"><span>Connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the policy.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
 SA_SYSDBA.CREATE_POLICY (
  policy_name      =&gt; 'HR_OLS_POL',
  column_name      =&gt; 'OLS_COL');
END;
/</pre><p>In this specification, the  <code class="codeph">default_options</code> parameter is omitted because you can add it later on in another procedure.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable the policy. </span><div><pre class="oac_no_warn" dir="ltr">EXEC SA_SYSDBA.ENABLE_POLICY ('HR_OLS_POL');</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-48E80610-F446-4D56-A42E-5116CF631CC1" name="GUID-48E80610-F446-4D56-A42E-5116CF631CC1"></a><h3 id="OLSAG-GUID-48E80610-F446-4D56-A42E-5116CF631CC1" class="sect3">Step 3: Create the Two Level Components for the Oracle Label Security Policy</h3>
               <div>
                  <p>After you create the Oracle Label Security policy container, you are ready to create two levels to represent two different levels of sensitivity.</p>
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the levels as follows:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_COMPONENTS.CREATE_LEVEL (
      policy_name =&gt; 'HR_OLS_POL',
      level_num   =&gt; 3000,
      short_name  =&gt; 'HS',
      long_name   =&gt; 'HIGHLY_SENSITIVE');

   SA_COMPONENTS.CREATE_LEVEL (
      policy_name =&gt; 'HR_OLS_POL',
      level_num   =&gt; 2000,
      short_name  =&gt; 'S',
      long_name   =&gt; 'SENSITIVE');
END;
/</pre><p>In this specification:</p>
                           <ul style="list-style-type: disc;" id="GUID-48E80610-F446-4D56-A42E-5116CF631CC1__UL_FGF_ZSR_4GB">
                              <li><code class="codeph">policy_name</code> associates the levels with the policy container that you just created. 
                              </li>
                              <li><code class="codeph">level_num</code> determines how much access the user can have. Level number <code class="codeph">3000</code> enables a user to have access to this level and any level number below it, in this case, level number <code class="codeph">2000</code>. In other words, a user who is authorized with the <code class="codeph">HIGHLY_SENSITIVE</code> level can also access data assigned to the <code class="codeph">SENSITIVE</code> level.
                              </li>
                              <li><code class="codeph">short_name</code> is a short-hand name for the <code class="codeph">long_name</code> of the level, and will be used in other procedures to refer to the <code class="codeph">long_name</code> version of the level. 
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592" name="GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592"></a><h3 id="OLSAG-GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592" class="sect3">Step 4: Create the Data Labels for the Levels</h3>
               <div>
                  <p>A data label tags data records for use with the Oracle Label Security policy.</p>
                  <div class="section">In this procedure, the data labels will designate the rows that users Susan Mavris and Ida Neau will see in the <code class="codeph">HR.EMPLOYEES</code> table. The rows labeled <code class="codeph">HS</code> will correspond to the <code class="codeph">HS</code> (<code class="codeph">HIGHLY_SENSITIVE</code>) level to be assigned to Susan Mavris, and the rows labeled <code class="codeph">S</code> will correspond with the <code class="codeph">S</code> (<code class="codeph">SENSITIVE</code>) level to be assigned to Ida Neau. 
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the data labels as follows:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_LABEL_ADMIN.CREATE_LABEL (
      policy_name  =&gt; 'HR_OLS_POL',
      label_tag    =&gt; 3100,
      label_value  =&gt; 'HS',
      data_label   =&gt; TRUE);

   SA_LABEL_ADMIN.CREATE_LABEL (
      policy_name  =&gt; 'HR_OLS_POL',
      label_tag    =&gt; 2100,
      label_value  =&gt; 'S',
      data_label   =&gt; TRUE);
END;
/</pre><p>In this specification:</p>
                           <ul style="list-style-type: disc;" id="GUID-6A1FE8EF-8990-418A-A416-5493B9FB7592__UL_FGF_ZSR_4GB">
                              <li><code class="codeph">label_tag</code> is used internally by Oracle Label Security to identify the level. Unlike levels, it does not govern any sort of hierarchy with the labels.
                              </li>
                              <li><code class="codeph">data_label</code> is set to <code class="codeph">TRUE</code> so that the label can be applied to row data.
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7D011E64-63F8-4990-871B-39465C2CC3DF" name="GUID-7D011E64-63F8-4990-871B-39465C2CC3DF"></a><h3 id="OLSAG-GUID-7D011E64-63F8-4990-871B-39465C2CC3DF" class="sect3">Step 5: Set User Authorizations for the Oracle Label Security Policy</h3>
               <div>
                  <p>Setting user authorizations entails associating the user with the policy and the minimum and maximum levels that are associated with the Oracle Label Security policy. </p>
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Authorize the users as follows:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'HR_OLS_POL',
      user_name    =&gt; 'SMAVRIS', 
      max_level    =&gt; 'HS',
      min_level    =&gt; 'S');

   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'HR_OLS_POL',
      user_name    =&gt; 'INEAU', 
      max_level    =&gt; 'S',
      min_level    =&gt; 'S');
END;
/</pre><p>In this specification, the <code class="codeph">def_level</code> (default level) and <code class="codeph">row_level</code> parameters are omitted so that their values can default to the <code class="codeph">max_level</code> parameter setting.
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D" name="GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D"></a><h3 id="OLSAG-GUID-857EDF94-2858-4F8A-9CEC-14B74B6DB69D" class="sect3">Step 6: Apply the Oracle Label Security Policy to the HR Schema</h3>
               <div>
                  <p>After you apply the policy to the <code class="codeph">HR</code> schema, you must enable the policy association with <code class="codeph">HR</code>.
                  </p>
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Apply the policy to the <code class="codeph">HR</code> schema.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_POLICY_ADMIN.APPLY_TABLE_POLICY (
    policy_name    =&gt; 'HR_OLS_POL',
    schema_name    =&gt; 'HR', 
    table_name     =&gt; 'EMPLOYEES',
    table_options  =&gt; 'READ_CONTROL');
END;
/</pre><p>Earlier, when you created the policy with the <code class="codeph">SA_SYSDBA.CREATE_POLICY</code> procedure, you did not set the <code class="codeph">default_options</code> parameter, which defines the policy enforcement options. Therefore, you must set the policy enforcement here, with the <code class="codeph">table_options</code> parameter of <code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>. <code class="codeph">READ_CONTROL</code> enforces the OLS policy during the <code class="codeph">SELECT</code> statement processing that the users will perform later. (It also applies to <code class="codeph">UPDATE</code> and <code class="codeph">DELETE</code> statement processing.)
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable the policy's association with the <code class="codeph">HR</code> schema.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_POLICY_ADMIN.ENABLE_TABLE_POLICY (
      policy_name =&gt; 'HR_OLS_POL',
      schema_name =&gt; 'HR',
      table_name  =&gt; 'EMPLOYEES');
END;
/</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88" name="GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88"></a><h3 id="OLSAG-GUID-A156343A-A18F-4955-A7C0-7F87DF8CFC88" class="sect3">Step 7: Add the Policy Labels to the HR.EMPLOYEES Table Data</h3>
               <div>
                  <p>Both the Oracle Label Security administrator and the <code class="codeph">HR</code> user will add the policy labels to the <code class="codeph">HR.EMPLOYEES</code> table data in the <code class="codeph">EMPLOYEE_ID</code> column. 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant the <code class="codeph">READ</code> privilege to the <code class="codeph">HR_OLS_POL</code> policy for the <code class="codeph">HR</code> user.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_USER_ADMIN.SET_USER_PRIVS (
      policy_name =&gt; 'HR_OLS_POL',
      user_name   =&gt; 'HR',
      privileges  =&gt; 'READ');
END;
/</pre></div>
                     </li>
                     <li class="stepexpand"><span>Connect as the <code class="codeph">HR</code> user.</span><div><pre class="oac_no_warn" dir="ltr">connect hr
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Perform the following <code class="codeph">UPDATE</code> statement to apply the <code class="codeph">HIGHLY_SENSITIVE</code> level to the employee IDs of users who have left the company.</span><div>This <code class="codeph">UPDATE</code> statement controls the access that Susan Mavris will have to the <code class="codeph">HR.EMPLOYEES</code> table because she is authorized for the <code class="codeph">HIGHLY_SENSITIVE</code> level. 
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE employees
SET    ols_col = CHAR_TO_LABEL('HR_OLS_POL','HS')
WHERE  UPPER(employee_id) IN (200, 101, 102, 176, 201, 122, 114);</pre></div>
                     </li>
                     <li class="stepexpand"><span>Perform the following <code class="codeph">UPDATE</code> statement to apply the <code class="codeph">SENSITIVE</code> level to the employee IDs of current employees in the company.</span><div>This <code class="codeph">UPDATE</code> statement controls the access that Ida Neau will have to the <code class="codeph">HR.EMPLOYEES</code> table because she is authorized for the <code class="codeph">SENSITIVE</code> level. 
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">UPDATE employees
SET    ols_col = CHAR_TO_LABEL('HR_OLS_POL','S')
WHERE  UPPER(employee_id) NOT IN (200, 101, 102, 176, 201, 122, 114);</pre><p>This <code class="codeph">UPDATE</code> statement translates to "Apply the <code class="codeph">SENSITIVE</code> label to any employee who is not a former employee."
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24" name="GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24"></a><h3 id="OLSAG-GUID-4F56420D-96F0-4B23-A634-B39DA37FCB24" class="sect3">Step 8: Test the Oracle Label Security Policy</h3>
               <div>
                  <p>To test the policy, each user will try to query the <code class="codeph">HR.EMPLOYEES</code> table. 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Connect as user Ida Neau.</span><div><pre class="oac_no_warn" dir="ltr">connect ineau
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Set column widths for the table output. </span><div><pre class="oac_no_warn" dir="ltr">column first_name format a25
column last_name format a25
column ols_label format a10</pre></div>
                     </li>
                     <li class="stepexpand"><span>Execute the following query:</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME, LAST_NAME, EMPLOYEE_ID, 
LABEL_TO_CHAR(OLS_COL) OLS_LABEL 
FROM HR.EMPLOYEES 
ORDER BY OLS_COL;</pre><p>The output should be similar to the following:</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME                LAST_NAME                 EMPLOYEE_ID OLS_LABEL
------------------------- ------------------------- ----------- ----------
Steven                    King                              100 S
Alexander                 Hunold                            103 S
Bruce                     Ernst                             104 S
David                     Austin                            105 S
Valli                     Pataballa                         106 S
Diana                     Lorentz                           107 S
Nancy                     Greenberg                         108 S
Daniel                    Faviet                            109 S
...
100 rows selected
</pre><p>Because Ida Neau was assigned the <code class="codeph">SENSITIVE</code> label, the output in the column <code class="codeph">OLS_LABEL</code> is <code class="codeph">S</code> (for <code class="codeph">SENSITIVE</code>) only. 100 rows are returned.
                           </p>
                           <p>Note that the Oracle Label Security restriction applies to any <code class="codeph">SELECT</code> query the user makes. For example, if Ida Neau performs a <code class="codeph">SELECT COUNT(*) FROM HR.EMPLOYEES;</code> query, then it would return these 100 rows, not the full 107.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Connect as user Susan Mavris. </span><div><pre class="oac_no_warn" dir="ltr">connect smavris
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Execute the same query that Ida Neau executed. </span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME, LAST_NAME, EMPLOYEE_ID, 
LABEL_TO_CHAR(OLS_COL) OLS_LABEL 
FROM HR.EMPLOYEES 
ORDER BY OLS_COL;</pre><p>The output should be similar to the following:</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME                LAST_NAME                 EMPLOYEE_ID OLS_LABEL
------------------------- ------------------------- ----------- ----------
Steven                    King                              100 S
Alexander                 Hunold                            103 S
...
William                   Gietz                             206 S
Neena                     Kochhar                           101 HS
Lex                       De Haan                           102 HS
Den                       Raphaely                          114 HS
Michael                   Hartstein                         201 HS
Jonathon                  Taylor                            176 HS
Jennifer                  Whalen                            200 HS
Payam                     Kaufling                          122 HS

107 rows selected</pre><p>Because Susan Mavris was assigned the <code class="codeph">HIGHLY_SENSITIVE</code> label, the output in the column <code class="codeph">OLS_LABEL</code> is <code class="codeph">HS</code> (for <code class="codeph">HIGHLY_SENSITIVE</code>) and <code class="codeph">S</code> (for <code class="codeph">SENSITIVE</code>). 107 rows are returned.
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F48DC204-C45C-496A-9125-FBD568ADACC4" name="GUID-F48DC204-C45C-496A-9125-FBD568ADACC4"></a><h3 id="OLSAG-GUID-F48DC204-C45C-496A-9125-FBD568ADACC4" class="sect3">Step 9: Optionally, Remove the Oracle Label Security Policy Components</h3>
               <div>
                  <p>You can remove the Oracle Label Security policy, <code class="codeph">HR_ROLE</code> role, and users Ida Neau and Susan Mavris. 
                  </p>
                  <div class="section">
                     <p>However, if you want to try the tutorial on how to create Oracle Label Security compartments, then do not remove these components. The tutorial on compartments builds on this tutorial on levels. </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Drop the Oracle Label Security policy. </span><div>This procedure also removes the levels and the <code class="codeph">OLS_COL</code> column from the <code class="codeph">HR.EMPLOYEES</code> table.
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_SYSDBA.DROP_POLICY ( 
    policy_name  =&gt; 'HR_OLS_POL',
    drop_column  =&gt; TRUE);
END;
/</pre></div>
                     </li>
                     <li class="stepexpand"><span>Connect as user who has privileges to drop roles and user accounts. </span><div>For example:<pre class="oac_no_warn" dir="ltr">connect sec_admin
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Drop the <code class="codeph">HR_ROLE</code> role. </span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE HR_ROLE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Drop the <code class="codeph">ineau</code> and <code class="codeph">smavris</code> accounts. </span><div><pre class="oac_no_warn" dir="ltr">DROP USER INEAU;
DROP USER SMAVRIS;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="configuring-ols-compartments.html#GUID-714BF1A7-9275-457A-BCF8-C2F2C3D353BD" title="This tutorial demonstrates how to create Oracle Label Security compartments.">Tutorial: Configuring Compartments in Oracle Label Security</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-levels.html#GUID-6FDDF617-FB75-4707-91DD-0FEF079AD638" title="This tutorial demonstrates how to create Oracle Label Security levels.">Tutorial: Configuring Levels in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Tip Internals</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="F18239-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="data-type-conversion-oracle-database-gateway-appc.html" title="Previous" type="text/html">
      <link rel="next" href="admin-utility-samples-oracle-database-gateway-appc.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User's Guide">
    <meta name="dcterms.isVersionOf" content="APPUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-type-conversion-oracle-database-gateway-appc.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="admin-utility-samples-oracle-database-gateway-appc.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Tip Internals</li>
            </ol>
            <a id="GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17" name="GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17"></a><a id="APPUG130"></a>
            
            <h2 id="APPUG-GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17" class="sect2"><span class="enumeration_appendix">E </span> Tip Internals
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>PGAU generates complete and operational TIPs for most circumstances. <a id="d52678e30" class="indexterm-anchor"></a><a id="d52678e34" class="indexterm-anchor"></a><a id="d52678e38" class="indexterm-anchor"></a><a id="d52678e42" class="indexterm-anchor"></a>TIP internals information is provided to assist you in diagnosing problems with PGAU-generated TIPs, and in writing custom TIPs, if you choose to do so. 
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><span class="bold">If your gateway is using the SNA communication protocol:</span> 
                     </p>
                     <p>This appendix refers to a sample called <code class="codeph">pgadb2i</code>. The source for this TIP is in file <a id="d52678e58" class="indexterm-anchor"></a><a id="d52678e60" class="indexterm-anchor"></a><code class="codeph">pgadb2i.sql</code> in the <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS</code> directory for Microsoft Windows and <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code> directory for UNIX based systems.
                     </p>
                  </li>
                  <li>
                     <p><span class="bold">If your gateway is using the TCP/IP communication protocol:</span></p>
                     <p>This appendix refers to a sample called <code class="codeph">pgaims</code>. The source for this TIP is in file <code class="codeph">pgtflipd.sql</code> in the <code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory for Microsoft Windows and <code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS</code> directory on UNIX based systems. 
                     </p>
                  </li>
               </ul>
               <p></p>
               <p>Toipics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="tip-internals-oracle-database-gateway-appc.html#GUID-18D221F7-64EA-4089-8C63-429F8EA70625">Background Reading</a></p>
                  </li>
                  <li>
                     <p><a href="tip-internals-oracle-database-gateway-appc.html#GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D">PL/SQL Package and TIP File Separation</a></p>
                  </li>
               </ul>
            </div><a id="APPUG1121"></a><div class="props_rev_3"><a id="GUID-18D221F7-64EA-4089-8C63-429F8EA70625" name="GUID-18D221F7-64EA-4089-8C63-429F8EA70625"></a><h3 id="APPUG-GUID-18D221F7-64EA-4089-8C63-429F8EA70625" class="sect3">Background Reading</h3>
               <div>
                  <div class="section">
                     <p>Several topics are important to understanding <a id="d52678e138" class="indexterm-anchor"></a>TIP operation and development; following is a list of concepts that are key to TIP operation and suggested sources to which you can refer for more information.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For information about PL/SQL Packages, refer to the <a href="../arpls/index.html" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>.
                           </p>
                        </li>
                        <li>
                           <p>For information about PGA Application Concepts, refer to the following chapters in this guide:</p>
                        </li>
                        <li>
                           <p><span class="bold">If your communication protocol is SNA:</span> refer to <a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788"> Client Application Development (SNA Only)</a>;
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">If your communication protocol is TCP/IP:</span> refer to <a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC"> Client Application Development (TCP/IP Only)</a>.
                           </p>
                        </li>
                        <li>
                           <p>For information about PGA RPC Interface, refer to <a href="oracle-database-gateway-appc-rpc-interface.html#GUID-E715B6DF-B773-4D0D-9382-643472B34FC3"> Gateway RPC Interface</a>.
                           </p>
                        </li>
                        <li>
                           <p>For information about PGA <code class="codeph">UTL_PG</code> Interface, refer to <a href="oracle-database-gateway-appc-utl_pg-interface.html#GUID-A6AC77AC-DE2C-476B-AC68-DF8E8F9C600E"> The UTL_PG Interface</a>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG1122"></a><div class="props_rev_3"><a id="GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D" name="GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D"></a><h3 id="APPUG-GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D" class="sect3">PL/SQL Package and TIP File Separation</h3>
               <div>
                  <div class="section">
                     <p>PGAU <a id="d52678e224" class="indexterm-anchor"></a><a id="d52678e226" class="indexterm-anchor"></a><code class="codeph">GENERATE</code> writes each output TIP into a standard <a id="d52678e233" class="indexterm-anchor"></a>PL/SQL package specification file and body file. This separation is beneficial and important. Refer to the <a href="../adfns/index.html" target="_blank"><span class="italic">Oracle Database Development Guide </span></a>and the <a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information. Also refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-3ABF57C3-C8F6-4DA7-9D7F-C415C805A402">GENERATE</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information about building the PL/SQL package.
                     </p>
                     <p><a id="d52678e257" class="indexterm-anchor"></a>TIPs are <a id="d52678e262" class="indexterm-anchor"></a>PL/SQL packages. Any time a package specification is recompiled, all objects which depend on that package are invalidated and implicitly recompiled as they are referenced, even if the specification did not change.
                     </p>
                     <p>Objects which depend on a <a id="d52678e267" class="indexterm-anchor"></a>TIP specification include client applications that call the TIP to interact with remote host transactions. 
                     </p>
                     <p>It might be important to change the TIP body for the following reasons:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle ships maintenance which affects the TIP body.</p>
                        </li>
                        <li>
                           <p>Oracle ships maintenance for the <code class="codeph">UTL_RAW</code> or <code class="codeph">UTL_PG</code> conversion functions upon which the TIP body relies. 
                           </p>
                           <p>Refer to <a href="oracle-database-gateway-appc-utl_pg-interface.html#GUID-A6AC77AC-DE2C-476B-AC68-DF8E8F9C600E"> The UTL_PG Interface</a> for more detailed information about these functions.
                           </p>
                        </li>
                        <li>
                           <p>If the remote host network or program location parameters have changed. Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-EC8B6848-0566-45CD-BA08-78F15ED0EEB4">DEFINE TRANSACTION</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information 
                           </p>
                        </li>
                     </ul>
                     <p>Provided that the TIP specification does not need to change or be recompiled, the <a id="d52678e305" class="indexterm-anchor"></a>TIP body can be regenerated and recompiled to pick up changes without causing invalidation and implicit recompilation of client applications that call the TIP.
                     </p>
                     <p>It is for this reason that PGAU now separates output TIPs into specification and body files. Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-3ABF57C3-C8F6-4DA7-9D7F-C415C805A402">GENERATE</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for a discussion of file identification.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPUG1123"></a><div class="props_rev_3"><a id="GUID-94D30139-FE31-4A3C-9BB4-96DB121EB29D" name="GUID-94D30139-FE31-4A3C-9BB4-96DB121EB29D"></a><h4 id="APPUG-GUID-94D30139-FE31-4A3C-9BB4-96DB121EB29D" class="sect4">Independent TIP Body Changes</h4>
                  <div>
                     <div class="section">
                        <p><a id="d52678e353" class="indexterm-anchor"></a>Independent TIP body changes are internal and require no change to the TIP specification. Examples of such changes include: a change in <code class="codeph">UTL_RAW</code> or <code class="codeph">UTL_PG</code> conversions, inclusion of diagnostics, or a change to network transaction parameters.
                        </p>
                        <p>In these cases, when PGAU is used to regenerate the TIP, the new <a id="d52678e366" class="indexterm-anchor"></a>TIP specification file can be saved or discarded, but should not be recompiled. The new TIP body should be recompiled under <a id="d52678e369" class="indexterm-anchor"></a><a id="d52678e373" class="indexterm-anchor"></a>SQL*Plus. Provided that the TIP body change is independent, the new body compilation completes without errors and the former TIP specification remains valid.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="APPUG1124"></a><div class="props_rev_3"><a id="GUID-C2506E37-6A46-447A-8093-4D3B5E195C0E" name="GUID-C2506E37-6A46-447A-8093-4D3B5E195C0E"></a><h5 id="APPUG-GUID-C2506E37-6A46-447A-8093-4D3B5E195C0E" class="sect5">Determine if a Specification Has Remained Valid</h5>
                     <div>
                        <div class="section">
                           <p>To determine if a specification has remained valid, issue the following statements from SQL*Plus, depending upon your communication protocol:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">If your gateway is using the SNA communication protocol,</span> issue the following:
                                 </p><pre class="oac_no_warn" dir="ltr">SQL&gt;  column ddl_date format A22 heading 'LAST_DDL'
SQL&gt; select object_name,
  2   object_type,
  3   to_char(last_ddl_time,'MON-DD-YY HH:MM:SS') ddl_date,
  4   status
  5   from all_objects where owner = 'PGAADMIN' 
  6   order by object_type, object_name;

OBJECT_NAME  OBJECT_TYPE   LAST_DDL                 STATUS 
-----------  -----------   --------------------     ---------
PGADB2I      PACKAGE       NOV-24-1999 09:09:13     VALID
PGADB2I      PACKAGE BODY  NOV-24-1999 09:11:44     VALID
DB2IDRIV     PROCEDURE     DEC-30-1999 12:12:14     VALID
DB2IDRVM     PROCEDURE     DEC-30-1999 12:12:53     VALID
DB2IFORM     PROCEDURE     DEC-14-1999 11:12:24     VALID
</pre><p>The <code class="codeph">LAST_DDL</code> column is the date and time at which the last DDL change against the object was done. It shows that the order of compilation was:
                                 </p><pre class="oac_no_warn" dir="ltr">PGADB2I PACKAGE (the specification)
DB2IDRVM PROCEDURE (1st client application depending on PGADB2I)
DB2IFORM PROCEDURE (2nd client application depending on PGADB2I)
DB2IDRIV PROCEDURE (3rd client application depending on PGADB2I)
PGADB2I PACKAGE BODY (a recompilation of the body)
</pre><p>Note that the recompilation of the body does not invalidate its dependent object, the specification, or the client application indirectly.</p>
                              </li>
                              <li>
                                 <p><span class="bold">If your gateway is using the TCP/IP communication protocol,</span> issue the following fro SQL*Plus:
                                 </p><pre class="oac_no_warn" dir="ltr">SQL&gt;  column ddl_date format A22 heading 'LAST_DDL'
SQL&gt; select object_name,
  2   object_type,
  3   to_char(last_ddl_time,'MON-DD-YY HH:MM:SS') ddl_date,
  4   status
  5   from all_objects where owner = 'PGAADMIN' 
  6   order by object_type, object_name;

OBJECT_NAME  OBJECT_TYPE   LAST_DDL                 STATUS 
-----------  -----------   --------------------     ---------
PGTFLIP      PACKAGE       APR-24-03 03:04:58       VALID
PGTFLIP      PACKAGE BODY  APR-24-03 03:04:02       VALID
PGTFLIPD     PROCEDURE     APR-24-03 03:04:09       VALID</pre><p>The <code class="codeph">LAST_DDL</code> column is the date and time at which the last DDL change against the object was done. It shows that the order of compilation was:
                                 </p><pre class="oac_no_warn" dir="ltr">PGTFLIP PACKAGE (the specification)
PGTFLIPD PROCEDURE (client application depending on PGADB2I)
PGTFLIP PACKAGE BODY (a recompilation of the body)
</pre></li>
                           </ul>
                           <p>Note that the recompilation of the body does not invalidate its dependent object, the specification, or the client application indirectly.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="APPUG1125"></a><div class="props_rev_3"><a id="GUID-F2E56692-C475-4B8F-88EF-3994D1E5F7E1" name="GUID-F2E56692-C475-4B8F-88EF-3994D1E5F7E1"></a><h4 id="APPUG-GUID-F2E56692-C475-4B8F-88EF-3994D1E5F7E1" class="sect4">Dependent TIP Body or Specification Changes</h4>
                  <div>
                     <p>You can also change the data structures or call exchange sequences of the remote host transaction. However, this kind of change is exposed to dependent client applications because the public datatypes or functions in the <a id="d52678e497" class="indexterm-anchor"></a>TIP specification will also change and necessitate recompilation, which in turn causes the Oracle database to recompile such dependent client applications.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">If your gateway is using the SNA communication protocol</span>, issue the following:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; column ddl_date format A22 heading 'LAST_DDL'
SQL&gt; select object_name,
  2   object_type,
  3   to_char(LAST_DDL_TIME,'MON-DD-YY HH:MM:SS') ddl_date,
  4   status
  5   from all_objects where owner = 'PGAADMIN'
  6   order by object_type, object_name;

OBJECT_NAME    OBJECT_TYPE      LAST_DDL                 STATUS
----------     -----------      ---------------------    ---------
PGADB2I        PACKAGE          NOV-24-1999 09:09:13     VALID
PGADB2I        PACKAGE BODY     NOV-24-1999 09:11:44     INVALID
DB2IDRIV       PROCEDURE        DEC-30-1999 12:12:14     INVALID
DB2IDRVM       PROCEDURE        DEC-30-1999 12:12:53     INVALID
DB2IFORM       PROCEDURE        DEC-14-1999 11:12:24     INVALID
</pre></li>
                        <li>
                           <p><span class="bold">If your gateway is using the TCP/IP communication protocol,</span> issue the following:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; column ddl_date format A22 heading 'LAST_DDL'
SQL&gt; select object_name,
  2   object_type,
  3   to_char(LAST_DDL_TIME,'MON-DD-YY HH:MM:SS') ddl_date,
  4   status
  5   from all_objects where owner = 'PGAADMIN'
  6   order by object_type, object_name;

OBJECT_NAME    OBJECT_TYPE      LAST_DDL                 STATUS
----------     -----------      ---------------------    ---------
PGTFLIP        PACKAGE          APR-24-03 03:04:58       VALID
PGTFLIP        PACKAGE BODY     APR-24-03 05:03:52       INVALID
PGTFLIP        PROCEDURE        APR-24-03 05:04:29       INVALID
 </pre></li>
                     </ul>
                  </div><a id="APPUG1126"></a><div class="props_rev_3"><a id="GUID-AD6729E2-14FF-4814-A964-2F7A91EB2648" name="GUID-AD6729E2-14FF-4814-A964-2F7A91EB2648"></a><h5 id="APPUG-GUID-AD6729E2-14FF-4814-A964-2F7A91EB2648" class="sect5">Recompile the TIP Body</h5>
                     <div>
                        <p>Note that the recompilation of the specification has invalidated its dependent objects, the three client applications in addition to the package body. To complete these changes, the body must be recompiled to bring it into compliance with the specification and then the three client applications could be compiled manually, or the Oracle database compiles them automatically as they are referenced.</p>
                        <p>If the client applications are recompiled by the Oracle database as they are referenced, there is a one-time delay during recompilation.</p>
                        <p><a id="d52678e552" class="indexterm-anchor"></a><a id="d52678e556" class="indexterm-anchor"></a>Recompilation errors in the client application, if any, are due to: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>customer changes in the client application source</p>
                           </li>
                           <li>
                              <p>an altered PG DD definition for the TIP if the TIP has been regenerated</p>
                           </li>
                           <li>
                              <p>the wrong version being generated from multiple transaction entry versions saved in the PG DD if the TIP has been regenerated</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="APPUG1127"></a><div class="props_rev_3"><a id="GUID-61FDA096-F183-4593-A501-909ED485BE19" name="GUID-61FDA096-F183-4593-A501-909ED485BE19"></a><h4 id="APPUG-GUID-61FDA096-F183-4593-A501-909ED485BE19" class="sect4">Inadvertent Alteration of TIP Specification</h4>
                  <div>
                     <p>If you make a mistake when you generate a tip (for example, if you alter a PG DD transaction definition, or if you have inadvertently specified the wrong version during regeneration), then the recompiled body will not match the stored specification; as a result, the Oracle database would invalidate the specification and any dependent client applications.</p>
                     <p>You may have to regenerate and recompile the TIP and its dependent client applications to restore correct operation.</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
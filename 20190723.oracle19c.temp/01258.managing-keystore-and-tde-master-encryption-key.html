<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">
      <meta name="description" content="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">
      <title>Managing the Keystore and the Master&nbsp;Encryption Key</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Security Guide ">
      <meta property="og:description" content="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Security Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96301-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-transparent-data-encryption.html" title="Previous" type="text/html">
      <link rel="next" href="managing-keystores-encryption-keys-in-united-mode.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide">
    <meta name="dcterms.isVersionOf" content="ASOAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-transparent-data-encryption.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-keystores-encryption-keys-in-united-mode.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Security Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">Using Transparent Data Encryption</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Managing the Keystore and the Master&nbsp;Encryption Key</li>
            </ol>
            <a id="GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" name="GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962"></a><a id="ASOAG10475"></a>
            
            <h2 id="ASOAG-GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" class="sect2"><span class="enumeration_chapter">4 </span>Managing the Keystore and the Master&nbsp;Encryption Key
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076">Managing the Keystore</a><br>You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4">Managing the TDE Master Encryption Key</a><br>You can manage the TDE master encryption key in several ways.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810">Storing Oracle Database Secrets</a><br>Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368">Storing Oracle GoldenGate Secrets in a Keystore</a><br>You can store Oracle GoldenGate secrets in Transparent Data Encryption keystores.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="asopart1.html" title="Part I describes how to use Transparent Data Encryption.">Using Transparent Data Encryption</a></p>
                  </div>
               </div>
            </div>
            <a id="ASOAG10311"></a><div class="props_rev_3"><a id="GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" name="GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076"></a><h3 id="ASOAG-GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" class="sect3">Managing the Keystore</h3>
               <div>
                  <p>You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699">Performing Operations That Require a Keystore Password</a><br>Many <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations require access to a keystore password, for both software and hardware keystores. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C">Changing the Password of a Software Keystore</a><br>Oracle Database enables you to easily change password-protected software keystore passwords. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3">Changing the Password of a Hardware Keystore</a><br>To change the password of a hardware keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12">Configuring an External Store for a Keystore Password</a><br>An external store for a keystore password stores the keystore password in a centrally accessed and managed location.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0">Backing Up Password-Protected Software Keystores</a><br>When you back up a password-protected software keystore, you can create a backup identifier string to describe the backup type. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5">How the V$ENCRYPTION_WALLET View Interprets Backup Operations</a><br>The <code class="codeph">BACKUP</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view indicates a how a copy of the keystore was created. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30">Backups of the Hardware Keystore</a><br>You cannot use Oracle Database to back up hardware keystores. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1">Merging Software Keystores</a><br>You can merge software keystores in a variety of ways.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED">Moving a TDE Master Encryption Key into a New Keystore</a><br>You can move an existing TDE master encryption key into a new keystore from an existing software password keystore. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4">Moving a Software Keystore to a New Location</a><br>You move a software keystore to a new location after you have updated the <code class="codeph">WALLET_ROOT</code> parameter. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC">Moving a Software Keystore Out of Automatic Storage Management</a><br>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to move a software keystore out Automatic Storage Management. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436">Migrating Between a Software Password Keystore and a Hardware Keystore</a><br>You can migrate between password-protected software keystores and hardware keystores.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8">Migration of Keystores to and from Oracle Key Vault</a><br>You can use Oracle Key Vault to migrate both software and hardware keystores to and from Oracle Key Vault. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956">Configuring Keystores for Automatic Storage Management</a><br>You can store a software keystore on an Automatic Storage Management (ASM) disk group.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402">Closing a Keystore</a><br>You can manually close software and hardware keystores.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C">Backup and Recovery of Encrypted Data</a><br>For software keystores, you cannot access encrypted data without the TDE master encryption key. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F">Dangers of Deleting Keystores</a><br>Oracle strongly recommends that you do not delete keystores until you have moved the keystore encryption key to a new keystore. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">Managing the Keystore and the Master&nbsp;Encryption Key</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" name="GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699"></a><h4 id="ASOAG-GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" class="sect4">Performing Operations That Require a Keystore Password</h4>
                  <div>
                     <p>Many <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations require access to a keystore password, for both software and hardware keystores. 
                     </p>
                     <p>In some cases, a software keystore depends on an auto-login keystore before the operation can succeed. The auto-login keystore must be closed and the password-protected keystore must be opened before the password can be accessed. Auto-login keystores open automatically when they are configured and a key is requested. They are generally used for operations where the keystore could be closed but a database operation needs a key (for example, after the database is restarted). Because the auto-login keystore opens automatically, it can be retrieved to perform a database operation without manual intervention. However, some keystore operations that require the keystore password cannot be performed when the auto-login keystore is open. The auto-login keystore must be closed and the password-protected keystore must be opened for the keystore operations that require a password. </p>
                     <p>In a multitenant environment, the re-opening of keystores affects other PDBs. For example, an auto-login keystore in the root must be accessible by the PDBs in the CDB for this root. </p>
                     <p>You can temporarily open the keystore by including the <code class="codeph">FORCE KEYSTORE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement when you perform the following operations: rotating a keystore password; creating, using, rekeying, tagging, importing, exporting, migrating, or reverse migrating encryption keys; opening or backing up keystores; adding, updating, or deleting secret keystores. In a multitenant environment, if no keystore is open in the root, then <code class="codeph">FORCE KEYSTORE</code> opens the password-protected keystore in the root. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10312"></a><div class="props_rev_3"><a id="GUID-56595198-9FD2-4857-9BB9-D908BA89904C" name="GUID-56595198-9FD2-4857-9BB9-D908BA89904C"></a><h4 id="ASOAG-GUID-56595198-9FD2-4857-9BB9-D908BA89904C" class="sect4">Changing the Password of a Software Keystore</h4>
                  <div>
                     <p>Oracle Database enables you to easily change password-protected software keystore passwords. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5">About Changing the Password of a Password-Protected Software Keystore</a><br>You can only change the password for protected-protected software keystores. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-530B3EDF-393D-41C8-A393-B643DF0143A0">Changing the Password-Protected Software Keystore Password</a><br>To change the password of a password-protected software keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10518"></a><div class="props_rev_3"><a id="GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5" name="GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5"></a><h5 id="ASOAG-GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5" class="sect5">About Changing the Password of a Password-Protected Software Keystore</h5>
                     <div>
                        <p>You can only change the password for protected-protected software keystores. </p>
                        <p>You can change this password at any time, as per the security policies, compliance guidelines, and other security requirements of your site. As part of the command to change the password, you will be forced to specify the <code class="codeph">WITH BACKUP</code> clause, and thus forced to make a backup of the current keystore. During the password change operation, Transparent Data Encryption operations such as encryption and decryption will continue to work normally. 
                        </p>
                        <p>You can change this password at any time. You may want to change this password if you think it was compromised. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle Database enables you to easily change password-protected software keystore passwords.">Changing the Password of a Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10519"></a><div class="props_rev_3"><a id="GUID-530B3EDF-393D-41C8-A393-B643DF0143A0" name="GUID-530B3EDF-393D-41C8-A393-B643DF0143A0"></a><h5 id="ASOAG-GUID-530B3EDF-393D-41C8-A393-B643DF0143A0" class="sect5">Changing the Password-Protected Software Keystore Password</h5>
                     <div>
                        <p>To change the password of a password-protected software keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Change the password of the password-protected software keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
[FORCE KEYSTORE] 
IDENTIFIED BY
<span class="italic">old_password</span> SET <span class="italic">new_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">old_password</code></span> is the current keystore password that you want to change.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">new_password</code></span> is the new password that you will set for the keystore.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> creates a backup of the current keystore before the password is changed. You must include this clause.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">backup_identifier</code></span> specifies an optional identifier string for the backup that is created. The <span class="italic"><code class="codeph">backup_identifier</code></span> is added to the name of the backup file. Enclose <span class="italic"><code class="codeph">backup_identifier</code></span> in single quotation marks ('&nbsp;'). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time_stamp</code></span><code class="codeph">_emp_key_pwd_change.p12</code>).
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example backs up the current keystore and then changes the password for the keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
FORCE KEYSTORE
IDENTIFIED BY
<span class="italic">old_password</span> SET <span class="italic">new_password</span> 
WITH BACKUP USING 'pwd_change';

keystore altered.</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle Database enables you to easily change password-protected software keystore passwords.">Changing the Password of a Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10397"></a><div class="props_rev_3"><a id="GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3" name="GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3"></a><h4 id="ASOAG-GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3" class="sect4">Changing the Password of a Hardware Keystore</h4>
                  <div>
                     <p>To change the password of a hardware keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                              </p>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                           <li>
                              <p>Close the hardware keystore.</p>
                              <p>For example, for an HSM:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY "psmith:<span class="italic">password</span>";
</pre><p>For a keystore whose password is stored externally:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY EXTERNAL STORE;</pre></li>
                           <li>
                              <p>From the hardware security module management interface, create a new hardware security module password. </p>
                           </li>
                           <li>
                              <p>In SQL*Plus, open the hardware keystore.</p>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "psmith:<span class="italic">new_password</span>";

ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY EXTERNAL STORE;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2" title="To close a hardware keystore, you must use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE CLOSE clause.">Closing a Hardware Keystore</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" title="To open a hardware keystore, use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Opening a Hardware Keystore</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" name="GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12"></a><h4 id="ASOAG-GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" class="sect4">Configuring an External Store for a Keystore Password</h4>
                  <div>
                     <p>An external store for a keystore password stores the keystore password in a centrally accessed and managed location.</p>
                     <div class="section">An external store for a password is useful for situations in which you use automated tools to perform Transparent Data Encryption operations that require a password, when the scripts that run the automated tools include hard-coded passwords. To avoid hard-coding the password in a script, you can store this password in an external store on the database server. In a multitenant environment, different PDBs can make use of the external store. </div>
                     <!-- class="section" -->
                     <div class="section">You must complete the following steps before you use the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. 
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Set the external keystore credential location by using one of the following methods:</span><ul>
                              <li>Run the <code class="codeph">ALTER SYSTEM</code> statement for the <code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code> parameter. For example:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION = "/etc/ORACLE/WALLETS/orcl/external_store" SCOPE = SPFILE;</pre></li>
                              <li>Edit the <code class="codeph">init.ora</code> file for the database instance. For example:<pre class="oac_no_warn" dir="ltr">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION = "/etc/ORACLE/WALLETS/orcl/external_store"</pre><p>By default, the <code class="codeph">init.ora</code> file is located in the <code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span>/dbs</code> directory or in the location set by the <code class="codeph">TNS_ADMIN</code> environment variable.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>Log in as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege and who has the <code class="codeph">ALTER SYSTEM</code> system privilege.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span>
Connected.</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create an auto-login keystore that contains the keystore password, by including the <code class="codeph">ADD SECRET</code> clause to the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. </span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD SECRET '<span class="italic">password</span>'&nbsp;&nbsp;
FOR CLIENT 'TDE_WALLET' 
TO LOCAL AUTO_LOGIN KEYSTORE '/etc/ORACLE/WALLETS/orcl/external_store';</pre><p>In this example, enter <code class="codeph">'TDE_WALLET'</code>, in capital letters and enclosed in single quotation marks, for the <code class="codeph"><span class="codeinlineitalic">client_identifier</span></code> value set by the <code class="codeph">FOR CLIENT</code> clause. This is a fixed value and must be entered as shown here for this application of the <code class="codeph">ADD SECRET</code> clause. Otherwise, TDE will be unable to find this secret, and attempts to use the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> setting will generate an <code class="codeph">ORA-00988: missing or invalid password(s)</code> error message.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restart the database. </span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Afterward, you must use the <code class="codeph">EXTERNAL STORE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement for the following operations: opening, closing, backing up the keystore; adding, updating, or deleting a secret keystore; creating, using, rekeying, tagging, importing, exporting encryption keys.
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY EXTERNAL STORE;</pre><p>You can change or delete external keystore passwords by using the <code class="codeph">ADMINISTER KEY MANAGEMENT UPDATE CLIENT SECRET</code> statement or the <code class="codeph">ADMINISTER KEY MANAGEMENT DELETE CLIENT SECRET</code> statement. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10313"></a><div class="props_rev_3"><a id="GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" name="GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0"></a><h4 id="ASOAG-GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" class="sect4">Backing Up Password-Protected Software Keystores</h4>
                  <div>
                     <p>When you back up a password-protected software keystore, you can create a backup identifier string to describe the backup type. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA">About Backing Up Password-Protected Software Keystores</a><br>You must back up password-protected software keystores, as per the security policy and requirements of your site. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63">Creating a Backup Identifier String for the Backup Keystore</a><br>The backup file name of a software password keystore is derived from the name of the password-protected software keystore. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352">Backing Up a Password-Protected Software Keystore</a><br>The <code class="codeph">BACKUP KEYSTORE</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement backs up a password-protected software keystore.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10409"></a><div class="props_rev_3"><a id="GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA" name="GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA"></a><h5 id="ASOAG-GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA" class="sect5">About Backing Up Password-Protected Software Keystores</h5>
                     <div>
                        <p>You must back up password-protected software keystores, as per the security policy and requirements of your site. </p>
                        <p>A backup of the keystore contains all of the keys contained in the original keystore. Oracle Database prefixes the backup keystore with the creation time stamp (UTC). If you provide an identifier string, then this string is inserted between the time stamp and keystore name.</p>
                        <p>After you complete the backup operation, the keys in the original keystore are marked as "backed up". You can check the status of keys querying the <code class="codeph">V$ENCRYPTION_WALLET</code> data dictionary view.
                        </p>
                        <p>You cannot back up auto-login or local auto-login software keystores. No new keys can be added to them directly through the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement operations. The information in these keystores is only read and hence there is no need for a backup.
                        </p>
                        <p>If you have not yet backed up the keystore, then you can include the <code class="codeph">BACKUP</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement when you create the TDE master encryption key. This both backs up the keystore and creates the TDE master encryption key. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="When you back up a password-protected software keystore, you can create a backup identifier string to describe the backup type.">Backing Up Password-Protected Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10540"></a><a id="ASOAG10410"></a><div class="props_rev_3"><a id="GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63" name="GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63"></a><h5 id="ASOAG-GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63" class="sect5">Creating a Backup Identifier String for the Backup Keystore</h5>
                     <div>
                        <p>The backup file name of a software password keystore is derived from the name of the password-protected software keystore. </p>
                        <ul>
                           <li class="stepexpand"><span>To create a backup identifier string for a backup keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement with the <code class="codeph">BACKUP KEYSTORE</code> clause, with the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ewallet_<span class="italic">creation-time-stamp-in-UTC</span>_<span class="italic">user-defined-string</span>.p12
</pre><p>When you create the backup identifier (<span class="italic"><code class="codeph">user_defined_string</code></span>), use the operating system file naming convention. For example, in UNIX systems, you may want to ensure that this setting does not have spaces. 
                                 </p>
                                 <p>The following example shows the creation of a backup keystore that uses a bug number as the user-identified string, and how the resultant keystore appears in the file system. This example includes the <code class="codeph">FORCE KEYSTORE</code> clause in the event the auto-login keystore is in use or the keystore is closed.
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE USING 'BUG1296' 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span>;
</pre><p>This version is for a scenario in which the password is stored in an external store:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE USING 'BUG1296' 
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE;</pre><p>Resultant keystore file:</p><pre class="oac_no_warn" dir="ltr">ewallet_2013041513244657_BUG1296.p12</pre></div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="When you back up a password-protected software keystore, you can create a backup identifier string to describe the backup type.">Backing Up Password-Protected Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10411"></a><div class="props_rev_3"><a id="GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352" name="GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352"></a><h5 id="ASOAG-GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352" class="sect5">Backing Up a Password-Protected Software Keystore</h5>
                     <div>
                        <p>The <code class="codeph">BACKUP KEYSTORE</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement backs up a password-protected software keystore.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Back up the keystore by using the following syntax</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
[USING '<span class="italic">backup_identifier</span>'] 
FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">software_keystore_password</span>] 
[TO '<span class="italic">keystore_location</span>'];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span> is an optional string that you can provide to identify the backup. Enclose this identifier in single quotation marks (<code class="codeph">'&nbsp;'</code>). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_emp_key_backup.p12</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password for the keystore. 
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path at which the backup keystore is stored. If you do not specify the <span class="italic"><code class="codeph">keystore_location</code></span>, then the backup is created in the same directory as the original keystore. Enclose this location in single quotation marks (<code class="codeph">' '</code>).
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example backs up a software keystore in the same location as the source keystore. </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
USING 'hr.emp_keystore' 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">software_keystore_password</span>
TO '/etc/ORACLE/KEYSTORE/DB1/';

keystore altered.
</pre><p>In the following version, the password for the keystore is external, so the <code class="codeph">EXTERNAL STORE</code> clause is used. The keystore is backed up into the same directory as the current keystore.
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
USING 'hr.emp_keystore' 
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE;</pre><p>After you run this statement, an <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">identifier</code></span><code class="codeph">.p12</code> file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_hr.emp_keystore.p12</code>) appears in the keystore location.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="When you back up a password-protected software keystore, you can create a backup identifier string to describe the backup type.">Backing Up Password-Protected Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10505"></a><div class="props_rev_3"><a id="GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5" name="GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5"></a><h4 id="ASOAG-GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5" class="sect4">How the V$ENCRYPTION_WALLET View Interprets Backup Operations</h4>
                  <div>
                     <p>The <code class="codeph">BACKUP</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view indicates a how a copy of the keystore was created. 
                     </p>
                     <p>The column indicates if a copy of the keystore had been created with the <code class="codeph">WITH BACKUP</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement or the <code class="codeph">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE</code> statement. 
                     </p>
                     <p>When you modify a key or a secret, the modifications that you make do not exist in the previously backed-up copy, because you make a copy and then modify the key itself. Because there is no copy of the modification in the previous keystores, the <code class="codeph">BACKUP</code> column is set to <code class="codeph">NO</code>, even if the <code class="codeph">BACKUP</code> had been set to <code class="codeph">YES</code> previously. Hence, if the <code class="codeph">BACKUP</code> column is <code class="codeph">YES</code>, then after you perform an operation that requires a backup, such as adding a custom attribute tag, the <code class="codeph">BACKUP</code> column value changes to <code class="codeph">NO</code>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10506"></a><div class="props_rev_3"><a id="GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30" name="GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30"></a><h4 id="ASOAG-GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30" class="sect4">Backups of the Hardware Keystore</h4>
                  <div>
                     <p>You cannot use Oracle Database to back up hardware keystores. </p>
                     <p>See your HSM vendor instructions for information about backing up keys for hardware keystores.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10314"></a><div class="props_rev_3"><a id="GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" name="GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1"></a><h4 id="ASOAG-GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" class="sect4">Merging Software Keystores</h4>
                  <div>
                     <p>You can merge software keystores in a variety of ways.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0CF462D4-4920-480F-B967-4569F4459C86">About Merging Software Keystores</a><br>You can merge any combination of software keystores, but the merged keystore must be password-protected. It can have a password that is different from the constituent keystores.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23">Merging One Software Keystore into an Existing Software Keystore</a><br>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">MERGE KEYSTORE</code> clause to merge one software keystore into another existing software keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80">Merging Two Software Keystores into a Third New Keystore</a><br>You can merge two software keystores into a third new keystore, so that the two existing keystores are not changed.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621">Merging an Auto-Login Software Keystore into an Existing Password-Protected Software Keystore</a><br>You can merge an auto-login software keystore into an existing password-protected software keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-C87C030F-43ED-420A-A896-9860A9CF33F4">Reversing a Software Keystore Merge Operation</a><br>You cannot directly reverse a keystore merge operation. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10315"></a><div class="props_rev_3"><a id="GUID-0CF462D4-4920-480F-B967-4569F4459C86" name="GUID-0CF462D4-4920-480F-B967-4569F4459C86"></a><h5 id="ASOAG-GUID-0CF462D4-4920-480F-B967-4569F4459C86" class="sect5">About Merging Software Keystores</h5>
                     <div>
                        <p>You can merge any combination of software keystores, but the merged keystore must be password-protected. It can have a password that is different from the constituent keystores.</p>
                        <p>To use the merged keystore, you must explicitly open the merged keystore after you create it, even if one of the constituent keystores was already open before the merge.</p>
                        <p>Whether a common key from two source keystores is added or overwritten to a merged keystore depends on how you write the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> merge statement. For example, if you merge Keystore 1 and Keystore 2 to create Keystore 3, then the key in Keystore 1 is added to Keystore 3. If you merge Keystore 1 into Keystore 2, then the common key in Keystore 2 is not overwritten. 
                        </p>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> merge statement has no bearing on the configured keystore that is in use. However, the merged keystore can be used as the new configured database keystore if you want. Remember that you must reopen the keystore if you are using the newly created keystore as the keystore for the database at the location configured by the <code class="codeph">WALLET_ROOT</code> parameter.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="You can migrate between password-protected software keystores and hardware keystores.">Migrating Between a Software Password Keystore and a Hardware Keystore</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10317"></a><div class="props_rev_3"><a id="GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23" name="GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23"></a><h5 id="ASOAG-GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23" class="sect5">Merging One Software Keystore into an Existing Software Keystore</h5>
                     <div>
                        <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">MERGE KEYSTORE</code> clause to merge one software keystore into another existing software keystore.
                        </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To perform this type of merge, follow the steps in <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80" title="You can merge two software keystores into a third new keystore, so that the two existing keystores are not changed.">Merging Two Software Keystores into a Third New Keystore</a> but use the following SQL statement:
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '<span class="italic">keystore1_location</span>' 
[IDENTIFIED BY <span class="italic">software_keystore1_password</span>] 
INTO EXISTING KEYSTORE '<span class="italic">keystore2_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore2_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>]];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore1_location</code></span> is the directory location of the first keystore, which will be left unchanged after the merge. Enclose this path in single quotation marks (' ').
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">IDENTIFIED BY</code> clause is required for the first keystore if it is a password-protected keystore. <span class="italic"><code class="codeph">software_keystore1_password</code></span> is the password for the first keystore. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore2_location</code></span> is the directory location of the second keystore into which the first keystore is to be merged. Enclose this path in single quotation marks (' ').
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore2_password</code></span> is the password for the second keystore.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> creates a backup of the software keystore. Optionally, you can use the <code class="codeph">USING</code> clause to add a brief description of the backup. Enclose this description in single quotation marks (' '). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><span class="italic"><code class="codeph">_emp_key_backup</code></span><code class="codeph">.p12</code>, with <span class="italic"><code class="codeph">emp_key_backup</code></span> being the backup identifier). Follow the file naming conventions that your operating system uses.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>The resultant keystore after the merge operation is always a password-protected keystore.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80" name="GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80"></a><h5 id="ASOAG-GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80" class="sect5">Merging Two Software Keystores into a Third New Keystore</h5>
                     <div>
                        <p>You can merge two software keystores into a third new keystore, so that the two existing keystores are not changed.</p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Merge the software keystores by using the following syntax: </span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '<span class="italic">keystore1_location</span>' 
[IDENTIFIED BY <span class="italic">software_keystore1_password</span>] 
AND KEYSTORE '<span class="italic">keystore2_location</span>' 
[IDENTIFIED BY <span class="italic">software_keystore2_password</span>] 
INTO NEW KEYSTORE '<span class="italic">keystore3_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore3_password</span>;
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore1_location</code></span> is the directory location of the first keystore, which will be left unchanged after the merge. Enclose this path in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">IDENTIFIED BY</code> clause is required for the first keystore if it is a password-protected keystore. <span class="italic"><code class="codeph">software_keystore1_password</code></span> is the current password for the first keystore. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore2_location</code></span> is the directory location of the second keystore. Enclose this path in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">IDENTIFIED BY</code> clause is required for the second keystore if it is a password-protected keystore. <span class="italic"><code class="codeph">software_keystore2_password</code></span> is the current password for the second keystore. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore3_location</code></span> specifies the directory location of the new, merged keystore. Enclose this path in single quotation marks (<code class="codeph">' '</code>). If there is already an existing keystore at this location, the command exits with an error. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore3_password</code></span> is the new password for the merged keystore. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example merges an auto-login software keystore with a password-protected keystore to create a merged password-protected keystore at a new location:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1' 
AND KEYSTORE '/etc/ORACLE/KEYSTORE/DB2' 
IDENTIFIED BY <span class="italic">existing_password_for_keystore_2</span> 
INTO NEW KEYSTORE '/etc/ORACLE/KEYSTORE/DB3' 
IDENTIFIED BY <span class="italic">new_password_for_keystore_3</span>;

keystore altered.</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10463"></a><a id="ASOAG10318"></a><div class="props_rev_3"><a id="GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621" name="GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621"></a><h5 id="ASOAG-GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621" class="sect5">Merging an Auto-Login Software Keystore into an Existing Password-Protected Software Keystore</h5>
                     <div>
                        <p>You can merge an auto-login software keystore into an existing password-protected software keystore.</p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <code class="codeph">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE</code> SQL statement to merge an auto-login software keystore into an existing password-protected software keystore.
                                 </p>
                              </li>
                           </ul>
                           <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621__CIHJCHCI">Example 4-1</a> shows how to merge an auto-login software keystore into a password-protected software keystore. It also creates a backup of the second keystore before creating the merged keystore.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621__CIHJCHCI">
                           <p class="titleinexample">Example 4-1 Merging a Software Auto-Login Keystore into a Password Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1' 
INTO EXISTING KEYSTORE '/etc/ORACLE/KEYSTORE/DB2' 
IDENTIFIED BY <span class="italic">keystore_password</span> WITH BACKUP;
</pre><p>In this specification:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">MERGE KEYSTORE</code> must specify the auto-login keystore.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">EXISTING KEYSTORE</code> refers to the password keystore.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10319"></a><div class="props_rev_3"><a id="GUID-C87C030F-43ED-420A-A896-9860A9CF33F4" name="GUID-C87C030F-43ED-420A-A896-9860A9CF33F4"></a><h5 id="ASOAG-GUID-C87C030F-43ED-420A-A896-9860A9CF33F4" class="sect5">Reversing a Software Keystore Merge Operation</h5>
                     <div>
                        <p>You cannot directly reverse a keystore merge operation. </p>
                        <div class="section">
                           <p>When you merge a keystore into an existing keystore (rather than creating a new one), you must include the <code class="codeph">WITH BACKUP</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to create a backup of this existing keystore. Later on, if you decide that you must reverse the merge, you can replace the merged software keystore with the one that you backed up. 
                           </p>
                           <p>In other words, suppose you want merge Keystore A into Keystore B. By using the <code class="codeph">WITH BACKUP</code> clause, you create a backup for Keystore B before the merge operation begins. (The original Keystore A is still intact.) To reverse the merge operation, revert to the backup that you made of Keystore B.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <code class="codeph">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE</code> SQL statement to perform merge operations.
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>For example, to perform a merge operation into an existing keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1' 
INTO EXISTING KEYSTORE '/etc/ORACLE/KEYSTORE/DB2' 
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP USING "merge1";
</pre><p>Replace the new keystore with the backup keystore, which in this case would be named <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_merge1.p12</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>To merge an auto-login keystore into a password-based keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE</code> SQL statement.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED" name="GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED"></a><h4 id="ASOAG-GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED" class="sect4">Moving a TDE Master Encryption Key into a New Keystore</h4>
                  <div>
                     <p>You can move an existing TDE master encryption key into a new keystore from an existing software password keystore. </p>
                     <div class="section">This feature enables you to delete unused keystores: after you move the encryption key to a new keystore, you then can delete the old keystore. </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view to find the key identifier of the keystore to which you want to move the keys.</span><div>For example:<pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS; 

KEY_ID
----------------------------------------------------
ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></div>
                        </li>
                        <li class="stepexpand"><span>Move the key into a new keystore by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
MOVE [ENCRYPTION] KEYS
TO NEW KEYSTORE '<span class="italic">keystore_location1</span>'
IDENTIFIED BY <span class="italic">keystore1_password</span>
FROM [FORCE] KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span>
[WITH IDENTIFIER IN
{ '<span class="italic">key_identifier</span>' [, '<span class="italic">key_identifier</span>' ]... | ( <span class="italic">subquery</span> ) } ]
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>'] ];</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_location1</span></code> is the path to the <code class="codeph">wallet</code> directory that will store the new keystore <code class="codeph">.p12</code> file. By default, this directory is in <code class="codeph">$ORACLE_BASE/admin/<span class="codeinlineitalic">db_unique_name</span>/wallet</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore1_password</span></code> is the password for the keystore from which the new keystore is moved.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_password</span></code> is the password for the keystore from which the key is moving.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">key_identifier</span></code> is the key identifier that you find from querying the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view. Enclose this setting in single quotation marks (<code class="codeph">' '</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">subquery</span></code> can be used to find the exact key identifier that you want.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">backup_identifier</span></code> is an optional description of the backup. Enclose <code class="codeph"><span class="codeinlineitalic">backup_identifier</span></code> in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                    </p>
                                 </li>
                              </ul>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MOVE KEYS 
TO NEW KEYSTORE $ORACLE_BASE/admin/orcl/wallet 
IDENTIFIED BY <span class="italic">keystore_password</span> 
FROM FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH IDENTIFIER IN 
(SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE ROWNUM &lt; 2);</pre></div>
                        </li>
                        <li class="stepexpand"><span>To delete the old keystore, go to the <code class="codeph">wallet</code> directory and then manually delete the <code class="codeph">.p12</code> file containing the keystore.</span><div>To find the location of the keystore, open the keystore, and then query the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" title="Oracle strongly recommends that you do not delete keystores until you have moved the keystore encryption key to a new keystore.">Dangers of Deleting Keystores</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10337"></a><div class="props_rev_3"><a id="GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4" name="GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4"></a><h4 id="ASOAG-GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4" class="sect4">Moving a Software Keystore to a New Location</h4>
                  <div>
                     <p>You move a software keystore to a new location after you have updated the <code class="codeph">WALLET_ROOT</code> parameter. 
                     </p>
                     <div class="section">
                        <p>If you are using Oracle Key Vault, then you can configure a TDE direct connection where Key Vault directly manages the master encryption keys. In this case, you will never need to manually move the keystore to a new location. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>Back up the software keystore.</p>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
USING 'hr.emp_keystore' 
FORCE KEYSTORE 
IDENTIFIED BY 
<span class="italic">software_keystore_password</span> TO '/etc/ORACLE/KEYSTORE/DB1/';</pre></li>
                           <li>
                              <p>Close the software keystore. </p>
                              <p>Examples of ways that you can close the keystore are as follows.</p>
                              <p>For an auto-login software keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE; 
</pre><p>For a password-protected software keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre><p>For a keystore in which the password is stored externally:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY EXTERNAL STORE; </pre></li>
                           <li>
                              <p>Exit the database session. </p>
                              <p>For example, if you are logged in to SQL*Plus: </p><pre class="oac_no_warn" dir="ltr">EXIT
</pre></li>
                           <li>
                              <p>In the <code class="codeph">init.ora</code> file for the database instance, update the <code class="codeph">WALLET_ROOT</code> parameter to point to the new location where you want to move the keystore. 
                              </p>
                           </li>
                           <li>
                              <p>Use the operating system move command (such as <code class="codeph">mv</code>) to move the keystore with all of its keys to the new directory location. 
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10564" target="_blank"><span><cite>Oracle Key Vault Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC" name="GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC"></a><h4 id="ASOAG-GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC" class="sect4">Moving a Software Keystore Out of Automatic Storage Management</h4>
                  <div>
                     <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to move a software keystore out Automatic Storage Management. 
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.</pre></div>
                        </li>
                        <li class="stepexpand"><span>Initialize a target keystore on the file system by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE <span class="italic">targetKeystorePath</span> 
IDENTIFIED BY <span class="italic">targetKeystorePassword</span>;</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePath</span></code> is the directory path to the target keystore on the file system.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePassword</span></code> is a password that you create for the keystore. 
                                    </p>
                                 </li>
                              </ul>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1/' IDENTIFIED BY "<span class="italic">targetKeystorePassword</span>"; </pre></div>
                        </li>
                        <li class="stepexpand"><span>Copy the keystore from ASM to the target keystore that you just created.</span><div>
                              <p>This step requires that you merge the keystore from ASM to the file system, as follows:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE <span class="italic">srcKeystorePath</span> 
IDENTIFIED BY <span class="italic">srcKeystorePassword</span> 
INTO EXISTING KEYSTORE <span class="italic">targetKeystorePath</span> 
IDENTIFIED BY <span class="italic">targetKeystorePassword</span> 
WITH BACKUP USING <span class="italic">backupIdentifier</span>;</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">srcKeystorePath</span></code> is the directory path to the source keystore.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">srcKeystorePassword</span></code> is th source keystore password.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePath</span></code> is the path to the target keystore.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePassword</span></code> is the target keystore password.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">backupIdentifier</span></code> is the backup identifier to be added to the backup file name.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '+DATAFILE' 
IDENTIFIED BY "srcPassword" 
INTO EXISTING KEYSTORE '/etc/ORACLE/KEYSTORE/DB1/' 
IDENTIFIED BY "<span class="italic">targetKeystorePassword</span>" 
WITH BACKUP USING "bkup";</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10323"></a><div class="props_rev_3"><a id="GUID-4335220F-49FF-40BC-9EB0-21442608F436" name="GUID-4335220F-49FF-40BC-9EB0-21442608F436"></a><h4 id="ASOAG-GUID-4335220F-49FF-40BC-9EB0-21442608F436" class="sect4">Migrating Between a Software Password Keystore and a Hardware Keystore</h4>
                  <div>
                     <p>You can migrate between password-protected software keystores and hardware keystores.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1">Migrating from a Password-Protected Software Keystore to a Hardware Keystore</a><br>You can migrate from a password-protected software keystore to a hardware keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450">Migrating from a Hardware Keystore to a Password-Based Software Keystore</a><br>You can migrate a hardware keystore to a software keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70">Keystore Order After a Migration</a><br>After you perform a migration, keystores can be either primary or secondary in their order. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10377"></a><div class="props_rev_3"><a id="GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" name="GUID-99267A06-A5B9-4051-A833-4F61F598A1B1"></a><h5 id="ASOAG-GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" class="sect5">Migrating from a Password-Protected Software Keystore to a Hardware Keystore</h5>
                     <div>
                        <p>You can migrate from a password-protected software keystore to a hardware keystore.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF">Step 1: Convert the Software Keystore to Open with the Hardware Keystore</a><br>Some Oracle tools require access to the old software keystore to encrypt or decrypt data that was exported or backed up using the software keystore. 
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615">Step 2: Configure the Hardware Security Module Keystore Type</a><br>You can use the <code class="codeph">ALTER SYSTEM</code> statement to configure the HSM keystore type.
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-64DECC07-1E78-43D9-8431-948ABE44AC85">Step 3: Perform the Hardware Keystore Migration</a><br>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement to perform a hardware keystore migration.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="You can migrate between password-protected software keystores and hardware keystores.">Migrating Between a Software Password Keystore and a Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10507"></a><div class="props_rev_3"><a id="GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" name="GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF"></a><h6 id="ASOAG-GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" class="sect6">Step 1: Convert the Software Keystore to Open with the Hardware Keystore</h6>
                        <div>
                           <p>Some Oracle tools require access to the old software keystore to encrypt or decrypt data that was exported or backed up using the software keystore. </p>
                           <div class="section">
                              <p>Examples of these tools are Oracle Data Pump and Oracle Recovery Manager.</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement to convert a software keystore to a open with a hardware keystore. 
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>To set the software keystore password as that of the hardware keystore, use the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">software_keystore_password</span> 
SET "<span class="italic">hardware_keystore_credentials</span>" WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];
</pre><p>In this specification:</p>
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the same password that you used when creating the software keystore.
                                                </p>
                                             </li>
                                             <li>
                                                <p><span class="italic"><code class="codeph">hardware_keystore_credentials</code></span> is the new software keystore password which is the same as the password of the hardware keystore.
                                                </p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">WITH BACKUP</code> creates a backup of the software keystore. Optionally, you can use the <code class="codeph">USING</code> clause to add a brief description of the backup. Enclose this description in single quotation marks (' '). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><span class="italic"><code class="codeph">_emp_key_backup</code></span><code class="codeph">.p12</code>, with <span class="italic"><code class="codeph">emp_key_backup</code></span> being the backup identifier). Follow the file naming conventions that your operating system uses.
                                                </p>
                                             </li>
                                          </ul>
                                       </li>
                                    </ul>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>To create an auto-login keystore for a software keystore, use the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE [LOCAL] AUTO_LOGIN KEYSTORE 
FROM KEYSTORE '<span class="italic">keystore_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre><p>In this specification:</p>
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p><code class="codeph">LOCAL</code> enables you to create a local auto-login software keystore. Otherwise, omit this clause if you want the keystore to be accessible by other computers.
                                                </p>
                                             </li>
                                             <li>
                                                <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path to the keystore directory location of the keystore that is configured in the <code class="codeph">sqlnet.ora</code> file.
                                                </p>
                                             </li>
                                             <li>
                                                <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the existing password of the configured software keystore.
                                                </p>
                                             </li>
                                          </ul>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" title="You can migrate from a password-protected software keystore to a hardware keystore.">Migrating from a Password-Protected Software Keystore to a Hardware Keystore</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10325"></a><a id="ASOAG10378"></a><div class="props_rev_3"><a id="GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615" name="GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615"></a><h6 id="ASOAG-GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615" class="sect6">Step 2: Configure the Hardware Security Module Keystore Type</h6>
                        <div>
                           <p>You can use the <code class="codeph">ALTER SYSTEM</code> statement to configure the HSM keystore type.
                           </p>
                           <div class="section">For the software keystore to open with the hardware keystore, either the software keystore must have the same password as the hardware keystore, or alternatively, you can create an auto-login keystore for the software keystore.</div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege. </span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre></div>
                              </li>
                              <li class="stepexpand"><span>Set the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter. </span><div>
                                    <p>The following example migrates from a TDE keystore to a hardware keystore: </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE|HSM";</pre><p>The next example migrates from a TDE keystore to an Oracle Key Vault keystore:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE|OKV";</pre></div>
                              </li>
                              <li class="stepexpand"><span>Restart the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP</pre></div>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" title="You can migrate from a password-protected software keystore to a hardware keystore.">Migrating from a Password-Protected Software Keystore to a Hardware Keystore</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10379"></a><div class="props_rev_3"><a id="GUID-64DECC07-1E78-43D9-8431-948ABE44AC85" name="GUID-64DECC07-1E78-43D9-8431-948ABE44AC85"></a><h6 id="ASOAG-GUID-64DECC07-1E78-43D9-8431-948ABE44AC85" class="sect6">Step 3: Perform the Hardware Keystore Migration</h6>
                        <div>
                           <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement to perform a hardware keystore migration.
                           </p>
                           <div class="section">
                              <p>To migrate from the software keystore to hardware keystore, you must use the <code class="codeph">MIGRATE USING</code> <span class="italic"><code class="codeph">keystore_password</code></span> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code> SQL statement to decrypt the existing <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a>s and the <a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">tablespace encryption key</span></a>s with the TDE master encryption key in the software keystore and then reencrypt them with the newly created TDE master encryption key in the hardware keystore.
                              </p>
                              <p>After you complete the migration, you do not need to restart the database, nor do you need to manually re-open the hardware keystore. The migration process automatically reloads the keystore keys in memory. </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Migrate the hardware keystores by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
IDENTIFIED BY "<span class="italic">user_name</span>:<span class="italic">password</span>" 
MIGRATE USING <span class="italic">software_keystore_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">user_name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">password</code></span> is the user ID and password that was created in Step <a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291__CIHHFABB">2</a> under <a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" title="To configure a third-party hardware security module, you must copy the PKCS#11 library to the correct location and follow your vendor's instructions.">Step 2: Configure the Hardware Security Module</a> (in <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a>). Enclose this setting in double quotation marks (<code class="codeph">" "</code>) and separate <span class="italic"><code class="codeph">user_name</code></span> and <span class="italic"><code class="codeph">password</code></span> with a colon (<code class="codeph">:</code>).
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the same password that you used when creating the software keystore or that you have changed to in <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" title="Some Oracle tools require access to the old software keystore to encrypt or decrypt data that was exported or backed up using the software keystore.">Step 1: Convert the Software Keystore to Open with the Hardware Keystore</a>. 
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">USING</code> enables you to add a brief description of the backup. Enclose this description in single quotation marks (<code class="codeph">' '</code>). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">emp_key_backup</code></span><code class="codeph">.p12</code>, with <span class="italic"><code class="codeph">emp_key_backup</code></span> being the backup identifier). Follow the file naming conventions that your operating system uses.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-64DECC07-1E78-43D9-8431-948ABE44AC85__GUID-8D7EF3D3-3CFF-4484-AC63-553C2DB203C7">
                                 <p class="notep1">Note:</p>
                                 <p>If the database contains columns encrypted with a public key, then the columns are decrypted and reencrypted with an AES symmetric key generated by HSM-based Transparent Data Encryption.</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" title="You can migrate from a password-protected software keystore to a hardware keystore.">Migrating from a Password-Protected Software Keystore to a Hardware Keystore</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ASOAG10327"></a><div class="props_rev_3"><a id="GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" name="GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450"></a><h5 id="ASOAG-GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" class="sect5">Migrating from a Hardware Keystore to a Password-Based Software Keystore</h5>
                     <div>
                        <p>You can migrate a hardware keystore to a software keystore.</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463">About Migrating Back from a Hardware Keystore</a><br>To switch from using a hardware keystore solution to a software keystore, you can use reverse migration of the keystore. 
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9">Step 1: Configure Hardware Security Module Keystore Type</a><br>You can use the <code class="codeph">ALTER SYSTEM</code> statement to configure the hardware security module keystore type.
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59">Step 2: Configure the Keystore for the Reverse Migration</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET ENCRYPTION KEY</code> and <code class="codeph">REVERSE MIGRATE</code> clauses can be used to reverse the migration of a keystore.
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-254D94A4-E185-4ADA-8003-32DD04957031">Step 3: Configure the Hardware Keystore to Open with the Software Keystore</a><br>After you complete the migration, the migration process automatically reloads the keystore keys in memory. 
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="You can migrate between password-protected software keystores and hardware keystores.">Migrating Between a Software Password Keystore and a Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10380"></a><div class="props_rev_3"><a id="GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463" name="GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463"></a><h6 id="ASOAG-GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463" class="sect6">About Migrating Back from a Hardware Keystore</h6>
                        <div>
                           <p>To switch from using a hardware keystore solution to a software keystore, you can use reverse migration of the keystore. </p>
                           <p>After you complete the switch, keep the hardware security module, in case earlier backup files rely on the TDE master encryption keys in the hardware security module. </p>
                           <p>If you had originally migrated from the software keystore to the hardware security module and reconfigured the software keystore as described in <a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" title="You must migrate the previously configured TDE master encryption key if you previously configured a software keystore.">Migration of a Previously Configured TDE Master Encryption Key</a>, then you already have an existing keystore with the same password as the HSM password. Reverse migration configures this keystore to act as the new software keystore with a new password. If your existing keystore is an auto-login software keystore and you have the password-based software keystore for this auto-login keystore, then use the password-based keystore. If the password-based keystore is not available, then merge the auto-login keystore into a newly created empty password-based keystore, and use the newly created password-based keystore.
                           </p>
                           <p>If you do not have an existing keystore, then you must specify a keystore location using the <code class="codeph">WALLET_ROOT</code> parameter in the <code class="codeph">init.ora</code> file. When you perform the reverse migration, migrate to the previous keystore so that you do not lose the keys. 
                           </p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="You can migrate a hardware keystore to a software keystore.">Migrating from a Hardware Keystore to a Password-Based Software Keystore</a></p>
                              </div>
                           </div>
                        </div>
                     </div><a id="ASOAG10381"></a><div class="props_rev_3"><a id="GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9" name="GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9"></a><h6 id="ASOAG-GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9" class="sect6">Step 1: Configure Hardware Security Module Keystore Type</h6>
                        <div>
                           <p>You can use the <code class="codeph">ALTER SYSTEM</code> statement to configure the hardware security module keystore type.
                           </p>
                           <ol>
                              <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege. </span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba
Enter password: <span class="italic">password</span></pre></div>
                              </li>
                              <li class="stepexpand"><span>Set the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter to specify the TDE keystore type. </span><div>For example:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=HSM";</pre></div>
                              </li>
                              <li class="stepexpand"><span>Restart the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP</pre></div>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="You can migrate a hardware keystore to a software keystore.">Migrating from a Hardware Keystore to a Password-Based Software Keystore</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10382"></a><div class="props_rev_3"><a id="GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59" name="GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59"></a><h6 id="ASOAG-GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59" class="sect6">Step 2: Configure the Keystore for the Reverse Migration</h6>
                        <div>
                           <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET ENCRYPTION KEY</code> and <code class="codeph">REVERSE MIGRATE</code> clauses can be used to reverse the migration of a keystore.
                           </p>
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                    </p>
                                    <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                                 <li>
                                    <p>Reverse migrate the keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
IDENTIFIED BY <span class="italic">software_keystore_password</span> 
REVERSE MIGRATE USING "<span class="italic">user_name</span>:<span class="italic">password</span>" 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']]; 
</pre><p>In this specification:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password for the existing keystore or the new keystore. 
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">user_name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">password</code></span> is the user ID and password that was created in Step <a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291__CIHHFABB">2</a> in <a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" title="To configure a third-party hardware security module, you must copy the PKCS#11 library to the correct location and follow your vendor's instructions.">Step 2: Configure the Hardware Security Module</a> (in <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces.">Configuring Transparent Data Encryption</a>). If the pre-hardware security module software keystore is the new keystore, then you must ensure that it has the same password as the <span class="italic"><code class="codeph">user_name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">password</code></span> before issuing the reverse migration command. Enclose this setting in double quotation marks (<code class="codeph">" "</code>).
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">WITH BACKUP</code> creates a backup of the software keystore. Optionally, you can include the <code class="codeph">USING</code> clause to add a brief description of the backup. Enclose this description in single quotation marks (<code class="codeph">' '</code>). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">emp_key_backup</code></span><code class="codeph">.p12</code>, with <span class="italic"><code class="codeph">emp_key_backup</code></span> being the backup identifier). Follow the file naming conventions that your operating system uses.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
IDENTIFIED BY <span class="italic">password</span> 
REVERSE MIGRATE USING "psmith:<span class="italic">password</span>" WITH BACKUP;

keystore altered.
</pre></li>
                                 <li>
                                    <p>Optionally, change the keystore password. </p>
                                    <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
IDENTIFIED BY <span class="italic">old_password</span> 
SET <span class="italic">new_password</span> 
WITH BACKUP USING 'pwd_change';</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle Database enables you to easily change password-protected software keystore passwords.">Changing the Password of a Software Keystore</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="You can migrate a hardware keystore to a software keystore.">Migrating from a Hardware Keystore to a Password-Based Software Keystore</a></p>
                              </div>
                           </div>
                        </div>
                     </div><a id="ASOAG10508"></a><div class="props_rev_3"><a id="GUID-254D94A4-E185-4ADA-8003-32DD04957031" name="GUID-254D94A4-E185-4ADA-8003-32DD04957031"></a><h6 id="ASOAG-GUID-254D94A4-E185-4ADA-8003-32DD04957031" class="sect6">Step 3: Configure the Hardware Keystore to Open with the Software Keystore</h6>
                        <div>
                           <p>After you complete the migration, the migration process automatically reloads the keystore keys in memory. </p>
                           <p>You do not need to restart the database, nor do you need to manually re-open the software keystore.</p>
                           <p>The hardware keystore may still be required after reverse migration because the old keys are likely to have been used for encrypted backups or by tools such as Oracle Data Pump and Oracle Recovery Manager. You should cache the hardware keystore credentials in the keystore so that the HSM can be opened with the software keystore. </p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="A hardware security module can be configured to use the auto-login capability.">Configuring Auto-Login Hardware Security Modules</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="You can migrate a hardware keystore to a software keystore.">Migrating from a Hardware Keystore to a Password-Based Software Keystore</a></p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10477"></a><a id="ASOAG10476"></a><div class="props_rev_3"><a id="GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70" name="GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70"></a><h5 id="ASOAG-GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70" class="sect5">Keystore Order After a Migration</h5>
                     <div>
                        <p>After you perform a migration, keystores can be either primary or secondary in their order. </p>
                        <p>The <code class="codeph">WALLET_ORDER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> dynamic view describes whether a keystore is primary (that is, it holds the current TDE master encryption key) or if it is secondary (it holds the previous TDE master encryption key). The <code class="codeph">WRL_TYPE</code> column describes the type of locator for the keystore (for example, <code class="codeph">FILE</code> for the <code class="codeph">sqlnet.ora</code> file). The <code class="codeph">WALLET_ORDER</code> column shows <code class="codeph">SINGLE</code> if two keystores are not configured together and no migration was ever performed previously.
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70__CIHGJDFE" title="Keystore Order After Migration">Table 4-1</a> describes how the keystore order works after you perform a migration.
                        </p>
                        <div class="tblformalwide" id="GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70__CIHGJDFE">
                           <p class="titleintable">Table 4-1 Keystore Order After a Migration</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Keystore Order After a Migration" summary="Keystore Order After Migration" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d17214e4769">Type of Migration Done</th>
                                    <th align="left" valign="bottom" width="15%" id="d17214e4772">WRL_TYPE</th>
                                    <th align="left" valign="bottom" width="22%" id="d17214e4775">WALLET_ORDER</th>
                                    <th align="left" valign="bottom" width="41%" id="d17214e4778">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d17214e4783" headers="d17214e4769 ">
                                       <p>Migration of software keystore to HSM</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d17214e4783 d17214e4772 ">
                                       <p><code class="codeph">HSM</code></p>
                                       <p><code class="codeph">FILE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d17214e4783 d17214e4775 ">
                                       <p><code class="codeph">PRIMARY</code></p>
                                       <p><code class="codeph">SECONDARY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d17214e4783 d17214e4778 ">
                                       <p>Both the HSM and software keystore are configured. The TDE master encryption key can be either in the HSM or the software keystore. </p>
                                       <p>The TDE master encryption key is first searched in the HSM. </p>
                                       <p>If the TDE master encryption key is not in the primary keystore (HSM), then it will be searched for in the software keystore. </p>
                                       <p>All of the new TDE master encryption keys will be created in the primary keystore (in this case, the HSM).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d17214e4810" headers="d17214e4769 ">
                                       <p>Reverse migration of HSM to software keystore</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d17214e4810 d17214e4772 ">
                                       <p><code class="codeph">FILE</code></p>
                                       <p><code class="codeph">HSM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d17214e4810 d17214e4775 ">
                                       <p><code class="codeph">PRIMARY</code></p>
                                       <p><code class="codeph">SECONDARY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d17214e4810 d17214e4778 ">
                                       <p>Both the HSM and software keystore are configured. The TDE master encryption key can be either in the HSM or the software keystore. </p>
                                       <p>The TDE master encryption key is first searched for in the software keystore. </p>
                                       <p>If the TDE master encryption key is not present in the primary (that is, software) keystore, then it will be searched for in the HSM.</p>
                                       <p>All of the new TDE master encryption keys will be created in the primary keystore (in this case, the software keystore).</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="You can migrate between password-protected software keystores and hardware keystores.">Migrating Between a Software Password Keystore and a Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10607"></a><div class="props_rev_3"><a id="GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" name="GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8"></a><h4 id="ASOAG-GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" class="sect4">Migration of Keystores to and from Oracle Key Vault</h4>
                  <div>
                     <p>You can use Oracle Key Vault to migrate both software and hardware keystores to and from Oracle Key Vault. </p>
                     <p>This enables you to manage the keystores centrally, and then share the keystores as necessary with other TDE-enabled databases in your enterprise. </p>
                     <p>Oracle Key Vault enables you to upload a keystore to a container called a virtual wallet, and then create a new virtual wallet from the contents of previously uploaded Oracle keystores. For example, suppose you previously uploaded a keystore that contains 5 keys. You can create a new virtual wallet that consists of only 3 of these keys. You then can download this keystore to another TDE-enabled database. This process does not modify the original keystore. </p>
                     <p>In addition to Oracle keystores, Oracle Key Vault enables you to securely share other security objects, such as credential files and Java keystores, across the enterprise. It prevents the loss of keys and keystores due to forgotten passwords or accidentally deleted keystores. You can use Oracle Key Vault with products other than TDE: Oracle Real Application Security, Oracle Active Data Guard, and Oracle GoldenGate. Oracle Key Vault facilitates the movement of encrypted data using Oracle Data Pump and Oracle Transportable Tablespaces.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10693" target="_blank"><span><cite>Oracle Key Vault Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" name="GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956"></a><h4 id="ASOAG-GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" class="sect4">Configuring Keystores for Automatic Storage Management</h4>
                  <div>
                     <p>You can store a software keystore on an Automatic Storage Management (ASM) disk group.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE">About Configuring Keystores for Automatic Storage Management</a><br>You can configure a keystore for Automatic Storage Management (ASM) for a standalone database or a multitenant environment. The <code class="codeph">WALLET_ROOT</code> location can be compliant or non-compliant with Oracle Managed File (OMF) systems.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7">Configuring a Keystore on a Standalone Database to Point to an ASM Location</a><br>On a standalone database system, you can set the <code class="codeph">WALLET_ROOT</code> parameter to point to an ASM location.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B">Configuring a Keystore in a Multitenant Environment to Point to an ASM Location</a><br>You can set <code class="codeph">WALLET_ROOT</code> to point to an ASM directory within which the TDE keystore of the CDB root (which all united mode PDBs share) and the TDE keystores of all isolated mode PDBs are located.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C">Configuring a Keystore to Point to an ASM Location When the WALLET_ROOT Location Does Not Follow OMF Guidelines</a><br>If the chosen <code class="codeph">WALLET_ROOT</code> location does not comply with the Oracle Managed File (OMF) guidelines, then the Oracle database cannot perform automation of the directory creation. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE" name="GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE"></a><h5 id="ASOAG-GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE" class="sect5">About Configuring Keystores for Automatic Storage Management</h5>
                     <div>
                        <p>You can configure a keystore for Automatic Storage Management (ASM) for a standalone database or a multitenant environment. The <code class="codeph">WALLET_ROOT</code> location can be compliant or non-compliant with Oracle Managed File (OMF) systems.
                        </p>
                        <p>You should use the <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code> initialization parameters to configure the keystore location in an ASM system. The <code class="codeph">TDE_CONFIGURATION</code> parameter must be set with the attribute <code class="codeph">KEYSTORE_CONFIGURATION=FILE</code> in order for the <code class="codeph">WALLET_ROOT</code> parameter to work. Note that starting with Oracle Database release 19c, the <code class="codeph">ENCRYPTION_WALLET_LOCATION</code>, set in the <code class="codeph">sqlnet.ora</code> file, is deprecated in favor of <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code>.
                        </p>
                        <p>To perform the configuration, you must specify a <code class="codeph">+</code> sign, followed by the ASM disk group and path where the keystore will be located. For example: 
                        </p><pre class="oac_no_warn" dir="ltr">WALLET_ROOT=+<span class="italic">disk_group</span>/<span class="italic">path</span></pre><p>Note the following:</p>
                        <ul style="list-style-type: disc;" id="GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE__UL_HGT_KT1_ZFB">
                           <li>When you designate the path for the <code class="codeph">WALLET_ROOT</code> for databases in standalone or multitenant environments, or environments where the <code class="codeph">WALLET_ROOT</code> location either complies or does not comply with the Oracle Managed File (OMF) directory naming convention, be aware that this path must follow certain conventions so that the database can automate the creation of the directory components of the TDE keystore locations for you. Otherwise, you must manually create the directories under the <code class="codeph">WALLET_ROOT</code> location. 
                           </li>
                           <li>If you must move or merge software keystores between a regular file system and an ASM file system, then you can use the same keystore merge statements that are used to merge software keystores.</li>
                           <li>To execute commands to manage keystores in an ASM environment, you can use the <code class="codeph">ASMCMD</code> utility.
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="You can merge software keystores in a variety of ways.">Merging Software Keystores</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" title="You must configure the keystore location and type by setting WALLET_ROOT in init.ora and TDE_CONFIGURATION in the database instance.">Step 1: Configure the Software Keystore Location and Type</a></li>
                              <li><a href="../ostmg/manage-asm-asmcmd.html#OSTMG016" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="You can store a software keystore on an Automatic Storage Management (ASM) disk group.">Configuring Keystores for Automatic Storage Management</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7" name="GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7"></a><h5 id="ASOAG-GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7" class="sect5">Configuring a Keystore on a Standalone Database to Point to an ASM Location</h5>
                     <div>
                        <p>On a standalone database system, you can set the <code class="codeph">WALLET_ROOT</code> parameter to point to an ASM location.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Ensure that the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute of the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter is set to <code class="codeph">FILE</code>. </span><div>For example, in SQL*Plus:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE";</pre></div>
                           </li>
                           <li class="stepexpand"><span>In the <code class="codeph">init.ora</code> file, set the <code class="codeph">WALLET_ROOT</code> static initialization parameter to the ASM disk group location. </span><div>Optionally, include <code class="codeph">OMF</code> (in upper case) to provide Oracle Managed File (OMF) compliance and to facilitate automation of the directory creation. 
                              </div>
                              <div>For example:<pre class="oac_no_warn" dir="ltr">WALLET_ROOT=+<span class="italic">disk_group_name</span>/OMF</pre></div>
                              <div>This setting places the TDE keystore of the standalone database system in the<code class="codeph"> <span class="codeinlineitalic">WALLET_ROOT</span>/tde</code> directory (that is, <code class="codeph">+<span class="codeinlineitalic">disk_group_name</span>/OMF/tde</code> with the <code class="codeph">tde</code> component of the path being automatically created by the database server).
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="You can store a software keystore on an Automatic Storage Management (ASM) disk group.">Configuring Keystores for Automatic Storage Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B" name="GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B"></a><h5 id="ASOAG-GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B" class="sect5">Configuring a Keystore in a Multitenant Environment to Point to an ASM Location</h5>
                     <div>
                        <p>You can set <code class="codeph">WALLET_ROOT</code> to point to an ASM directory within which the TDE keystore of the CDB root (which all united mode PDBs share) and the TDE keystores of all isolated mode PDBs are located.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Ensure that the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute of the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter is set to <code class="codeph">FILE</code>. </span><div>For a CDB, set <code class="codeph">TDE_CONFIGURATION</code> in the CDB root; for a PDB, set it in the PDB. 
                              </div>
                              <div>For example, in SQL*Plus:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE";</pre></div>
                           </li>
                           <li class="stepexpand"><span>Set the <code class="codeph">WALLET_ROOT</code> static initialization parameter to the ASM disk group location followed by the <code class="codeph">DB_UNIQUE_NAME</code> initialization parameter value.</span><div>The inclusion of the value of <code class="codeph">DB_UNIQUE_NAME</code> is necessary to allow the database server to automate the creation of the necessary directories under this location.
                              </div>
                              <div>You must not use <code class="codeph">OMF</code> as a directory component of the <code class="codeph">WALLET_ROOT</code> location (unlike in the standalone database configuration section).
                              </div>
                              <div>For example:<pre class="oac_no_warn" dir="ltr">WALLET_ROOT=+<span class="italic">disk_group_name</span>/<span class="italic">db_unique_name</span></pre><p>This setting locates the TDE wallet that is used by the root and by all of the united mode PDBs in the <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/<span class="codeinlineitalic">db_unique_name</span>/tde</code> directory (that is, in <code class="codeph">+<span class="codeinlineitalic">disk_group_name</span>/<span class="codeinlineitalic">db_unique_name</span>/tde</code>).
                                 </p>
                                 <p>This setting locates the TDE wallet which is used by each isolated mode PDB in the <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/<span class="codeinlineitalic">db_unique_name</span>/<span class="codeinlineitalic">PDB_GUID</span>/tde</code> directory (that is, in <code class="codeph">+<span class="codeinlineitalic">disk_group_name</span>/<span class="codeinlineitalic">db_unique_name</span>/<span class="codeinlineitalic">PDB_GUID</span>/tde</code>). 
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="You can store a software keystore on an Automatic Storage Management (ASM) disk group.">Configuring Keystores for Automatic Storage Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C" name="GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C"></a><h5 id="ASOAG-GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C" class="sect5">Configuring a Keystore to Point to an ASM Location When the WALLET_ROOT Location Does Not Follow OMF Guidelines</h5>
                     <div>
                        <p>If the chosen <code class="codeph">WALLET_ROOT</code> location does not comply with the Oracle Managed File (OMF) guidelines, then the Oracle database cannot perform automation of the directory creation. 
                        </p>
                        <div class="section">In this case, you must use the <code class="codeph">ALTER DISKGROUP</code> command to manually create the necessary directories under the <code class="codeph">WALLET_ROOT</code> location. You must use the <code class="codeph">ALTER DISKGROUP</code> ... <code class="codeph">ADD DIRECTORY</code> statement to manually create the necessary directories, because no automation of the directory creation is possible when the <code class="codeph">WALLET_ROOT</code> parameter is not using an OMF-compliant value.
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Ensure that the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute of the <code class="codeph">TDE_CONFIGURATION</code> dynamic initialization parameter is set to <code class="codeph">FILE</code>. </span><div>For example, in SQL*Plus:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE";</pre></div>
                           </li>
                           <li class="stepexpand"><span>In the <code class="codeph">init.ora</code> file, set the <code class="codeph">WALLET_ROOT</code> static initialization parameter to the ASM disk group location. </span><div>For example, the following path after <code class="codeph"><span class="codeinlineitalic">disk_group_name</span></code> contains no uppercase OMF directory elements:<pre class="oac_no_warn" dir="ltr">WALLET_ROOT="+<span class="italic">disk_group_name</span>/mydir/wallets"</pre></div>
                           </li>
                           <li class="stepexpand"><span>Connect to the database instance using the <code class="codeph">SYSASM</code> administrative privilege.</span><div><pre class="oac_no_warn" dir="ltr">connect / as sysasm</pre></div>
                           </li>
                           <li class="stepexpand"><span>Execute the <code class="codeph">ALTER DISKGROUP</code> statements to create the necessary directories.</span><div>You must perform this step because the database server cannot automate the creation of these directories, since the location chosen for <code class="codeph">WALLET_ROOT</code> is not compliant with the Oracle Managed Files guideline (that is, it does not have the <code class="codeph">OMF</code> component included in it in uppercase letters). 
                              </div>
                              <div>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP "<span class="italic">disk_group_name</span>" ADD DIRECTORY 
    '+<span class="italic">disk_group_name</span>/mydir/wallets/tde';</pre><p>For a multitenant environment, find the PDB GUID of the PDB that will store the keystore, as follows: </p><pre class="oac_no_warn" dir="ltr">SELECT GUID FROM DBA_PDBS WHERE PDB_NAME = '<span class="italic">pdb name</span>';</pre><p>Next, include the PDB GUID in the following <code class="codeph">ALTER DISKGROUP</code> statements to create the necessary directories for the isolated mode PDB within the <code class="codeph">WALLET_ROOT</code> location. For example, assuming the GUID is <code class="codeph">4756C705E52A8768E053F82DC40A5329</code>: 
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP "<span class="italic">disk_group_name</span>" ADD DIRECTORY
    '+<span class="italic">disk_group_name</span>/mydir/wallets/4756C705E52A8768E053F82DC40A5329'

ALTER DISKGROUP "<span class="italic">disk_group_name</span>" ADD DIRECTORY
    '+<span class="italic">disk_group_name</span>/mydir/wallets/4756C705E52A8768E053F82DC40A5329/tde';
</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="You can store a software keystore on an Automatic Storage Management (ASM) disk group.">Configuring Keystores for Automatic Storage Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10321"></a><div class="props_rev_3"><a id="GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" name="GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402"></a><h4 id="ASOAG-GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" class="sect4">Closing a Keystore</h4>
                  <div>
                     <p>You can manually close software and hardware keystores.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4">About Closing Keystores</a><br>After you open a keystore, it remains open until you shut down the database instance.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-814E9D78-04D5-4063-A70D-893469E35C8B">Closing a Software Keystore</a><br>You can manually close password-based software keystores, auto-login software keystores, and local auto-login software keystores. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2">Closing a Hardware Keystore</a><br>To close a hardware keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE CLOSE</code> clause.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10412"></a><div class="props_rev_3"><a id="GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4" name="GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4"></a><h5 id="ASOAG-GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4" class="sect5">About Closing Keystores</h5>
                     <div>
                        <p>After you open a keystore, it remains open until you shut down the database instance.</p>
                        <p>When you restart the database instance, then auto-login and local auto-login software keystores automatically open when required (that is, when the TDE master encryption key must be accessed). However, software password-based and hardware keystores do not automatically open. You must manually open them again before you can use them. </p>
                        <p>When you close a software or hardware keystore, you disable all of the encryption and decryption operations on the database. Hence, a database user or application cannot perform any operation involving encrypted data until the keystore is reopened. </p>
                        <p>When you re-open a keystore after closing it, the keystore contents are reloaded back into the database. Thus, if the contents had been modified (such as during a migration), the database will have the latest keystore contents. </p>
                        <p>You can check if a keystore is closed by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view.
                        </p>
                        <p>The following data operations will fail if the keystore is not accessible:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">SELECT</code> data from an encrypted column
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">INSERT</code> data into on an encrypted column
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code> a table with encrypted columns
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code> an encrypted tablespace
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" title="You can manually close software and hardware keystores.">Closing a Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10320"></a><div class="props_rev_3"><a id="GUID-814E9D78-04D5-4063-A70D-893469E35C8B" name="GUID-814E9D78-04D5-4063-A70D-893469E35C8B"></a><h5 id="ASOAG-GUID-814E9D78-04D5-4063-A70D-893469E35C8B" class="sect5">Closing a Software Keystore</h5>
                     <div>
                        <p>You can manually close password-based software keystores, auto-login software keystores, and local auto-login software keystores. </p>
                        <div class="section">
                           <p>In the case of an auto-login keystore, which opens automatically when it is accessed, manually close it if you moved it to a new location. You do this if you are changing your configuration from an auto-login keystore to a password-based keystore: you move out the auto-login keystore, and then close the auto-login keystore.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement.
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>For a password-based software keystore, use the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
[IDENTIFIED BY [EXTERNAL STORE | <span class="italic">software_keystore_password</span>]];
</pre><p>In this specification:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">IDENTIFIED BY</code> can be one of the following:
                                             </p>
                                             <ul style="list-style-type: disc;">
                                                <li>
                                                   <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password of the user who created the keystore. 
                                                   </p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>For an auto-login or local auto-login software keystore, use the following SQL statement: </p><pre class="oac_no_warn" dir="ltr"><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE;</code>
</pre><p>You do not need to specify a password for this statement.</p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                           <p>Closing a keystore disables all of the encryption and decryption operations. Any attempt to encrypt or decrypt data or access encrypted data results in an error. </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" title="You can manually close software and hardware keystores.">Closing a Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10413"></a><div class="props_rev_3"><a id="GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2" name="GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2"></a><h5 id="ASOAG-GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2" class="sect5">Closing a Hardware Keystore</h5>
                     <div>
                        <p>To close a hardware keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE CLOSE</code> clause.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log <code class="codeph"></code>into the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Close the hardware keystore by using this syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY [EXTERNAL STORE | "<span class="italic">hardware_keystore_credentials</span>"];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">“<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>”</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this user’s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY "psmith:<span class="italic">password</span>";</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" title="You can manually close software and hardware keystores.">Closing a Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG9546"></a><div class="props_rev_3"><a id="GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C" name="GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C"></a><h4 id="ASOAG-GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C" class="sect4">Backup and Recovery of Encrypted Data</h4>
                  <div>
                     <p>For software keystores, you cannot access encrypted data without the TDE master encryption key. </p>
                     <p>Because the TDE master encryption key is stored in the keystore, you should periodically back up the software keystore in a secure location. You must back up a copy of the keystore whenever you set a new TDE master encryption key or perform any operation that writes to the keystore.</p>
                     <p>Do not back up the software keystore in the same location as the encrypted data. Back up the software keystore separately. This is especially true when you use the auto-login keystore, which does not require a password to open. In case the backup tape is lost, a malicious user should not be able to get both the encrypted data and the keystore.</p>
                     <p>Oracle Recovery Manager (Oracle RMAN) does not back up the software keystore as part of the database backup. When using a media manager such as Oracle Secure Backup with Oracle RMAN, Oracle Secure Backup automatically excludes auto-open keystores (the <code class="codeph">cwallet.sso</code> files). However, it does not automatically exclude encryption keystores (the <code class="codeph">ewallet.p12</code> files). It is a good practice to add the following <code class="codeph">exclude</code> data set statement to your Oracle Secure Backup configuration:
                     </p><pre class="oac_no_warn" dir="ltr">exclude name *.p12
</pre><p>This setting instructs Oracle Secure Backup to exclude the encryption keystore from the backup set.</p>
                     <p>If you lose the software keystore that stores the TDE master encryption key, then you can restore access to encrypted data by copying the backed-up version of the keystore to the appropriate location. If you archived the restored keystore after the last time that you reset the TDE master encryption key, then you do not need to take any additional action.</p>
                     <p>If the restored software keystore does not contain the most recent TDE master encryption key, then you can recover old data up to the point when the TDE master encryption key was reset by rolling back the state of the database to that point in time. All of the modifications to encrypted columns after the TDE master encryption key was reset are lost.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../bradv/rman-complete-database-recovery.html#BRADV8005" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10376"></a><div class="props_rev_3"><a id="GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" name="GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F"></a><h4 id="ASOAG-GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" class="sect4">Dangers of Deleting Keystores</h4>
                  <div>
                     <p>Oracle strongly recommends that you do not delete keystores until you have moved the keystore encryption key to a new keystore. </p>
                     <p>Deleting a keystore that still contains keys is particularly dangerous if after you have configured Transparent Data Encryption and the keystore is in use. You can find if a keystore is in use by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view after you open the keystore. 
                     </p>
                     <p>The reason you should not delete a keystore that has active keys in it is because the keystore contains a list of all of the keys that were used for the database. Deleting the keystore deletes these keys, and could result in the loss of encrypted data. The deletion of a keystore can even hamper the normal functioning of the Oracle database. Even if you decrypted all of the data in your database, you still should not delete the keystore, because the TDE master encryption key in the keystore is also used for other Oracle Database features, such as off-lined tablespaces, Oracle Recovery Manager, and Oracle Secure Backup.</p>
                     <p>Even after you have migrated your software keystores to a hardware keystore, you should not delete the original keystore. The keys in the original keystore will be needed at a later time, for example when recovering an offline encrypted tablespace. Even if there is no data online that are not encrypted, the key may still be in use. </p>
                     <p>The exception is in the case of software auto-login (or auto-login local) keystores. If you do not want to use this type of keystore, then ideally you should move it to a secure directory. Only delete an auto-login keystore if you are sure that it comes from a specific password-based software keystore and that this keystore is available. The keystore should be available and known.</p>
                     <p>If you must delete a keystore, do so with great caution. You must first move the keys within the keystore to a new keystore by using the <code class="codeph">ADMINISTER KEY MANAGEMENT MOVE KEYS TO NEW KEYSTORE</code> statement. After the key is in a new keystore, then you can safely delete the old keystore. 
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED" title="You can move an existing TDE master encryption key into a new keystore from an existing software password keystore.">Moving a TDE Master Encryption Key into a New Keystore</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-CBB8C6CC-CF87-4E10-9170-938C7CE7483B" title="In united mode, you can move an existing TDE master encryption key into a new keystore from an existing software password keystore.">Moving a TDE Master Encryption Key into a New Keystore in United Mode</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5F84010F-F74C-41FC-900F-741185B29AA0" title="In isolated mode, you can move an existing TDE master encryption key into a new keystore from an existing software password keystore.">Moving a TDE Master Encryption Key into a New Keystore in Isolated Mode</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="You can perform maintenance activities on keystores such as changing passwords, and backing up, merging, and moving keystores.">Managing the Keystore</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10407"></a><div class="props_rev_3"><a id="GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" name="GUID-CDF39F23-2371-4E93-A503-25798F1E97E4"></a><h3 id="ASOAG-GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" class="sect3">Managing the TDE Master Encryption Key</h3>
               <div>
                  <p>You can manage the TDE master encryption key in several ways.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8">Creating User-Defined TDE Master Encryption Keys</a><br>You can create a user-defined TDE master encryption key outside the database by generating a TDE master encryption key ID. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55">Creating TDE Master Encryption Keys for Later Use</a><br>You can create a TDE master encryption key that can be activated at a later date.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2">Activating TDE Master Encryption Keys</a><br>After you activate a TDE master encryption key, it can be used. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0">TDE Master Encryption Key Attribute Management</a><br>TDE master encryption key attributes store information about the TDE master encryption key.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105">Creating Custom TDE Master Encryption Key Attributes for Reports</a><br>Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C">Setting or Rekeying the TDE Master Encryption Key in the Keystore</a><br>You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F">Exporting and Importing the TDE Master Encryption Key</a><br>You can export and import the TDE master encryption key in different ways.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-48512BB6-C588-4704-B2BD-22606C0F05BC">Management of TDE Master Encryption Keys Using Oracle Key Vault</a><br>You can use Oracle Key Vault to manage and share TDE master encryption keys across an enterprise. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">Managing the Keystore and the Master&nbsp;Encryption Key</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-270396F9-B023-4F57-8640-D19445F36CF8" name="GUID-270396F9-B023-4F57-8640-D19445F36CF8"></a><h4 id="ASOAG-GUID-270396F9-B023-4F57-8640-D19445F36CF8" class="sect4">Creating User-Defined TDE Master Encryption Keys</h4>
                  <div>
                     <p>You can create a user-defined TDE master encryption key outside the database by generating a TDE master encryption key ID. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0">About User-Defined TDE Master Encryption Keys</a><br>A TDE master encryption key that is outside the database has its own user-generated ID, which tracks the use of the TDE master encryption key. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64">Creating a User-Defined TDE Master Encryption Key</a><br>To create a user-defined TDE master encryption key, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET | CREATE [ENCRYPTION] KEY</code> clause. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0" name="GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0"></a><h5 id="ASOAG-GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0" class="sect5">About User-Defined TDE Master Encryption Keys</h5>
                     <div>
                        <p>A TDE master encryption key that is outside the database has its own user-generated ID, which tracks the use of the TDE master encryption key. </p>
                        <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> to create and set user-defined TDE master encryption key IDs. After you generate the TDE master encryption key, you can bring this key into the database.  Optionally, you can specify the TDE master encryption key ID in various <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statements. 
                        </p>
                        <p>This type of configuration benefits Oracle Fusion SaaS Cloud environments in that it enables you to generate a TDE master encryption key this complies with your site’s requirements. This key that you generate supports the current encryption algorithms and can be used for software keystores. </p>
                        <p>After you generate the TDE master encryption key ID, you can encrypt your data as you normally would. </p>
                        <p>The TDE master encryption key and its corresponding ID will not be captured by any auditing logs. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8" title="You can create a user-defined TDE master encryption key outside the database by generating a TDE master encryption key ID.">Creating User-Defined TDE Master Encryption Keys</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64" name="GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64"></a><h5 id="ASOAG-GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64" class="sect5">Creating a User-Defined TDE Master Encryption Key</h5>
                     <div>
                        <p>To create a user-defined TDE master encryption key, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET | CREATE [ENCRYPTION] KEY</code> clause. 
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>For example: <pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create the user-defined TDE master encryption key by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET | CREATE [ENCRYPTION] KEY
'[<span class="italic">mkid</span>:<span class="italic">mk</span> | <span class="italic">mk</span>]' 
[USING ALGORITHM '<span class="italic">algorithm</span>'] 
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];</pre><p>In this specification: </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">SET | CREATE</code> : Enter <code class="codeph">SET</code> if you want to create the master and activate the TDE master encryption key now, or select <code class="codeph">CREATE</code> if you want to create the key for later use, without activating it yet. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">mkid</span></code> and <code class="codeph"><span class="codeinlineitalic">mk</span></code>: 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">mkid</span></code>, the TDE master encryption key ID, is a 16&#x2013;byte hex-encoded value that you can specify or have Oracle Database generate. 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">mk</span></code>, the TDE master encryption key, is a hex-encoded value that you can specify or have Oracle Database generate, either 32 bytes (for the for <code class="codeph">AES256</code>, <code class="codeph">ARIA256</code>, and <code class="codeph">GOST256</code> algorithms) or 16 bytes (for the <code class="codeph">SEED128</code> algorithm). 
                                             </p>
                                          </li>
                                       </ul>
                                       <p>If you omit the <code class="codeph"><span class="codeinlineitalic">mkid</span>:<span class="codeinlineitalic">mk</span>|<span class="codeinlineitalic">mkid</span></code> clause but include the <code class="codeph"><span class="codeinlineitalic">mk</span></code> value, then Oracle Database generates the <code class="codeph"><span class="codeinlineitalic">mkid</span></code> for the <code class="codeph"><span class="codeinlineitalic">mk</span></code>. 
                                       </p>
                                       <p>If you omit the entire <code class="codeph"><span class="codeinlineitalic">mkid</span>:<span class="codeinlineitalic">mk</span>|<span class="codeinlineitalic">mkid</span></code> clause, then Oracle Database generates these values for you.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">USING ALGORITHM</code>: Specify one of the following supported algorithms:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ARIA256</code> 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEED128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">GOST256</code></p>
                                          </li>
                                       </ul>
                                       <p>If you omit the algorithm, then the default, <code class="codeph">AES256</code>, is used. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example includes a user-created TDE master encryption key but no TDE master encryption key ID, so that the TDE master encryption key ID is generated:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
'3D432109DF88967A541967062A6F4E460E892318E307F017BA048707B402493C' 
USING ALGORITHM 'GOST256'
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre><p>The next example creates user-defined keys for both the master encryption ID and the TDE master encryption key. It omits the algorithm specification, so the default algorithm <code class="codeph">AES256</code> is used.
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE ENCRYPTION KEY 
'10203040506070801112131415161718:3D432109DF88967A541967062A6F4E460E892318E307F017BA048707B402493C' 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8" title="You can create a user-defined TDE master encryption key outside the database by generating a TDE master encryption key ID.">Creating User-Defined TDE Master Encryption Keys</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10414"></a><div class="props_rev_3"><a id="GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" name="GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55"></a><h4 id="ASOAG-GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" class="sect4">Creating TDE Master Encryption Keys for Later Use</h4>
                  <div>
                     <p>You can create a TDE master encryption key that can be activated at a later date.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD">About Creating a TDE Master Encryption Key for Later Use</a><br>The <code class="codeph">CREATE KEY</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can create a TDE master encryption key to be activated at a later date.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9">Creating a TDE Master Encryption Key for Later Use</a><br>A keystore must be opened before you can create a TDE master encryption key for use later on.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380">Example: Creating a TDE Master Encryption Key in a Single Database</a><br>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEY USING TAG</code> statement to create a TDE master encryption key in a single database.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10415"></a><div class="props_rev_3"><a id="GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD" name="GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD"></a><h5 id="ASOAG-GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD" class="sect5">About Creating a TDE Master Encryption Key for Later Use</h5>
                     <div>
                        <p>The <code class="codeph">CREATE KEY</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can create a TDE master encryption key to be activated at a later date.
                        </p>
                        <p>You then can activate this key on the same database or export it to another database and activate it there. </p>
                        <p>This method of TDE master encryption key creation is useful in a multitenant environment when you must re-create the TDE master encryption keys. The <code class="codeph">CREATE KEY</code> clause enables you to use a single SQL statement to generate a new TDE master encryption key for all of the PDBs within a multitenant environment. The creation time of the new TDE master encryption key is later than the activation of the TDE master encryption key that is currently in use. Hence, the creation time can serve as a reminder to all of the PDBs to activate the most recently created TDE master encryption key as soon as possible. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="You can create a TDE master encryption key that can be activated at a later date.">Creating TDE Master Encryption Keys for Later Use</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10416"></a><div class="props_rev_3"><a id="GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9" name="GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9"></a><h5 id="ASOAG-GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9" class="sect5">Creating a TDE Master Encryption Key for Later Use</h5>
                     <div>
                        <p>A keystore must be opened before you can create a TDE master encryption key for use later on.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Create the TDE master encryption key by using this syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEY [USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification: </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the associated attribute and information that you define. Enclose this setting in single quotation marks (' '). 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span> is the mandatory keystore password that you used when you created the original keystore. It is case sensitive.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> backs up the TDE master encryption key in the same location as the key, as identified by the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. To find the key locations for all of the database instances, query the <code class="codeph">GV$ENCRYPTION_WALLET</code> view.
                                       </p>
                                       <p>You must back up password-based software keystores. You do not need to back up auto-login or local auto-login software keystores. Optionally, include the <code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span> clause to add a description of the backup. Enclose <span class="italic"><code class="codeph">backup_identifier</code></span> in single quotation marks (<code class="codeph">'&nbsp;'</code>). 
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>If necessary, activate the TDE master encryption key.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Fin the key ID. </p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS; 

KEY_ID
----------------------------------------------------
AWsHwVYC2U+Nv3RVphn/yAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></li>
                                    <li>
                                       <p>Use this key ID to activate the key.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY 
'AWsHwVYC2U+Nv3RVphn/yAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' 
USING TAG 'quarter:second;description:Activate Key on standby' 
IDENTIFIED BY <span class="italic">password</span> 
WITH BACKUP;</pre></li>
                                 </ol>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" title="To open a hardware keystore, use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Opening a Hardware Keystore</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="After you activate a TDE master encryption key, it can be used.">Activating TDE Master Encryption Keys</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="You can create a TDE master encryption key that can be activated at a later date.">Creating TDE Master Encryption Keys for Later Use</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10417"></a><a id="ASOAG10520"></a><div class="props_rev_3"><a id="GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380" name="GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380"></a><h5 id="ASOAG-GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380" class="sect5">Example: Creating a TDE Master Encryption Key in a Single Database</h5>
                     <div>
                        <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEY USING TAG</code> statement to create a TDE master encryption key in a single database.
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380__CIHCGBDD">Example 4-2</a> shows how to create a TDE master encryption key in a single database. After you run this statement, a TDE master encryption key with the tag definition is created in the keystore for that database. You can query the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view for the identifier of the newly created key. You can query the <code class="codeph">CREATION_TIME</code> column to find the most recently created key, which would be the key that you created from this statement. You can export this key to another database if you want or activate it locally later on, as described in <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="After you activate a TDE master encryption key, it can be used.">Activating TDE Master Encryption Keys</a>.
                        </p>
                        <div class="example" id="GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380__CIHCGBDD">
                           <p class="titleinexample">Example 4-2 Creating a TDE Master Encryption Key in a Single Database</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEY USING TAG
'source:admin@source;target:db1@target' 
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP;

keystore altered.
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="You can create a TDE master encryption key that can be activated at a later date.">Creating TDE Master Encryption Keys for Later Use</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10419"></a><div class="props_rev_3"><a id="GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" name="GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2"></a><h4 id="ASOAG-GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" class="sect4">Activating TDE Master Encryption Keys</h4>
                  <div>
                     <p>After you activate a TDE master encryption key, it can be used. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1">About Activating TDE Master Encryption Keys</a><br>You can activate a previously created or imported TDE master encryption key by using the <code class="codeph">USE KEY</code> clause of <code class="codeph">ADMINSTER KEY MANAGEMENT</code>. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90">Activating a TDE Master Encryption Key</a><br>To activate a TDE master encryption key, you must open the keystore and use <code class="codeph">ADMINISTER KEY MANAGEMENT</code> with the <code class="codeph">USE KEY</code> clause.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132">Example: Activating a TDE Master Encryption Key</a><br>You can use the <span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT</span> SQL statement to activate a TDE master encryption key.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10420"></a><div class="props_rev_3"><a id="GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1" name="GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1"></a><h5 id="ASOAG-GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1" class="sect5">About Activating TDE Master Encryption Keys</h5>
                     <div>
                        <p>You can activate a previously created or imported TDE master encryption key by using the <code class="codeph">USE KEY</code> clause of <code class="codeph">ADMINSTER KEY MANAGEMENT</code>. 
                        </p>
                        <p>After you activate the key, it is available for use. The key will be used to protect all of the column keys and all of the <a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">tablespace encryption key</span></a>s. If you have deployed a logical standby database, then you must export the TDE master encryption keys after recreating them, and then import them into the standby database. You can have the TDE master encryption key in use on both the primary and the standby databases. To do so, you must activate the TDE master encryption key after you import it to the logical standby database. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="After you activate a TDE master encryption key, it can be used.">Activating TDE Master Encryption Keys</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10421"></a><div class="props_rev_3"><a id="GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90" name="GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90"></a><h5 id="ASOAG-GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90" class="sect5">Activating a TDE Master Encryption Key</h5>
                     <div>
                        <p>To activate a TDE master encryption key, you must open the keystore and use <code class="codeph">ADMINISTER KEY MANAGEMENT</code> with the <code class="codeph">USE KEY</code> clause.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view to find the key identifier. 
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS; 

KEY_ID
----------------------------------------------------
ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
</pre></li>
                              <li>
                                 <p>Use this key identifier to activate the TDE master encryption key by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY '<span class="italic">key_identifier_from_V$ENCRYPTION_KEYS</span>' 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification: </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">key_identifier_from_V$ENCRYPTION_KEYS</code></span> is the key identifie. Enclose this setting in single quotation marks (<code class="codeph">' '</code>). 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes and information that you define. Enclose this setting in single quotation marks (<code class="codeph">' '</code>). 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span> is the mandatory keystore password that you used when you created the original keystore. 
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> backs up the TDE master encryption key in the same location as the key, as identified by the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. To find the key locations for all of the database instances, query the <code class="codeph">GV$ENCRYPTION_WALLET</code> view.
                                       </p>
                                       <p>You must back up password-based software keystores. You do not need to back up auto-login or local auto-login software keystores. Optionally, include the <code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span> clause to add a description of the backup. Enclose <code class="codeph">backup_identifier</code> in single quotation marks (<code class="codeph">'&nbsp;'</code>). 
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D" title="To open a software keystore, you must use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Opening a Software Keystore</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" title="To open a hardware keystore, use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Opening a Hardware Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="After you activate a TDE master encryption key, it can be used.">Activating TDE Master Encryption Keys</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10422"></a><a id="ASOAG10521"></a><div class="props_rev_3"><a id="GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132" name="GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132"></a><h5 id="ASOAG-GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132" class="sect5">Example: Activating a TDE Master Encryption Key</h5>
                     <div>
                        <p>You can use the <span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT</span> SQL statement to activate a TDE master encryption key.
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132__CIHCHHHA">Example 4-3</a> shows how to activate a previously imported TDE master encryption key and then update its tag. This key is activated with the current database time stamp and time zone.
                        </p>
                        <div class="example" id="GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132__CIHCHHHA">
                           <p class="titleinexample">Example 4-3 Activating a TDE Master Encryption Key</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY 
'ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' 
USING TAG 'quarter:second;description:Activate Key on standby' 
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP;

keystore altered.</pre><p>In this version of the same operation, the <code class="codeph">FORCE KEYSTORE</code> clause is added in the event that the auto-login keystore is in use, or if the keystore is closed. The password of the keystore is stored externally, so the <code class="codeph">EXTERNAL STORE</code> setting is used for the <code class="codeph">IDENTIFIED BY</code> clause. 
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY 
'ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' 
USING TAG 'quarter:second;description:Activate Key on standby' 
FORCE KEYSTORE IDENTIFIED BY EXTERNAL STORE WITH BACKUP;

keystore altered.</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="After you activate a TDE master encryption key, it can be used.">Activating TDE Master Encryption Keys</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10328"></a><div class="props_rev_3"><a id="GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" name="GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0"></a><h4 id="ASOAG-GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" class="sect4">TDE Master Encryption Key Attribute Management</h4>
                  <div>
                     <p>TDE master encryption key attributes store information about the TDE master encryption key.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C">TDE Master Encryption Key Attributes</a><br>TDE master encryption key attributes include detailed information about the TDE master encryption key. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1">Finding the TDE Master Encryption Key That Is in Use</a><br>A TDE master encryption key that is in use is the encryption key that was activated most recently for the database. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10329"></a><div class="props_rev_3"><a id="GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C" name="GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C"></a><h5 id="ASOAG-GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C" class="sect5">TDE Master Encryption Key Attributes</h5>
                     <div>
                        <p>TDE master encryption key attributes include detailed information about the TDE master encryption key. </p>
                        <p>The information contains the following types:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Key time stamp information:</span> Internal security policies and compliance policies usually determine the key rekeying frequency. You should expire keys when they reach the end of their lifetimes and then generate new keys. Time stamp attributes such as key creation time and activation time help you to determine the key age accurately, and automate key generation.
                              </p>
                              <p>The <code class="codeph">V$ENCRYPTION_KEYS</code> view includes columns such as <code class="codeph">CREATION_TIME</code> and <code class="codeph">ACTIVATION_TIME.</code> See <a href="../refrn/V-ENCRYPTION_KEYS.html#REFRN30661" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for a complete description of the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Key owner information:</span> Key owner attributes help you to determine the user who created or activated the key. These attributes can be important for security, auditing, and tracking purposes. Key owner attributes also include key use information, such as whether the key is used for standalone TDE operations or used in a multitenant environment.
                              </p>
                              <p>The <code class="codeph">V$ENCRYPTION_KEYS</code> view includes columns such as <code class="codeph">CREATOR, CREATOR_ID, USER, USER_ID,</code> and <code class="codeph">KEY_USE.</code></p>
                           </li>
                           <li>
                              <p><span class="bold">Key source information:</span> Keys often must be moved between databases for operations such as import-export operations and Data Guard-related operations. Key source attributes enable you to track the origin of each key. You can track whether a key was created locally or imported, and the database name and instance number of the database that created the key. In a multitenant environment, you can track the PDB where the key was created.
                              </p>
                              <p>The <code class="codeph">V$ENCRYPTION_KEYS</code> view includes columns such as <code class="codeph">CREATOR_DBNAME, CREATOR_DBID, CREATOR_INSTANCE_NAME, CREATOR_INSTANCE_NUMBER, CREATOR_PDBNAME,</code> and so on.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Key usage information:</span> Key usage information determines the database or PDB where the key is being used. It also helps determine whether a key is in active use or not. 
                              </p>
                              <p>The <code class="codeph">V$ENCRYPTION_KEYS</code> view includes columns such as <code class="codeph">ACTIVATING_DBNAME, ACTIVATING_DBID, ACTIVATING_INSTANCE_NAME, ACTIVATING_PDBNAME,</code> and so on.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">User-defined information and other information:</span> When creating a key, you can tag it with information using the <code class="codeph">TAG</code> option. Each key contains important information such as whether or not it has been backed up.
                              </p>
                              <p>The <code class="codeph">V$ENCRYPTION_KEYS</code> view includes columns such as <code class="codeph">KEY_ID, TAG,</code> and other miscellaneous columns, for example <code class="codeph">BACKED_UP</code>. 
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C__GUID-EE4A99A7-59A8-4C7A-B021-5DD4EEBFB36C">
                           <p class="notep1">Note:</p>TDE Master Key Attributes and Tag are only supported with a hardware security module that has PKCS#11 data object support.
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" title="TDE master encryption key attributes store information about the TDE master encryption key.">TDE Master Encryption Key Attribute Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10446"></a><div class="props_rev_3"><a id="GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1" name="GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1"></a><h5 id="ASOAG-GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1" class="sect5">Finding the TDE Master Encryption Key That Is in Use</h5>
                     <div>
                        <p>A TDE master encryption key that is in use is the encryption key that was activated most recently for the database. </p>
                        <ul>
                           <li class="stepexpand"><span>To find the TDE master encryption key, query the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view.</span><div>For example:<pre class="oac_no_warn" dir="ltr">SELECT KEY_ID 
FROM V$ENCRYPTION_KEYS 
WHERE ACTIVATION_TIME = (SELECT MAX(ACTIVATION_TIME) 
                         FROM V$ENCRYPTION_KEYS
                         WHERE ACTIVATING_DBID = (SELECT DBID FROM V$DATABASE));
</pre></div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" title="TDE master encryption key attributes store information about the TDE master encryption key.">TDE Master Encryption Key Attribute Management</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10333"></a><div class="props_rev_3"><a id="GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" name="GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105"></a><h4 id="ASOAG-GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" class="sect4">Creating Custom TDE Master Encryption Key Attributes for Reports</h4>
                  <div>
                     <p>Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-2934A241-AB48-4EEF-8A65-3638209931AB">About Creating Custom Attribute Tags</a><br>Attribute tags enable you to monitor specific activities users perform, such as accessing a particular terminal ID.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9D7F2315-0021-4E25-B75A-70C180D88307">Creating a Custom Attribute Tag</a><br>To create a custom attribute tag, you must use the <code class="codeph">SET TAG</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10334"></a><div class="props_rev_3"><a id="GUID-2934A241-AB48-4EEF-8A65-3638209931AB" name="GUID-2934A241-AB48-4EEF-8A65-3638209931AB"></a><h5 id="ASOAG-GUID-2934A241-AB48-4EEF-8A65-3638209931AB" class="sect5">About Creating Custom Attribute Tags</h5>
                     <div>
                        <p>Attribute tags enable you to monitor specific activities users perform, such as accessing a particular terminal ID.</p>
                        <p>By default, Oracle Database defines a set of attributes that describe various characteristics of the TDE master encryption keys that you create, such as the creation time, database in which the TDE master encryption key is used, and so on. These attributes are captured by the <code class="codeph">V$ENCRYPTION_KEY</code> dynamic view. 
                        </p>
                        <p>You can create custom attributes that can be captured by the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view. This enables you to define behaviors that you may want to monitor, such as users who perform activities on encryption keys. The tag can encompass multiple attributes, such as session IDs from a specific terminal. 
                        </p>
                        <p>After you create the tag for a TDE master encryption key, its name should appear in the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view for that TDE master encryption key. If you create a tag for the secret, then the tag appears in the <code class="codeph">SECRET_TAG</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view. If you create a secret with a tag, then the tag appears in the <code class="codeph">SECRET_TAG</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10335"></a><div class="props_rev_3"><a id="GUID-9D7F2315-0021-4E25-B75A-70C180D88307" name="GUID-9D7F2315-0021-4E25-B75A-70C180D88307"></a><h5 id="ASOAG-GUID-9D7F2315-0021-4E25-B75A-70C180D88307" class="sect5">Creating a Custom Attribute Tag</h5>
                     <div>
                        <p>To create a custom attribute tag, you must use the <code class="codeph">SET TAG</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. 
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>If necessary, query the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEY</code> dynamic view to find a listing of existing tags for the TDE master encryption keys.
                                 </p>
                                 <p>When you create a new tag for a TDE master encryption key, it overwrites the existing tag for that TDE master encryption key.</p>
                              </li>
                              <li>
                                 <p>Create the custom attribute tag by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET TAG 'tag' 
FOR '<span class="italic">master_key_identifier</span>' 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes or information that you define. Enclose this information in single quotation marks (' ').
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">master_key_identifier</code></span> identifies the TDE master encryption key for which the <span class="italic"><code class="codeph">tag</code></span> is set. To find a list of TDE master encryption key identifiers, query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span> is the password that was used to create the keystore.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">backup_identifier</code></span> defines the tag values. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>) and separate each value with a colon.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example, to create a tag that uses two values, one to capture a specific session ID and the second to capture a specific terminal ID: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
USING TAG 'sessionid=3205062574:terminal=xcvt' 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP;

keystore altered.
</pre><p>Both the session ID (<code class="codeph">3205062574</code>) and terminal ID (<code class="codeph">xcvt</code>) can derive their values by using either the <code class="codeph">SYS_CONTEXT</code> function with the <code class="codeph">USERENV</code> namespace, or by using the <code class="codeph">USERENV</code> function. 
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG9525"></a><div class="props_rev_3"><a id="GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" name="GUID-FDA3856D-5B88-42FD-A666-BC965C92689C"></a><h4 id="ASOAG-GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" class="sect4">Setting or Rekeying  the TDE Master Encryption Key in the Keystore</h4>
                  <div>
                     <p>You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0A2BDFB2-C190-4513-AF14-03263441D23F">About Setting or Rekeying the TDE Master Encryption Key in the Keystore</a><br>You can set or rekey the TDE master encryption key for both software password-based and hardware keystores. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E">Creating, Tagging, and Backing Up a TDE Master Encryption Key</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement enables you to create, tag, and back up a TDE master encryption key.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B">About Rekeying the TDE Master Encryption Key</a><br>Oracle Database uses a unified TDE Master Encryption Key for both TDE column encryption and TDE tablespace encryption. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-A687C8D0-7597-4D92-BB75-CEE35B012970">Rekeying the TDE Master Encryption Key</a><br>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to rekey a TDE master encryption key.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DFF126F3-6E49-4E98-9846-F4417A665E18">Changing the TDE Master Encryption Key for a Tablespace</a><br>You can use the <code class="codeph">ENCRYPT</code> and <code class="codeph">REKEY</code> clauses of the <code class="codeph">ALTER TABLESPACE</code> statement to encrypt a tablespace. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10336"></a><div class="props_rev_3"><a id="GUID-0A2BDFB2-C190-4513-AF14-03263441D23F" name="GUID-0A2BDFB2-C190-4513-AF14-03263441D23F"></a><h5 id="ASOAG-GUID-0A2BDFB2-C190-4513-AF14-03263441D23F" class="sect5">About Setting or Rekeying the TDE Master Encryption Key in the Keystore</h5>
                     <div>
                        <p>You can set or rekey the TDE master encryption key for both software password-based and hardware keystores. </p>
                        <p>The TDE master encryption key is stored in an external security module (keystore), and it is used to protect the <a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE table key</span></a>s and <a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">tablespace encryption key</span></a>s. By default, the TDE master encryption key is a system-generated random value created by Transparent Data Encryption (TDE). 
                        </p>
                        <p>Use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to set or reset (<code class="codeph">REKEY</code>) the TDE master encryption key. When the master encryption key is set, then TDE is considered enabled and cannot be disabled.
                        </p>
                        <p>Before you can encrypt or decrypt database columns or tablespaces, you must generate a TDE master encryption key. Oracle Database uses the same TDE master encryption key for both TDE column encryption and TDE tablespace encryption. The instructions for setting a software or hardware TDE master encryption key explain how to generate a tDE master encryption key.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="Once the keystore is open, you can set a TDE master encryption key for it.">Step 4: Set the TDE Master Encryption Key in the Software Keystore</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="After you have opened the hardware keystore, you are ready to set the hardware keystore TDE master encryption key.">Step 4: Set the Hardware Keystore TDE Master Encryption Key</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.">Setting or Rekeying the TDE Master Encryption Key in the Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG9526"></a><div class="props_rev_3"><a id="GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E" name="GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E"></a><h5 id="ASOAG-GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E" class="sect5">Creating, Tagging, and Backing Up a TDE Master Encryption Key</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement enables you to create, tag, and back up a TDE master encryption key.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Create and back up the TDE master encryption key, and apply a tag, by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
WITH BACKUP [USING '<span class="italic">backup_identifier</span>'];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the tag that you want to create. Enclose this tag in single quotation marks (<code class="codeph">' '</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span> is either <span class="italic"><code class="codeph">software_keystore_password</code></span> or <span class="italic"><code class="codeph">hardware_keystore_credentials</code></span>. As with software passwords, it is case sensitive. You must enclose the password string in double quotation marks (<code class="codeph">" "</code>). Separate <span class="italic"><code class="codeph">user_name</code></span> and <span class="italic"><code class="codeph">password</code></span> with a colon (<code class="codeph">:</code>).
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> backs the TDE master encryption key up in the same location as the key, as identified by the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. To find the <code class="codeph">WRL_PARAMETER</code> values for all of the database instances, query the <code class="codeph">GV$ENCRYPTION_WALLET</code> view. 
                                       </p>
                                       <p>You must back up password-based software keystores. You do not need to use it for auto-login or local auto-login software keystores. Optionally, include the <code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span> clause to add a description of the backup. Enclose this identifier in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
USING TAG 'backups" 
IDENTIFIED BY <span class="italic">password</span> 
WITH BACKUP USING 'hr.emp_key_backup';

keystore altered.
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Oracle Database uses the keystore in the keystore location specified by the <code class="codeph">WALLET_ROOT</code> parameter in the initialization parameter file to store the TDE master encryption key.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a></li>
                              <li><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50" title="Oracle recommends that you use the WALLET_ROOT and TDE_CONFIGURATION parameters to configure the keystore location, but an alternative is to configure the sqlnet.ora file.">About the Keystore Location in the sqlnet.ora File</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.">Setting or Rekeying the TDE Master Encryption Key in the Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG9527"></a><div class="props_rev_3"><a id="GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B" name="GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B"></a><h5 id="ASOAG-GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B" class="sect5">About Rekeying the TDE Master Encryption Key</h5>
                     <div>
                        <p>Oracle Database uses a unified TDE Master Encryption Key for both TDE column encryption and TDE tablespace encryption. </p>
                        <p>When you rekey the TDE master encryption key for TDE column encryption, the TDE Master Encryption Key for TDE tablespace encryption also is rekeyed. Rekey the TDE Master Encryption Key only if it was compromised or as per the security policies of the organization. This process deactivates the previous TDE master encryption key.</p>
                        <p>For better security and to meet compliance regulations, periodically rekey the TDE master encryption key. This process deactivates the previous TDE master encryption key, creates a new TDE master encryption key, and then activates it. You can check the keys that were created recently by querying the <code class="codeph">CREATION_TIME</code> column in the <code class="codeph">V$ENCRYPTION_KEYS</code> view. To find the keys that were activated recently, query the <code class="codeph">ACTIVATION_TIME</code> column in the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                        </p>
                        <p>You cannot change the TDE master encryption key or rekey a TDE master encryption key for an auto-login keystore. Because auto-login keystores do not have a password, an administrator or a privileged user can change the keys without the knowledge of the security officer. However, if both the auto-login and the password-based keystores are present in the configured location (as set in the <code class="codeph">sqlnet.ora</code> file), then when you rekey the TDE master encryption key, a TDE master encryption key is added to both the auto-login and password-based keystores. If the auto-login keystore is in use in a location that is different from that of the password-based keystore, then you must re-create the auto-login keystore. 
                        </p>
                        <p>Do not perform a rekey operation of the master key concurrently with an online tablespace rekey operation. You can find if an online tablespace is in the process of being TDE Master Encryption Keyed by issuing the following query: </p><pre class="oac_no_warn" dir="ltr">SELECT TS#,ENCRYPTIONALG,STATUS FROM V$ENCRYPTED_TABLESPACES;</pre><p>A status of <code class="codeph">REKEYING</code> means that the corresponding tablespace is still being rekeyed. 
                        </p>
                        <div class="infoboxnote" id="GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B__GUID-6B7DA46C-91A3-432C-A581-98A75E927FFE">
                           <p class="notep1">Note:</p>
                           <p>You cannot add new information to auto-login keystores separately.</p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.">Setting or Rekeying the TDE Master Encryption Key in the Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10541"></a><div class="props_rev_3"><a id="GUID-A687C8D0-7597-4D92-BB75-CEE35B012970" name="GUID-A687C8D0-7597-4D92-BB75-CEE35B012970"></a><h5 id="ASOAG-GUID-A687C8D0-7597-4D92-BB75-CEE35B012970" class="sect5">Rekeying the TDE Master Encryption Key</h5>
                     <div>
                        <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to rekey a TDE master encryption key.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>If you are rekeying the TDE master encryption key for a keystore that has auto login enabled, then ensure that both the auto login keystore, identified by the <code class="codeph">.sso</code> file, and the encryption keystore, identified by the <code class="codeph">.p12</code> file, are present.
                                 </p>
                                 <p>You can find the location of these files by querying the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. To find the <code class="codeph">WRL_PARAMETER</code> values for all of the database instances, query the <code class="codeph">GV$ENCRYPTION_WALLET</code> view.
                                 </p>
                              </li>
                              <li>
                                 <p>Rekey the TDE master encryption key by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET [ENCRYPTION] KEY 
[FORCE KEYSTORE]
[USING TAG '<span class="italic">tag_name</span>'] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes and information that you define. Enclose this setting in single quotation marks (<code class="codeph">' '</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span> is the mandatory keystore password that you created when you created the keystore in <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="After you have specified a directory location for the software keystore, you can create the keystore.">Step 2: Create the Software Keystore</a>. 
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> creates a backup of the keystore. You must use this option for password-based and hardware keystores. Optionally, you can use the <code class="codeph">USING</code> clause to add a brief description of the backup. Enclose this description in single quotation marks (<code class="codeph">'&nbsp;'</code>). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_emp_key_backup.p12</code>). Follow the file naming conventions that your operating system uses. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';

keystore altered.
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="After you have configured the hardware security module, you must open the hardware keystore before it can be used.">Step 3: Open the Hardware Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.">Setting or Rekeying the TDE Master Encryption Key in the Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" name="GUID-DFF126F3-6E49-4E98-9846-F4417A665E18"></a><h5 id="ASOAG-GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" class="sect5">Changing the TDE Master Encryption Key for a Tablespace</h5>
                     <div>
                        <p>You can use the <code class="codeph">ENCRYPT</code> and <code class="codeph">REKEY</code> clauses of the <code class="codeph">ALTER TABLESPACE</code> statement to encrypt a tablespace. 
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Ensure that the tablespace open in read-write mode. </span><div>
                                 <p>You can query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$INSTANCE</code> dynamic view to find if a database is open and the <code class="codeph">OPEN_MODE</code> column of the <code class="codeph">V$DATABASE</code> view to find if it in read-write mode.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If necessary, open the database in read-write mode. </span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ WRITE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the <code class="codeph">ALTER TABLESPACE</code> SQL statement to encrypt the tablespace. </span><div>
                                 <p>If the tablespace has not yet been encrypted, then use the <code class="codeph">ENCRYPT</code> clause:
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE encrypt_ts ENCRYPTION USING 'AES256' ENCRYPT;</pre><p>To change the encryption of the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, or <code class="codeph">UNDO</code> tablespace, you must rekey the tablespace online. Use the <code class="codeph">ONLINE</code> and <code class="codeph">REKEY</code> clauses. For example, to change the encryption algorithm of the <code class="codeph">SYSTEM</code> tablespace: 
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE SYSTEM ENCRYPTION ONLINE USING 'AES256' REKEY;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" title="You can encrypt, decrypt, or rekey existing user tablespaces, and the SYSTEM, SYSAUX, and UNDO tablespace when they are online.">About Encryption Conversion for Existing Online Tablespaces</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="You can set or rekey the TDE master encryption key for both software keystores and hardware keystores.">Setting or Rekeying the TDE Master Encryption Key in the Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10330"></a><div class="props_rev_3"><a id="GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" name="GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F"></a><h4 id="ASOAG-GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" class="sect4">Exporting and Importing the TDE Master Encryption Key</h4>
                  <div>
                     <p>You can export and import the TDE master encryption key in different ways.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73">About Exporting and Importing the TDE Master Encryption Key</a><br>Oracle Database features such as transportable tablespaces and Oracle Data Pump move data that is possibly encrypted between databases. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260">About Exporting TDE Master Encryption Keys</a><br>You can use <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> to export TDE master encryption keys from a keystore, and then import them into another keystore. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E">Exporting a TDE Master Encryption Key</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">EXPORT [ENCRYPTION] KEYS WITH SECRET</code> clause exports a TDE master encryption key.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C">Example: Exporting a TDE Master Encryption Key by Using a Subquery</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> statement can export a TDE master encryption key by using a subquery. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8541C442-4819-45EB-A63F-F08273EDBFA3">Example: Exporting a List of TDE Master Encryption Key Identifiers to a File</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS WITH SECRET</code> statement can export a list of TDE master encryption key identifiers to a file.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49">Example: Exporting All TDE Master Encryption Keys of the Database</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> SQL statement can export all TDE master encryption keys of a database.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A">About Importing TDE Master Encryption Keys</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT IMPORT</code> statement can import exported TDE master encryption keys from a key export file into a target keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52">Importing a TDE Master Encryption Key</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">IMPORT [ENCRYPTION] KEYS WITH SECRET</code> clause can import a TDE master encryption key.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0096C965-552F-4BB9-8B42-32D446D91887">Example: Importing a TDE Master Encryption Key</a><br>You can use the <span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT IMPORT KEYS</span> SQL statement to import a TDE master encryption key. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3988C759-E1DA-4385-91B9-A8F1215128B4">How Keystore Merge Differs from TDE Master Encryption Key Export or Import</a><br>The keystore merge operation differs from the TDE master encryption key export and import operations.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10423"></a><div class="props_rev_3"><a id="GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73" name="GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73"></a><h5 id="ASOAG-GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73" class="sect5">About Exporting and Importing the TDE Master Encryption Key</h5>
                     <div>
                        <p>Oracle Database features such as transportable tablespaces and Oracle Data Pump move data that is possibly encrypted between databases. </p>
                        <p>These are some common scenarios in which you can choose to export and import TDE master encryption keys to move them between source and target keystores. For Data Guard (Logical Standby), you must copy the keystore that is in the primary database to the standby database. Instead of merging the primary database keystore with the standby database, you can export the TDE master encryption key that is in use and then import it to the standby database. Moving transportable tablespaces that are encrypted between databases requires that you export the TDE master encryption key at the source database and then import it into the target database.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10424"></a><div class="props_rev_3"><a id="GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260" name="GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260"></a><h5 id="ASOAG-GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260" class="sect5">About Exporting TDE Master Encryption Keys</h5>
                     <div>
                        <p>You can use <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> to export TDE master encryption keys from a keystore, and then import them into another keystore. 
                        </p>
                        <p>A TDE master encryption key is exported together with its key identifier and key attributes. The exported keys are protected with a password (secret) in the export file. </p>
                        <p>You can specify the TDE master encryption keys to be exported by using the <code class="codeph">WITH IDENTIFIER</code> clause of the <code class="codeph">ADMINSITER KEY MANAGENT EXPORT</code> statement. To export the TDE master encryption keys, you can either specify their key identifiers as a comma-separated list, or you can specify a query that enumerates their key identifiers. Be aware that Oracle Database executes the query determining the key identifiers within the current user's rights and not with definer's rights.
                        </p>
                        <p>If you omit the <code class="codeph">WITH IDENTIFER</code> clause, then all of the TDE master encryption keys of the database are exported. 
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="In isolated mode, the EXPORT and IMPORT clauses of ADMINISTER KEY MANAGEMENT EXPORT can export or import master encryption keys for a PDB.">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10522"></a><div class="props_rev_3"><a id="GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E" name="GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E"></a><h5 id="ASOAG-GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E" class="sect5">Exporting a TDE Master Encryption Key</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">EXPORT [ENCRYPTION] KEYS WITH SECRET</code> clause exports a TDE master encryption key.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Export the TDE master encryption keys by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT [ENCRYPTION] KEYS 
WITH SECRET "<span class="italic">export_secret</span>" 
TO '<span class="italic">file_path</span>' 
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>]
[WITH IDENTIFIER IN '<span class="italic">key_id1</span>', '<span class="italic">key_id2</span>', '<span class="italic">key_idn</span>' | (<span class="italic">SQL_query</span>)];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">export_secret</code></span> is a password that you can specify to encrypt the export the file that contains the exported keys. Enclose this secret in double quotation marks ("&nbsp;"), or you can omit the quotation marks if the secret has no spaces.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">file_path</code></span> is the complete path and name of the file to which the keys must be exported. Enclose this path in single quotation marks (<code class="codeph">'&nbsp;')</code>. You can export to regular file systems only.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password of the keystore containing the keys. 
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">key_id1</code></span>, <span class="italic"><code class="codeph">key_id2</code></span>, <span class="italic"><code class="codeph">key_idn</code></span> is a string of one or more TDE master encryption key identifiers for the TDE master encryption key being exported. Separate each key identifier with a comma and enclose each of these key identifiers in single quotation marks (<code class="codeph">'&nbsp;'</code>). To find a list of TDE master encryption key identifiers, query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">SQL_query</code></span> is a query that fetches a list of the TDE master encryption key identifiers. It should return only one column which contains the TDE master encryption key identifiers. This query is executed with current user rights.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10426"></a><a id="ASOAG10523"></a><div class="props_rev_3"><a id="GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C" name="GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C"></a><h5 id="ASOAG-GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C" class="sect5">Example: Exporting a TDE Master Encryption Key by Using a Subquery</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> statement can export a TDE master encryption key by using a subquery. 
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8541C442-4819-45EB-A63F-F08273EDBFA3__CIHEHFIH">Example 4-5</a> shows how to export TDE master encryption keys whose identifiers are fetched by a query to a file called <code class="codeph">export.exp</code>. The TDE master encryption keys in the file are encrypted using the secret <code class="codeph">my_secret</code>. The <code class="codeph">SELECT</code> statement finds the identifiers for the TDE master encryption keys to be exported. 
                        </p>
                        <div class="example" id="GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C__CIHHCDBI">
                           <p class="titleinexample">Example 4-4 Exporting a List of TDE Master Encryption Key Identifiers to a File</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS 
WITH SECRET "my_secret" 
TO '/TDE/export.exp' 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">password</span> 
WITH IDENTIFIER IN 'AdoxnJ0uH08cv7xkz83ovwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',
'AW5z3CoyKE/yv3cNT5CWCXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';

keystore altered.
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10425"></a><div class="props_rev_3"><a id="GUID-8541C442-4819-45EB-A63F-F08273EDBFA3" name="GUID-8541C442-4819-45EB-A63F-F08273EDBFA3"></a><h5 id="ASOAG-GUID-8541C442-4819-45EB-A63F-F08273EDBFA3" class="sect5">Example: Exporting a List of TDE Master Encryption Key Identifiers to a File</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS WITH SECRET</code> statement can export a list of TDE master encryption key identifiers to a file.
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C__CIHHCDBI">Example 4-4</a> shows how to export TDE master encryption keys by specifying their identifiers as a list, to a file called <code class="codeph">export.exp</code>. TDE master encryption keys in the file are encrypted using the secret <code class="codeph">my_secret</code>. The identifiers of the TDE master encryption key to be exported are provided as a comma-separated list.
                        </p>
                        <div class="example" id="GUID-8541C442-4819-45EB-A63F-F08273EDBFA3__CIHEHFIH">
                           <p class="titleinexample">Example 4-5 Exporting TDE Master Encryption Key Identifiers by Using a Subquery</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS 
WITH SECRET "my_secret" TO '/etc/TDE/export.exp' 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">password</span> 
WITH IDENTIFIER IN (SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE ROWNUM &lt;3);

keystore altered.
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10524"></a><div class="props_rev_3"><a id="GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49" name="GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49"></a><h5 id="ASOAG-GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49" class="sect5">Example: Exporting All TDE Master Encryption Keys of the Database</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> SQL statement can export all TDE master encryption keys of a database.
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49__BGBGDDCG">Example 4-6</a> shows how to export all of the TDE master encryption keys of the database to a file called <code class="codeph">export.exp</code>. The TDE master encryption keys in the file are encrypted using the secret <code class="codeph">my_secret</code>.
                        </p>
                        <div class="example" id="GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49__BGBGDDCG">
                           <p class="titleinexample">Example 4-6 Exporting All of the TDE Master Encryption Keys of the Database</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS 
WITH SECRET "my_secret" TO '/etc/TDE/export.exp' 
FORCE KEYSTORE
IDENTIFIED BY password;

keystore altered.</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10427"></a><div class="props_rev_3"><a id="GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A" name="GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A"></a><h5 id="ASOAG-GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A" class="sect5">About Importing TDE Master Encryption Keys</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT IMPORT</code> statement can import exported TDE master encryption keys from a key export file into a target keystore.
                        </p>
                        <p> You cannot re-import TDE master encryption keys that have already been imported.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="In isolated mode, the EXPORT and IMPORT clauses of ADMINISTER KEY MANAGEMENT EXPORT can export or import master encryption keys for a PDB.">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10525"></a><div class="props_rev_3"><a id="GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52" name="GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52"></a><h5 id="ASOAG-GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52" class="sect5">Importing a TDE Master Encryption Key</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">IMPORT [ENCRYPTION] KEYS WITH SECRET</code> clause can import a TDE master encryption key.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Run the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT IMPORT [ENCRYPTION] KEYS 
WITH SECRET "<span class="italic">import_secret</span>"  
FROM '<span class="italic">file_name</span>' 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">import_secret</code></span> is the same password that was used to encrypt the keys during the export operation. Enclose this secret in double quotation marks (" "), or you can omit the quotation marks if the secret has no spaces.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">file_name</code></span> is the complete path and name of the file from which the keys need to be imported. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                       <p></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password of the software keystore where the keys are being imported. 
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> must be used in case the target keystore was not backed up before the import operation. <span class="italic"><code class="codeph">backup_identifier</code></span> is an optional string that you can provide to identify the keystore backup. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="Depending on the type of keystore you create, you must manually open the keystore before you can use it.">Step 3: Open the Software Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10428"></a><a id="ASOAG10526"></a><div class="props_rev_3"><a id="GUID-0096C965-552F-4BB9-8B42-32D446D91887" name="GUID-0096C965-552F-4BB9-8B42-32D446D91887"></a><h5 id="ASOAG-GUID-0096C965-552F-4BB9-8B42-32D446D91887" class="sect5">Example: Importing a TDE Master Encryption Key</h5>
                     <div>
                        <p>You can use the <span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT IMPORT KEYS</span> SQL statement to import a TDE master encryption key. 
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0096C965-552F-4BB9-8B42-32D446D91887__CIHEAHBC">Example 4-7</a> shows how to import the TDE master encryption key identifiers that are stored in the file <code class="codeph">export.exp</code> and encrypted with the secret <code class="codeph">my_secret</code>.
                        </p>
                        <div class="example" id="GUID-0096C965-552F-4BB9-8B42-32D446D91887__CIHEAHBC">
                           <p class="titleinexample">Example 4-7 Importing TDE Master Encryption Key Identifiers from an Export File</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT IMPORT KEYS 
WITH SECRET "my_secret" 
FROM '/etc/TDE/export.exp' 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP;

keystore altered.</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10527"></a><div class="props_rev_3"><a id="GUID-3988C759-E1DA-4385-91B9-A8F1215128B4" name="GUID-3988C759-E1DA-4385-91B9-A8F1215128B4"></a><h5 id="ASOAG-GUID-3988C759-E1DA-4385-91B9-A8F1215128B4" class="sect5">How Keystore Merge Differs from TDE Master Encryption Key Export or Import</h5>
                     <div>
                        <p>The keystore merge operation differs from the TDE master encryption key export and import operations.</p>
                        <p>Even though both the <code class="codeph">ADMINISTER KEY MANAGEMENT MERGE</code> statement and the <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> and <code class="codeph">IMPORT</code> statements eventually move the TDE master encryption keys from one keystore to the next, there are differences in how these two statements function.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">MERGE</code> statement merges two keystores whereas the <code class="codeph">EXPORT</code> and <code class="codeph">IMPORT</code> statements export the keys to a file or import the keys from a file. The keystore is different from the export file, and the two cannot be used interchangeably. The export file is not a keystore and cannot be configured to be used with a database as a keystore. Similarly, the <code class="codeph">IMPORT</code> statement cannot extract the TDE master encryption keys from the keystore.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">MERGE</code> statement merges all of the TDE master encryption keys of the specified keystores where as the <code class="codeph">EXPORT</code> and <code class="codeph">IMPORT</code> statements can be selective. 
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">EXPORT</code> and <code class="codeph">IMPORT</code> statements require the user to provide both a location (<code class="codeph">filepath</code>) and the file name of the export file, whereas the <code class="codeph">MERGE</code> statement only takes in the location of the keystores. 
                              </p>
                           </li>
                           <li>
                              <p>The file name of the keystores is fixed and is determined by the <code class="codeph">MERGE</code> operation and can be either <code class="codeph">ewallet.p12</code> or <code class="codeph">cwallet.sso</code>. The file names for the export files used in the <code class="codeph">EXPORT</code> the <code class="codeph">IMPORT</code> statements are specified by the user.
                              </p>
                           </li>
                           <li>
                              <p>The keystores on Automatic Storage Management (ASM) disk groups or regular file systems can be merged with <code class="codeph">MERGE</code> statements. The export files used in the <code class="codeph">EXPORT</code> and the <code class="codeph">IMPORT</code> statements can only be a regular operating system file and cannot be located on an ASM disk group. 
                              </p>
                           </li>
                           <li>
                              <p>The keystores merged using the <code class="codeph">MERGE</code> statement do not need to be configured or in use with the database. The <code class="codeph">EXPORT</code> statement can only export the keys from a keystore that is configured and in use with the database and is also open when the export is done. The <code class="codeph">IMPORT</code> statement can only import the keys into a keystore that is open, configured, and in use with the database.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">MERGE</code> statement never modifies the metadata associated with the TDE master encryption keys. The <code class="codeph">EXPORT</code> and <code class="codeph">IMPORT</code> operations can modify the metadata of the TDE master encryption keys when required, such as during a PDB plug operation.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10608"></a><div class="props_rev_3"><a id="GUID-48512BB6-C588-4704-B2BD-22606C0F05BC" name="GUID-48512BB6-C588-4704-B2BD-22606C0F05BC"></a><h4 id="ASOAG-GUID-48512BB6-C588-4704-B2BD-22606C0F05BC" class="sect4">Management of TDE Master Encryption Keys Using Oracle Key Vault</h4>
                  <div>
                     <p>You can use Oracle Key Vault to manage and share TDE master encryption keys across an enterprise. </p>
                     <p>Oracle Key Vault securely stores the keys in a central repository, along with other security objects such as credential files and Java keystores, and enables you to share these objects with other TDE-enabled databases. </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" title="You can use Oracle Key Vault to migrate both software and hardware keystores to and from Oracle Key Vault.">Migration of Keystores to and from Oracle Key Vault</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10693" target="_blank"><span><cite>Oracle Key Vault Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="You can manage the TDE master encryption key in several ways.">Managing the TDE Master Encryption Key</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10398"></a><div class="props_rev_3"><a id="GUID-FF270B27-A456-477A-81E0-50E74926A810" name="GUID-FF270B27-A456-477A-81E0-50E74926A810"></a><h3 id="ASOAG-GUID-FF270B27-A456-477A-81E0-50E74926A810" class="sect3">Storing Oracle Database Secrets</h3>
               <div>
                  <p>Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8">About Storing Oracle Database Secrets in a Keystore</a><br>Keystores can store secrets that support internal Oracle Database features and integrate external clients such as Oracle GoldenGate. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9">Storage of Oracle Database Secrets in a Software Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add secrets, update secrets, and delete secrets from a keystore. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425">Example: Adding an HSM Password to a Software Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT  ADD SECRET</code> statement can add an HSM password to a software keystore. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479">Example: Changing an HSM Password Stored as a Secret in a Software Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT UPDATE SECRET</code> statement can change an HSM password that is stored as a secret in a software keystore.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-647817C3-E465-4B4C-A78A-DBC377272CCE">Example: Deleting an HSM Password Stored as a Secret in a Software Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT  DELETE SECRET</code> statement can delete HSM passwords that are stored as secrets in a software keystore. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D20146E5-E2B4-40D6-B503-189211FBD874">Storage of Oracle Database Secrets in a Hardware Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add, update, and delete secrets. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-780B5AFA-9353-479E-9462-A7EE078CE59F">Example: Adding an Oracle Database Secret to a Hardware Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code> statement can add an Oracle Database secret to a hardware keystore.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49">Example: Changing an Oracle Database Secret in a Hardware Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT MANAGEMENT UPDATE SECRET</code> statement can change an Oracle Database secret in a hardware keystore.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-259B198F-E8CB-4134-8139-916500215955">Example: Deleting an Oracle Database Secret in a Hardware Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT DELETE SECRET FOR CLIENT</code> statement can delete an Oracle Database secret that is in a hardware keystore.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D">Configuring Auto-Login Hardware Security Modules</a><br>A hardware security module can be configured to use the auto-login capability.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">Managing the Keystore and the Master&nbsp;Encryption Key</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10399"></a><div class="props_rev_3"><a id="GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8" name="GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8"></a><h4 id="ASOAG-GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8" class="sect4">About Storing Oracle Database Secrets in a Keystore</h4>
                  <div>
                     <p>Keystores can store secrets that support internal Oracle Database features and integrate external clients such as Oracle GoldenGate. </p>
                     <p>The secret key must be a string adhering to Oracle identifier rules. You can add, update, or delete a client secret in an existing keystore. The Oracle GoldenGate Extract process must have data encryption keys to decrypt the data that is in data files and in <code class="codeph">REDO</code> or <code class="codeph">UNDO</code> logs. Keys are encrypted with shared secrets when you share the keys between an Oracle database and an Oracle GoldenGate client. The software keystore stores the shared secrets. 
                     </p>
                     <p>Depending on your site's requirements, you may require automated open keystore operations even when a hardware security module is configured. For this reason, the hardware security module password can be stored in a software auto-login keystore, which enables the auto-login capability for the hardware security module. The Oracle Database side can also store the credentials for the database to log in to an external storage server in the software keystore. </p>
                     <p>You can store Oracle Database secrets in both software keystores and hardware keystores:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Software keystores:</span> You can store secrets in software password-based, auto-login, and local auto-login software keystores. If you want to store secrets in an auto-login (or auto-login local) keystore, then note the following:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If the software auto-login keystore is in the same location as its corresponding password-based software keystore, then the secrets are added automatically.</p>
                              </li>
                              <li>
                                 <p>If the software auto-login keystore is in a different location from its corresponding password-based software keystore, then you must create the auto-login keystore again from the password-based keystore, and keep the two keystores in synchronization.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">Hardware keystores:</span> You can store secrets in standard hardware security modules. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D20146E5-E2B4-40D6-B503-189211FBD874" title="The ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET statements can add, update, and delete secrets.">Storage of Oracle Database Secrets in a Hardware Keystore</a></li>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="A hardware security module can be configured to use the auto-login capability.">Configuring Auto-Login Hardware Security Modules</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10400"></a><div class="props_rev_3"><a id="GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9" name="GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9"></a><h4 id="ASOAG-GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9" class="sect4">Storage of Oracle Database Secrets in a Software Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add secrets, update secrets, and delete secrets from a keystore. 
                     </p>
                     <p>As with all of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statements, you must have the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or the <code class="codeph">SYSKM</code> administrative privilege. To find information about existing secrets, you can query the <code class="codeph">V$CLIENT_SECRETS</code> dynamic view. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Adding a secret:</span> Use the following syntax:
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
ADD SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_identifier</span>' 
[USING TAG '<span class="italic">tag</span>']
[TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span>  
[FORCE KEYSTORE]  
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>]
[WITH BACKUP [USING <span class="italic">backup_id</span>];</pre></li>
                        <li>
                           <p><span class="bold">Updating a secret:</span> Use the following syntax:
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
UPDATE SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_identifier</span>' 
[USING TAG '<span class="italic">tag</span>']
 [TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]  
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>]
[WITH BACKUP [USING <span class="italic">backup_id</span>];
</pre></li>
                        <li>
                           <p><span class="bold">Deleting a secret:</span> Use the following syntax:
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
DELETE SECRET FOR CLIENT '<span class="italic">client_identifier</span>' 
[FROM [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]  
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>]
[WITH BACKUP [USING <span class="italic">backup_id</span>];
</pre></li>
                     </ul>
                     <p>In all of these statements, the specification is as follows: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic"><code class="codeph">secret</code></span> is the client secret key to be stored, updated, or deleted. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>) or omit the quotation marks if the secret has no spaces. To find information about existing secrets and their client identifiers, query the <code class="codeph">V$CLIENT_SECRETS</code> dynamic view.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">client_identifier</code></span> is an alphanumeric string used to identify the secret key. <span class="italic"><code class="codeph">client_identifier</code></span> does not have a default value. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">TO [[LOCAL] AUTOLOGIN] KEYSTORE</code> refers to the location of an auto-login keystore, which is specified in the <code class="codeph">sqlnet.ora</code> file.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">tag</code></span> is an optional, user-defined description for the secret key to be stored. You can use <span class="italic"><code class="codeph">tag</code></span> with the <code class="codeph">ADD</code> and <code class="codeph">UPDATE</code> operations. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>). This tag appears in the <code class="codeph">SECRET_TAG</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view.
                           </p>
                           <p><code class="codeph">WITH BACKUP</code> is required in case the keystore was not backed up before the <code class="codeph">ADD</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> operation. <span class="italic"><code class="codeph">backup_identifier</code></span> is an optional user-defined description for the backup. Enclose <span class="italic"><code class="codeph">backup_identifier</code></span> in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[TO | FROM [[LOCAL] AUTOLOGIN] KEYSTORE</code> specifies the location of the auto-login or password keystore, which is set in the s<code class="codeph">qlnet.ora</code> file. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation if an auto-login keystore is open (and in use) or if the keystore is closed. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation. 
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">keystore_password</code></span> is the password for the keystore. 
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10401"></a><a id="ASOAG10528"></a><div class="props_rev_3"><a id="GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425" name="GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425"></a><h4 id="ASOAG-GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425" class="sect4">Example: Adding an HSM Password to a Software Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT  ADD SECRET</code> statement can add an HSM password to a software keystore. 
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425__CIHJBCFE">Example 4-8</a> shows how to add a hardware security module (HSM) password as a secret to a software keystore.
                     </p>
                     <div class="example" id="GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425__CIHJBCFE">
                        <p class="titleinexample">Example 4-8 Adding an Oracle Database Secret to a Software Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
ADD SECRET 'psmith:<span class="italic">password</span>' FOR CLIENT 'HSM_PASSWORD' 
USING TAG 'HSM credentials' FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP;
</pre><p>In this version, the keystore password is in an external store, so the <code class="codeph">EXTERNAL STORE</code> setting is used for <code class="codeph">IDENTIFIED BY</code>:
                        </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
ADD SECRET 'psmith:<span class="italic">password</span>' FOR CLIENT 'HSM_PASSWORD' 
USING TAG 'HSM credentials' FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE WITH BACKUP;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10430"></a><div class="props_rev_3"><a id="GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479" name="GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479"></a><h4 id="ASOAG-GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479" class="sect4">Example: Changing an HSM Password Stored as a Secret in a Software Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT UPDATE SECRET</code> statement can change an HSM password that is stored as a secret in a software keystore.
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479__CIHJCFCI">Example 4-9</a> shows how to change an HSM password that is stored as a secret in a software keystore.
                     </p>
                     <div class="example" id="GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479__CIHJCFCI">
                        <p class="titleinexample">Example 4-9 Changing an Oracle Database Secret to a Software Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
UPDATE SECRET <span class="italic">admin_password</span> FOR CLIENT 'admin@myhost' 
USING TAG '<span class="italic">new_host_credentials</span>' FORCE KEYSTORE
IDENTIFIED BY <span class="italic">software_keytore_password</span>;
</pre><p>In this version, the password for the keystore is in an external store:</p><pre class="oac_no_warn" dir="ltr">DMINISTER KEY MANAGEMENT
UPDATE SECRET <span class="italic">admin_password</span> FOR CLIENT 'admin@myhost' 
USING TAG '<span class="italic">new_host_credentials</span>' FORCE KEYSTORE
IDENTIFIED BY EXTERNAL STORE;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10431"></a><div class="props_rev_3"><a id="GUID-647817C3-E465-4B4C-A78A-DBC377272CCE" name="GUID-647817C3-E465-4B4C-A78A-DBC377272CCE"></a><h4 id="ASOAG-GUID-647817C3-E465-4B4C-A78A-DBC377272CCE" class="sect4">Example: Deleting an HSM Password Stored as a Secret in a Software Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT  DELETE SECRET</code> statement can delete HSM passwords that are stored as secrets in a software keystore. 
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-647817C3-E465-4B4C-A78A-DBC377272CCE__CIHEEJDB">Example 4-10</a> shows how to delete an HSM password that is stored as a secret in the software keystore.
                     </p>
                     <div class="example" id="GUID-647817C3-E465-4B4C-A78A-DBC377272CCE__CIHEEJDB">
                        <p class="titleinexample">Example 4-10 Deleting an Oracle Database Secret in a Software Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
DELETE SECRET FOR CLIENT 'HSM_PASSWORD' 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP;</pre><p>In this version, the password for the keystore is in an external store:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
DELETE SECRET FOR CLIENT 'HSM_PASSWORD'
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE WITH BACKUP;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10403"></a><div class="props_rev_3"><a id="GUID-D20146E5-E2B4-40D6-B503-189211FBD874" name="GUID-D20146E5-E2B4-40D6-B503-189211FBD874"></a><h4 id="ASOAG-GUID-D20146E5-E2B4-40D6-B503-189211FBD874" class="sect4">Storage of Oracle Database Secrets in a Hardware Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add, update, and delete secrets. 
                     </p>
                     <p>As with all <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statements, you must have the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or the <code class="codeph">SYSKM</code> administrative privilege. When you add, update, or delete secrets from a keystore that is in use or presently open, then you must run <code class="codeph">ADMINISTER KEY MANAGEMENT</code> in the root.
                     </p>
                     <p>You can store Oracle Database secrets in both HSM and Oracle Key Vault hardware keystores, but be aware that automatic logins do not work if you store the <code class="codeph">HSM_PASSWORD</code> in a Key Vault keystore.
                     </p>
                     <div class="infoboxnote" id="GUID-D20146E5-E2B4-40D6-B503-189211FBD874__GUID-6246DD1A-2CC4-4D27-A85C-27A3F31F3C1C">
                        <p class="notep1">Note:</p>
                        <p>Before you attempt to add a secret to a hardware security module, ensure that it has PKCS#11 data object support.</p>
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Adding a secret:</span> Use the following syntax:
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD SECRET '<span class="italic">secret</span>' 
FOR CLIENT '<span class="italic">client_identifier</span>' [USING TAG '<span class="italic">tag</span>']
[TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>" 
[WITH BACKUP [USING <span class="italic">backup_id</span>]];</pre></li>
                        <li>
                           <p><span class="bold">Updating a secret:</span> Use the following syntax:
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT UPDATE SECRET '<span class="italic">secret</span>' 
FOR CLIENT '<span class="italic">client_identifier</span>' [USING TAG '<span class="italic">tag</span>'] 
[TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>" 
[WITH BACKUP [USING <span class="italic">backup_id</span>]];
</pre></li>
                        <li>
                           <p><span class="bold">Deleting a secret:</span> Use the following syntax:
                           </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT DELETE SECRET 
FOR CLIENT '<span class="italic">client_identifier</span>' 
[FROM [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>" 
[WITH BACKUP [USING <span class="italic">backup_id</span>]];
</pre></li>
                     </ul>
                     <p>In all of these statements, the specification as follows: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic"><code class="codeph">secret</code></span> is the client secret key to be stored, updated, or deleted. Enclose this setting in double quotation marks (<code class="codeph">'&nbsp;'</code>) or omit the quotation marks if the secret has no spaces. To find information about existing secrets and their client identifiers, query the <code class="codeph">V$CLIENT_SECRETS</code> dynamic view.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">client_identifier</code></span> is an alphanumeric string used to identify the secret key. <span class="italic"><code class="codeph">client_identifier</code></span> does not have a default value. Enclose this setting in single quotation marks ('&nbsp;').
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">tag</code></span> is an optional, user-defined description for the secret key to be stored. You can use <span class="italic"><code class="codeph">tag</code></span> with the <code class="codeph">ADD</code> and <code class="codeph">UPDATE</code> operations. Enclose this setting in single quotation marks (<code class="codeph">' '</code>). This tag appears in the <code class="codeph">SECRET_TAG</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[TO | FROM [[LOCAL] AUTOLOGIN] KEYSTORE</code> specifies the location of the keystore used for the hardware keystore. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">“<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>”</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this user’s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10432"></a><a id="ASOAG10529"></a><div class="props_rev_3"><a id="GUID-780B5AFA-9353-479E-9462-A7EE078CE59F" name="GUID-780B5AFA-9353-479E-9462-A7EE078CE59F"></a><h4 id="ASOAG-GUID-780B5AFA-9353-479E-9462-A7EE078CE59F" class="sect4">Example: Adding an Oracle Database Secret to a Hardware Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code> statement can add an Oracle Database secret to a hardware keystore.
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-780B5AFA-9353-479E-9462-A7EE078CE59F__CIHFCIFC">Example 4-11</a> shows how to add a password for a user to a hardware keystore.
                     </p>
                     <div class="example" id="GUID-780B5AFA-9353-479E-9462-A7EE078CE59F__CIHFCIFC">
                        <p class="titleinexample">Example 4-11 Adding an Oracle Database Secret to a Hardware Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD SECRET '<span class="italic">password</span>' 
FOR CLIENT 'admin@myhost' USING TAG 'myhost admin credentials' 
IDENTIFIED BY "psmith:<span class="italic">password</span>";
</pre><p>In this version, the keystore password is in an external store, so the <code class="codeph">EXTERNAL STORE</code> setting is used for <code class="codeph">IDENTIFIED BY</code>:
                        </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD SECRET '<span class="italic">password</span>' 
FOR CLIENT 'admin@myhost' USING TAG 'myhost admin credentials' 
IDENTIFIED BY EXTERNAL STORE;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10433"></a><div class="props_rev_3"><a id="GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49" name="GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49"></a><h4 id="ASOAG-GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49" class="sect4">Example: Changing an Oracle Database Secret in a Hardware Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT MANAGEMENT UPDATE SECRET</code> statement can change an Oracle Database secret in a hardware keystore.
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49__CIHBADJF">Example 4-12</a> shows how to change a password that is stored as a secret in a hardware keystore.
                     </p>
                     <div class="example" id="GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49__CIHBADJF">
                        <p class="titleinexample">Example 4-12 Changing an Oracle Database Secret in a Hardware Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MANAGEMENT UPDATE SECRET '<span class="italic">password2</span>' 
FOR CLIENT 'admin@myhost' USING TAG 'New host credentials' 
IDENTIFIED BY "psmith:password";
</pre><p>In this version, the password for the keystore is in an external store:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MANAGEMENT UPDATE SECRET '<span class="italic">password2</span>' 
FOR CLIENT 'admin@myhost' USING TAG 'New host credentials' 
IDENTIFIED BY EXTERNAL STORE;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10434"></a><div class="props_rev_3"><a id="GUID-259B198F-E8CB-4134-8139-916500215955" name="GUID-259B198F-E8CB-4134-8139-916500215955"></a><h4 id="ASOAG-GUID-259B198F-E8CB-4134-8139-916500215955" class="sect4">Example: Deleting an Oracle Database Secret in a Hardware Keystore</h4>
                  <div>
                     <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT DELETE SECRET FOR CLIENT</code> statement can delete an Oracle Database secret that is in a hardware keystore.
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-259B198F-E8CB-4134-8139-916500215955__CIHEEACE">Example 4-13</a> shows how to delete a hardware security module password that is stored as a secret in the hardware keystore.
                     </p>
                     <div class="example" id="GUID-259B198F-E8CB-4134-8139-916500215955__CIHEEACE">
                        <p class="titleinexample">Example 4-13 Deleting an Oracle Database Secret in a Hardware Keystore</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT DELETE SECRET FOR CLIENT 'admin@myhost' 
IDENTIFIED BY "psmith:<span class="italic">password</span>";</pre><p>In this version, the password for the keystore is in an external store:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT DELETE SECRET FOR CLIENT 'admin@myhost' 
IDENTIFIED BY EXTERNAL STORE;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10435"></a><div class="props_rev_3"><a id="GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" name="GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D"></a><h4 id="ASOAG-GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" class="sect4">Configuring Auto-Login Hardware Security Modules</h4>
                  <div>
                     <p>A hardware security module can be configured to use the auto-login capability.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F">About Configuring Auto-Login Hardware Security Modules</a><br>An auto-login hardware security module stores the hardware security module credentials in an auto-login keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645">Configuring an Auto-Login Hardware Security Module</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement configures an auto-login hardware security module.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10530"></a><div class="props_rev_3"><a id="GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F" name="GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F"></a><h5 id="ASOAG-GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F" class="sect5">About Configuring Auto-Login Hardware Security Modules</h5>
                     <div>
                        <p>An auto-login hardware security module stores the hardware security module credentials in an auto-login keystore.</p>
                        <p>This configuration reduces the security of the system as a whole. However, this configuration does support unmanned or automated operations and is useful in deployments where automatic re-login of the hardware security module is necessary. </p>
                        <p>Be aware that executing the query <code class="codeph">SELECT * FROM V$ENCRYPTION_WALLET</code> will automatically open an auto-login hardware security module. For example, suppose you have an auto-login hardware security module configured. If you close the keystore and query the <code class="codeph">V$ENCRYPTION_WALLET</code> view, then the output will indicate that a keystore is open. This is because <code class="codeph">V$ENCRYPTION_WALLET</code> opened up the auto-login hardware and then displayed the status of the auto-login keystore.
                        </p>
                        <p>To enable the auto-login capability for a hardware security module, you must store the hardware security module credentials in the hardware keystore. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="A hardware security module can be configured to use the auto-login capability.">Configuring Auto-Login Hardware Security Modules</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10531"></a><div class="props_rev_3"><a id="GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645" name="GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645"></a><h5 id="ASOAG-GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645" class="sect5">Configuring an Auto-Login Hardware Security Module</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement configures an auto-login hardware security module.
                        </p>
                        <div class="p">Before you begin this procedure, ensure that you have configured the TDE hardware keystore. See <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a>. 
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Reconfigure the <code class="codeph">WALLET_ROOT</code> parameter in the <code class="codeph">init.ora</code> file to include the keystore location of the software keystore, if it is not already present. 
                                 </p>
                                 <p>The software keystore location may already be present if the you have previously migrated to using HSM.</p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">WALLET_ROOT=/etc/ORACLE/WALLETS/orcl</pre></li>
                              <li>
                                 <p>Add or update the secret in the software keystore.</p>
                                 <p>The secret is the hardware security module password and the client is the <code class="codeph">HSM_PASSWORD</code>. <code class="codeph">HSM_PASSWORD</code> is an Oracle-defined client name that is used to represent the HSM password as a secret in the software keystore. 
                                 </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD SECRET '<span class="italic">user_name</span>:<span class="italic">password</span>' 
FOR CLIENT 'HSM_PASSWORD' 
TO LOCAL AUTOLOGIN KEYSTORE <span class="italic">software_keystore_location</span> 
WITH BACKUP;</pre><p>In this example, <code class="codeph"><span class="codeinlineitalic">software_keystore_location</span></code> is the location of the software keystore that you just defined.
                                 </p>
                              </li>
                           </ol>
                           <p>At this stage, the next time that a TDE operation executes, the hardware security module auto-login keystore opens automatically. </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50" title="Oracle recommends that you use the WALLET_ROOT and TDE_CONFIGURATION parameters to configure the keystore location, but an alternative is to configure the sqlnet.ora file.">About the Keystore Location in the sqlnet.ora File</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="A hardware security module can be configured to use the auto-login capability.">Configuring Auto-Login Hardware Security Modules</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10338"></a><div class="props_rev_3"><a id="GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" name="GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368"></a><h3 id="ASOAG-GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" class="sect3">Storing Oracle GoldenGate Secrets in a Keystore</h3>
               <div>
                  <p>You can store Oracle GoldenGate secrets in Transparent Data Encryption keystores.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EEF80967-1671-465F-A13D-69C1CB676B39">About Storing Oracle GoldenGate Secrets in Keystores</a><br>You can use a keystore to store secret keys for tools and external clients such as Oracle GoldenGate. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24">Oracle GoldenGate Extract Classic Capture Mode TDE Requirements</a><br>Ensure that you meet the requirements for Oracle GoldenGate Extract to support Transparent Data Encryption capture.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C">Configuring Keystore Support for Oracle GoldenGate</a><br>You can configure Transparent Data Encryption keystore support for Oracle GoldenGate by using a shared secret for the keystore. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore.">Managing the Keystore and the Master&nbsp;Encryption Key</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10385"></a><div class="props_rev_3"><a id="GUID-EEF80967-1671-465F-A13D-69C1CB676B39" name="GUID-EEF80967-1671-465F-A13D-69C1CB676B39"></a><h4 id="ASOAG-GUID-EEF80967-1671-465F-A13D-69C1CB676B39" class="sect4">About Storing Oracle GoldenGate Secrets in Keystores</h4>
                  <div>
                     <p>You can use a keystore to store secret keys for tools and external clients such as Oracle GoldenGate. </p>
                     <p>The secret key must be a string adhering to Oracle identifier rules. You can add, update, or delete a client secret in an existing keystore. This section describes how to capture Transparent Data Encryption encrypted data in the Oracle GoldenGate Extract (Extract) process using classic capture mode.</p>
                     <p>TDE support when Extract is in classic capture mode requires the exchange of the following keys:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>TDE support for Oracle GoldenGate in the classic capture mode of the Extract process requires that an Oracle database and the Extract process share the secret to encrypt sensitive information being exchanged. The shared secret is stored securely in the Oracle database and Oracle GoldenGate domains. The shared secret is stored in the software keystore or the HSM as the database secret.</p>
                        </li>
                        <li>
                           <p>The decryption key is a password known as the shared secret that is stored securely in the Oracle database and Oracle GoldenGate domains. Only a party that has possession of the shared secret can decrypt the table and redo log keys.</p>
                        </li>
                     </ul>
                     <p>After you configure the shared secret, Oracle GoldenGate Extract uses the shared secret to decrypt the data. Oracle GoldenGate Extract does not handle the TDE master encryption key itself, nor is it aware of the keystore password. The TDE master encryption key and password remain within the Oracle database configuration.</p>
                     <p>Oracle GoldenGate Extract only writes the decrypted data to the Oracle GoldenGate trail file, which Oracle GoldenGate persists during transit. You can protect this file using your site's operating system standard security protocols, as well as the Oracle GoldenGate AES encryption options. Oracle GoldenGate does not write the encrypted data to a discard file (specified with the <code class="codeph">DISCARDFILE</code> parameter). The word <code class="codeph">ENCRYPTED</code> will be written to any discard file that is in use. 
                     </p>
                     <p>Oracle GoldenGate does require that the keystore be open when processing encrypted data. There is no performance effect of Oracle GoldenGate feature on the TDE operations. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" title="You can store Oracle GoldenGate secrets in Transparent Data Encryption keystores.">Storing Oracle GoldenGate Secrets in a Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10386"></a><div class="props_rev_3"><a id="GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24" name="GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24"></a><h4 id="ASOAG-GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24" class="sect4">Oracle GoldenGate Extract Classic Capture Mode TDE Requirements</h4>
                  <div>
                     <p>Ensure that you meet the requirements for Oracle GoldenGate Extract to support Transparent Data Encryption capture.</p>
                     <p>The requirements are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To maintain high security standards, ensure that the Oracle GoldenGate Extract process runs as part of the Oracle user (the user that runs the Oracle database). That way, the keys are protected in memory by the same privileges as the Oracle user.</p>
                        </li>
                        <li>
                           <p>Run the Oracle GoldenGate Extract process on the same computer as the Oracle database installation. </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" title="You can store Oracle GoldenGate secrets in Transparent Data Encryption keystores.">Storing Oracle GoldenGate Secrets in a Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10387"></a><div class="props_rev_3"><a id="GUID-D4E24734-07A9-4861-9948-E072D327238C" name="GUID-D4E24734-07A9-4861-9948-E072D327238C"></a><h4 id="ASOAG-GUID-D4E24734-07A9-4861-9948-E072D327238C" class="sect4">Configuring Keystore Support for Oracle GoldenGate</h4>
                  <div>
                     <p>You can configure Transparent Data Encryption keystore support for Oracle GoldenGate by using a shared secret for the keystore. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861">Step 1: Decide on a Shared Secret for the Keystore</a><br>A shared secret for a keystore is a password.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071">Step 2: Configure Oracle Database for TDE Support for Oracle GoldenGate</a><br>The <code class="codeph">DBMS_INTERNAL_CLKM</code> PL/SQL package enables you to configure TDE support for Oracle GoldenGate.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F">Step 3: Store the TDE GoldenGate Shared Secret in the Keystore</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can store a TDE GoldenGate shared secret in a keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325">Step 4: Set the TDE Oracle GoldenGate Shared Secret in the Extract Process</a><br>The GoldenGate Software Command Interface (GGSCI) utility set the TDE Oracle GoldenGate shared secret in the extract process.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" title="You can store Oracle GoldenGate secrets in Transparent Data Encryption keystores.">Storing Oracle GoldenGate Secrets in a Keystore</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10388"></a><div class="props_rev_3"><a id="GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861" name="GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861"></a><h5 id="ASOAG-GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861" class="sect5">Step 1: Decide on a Shared Secret for the Keystore</h5>
                     <div>
                        <p>A shared secret for a keystore is a password.</p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Decide on a shared secret that meets or exceeds Oracle Database password standards. </p>
                              </li>
                           </ul>
                           <p>Do not share this password with any user other than trusted administrators who are responsible for configuring Transparent Data Encryption to work with Oracle GoldenGate Extract.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="You can configure Transparent Data Encryption keystore support for Oracle GoldenGate by using a shared secret for the keystore.">Configuring Keystore Support for Oracle GoldenGate</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10389"></a><div class="props_rev_3"><a id="GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071" name="GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071"></a><h5 id="ASOAG-GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071" class="sect5">Step 2: Configure Oracle Database for TDE Support for Oracle GoldenGate</h5>
                     <div>
                        <p>The <code class="codeph">DBMS_INTERNAL_CLKM</code> PL/SQL package enables you to configure TDE support for Oracle GoldenGate.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the database instance as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege. 
                                 </p>
                                 <p>For example</p><pre class="oac_no_warn" dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
                              <li>
                                 <p>Load the Oracle Database-supplied <code class="codeph">DBMS_INTERNAL_CLKM</code> PL/SQL package. 
                                 </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">@?/app/oracle/product/12.2/rdbms/admin/prvtclkm.plb
</pre><p>The <code class="codeph">prvtclkm.plb</code> file also enables Oracle GoldenGate to extract encrypted data from an Oracle database. 
                                 </p>
                              </li>
                              <li>
                                 <p>Grant the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_INTERNAL_CLKM</code> PL/SQL package to the Oracle GoldenGate Extract database user.
                                 </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON DBMS_INTERNAL_CLKM TO psmith;
</pre><p>This procedure enables the Oracle database and Oracle GoldenGate Extract to exchange information. </p>
                              </li>
                              <li>
                                 <p>Exit SQL*Plus.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="You can configure Transparent Data Encryption keystore support for Oracle GoldenGate by using a shared secret for the keystore.">Configuring Keystore Support for Oracle GoldenGate</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10390"></a><div class="props_rev_3"><a id="GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F" name="GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F"></a><h5 id="ASOAG-GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F" class="sect5">Step 3: Store the TDE GoldenGate Shared Secret in the Keystore</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can store a TDE GoldenGate shared secret in a keystore.
                        </p>
                        <div class="p">Before you begin this procedure, ensure that you have configured the TDE software or hardware keystore, based on <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="A software keystore is a container for the master encryption key, and it resides in the software file system.">Configuring a Software Keystore</a> and <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">Configuring a Hardware Keystore</a>.
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Set the Oracle GoldenGate-TDE key in the keystore by using the following syntax.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD|UPDATE|DELETE SECRET '<span class="italic">secret</span>' 
FOR CLIENT '<span class="italic">secret_identifier</span>' [USING TAG '<span class="italic">tag</span>'] 
IDENTIFIED BY <span class="italic">keystore_password</span> [WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">secret</code></span> is the client secret key to be stored, updated, or deleted. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">secret_identifier</code></span> is an alphanumeric string used to identify the secret key. <span class="italic"><code class="codeph">secret_identifier</code></span> does not have a default value. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span> is an optional, user-defined description for the secret key to be stored. <span class="italic"><code class="codeph">tag</code></span> can be used with the <code class="codeph">ADD</code> and <code class="codeph">UPDATE</code> operations. Enclose this setting in single quotation marks (<code class="codeph">' '</code>). This tag appears in the <code class="codeph">SECRET_TAG</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view. <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a> 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_password</code></span> is the password for the keystore that is configured. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code> is required in case the keystore was not backed up before the <code class="codeph">ADD</code>, <code class="codeph">UPDATE</code> or <code class="codeph">DELETE</code> operation. <span class="italic"><code class="codeph">backup_identifier</code></span> is an optional user-defined description for the backup. Enclose <span class="italic"><code class="codeph">backup_identifier</code></span> in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example adds a secret key to the keystore and creates a backup in the same directory as the keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ADD SECRET 'some_secret' 
FOR CLIENT 'ORACLE_GG' USING TAG 'GoldenGate Secret' 
IDENTIFIED BY <span class="italic">password</span> WITH BACKUP USING 'GG backup';
</pre></li>
                              <li>
                                 <p>Verify the entry that you just created. </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">SELECT CLIENT, SECRET_TAG FROM V$CLIENT_SECRETS WHERE CLIENT = 'ORACLEGG';

CLIENT   SECRET_TAG
-------- ------------------------------------------
ORACLEGG some_secret
</pre></li>
                              <li>
                                 <p>Switch the log files.</p><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA

ALTER SYSTEM SWITCH LOGFILE;
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F__GUID-20328BEC-86B7-42AF-A171-1B5966366287">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="Custom TDE master encryption key attributes enable you to defined attributes that are specific to your needs.">Creating Custom TDE Master Encryption Key Attributes for Reports</a> for more information about tags
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-the-redo-log.html#ADMIN11325" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about switching log files
                                 </p>
                              </li>
                              <li>
                                 <p><a href="using-transparent-data-encryption-with-other-oracle-features.html#GUID-68EE178A-6B6C-497A-B720-052FB23B5794" title="Oracle RAC nodes can share both a software keystore and a hardware security module.">How Transparent Data Encryption Works with Oracle Real Application Clusters</a> if you are having problems using this procedure in an Oracle Real Application Clusters environment
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="You can configure Transparent Data Encryption keystore support for Oracle GoldenGate by using a shared secret for the keystore.">Configuring Keystore Support for Oracle GoldenGate</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10391"></a><div class="props_rev_3"><a id="GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325" name="GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325"></a><h5 id="ASOAG-GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325" class="sect5">Step 4: Set the TDE Oracle GoldenGate Shared Secret in the Extract Process</h5>
                     <div>
                        <p>The GoldenGate Software Command Interface (GGSCI) utility set the TDE Oracle GoldenGate shared secret in the extract process.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Start the GGSCI utility.</p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">ggsci
</pre></li>
                              <li>
                                 <p>In the GGSCI utility, run the <code class="codeph">ENCRYPT PASSWORD</code> command to encrypt the shared secret so that it is obfuscated within the Oracle GoldenGate Extract parameter file. 
                                 </p><pre class="oac_no_warn" dir="ltr">ENCRYPT PASSWORD <span class="italic">shared_secret algorithm</span> ENCRYPTKEY <span class="italic">keyname</span>
</pre><p>In this specification: </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">shared_secret</code></span> is the clear-text shared secret that you created when you decided on a shared secret for the keystore. This setting is case sensitive.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">algorithm</code></span> is one of the following values to specify AES encryption: 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">AES128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES192</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keyname</code></span> is the logical name of the encryption key in the <code class="codeph">ENCKEYS</code> lookup file. Oracle GoldenGate uses this name to look up the actual key in the <code class="codeph">ENCKEYS</code> file. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ENCRYPT PASSWORD <span class="italic">password</span> AES256 ENCRYPTKEY mykey1
</pre></li>
                              <li>
                                 <p>In the Oracle GoldenGate Extract parameter file, set the <code class="codeph">DBOPTIONS</code> parameter with the <code class="codeph">DECRYPTPASSWORD</code> option. 
                                 </p>
                                 <p>As input, supply the encrypted shared secret and the Oracle GoldenGate-generated or user-defined decryption key.</p><pre class="oac_no_warn" dir="ltr">DBOPTIONS DECRYPTPASSWORD <span class="italic">shared_secret</span> <span class="italic">algorithm</span> ENCRYPTKEY <span class="italic">keyname</span>
</pre><p>In this specification: </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">shared_secret</code></span> is the clear-text shared secret that you created when you decided on a shared secret for the keystore. This setting is case sensitive.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">algorithm</code></span> is one of the following values to specify AES encryption: 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">AES128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES192</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keyname</code></span> is the logical name of the encryption key in the <code class="codeph">ENCKEYS</code> lookup file. 
                                       </p>
                                       <p>For example:</p><pre class="oac_no_warn" dir="ltr">DBOPTIONS DECRYPTPASSWORD AACAAAAAAAAAAAIALCKDZIRHOJBHOJUH AES256 ENCRYPTKEY mykey1</pre></li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861" title="A shared secret for a keystore is a password.">Step 1: Decide on a Shared Secret for the Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="You can configure Transparent Data Encryption keystore support for Oracle GoldenGate by using a shared secret for the keystore.">Configuring Keystore Support for Oracle GoldenGate</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
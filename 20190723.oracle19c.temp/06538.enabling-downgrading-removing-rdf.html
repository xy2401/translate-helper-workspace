<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.">
      <meta name="description" content="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.">
      <title>Enabling, Downgrading, or Removing RDF Semantic Graph Support</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="RDF Knowledge Graph Developer's Guide ">
      <meta property="og:description" content="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="RDF Knowledge Graph Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-rdf-knowledge-graph-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T10:56:26-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2005, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94798-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="SEM_RDFSA-reference.html" title="Previous" type="text/html">
      <link rel="next" href="SEM_MATCH-spatial.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph RDF Knowledge Graph Developer's Guide">
    <meta name="dcterms.isVersionOf" content="RDFRM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SEM_RDFSA-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="SEM_MATCH-spatial.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">RDF Knowledge Graph Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Enabling, Downgrading, or Removing RDF Semantic Graph Support</li>
            </ol>
            <a id="GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" name="GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E"></a><a id="RDFRM118"></a>
            
            <h2 id="RDFRM-GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" class="sect2"><span class="enumeration_chapter">A </span>Enabling, Downgrading, or Removing RDF Semantic Graph Support
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.</p>
               <p>You must run one or more scripts, and you must ensure that Spatial and Graph is installed and the Partitioning option is enabled. These requirements are explained in <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.">Enabling RDF Semantic Graph Support</a> and its related subtopics.
               </p>
               <p>This appendix also describes the steps if, after enabling RDF Semantic Graph support, you need to do any of the following:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Downgrade the RDF Semantic Graph support to that provided with a previous Oracle Database release, as explained in <a href="enabling-downgrading-removing-rdf.html#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" title="You can downgrade the RDF Semantic Graph support, in conjunction with an Oracle Database downgrade to Release 12.1.">Downgrading RDF Semantic Graph Support to a Previous Release</a>.
                     </p>
                  </li>
                  <li>
                     <p>Remove all support for RDF Semantic Graph from the database, as explained in <a href="enabling-downgrading-removing-rdf.html#GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" title="You can remove the RDF Semantic Graph support from the database.">Removing RDF Semantic Graph Support</a>.
                     </p>
                  </li>
               </ul>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF">Enabling RDF Semantic Graph Support</a><br>Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.
                  </li>
                  <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280">Downgrading RDF Semantic Graph Support to a Previous Release</a><br>You can downgrade the RDF Semantic Graph support, in conjunction with an Oracle Database downgrade to Release 12.1.
                  </li>
                  <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845">Removing RDF Semantic Graph Support</a><br>You can remove the RDF Semantic Graph support from the database.
                  </li>
               </ul>
            </div>
            <a id="RDFRM119"></a><div class="props_rev_3"><a id="GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" name="GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF"></a><h3 id="RDFRM-GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" class="sect3"><span class="enumeration_section">A.1 </span>Enabling RDF Semantic Graph Support
               </h3>
               <div>
                  <p>Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726">Enabling RDF Semantic Graph Support in a New Database Installation</a><br></li>
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">Upgrading RDF Semantic Graph Support from Release 11.1, 11.2, or 12.1</a><br></li>
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7">Workspace Manager and Virtual Private Database Desupport</a><br></li>
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E">Spatial and Partitioning Requirements</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" title="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.">Enabling, Downgrading, or Removing RDF Semantic Graph Support</a></p>
                     </div>
                  </div>
               </div>
               <a id="RDFRM120"></a><div class="props_rev_3"><a id="GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726" name="GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726"></a><h4 id="RDFRM-GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726" class="sect4"><span class="enumeration_section">A.1.1 </span>Enabling RDF Semantic Graph Support in a New Database Installation
                  </h4>
                  <div>
                     <p>RDF Semantic Graph is automatically enabled when Spatial and Graph Release 12.2 or later is installed.</p>
                     <p>If RDF Semantic Graph was enabled successfully, a row with the following column values will exist in the MDSYS.RDF_PARAMETER table:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>NAMESPACE: <code class="codeph">MDSYS</code></p>
                        </li>
                        <li>
                           <p>ATTRIBUTE: <code class="codeph">SEM_VERSION</code></p>
                        </li>
                        <li>
                           <p>VALUE: (string starting with <code class="codeph">12.2</code>)
                           </p>
                        </li>
                        <li>
                           <p>DESCRIPTION: <code class="codeph">VALID</code></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.">Enabling RDF Semantic Graph Support</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM121"></a><div class="props_rev_3"><a id="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427" name="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427"></a><h4 id="RDFRM-GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427" class="sect4"><span class="enumeration_section">A.1.2 </span>Upgrading RDF Semantic Graph Support from Release 11.1, 11.2, or 12.1
                  </h4>
                  <div>
                     <p>If you are upgrading from Oracle Database Release 11.1 or 11.2 that includes the semantic technologies support, the semantic technologies support is automatically upgraded to Release 12.1 or later when the database is upgraded.</p>
                     <p>However, you may also need to migrate RDF data if you have an existing Release 11.1 or 11.2 RDF network containing triples that include typed literal values of type xsd:float, xsd:double, xsd:boolean, or xsd:time.</p>
                     <p>To check if you need to migrate RDF data, connect to the database as a user with DBA privileges and query the MDSYS.RDF_PARAMETER table, as follows:</p><pre class="oac_no_warn" dir="ltr">SELECT namespace, attribute, value FROM mdsys.rdf_parameter
  WHERE namespace='MDSYS' 
  AND attribute IN ('FLOAT_DOUBLE_DECIMAL',
                    'XSD_TIME', 'XSD_BOOLEAN', 
                    'DATA_CONVERSION_CHECK');
</pre><p>If the FLOAT_DOUBLE_DECIMAL, XSD_TIME, or XSD_BOOLEAN attributes have the string value <code class="codeph">INVALID</code> or if the DATA_CONVERSION_CHECK attribute has the string value <code class="codeph">FAILED_UNABLE_TO_LOCK_APPLICATION_TABLES</code>, <code class="codeph">FAILED_INSUFFICIENT_WORKSPACE_PRIVILEGES</code>, or <code class="codeph">FAILED_OLS_POLICIES_ARE_ENABLED</code>, you need to migrate RDF data.
                     </p>
                     <p>However, if the FLOAT_DOUBLE_DECIMAL, XSD_TIME, and XSD_BOOLEAN attributes do not exist or have the string value <code class="codeph">VALID</code> and if the DATA_CONVERSION_CHECK attribute does not exist, you do <span class="italic">not</span> need to migrate RDF data. However, if your semantic network may have any empty RDF literals, see <a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a>; and if you choose to migrate existing empty literals to the new format, follow the steps in this section.
                     </p>
                     <p>To migrate RDF data, follow these steps:</p>
                     <ol>
                        <li>
                           <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted), and enter: <code class="codeph">SET CURRENT_SCHEMA=MDSYS</code></p>
                        </li>
                        <li>
                           <p>Ensure that the user MDSYS has the following privileges:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>INSERT privilege on all application tables in the semantic network</p>
                              </li>
                              <li>
                                 <p>ALTER ANY INDEX privilege (optional: only necessary if Semantic Indexing for Documents is being used)</p>
                              </li>
                              <li>
                                 <p>ACCESS privilege for any workspace in which version-enabled application tables have been modified (optional: only necessary if Workspace Manager is being used for RDF data)</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Ensure that any OLS policies for RDF data are temporarily disabled (optional: only necessary if OLS for RDF Data is being used). OLS policies can be re-enabled after running convert_old_rdf_data.</p>
                        </li>
                        <li>
                           <p><a id="d86269e355" class="indexterm-anchor"></a><a id="d86269e357" class="indexterm-anchor"></a>Start SQL*Plus. If you want to migrate the RDF data without converting existing empty literals to the new format (see <a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a>), enter the following statement:
                           </p><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data;
</pre><p>If you want to migrate the RDF data and also convert existing empty literals to the new format, call <code class="codeph">convert_old_rdf_data</code> with the <code class="codeph">flags</code> parameter set to <code class="codeph">'CONVERT_ORARDF_NULL'</code>. In addition, you can use an optional <code class="codeph">tablespace_name</code> parameter to specify the tablespace to use when creating intermediate tables during data migration. For example, the following statement migrates old semantic data, converts existing <code class="codeph">"orardf:null "</code> values to "", and uses the MY_TBS tablespace for any intermediate tables:
                           </p><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data(
  flags=&gt;'CONVERT_ORARDF_NULL', 
  tablespace_name=&gt;'MY_TBS');
</pre><p>The <code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code> procedure may take a significant amount of time to run if the semantic network contains many triples that are using (or affected by use of) xsd:float, xsd:double, xsd:time, or xsd:boolean typed literals.
                           </p>
                        </li>
                        <li>
                           <p><a id="d86269e392" class="indexterm-anchor"></a>Enter the following statement:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semrelod.sql</code> 
                                 </p>
                              </li>
                              <li>
                                 <p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semrelod.sql</code></p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427__GUID-FC089C76-2E00-4817-8D4B-9CC8879983B7">
                        <p class="notep1">Note:</p>
                        <p>You may encounter the ORA-00904 (invalid identifier) error when executing a SEM_MATCH query if the <code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code> procedure and the <code class="codeph">semrelod.sql</code> script were not run after the upgrade to Release 12.1 or later.
                        </p>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1">Required Data Migration After Upgrade</a><br></li>
                        <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.">Enabling RDF Semantic Graph Support</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1" name="GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1"></a><h5 id="RDFRM-GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1" class="sect5"><span class="enumeration_section">A.1.2.1 </span>Required Data Migration After Upgrade
                     </h5>
                     <div>
                        <p>After the database upgrade completes, if you have existing RDF data from a previous release, you must migrate the RDF data. If you do not perform the data migration, you will encounter the following error when running SEM_MATCH queries:</p><pre class="oac_no_warn" dir="ltr">ORA-20000:  RDF_VALUE$ Table needs data migration with SEM_APIS.MIGRATE_DATA_TO_CURRENT</pre><p>Columns were added to the MDSYS.RDF_VALUE$ table in Release 12.2 (see <a href="rdf-semantic-graph-overview.html#GUID-3406865F-70CF-4D24-8911-F08694697ED6" title="Effective with Oracle Database Release 12.2, queries on RDF data that use SPARQL ORDER BY semantics are processed more efficiently than in previous releases.">Enhanced RDF ORDER BY Query Processing</a>. These columns must be populated after upgrading an existing RDF network. The need for migration will be noted with the following row in the MDSYS.RDF_PARAMETER table:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>NAMESPACE: <code class="codeph">MDSYS</code></p>
                           </li>
                           <li>
                              <p>ATTRIBUTE: <code class="codeph">RDF_VALUE$</code></p>
                           </li>
                           <li>
                              <p>VALUE: <code class="codeph">INVALID_ORDER_COLUMNS</code> 
                              </p>
                           </li>
                           <li>
                              <p>DESCRIPTION: <code class="codeph">RDF_VALUE$ Table needs data migration with SEM_APIS.MIGRATE_DATA_TO_CURRENT</code></p>
                           </li>
                        </ul>
                        <p>If migration is needed, the RDF Semantic Graph installation will initially be marked as <code class="codeph">INVALD</code>, which is signified with the following row in MDSYS.RDF_PARAMETER:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>NAMESPACE: <code class="codeph">MDSYS</code></p>
                           </li>
                           <li>
                              <p>ATTRIBUTE: <code class="codeph">SEM_VERSION</code></p>
                           </li>
                           <li>
                              <p>VALUE: (string starting with <code class="codeph">12.2</code>)
                              </p>
                           </li>
                           <li>
                              <p>DESCRIPTION: <code class="codeph">INVALID</code></p>
                           </li>
                        </ul>
                        <p>To perform data migration by populating new MDSYS.RDF_VALUE$ columns, follow these steps:</p>
                        <ol>
                           <li>
                              <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted),</p>
                           </li>
                           <li>
                              <p>Run the following statement: </p><pre class="pre codeblock"><code>EXECUTE sem_apis.migrate_data_to_current;</code></pre></li>
                        </ol>
                        <p>If data migration was successful, the INVALID_ORDER_COLUMNS row will be removed from MDSYS.RDF_PARAMETER and the SEM_VERSION row will have a DESCRIPTION value of <code class="codeph">VALID</code>.
                        </p>
                        <p>Moreover, additional data migration may be required if you are upgrading an existing Release 11.1 or 11.2 RDF network containing triples that include typed literal values of type xsd:float, xsd:double, xsd:boolean, or xsd:time.</p>
                        <p>To check if you need to perform this additional RDF data migration, connect to the database as a user with DBA privileges and query the MDSYS.RDF_PARAMETER table, as follows:</p><pre class="oac_no_warn" dir="ltr">SELECT namespace, attribute, value FROM mdsys.rdf_parameter
  WHERE namespace='MDSYS' 
  AND attribute IN ('FLOAT_DOUBLE_DECIMAL',
                    'XSD_TIME', 'XSD_BOOLEAN', 
                    'DATA_CONVERSION_CHECK');
</pre><p>If the FLOAT_DOUBLE_DECIMAL, XSD_TIME, or XSD_BOOLEAN attributes have the string value <code class="codeph">INVALID</code> or if the DATA_CONVERSION_CHECK attribute has the string value <code class="codeph">FAILED_UNABLE_TO_LOCK_APPLICATION_TABLES</code>, <code class="codeph">FAILED_INSUFFICIENT_WORKSPACE_PRIVILEGES</code>, or <code class="codeph">FAILED_OLS_POLICIES_ARE_ENABLED</code>, you need to migrate RDF data.
                        </p>
                        <p>However, if the FLOAT_DOUBLE_DECIMAL, XSD_TIME, and XSD_BOOLEAN attributes do not exist or have the string value <code class="codeph">VALID</code> and if the DATA_CONVERSION_CHECK attribute does not exist, you do <span class="italic">not</span> need to migrate RDF data. However, if your semantic network may have any empty RDF literals, see <a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a>; and if you choose to migrate existing empty literals to the new format, follow the steps in this section.
                        </p>
                        <p>To migrate the RDF data, follow these steps:</p>
                        <ol>
                           <li>
                              <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted), and enter: <code class="codeph">SET CURRENT_SCHEMA=MDSYS</code></p>
                           </li>
                           <li>
                              <p>Ensure that the user MDSYS has the following privileges:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>INSERT privilege on all application tables in the semantic network</p>
                                 </li>
                                 <li>
                                    <p>ALTER ANY INDEX privilege (optional: only necessary if Semantic Indexing for Documents is being used)</p>
                                 </li>
                                 <li>
                                    <p>ACCESS privilege for any workspace in which version-enabled application tables have been modified (optional: only necessary if Workspace Manager is being used for RDF data)</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Ensure that any OLS policies for RDF data are temporarily disabled (optional: only necessary if OLS for RDF Data is being used). OLS policies can be re-enabled after running convert_old_rdf_data.</p>
                           </li>
                           <li>
                              <p><a id="d86269e619" class="indexterm-anchor"></a><a id="d86269e621" class="indexterm-anchor"></a>Start SQL*Plus. If you want to migrate the RDF data without converting existing empty literals to the new format (see <a href="enabling-downgrading-removing-rdf.html#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a>), enter the following statement:
                              </p><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data;
</pre><p>If you want to migrate the RDF data and also convert existing empty literals to the new format, call <code class="codeph">convert_old_rdf_data</code> with the <code class="codeph">flags</code> parameter set to <code class="codeph">'CONVERT_ORARDF_NULL'</code>. In addition, you can use an optional <code class="codeph">tablespace_name</code> parameter to specify the tablespace to use when creating intermediate tables during data migration. For example, the following statement migrates old semantic data, converts existing <code class="codeph">"orardf:null "</code> values to "", and uses the MY_TBS tablespace for any intermediate tables:
                              </p><pre class="oac_no_warn" dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data(
  flags=&gt;'CONVERT_ORARDF_NULL', 
  tablespace_name=&gt;'MY_TBS');
</pre><p>The <code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code> procedure may take a significant amount of time to run if the semantic network contains many triples that are using (or affected by use of) xsd:float, xsd:double, xsd:time, or xsd:boolean typed literals.
                              </p>
                           </li>
                           <li>
                              <p><a id="d86269e656" class="indexterm-anchor"></a>Enter the following statement:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semrelod.sql</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semrelod.sql</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-2662F323-16DF-4996-AD93-0CAB04AD62A1__GUID-FC089C76-2E00-4817-8D4B-9CC8879983B7">
                           <p class="notep1">Note:</p>
                           <p>You may encounter the ORA-00904 (invalid identifier) error when executing a SEM_MATCH query if the <code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code> procedure and the <code class="codeph">semrelod.sql</code> script were not run after the upgrade to Release 12.1 or later.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">Upgrading RDF Semantic Graph Support from Release 11.1, 11.2, or 12.1</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="RDFRM398"></a><div class="props_rev_3"><a id="GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7" name="GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7"></a><h5 id="RDFRM-GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7" class="sect5"><span class="enumeration_section">A.1.2.2 </span>Handling of Empty RDF Literals
                     </h5>
                     <div>
                        <p>The way empty-valued RDF literals are handled was changed in Release 11.2. Before this release, the values of empty-valued literals were converted to <code class="codeph">"orardf:null"</code>. In Release 11.2 and later, such values are stored without modification (that is, as ""). However, whether you migrate existing <code class="codeph">"orardf:null"</code> values to "" is optional.
                        </p>
                        <p>To check if <code class="codeph">"orardf:null"</code> values exist in your semantic network, connect to the database as a user with DBA privileges and query the MDSYS.RDF_PARAMETER table, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT namespace, attribute, value FROM mdsys.rdf_parameter
  WHERE namespace='MDSYS' 
  AND attribute = 'NULL_LITERAL';
</pre><p>If the NULL_LITERAL attribute has the value <code class="codeph">EXISTS</code>, then <code class="codeph">"orardf:null"</code> values are present in your semantic network.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">Upgrading RDF Semantic Graph Support from Release 11.1, 11.2, or 12.1</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7" name="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7"></a><h4 id="RDFRM-GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7" class="sect4"><span class="enumeration_section">A.1.3 </span>Workspace Manager and Virtual Private Database Desupport
                  </h4>
                  <div>
                     <p>Effective with Oracle Database Release 12.2, the following are no longer supported:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Workspace Manager support for RDF data</p>
                        </li>
                        <li>
                           <p>Virtual Private Database (VPD) support for RDF data</p>
                        </li>
                     </ul>
                     <p>If an existing semantic network that contains Workspace Manager (WM) or Virtual Private Database (VPD) data is upgraded, the RDF Semantic Graph installation will be marked as <code class="codeph">INVALID</code>. In addition, the MDSYS.RDF_PARAMETER table will contain a row with description <code class="codeph">Feature not supported in current version' for the unsupported component</code>. To correct this situation, all existing WM and VPD data should be dropped, and the WM and VPD components should be uninstalled.
                     </p>
                     <p>To uninstall Workspace Manager support for RDF data:</p>
                     <ol>
                        <li>
                           <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
                        </li>
                        <li>
                           <p>Start SQL*Plus, and enter the following statement:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/sdordfwm_rm.sql</code></p>
                              </li>
                              <li>
                                 <p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\sdordfwm_rm.sql</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7__GUID-96D4133C-80BA-46B6-B5D6-2B2BE4FA11B0">
                              <p class="notep1">Note:</p>
                              <p>If you are in a multitenant environment, run the script with <code class="codeph">catcon.pl</code>. See “Running Oracle-Supplied SQL Scripts in a CDB” in <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle Database Administrator’s Guide</a>.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <p>To uninstall Virtual Private Database support for RDF data:</p>
                     <ol>
                        <li>
                           <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
                        </li>
                        <li>
                           <p>Start SQL*Plus, and enter the following statement:</p><pre class="pre codeblock"><code>EXECUTE mdsys.sem_rdfsa_dr.uninstall_vpd;</code></pre></li>
                     </ol>
                     <p>After performing the necessary uninstall operations, reset the network validity as follows:</p>
                     <ol>
                        <li>
                           <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
                        </li>
                        <li>
                           <p>Start SQL*Plus, and enter the following statement:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semvalidate.sql</code></p>
                              </li>
                              <li>
                                 <p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semvalidate.sql</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-10807836-0C1B-4DF0-9D37-FFAC7D02D3B7__IFYOUAREINAMULTITENANTENVIRONMENTRU-164ECF0F">
                              <p class="notep1">Note:</p>
                              <p>If you are in a multitenant environment, run the script with <code class="codeph">catcon.pl</code>. See “Running Oracle-Supplied SQL Scripts in a CDB” in <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle Database Administrator’s Guide</a>.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.">Enabling RDF Semantic Graph Support</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM123"></a><div class="props_rev_3"><a id="GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E" name="GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E"></a><h4 id="RDFRM-GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E" class="sect4"><span class="enumeration_section">A.1.4 </span>Spatial and Partitioning Requirements
                  </h4>
                  <div>
                     <p>Oracle <a id="d86269e924" class="indexterm-anchor"></a><a id="d86269e928" class="indexterm-anchor"></a><a id="d86269e932" class="indexterm-anchor"></a>Spatial and Graph must be installed before you can use any of the RDF and OWL capabilities. Oracle Locator is not sufficient. For information about Spatial and Graph and Locator, including which features are and are not included in Locator. see <a href="../spatl/oracle-locator.html#SPATL340" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>.
                     </p>
                     <p>The Partitioning option must be enabled before you can use any of the RDF and OWL capabilities. For licensing information about the Partitioning option, see <a href="../dblic/index.html" target="_blank"><span class="italic">Oracle Database Licensing Information</span></a>. For usage information about partitioning, see <a href="../vldbg/index.html" target="_blank"><span class="italic">Oracle Database VLDB and Partitioning Guide</span></a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" title="Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release. You must also ensure that Spatial and Graph is installed and the Partitioning option is enabled.">Enabling RDF Semantic Graph Support</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="RDFRM124"></a><div class="props_rev_3"><a id="GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" name="GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280"></a><h3 id="RDFRM-GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" class="sect3"><span class="enumeration_section">A.2 </span>Downgrading RDF Semantic Graph Support to a Previous Release
               </h3>
               <div>
                  <p>You can downgrade the RDF Semantic Graph support, in conjunction with an Oracle Database downgrade to Release 12.1.</p>
                  <p>However, downgrading is <span class="italic"><span class="bold">strongly discouraged</span></span>, except for rare cases where it is necessary. If you downgrade to a previous release, you will not benefit from bug fixes and enhancements that have been made in intervening releases.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-downgrading-removing-rdf.html#GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF">Downgrading to Release 12.1 Semantic Graph Support</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" title="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.">Enabling, Downgrading, or Removing RDF Semantic Graph Support</a></p>
                     </div>
                  </div>
               </div>
               <a id="RDFRM125"></a><div class="props_rev_3"><a id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF" name="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF"></a><h4 id="RDFRM-GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF" class="sect4"><span class="enumeration_section">A.2.1 </span>Downgrading to Release 12.1 Semantic Graph Support
                  </h4>
                  <div>
                     <p>If you need to downgrade to Oracle Database Release 12.1, the RDF semantic graph support component will be downgraded automatically when you downgrade the database. However, any RDF or OWL data that is specific to Release 12.2 (that is, Release 12.2 or later RDF/OWL persistent structures that are not supported in previous versions) must be dropped <span class="italic">before</span> you perform the downgrade, so that the database is compatible with Release 12.1.
                     </p>
                     <p>To check if any Release 12.2 or later RDF data is incompatible with Release 12.1, perform the following steps:</p>
                     <ol>
                        <li>
                           <p>Connect to the database (Release 12.2 or later) as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
                        </li>
                        <li>
                           <p>Start SQL*Plus, and enter the following statements:</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUT ON
EXECUTE SDO_SEM_DOWNGRADE.CHECK_121_COMPATIBLE;
</pre></li>
                     </ol>
                     <p>If any RDF data is incompatible with Release 12.1, the procedure generates an error and displays a list of the incompatible data. In this case, you must perform the following steps:</p>
                     <ol>
                        <li>
                           <p>Remove any Release 12.2 or later release-specific RDF or OWL data if you have not already done so, as explained earlier in this section.</p>
                        </li>
                        <li>
                           <p>Perform the database downgrade.</p>
                        </li>
                        <li>
                           <p>Connect to the Release 12.1 database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
                        </li>
                        <li>
                           <p>Start SQL*Plus, and enter the following statement:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/catsem.sql</code> 
                                 </p>
                              </li>
                              <li>
                                 <p id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF__WINDOWSORACLE_HOMEMDADMINCATSEM.SQL-1650CF63">Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\catsem.sql</code></p>
                                 <div class="infoboxnote" id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF__IFYOUAREINAMULTITENANTENVIRONMENTRU-164ECF0F">
                                    <p class="notep1">Note:</p>
                                    <p>If you are in a multitenant environment, run the script with <code class="codeph">catcon.pl</code>. See “Running Oracle-Supplied SQL Scripts in a CDB” in <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle Database Administrator’s Guide</a>.
                                    </p>
                                 </div>
                              </li>
                           </ul>
                           <p>If the script completes successfully, a row with the following column values is inserted into the MDSYS.RDF_PARAMETER table:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>NAMESPACE: <code class="codeph">MDSYS</code></p>
                              </li>
                              <li>
                                 <p>ATTRIBUTE: <code class="codeph">SEM_VERSION</code></p>
                              </li>
                              <li>
                                 <p>VALUE: (string starting with <code class="codeph">12.1</code>)
                                 </p>
                              </li>
                              <li>
                                 <p>DESCRIPTION: <code class="codeph">VALID</code></p>
                              </li>
                           </ul>
                           <p>After the <code class="codeph">catsem.sql</code> script completes successfully, Oracle semantic technologies support for Release 11.2 is enabled and ready to use, and all Release 12.1-compatible data is preserved.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" title="You can downgrade the RDF Semantic Graph support, in conjunction with an Oracle Database downgrade to Release 12.1.">Downgrading RDF Semantic Graph Support to a Previous Release</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="RDFRM127"></a><div class="props_rev_3"><a id="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" name="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845"></a><h3 id="RDFRM-GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" class="sect3"><span class="enumeration_section">A.3 </span>Removing RDF Semantic Graph Support
               </h3>
               <div>
                  <p>You can remove the RDF Semantic Graph support from the database.</p>
                  <p>However, removing this support is <span class="italic"><span class="bold">strongly discouraged</span></span>, unless you have a solid reason for doing it. After you remove this support, no applications or database users will be able to use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support.
                  </p>
                  <p>To remove the RDF Semantic Graph support from the database, perform the following steps:</p>
                  <ol>
                     <li>
                        <p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
                     </li>
                     <li>
                        <p><a id="d86269e1225" class="indexterm-anchor"></a>Start SQL*Plus, and enter the following statement:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semremov.sql</code> 
                              </p>
                           </li>
                           <li>
                              <p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semremov.sql</code></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845__IFYOUAREINAMULTITENANTENVIRONMENTRU-1650DABC">
                           <p class="notep1">Note:</p>
                           <p>If you are in a multitenant environment, run the script with <code class="codeph">catcon.pl</code>. See “Running Oracle-Supplied SQL Scripts in a CDB” in <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14072" target="_blank">Oracle Database Administrator’s Guide</a>.
                           </p>
                        </div>
                     </li>
                  </ol>
                  <p>The <code class="codeph">semremov.sql</code> script drops the semantic network and removes any RDF Semantic Graph types, tables, and PL/SQL packages.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="enabling-downgrading-removing-rdf.html#GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" title="You must perform certain steps before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release.">Enabling, Downgrading, or Removing RDF Semantic Graph Support</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>fileNameConversionSpec</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="deviceSpecifier.html" title="Previous" type="text/html">
      <link rel="next" href="forDbUniqueNameOption.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="deviceSpecifier.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="forDbUniqueNameOption.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-subclauses.html" property="item" typeof="WebPage"><span property="name">RMAN Subclauses</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">fileNameConversionSpec</li>
            </ol>
            <a id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3" name="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3"></a><a id="RCMRF90439"></a><a id="RCMRF90440"></a><a id="RCMRF90441"></a><a id="RCMRF196"></a>
            
            <h2 id="RCMRF-GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3" class="sect2"><span class="enumeration_section">4.8 </span>fileNameConversionSpec
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-59102072-DA26-44FF-A355-717023FCF1EB">Purpose</p>
                  <p>Use the <span class="italic"><code class="codeph">fileNameConversionSpec</code></span> subclause to specify one or more patterns to be used in generating new file names based on old file names. Used with <a id="d117128e99" class="indexterm-anchor"></a><code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>, <a id="d117128e108" class="indexterm-anchor"></a><code class="codeph"><a href="CONVERT.html#GUID-AD252F46-DD9E-4E2C-BF0E-DF2A4C7590C9">CONVERT</a></code>, and <a id="d117128e117" class="indexterm-anchor"></a><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> as one way of generating output file names.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-C1B72294-5EA9-42E2-B082-B58C2949CABE">Usage Notes</p>
                  <p>The rules for string patterns and how they affect file naming equal those for the initialization parameter <a id="d117128e131" class="indexterm-anchor"></a><a id="d117128e133" class="indexterm-anchor"></a><code class="codeph">DB_FILE_NAME_CONVERT</code>. In parentheses, provide an even number of string patterns. 
                  </p>
                  <p>When RMAN generates a new file name based on an old one, it compares the original file name to the first member of each pair of string patterns. The first time that RMAN finds a pattern that is a substring of the original file name, RMAN generates the new file name by substituting the second member of the pair for the substring that matched.</p>
                  <p>The pattern does not have to match at the beginning of the file name. The following command creates an image copy of data file <code class="codeph">/disk1/dbs/users.dbf</code> as <code class="codeph">/disk1/newdbs/users.dbf</code>:
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP AS COPY
    DB_FILE_NAME_CONVERT = ('dbs','newdbs');
    TABLESPACE users;
</pre><p>When multiple possible matches exist for a given file name being converted, RMAN uses the first match in the list of patterns to generate the new file name. The following command has the same effect as the previous example because the pattern <code class="codeph">dbs</code> matches the file name, so that the file name is never compared to the second pattern <code class="codeph">/disk1</code>:
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP AS COPY
    DB_FILE_NAME_CONVERT = ('dbs','newdbs','/disk1','/newdisk')
    TABLESPACE users;
</pre><p>For the <code class="codeph"><a href="CONVERT.html#GUID-AD252F46-DD9E-4E2C-BF0E-DF2A4C7590C9">CONVERT</a></code> <code class="codeph">TABLESPACE</code>, <code class="codeph">CONVERT DATABASE</code>, and <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">AS COPY</code> commands, if the source files for these operations are Oracle-managed files, then you cannot use <span class="italic"><code class="codeph">fileNameConversionSpec</code></span> to convert the source file names into new output file names. For Oracle-managed files, either in Automated Storage Management (ASM) or in ordinary file system storage, the database must be allowed to generate the file names for the output files. For example, an OMF file name for a data file in non-ASM storage might be of the following form:
                  </p><pre class="oac_no_warn" dir="ltr">/private/boston/datafile/01_mf_system_ab12554_.dbf
</pre><p>An <a id="d117128e192" class="indexterm-anchor"></a>OMF file name in ASM storage might be of the following form:
                  </p><pre class="oac_no_warn" dir="ltr">+DISK/boston/datafile/system.256.4543080
</pre><p>Only the database can generate and manage OMF file names. Typically, substituting the name of a different disk group or a different OMF location into an OMF file name does not produce a valid file name in the new destination. To convert OMF file names for storage in another OMF location, use an alternative such as a <code class="codeph">FORMAT</code> clause with these commands to specify the new output location and allow the database to manage the specific output file names.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-2DD97CFB-B937-401C-9EBB-78BFFAC96636">Syntax</p>
                  <p id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABBJGBH"><span class="bold"><span class="italic">fileNameConversionSpec</span>::=</span></p>
                  <div class="figure" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-2CB5374C-2833-41B7-8F46-10E82593BEBE"><img src="img/filenameconversionspec.gif" alt="Description of filenameconversionspec.eps follows" title="Description of filenameconversionspec.eps follows" longdesc="img_text/filenameconversionspec.html"><br><a href="img_text/filenameconversionspec.html">Description of the illustration filenameconversionspec.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-64110E72-0B1E-4ED4-A472-0AEC30F1D9CA">Semantics</p>
                  <div class="tblformalwide" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-45B1828E-DDCD-4177-BA27-C1E70C3C0597">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title summary="Describes fileNameConversionSpec subclause parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d117128e225">Syntax Element</th>
                              <th align="left" valign="bottom" width="76%" id="d117128e228">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d117128e233" headers="d117128e225 ">
                                 <p><span class="italic"><code class="codeph">string_pattern</code></span></p>
                              </td>
                              <td align="left" valign="top" width="76%" headers="d117128e233 d117128e228 ">
                                 <p>Specifies pairs of strings used to convert the file names. You can use as many pairs of primary and standby replacement strings as required. For example, you could set the string pattern to a value such as:</p>
                                 <p><code class="codeph">DB_FILE_NAME_CONVERT = ('str1','str2','str3', 'str4' ...)</code></p>
                                 <p>In this example, <code class="codeph">str1</code> is a pattern matching the original file name, <code class="codeph">str2</code> is the pattern replacing <code class="codeph">str1</code> in the generated file name, <code class="codeph">str3</code> is a pattern matching the original file name, and <code class="codeph">str4</code> is the pattern replacing <code class="codeph">str3</code> in the generated file name. 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-77D764D4-50D4-42B1-A1DD-4B506E91E907">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABGHJIA">
                  <p class="titleinexample">Example 4-17 Using DB_FILE_NAME_CONVERT with a Single Conversion Pair</p>
                  <p>In this example, the tablespace <code class="codeph">users</code> contains data files in directory <code class="codeph">/disk1/oradata/prod/</code>, whereas tablespace <code class="codeph">tools</code> contains data files in <code class="codeph">/disk1/oradata/prod/</code>. For each data file to be converted, if <code class="codeph">disk1/oradata/prod</code> is a substring of the data file name, then the image copy name is created by replacing the string with <code class="codeph">disk2</code>.
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP AS COPY 
  DB_FILE_NAME_CONVERT = ('disk1/oradata/prod','disk2')
  TABLESPACE users, tools;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-2CD5B739-FE1E-4780-9096-684E4E627AE3">
                  <p class="titleinexample">Example 4-18 Using DB_FILE_NAME_CONVERT with Multiple Conversion Pairs</p>
                  <p>This example creates image copies of the same data files described in <a href="fileNameConversionSpec.html#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABGHJIA">Example 4-17</a>. The first string in each pair specifies a pattern to match in the name of the source data files. The second string in each pair is the substitution pattern to use when generating the names of the image copies.
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP AS COPY 
    DB_FILE_NAME_CONVERT=('/disk1/oradata/prod/users','/disk2/users',
                          '/disk1/oradata/prod/tools','/tmp/tools')
    TABLESPACE tools, users;
</pre><p>The following sample output for this command demonstrates how RMAN uses the conversion pairs to name the output image copies:</p><pre class="oac_no_warn" dir="ltr">Starting backup at 08-MAR-13
using channel ORA_DISK_1
channel ORA_DISK_1: starting datafile copy
input datafile file number=00027 name=/disk1/oradata/prod/tools01.dbf
output file name=/tmp/tools01.dbf tag=TAG20130308T143300 RECID=33 STAMP=616689181
channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting datafile copy
input datafile file number=00028 name=/disk1/oradata/prod/users01.dbf
output file name=/disk2/users01.dbf tag=TAG20130308T143300 RECID=34 STAMP=616689182
channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01
Finished backup at 08-MAR-13
 
Starting Control File and SPFILE Autobackup at 08-MAR-13
piece handle=/disk2/PROD/autobackup/2013_03_08/o1_mf_s_616689184_2z13s1kx_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 08-MAR-13</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
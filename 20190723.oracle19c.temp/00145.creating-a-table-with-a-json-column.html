<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can create a table that has JSON columns. You use SQL condition is json as a check constraint to ensure that data inserted into a column is (well-formed) JSON data. Oracle recommends that you always use an is_json check constraint when you create a column intended for JSON data.">
      <meta name="description" content="You can create a table that has JSON columns. You use SQL condition is json as a check constraint to ensure that data inserted into a column is (well-formed) JSON data. Oracle recommends that you always use an is_json check constraint when you create a column intended for JSON data.">
      <title>Creating a Table With a JSON Column</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JSON Developer's Guide">
      <meta property="og:description" content="You can create a table that has JSON columns. You use SQL condition is json as a check constraint to ensure that data inserted into a column is (well-formed) JSON data. Oracle recommends that you always use an is_json check constraint when you create a column intended for JSON data.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JSON Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="json-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-22T10:58:31-08:00">
      <meta name="dcterms.title" content="JSON Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="2015, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96227-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="overview-of-storage-and-management-of-JSON-data.html" title="Previous" type="text/html">
      <link rel="next" href="conditions-is-json-and-is-not-json.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADJSN">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="overview-of-storage-and-management-of-JSON-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="conditions-is-json-and-is-not-json.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JSON Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="store-and-manage-json-data.html" property="item" typeof="WebPage"><span property="name">Store and Manage JSON Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Creating a Table With a JSON Column</li>
            </ol>
            <a id="GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0" name="GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0"></a>
            
            <h2 id="ADJSN-GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0" class="sect2"><span class="enumeration_chapter">4 </span>Creating a Table With a JSON Column
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can create a table that has JSON columns. You use SQL condition <code class="codeph">is json</code> as a check constraint to ensure that data inserted into a column is (well-formed) JSON data. Oracle recommends that you <span class="italic">always</span> use an <code class="codeph">is_json</code> check constraint when you create a column intended for JSON data.
               </p>
               <div class="section">
                  <p><a href="creating-a-table-with-a-json-column.html#GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__CACHFFCE">Example 4-1</a> and <a href="creating-a-table-with-a-json-column.html#GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__CACCIEFA">Example 4-2</a> illustrate this. They create and fill a table that holds data used in examples elsewhere in this documentation. 
                  </p>
                  <p>For brevity, only two rows of data (one JSON document) are inserted in <a href="creating-a-table-with-a-json-column.html#GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__CACCIEFA">Example 4-2</a>. 
                  </p>
                  <div class="infoboxnote" id="GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__GUID-9650753C-5AAB-4527-B3C4-E5084FFBA0E7">
                     <p class="notep1">Note:</p>
                     <p>SQL/JSON conditions <code class="codeph">IS JSON</code> and <code class="codeph">IS NOT JSON</code> return true or false for any non-<code class="codeph">NULL</code> SQL value. But they both return unknown (neither true nor false) for SQL <code class="codeph">NULL</code>. When used in a check constraint, they do not prevent a SQL <code class="codeph">NULL</code> value from being inserted into the column. (But when used in a SQL <code class="codeph">WHERE</code> clause, SQL <code class="codeph">NULL</code> is never returned.)
                     </p>
                  </div>
                  <p>It is true that a check constraint can reduce performance for data insertion. If you are sure that your application inserts only well-formed JSON data into a particular column, then consider <span class="italic">disabling</span> the check constraint, but <span class="italic">do not drop</span> the constraint.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section"></div>
               <!-- class="section" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__GUID-91A9DD8E-31CE-4D77-8BAF-7602DB529340">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="loading-external-json-data.html#GUID-52EFC452-5E65-4148-8070-1FA588A6E697" title="You can create a database table of JSON data from the content of a JSON dump file.">Loading External JSON Data</a> for the creation of the full table <code class="codeph">j_purchaseorder</code></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about<code class="codeph"> CREATE TABLE</code></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__CACHFFCE">
                  <p class="titleinexample">Example 4-1 Using IS JSON in a Check Constraint to Ensure JSON Data is Well-Formed</p><pre class="SQL"><code>CREATE TABLE j_purchaseorder
  (id          VARCHAR2 (32) NOT NULL PRIMARY KEY,
   date_loaded TIMESTAMP (6) WITH TIME ZONE,
   po_document VARCHAR2 (23767)
   <span class="bold">CONSTRAINT</span> ensure_json <span class="bold">CHECK</span> (po_document <span class="bold">IS JSON</span>));</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0__CACCIEFA">
                  <p class="titleinexample">Example 4-2 Inserting JSON Data Into a VARCHAR2 JSON Column</p><pre class="pre codeblock"><code>INSERT INTO j_purchaseorder
  VALUES (
    SYS_GUID(),
    to_date('30-DEC-2014'),
    '{"PONumber"             : 1600,
      "Reference"            : "ABULL-20140421",
      "Requestor"            : "Alexis Bull",
      "User"                 : "ABULL",
      "CostCenter"           : "A50",
      "ShippingInstructions" : {"name"    : "Alexis Bull",
                                "Address" : {"street"  : "200 Sporting Green",
                                             "city"    : "South San Francisco",
                                             "state"   : "CA",
                                             "zipCode" : 99236,
                                             "country" : "United States of America"},
                                "Phone"   : [{"type" : "Office", "number" : "909-555-7307"},
                                             {"type" : "Mobile", "number" : "415-555-1234"}]},
      "Special Instructions" : null,
      "AllowPartialShipment" : true,
      "LineItems"            : [{"ItemNumber" : 1,
                                 "Part"       : {"Description" : "One Magic Christmas",
                                                 "UnitPrice"   : 19.95,
                                                 "UPCCode"     : 13131092899},
                                 "Quantity"   : 9.0},
                                {"ItemNumber" : 2,
                                 "Part"       : {"Description" : "Lethal Weapon",
                                                 "UnitPrice"   : 19.95,
                                                 "UPCCode"     : 85391628927},
                                 "Quantity"   : 5.0}]}');

INSERT INTO j_purchaseorder
  VALUES (
    SYS_GUID(),
    to_date('30-DEC-2014'),
    '{"PONumber"             : 672,
      "Reference"            : "SBELL-20141017",
      "Requestor"            : "Sarah Bell",
      "User"                 : "SBELL",
      "CostCenter"           : "A50",
      "ShippingInstructions" : {"name"    : "Sarah Bell",
                                "Address" : {"street"  : "200 Sporting Green",
                                             "city"    : "South San Francisco",
                                             "state"   : "CA",
                                             "zipCode" : 99236,
                                             "country" : "United States of America"},
                                "Phone"   : "983-555-6509"},
      "Special Instructions" : "Courier",
      "LineItems"            : [{"ItemNumber" : 1,
                                 "Part"       : {"Description" : "Making the Grade",
                                                 "UnitPrice"   : 20,
                                                 "UPCCode"     : 27616867759},
                                 "Quantity"   : 8.0},
                                {"ItemNumber" : 2,
                                 "Part"       : {"Description" : "Nixon",
                                                 "UnitPrice"   : 19.95,
                                                 "UPCCode"     : 717951002396},
                                 "Quantity"   : 5},
                                {"ItemNumber" : 3,
                                 "Part"       : {"Description" : "Eric Clapton: Best Of 1981-1999",
                                                 "UnitPrice"   : 19.95,
                                                 "UPCCode"     : 75993851120},
                                 "Quantity"   : 5.0}
                                ]}');</code></pre></div>
               <!-- class="example" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="creating-a-table-with-a-json-column.html#GUID-74BBD890-EE42-425E-AF09-FEFC5F9093AF">Determining Whether a Column Necessarily Contains JSON Data</a><br>How can you tell whether a given column of a table or view is well-formed JSON data? Whenever this is the case, the column is listed in the following static data dictionary views: <span class="bold"><code class="codeph">DBA_JSON_COLUMNS</code></span>, <span class="bold"><code class="codeph">USER_JSON_COLUMNS</code></span>, and <span class="bold"><code class="codeph">ALL_JSON_COLUMNS</code></span>.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="store-and-manage-json-data.html#GUID-F5FFFBC6-6672-40D6-A0DE-D395570AC135" title="This part covers creating JSON columns in a database table, partitioning such tables, replicating them using Oracle GoldenGate, and character-set encoding of JSON data. It covers the use of SQL/JSON condition is json as a check constraint to ensure that the data in a column is well-formed JSON data.">Store and Manage JSON Data</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB6334"></a><div class="props_rev_3"><a id="GUID-74BBD890-EE42-425E-AF09-FEFC5F9093AF" name="GUID-74BBD890-EE42-425E-AF09-FEFC5F9093AF"></a><h3 id="ADJSN-GUID-74BBD890-EE42-425E-AF09-FEFC5F9093AF" class="sect3"><span class="enumeration_section">4.1 </span>Determining Whether a Column Necessarily Contains JSON Data
               </h3>
               <div>
                  <p>How can you tell whether a given column of a table or view is well-formed JSON data? Whenever this is the case, the column is listed in the following static data dictionary views: <span class="bold"><code class="codeph">DBA_JSON_COLUMNS</code></span>, <span class="bold"><code class="codeph">USER_JSON_COLUMNS</code></span>, and <span class="bold"><code class="codeph">ALL_JSON_COLUMNS</code></span>.
                  </p>
                  <div class="section">
                     <p>Each of these views lists the column name, data type, and format (<code class="codeph">TEXT</code> or <code class="codeph">BINARY</code>); the table or view name (column <code class="codeph">TABLE_NAME</code>); and whether the object is a table or a view (column <code class="codeph">OBJECT_TYPE</code>).
                     </p>
                     <p>For a table column to be considered JSON data it must have an <code class="codeph">is json</code> check constraint. But in the case of a view, any one of the following criteria suffices for a column to be considered JSON data:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The underlying data has an <code class="codeph">is json</code> check constraint.
                           </p>
                        </li>
                        <li>
                           <p>The column results from the use of SQL/JSON function <code class="codeph">json_query</code>.
                           </p>
                        </li>
                        <li>
                           <p>The column results from the use of a JSON generation function, such as <code class="codeph">json_object</code>.
                           </p>
                        </li>
                        <li>
                           <p>The column results from the use of SQL function <code class="codeph">treat</code> with keywords <code class="codeph">AS JSON</code>.
                           </p>
                        </li>
                     </ul>
                     <p>If an <code class="codeph">is json</code> check constraint determines that a table column is JSON data, and if that constraint is later <span class="italic">deactivated</span>, the column remains listed in the views. If the check constraint is <span class="italic">dropped </span>then the column is removed from the views.
                     </p>
                     <div class="infoboxnote" id="GUID-74BBD890-EE42-425E-AF09-FEFC5F9093AF__GUID-30477B02-F504-4545-B6BC-9EAA58B71CB8">
                        <p class="notep1">Note:</p>
                        <p>If a check constraint <span class="italic">combines</span> condition <code class="codeph">is json</code> with another condition using logical condition <code class="codeph">OR</code>, then the column is <span class="italic">not</span> listed in the views. In this case, it is not certain that data in the column is JSON data. For example, the constraint <code class="codeph">jcol is json</code> <span class="bold"><code class="codeph">OR</code></span> <code class="codeph">length(jcol) &lt; 1000</code> does <span class="italic">not</span> ensure that the data in column <code class="codeph">jcol</code> is JSON data.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-74BBD890-EE42-425E-AF09-FEFC5F9093AF__GUID-344E99BD-47E7-4326-9364-0824BF8EED81">
                     <p class="notep1">See Also:</p>
                     <p><a href="../refrn/ALL_JSON_COLUMNS.html#REFRN-GUID-0FEC03C4-8F07-47C0-8FC0-A771EBF5D057" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about <code class="codeph">ALL_JSON_COLUMNS</code> and the related data-dictionary views
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-a-table-with-a-json-column.html#GUID-E6CC0DCF-3D72-41EF-ACA4-B3BF54EE3CA0" title="You can create a table that has JSON columns. You use SQL condition is json as a check constraint to ensure that data inserted into a column is (well-formed) JSON data. Oracle recommends that you always use an is_json check constraint when you create a column intended for JSON data.">Creating a Table With a JSON Column</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>REPLACE SCRIPT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="REPAIR-FAILURE.html" title="Previous" type="text/html">
      <link rel="next" href="REPORT.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="REPAIR-FAILURE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="REPORT.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN Commands: RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">REPLACE SCRIPT</li>
            </ol>
            <a id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF" name="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF"></a><a id="RCMRF90271"></a><a id="RCMRF90272"></a><a id="RCMRF90273"></a><a id="RCMRF145"></a>
            
            <h2 id="RCMRF-GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF" class="sect2"><span class="enumeration_section">3.5 </span>REPLACE SCRIPT
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-62C67797-150D-4C6F-9236-8CA622232125">Purpose</p>
                  <p>Use the <code class="codeph">REPLACE SCRIPT</code> command to replace an existing script stored in the recovery catalog. If the script does not exist, then <code class="codeph">REPLACE SCRIPT</code> creates it.
                  </p>
                  <div class="infoboxnotealso" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-E580DB0A-0D83-4E9A-9CC5-FE5153008E37">
                     <p class="notep1">See Also:</p>
                     <p> <code class="codeph"><a href="CREATE-SCRIPT.html#GUID-4741C1E1-C365-4597-BF2F-8679145B4946">CREATE SCRIPT</a></code> to learn how to create stored scripts
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-3591E8C9-6256-4E61-B531-8E322324A370">Prerequisites</p>
                  <p>Execute <code class="codeph">REPLACE SCRIPT</code> only at the RMAN prompt. RMAN must be connected to a target database and a recovery catalog. The recovery catalog database must be open. 
                  </p>
                  <p>If you are replacing a local script, then you must be connected to the target database that you connected to when you created the script.</p>
                  <p><span class="bold">Substitution Variables in Stored Scripts</span></p>
                  <p><a id="d77355e135" class="indexterm-anchor"></a>RMAN supports the use of substitution variables in a stored script. <code class="codeph">&amp;1</code> indicates where to place the first value, <code class="codeph">&amp;2</code> indicate where to place the second value, and so on. Special characters must be quoted.
                  </p>
                  <p>The substitution variable syntax is <code class="codeph">&amp;</code><span class="italic"><code class="codeph">integer</code></span> followed by an optional period, for example, <code class="codeph">&amp;1.3</code>. The optional period is part of the variable and replaced with the value, thus enabling the substitution text to be immediately followed by another integer. For example, if you pass the value <code class="codeph">mybackup</code> to a command file that contains the substitution variable <code class="codeph">&amp;1.3</code>, then the result of the substitution is <code class="codeph">mybackup3</code>. To create the result <code class="codeph">mybackup.3</code>, you use two periods in <code class="codeph">&amp;1..3</code>.
                  </p>
                  <p>When you create a stored script with substitution variables, you must provide example values at create time. You can provide these values with the <code class="codeph">USING</code> clause when starting RMAN (see <code class="codeph"><a href="RMAN.html#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code>) or enter them when prompted (see <a href="CREATE-SCRIPT.html#GUID-4741C1E1-C365-4597-BF2F-8679145B4946__CHDBBABA">Example 2-74</a>).
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-96B5BCA5-CB4E-499C-B92C-50D3B4E55461">Syntax</p>
                  <p><span class="bold"><span class="italic">replaceScript</span>::=</span></p>
                  <div class="figure" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-3A49F2C3-5D7C-4F8B-A408-B502D3FD5FAE"><img src="img/replacescript.gif" alt="Description of replacescript.eps follows" title="Description of replacescript.eps follows" longdesc="img_text/replacescript.html"><br><a href="img_text/replacescript.html">Description of the illustration replacescript.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDIDAJB">backupCommands::=</a></span>, <span class="italic"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDHAGID">maintenanceCommands::=</a></span>, <span class="italic"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDJFJFH">miscellaneousCommands::=</a></span>, <span class="italic"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDIFJGG">restoreCommands::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-6AD8EE5B-5A46-4A6A-B8B2-D17585EAD1E9">Semantics</p>
                  <div class="tblformalwide" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-4456E1AE-9741-44FB-8F37-54A3B35DE6DB">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title summary="Describes REPLACE SCRIPT command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d77355e225">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d77355e228">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d77355e233" headers="d77355e225 ">
                                 <p><code class="codeph">GLOBAL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d77355e233 d77355e228 ">
                                 <p>Identifies the script as global.</p>
                                 <p><span class="bold">Note:</span> A virtual private catalog has read-only access to global scripts. Creating or updating global scripts must be done while RMAN is connected to the base recovery catalog.
                                 </p>
                                 <p><span class="bold">See Also: </span><span class="q">"<a href="CREATE-SCRIPT.html#GUID-4741C1E1-C365-4597-BF2F-8679145B4946__CHDBJHHH">Usage Notes</a>"</span> for an explanation of the difference between global and local scripts
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d77355e252" headers="d77355e225 ">
                                 <p><code class="codeph">SCRIPT</code><span class="italic"><code class="codeph">&nbsp;script_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d77355e252 d77355e228 ">
                                 <p>Identifies the local or global script being replaced.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d77355e263" headers="d77355e225 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;COMMENT</code> <code class="codeph">'</code><span class="italic"><code class="codeph">comment</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d77355e263 d77355e228 ">
                                 <p>Associates an explanatory comment with the stored script in the recovery catalog. The comment is shown in the output of <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">SCRIPT NAMES</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d77355e287" headers="d77355e225 "><span class="italic"><code class="codeph">backupCommands</code></span> 
                                 <p><span class="italic"><code class="codeph">maintenanceCommands</code></span></p>
                                 <p><span class="italic"><code class="codeph">restoreCommands</code></span> 
                                 </p>
                                 <p><span class="italic"><code class="codeph">miscellaneousCommands</code></span></p> 
                              </td>
                              <td align="left" valign="top" width="71%" headers="d77355e287 d77355e228 ">
                                 <p>Specifies commands to include in the stored script. The commands allowable within the brackets of the <code class="codeph">REPLACE SCRIPT</code> <code class="codeph">'</code><span class="italic"><code class="codeph">script_name </code></span><code class="codeph">'</code> <code class="codeph">{...}</code> command are the same commands supported within a <code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block. Any command that is valid within a <code class="codeph">RUN</code> command is permitted in the stored script. The following commands are not permitted within stored scripts: <code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>, <code class="codeph"><a href="at-sign.html#GUID-7A3919FE-140B-4F50-BA2F-3CEE3285E771">@ (at sign)</a></code>, and <code class="codeph"><a href="double-at-sign.html#GUID-E2B8B99B-73CB-4D4E-8065-0B9F44AF8A52">@@ (double at sign)</a></code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d77355e348" headers="d77355e225 ">
                                 <p><code class="codeph">FROM FILE</code> <code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d77355e348 d77355e228 ">
                                 <p>Reads the sequence of commands to define the script from the specified file.</p>
                                 <p>The file resembles the body of a valid stored script. The first line of the file must be a left brace (<code class="codeph">{</code>) and the last line must contain a right brace (<code class="codeph">}</code>). The RMAN commands in the file must be valid in a stored script.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-2C9F1469-1D0F-431C-8EB4-488591A0046A">Example</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__CHDEEAED">
                  <p class="titleinexample">Example 3-19 Replacing a Recovery Catalog Script</p>
                  <p>Assume that you start the RMAN client and connect to database <code class="codeph">prod</code> as <code class="codeph">TARGET</code> and then connect to a recovery catalog. You use <code class="codeph"><a href="CREATE-SCRIPT.html#GUID-4741C1E1-C365-4597-BF2F-8679145B4946">CREATE SCRIPT</a></code> to create a global script named <code class="codeph">backup_db</code> as follows:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE GLOBAL SCRIPT backup_db
COMMENT "back up any database from the recovery catalog, with logs"
{
    BACKUP DATABASE;
}
</pre><p>You then use <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">SCRIPT NAMES</code> to list all scripts known to the recovery catalog:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST SCRIPT NAMES;
 
List of Stored Scripts in Recovery Catalog
 
 
    Global Scripts
 
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
       back up any database from the recovery catalog, with logs
</pre><p>You then run the following <code class="codeph">REPLACE SCRIPT</code> command with the intention of editing the <code class="codeph">backup_db</code> global script:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; REPLACE SCRIPT backup_db { BACKUP DATABASE PLUS ARCHIVELOG; }
 
replaced script backup_db
</pre><p>Because you did not specify the <code class="codeph">GLOBAL</code> keyword, RMAN creates a local script named <code class="codeph">backup_db</code> in addition to the global script named <code class="codeph">backup_db</code>. <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">SCRIPT NAMES</code> shows both the global and local script recorded in the recovery catalog:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST SCRIPT NAMES;
 
List of Stored Scripts in Recovery Catalog
 
 
    Scripts of Target Database PROD
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
 
 
    Global Scripts
 
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
       back up any database from the recovery catalog, with logs
</pre><p>You can then delete the local script named <code class="codeph">backup_db</code> with <code class="codeph"><a href="DELETE-SCRIPT.html#GUID-FD104F0A-1A3E-45BA-A37E-648A1B0DADA0">DELETE SCRIPT</a></code> and replace the global script as follows:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; DELETE SCRIPT backup_db;
 
deleted script: backup_db
 
RMAN&gt; REPLACE GLOBAL SCRIPT backup_db { BACKUP DATABASE PLUS ARCHIVELOG; }
 
replaced global script backup_db
</pre><p>The <code class="codeph">LIST SCRIPT NAMES</code> command now shows that only one script named <code class="codeph">backup_db</code> exists in the catalog:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST SCRIPT NAMES;

List of Stored Scripts in Recovery Catalog
 
    Global Scripts
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
</pre><p>The <code class="codeph"><a href="PRINT-SCRIPT.html#GUID-FB2882A0-48C0-4D00-8ED6-9F6B2CD15FEC">PRINT SCRIPT</a></code> command confirms the changes to the global script:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; PRINT GLOBAL SCRIPT backup_db;
 
printing stored global script: backup_db
 { BACKUP DATABASE PLUS ARCHIVELOG; }</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
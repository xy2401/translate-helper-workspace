<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Learn how to manage broker configuration members, and monitor the state of each member of the configuration.">
      <meta name="description" content="Learn how to manage broker configuration members, and monitor the state of each member of the configuration.">
      <title>Managing the Members of a Broker Configuration</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Broker ">
      <meta property="og:description" content="Learn how to manage broker configuration members, and monitor the state of each member of the configuration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Broker">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96245-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-oracle-data-guard-broker-configurations.html" title="Previous" type="text/html">
      <link rel="next" href="using-data-guard-broker-to-manage-switchovers-failovers.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker">
    <meta name="dcterms.isVersionOf" content="DGBKR">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-data-guard-broker-configurations.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-data-guard-broker-to-manage-switchovers-failovers.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Broker </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing the Members of a Broker Configuration</li>
            </ol>
            <a id="GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7" name="GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7"></a><a id="DGBKR135"></a>
            
            <h2 id="DGBKR-GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7" class="sect2"><span class="enumeration_chapter">4 </span> Managing the Members of a Broker Configuration
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='managing-oracle-data-guard-broker-configuration-members'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>Learn how to manage broker configuration members, and monitor the state of each member of the configuration.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA" title="The broker uses information in its configuration file to manage and monitor the state of each member of the configuration.">Managing Broker Configuration Members</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-7430128F-D79C-4F6A-8932-8830478B83AB" title="The members of a configuration can be in various states which, in an enabled configuration, determine the behavior of Oracle Data Guard.">Managing States of Broker Configuration Members</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271" title="There are two types of database properties: monitorable and configurable.">Managing Database Properties</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="To manage redo transport services, you specify configurable properties on each configuration member.">Managing Redo Transport Services</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A" title="Redo transport services for a Zero Data Loss Recovery Appliance (Recovery Appliance) are managed in the same way as for a standby database.">Managing Redo Transport Services for Recovery Appliance</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" title="You can manage Redo Apply and SQL Apply on physical and logical standby databases by using database properties related to log apply.">Managing Log Apply Services</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" title="You can use the broker to set up a configuration having any of the different data protection modes.">Managing Data Protection Modes</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1" title="An Oracle Data Guard far sync instance is a redo transport destination that accepts redo from a primary database and forwards that redo to one or more redo destinations in the configuration.">Managing Far Sync Instances</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488" title="You can enable fast-start failover to allow the broker to determine if a failover is necessary and to initiate a failover to a standby database from a list of one or more pre-specified target standby databases.">Managing Fast-Start Failover</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1" title="You can use the DGMGRL CONVERT DATABASE command to convert a physical standby database to a snapshot standby database.">Managing Database Conversions</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-85D20060-248B-42A1-B78D-15C23AAA2F59" title="In general, the broker checks the health of a database by verifying that the actual database state and settings match those described in the broker configuration file.">Database Status</a></p>
                  </li>
               </ul>
            </div><a id="DGBKR140"></a><div class="props_rev_3"><a id="GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA" name="GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA"></a><h3 id="DGBKR-GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA" class="sect3"><span class="enumeration_section">4.1 </span>Managing Broker Configuration Members
               </h3>
               <div>
                  <p>The broker uses information in its configuration file to manage and monitor the state of each member of the configuration.</p>
                  <p>The broker distinguishes between different types of members in a broker configuration. Each type of member has a set of states and properties that are appropriate for that type of member.</p>
               </div>
            </div><a id="DGBKR3530"></a><a id="DGBKR145"></a><div class="props_rev_3"><a id="GUID-7430128F-D79C-4F6A-8932-8830478B83AB" name="GUID-7430128F-D79C-4F6A-8932-8830478B83AB"></a><h3 id="DGBKR-GUID-7430128F-D79C-4F6A-8932-8830478B83AB" class="sect3"><span class="enumeration_section">4.2 </span>Managing States of Broker Configuration Members
               </h3>
               <div>
                  <p>The members of a configuration can be in various states which, in an enabled configuration, determine the behavior of Oracle Data Guard.</p>
                  <p>The following table describes the various states.</p>
                  <p>Snapshot standby databases are not listed in this table because they do not have states; they only receive redo data.</p>
                  <p>Far sync instances are also not included in this table because they do not have states; they only receive redo and forward it to a standby database.</p>
                  <p>Zero Data Loss Recovery Appliances are not included in this table because they do not have states.</p>
                  <div class="tblformal" id="GUID-7430128F-D79C-4F6A-8932-8830478B83AB__G1037265">
                     <p class="titleintable">Table 4-1 Database States and Descriptions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Database States and Descriptions" summary="This 3 column table describes all of the primary and standby database states. Column 1 is the database role. Column 2 is the state. Column 3 is a description of the state." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d7524e207">Database Role</th>
                              <th align="left" valign="bottom" width="28%" id="d7524e210">State Name</th>
                              <th align="left" valign="bottom" width="51%" id="d7524e213">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e218" headers="d7524e207 ">
                                 <p>Primary</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e218 d7524e210 ">
                                 <p><code class="codeph">TRANSPORT-ON</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e218 d7524e213 ">
                                 <p>Redo transport services are set up to transmit redo data to the standby databases or far sync instances when the primary database is open for read/write access.</p>
                                 <p>If this is an Oracle RAC database, all instances open in read/write mode will have redo transport services running.</p>
                                 <p>This is the default state for a primary database when it is enabled for the first time.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e233" headers="d7524e207 ">
                                 <p>Primary</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e233 d7524e210 ">
                                 <p><code class="codeph">TRANSPORT-OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e233 d7524e213 ">
                                 <p>Redo transport services are stopped on the primary database.</p>
                                 <p>If this is an Oracle RAC database, redo transport services are not running on any instances.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e246" headers="d7524e207 ">
                                 <p>Physical standby</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e246 d7524e210 ">
                                 <p><code class="codeph">APPLY-ON</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e246 d7524e213 ">
                                 <p>Redo Apply is started on a physical standby database.</p>
                                 <p>If the standby database is an Oracle RAC database, the broker starts Redo Apply on exactly one standby instance, called the apply instance. If this instance fails, the broker automatically chooses another instance that is either mounted or open read-only. This new instance then becomes the apply instance. </p>
                                 <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), Redo Apply can be set up to run on each active running physical standby instance. If a database has already been set up to run Redo Apply on multiple instances, then you can use the Data Guard broker property <code class="codeph">ApplyInstances</code> to restrict the number of instances that are involved in Redo Apply on an Oracle RAC physical standby database.
                                 </p>
                                 <p><code class="codeph">APPLY-ON</code> is the default state for a physical standby database when it is enabled for the first time.
                                 </p>
                                 <p>If a license for the Oracle Active Data Guard option has been purchased, a physical standby database can be open while Redo Apply is active. This capability is known as real-time query. See <a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00706" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more details.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e278" headers="d7524e207 ">
                                 <p>Physical standby</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e278 d7524e210 ">
                                 <p><code class="codeph">APPLY-OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e278 d7524e213 ">
                                 <p>Redo Apply is stopped. </p>
                                 <p>If this is an Oracle RAC database, there is no instance running Apply Services until you change the database state to <code class="codeph">APPLY-ON</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e294" headers="d7524e207 ">
                                 <p>Logical standby</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e294 d7524e210 ">
                                 <p><code class="codeph">APPLY-ON</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e294 d7524e213 ">
                                 <p> SQL Apply is started on the logical standby database when it is opened and the logical standby database guard is on.</p>
                                 <p>If this is an Oracle RAC database, SQL Apply is running on one instance, the apply instance. If this instance fails, the broker automatically chooses another open instance. This new instance becomes the apply instance.</p>
                                 <p>This is the default state for a logical standby database when it is enabled for the first time.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e309" headers="d7524e207 ">
                                 <p>Logical standby</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e309 d7524e210 ">
                                 <p><code class="codeph">APPLY-OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e309 d7524e213 ">
                                 <p>SQL Apply is stopped. The logical standby database guard is on.</p>
                                 <p>If this is an Oracle RAC database, there is no instance running SQL Apply until you change the state to <code class="codeph">APPLY-ON</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="DGBKR3531"></a><a id="DGBKR3532"></a><a id="DGBKR3534"></a><a id="DGBKR150"></a><div class="props_rev_3"><a id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6" name="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6"></a><h4 id="DGBKR-GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6" class="sect4"><span class="enumeration_section">4.2.1 </span>Database State Transitions
                  </h4>
                  <div>
                     <p>You can use the DGMGRL <code class="codeph">EDIT DATABASE</code> command to explicitly change the state of a database. 
                     </p>
                     <p>For example, the <code class="codeph">EDIT DATABASE</code> command in the following example changes the state of the <code class="codeph">North_Sales</code> database to <code class="codeph">TRANSPORT-OFF</code>. 
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET STATE='TRANSPORT-OFF';
Succeeded.</pre><p>The following sections describe in more detail the possible state transitions for primary and standby databases.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-F6EBAC2F-B13A-43B1-84BD-4D351F1EE66D">Primary Database State Transitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When transitioning the primary database to the <code class="codeph">TRANSPORT-ON</code> state, the broker sets up redo transport services using the redo transport-related properties of the configuration members and the <code class="codeph">RedoRoutes</code> property at the primary database. Redo transport services setup is done by setting the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> and <code class="codeph">LOG_ARCHIVE_DEST_STATE_</code><span class="variable" translate="no">n</span> initialization parameters on the primary database, and the <code class="codeph">LOG_ARCHIVE_CONFIG</code> initialization parameter on all databases (primary or standby) and far sync instances. If necessary, the broker also sets up the data protection mode of the database to match the protection mode recorded in the broker configuration file. Finally, if the database is open, the broker switches a log for each thread to initiate redo transport services.
                        </p>
                        <p>When transitioning the primary database to the <code class="codeph">TRANSPORT-OFF</code> state, the broker turns off redo transport services to all broker-managed standbys by resetting the <code class="codeph">LOG_ARCHIVE_DEST_STATE_</code><span class="variable" translate="no">n</span> initialization parameter. Transmission of redo data to all broker-managed standbys is stopped. Log files continue to be archived at the primary database.
                        </p>
                        <p>If the primary database is an Oracle RAC database, the broker configures redo transport services on all primary instances with the exact same settings.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-EAA85C02-2619-4AD0-BB4F-3EEF1F399CE7">Physical Standby Database State Transitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When transitioning a physical standby database to the <code class="codeph">APPLY-ON</code> state, the broker starts Redo Apply with options specified by the Redo Apply-related properties. If the standby is an Oracle RAC database, then the broker starts Redo Apply on one standby instance, called the apply instance.
                        </p>
                        <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), Redo Apply can be set up to run on multiple active running physical standby instances. (This feature requires the standby database to have a license for the Oracle Active Data Guard option.) If a database has already been set up to run Redo Apply on multiple instances, then you can use the Data Guard broker property <code class="codeph">ApplyInstances</code> to restrict the number of instances that are involved in Redo Apply on an Oracle RAC physical standby database.
                        </p>
                        <p>If a license for the Oracle Active Data Guard option has been purchased, a physical standby database can be open while Redo Apply is active. This capability is known as real-time query. See <a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00706" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more details.
                        </p>
                        <p>The apply instance must be open before starting Redo Apply if any other instance is open.</p>
                        <p>When transitioning to the <code class="codeph">APPLY-OFF</code> state, the broker stops Redo Apply.
                        </p>
                        <div class="infoboxnote" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-3CCF9B95-3921-4F15-9F63-B1F7D871170E">
                           <p class="notep1">Note:</p>
                           <p>If you perform online database relocation with Oracle RAC One Node on a physical standby, then the new instance is started in the same mode as the currently running instance. Therefore, if the database is mounted on the original instance, then the database will be mounted on the new instance. Likewise, if the database is open on the original instance, then the database will be open on the new instance. This may result in the new instance starting in a mode that does not match the start option recorded with Oracle Clusterware for the database.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-D7E02CBE-2576-4FB3-B37D-BFA35E855971">Logical Standby Database State Transitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When transitioning a logical standby database to the <code class="codeph">APPLY-ON</code> state, the broker will wait until the database is open, and then enable the database guard to prevent modifications to tables in the logical standby database, and start SQL Apply with options specified by the log apply-related properties. If the logical standby database is an Oracle RAC database, the broker starts SQL Apply on one standby instance, the apply instance.
                        </p>
                        <p>When transitioning to the <code class="codeph">APPLY-OFF</code> state, the broker stops SQL Apply.
                        </p>
                        <div class="infoboxnotealso" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-DB8B530E-007E-47AF-ACB6-FFB9664F7075">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" title="You can manage Redo Apply and SQL Apply on physical and logical standby databases by using database properties related to log apply.">Managing Log Apply Services</a> for information about managing SQL Apply
                                 </p>
                              </li>
                              <li>
                                 <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="To manage redo transport services, you specify configurable properties on each configuration member.">Managing Redo Transport Services</a> for more details on managing redo transport services and a  list of redo transport-related properties
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../sbydb/managing-oracle-data-guard-logical-standby-databases.html#SBYDB4827" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for information about the database guard
                                 </p>
                              </li>
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-E7889124-C414-466F-9FBB-B8F035881F89" title="Use the command reference to understand how you can use the Data Guard broker command-line interface (DGMGRL) to manage your broker configuration.">Oracle Data Guard Command-Line Interface Reference</a> for complete information about the <code class="codeph">EDIT DATABASE</code> command.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DGBKR3535"></a><a id="DGBKR155"></a><div class="props_rev_3"><a id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271" name="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271"></a><h3 id="DGBKR-GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271" class="sect3"><span class="enumeration_section">4.3 </span>Managing Database Properties
               </h3>
               <div>
                  <p>There are two types of database properties: monitorable and configurable.</p>
                  <p>Both monitorable and configurable properties can be further divided into properties having database-wide scope or instance-specific scope.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Monitorable property values can be viewed only when the associated database is enabled.</p>
                        <p>Monitorable properties allow you to view run-time information related to databases, but you cannot change the values of these properties.</p>
                     </li>
                     <li>
                        <p>Configurable property values can be viewed and dynamically updated.</p>
                        <p>Configurable properties affect the operation or configuration of the broker. You can change the value of these properties using DGMGRL or Cloud Control. You can edit properties whether the configuration and its members are enabled or disabled. However, if a configuration member is disabled, then the new property value does not take effect until you enable the configuration or member, as appropriate. </p>
                        <div class="infoboxnotealso" id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__GUID-62CD8E34-1D42-446A-BED7-97DCA9ACE99C">
                           <p class="notep1">See Also:</p>
                           <p> <a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration."> Oracle Data Guard Broker Properties</a> for a detailed list of all database properties
                           </p>
                        </div>
                     </li>
                  </ul>
                  <p>To see these properties, you can use the DGMGRL <code class="codeph">SHOW</code> command or Edit Properties page in Cloud Control. <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__CHDEBGGH">Example 4-1</a> uses the <code class="codeph">SHOW DATABASE VERBOSE</code> command to display information about the <code class="codeph">North_Sales</code> database.
                  </p>
                  <div class="infoboxnotealso" id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__GUID-4780B6F6-4D94-4D3E-9DC1-AFF1A112A38D">
                     <p class="notep1">See Also:</p>
                     <p><a href="oracle-data-guard-broker-commands.html#GUID-E7889124-C414-466F-9FBB-B8F035881F89" title="Use the command reference to understand how you can use the Data Guard broker command-line interface (DGMGRL) to manage your broker configuration."> Oracle Data Guard Command-Line Interface Reference</a> for complete information about the DGMGRL command-line interface
                     </p>
                  </div>
                  <div class="example" id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__CHDEBGGH">
                     <p class="titleinexample">Example 4-1 Using the SHOW DATABASE VERBOSE Command to Display Properties</p>
                     <p></p><pre class="pre codeblock"><code>SHOW DATABASE VERBOSE 'North_Sales';

Database - North_Sales

  Role:               PRIMARY
  Intended State:     TRANSPORT-ON
  Instance(s):
    North_sales1

  Properties:
    DGConnectIdentifier             = 'North_Sales.example.com'
    ObserverConnectIdentifier       = ''
    FastStartFailoverTarget         = ''
    PreferredObserverHosts          = ''
    LogShipping                     = 'ON'
    RedoRoutes                      = ''
    LogXptMode                      = 'ASYNC'
    DelayMins                       = '0'
    Binding                         = 'optional'
    MaxFailure                      = '0'
    ReopenSecs                      = '30'
    NetTimeout                      = '300'
    RedoCompression                 = 'DISABLE'
    PreferredApplyInstance          = ''
    ApplyInstanceTimeout            = '0'
    ApplyLagThreshold               = '0'
    TransportLagThreshold           = '0'
    TransportDisconnectedThreshold  = '0'
    ApplyParallel                   = 'AUTO'
    ApplyInstances                  = '0'
    StandbyFileManagement           = ''
    ArchiveLagTarget                = '0'
    LogArchiveMaxProcesses          = '0'
    LogArchiveMinSucceedDest        = '0'
    DataGuardSyncLatency            = '0'
    LogArchiveTrace                 = 255
    LogArchiveFormat                = 'db1r_%d_%t_%s_%R.arc'
    DbFileNameConvert               = 'dbs/cdb2_, dbs/cdb1_, dbs/bt, dbs/t, dbs/cdb4_, dbs/cdb1_, dbs/dt, dbs/t'
    LogFileNameConvert              = 'dbs/cdb2_, dbs/cdb1_, dbs/bt, dbs/t, dbs/cdb4_, dbs/cdb1_, dbs/dt, dbs/t'
    ArchiveLocation                 = ''
    AlternateLocation               = ''
    StandbyArchiveLocation          = ''
    StandbyAlternateLocation        = ''
    InconsistentProperties          = '(monitor)'
    InconsistentLogXptProps         = '(monitor)'
    LogXptStatus                    = '(monitor)'
    SendQEntries                    = '(monitor)'
    RecvQEntries                    = '(monitor)'
    HostName                        = ’North_Sales.example.com'
    StaticConnectIdentifier         = '(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)
(HOST=North_Sales.example.com)(PORT=2840))
(CONNECT_DATA=(SERVICE_NAME=North_Sales_DGMGRL.example.com)
(INSTANCE_NAME=north_sales1)(SERVER=DEDICATED)))'
    TopWaitEvents                   = '(monitor)'
    SidName                         = '(monitor)’

  Log file locations:
    Alert log               : /dev/oracle/log/diag/rdbms/North_Sales/north1/trace/alert_north1.log
    Data Guard Broker log   : /dev/oracle/log/diag/rdbms/North_Sales/north1/trace/drcnorth1.log

Database Status:
SUCCESS</code></pre></div>
                  <!-- class="example" -->
               </div><a id="DGBKR160"></a><div class="props_rev_3"><a id="GUID-3A5DC529-0C67-4EBF-8771-C7C3281F1553" name="GUID-3A5DC529-0C67-4EBF-8771-C7C3281F1553"></a><h4 id="DGBKR-GUID-3A5DC529-0C67-4EBF-8771-C7C3281F1553" class="sect4"><span class="enumeration_section">4.3.1 </span>Monitorable (Read-Only) Properties
                  </h4>
                  <div>
                     <p>Monitorable properties allow you to view information related to a configuration member, but you cannot change the property values.</p>
                     <p>Monitorable properties can be very helpful when you are trying to diagnose problems in the broker configuration. For example, you can view the <code class="codeph">InconsistentLogXptProps</code> monitorable property to determine where there is a discrepancy in redo transport services properties between the broker configuration file and the actual value currently used by the database.
                     </p>
                     <p>You can list all monitorable properties using the DGMGRL <code class="codeph">SHOW DATABASE VERBOSE</code> command. Use the <code class="codeph">SHOW DATABASE</code> command to obtain more details about a particular property. For example, the following shows the <code class="codeph">InconsistentLogXptProps</code> property:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales' 'InconsistentLogXptProps';

INCONSISTENT LOG TRANSPORT PROPERTIES

 INSTANCE_NAME     STANDBY_NAME  PROPERTY_NAME  MEMORY_VALUE  BROKER_VALUE 
  south_sales1      South_Sales     ReopenSecs           600           300
</pre><p>Cloud Control displays the information obtained from these properties on the Edit Properties page.</p>
                  </div>
               </div><a id="DGBKR165"></a><div class="props_rev_3"><a id="GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B" name="GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B"></a><h4 id="DGBKR-GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B" class="sect4"><span class="enumeration_section">4.3.2 </span>Configurable (Changeable) Properties
                  </h4>
                  <div>
                     <p>Configurable properties affect the operation or configuration of a database or far sync instance.</p>
                     <p>When you use DGMGRL or Cloud Control to create a primary database and import existing standby databases and far sync instances into a new broker configuration, the property values are initially imported from the database or far sync instance settings.</p>
                     <p>You can update many property values when a configuration member is either disabled or enabled. When a new member is added into the configuration, the broker connects to that member and imports initial values for the member's properties from the current member settings. For example:</p>
                     <p></p><pre class="pre codeblock"><code>DGMGRL&gt; SHOW DATABASE 'North_Sales' LogXptMode;
  LogXptMode = ASYNC

DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY LogXptMode='SYNC';
  Property "LogXptMode" updated

DGMGRL&gt; SHOW DATABASE 'North_Sales' LogXptMode;
  LogXptMode = SYNC
</code></pre><p></p>
                     <p>When the configuration is enabled, for properties related to redo transport, the broker keeps the member property values in the broker configuration file consistent with the values being used by the member. The broker no longer maintains values for properties related to initialization parameters in the configuration file. Note that there is no issue with maintaining consistency. Although the broker no longer maintains values for these properties, it is still possible to use the broker CLI to update and examine the value of these properties. Due to user action, it is possible for the parameter value in the system global area (SGA) to differ from the parameter value in the server parameter file. This is not flagged as an inconsistency and only means that the server parameter file value will take effect the next time the database is restarted. The specified database must be accessible to be able to make these property changes.</p>
                     <div class="infoboxnote" id="GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B__GUID-7A55C027-EB6E-4A21-805A-911AFA59DFC4">
                        <p class="notep1">Note:</p>
                        <p>Even though you can change a property value when the configuration is disabled, the change does not take effect on the configuration member unless the configuration is enabled. Also note that some property values can only be changed in the disabled state.</p>
                     </div>
                  </div><a id="DGBKR3660"></a><div class="props_rev_3"><a id="GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D" name="GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D"></a><h5 id="DGBKR-GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D" class="sect5"><span class="enumeration_section">4.3.2.1 </span>Resetting Broker Configurable Properties to Default Values
                     </h5>
                     <div>
                        <p>Most broker configurable properties have a default value, but you can specify a different value to override it.</p>
                        <p>In releases prior to Oracle Database 12<span class="italic">c</span> Release 1 (12.1), once you changed a default value the broker considered it to be a user-supplied value even if you later set the property back to its former default value.
                        </p>
                        <p>As of Oracle Database 12<span class="italic">c</span> Release 1 (12.1), the broker recognizes when a default value has been restored for a property and no longer considers it a user-supplied value. This is expedient in upgrade scenarios because if a default value for a property changes between releases, then the new default value is automatically put into effect after an upgrade is complete. Values that are considered user-supplied are not automatically upgraded.
                        </p>
                        <p> You do not need to know the actual default value in order to reset it. You can reset a default value at the configuration, configuration member, or instance level.</p>
                        <div class="infoboxnotealso" id="GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D__GUID-0678BEF5-8527-42CA-B8B5-B8B871974376">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="oracle-data-guard-broker-commands.html#GUID-CD715676-43D3-4EBF-AFCB-50729C68CDE7" title="The EDIT CONFIGURATION RESET PROPERTY command resets the specified configuration property to its default value.">EDIT CONFIGURATION RESET (Property)</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-data-guard-broker-commands.html#GUID-57834E6A-990F-44FF-82BF-C221D8FA3400" title="The EDIT DATABASE RESET (Property) command reset the specified property for the named database back to its default value.">EDIT DATABASE RESET (Property)</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-data-guard-broker-commands.html#GUID-80730A07-6245-48FC-8A7B-2802A93E9EC7" title="The EDIT FAR_SYNC RESET (Property) command resets the specified property for the named far sync instance to its default value.">EDIT FAR_SYNC RESET (Property)</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-E61C8F4A-5F76-425B-A107-B7ABD1AD4B38" title="The EDIT RECOVERY_APPLIANCE RESET (Property) command resets the specified property for the named Recovery Appliance to its default value.">EDIT RECOVERY_APPLIANCE RESET (Property)</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="DGBKR170"></a><div class="props_rev_3"><a id="GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" name="GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A"></a><h3 id="DGBKR-GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" class="sect3"><span class="enumeration_section">4.4 </span>Managing Redo Transport Services
               </h3>
               <div>
                  <p>To manage redo transport services, you specify configurable properties on each configuration member.</p>
                  <p>The properties you specify are as follows:<a id="d7524e865" class="indexterm-anchor"></a><a id="d7524e869" class="indexterm-anchor"></a>:
                  </p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DGConnectIdentifier</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">StandbyAlternateLocation</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">Binding</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">Encryption</code> (This property can be set only on a Recovery Appliance)
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LogShipping</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">LogXptMode</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">MaxFailure</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">NetTimeout</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">RedoCompression</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">RedoRoutes</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ReopenSecs</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">StandbyArchiveLocation</code></p>
                     </li>
                  </ul>
                  <p>You can use these properties to specify how the broker configures redo transport services for the standby database. The actual redo transport setup, such as setting the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter, is carried out by the broker on the primary database (except for the <code class="codeph">StandbyArchiveLocation</code> property). If changing the property requires that you change the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter attributes, the broker forces a log switch on each thread so that the new setting is adopted immediately by the primary database.
                  </p>
                  <p>You should also preset these properties on the primary database in preparation for it to be switched over to a standby database.</p>
               </div><a id="DGBKR3396"></a><div class="props_rev_3"><a id="GUID-A21F8635-0F5B-41C3-8B7E-EF604B4C1C98" name="GUID-A21F8635-0F5B-41C3-8B7E-EF604B4C1C98"></a><h4 id="DGBKR-GUID-A21F8635-0F5B-41C3-8B7E-EF604B4C1C98" class="sect4"><span class="enumeration_section">4.4.1 </span>Setting Up For Redo Transport
                  </h4>
                  <div>
                     <p>Redo data is transported to a standby database using Oracle Net.</p>
                     <div class="section">
                        <p>An Oracle Net service name is specified with the <code class="codeph">SERVICE</code> attribute of the <code class="codeph">LOG_ARCHIVE_DEST_n</code> initialization parameter and is used to transmit redo data to the standby database. The Oracle Net service name is translated into a connect descriptor that contains the information necessary for connecting to the standby database.
                        </p>
                        <p>The <code class="codeph">SERVICE</code> attribute can be set or changed by using the <code class="codeph">DGConnectIdentifier</code> database property. The <code class="codeph">DGConnectIdentifier</code> property is set when a database is first added to the configuration. Its initial value is the connect identifier that is specified in the optional <code class="codeph">CONNECT IDENTIFIER IS</code> clause of the <code class="codeph">ADD DATABASE</code> command.
                        </p>
                        <p>The <code class="codeph">DGConnectIdentifier</code> property value is also used to set up the <code class="codeph">FAL_SERVER</code> initialization parameter. If the <code class="codeph">DGConnectIdentifier</code> property for any database is changed, the <code class="codeph">SERVICE</code> attribute of the corresponding <code class="codeph">LOG_ARCHIVE_DEST_n</code> initialization parameter will also be changed. In addition, the <code class="codeph">FAL_SERVER</code> initialization parameter will also be updated on every enabled standby database in the configuration.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DGBKR3536"></a><a id="DGBKR3537"></a><a id="DGBKR3661"></a><a id="DGBKR175"></a><div class="props_rev_3"><a id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF" name="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF"></a><h4 id="DGBKR-GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF" class="sect4"><span class="enumeration_section">4.4.2 </span>Managing Redo Transport Services for Data Protection Modes
                  </h4>
                  <div>
                     <p>As a part of the overall configuration protection mode, you must ensure that redo transport services are also properly set up for the data protection mode that you choose.</p>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" title="You can use the broker to set up a configuration having any of the different data protection modes.">Managing Data Protection Modes</a> describes how the broker handles data protection modes. 
                     </p>
                     <p>You use the <code class="codeph">LogXptMode</code> or <code class="codeph">RedoRoutes</code> database properties to set the <code class="codeph">SYNC</code>, <code class="codeph">ASYNC</code>, or <code class="codeph">FASTSYNC</code> mode for redo transport services.
                     </p>
                     <p>The following redo transport modes are supported:</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF__GUID-A1AD379C-140C-43E1-844C-31474C0431ED">SYNC</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Configures redo transport services for this standby database using the <code class="codeph">SYNC</code> and <code class="codeph">AFFIRM</code> attributes of the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter. This mode, along with standby redo log files, is required for configurations operating in either maximum protection mode or maximum availability mode. This redo transport service enables the highest grade of data protection to the primary database, but also can incur a higher performance impact.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF__GUID-213FC368-FD94-4008-9AB8-F1E70364EE8E">ASYNC</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Configures redo transport services for this standby database using the <code class="codeph">ASYNC</code> and <code class="codeph">NOAFFIRM</code> attributes of the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter. This mode, along with standby redo log files, enables a moderate grade of protection to the primary database, and lower performance impact.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF__GUID-F9E8EB77-6C6A-41FD-AF30-3F15A358EAF9">FASTSYNC</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Configures redo transport services for this standby database using the <code class="codeph">SYNC</code> and <code class="codeph">NOAFFIRM</code> attributes of the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter. This mode is only available in maximum availability protection mode.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DGBKR3932"></a><a id="DGBKR3933"></a><a id="DGBKR3852"></a><div class="props_rev_3"><a id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205" name="GUID-81DE5E90-C544-410C-942E-6172E7BB4205"></a><h4 id="DGBKR-GUID-81DE5E90-C544-410C-942E-6172E7BB4205" class="sect4"><span class="enumeration_section">4.4.3 </span>Advanced Redo Transport Settings
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">RedoRoutes</code> property to override the default behavior in which a primary database sends its redo to every possible redo transport destination in the configuration.
                     </p>
                     <p>An example of redo transport topology other than the default would be one in which a physical standby or a far sync instance forwards redo received from the primary database to one or more destinations, or one in which the redo transport mode used for a given destination is dependent on which database is in the primary role.</p>
                     <div class="infoboxnotealso" id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205__GUID-D9DD8190-E8E5-4332-98A2-2735D9E753AD">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="oracle-data-guard-broker-properties.html#GUID-FB1A96ED-5E6D-43FE-BFC4-6A808E589410" title="The RedoRoutes property lets you override the default behavior by which a primary database sends the redo that it generates to every other redo transport destination in the configuration.">RedoRoutes</a> for information about redo routing rules when you use the <code class="codeph">RedoRoutes</code> property
                              </p> 
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205__GUID-621A2C97-A225-4874-8061-C9AB80972484">
                        <p class="titleinexample">Example 4-2 Using the RedoRoutes Property for Real-Time Cascading</p>
                        <p>Consider a configuration that has a primary database (<code class="codeph">North_Sales</code>) and two physical standby databases (<code class="codeph">Local_Sales</code> and <code class="codeph">Remote_Sales</code>). The <code class="codeph">Local_Sales</code> database is located in the same data center as the primary for high availability purposes. The <code class="codeph">Remote_Sales</code> database is located in a remote data center for disaster recovery purposes. Instead of the primary having to ship its redo to both databases, it is possible to use the <code class="codeph">RedoRoutes</code> property to configure real-time cascading, in which the local physical standby database forwards redo from <code class="codeph">North_Sales</code> to the remote physical standby database, <code class="codeph">Remote_Sales</code>. To accomplish this, the <code class="codeph">RedoRoutes</code> property must be set as follows:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>	On the <code class="codeph">North_Sales</code> database, the <code class="codeph">RedoRoutes</code> property must specify that if <code class="codeph">North_Sales</code> is in the primary role, then it should ship redo to the <code class="codeph">Local_Sales</code> database using synchronous transport mode. This rule prevents the primary from shipping redo data directly to the <code class="codeph">Remote_Sales</code> database.
                              </p>
                           </li>
                           <li>
                              <p>	On the <code class="codeph">Local_Sales</code> database, the <code class="codeph">RedoRoutes</code> property must specify that if <code class="codeph">North_Sales</code> is in the primary role, then <code class="codeph">Local_Sales</code> should forward redo it receives from <code class="codeph">North_Sales</code> on to <code class="codeph">Remote_Sales</code>.
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'RedoRoutes' = '(LOCAL : Local_Sales SYNC)';
DGMGRL&gt; EDIT DATABASE 'Local_Sales' SET PROPERTY 'RedoRoutes' = '(North_Sales : Remote_Sales ASYNC)';
</pre><p>To see the runtime <code class="codeph">RedoRoutes</code> configuration, use the <code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code> command. For example:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - Sales_Configuration
 
  Protection Mode: MaxAvailability
  Members:
  North_Sales  - Primary database
    Local_Sales  - Physical standby database
      Remote_Sales  - Physical standby database (receiving current redo)
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre><p>Note that the <code class="codeph">ASYNC</code> redo transport attribute was explicitly specified in the redo route rule for the <code class="codeph">Remote_Sales</code> destination to enable real-time cascading of redo to that destination. (Real-time cascading requires a license for the Oracle Active Data Guard option.)
                        </p>
                        <p>To disable real-time cascading of redo, do not specify the <code class="codeph">ASYNC</code> redo transport attribute. For example:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'Local_Sales' SET PROPERTY 'RedoRoutes' = '(North_Sales : Remote_Sales)';</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205__GUID-2DF34135-CAC2-494C-8A06-006A98902881">
                        <p class="titleinexample">Example 4-3 Using the RedoRoutes Property for Remote Alternate Destinations</p>
                        <p>The <code class="codeph">RedoRoutes</code> property can also be used to set up a remote alternate destination so that a terminal member can still receive redo data even if the member from which it was receiving the redo data fails. Using the previous example, it would be possible to have the primary database, <code class="codeph">North_Sales</code>, send redo data directly to <code class="codeph">Remote_Sales</code> if the <code class="codeph">Local_Sales</code> standby database failed. It is also possible, using the <code class="codeph">PRIORITY</code> attribute, to set it up so that once the <code class="codeph">Local_Sales</code> failure has been resolved it can resume shipping redo to <code class="codeph">Remote_Sales</code>. 
                        </p><pre class="pre codeblock"><code>DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'RedoRoutes' = '(LOCAL : ( Local_Sales ASYNC PRIORITY=1, Remote_Sales ASYNC PRIORITY=2 ))';
Property "RedoRoutes" updated

DGMGRL&gt; EDIT DATABASE 'Local_Sales' SET PROPERTY 'RedoRoutes' = '(North_Sales : Remote_Sales ASYNC)';
Property "RedoRoutes" updated

DGMGRL&gt; SHOW CONFIGURATION;

Configuration - Sales_Configuration

  Protection Mode: MaxPerformance
  Members:
  North_Sales    - Primary database
    Local_Sales  - Physical standby database
      Remote_Sales - Physical standby database
Fast-Start Failover: DISABLED

Configuration Status:
SUCCESS</code></pre><p>To see the full <code class="codeph">RedoRoutes</code> configuration, use the <code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code> <code class="codeph">VERBOSE</code> command. For example:
                        </p><pre class="pre codeblock"><code>DGMGRL&gt; SHOW CONFIGURATION VERBOSE;

Configuration - Sales_Configuration

  Protection Mode: MaxPerformance
  Members:
    North_Sales - Primary database
      Local_Sales - Physical standby database
        Remote_Sales - Physical standby database
      Remote_Sales - Physical standby database (alternate of Local_Sales)

  Properties:
    FastStartFailoverThreshold      = '180'
    OperationTimeout                = '30'
    TraceLevel                      = 'USER'
    FastStartFailoverLagLimit       = '300'
    CommunicationTimeout            = '180'
    ObserverReconnect               = '0'
    FastStartFailoverAutoReinstate  = 'TRUE'
    FastStartFailoverPmyShutdown    = 'TRUE'
    BystandersFollowRoleChange      = 'ALL'
    ObserverOverride                = 'FALSE'
    ExternalDestination1            = ''
    ExternalDestination2            = ''
    PrimaryLostWriteAction          = 'CONTINUE'
    ConfigurationWideServiceName    = 'c0_CFG'

Fast-Start Failover: DISABLED

Configuration Status:
SUCCESS</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DGBKR3538"></a><a id="DGBKR3539"></a><a id="DGBKR180"></a><div class="props_rev_3"><a id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48" name="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48"></a><h4 id="DGBKR-GUID-407D7187-93B3-4DAB-A31E-4D5302265A48" class="sect4"><span class="enumeration_section">4.4.4 </span>Turning Redo Transport Services On and Off
                  </h4>
                  <div>
                     <p>You turn redo transport services on and off by setting the state of the primary database.</p>
                     <div class="section">
                        <p><a id="d7524e1358" class="indexterm-anchor"></a>Setting the primary database state to <code class="codeph">TRANSPORT-ON</code> starts redo transport services at the primary database, and setting the primary database state to <code class="codeph">TRANSPORT-OFF</code> stops redo transport services at the primary database.
                        </p>
                        <div class="infoboxnote" id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__GUID-1C47EA3F-6BE4-48DC-AC90-002936181462">
                           <p class="notep1">Note:</p>
                           <p>Oracle does not recommend turning off redo transport services to all standby databases. This increases the risk of data loss if the primary database fails.</p>
                        </div>
                        <p>Turn redo transport services on and off to an individual standby database using the <code class="codeph">LogShipping</code> database property on the standby database. The <code class="codeph">LogShipping</code> property accepts values <code class="codeph">ON</code> and <code class="codeph">OFF</code>. If you set the <code class="codeph">LogShipping</code> property to <code class="codeph">OFF</code> for a standby database, redo transport services to this standby database are turned off, while redo transport services to other databases are not affected. You can set <code class="codeph">LogShipping</code> to <code class="codeph">ON</code> to turn back on redo transport services to the standby database.
                        </p>
                        <p>The relationship between setting the primary database state and setting the <code class="codeph">LogShipping</code> property is as follows:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the primary database state is set to <code class="codeph">TRANSPORT-OFF</code>, redo transport services to all the standby databases are stopped regardless of the <code class="codeph">LogShipping</code> property values of the individual standby databases.
                              </p>
                           </li>
                           <li>
                              <p>If the primary database state is set to <code class="codeph">TRANSPORT-ON</code>, redo transport services to each standby database are determined by the <code class="codeph">LogShipping</code> property of that database.
                              </p>
                           </li>
                        </ul>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029225">Example 4-4</a> and <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029241">Example 4-5</a> show how to turn off <a id="d7524e1429" class="indexterm-anchor"></a>redo transport services in two different scenarios.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029225">
                        <p class="titleinexample">Example 4-4 Turn Off Redo Transport Services to All Standby Databases</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET STATE='TRANSPORT-OFF';
DGMGRL&gt; SHOW DATABASE 'North_Sales';
 
Database - North_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-OFF
  Instance(s):
    north_sales1
 
Database Status:
SUCCESS</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029241">
                        <p class="titleinexample">Example 4-5 Turn Off Redo Transport Services to a Specific Standby Database</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogShipping'='OFF';
Property "LogShipping" updated

DGMGRL&gt; SHOW DATABASE 'South_Sales' 'LogShipping';
  LogShipping = 'OFF'</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DGBKR185"></a><div class="props_rev_3"><a id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D" name="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D"></a><h4 id="DGBKR-GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D" class="sect4"><span class="enumeration_section">4.4.5 </span>Specifying Locations for Archived Redo Log Files
                  </h4>
                  <div>
                     <p>You can use broker configurable properties to set up locations to store both archived standby redo log files and archived online redo log files.</p>
                     <p>For online redo log files, use the <code class="codeph">ArchiveLocation</code> and <code class="codeph">AlternateLocation</code> properties on a primary, logical, or snapshot standby database. 
                     </p>
                     <p>For standby redo log files, use the <code class="codeph">StandbyArchiveLocation</code> and <code class="codeph">StandbyAlternateLocation</code> properties on a standby database. If the <code class="codeph">StandbyArchiveLocation</code> is not set, <code class="codeph">ArchiveLocation</code> or <code class="codeph">AlternateLocation</code> specify the archiving location for both of online and standby redo log files. If <code class="codeph">StandbyArchiveLocation</code> is set, ArchiveLocation and AlternateLocation specify the archiving location for online redo log files.
                     </p>
                     <p>The <code class="codeph">StandbyArchiveLocation</code> property specifies a location to store archived redo log files. The broker uses the location to store only archived redo log files received from the primary database. For archived redo log files generated locally when the database is either the primary database, a logical standby database, or a snapshot standby database, you need to specify the <code class="codeph">ArchiveLocation</code> property. The broker allows the value of the <code class="codeph">StandbyArchiveLocation</code> and <code class="codeph">ArchiveLocation</code> properties to be the same as the location you set up for locally generated logs, in which case the broker sets up the <code class="codeph">VALID_FOR</code> attribute of the destination appropriately so that it can be used for both the archived redo log files received from the primary database and archived redo log files generated locally. When a location is used for both online and standby redo log files, you must configure the <code class="codeph">ArchiveLocation</code> property to the shared location and leave the <code class="codeph">StandbyArchiveLocation</code> property empty.
                     </p>
                     <p>You can also set up an alternate location to store archived redo log files by using the <code class="codeph">StandbyAlternateLocation</code> and <code class="codeph">AlternateLocation</code> properties. The alternate locations specified by these properties are where the archived redo log files are stored if the original archive location (specified by <code class="codeph">StandbyArchiveLocation</code> or <code class="codeph">Archivelocation</code>) fails. The broker sets up the alternate location properly using the <code class="codeph">ALTERNATE</code> attribute of the <code class="codeph">LOG_ARCHIVE_DEST_<span class="codeinlineitalic">n</span></code> initialization parameter. 
                     </p>
                     <div class="infoboxnote" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-C23AC892-16F3-49E5-BFAC-E61BA0F46BA0">
                        <p class="notep1">Note:</p>
                        <p>You can use the database recovery area to store archived redo log files on the standby. In such a case, the value of the <code class="codeph">StandbyArchiveLocation</code> or <code class="codeph">ArchiveLocation</code> properties can be set to <code class="codeph">USE_DB_RECOVERY_FILE_DEST</code>.
                        </p>
                        <p>If you are not using a database recovery area, then on a logical standby database Oracle recommends that the <code class="codeph">ArchiveLocation</code> property be different from the value of the <code class="codeph">StandbyArchiveLocation</code> property.
                        </p>
                     </div>
                     <div class="example" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-F6252CA2-4B44-421A-919E-2E96FA68F9D7">
                        <p class="titleinexample">Example 4-6 Using the Same Archiving Location for Standby Redo Log Files and Online Redo Log Files</p>
                        <p>The following example uses the same archiving location for online redo log files and standby redo log files.</p><pre class="pre codeblock"><code>ArchiveLocation='/archfs/arch'</code></pre><p></p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-696EDEBB-0F6E-4A41-94ED-7310C43FD2CD">
                        <p class="titleinexample">Example 4-7 Specifying an Alternate Location for Archived Standby and Online Redo Log Files</p>
                        <p>The following example uses the same archiving location for online redo log files and standby redo log files. Configuring the <code class="codeph">AlternateLocation</code> property ensures that a shared, alternate, location is available to store standby redo log files if the location specified by the <code class="codeph">ArchiveLocation</code> property is unavailable.
                        </p><pre class="pre codeblock"><code>ArchiveLocation='/archfs/arch'
AlternateLocation='/archfs/alt'</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-F0D54779-9EF6-4CC0-A9E6-253C6D7DB756">
                        <p class="titleinexample">Example 4-8 Specifying Separate Archiving Locations for Online and Standby Redo Log Files</p>
                        <p>This example configures separate archiving locations for standby redo log files and online redo log files. Also, alternate archiving locations are configured for the online and standby redo log files by using the <code class="codeph">AlternateLocation</code> and <code class="codeph">StandbyAlternateLocation</code> properties respectively
                        </p><pre class="pre codeblock"><code>ArchiveLocation='/archfs/arch/online'
AlternateLocation='/archfs/alt/online'
StandbyArchiveLocation='/archfs/arch/standby'
StandbyAlternateLocation='/archfs/alt/standby'</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DGBKR195"></a><div class="props_rev_3"><a id="GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641" name="GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641"></a><h4 id="DGBKR-GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641" class="sect4"><span class="enumeration_section">4.4.6 </span>Other Redo Transport Settings
                  </h4>
                  <div>
                     <p>You can use database properties to tune the performance of redo transport services and to set up redo transport services failure policies. </p>
                     <p></p>
                     <p>The properties used are: <code class="codeph">Binding</code>, <code class="codeph">MaxFailure</code>, <code class="codeph">NetTimeout</code>, <code class="codeph">RedoCompression</code>, and <code class="codeph">ReopenSecs</code> <a id="d7524e1656" class="indexterm-anchor"></a><a id="d7524e1660" class="indexterm-anchor"></a><a id="d7524e1664" class="indexterm-anchor"></a>. These properties correspond to attributes on the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641__GUID-23FF658E-E8BE-4B74-895C-AFDD21673A0C">
                        <p class="notep1">See Also:</p>
                        <p><a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration."> Oracle Data Guard Broker Properties</a> for complete information about these database properties
                        </p>
                     </div>
                  </div>
               </div><a id="DGBKR205"></a><div class="props_rev_3"><a id="GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7" name="GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7"></a><h4 id="DGBKR-GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7" class="sect4"><span class="enumeration_section">4.4.7 </span>Redo Transport Services in an Oracle RAC Database Environment
                  </h4>
                  <div>
                     <p>If the primary database is an Oracle RAC database, the broker ensures that redo transport services are set up identically on each of the primary database instances.</p>
                     <p>Each instance has the same remote destinations, and for each remote destination, all instances are set up the same in terms of redo transport service, performance related settings, local archival of the online redo logs, and so on. If an instance has different settings, the broker raises a health check warning on that particular instance</p>
                     <p>Settings relative to redo transport services are saved in the broker configuration file as properties. When you update a redo transport-related property on a standby database, the corresponding change is also made automatically by the broker to the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter on all of the primary database instances. If a new instance comes up on the primary database, the broker sets up redo transport services for the new instance using the redo transport-related properties of all the configuration members currently being managed by the broker. After the new instance is opened for activity, all archived redo log files generated on this instance begin to transmit to members of the configuration. 
                     </p>
                     <div class="infoboxnote" id="GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7__GUID-A08BBE1E-FDC3-40CA-878B-874D64AEE897">
                        <p class="notep1">See also:</p>
                        <p><a href="../sbydb/LOG_ARCHIVE_DEST_n-parameter-attributes.html#SBYDB01100" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for additional information about the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span> initialization parameter
                        </p>
                     </div>
                  </div>
               </div><a id="DGBKR3635"></a><div class="props_rev_3"><a id="GUID-376B5C8C-C922-4AED-A8BB-1E5D362551A6" name="GUID-376B5C8C-C922-4AED-A8BB-1E5D362551A6"></a><h4 id="DGBKR-GUID-376B5C8C-C922-4AED-A8BB-1E5D362551A6" class="sect4"><span class="enumeration_section">4.4.8 </span>Transport Lag
                  </h4>
                  <div>
                     <p>Transport lag is a measure of the degree to which the transport of redo to a standby database or far sync instance lags behind the generation of redo on the primary database.</p>
                     <p>If there are one or more redo gaps on a standby database or far sync instance, then the transport lag is calculated as if no redo has been received after the beginning of the earliest redo gap.</p>
                     <p>Both Cloud Control and the DGMGRL client display the redo transport lag for each managed standby or far sync instance. Cloud Control displays the transport lag on the Oracle Data Guard home page. The DGMGRL client displays the transport lag in the <code class="codeph">SHOW DATABASE</code> output. There is no transport lag displayed for a primary database. For example:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; show database 'South_Sales';
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  <span class="bold">Transport Lag:   0 seconds (computed 0 seconds ago)</span>
  Apply Lag:       0 seconds (computed 0 seconds ago)
  Apply Rate:      255.00 KByte/s
  Real Time Query: OFF
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS
</pre><p></p>
                     <p>Starting with Oracle Database Release 19c, the <code class="codeph">SHOW CONFIGURATION LAG</code> command displays a summary of the broker configuration and the transport lag of all standby databases.
                     </p>
                     <p>The transport lag can help you identify any problems that may exist with the redo transport services.</p>
                     <p>You can set the <code class="codeph">TransportLagThreshold</code> database configurable property to generate a health check warning when the transport of redo data to a standby database or far sync instance lags behind the generation of redo data on the primary database.
                     </p>
                     <p>The following command sets the <code class="codeph">TransportLagThreshold</code> property to 15 seconds:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'TransportLagThreshold'=15;
Property TransportLagThreshold updated
</pre><p>Additionally, you can set the <code class="codeph">TransportDisconnectedThreshold</code> database configurable property to generate a health check warning if a standby or far sync instance finds that it has not had any redo transport-related communication with the primary database. The property has a default value of 30 seconds.
                     </p>
                     <p>The following command sets the <code class="codeph">TransportDisconnectedThreshold</code> property to 15 seconds:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'TransportDisconnectedThreshold'=15;
Property TransportDisconnectedThreshold updated</pre></div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A" name="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A"></a><h3 id="DGBKR-GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A" class="sect3"><span class="enumeration_section">4.5 </span>Managing Redo Transport Services for Recovery Appliance
               </h3>
               <div>
                  <p>Redo transport services for a Zero Data Loss Recovery Appliance (Recovery Appliance) are managed in the same way as for a standby database.</p>
                  <div class="section">
                     <p>You can use the broker to manage redo transport services to a Recovery Appliance from any member in the configuration. For example, to add a Recovery Appliance to a broker configuration and then enable it, you would take the following steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Add the Recovery Appliance to the broker configuration.</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD RECOVERY_APPLIANCE EnterpriseRecoveryAppliance AS CONNECT IDENTIFIER IS
EnterpriseRecoveryAppliance.example.com;
Oracle Recovery Appliance "EnterpriseRecoveryAppliance" added
 
DGMGRL&gt; SHOW RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance';
 Oracle Recovery Server - EnterpriseRecoveryAppliance
   Transport Lag: 0 seconds
  Redo Source: North_Sales
 
Oracle Recovery Appliance Status:
DISABLED
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Enable the Recovery Appliance.</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance';
 
DGMGRL&gt; SHOW RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance';
 Oracle Recovery Server - EnterpriseRecoveryAppliance
   Transport Lag: 0 seconds
  Redo Source: North_Sales
 
Oracle Recovery Appliance Status:
SUCCESS
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Set a transport lag threshold.</span><div>
                           <p>Set the <code class="codeph">TransportLagThreshold</code> database configurable property to generate a health check warning when the transport of redo data to the Recovery Appliance lags behind the generation of redo data on the source database. This step is optional, but if you do not specify a transport lag threshold, then the default value of 0 seconds is used and no warning is generated if a transport lag exists.
                           </p>
                           <p>The following command sets the <code class="codeph">TransportLagThreshold</code> property to 15 seconds:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance'
SET PROPERTY 'TransportLagThreshold'=15;
Property TransportLagThreshold updated
</pre></div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__BABBEGEI">
                     <p class="titleinexample">Example 4-9 Setting Up Redo Transport From a Physical Standby To a Recovery Appliance</p>
                     <p>Consider a configuration that has a primary database (<code class="codeph">North_Sales</code>) a physical standby database (<code class="codeph">South_Sales</code>), and a Recovery Appliance (<code class="codeph">EnterpriseRecoveryAppliance</code>). Instead of the primary having to ship its redo to both the standby and the Recovery Appliance, you can set up the <code class="codeph">RedoRoutes</code> property so that the primary sends redo only to the physical standby, and the physical standby then forwards that redo to the Recovery Appliance. To accomplish this, the <code class="codeph">RedoRoutes</code> property must be set as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>	On the <code class="codeph">North_Sales</code> database, the <code class="codeph">RedoRoutes</code> property must specify that if <code class="codeph">North_Sales</code> is in the primary role, then it should ship redo to the <code class="codeph">South_Sales</code> database using synchronous transport mode. This rule prevents the primary from shipping redo data directly to the Recovery Appliance, <code class="codeph">EnterpriseRecoveryAppliance</code>.
                           </p>
                        </li>
                        <li>
                           <p>	On the <code class="codeph">South_Sales</code> database, the <code class="codeph">RedoRoutes</code> property must specify that if <code class="codeph">North_Sales</code> is in the primary role, then <code class="codeph">South_Sales</code> should forward redo it receives from <code class="codeph">North_Sales</code> on to <code class="codeph">EnterpriseRecoveryAppliance</code>.
                           </p>
                        </li>
                     </ul><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'RedoRoutes' = '(LOCAL : South_Sales SYNC)';
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'RedoRoutes' = '(North_Sales : EnterpriseRecoveryAppliance ASYNC)';
</pre><p>Note that the <code class="codeph">ASYNC</code> redo transport attribute was explicitly specified in the redo route rule for the <code class="codeph">EnterpriseRecoveryAppliance</code> destination to enable real-time cascading of redo to that destination.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>Once a Recovery Appliance has been added to a broker configuration, it can receive redo from either the primary database or a standby database. <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__BABBEGEI">Example 4-9</a> shows how to set up a Recovery Appliance to receive redo from a physical standby database.
                     </p>
                     <div class="infoboxnotealso" id="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__GUID-05A1FCB1-557C-46DD-8289-9BA1E94ACD26">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="To manage redo transport services, you specify configurable properties on each configuration member.">Managing Redo Transport Services</a> for information about managing redo transport services
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR210"></a><div class="props_rev_3"><a id="GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" name="GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255"></a><h3 id="DGBKR-GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" class="sect3"><span class="enumeration_section">4.6 </span>Managing Log Apply Services
               </h3>
               <div>
                  <p>You can manage Redo Apply and SQL Apply on physical and logical standby databases by using database properties related to log apply.</p>
                  <p>The database properties related to log apply are as follows: <a id="d7524e1973" class="indexterm-anchor"></a><a id="d7524e1977" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Properties common to Redo Apply and SQL Apply</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ApplyInstanceTimeout</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DelayMins</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PreferredApplyInstance</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Properties specific to Redo Apply</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ApplyParallel</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ApplyInstances</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Properties specific to SQL Apply</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">LsbyMaxEventsRecorded</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyPreserveCommitOrder</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyRecordSkipErrors</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyRecordSkipDdl</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyRecordAppliedDdl</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyMaxSga</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyMaxServers</code></p>
                           </li>
                        </ul>
                        <p>There are some properties related to SQL Apply that, if changed, may require a restart of SQL Apply if the current database state is <code class="codeph">APPLY-ON</code>. See the information in <a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration."> Oracle Data Guard Broker Properties</a> about properties related to SQL Apply, to determine which ones require SQL Apply to be restarted.
                        </p>
                        <p>If the current database state is <code class="codeph">APPLY-OFF</code>, the property changes will take effect the next time the database state is changed to <code class="codeph">APPLY-ON</code>.
                        </p>
                     </li>
                  </ul>
               </div><a id="DGBKR220"></a><div class="props_rev_3"><a id="GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A" name="GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A"></a><h4 id="DGBKR-GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A" class="sect4"><span class="enumeration_section">4.6.1 </span>Managing Delayed Apply
                  </h4>
                  <div>
                     <p>You can set up Apply Services so that the application of redo to the standby database is delayed.</p>
                     <p>This allows the standby database to lag behind the primary database, and if a user error (for example, dropping a table) occurs during this window of time, the standby database will still contain the correct data that can be transmitted back to the primary database to repair the data. </p>
                     <p>By default, no delay is configured and the redo data is applied on a standby database as soon as possible. If the standby database has standby redo logs configured, the broker will enable real-time apply. When Redo Apply and SQL Apply apply redo in real time, the redo data is recovered directly from the standby redo log files as they are being filled. This means that the standby database does not have to wait for the log files to be archived before applying redo data from the archived redo log files. This minimizes the transactional lag between the primary and the standby.</p>
                     <p>Use the <code class="codeph">DelayMins</code> database property to specify the number of minutes that log apply services must wait before applying redo data to the standby database. Note that only log apply services on the standby database are delayed. Redo transport services on the primary database are not delayed, thus the primary database data is still well protected by the standby database.
                     </p>
                     <div class="infoboxnote" id="GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A__GUID-81AD90CB-4BBA-476B-964D-0A032A2AC5FA">
                        <p class="notep1">Caution:</p>
                        <p>Because the broker automatically enables real-time apply on standby databases, Oracle recommends that you configure all databases to use Flashback Database.</p>
                     </div>
                  </div>
               </div><a id="DGBKR225"></a><div class="props_rev_3"><a id="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D" name="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D"></a><h4 id="DGBKR-GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D" class="sect4"><span class="enumeration_section">4.6.2 </span>Managing Parallel Apply with Redo Apply
                  </h4>
                  <div>
                     <p>For Redo Apply, you can configure whether multiple parallel processes are used to apply redo data received from the primary database by using the <code class="codeph">ApplyParallel</code> database property.
                     </p>
                     <p> Parallelism is enabled by default, which means Redo Apply automatically chooses the optimal number of parallel processes based on the number of CPUs in the system. (This is equivalent to setting the <code class="codeph">ApplyParallel</code> property to <code class="codeph">AUTO</code>.) You can disable parallelism by setting the <code class="codeph">ApplyParallel</code> property to <code class="codeph">NO</code>.  
                     </p>
                     <div class="infoboxnote" id="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D__GUID-C871854B-35E6-48D2-9B6C-9F13B8E2C49C">
                        <p class="notep1">Note:</p>Parallel Redo Apply is different from multi-instance Redo Apply. Parallel Redo Apply means that there are multiple Redo Apply slaves per instance; this value is set using the broker <code class="codeph">ApplyParallel</code> property. Multi-instance Redo Apply means that there are multiple instances running Redo Apply; this value is set with the broker <code class="codeph">ApplyInstances</code> property. The two properties can be used together to control the Redo Apply slaves on each instance on which apply is running in multi-instance apply. The number of parallel slaves specified by the <code class="codeph">ApplyParallel</code> property will be the same on each instance in a multi-instance apply configuration.
                     </div>
                     <div class="infoboxnotealso" id="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D__GUID-B9C95C91-63C6-468E-BB37-ECE28183348E">
                        <p class="notep1">See Also:</p>
                        <p><a href="oracle-data-guard-broker-properties.html#GUID-1E8E8B1D-A138-4B31-8F8C-C5E4CC4F2E8C" title="The ApplyParallel configurable property specifies whether Redo Apply should use multiple processes to apply redo data to the physical standby database.">ApplyParallel</a></p>
                        <p><a href="oracle-data-guard-broker-properties.html#GUID-E887A076-74A1-4970-8ED9-EF643D60DB0D" title="The ApplyInstances property lets you specify how many physical standby instances run Redo Apply.">ApplyInstances</a></p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A0CC5489-FD5D-4B08-BD95-0319A1E958EA" name="GUID-A0CC5489-FD5D-4B08-BD95-0319A1E958EA"></a><h4 id="DGBKR-GUID-A0CC5489-FD5D-4B08-BD95-0319A1E958EA" class="sect4"><span class="enumeration_section">4.6.3 </span>Managing Multi-Instance Redo Apply
                  </h4>
                  <div>
                     <p>For Redo Apply in an Oracle RAC database, you can configure the number of instances that can be engaged in recovery by means of the <code class="codeph">ApplyInstances</code> property value.
                     </p>
                     <p>By default, only one instance is involved in recovery activity. However, the <code class="codeph">ApplyInstances</code> property can be set to indicate a specific number of instances or the value <code class="codeph">ALL</code>, to indicate all instances. When recovery is started, it checks to see if enough instances as configured are available to start recovery on. If not, then broker delays starting recovery for one minute to allow other instances to start up and then starts recovery. 
                     </p>
                     <p>During periodic health checks, broker checks to see if more instances have started that could potentially be engaged in recovery. If so, then broker stops and restarts recovery to engage the additional instances. </p>
                     <p> Changing the value of the <code class="codeph">ApplyInstances</code> property value results in recovery being restarted with the new values.
                     </p>
                     <p>All instances must be in the same state (open or mounted) to be able to engage that instance in recovery.</p>
                  </div>
               </div><a id="DGBKR250"></a><div class="props_rev_3"><a id="GUID-AD180341-C7FD-4965-8826-E32372F10F27" name="GUID-AD180341-C7FD-4965-8826-E32372F10F27"></a><h4 id="DGBKR-GUID-AD180341-C7FD-4965-8826-E32372F10F27" class="sect4"><span class="enumeration_section">4.6.4 </span>Apply Services in an Oracle RAC Database Environment
                  </h4>
                  <div>
                     <p>When a standby database is an Oracle RAC database, SQL Apply and Redo Apply make use of an apply instance.  </p>
                     <p>SQL Apply can run on only one instance of an Oracle RAC database at any time. This instance is called the apply instance. </p>
                     <p>Redo Apply can run on all instances of an Oracle RAC database at the same time, but only one of the instances is the apply coordinator and that is the instance that the broker considers to be the apply instance. This feature requires that the <code class="codeph">ApplyInstances</code> database configurable property (valid only on physical standby databases) be set to a non-zero value. See <a href="oracle-data-guard-broker-properties.html#GUID-E887A076-74A1-4970-8ED9-EF643D60DB0D" title="The ApplyInstances property lets you specify how many physical standby instances run Redo Apply.">ApplyInstances</a>.
                     </p>
                     <p>If the apply instance fails, then the broker automatically restarts SQL Apply, or the Redo Apply coordinator, as appropriate, on a different instance. This is called apply instance failover (see <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7" title="To tolerate a failure of the apply instance, the broker leverages the availability of the Oracle RAC standby database by automatically failing over log apply services to a different standby instance.">Apply Instance Failover</a>).
                     </p>
                  </div><a id="DGBKR255"></a><div class="props_rev_3"><a id="GUID-F46F089F-F256-426B-B84A-4E1D25A469C7" name="GUID-F46F089F-F256-426B-B84A-4E1D25A469C7"></a><h5 id="DGBKR-GUID-F46F089F-F256-426B-B84A-4E1D25A469C7" class="sect5"><span class="enumeration_section">4.6.4.1 </span>Selecting the Apply Instance
                     </h5>
                     <div>
                        <p>If you have no preference which instance is to be the apply instance in an Oracle RAC standby database, the broker randomly picks an apply instance. If you want to select a particular instance as the apply instance, there are two methods to do so.</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-F46F089F-F256-426B-B84A-4E1D25A469C7__GUID-B08199AA-E64E-422B-962F-B3C835B500E0">
                              <p class="notep1">Note:</p>
                              <p>The information in this section is not applicable to snapshot standby databases or far sync instances.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The first method is to set the value of the <code class="codeph">PreferredApplyInstance</code> database property to the name of the instance (see the <code class="codeph">InstanceName</code> property) you want to be the apply instance. The broker starts log apply services on that instance if no apply instance is yet selected in the Oracle RAC standby database. This could be the case before you enable the standby database for the first time, or if the apply instance just failed and the broker is about to do an apply instance failover, or if the Oracle RAC database is currently the primary and you want to specify its apply instance in preparation for a switchover. Once the apply instance is selected and, as long as the apply instance is still running, the broker disregards the value of the <code class="codeph">PreferredApplyInstance</code> property even if you change it.
                                 </p>
                              </li>
                              <li>
                                 <p>The second method is to change the apply instance when the apply instance is already selected and is running. To change the apply instance, issue the DGMGRL <code class="codeph">SET STATE</code> command to set the standby database state to <code class="codeph">APPLY-ON</code>, with a specific apply instance argument. The <code class="codeph">SET STATE</code> command will update the <code class="codeph">PreferredApplyInstance</code> property to the new apply instance value, and then move log apply services to the new instance. For example, use DGMGRL <code class="codeph">SHOW</code> command to show the available instances for the standby database, then issue the <code class="codeph">EDIT DATABASE</code> command to move log apply services to the new instance:
                                 </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'South_Sales'
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds (computed 1 second ago)
  Apply Lag:       0 seconds (computed 1 second ago)
  Apply Rate:      1017.00 KByte/s
  Real Time Query: OFF
  Instance(s):
    south_sales1   (apply instance)
    south_sales2
 
Database Status:
SUCCESS
</pre><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET STATE='APPLY-ON' WITH APPLY INSTANCE='south_sales2';
Succeeded.

DGMGRL&gt; SHOW DATABASE 'South_Sales' 'PreferredApplyInstance';
  PreferredApplyInstance = 'south_sales2'
</pre><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'South_Sales'
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds (computed 1 second ago)
  Apply Lag:       0 seconds (computed 1 second ago)
  Apply Rate:      1017.00 KByte/s
  Real Time Query: OFF
  Instance(s):
    south_sales1
    south_sales2   (apply instance)
 
Database Status:
SUCCESS
</pre></li>
                           </ul>
                           <p>Ensure that the new apply instance is running when the command is issued. Otherwise, the apply instance remains the same.</p>
                           <p>Once the apply instance is selected, the broker keeps apply instance information in the broker configuration file so that even if the standby database is shut down and restarted, the broker still selects the same instance to start log apply services. The apply instance remains unchanged until changed by the user or it fails for any reason and the broker decides to do an apply instance failover.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR260"></a><div class="props_rev_3"><a id="GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7" name="GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7"></a><h5 id="DGBKR-GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7" class="sect5"><span class="enumeration_section">4.6.4.2 </span>Apply Instance Failover
                     </h5>
                     <div>
                        <p>To tolerate a failure of the apply instance, the broker leverages the availability of the Oracle RAC standby database by automatically failing over log apply services to a different standby instance. </p>
                        <p>The apply instance failover capability provided by the broker enhances data protection.</p>
                        <p>To set up apply instance failover, set the <code class="codeph">ApplyInstanceTimeout</code> database property to specify the time period that the broker will wait after detecting an apply instance failure and before initiating an apply instance failover. To select an appropriate timeout value, you need to consider:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If there is another mechanism in the cluster (such as Oracle Clusterware) that will try to recover the failed apply instance.</p>
                           </li>
                           <li>
                              <p>How long your business can tolerate not applying redo data on the standby database.</p>
                           </li>
                           <li>
                              <p>The overhead associated with moving the log apply services to a different instance. The overhead may include retransmitting, from the primary database, all log files accumulated on the failed apply instance that have not been applied if those log files are not saved in a shared file system that can be accessed from other standby instances.</p>
                           </li>
                        </ul>
                        <p>The broker default value of the <code class="codeph">ApplyInstanceTimeout</code> property is 0 seconds, indicating that apply instance failover should occur immediately upon detection of the failure of the current apply instance.
                        </p>
                        <p>After the broker initiates an apply instance failover, the broker selects a new apply instance according to the following rule: if the <code class="codeph">PreferredApplyInstance</code> property indicates an instance that is currently running, select it as the new apply instance; otherwise pick a random instance that is currently running to be the new apply instance.
                        </p>
                        <p>In addition, if the physical standby database was operating in real-time query mode when the apply instance failed, then after Oracle recovery cleanup is completed, the broker opens any instances that had been automatically closed. If the failed apply instance was the only instance open, then the instance chosen as the new apply instance is opened before starting apply services so that real-time query is once again in effect.</p>
                        <div class="infoboxnotealso" id="GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7__GUID-E9311EAE-B8B3-415C-9C10-AE1F3EF46DD6">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00707" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about real-time query mode
                                 </p>
                              </li>
                              <li>
                                 <p>The My Oracle Support note 1357597.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for additional information about apply instance failures in an Oracle Active Data Guard Oracle RAC standby
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="DGBKR3636"></a><div class="props_rev_3"><a id="GUID-EBA4925E-4580-4D06-9355-20DF777E5DCA" name="GUID-EBA4925E-4580-4D06-9355-20DF777E5DCA"></a><h4 id="DGBKR-GUID-EBA4925E-4580-4D06-9355-20DF777E5DCA" class="sect4"><span class="enumeration_section">4.6.5 </span>Apply Lag
                  </h4>
                  <div>
                     <p>Apply lag is a measure of the degree to which the data in a standby database or far sync instance lags behind the data in the primary database, due to delays in propagating and applying the redo.</p>
                     <p>Both Cloud Control and the DGMGRL client display the apply lag for each managed standby database and far sync instance. Cloud Control displays the apply lag on the Oracle Data Guard home page. The DGMGRL client displays the apply lag in the <code class="codeph">SHOW DATABASE</code> output. There is no apply lag displayed for a primary database. For example:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'South_Sales';
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds (computed 0 seconds ago)
  <span class="bold">Apply Lag:       0 seconds (computed 0 seconds ago)</span>
  Apply Rate:      255.00 KByte/s
  Real Time Query: OFF
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS
</pre><p></p>
                     <p>Starting with Oracle Database Release 19c, the <code class="codeph">SHOW CONFIGURATION LAG</code> command displays a summary of the broker configuration and the apply lag of all standby databases.
                     </p>
                     <p>The apply lag can help you identify any problems that may exist with both the redo transport services and the log apply services.</p>
                     <p>You can set the <code class="codeph">ApplyLagThreshold</code> database configurable property to generate a health check warning when a standby database or far sync instance lags behind the data in the primary database.
                     </p>
                     <p>The following command sets the <code class="codeph">ApplyLagThreshold</code> property to 15 seconds:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'ApplyLagThreshold'=15;
Property ApplyLagThreshold updated</pre></div>
               </div>
            </div><a id="DGBKR265"></a><div class="props_rev_3"><a id="GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" name="GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8"></a><h3 id="DGBKR-GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" class="sect3"><span class="enumeration_section">4.7 </span>Managing Data Protection Modes
               </h3>
               <div>
                  <p>You can use the broker to set up a configuration having any of the different data protection modes.</p>
                  <p>The available modes of data protection are: maximum protection, maximum availability, and maximum performance. <a id="d7524e2564" class="indexterm-anchor"></a></p>
                  <p>This section contains the following topics to help you configure the proper protection for your configuration:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-A938EA13-B128-4D54-8A99-6871D93F01CE" title="These are the steps for setting the protection mode for your configuration.">Setting the Protection Mode for Your Configuration</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" title="These topics describe how an Oracle Data Guard configuration's protection mode and redo transport services can affect operations such as switchovers, failovers, and disabling or enabling the configuration.">How the Protection Modes Influence Broker Operations</a></p>
                     </li>
                  </ul>
               </div><a id="DGBKR270"></a><div class="props_rev_3"><a id="GUID-A938EA13-B128-4D54-8A99-6871D93F01CE" name="GUID-A938EA13-B128-4D54-8A99-6871D93F01CE"></a><h4 id="DGBKR-GUID-A938EA13-B128-4D54-8A99-6871D93F01CE" class="sect4"><span class="enumeration_section">4.7.1 </span>Setting the Protection Mode for Your Configuration
                  </h4>
                  <div>
                     <p>These are the steps for setting the protection mode for your configuration.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0" title="Each data protection mode provides a different balance of data protection, data availability, and database performance.">Setting the Protection Mode Task 1: Determine Which Data Protection Mode You Want to Use</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C" title="You must add standby redo log files on all standby databases, regardless of the protection mode you are using.">Setting the Protection Mode Task 2: Set up standby redo log files</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1" title="If the data protection mode requires that you change the redo transport mode used by any of the standby databases, then either change the LogXptMode database property on each standby database, or set the RedoRoutes property on the primary database or on the far sync instance that is directly connected to the standby database.">Setting the Protection Mode Task 3: Set the redo transport mode</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11" title="These steps describe how to set the protection mode using DGMGRL commands or Cloud Control.">Setting the Protection Mode Task 4: Using DGMGRL or Cloud Control</a></p>
                        </li>
                     </ul>
                  </div><a id="DGBKR285"></a><a id="DGBKR275"></a><a id="DGBKR280"></a><div class="props_rev_3"><a id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0" name="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0"></a><h5 id="DGBKR-GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0" class="sect5"><span class="enumeration_section">4.7.1.1 </span>Setting the Protection Mode Task 1: Determine Which Data Protection Mode You Want to Use
                     </h5>
                     <div>
                        <p>Each data protection mode provides a different balance of data protection, data availability, and database performance.</p>
                        <div class="section">
                           <p>To select the data protection mode that meets the needs of your business, carefully consider your data protection requirements and the performance expectations of your users.</p>
                           <div class="infoboxnote" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-B662D377-B93C-434D-800A-64C87339217F">
                              <p class="notep1">Note:</p>
                              <p>Maximum protection mode cannot be used in the following situations:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the only standby database in a configuration is a snapshot standby</p>
                                 </li>
                                 <li>
                                    <p>If a far sync instance is the only configuration member receiving redo in synchronous mode from the primary database</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-8056395E-0703-44F1-B25C-0B7FD0121F50">Maximum Availability</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This protection mode provides the highest level of data protection that is possible without compromising the availability of a primary database. Transactions do not commit until all redo data needed to recover those transactions has been written to the online redo log and to the standby redo log on at least one synchronized standby database. If the primary database cannot write its redo stream to at least one synchronized standby database, it operates as if it were in maximum performance mode to preserve primary database availability until it is again able to write its redo stream to a synchronized standby database.</p>
                           <p>This mode ensures that no data loss will occur if the primary database fails, but only if a second fault does not prevent a complete set of redo data from being sent from the primary database to at least one standby database.</p>
                           <p>You can enable fast-start failover if the protection mode is maximum availability.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-53935982-E64E-49C1-8A31-455907C281A2">Maximum Performance</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This protection mode provides the highest level of data protection that is possible without affecting the performance of a primary database. This is accomplished by allowing transactions to commit as soon as all redo data generated by those transactions has been written to the online log. Redo data is also written to one or more standby databases, but this is done asynchronously with respect to transaction commitment, so primary database performance is unaffected by delays in writing redo data to the standby database(s).</p>
                           <p>This protection mode offers slightly less data protection than maximum availability mode and has minimal impact on primary database performance.</p>
                           <p>This is the default protection mode.</p>
                           <p>You can enable fast-start failover if the protection mode is maximum performance.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-0329DF7B-6FE4-436F-9950-EF8D520DD220">Maximum Protection</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This protection mode ensures that no data loss will occur if the primary database fails. To provide this level of protection, the redo data needed to recover a transaction must be written to both the online redo log and to the standby redo log on at least one synchronized standby database before the transaction commits. To ensure that data loss cannot occur, the primary database will shut down, rather than continue processing transactions, if it cannot write its redo stream to at least one synchronized standby database.</p>
                           <p>Transactions on the primary are considered protected as soon as Oracle Data Guard has written the redo data to persistent storage in a standby redo log file. Once that is done, acknowledgment is quickly made back to the primary database so that it can proceed to the next transaction. This minimizes the impact of synchronous transport on primary database throughput and response time. To fully benefit from complete Oracle Data Guard validation at the standby database, be sure to operate in real-time apply mode so that redo changes are applied to the standby database as fast as they are received. Oracle Data Guard signals any corruptions that are detected so that immediate corrective action can be taken.</p>
                           <p>Because this data protection mode prioritizes data protection over primary database availability, Oracle recommends that a minimum of two standby databases be used to protect a primary database that runs in maximum protection mode to prevent a single standby database failure from causing the primary database to shut down. If only one standby database is supporting maximum protection mode, Oracle Data Guard broker will disallow the shutdown of the apply instance. This prevents the primary database from shutting down.</p>
                           <p>You can enable fast-start failover if the protection mode is maximum protection.</p>
                           <div class="infoboxnotealso" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-12697183-7CB5-4BE9-8FAE-554C8AEB65F2">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-995CED84-BEA1-4675-9C68-B37CB996924F" title="Fast-start failover allows the broker to automatically fail over to a previously chosen standby database in the event of loss of the primary database.">Fast-Start Failover</a> for information on fast-start failover
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../sbydb/introduction-to-oracle-data-guard-concepts.html#SBYDB00439" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for complete information about data protection modes
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C" name="GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C"></a><h5 id="DGBKR-GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C" class="sect5"><span class="enumeration_section">4.7.1.2 </span>Setting the Protection Mode Task 2: Set up standby redo log files
                     </h5>
                     <div>
                        <p>You must add standby redo log files on all standby databases, regardless of the protection mode you are using. </p>
                        <div class="section">
                           <p>Also, Oracle requires that you add standby redo log files on the primary database in preparation for a future switchover or failover. Standby redo log files are required on the primary database if you want to enable fast-start failover.</p>
                           <p>Cloud Control automatically prompts you to select one or more standby databases in the configuration and sets up standby redo log (SRL) files on them and on the primary database in preparation for a future role change.</p>
                           <div class="infoboxnotealso" id="GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C__GUID-422521AE-E2DB-41EA-BCDE-F802A32AC619">
                              <p class="notep1">See Also:</p>
                              <p>If you are using the <a id="d7524e2794" class="indexterm-anchor"></a><a id="d7524e2798" class="indexterm-anchor"></a>DGMGRL command-line interface, follow the instructions in <a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00426" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to configure standby redo log files.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR3540"></a><div class="props_rev_3"><a id="GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1" name="GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1"></a><h5 id="DGBKR-GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1" class="sect5"><span class="enumeration_section">4.7.1.3 </span>Setting the Protection Mode Task 3: Set the redo transport mode
                     </h5>
                     <div>
                        <p>If the data protection mode requires that you change the redo transport mode used by any of the standby databases, then either change the <code class="codeph">LogXptMode</code> database property on each standby database, or set the <code class="codeph">RedoRoutes</code> property on the primary database or on the far sync instance that is directly connected to the standby database.
                        </p>
                        <div class="section">
                           <p> See <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="To manage redo transport services, you specify configurable properties on each configuration member.">Managing Redo Transport Services</a> for more information about setting the redo transport service. <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1__G1046794" title="The is a 4 column table showing the protection mode and the corresponding log transport mode and SQL statement. Column 1 is the protection mode. Column 2 is the Redo Transport. Column 3 shows if standby redo log files are needed. Column 4 indicates if the mode is usable with Fast-Start Failover.">Table 4-2</a> shows the protection modes and the corresponding redo transport service.
                           </p>
                           <p>Cloud Control automatically specifies the correct redo transport service on the primary database in preparation for a future switchover.</p>
                           <div class="tblformal" id="GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1__G1046794">
                              <p class="titleintable">Table 4-2 Oracle Data Guard Protection Modes and Requirements</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle Data Guard Protection Modes and Requirements" summary="The is a 4 column table showing the protection mode and the corresponding log transport mode and SQL statement. Column 1 is the protection mode. Column 2 is the Redo Transport. Column 3 shows if standby redo log files are needed. Column 4 indicates if the mode is usable with Fast-Start Failover." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="26%" id="d7524e2865">Protection Mode</th>
                                       <th align="left" valign="bottom" width="21%" id="d7524e2868">Redo Transport</th>
                                       <th align="left" valign="bottom" width="24%" id="d7524e2871">Standby Redo Log Files Needed?</th>
                                       <th align="left" valign="bottom" width="29%" id="d7524e2874">Usable with Fast-Start Failover?</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d7524e2879" headers="d7524e2865 ">
                                          <p><code class="codeph">MAXPROTECTION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="21%" headers="d7524e2879 d7524e2868 ">
                                          <p><code class="codeph">SYNC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="24%" headers="d7524e2879 d7524e2871 ">
                                          <p>Yes</p>
                                       </td>
                                       <td align="left" valign="top" width="29%" headers="d7524e2879 d7524e2874 ">
                                          <p>Yes</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d7524e2894" headers="d7524e2865 ">
                                          <p><code class="codeph">MAXAVAILABILITY</code></p>
                                       </td>
                                       <td align="left" valign="top" width="21%" headers="d7524e2894 d7524e2868 ">
                                          <p><code class="codeph">SYNC</code>, <code class="codeph">FASTSYNC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="24%" headers="d7524e2894 d7524e2871 ">
                                          <p>Yes</p>
                                       </td>
                                       <td align="left" valign="top" width="29%" headers="d7524e2894 d7524e2874 ">
                                          <p>Yes<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "Because FASTSYNC transport mode uses the NOAFFIRM attribute of the LOG_ARCHIVE_DEST_n parameter, data loss is possible. This means that a fast-start failover cannot be initiated when FASTSYNC is used and the standby is missing redo data.")"><sup>Foot&nbsp;1</sup></a></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d7524e2927" headers="d7524e2865 ">
                                          <p><code class="codeph">MAXPERFORMANCE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="21%" headers="d7524e2927 d7524e2868 ">
                                          <p><code class="codeph">ASYNC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="24%" headers="d7524e2927 d7524e2871 ">
                                          <p>Yes</p>
                                       </td>
                                       <td align="left" valign="top" width="29%" headers="d7524e2927 d7524e2874 ">
                                          <p>Yes</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>Because <code class="codeph">FASTSYNC</code> transport mode uses the <code class="codeph">NOAFFIRM</code> attribute of the <code class="codeph">LOG_ARCHIVE_DEST_n</code> parameter, data loss is possible. This means that a fast-start failover cannot be initiated when <code class="codeph">FASTSYNC</code> is used and the standby is missing redo data.
                              </p>
                           <p></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11" name="GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11"></a><h5 id="DGBKR-GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11" class="sect5"><span class="enumeration_section">4.7.1.4 </span>Setting the Protection Mode Task 4: Using DGMGRL or Cloud Control
                     </h5>
                     <div>
                        <p>These steps describe how to set the protection mode using DGMGRL commands or Cloud Control. </p>
                        <div class="section">
                           <p><span class="bold">With DGMGRL:</span></p>
                           <ol>
                              <li>
                                 <p>Use the <code class="codeph">EDIT DATABASE (property)</code> command and specify the standby database whose redo transport service should be changed to correspond to the protection mode you plan to set. For example, if you plan to set the overall Oracle Data Guard configuration to operate in maximum availability mode, you must use the <code class="codeph">EDIT DATABASE</code> command to set the <code class="codeph">SYNC</code> mode for redo transport services. For example:
                                 </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY LogXptMode='SYNC';
</pre><p>Do this also for the primary database or another standby database in the configuration to ensure that it can support the chosen protection mode after a switchover.</p>
                                 <p>You could also use the <code class="codeph">RedoRoutes</code> property, as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">EDIT DATABASE 'North_Sales' SET PROPERTY RedoRoutes = '(LOCAL : South_Sales SYNC)';
</pre></li>
                              <li>
                                 <p>Use the <code class="codeph">EDIT CONFIGURATION SET PROTECTION MODE AS </code><span class="italic"><code class="codeph">protection-mode</code></span> command to set the overall configuration protection mode. For example:
                                 </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MAXAVAILABILITY;
</pre></li>
                           </ol>
                           <p>See <a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-82319941-58E8-4672-8609-7CC496D3DC29" title="You can change the protection mode of the configuration at any time.">Scenario 4: Setting the Configuration Protection Mode</a> for a DGMGRL scenario showing how to set the protection mode.
                           </p>
                           <p><span class="bold">With Cloud Control:</span></p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>On the Oracle Data Guard overview page, click the link to the right of the Protection Mode label.</span></li>
                           <li><span>Select Maximum Protection, Maximum Availability, or Maximum Performance and click Continue.</span></li>
                           <li><span>If prompted, log in to the database with <code class="codeph">SYSDG</code> or <code class="codeph">SYSDBA</code> privileges and click Login.</span></li>
                           <li><span>Select one or more standby databases to support the protection mode that you selected. If standby redo log files are needed, verify the names of the log files. Click OK.</span></li>
                           <li><span>On the Confirmation page, click Yes.</span></li>
                        </ol>
                        <div class="section">
                           <p>The broker does not allow the protection mode to be directly upgraded from maximum performance mode to maximum protection mode. You must first change from maximum performance to maximum availability, and then to maximum protection. </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DGBKR290"></a><div class="props_rev_3"><a id="GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" name="GUID-4F9446D8-AB6E-4917-BED2-058126654DA0"></a><h4 id="DGBKR-GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" class="sect4"><span class="enumeration_section">4.7.2 </span>How the Protection Modes Influence Broker Operations
                  </h4>
                  <div>
                     <p>These topics describe how an Oracle Data Guard configuration's protection mode and redo transport services can affect operations such as switchovers, failovers, and disabling or enabling the configuration. </p>
                     <p>This section This section contains the following sections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-37E01064-2FD0-4206-B737-37D28066E722">Upgrading or Downgrading the Current Protection Mode</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C">Switchover Operations</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A">Failover Operations</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C">Disable and Enable Operations</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A">Requirements For Removing a Database from the Configuration</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638">Requirements On Other Operations</a></p>
                        </li>
                     </ul>
                  </div><a id="DGBKR295"></a><div class="props_rev_3"><a id="GUID-37E01064-2FD0-4206-B737-37D28066E722" name="GUID-37E01064-2FD0-4206-B737-37D28066E722"></a><h5 id="DGBKR-GUID-37E01064-2FD0-4206-B737-37D28066E722" class="sect5"><span class="enumeration_section">4.7.2.1 </span>Upgrading or Downgrading the Current Protection Mode
                     </h5>
                     <div>
                        <p>No restart is necessary when you upgrade the current Oracle Data Guard protection mode to maximum availability or when you downgrade the current Oracle Data Guard protection mode. Follow these recommendations when upgrading or downgrading the Oracle Data Guard protection mode:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When up<a id="d7524e3126" class="indexterm-anchor"></a><a id="d7524e3130" class="indexterm-anchor"></a>grading the protection mode, upgrade the redo transport service before you upgrade the overall protection mode. At the time when you change the protection mode or reset the redo transport service of a standby database, the broker verifies that there is at least one standby database in the configuration that can support the desired grade of protection. If not, then the broker does not change the protection mode and returns an error.
                              </p>
                           </li>
                           <li>
                              <p>When <a id="d7524e3138" class="indexterm-anchor"></a>downgrading the protection mode, <a id="d7524e3145" class="indexterm-anchor"></a><a id="d7524e3149" class="indexterm-anchor"></a>downgrade the protection mode first and then change the redo transport service (if necessary). The broker will disallow a change of the redo transport service if doing so invalidates the current overall protection mode.
                              </p>
                           </li>
                        </ul>
                        <p>If you upgrade the protection mode from the maximum performance mode, the broker ensures that there is at least one standby database that receives redo via the <code class="codeph">SYNC</code> transport, either directly or through a far sync instance. Additionally, for upgrades to maximum protection mode, the broker ensures there are no gaps in the redo data on the standby database. If there are no standby databases in the configuration that meet these requirements, the request to upgrade the protection mode is rejected with an error.
                        </p>
                        <p>The protection mode cannot be changed if fast-start failover is enabled. An exception to this is that a downgrade to maximum availability mode is allowed when fast-start failover has been enabled in maximum protection mode. </p>
                     </div>
                  </div><a id="DGBKR300"></a><div class="props_rev_3"><a id="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C" name="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C"></a><h5 id="DGBKR-GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C" class="sect5"><span class="enumeration_section">4.7.2.2 </span>Switchover Operations
                     </h5>
                     <div>
                        <p>A switchover <a id="d7524e3184" class="indexterm-anchor"></a>does not change the overall Oracle Data Guard protection mode. The protection mode remains the same as it was before the switchover.
                        </p>
                        <p>This requires that there be a standby database that is properly configured to support the current protection mode once the switchover completes. This can be either another standby database in the configuration or the current primary database that will become a standby database after the switchover completes.</p>
                        <p>Before you perform a switchover, if necessary you can add standby redo log files and set the redo transport properties on the current primary database, or on another standby database in the configuration, to the transport mode that is required to support the Oracle Data Guard protection mode. Then, when the switchover begins:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The broker verifies the presence of standby redo log files and the redo transport service setting on each standby database and on the current primary database.</p>
                           </li>
                           <li>
                              <p>The broker verifies there are no gaps in the redo data present on the target standby database.</p>
                           </li>
                        </ul>
                        <p>If the verification is successful, the switchover continues; otherwise, the switchover fails, and the database roles and the broker configuration files remain unchanged.</p>
                        <div class="infoboxnotewarn" id="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C__GUID-F67990C2-A622-4064-BBD5-5A4D9956A999">
                           <p class="notep1">WARNING:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If the target of the switchover is a physical standby database, then the broker shuts down and restarts the primary database.</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C__GUID-25CA688E-58E9-4D75-BD20-368388A7D09F">
                           <p class="notep1">See Also:</p>
                           <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-AC6A6D2B-1112-422B-8A41-02FAC40E2078" title="A switchover is a role reversal between the primary database and one of its standby databases.">Switchover</a> for more information about switchovers
                           </p>
                        </div>
                     </div>
                  </div><a id="DGBKR305"></a><div class="props_rev_3"><a id="GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A" name="GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A"></a><h5 id="DGBKR-GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A" class="sect5"><span class="enumeration_section">4.7.2.3 </span>Failover Operations
                     </h5>
                     <div>
                        <p>After you perform a manual <a id="d7524e3241" class="indexterm-anchor"></a><a id="d7524e3247" class="indexterm-anchor"></a><a id="d7524e3251" class="indexterm-anchor"></a>failover, the Oracle Data Guard protection mode is downgraded to maximum performance mode if the protection mode was at maximum protection. You can upgrade the protection mode later, if necessary. If the protection mode was at maximum availability or maximum performance, it remains unchanged. The redo transport services of the standby databases remain unchanged.
                        </p>
                        <p>If fast-start failover occurs, the broker preserves the protection mode that was in effect just prior to the fast-start failover. If the protection mode was maximum protection, then the configuration protection mode is preserved, but the new primary database is set to maximum availability to allow the instance to open. When a standby becomes available that supports maximum protection mode (either because the old primary database was reinstated or due to the presence of another standby in the configuration), the database protection mode is elevated to match the configuration protection mode of maximum protection.</p>
                        <div class="infoboxnotealso" id="GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A__GUID-0757800D-4C2F-433F-A795-82B6850B6A34">
                           <p class="notep1">See Also:</p>
                           <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-9A988501-7E18-4A62-8CD6-4BDDFA355C98" title="In a manual failover, you convert a standby database to a primary database because the original primary database failed and there is no possibility of recovering the primary database in a timely manner.">Manual Failover</a> and <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-995CED84-BEA1-4675-9C68-B37CB996924F" title="Fast-start failover allows the broker to automatically fail over to a previously chosen standby database in the event of loss of the primary database.">Fast-Start Failover</a> for more information about manual failover and fast-start failover, respectively
                           </p>
                        </div>
                     </div>
                  </div><a id="DGBKR310"></a><div class="props_rev_3"><a id="GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C" name="GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C"></a><h5 id="DGBKR-GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C" class="sect5"><span class="enumeration_section">4.7.2.4 </span>Disable and Enable Operations
                     </h5>
                     <div>
                        <p>When you <a id="d7524e3298" class="indexterm-anchor"></a>disable broker management of a standby database, the broker checks to see if the overall protection mode can still be satisfied by any of the remaining standby databases. If not, the broker rejects the disable operation. Otherwise, the broker allows the disable operation to proceed as long as fast-start failover is not enabled. If it is enabled, the broker allows the disable operation to proceed only if the standby database is not the target standby database for fast-start failovers.
                        </p>
                        <div class="infoboxnotewarn" id="GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C__GUID-CAC7E3DB-FEE7-4924-BD9F-E08E5EFFDD0D">
                           <p class="notep1">WARNING:</p>
                           <p>If you disable broker management of a standby database in the broker configuration, that standby database cannot be used by the broker as a failover target in the event of loss of the primary database.</p>
                        </div>
                        <p>As long as fast-start failover is not enabled, you can disable the entire configuration regardless of the protection mode. You cannot disable the configuration if fast-start failover is enabled. See <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-3DAD4204-B8FB-425D-9D22-0602C62FA89A" title="This list describes restrictions when fast-start failover is enabled.">Restrictions When Fast-Start Failover is Enabled</a> for more information. 
                        </p>
                        <p>When <a id="d7524e3319" class="indexterm-anchor"></a>enabling broker management of the entire configuration, the broker first checks to see if the protection mode will be satisfied by the redo transport settings of the standby databases that will be enabled. If not, the enable operation fails and the configuration remains disabled. Otherwise, the enable operation successfully enables the configuration, and the broker enables the database using the settings saved in the broker configuration file. 
                        </p>
                     </div>
                  </div><a id="DGBKR315"></a><div class="props_rev_3"><a id="GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A" name="GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A"></a><h5 id="DGBKR-GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A" class="sect5"><span class="enumeration_section">4.7.2.5 </span>Requirements For Removing a Database from the Configuration
                     </h5>
                     <div>
                        <p>When <a id="d7524e3349" class="indexterm-anchor"></a><a id="d7524e3353" class="indexterm-anchor"></a>removing<a id="d7524e3358" class="indexterm-anchor"></a> a standby database from the broker configuration, the broker checks to see if the protection mode will still be satisfied. The operation fails if:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Removing the database compromises the protection mode</p>
                           </li>
                           <li>
                              <p>Fast-start failover is enabled and you try to remove the standby database that is the target of the fast-start failover</p>
                           </li>
                           <li>
                              <p>The configuration member to be removed has its <code class="codeph">RedoRoutes</code> configurable property set to a non-null value
                              </p>
                           </li>
                        </ul>
                        <p>You can remove the configuration at any time, unless fast-start failover is enabled.</p>
                     </div>
                  </div><a id="DGBKR320"></a><div class="props_rev_3"><a id="GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638" name="GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638"></a><h5 id="DGBKR-GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638" class="sect5"><span class="enumeration_section">4.7.2.6 </span>Requirements On Other Operations
                     </h5>
                     <div>
                        <p>Some operations that take place in a broker configuration, especially operations related to redo transport services, can affect the overall protection mode. These operations include: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Stopping redo transport services on the primary database</p>
                           </li>
                           <li>
                              <p>Stopping redo transport services to individual standby databases</p>
                           </li>
                           <li>
                              <p>Downgrading the redo transport mode from <code class="codeph">SYNC</code> to <code class="codeph">ASYNC</code> to the only standby database that supports a configuration operating in maximum availability mode or maximum protection mode
                              </p>
                           </li>
                        </ul>
                        <p>Before any of these operations can proceed, the broker checks to see if the protection mode will be supported by the redo transport service settings on the standby databases after the operation completes. If not, the broker fails the operation and returns an error.</p>
                     </div>
                  </div>
               </div>
            </div><a id="DGBKR3854"></a><div class="props_rev_3"><a id="GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1" name="GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1"></a><h3 id="DGBKR-GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1" class="sect3"><span class="enumeration_section">4.8 </span>Managing Far Sync Instances
               </h3>
               <div>
                  <p>An Oracle Data Guard far sync instance is a redo transport destination that accepts redo from a primary database and forwards that redo to one or more redo destinations in the configuration.</p>
                  <p>It is similar to a physical standby database in that it has a control file, receives redo into Standby Redo Log files (SRLs), and archives those SRLs to local Archived Redo Logs (ARLs). But unlike a standby database, a far sync instance does not have data files, cannot be opened, and cannot apply received redo. These limitations yield the benefit of using fewer disk and processing resources. More importantly, a far sync instance provides the ability to failover to a terminal database with no data loss if it receives redo data using synchronous transport mode and the configuration protection mode is set to maximum availability.</p>
                  <p>The following example shows how to add a far sync instance to a broker configuration.</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD FAR_SYNC FS1 AS CONNECT IDENTIFIER IS FS1.example.com;
Far Sync FS1 added
DGMGRL&gt; ENABLE FAR_SYNC FS1;
Enabled.
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
  North_Sales  - Primary database
    FS1        - Far Sync
    South_Sales - Physical standby database
 
Fast-Start Failover: DISABLED
Configuration Status:
SUCCESS
</pre><p>After a far sync instance has been added to the configuration, set up redo transport to support maximum availability and then upgrade the protection mode:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'RedoRoutes' = '(LOCAL : FS1 SYNC)';
DGMGRL&gt; EDIT FAR_SYNC 'FS1' SET PROPERTY 'RedoRoutes' = '(North_Sales : South_Sales ASYNC)';
DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MaxAvailability;
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
  North_Sales  - Primary database
    FS1          - Far Sync
      South_Sales - Physical standby database
 
Fast-Start Failover: DISABLED
Configuration Status:
SUCCESS
</pre><p>To ensure that maximum availability protection mode can be maintained when <code class="codeph">South_Sales</code> is the primary database, after a switchover or a failover, add a second far sync instance to the configuration so that <code class="codeph">South_Sales</code> can send redo in synchronous mode which in turn will send redo to the new terminal database, <code class="codeph">North_Sales,</code> after the role transition.
                  </p>
                  <p>The following example shows how to add a second far sync instance to the broker configuration:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD FAR_SYNC FS2 AS CONNECT IDENTIFIER IS FS2.example.com;
Far Sync FS2 added
DGMGRL&gt; EDIT FAR_SYNC 'FS2' SET PROPERTY 'RedoRoutes' = '(South_Sales : North_Sales ASYNC)';
DGMGRL&gt; ENABLE FAR_SYNC FS2;
Enabled.
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'RedoRoutes' = '(LOCAL : FS2 SYNC)';
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
  North_Sales  - Primary database
    FS1          - Far Sync
      South_Sales - Physical standby database
      FS2         - Far Sync (inactive)
 
Fast-Start Failover: DISABLED
Configuration Status:
SUCCESS
</pre><p>If a far sync instance is monitored for availability by Oracle Clusterware (for example, in an Oracle Restart, Oracle Real Application Clusters (Oracle RAC), or Oracle RAC One Node installation), then use the SRVCTL utility to specify a default open mode of mount. You can use a command such as the following:</p><pre class="oac_no_warn" dir="ltr">srvctl modify database -d &lt;db_unique_name&gt; -startoption MOUNT</pre><div class="infoboxnotealso" id="GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1__GUID-38D89FD8-07EA-4C8C-A73C-339441919134">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sbydb/creating-oracle-data-guard-far-sync-instance.html#SBYDB5416" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about creating a far sync instance and redo transport
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="DGBKR00677"></a><div class="props_rev_3"><a id="GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488" name="GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488"></a><h3 id="DGBKR-GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488" class="sect3"><span class="enumeration_section">4.9 </span>Managing Fast-Start Failover
               </h3>
               <div>
                  <p>You can enable <span class="bold">fast-start failover</span> to allow the broker to determine if a failover is necessary and to initiate a failover to a standby database from a list of one or more pre-specified target standby databases.
                  </p>
                  <p>The failover can be set up for either no data loss or a configurable amount of data loss. In addition, you can specify under which conditions or errors you want a failover to be initiated. Oracle also provides the <code class="codeph">DBMS_DG</code> PL/SQL package to allow an application to request a fast-start failover.
                  </p>
                  <p>You use broker configuration properties to control the behavior of fast-start failover. You can also use Cloud Control or the DGMGRL <code class="codeph">ENABLE FAST_START FAILOVER CONDITION</code> and <code class="codeph">DISABLE FAST_START FAILOVER CONDITION</code> commands to specify conditions for which a fast-start failover should occur.
                  </p>
               </div><a id="DGBKR3397"></a><div class="props_rev_3"><a id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254" name="GUID-E4B19583-762C-4F07-A3B5-566A3481B254"></a><h4 id="DGBKR-GUID-E4B19583-762C-4F07-A3B5-566A3481B254" class="sect4"><span class="enumeration_section">4.9.1 </span>Configure Properties to Tune Fast-Start Failover
                  </h4>
                  <div>
                     <p>You can set various properties to tune how fast-start failover behaves.</p>
                     <p>The configurable properties for fast-start failover include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">FastStartFailoverThreshold</code> 
                           </p>
                           <p>Set the <code class="codeph">FastStartFailoverThreshold</code> configuration property to specify the number of seconds you want the observer and target standby database to wait (after detecting the primary database is unavailable) before initiating a failover. See <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-D26D79F2-0093-4C0E-98CD-224A5C8CBFA4" title="You can enable fast-start failover from any site while connected to any database in the broker configuration.">Enabling Fast-Start Failover</a> for more information and an example.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverPmyShutdown</code></p>
                           <p>The <code class="codeph">FastStartFailoverPmyShutdown</code> configuration property controls whether the primary database will shut down if redo generation has been stalled (<code class="codeph">FS_FAILOVER_STATUS</code> column of <code class="codeph">V$DATABASE</code> contains a value of <code class="codeph">STALLED</code>) and the primary database has lost connectivity with the observer and target standby database for longer than the number of seconds specified by the <code class="codeph">FastStartFailoverThreshold</code> configuration property. The default value for FastStartFailoverPmyShutdown is <code class="codeph">TRUE</code>.	
                           </p>
                           <div class="infoboxnote" id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254__GUID-F21DDBB9-F044-4EED-A8F3-E7D1D6DC3529">
                              <p class="notep1">Note:</p>
                              <p>The primary database is always shut down if a user configurable fast-start failover condition is detected or if an application initiated a fast-start failover by calling the <code class="codeph">DBMS_DG.INITIATE_FS_FAILOVER</code> function.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverLagLimit</code></p>
                           <p></p>
                           <p>The fast-start failover feature can be configured on databases operating in maximum performance mode. Destinations that receive redo in <code class="codeph">ASYNC</code> mode will be acceptable fast-start failover target standby databases, and these destinations can lag the primary in terms of redo received and applied. A configurable time-based limit can be specified through the <code class="codeph">FastStartFailoverLagLimit</code> configuration property. If the standby database's applied redo point is within this many seconds of the primary's redo generation point, a fast-start failover will be allowed. If its applied point lags beyond this limit, a fast-start failover is not allowed. 
                           </p>
                           <p>The <code class="codeph">FastStartFailoverLagLimit</code> configuration property can also be used if fast-start failover is enabled when the configuration is operating in maximum availability mode. It cannot be used when the configuration is operating in maximum protection mode.  When <code class="codeph">FastStartFailoverLagLimit</code> is set to a non-zero value and the configuration is operating in maximum availability mode, a zero data loss failover or a data loss failover is possible. If a data loss failover is performed, the amount of data loss will not exceed the number of seconds specified by the <code class="codeph">FastStartFailoverLagLimit</code> configuration property. Note that the redo transport mode of the target standby must be set to the value of <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> when a non-zero value is specified for the <code class="codeph">FastStartFailoverLagLimit</code> property and the protection mode is maximum availability mode.  An <code class="codeph">ASYNC</code> destination is only a valid fast-start failover target in a configuration operating in maximum performance mode. If you want to change protection mode or redo transport mode to <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code>, you must first disable fast-start failover. Likewise, changing the protection mode from maximum availability mode to maximum performance mode will require first disabling fast-start failover and changing the redo transport mode used to send redo to the primary and target standby to <code class="codeph">ASYNC</code>. Reinstatement of an old primary will be possible after a fast-start failover to an <code class="codeph">ASYNC</code> target standby. If the observer rediscovers the old primary, it will automatically reinstate the old primary and any redo generated within the specified lag will be lost.
                           </p>
                           <div class="infoboxnotealso" id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254__GUID-7A88D3B9-D245-484A-A5A3-90F94526A716">
                              <p class="notep1">See Also:</p>
                              <p><a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration.">Oracle Data Guard Broker Properties</a> for more information
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverAutoReinstate</code></p>
                           <p>The <code class="codeph">FastStartFailoverAutoReinstate</code> configuration property controls whether the former primary database is automatically reinstated if a fast-start failover occurred because the primary database crashed or was stalled for longer than <code class="codeph">FastStartFailoverThreshold</code> seconds. The default value for <code class="codeph">FastStartFailoverAutoReinstate</code> is <code class="codeph">TRUE</code>.
                           </p>
                           <p>If you want to perform diagnostic or repair work after failover has completed, you can avoid an automatic reinstatement by setting the <code class="codeph">FastStartFailoverAutoReinstate</code> configuration property to <code class="codeph">FALSE</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254__GUID-69505E1E-B3DE-459F-ADEB-C8CDB4AE1611">
                              <p class="notep1">Note:</p>
                              <p>The former primary database is never automatically reinstated if a fast-start failover occurred because a user configurable fast-start failover condition was detected or because an application initiated a fast-start failover by calling the <code class="codeph">DBMS_DG.INITIATE_FS_FAILOVER</code> function.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverTarget</code></p>
                           <p>The <code class="codeph">FastStartFailoverTarget</code> configuration property specifies the <code class="codeph">DB_UNIQUE_NAME</code> values of the databases that are eligible to be targets of a fast-start failover when this database is the primary database.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ObserverReconnect</code></p>
                           <p>The <code class="codeph">ObserverReconnect</code> configuration property specifies how often the observer establishes a new connection to the primary database. When this property is set to the default value of 0, it prevents the observer from periodically establishing a new connection with the primary database. While this eliminates the processing overhead associated with periodically establishing a new observer connection to the primary database, it also prevents the observer from detecting that it is not possible to create new connections to the primary database. Oracle recommends that this property be set to a value that is small enough to allow timely detection of faults at the primary database, but large enough to limit the overhead associated with periodic observer connections to an acceptable level.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ObserverOverride</code></p>
                           <p>The <code class="codeph">ObserverOverride</code> configuration property, when set to <code class="codeph">TRUE</code>, allows an automatic failover to occur when the observer has lost connectivity to the primary, even if the standby has a healthy connection to the primary.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DGBKR3398"></a><div class="props_rev_3"><a id="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B" name="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B"></a><h4 id="DGBKR-GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B" class="sect4"><span class="enumeration_section">4.9.2 </span>Configure Conditions for Fast-start Failover
                  </h4>
                  <div>
                     <p>By default, a fast-start failover is done when neither the observer nor the standby can reach the primary after the configured time threshold (<code class="codeph">FastStartFailoverThreshold</code>) has passed. 
                     </p>
                     <p>There are also other conditions under which you might want a fast-start failover to occur. </p>
                     <p>The configurable conditions fall into two classes: those detected through the database health-check mechanism and those detected through errors raised by the Oracle server (such as ORA errors). When a specified condition occurs, the observer will initiate a fast-start failover without waiting for <code class="codeph">FastStartFailoverThreshold</code> to expire, assuming the standby is in a valid state to accept a failover. 
                     </p>
                     <p>Each condition may be enabled or disabled individually. The Oracle Data Guard configuration persists all user specified configurable fast-start failover conditions in the broker configuration file. </p>
                     <p>The observer will detect when the primary database has signaled any of the enabled health-check conditions and will immediately initiate a fast-start failover, assuming the standby is in a valid fast-start failover state (observed and either synchronized or within lag limits) to accept a failover.</p>
                     <p>For specified Oracle ORA-Error conditions, the primary database will notify the observer if the error is signaled and the observer will immediately initiate a fast-start failover, assuming the standby is in a valid fast-start failover state (observed and either synchronized or within lag limits) to accept a failover.</p>
                     <div class="infoboxnote" id="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B__GUID-3740004F-D8A6-4265-B183-DF80CC33737F">
                        <p class="notep1">Note:</p>
                        <p>The primary database will shut down and the observer will not attempt to automatically reinstate the former primary database.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B__GUID-176E4AFF-1214-4144-9715-73589361658C">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Cloud Control online help</p>
                           </li>
                           <li>
                              <p><a href="oracle-data-guard-broker-commands.html#GUID-B70D6C87-242B-4657-9C95-DFE750679671" title="The ENABLE FAST_START FAILOVER CONDITION command specifies additional conditions for which a fast-start failover should be performed.">ENABLE FAST_START FAILOVER CONDITION</a> 
                              </p>
                           </li>
                           <li>
                              <p><a href="oracle-data-guard-broker-commands.html#GUID-CF212C5D-FCBD-4BB9-99A9-02774885C394" title="The DISABLE FAST_START FAILOVER CONDITION command allows you to remove conditions for which a fast-start failover should be performed.">DISABLE FAST_START FAILOVER CONDITION</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DGBKR3399"></a><div class="props_rev_3"><a id="GUID-D9E5FC78-657B-4C66-8EB7-D56880665861" name="GUID-D9E5FC78-657B-4C66-8EB7-D56880665861"></a><h4 id="DGBKR-GUID-D9E5FC78-657B-4C66-8EB7-D56880665861" class="sect4"><span class="enumeration_section">4.9.3 </span>Application Initiated Fast-Start Failover
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">DBMS_DG</code> PL/SQL package to allow an application to direct a fast-start failover when it encounters specific conditions.
                     </p>
                     <p> See <span class="q">"<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-C98DB3F7-2894-4855-9BBD-E3593E59383C" title="You can customize fast-start failover setup for a specific application by using the DBMS_DG PL/SQL package.">Directing a Fast-Start Failover From an Application</a>"</span>.
                     </p>
                  </div>
               </div>
            </div><a id="DGBKR3400"></a><div class="props_rev_3"><a id="GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1" name="GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1"></a><h3 id="DGBKR-GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1" class="sect3"><span class="enumeration_section">4.10 </span>Managing Database Conversions
               </h3>
               <div>
                  <p>You can use the DGMGRL <code class="codeph">CONVERT DATABASE</code> command to convert a physical standby database to a snapshot standby database.
                  </p>
                  <p> A snapshot standby database is a fully updatable standby database.</p>
                  <p>Like a physical or logical standby database, a snapshot standby database receives and archives redo data from a primary database. However, unlike a physical or logical standby database, a snapshot standby database does not apply the redo data that it receives. The redo data received by a snapshot standby database is not applied until the snapshot standby is converted back into a physical standby database, after first discarding any local updates made to the snapshot standby database.</p>
                  <p>To convert a physical standby database to a snapshot standby database you must have Flashback Database enabled. The following example shows how to convert a physical standby database to a snapshot standby database:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONVERT DATABASE 'South_Sales' TO SNAPSHOT STANDBY;
</pre><p>When you are ready to convert the snapshot back into a physical standby, use the DGMGRL <code class="codeph">CONVERT DATABASE</code> command as follows:
                  </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONVERT DATABASE 'South_Sales' TO PHYSICAL STANDBY;</pre></div>
            </div><a id="DGBKR325"></a><div class="props_rev_3"><a id="GUID-85D20060-248B-42A1-B78D-15C23AAA2F59" name="GUID-85D20060-248B-42A1-B78D-15C23AAA2F59"></a><h3 id="DGBKR-GUID-85D20060-248B-42A1-B78D-15C23AAA2F59" class="sect3"><span class="enumeration_section">4.11 </span>Database Status
               </h3>
               <div>
                  <p>In general, the broker checks the health of a database by verifying that the actual database state and settings match those described in the broker configuration file.</p>
                  <p> This is done by checking if any component of the Oracle Data Guard configuration is functioning incorrectly (for example, if redo transport services have an error), and by checking if other required database settings are correctly set (for example, if the server parameter files are available and if the <code class="codeph">ARCHIVELOG</code> mode is turned on). The following is a detailed list of what is being checked by the broker on a primary database and a standby database. <a id="d7524e3904" class="indexterm-anchor"></a><a id="d7524e3908" class="indexterm-anchor"></a><a id="d7524e3912" class="indexterm-anchor"></a></p>
                  <p>On a <a id="d7524e3918" class="indexterm-anchor"></a><a id="d7524e3922" class="indexterm-anchor"></a><a id="d7524e3926" class="indexterm-anchor"></a>primary database, the health check determines whether the following conditions are met:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Database is in the state specified by the user, as recorded in the broker configuration file</p>
                     </li>
                     <li>
                        <p>Database is in the correct data protection mode</p>
                     </li>
                     <li>
                        <p>Database is using a server parameter file</p>
                     </li>
                     <li>
                        <p>Database is in the <code class="codeph">ARCHIVELOG</code> mode
                        </p>
                     </li>
                     <li>
                        <p>Database guard is turned off</p>
                     </li>
                     <li>
                        <p>Supplemental logging is turned on when there is a logical standby database in the configuration</p>
                     </li>
                     <li>
                        <p>Redo transport services do not have any errors</p>
                     </li>
                     <li>
                        <p>Database settings match those specified by the broker configurable properties</p>
                     </li>
                     <li>
                        <p>Redo transport settings match those specified by the redo transport-related properties of the standby databases</p>
                     </li>
                     <li>
                        <p>Current data protection level is consistent with configured data protection mode</p>
                     </li>
                     <li>
                        <p>Primary database is able to resolve all gaps for all standby databases</p>
                     </li>
                  </ul>
                  <p>On a <a id="d7524e3970" class="indexterm-anchor"></a><a id="d7524e3974" class="indexterm-anchor"></a><a id="d7524e3978" class="indexterm-anchor"></a>standby database, the health check determines whether the following conditions are met:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Database is in the state specified by the user, as recorded in the broker configuration file</p>
                     </li>
                     <li>
                        <p>Database is using a server parameter file</p>
                     </li>
                     <li>
                        <p>Database settings match those specified by the broker configurable properties</p>
                     </li>
                     <li>
                        <p>Database guard is turned on when the database is a logical standby database</p>
                     </li>
                     <li>
                        <p>Primary and target standby databases are synchronized or within lag limits if fast-start failover is enabled</p>
                     </li>
                  </ul>
               </div><a id="DGBKR3662"></a><div class="props_rev_3"><a id="GUID-F538BD81-9767-4844-BCCA-6B699026D572" name="GUID-F538BD81-9767-4844-BCCA-6B699026D572"></a><h4 id="DGBKR-GUID-F538BD81-9767-4844-BCCA-6B699026D572" class="sect4"><span class="enumeration_section">4.11.1 </span>Querying Database Status
                  </h4>
                  <div>
                     <p>Certain monitorable properties can be used to query the database status.</p>
                     <p></p>
                     <p>The following properties are directly accessed through the DGMGRL command-line interface:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">LogXptStatus</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">InconsistentLogXptProps</code></p>
                           <div class="infoboxnote" id="GUID-F538BD81-9767-4844-BCCA-6B699026D572__GUID-09E25029-FEEA-4717-98F0-1296297A88A5">
                              <p class="notep1">Note:</p>
                              <p>Cloud Control rearranges the values of these properties for presentation in the GUI.</p>
                           </div>
                        </li>
                     </ul>
                     <p>You can use the <code class="codeph">SHOW DATABASE &lt;db_unique_name&gt;</code> command to get a brief description of the database (name, role, and so on), database status, and information about any health check problems. For example, the output of the following <code class="codeph">SHOW DATABASE</code> command shows two problems: some redo transport services errors and an inconsistent redo transport-related property
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales';
 
Database - North_Sales
  Role: PRIMARY
  Intended State: TRANSPORT-OFF
  Instance(s):
    north_sales1
      Error: ORA-16737: the redo transport service for standby
        database "South_Sales" has an error
 
    north_sales2
      Error: ORA-16737: the redo transport service for standby
        database "South_Sales" has an error
      Warning: ORA-16715: redo transport-related property
        ReopenSecs of standby "South_Sales" is inconsistent
Database Status:
ERROR
</pre><p>To further check the details about the database status, you can use the following monitorable properties:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">LogXptStatus</code> —  lists all log transport errors detected on all instances of the primary database.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">InconsistentLogXptProps</code> —  lists all redo transport-related properties of standby databases that have inconsistent values between the broker configuration file and the redo transport settings.
                           </p>
                        </li>
                     </ul>
                     <p>Issue the following <code class="codeph">SHOW DATABASE</code> commands to obtain further details about the problems.
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales' 'LogXptStatus';
LOG TRANSPORT STATUS
PRIMARY_INSTANCE_NAME  STANDBY_DATABASE_NAME  STATUS 
         north_sales1            South_Sales  ORA-12541: TNS:no listener
         north_sales2            South_Sales  ORA-12541: TNS:no listener
 
DGMGRL&gt; SHOW DATABASE 'North_Sales' 'InconsistentLogXptProps';
INCONSISTENT LOG TRANSPORT PROPERTIES
 INSTANCE_NAME  STANDBY_NAME  PROPERTY_NAME  MEMORY_VALUE  BROKER_VALUE 
  north_sales2   South_Sales     ReopenSecs           600           300</pre><div class="infoboxnotealso" id="GUID-F538BD81-9767-4844-BCCA-6B699026D572__GUID-DA6A1887-03F8-4B49-9F69-86E2FB7BE9F5">
                        <p class="notep1">See Also:</p>
                        <p><a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration.">Oracle Data Guard Broker Properties</a> for detailed information about database properties
                        </p>
                     </div>
                  </div>
               </div><a id="DGBKR3855"></a><div class="props_rev_3"><a id="GUID-055762DD-33BC-426D-AA35-7217B8A77D0E" name="GUID-055762DD-33BC-426D-AA35-7217B8A77D0E"></a><h4 id="DGBKR-GUID-055762DD-33BC-426D-AA35-7217B8A77D0E" class="sect4"><span class="enumeration_section">4.11.2 </span>Validating a Database Before a Role Change
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">VALIDATE</code> <code class="codeph">DATABASE</code> command to perform a comprehensive set of database checks prior to performing a role change.
                     </p>
                     <p> The command checks the following items:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Whether there is missing redo data on a standby database</p>
                        </li>
                        <li>
                           <p>Whether flashback is enabled</p>
                        </li>
                        <li>
                           <p>The number of temporary tablespace files configured</p>
                        </li>
                        <li>
                           <p>Whether an online data file move is in progress</p>
                        </li>
                        <li>
                           <p>Whether online redo logs are cleared for a physical standby database</p>
                        </li>
                        <li>
                           <p>Whether standby redo logs are cleared for a primary database</p>
                        </li>
                        <li>
                           <p>The online log file configuration</p>
                        </li>
                        <li>
                           <p>The standby log file configuration</p>
                        </li>
                        <li>
                           <p>Apply-related property settings</p>
                        </li>
                        <li>
                           <p>Transport-related property settings</p>
                        </li>
                        <li>
                           <p>Whether there are any errors in the Automatic Diagnostic Repository (for example, control file corruptions, system data file problems, user data file problems)</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-055762DD-33BC-426D-AA35-7217B8A77D0E__GUID-BA2E10DA-2B05-49CE-BEED-4B82E25EDA36">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="oracle-data-guard-broker-commands.html#GUID-06ED8F7F-4547-4D4D-9D1A-4A84FF234A12" title="The VALIDATE DATABASE command performs a comprehensive set of database checks prior to a role change.">VALIDATE DATABASE</a>"</span> for a description of the command and for examples that show command output for various scenarios
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C" name="GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C"></a><h4 id="DGBKR-GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C" class="sect4"><span class="enumeration_section">4.11.3 </span>Validating the Server Parameter Files Before a Role Change
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">VALIDATE DATABASE SPFILE</code> command to compare the contents of the server parameter file (SPFILE) between the primary and standby database.
                     </p>
                     <div class="p">Comparing the primary to the standby lets you determine whether there are any missing parameters in either database’s SPFILE, or whether the entries contain different values.
                        <div class="infoboxnotealso" id="GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C__GUID-A8E7BF98-E494-4B9A-A718-A75A9BF20423">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-D8A6F0CF-959E-490D-9384-B746821836B4" title="The VALIDATE DATABASE SPFILE command performs a comparison of server parameter file (SPFILE) entries between the primary database and a specified standby database.">VALIDATE DATABASE SPFILE</a> for a description of the command and for examples that show command output
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8" name="GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8"></a><h4 id="DGBKR-GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8" class="sect4"><span class="enumeration_section">4.11.4 </span>Validating the Network Configuration Before a Role Change
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">VALIDATE NETWORK CONFIGURATION</code> command to perform network connectivity checks between members of a configuration. 
                     </p>
                     <p>Performing a network connectivity check identifies potential network configuration problems before a role change is attempted.</p>
                     <div class="infoboxnotealso" id="GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8__GUID-9ABFA0A7-8E9F-4096-87E5-F2700661B7EA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8" title="Use the VALIDATE NETWORK CONFIGURATION command to perform network connectivity checks between members of a configuration.">Validating the Network Configuration Before a Role Change</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-75625C54-0312-46AD-A366-63FE146A03A7" name="GUID-75625C54-0312-46AD-A366-63FE146A03A7"></a><h4 id="DGBKR-GUID-75625C54-0312-46AD-A366-63FE146A03A7" class="sect4"><span class="enumeration_section">4.11.5 </span>Validating the Static Connect Identifier Before a Role Change
                  </h4>
                  <div>
                     <p>A single-instance database on which Oracle Restart is not configured must have a static service registered with the listener so that the DGMGRL CLI can automatically start the instance when necessary (for example, for the new standby after a switchover).</p>
                     <p>The broker sets up a default value for the <code class="codeph">StaticConnectIdentifier</code> property that uses that static service (assuming the default value of <code class="codeph"><span class="codeinlineitalic">db_unique_name</span>_DGMGRL</code> is used for the static service name). This connect identifier is used for instance restart.
                     </p>
                     <p>Use the <code class="codeph">VALIDATE STATIC CONNECT IDENTIFIER</code> command to confirm that the connect identifier specified by the <code class="codeph">StaticConnectIdentifier</code> property can be used to restart an instance. The command does not restart the database, but rather checks that the service specified in the connect identifier is registered with the listener.
                     </p>
                     <div class="infoboxnotealso" id="GUID-75625C54-0312-46AD-A366-63FE146A03A7__GUID-946FCDB1-2FDC-4005-89B2-5BEF08F1F47F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="oracle-data-guard-broker-commands.html#GUID-C3E2884B-E0A7-492A-9A42-EEB4D6CCCBE6" title="The VALIDATE STATIC CONNECT IDENTIFIER command validates the static connect identifier of a database.">VALIDATE STATIC CONNECT IDENTIFIER</a> for a description of the command and for examples that show command output
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
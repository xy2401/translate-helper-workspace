<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_SPD package provides subprograms for managing SQL plan directives (SPD).">
      <meta name="description" content="The DBMS_SPD package provides subprograms for managing SQL plan directives (SPD).">
      <title>DBMS_SPD</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_SPD package provides subprograms for managing SQL plan directives (SPD).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_SPACE_ADMIN.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_SPM.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SPACE_ADMIN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_SPM.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_SPD </li>
            </ol>
            <a id="GUID-E242EA74-6311-4A25-A92D-D47D374BC156" name="GUID-E242EA74-6311-4A25-A92D-D47D374BC156"></a><a id="ARPLS73856"></a><a id="ARPLS73856"></a>
            
            <h2 id="ARPLS-GUID-E242EA74-6311-4A25-A92D-D47D374BC156" class="sect2"><span class="enumeration_chapter">154 </span> DBMS_SPD 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_SPD</code> package provides subprograms for managing SQL plan directives (SPD). 
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-530C3266-4293-45BA-8104-E18B0B9F006C" title="This package provides subprograms for managing SQL plan directives (SPD).">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-F404296A-B523-43ED-A455-E096D90F9B99" title="DBMS_SPD is an invoker-rights package. The invoker requires ADMINISTER SQL MANAGEMENT OBJECT privilege for executing most of the subprograms in this package. Also, the subprograms commit the current transaction (if any), perform the operation, and then commit it again.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8" title="The DBA view DBA_SQL_PLAN_DIRECTIVES shows all the directives created in the system and the view DBA_SQL_PLAN_DIR_OBJECTS displays the objects that are included in the directives.">Views</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPD.html#GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0" title="This table lists and briefly describes the DBMS_SPD package subprograms.">Summary of DBMS_SPD Subprograms</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-E242EA74-6311-4A25-A92D-D47D374BC156__GUID-9A2D3F9B-6342-4E95-8D57-D91EEF6836FC">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="DBMS_STATS.html#GUID-01FAB8ED-E4A3-4C3E-8FE2-88717DCDDA06" title="With the DBMS_STATS package you can view and modify optimizer statistics gathered for database objects."> DBMS_STATS</a></p>
                     </li>
                     <li>
                        <p><a href="../tgsql/optimizer-statistics-concepts.html#TGSQL347" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> regarding SQL plan directives
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ARPLS73858"></a><a id="ARPLS73858"></a><div class="props_rev_3"><a id="GUID-530C3266-4293-45BA-8104-E18B0B9F006C" name="GUID-530C3266-4293-45BA-8104-E18B0B9F006C"></a><h3 id="ARPLS-GUID-530C3266-4293-45BA-8104-E18B0B9F006C" class="sect3"><span class="enumeration_section">154.1 </span>DBMS_SPD Overview
               </h3>
               <div>
                  <p>This package provides subprograms for managing SQL plan directives (SPD). </p>
                  <div class="section">
                     <p>SPD are objects generated automatically by Oracle. For example, if Oracle detects that the single table cardinality estimated made by the optimizer is different from the actual number of rows returned when accessing the table, it will automatically create a directive to perform dynamic statistics for the table. When any SQL statement referencing the table is compiled, the optimizer will perform dynamic statistics for the table to get a more accurate estimate.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73859"></a><a id="ARPLS73859"></a><div class="props_rev_3"><a id="GUID-F404296A-B523-43ED-A455-E096D90F9B99" name="GUID-F404296A-B523-43ED-A455-E096D90F9B99"></a><h3 id="ARPLS-GUID-F404296A-B523-43ED-A455-E096D90F9B99" class="sect3"><span class="enumeration_section">154.2 </span>DBMS_SPD Security Model
               </h3>
               <div>
                  <p><code class="codeph">DBMS_SPD</code> is an invoker-rights package. The invoker requires <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege for executing most of the subprograms in this package. Also, the subprograms commit the current transaction (if any), perform the operation, and then commit it again.
                  </p>
               </div>
            </div><a id="ARPLS73860"></a><a id="ARPLS73860"></a><div class="props_rev_3"><a id="GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8" name="GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8"></a><h3 id="ARPLS-GUID-1A8933D3-1284-4C8C-80B5-27E8D0DC25A8" class="sect3"><span class="enumeration_section">154.3 </span>DBMS_SPD Views
               </h3>
               <div>
                  <p>The DBA view <code class="codeph">DBA_SQL_PLAN_DIRECTIVES</code> shows all the directives created in the system and the view <code class="codeph">DBA_SQL_PLAN_DIR_OBJECTS</code> displays the objects that are included in the directives.
                  </p>
               </div>
            </div><a id="ARPLS73861"></a><a id="ARPLS73862"></a><a id="ARPLS73862"></a><a id="ARPLS73861"></a><div class="props_rev_3"><a id="GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0" name="GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0"></a><h3 id="ARPLS-GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0" class="sect3"><span class="enumeration_section">154.4 </span>Summary of DBMS_SPD Subprograms
               </h3>
               <div>
                  <p>This table lists and briefly describes the <code class="codeph">DBMS_SPD</code> package subprograms.
                  </p>
                  <div class="tblformal" id="GUID-7B2FFAD2-1983-4829-8673-0B37F98183B0__GUID-524457DC-AF4B-4126-BDA6-CFAA20102D9A">
                     <p class="titleintable">Table 154-1 DBMS_SPD Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPD Package Subprograms" summary="This table lists and briefly describes the DBMS_SPD package subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d856291e530">Subprogram</th>
                              <th align="left" valign="bottom" width="70%" id="d856291e533">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e538" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-94E0A914-C274-4A4D-95E8-450F653997A7" title="This procedure changes different attributes of a SQL plan directive.">ALTER_SQL_PLAN_DIRECTIVE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e538 d856291e533 ">
                                 <p>Changes different attributes of a SQL plan directive</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e550" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7" title="This procedure creates a staging table into which to pack (export) SQL plan directives.">CREATE_STGTAB_DIRECTIVE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e550 d856291e533 ">
                                 <p>Creates a staging table into which to pack (export) SQL plan directives.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e562" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-037F484B-3ACA-4B8D-8062-666C56F79501" title="This procedure drops a SQL plan directive.">DROP_SQL_PLAN_DIRECTIVE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e562 d856291e533 ">
                                 <p>Drops a SQL plan directive</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e574" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-7C43374C-698E-4E90-8413-C09DF597102E" title="This procedure allows for manual flushing of the SQL plan directives that are automatically recorded in SGA memory while executing SQL statements.">FLUSH_SQL_PLAN_DIRECTIVE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e574 d856291e533 ">
                                 <p>Allows for manual flushing of the SQL plan directives that are automatically recorded in SGA memory while executing SQL statements.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e586" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92" title="This function returns the value for the specified preferences for SQL plan directives.">GET_PREFS Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e586 d856291e533 ">
                                 <p>Gets the values for preferences for SQL plan directives</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e598" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC" title="This function packs (exports) SQL plan directives into a staging table.">PACK_STGTAB_DIRECTIVE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e598 d856291e533 ">
                                 <p>Packs (exports) SQL plan directives into a staging table.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e610" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-E916B860-4C33-4B0E-814B-594E849631D5" title="This procedure allows the setting of different preferences for SQL plan directives.">SET_PREFS Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e610 d856291e533 ">
                                 <p>Allows the setting of different preferences for SQL plan directives</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d856291e622" headers="d856291e530 ">
                                 <p><a href="DBMS_SPD.html#GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA" title="This procedure unpacks (imports) SQL plan directives from a staging table.">UNPACK_STGTAB_DIRECTIVE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d856291e622 d856291e533 ">
                                 <p>Unpacks (imports) SQL plan directives from a staging table.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS73863"></a><a id="ARPLS73864"></a><a id="ARPLS73864"></a><a id="ARPLS73863"></a><div class="props_rev_3"><a id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7" name="GUID-94E0A914-C274-4A4D-95E8-450F653997A7"></a><h4 id="ARPLS-GUID-94E0A914-C274-4A4D-95E8-450F653997A7" class="sect4"><span class="enumeration_section">154.4.1 </span>ALTER_SQL_PLAN_DIRECTIVE Procedure
                  </h4>
                  <div>
                     <p>This procedure changes different attributes of a SQL plan directive. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-B1888085-137C-4B5C-91CC-1F5E864AFEC5">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.ALTER_SQL_PLAN_DIRECTIVE (
   directive_id        IN     NUMBER,
   attribute_name      IN     VARCHAR2,
   attribute_value     IN     VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-3E400D1B-4B85-43B0-A2C4-EF1C283B539D">Parameters</p>
                        <div class="tblformal" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-EBA2AD3D-5C46-4E5A-9DE8-B32BB552C992">
                           <p class="titleintable">Table 154-2 <span class="italic"><span class="bold">ALTER_SQL_PLAN_DIRECTIVE Procedure Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_SQL_PLAN_DIRECTIVE Procedure Parameters" summary="This table describes the parameters of the DBMS_SPD.ALTER_SQL_PLAN_DIRECTIVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e745">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e748">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e753" headers="d856291e745 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e753 d856291e748 ">
                                       <p>SQL plan directive ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e761" headers="d856291e745 ">
                                       <p><code class="codeph">attribute_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e761 d856291e748 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ENABLED</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_DROP</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e776" headers="d856291e745 ">
                                       <p><code class="codeph">attribute_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e776 d856291e748 ">
                                       <p>Possible values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ENABLED: </code></p>
                                             <p>- If <code class="codeph">YES</code> directive is enabled and may be used
                                             </p>
                                             <p>- If  <code class="codeph">NO</code>   directive is not enabled and will not be used
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_DROP</code>:
                                             </p>
                                             <p>- If <code class="codeph">YES</code> directive will be dropped automatically if not used for <code class="codeph">SPD_RETENTION_WEEKS</code>. This is the default behavior.
                                             </p>
                                             <p>- If  <code class="codeph">NO</code>   directive will not be dropped automatically
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-E9ACDF44-63C3-452E-A4FC-3BA2E7F3DF41">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code>: The specified object does not exist.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-4B6B23FF-0D58-4D59-8678-D313274A63E2">Usage Notes</p>
                        <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94E0A914-C274-4A4D-95E8-450F653997A7__GUID-7E5D8961-D39F-4520-AE17-5F10CD1EA641">Examples</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SPD.ALTER_SQL_PLAN_DIRECTIVE (12345, 'STATE', 'PERMANENT');
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74423"></a><a id="ARPLS74424"></a><a id="ARPLS74424"></a><a id="ARPLS74423"></a><div class="props_rev_3"><a id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7" name="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7"></a><h4 id="ARPLS-GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7" class="sect4"><span class="enumeration_section">154.4.2 </span>CREATE_STGTAB_DIRECTIVE Procedure
                  </h4>
                  <div>
                     <p>This procedure creates a staging table into which to pack (export) SQL plan directives. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-4927AFD4-C81E-43EA-AF5E-C64B5E7C54EB">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.CREATE_STGTAB_DIRECTIVE (
   table_name         IN VARCHAR2,
   table_owner        IN VARCHAR2  := USER,
   tablespace_name    IN VARCHAR2  := NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-156B5876-8B2E-40F4-8804-8365A239AC39">Parameters</p>
                        <div class="tblformal" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-421D8763-654D-4E91-BCA4-44BC606AE5C0">
                           <p class="titleintable">Table 154-3 <span class="italic"><span class="bold">CREATE_STGTAB_DIRECTIVE Procedure Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_STGTAB_DIRECTIVE Procedure Parameters" summary="This table describes the parameters of the DBMS_SPD.CREATE_STGTAB_DIRECTIVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e961">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e964">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e969" headers="d856291e961 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e969 d856291e964 ">
                                       <p>Name of staging table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e977" headers="d856291e961 ">
                                       <p><code class="codeph">table_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e977 d856291e964 ">
                                       <p>Name of schema owner of staging table. Default is current schema.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e985" headers="d856291e961 ">
                                       <p><code class="codeph">tablespace_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e985 d856291e964 ">
                                       <p>Name of tablespace. Default <code class="codeph">NULL</code> means create staging table in the default tablespace:
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-8FE5A09B-F8EE-453A-8CB2-9C2CAA6FC352">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-44001 INVALID_SCHEMA</code>: The input schema does not exist.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13159 TABLE_ALREADY_EXISTS</code>: The specified table already exists.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-29304 TABLESPACE_MISSING</code>: The specified tablespace does not exist.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4E55C58-12A2-4542-B6F0-A8C9E8E7B5A7__GUID-F37AE8B4-243B-45B3-B63D-605316691550">Usage Notes</p>
                        <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73865"></a><a id="ARPLS73866"></a><a id="ARPLS73866"></a><a id="ARPLS73865"></a><div class="props_rev_3"><a id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501" name="GUID-037F484B-3ACA-4B8D-8062-666C56F79501"></a><h4 id="ARPLS-GUID-037F484B-3ACA-4B8D-8062-666C56F79501" class="sect4"><span class="enumeration_section">154.4.3 </span>DROP_SQL_PLAN_DIRECTIVE Procedure
                  </h4>
                  <div>
                     <p>This procedure drops a SQL plan directive. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-277D9576-2522-4524-81E5-BD2B63AC6990">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.DROP_SQL_PLAN_DIRECTIVE (
   directive_id        IN     NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-EBA0A102-949D-4257-BDC4-AC170C26D874">Parameters</p>
                        <div class="tblformal" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-159B9AF3-160B-478A-AB76-514A6B16F2D5">
                           <p class="titleintable">Table 154-4 <span class="italic"><span class="bold">DROP_SQL_PLAN_DIRECTIVE Procedure Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_SQL_PLAN_DIRECTIVE Procedure Parameters" summary="This table describes the parameters of the DBMS_SPD.DROP_SQL_PLAN_DIRECTIVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1144">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1147">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1152" headers="d856291e1144 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1152 d856291e1147 ">
                                       <p>SQL plan directive ID</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-C91B66DC-8EA4-466E-A41A-B4D10504F4A5">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code>: The specified object does not exist.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-B146D7D0-2403-4B5D-8F7A-9A5E76D690C3">Usage Notes</p>
                        <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-037F484B-3ACA-4B8D-8062-666C56F79501__GUID-FB103A2A-4B14-431C-A7C1-A47CEAF455B8">Examples</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SPD.DROP_SQL_PLAN_DIRECTIVE (12345);
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74425"></a><a id="ARPLS74425"></a><div class="props_rev_3"><a id="GUID-7C43374C-698E-4E90-8413-C09DF597102E" name="GUID-7C43374C-698E-4E90-8413-C09DF597102E"></a><h4 id="ARPLS-GUID-7C43374C-698E-4E90-8413-C09DF597102E" class="sect4"><span class="enumeration_section">154.4.4 </span>FLUSH_SQL_PLAN_DIRECTIVE Procedure
                  </h4>
                  <div>
                     <p>This procedure allows for manual flushing of the SQL plan directives that are automatically recorded in SGA memory while executing SQL statements. </p>
                     <div class="section">
                        <p>The information recorded in the SGA is periodically flushed by an Oracle background process. This procedure provides a way to flush the information manually. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-3988239F-9B59-4CB1-AFAE-6FFB3E8274B4">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.FLUSH_SQL_PLAN_DIRECTIVE;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-676F91AB-05ED-478B-ABF6-0FC5AB790B03">Exceptions</p>
                        <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-64AE2383-C9A1-41CA-BE31-9A314611F632">Usage Notes</p>
                        <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C43374C-698E-4E90-8413-C09DF597102E__GUID-DAFCA880-31B3-4699-9127-F9EE8487C5A6">Examples</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SPD.FLUSH_SQL_PLAN_DIRECTIVE;
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74426"></a><a id="ARPLS74427"></a><a id="ARPLS74427"></a><a id="ARPLS74426"></a><div class="props_rev_3"><a id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92" name="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92"></a><h4 id="ARPLS-GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92" class="sect4"><span class="enumeration_section">154.4.5 </span>GET_PREFS Function
                  </h4>
                  <div>
                     <p>This function returns the value for the specified preferences for SQL plan directives.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-7E19D736-2254-4284-B360-6AF9BF5E7CB5">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.GET_PREFS (
   pname     IN   VARCHAR2)
 RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-9CE078EA-04B9-4BD5-89C7-D4CC3B9C4E44">Parameters</p>
                        <div class="tblformal" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-E61B769C-F174-48CF-9B17-390DA6CE20DE">
                           <p class="titleintable">Table 154-5 <span class="italic"><span class="bold">GET_PREFS Function Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_PREFS Function Parameters" summary="This table describes the parameters of the DBMS_SPD.GET_PREFS subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1422">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1425">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1430" headers="d856291e1422 ">
                                       <p><code class="codeph">pname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1430 d856291e1425 ">
                                       <p>Preference name. The procedure supports the preference <code class="codeph">SPD_RETENTION_WEEKS</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-CB5A67F5-E0B3-407E-AAE4-E6AEE5A7EFA3">Return Values</p>
                        <p>Preference value</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-0A12B198-EA16-4FA6-A0F8-7D3A5ED76503">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-0BEE0B6B-11F8-4F22-823A-C79E970A173E">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPD_RETENTION_WEEKS</code> - SQL plan directives are purged if not used for more than the value set for this preference.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4165996-5B72-4C63-BCF3-66BA431E0E92__GUID-7882E18B-7BC1-4BD2-AB37-872ECA08F9D1">Examples</p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_SPD.GET_PREFS('SPD_RETENTION_WEEKS') FROM DUAL;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74428"></a><a id="ARPLS74429"></a><a id="ARPLS74429"></a><a id="ARPLS74428"></a><div class="props_rev_3"><a id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC" name="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC"></a><h4 id="ARPLS-GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC" class="sect4"><span class="enumeration_section">154.4.6 </span>PACK_STGTAB_DIRECTIVE Function
                  </h4>
                  <div>
                     <p>This function packs (exports) SQL plan directives into a staging table. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-412C1FE6-829D-43AF-BA9D-4D4942313367">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.PACK_STGTAB_DIRECTIVE (
   table_name         IN VARCHAR2,
   table_owner        IN VARCHAR2  := USER
   directive_id       IN NUMBER    := NULL,
   obj_list           IN OBJECTTAB := NULL) 
 RETURN NUMBER</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-EE4C47DA-0ED7-4EC1-81B4-3F1611C909DF">Parameters</p>
                        <div class="tblformal" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-657D2947-0CB9-4829-B095-A63F2638FB23">
                           <p class="titleintable">Table 154-6 <span class="italic"><span class="bold">PACK_STGTAB_DIRECTIVE Function Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PACK_STGTAB_DIRECTIVE Function Parameters" summary="This table describes the parameters of the DBMS_SPD.PACK_STGTAB_DIRECTIVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1591">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1594">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1599" headers="d856291e1591 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1599 d856291e1594 ">
                                       <p>Name of staging table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1607" headers="d856291e1591 ">
                                       <p><code class="codeph">table_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1607 d856291e1594 ">
                                       <p>Name of schema owner of staging table. Default is current schema.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1615" headers="d856291e1591 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1615 d856291e1594 ">
                                       <p>SQL plan directive ID. Default <code class="codeph">NULL</code> means all directives in the system.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1626" headers="d856291e1591 ">
                                       <p><code class="codeph">obj_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1626 d856291e1594 ">
                                       <p>Used to filter the directives to be packed based on the objects used in directives. If <code class="codeph">obj_list</code> is not <code class="codeph">NULL</code>, a directive is packed only if all the objects in the directive exist in <code class="codeph">obj_list</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-DD7D716C-3746-45D6-8130-D79AE85A0BEE">Return Values</p>
                        <p>Number of SQL plan directives packed.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-FB1A8AC4-E6EF-4EBE-9A87-AE164657F823">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-44001 INVALID_SCHEMA</code>: The input schema does not exist.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-29304 INVALID_STGTAB</code>: The specified staging table is invalid or does not exist.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code>: The specified object does not exist.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-3F0899E4-5E08-400A-96BB-D06D61B52D31">Usage Notes</p>
                        <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-962112CA-3E7B-4C18-934E-9CDEFFD63FBC__GUID-3248CEE0-FEEF-459D-AB7E-1C8353AB810F">Examples</p><pre class="oac_no_warn" dir="ltr">-- Pack all directives in the system
SELECT DBMS_SPD.PACK_STGTAB_DIRECTIVE('mydirtab') FROM DUAL;
 
SET SERVEROUTPUT ON;
-- Pack directives relevant to objects in SH schema
DECLARE
  my_list  DBMS_SPD.OBJECTTAB := DBMS_SPD.ObjectTab();
  dir_cnt  NUMBER;
BEGIN
  my_list.extend(1);
  my_list(1).owner := 'SH';           -- schema name
  my_list(1).object_name := NULL;     -- all tables in SH
  my_list(1).object_type := 'TABLE';  -- type of object
 
  dir_cnt :=
    DBMS_SPD.PACK_STGTAB_DIRECTIVE('mydirtab', obj_list =&gt; my_list);
  DBMS_OUTPUT.PUT_LINE('dir_cnt = ' || dir_cnt);
END;
 
-- Pack directives relevant to tables SALES and CUSTOMERS in SH schema
DECLARE
  my_list  DBMS_SPD.OBJECTTAB := DBMS_SPD.ObjectTab();
  dir_cnt  NUMBER;
BEGIN
  my_list.extend(2);
 
  -- SALES table
  my_list(1).owner := 'SH';
  my_list(1).object_name := 'SALES';
  my_list(1).object_type := 'TABLE';
 
  -- CUSTOMERS table
  my_list(2).owner := 'SH';
  my_list(2).object_name := 'CUSTOMERS';
  my_list(2).object_type := 'TABLE';
 
  dir_cnt :=
    DBMS_SPD.PACK_STGTAB_DIRECTIVE('mydirtab', obj_list =&gt; my_list);
  DBMS_OUTPUT.PUT_LINE('dir_cnt = ' || dir_cnt);
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74430"></a><a id="ARPLS74431"></a><a id="ARPLS74431"></a><a id="ARPLS74430"></a><div class="props_rev_3"><a id="GUID-E916B860-4C33-4B0E-814B-594E849631D5" name="GUID-E916B860-4C33-4B0E-814B-594E849631D5"></a><h4 id="ARPLS-GUID-E916B860-4C33-4B0E-814B-594E849631D5" class="sect4"><span class="enumeration_section">154.4.7 </span>SET_PREFS Procedure
                  </h4>
                  <div>
                     <p>This procedure allows the setting of different preferences for SQL plan directives. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-DD1E87FD-D97A-47BE-BC89-B50D7082D698">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.SET_PREFS (
   pname     IN   VARCHAR2,
   pvalue    IN   VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-2118E14E-A916-4084-8A5B-025595876D3E">Parameters</p>
                        <div class="tblformal" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-5D6B344A-BCF4-4D37-8724-1D7DB3E6D922">
                           <p class="titleintable">Table 154-7 <span class="italic"><span class="bold">SET_PREFS Procedure Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_PREFS Procedure Parameters" summary="This table describes the parameters of the DBMS_SPD.SET_PREFS subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1801">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1804">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1809" headers="d856291e1801 ">
                                       <p><code class="codeph">pname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1809 d856291e1804 ">
                                       <p>Preference name. The procedure supports the preference <code class="codeph">SPD_RETENTION_WEEKS</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1820" headers="d856291e1801 ">
                                       <p><code class="codeph">pvalue</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1820 d856291e1804 ">
                                       <p>Preference value.</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>SPD_RETENTION_WEEKS: SQL plan directives are purged if not used for more than the value set for this preference. Default is 53 (<code class="codeph">SPD_RETENTION_WEEKS_DEFAULT</code>) weeks, which means a directive is purged if it has been left unused for little over a year. It can be set to any value greater than or equal to 0. Also value <code class="codeph">NULL</code> can be passed to set the preference to default.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-2FCD3D2D-E7C6-4C9D-97DA-2C130D496345">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-B4FC59C6-338F-4082-9F8F-50877510A033">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SPD_RETENTION_WEEKS</code> - SQL plan directives are purged if not used for more than the value set for this preference.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E916B860-4C33-4B0E-814B-594E849631D5__GUID-BD523917-E831-4D2A-8C36-6514FF43863A">Examples</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SPD.SET_PREFS('SPD_RETENTION_WEEKS', '4');
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74432"></a><a id="ARPLS74433"></a><a id="ARPLS74433"></a><a id="ARPLS74432"></a><div class="props_rev_3"><a id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA" name="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA"></a><h4 id="ARPLS-GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA" class="sect4"><span class="enumeration_section">154.4.8 </span>UNPACK_STGTAB_DIRECTIVE Function
                  </h4>
                  <div>
                     <p>This procedure unpacks (imports) SQL plan directives from a staging table. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-9C20EA26-E3D4-4362-9550-9DF5157A4C3E">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_SPD.UNPACK_STGTAB_DIRECTIVE (
   table_name         IN VARCHAR2,
   table_owner        IN VARCHAR2  := USER,
   directive_id       IN NUMBER    := NULL,
   obj_list           IN OBJECTTAB := NULL) 
 RETURN NUMBER</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-CE4DE0B5-8957-4158-9157-F1CF3B8E57F7">Parameters</p>
                        <div class="tblformal" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-B9854FA6-0425-436A-A82B-64BC1FAA287B">
                           <p class="titleintable">Table 154-8 <span class="italic"><span class="bold">UNPACK_STGTAB_DIRECTIVE Function Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNPACK_STGTAB_DIRECTIVE Function Parameters" summary="This table describes the parameters of the DBMS_SPD.UNPACK_STGTAB_DIRECTIVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d856291e1984">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d856291e1987">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e1992" headers="d856291e1984 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e1992 d856291e1987 ">
                                       <p>Name of staging table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e2000" headers="d856291e1984 ">
                                       <p><code class="codeph">table_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e2000 d856291e1987 ">
                                       <p>Name of schema owner of staging table. Default is current schema.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e2008" headers="d856291e1984 ">
                                       <p><code class="codeph">directive_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e2008 d856291e1987 ">
                                       <p>SQL plan directive ID. Default <code class="codeph">NULL</code> means all directives in the system.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d856291e2019" headers="d856291e1984 ">
                                       <p><code class="codeph">obj_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d856291e2019 d856291e1987 ">
                                       <p>Used to filter the directives to be unpacked based on the objects used in directives. If <code class="codeph">obj_list</code> is not <code class="codeph">NULL</code>, a directive is unpacked only if all the objects in the directive exist in <code class="codeph">obj_list</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-8ED76707-9DFB-4C76-8C3C-62DACCD42420">Return Values</p>
                        <p>Number of SQL plan directives unpacked.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-D70E6B28-938D-435C-A46F-43E195EB8F2F">Exceptions</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ORA-38171 INSUFFICIENT_PRIVILEGE</code>: The user does not have proper privilege to perform the operation.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-28104 INVALID_INPUT</code>: The input value is not valid.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-44001 INVALID_SCHEMA</code>: The input schema does not exist.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-29304 INVALID_STGTAB</code>: The specified staging table is invalid or does not exist.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-13158 OBJECT_DOES_NOT_EXIST</code>: The specified object does not exist.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-AEC3CD2B-AFF9-4836-8521-3DECC7CB8331">Usage Notes</p>
                        <p>The <code class="codeph">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege is required to execute this procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F297E28-CF02-44DE-9348-D9CEFB9CC5FA__GUID-FC0139B9-D81C-4920-ADD4-05A5084909AF">Examples</p><pre class="oac_no_warn" dir="ltr">-- Unack all directives in the staging table
SELECT DBMS_SPD.UNPACK_STGTAB_DIRECTIVE('mydirtab') FROM DUAL;
 
SET SERVEROUTPUT ON;
-- Unpack directives relevant to objects in SH schema
DECLARE
  my_list  DBMS_SPD.OBJECTTAB := DBMS_SPD.ObjectTab();
  dir_cnt  number;
BEGIN
  my_list.extend(1);
  my_list(1).owner := 'SH';           -- schema name
  my_list(1).object_name := null;     -- all tables in SH
  my_list(1).object_type := 'TABLE';  -- type of object
 
  dir_cnt :=
    DBMS_SPD.UNPACK_STGTAB_DIRECTIVE('mydirtab', obj_list =&gt; my_list);
  DBMS_OUTPUT.PUT_LINE('dir_cnt = ' || dir_cnt);
END;
 
-- Unpack directives relevant to tables SALES and CUSTOMERS in SH schema
DECLARE
  my_list  DBMS_SPD.OBJECTTAB := DBMS_SPD.ObjectTab();
  dir_cnt  NUMBER;
begin
  my_list.extend(2);
 
  -- SALES table
  my_list(1).owner := 'SH';
  my_list(1).object_name := 'SALES';
  my_list(1).object_type := 'TABLE';
 
  -- CUSTOMERS table
  my_list(2).owner := 'SH';
  my_list(2).object_name := 'CUSTOMERS';
  my_list(2).object_type := 'TABLE';
 
  dir_cnt :=
    DBMS_SPD.UNPACK_STGTAB_DIRECTIVE('mydirtab', obj_list =&gt; my_list);
  DBMS_OUTPUT.PUT_LINE('dir_cnt = ' || dir_cnt);
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
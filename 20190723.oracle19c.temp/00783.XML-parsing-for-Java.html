<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Extensible Markup Language (XML) parsing for Java is described.">
      <meta name="description" content="Extensible Markup Language (XML) parsing for Java is described.">
      <title>XML Parsing for Java</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="Extensible Markup Language (XML) parsing for Java is described.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96292-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="getting-started-with-XDK-for-Java.html" title="Previous" type="text/html">
      <link rel="next" href="using-binary-XML-with-Java.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide">
    <meta name="dcterms.isVersionOf" content="ADXDK">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started-with-XDK-for-Java.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-binary-XML-with-Java.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-Java.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for Java</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XML Parsing for Java</li>
            </ol>
            <a id="GUID-33E0EA2B-A08A-462E-86B4-3F944409663D" name="GUID-33E0EA2B-A08A-462E-86B4-3F944409663D"></a><a id="ADXDK975"></a><a id="ADXDK3000"></a>
            
            <h2 id="ADXDK-GUID-33E0EA2B-A08A-462E-86B4-3F944409663D" class="sect2"><span class="enumeration_chapter">12 </span>XML Parsing for Java
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Extensible Markup Language (XML) parsing for Java is described.</p>
            </div><a id="ADXDK976"></a><a id="ADXDK19083"></a><div class="props_rev_4"><a id="GUID-4BC9CC77-9343-421D-A5A0-9F073961DC75" name="GUID-4BC9CC77-9343-421D-A5A0-9F073961DC75"></a><h3 id="ADXDK-GUID-4BC9CC77-9343-421D-A5A0-9F073961DC75" class="sect3">Introduction to XML Parsing for Java</h3>
               <div>
                  <p>XML parsing for Java is described.</p>
               </div><a id="ADXDK19084"></a><div class="props_rev_3"><a id="GUID-362910D4-3A78-4174-AE1E-6099AA852254" name="GUID-362910D4-3A78-4174-AE1E-6099AA852254"></a><h4 id="ADXDK-GUID-362910D4-3A78-4174-AE1E-6099AA852254" class="sect4">Prerequisites for Parsing with Java</h4>
                  <div>
                     <p>An Oracle XML parser reads an XML document and uses either a Document Object Model (DOM) application programming interface (API) or Simple API for XML (SAX) to access to its content and structure. You can parse in either validating or nonvalidating mode.</p>
                     <p>This chapter assumes that you are familiar with these technologies:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="glossary.html#GUID-0969F796-24C8-4A02-B671-B2EE8BD49F5B"><span class="xrefglossterm">Document Object Model (DOM)</span></a>: An in-memory tree representation of the structure of an XML document.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-6B57591D-3889-4BCD-8598-58ED2DC9E9EE"><span class="xrefglossterm">Simple API for XML (SAX)</span></a>: A standard for event-based XML parsing.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-B2E5C8F8-E243-45AB-B95E-9FCECDE2D247"><span class="xrefglossterm">Java API for XML Processing (JAXP)</span></a>: A standard interface for processing XML with Java applications that supports the DOM and SAX standards.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-F2AC11F4-F0D2-4EFB-B28B-8114CC0D7C38"><span class="xrefglossterm">document type definition (DTD)</span></a>: A set of rules that defines the valid structure of an XML document.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-25F8F1D2-58B2-4A3F-B38C-3C2652C9C19C"><span class="xrefglossterm">XML Schema</span></a>: A World Wide Web Consortium (W3C) recommendation that defines the valid structure of data types in an XML document.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-55AB1901-F16B-4FBD-9C2B-7164C71662B0" title="Related element names or attributes within an XML document. Namespace syntax and usage are defined by a W3C recommendation. For example, element <xsl:apply-templates/&gt; is identified as part of the XSL namespace. Namespaces are declared in an XML document or a DTD before they are used, using this attribute syntax: xmlns:xsl="http://www.w3.org/TR/WD-xsl"."><span class="xrefglossterm">XML Namespaces</span></a>: A mechanism for differentiating element and attribute names within an XML document.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-B612EFFA-1150-448C-B2FC-9DC488F970A4" title="An Extensible Markup Language (XML) representation that uses a compact, XML schema-aware format."><span class="xrefglossterm">binary XML</span></a>: An XML representation that uses the compact schema-aware format, in which both scalable and nonscalable DOMs can save XML documents.
                           </p>
                        </li>
                     </ul>
                     <p>For more information, see the list of XML resources in the <a href="preface.html#GUID-2CD1F6B6-C8EC-42E3-97F2-589AABF9AFFB" title="Oracle resources that are related to this document are listed.">Related Documents</a>.
                     </p>
                  </div>
               </div><a id="ADXDK19085"></a><div class="props_rev_3"><a id="GUID-B8341D44-3C69-4FDB-8319-6CC1E167DD4E" name="GUID-B8341D44-3C69-4FDB-8319-6CC1E167DD4E"></a><h4 id="ADXDK-GUID-B8341D44-3C69-4FDB-8319-6CC1E167DD4E" class="sect4">Standards and Specifications for XML Parsing for Java</h4>
                  <div>
                     <p>The DOM Level 1, Level 2, and Level 3 specifications are W3C Recommendations.</p>
                     <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_domtr" target="_blank">Document Object Model (DOM) Technical Reports</a> for the W3C DOM specifications.
                     </p>
                     <p>SAX is available in version 1.0 (deprecated) and 2.0. SAX is not a W3C specification. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=sax_project_org" target="_blank">SAX Project</a>.
                     </p>
                     <p>XML Namespaces are a W3C Recommendation. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_rec_xml_names" target="_blank">Namespaces in XML 1.0 (Third Edition)</a>.
                     </p>
                     <p>JCR 1.0 (also known as JSR 170)  defines a standard Java API for applications to interact with content repositories. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=jcp_org_jsr_170" target="_blank">JSR 170: Content Repository for Java technology API</a>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-B8341D44-3C69-4FDB-8319-6CC1E167DD4E__GUID-0B795078-287A-4F95-AE80-C868431A3116">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adxdb/index.html" target="_blank"><span><cite>Oracle XML&nbsp;DB Developer’s Guide</cite></span></a></p>
                     </div>
                     <p>JAXP is a standard API that enables use of DOM, SAX, XML Schema, and Extensible Stylesheet Language Transformation (XSLT), independent of processor implementation. </p>
                     <div class="infoboxnotealso" id="GUID-B8341D44-3C69-4FDB-8319-6CC1E167DD4E__GUID-23ABA394-4C19-4FD5-8FB7-E8E322177423">
                        <p class="notep1">See Also:</p>
                        <p><a href="XDK-standards.html#GUID-795A483B-12AC-4F6D-A606-6BE9DA963F0F" title="A description is given of the Oracle XML Developer's Kit (XDK) standards.">Oracle XML Developer's Kit Standards</a>, for information about standards supported by Oracle XML Developer's Kit (XDK)
                        </p>
                     </div>
                  </div>
               </div><a id="ADXDK19086"></a><div class="props_rev_3"><a id="GUID-695138D4-C21C-4467-98FC-7FE71F56116D" name="GUID-695138D4-C21C-4467-98FC-7FE71F56116D"></a><h4 id="ADXDK-GUID-695138D4-C21C-4467-98FC-7FE71F56116D" class="sect4">Large Node Handling</h4>
                  <div>
                     <p>DOM Stream access to XML nodes is done by Procedural Language/Structured Query Language (PL/SQL) and Java APIs. Nodes in an XML document can now far exceed 64 KB. Thus Joint Photographic Experts Group (JPEG), Word, PDF, rich text format (RTF), and HTML documents can be more readily stored.</p>
                     <div class="infoboxnotealso" id="GUID-695138D4-C21C-4467-98FC-7FE71F56116D__GUID-2E506D5D-0277-4D88-B2DE-C3559E99A68E">
                        <p class="notep1">See Also:</p>
                        <p> <a href="../adxdb/Java-DOM-API-for-XMLType.html#ADXDB1150" target="_blank"><span><cite>Oracle XML&nbsp;DB Developer’s Guide</cite></span></a> for complete details on the Java large node capabilities
                        </p>
                     </div>
                  </div>
               </div><a id="ADXDK19088"></a><a id="ADXDK19089"></a><a id="ADXDK19087"></a><div class="props_rev_3"><a id="GUID-5779A94D-7350-4678-A27E-49C710465744" name="GUID-5779A94D-7350-4678-A27E-49C710465744"></a><h4 id="ADXDK-GUID-5779A94D-7350-4678-A27E-49C710465744" class="sect4">XML Parsing in Java: Overview</h4>
                  <div>
                     <p><code class="codeph">XMLParser</code> is the abstract base class for the XML parser for Java. An instantiated parser invokes the <code class="codeph">parse()</code> method to read an XML document. <code class="codeph">XMLDOMImplementation</code> factory methods provide another way to parse binary XML to create scalable DOM.
                     </p>
                     <p><a href="XML-parsing-for-Java.html#GUID-5779A94D-7350-4678-A27E-49C710465744__I1041301">Figure 12-1</a> shows the basic parsing process, using <code class="codeph">XMLParser</code>. The figure does not apply to <code class="codeph">XMLDOMImplementation()</code>.
                     </p>
                     <div class="figure" id="GUID-5779A94D-7350-4678-A27E-49C710465744__I1041301">
                        <p class="titleinfigure">Figure 12-1 XML Parser Process</p><img src="img/adxdk040.gif" width="496" alt="Description of Figure 12-1 follows" title="Description of Figure 12-1 follows" longdesc="img_text/adxdk040.html"><br><a href="img_text/adxdk040.html">Description of "Figure 12-1 XML Parser Process"</a></div>
                     <!-- class="figure" -->
                     <p>These APIs provide a Java application with access to a parsed XML document:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>DOM API</p>
                           <p>DOM API parses XML documents and builds a tree representation of the documents in memory. To parse with DOM API, use either a <code class="codeph">DOMParser</code> object or the <code class="codeph">XMLDOMImplementation</code> interface factory methods to create a pluggable, scalable DOM (SDOM).
                           </p>
                        </li>
                        <li>
                           <p>SAX API</p>
                           <p>SAX API processes an XML document as a stream of events, which means that a program cannot access random locations in a document. To parse with SAX API, use a <code class="codeph">SAXParser</code> object.
                           </p>
                        </li>
                        <li>
                           <p>JAXP</p>
                           <p>JAXP is a Java-specific API that supports DOM, SAX, and Extensible Stylesheet Language (XSL). To parse with JAXP, use a <code class="codeph">DocumentBuilder</code> or <code class="codeph">SAXParser</code> object.
                           </p>
                        </li>
                     </ul>
                     <p>Subsequent topics use the sample XML document in <a href="XML-parsing-for-Java.html#GUID-5779A94D-7350-4678-A27E-49C710465744__CCHHDCHF">Example 12-1</a> to show the differences among DOM, SAX, and JAXP.
                     </p>
                     <div class="example" id="GUID-5779A94D-7350-4678-A27E-49C710465744__CCHHDCHF">
                        <p class="titleinexample">Example 12-1 Sample XML Document</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
  &lt;EMPLIST&gt;
    &lt;EMP&gt;
     &lt;ENAME&gt;MARY&lt;/ENAME&gt;
    &lt;/EMP&gt;
    &lt;EMP&gt;
     &lt;ENAME&gt;SCOTT&lt;/ENAME&gt;
    &lt;/EMP&gt;
  &lt;/EMPLIST&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK19090"></a><div class="props_rev_3"><a id="GUID-972BAACB-5EC4-402B-98AA-680E2E783654" name="GUID-972BAACB-5EC4-402B-98AA-680E2E783654"></a><h4 id="ADXDK-GUID-972BAACB-5EC4-402B-98AA-680E2E783654" class="sect4">DOM in XML Parsing</h4>
                  <div>
                     <p>DOM API builds an in-memory tree representation of the XML document. DOM API provides classes and methods to navigate and process the tree.</p>
                     <p>For example, given the document described in <a href="XML-parsing-for-Java.html#GUID-5779A94D-7350-4678-A27E-49C710465744__CCHHDCHF">Example 12-1</a>, the DOM API creates the in-memory tree shown in <a href="XML-parsing-for-Java.html#GUID-31A81B8C-193E-4CD1-B44D-75E425CB9C6A__CCHDFAJF">Figure 12-2</a>. 
                     </p>
                     <p>The important aspects of DOM API are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>DOM API provides a familiar tree structure of objects, making it easier to use than the SAX API.</p>
                        </li>
                        <li>
                           <p>The tree can be manipulated. For example, elements can be reordered and renamed, and both elements and attributes can be added and deleted.</p>
                        </li>
                        <li>
                           <p>Interactive applications can store the tree in memory, where users can access and manipulate it.</p>
                        </li>
                        <li>
                           <p>XKD includes DOM API extensions that support XPath. (Although the DOM standard does not support XPath, most XPath implementations use DOM.)</p>
                        </li>
                        <li>
                           <p>XDK supports SDOM. For details, see <a href="XML-parsing-for-Java.html#GUID-E2FFE494-A2A8-455E-871E-0E287A956016" title="XDK supports pluggable, scalable DOM (SDOM). This support relieves problems of memory inefficiency, limited scalability, and lack of control over the DOM configuration. SDOM creation and configuration are mainly supported using the XMLDOMImplementation class.">SDOM</a>.
                           </p>
                        </li>
                     </ul>
                  </div><a id="ADXDK19091"></a><div class="props_rev_3"><a id="GUID-DF103B42-D957-4C1E-B433-7C81C0D1EC37" name="GUID-DF103B42-D957-4C1E-B433-7C81C0D1EC37"></a><h5 id="ADXDK-GUID-DF103B42-D957-4C1E-B433-7C81C0D1EC37" class="sect5">DOM Creation</h5>
                     <div>
                        <p>In XDK for Java, there are three ways to create a DOM: parse a document using <code class="codeph">DOMParser</code>, use an <code class="codeph">XMLDOMImplementation</code> factory method (creates a scalable DOM), or use an <code class="codeph">XMLDocument</code> constructor (uncommon).
                        </p>
                     </div>
                  </div>
               </div><a id="ADXDK3400"></a><div class="props_rev_3"><a id="GUID-E2FFE494-A2A8-455E-871E-0E287A956016" name="GUID-E2FFE494-A2A8-455E-871E-0E287A956016"></a><h4 id="ADXDK-GUID-E2FFE494-A2A8-455E-871E-0E287A956016" class="sect4">SDOM</h4>
                  <div>
                     <p>XDK supports pluggable, scalable DOM (SDOM). This support relieves problems of memory inefficiency, limited scalability, and lack of control over the DOM configuration. SDOM creation and configuration are mainly supported using the <code class="codeph">XMLDOMImplementation</code> class.
                     </p>
                     <p>Important aspects of SDOM are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SDOM can use plug-in external XML in its existing forms.</p>
                           <p>Plug-in XML data can be in different forms—binary XML, <code class="codeph">XMLType</code>, third-party DOM, and so on. SDOM need not replicate external XML in an internal representation. SDOM is created on top of plug-in XML data through the <code class="codeph">Reader</code> and <code class="codeph">InfosetWriter</code> abstract interfaces.
                           </p>
                        </li>
                        <li>
                           <p>SDOM has transient nodes.</p>
                           <p>Nodes are created only if they are accessed and are freed if they are not used.</p>
                        </li>
                        <li>
                           <p>SDOM can use binary XML as both input and output.</p>
                           <p>SDOM can interact with data in two ways:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Through the abstract <code class="codeph">InfosetReader</code> and <code class="codeph">InfosetWriter</code> interfaces.
                                 </p>
                                 <p>To read and write <code class="codeph">BinXML</code> data, users can use the <code class="codeph">BinXML</code> implementation of <code class="codeph">InfosetReader</code> and <code class="codeph">InfosetWriter</code>. To read and write in other forms of XML infoset, users can use their own implementations.
                                 </p>
                              </li>
                              <li>
                                 <p>Through an implementation of the <code class="codeph">InfosetReader</code> and <code class="codeph">InfosetWriter</code> adaptor for <code class="codeph">BinXMLStream</code>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-binary-XML-with-Java.html#GUID-38D2C558-108C-449A-A9CD-BC2DAD163D5C" title="Topics here explain how to use Binary XML with Java.">Using Binary XML with Java</a></li>
                        </ul>
                     </div>
                  </div>
                  <a id="ADXDK19092"></a><div class="props_rev_3"><a id="GUID-FDAE7477-75D4-439C-9116-45281C11406A" name="GUID-FDAE7477-75D4-439C-9116-45281C11406A"></a><h5 id="ADXDK-GUID-FDAE7477-75D4-439C-9116-45281C11406A" class="sect5">Pluggable DOM Support</h5>
                     <div>
                        <p>Pluggable DOM lets you split the DOM API from the data layer. The DOM API is separated from the data by the <code class="codeph">InfosetReader</code> and <code class="codeph">InfosetWriter</code> interfaces. Using pluggable DOM, you can easily move XML data from one processor to another.
                        </p>
                        <p>The DOM API includes unified standard APIs on top of the data to support node access, navigation, update processes, and searching capability.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-parsing-for-Java.html#GUID-0208270A-89F0-4174-9EB5-3C2960F1E8B3" title="How to use SDOM is described.">Using SDOM</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="ADXDK19093"></a><div class="props_rev_3"><a id="GUID-3C68C8C0-D78B-4CBD-AC9D-CCC777CA03CA" name="GUID-3C68C8C0-D78B-4CBD-AC9D-CCC777CA03CA"></a><h5 id="ADXDK-GUID-3C68C8C0-D78B-4CBD-AC9D-CCC777CA03CA" class="sect5">Lazy Materialization</h5>
                     <div>
                        <p>Using lazy materialization, XDK creates only nodes that are accessed and frees unused nodes from memory. Applications can process very large XML documents with improved scalability.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-parsing-for-Java.html#GUID-D2C5A5C3-9753-4A27-A8FF-A36541E83C3D" title="Using lazy materialization, you can plug in an empty DOM, which can pull in data when needed and free (dereference) nodes when they are no longer needed. SDOM supports either manual or automatic node dereferencing.">Using Lazy Materialization</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="ADXDK19094"></a><div class="props_rev_3"><a id="GUID-7088780C-4754-4732-B097-35CC02906FEC" name="GUID-7088780C-4754-4732-B097-35CC02906FEC"></a><h5 id="ADXDK-GUID-7088780C-4754-4732-B097-35CC02906FEC" class="sect5">Configurable DOM Settings</h5>
                     <div>
                        <p>DOM configurations can be made to suit different applications. You can configure the DOM with different access patterns such as read-only, streaming, transient update, and shadow copy, achieving maximum memory use and performance in your applications.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-parsing-for-Java.html#GUID-C5348B7D-15FD-4374-8D61-C913DEBA3EBC" title="When you create a DOM using class XMLDOMImplementation, you can configure the DOM for different applications and achieve maximum efficiency by using method setAttribute.">Using Configurable DOM Settings</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="ADXDK173"></a><div class="props_rev_3"><a id="GUID-4A444B50-5AE6-4524-B2A6-89E60630BE0F" name="GUID-4A444B50-5AE6-4524-B2A6-89E60630BE0F"></a><h5 id="ADXDK-GUID-4A444B50-5AE6-4524-B2A6-89E60630BE0F" class="sect5">DOM Support for Fast Infoset</h5>
                     <div>
                        <p>Fast Infoset, developed by Oracle, is a compact binary XML format that represents the XML Infoset. This format has become the international standard ITU-T SG 17 and ISO/IEC JTC1 SC6. The Fast Infoset representation of XML Infoset is popular within the Java XML and Web Service communities.</p>
                        <p>Fast Infoset provides these benefits in comparison with other formats:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>It is more compact, parses faster, and serializes better than XML text.</p>
                           </li>
                           <li>
                              <p>It encodes and decodes faster than parsing of XML text, and Fast Infoset documents are generally 20 to 60 percent smaller than the corresponding XML text.</p>
                           </li>
                           <li>
                              <p>It leads other binary XML formats in performance and compression ratio, and handles small to large documents in a more balanced manner.</p>
                           </li>
                        </ul>
                        <p>SDOM is the XDK DOM configuration that supports scalability. It is built on top of serialized binary data to provide a DOM API to applications like XPath and XSLT. SDOM has an open plug-in architecture that reads binary data through an abstract API InfosetReader. The InfosetReader API allows SDOM to decode the binary data going forward, remember the start location of the nodes, and search a location to decode from there. This support enables SDOM to free nodes that are not in use and re-create those nodes from binary data when they are needed. When binary data is stored externally, such as in a file or a BLOB, SDOM is highly scalable.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-parsing-for-Java.html#GUID-6D67902A-AECA-4DF2-AAA5-C11C1E5E9BD2" title="The Fast Infoset to XDK/J model lets you use Fast Infoset techniques while working with XML content in Java.">Using Fast Infoset with SDOM</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDK19096"></a><a id="ADXDK19095"></a><div class="props_rev_3"><a id="GUID-31A81B8C-193E-4CD1-B44D-75E425CB9C6A" name="GUID-31A81B8C-193E-4CD1-B44D-75E425CB9C6A"></a><h4 id="ADXDK-GUID-31A81B8C-193E-4CD1-B44D-75E425CB9C6A" class="sect4">SAX in the XML Parser</h4>
                  <div>
                     <p>Unlike DOM, SAX is event-based, so SAX API does not build in-memory tree representations of input documents. SAX API processes the input document element by element and can report events and significant data to callback methods in the application. </p>
                     <p>For example, given the document described in <a href="XML-parsing-for-Java.html#GUID-5779A94D-7350-4678-A27E-49C710465744__CCHHDCHF">Example 12-1</a>, the SAX API parses it as the series of linear events shown in <a href="XML-parsing-for-Java.html#GUID-31A81B8C-193E-4CD1-B44D-75E425CB9C6A__CCHDFAJF">Figure 12-2</a>.
                     </p>
                     <p>The important aspects of SAX API are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>It is useful for search operations and other programs that need not manipulate an XML tree.</p>
                        </li>
                        <li>
                           <p>It does not consume significant memory resources.</p>
                        </li>
                        <li>
                           <p>It is faster than DOM when retrieving XML documents from a database.</p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-31A81B8C-193E-4CD1-B44D-75E425CB9C6A__CCHDFAJF">
                        <p class="titleinfigure">Figure 12-2 Comparing DOM (Tree-Based) and SAX (Event-Based) APIs</p><img src="img/adxdk041.gif" width="575" alt="Description of Figure 12-2 follows" title="Description of Figure 12-2 follows" longdesc="img_text/adxdk041.html"><br><a href="img_text/adxdk041.html">Description of "Figure 12-2 Comparing DOM (Tree-Based) and SAX (Event-Based) APIs"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="ADXDK19097"></a><div class="props_rev_3"><a id="GUID-706DD778-4C97-47CC-A7A5-DB9DBFD5C4C8" name="GUID-706DD778-4C97-47CC-A7A5-DB9DBFD5C4C8"></a><h4 id="ADXDK-GUID-706DD778-4C97-47CC-A7A5-DB9DBFD5C4C8" class="sect4">JAXP in the XML Parser</h4>
                  <div>
                     <p>JAXP lets you plug in an implementation of the SAX or DOM parser. The SAX and DOM APIs provided by XDK are examples of vendor-specific implementations supported by JAXP. The main advantage of JAXP is that it lets you write interoperable applications.</p>
                     <p>An application that uses features available through JAXP can very easily switch the implementation.</p>
                     <p>The main disadvantage of JAXP is that it runs more slowly than vendor-specific APIs. Also, JAXP lacks several features that Oracle-specific APIs provide. Some Oracle-specific features are available through the JAXP extension mechanism, but an application that uses these extensions loses the flexibility of switching implementation.</p>
                  </div>
               </div><a id="ADXDK19099"></a><a id="ADXDK19100"></a><a id="ADXDK19098"></a><div class="props_rev_3"><a id="GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E" name="GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E"></a><h4 id="ADXDK-GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E" class="sect4">Namespace Support in the XML Parser</h4>
                  <div>
                     <p>Namespaces can help you avoid name collisions between elements or attributes in XML documents.</p>
                     <p><a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHBFJHA">Example 12-2</a> is an XML document that uses the <code class="codeph">&lt;address&gt;</code> tag for both a company address and an employee address. An XML processor cannot distinguish between a company address and an employee address.
                     </p>
                     <p><a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a> is an XML document that uses these namespaces to distinguish between company and employee <code class="codeph">&lt;address&gt;</code> tags:
                     </p><pre class="oac_no_warn" dir="ltr">http://www.oracle.com/employee
http://www.oracle.com/company
</pre><p><a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a> associates the <code class="codeph">com</code> prefix with the first namespace and the <code class="codeph">emp</code> prefix with the second namespace.
                     </p>
                     <p>When parsing documents that use namespaces, it is helpful to remember these terms:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Namespace URI</span> is the URI assigned to <code class="codeph">xmlns</code>. In <a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a>, <code class="codeph">http://www.oracle.com/employee</code> and <code class="codeph">http://www.oracle.com/company</code> are namespace URIs.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Namespace prefix</span> is a namespace identifier declared with <code class="codeph">xmlns</code>. In <a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a>, <code class="codeph">emp</code> and <code class="codeph">com</code> are namespace prefixes.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Local name</span> is the name of an element or attribute without the namespace prefix. In <a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a>, <code class="codeph">employee</code> and <code class="codeph">company</code> are local names.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Qualified name</span> is the local name plus the prefix. In <a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a>, <code class="codeph">emp:employee</code> and <code class="codeph">com:company</code> are qualified names.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Expanded name</span> is the result of substituting the namespace URI for the namespace prefix. In <a href="XML-parsing-for-Java.html#GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">Example 12-3</a>, <code class="codeph">http://www.oracle.com/employee:employee</code> and <code class="codeph">http://www.oracle.com/company:company</code> are expanded element names.
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHBFJHA">
                        <p class="titleinexample">Example 12-2 Sample XML Document Without Namespaces</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version='1.0'?&gt;
&lt;addresslist&gt;
  <span class="bold">&lt;company&gt;</span>
    <span class="bold">&lt;address&gt;</span>500 Oracle Parkway,
             Redwood Shores, CA 94065
    <span class="bold">&lt;/address&gt;</span>
  <span class="bold">&lt;/company&gt;</span>
  &lt;!-- ... --&gt;
  <span class="bold">&lt;employee&gt;</span>
    &lt;lastname&gt;King&lt;/lastname&gt;
    <span class="bold">&lt;address&gt;</span>3290 W Big Beaver
             Troy, MI 48084
    <span class="bold">&lt;/address&gt;</span>
  <span class="bold">&lt;/employee&gt;</span>
  &lt;!-- ... --&gt;
&lt;/addresslist&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8FEA89F2-CAA9-407D-8932-ADE6243ED31E__CCHDECGB">
                        <p class="titleinexample">Example 12-3 Sample XML Document with Namespaces</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version='1.0'?&gt;
&lt;addresslist&gt;
&lt;!-- ... --&gt;
  &lt;com:company
    <span class="bold">xmlns:com="http://www.oracle.com/company"</span>&gt;
    <span class="bold">&lt;com:address&gt;</span>500 Oracle Parkway,
             Redwood Shores, CA 94065
    <span class="bold">&lt;/com:address&gt;</span>
  &lt;/com:company&gt;
  &lt;!-- ... --&gt;
  &lt;emp:employee
    <span class="bold">xmlns:emp="http://www.oracle.com/employee"</span>&gt;
    &lt;emp:lastname&gt;King&lt;/emp:lastname&gt;
    <span class="bold">&lt;emp:address&gt;</span>3290 W Big Beaver
             Troy, MI 48084
    <span class="bold">&lt;/emp:address&gt;</span>
&lt;/emp:employee&gt;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK19102"></a><a id="ADXDK19101"></a><div class="props_rev_3"><a id="GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7" name="GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7"></a><h4 id="ADXDK-GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7" class="sect4">Validation in the XML Parser</h4>
                  <div>
                     <p>To parse an XML document, invoke the <code class="codeph">parse()</code> method. Typically, you invoke initialization and termination methods in association with the <code class="codeph">parse()</code> method.
                     </p>
                     <p>The parser mode can be either validating or nonvalidating. In validating mode, the parser determines whether the document conforms to the specified DTD or XML schema. In nonvalidating mode, the parser checks only for well-formedness. To set the parser mode, invoke the <code class="codeph">setValidationMode()</code> method defined in <code class="codeph">oracle.xml.parser.v2.XMLParser</code>.
                     </p>
                     <p><a href="XML-parsing-for-Java.html#GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7__G1043218" title="This table shows the setValidationMode() flags that you can use in the XDK parser. Name of Mode, Mode Value in Java, and Description are the columns.">Table 12-1</a> shows the <code class="codeph">setValidationMode()</code> flags that you can use in the XDK parser.
                     </p>
                     <div class="tblformalwide" id="GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7__G1043218">
                        <p class="titleintable">Table 12-1 XML Parser for Java Validation Modes </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XML Parser for Java Validation Modes " summary="This table shows the setValidationMode() flags that you can use in the XDK parser. Name of Mode, Mode Value in Java, and Description are the columns." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d35651e1958">Name</th>
                                 <th align="left" valign="bottom" width="27%" id="d35651e1961">Value</th>
                                 <th align="left" valign="bottom" width="52%" id="d35651e1964">The XML Parser . . .</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e1969" headers="d35651e1958 ">
                                    <p>Nonvalidating mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e1969 d35651e1961 ">
                                    <p><code class="codeph">NONVALIDATING</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e1969 d35651e1964 ">
                                    <p>Verifies that the XML is well-formed and parses the data.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e1980" headers="d35651e1958 ">
                                    <p>DTD validating mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e1980 d35651e1961 ">
                                    <p><code class="codeph">DTD_VALIDATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e1980 d35651e1964 ">
                                    <p>Verifies that the XML is well-formed and validates the XML data against the DTD. The DTD defined in the <code class="codeph">&lt;!DOCTYPE&gt;</code> declaration must be relative to the location of the input XML document.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e1994" headers="d35651e1958 ">
                                    <p>Schema validation mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e1994 d35651e1961 ">
                                    <p><code class="codeph">SCHEMA_VALIDATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e1994 d35651e1964 ">
                                    <p>Validates the XML Document according to the XML schema specified for the document.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e2005" headers="d35651e1958 ">
                                    <p>LAX validation mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e2005 d35651e1961 ">
                                    <p><code class="codeph">SCHEMA_LAX_VALIDATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e2005 d35651e1964 ">
                                    <p>Tries to validate part or all of the instance document if it can find the schema definition. It does not raise an error if it cannot find the definition. See the sample program <code class="codeph">XSDLax.java</code> in the <code class="codeph">schema</code> directory.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e2022" headers="d35651e1958 ">
                                    <p>Strict validation mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e2022 d35651e1961 ">
                                    <p><code class="codeph">SCHEMA_STRICT_VALIDATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e2022 d35651e1964 ">
                                    <p>Tries to validate the whole instance document, raising errors if it cannot find the schema definition or if the instance does not conform to the definition.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e2033" headers="d35651e1958 ">
                                    <p>Partial validation mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e2033 d35651e1961 ">
                                    <p><code class="codeph">PARTIAL_VALIDATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e2033 d35651e1964 ">
                                    <p>Validates all or part of the input XML document according to the DTD, if present. If the DTD is not present, then the parser is set to nonvalidating mode.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d35651e2044" headers="d35651e1958 ">
                                    <p>Auto validation mode</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d35651e2044 d35651e1961 ">
                                    <p><code class="codeph">AUTO_VALIDATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d35651e2044 d35651e1964 ">
                                    <p>Validates all or part of the input XML document according to the DTD or XML schema, if present. If neither is present, then the parser is set to nonvalidating mode.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>In addition to setting the validation mode with <code class="codeph">setValidationMode()</code>, you can use the <code class="codeph">oracle.xml.parser.schema.XSDBuilder</code> class to build an XML schema and then configure the parser to use it by invoking the <code class="codeph">XMLParser.setXMLSchema()</code> method. In this case, the XML parser automatically sets the validation mode to <code class="codeph">SCHEMA_STRICT_VALIDATION</code> and ignores the <code class="codeph">schemaLocation</code> and <code class="codeph">noNamespaceSchemaLocation</code> attributes. You can also change the validation mode to <code class="codeph">SCHEMA_LAX_VALIDATION</code>. The <code class="codeph">XMLParser.setDoctype()</code> method is a parallel method for DTDs, but unlike <code class="codeph">setXMLSchema()</code> it does not alter the validation mode.
                     </p>
                     <div class="infoboxnotealso" id="GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7__GUID-EBD33428-9D47-49D4-99C1-4F3FDE7A16A0">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="using-XML-schema-processor-for-Java.html#GUID-F41C7DA2-A3DF-463B-A08C-24E8F0621450" title="Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.">Using the XML Schema Processor for Java</a> to learn about validation
                              </p>
                           </li>
                           <li>
                              <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a> to learn about the <code class="codeph">XMLParser</code> and <code class="codeph">XSDBuilder</code> classes
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADXDK19104"></a><a id="ADXDK19103"></a><div class="props_rev_3"><a id="GUID-644542C5-973E-4CF6-ABCE-85985A34DCAD" name="GUID-644542C5-973E-4CF6-ABCE-85985A34DCAD"></a><h4 id="ADXDK-GUID-644542C5-973E-4CF6-ABCE-85985A34DCAD" class="sect4">Compression in the XML Parser</h4>
                  <div>
                     <p>You can use the XML compressor, which is implemented in the XML parser, to compress and decompress XML documents. The compression algorithm is based on tokenizing the XML tags.</p>
                     <p>The assumption is that any XML document repeats some tags, so tokenizing these tags gives considerable compression. The degree of compression depends on the type of document: the larger the tags and the lesser the text content, the better the compression.</p>
                     <p>The Oracle XML parser generates a binary compressed output from either an in-memory DOM tree or SAX events generated from an XML document. <a href="XML-parsing-for-Java.html#GUID-644542C5-973E-4CF6-ABCE-85985A34DCAD__CCHHGEDF" title="This table describes differences between compression with the DOM and SAX APIs.">Table 12-2</a> describes the two types of compression.
                     </p>
                     <div class="tblformalwide" id="GUID-644542C5-973E-4CF6-ABCE-85985A34DCAD__CCHHGEDF">
                        <p class="titleintable">Table 12-2 XML Compression with DOM and SAX</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XML Compression with DOM and SAX" summary="This table describes differences between compression with the DOM and SAX APIs." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d35651e2208">Type</th>
                                 <th align="left" valign="bottom" width="40%" id="d35651e2211">Description</th>
                                 <th align="left" valign="bottom" width="47%" id="d35651e2214">Compression APIs</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d35651e2219" headers="d35651e2208 ">
                                    <p>DOM-based</p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d35651e2219 d35651e2211 ">
                                    <p>The goal is to reduce the size of the XML document without losing the structural and hierarchical information of the DOM tree. The parser serializes an in-memory DOM tree, corresponding to a parsed XML document, and generates a compressed XML output stream. The serialized stream regenerates the DOM tree when read back.</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d35651e2219 d35651e2214 ">
                                    <p>Use the <code class="codeph">writeExternal()</code> method to generate compressed XML and the <code class="codeph">readExternal()</code> method to reconstruct it. The methods are in the <code class="codeph">oracle.xml.parser.v2.XMLDocument</code> class.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d35651e2238" headers="d35651e2208 ">
                                    <p>SAX-based</p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d35651e2238 d35651e2211 ">
                                    <p>The SAX parser generates a compressed stream when it parses an XML file. SAX events generated by the SAX parser are handled by the SAX compression utility, which generates a compressed binary stream. When the binary stream is read back, the SAX events are generated.</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d35651e2238 d35651e2214 ">
                                    <p>To generate compressed XML, instantiate <code class="codeph">oracle.xml.comp.CXMLHandlerBase</code> by passing an output stream to the constructor. Pass the object to <code class="codeph">SAXParser.setContentHandler()</code> and then execute the <code class="codeph">parse()</code> method. Use the <code class="codeph">oracle.xml.comp.CXMLParser</code> class to decompress the XML.
                                    </p>
                                    <p><span class="bold">Note:</span> <code class="codeph">CXMLHandlerBase</code> implements both SAX 1.0 and 2.0, but because 1.0 is deprecated, Oracle recommends that you use the 2.0 API.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>The compressed streams generated from DOM and SAX are compatible; that is, you can use the compressed stream generated from SAX to generate the DOM tree and the reverse. As with XML documents in general, you can store the compressed XML data output in the database as a <code class="codeph">BLOB</code> data item.
                     </p>
                     <p>When a program parses a large XML document and creates a DOM tree in memory, it can affect performance. You can compress an XML document into a binary stream by serializing the DOM tree. You can regenerate the DOM tree without validating the XML data in the compressed stream. You can treat the compressed stream as a serialized stream, but the data in the stream is more controlled and managed than the compression implemented by Java default serialization.</p>
                     <div class="infoboxnote" id="GUID-644542C5-973E-4CF6-ABCE-85985A34DCAD__GUID-5883F728-AE8F-410F-9ECE-E727B29DBAB1">
                        <p class="notep1">Note:</p>
                        <p>Oracle Text cannot search a compressed XML document. Decompression reduces performance. If you are transferring files between client and server, then Hypertext Transfer Protocol (HTTP) compression can be easier.</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADXDK977"></a><a id="ADXDK19105"></a><div class="props_rev_3"><a id="GUID-800D5A59-4AAC-458D-ACAC-1CF617B88CE2" name="GUID-800D5A59-4AAC-458D-ACAC-1CF617B88CE2"></a><h3 id="ADXDK-GUID-800D5A59-4AAC-458D-ACAC-1CF617B88CE2" class="sect3">Using XML Parsing for Java: Overview</h3>
               <div>
                  <p>The fundamental component of any XML development is XML parsing. XML parsing for Java is a standalone XML component that parses an XML document (and possibly also a standalone DTD or XML schema) so that your program can process it.</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-800D5A59-4AAC-458D-ACAC-1CF617B88CE2__GUID-07DFBA87-59AA-4B2F-A14D-6933592CE1F2">
                        <p class="notep1">Note:</p>
                        <p>You can use the parser with any supported Java Virtual Machine (JVM). With Oracle 9i or later, you can load the parser into the database and use the internal Oracle JVM. For other database versions, run the parser in an external JVM and connect to a database through JDBC.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19107"></a><a id="ADXDK19106"></a><div class="props_rev_3"><a id="GUID-C9FB63BA-709F-49AD-922F-29F9E712974E" name="GUID-C9FB63BA-709F-49AD-922F-29F9E712974E"></a><h4 id="ADXDK-GUID-C9FB63BA-709F-49AD-922F-29F9E712974E" class="sect4">Using the XML Parser for Java: Basic Process</h4>
                  <div>
                     <p>Thd basic process of using the XML Parser for Java is described.</p>
                     <p><a href="XML-parsing-for-Java.html#GUID-C9FB63BA-709F-49AD-922F-29F9E712974E__I1038080">Figure 12-3</a> shows how to use the XML parser in a typical XML processing application.
                     </p>
                     <div class="figure" id="GUID-C9FB63BA-709F-49AD-922F-29F9E712974E__I1038080">
                        <p class="titleinfigure">Figure 12-3 XML Parser for Java</p><img src="img/adxdk002.gif" width="295" alt="Description of Figure 12-3 follows" title="Description of Figure 12-3 follows" longdesc="img_text/adxdk002.html"><br><a href="img_text/adxdk002.html">Description of "Figure 12-3 XML Parser for Java"</a></div>
                     <!-- class="figure" -->
                     <p>The basic process of the application shown in <a href="XML-parsing-for-Java.html#GUID-C9FB63BA-709F-49AD-922F-29F9E712974E__I1038080">Figure 12-3</a> is:
                     </p>
                     <ol>
                        <li>
                           <p>The DOM or SAX parser parses input XML documents. For example, the program can parse XML data documents, DTDs, XML schemas, and XSL stylesheets.</p>
                        </li>
                        <li>
                           <p>If you implement a validating parser, then the processor attempts to validate the XML data document against any supplied DTDs or XML schemas.</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-XSLT-processor-for-Java.html#GUID-E148A072-BDBE-40A4-A393-F4FC362382F5" title="An explanation is given of how to use the Extensible Stylesheet Language Transformation (XSLT) processor for Java.">Using the XSLT Processor for Java</a></li>
                           <li><a href="using-XML-schema-processor-for-Java.html#GUID-F41C7DA2-A3DF-463B-A08C-24E8F0621450" title="Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.">Using the XML Schema Processor for Java</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-C9FB63BA-709F-49AD-922F-29F9E712974E__GUID-4F46C7EC-9FF3-41B4-9002-5D4BC20DFA4C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a> for XML parser classes and methods
                        </p>
                     </div>
                  </div>
                  
               </div><a id="ADXDK19109"></a><a id="ADXDK19108"></a><div class="props_rev_3"><a id="GUID-996EFA8E-2C09-46C4-839B-F607D44B815C" name="GUID-996EFA8E-2C09-46C4-839B-F607D44B815C"></a><h4 id="ADXDK-GUID-996EFA8E-2C09-46C4-839B-F607D44B815C" class="sect4">Running the XML Parser for Java Demo Programs</h4>
                  <div>
                     <p>Demo programs for the XML parser for Java are included in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser</code>. 
                     </p>
                     <div class="section">
                        <p>The demo programs are distributed among the subdirectories described in <a href="XML-parsing-for-Java.html#GUID-996EFA8E-2C09-46C4-839B-F607D44B815C__CCHHGCFI" title="Describes the subdirectories of the /demo/java directory.">Table 12-3</a>.
                        </p>
                        <div class="tblformalwide" id="GUID-996EFA8E-2C09-46C4-839B-F607D44B815C__CCHHGCFI">
                           <p class="titleintable">Table 12-3 Java Parser Demos</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Java Parser Demos" summary="Describes the subdirectories of the /demo/java directory." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="10%" id="d35651e2597">Directory</th>
                                    <th align="left" valign="bottom" width="35%" id="d35651e2600">Contents</th>
                                    <th align="left" valign="bottom" width="55%" id="d35651e2603">These programs ...</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d35651e2608" headers="d35651e2597 ">
                                       <p><code class="codeph">common</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d35651e2608 d35651e2600 "><pre class="oac_no_warn" dir="ltr">class.xml
DemoUtil.java
empl.xml
family.dtd
family.xml
iden.xsl
NSExample.xml
traversal.xml</pre></td>
                                    <td align="left" valign="top" width="55%" headers="d35651e2608 d35651e2603 ">
                                       <p>Provide XML files and Java programs for general use with the XML parser. For example, you can use the XSLT stylesheet <code class="codeph">iden.xsl</code> to achieve an identity transformation of the XML files. <code class="codeph">DemoUtil.java</code> implements a helper method to create a URL from a file name, and is used by many other demo programs.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d35651e2625" headers="d35651e2597 ">
                                       <p><code class="codeph">comp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d35651e2625 d35651e2600 "><pre class="oac_no_warn" dir="ltr">DOMCompression.java
DOMDeCompression.java
SAXCompression.java
SAXDeCompression.java
SampleSAXHandler.java
sample.xml
xml.ser</pre></td>
                                    <td align="left" valign="top" width="55%" headers="d35651e2625 d35651e2603 ">
                                       <p>Show DOM and SAX compression:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">DOMCompression.java</code> compresses a DOM tree.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DOMDeCompression.java</code> reads back a DOM from a compressed stream.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SAXCompression.java</code> compresses the output from a SAX parser.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SAXDeCompression.java</code> regenerates SAX events from the compressed stream.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SampleSAXHandler.java</code> shows use of a handler to handle the events thrown by the SAX <code class="codeph">DeCompressor</code>.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d35651e2665" headers="d35651e2597 ">
                                       <p><code class="codeph">dom</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d35651e2665 d35651e2600 "><pre class="oac_no_warn" dir="ltr">AutoDetectEncoding.java
DOM2Namespace.java
DOMNamespace.java
DOMRangeSample.java
DOMSample.java
EventSample.java
I18nSafeXMLFileWritingSample.java
NodeIteratorSample.java
ParseXMLFromString.java
TreeWalkerSample.java</pre></td>
                                    <td align="left" valign="top" width="55%" headers="d35651e2665 d35651e2603 ">
                                       <p>Show uses of the DOM API:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">DOM2Namespace.java</code> shows how to use DOM Level 2.0 APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DOMNamespace.java</code> shows how to use Namespace extensions to DOM APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DOMRangeSample.java</code> shows how to use DOM Range APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DOMSample.java</code> shows basic use of the DOM APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EventSample.java</code> shows how to use DOM Event APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NodeIteratorSample.java</code> shows how to use DOM Iterator APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TreeWalkerSample.java</code> shows how to use DOM <code class="codeph">TreeWalker</code> APIs.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d35651e2715" headers="d35651e2597 ">
                                       <p><code class="codeph">jaxp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d35651e2715 d35651e2600 "><pre class="oac_no_warn" dir="ltr">JAXPExamples.java
age.xsl
general.xml
jaxpone.xml
jaxpone.xsl
jaxpthree.xsl
jaxptwo.xsl
oraContentHandler.java</pre></td>
                                    <td align="left" valign="top" width="55%" headers="d35651e2715 d35651e2603 ">
                                       <p>Show various uses of the JAXP:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">JAXPExamples.java</code> provides a few examples of how to use the JAXP 1.1 API to run the Oracle engine.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">oraContentHandler.java</code> implements a SAX content handler. The program invokes methods such as <code class="codeph">startDocument()</code>, <code class="codeph">endDocument()</code>, <code class="codeph">startElement()</code>, and <code class="codeph">endElement()</code> when it recognizes an XML tag.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d35651e2749" headers="d35651e2597 ">
                                       <p><code class="codeph">sax</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d35651e2749 d35651e2600 "><pre class="oac_no_warn" dir="ltr">SAX2Namespace.java
SAXNamespace.java
SAXSample.java
Tokenizer.java</pre></td>
                                    <td align="left" valign="top" width="55%" headers="d35651e2749 d35651e2603 ">
                                       <p>Show various uses of the SAX APIs:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">SAX2Namespace.java</code> shows how to use SAX 2.0.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SAXNamespace.java</code> shows how to use namespace extensions to SAX APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SAXSample.java</code> shows basic use of the SAX APIs.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">Tokenizer.java</code> shows how to use the <code class="codeph">XMLToken</code> interface APIs. The program implements the <code class="codeph">XMLToken</code> interface, which must be registered with the <code class="codeph">setTokenHandler()</code> method. A request for XML tokens is registered with the <code class="codeph">setToken()</code> method. During tokenizing, the parser does not validate the document and does not include or read internal/external utilities.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d35651e2793" headers="d35651e2597 ">
                                       <p><code class="codeph">xslt</code></p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d35651e2793 d35651e2600 "><pre class="oac_no_warn" dir="ltr">XSLSample.java
XSLSample2.java
match.xml
match.xsl
math.xml
math.xsl
number.xml
number.xsl
position.xml
position.xsl
reverse.xml
reverse.xsl
string.xml
string.xsl
style.txt
variable.xml
variable.xsl</pre></td>
                                    <td align="left" valign="top" width="55%" headers="d35651e2793 d35651e2603 ">
                                       <p>Show the transformation of documents with XSLT:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">XSLSample.java</code> shows how to use the XSL processing capabilities of the Oracle XML parser. It transforms an input XML document with a given input stylesheet. This demo builds the result of XSL transformations as a <code class="codeph">DocumentFragment</code> and so does not support <code class="codeph">xsl:output</code> features.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XSLSample2.java</code> transforms an input XML document with a given input stylesheet. The demo streams the result of the XSL transformation and so supports <code class="codeph">xsl:output</code> features.
                                             </p>
                                          </li>
                                       </ul>
                                       <p><span class="bold">See Also:</span> <a href="using-XSLT-processor-for-Java.html#GUID-A934BBC3-82AC-4620-A20F-F8AE7E6CA62E" title="Demo programs for the XSLT processor for Java are included in $ORACLE_HOME/xdk/demo/java/parser/xslt.">Running the XSLT Processor Demo Programs</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Documentation for how to compile and run the sample programs is located in the <code class="codeph">README</code> file. The basic procedure is:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Change into the <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser</code> directory (UNIX) or <code class="codeph">%ORACLE_HOME%\xdk\demo\java\parser</code> directory (Windows).</span></li>
                        <li class="stepexpand"><span>Set up your environment as described in <a href="getting-started-with-XDK-for-Java.html#GUID-EA5DB831-1D91-453A-AF7B-7B55343B1720" title="You can set up the XDK for Java environment using either an environment variable or a command-line option.">Setting Up the XDK for Java Environment</a>.</span></li>
                        <li class="stepexpand"><span>Change into each of these subdirectories and run <code class="codeph">make</code> (UNIX) or <code class="codeph">Make.bat</code> (Windows) at the command line. For example:</span><div><pre class="oac_no_warn" dir="ltr">cd comp;make;cd ..
cd jaxp;make;cd ..
cd sax;make;cd ..
cd dom;make;cd ..
cd xslt;make;cd ..
</pre><p>The make file compiles the source code in each directory, runs the programs, and writes the output for each program to a file with an <code class="codeph">*.out</code> extension.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>You can view the <code class="codeph">*.out</code> files to view the output for the programs.</span></li>
                     </ol>
                  </div>
               </div><a id="ADXDK19111"></a><a id="ADXDK19110"></a><div class="props_rev_3"><a id="GUID-204C527C-DED2-4FBA-861E-3378370529ED" name="GUID-204C527C-DED2-4FBA-861E-3378370529ED"></a><h4 id="ADXDK-GUID-204C527C-DED2-4FBA-861E-3378370529ED" class="sect4">Using the Java XML Parser Command-Line Utility (oraxml)</h4>
                  <div>
                     <p>The <code class="codeph">oraxml</code> utility, which is located in <code class="codeph">$ORACLE_HOME/bin</code> (UNIX) or <code class="codeph">%ORACLE_HOME%\bin</code> (Windows), is a command-line interface that parses XML documents. It checks for both well-formedness and validity.
                     </p>
                     <div class="section">
                        <p>To use <code class="codeph">oraxml</code>, ensure that:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Your <code class="codeph">CLASSPATH</code> is set up as described in <a href="getting-started-with-XDK-for-Java.html#GUID-EA5DB831-1D91-453A-AF7B-7B55343B1720" title="You can set up the XDK for Java environment using either an environment variable or a command-line option.">Setting Up the XDK for Java Environment</a>, and your <code class="codeph">CLASSPATH</code> environment variable references the <code class="codeph">xmlparserv2.jar</code> file.
                              </p>
                           </li>
                           <li>
                              <p>Your <code class="codeph">PATH</code> environment variable can find the Java interpreter that comes with your version of the Java Development Kit (JDK).
                              </p>
                           </li>
                        </ul>
                        <p><a href="XML-parsing-for-Java.html#GUID-204C527C-DED2-4FBA-861E-3378370529ED__BGBCBAIE" title="This table lists the oraxml command-line options. Option and Purpose are the columns.">Table 12-4</a> lists the <code class="codeph">oraxml</code> command-line options.
                        </p>
                        <div class="tblformal" id="GUID-204C527C-DED2-4FBA-861E-3378370529ED__BGBCBAIE">
                           <p class="titleintable">Table 12-4 oraxml Command-Line Options </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="oraxml Command-Line Options " summary="This table  lists the oraxml command-line options. Option and Purpose are the columns." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d35651e3033">Option</th>
                                    <th align="left" valign="bottom" width="70%" id="d35651e3036">Purpose</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3041" headers="d35651e3033 ">
                                       <p>-<code class="codeph">help</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3041 d35651e3036 ">
                                       <p>Prints the help message</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3050" headers="d35651e3033 ">
                                       <p>-<code class="codeph">version</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3050 d35651e3036 ">
                                       <p>Prints the release version</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3059" headers="d35651e3033 ">
                                       <p>-<code class="codeph">novalidate</code> <span class="italic"><code class="codeph">fileName</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3059 d35651e3036 ">
                                       <p>Checks whether the input file is well-formed</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3072" headers="d35651e3033 ">
                                       <p>-<code class="codeph">dtd</code> <span class="italic"><code class="codeph">fileName</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3072 d35651e3036 ">
                                       <p>Validates the input file with DTD Validation</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3085" headers="d35651e3033 ">
                                       <p>-<code class="codeph">schema</code> <span class="italic"><code class="codeph">fileName</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3085 d35651e3036 ">
                                       <p>Validates the input file with Schema Validation</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3098" headers="d35651e3033 ">
                                       <p>-<code class="codeph">log</code> <span class="italic"><code class="codeph">logfile</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3098 d35651e3036 ">
                                       <p>Writes the errors to the output log file</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3111" headers="d35651e3033 ">
                                       <p>-<code class="codeph">comp</code> <span class="italic"><code class="codeph">fileName</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3111 d35651e3036 ">
                                       <p>Compresses the input XML file</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3124" headers="d35651e3033 ">
                                       <p>-<code class="codeph">decomp</code> <span class="italic"><code class="codeph">fileName</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3124 d35651e3036 ">
                                       <p>Decompresses the input compressed file</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3137" headers="d35651e3033 ">
                                       <p>-<code class="codeph">enc</code> <span class="italic"><code class="codeph">fileName</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3137 d35651e3036 ">
                                       <p>Prints the encoding of the input file</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e3150" headers="d35651e3033 ">
                                       <p>-<code class="codeph">warning</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e3150 d35651e3036 ">
                                       <p>Shows warnings</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>For example, change into the <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/common</code> directory. You can validate the document <code class="codeph">family.xml</code> against <code class="codeph">family.dtd</code> by executing this command on the command line:
                        </p><pre class="oac_no_warn" dir="ltr">oraxml -dtd -enc family.xml
</pre><p>The output is:</p><pre class="oac_no_warn" dir="ltr">The encoding of the input file: UTF-8

The input XML file is parsed without errors using DTD validation mode.</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADXDK978"></a><a id="ADXDK19112"></a><div class="props_rev_3"><a id="GUID-B40FF06A-6390-4A8B-A0EB-0F8199977749" name="GUID-B40FF06A-6390-4A8B-A0EB-0F8199977749"></a><h3 id="ADXDK-GUID-B40FF06A-6390-4A8B-A0EB-0F8199977749" class="sect3">Parsing XML with DOM</h3>
               <div>
                  <p>The W3C standard library <code class="codeph">org.w3c.dom</code> defines the <code class="codeph">Document</code> class and classes for the components of a DOM. The Oracle XML parser includes the standard DOM APIs and complies with the W3C DOM recommendation.
                  </p>
                  <div class="section">
                     <p> Along with <code class="codeph">org.w3c.dom</code>, Oracle XML parsing includes classes that implement the DOM APIs and extends them to provide features such as printing document fragments and retrieving namespace information.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19113"></a><div class="props_rev_3"><a id="GUID-A96D7D89-037D-4107-AAAB-8EAD0FAEBF53" name="GUID-A96D7D89-037D-4107-AAAB-8EAD0FAEBF53"></a><h4 id="ADXDK-GUID-A96D7D89-037D-4107-AAAB-8EAD0FAEBF53" class="sect4">Using the DOM API for Java</h4>
                  <div>
                     <p>Java classes that you can use to implement DOM-based components in your XML application are described.</p>
                     <div class="section">
                        <p>Use these classes:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oracle.xml.parser.v2.DOMParser</code></p>
                              <p>This class implements an XML 1.0 parser according to the W3C recommendation. Because <code class="codeph">DOMParser</code> extends <code class="codeph">XMLParser</code>, all methods of <code class="codeph">XMLParser</code> are available to <code class="codeph">DOMParser</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.parser.v2.XMLDOMImplementation</code></p>
                              <p>This class contains factory methods used to create SDOM.</p>
                           </li>
                        </ul>
                        <p>You can also use the <code class="codeph">DOMNamespace</code> and <code class="codeph">DOM2Namespace</code> classes, which are sample programs included in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/dom</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="XML-parsing-for-Java.html#GUID-7F6C9BF4-3E01-4D40-A960-0D469B45C74E" title="The architecture of the DOM Parser is described.">DOM Parser Architecture</a></li>
                           <li><a href="XML-parsing-for-Java.html#GUID-3F0DFF8C-DB04-4B9A-8C3A-AFD748258A6C" title="How to create and use a pluggable, scalable DOM (SDOM) is explained.">Creating SDOM</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="ADXDK19115"></a><a id="ADXDK19114"></a><div class="props_rev_3"><a id="GUID-7F6C9BF4-3E01-4D40-A960-0D469B45C74E" name="GUID-7F6C9BF4-3E01-4D40-A960-0D469B45C74E"></a><h4 id="ADXDK-GUID-7F6C9BF4-3E01-4D40-A960-0D469B45C74E" class="sect4">DOM Parser Architecture</h4>
                  <div>
                     <p>The architecture of the DOM Parser is described.</p>
                     <div class="figure" id="GUID-7F6C9BF4-3E01-4D40-A960-0D469B45C74E__I1040902">
                        <p class="titleinfigure">Figure 12-4 Basic Architecture of the DOM Parser</p><img src="img/adxdk055.gif" width="595" alt="Description of Figure 12-4 follows" title="Description of Figure 12-4 follows" longdesc="img_text/adxdk055.html"><br><a href="img_text/adxdk055.html">Description of "Figure 12-4 Basic Architecture of the DOM Parser"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="ADXDK19118"></a><a id="ADXDK19119"></a><a id="ADXDK19120"></a><a id="ADXDK19116"></a><div class="props_rev_3"><a id="GUID-7C91F2D5-350D-4530-8988-295EF0B60D53" name="GUID-7C91F2D5-350D-4530-8988-295EF0B60D53"></a><h4 id="ADXDK-GUID-7C91F2D5-350D-4530-8988-295EF0B60D53" class="sect4">Performing Basic DOM Parsing</h4>
                  <div>
                     <p><code class="codeph">DOMSample.java</code> shows the basic steps for parsing an input XML document and accessing it through a DOM. <code class="codeph">DOMSample.java</code> receives an XML file as input, parses it, and prints the elements and attributes in the DOM tree.
                     </p>
                     <div class="section">
                        <p>The steps, which provide possible methods and interfaces that you can use, are:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a <code class="codeph">DOMParser</code> object (a parser) by invoking the <code class="codeph">DOMParser()</code> constructor.</span><div>
                              <p>The code in <code class="codeph">DOMSample.java</code> is:
                              </p><pre class="oac_no_warn" dir="ltr">DOMParser parser = new DOMParser();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Configure the parser properties, using the methods in <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHHJABF" title="This table describes methods that you can use to set various properties of the DOM parser.">Table 12-5</a>.</span><div>
                              <p>This code fragment from <code class="codeph">DOMSample.java</code> specifies the error output stream, sets the validation mode to DTD validation, and enables warning messages: 
                              </p><pre class="oac_no_warn" dir="ltr">parser.setErrorStream(System.err);
parser.setValidationMode(DOMParser.DTD_VALIDATION);
parser.showWarnings(true);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Parse the input XML document by invoking the <code class="codeph">parse()</code> method, which builds a tree of <code class="codeph">Node</code> objects in memory.</span><div>
                              <p>This code fragment from <code class="codeph">DOMSample.java</code> parses an instance of the <code class="codeph">java.net.URL</code> class:
                              </p><pre class="oac_no_warn" dir="ltr">parser.parse(url);
</pre><p>The XML input can be a file, a string buffer, or a URL. As the following code fragment shows, <code class="codeph">DOMSample.java</code> accepts a file name as a parameter and invokes the <code class="codeph">createURL</code> helper method to construct a URL object that can be passed to the parser:
                              </p><pre class="oac_no_warn" dir="ltr">public class DOMSample
{
   static public void main(String[] argv)
   {
      try
      {
         if (argv.length != 1)
         {
            // Must pass in the name of the XML file.
            System.err.println("Usage: java DOMSample filename");
            System.exit(1);
         }
         ...
         // Generate a URL from the filename.
         URL url = DemoUtil.createURL(argv[0]);
         ...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Invoke <code class="codeph">getDocument()</code> to get a handle to the root of the in-memory DOM tree, which is an <code class="codeph">XMLDocument</code> object.</span><div>
                              <p>You can use this handle to access every part of the parsed XML document. The <code class="codeph">XMLDocument</code> class implements the interfaces in <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHIFIEF" title="Lists some of the interfaces implemented by XMLDocument.">Table 12-6</a>.
                              </p>
                              <p>The code fragment from <code class="codeph">DOMSample.java</code> is:
                              </p><pre class="oac_no_warn" dir="ltr">XMLDocument doc = parser.getDocument();
</pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHBFACH"><span>Get and manipulate DOM nodes of the retrieved document by invoking <code class="codeph">XMLDocument</code> methods in <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHBDBGE" title="This table describes useful methods of the XMLDocument class.">Table 12-7</a>.</span><div>
                              <p>This code fragment from <code class="codeph">DOMSample.java</code> uses the <code class="codeph">DOMParser.print()</code> method to print the elements and attributes of the DOM tree:
                              </p><pre class="oac_no_warn" dir="ltr">System.out.print("The elements are: ");
printElements(doc);
 
System.out.println("The attributes of each element are: ");
printElementAttributes(doc);
</pre><p>The following code fragment from <code class="codeph">DOMSample.java</code> implements the <code class="codeph">printElements()</code> method, which invokes <code class="codeph">getElementsByTagName()</code> to get a list of all the elements in the DOM tree. Then the code loops through the list, invoking <code class="codeph">getNodeName()</code> to print the name of each element:
                              </p><pre class="oac_no_warn" dir="ltr">static void printElements(Document doc)
{
   NodeList nl = doc.getElementsByTagName("*");
   Node n;

   for (int i=0; i&lt;nl.getLength(); i++)
   {
      n = nl.item(i);
      System.out.print(n.getNodeName() + " ");
   }
 
   System.out.println();
}
</pre><p>The following code fragment from <code class="codeph">DOMSample.java</code> implements the <code class="codeph">printElementAttributes()</code> method, which invokes <code class="codeph">Document.getElementsByTagName()</code> to get a list of all the elements in the DOM tree. Then the code loops through the list, invoking <code class="codeph">Element.getAttributes()</code> to get the list of attributes for the element and invoking <code class="codeph">Node.getNodeName()</code> to get the attribute name and <code class="codeph">Node.getNodeValue()</code> to get the attribute value:
                              </p><pre class="oac_no_warn" dir="ltr">static void printElementAttributes(Document doc)
{
   NodeList nl = doc.getElementsByTagName("*");
   Element e;
   Node n;
   NamedNodeMap nnm;
 
   String attrname;
   String attrval;
   int i, len;
 
   len = nl.getLength();

   for (int j=0; j &lt; len; j++)
   {
      e = (Element)nl.item(j);
      System.out.println(e.getTagName() + ":");
      nnm = e.getAttributes();
 
      if (nnm != null)
      {
         for (i=0; i&lt;nnm.getLength(); i++)
         {
            n = nnm.item(i);
            attrname = n.getNodeName();
            attrval = n.getNodeValue();
            System.out.print(" " + attrname + " = " + attrval);
         }
      }
      System.out.println();
   }
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Reset the parser state by invoking the <code class="codeph">reset()</code> method. The parser is now ready to parse a new document.</span></li>
                     </ol>
                     <div class="section">
                        <p><a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHHJABF" title="This table describes methods that you can use to set various properties of the DOM parser.">Table 12-5</a> summarizes the <code class="codeph">DOMParser</code> configuration methods.
                        </p>
                        <div class="tblformal" id="GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHHJABF">
                           <p class="titleintable">Table 12-5 DOMParser Configuration Methods</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DOMParser Configuration Methods" summary="This table describes methods that you can use to set various properties of the DOM parser." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d35651e3756">Method</th>
                                    <th align="left" valign="bottom" width="67%" id="d35651e3759">Purpose</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d35651e3764" headers="d35651e3756 ">
                                       <p><code class="codeph">setBaseURL()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d35651e3764 d35651e3759 ">
                                       <p>Sets the base URL for loading external entities and DTDs. Invoke this method if the XML document is an <code class="codeph">InputStream</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d35651e3775" headers="d35651e3756 ">
                                       <p><code class="codeph">setDoctype()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d35651e3775 d35651e3759 ">
                                       <p>Specifies the DTD to use when parsing.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d35651e3783" headers="d35651e3756 ">
                                       <p><code class="codeph">setErrorStream()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d35651e3783 d35651e3759 ">
                                       <p>Creates an output stream for the output of errors and warnings.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d35651e3791" headers="d35651e3756 ">
                                       <p><code class="codeph">setPreserveWhitespace()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d35651e3791 d35651e3759 ">
                                       <p>Instructs the parser to preserve the white space in the input XML document.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d35651e3799" headers="d35651e3756 ">
                                       <p><code class="codeph">setValidationMode()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d35651e3799 d35651e3759 ">
                                       <p>Sets the validation mode of the parser. <a href="XML-parsing-for-Java.html#GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7__G1043218" title="This table shows the setValidationMode() flags that you can use in the XDK parser. Name of Mode, Mode Value in Java, and Description are the columns.">Table 12-1</a> describes the flags that you can use with this method.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d35651e3812" headers="d35651e3756 ">
                                       <p><code class="codeph">showWarnings()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d35651e3812 d35651e3759 ">
                                       <p>Specifies whether the parser prints warnings.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHIFIEF" title="Lists some of the interfaces implemented by XMLDocument.">Table 12-6</a> summarizes the interfaces that the <code class="codeph">XMLDocument</code> class implements.
                        </p>
                        <div class="tblformal" id="GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHIFIEF">
                           <p class="titleintable">Table 12-6 Some Interfaces Implemented by XMLDocument</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Some Interfaces Implemented by XMLDocument" summary="Lists some of the interfaces implemented by XMLDocument." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d35651e3838">Interface</th>
                                    <th align="left" valign="bottom" width="69%" id="d35651e3841">What Interface Defines</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d35651e3846" headers="d35651e3838 ">
                                       <p><code class="codeph">org.w3c.dom.Node</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d35651e3846 d35651e3841 ">
                                       <p>A single node in the document tree and methods to access and process the node.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d35651e3854" headers="d35651e3838 ">
                                       <p><code class="codeph">org.w3c.dom.Document</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d35651e3854 d35651e3841 ">
                                       <p>A <code class="codeph">Node</code> that represents the entire XML document.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d35651e3865" headers="d35651e3838 ">
                                       <p><code class="codeph">org.w3c.dom.Element</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d35651e3865 d35651e3841 ">
                                       <p>A <code class="codeph">Node</code> that represents an XML element.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHBDBGE" title="This table describes useful methods of the XMLDocument class.">Table 12-7</a> summarizes the methods for getting and manipulating DOM tree nodes.
                        </p>
                        <div class="tblformal" id="GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHBDBGE">
                           <p class="titleintable">Table 12-7 Methods for Getting and Manipulating DOM Tree Nodes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Methods for Getting and Manipulating DOM Tree Nodes" summary="This table describes useful methods of the XMLDocument class." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d35651e3891">Method</th>
                                    <th align="left" valign="bottom" width="68%" id="d35651e3894">Purpose</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3899" headers="d35651e3891 ">
                                       <p><code class="codeph">getAttributes()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3899 d35651e3894 ">
                                       <p>Generates a <code class="codeph">NamedNodeMap</code> containing the attributes of this node (if it is an element) or <code class="codeph">null</code> otherwise.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3913" headers="d35651e3891 ">
                                       <p><code class="codeph">getElementsbyTagName()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3913 d35651e3894 ">
                                       <p>Retrieves recursively all elements that match a given tag name under a certain level. This method supports the <code class="codeph">*</code> tag, which matches any tag. Invoke <code class="codeph">getElementsByTagName("*")</code> through the handle to the root of the document to generate a list of all elements in the document.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3927" headers="d35651e3891 ">
                                       <p><code class="codeph">getExpandedName()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3927 d35651e3894 ">
                                       <p>Gets the expanded name of the element. This method is specified in the <code class="codeph">NSName</code> interface.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3938" headers="d35651e3891 ">
                                       <p><code class="codeph">getLocalName()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3938 d35651e3894 ">
                                       <p>Gets the local name for this element. If an element name is <code class="codeph">&lt;E1:locn xmlns:E1="http://www.oracle.com/"/&gt;</code>, then <code class="codeph">locn</code> is the local name.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3952" headers="d35651e3891 ">
                                       <p><code class="codeph">getNamespaceURI()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3952 d35651e3894 ">
                                       <p>Gets the namespace URI of this node, or <code class="codeph">null</code> if it is unspecified. If an element name is <code class="codeph">&lt;E1:locn xmlns:E1="http://www.oracle.com/"/&gt;</code>, then <code class="codeph">http://www.oracle.com</code> is the namespace URI.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3969" headers="d35651e3891 ">
                                       <p><code class="codeph">getNodeName()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3969 d35651e3894 ">
                                       <p>Gets the name of a node in the DOM tree.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3977" headers="d35651e3891 ">
                                       <p><code class="codeph">getNodeValue()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3977 d35651e3894 ">
                                       <p>Gets the value of this node, depending on its type. This node is in the <code class="codeph">Node</code> interface.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3988" headers="d35651e3891 ">
                                       <p><code class="codeph">getPrefix()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3988 d35651e3894 ">
                                       <p>Gets the namespace prefix for an element.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e3996" headers="d35651e3891 ">
                                       <p><code class="codeph">getQualifiedName()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e3996 d35651e3894 ">
                                       <p>Gets the qualified name for an element. If an element name is <code class="codeph">&lt;E1:locn xmlns:E1="http://www.oracle.com/"/&gt;</code>, then <code class="codeph">E1:locn</code> is the qualified name..
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d35651e4010" headers="d35651e3891 ">
                                       <p><code class="codeph">getTagName()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d35651e4010 d35651e3894 ">
                                       <p>Gets the name of an element in the DOM tree.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADXDK979"></a><a id="ADXDK19121"></a><div class="props_rev_3"><a id="GUID-3F0DFF8C-DB04-4B9A-8C3A-AFD748258A6C" name="GUID-3F0DFF8C-DB04-4B9A-8C3A-AFD748258A6C"></a><h4 id="ADXDK-GUID-3F0DFF8C-DB04-4B9A-8C3A-AFD748258A6C" class="sect4">Creating SDOM</h4>
                  <div>
                     <p>How to create and use a pluggable, scalable DOM (SDOM) is explained.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19122"></a><div class="props_rev_3"><a id="GUID-0208270A-89F0-4174-9EB5-3C2960F1E8B3" name="GUID-0208270A-89F0-4174-9EB5-3C2960F1E8B3"></a><h5 id="ADXDK-GUID-0208270A-89F0-4174-9EB5-3C2960F1E8B3" class="sect5">Using SDOM</h5>
                     <div>
                        <p>How to use SDOM is described.</p>
                        <div class="section">
                           <p>SDOM has the DOM API split from the data. The underlying data can be either internal data or plug-in data, and both can be in binary XML.</p>
                           <p><span class="bold">Internal data</span> is XML text that has not been parsed. To be plugged in, internal data must be saved as binary XML and then parsed by the <code class="codeph">DOMParser</code>. The parsed binary XML can be then be plugged into the <code class="codeph">InfoSetReader</code> of the DOM API layer. The <code class="codeph">InfosetReader</code> argument is the interface to the underlying XML data.
                           </p>
                           <p><span class="bold">Plug-in data</span> is XML text that has been parsed, and can therefore be transferred from one processor to another.
                           </p>
                           <p>To create an SDOM, you plug in XML data through the <code class="codeph">InfosetReader</code> API on an <code class="codeph">XMLDOMImplementation</code> object. For example:
                           </p><pre class="pre codeblock"><code>public Document createDocument(InfosetReader reader) throws DOMException
</code></pre><p>The <code class="codeph">InfosetReader</code> API is implemented on top of <code class="codeph">BinXMLStream</code>. Optional adaptors for other forms of XML data (such as dom4j, JDOM, or Java Database Connectivity (JDBC)) may also be supported. You can also plug in your own implementations.
                           </p>
                           <p><code class="codeph">InfosetReader</code> serves as the interface between the scalable DOM API layer and the underlying data. It is a generic, stream-based pull API that accesses XML data. The <code class="codeph">InfosetReader</code> retrieves sequential events from the XML stream and queries the state and data from these events. The following code scans the XML data and retrieves the <code class="codeph">QName</code>s and attributes of all elements:
                           </p><pre class="pre codeblock"><code>InfosetReader reader;
While (reader.hasNext())
{
   reader.next();
   if (reader.getEventType() == START_ELEMENT)
   {
        QName name = reader.getQName();
        TypedAttributeList attrList = reader.getAttributeList();
     }
}</code></pre></div>
                        <!-- class="section" -->
                     </div><a id="ADXDK19123"></a><div class="props_rev_3"><a id="GUID-5DF8A264-91E3-4EA7-B058-BD71381A76AD" name="GUID-5DF8A264-91E3-4EA7-B058-BD71381A76AD"></a><h6 id="ADXDK-GUID-5DF8A264-91E3-4EA7-B058-BD71381A76AD" class="sect6">InfosetReader Options</h6>
                        <div>
                           <p>Options supported by the <code class="codeph">InfosetReader</code> API are presented.
                           </p>
                           <p>These are the supported operations:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Copying (Optional, but <code class="codeph">InfosetReader</code> from <code class="codeph">BinXMLStream</code> always supports it)
                                 </p>
                                 <p>To support shadow copying of DOM across documents, you can create a new copy of <code class="codeph">InfosetReader</code> to ensure thread safety, using the <code class="codeph">Clone</code> method. For more information, see <a href="XML-parsing-for-Java.html#GUID-000BEA9C-8AAB-4C04-9BFB-A4BCBC18ACC9" title="Shadow copy avoids data replication by letting DOM nodes share their data.">Using Shadow Copy</a>.
                                 </p>
                              </li>
                              <li>
                                 <p>Moving Focus (Optional)</p>
                                 <p>To support lazy materialization, the <code class="codeph">InfosetReader</code> may have the ability to move focus to any location specified by <code class="codeph">offset</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">If (reader.hasSeekSupport())
   <span class="bold">reader.seek(offset</span>);
</pre><p>For more information, see <a href="XML-parsing-for-Java.html#GUID-D2C5A5C3-9753-4A27-A8FF-A36541E83C3D" title="Using lazy materialization, you can plug in an empty DOM, which can pull in data when needed and free (dereference) nodes when they are no longer needed. SDOM supports either manual or automatic node dereferencing.">Using Lazy Materialization</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="ADXDK19124"></a><div class="props_rev_3"><a id="GUID-D2842CD2-FA88-4F66-894F-2051675421AD" name="GUID-D2842CD2-FA88-4F66-894F-2051675421AD"></a><h6 id="ADXDK-GUID-D2842CD2-FA88-4F66-894F-2051675421AD" class="sect6">InfosetWriter</h6>
                        <div>
                           <p><code class="codeph">InfosetWriter</code> is an extension of the <code class="codeph">InfosetReader</code> API that supports data writing. XDK implements <code class="codeph">InfosetWriter</code> on top of binary XML. You cannot modify this implementation.
                           </p>
                        </div>
                     </div><a id="ADXDK19125"></a><div class="props_rev_3"><a id="GUID-DAF4040A-AC94-4D84-895E-2C3EC6642E2F" name="GUID-DAF4040A-AC94-4D84-895E-2C3EC6642E2F"></a><h6 id="ADXDK-GUID-DAF4040A-AC94-4D84-895E-2C3EC6642E2F" class="sect6">Saving XML Text as Binary XML</h6>
                        <div>
                           <p>To create a scalable DOM from XML text, you must save the XML text as either binary XML or references to binary XML before you can run <code class="codeph">DOMParser</code> on it. To save the XML text as binary XML, set the <code class="codeph">doc.save</code> argument to <code class="codeph">false</code>.
                           </p>
                           <div class="section"><pre class="pre codeblock"><code>XMLDocument doc;
InfosetWriter writer;
doc.save(writer, <span class="bold">false</span>);
writer.close();
</code></pre><p>If you know that the data source is available for deserialization, then you can save the section reference of binary XML instead of the actual data by setting the <code class="codeph">doc.save</code> argument to <code class="codeph">true</code>.
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="using-binary-XML-with-Java.html#GUID-38D2C558-108C-449A-A9CD-BC2DAD163D5C" title="Topics here explain how to use Binary XML with Java.">Using Binary XML with Java</a></li>
                              </ul>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADXDK1074"></a><a id="ADXDK19126"></a><div class="props_rev_3"><a id="GUID-D2C5A5C3-9753-4A27-A8FF-A36541E83C3D" name="GUID-D2C5A5C3-9753-4A27-A8FF-A36541E83C3D"></a><h5 id="ADXDK-GUID-D2C5A5C3-9753-4A27-A8FF-A36541E83C3D" class="sect5">Using Lazy Materialization</h5>
                     <div>
                        <p>Using lazy materialization, you can plug in an empty DOM, which can pull in data when needed and free (dereference) nodes when they are no longer needed. SDOM supports either manual or automatic node dereferencing.</p>
                     </div><a id="ADXDK19127"></a><div class="props_rev_3"><a id="GUID-F0934CA5-F70E-4A1A-9001-CDCC3565FEC9" name="GUID-F0934CA5-F70E-4A1A-9001-CDCC3565FEC9"></a><h6 id="ADXDK-GUID-F0934CA5-F70E-4A1A-9001-CDCC3565FEC9" class="sect6">Pulling Data on Demand</h6>
                        <div>
                           <p>The plug-in DOM architecture creates an empty DOM, which contains a single <code class="codeph">Document</code> node as the root of the tree. The rest of the DOM tree can be expanded later if it is accessed. 
                           </p>
                           <p>A node can have unexpanded child and sibling nodes, but its parent and ancestors are always expanded. Each node maintains the <code class="codeph">InfoSetReader.Offset</code> property of the next node so that the DOM can pull additional data to create the next node.
                           </p>
                           <p>Depending on access method type, DOM nodes can expand more than the set of nodes returned:</p>
                           <div class="tblformal" id="GUID-F0934CA5-F70E-4A1A-9001-CDCC3565FEC9__GUID-9DD24819-2379-4F98-AA7B-51D9355F7FB0">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Lists and briefly describes the DOM node access methods." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="29%" id="d35651e4736">Access Method</th>
                                       <th align="left" valign="bottom" width="71%" id="d35651e4739">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d35651e4744" headers="d35651e4736 ">
                                          <p>DOM Navigation</p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d35651e4744 d35651e4739 ">
                                          <p>Allows access to neighboring nodes such as first child, last child, parent, previous sibling, or next sibling. If node creation is needed, it is done in document order.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d35651e4751" headers="d35651e4736 ">
                                          <p>Identifier (ID) Indexing</p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d35651e4751 d35651e4739 ">
                                          <p>A DTD or XML schema can specify nodes with the type ID. If the DOM supports ID indexing, those nodes can be directly retrieved using the index. In scalable DOM, retrieval by index does not cause the expansion of all previous nodes, but their ancestor nodes are materialized.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="29%" id="d35651e4758" headers="d35651e4736 ">
                                          <p>XPath Expressions</p>
                                       </td>
                                       <td align="left" valign="top" width="71%" headers="d35651e4758 d35651e4739 ">
                                          <p>XPath evaluation can cause materialization of all intermediate nodes in memory. For example, the descendent axis '//' expands the whole subtree, although some nodes might be released after evaluation.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                     </div><a id="ADXDK1075"></a><div class="props_rev_3"><a id="GUID-58BABDA4-5BAE-4FD6-BE4C-E93F4D6E4294" name="GUID-58BABDA4-5BAE-4FD6-BE4C-E93F4D6E4294"></a><h6 id="ADXDK-GUID-58BABDA4-5BAE-4FD6-BE4C-E93F4D6E4294" class="sect6">Using Automatic Node Dereferencing</h6>
                        <div>
                           <p>DOM navigation support requires additional links between nodes. In automatic dereferencing mode, weak links can be automatically dereferenced during garbage collection. To use automatic node dereferencing, set the <code class="codeph">PARTIAL_DOM</code> attribute to <code class="codeph">Boolean.TRUE</code>.
                           </p>
                           <div class="section">
                              <p>Node release depends on link importance. Links to parent nodes cannot be dropped, because ancestors provide context for in-scope namespaces and it is difficult to retrieve dropped parent nodes using streaming APIs such as <code class="codeph">InfosetReader</code>.
                              </p>
                              <p>In an SDOM tree, links to parent and previous sibling nodes are strong and links to child and following sibling nodes are weak. When the JVM frees the nodes, references to them are still available in the underlying data so they can be re-created if needed.</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADXDK1076"></a><div class="props_rev_3"><a id="GUID-0EE1A341-D1A3-4418-B943-69D68A4A66BE" name="GUID-0EE1A341-D1A3-4418-B943-69D68A4A66BE"></a><h6 id="ADXDK-GUID-0EE1A341-D1A3-4418-B943-69D68A4A66BE" class="sect6">Using Manual Node Dereferencing</h6>
                        <div>
                           <p>Manual node dereferencing is described.</p>
                           <div class="section">
                              <p>In manual dereferencing mode, there are no weak references. The application must explicitly dereference document fragments from the DOM tree. If an application processes the data in a deterministic order, then Oracle recommends avoiding the extra overhead of repeatedly releasing and re-creating nodes. </p>
                              <p>To use manual node dereferencing, set the attribute <code class="codeph">PARTIAL_DOM</code> to <code class="codeph">Boolean.FALSE</code> and create the SDOM with plug-in XML data.
                              </p>
                              <p>To manually dereference a node from all other nodes, invoke <code class="codeph">freeNode()</code>. For example:
                              </p><pre class="oac_no_warn" dir="ltr">Element root = doc.getDocumentElement();
 Node item = root.getFirstChild();
While (item != null)
{
     processItem(item);
     Node tmp = item;
     item = item.getNextSibling();
<span class="bold">     ((XMLNode)tmp).freeNode();</span>
}
</pre><p>Dereferencing a node does not remove it from the SDOM tree. The node can still be accessed and re-created from its parent, previous, and following siblings. However, after a node is dereferenced, a variable that holds the node throws an error when accessing the node.</p>
                              <div class="infoboxnote" id="GUID-0EE1A341-D1A3-4418-B943-69D68A4A66BE__GUID-111AF5FD-2DD0-4B92-9184-F3715340CF91">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph">freeNode</code> invocation has no effect on a nonscalable DOM.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADXDK19129"></a><div class="props_rev_3"><a id="GUID-000BEA9C-8AAB-4C04-9BFB-A4BCBC18ACC9" name="GUID-000BEA9C-8AAB-4C04-9BFB-A4BCBC18ACC9"></a><h6 id="ADXDK-GUID-000BEA9C-8AAB-4C04-9BFB-A4BCBC18ACC9" class="sect6">Using Shadow Copy</h6>
                        <div>
                           <p>Shadow copy avoids data replication by letting DOM nodes share their data.</p>
                           <p>Cloning, a common operation in XML processing, can be done lazily with SDOM. That is, the <code class="codeph">copy</code> method creates only the root node of the fragment being copied, and the subtree is expanded only on demand.
                           </p>
                           <p>DOM nodes themselves are not shared; their underlying data is shared. The DOM specification requires that the clone and its original have different node identities and different parent nodes.</p>
                        </div>
                     </div><a id="ADXDK19130"></a><div class="props_rev_3"><a id="GUID-EA7D0251-45FE-4E96-91F9-062BCBCDD7D3" name="GUID-EA7D0251-45FE-4E96-91F9-062BCBCDD7D3"></a><h6 id="ADXDK-GUID-EA7D0251-45FE-4E96-91F9-062BCBCDD7D3" class="sect6">Incorporating DOM Updates</h6>
                        <div>
                           <p>The DOM API supports update operations such as adding and deleting nodes and setting, deleting, changing, and inserting values. </p>
                           <div class="section">
                              <p>When a DOM is created by plugging in XML data, the underlying data is considered external to the DOM. DOM updates are visible from the DOM APIs but the data source remains the same. Normal update operations are available and do not interfere with each other.</p>
                              <p>To make a modified DOM persistent, you must explicitly save the DOM. Saving merges the changes with the original data and serializes the data in persistent storage. If you do not save a modified DOM explicitly, the changes are lost when the transaction ends.</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADXDK19131"></a><div class="props_rev_3"><a id="GUID-4F4E67FB-711D-4E16-AB08-FC35BBEECCF1" name="GUID-4F4E67FB-711D-4E16-AB08-FC35BBEECCF1"></a><h6 id="ADXDK-GUID-4F4E67FB-711D-4E16-AB08-FC35BBEECCF1" class="sect6">Using the PageManager Interface to Support Internal Data</h6>
                        <div>
                           <p>How to use the <code class="codeph">PageManager</code> interface to let the SDOM use back-end storage for binary data.
                           </p>
                           <div class="section">
                              <p>When XML text is parsed with <code class="codeph">DOMParser</code> and configured to create an SDOM, internal data is cached in the form of binary XML, and the DOM API layer is built on top of the internal data. This provides increased scalability, because the binary XML is more compact than DOM nodes.
                              </p>
                              <p>For additional scalability, the SDOM can use back-end storage for binary data through the <code class="codeph">PageManager</code> interface. Then, binary data can be swapped out of memory when not in use.
                              </p>
                              <p>This code shows how to use the <code class="codeph">PageManager</code> interface:
                              </p><pre class="oac_no_warn" dir="ltr">DOMParser parser = new DOMParser();
parser.setAttribute(PARTIAL_DOM, Boolean.TRUE); //enable SDOM
parser.setAttribute(PAGE_MANAGER, new FilePageManager("pageFile"));
...
// DOMParser other configuration
parser.parse(fileURL);
XMLDocument doc = parser.getDocument();
</pre><p>If you do not use the <code class="codeph">PageManager</code> interface, then the parser caches the whole document as binary XML.
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADXDK19132"></a><div class="props_rev_3"><a id="GUID-C5348B7D-15FD-4374-8D61-C913DEBA3EBC" name="GUID-C5348B7D-15FD-4374-8D61-C913DEBA3EBC"></a><h5 id="ADXDK-GUID-C5348B7D-15FD-4374-8D61-C913DEBA3EBC" class="sect5">Using Configurable DOM Settings</h5>
                     <div>
                        <p>When you create a DOM using class <code class="codeph">XMLDOMImplementation</code>, you can configure the DOM for different applications and achieve maximum efficiency by using method <code class="codeph">setAttribute</code>.
                        </p>
                        <div class="section"><pre class="pre codeblock"><code><code class="codeph">public void setAttribute(String name, Object value) throws IllegalArgumentException</code>
</code></pre><p>For SDOM, invoke <code class="codeph">setAttribute</code> for the <code class="codeph">PARTIAL_DOM</code> and <code class="codeph">ACCESS_MODE</code> attributes.
                           </p>
                           <div class="infoboxnote" id="GUID-C5348B7D-15FD-4374-8D61-C913DEBA3EBC__GUID-091E7B08-8F31-4BF1-BDBF-EE0C8AA81CA5">
                              <p class="notep1">Note:</p>
                              <p>New attribute values always affect the next DOM, not the current one. Therefore, you can use instances of <code class="codeph">XMLDOMImplementation</code> to create DOMs with different configurations.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADXDK1077"></a><div class="props_rev_3"><a id="GUID-21E3BF40-67ED-4742-A8A7-1C4687E4D187" name="GUID-21E3BF40-67ED-4742-A8A7-1C4687E4D187"></a><h6 id="ADXDK-GUID-21E3BF40-67ED-4742-A8A7-1C4687E4D187" class="sect6">PARTIAL_DOM Attribute</h6>
                        <div>
                           <p>Attribute <code class="codeph">PARTIAL_DOM</code> determines whether the created DOM is partial, that is, scalable. When it has the value <code class="codeph">TRUE</code>, the DOM is scalable (that is, nodes that are not in use are freed and re-created when needed). When it has the value <code class="codeph">FALSE</code>, the created DOM is not scalable.
                           </p>
                        </div>
                     </div><a id="ADXDK1078"></a><div class="props_rev_3"><a id="GUID-8E768BE9-0EE6-4BF5-8A20-5CAC499B40B0" name="GUID-8E768BE9-0EE6-4BF5-8A20-5CAC499B40B0"></a><h6 id="ADXDK-GUID-8E768BE9-0EE6-4BF5-8A20-5CAC499B40B0" class="sect6">ACCESS_MODE Attribute</h6>
                        <div>
                           <p>Attribute <code class="codeph">ACCESS_MODE</code>  (which applies to both SDOM and nonscalable DOM) controls access to the created DOM.
                           </p>
                           <p>The attribute values, from least to most restrictive, are shown in <a href="XML-parsing-for-Java.html#GUID-8E768BE9-0EE6-4BF5-8A20-5CAC499B40B0__GUID-6AAC2D0C-C6A3-4D2F-AAEB-F228DF56154A" title="Lists ACCESS_MODE attribute values from least to most restrictive and explains their effect on DOM access and performance advantages.">Table 12-8</a>.
                           </p>
                           <div class="tblformal" id="GUID-8E768BE9-0EE6-4BF5-8A20-5CAC499B40B0__GUID-6AAC2D0C-C6A3-4D2F-AAEB-F228DF56154A">
                              <p class="titleintable">Table 12-8 ACCESS_MODE Attribute Values</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="ACCESS_MODE Attribute Values" summary="Lists ACCESS_MODE attribute values from least to most restrictive and explains their effect on DOM access and performance advantages." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="19%" id="d35651e5530">Value</th>
                                       <th align="left" valign="bottom" width="51%" id="d35651e5533">DOM Access</th>
                                       <th align="left" valign="bottom" width="30%" id="d35651e5536">Performance Advantage</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d35651e5541" headers="d35651e5530 ">
                                          <p><code class="codeph">UPDATEABLE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="51%" headers="d35651e5541 d35651e5533 ">
                                          <p>All update operations allowed. This is the default value, for backward compatibility with the XDK DOM implementation.</p>
                                       </td>
                                       <td align="left" valign="top" width="30%" headers="d35651e5541 d35651e5536 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d35651e5551" headers="d35651e5530 ">
                                          <p><code class="codeph">READ_ONLY</code></p>
                                       </td>
                                       <td align="left" valign="top" width="51%" headers="d35651e5551 d35651e5533 ">
                                          <p>No DOM update operations allowed. Node creation (for example, cloning) is allowed only if the new nodes are not added to the DOM tree.</p>
                                       </td>
                                       <td align="left" valign="top" width="30%" headers="d35651e5551 d35651e5536 ">
                                          <p>Write buffer is not created.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d35651e5562" headers="d35651e5530 ">
                                          <p><code class="codeph">FORWARD_READ</code></p>
                                       </td>
                                       <td align="left" valign="top" width="51%" headers="d35651e5562 d35651e5533 ">
                                          <p>Forward navigation (for example, <code class="codeph">getFirstChild().getNextSibling()</code> and <code class="codeph">getLastChild()</code>) and access to parent and ancestor nodes is allowed; backward navigation (for example, <code class="codeph">getPreviousSibling()</code>) is not allowed.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="30%" headers="d35651e5562 d35651e5536 ">
                                          <p>Previous-sibling links are not created.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d35651e5582" headers="d35651e5530 ">
                                          <p><code class="codeph">STREAM_READ</code></p>
                                       </td>
                                       <td align="left" valign="top" width="51%" headers="d35651e5582 d35651e5533 ">
                                          <p>Limited to the stream of nodes in document order, similar to SAX event access.</p>
                                          <p>The current node is the last node that was accessed in document order. Applications can hold nodes in variables and revisit them, but using the DOM method to access any node before the current node (except a parent or ancestor) causes an error. For example:</p>
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>This is allowed, although the parent is before the current node:</p><pre class="oac_no_warn" dir="ltr">Node parent = currentNode.getParentNode();
</pre></li>
                                             <li>
                                                <p>This causes an error unless the current node is the first child of the parent:</p><pre class="oac_no_warn" dir="ltr">Node child = parent.getFirstChild();
</pre></li>
                                             <li>
                                                <p>Accessing element attributes is always allowed:</p><pre class="oac_no_warn" dir="ltr">Attribute attr = parent.getFirstAttribute();</pre></li>
                                          </ul>
                                       </td>
                                       <td align="left" valign="top" width="30%" headers="d35651e5582 d35651e5536 ">
                                          <p>DOM maintains only parent links, not node locations; therefore, it need not re-create freed nodes.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                     </div>
                  </div><a id="ADXDK174"></a><div class="props_rev_3"><a id="GUID-6D67902A-AECA-4DF2-AAA5-C11C1E5E9BD2" name="GUID-6D67902A-AECA-4DF2-AAA5-C11C1E5E9BD2"></a><h5 id="ADXDK-GUID-6D67902A-AECA-4DF2-AAA5-C11C1E5E9BD2" class="sect5">Using Fast Infoset with SDOM</h5>
                     <div>
                        <p>The Fast Infoset to XDK/J model lets you use Fast Infoset techniques while working with XML content in Java. </p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-6D67902A-AECA-4DF2-AAA5-C11C1E5E9BD2__GUID-9F2D519C-3294-44E5-AB13-C60B7E0BB823">
                              <p class="notep1">Note:</p>
                              <p>Use Fast Infoset only for input. For output, use CSX or XTI.</p>
                           </div>
                           <p>This example uses a serializer to encode XML data into a FastInfoset <code class="codeph">BinaryStream</code>:
                           </p><pre class="pre codeblock"><code>public com.sun.xml.fastinfoset.sax.SAXDocumentSerializer getSAXDocumentSerializer();
public com.sun.xml.fastinfoset.stax.StAXDocumentSerializer getStAXDocumentSerializer();
</code></pre><p>The class <code class="codeph">oracle.xml.scalable.BinaryStream</code> is the data management component that provides buffer management and an abstract paged I/O view to support decoding for different types of data storage.
                           </p>
                           <p>The <code class="codeph">InfosetReader</code> from <code class="codeph">BinaryStream</code> is the implementation of <code class="codeph">oracle.xml.scalable.InfosetReader</code> for the DOM to read data from binary. The implementation extends the basic decoder <code class="codeph">sun.com.xml.fasterinfoset.Decoder</code> and adds support for seek and skip operations.
                           </p>
                           <p>You can use Fast Infoset with Streaming API for XML (StAX) and SAX to create a DOM. To create an SDOM, you can use the routines from the preceding example and those in this example:</p><pre class="pre codeblock"><code>String xmlFile, fiFile;
FileInputStream xin = new FileInputStream(new File(xmlFile));
XML_SAX_FI figen = new XML_SAX_FI();
FileOutputStream outfi = new FileOutputStream(new File(fiFile));
figen.parse(xin, outfi);
outfi.close();

import oracle.xml.scalable.BinaryStream;

BinaryStream stream = BinaryStream.newInstance(SUN_FI);
stream.setFile(new File(fiFile));
InfosetReader reader = stream.getInfosetReader();
XMLDOMImplementation dimp = new  XMLDOMImplementation();
dimp.setAttribute(XMLDocument.SCALABLE_DOM, Boolean.TRUE);
XMLDocument doc = (XMLDocument) dimp.createDocument(reader);</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19134"></a><div class="props_rev_3"><a id="GUID-1CF9E80D-7493-4574-B2DA-F1928F8AD552" name="GUID-1CF9E80D-7493-4574-B2DA-F1928F8AD552"></a><h5 id="ADXDK-GUID-1CF9E80D-7493-4574-B2DA-F1928F8AD552" class="sect5">SDOM Applications</h5>
                     <div>
                        <p>Applications that create and use an SDOM are presented.</p>
                        <p>This application creates and uses an SDOM:</p><pre class="oac_no_warn" dir="ltr">XMLDOMImplementation domimpl = new XMLDOMImplementation();
domimpl.setAttribute(XMLDocument.SCALABLE_DOM, Boolean.TRUE);
domimpl.setAttribute(XMLDocument.ACCESS_MODE,XMLDocument.UPDATEABLE);
XMLDocument scalableDoc = (XMLDocument) domimpl.createDocument(reader);
</pre><p>The following application creates and uses an SDOM based on binary XML, which is described in <a href="using-binary-XML-with-Java.html#GUID-38D2C558-108C-449A-A9CD-BC2DAD163D5C" title="Topics here explain how to use Binary XML with Java.">Using Binary XML with Java</a>:
                        </p><pre class="oac_no_warn" dir="ltr">BinXMLProcessor proc = BinXMLProcessorFactory.createProcessor();
BinXMLStream bstr = proc.createBinXMLStream();
BinXMLEncoder enc = bstr.getEncoder();
enc.setProperty(BinXMLEncoder.ENC_SCHEMA_AWARE, false);
 
SAXParser parser = new SAXParser();
parser.setContentHandler(enc.getContentHandler());
parser.setErrorHandler(enc.getErrorHandler());
parser.parse(BinXMLUtil.createURL(xmlfile));
 
BinXMLDecoder dec = bstr.getDecoder();
InfosetReader reader = dec.getReader();
XMLDOMImplementation domimpl = new XMLDOMImplementation();
domimpl.setAttribute(XMLDocument.SCALABLE_DOM, Boolean.TRUE);
XMLDocument currentDoc = (XMLDocument) domimpl.createDocument(reader);</pre></div>
                  </div><a id="ADXDK181"></a><div class="props_rev_3"><a id="GUID-D44D0697-F1FD-47B3-AE85-E101AA807FD5" name="GUID-D44D0697-F1FD-47B3-AE85-E101AA807FD5"></a><h5 id="ADXDK-GUID-D44D0697-F1FD-47B3-AE85-E101AA807FD5" class="sect5">XDK Java DOM Improvements</h5>
                     <div>
                        <p>XDK supports the DOM Level 3 Core specification, a recommendation of the W3C.</p>
                        <div class="infoboxnotealso" id="GUID-D44D0697-F1FD-47B3-AE85-E101AA807FD5__GUID-DAEDC723-554F-4AE0-8655-0B1ACC93C1BC">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_dom_level_3" target="_blank">Document Object Model (DOM) Level 3 Core Specification</a> for more information about DOM Level 3
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADXDK19135"></a><div class="props_rev_3"><a id="GUID-C198CA9B-369E-4352-AABC-3BC0A52BA642" name="GUID-C198CA9B-369E-4352-AABC-3BC0A52BA642"></a><h4 id="ADXDK-GUID-C198CA9B-369E-4352-AABC-3BC0A52BA642" class="sect4">Performing DOM Operations with Namespaces</h4>
                  <div>
                     <p><code class="codeph">DOM2Namespace.java</code> shows a simple use of the parser and namespace extensions to the DOM APIs. The program receives an XML document, parses it, and prints the elements and attributes in the document.
                     </p>
                     <div class="section">
                        <p>This section includes some code from the <code class="codeph">DOM2Namespace.java</code> program. For more detail, see the program itself.
                        </p>
                        <p>The first four steps of <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53" title="DOMSample.java shows the basic steps for parsing an input XML document and accessing it through a DOM. DOMSample.java receives an XML file as input, parses it, and prints the elements and attributes in the DOM tree.">Performing Basic DOM Parsing</a>, from parser creation to the <code class="codeph">getDocument()</code> invocation, are basically the same for <code class="codeph">DOM2Namespace.java</code>. The principal difference is in printing the DOM tree (Step <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHBFACH">5</a>). The <code class="codeph">DOM2Namespace.java</code> program does this instead:
                        </p><pre class="oac_no_warn" dir="ltr">// Print document elements
printElements(doc);
 
// Print document element attributes
System.out.println("The attributes of each element are: ");
printElementAttributes(doc);
</pre><p>The <code class="codeph">printElements()</code> method implemented by <code class="codeph">DOM2Namespace.java</code> invokes <code class="codeph">getElementsByTagName()</code> to get a list of all the elements in the DOM tree. It then loops through each item in the list and casts each <code class="codeph">Element</code> to an <code class="codeph">nsElement</code>. For each <code class="codeph">nsElement</code> it invokes <code class="codeph">nsElement.getPrefix()</code> to get the namespace prefix, <code class="codeph">nsElement.getLocalName()</code> to get the local name, and <code class="codeph">nsElement.getNamespaceURI()</code> to get the namespace URI:
                        </p><pre class="oac_no_warn" dir="ltr">static void printElements(Document doc)
{
   NodeList nl = doc.getElementsByTagName("*");
   Element nsElement;
   String prefix;
   String localName;
   String nsName;

   System.out.println("The elements are: ");
   for (int i=0; i &lt; nl.getLength(); i++)
   {
      nsElement = (Element)nl.item(i);
 
      prefix = nsElement.getPrefix();
      System.out.println("  ELEMENT Prefix Name :" + prefix);
 
      localName = nsElement.getLocalName();
      System.out.println("  ELEMENT Local Name    :" + localName);
 
      nsName = nsElement.getNamespaceURI();
      System.out.println("  ELEMENT Namespace     :" + nsName);
   } 
   System.out.println();
}
</pre><p>The <code class="codeph">printElementAttributes()</code> method invokes <code class="codeph">Document.getElementsByTagName()</code> to get a <code class="codeph">NodeList</code> of the elements in the DOM tree. It then loops through each element and invokes <code class="codeph">Element.getAttributes()</code> to get the list of attributes for the element as special list called a <code class="codeph">NamedNodeMap</code>. For each item in the attribute list it invokes <code class="codeph">nsAttr.getPrefix()</code> to get the namespace prefix, <code class="codeph">nsAttr.getLocalName()</code> to get the local name, and <code class="codeph">nsAttr.getValue()</code> to get the value:
                        </p><pre class="oac_no_warn" dir="ltr">static void printElementAttributes(Document doc)
{
   NodeList nl = doc.getElementsByTagName("*");
   Element e;
   Attr nsAttr; 
   String attrpfx;
   String attrname;
   String attrval; 
   NamedNodeMap nnm;
   int i, len;
 
   len = nl.getLength();
 
   for (int j=0; j &lt; len; j++)
   {
      e = (Element) nl.item(j);
      System.out.println(e.getTagName() + ":");
 
      nnm = e.getAttributes();
 
      if (nnm != null)
      {
         for (i=0; i &lt; nnm.getLength(); i++)
         {
            nsAttr = (Attr) nnm.item(i);
 
            attrpfx = nsAttr.getPrefix();
            attrname = nsAttr.getLocalName();
            attrval = nsAttr.getNodeValue();
 
            System.out.println(" " + attrpfx + ":" + attrname + " = " 
                               + attrval);
         }
      }
      System.out.println();
   }
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADXDK19136"></a><div class="props_rev_3"><a id="GUID-736B0616-33E7-4DB2-93B8-BA6D7E441DF2" name="GUID-736B0616-33E7-4DB2-93B8-BA6D7E441DF2"></a><h4 id="ADXDK-GUID-736B0616-33E7-4DB2-93B8-BA6D7E441DF2" class="sect4">Performing DOM Operations with Events</h4>
                  <div>
                     <p><code class="codeph">EventSample.java</code> shows how to register events with an event listener. For example, adding a node to a specified DOM element triggers an event, which causes the listener to print information about the event.
                     </p>
                     <div class="section">
                        <p>This section includes some code from the <code class="codeph">EventSample.java</code> program. For more detail, see the program itself.
                        </p>
                        <p>The <code class="codeph">EventSample.java</code> program follows these steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Instantiate an event listener.</span><div>
                              <p>When a registered change triggers an event, the event is passed to the event listener, which handles it. This code fragment from <code class="codeph">EventSample.java</code> shows the implementation of the listener:
                              </p><pre class="oac_no_warn" dir="ltr">eventlistener evtlist = new eventlistener();
...
class eventlistener implements EventListener
{
   public eventlistener(){}
   public void handleEvent(Event e)
   {
      String s = " Event "+e.getType()+" received " + "\n";
      s += " Event is cancelable :"+e.getCancelable()+"\n";
      s += " Event is bubbling event :"+e.getBubbles()+"\n";
      s += " The Target is " + ((Node)(e.getTarget())).getNodeName() + "\n\n";
      System.out.println(s);
   }
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Instantiate a new <code class="codeph">XMLDocument</code> and then invoke <code class="codeph">getImplementation()</code> to retrieve a <code class="codeph">DOMImplementation</code> object.</span><div>
                              <p>Invoke the <code class="codeph">hasFeature()</code> method to determine which features this implementation supports, as this code fragment from <code class="codeph">EventSample.java</code> does:
                              </p><pre class="oac_no_warn" dir="ltr">XMLDocument doc1 = new XMLDocument();
DOMImplementation impl = doc1.getImplementation();
 
System.out.println("The impl supports Events "+
                   impl.hasFeature("Events", "2.0"));
System.out.println("The impl supports Mutation Events "+
                   impl.hasFeature("MutationEvents", "2.0"));
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Register desired events with the listener. This code fragment from <code class="codeph">EventSample.java</code> registers three events on the document node:</span><div><pre class="oac_no_warn" dir="ltr">doc1.addEventListener("DOMNodeRemoved", evtlist, false);
doc1.addEventListener("DOMNodeInserted", evtlist, false);
doc1.addEventListener("DOMCharacterDataModified", evtlist, false);
</pre><p>This code fragment from <code class="codeph">EventSample.java</code> creates a node of type <code class="codeph">XMLElement</code> and then registers three events on the node:
                              </p><pre class="oac_no_warn" dir="ltr">XMLElement el = (XMLElement)doc1.createElement("element");
...
el.addEventListener("DOMNodeRemoved", evtlist, false);
el.addEventListener("DOMNodeRemovedFromDocument", evtlist, false);
el.addEventListener("DOMCharacterDataModified", evtlist, false);
...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Perform actions that trigger events, which are then passed to the listener for handling, as this code fragment from <code class="codeph">EventSample.java</code> does:</span><div><pre class="oac_no_warn" dir="ltr">att.setNodeValue("abc");
el.appendChild(el1);
el.appendChild(text);
text.setNodeValue("xyz");
doc1.removeChild(el);</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19138"></a><a id="ADXDK19137"></a><div class="props_rev_3"><a id="GUID-0B8B9513-6E00-46BD-BEED-122D2AD0A5C3" name="GUID-0B8B9513-6E00-46BD-BEED-122D2AD0A5C3"></a><h4 id="ADXDK-GUID-0B8B9513-6E00-46BD-BEED-122D2AD0A5C3" class="sect4">Performing DOM Operations with Ranges</h4>
                  <div>
                     <p>According to the W3C DOM specification, a <span class="bold">range</span> identifies a range of content in a <code class="codeph">Document</code>, <code class="codeph">DocumentFragment</code>, or <code class="codeph">Attr</code>. The range selects the content between a pair of boundary points that correspond to the start and end of the range. 
                     </p>
                     <div class="section">
                        <p><a href="XML-parsing-for-Java.html#GUID-0B8B9513-6E00-46BD-BEED-122D2AD0A5C3__CCHBADDC" title="This table describes useful range methods in the XMLDocument class.">Table 12-9</a> describes range methods accessible through <code class="codeph">XMLDocument</code>.
                        </p>
                        <div class="tblformal" id="GUID-0B8B9513-6E00-46BD-BEED-122D2AD0A5C3__CCHBADDC">
                           <p class="titleintable">Table 12-9 Range Class Methods</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Range Class Methods" summary="This table describes useful range methods in the XMLDocument class." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d35651e6339">Method</th>
                                    <th align="left" valign="bottom" width="70%" id="d35651e6342">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6347" headers="d35651e6339 ">
                                       <p><code class="codeph">cloneContents()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6347 d35651e6342 ">
                                       <p>Duplicates the contents of a range</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6355" headers="d35651e6339 ">
                                       <p><code class="codeph">deleteContents()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6355 d35651e6342 ">
                                       <p>Deletes the contents of a range</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6363" headers="d35651e6339 ">
                                       <p><code class="codeph">getCollapsed()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6363 d35651e6342 ">
                                       <p>Returns <code class="codeph">TRUE</code> is the range is collapsed
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6374" headers="d35651e6339 ">
                                       <p><code class="codeph">getEndContainer()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6374 d35651e6342 ">
                                       <p>Gets the node within which the range ends</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6382" headers="d35651e6339 ">
                                       <p><code class="codeph">getStartContainer()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6382 d35651e6342 ">
                                       <p>Gets the node within which the range starts</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6390" headers="d35651e6339 ">
                                       <p><code class="codeph">selectNode()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6390 d35651e6342 ">
                                       <p>Selects a node and its contents</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6398" headers="d35651e6339 ">
                                       <p><code class="codeph">selectNodeContents()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6398 d35651e6342 ">
                                       <p>Selects the contents of a node</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6406" headers="d35651e6339 ">
                                       <p><code class="codeph">setEnd()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6406 d35651e6342 ">
                                       <p>Sets the attributes describing the end of a range</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d35651e6414" headers="d35651e6339 ">
                                       <p><code class="codeph">setStart()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d35651e6414 d35651e6342 ">
                                       <p>Sets the attributes describing the start of a range</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The <code class="codeph">DOMRangeSample.java</code> program shows some operations that you can perform with ranges. This section includes some code from the <code class="codeph">DOMRangeSample.java</code> program. For more detail, see the program itself.
                        </p>
                        <p>The first four steps of the <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53" title="DOMSample.java shows the basic steps for parsing an input XML document and accessing it through a DOM. DOMSample.java receives an XML file as input, parses it, and prints the elements and attributes in the DOM tree.">Performing Basic DOM Parsing</a>, from parser creation to the <code class="codeph">getDocument()</code> invocation, are the same for <code class="codeph">DOMRangeSample.java</code>. Then, the <code class="codeph">DOMRangeSample.java</code> program follows these steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>After invoking <code class="codeph">getDocument()</code> to create the <code class="codeph">XMLDocument</code>, create a range object with <code class="codeph">createRange()</code> and invoke <code class="codeph">setStart()</code> and <code class="codeph">setEnd()</code> to set its boundaries, as this code fragment from <code class="codeph">DOMRangeSample.java</code> does:</span><div><pre class="oac_no_warn" dir="ltr">XMLDocument doc = parser.getDocument();
...
Range r = (Range) doc.createRange();
XMLNode c = (XMLNode) doc.getDocumentElement();
 
// set the boundaries
r.setStart(c,0);
r.setEnd(c,1);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Invoke <code class="codeph">XMLDocument</code> methods to get information about the range and manipulate its contents.</span><div>
                              <p>This code fragment from <code class="codeph">DOMRangeSample.java</code> selects and prints the contents of the current node:
                              </p><pre class="oac_no_warn" dir="ltr">r.selectNodeContents(c);
System.out.println(r.toString());
</pre><p>This code fragment clones and prints the contents of a range:</p><pre class="oac_no_warn" dir="ltr">XMLDocumentFragment df =(XMLDocumentFragment) r.cloneContents();
df.print(System.out);
</pre><p>This code fragment gets and prints the start and end containers for the range:</p><pre class="oac_no_warn" dir="ltr">c = (XMLNode) r.getStartContainer();
System.out.println(c.getText());
c = (XMLNode) r.getEndContainer();
System.out.println(c.getText());</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19140"></a><a id="ADXDK19141"></a><a id="ADXDK19139"></a><div class="props_rev_3"><a id="GUID-7F97E630-D288-4D31-9880-D74B12B63FB0" name="GUID-7F97E630-D288-4D31-9880-D74B12B63FB0"></a><h4 id="ADXDK-GUID-7F97E630-D288-4D31-9880-D74B12B63FB0" class="sect4">Performing DOM Operations with TreeWalker</h4>
                  <div>
                     <p>XDK implements the <code class="codeph">NodeFilter</code> and <code class="codeph">TreeWalker</code> interfaces, which are defined by the W3C DOM Level 2 Traversal and Range specification.
                     </p>
                     <div class="section">
                        <p>A node filter is an object that can filter out certain types of <code class="codeph">Node</code> objects. For example, it can filter out entity reference nodes but accept element and attribute nodes. You create a node filter by implementing the <code class="codeph">NodeFilter</code> interface and then passing a <code class="codeph">Node</code> object to the <code class="codeph">acceptNode()</code> method. Typically, the <code class="codeph">acceptNode()</code> method implementation invokes <code class="codeph">getNodeType()</code> to get the type of the node and compares it to static variables such as <code class="codeph">ELEMENT_TYPE</code>, <code class="codeph">ATTRIBUTE_TYPE</code>, and so forth, and then returns one of the static fields listed in <a href="XML-parsing-for-Java.html#GUID-7F97E630-D288-4D31-9880-D74B12B63FB0__CCHHHHAH" title="This table describes useful variables in the NodeFilter interface.">Table 12-10</a>, based on what it finds.
                        </p>
                        <div class="tblformal" id="GUID-7F97E630-D288-4D31-9880-D74B12B63FB0__CCHHHHAH">
                           <p class="titleintable">Table 12-10 Static Fields in the NodeFilter Interface</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Static Fields in the NodeFilter Interface" summary="This table describes useful variables in the NodeFilter interface." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="18%" id="d35651e6629">Field</th>
                                    <th align="left" valign="bottom" width="82%" id="d35651e6632">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d35651e6637" headers="d35651e6629 ">
                                       <p><code class="codeph">FILTER_ACCEPT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="82%" headers="d35651e6637 d35651e6632 ">
                                       <p>Accepts the node. Navigation methods defined for <code class="codeph">NodeIterator</code> or <code class="codeph">TreeWalker</code> return this node.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d35651e6651" headers="d35651e6629 ">
                                       <p><code class="codeph">FILTER_REJECT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="82%" headers="d35651e6651 d35651e6632 ">
                                       <p>Rejects the node. Navigation methods defined for <code class="codeph">NodeIterator</code> or <code class="codeph">TreeWalker</code> do not return this node. For <code class="codeph">TreeWalker</code>, the children of this node are also rejected. <code class="codeph">NodeIterator</code> treats <code class="codeph">FILTER_REJECT</code> as a synonym for <code class="codeph">FILTER_SKIP</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d35651e6678" headers="d35651e6629 ">
                                       <p><code class="codeph">FILTER_SKIP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="82%" headers="d35651e6678 d35651e6632 ">
                                       <p>Skips this single node. Navigation methods defined for <code class="codeph">NodeIterator</code> or <code class="codeph">TreeWalker</code> do not return this node. For both <code class="codeph">NodeIterator</code> and <code class="codeph">TreeWalker</code>, children of this node are considered.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>You can use a <code class="codeph">TreeWalker</code> object to traverse a document tree or subtree, using the view of the document defined by the <code class="codeph">whatToShow</code> flag and filters of the <code class="codeph">TreeWalker</code> object.
                        </p>
                        <p>To create a <code class="codeph">TreeWalker</code> object, use the <code class="codeph">XMLDocument.createTreeWalker()</code> method, specifying:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A root node for the tree or subtree</p>
                           </li>
                           <li>
                              <p>A flag that governs the type of nodes to include in the logical view</p>
                           </li>
                           <li>
                              <p>A node filter (optional)</p>
                           </li>
                           <li>
                              <p>A flag that determines whether to include entity references and their descendents</p>
                           </li>
                        </ul>
                        <p><a href="XML-parsing-for-Java.html#GUID-7F97E630-D288-4D31-9880-D74B12B63FB0__CCHGGBGD" title="This table describes methods in the TreeWalker interface.">Table 12-11</a> describes methods in the <code class="codeph">org.w3c.dom.traversal.TreeWalker</code> interface.
                        </p>
                        <div class="tblformal" id="GUID-7F97E630-D288-4D31-9880-D74B12B63FB0__CCHGGBGD">
                           <p class="titleintable">Table 12-11 TreeWalker Interface Methods</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TreeWalker Interface Methods" summary="This table describes methods in the TreeWalker interface." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d35651e6749">Method</th>
                                    <th align="left" valign="bottom" width="81%" id="d35651e6752">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d35651e6757" headers="d35651e6749 ">
                                       <p><code class="codeph">firstChild()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d35651e6757 d35651e6752 ">
                                       <p>Moves the tree walker to the first visible child of the current node and returns the new node. If the current node has no visible children, then the method returns <code class="codeph">null</code> and retains the current node.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d35651e6768" headers="d35651e6749 ">
                                       <p><code class="codeph">getRoot()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d35651e6768 d35651e6752 ">
                                       <p>Gets the root node of the tree walker (specified when the <code class="codeph">TreeWalker</code> object was created).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d35651e6779" headers="d35651e6749 ">
                                       <p><code class="codeph">lastChild()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d35651e6779 d35651e6752 ">
                                       <p>Moves the tree walker to the last visible child of the current node and returns the new node. If the current node has no visible children, then the method returns <code class="codeph">null</code> and retains the current node.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d35651e6790" headers="d35651e6749 ">
                                       <p><code class="codeph">nextNode()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d35651e6790 d35651e6752 ">
                                       <p>Moves the tree walker to the next visible node in document order relative to the current node and returns the new node.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The <code class="codeph">TreeWalkerSample.java</code> program shows some operations that you can perform with node filters and tree walkers. This section includes some code from the <code class="codeph">TreeWalkerSample.java</code> program. For more detail, see the program itself.
                        </p>
                        <p>The first four steps of the <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53" title="DOMSample.java shows the basic steps for parsing an input XML document and accessing it through a DOM. DOMSample.java receives an XML file as input, parses it, and prints the elements and attributes in the DOM tree.">Performing Basic DOM Parsing</a>, from parser creation to the <code class="codeph">getDocument()</code> invocation, are the same for <code class="codeph">TreeWalkerSample.java</code>. The, the <code class="codeph">TreeWalkerSample.java</code> program follows these steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a node filter object.</span><div>
                              <p>The <code class="codeph">acceptNode()</code> method in the <code class="codeph">nf</code> class, which implements the <code class="codeph">NodeFilter</code> interface, invokes <code class="codeph">getNodeType()</code> to get the type of node, as this code fragment from <code class="codeph">TreeWalkerSample.java</code> does:
                              </p><pre class="oac_no_warn" dir="ltr">NodeFilter n2 = new nf();
...
class nf implements NodeFilter
{
  public short acceptNode(Node node)
  {
    short type = node.getNodeType();
 
    if ((type == Node.ELEMENT_NODE) || (type == Node.ATTRIBUTE_NODE))
       return FILTER_ACCEPT;
    if ((type == Node.ENTITY_REFERENCE_NODE))
       return FILTER_REJECT;
    return FILTER_SKIP;
  }
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Invoke the <code class="codeph">XMLDocument.createTreeWalker()</code> method to create a tree walker.</span><div>
                              <p>This code fragment from <code class="codeph">TreeWalkerSample.java</code> uses the root node of the <code class="codeph">XMLDocument</code> as the root node of the tree walker and includes all nodes in the tree:
                              </p><pre class="oac_no_warn" dir="ltr">XMLDocument doc = parser.getDocument();
...
TreeWalker tw = doc.createTreeWalker(doc.getDocumentElement(),NodeFilter.SHOW_ALL,n2,true);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Get the root element of the <code class="codeph">TreeWalker</code> object, as this code fragment from <code class="codeph">TreeWalkerSample.java</code> does:</span><div><pre class="oac_no_warn" dir="ltr">XMLNode nn = (XMLNode)tw.getRoot();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Traverse the tree.</span><div>
                              <p>This code fragment from <code class="codeph">TreeWalkerSample.java</code> walks the tree in document order by invoking the <code class="codeph">TreeWalker.nextNode()</code> method:
                              </p><pre class="oac_no_warn" dir="ltr">while (nn != null)
{
  System.out.println(nn.getNodeName() + " " + nn.getNodeValue());
  nn = (XMLNode)tw.nextNode();
}
</pre><p>This code fragment from <code class="codeph">TreeWalkerSample.java</code> walks the left depth of the tree by invoking the <code class="codeph">firstChild()</code> method:
                              </p><pre class="oac_no_warn" dir="ltr"> while (nn != null)
 {
   System.out.println(nn.getNodeName() + " " + nn.getNodeValue());
   nn = (XMLNode)tw.firstChild();
 }
</pre><p>You can walk the right depth of the tree by invoking the <code class="codeph">lastChild()</code> method.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADXDK980"></a><a id="ADXDK19142"></a><div class="props_rev_3"><a id="GUID-2E469495-7D6C-4EB4-9123-6C3C0CDE1218" name="GUID-2E469495-7D6C-4EB4-9123-6C3C0CDE1218"></a><h3 id="ADXDK-GUID-2E469495-7D6C-4EB4-9123-6C3C0CDE1218" class="sect3">Parsing XML with SAX</h3>
               <div>
                  <p>Simple API for XML (SAX) is a standard interface for event-based XML parsing.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div><a id="ADXDK19144"></a><a id="ADXDK1079"></a><a id="ADXDK19145"></a><a id="ADXDK19146"></a><a id="ADXDK19143"></a><div class="props_rev_3"><a id="GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3" name="GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3"></a><h4 id="ADXDK-GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3" class="sect4">Using the SAX API for Java</h4>
                  <div>
                     <p>The interfaces and classes of the SAX API, which is released in a Level 1 and Level 2 version, are described.</p>
                     <p>These are the interfaces and classes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Interfaces implemented by the Oracle XML parser</p>
                        </li>
                        <li>
                           <p>Interfaces that your application must implement (see <a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHIEFJI" title="This table describes SAX 2.0 handler interfaces.">Table 12-12</a>)
                           </p>
                        </li>
                        <li>
                           <p>Standard SAX classes</p>
                        </li>
                        <li>
                           <p>SAX 2.0 helper classes in the <code class="codeph">org.xml.sax.helper</code> package (see <a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__BGBBCBED" title="Lists the SAX 2.0 helper classes in the left column and briefly describes them in the right column.">Table 12-13</a>)
                           </p>
                        </li>
                        <li>
                           <p>Demonstration classes in the <code class="codeph">nul</code> package
                           </p>
                        </li>
                     </ul>
                     <p><a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHIEFJI" title="This table describes SAX 2.0 handler interfaces.">Table 12-12</a> lists and describes the SAX 2.0 interfaces that your application must implement.
                     </p>
                     <div class="tblformal" id="GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHIEFJI">
                        <p class="titleintable">Table 12-12 SAX 2.0 Handler Interfaces</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SAX 2.0 Handler Interfaces" summary="This table describes SAX 2.0 handler interfaces." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d35651e7122">Interface</th>
                                 <th align="left" valign="bottom" width="78%" id="d35651e7125">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d35651e7130" headers="d35651e7122 ">
                                    <p><code class="codeph">ContentHandler</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d35651e7130 d35651e7125 ">
                                    <p>Receives notifications from the XML parser. Implements the major event-handling methods <code class="codeph">startDocument()</code>, <code class="codeph">endDocument()</code>, <code class="codeph">startElement()</code>, and <code class="codeph">endElement()</code>, which are invoked when the XML parser identifies an XML tag. Implements the methods <code class="codeph">characters()</code> and <code class="codeph">processingInstruction()</code>, which are invoked when the XML parser encounters the text in an XML element or an inline processing instruction.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d35651e7157" headers="d35651e7122 ">
                                    <p><code class="codeph">DeclHandler</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d35651e7157 d35651e7125 ">
                                    <p>Receives notifications about DTD declarations in the XML document.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d35651e7165" headers="d35651e7122 ">
                                    <p><code class="codeph">DTDHandler</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d35651e7165 d35651e7125 ">
                                    <p>Processes notations and unparsed (binary) entities.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d35651e7173" headers="d35651e7122 ">
                                    <p><code class="codeph">EntityResolver</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d35651e7173 d35651e7125 ">
                                    <p>Supports redirection of URIs in documents. Implements the method <code class="codeph">resolveEntity()</code>, which is invoked when the XML parser must identify data identified by a URI.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d35651e7184" headers="d35651e7122 ">
                                    <p><code class="codeph">ErrorHandler</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d35651e7184 d35651e7125 ">
                                    <p>Handles parser errors. Implements the methods <code class="codeph">error()</code>, <code class="codeph">fatalError()</code>, and <code class="codeph">warning()</code>, which the program invokes in response to various parsing errors.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d35651e7201" headers="d35651e7122 ">
                                    <p><code class="codeph">LexicalHandler</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d35651e7201 d35651e7125 ">
                                    <p>Receives notifications about lexical information, such as comments and character data (CDATA) section boundaries.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__BGBBCBED" title="Lists the SAX 2.0 helper classes in the left column and briefly describes them in the right column.">Table 12-13</a> lists and describes the SAX 2.0 helper classes.
                     </p>
                     <div class="tblformal" id="GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__BGBBCBED">
                        <p class="titleintable">Table 12-13 SAX 2.0 Helper Classes</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SAX 2.0 Helper Classes" summary="Lists the SAX 2.0 helper classes in the left column and briefly describes them in the right column." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d35651e7224">Class</th>
                                 <th align="left" valign="bottom" width="75%" id="d35651e7227">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d35651e7232" headers="d35651e7224 ">
                                    <p><code class="codeph">AttributeImpl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d35651e7232 d35651e7227 ">
                                    <p>Makes a persistent copy of an <code class="codeph">AttributeList</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d35651e7243" headers="d35651e7224 ">
                                    <p><code class="codeph">DefaultHandler</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d35651e7243 d35651e7227 ">
                                    <p>Base class with default implementations of the interfaces in <a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHIEFJI" title="This table describes SAX 2.0 handler interfaces.">Table 12-12</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d35651e7256" headers="d35651e7224 ">
                                    <p><code class="codeph">LocatorImpl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d35651e7256 d35651e7227 ">
                                    <p>Makes a persistent snapshot of the values of a Locator at a specified point in the parse.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d35651e7264" headers="d35651e7224 ">
                                    <p><code class="codeph">NamespaceSupport</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d35651e7264 d35651e7227 ">
                                    <p>Supports XML namespaces.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d35651e7272" headers="d35651e7224 ">
                                    <p><code class="codeph">XMLFilterImpl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d35651e7272 d35651e7227 ">
                                    <p>Base class used by applications that modify the stream of events.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d35651e7280" headers="d35651e7224 ">
                                    <p><code class="codeph">XMLReaderFactory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d35651e7280 d35651e7227 ">
                                    <p>Supports loading SAX parsers dynamically.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__I1013043">Figure 12-5</a> shows how to create a SAX parser and use it to parse an input document.
                     </p>
                     <div class="figure" id="GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__I1013043">
                        <p class="titleinfigure">Figure 12-5 Using the SAXParser Class</p><img src="img/adxdk052.gif" width="405" alt="Description of Figure 12-5 follows" title="Description of Figure 12-5 follows" longdesc="img_text/adxdk052.html"><br><a href="img_text/adxdk052.html">Description of "Figure 12-5 Using the SAXParser Class"</a></div>
                     <!-- class="figure" -->
                     <p>The basic steps for parsing an input XML document with SAX are:</p>
                     <ol>
                        <li>
                           <p>Create a <code class="codeph">SAXParser</code> object and configure its properties.
                           </p>
                           <p>For example, set the validation mode. For configuration methods, see <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHHJABF" title="This table describes methods that you can use to set various properties of the DOM parser.">Table 12-5</a>.
                           </p>
                        </li>
                        <li>
                           <p>Instantiate an event handler.</p>
                           <p>Your application must implement the handler interfaces in <a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHIEFJI" title="This table describes SAX 2.0 handler interfaces.">Table 12-12</a>.
                           </p>
                        </li>
                        <li>
                           <p>Register your event handlers with the XML parser.</p>
                           <p>This step enables the parser to invoke the correct methods when a given event occurs. For information about <code class="codeph">SAXParser</code> methods for registering event handlers, see <a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHEIGGF" title="This table describes SAXParser methods for registering event handlers.">Table 12-14</a>.
                           </p>
                        </li>
                        <li>
                           <p>Parse the input document with the <code class="codeph">SAXParser.parse()</code> method.
                           </p>
                           <p>All SAX interfaces are assumed to be synchronous: the parse method must not return until parsing is complete. Readers must wait for an event-handler callback to return before reporting the next event.</p>
                           <p>When the <code class="codeph">SAXParser.parse()</code> method is invoked, the program invokes one of several callback methods implemented in the application. The methods are defined by the <code class="codeph">ContentHandler</code>, <code class="codeph">ErrorHandler</code>, <code class="codeph">DTDHandler</code>, and <code class="codeph">EntityResolver</code> interfaces implemented in the event handler. For example, the application can invoke the <code class="codeph">startElement()</code> method when a start element is encountered.
                           </p>
                        </li>
                     </ol>
                     <p><a href="XML-parsing-for-Java.html#GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHEIGGF" title="This table describes SAXParser methods for registering event handlers.">Table 12-14</a> lists and describes the <code class="codeph">SAXParser</code> methods for registering event handlers and explains when to use them. An application can register a new or different handler in the middle of a parse; the SAX parser must begin using the newly registered handler immediately.
                     </p>
                     <div class="tblformal" id="GUID-6B2CBBA1-C80B-40E7-A364-6551B98AD9C3__CCHEIGGF">
                        <p class="titleintable">Table 12-14 SAXParser Methods for Registering Event Handlers</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SAXParser Methods for Registering Event Handlers" summary="This table describes SAXParser methods for registering event handlers." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d35651e7383">Method</th>
                                 <th align="left" valign="bottom" width="72%" id="d35651e7386">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d35651e7391" headers="d35651e7383 ">
                                    <p><code class="codeph">setContentHandler()</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d35651e7391 d35651e7386 ">
                                    <p>Registers a content event handler with an application.</p>
                                    <p>The <code class="codeph">org.xml.sax.DefaultHandler</code> class implements the <code class="codeph">org.xml.sax.ContentHandler</code> interface.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d35651e7407" headers="d35651e7383 ">
                                    <p><code class="codeph">setDTDHandler()</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d35651e7407 d35651e7386 ">
                                    <p>Registers a DTD event handler with an application.</p>
                                    <p>If the application does not register a DTD handler, DTD events reported by the SAX parser are silently ignored.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d35651e7417" headers="d35651e7383 ">
                                    <p><code class="codeph">setErrorHandler()</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d35651e7417 d35651e7386 ">
                                    <p>Registers an error event handler with an application.</p>
                                    <p>If the application does not register an error handler, all error events reported by the SAX parser are silently ignored; however, normal processing may not continue. Oracle highly recommends that all SAX applications implement an error handler to avoid unexpected bugs.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d35651e7427" headers="d35651e7383 ">
                                    <p><code class="codeph">setEntityResolver()</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d35651e7427 d35651e7386 ">
                                    <p>Registers an entity resolver with an application.</p>
                                    <p>If the application does not register an entity resolver, the <code class="codeph">XMLReader</code> performs its own default resolution.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADXDK19147"></a><div class="props_rev_3"><a id="GUID-75C097ED-7247-4C80-9D34-3F1AD9AFBD1E" name="GUID-75C097ED-7247-4C80-9D34-3F1AD9AFBD1E"></a><h4 id="ADXDK-GUID-75C097ED-7247-4C80-9D34-3F1AD9AFBD1E" class="sect4">Performing Basic SAX Parsing</h4>
                  <div>
                     <p><code class="codeph">SAXSample.java</code> shows the basic steps of SAX parsing. The <code class="codeph">SAXSample</code> class extends <code class="codeph">HandlerBase</code>. The program receives an XML file as input, parses it, and prints information about the contents of the file.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">SAXSample.java</code> program follows these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Store the <code class="codeph">Locator</code>:</span><div><pre class="oac_no_warn" dir="ltr">Locator locator;
</pre><p>The <code class="codeph">Locator</code> associates a SAX event with a document location. The SAX parser provides location information to the application by passing a <code class="codeph">Locator</code> instance to the <code class="codeph">setDocumentLocator()</code> method in the content handler. The application can use the object to get the location of any other content handler event in the XML source document.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Instantiate a new event handler.:</span><div><pre class="oac_no_warn" dir="ltr">SAXSample sample = new SAXSample();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Instantiate the SAX parser and configure it:</span><div><pre class="oac_no_warn" dir="ltr">Parser parser = new SAXParser();
((SAXParser)parser).setValidationMode(SAXParser.DTD_VALIDATION);
</pre><p>The preceding code sets the mode to DTD validation.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Register event handlers with the SAX parser:</span><div><pre class="oac_no_warn" dir="ltr">parser.setDocumentHandler(sample);
parser.setEntityResolver(sample);
parser.setDTDHandler(sample);
parser.setErrorHandler(sample);
</pre><p>You can use the registration methods in the <code class="codeph">SAXParser</code> class, but you must implement the event handler interfaces yourself.
                              </p>
                              <p>Here is part of the <code class="codeph">DocumentHandler</code> interface implementation:
                              </p><pre class="oac_no_warn" dir="ltr">public void setDocumentLocator (Locator locator)
{
  System.out.println("SetDocumentLocator:");
  this.locator = locator;
}
public void startDocument()
{
  System.out.println("StartDocument");
}
public void endDocument() throws SAXException
{
  System.out.println("EndDocument");
}
public void startElement(String name, AttributeList atts)
                                               throws SAXException
{
  System.out.println("StartElement:"+name);
  for (int i=0;i&lt;atts.getLength();i++)
  {
    String aname = atts.getName(i);
    String type = atts.getType(i);
    String value = atts.getValue(i); 
    System.out.println("   "+aname+"("+type+")"+"="+value);
  }  
}
...
</pre><p>The following code implements the <code class="codeph">EntityResolver</code> interface:
                              </p><pre class="oac_no_warn" dir="ltr">public InputSource resolveEntity (String publicId, String systemId)
                      throws SAXException
{
  System.out.println("ResolveEntity:"+publicId+" "+systemId);
  System.out.println("Locator:"+locator.getPublicId()+" locator.getSystemId()+
                    " "+locator.getLineNumber()+" "+locator.getColumnNumber());
  return null;
}
</pre><p>The following code implements the <code class="codeph">DTDHandler</code> interface:
                              </p><pre class="oac_no_warn" dir="ltr">public void notationDecl (String name, String publicId, String systemId)
{
  System.out.println("NotationDecl:"+name+" "+publicId+" "+systemId);
}
public void unparsedEntityDecl (String name, String publicId,
                                String systemId, String notationName)
{
  System.out.println("UnparsedEntityDecl:"+name + " "+publicId+" "+
                      systemId+" "+notationName);
}
</pre><p>The following code implements the <code class="codeph">ErrorHandler</code> interface:
                              </p><pre class="oac_no_warn" dir="ltr">public void warning (SAXParseException e)
           throws SAXException
{
  System.out.println("Warning:"+e.getMessage());
}
public void error (SAXParseException e)
           throws SAXException
{
  throw new SAXException(e.getMessage());
}
public void fatalError (SAXParseException e)
          throws SAXException
{
  System.out.println("Fatal error");
  throw new SAXException(e.getMessage());
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Parse the input XML document:</span><div><pre class="oac_no_warn" dir="ltr">parser.parse(DemoUtil.createURL(argv[0]).toString());
</pre><p>The preceding code converts the document to a URL and then parses it.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19148"></a><div class="props_rev_3"><a id="GUID-7E284DE1-049C-43D9-9C15-1B01B2F00123" name="GUID-7E284DE1-049C-43D9-9C15-1B01B2F00123"></a><h4 id="ADXDK-GUID-7E284DE1-049C-43D9-9C15-1B01B2F00123" class="sect4">Performing Basic SAX Parsing with Namespaces</h4>
                  <div>
                     <p><code class="codeph">SAX2Namespace.java</code> implements an event handler named <code class="codeph">XMLDefaultHandler</code> as a subclass of the <code class="codeph">org.xml.sax.helpers.DefaultHandler</code> class. 
                     </p>
                     <div class="section">
                        <p>The easiest way to implement the <code class="codeph">ContentHandler</code> interface is to extend the <code class="codeph">org.xml.sax.helpers.DefaultHandler</code> class. The <code class="codeph">DefaultHandler</code> class provides some default behavior for handling events, although the typical behavior is to do nothing.
                        </p>
                        <p><code class="codeph">SAX2Namespace.java</code> overrides methods only for relevant events. Specifically, the <code class="codeph">XMLDefaultHandler</code> class implements only two methods: <code class="codeph">startElement()</code> and <code class="codeph">endElement()</code>. Whenever <code class="codeph">SAXParser</code> encounters a new element in the XML document, it triggers the <code class="codeph">startElement</code> event, and the <code class="codeph">startElement()</code> method prints the namespace information for the element.
                        </p>
                        <p>The <code class="codeph">SAX2Namespace.java</code> sample program follows these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Instantiate a new event handler of type <code class="codeph">DefaultHandler</code>:</span><div><pre class="oac_no_warn" dir="ltr">DefaultHandler defHandler = new XMLDefaultHandler();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create a SAX parser and set its validation mode:</span><div><pre class="oac_no_warn" dir="ltr">Parser parser = new SAXParser();
((SAXParser)parser).setValidationMode(SAXParser.DTD_VALIDATION);
</pre><p>The preceding code sets the mode to DTD validation.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Register event handlers with the SAX parser:</span><div><pre class="oac_no_warn" dir="ltr">parser.setContentHandler(defHandler);
parser.setEntityResolver(defHandler);
parser.setDTDHandler(defHandler);
parser.setErrorHandler(defHandler);
</pre><p>The preceding code registers handlers for the input document, the DTD, entities, and errors.</p>
                              <p>The following code shows the <code class="codeph">XMLDefaultHandler</code> implementation. The <code class="codeph">startElement()</code> and <code class="codeph">endElement()</code> methods print the qualified name, local name, and namespace URI for each element (for an explanation of these terms, see <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53__CCHBDBGE" title="This table describes useful methods of the XMLDocument class.">Table 12-7</a>).
                              </p><pre class="oac_no_warn" dir="ltr">class XMLDefaultHandler extends DefaultHandler
{
   public void XMLDefaultHandler(){}
   public void startElement(String uri, String localName,
                            String qName, Attributes atts)
   throws SAXException
   {
      System.out.println("ELEMENT Qualified Name:" + qName);
      System.out.println("ELEMENT Local Name    :" + localName);
      System.out.println("ELEMENT Namespace     :" + uri);
 
      for (int i=0; i&lt;atts.getLength(); i++)
      {
         qName = atts.getQName(i);
         localName = atts.getLocalName(i);
         uri = atts.getURI(i);
 
         System.out.println(" ATTRIBUTE Qualified Name   :" + qName);
         System.out.println(" ATTRIBUTE Local Name       :" + localName);
         System.out.println(" ATTRIBUTE Namespace        :" + uri);
 
         // You can get the type and value of the attributes either
         // by index or by the Qualified Name.
 
         String type = atts.getType(qName);
         String value = atts.getValue(qName);
 
         System.out.println(" ATTRIBUTE Type             :" + type);
         System.out.println(" ATTRIBUTE Value            :" + value);
 
         System.out.println();
 
      }
   }
   public void endElement(String uri, String localName,
                          String qName) throws SAXException
   {
      System.out.println("ELEMENT Qualified Name:" + qName);
      System.out.println("ELEMENT Local Name    :" + localName);
      System.out.println("ELEMENT Namespace     :" + uri);
   }
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Parse the input XML document:</span><div><pre class="oac_no_warn" dir="ltr">parser.parse(DemoUtil.createURL(argv[0]).toString());
</pre><p>The preceding code converts the document to a URL and then parses it.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19150"></a><a id="ADXDK19149"></a><div class="props_rev_3"><a id="GUID-381D4A51-01E8-4B6F-A581-64D379F3BF9C" name="GUID-381D4A51-01E8-4B6F-A581-64D379F3BF9C"></a><h4 id="ADXDK-GUID-381D4A51-01E8-4B6F-A581-64D379F3BF9C" class="sect4">Performing SAX Parsing with XMLTokenizer</h4>
                  <div>
                     <p>You can create a simple SAX parser as a instance of the <code class="codeph">XMLTokenizer</code> class and use the parser to tokenize the input XML. 
                     </p>
                     <div class="section">
                        <p><a href="XML-parsing-for-Java.html#GUID-381D4A51-01E8-4B6F-A581-64D379F3BF9C__CCHJDBGJ" title="This table describes XMLTokenizer methods.">Table 12-15</a> lists useful methods in the class.
                        </p>
                        <div class="tblformal" id="GUID-381D4A51-01E8-4B6F-A581-64D379F3BF9C__CCHJDBGJ">
                           <p class="titleintable">Table 12-15 XMLTokenizer Methods</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XMLTokenizer Methods" summary="This table describes XMLTokenizer methods." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d35651e7891">Method</th>
                                    <th align="left" valign="bottom" width="75%" id="d35651e7894">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d35651e7899" headers="d35651e7891 ">
                                       <p><code class="codeph">setToken()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d35651e7899 d35651e7894 ">
                                       <p>Registers a new token for XML tokenizer.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d35651e7907" headers="d35651e7891 ">
                                       <p><code class="codeph">setErrorStream()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d35651e7907 d35651e7894 ">
                                       <p>Registers a output stream for errors</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d35651e7915" headers="d35651e7891 ">
                                       <p><code class="codeph">tokenize()</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d35651e7915 d35651e7894 ">
                                       <p>Tokenizes the input XML</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>SAX parsers with <code class="codeph">Tokenizer</code> features must implement the <code class="codeph">XMLToken</code> interface. The callback method for <code class="codeph">XMLToken</code> is <code class="codeph">token()</code>, which receives an XML token and its corresponding value and performs an action. For example, you can implement <code class="codeph">token()</code> so that it prints the token name followed by the value of the token.
                        </p>
                        <p>The <code class="codeph">Tokenizer.java</code> sample program accepts an XML document as input, parses it, and prints a list of the XML tokens. The program implements a <code class="codeph">doParse()</code> method that follows these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a URL from the input XML stream: </span><div><pre class="oac_no_warn" dir="ltr">URL url = DemoUtil.createURL(arg);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create an <code class="codeph">XMLTokenizer</code> parser:</span><div><pre class="oac_no_warn" dir="ltr">parser  = new XMLTokenizer ((XMLToken)new Tokenizer());
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Register an output error stream:</span><div><pre class="oac_no_warn" dir="ltr">parser.setErrorStream  (System.out);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Register tokens with the parser:</span><div><pre class="oac_no_warn" dir="ltr">parser.setToken (STagName, true);
parser.setToken (EmptyElemTag, true);
parser.setToken (STag, true);
parser.setToken (ETag, true);
parser.setToken (ETagName, true);
...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Tokenize the XML document:</span><div><pre class="oac_no_warn" dir="ltr">parser.tokenize (url);
</pre><p>The <code class="codeph">token()</code> callback method determines the action to take upon encountering a particular token. The following code is part of the implementation of this method:
                              </p><pre class="oac_no_warn" dir="ltr">public void token (int token, String value)
{
   switch (token)
   {
   case XMLToken.STag:
      System.out.println ("STag: " + value);
      break;
   case XMLToken.ETag:
      System.out.println ("ETag: " + value);
      break;
   case XMLToken.EmptyElemTag:
      System.out.println ("EmptyElemTag: " + value);
      break;
   case XMLToken.AttValue:
      System.out.println ("AttValue: " + value);
      break;
   ...
   default:
      break;
   }
}</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADXDK981"></a><a id="ADXDK19151"></a><div class="props_rev_3"><a id="GUID-FD056430-78F8-4507-8D6F-9BFB8D95EA8D" name="GUID-FD056430-78F8-4507-8D6F-9BFB8D95EA8D"></a><h3 id="ADXDK-GUID-FD056430-78F8-4507-8D6F-9BFB8D95EA8D" class="sect3">Parsing XML with JAXP</h3>
               <div>
                  <p>JAXP lets your Java program use the SAX and DOM parsers and the XSLT processor.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div><a id="ADXDK19153"></a><a id="ADXDK1080"></a><a id="ADXDK19152"></a><div class="props_rev_3"><a id="GUID-9188A2DD-F117-4D27-8709-3073321C31D8" name="GUID-9188A2DD-F117-4D27-8709-3073321C31D8"></a><h4 id="ADXDK-GUID-9188A2DD-F117-4D27-8709-3073321C31D8" class="sect4">JAXP Structure</h4>
                  <div>
                     <p>JAXP consists of abstract classes that provide a thin layer for parser pluggability. Oracle implemented JAXP based on the Sun reference implementation.</p>
                     <p><a href="XML-parsing-for-Java.html#GUID-9188A2DD-F117-4D27-8709-3073321C31D8__CCHDAAFH" title="Describes JAXP packages.">Table 12-16</a> lists and describes the packages that comprise JAXP.
                     </p>
                     <div class="tblformal" id="GUID-9188A2DD-F117-4D27-8709-3073321C31D8__CCHDAAFH">
                        <p class="titleintable">Table 12-16 JAXP Packages</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="JAXP Packages" summary="Describes JAXP packages." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d35651e8169">Package</th>
                                 <th align="left" valign="bottom" width="61%" id="d35651e8172">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d35651e8177" headers="d35651e8169 ">
                                    <p><code class="codeph">javax.xml.parsers</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d35651e8177 d35651e8172 ">
                                    <p>Provides standard APIs for DOM 2.0 and SAX 1.0 parsers. Contains vendor-neutral factory classes, including <code class="codeph">SAXParser</code> and a <code class="codeph">DocumentBuilder</code>. <code class="codeph">DocumentBuilder</code> creates a DOM-compliant <code class="codeph">Document</code> object.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d35651e8197" headers="d35651e8169 ">
                                    <p><code class="codeph">javax.xml.transform</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d35651e8197 d35651e8172 ">
                                    <p>Defines the generic APIs for processing XML transformation and performing a transformation from a source to a result.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d35651e8205" headers="d35651e8169 ">
                                    <p><code class="codeph">javax.xml.transform.dom</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d35651e8205 d35651e8172 ">
                                    <p>Provides DOM-specific transformation APIs.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d35651e8213" headers="d35651e8169 ">
                                    <p><code class="codeph">javax.xml.transform.sax</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d35651e8213 d35651e8172 ">
                                    <p>Provides SAX2-specific transformation APIs.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d35651e8221" headers="d35651e8169 ">
                                    <p><code class="codeph">javax.xml.transform.stream</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d35651e8221 d35651e8172 ">
                                    <p>Provides stream- and URI-specific transformation APIs.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADXDK19155"></a><a id="ADXDK19154"></a><div class="props_rev_3"><a id="GUID-C2FF46DA-F711-4D7E-A96D-637877143375" name="GUID-C2FF46DA-F711-4D7E-A96D-637877143375"></a><h4 id="ADXDK-GUID-C2FF46DA-F711-4D7E-A96D-637877143375" class="sect4">Using the SAX API Through JAXP</h4>
                  <div>
                     <p>You can rely on the factory design pattern to create new SAX parser engines with JAXP. </p>
                     <div class="section">
                        <p><a href="XML-parsing-for-Java.html#GUID-C2FF46DA-F711-4D7E-A96D-637877143375__CCHBFEID">Figure 12-6</a> shows the basic process.
                        </p>
                        <div class="figure" id="GUID-C2FF46DA-F711-4D7E-A96D-637877143375__CCHBFEID">
                           <p class="titleinfigure">Figure 12-6 SAX Parsing with JAXP</p><img src="img/adxdk114.gif" width="370" alt="Description of Figure 12-6 follows" title="Description of Figure 12-6 follows" longdesc="img_text/adxdk114.html"><br><a href="img_text/adxdk114.html">Description of "Figure 12-6 SAX Parsing with JAXP"</a></div>
                        <!-- class="figure" -->
                        <p>The basic steps for parsing with SAX through JAXP are:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create a new SAX parser factory with the <code class="codeph">SAXParserFactory</code> class.</span></li>
                        <li><span>Configure the factory.</span></li>
                        <li><span>Create a new SAX parser (<code class="codeph">SAXParser</code>) object from the factory.</span></li>
                        <li><span>Set the event handlers for the SAX parser.</span></li>
                        <li><span>Parse the input XML documents.</span></li>
                     </ol>
                  </div>
               </div><a id="ADXDK19157"></a><a id="ADXDK19156"></a><div class="props_rev_3"><a id="GUID-D3EDB994-4754-495B-9D90-EE9CED327A16" name="GUID-D3EDB994-4754-495B-9D90-EE9CED327A16"></a><h4 id="ADXDK-GUID-D3EDB994-4754-495B-9D90-EE9CED327A16" class="sect4">Using the DOM API Through JAXP</h4>
                  <div>
                     <p>You can rely on the factory design pattern to create new DOM document builder engines with JAXP. </p>
                     <div class="section">
                        <p><a href="XML-parsing-for-Java.html#GUID-D3EDB994-4754-495B-9D90-EE9CED327A16__CCHEJCHF">Figure 12-7</a> shows the basic process.
                        </p>
                        <div class="figure" id="GUID-D3EDB994-4754-495B-9D90-EE9CED327A16__CCHEJCHF">
                           <p class="titleinfigure">Figure 12-7 DOM Parsing with JAXP</p><img src="img/adxdk115.gif" width="408" alt="Description of Figure 12-7 follows" title="Description of Figure 12-7 follows" longdesc="img_text/adxdk115.html"><br><a href="img_text/adxdk115.html">Description of "Figure 12-7 DOM Parsing with JAXP"</a></div>
                        <!-- class="figure" -->
                        <p>The basic steps for parsing with DOM through JAXP are:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create a new DOM parser factory with the <code class="codeph">DocumentBuilderFactory</code> class.</span></li>
                        <li><span>Configure the factory.</span></li>
                        <li><span>Create a new DOM builder (<code class="codeph">DocumentBuilder</code>) object from the factory.</span></li>
                        <li><span>Set the error handler and entity resolver for the DOM builder.</span></li>
                        <li><span>Parse the input XML documents.</span></li>
                     </ol>
                  </div>
               </div><a id="ADXDK19158"></a><div class="props_rev_3"><a id="GUID-5C17A64B-092E-437F-A38A-400E488156FE" name="GUID-5C17A64B-092E-437F-A38A-400E488156FE"></a><h4 id="ADXDK-GUID-5C17A64B-092E-437F-A38A-400E488156FE" class="sect4">Transforming XML Through JAXP</h4>
                  <div>
                     <p>The basic steps for transforming XML through JAXP are described.</p>
                     <div class="section">
                        <p>The steps are:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create a new transformer factory with the <code class="codeph">TransformerFactory</code> class.</span></li>
                        <li><span>Configure the factory.</span></li>
                        <li><span>Create a new transformer from the factory and specify an XSLT stylesheet.</span></li>
                        <li><span>Configure the transformer.</span></li>
                        <li><span>Transform the document.</span></li>
                     </ol>
                  </div>
               </div><a id="ADXDK19159"></a><div class="props_rev_3"><a id="GUID-D1B88BA0-9D18-40C7-A704-D53DC41D3BA3" name="GUID-D1B88BA0-9D18-40C7-A704-D53DC41D3BA3"></a><h4 id="ADXDK-GUID-D1B88BA0-9D18-40C7-A704-D53DC41D3BA3" class="sect4">Parsing with JAXP</h4>
                  <div>
                     <p>The <code class="codeph">JAXPExamples.java</code> program shows the basic steps of parsing with JAXP. 
                     </p>
                     <div class="section">
                        <p>The program implements these methods and uses them to parse and perform additional processing on XML files in the <code class="codeph">/jaxp</code> directory:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">basic()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">identity()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">namespaceURI()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">templatesHandler()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">contentHandler2contentHandler()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">contentHandler2DOM()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">reader()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xmlFilter()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xmlFilterChain()</code></p>
                           </li>
                        </ul>
                        <p>The program creates URLs for the sample XML files <code class="codeph">jaxpone.xml</code> and <code class="codeph">jaxpone.xsl</code> and then invokes the preceding methods in sequence. The basic design of the demo is as follows (to save space, only the <code class="codeph">basic()</code> method is shown):
                        </p><pre class="oac_no_warn" dir="ltr">public class JAXPExamples
{
        public static void main(String argv[])
        throws TransformerException, TransformerConfigurationException,
               IOException, SAXException, ParserConfigurationException,                 
               FileNotFoundException
        {
        try {
         URL xmlURL = createURL("jaxpone.xml");
         String xmlID = xmlURL.toString();
         URL xslURL = createURL("jaxpone.xsl");
         String xslID = xslURL.toString();
         //
         System.out.println("--- basic ---");
         basic(xmlID, xslID);
         System.out.println();
         ...
      } catch(Exception err) {
        err.printStackTrace();
      }
   }
   //
   public static void basic(String xmlID, String xslID)
      throws TransformerException, TransformerConfigurationException
   {
      TransformerFactory tfactory = TransformerFactory.newInstance();
      Transformer transformer = tfactory.newTransformer(new StreamSource(xslID));
      StreamSource source = new StreamSource(xmlID);
      transformer.transform(source, new StreamResult(System.out));
   }
...
}
</pre><p>The <code class="codeph">reader()</code> method in the program <code class="codeph">JAXPExamples.java</code> shows a simple technique for parsing an XML document with SAX, using these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a new instance of a <code class="codeph">TransformerFactory</code> and cast it to a <code class="codeph">SAXTransformerFactory</code>:</span><div><pre class="oac_no_warn" dir="ltr">TransformerFactory tfactory = TransformerFactory.newInstance();
SAXTransformerFactory stfactory = (SAXTransformerFactory)tfactory;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create an XML reader by creating a <code class="codeph">StreamSource</code> object from a stylesheet and passing it to the factory method <code class="codeph">newXMLFilter()</code>:</span><div><pre class="oac_no_warn" dir="ltr">URL xslURL = createURL("jaxpone.xsl");
String xslID = xslURL.toString();
...
StreamSource streamSource = new StreamSource(xslID);
XMLReader reader = stfactory.newXMLFilter(streamSource);
</pre><p><code class="codeph">newXMLFilter()</code> returns an <code class="codeph">XMLFilter</code> object that uses the specified <code class="codeph">Source</code> as the transformation instructions.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a content handler and register it with the XML reader:</span><div><pre class="oac_no_warn" dir="ltr">ContentHandler contentHandler = new oraContentHandler();
reader.setContentHandler(contentHandler);
</pre><p>The preceding code creates an instance of the class <code class="codeph">oraContentHandler</code> by compiling the <code class="codeph">oraContentHandler.java</code> program in the demo directory.
                              </p>
                              <p>The following code shows part of the implementation of the <code class="codeph">oraContentHandler</code> class:
                              </p><pre class="oac_no_warn" dir="ltr">public class oraContentHandler implements ContentHandler
{
   private static final String TRADE_MARK = "Oracle 9i ";
 
   public void setDocumentLocator(Locator locator)
   {
      System.out.println(TRADE_MARK + "- setDocumentLocator");
   }
 
   public void startDocument()
      throws SAXException
   {
      System.out.println(TRADE_MARK + "- startDocument");
   }
 
   public void endDocument()
      throws SAXException
   {
      System.out.println(TRADE_MARK + "- endDocument");
   }
   ...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Parse the input XML document by passing the <code class="codeph">InputSource</code> to the <code class="codeph">XMLReader.parse()</code> method:</span><div><pre class="oac_no_warn" dir="ltr">InputSource is = new InputSource(xmlID);
reader.parse(is);</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19160"></a><div class="props_rev_3"><a id="GUID-CE9DE31B-8870-4944-9491-EB067D5D5F6E" name="GUID-CE9DE31B-8870-4944-9491-EB067D5D5F6E"></a><h4 id="ADXDK-GUID-CE9DE31B-8870-4944-9491-EB067D5D5F6E" class="sect4">Performing Basic Transformations with JAXP</h4>
                  <div>
                     <p>You can use JAXP to perform basic transformations. </p>
                     <div class="section">
                        <p>JAXP can transform these types of input:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>XML documents</p>
                           </li>
                           <li>
                              <p>XSL stylesheets</p>
                           </li>
                           <li>
                              <p><code class="codeph">ContentHandler</code> class defined in <code class="codeph">oraContentHandler.java</code></p>
                           </li>
                        </ul>
                        <p>Here are some examples of using JAXP to perform basic transformations:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You can use the <code class="codeph">identity()</code> method to perform a transformation in which the output XML document and the input XML document are the same.
                              </p>
                           </li>
                           <li>
                              <p>You can use the <code class="codeph">xmlFilterChain()</code> method to apply three stylesheets in a chain.
                              </p>
                           </li>
                           <li>
                              <p>You can transform any class of the interface <code class="codeph">Source</code> into a class of the interface <code class="codeph">Result</code> (<code class="codeph">DOMSource</code> to <code class="codeph">DOMResult</code>, <code class="codeph">StreamSource</code> to <code class="codeph">StreamResult</code>, <code class="codeph">SAXSource</code> to <code class="codeph">SAXResult</code>, and so on).
                              </p>
                           </li>
                        </ul>
                        <p>The <code class="codeph">basic()</code> method in the program <code class="codeph">JAXPExamples.java</code> shows how to perform a basic XSLT transformation, using these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a new instance of a <code class="codeph">TransformerFactory</code>:</span><div><pre class="oac_no_warn" dir="ltr">TransformerFactory tfactory = TransformerFactory.newInstance();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create a new XSL transformer from the factory and specify the stylesheet to use for the transformation:</span><div><pre class="oac_no_warn" dir="ltr">URL xslURL = createURL("<span class="bold">jaxpone.xsl</span>");
String xslID = xslURL.toString();
...
Transformer transformer = tfactory.newTransformer(new StreamSource(xslID));
</pre><p>In the preceding code, the stylesheet is <code class="codeph">jaxpone.xsl</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Set the stream source to the input XML document:</span><div><pre class="oac_no_warn" dir="ltr">URL xmlURL = createURL("<span class="bold">jaxpone.xml</span>");
String xmlID = xmlURL.toString();
...
StreamSource source = new StreamSource(xmlID);
</pre><p>In the preceding code, the stream source is <code class="codeph">jaxpone.xml</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Transform the document from a <code class="codeph">StreamSource</code> to a <code class="codeph">StreamResult</code>:</span><div><pre class="oac_no_warn" dir="ltr">transformer.transform(source, new StreamResult(System.out));</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADXDK982"></a><a id="ADXDK19162"></a><div class="props_rev_3"><a id="GUID-7C87A9E2-000B-4A33-8D86-11FDA13E1CCA" name="GUID-7C87A9E2-000B-4A33-8D86-11FDA13E1CCA"></a><h3 id="ADXDK-GUID-7C87A9E2-000B-4A33-8D86-11FDA13E1CCA" class="sect3">Compressing and Decompressing XML</h3>
               <div>
                  <p>XDK lets you use SAX or DOM to parse XML and then write the parsed data to a compressed binary stream. XDK also lets you reverse the process, decompressing the binary stream to reconstruct the XML data.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div><a id="ADXDK19164"></a><div class="props_rev_3"><a id="GUID-AF615325-9E89-47D9-85B0-2FC9891CF0DF" name="GUID-AF615325-9E89-47D9-85B0-2FC9891CF0DF"></a><h4 id="ADXDK-GUID-AF615325-9E89-47D9-85B0-2FC9891CF0DF" class="sect4">Compressing a DOM Object</h4>
                  <div>
                     <p><code class="codeph">DOMCompression.java</code> shows the basic steps of DOM compression. The most important DOM compression method is <code class="codeph">XMLDocument.writeExternal()</code>, which saves the state of the object by creating a binary compressed stream with information about the object.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">DOMCompression.java</code> program uses these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a DOM parser, parse an input XML document, and get the DOM representation:</span><div><pre class="oac_no_warn" dir="ltr">public class DOMCompression
{
   static OutputStream out = System.out;
   public static void main(String[] args)
   {
      XMLDocument doc = new XMLDocument();
      DOMParser parser = new DOMParser();
      try
      {
        parser.setValidationMode(XMLParser.SCHEMA_VALIDATION);
        parser.setPreserveWhitespace(false);
        parser.retainCDATASection(true);
        parser.parse(createURL(args[0]));
        doc = parser.getDocument();
        ...
</pre><p>For a description of this technique, see <a href="XML-parsing-for-Java.html#GUID-7C91F2D5-350D-4530-8988-295EF0B60D53" title="DOMSample.java shows the basic steps for parsing an input XML document and accessing it through a DOM. DOMSample.java receives an XML file as input, parses it, and prints the elements and attributes in the DOM tree.">Performing Basic DOM Parsing</a>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a <code class="codeph">FileOutputStream</code> and wrap it in an <code class="codeph">ObjectOutputStream</code> for serialization:</span><div><pre class="oac_no_warn" dir="ltr">OutputStream os = new FileOutputStream("xml.ser");
ObjectOutputStream oos = new ObjectOutputStream(os);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Serialize the object to the file by invoking <code class="codeph">XMLDocument.writeExternal()</code>:</span><div><pre class="oac_no_warn" dir="ltr">doc.writeExternal(oos);
</pre><p>This method saves the state of the object by creating a binary compressed stream with information about this object.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19165"></a><div class="props_rev_3"><a id="GUID-71F74D4E-1A6C-4696-AA42-DB3AE952B4A1" name="GUID-71F74D4E-1A6C-4696-AA42-DB3AE952B4A1"></a><h4 id="ADXDK-GUID-71F74D4E-1A6C-4696-AA42-DB3AE952B4A1" class="sect4">Decompressing a DOM Object</h4>
                  <div>
                     <p><code class="codeph">DOMDeCompression.java</code> shows the basic steps of DOM decompression. The most important DOM decompression method is <code class="codeph">XMLDocument.readExternal()</code>, which reads the information that the <code class="codeph">writeExternal()</code> method wrote (the compressed stream) and restores the object.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">DOMDeCompression.java</code> program uses these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a file input stream for the compressed file and wrap it in an <code class="codeph">ObjectInputStream</code>:</span><div><pre class="oac_no_warn" dir="ltr">InputStream is;
ObjectInputStream ois;
...
is = new FileInputStream("xml.ser");
ois = new ObjectInputStream(is);
</pre><p>The preceding code creates a <code class="codeph">FileInputStream</code> from the compressed file created in <a href="XML-parsing-for-Java.html#GUID-AF615325-9E89-47D9-85B0-2FC9891CF0DF" title="DOMCompression.java shows the basic steps of DOM compression. The most important DOM compression method is XMLDocument.writeExternal(), which saves the state of the object by creating a binary compressed stream with information about the object.">Compressing a DOM Object</a>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a new XML document object to contain the decompressed data:</span><div><pre class="oac_no_warn" dir="ltr">XMLDocument serializedDoc = null;
serializedDoc = new XMLDocument();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Read the compressed file by invoking <code class="codeph">XMLDocument.readExternal()</code>:</span><div><pre class="oac_no_warn" dir="ltr">serializedDoc.readExternal(ois);
serializedDoc.print(System.out);
</pre><p>The preceding code data and prints it to <code class="codeph">System.out</code>.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19167"></a><div class="props_rev_3"><a id="GUID-7EDACFCC-90A8-4B1D-BC28-106A54A03DF8" name="GUID-7EDACFCC-90A8-4B1D-BC28-106A54A03DF8"></a><h4 id="ADXDK-GUID-7EDACFCC-90A8-4B1D-BC28-106A54A03DF8" class="sect4">Compressing a SAX Object</h4>
                  <div>
                     <p><code class="codeph">SAXCompression.java</code> shows the basic steps of parsing a file with SAX and writing the compressed stream to a file. The important class is <code class="codeph">CXMLHandlerBase</code>, which is a SAX <code class="codeph">Handler</code> that compresses XML data based on SAX events. 
                     </p>
                     <div class="section">
                        <p>To use SAX compression, implement this interface and register it with the SAX parser by invoking <code class="codeph">Parser.setDocumentHandler()</code>.
                        </p>
                        <p>The <code class="codeph">SAXCompression.java</code> program uses these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a <code class="codeph">FileOutputStream</code> and wrap it in an <code class="codeph">ObjectOutputStream</code>:</span><div><pre class="oac_no_warn" dir="ltr">String compFile = "xml.ser";
FileOutputStream outStream = new FileOutputStream(compFile);
ObjectOutputStream out = new ObjectOutputStream(outStream);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the SAX event handler:</span><div><pre class="oac_no_warn" dir="ltr">CXMLHandlerBase cxml = new CXMLHandlerBase(out);

</pre><p>The <code class="codeph">CXMLHandlerBase</code> class implements the <code class="codeph">ContentHandler</code>, <code class="codeph">DTDHandler</code>, <code class="codeph">EntityResolver</code>, and <code class="codeph">ErrorHandler</code> interfaces.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create the SAX parser:</span><div><pre class="oac_no_warn" dir="ltr">SAXParser parser = new SAXParser();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Configure the SAX parser:</span><div><pre class="oac_no_warn" dir="ltr">parser.setContentHandler(cxml);
parser.setEntityResolver(cxml);
parser.setValidationMode(XMLConstants.NONVALIDATING);
</pre><p>The preceding code sets the content handler, entity resolver, and validation mode.</p>
                              <div class="infoboxnote" id="GUID-7EDACFCC-90A8-4B1D-BC28-106A54A03DF8__GUID-E8C339BD-622D-4958-BF47-B777BE33FE74">
                                 <p class="notep1">Note:</p>
                                 <p>Although <code class="codeph">oracle.xml.comp.CXMLHandlerBase</code> implements both <code class="codeph">DocumentHandler</code> and <code class="codeph">ContentHandler</code> interfaces, Oracle recommends using the SAX 2.0 <code class="codeph">ContentHandler</code> interface.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Parse the XML:</span><div><pre class="oac_no_warn" dir="ltr">parser.parse(url);
</pre><p>The <code class="codeph">SAXCompression.java</code> program writes the serialized data to the <code class="codeph">ObjectOutputStream</code>.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19168"></a><div class="props_rev_3"><a id="GUID-AB4A91C9-319C-47AA-B3F3-C963B5BDC0AD" name="GUID-AB4A91C9-319C-47AA-B3F3-C963B5BDC0AD"></a><h4 id="ADXDK-GUID-AB4A91C9-319C-47AA-B3F3-C963B5BDC0AD" class="sect4">Decompressing a SAX Object</h4>
                  <div>
                     <p><code class="codeph">SAXDeCompression.java</code> shows the basic steps of reading the serialized data from the file that <code class="codeph">SAXCompression.java</code> wrote. The important class is <code class="codeph">CXMLParser</code>, which is an XML parser that regenerates SAX events from a compressed stream.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">SAXDeCompression.java</code> program follows these steps (which are illustrated with code fragments from the program):
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a SAX event handler:</span><div><pre class="oac_no_warn" dir="ltr">SampleSAXHandler xmlHandler = new SampleSAXHandler();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the SAX parser by instantiating the <code class="codeph">CXMLParser</code> class:</span><div><pre class="oac_no_warn" dir="ltr">CXMLParser parser = new CXMLParser();
</pre><p>The <code class="codeph">CXMLParser</code> class implements the regeneration of XML documents from a compressed stream by generating SAX events from them.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Set the event handler for the SAX parser:</span><div><pre class="oac_no_warn" dir="ltr">parser.setContentHandler(xmlHandler);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Parse the compressed stream and generate the SAX events:</span><div><pre class="oac_no_warn" dir="ltr">parser.parse(args[0]);
</pre><p>The preceding code receives a file name from the command line and parses the XML.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADXDK983"></a><a id="ADXDK19169"></a><div class="props_rev_3"><a id="GUID-BB57C7AC-2962-4617-B26F-FEE6B5114A7A" name="GUID-BB57C7AC-2962-4617-B26F-FEE6B5114A7A"></a><h3 id="ADXDK-GUID-BB57C7AC-2962-4617-B26F-FEE6B5114A7A" class="sect3">Tips and Techniques for Parsing XML</h3>
               <div>
                  <p>A few parsing tips and techniques are listed.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div><a id="ADXDK19171"></a><a id="ADXDK19170"></a><div class="props_rev_3"><a id="GUID-A0AE622C-44E2-4849-9C6D-7338970E026E" name="GUID-A0AE622C-44E2-4849-9C6D-7338970E026E"></a><h4 id="ADXDK-GUID-A0AE622C-44E2-4849-9C6D-7338970E026E" class="sect4">Extracting Node Values from a DOM Tree</h4>
                  <div>
                     <p>You can use the <code class="codeph">selectNodes()</code> method in the <code class="codeph">XMLNode</code> class to extract content from a DOM tree or subtree based on the select patterns allowed by XSL.
                     </p>
                     <div class="section">
                        <p> You can use the optional second parameter of <code class="codeph">selectNodes()</code> to resolve namespace prefixes; that is, to return the expanded namespace URL when given a prefix. The <code class="codeph">XMLElement</code> class implements <code class="codeph">NSResolver</code>, so a reference to an <code class="codeph">XMLElement</code> object can be sent as the second parameter. <code class="codeph">XMLElement</code> resolves the prefixes based on the input document. You can use the <code class="codeph">NSResolver</code> interface to override the namespace definitions.
                        </p>
                        <p>The sample code in <a href="XML-parsing-for-Java.html#GUID-A0AE622C-44E2-4849-9C6D-7338970E026E__CCHHEIGA">Example 12-4</a> shows how to use <code class="codeph">selectNodes()</code>.
                        </p>
                        <p>To test the program, create a file with the code in <a href="XML-parsing-for-Java.html#GUID-A0AE622C-44E2-4849-9C6D-7338970E026E__CCHHEIGA">Example 12-4</a>, and then compile it in the <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/</code><code class="codeph">common</code> directory. Pass the file name <code class="codeph">family.xml</code> to the program as a parameter to traverse the <code class="codeph">&lt;family&gt;</code> tree. The output is similar to this:
                        </p><pre class="oac_no_warn" dir="ltr">% java selectNodesTest family.xml
Sarah
Bob
Joanne
Jim
</pre><p>Now run the following code to determine the values of the <code class="codeph">memberid</code> attributes of all <code class="codeph">&lt;member&gt;</code> elements in the document:
                        </p><pre class="oac_no_warn" dir="ltr">% java selectNodesTest family.xml //member/@memberid
m1
m2
m3
m4</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A0AE622C-44E2-4849-9C6D-7338970E026E__CCHHEIGA">
                        <p class="titleinexample">Example 12-4 Extracting Contents of a DOM Tree with selectNodes()</p><pre class="oac_no_warn" dir="ltr">//
// selectNodesTest.java
//
import java.io.*;
import oracle.xml.parser.v2.*;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
 
public class selectNodesTest
{
  public static void main(String[] args)
    throws Exception
  {
    // supply an xpath expression
    String pattern = "/family/member/text()";
    // accept a filename on the command line
    // run the program with $ORACLE_HOME/xdk/demo/java/parser/common/family.xml
    String file    = args[0];
 
    if (args.length == 2)
      pattern = args[1];
 
    DOMParser dp = new DOMParser();
 
    dp.parse(DemoUtil.createURL(file));  // include createURL from DemoUtil
    XMLDocument xd = dp.getDocument();
    XMLElement element = (XMLElement) xd.getDocumentElement();
    NodeList nl = element.selectNodes(pattern, element);
    for (int i = 0; i &lt; nl.getLength(); i++)
    {
      System.out.println(nl.item(i).getNodeValue());
    } // end for
  } // end main
} // end selectNodesTest
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK19173"></a><a id="ADXDK19174"></a><a id="ADXDK19172"></a><div class="props_rev_3"><a id="GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD" name="GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD"></a><h4 id="ADXDK-GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD" class="sect4">Merging Documents with appendChild()</h4>
                  <div>
                     <p>How to merge XML documents using <code class="codeph">XMLElement.appendChild()</code> is described.
                     </p>
                     <div class="section">
                        <p>To write a program that lets a user complete a client-side Java form and get an XML document, your Java program can contain these variables:</p><pre class="oac_no_warn" dir="ltr">String firstname = "Gianfranco";
String lastname = "Pietraforte";
</pre><p>To insert this information into an XML document, you can use either of these techniques:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create an XML document in a string and then parse it. For example:</p><pre class="oac_no_warn" dir="ltr">String xml = "&lt;person&gt;&lt;first&gt;"+firstname+"&lt;/first&gt;"+
     "&lt;last&gt;"+lastname+"&lt;/last&gt;&lt;/person&gt;";
DOMParser d = new DOMParser();
d.parse(new StringReader(xml));
Document xmldoc = d.getDocument();
</pre></li>
                           <li>
                              <p>Use DOM APIs to construct an XML document, creating elements and then appending them to one another. For example:</p><pre class="oac_no_warn" dir="ltr">Document xmldoc = new XMLDocument();
Element e1 = xmldoc.createElement("person");
xmldoc.appendChild(e1);
Element e2 = xmldoc.createElement("firstname");
e1.appendChild(e2);
Text t = xmldoc.createText("Larry");
e2.appendChild(t);
</pre></li>
                        </ul>
                        <p>You can use the second technique only on a <span class="italic">single</span> DOM tree.
                        </p>
                        <p><a href="XML-parsing-for-Java.html#GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD__CCHHCEFA">Example 12-5</a> uses two trees—the owner document of <code class="codeph">e1</code> is <code class="codeph">xmldoc1</code> and the owner document of <code class="codeph">e2</code> is <code class="codeph">xmldoc2</code>. The <code class="codeph">appendChild()</code> method works only within a single tree. Therefore, invoking <code class="codeph">XMLElement.appendChild()</code> raises a DOM exception of <code class="codeph">WRONG_DOCUMENT_ERR</code>.
                        </p>
                        <p>To copy and paste a DOM document fragment or a DOM node across different XML documents, use the <code class="codeph">XMLDocument.importNode()</code> method (introduced in DOM 2) and the <code class="codeph">XMLDocument.adoptNode()</code> method (introduced in DOM 3). The comments in <a href="XML-parsing-for-Java.html#GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD__CCHGICFG">Example 12-6</a> show this technique.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD__CCHHCEFA">
                        <p class="titleinexample">Example 12-5 Incorrect Use of appendChild()</p><pre class="oac_no_warn" dir="ltr">XMLDocument xmldoc1 = new XMLDocument();
XMLElement e1 = xmldoc1.createElement("person");
XMLDocument xmldoc2 = new XMLDocument();
XMLElement e2 = xmldoc2.createElement("firstname");
e1.appendChild(e2);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F27F98D1-262F-49D4-8CDF-FAA1C9804ABD__CCHGICFG">
                        <p class="titleinexample">Example 12-6 Merging Documents with appendChild</p><pre class="oac_no_warn" dir="ltr">XMLDocument doc1 = new XMLDocument();
XMLElement element1 = doc1.createElement("person");
XMLDocument doc2 = new XMLDocument();
XMLElement element2 = doc2.createElement("firstname");
<span class="bold">// element2 = doc1.importNode(element2);</span>
<span class="bold">// element2 = doc1.adoptNode(element2);</span>
element1.appendChild(element2);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK1081"></a><a id="ADXDK19175"></a><div class="props_rev_3"><a id="GUID-FC4F9DE4-2636-4069-8732-3F7FE137AF1C" name="GUID-FC4F9DE4-2636-4069-8732-3F7FE137AF1C"></a><h4 id="ADXDK-GUID-FC4F9DE4-2636-4069-8732-3F7FE137AF1C" class="sect4">Parsing DTDs </h4>
                  <div>
                     <p>You can use load and parse a DTD.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19176"></a><div class="props_rev_3"><a id="GUID-B69C71EF-C5F4-4397-A18B-1666A4064286" name="GUID-B69C71EF-C5F4-4397-A18B-1666A4064286"></a><h5 id="ADXDK-GUID-B69C71EF-C5F4-4397-A18B-1666A4064286" class="sect5">Loading External DTDs</h5>
                     <div>
                        <p>The procedure for loading and parsing a DTD is presented.</p>
                        <div class="section">
                           <p>If you invoke the <code class="codeph">DOMParser.parse()</code> method to parse the XML document as an <code class="codeph">InputStream</code>, then use the <code class="codeph">DOMParser.setBaseURL()</code> method to recognize external DTDs within your Java program. <code class="codeph">DOMParser.setBaseURL()</code> points to a location where the DTDs are exposed.
                           </p>
                           <p>The procedure for loading and parsing a DTD is:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Load the DTD as an <code class="codeph">InputStream</code>.</span><div>
                                 <p>For example, this code validates documents against the <code class="codeph">/mydir/my.dtd</code> external DTD:
                                 </p><pre class="oac_no_warn" dir="ltr">InputStream is = MyClass.class.getResourceAsStream("/mydir/my.dtd");
</pre><p>The preceding code opens <code class="codeph">./mydir/my.dtd</code> in the first relative location in the <code class="codeph">CLASSPATH</code> where it can be found, including the JAR file if it is in the <code class="codeph">CLASSPATH</code>.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create a DOM parser and set the validation mode.</span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">DOMParser d = new DOMParser();
d.setValidationMode(DTD_VALIDATION);
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Parse the DTD.</span><div>
                                 <p>For example, this code passes the <code class="codeph">InputStream</code> object to the <code class="codeph">DOMParser.parseDTD()</code> method:
                                 </p><pre class="oac_no_warn" dir="ltr">d.parseDTD(is, "rootelementname");
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Get the document type and then set it.</span><div>
                                 <p>For example, in this code, the <code class="codeph">getDoctype()</code> method gets the DTD object and the <code class="codeph">setDoctype()</code> method sets the DTD to use for parsing:
                                 </p><pre class="oac_no_warn" dir="ltr">d.setDoctype(d.getDoctype());
</pre><p>Alternatively, you can invoke the <code class="codeph">parseDTD()</code> method to parse a DTD file separately and get a DTD object:
                                 </p><pre class="oac_no_warn" dir="ltr">d.parseDTD(new FileReader("/mydir/my.dtd"));
DTD dtd = d.getDoctype();
parser.setDoctype(dtd);
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Parse the input XML document:</span><div><pre class="oac_no_warn" dir="ltr">d.parse("mydoc.xml");</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADXDK19178"></a><a id="ADXDK19177"></a><div class="props_rev_3"><a id="GUID-0B99A25C-9330-4CDD-93AF-96C26667AA39" name="GUID-0B99A25C-9330-4CDD-93AF-96C26667AA39"></a><h5 id="ADXDK-GUID-0B99A25C-9330-4CDD-93AF-96C26667AA39" class="sect5">Caching DTDs with setDoctype</h5>
                     <div>
                        <p>The XML parser for Java provides for DTD caching in validation and nonvalidation modes through the <code class="codeph">DOMParser.setDoctype()</code> method. After you set the DTD with this method, the parser caches it for further parsing.
                        </p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-0B99A25C-9330-4CDD-93AF-96C26667AA39__GUID-6551157D-2FA2-4106-AE11-6A894E626C02">
                              <p class="notep1">Note:</p>
                              <p>DTD caching is optional, and is not enabled automatically.</p>
                           </div>
                           <p>Suppose that your program must parse several XML documents with the same DTD. After you parse the first XML document, you can get the DTD from the parser and set it. For example:</p><pre class="oac_no_warn" dir="ltr">DOMParser parser = new DOMParser();
DTD dtd = parser.getDoctype();
parser.setDoctype(dtd);
</pre><p><a href="XML-parsing-for-Java.html#GUID-0B99A25C-9330-4CDD-93AF-96C26667AA39__CCHDIBGH">Example 12-7</a> invokes <code class="codeph">DOMParser.setDoctype()</code> to cache the DTD.
                           </p>
                           <p>If the cached DTD object is used only for validation, then set the <code class="codeph">DOMParser.USE_DTD_ONLY_FOR_VALIDATION</code> attribute:
                           </p><pre class="oac_no_warn" dir="ltr">parser.setAttribute(DOMParser.USE_DTD_ONLY_FOR_VALIDATION,Boolean.TRUE);
</pre><p>Otherwise, the XML parser copies the DTD object and adds it to the resulting DOM tree.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0B99A25C-9330-4CDD-93AF-96C26667AA39__CCHDIBGH">
                           <p class="titleinexample">Example 12-7 DTDSample.java</p><pre class="oac_no_warn" dir="ltr">/**
 * DESCRIPTION
 * This program illustrates DTD caching.
 */

import java.net.URL;
import java.io.*;
import org.xml.sax.InputSource;
import oracle.xml.parser.v2.*;
 
public class DTDSample
{
   static public void main(String[] args)
   {
      try
      {
         if (args.length != 3)
         {
            System.err.println("Usage: java DTDSample dtd rootelement xmldoc");
            System.exit(1);
         }
 
         // Create a DOM parser
         DOMParser parser = new DOMParser();
 
         // Configure the parser
         parser.setErrorStream(System.out);
         parser.showWarnings(true);
 
        // Create a FileReader for the DTD file specified on the command
        // line and wrap it in an InputSource
        FileReader r = new FileReader(args[0]);
        InputSource inSource = new InputSource(r);
 
        // Create a URL from the command-line argument and use it to set the 
        // system identifier
        inSource.setSystemId(DemoUtil.createURL(args[0]).toString());
 
        // Parse the external DTD from the input source. The second argument is 
        // the name of the root element.
        parser.parseDTD(inSource, args[1]);
        DTD dtd = parser.getDoctype();
 
        // Create a FileReader object from the XML document specified on the
        // command line
        r = new FileReader(args[2]);
 
        // Wrap the FileReader in an InputSource,
        // create a URL from the filename,
        // and set the system identifier
        inSource = new InputSource(r);
        inSource.setSystemId(DemoUtil.createURL(args[2]).toString());

        // ********************
        parser.setDoctype(dtd);
        // ********************

        parser.setValidationMode(DOMParser.DTD_VALIDATION);
       // parser.setAttribute
       //   (DOMParser.USE_DTD_ONLY_FOR_VALIDATION,Boolean.TRUE);
        parser.parse(inSource);
 
        // Get the DOM tree and print
        XMLDocument doc = parser.getDocument();
        doc.print(new PrintWriter(System.out));
 
      }
      catch (Exception e)
      {
         System.out.println(e.toString());
      }
   }
}
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK984"></a><a id="ADXDK19179"></a><div class="props_rev_3"><a id="GUID-5F9B55B9-9AA9-4C2C-A59D-A5C97289F641" name="GUID-5F9B55B9-9AA9-4C2C-A59D-A5C97289F641"></a><h4 id="ADXDK-GUID-5F9B55B9-9AA9-4C2C-A59D-A5C97289F641" class="sect4">Handling Character Sets with the XML Parser</h4>
                  <div>
                     <p>Topics for handling character sets with the parser are introduced.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19180"></a><div class="props_rev_3"><a id="GUID-A2896B6B-A1EE-4EBA-8CAD-E936ED3D2323" name="GUID-A2896B6B-A1EE-4EBA-8CAD-E936ED3D2323"></a><h5 id="ADXDK-GUID-A2896B6B-A1EE-4EBA-8CAD-E936ED3D2323" class="sect5">Detecting the Encoding of an XML File on the Operating System</h5>
                     <div>
                        <p>Use the XML parser to detect the character encoding of an XML file stored on your file system.</p>
                        <div class="section">
                           <p>When reading an XML file stored on the operating system, do not use the <code class="codeph">FileReader</code> class. Instead, use the XML parser to detect the character encoding of the document automatically. Given a binary <code class="codeph">FileInputStream</code> with no external encoding information, the parser automatically determines the character encoding based on the byte-order mark and encoding declaration of the XML document. You can parse any well-formed document in any supported encoding with the sample code in the <code class="codeph">AutoDetectEncoding.java</code> demo, which is located in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/dom</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-A2896B6B-A1EE-4EBA-8CAD-E936ED3D2323__GUID-C94CE09B-9D7D-4E28-B8B5-1A6535793F7A">
                              <p class="notep1">Note:</p>
                              <p>Include the proper encoding declaration in your document, according to the specification. <code class="codeph">setEncoding()</code> cannot set the encoding for your input document. <code class="codeph">setEncoding()</code> is used with <code class="codeph">oracle.xml.parser.v2.XMLDocument</code> to set the correct encoding for printing.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19181"></a><div class="props_rev_3"><a id="GUID-DB29764D-7BEA-41D6-8B35-76B5C0F65139" name="GUID-DB29764D-7BEA-41D6-8B35-76B5C0F65139"></a><h5 id="ADXDK-GUID-DB29764D-7BEA-41D6-8B35-76B5C0F65139" class="sect5">Preventing Distortion of XML Stored in an NCLOB Column</h5>
                     <div>
                        <p>To avoid distortion of XML data that is stored in an <code class="codeph">NCLOB</code> column, use methods <code class="codeph">getUnicodeStream()</code> and <code class="codeph">getBinaryStream()</code>, or print the data to ensure that its characters are not distorted before they are sent to the parser.
                        </p>
                        <div class="section">
                           <p>Suppose that you load XML into a national character large object (<code class="codeph">NCLOB</code>) column of a database using 8-bit encoding of Unicode (UTF-8), and the XML contains two UTF-8 multibyte characters:
                           </p><pre class="oac_no_warn" dir="ltr">G<span class="bold">(0xc2,0x82)</span>otingen, Br<span class="bold">(0xc3,0xbc)</span>ck_W
</pre><p>You write a Java stored function that does this:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Uses the default connection object to connect to the database.</span></li>
                           <li class="stepexpand"><span>Runs a <code class="codeph">SELECT</code> query.</span></li>
                           <li class="stepexpand"><span>Gets the <code class="codeph">oracle.jdbc.OracleResultSet</code> object.</span></li>
                           <li class="stepexpand"><span>Invokes the <code class="codeph">OracleResultSet.getCLOB()</code> method.</span></li>
                           <li class="stepexpand"><span>Invokes the <code class="codeph">getAsciiStream()</code> method on the <code class="codeph">CLOB</code> object.</span></li>
                           <li class="stepexpand"><span>Executes this code to get the XML into a DOM object:</span><div><pre class="oac_no_warn" dir="ltr">DOMParser parser = new DOMParser();
parser.setPreserveWhitespace(true);
parser.parse(istr);
// istr getAsciiStream XMLDocument xmldoc = parser.getDocument();
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>The program throws an exception stating that the XML contains an invalid UTF-8 encoding even though the character (<code class="codeph">0xc2</code>, <code class="codeph">0x82</code>) is valid UTF-8. The problem is that the character can be distorted when the program invokes the <code class="codeph">OracleResultSet.getAsciiStream()</code> method. To solve this problem, invoke the <code class="codeph">getUnicodeStream()</code> and <code class="codeph">getBinaryStream()</code> methods instead of <code class="codeph">getAsciiStream()</code>. If this technique does not work, then try to print the characters to ensure that they are not distorted before they are sent to the parser when you invoke <code class="codeph">DOMParser.parse(istr)</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19182"></a><div class="props_rev_3"><a id="GUID-00C4A795-47D4-4E77-BA29-915C5DC12E91" name="GUID-00C4A795-47D4-4E77-BA29-915C5DC12E91"></a><h5 id="ADXDK-GUID-00C4A795-47D4-4E77-BA29-915C5DC12E91" class="sect5">Writing an XML File in a Nondefault Encoding</h5>
                     <div>
                        <p>A technique is introduced to avoid problems that can be introduced when writing XML files that contain characters that are not available in the default character encoding.</p>
                        <div class="section">
                           <p>UTF-8 encoding is popular for XML documents, but UTF-8 is not usually the default file encoding of Java. Using a Java class in your program that assumes the default file encoding can cause problems.</p>
                           <p>For example, the Java class <code class="codeph">FileWriter</code> depends on the default character encoding of the runtime environment. If you use the <code class="codeph">FileWriter</code> class when writing XML files that contain characters that are not available in the default character encoding, then the output file can suffer parsing errors or data loss.
                           </p>
                           <p>To avoid such problems, use the technique shown in the <code class="codeph">I18nSafeXMLFileWritingSample.java</code> program in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/dom</code>.
                           </p>
                           <p>You cannot use <code class="codeph">System.out.println()</code> to output special characters. You must use a binary output stream that is encoding-aware, such as <code class="codeph">OutputStreamWriter</code>. Construct an <code class="codeph">OutputStreamWriter</code> and use the <code class="codeph">write(char[]</code>, <code class="codeph">int</code>, <code class="codeph">int)</code> method to print, as in this example:
                           </p><pre class="oac_no_warn" dir="ltr">/* Java encoding string for ISO8859-1*/
OutputStreamWriter out = new OutputStreamWriter(System.out, "8859_1");
OutputStreamWriter.write(...);</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19184"></a><a id="ADXDK19183"></a><div class="props_rev_3"><a id="GUID-9F9A2E21-D23F-4D27-ABDD-887027A690AA" name="GUID-9F9A2E21-D23F-4D27-ABDD-887027A690AA"></a><h5 id="ADXDK-GUID-9F9A2E21-D23F-4D27-ABDD-887027A690AA" class="sect5">Parsing XML Stored in Strings</h5>
                     <div>
                        <p>To parse an XML document contained in a <code class="codeph">String</code>, you must first convert the string to an <code class="codeph">InputStream</code> or <code class="codeph">InputSource</code> object.
                        </p>
                        <div class="section">
                           <p><a href="XML-parsing-for-Java.html#GUID-9F9A2E21-D23F-4D27-ABDD-887027A690AA__CCHFBJDJ">Example 12-8</a> converts a string of XML (referenced by <code class="codeph">xmlDoc</code>) to a byte array, converts the byte array to a <code class="codeph">ByteArrwayInputStream</code>, and then parses it.
                           </p>
                           <p>You can convert the <code class="codeph">XMLDocument</code> object created in the previous code back to a string by wrapping a <code class="codeph">StringWriter</code> in a <code class="codeph">PrintWriter</code>. This example shows this technique:
                           </p>
                           <p>To convert the <code class="codeph">XMLDocument</code> object created in <a href="XML-parsing-for-Java.html#GUID-9F9A2E21-D23F-4D27-ABDD-887027A690AA__CCHFBJDJ">Example 12-8</a> back to a string, you can wrap a <code class="codeph">StringWriter</code> in a <code class="codeph">PrintWriter</code>:
                           </p><pre class="oac_no_warn" dir="ltr">StringWriter sw = new StringWriter();
PrintWriter  pw = new PrintWriter(sw);
doc.print(pw);
String YourDocInString = sw.toString();
</pre><p><code class="codeph">ParseXMLFromString.java</code>, which is located in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/dom</code>, is a complete program that creates an XML document as a string and parses it.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9F9A2E21-D23F-4D27-ABDD-887027A690AA__CCHFBJDJ">
                           <p class="titleinexample">Example 12-8 Converting XML in a String</p><pre class="oac_no_warn" dir="ltr">// create parser
DOMParser parser=new DOMParser();
// create XML document in a string
String xmlDoc =
       "&lt;?xml version='1.0'?&gt;"+
       "&lt;hello&gt;"+
       "  &lt;world/&gt;"+
       "&lt;/hello&gt;";
// convert string to bytes to stream
byte aByteArr [] = xmlDoc.getBytes();
ByteArrayInputStream bais = new ByteArrayInputStream(aByteArr,0,aByteArr.length);
//  parse and get DOM tree
DOMParser.parse(bais);
XMLDocument doc = parser.getDocument();
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19186"></a><a id="ADXDK19185"></a><div class="props_rev_3"><a id="GUID-B467ECCA-6AB3-4EB2-89C3-535F3A423265" name="GUID-B467ECCA-6AB3-4EB2-89C3-535F3A423265"></a><h5 id="ADXDK-GUID-B467ECCA-6AB3-4EB2-89C3-535F3A423265" class="sect5">Parsing XML Documents with Accented Characters</h5>
                     <div>
                        <p>Tips for parsing XML documents that contain accented characters are presented.</p>
                        <div class="section">
                           <p><a href="XML-parsing-for-Java.html#GUID-B467ECCA-6AB3-4EB2-89C3-535F3A423265__CCHCBEEG">Example 12-9</a> shows one way to parse an XML document with accented characters (such as <code class="codeph">é</code>).
                           </p>
                           <p>When you try to parse the XML file, the parser might throw an "Invalid UTF-8 encoding" exception. The encoding is a scheme used to write the Unicode character number representation to disk. If you explicitly set the encoding to UTF-8 or do not specify the encoding, then the parser interprets an accented character—which has an ASCII value greater than 127—as the first byte of a UTF-8 multibyte sequence. If the subsequent bytes do not form a valid UTF-8 sequence, then you get an error.</p>
                           <p>The error means that your XML editor did not save the file with UTF-8 encoding. The editor might have saved the file with ISO-8859-1 (Western European ASCII) encoding. Adding the following element to the top of an XML document does not cause your editor to write the bytes representing the file to disk with UTF-8 encoding:</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
</pre><p>One solution is to read accented characters in their hexadecimal or decimal format within the XML document; for example, <code class="codeph">&amp;#xd9;</code>. If you prefer not to use this technique, then you can set the encoding based on the character set that you were using when you created the XML file (for example, ISO-8859-1).
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B467ECCA-6AB3-4EB2-89C3-535F3A423265__CCHCBEEG">
                           <p class="titleinexample">Example 12-9 Parsing a Document with Accented Characters</p><pre class="oac_no_warn" dir="ltr">DOMParser parser=new DOMParser();
parser.setPreserveWhitespace(true);
parser.setErrorStream(System.err);
parser.setValidationMode(false);
parser.showWarnings(true);
parser.parse (new FileInputStream(new File("file_with_accents.xml")));
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19187"></a><div class="props_rev_3"><a id="GUID-3E59A02D-6A61-473E-A1A0-93BC17DACB61" name="GUID-3E59A02D-6A61-473E-A1A0-93BC17DACB61"></a><h5 id="ADXDK-GUID-3E59A02D-6A61-473E-A1A0-93BC17DACB61" class="sect5">Handling Special Characters in Tag Names</h5>
                     <div>
                        <p>Tips for handling special characters in XML element names are presented.</p>
                        <div class="section">
                           <p>If a tag (element) name contains special characters (<code class="codeph">&amp;</code>, <code class="codeph">$</code>, and <code class="codeph">#</code>, and so on), then the parser issues an error about invalid characters.
                           </p>
                           <p>If you are creating a new XML document, choose tag names that have no invalid <code class="codeph">NameChar</code> characters. For example, if you want to name the tags after companies, and one company has the name A&amp;B, then instead of the invalid tag <code class="codeph">&lt;A&amp;B&gt;</code>, choose <code class="codeph">&lt;A_B&gt;</code>, <code class="codeph">&lt;AB&gt;</code>, or <code class="codeph">&lt;A_AND_B&gt;</code>.
                           </p>
                           <p>If you are generating XML from external data sources such as database tables, then:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>XML 1.0 does not address this problem.</p>
                              </li>
                              <li>
                                 <p>In XML 1.1, the data type <code class="codeph">XMLType</code> addresses this problem by providing the <code class="codeph">setConvertSpecialChars</code> and <code class="codeph">convert</code> functions in the <code class="codeph">DBMS_XMLGEN</code> package.
                                 </p>
                                 <p>You can use these functions to control the use of special characters in structured query language (SQL) names and XML names. The SQL-to-XML name-mapping functions escape invalid XML <code class="codeph">NameChar</code> characters in the format of <span class="italic"><code class="codeph">_XHHHH_</code></span>, where <span class="italic"><code class="codeph">HHHH</code></span> is the Unicode value of the invalid character. For example, table name <code class="codeph">V$SESSION</code> is mapped to XML name <code class="codeph">V_X0024_SESSION</code>.
                                 </p>
                                 <p>Escaping invalid characters provides a way to serialize names so that they can be reloaded somewhere else.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">
      <meta name="description" content="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">
      <title>Backing Up and Recovering CDBs and PDBs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-oracle-features-in-a-multitenant-environment.html" title="Previous" type="text/html">
      <link rel="next" href="using-database-utilities-in-a-cdb.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-oracle-features-in-a-multitenant-environment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-database-utilities-in-a-cdb.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">Using Oracle Features in a Multitenant Environment</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Backing Up and Recovering CDBs and PDBs</li>
            </ol>
            <a id="GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" name="GUID-371BD31F-DC28-47D6-859C-E5AA110CE364"></a>
            
            <h2 id="MULTI-GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" class="sect2"><span class="enumeration_chapter">20 </span>Backing Up and Recovering CDBs and PDBs
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).</p>
               <p>This section contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF">Overview of Backing Up and Recovering CDBs and PDBs</a><br>When using the multitenant architecture, you can perform backup and recovery operations on a whole multitenant container database (CDB), the root, or one or more pluggable databases (PDBs).
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA">Backup and Complete Recovery of CDBs</a><br>To perform backup and complete recovery operations on a whole multitenant container database (CDB), you connect as <code class="codeph">TARGET</code> to the root.
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9">Backup and Complete Recovery of PDBs</a><br>You can perform backup and complete recovery operations on a single pluggable database (PDB) or on multiple PDBs.
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371">Point-in-Time Recovery in a Multitenant Environment</a><br>You can perform point-in-time recovery of the whole multitenant container database (CDB) or a particular pluggable database (PDB).
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5">Flashback Database in a Multitenant Environment</a><br>You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable (PDB). 
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="You can use Oracle Database features in a multitenant environment.">Using Oracle Features in a Multitenant Environment</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" name="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF"></a><h3 id="MULTI-GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" class="sect3"><span class="enumeration_section">20.1 </span>Overview of Backing Up and Recovering CDBs and PDBs
               </h3>
               <div>
                  <p>When using the multitenant architecture, you can perform backup and recovery operations on a whole multitenant container database (CDB), the root, or one or more pluggable databases (PDBs).</p>
                  <p>The Oracle Recovery Manager (RMAN) commands used to backup and recover CDBs and PDBs are the same as those used for non-CDBs, with minor variations in the syntax. The backup and recovery operations performed on non-CDBs can also be performed on CDBs and PDBs. This includes the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Full and incremental backups</p>
                     </li>
                     <li>
                        <p>Complete and point-in-time recovery (PITR)</p>
                     </li>
                     <li>
                        <p>Flashback Database</p>
                     </li>
                     <li>
                        <p>Reporting operations (such as listing backups and cross-checking backups)</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-23311206-0FD1-45CF-ABE6-FF21443891C1">About Connecting to CDBs and PDBs</p>
                     <p>You can connect to the root in one of the following ways<span class="italic">:</span></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Connect using operating system authentication</p>
                           <p>You are connected to the root as the <code class="codeph">SYS</code> user with the <code class="codeph">SYSDBA</code> privilege.
                           </p>
                        </li>
                        <li>
                           <p>Connect locally as a common user</p>
                        </li>
                        <li>
                           <p>Connect as a common user through Oracle Net Services</p>
                        </li>
                     </ul>
                     <p>To connect as <code class="codeph">TARGET</code> to a PDB, use one of the following techniques:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Connect with a net service name that resolves to a database service for that PDB</p>
                        </li>
                        <li>
                           <p>Connect locally as a common user or local user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-7044D023-C459-48E3-8EF3-AEF6B720C687">
                        <p class="notep1">Note:</p>
                        <p>Certain operations are not available when you connect directly to a PDB. See <a href="../bradv/starting-interacting-with-rman-client.html#BRADV673" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for a list of these operations.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-2896EAD5-1495-4E0E-8808-F0E578615D92">
                     <p class="notep1">See Also:</p>
                     <p>The following sections in the <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> provide detailed information about backing up and recovering PDBs:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">Connecting as Target to the Root</a></p>
                        </li>
                        <li>
                           <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">Connecting as Target to a PDB</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">Backing Up and Recovering CDBs and PDBs</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" name="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA"></a><h3 id="MULTI-GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" class="sect3"><span class="enumeration_section">20.2 </span>Backup and Complete Recovery of CDBs
               </h3>
               <div>
                  <p>To perform backup and complete recovery operations on a whole multitenant container database (CDB), you connect as <code class="codeph">TARGET</code> to the root.
                  </p>
                  <p>The connection must be established as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                  </p>
                  <p>After you connect to the root, the same commands that are used to perform operations on non-CDBs are used to perform backup and complete recovery on the entire CDB.</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA__GUID-0E8DB322-6D1C-45E8-BB77-C97FF2F6462D">
                     <p class="notep1">See Also:</p>
                     <p>The following sections in the <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> provide detailed information about performing backup and complete recovery of CDBs:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="../bradv/backing-up-database.html#BRADV731" target="_blank">Backing Up a Whole CDB</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/rman-complete-database-recovery.html#BRADV746" target="_blank">Performing Complete Recovery of a Whole CDB</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/validating-database-files-backups.html#BRADV744" target="_blank">Validating a Whole CDB</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/reporting-rman-operations.html#BRADV740" target="_blank">Reporting in CDBs</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">Backing Up and Recovering CDBs and PDBs</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" name="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9"></a><h3 id="MULTI-GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" class="sect3"><span class="enumeration_section">20.3 </span>Backup and Complete Recovery of PDBs
               </h3>
               <div>
                  <p>You can perform backup and complete recovery operations on a single pluggable database (PDB) or on multiple PDBs.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-03E9FC40-D724-42A2-979B-E384614B3194">Backups of PDBs</p>
                     <p>When relocating a PDB or cloning a non-CDB as a PDB, you may want to retain the use of preplugin backups. For preplugin backups to be usable in the destination CDB, metadata about the preplugin backups must be exported to the RMAN repository of the destination CDB.</p>
                     <p>The technique for making the backups usable depends on the type of operation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Creating a PDB by cloning a non-CDB</p>
                           <p>When the non-CDB is opened in read/write mode, you must execute the <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> procedure as the last step before cloning. When plugging in the non-CDB as a PDB to a destination CDB, the operation copies the backup metadata of the source non-CDB into the data dictionary of the destination CDB.
                           </p>
                        </li>
                        <li>
                           <p>Relocating a PDB to another CDB</p>
                           <p>When you unplug the source PDB, the backup metadata is automatically exported. Therefore, you do not need to execute <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code>.
                           </p>
                        </li>
                     </ul>
                     <p>Preplugin backups are usable only on the destination CDB into which you plug in the source non-CDB or PDB.</p>
                     <div class="infoboxnote" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-14EC2F20-25FD-46E5-B660-08E142EA5DDA">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../bradv/rman-backup-concepts.html#GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn about preplugin backups
                              </p>
                           </li>
                           <li>
                              <p><a href="../bradv/backing-up-database.html#GUID-7F9F8913-2838-4066-A000-048B35A70EA4" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn how to create a preplugin backup of the whole database
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_PDB.html#ARPLS-GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> procedure
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-113341CA-36C3-4A19-9D48-28311F5199F5">Syntax for Backup Commands</p>
                     <p>Although the Oracle Recovery Manager (RMAN) commands are the same, the syntax used to perform operations on multiple PDBs contains some modifications.</p>
                     <p>To perform backup and complete recovery operations on a single PDB, you can connect as <code class="codeph">TARGET</code> to either of the following containers:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>PDB</p>
                           <p>In this case, use the same commands that you would use to backup or recover non-CDBs. For example, to back up a PDB, use the <code class="codeph">BACKUP DATABASE</code> command.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CDB$ROOT</code></p>
                           <p>In this case, use the <code class="codeph">PLUGGABLE DATABASE</code> clause in your RMAN commands. The following command backs up the PDB <code class="codeph">hrpdb</code> when connected to the root:
                           </p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb;
</code></pre><p>To perform backup and complete recovery operations on multiple PDBs using a single command, you must connect to the root. Use the <code class="codeph">PLUGGABLE DATABASE</code> clause followed by the list of PDBs on which you want to perform the operation. The following example backs up the PDBs <code class="codeph">hrpdb</code>, <code class="codeph">salespdb</code>, and <code class="codeph">invpdb</code> when connected to the root:
                           </p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb, salespdb, invpdb;
</code></pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-4E01344D-6B49-4FBF-8395-9605412A055C">
                     <p class="notep1">See Also:</p>
                     <p>The following sections in the <span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span> provide detailed information about backing up and recovering PDBs:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">Connecting as Target to a PDB</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">Connecting as Target to the Root</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/backing-up-database.html#BRADV735" target="_blank">Backing Up PDBs with RMAN</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/rman-complete-database-recovery.html#BRADV749" target="_blank">Performing Complete Recovery of PDBs with RMAN</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/validating-database-files-backups.html#BRADV745" target="_blank">Validating PDBs</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/reporting-rman-operations.html#BRADV741" target="_blank">Reporting in PDBs</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">Backing Up and Recovering CDBs and PDBs</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" name="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371"></a><h3 id="MULTI-GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" class="sect3"><span class="enumeration_section">20.4 </span>Point-in-Time Recovery in a Multitenant Environment
               </h3>
               <div>
                  <p>You can perform point-in-time recovery of the whole multitenant container database (CDB) or a particular pluggable database (PDB).</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-93074757-54F6-4470-BCE4-43CE56EF9567">Point-in-Time Recovery of a CDB</p>
                     <p>To perform point-in-time recovery of a CDB, you must meet the following prerequisites:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must be logged in to the root container as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                           </p>
                        </li>
                        <li>
                           <p>The CDB must be mounted.</p>
                        </li>
                     </ul>
                     <p>When performing the recovery operation, use the same commands that you use for non-CDBs.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-7D545C99-9B2F-4430-8EA6-5C793E9E1B3C">Point-in-Time Recovery of a PDB</p>
                     <p>When a PDB is closed in an open or closed CDB, you can recover the PDB to a past point in time. The technique depends on the undo mode of the CDB. The following table describes the differences.</p>
                     <div class="tblformal" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-A94D6BE0-70C8-48A5-A26B-71339F50A4D6">
                        <p class="titleintable">Table 20-1 Differences in Point-in-Time Recovery Techniques</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Differences in Point-in-Time Recovery Techniques" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d100149e773">Undo Mode</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e775">Auxiliary Instance Used?</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e777">Connect as TARGET to ...</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e779">RMAN Commands to Use for Recovery</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e783" headers="d100149e773 ">
                                    <p>Shared</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e783 d100149e775 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e783 d100149e777 ">
                                    <p>CDB root</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e783 d100149e779 ">
                                    <p>Include the <code class="codeph">PLUGGABLE DATABASE</code> clause to specify the PDB that must be recovered.
                                    </p>
                                    <p>RMAN uses an auxiliary destination to store temporary files created during recovery. If a fast recovery area has been configured, then it is used as the auxiliary destination. You can explicitly specify an auxiliary destination using the <code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">RECOVER</code> command.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e807" headers="d100149e773 ">
                                    <p>Local</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e807 d100149e775 ">
                                    <p>No</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e807 d100149e777 ">
                                    <p>CDB root or PDB</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e807 d100149e779 ">
                                    <p>When connected to the PDB, use the same commands that you use for non-CDBs. When connected to the root, include the <code class="codeph">PLUGGABLE DATABASE</code> clause to specify the PDB that must be recovered.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-09656493-45FB-4E01-A254-BF570244313A">
                     <p class="notep1">See Also:</p>
                     <p>The following sections in the <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> for more information about point-in-time recovery.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">Overview of Restore Points in a Multitenant Environment</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">Creating CDB Restore Points</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">Creating PDB Restore Points</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-031D9695-A9D2-4381-A840-39BD3CC19946" target="_blank">Performing Point-in-Time Recovery of CDBs and PDBs</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">Backing Up and Recovering CDBs and PDBs</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" name="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5"></a><h3 id="MULTI-GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" class="sect3"><span class="enumeration_section">20.5 </span>Flashback Database in a Multitenant Environment
               </h3>
               <div>
                  <p>You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable (PDB). </p>
                  <p>RMAN uses an auxiliary destination to store temporary files created during point-in-time recovery. By default, the fast recovery area is used as the auxiliary destination. You can explicitly specify an auxiliary destination using the <code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">RECOVER</code> command.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-CDF83CA0-4688-4CAC-8087-85EE0A77BF47">Flashback of CDBs</p>
                     <p>To perform Flashback Database for a CDB, you must meet the following prerequisites:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must be connected to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                           </p>
                        </li>
                        <li>
                           <p>The CDB must be mounted.</p>
                        </li>
                     </ul>
                     <p>Specify the target point in time for the flashback operation using a CDB restore point, time expression, or SCN. A CDB restore point is accessible to every PDB within the CDB. However, the restore point does not reflect the PDB sub-incarnation of any of its PDBs.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-3548F0AE-1B06-4A22-B71F-7AD2FD0D0132">Flashback of PDBs</p>
                     <p>When a PDB is closed and the CDB is open, you can perform a flashback database operation for this PDB using the <code class="codeph">FLASHBACK DATABASE</code> command. Performing a Flashback Database operation on a particular PDB modifies only data files related to that PDB. The other PDBs in the CDB are not impacted and are available for use. Note that a PDB restore point is accessible only to the PDB in which it is defined and can be used for operations only on this PDB.
                     </p>
                     <div class="tblformal" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__DIFFERENCESINPOINT-IN-TIMERECOVERYT-3410F520">
                        <p class="titleintable">Table 20-2 Differences in Flashback Techniques</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Differences in Flashback Techniques" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d100149e992">CDB Undo Mode</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e994">Auxiliary Instance Used?</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e996">Connect as TARGET to ...</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e998">Commands</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e1002" headers="d100149e992 ">
                                    <p>Shared</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1002 d100149e994 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1002 d100149e996 ">
                                    <p>CDB root</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1002 d100149e998 ">
                                    <p>Use the <code class="codeph">FLASHBACK PLUGGABLE DATABASE</code> command. You can only flash back to a clean PDB restore point.
                                    </p>
                                    <p>RMAN uses an auxiliary destination to store temporary files created during flashback. If a fast recovery area has been configured, then it is used as the auxiliary destination. You can explicitly specify an auxiliary destination using the <code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">FLASHBACK PLUGGABLE DATABASE</code> command.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e1026" headers="d100149e992 ">
                                    <p>Local</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1026 d100149e994 ">
                                    <p>No</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1026 d100149e996 ">
                                    <p>CDB root or PDB</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1026 d100149e998 ">
                                    <p>Use the <code class="codeph">FLASHBACK PLUGGABLE DATABASE</code> command. You can specify the target point in time for the flashback operation using a CDB restore point, PDB restore point, time expression, or target SCN.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-09656493-45FB-4E01-A254-BF570244313A">
                     <p class="notep1">See Also:</p>
                     <p>The following sections in the <span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span> for more information about flashback of CDBs and PDBs:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">Overview of Restore Points in a Multitenant Environment</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">Creating CDB Restore Points</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">Creating PDB Restore Points</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-8466CA3C-652A-4AAB-88EB-8815575D6266" target="_blank">Performing a Flashback Database Operation for a Whole CDB</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-C1215E86-9A7B-4EC9-9777-2A18BD627394" target="_blank">Performing a Flashback Database Operation for PDBs</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs).">Backing Up and Recovering CDBs and PDBs</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
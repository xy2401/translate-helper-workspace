<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>REGR_ (Linear Regression) Functions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="REGEXP_SUBSTR.html" title="Previous" type="text/html">
      <link rel="next" href="REMAINDER.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="REGEXP_SUBSTR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="REMAINDER.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">REGR_ (Linear Regression) Functions </li>
            </ol>
            <a id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9" name="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9"></a><a id="SQLRF51695"></a><a id="SQLRF51696"></a><a id="SQLRF51697"></a><a id="SQLRF51698"></a><a id="SQLRF51699"></a><a id="SQLRF51700"></a><a id="SQLRF51701"></a><a id="SQLRF51702"></a><a id="SQLRF51703"></a><a id="SQLRF00696"></a>
            
            <h2 id="SQLRF-GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9" class="sect2">REGR_ (Linear Regression) Functions </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>The linear regression functions are:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">REGR_SLOPE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_INTERCEPT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_COUNT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_R2</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_AVGX</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_AVGY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_SXX</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_SYY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_SXY</code></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-8919BCD3-C1F6-40B4-B854-EF4F5317BE33">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-310B6965-F28A-4874-A919-53B97DF83DCF"><span class="italic">linear_regr</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-7E43080E-45B3-4508-B45D-E3E9964825B0"><img src="img/linear_regr.gif" alt="Description of linear_regr.eps follows" title="Description of linear_regr.eps follows" longdesc="img_text/linear_regr.html"><br><a href="img_text/linear_regr.html">Description of the illustration linear_regr.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-445E0BE9-A8A8-4CEC-9DFB-9BBBCE37A675">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">Analytic Functions</a>"</span> for information on syntax, semantics, and restrictions
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-F791CCE5-8F73-4C0E-982C-E6DF5B9764E2">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The linear regression functions fit an ordinary-least-squares regression line to a set of number pairs. You can use them as both aggregate and analytic functions. </p>
                  <div class="infoboxnotealso" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-153CB1E5-3977-4163-86FB-581563859BB3">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Aggregate-Functions.html#GUID-62BE676B-AF18-4E63-BD14-25206FEA0848">Aggregate Functions</a>"</span> and <span class="q">"<a href="About-SQL-Expressions.html#GUID-68789A5C-B142-496F-ADEE-837F75F95B2B">About SQL Expressions</a>"</span> for information on valid forms of <span class="italic"><code class="codeph">expr</code></span></p>
                  </div>
                  <p>These functions take as arguments any numeric data type or any nonnumeric data type that can be implicitly converted to a numeric data type. Oracle determines the argument with the highest numeric precedence, implicitly converts the remaining arguments to that data type, and returns that data type.</p>
                  <div class="infoboxnotealso" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-E6BFE576-FD3A-4851-A9EF-14CC9E97335B">
                     <p class="notep1">See Also:</p>
                     <p><a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="This matrix lists the data types in the first column and in the header cell for each subsequent column. An X in a cell indicates implicit conversion of the data types named in the header of that column and column 1 of that row.">Table 2-8</a> for more information on implicit conversion and <span class="q">"<a href="Data-Types.html#GUID-4C0B65DB-E751-4957-A1ED-5044BAFA7812">Numeric Precedence</a>"</span> for information on numeric precedence
                     </p>
                  </div>
                  <p>Oracle applies the function to the set of (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs after eliminating all pairs for which either <span class="italic"><code class="codeph">expr1</code></span> or <span class="italic"><code class="codeph">expr2</code></span> is null. Oracle computes all the regression functions simultaneously during a single pass through the data.
                  </p>
                  <p><span class="italic"><code class="codeph">expr1</code></span> is interpreted as a value of the dependent variable (a <code class="codeph">y</code> value), and <span class="italic"><code class="codeph">expr2</code></span> is interpreted as a value of the independent variable (an <code class="codeph">x</code> value).
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">REGR_SLOPE</code> returns the slope of the line. The return value is a numeric data type and can be null. After the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs, it makes the following computation:
                        </p><pre class="oac_no_warn" dir="ltr">COVAR_POP(expr1, expr2) / VAR_POP(expr2)
</pre></li>
                     <li>
                        <p><code class="codeph">REGR_INTERCEPT</code> returns the y-intercept of the regression line. The return value is a numeric data type and can be null. After the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs, it makes the following computation:
                        </p><pre class="oac_no_warn" dir="ltr">AVG(expr1) - REGR_SLOPE(expr1, expr2) * AVG(expr2)
</pre></li>
                     <li>
                        <p><code class="codeph">REGR_COUNT</code> returns an integer that is the number of non-null number pairs used to fit the regression line.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">REGR_R2</code> returns the coefficient of determination (also called R-squared or goodness of fit) for the regression. The return value is a numeric data type and can be null. <code class="codeph">VAR_POP</code>(<span class="italic"><code class="codeph">expr1</code></span>) and <code class="codeph">VAR_POP</code>(<span class="italic"><code class="codeph">expr2</code></span>) are evaluated after the elimination of null pairs. The return values are:
                        </p><pre class="oac_no_warn" dir="ltr">                     NULL if VAR_POP(expr2)  = 0

                        1 if VAR_POP(expr1)  = 0 and 
                             VAR_POP(expr2) != 0

POWER(CORR(expr1,expr),2) if VAR_POP(expr1)  &gt; 0 and
                             VAR_POP(expr2  != 0
</pre></li>
                  </ul>
                  <p>All of the remaining regression functions return a numeric data type and can be null:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">REGR_AVGX</code> evaluates the average of the independent variable (<span class="italic"><code class="codeph">expr2</code></span>) of the regression line. It makes the following computation after the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs:
                        </p><pre class="oac_no_warn" dir="ltr">AVG(expr2)
</pre></li>
                     <li>
                        <p><code class="codeph">REGR_AVGY</code> evaluates the average of the dependent variable (<span class="italic"><code class="codeph">expr1</code></span>) of the regression line. It makes the following computation after the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs:
                        </p><pre class="oac_no_warn" dir="ltr">AVG(expr1)
</pre></li>
                  </ul>
                  <p><code class="codeph">REGR_SXY</code>, <code class="codeph">REGR_SXX</code>, <code class="codeph">REGR_SYY</code> are auxiliary functions that are used to compute various diagnostic statistics.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">REGR_SXX</code> makes the following computation after the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs:
                        </p><pre class="oac_no_warn" dir="ltr">REGR_COUNT(expr1, expr2) * VAR_POP(expr2)
</pre></li>
                     <li>
                        <p><code class="codeph">REGR_SYY</code> makes the following computation after the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs:
                        </p><pre class="oac_no_warn" dir="ltr">REGR_COUNT(expr1, expr2) * VAR_POP(expr1)
</pre></li>
                     <li>
                        <p><code class="codeph">REGR_SXY</code> makes the following computation after the elimination of null (<span class="italic"><code class="codeph">expr1</code></span>, <span class="italic"><code class="codeph">expr2</code></span>) pairs:
                        </p><pre class="oac_no_warn" dir="ltr">REGR_COUNT(expr1, expr2) * COVAR_POP(expr1, expr2)
</pre></li>
                  </ul>
                  <p>The following examples are based on the sample tables <code class="codeph">sh.sales</code> and <code class="codeph">sh.products</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-E976E3E7-4A34-4821-82FA-5150EEDEB3A6">General Linear Regression Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example provides a comparison of the various linear regression functions used in their analytic form. The analytic form of these functions can be useful when you want to use regression statistics for calculations such as finding the salary predicted for each employee by the model. The sections that follow on the individual linear regression functions contain examples of the aggregate form of these functions.</p><pre class="oac_no_warn" dir="ltr">SELECT job_id, employee_id ID, salary,
REGR_SLOPE(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) slope,
REGR_INTERCEPT(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) intcpt,
REGR_R2(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) rsqr,
REGR_COUNT(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) count,
REGR_AVGX(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) avgx,
REGR_AVGY(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) avgy
   FROM employees
   WHERE department_id in (50, 80)
   ORDER BY job_id, employee_id;

JOB_ID        ID     SALARY SLOPE    INTCPT  RSQR  COUNT       AVGX      AVGY
---------- ----- ---------- ----- --------- ----- ------ ---------- ---------
SA_MAN       145      14000  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       146      13500  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       147      12000  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       148      11000  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       149      10500  .355 -1707.035  .832      5  12200.000  2626.589
SA_REP       150      10000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       151       9500  .257   404.763  .647     29   8396.552  2561.244
SA_REP       152       9000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       153       8000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       154       7500  .257   404.763  .647     29   8396.552  2561.244
SA_REP       155       7000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       156      10000  .257   404.763  .647     29   8396.552  2561.244
. . .</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-BA9CDD5F-11DC-402A-BCB3-51783D449500">REGR_SLOPE and REGR_INTERCEPT Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example calculates the slope and regression of the linear regression model for time employed  (<code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code>) and salary using the sample table  <code class="codeph">hr.employees</code>.  Results are grouped by <code class="codeph">job_id</code>.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id,
REGR_SLOPE(SYSDATE-hire_date, salary) slope,
REGR_INTERCEPT(SYSDATE-hire_date, salary) intercept
   FROM employees
   WHERE department_id in (50,80)
   GROUP BY job_id
   ORDER BY job_id;

JOB_ID     SLOPE    INTERCEPT
---------- ----- ------------
SA_MAN      .355 -1707.030762
SA_REP      .257   404.767151
SH_CLERK    .745   159.015293
ST_CLERK    .904   134.409050
ST_MAN      .479  -570.077291</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-22FA6F56-A4B1-4A61-AA05-0B1986C7791C">REGR_COUNT Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example calculates the count of by <code class="codeph">job_id</code> for time employed  (<code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code>) and salary using the sample table  <code class="codeph">hr.employees</code>.  Results are grouped by <code class="codeph">job_id</code>.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id,
REGR_COUNT(SYSDATE-hire_date, salary) count
   FROM employees
   WHERE department_id in (30, 50)
   GROUP BY job_id
   ORDER BY job_id, count;

JOB_ID          COUNT
---------- ----------
PU_CLERK            5
PU_MAN              1
SH_CLERK           20
ST_CLERK           20
ST_MAN              5</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-B9E4135D-5B72-406B-B40D-12DD1EAA2F87">REGR_R2 Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example calculates the coefficient of determination the linear regression of  time employed  (<code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code>) and salary using the sample table  <code class="codeph">hr.employees</code>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id,
REGR_R2(SYSDATE-hire_date, salary) Regr_R2
   FROM employees
   WHERE department_id in (80, 50)
   GROUP by job_id
  ORDER BY job_id, Regr_R2;

JOB_ID        REGR_R2
---------- ----------
SA_MAN      .83244748
SA_REP     .647007156
SH_CLERK   .879799698
ST_CLERK   .742808493
ST_MAN      .69418508</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-56ED4770-B022-41B8-AC14-3692A63C85DF">REGR_AVGY and REGR_AVGX Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example calculates the average values for time employed  (<code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code>) and salary using the sample table  <code class="codeph">hr.employees</code>.  Results are grouped by <code class="codeph">job_id</code>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id,
REGR_AVGY(SYSDATE-hire_date, salary) avgy,
REGR_AVGX(SYSDATE-hire_date, salary) avgx
   FROM employees
   WHERE department_id in (30,50)
   GROUP BY job_id
   ORDER BY job_id, avgy, avgx;

JOB_ID           AVGY       AVGX
---------- ---------- ----------
PU_CLERK    2950.3778       2780
PU_MAN      4026.5778      11000
SH_CLERK    2773.0778       3215
ST_CLERK    2872.7278       2785
ST_MAN      3140.1778       7280</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A675B68F-2A88-4843-BE2C-FCDE9C65F9A9__GUID-5D3A7387-DB64-47CD-AAC5-B8408CE09A1F">REGR_SXY, REGR_SXX, and REGR_SYY Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example calculates three types of diagnostic statistics for the linear regression of time employed  (<code class="codeph">SYSDATE</code> - <code class="codeph">hire_date</code>) and salary using the sample table <code class="codeph">hr.employees</code>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT job_id,
REGR_SXY(SYSDATE-hire_date, salary) regr_sxy,
REGR_SXX(SYSDATE-hire_date, salary) regr_sxx,
REGR_SYY(SYSDATE-hire_date, salary) regr_syy
   FROM employees
   WHERE department_id in (80, 50)
   GROUP BY job_id
   ORDER BY job_id;
 
JOB_ID       REGR_SXY    REGR_SXX   REGR_SYY
---------- ---------- ----------- ----------
SA_MAN        3303500   9300000.0    1409642
SA_REP     16819665.5  65489655.2 6676562.55
SH_CLERK      4248650   5705500.0    3596039
ST_CLERK      3531545   3905500.0 4299084.55
ST_MAN        2180460   4548000.0  1505915.2</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
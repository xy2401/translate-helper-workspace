<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="An application context stores user identification that can enable or prevent a user from accessing data in the database.">
      <meta name="description" content="An application context stores user identification that can enable or prevent a user from accessing data in the database.">
      <title>Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Guide ">
      <meta property="og:description" content="An application context stores user identification that can enable or prevent a user from accessing data in the database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-security-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-28T14:57:12-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96299-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="part_3.html" title="Previous" type="text/html">
      <link rel="next" href="using-oracle-vpd-to-control-data-access.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Security Guide">
    <meta name="dcterms.isVersionOf" content="DBSEG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part_3.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-oracle-vpd-to-control-data-access.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Security Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part_3.html" property="item" typeof="WebPage"><span property="name">Controlling Access to Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</li>
            </ol>
            <a id="GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" name="GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0"></a><a id="DBSEG011"></a>
            
            <h2 id="DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" class="sect2"><span class="enumeration_chapter">11 </span>Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>An application context stores user identification that can enable or prevent a user from accessing data in the database.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435">About Application Contexts</a><br>An application context provides many benefits in controlling the access that a user has to data.
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B">Types of Application Contexts</a><br>There are three general categories of application contexts.
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC">Using Database Session-Based Application Contexts</a><br>A database session-based application context enables you to retrieve session-based information about a user.
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6">Global Application Contexts</a><br>You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F">Using Client Session-Based Application Contexts</a><br>A client session-based application context is stored in the User Global Area (UGA). 
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526">Application Context Data Dictionary Views</a><br>Oracle Database provides data dictionary views that provide information about application contexts.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="part_3.html" title="Part III describes how to control access to data.">Controlling Access to Data</a></p>
                  </div>
               </div>
            </div>
            <a id="DBSEG70071"></a><div class="props_rev_3"><a id="GUID-6745DB10-F540-45D7-9761-9E8F342F1435" name="GUID-6745DB10-F540-45D7-9761-9E8F342F1435"></a><h3 id="DBSEG-GUID-6745DB10-F540-45D7-9761-9E8F342F1435" class="sect3">About Application Contexts</h3>
               <div>
                  <p>An application context provides many benefits in controlling the access that a user has to data.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5841261E-988F-4A56-A2B4-71114AB3D51D">What Is an Application Context?</a><br>An <strong class="term">application context</strong> is a set of name-value pairs that Oracle Database stores in memory. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1">Components of the Application Context</a><br>An application context has two components, comprising a name-value pair.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B">Where Are the Application Context Values Stored?</a><br>Oracle Database stores the application context values in a secure data cache. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D">Benefits of Using Application Contexts</a><br>Most applications contain the kind of information that can be used for application contexts. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7">How Editions Affects Application Context Values</a><br>Oracle Database sets the application context in all editions that are affected by the application context package. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-60DBA142-691E-4710-B8F2-2522E5B37745">Application Contexts in a Multitenant Environment</a><br>Where you create an application in a multitenant environment determines where you must create the application context. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG165"></a><div class="props_rev_3"><a id="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" name="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D"></a><h4 id="DBSEG-GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" class="sect4">What Is an Application Context?</h4>
                  <div>
                     <p>An <strong class="term">application context</strong> is a set of name-value pairs that Oracle Database stores in memory. 
                     </p>
                     <p>The context has a label called a <strong class="term">namespace</strong> (for example, <code class="codeph">empno_ctx</code> for an application context that retrieves employee IDs). This context enables Oracle Database to find information about both database and nondatabase users during authentication.
                     </p>
                     <p>Inside the context are the name-value pairs (an associative array): the name points to a location in memory that holds the value. An application can use the application context to access session information about a user, such as the user ID or other user-specific information, or a client ID, and then securely pass this data to the database. </p>
                     <p>You can then use this information to either permit or prevent the user from accessing data through the application. You can use application contexts to authenticate both database and non-database users.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-audit-policies.html#GUID-1AC48317-FDF8-4D94-99AD-6B88E4909436" title="You can use the AUDIT statement to audit application context values.">Auditing Application Context Values</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="An application context provides many benefits in controlling the access that a user has to data.">About Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG166"></a><div class="props_rev_3"><a id="GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1" name="GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1"></a><h4 id="DBSEG-GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1" class="sect4">Components of the Application Context</h4>
                  <div>
                     <p>An application context has two components, comprising a name-value pair.</p>
                     <p>These components are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Name.</span> Refers to the name of the attribute set that is associated with the value. For example, if the <code class="codeph">empno_ctx</code> application context retrieves an employee ID from the <code class="codeph">HR.EMPLOYEES</code> table, it could have a name such as <code class="codeph">employee_id</code>. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Value.</span> Refers to a value set by the attribute. For example, for the <code class="codeph">empno_ctx</code> application context, if you wanted to retrieve an employee ID from the <code class="codeph">HR.EMPLOYEES</code> table, you could create a value called <code class="codeph">emp_id</code> that sets the value for this ID. 
                           </p>
                        </li>
                     </ul>
                     <p>Think of an application context as a global variable that holds information that is accessed during a database session. To set the values for a secure application context, you must create a PL/SQL package procedure that uses the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure. In fact, this is the only way that you can set application context values if the context is not marked <code class="codeph">INITIALIZED EXTERNALLY</code> or <code class="codeph">INITIALIZED GLOBALLY</code>. You can assign the values to the application context attributes at run time, not when you create the application context. Because the <span class="bold">trusted</span> procedure, and not the user, assigns the values, it is a called secure application context. For client-session based application contexts, another way to set the application context is to use Oracle Call Interface (OCI) calls.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="An application context provides many benefits in controlling the access that a user has to data.">About Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG167"></a><div class="props_rev_3"><a id="GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B" name="GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B"></a><h4 id="DBSEG-GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B" class="sect4">Where Are the Application Context Values Stored?</h4>
                  <div>
                     <p>Oracle Database stores the application context values in a secure data cache. </p>
                     <p>This cache is available in the User Global Area (UGA) or the System (sometimes called "Shared") Global Area (SGA). This way, the application context values are retrieved during the session. Because the application context stores the values in this data cache, it increases performance for your applications. You can use an application context by itself, with Oracle Virtual Private Databases policies, or with other fine-grained access control policies. </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-oracle-vpd-to-control-data-access.html#GUID-36849380-3641-4485-B03F-3D494158BAB3" title="You can use application contexts with Oracle Virtual Private Database policies.">Oracle Virtual Private Database Use with an Application Context</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="An application context provides many benefits in controlling the access that a user has to data.">About Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG168"></a><div class="props_rev_3"><a id="GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D" name="GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D"></a><h4 id="DBSEG-GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D" class="sect4">Benefits of Using Application Contexts</h4>
                  <div>
                     <p>Most applications contain the kind of information that can be used for application contexts. </p>
                     <p>For example, in an order entry application that uses a table containing the columns <code class="codeph">ORDER_NUMBER</code> and <code class="codeph">CUSTOMER_NUMBER</code>, you can use the values in these columns as security attributes to restrict access by a customer to his or her own orders, based on the ID of that customer.
                     </p>
                     <p>Application contexts are useful for the following purposes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Enforcing fine-grained access control (for example, in Oracle Virtual Private Database polices)</p>
                        </li>
                        <li>
                           <p>Preserving user identity across multitier environments</p>
                        </li>
                        <li>
                           <p>Enforcing stronger security for your applications, because the application context is controlled by a trusted procedure, not the user</p>
                        </li>
                        <li>
                           <p>Increasing performance by serving as a secure data cache for attributes needed by an application for fine-grained auditing or for use in PL/SQL conditional statements or loops</p>
                           <p>This cache saves the repeated overhead of querying the database each time these attributes are needed. Because the application context stores session data in cache rather than forcing your applications to retrieve this data repeatedly from a table, it greatly improves the performance of your applications.</p>
                        </li>
                        <li>
                           <p>Serving as a holding area for name-value pairs that an application can define, modify, and access</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="An application context provides many benefits in controlling the access that a user has to data.">About Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG169"></a><div class="props_rev_3"><a id="GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7" name="GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7"></a><h4 id="DBSEG-GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7" class="sect4">How Editions Affects Application Context Values</h4>
                  <div>
                     <p>Oracle Database sets the application context in all editions that are affected by the application context package. </p>
                     <p></p>
                     <p>The values the application context sets are visible in all editions the application context affects. To find all editions in your database, and whether they are usable, you can query the <span class="apiname" translate="no">ALL_EDITIONS</span> data dictionary view.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7__GUID-2E12405D-6FE4-4B24-8F9D-4A84A3885DC5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adfns/editions.html#ADFNS020" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for detailed information about editions
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="An application context provides many benefits in controlling the access that a user has to data.">About Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-60DBA142-691E-4710-B8F2-2522E5B37745" name="GUID-60DBA142-691E-4710-B8F2-2522E5B37745"></a><h4 id="DBSEG-GUID-60DBA142-691E-4710-B8F2-2522E5B37745" class="sect4">Application Contexts in a Multitenant Environment</h4>
                  <div>
                     <p>Where you create an application in a multitenant environment determines where you must create the application context. </p>
                     <p>If an application is installed in the application root or CDB root, then it becomes accessible across the application container or system container and associated application PDBs. You will need to create a common application context in this root. </p>
                     <p>When you create a common application context for use with an application container, note the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can create application contexts in a multitenant environment by setting the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">CREATE CONTEXT</code> SQL statement. For example, to create a common application context in the application root, you must execute <code class="codeph">CREATE CONTEXT</code> with <code class="codeph">CONTAINER</code> set to <code class="codeph">ALL</code>. To create the application context in a PDB, set <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code>.
                           </p>
                        </li>
                        <li>
                           <p>You cannot use the same name for a local application context for a common application context. You can find the names of existing application contexts by running the following query: </p><pre class="pre codeblock"><code>SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</code></pre></li>
                        <li>
                           <p>The PL/SQL package that you create to manage a common application context must be a common PL/SQL package. That is, it must exist in the application root or CDB root. If you create the application context for a specific PDB, then you must store the associated PL/SQL package in that PDB. </p>
                        </li>
                        <li>
                           <p>The name-value pairs that you set under a common session application context from an application container or a system container for a common application context are not accessible from other application containers or system containers when a common user accesses a different container.</p>
                        </li>
                        <li>
                           <p>The name-value pairs that you set under a common global application context from an application container or a system container, are accessible only within the same container in the same user session. </p>
                        </li>
                        <li>
                           <p>An application can retrieve the value of an application context whether it resides in the application root, the CDB root, or a PDB.</p>
                        </li>
                        <li>
                           <p>During a plug-in operation of a PDB into a CDB or an application container, if the name of the common application context conflicts with a PDBâ€™s local application context, then the PDB must open in restricted mode. A database administrator would then need to correct the conflict before opening the PDB in normal mode. </p>
                        </li>
                        <li>
                           <p>During an unplug operation, a common application context retains its common semantics, so that later on, if the PDB is plugged into another CDB where a common application context with the same name exists, it would continue to behave like a common object. If a PDB is plugged into an application container or a system container, where the same common application context does not exist, then it behaves like a local object. </p>
                        </li>
                     </ul>
                     <p>To find if an application context is a local application context or an application common application context, query the <code class="codeph">SCOPE</code> column of the <code class="codeph">DBA_CONTEXT</code> or <code class="codeph">ALL_CONTEXT</code> data dictionary view.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="An application context provides many benefits in controlling the access that a user has to data.">About Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG171"></a><a id="DBSEG170"></a><div class="props_rev_3"><a id="GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B" name="GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B"></a><h3 id="DBSEG-GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B" class="sect3">Types of Application Contexts</h3>
               <div>
                  <p>There are three general categories of application contexts.</p>
                  <p>These categories are as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Database session-based application contexts.</span> This type retrieves data that is stored in the database user session (that is, the UGA) cache. There are three categories of database session-based application contexts: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Initialized locally.</span> Initializes the application context locally, to the session of the user. 
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Initialized externally.</span> Initializes the application context from an Oracle Call Interface (OCI) application, a job queue process, or a connected user database link. 
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Initialized globally.</span> Uses attributes and values from a centralized location, such as an LDAP directory.
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a> describes this type of application context.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Global application contexts.</span> This type retrieves data that is stored in the System Global Area (SGA) so that it can be used for applications that use a sessionless model, such as middle-tier applications in a three-tiered architecture. A global application context is useful if the session context must be shared across sessions, for example, through connection pool implementations. 
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a> describes this type.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Client session-based application contexts.</span> This type uses Oracle Call Interface functions on the client side to set the user session data, and then to perform the necessary security checks to restrict user access. 
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a> describes this type.
                        </p>
                     </li>
                  </ul>
                  <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B__G1015746" title="This table lists whether the different types of application context are stored in the UGA or SGA, whether they support connected user database links, whether they support centralized storage in an LDAP directory, and whether they suppport sessionless multitier applications.">Table 11-1</a> summarizes the different types of application contexts.
                  </p>
                  <div class="tblformalwide" id="GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B__G1015746">
                     <p class="titleintable">Table 11-1 Types of Application Contexts</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Types of Application Contexts" summary="This table lists whether the different types of application context are stored in the UGA or SGA, whether they support connected user database links, whether they support centralized storage in an LDAP directory, and whether they suppport sessionless multitier applications." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d84552e1410">Application Context Type</th>
                              <th align="left" valign="bottom" width="8%" id="d84552e1413">Stored in UGA</th>
                              <th align="left" valign="bottom" width="8%" id="d84552e1416">Stored in SGA</th>
                              <th align="left" valign="bottom" width="19%" id="d84552e1419">Supports Connected User Database Links</th>
                              <th align="left" valign="bottom" width="22%" id="d84552e1422">Supports Centralized Storage of Users' Application Context</th>
                              <th align="left" valign="bottom" width="20%" id="d84552e1425">Supports Sessionless Multitier Applications</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1430" headers="d84552e1410 ">
                                 <p>Database session-based application context initialized locally</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1430 d84552e1413 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1430 d84552e1416 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1430 d84552e1419 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1430 d84552e1422 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1430 d84552e1425 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1449" headers="d84552e1410 ">
                                 <p>Database session-based application context initialized externally</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1449 d84552e1413 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1449 d84552e1416 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1449 d84552e1419 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1449 d84552e1422 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1449 d84552e1425 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1468" headers="d84552e1410 ">
                                 <p>Database session-based application context initialized globally</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1468 d84552e1413 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1468 d84552e1416 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1468 d84552e1419 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1468 d84552e1422 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1468 d84552e1425 ">
                                 <p>No</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1487" headers="d84552e1410 ">
                                 <p>Global application context</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1487 d84552e1413 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1487 d84552e1416 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1487 d84552e1419 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1487 d84552e1422 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1487 d84552e1425 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1506" headers="d84552e1410 ">
                                 <p>Client session-based application context</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1506 d84552e1413 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1506 d84552e1416 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1506 d84552e1419 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1506 d84552e1422 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1506 d84552e1425 ">
                                 <p>Yes</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG172"></a><div class="props_rev_3"><a id="GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" name="GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC"></a><h3 id="DBSEG-GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" class="sect3">Using Database Session-Based Application Contexts</h3>
               <div>
                  <p>A database session-based application context enables you to retrieve session-based information about a user.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-8332230F-45D0-4832-9593-89BC518B91BF">About Database Session-Based Application Contexts</a><br>A database session-based application context retrieves session information for database users. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1">Components of a Database Session-Based Application Context</a><br>A database session-based application context retrieves and sets data for the context and then sets this context when a user logs in.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634">Creating Database Session-Based Application Contexts</a><br>A database session-based application context is a named object that stores the user's session information. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560">Creating a Package to Set a Database Session-Based Application Context</a><br>A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410">Logon Triggers to Run a Database Session Application Context Package</a><br>Users must run database session application context package after when they log in to the database instance.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE">Example: Creating a Simple Logon Trigger</a><br>The <code class="codeph">CREATE TRIGGER</code> statement can create a simple logon trigger. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-0495E52D-8396-4F3D-9A69-636C88DF4622">Example: Creating a Logon Trigger for a Production Environment</a><br>The <code class="codeph">CREATE TRIGGER</code> statement can create a logon trigger for a production environment.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CEE3B516-C036-4715-A472-01D0110AD95F">Example: Creating a Logon Trigger for a Development Environment</a><br>The <code class="codeph">CREATE TRIGGER</code> statement can create a logon trigger for a development environment.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5">Tutorial: Creating and Using a Database Session-Based Application Context</a><br>This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005">Initializing Database Session-Based Application Contexts Externally</a><br>Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA). 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C">Initializing Database Session-Based Application Contexts Globally</a><br>When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40">Externalized Database Session-Based Application Contexts</a><br>Many applications store attributes used for fine-grained access control within a database metadata table. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG173"></a><div class="props_rev_3"><a id="GUID-8332230F-45D0-4832-9593-89BC518B91BF" name="GUID-8332230F-45D0-4832-9593-89BC518B91BF"></a><h4 id="DBSEG-GUID-8332230F-45D0-4832-9593-89BC518B91BF" class="sect4">About Database Session-Based Application Contexts</h4>
                  <div>
                     <p>A database session-based application context retrieves session information for database users. </p>
                     <p>This type of application context uses a PL/SQL procedure within Oracle Database to retrieve, set, and secure the data it manages.</p>
                     <p>The database session-based application context is managed entirely within Oracle Database. Oracle Database sets the values, and then when the user exits the session, automatically clears the application context values stored in cache. If the user connection ends abnormally, for example, during a power failure, then the PMON background process cleans up the application context data.You do not need to explicitly clear the application context from cache.</p>
                     <p>The advantage of having Oracle Database manage the application context is that you can centralize the application context management. Any application that accesses this database will need to use this application context to permit or prevent user access to that application. This provides benefits both in improved performance and stronger security. </p>
                     <div class="infoboxnote" id="GUID-8332230F-45D0-4832-9593-89BC518B91BF__GUID-38945F4F-8E7A-417F-B8F4-D376292295A5">
                        <p class="notep1">Note:</p>
                        <p>If your users are application users, that is, users who are not in your database, consider using a global application context instead. </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1" name="GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1"></a><h4 id="DBSEG-GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1" class="sect4">Components of a Database Session-Based Application Context</h4>
                  <div>
                     <p>A database session-based application context retrieves and sets data for the context and then sets this context when a user logs in.</p>
                     <p>You must use three components to create and use a database session-based application context: the application context, a procedure to retrieve the data and set the context, and a way to set the context when the user logs in.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">The application context.</span> You use the <code class="codeph">CREATE CONTEXT</code> SQL statement to create an application context. This statement names the application context (namespace) and associates it with a PL/SQL procedure that is designed to retrieve session data and set the application context. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">A PL/SQL procedure to perform the data retrieval and set the context.</span> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-FB3C6D57-3714-4CD4-8678-A29539382876" title="This defines procedures that manage the session data represented by the application context.">About the Package That Manages the Database Session-Based Application Context</a> describes the tasks this procedure must perform. Ideally, create this procedure within a package, so that you can include other procedures if you want (for example, to perform error checking tasks). 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">A way to set the application context when the user logs on.</span> Users who log on to applications that use the application context must run a PL/SQL package that sets the application context. You can achieve this with either a logon trigger that fires each time the user logs on, or you can embed this functionality in your applications.
                           </p>
                        </li>
                     </ul>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a> shows how to create and use a database session-based application context that is initialized locally. 
                     </p>
                     <p>In addition, you can initialize session-based application contexts either externally or globally. Either method stores the context information in the user session. </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">External initialization.</span> This type can come from an OCI interface, a job queue process, or a connected user database link. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a> for detailed information. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Global initialization.</span> This type uses attributes and values from a centralized location, such as an LDAP directory. <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.">Initializing Database Session-Based Application Contexts Globally</a> provides more information.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG174"></a><div class="props_rev_3"><a id="GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" name="GUID-985ECAE9-426D-4A03-9DFB-555ADD753634"></a><h4 id="DBSEG-GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" class="sect4">Creating Database Session-Based Application Contexts</h4>
                  <div>
                     <p>A database session-based application context is a named object that stores the user's session information. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01">About Creating Database Session-Based Application Contexts</a><br>A database user session (UGA) stores session-based application context, using a user-created namespace. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45">Creating a Database Session-Based Application Context</a><br>The <code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code> SQL statement can be used to create a database session-based application context.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622">Database Session-Based Application Contexts for Multiple Applications</a><br>For each application, you can create an application context that has its own attributes.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG769"></a><div class="props_rev_3"><a id="GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01" name="GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01"></a><h5 id="DBSEG-GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01" class="sect5">About Creating Database Session-Based Application Contexts</h5>
                     <div>
                        <p>A database user session (UGA) stores session-based application context, using a user-created namespace. </p>
                        <p>Each application context must have a unique attribute and belong to a namespace. That is, context names must be unique within the database, not just within a schema.</p>
                        <p>You must have the <code class="codeph">CREATE ANY CONTEXT</code> system privilege to create an application context, and the <code class="codeph">DROP ANY CONTEXT</code> privilege to use the <code class="codeph">DROP CONTEXT</code> statement if you want to drop the application context. 
                        </p>
                        <p>The ownership of the application context is as follows: Even though a user who has been granted the <code class="codeph">CREATE ANY CONTEXT</code> and <code class="codeph">DROP ANY CONTEXT</code> privileges can create and drop the application context, it is owned by the <code class="codeph">SYS</code> schema. Oracle Database associates the context with the schema account that created it, but if you drop this user, the context still exists in the <code class="codeph">SYS</code> schema. As user <code class="codeph">SYS</code>, you can drop the application context. 
                        </p>
                        <p>You can find the names of existing application contexts by running the following query: </p><pre class="oac_no_warn" dir="ltr">SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" title="A database session-based application context is a named object that stores the user's session information.">Creating Database Session-Based Application Contexts</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG771"></a><div class="props_rev_3"><a id="GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45" name="GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45"></a><h5 id="DBSEG-GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45" class="sect5">Creating a Database Session-Based Application Context</h5>
                     <div>
                        <p>The <code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code> SQL statement can be used to create a database session-based application context.
                        </p>
                        <div class="section">
                           <p>When you create a database session-based application context, you must create a namespace for the application context and then associate it with a PL/SQL package that manages the name-value pair that holds the session information of the user. At the time that you create the context, the PL/SQL package does not need to exist, but it must exist at run time. </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To create a database session-based application context, use the <code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code> SQL statement.
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT empno_ctx USING set_empno_ctx_pkg CONTAINER = CURRENT;
</pre></li>
                           </ul>
                           <p>In this example:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">empno_ctx</code> is the context namespace.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">set_empno_ctx_pkg</code> is the package (which does not need to exist when you create the context) that sets attributes for the <code class="codeph">empno_ctx</code> namespace. <a href="using-application-contexts-to-retrieve-user-information.html#GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C" title="Next, you must create a PL/SQL package that retrieves the session data and then sets the application context.">Step 3: Create a Package to Retrieve Session Data and Set the Application Context</a> shows an example of how to create a package that can be used with this application context.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CONTAINER</code> creates the application context in the current PDB. To create the application context in the application or CDB root, you must set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>Notice that when you create the context, you do not set its name-value attributes in the <code class="codeph">CREATE CONTEXT</code> statement. Instead, you set these in the PL/SQL package that you associate with the application context. The reason you must do this is to prevent a malicious user from changing the context attributes without proper attribute validation. Ensure that this package is in the same container as the application context. For example, if you created the application context in a PDB, then the PL/SQL package must reside in that PDB.
                           </p>
                           <div class="infoboxnote" id="GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45__GUID-9CDAE360-AE65-41D3-AFA4-CA0DFA9AB65C">
                              <p class="notep1">Note:</p>
                              <p>You cannot create a context called <code class="codeph">CLIENTCONTEXT</code>. This word is reserved for use with client session-based application contexts. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a> for more information about this type of application context. 
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" title="A database session-based application context is a named object that stores the user's session information.">Creating Database Session-Based Application Contexts</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG989"></a><div class="props_rev_3"><a id="GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622" name="GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622"></a><h5 id="DBSEG-GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622" class="sect5">Database Session-Based Application Contexts for Multiple Applications</h5>
                     <div>
                        <p>For each application, you can create an application context that has its own attributes.</p>
                        <div class="section">
                           <p>Suppose, for example, you have three applications: General Ledger, Order Entry, and Human Resources. </p>
                           <p>You can specify different attributes for each application: </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For the order entry application context, you could specify the attribute <code class="codeph">CUSTOMER_NUMBER.</code></p>
                              </li>
                              <li>
                                 <p>For the general ledger application context, you could specify the attributes <code class="codeph">SET_OF_BOOKS</code> and <code class="codeph">TITLE.</code></p>
                              </li>
                              <li>
                                 <p>For the human resources application context, you could specify the attributes <code class="codeph">ORGANIZATION_ID</code>, <code class="codeph">POSITION</code>, and <code class="codeph">COUNTRY</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>The data the attributes access is stored in the tables behind the applications. For example, the order entry application uses a table called <code class="codeph">OE.CUSTOMERS</code>, which contains the <code class="codeph">CUSTOMER_NUMBER</code> column, which provides data for the <code class="codeph">CUSTOMER_NUMBER</code> attribute. In each case, you can adapt the application context to your precise security needs. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" title="A database session-based application context is a named object that stores the user's session information.">Creating Database Session-Based Application Contexts</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG176"></a><div class="props_rev_3"><a id="GUID-490E8823-64A9-4439-B80D-88001438D560" name="GUID-490E8823-64A9-4439-B80D-88001438D560"></a><h4 id="DBSEG-GUID-490E8823-64A9-4439-B80D-88001438D560" class="sect4">Creating a Package to Set a Database Session-Based Application Context</h4>
                  <div>
                     <p>A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-FB3C6D57-3714-4CD4-8678-A29539382876">About the Package That Manages the Database Session-Based Application Context</a><br>This defines procedures that manage the session data represented by the application context. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12">Using the SYS_CONTEXT Function to Retrieve Session Information</a><br>You can retrieve session information for the application context by using the <code class="codeph">SYS_CONTEXT</code> function. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90">Checking the SYS_CONTEXT Settings</a><br>You can check the <code class="codeph">SYS_CONTEXT</code> settings, which are stored in the <code class="codeph">DUAL</code> table.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872">Dynamic SQL with SYS_CONTEXT</a><br>During a session in which you expect a change in policy between executions of a given query, the query must use dynamic SQL. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF">SYS_CONTEXT in a Parallel Query</a><br>If you use <code class="codeph">SYS_CONTEXT</code> inside a SQL function that is embedded in a parallel query, then the function includes the application context.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7">SYS_CONTEXT with Database Links</a><br>The <code class="codeph">SYS_CONTEXT</code> function is compatible with the use of database links.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5648314E-4CB9-4911-876F-759C3EACB0A9">DBMS_SESSION.SET_CONTEXT for Setting Session Information</a><br>After <code class="codeph">SYS_CONTEXT</code> retrieves the session data of a user, you can set the application context values from the user session. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-41D0A62A-367D-46E5-9522-9956233A263A">Example: Simple Procedure to Create an Application Context Value</a><br>You can use the <span class="apiname" translate="no">DBMS_SESSION.SET_CONTEXT</span> statement in a procedure to set an application context value.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG177"></a><div class="props_rev_3"><a id="GUID-FB3C6D57-3714-4CD4-8678-A29539382876" name="GUID-FB3C6D57-3714-4CD4-8678-A29539382876"></a><h5 id="DBSEG-GUID-FB3C6D57-3714-4CD4-8678-A29539382876" class="sect5">About the Package That Manages the Database Session-Based Application Context</h5>
                     <div>
                        <p>This defines procedures that manage the session data represented by the application context. </p>
                        <p>This package is usually created in the security administrator schema. The package must perform the following tasks: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Retrieve session information.</span> To retrieve the user session information, you can use the <code class="codeph">SYS_CONTEXT</code> SQL function. The <code class="codeph">SYS_CONTEXT</code> function returns the value of the parameter associated with the context namespace. You can use this function in both SQL and PL/SQL statements. Typically, you will use the built-in <code class="codeph">USERENV</code> namespace to retrieve the session information of a user. You also can use the <code class="codeph">SYS_SESSION_ROLES</code> namespace to indicate whether the specified role is currently enabled for the session.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Set the name-value attributes of the application context you created with CREATE CONTEXT.</span> You can use the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure to set the name-value attributes of the application context. The name-value attributes can hold information such as the user ID, IP address, authentication mode, the name of the application, and so on. The values of the attributes you set remain either until you reset them, or until the user ends the session. Note the following: 
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the value of the parameter in the namespace already has been set, then <code class="codeph">SET_CONTEXT</code> overwrites this value.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Be aware that any changes in the context value are reflected immediately and subsequent calls to access the value through the <code class="codeph">SYS_CONTEXT</code> function will return the most recent value.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">Be executed by users.</span> After you create the package, the user will need to execute the package when he or she logs on. You can create a logon trigger to execute the package automatically when the user logs on, or you can embed this functionality in your applications. Remember that the application context session values are cleared automatically when the user ends the session, so you do not need to manually remove the session data.
                              </p>
                           </li>
                        </ul>
                        <p>It is important to remember that the procedure is a trusted procedure: It is designed to prevent the user from setting his or her own application context attribute values. The user runs the procedure, but the procedure sets the application context values, not the user. </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-FB3C6D57-3714-4CD4-8678-A29539382876__GUID-1DB9E02C-59F7-45CA-A47C-FD7A531775ED">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sqlrf/SYS_CONTEXT.html#SQLRF06117" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for detailed information about the <code class="codeph">SYS_CONTEXT</code> function
                                 </p>
                              </li>
                              <li>
                                 <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a> shows how to create a database session-based application context
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG178"></a><div class="props_rev_3"><a id="GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12" name="GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12"></a><h5 id="DBSEG-GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12" class="sect5">Using the SYS_CONTEXT Function to Retrieve Session Information</h5>
                     <div>
                        <p>You can retrieve session information for the application context by using the <code class="codeph">SYS_CONTEXT</code> function. 
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">SYS_CONTEXT</code> function provides a default namespace, <code class="codeph">USERENV</code>, which describes the current session of the user logged on. <code class="codeph">SYS_CONTEXT</code> enables you to retrieve different types of session-based information about a user, such as the user host computer ID, host IP address, operating system user name, and so on. Remember that you only use <code class="codeph">USERENV</code> to <span class="italic">retrieve</span> session data, not <span class="italic">set</span> it. The predefined attributes are listed in the description for the PL/SQL function in the <a href="../sqlrf/SYS_CONTEXT.html#SQLRF06117" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To use retrieve session information, set the namespace, parameter, and optionally, the length values of the <code class="codeph">SYS_CONTEXT</code> function. 
                                 </p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT ('USERENV','HOST')
</pre></li>
                           </ul>
                           <p>The syntax for the PL/SQL function <code class="codeph">SYS_CONTEXT</code> is as follows:
                           </p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT ('<span class="italic">namespace</span>','<span class="italic">parameter</span>'[,<span class="italic">length</span>])
</pre><p>In this specification: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="italic"><code class="codeph">namespace</code></span> is the name of the application context. You can specify either a string or an expression that evaluates to a string. The <code class="codeph">SYS_CONTEXT</code> function returns the value of parameter associated with the context namespace at the current instant. If the value of the parameter in the namespace already has been set, then <code class="codeph">SET_CONTEXT</code> overwrites this value.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">parameter</code></span> is a parameter within the <span class="italic"><code class="codeph">namespace</code></span> application context. This value can be a string or an expression. 
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">length</code></span> is the default maximum size of the return type, which is 256 bytes, but you can override the length by specifying a value up to 4000 bytes. Enter a value that is a <code class="codeph">NUMBER</code> data type, or a value that can be can be implicitly converted to <code class="codeph">NUMBER</code>. The data type of the <code class="codeph">SYS_CONTEXT</code> return type is a <code class="codeph">VARCHAR2</code>. This setting is optional.
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12__GUID-0869D29F-1DB3-459E-95C5-0A4261768E4C">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">USERENV</code> application context namespace replaces the <code class="codeph">USERENV</code> function provided in earlier Oracle Database releases.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1031"></a><div class="props_rev_3"><a id="GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90" name="GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90"></a><h5 id="DBSEG-GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90" class="sect5">Checking the SYS_CONTEXT Settings</h5>
                     <div>
                        <p>You can check the <code class="codeph">SYS_CONTEXT</code> settings, which are stored in the <code class="codeph">DUAL</code> table.
                        </p>
                        <div class="section">
                           <p> The <code class="codeph">DUAL</code> table is a small table in the data dictionary that Oracle Database and user-written programs can reference to guarantee a known result. This table has one column called <code class="codeph">DUMMY</code> and one row that contains the value <code class="codeph">X</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To check the <code class="codeph">SYS_CONTEXT</code> settings, issue a <code class="codeph">SELECT</code> SQL statement on the <code class="codeph">DUAL</code> table.
                                 </p>
                              </li>
                           </ul>
                           <p>For example, to find the host computer on which you are logged, assuming that you are logged on to the <code class="codeph">SHOBEEN_PC</code> host computer under <code class="codeph">EMP_USERS</code>:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT ('USERENV', 'HOST') FROM DUAL;

SYS_CONTEXT(USERENV,HOST)
-------------------------
EMP_USERS\SHOBEEEN_PC</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG180"></a><div class="props_rev_3"><a id="GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872" name="GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872"></a><h5 id="DBSEG-GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872" class="sect5">Dynamic SQL with SYS_CONTEXT</h5>
                     <div>
                        <p>During a session in which you expect a change in policy between executions of a given query, the query must use dynamic SQL. </p>
                        <p>You must use dynamic SQL because static SQL and dynamic SQL parse statements differently:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Static SQL statements are parsed at compile time. They are not parsed again at execution time for performance reasons. </p>
                           </li>
                           <li>
                              <p>Dynamic SQL statements are parsed every time they are executed. </p>
                           </li>
                        </ul>
                        <p>Consider a situation in which Policy A is in force when you compile a SQL statement, and then you switch to Policy B and run the statement. With static SQL, Policy A remains in force. Oracle Database parses the statement at compile time, but does not parse it again upon execution. With dynamic SQL, Oracle Database parses the statement upon execution, then the switch to Policy B takes effect.</p>
                        <p>For example, consider the following policy:</p><pre class="oac_no_warn" dir="ltr">EMPLOYEE_NAME = SYS_CONTEXT ('USERENV', 'SESSION_USER')
</pre><p>The policy <code class="codeph">EMPLOYEE_NAME</code> matches the database user name. It is represented in the form of a SQL predicate in Oracle Virtual Private Database: the predicate is considered a policy. If the predicate changes, then the statement must be parsed again to produce the correct result.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="using-oracle-vpd-to-control-data-access.html#GUID-F03172A8-730B-48EC-A904-FE747761863B" title="Queries against objects enabled with fine-grained access control run the policy function so that the most current predicate is used for each policy.">Automatic Reparsing for Fine-Grained Access Control Policies Functions</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG14002"></a><div class="props_rev_3"><a id="GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF" name="GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF"></a><h5 id="DBSEG-GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF" class="sect5">SYS_CONTEXT in a Parallel Query</h5>
                     <div>
                        <p>If you use <code class="codeph">SYS_CONTEXT</code> inside a SQL function that is embedded in a parallel query, then the function includes the application context.
                        </p>
                        <p>Consider a user-defined function within a SQL statement, which sets the user ID to 5:</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION set_id 
 RETURN NUMBER IS
BEGIN
 IF SYS_CONTEXT ('hr', 'id') = 5
   THEN RETURN 1; ELSE RETURN 2;
 END IF;
END;
</pre><p>Now consider the following statement:</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM emp WHERE set_id( ) = 1;
</pre><p>When this statement is run as a parallel query, the user session, which contains the application context information, is propagated to the parallel execution servers (query child processes).</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG181"></a><div class="props_rev_3"><a id="GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7" name="GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7"></a><h5 id="DBSEG-GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7" class="sect5">SYS_CONTEXT with Database Links</h5>
                     <div>
                        <p>The <code class="codeph">SYS_CONTEXT</code> function is compatible with the use of database links.
                        </p>
                        <p>When SQL statements within a user session involve database links, Oracle Database runs the <code class="codeph">SYS_CONTEXT</code> function at the host computer of the database link, and then captures the context information in the host computer.
                        </p>
                        <p>If remote PL/SQL procedure calls are run on a database link, then Oracle Database runs any <code class="codeph">SYS_CONTEXT</code> function inside such a procedure at the destination database of the link. 
                        </p>
                        <p>In this case, only externally initialized application contexts are available at the database link destination site. For security reasons, Oracle Database propagates only the externally initialized application context information to the destination site from the initiating database link site.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG182"></a><div class="props_rev_3"><a id="GUID-5648314E-4CB9-4911-876F-759C3EACB0A9" name="GUID-5648314E-4CB9-4911-876F-759C3EACB0A9"></a><h5 id="DBSEG-GUID-5648314E-4CB9-4911-876F-759C3EACB0A9" class="sect5">DBMS_SESSION.SET_CONTEXT for Setting Session Information</h5>
                     <div>
                        <p>After <code class="codeph">SYS_CONTEXT</code> retrieves the session data of a user, you can set the application context values from the user session. 
                        </p>
                        <p>To set the context values, you can use the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure. You must have the <code class="codeph">EXECUTE</code> privilege for the <code class="codeph">DBMS_SESSION</code> PL/SQL package.
                        </p>
                        <p>The syntax for <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> is as follows: 
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_CONTEXT (
   namespace VARCHAR2,
   attribute VARCHAR2,
   value     VARCHAR2,
   username  VARCHAR2,
   client_id VARCHAR2);
</pre><p>In this specification:    </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">namespace</code> is the namespace of the application context to be set, limited to 30 bytes. For example, if you were using a namespace called <code class="codeph">custno_ctx</code>, you would specify it as follows: 
                              </p><pre class="oac_no_warn" dir="ltr">namespace =&gt; 'custno_ctx',
</pre></li>
                           <li>
                              <p><code class="codeph">attribute</code> is the attribute of the application context to be set, limited to 30 bytes. For example, to create the <code class="codeph">ctx_attrib</code> attribute for the <code class="codeph">custno_ctx</code> namespace:
                              </p><pre class="oac_no_warn" dir="ltr">attribute =&gt; 'ctx_attrib',
</pre></li>
                           <li>
                              <p><code class="codeph">value</code> is the value of the application context to be set, limited to 4000 bytes. Typically, this is the value retrieved by the <code class="codeph">SYS_CONTEXT</code> function and stored in a variable. For example: 
                              </p><pre class="oac_no_warn" dir="ltr">value =&gt; ctx_value,
</pre></li>
                           <li>
                              <p><code class="codeph">username</code> is the database user name attribute of the application context. The default is <code class="codeph">NULL</code>, which permits any user to access the session. For database session-based application contexts, omit this setting so that it uses the <code class="codeph">NULL</code> default. This setting is optional.
                              </p>
                              <p>The <code class="codeph">username</code> and <code class="codeph">client_id</code> parameters are used for globally accessed application contexts. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" title="The DBMS_SESSION.SYS_CONTEXT procedure provides the client_id and username parameters, to be used for global application contexts.">DBMS_SESSION.SET_CONTEXT username and client_id Parameters</a> for more information.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">client_id</code> is the application-specific <code class="codeph">client_id</code> attribute of the application context (64-byte maximum). The default is <code class="codeph">NULL</code>, which means that no client ID is specified. For database session-based application contexts, omit this setting so that it uses the <code class="codeph">NULL</code> default.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5648314E-4CB9-4911-876F-759C3EACB0A9__GUID-501A1D94-20DB-4A56-A45E-18B25BDFE79F">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a> for how to create a package that retrieves the user session information and then sets the application context based on this information
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span> </a> for detailed information about the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span> </a> for detailed information about the <code class="codeph">DBMS_SESSION</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG183"></a><div class="props_rev_3"><a id="GUID-41D0A62A-367D-46E5-9522-9956233A263A" name="GUID-41D0A62A-367D-46E5-9522-9956233A263A"></a><h5 id="DBSEG-GUID-41D0A62A-367D-46E5-9522-9956233A263A" class="sect5">Example: Simple Procedure to Create an Application Context Value</h5>
                     <div>
                        <p>You can use the <span class="apiname" translate="no">DBMS_SESSION.SET_CONTEXT</span> statement in a procedure to set an application context value.
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-41D0A62A-367D-46E5-9522-9956233A263A__CIHCABHB">Example 11-1</a> shows how to create a simple procedure that creates an attribute for the <code class="codeph">empno_ctx</code> application context.
                        </p>
                        <div class="example" id="GUID-41D0A62A-367D-46E5-9522-9956233A263A__CIHCABHB">
                           <p class="titleinexample">Example 11-1 Simple Procedure to Create an Application Context Value</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE set_empno_ctx_proc(
  emp_value IN VARCHAR2)
 IS   
 BEGIN
  DBMS_SESSION.SET_CONTEXT('empno_ctx', 'empno_attrib', emp_value);
 END; 
/</pre><p>In this example:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">emp_value IN VARCHAR2</code> takes <code class="codeph">emp_value</code> as the input parameter. This parameter specifies the value associated with the application context attribute <code class="codeph">empno_attrib</code>. The limit is 4000 bytes.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBMS_SESSION.SET_CONTEXT('empno_ctx', 'empno_attrib', emp_value)</code> sets the value of the application context by using the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure as follows:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">'empno_ctx'</code> refers to the application context namespace. Enclose its name in single quotation marks. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">'empno_attrib'</code> creates the attribute associated with the application context namespace.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">emp_value</code> specifies the value for the <code class="codeph">empno_attrib</code> attribute. Here, it refers to the <code class="codeph">emp_value</code> parameter.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>At this stage, you can run the <code class="codeph">set_empno_ctx_proc</code> procedure to set the application context:
                           </p><pre class="oac_no_warn" dir="ltr">EXECUTE set_empno_ctx_proc ('42783');
</pre><p>(In a real world scenario, you would set the application context values in the procedure itself, so that it becomes a trusted procedure. This example is only used to show how data can be set for demonstration purposes.)</p>
                           <p>To check the application context setting, run the following <code class="codeph">SELECT</code> statement:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT ('empno_ctx', 'empno_attrib') empno_attrib FROM DUAL;

EMPNO_ATTRIB
--------------
42783
</pre><p>You can also query the <code class="codeph">SESSION_CONTEXT</code> data dictionary view to find all the application context settings in the current session of the database instance. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM SESSION_CONTEXT;

NAMESPACE                ATTRIBUTE          VALUE
--------------------------------------------------
EMPNO_CTX                EMP_ID             42783</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="A PL/SQL package can be used to retrieve the session information and set the name-value attributes of the application context.">Creating a Package to Set a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG60634"></a><div class="props_rev_3"><a id="GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410" name="GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410"></a><h4 id="DBSEG-GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410" class="sect4">Logon Triggers to Run a Database Session Application Context Package</h4>
                  <div>
                     <p>Users must run database session application context package after when they log in to the database instance.</p>
                     <p>You can create a logon trigger that handles this automatically. You do not need to grant the user <code class="codeph">EXECUTE</code> permissions to run the package. 
                     </p>
                     <p>Note the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">If the PL/SQL package procedure called by the logon trigger has any unhandled exceptions or raises any exceptions (because, for example, a security check failed), then the logon trigger fails.</span> When the logon trigger fails, the logon fails, that is, the user is denied permission to log in to the database.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Logon triggers may affect performance.</span> In addition, test the logon trigger on a sample schema user first before creating it for the database. That way, if there is an error, you can easily correct it.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Be aware of situations in which if you have a changing set of books, or if positions change constantly.</span> In these cases, the new attribute values may not be picked up right away, and you must force a cursor reparse to pick them up.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410__GUID-9D50F345-7809-421C-98BD-02F0B7ACFF01">
                        <p class="notep1">Note:</p>
                        <p>A logon trigger can be used because the user context (information such as <code class="codeph">EMPNO</code>, <code class="codeph">GROUP</code>, <code class="codeph">MANAGER</code>) should be set before the user accesses any data.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG184"></a><div class="props_rev_3"><a id="GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE" name="GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE"></a><h4 id="DBSEG-GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE" class="sect4">Example: Creating a Simple Logon Trigger</h4>
                  <div>
                     <p>The <code class="codeph">CREATE TRIGGER</code> statement can create a simple logon trigger. 
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE__CIHBAGDG">Example 11-2</a> shows a simple logon trigger that executes a PL/SQL procedure.
                     </p>
                     <div class="example" id="GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE__CIHBAGDG">
                        <p class="titleinexample">Example 11-2 Creating a Simple Logon Trigger</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER set_empno_ctx_trig AFTER LOGON ON DATABASE
 BEGIN
 &nbsp;sec_mgr.set_empno_ctx_proc;
 END;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG185"></a><div class="props_rev_3"><a id="GUID-0495E52D-8396-4F3D-9A69-636C88DF4622" name="GUID-0495E52D-8396-4F3D-9A69-636C88DF4622"></a><h4 id="DBSEG-GUID-0495E52D-8396-4F3D-9A69-636C88DF4622" class="sect4">Example: Creating a Logon Trigger for a Production Environment</h4>
                  <div>
                     <p>The <code class="codeph">CREATE TRIGGER</code> statement can create a logon trigger for a production environment.
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-0495E52D-8396-4F3D-9A69-636C88DF4622__CIHEEHID">Example 11-3</a> shows how to create a logon trigger that uses a <code class="codeph">WHEN OTHERS</code> exception. Otherwise, if there is an error in the PL/SQL logic that creates an unhandled exception, then all connections to the database are blocked. 
                     </p>
                     <p>This example shows a <code class="codeph">WHEN OTHERS</code> exception that writes errors to a table in the security administrator's schema. In a production environment, this is safer than sending the output to the user session, where it could be vulnerable to security attacks. 
                     </p>
                     <div class="example" id="GUID-0495E52D-8396-4F3D-9A69-636C88DF4622__CIHEEHID">
                        <p class="titleinexample">Example 11-3 Creating a Logon Trigger for a Production Environment</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER set_empno_ctx_trig AFTER LOGON ON DATABASE
 BEGIN
 &nbsp;sec_mgr.set_empno_ctx_proc;
 EXCEPTION
  WHEN OTHERS THEN
        v_code := SQLCODE;
        v_errm := SUBSTR(SQLERRM, 1 , 64);
       -- Invoke another procedure,
       -- declared with PRAGMA AUTONOMOUS_TRANSACTION,
       -- to insert information about errors.
  INSERT INTO sec_mgr.errors VALUES (v_code, v_errm, SYSTIMESTAMP);
 END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG186"></a><div class="props_rev_3"><a id="GUID-CEE3B516-C036-4715-A472-01D0110AD95F" name="GUID-CEE3B516-C036-4715-A472-01D0110AD95F"></a><h4 id="DBSEG-GUID-CEE3B516-C036-4715-A472-01D0110AD95F" class="sect4">Example: Creating a Logon Trigger for a Development Environment</h4>
                  <div>
                     <p>The <code class="codeph">CREATE TRIGGER</code> statement can create a logon trigger for a development environment.
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CEE3B516-C036-4715-A472-01D0110AD95F__CIHHDGJE">Example 11-4</a> shows how to create the same logon trigger for a development environment, in which you may want to output errors the user session for debugging purposes. 
                     </p>
                     <div class="example" id="GUID-CEE3B516-C036-4715-A472-01D0110AD95F__CIHHDGJE">
                        <p class="titleinexample">Example 11-4 Creating a Logon Trigger for a Development Environment</p><pre class="oac_no_warn" dir="ltr">CREATE TRIGGER set_empno_ctx_trig 
 AFTER LOGON ON DATABASE
 BEGIN
 &nbsp;sysadmin_ctx.set_empno_ctx_pkg.set_empno;
 EXCEPTION
  WHEN OTHERS THEN
   RAISE_APPLICATION_ERROR(
    -20000, 'Trigger sysadmin_ctx.set_empno_ctx_trig violation. Login denied.');
 END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG187"></a><div class="props_rev_3"><a id="GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" name="GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5"></a><h4 id="DBSEG-GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" class="sect4">Tutorial: Creating and Using a Database Session-Based Application Context</h4>
                  <div>
                     <p>This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B">Step 1: Create User Accounts and Ensure the User SCOTT Is Active</a><br>To begin this tutorial, you must create the necessary database accounts and endure that the <code class="codeph">SCOTT</code> user account is active.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-79039102-9AB9-4B68-A601-D4497692F3B2">Step 2: Create the Database Session-Based Application Context</a><br>As the <code class="codeph">sysadmin_ctx</code> user, you are ready to create the database session-based application context.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C">Step 3: Create a Package to Retrieve Session Data and Set the Application Context</a><br>Next, you must create a PL/SQL package that retrieves the session data and then sets the application context. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D">Step 4: Create a Logon Trigger for the Package</a><br>The logon trigger will execute when the user logs in. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033">Step 5: Test the Application Context</a><br>Now that the components are all in place, you are ready to test the application context. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-8327F4B9-FE89-4776-A54D-963F9D444C31">Step 6: Remove the Components of This Tutorial</a><br>If you no longer need the components of this tutorial, then you can remove them.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG188"></a><div class="props_rev_3"><a id="GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B" name="GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B"></a><h5 id="DBSEG-GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B" class="sect5">Step 1: Create User Accounts and Ensure the User SCOTT Is Active</h5>
                     <div>
                        <p>To begin this tutorial, you must create the necessary database accounts and endure that the <code class="codeph">SCOTT</code> user account is active.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Log on as user <code class="codeph">SYS</code> and connect using the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="oac_no_warn" dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>In a multitenant environment, connect to the appropriate PDB. </span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT SYS@hrpdb AS SYSDBA
Enter password: <span class="italic">password</span>
</pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create the local user account <code class="codeph">sysadmin_ctx</code>, who will administer the database session-based application context.</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER sysadmin_ctx IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION, CREATE ANY CONTEXT, CREATE PROCEDURE, CREATE TRIGGER, ADMINISTER DATABASE TRIGGER TO sysadmin_ctx;
GRANT READ ON HR.EMPLOYEES TO sysadmin_ctx;
GRANT EXECUTE ON DBMS_SESSION TO sysadmin_ctx;
</pre><p>Follow the guidelines in <a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">Minimum Requirements for Passwords</a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create the following user account for Lisa Ozer, who is listed as having <code class="codeph">lozer</code> for her email account in the <code class="codeph">HR.EMPLOYEES</code> table.</span><div><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO LOZER IDENTIFIED BY <span class="italic">password</span>;
</pre><p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>The sample user <code class="codeph">SCOTT</code> will also be used in this tutorial, so query the <code class="codeph">DBA_USERS</code> data dictionary view to ensure that the account status for <code class="codeph">SCOTT</code> is <code class="codeph">OPEN</code>.</span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME, ACCOUNT_STATUS FROM DBA_USERS WHERE USERNAME = 'SCOTT';
</pre><p>If the <code class="codeph">DBA_USERS</code> view lists user <code class="codeph">SCOTT</code> as locked and expired, then enter the following statement to unlock the <code class="codeph">SCOTT</code> account and create a new password for him: 
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER USER SCOTT ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">password</span>;
</pre><p>Enter a password that is secure. For greater security, do <span class="bold">not</span> give the <code class="codeph">SCOTT</code> account the same password from previous releases of Oracle Database. See <a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">Minimum Requirements for Passwords</a> for the minimum requirements for creating passwords.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG189"></a><div class="props_rev_3"><a id="GUID-79039102-9AB9-4B68-A601-D4497692F3B2" name="GUID-79039102-9AB9-4B68-A601-D4497692F3B2"></a><h5 id="DBSEG-GUID-79039102-9AB9-4B68-A601-D4497692F3B2" class="sect5">Step 2: Create the Database Session-Based Application Context</h5>
                     <div>
                        <p>As the <code class="codeph">sysadmin_ctx</code> user, you are ready to create the database session-based application context.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Log on to SQL*Plus as <code class="codeph">sysadmin_ctx</code>. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT sysadmin_ctx <span class="italic">-- Or, CONNECT sysadmin_ctx@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create the application context using the following statement: </span><div><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT empno_ctx USING set_empno_ctx_pkg;
</pre><p>Remember that even though user <code class="codeph">sysadmin_ctx</code> has created this application context, the <code class="codeph">SYS</code> schema owns the context. 
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG190"></a><a id="DBSEG66353"></a><div class="props_rev_3"><a id="GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C" name="GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C"></a><h5 id="DBSEG-GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C" class="sect5">Step 3: Create a Package to Retrieve Session Data and Set the Application Context</h5>
                     <div>
                        <p>Next, you must create a PL/SQL package that retrieves the session data and then sets the application context. </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To create the package, use the <code class="codeph">CREATE OR REPLACE PACKAGE</code> statement. 
                                 </p>
                              </li>
                           </ul>
                           <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C__CIHHCEAJ">Example 11-5</a> shows how to create the package you need to retrieve the session data and set the application context. Before creating the package, ensure that you are still logged on as user <code class="codeph">sysadmin_ctx</code>. (You can copy and paste this text by positioning the cursor at the start of <code class="codeph">CREATE OR REPLACE</code> in the first line.)
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C__CIHHCEAJ">
                           <p class="titleinexample">Example 11-5 Package to Retrieve Session Data and Set a Database Session Context</p><pre class="pre codeblock"><code>CREATE OR REPLACE PACKAGE set_empno_ctx_pkg IS 
   PROCEDURE set_empno; 
 END; 
 /
 CREATE OR REPLACE PACKAGE BODY set_empno_ctx_pkg IS
   PROCEDURE set_empno 
   IS 
    emp_id HR.EMPLOYEES.EMPLOYEE_ID%TYPE;
   BEGIN 
    SELECT EMPLOYEE_ID INTO emp_id FROM HR.EMPLOYEES 
       WHERE email = SYS_CONTEXT('USERENV', 'SESSION_USER');
    DBMS_SESSION.SET_CONTEXT('empno_ctx', 'employee_id', emp_id);
   EXCEPTION  
    WHEN NO_DATA_FOUND THEN NULL;
  END;
 END;
/</code></pre><p>This package creates a procedure called <code class="codeph">set_empno</code> that performs the following actions: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">emp_id HR.EMPLOYEES.EMPLOYEE_ID%TYPE</code> declares a variable, <code class="codeph">emp_id</code>, to store the employee ID for the user who logs on. It uses the same data type as the <code class="codeph">EMPLOYEE_ID</code> column in <code class="codeph">HR.EMPLOYEES</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SELECT EMPLOYEE_ID INTO emp_id FROM HR.EMPLOYEES</code> performs a <code class="codeph">SELECT</code> statement to copy the employee ID that is stored in the <code class="codeph">employee_id</code> column data from the <code class="codeph">HR.EMPLOYEES</code> table into the <code class="codeph">emp_id</code> variable.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">WHERE email = SYS_CONTEXT('USERENV', 'SESSION_USER')</code> uses a <code class="codeph">WHERE</code> clause to find all employee IDs that match the email account for the session user. The <code class="codeph">SYS_CONTEXT</code> function uses the predefined <code class="codeph">USERENV</code> context to retrieve the user session ID, which is the same as the <code class="codeph">email</code> column data. For example, the user ID and email address for Lisa Ozer are both the same: <code class="codeph">lozer</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBMS_SESSION.SET_CONTEXT('empno_ctx', 'employee_id', emp_id)</code> uses the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure to set the application context: 
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">'empno_ctx'</code>: Calls the application context <code class="codeph">empno_ctx</code>. Enclose <code class="codeph">empno_ctx</code> in single quotes.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">'employee_id'</code>: Creates the attribute value of the <code class="codeph">empno_ctx</code> application context name-value pair, by naming it <code class="codeph">employee_id</code>. Enclose <code class="codeph">employee_id</code> in single quotes.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">emp_id</code>: Sets the value for the <code class="codeph">employee_id</code> attribute to the value stored in the <code class="codeph">emp_id</code> variable.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>To summarize, the <code class="codeph">set_empno_ctx_pkg.set_empno</code> procedure says, "Get the session ID of the user and then match it with the employee ID and email address of any user listed in the <code class="codeph">HR.EMPLOYEES</code> table."
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">EXCEPTION ... WHEN_NO_DATA_FOUND</code> adds a <code class="codeph">WHEN NO_DATA_FOUND</code> system exception to catch any <code class="codeph">no data found</code> errors that may result from the <code class="codeph">SELECT</code> statement. Without this exception, the package and logon trigger will work fine and set the application context as needed, but then any non-system administrator users other than the users listed in the <code class="codeph">HR.EMPLOYEES</code> table will not be able to log in to the database. Other users should be able to log in to the database, assuming they are valid database users. Once the application context information is set, then you can use this session information as a way to control user access to a particular application.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG191"></a><div class="props_rev_3"><a id="GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D" name="GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D"></a><h5 id="DBSEG-GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D" class="sect5">Step 4: Create a Logon Trigger for the Package</h5>
                     <div>
                        <p>The logon trigger will execute when the user logs in. </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>As user <code class="codeph">sysadmin_ctx</code>, create a logon trigger for <code class="codeph">set_empno_ctx_pkg.set_empno</code> package procedure.
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">CREATE TRIGGER set_empno_ctx_trig AFTER LOGON ON DATABASE
 BEGIN
 &nbsp;sysadmin_ctx.set_empno_ctx_pkg.set_empno;
 END;
/</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG192"></a><div class="props_rev_3"><a id="GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033" name="GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033"></a><h5 id="DBSEG-GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033" class="sect5">Step 5: Test the Application Context</h5>
                     <div>
                        <p>Now that the components are all in place, you are ready to test the application context. </p>
                        <ol>
                           <li class="stepexpand"><span>Log on as user <code class="codeph">lozer</code>.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT lozer <span class="italic">-- Or, CONNECT lozer@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre><p>When user <code class="codeph">lozer</code> logs on, the <code class="codeph">empno_ctx</code> application context collects her employee ID. You can check it as follows: 
                                 </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('empno_ctx', 'employee_id') emp_id FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">EMP_ID
--------------------------------------------------------
168
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Log on as user <code class="codeph">SCOTT</code>.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SCOTT <span class="italic">-- Or, CONNECT SCOTT@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre><p>User <code class="codeph">SCOTT</code> is not listed as an employee in the <code class="codeph">HR.EMPLOYEES</code> table, so the <code class="codeph">empno_ctx</code> application context cannot collect an employee ID for him.
                                 </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('empno_ctx', 'employee_id') emp_id FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">EMP_ID
--------------------------------------------------------
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>From here, the application can use the user session information to determine how much access the user can have in the database. You can use Oracle Virtual Private Database to accomplish this. .</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="using-oracle-vpd-to-control-data-access.html#GUID-06022729-9210-4895-BF04-6177713C65A7" title="Oracle Virtual Private Database (VPD) enables you to filter users who access data.">Using Oracle Virtual Private Database to&nbsp;Control&nbsp;Data Access</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG193"></a><div class="props_rev_3"><a id="GUID-8327F4B9-FE89-4776-A54D-963F9D444C31" name="GUID-8327F4B9-FE89-4776-A54D-963F9D444C31"></a><h5 id="DBSEG-GUID-8327F4B9-FE89-4776-A54D-963F9D444C31" class="sect5">Step 6: Remove the Components of This Tutorial</h5>
                     <div>
                        <p>If you no longer need the components of this tutorial, then you can remove them.</p>
                        <ol>
                           <li class="stepexpand"><span>Connect as <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSDBA</span>
Enter password: <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Drop the users <code class="codeph">sysadmin_ctx</code> and <code class="codeph">lozer</code>: </span><div><pre class="oac_no_warn" dir="ltr">DROP USER sysadmin_ctx CASCADE;
DROP USER lozer;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Drop the application context. </span><div><pre class="oac_no_warn" dir="ltr">DROP CONTEXT empno_ctx;
</pre><p>Remember that even though <code class="codeph">sysadmin_ctx</code> created the application context, it is owned by the <code class="codeph">SYS</code> schema. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If you want, lock and expire <code class="codeph">SCOTT</code>, unless other users want to use this account:</span><div><pre class="oac_no_warn" dir="ltr">ALTER USER SCOTT PASSWORD EXPIRE ACCOUNT LOCK; </pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="This tutorial demonstrates how to create an application context that checks the ID of users who try to log in to the database.">Tutorial: Creating and Using a Database Session-Based Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG70744"></a><div class="props_rev_3"><a id="GUID-115D80C9-8498-439B-8D18-6215ACB12005" name="GUID-115D80C9-8498-439B-8D18-6215ACB12005"></a><h4 id="DBSEG-GUID-115D80C9-8498-439B-8D18-6215ACB12005" class="sect4">Initializing Database Session-Based Application Contexts Externally</h4>
                  <div>
                     <p>Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA). </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A3A707B-1679-46E0-958A-404C0EB3B348">About Initializing Database Session-Based Application Contexts Externally</a><br>You must use a special type of namespace to initialize session-based application context externally.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14">Default Values from Users</a><br>Oracle Database enables you to capture and use default values from users for your applications.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E">Values from Other External Resources</a><br>An application context can accept the initialization of attributes and values through external resources.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182">Example: Creating an Externalized Database Session-based Application Context</a><br>The <code class="codeph">CREATE CONTEXT</code> SQL statement can create an externalized database session-based application context.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2">Initialization of Application Context Values from a Middle-Tier Server</a><br>Middle-tier servers can initialize application context values on behalf of database users. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG1071"></a><div class="props_rev_3"><a id="GUID-5A3A707B-1679-46E0-958A-404C0EB3B348" name="GUID-5A3A707B-1679-46E0-958A-404C0EB3B348"></a><h5 id="DBSEG-GUID-5A3A707B-1679-46E0-958A-404C0EB3B348" class="sect5">About Initializing Database Session-Based Application Contexts Externally</h5>
                     <div>
                        <p>You must use a special type of namespace to initialize session-based application context externally.</p>
                        <p>This namespace must accept the initialization of attribute values from external resources and then stores them in the local user session. </p>
                        <p>Initializing an application context externally enhances performance because it is stored in the UGA and enables the automatic propagation of attributes from one session to another. Connected user database links are supported only by application contexts initialized from OCI-based external sources.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG194"></a><div class="props_rev_3"><a id="GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14" name="GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14"></a><h5 id="DBSEG-GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14" class="sect5">Default Values from Users</h5>
                     <div>
                        <p>Oracle Database enables you to capture and use default values from users for your applications.</p>
                        <p>Sometimes you need the default values from users. Initially, these default values may be hints or preferences, and then after validation, they become trusted contexts. Similarly, it may be more convenient for clients to initialize some default values, and then rely on a login event trigger or applications to validate the values.</p>
                        <p>For job queues, the job submission routine records the context being set at the time the job is submitted, and restores it when executing the batched job. To maintain the integrity of the context, job queues cannot bypass the designated PL/SQL package to set the context. Rather, the externally initialized application context accepts initialization of context values from the job queue process.</p>
                        <p>Automatic propagation of context to a remote session may create security problems. Developers or administrators can effectively handle the context that takes default values from resources other than the designated PL/SQL procedure by using logon triggers to reset the context when users log in.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG195"></a><div class="props_rev_3"><a id="GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E" name="GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E"></a><h5 id="DBSEG-GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E" class="sect5">Values from Other External Resources</h5>
                     <div>
                        <p>An application context can accept the initialization of attributes and values through external resources.</p>
                        <p>Examples include an Oracle Call Interface (OCI) interface, a job queue process, or a database link. </p>
                        <p>Externally initialized application contexts provide the following features:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For remote sessions, automatic propagation of context values that are in the externally initialized application context namespace</p>
                           </li>
                           <li>
                              <p>For job queues, restoration of context values that are in the externally initialized application context namespace</p>
                           </li>
                           <li>
                              <p>For OCI interfaces, a mechanism to initialize context values that are in the externally initialized application context namespace</p>
                           </li>
                        </ul>
                        <p>Although any client program that is using Oracle Call Interface can initialize this type of namespace, you can use login event triggers to verify the values. It is up to the application to interpret and trust the values of the attributes.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG196"></a><div class="sect4"><a id="GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182" name="GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182"></a><h5 id="DBSEG-GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182" class="sect5">Example: Creating an Externalized Database Session-based Application Context</h5>
                     <div>
                        <p>The <code class="codeph">CREATE CONTEXT</code> SQL statement can create an externalized database session-based application context.
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182__CIHFBBFH">Example 11-6</a> shows how to create a database session-based application context that obtains values from an external source.
                        </p>
                        <div class="example" id="GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182__CIHFBBFH">
                           <p class="titleinexample">Example 11-6 Creating an Externalized Database Session-based Application Context</p><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT ext_ctx USING ext_ctx_pkg INITIALIZED EXTERNALLY;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG197"></a><div class="props_rev_3"><a id="GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2" name="GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2"></a><h5 id="DBSEG-GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2" class="sect5">Initialization of Application Context Values from a Middle-Tier Server</h5>
                     <div>
                        <p>Middle-tier servers can initialize application context values on behalf of database users. </p>
                        <p>In this process, context attributes are propagated for the remote session at initialization time, and the remote database accepts the values if the namespace is externally initialized.</p>
                        <p>For example, a three-tier application creating lightweight user sessions through OCI or JDBC/OCI can access the <code class="codeph">PROXY_USER</code> attribute in <code class="codeph">USERENV</code>. This attribute enables you to determine if the user session was created by a middle-tier application. You could allow a user to access data only for connections where the user is proxied. If users connect directly to the database, then they would not be able to access any data. 
                        </p>
                        <p>You can use the <code class="codeph">PROXY_USER</code> attribute from the <code class="codeph">USERENV</code> namespace within Oracle Virtual Private Database to ensure that users only access data through a particular middle-tier application. For a different approach, you can develop a secure application role to enforce your policy that users access the database only through a specific proxy. 
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2__GUID-DC0A79E2-25B5-435D-AF70-BF985FB9ED66">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-authentication.html#GUID-94CF6D9C-08A0-4671-BD82-694EB67D06C9" title="You can use middle tier servers for proxy authentication and client identifiers to identify application users who are not known to the database.">Preserving User Identity in Multitiered Environments</a> for information about proxy authentication and about using the <code class="codeph">USERENV</code> attribute <code class="codeph">CLIENT_IDENTIFIER</code> to preserve user identity across multiple tiers
                                 </p>
                              </li>
                              <li>
                                 <p><a href="configuring-authentication.html#GUID-DC21CB47-D1B7-4ED9-B20A-16AE9C7FAAA7" title="Oracle Call Interface (OCI), JDBC/OCI, or JDBC Thin Driver supports the middle tier for proxy authentication for database users or enterprise users.">Middle Tier Server Use for Proxy Authentication</a> for information about using a secure application role to enforce a policy through a specific proxy
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../lnoci/managing-scalable-platforms.html#LNOCI840" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG70745"></a><div class="props_rev_3"><a id="GUID-92F2E244-3516-4A52-AA31-D81F535E488C" name="GUID-92F2E244-3516-4A52-AA31-D81F535E488C"></a><h4 id="DBSEG-GUID-92F2E244-3516-4A52-AA31-D81F535E488C" class="sect4">Initializing Database Session-Based Application Contexts Globally</h4>
                  <div>
                     <p>When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04">About Initializing Database Session-Based Application Contexts Globally</a><br>You can use a centralized location to store the database session-based application context of the user. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909">Database Session-Based Application Contexts with LDAP</a><br>An application context that is initialized globally uses LDAP, a standard, extensible, and efficient directory access protocol. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F">How Globally Initialized Database Session-Based Application Contexts Work</a><br>To use a globally initialized secure application, you must first configure Enterprise User Security. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-66D6590A-D405-4FE9-8095-B9183599494E">Initializing a Database Session-Based Application Context Globally</a><br>You can configure and store the initial application context for a user, such as the department name and title, in the LDAP directory. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG559"></a><div class="props_rev_3"><a id="GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04" name="GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04"></a><h5 id="DBSEG-GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04" class="sect5">About Initializing Database Session-Based Application Contexts Globally</h5>
                     <div>
                        <p>You can use a centralized location to store the database session-based application context of the user. </p>
                        <p>A centralized location enables applications to set up a user context during initialization based upon user identity. </p>
                        <p>In particular, this feature supports Oracle Label Security labels and privileges. Initializing an application context globally makes it easier to manage contexts for large numbers of users and databases. </p>
                        <p>For example, many organizations want to manage user information centrally, in an LDAP-based directory. Enterprise User Security supports centralized user and authorization management in Oracle Internet Directory. However, there may be additional attributes an application must retrieve from Lightweight Directory Access Protocol (LDAP) to use for Oracle Virtual Private Database enforcement, such as the user title, organization, or physical location. Initializing an application context globally enables you to retrieve these types of attributes.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.">Initializing Database Session-Based Application Contexts Globally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG199"></a><a id="DBSEG198"></a><div class="props_rev_3"><a id="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909" name="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909"></a><h5 id="DBSEG-GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909" class="sect5">Database Session-Based Application Contexts with LDAP</h5>
                     <div>
                        <p>An application context that is initialized globally uses LDAP, a standard, extensible, and efficient directory access protocol. </p>
                        <p>The LDAP directory stores a list of users to which this application is assigned. Oracle Database uses a directory service, typically Oracle Internet Directory, to authenticate and authorize enterprise users.</p>
                        <div class="infoboxnote" id="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909__GUID-1E0B88CA-153B-4480-ACD4-06A0531842EC">
                           <p class="notep1">Note:</p>
                           <p>You can use third-party directories such as Microsoft Active Directory and Sun Microsystems SunONE as the directory service.</p>
                        </div>
                        <p>The <code class="codeph">orclDBApplicationContext</code> LDAP object (a subclass of <code class="codeph">groupOfUniqueNames</code>) stores the application context values in the directory. The location of the application context object is described in <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909__BHAGIEHB">Figure 11-1</a>, which is based on the Human Resources example.
                        </p>
                        <p>The LDAP object <code class="codeph">inetOrgPerson</code> enables multiple entries to exist for some attributes. However, be aware that when these entries are loaded into the database and accessed with the <code class="codeph">SYS_LDAP_USER_DEFAULT</code> context namespace, then only the first of these entries is returned. For example, the <code class="codeph">inetOrgPerson</code> object for a user allows multiple entries for <code class="codeph">telephoneNumber</code> (thus allowing a user to have multiple telephone numbers stored). When you use the <code class="codeph">SYS_LDAP_USER_DEFAULT</code> context namespace, only the first telephone number is retrieved. If the list of attributes and values that are provided are not sufficient for your needs, then you can use the <code class="codeph">DBMS_LDAP</code> PL/SQL package to fetch additional values from the directory.
                        </p>
                        <p>On the LDAP side, an internal C function is required to retrieve the <code class="codeph">orclDBApplicationContext</code> value, which returns a list of application context values to the database. In this example, <code class="codeph">HR</code> is the namespace; <code class="codeph">Title</code> and <code class="codeph">Project</code> are the attributes; and <code class="codeph">Manager</code> and <code class="codeph">Promotion</code> are the values.
                        </p>
                        <div class="figure" id="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909__BHAGIEHB">
                           <p class="titleinfigure">Figure 11-1 Location of Application Context in LDAP Directory Information Tree</p><img src="img/adfns001.gif" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows" longdesc="img_text/adfns001.html"><br><a href="img_text/adfns001.html">Description of "Figure 11-1 Location of Application Context in LDAP Directory Information Tree"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.">Initializing Database Session-Based Application Contexts Globally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG200"></a><div class="props_rev_3"><a id="GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F" name="GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F"></a><h5 id="DBSEG-GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F" class="sect5">How Globally Initialized Database Session-Based Application Contexts Work</h5>
                     <div>
                        <p>To use a globally initialized secure application, you must first configure Enterprise User Security. </p>
                        <p>Then, you configure the application context values for the user in the database and the directory.</p>
                        <p>When a global user (enterprise user) connects to the database, Enterprise User Security verifies the identity of the user connecting to the database. After authentication, the global user roles and application context are retrieved from the directory. When the user logs on to the database, the global roles and initial application context are already set.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F__GUID-90D5531D-7F54-4740-9FC7-4D91E5A7E74B">
                           <p class="notep1">See Also:</p>
                           <p><a href="../dbimi/enterprise-user-security-configuration-tasks-and-troubleshooting.html#DBIMI150" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for information about configuring Enterprise User Security
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.">Initializing Database Session-Based Application Contexts Globally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG201"></a><div class="props_rev_3"><a id="GUID-66D6590A-D405-4FE9-8095-B9183599494E" name="GUID-66D6590A-D405-4FE9-8095-B9183599494E"></a><h5 id="DBSEG-GUID-66D6590A-D405-4FE9-8095-B9183599494E" class="sect5">Initializing a Database Session-Based Application Context Globally</h5>
                     <div>
                        <p>You can configure and store the initial application context for a user, such as the department name and title, in the LDAP directory. </p>
                        <div class="section">
                           <p>The values are retrieved during user login so that the context is set properly. In addition, any information related to the user is retrieved and stored in the <code class="codeph">SYS_USER_DEFAULTS</code> application context namespace. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Create the application context in the database.</span><div><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT hr USING hrapps.hr_manage_pkg INITIALIZED GLOBALLY;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create and add new entries in the LDAP directory.</span><div>
                                 <p>An example of the entries added to the LDAP directory follows. These entries create an attribute named <code class="codeph">Title</code> with the attribute value <code class="codeph">Manager</code> for the application (namespace) <code class="codeph">HR</code>, and assign user names <code class="codeph">user1</code> and <code class="codeph">user2</code>. In the following, <code class="codeph">cn=example</code> refers to the name of the domain. 
                                 </p><pre class="oac_no_warn" dir="ltr">dn: cn=OracleDBAppContext,cn=example,cn=OracleDBSecurity,cn=Products,cn=OracleContext,ou=Americas,o=oracle,c=US
changetype: add
cn: OracleDBAppContext
objectclass: top
objectclass: orclContainer

dn: cn=hr,cn=OracleDBAppContext,cn=example,cn=OracleDBSecurity,cn=Products,cn=OracleContext,ou=Americas,o=oracle,c=US
changetype: add
cn: hr
objectclass: top
objectclass: orclContainer

dn: cn=Title,cn=hr, cn=OracleDBAppContext,cn=example,cn=OracleDBSecurity,cn=Products,cn=OracleContext,ou=Americas,o=oracle,c=US
changetype: add
cn: Title
objectclass: top
objectclass: orclContainer

dn: cn=Manager,cn=Title,cn=hr, cn=OracleDBAppContext,cn=example,cn=OracleDBSecurity,cn=Products,cn=OracleContext,ou=Americas,o=oracle,c=US
cn: Manager
objectclass: top
objectclass: groupofuniquenames
objectclass: orclDBApplicationContext
uniquemember: CN=user1,OU=Americas,O=Oracle,L=Redwoodshores,ST=CA,C=US
uniquemember: CN=user2,OU=Americas,O=Oracle,L=Redwoodshores,ST=CA,C=US</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If an LDAP <code class="codeph">inetOrgPerson</code> object entry exists for the user, then the connection retrieves the attributes from <code class="codeph">inetOrgPerson</code>, and assigns them to the namespace <code class="codeph">SYS_LDAP_USER_DEFAULT</code>. Note that the context is only populated with non-<code class="codeph">NULL</code> values that are part of the <code class="codeph">inetOrgPerson</code> object class. No other attributes will be populated.</span><div>
                                 <p>The following is an example of an <code class="codeph">inetOrgPerson</code> entry:
                                 </p><pre class="oac_no_warn" dir="ltr">dn: cn=user1,ou=Americas,O=oracle,L=redwoodshores,ST=CA,C=US
changetype: add
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
cn: user1
sn: One
givenName: User
initials: UO
title: manager, product development
uid: uone
mail: uone@us.example.com
telephoneNumber: +1 650 555 0105
employeeNumber: 00001
employeeType: full time</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Connect to the database.</span><div>
                                 <p>When <code class="codeph">user1</code> connects to a database that belongs to the <code class="codeph">example</code> domain, <code class="codeph">user1</code> will have his <code class="codeph">Title</code> set to <code class="codeph">Manager</code>. Any information related to <code class="codeph">user1</code> will be retrieved from the LDAP directory. The value can be obtained using the following syntax:
                                 </p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT('<span class="italic">namespace</span>','<span class="italic">attribute name</span>') 
</pre><p>For example:</p><pre class="oac_no_warn" dir="ltr">DECLARE 
 tmpstr1 VARCHAR2(30);
 tmpstr2 VARCHAR2(30);
BEGIN
 tmpstr1 = SYS_CONTEXT('HR','TITLE);
 tmpstr2 = SYS_CONTEXT('SYS_LDAP_USER_DEFAULT','telephoneNumber');
 DBMS_OUTPUT.PUT_LINE('Title is ' || tmpstr1);
 DBMS_OUTPUT.PUT_LINE('Telephone Number is ' || tmpstr2);
END;
</pre><p>The output of this example is:</p><pre class="oac_no_warn" dir="ltr">Title is Manager
Telephone Number is +1 650 555 0105</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.">Initializing Database Session-Based Application Contexts Globally</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG202"></a><div class="props_rev_3"><a id="GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40" name="GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40"></a><h4 id="DBSEG-GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40" class="sect4">Externalized Database Session-Based Application Contexts</h4>
                  <div>
                     <p>Many applications store attributes used for fine-grained access control within a database metadata table. </p>
                     <p>For example, an <code class="codeph">employees</code> table could include cost center, title, signing authority, and other information useful for fine-grained access control. Organizations also centralize user information for user management and access control in LDAP-based directories, such as Oracle Internet Directory. Application context attributes can be stored in Oracle Internet Directory, and assigned to one or more enterprise users. They can also be retrieved automatically upon login for an enterprise user, and then used to initialize an application context.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40__GUID-9C0A3A4A-5029-48C4-A3D3-96172B44C9FA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="Initializing database session-based application contexts externally increases performance because the application context is stored in the user global area (UGA).">Initializing Database Session-Based Application Contexts Externally</a> for information about initializing local application context through external resources such as an OCI interface, a job queue process, or a database link
                              </p>
                           </li>
                           <li>
                              <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="When a database session-based application is stored in a centralized location, it can be used globally from an LDAP directory.">Initializing Database Session-Based Application Contexts Globally</a> for information about initializing local application context through a centralized resource, such as Oracle Internet Directory
                              </p>
                           </li>
                           <li>
                              <p><a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for information about enterprise users
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG70005"></a><div class="props_rev_3"><a id="GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" name="GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6"></a><h3 id="DBSEG-GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" class="sect3">Global Application Contexts</h3>
               <div>
                  <p>You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A">About Global Application Contexts</a><br>A global application context enables application context values to be accessible across database sessions, including Oracle RAC instances. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC">Uses for Global Application Contexts</a><br>There are three general uses for global application contexts.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664">Components of a Global Application Context</a><br>A global application context uses a package to manage its attributes and middle-tier application to manage the client session ID.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-1BC71E53-B267-4661-AC4E-F14FDC524983">Global Application Contexts in an Oracle Real Application Clusters Environment</a><br>In an Oracle RAC environment, whenever a global application context is loaded or changed, it is visible only to the existing active instances. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4">Creating Global Application Contexts</a><br>The <code class="codeph">CREATE CONTEXT</code> SQL statement creates the global application context, which is then located in the <code class="codeph">SYS</code> schema. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80">PL/SQL Package to Manage a Global Application Context</a><br>The <code class="codeph">DBMS_SESSION</code> PL/SQL package to manages global application contexts. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15">Embedding Calls in Middle-Tier Applications to Manage the Client Session ID</a><br>You can embed calls in middle-tier applications to manage client session IDs. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a><br>This tutorial demonstrates how you can create a global application context that uses a client session ID.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61">Global Application Context Processes</a><br>A simple global application context uses a database user account create the user session; a global application context is for lightweight users.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG203"></a><div class="props_rev_3"><a id="GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A" name="GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A"></a><h4 id="DBSEG-GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A" class="sect4">About Global Application Contexts</h4>
                  <div>
                     <p>A global application context enables application context values to be accessible across database sessions, including Oracle RAC instances. </p>
                     <p>Oracle Database stores the global application context information in the System (sometimes called "Shared") Global Area (SGA) so that it can be used for applications that use a sessionless model, such as middle-tier applications in a three-tiered architecture. </p>
                     <p>These applications cannot use a session-based application context because users authenticate to the application, and then it typically connects to the database as a single identity. Oracle Database initializes the global application context once, rather than for each user session. This improves performance, because connections are reused from a connection pool. </p>
                     <p>You can clear a global application context value by running the <code class="codeph">ALTER SYSTEM FLUSH GLOBAL_CONTEXT</code> SQL statement. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC" name="GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC"></a><h4 id="DBSEG-GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC" class="sect4">Uses for Global Application Contexts</h4>
                  <div>
                     <p>There are three general uses for global application contexts.</p>
                     <p>These uses are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">You must share application values globally for all database users.</span> For example, you may need to disable access to an application based on a specific situation. In this case, the values the application context sets are not user-specific, nor are they based on the private data of a user. The application context defines a situation, for example, to indicate the version of application module that is running.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">You have database users who must move from one application to another.</span> In this case, the second application the user is moving to has different access requirements from the first application.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">You must authenticate nondatabase users, that is, users who are not known to the database.</span> This type of user, who does not have a database account, typically connects through a Web application by using a connection pool. These types of applications connect users to the database as single user, using the One Big Application User authentication model. To authenticate this type of user, you use the client session ID of the user.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664" name="GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664"></a><h4 id="DBSEG-GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664" class="sect4">Components of a Global Application Context</h4>
                  <div>
                     <p>A global application context uses a package to manage its attributes and middle-tier application to manage the client session ID.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">The global application context.</span> You use the <code class="codeph">CREATE CONTEXT</code> SQL statement to create the global application context, and include the <code class="codeph">ACCESSED GLOBALLY</code> clause in the statement. This statement names the application context and associates it with a PL/SQL procedure that is designed to set the application data context data. The global application context is created and stored in the database schema of the security administrator who creates it. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">A PL/SQL package to set the attributes.</span> The package must contain a procedure that uses the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure to set the global application context. The <code class="codeph">SET_CONTEXT</code> procedure provides parameters that enable you to create a global application context that fits any of the three user situations described in this section. You create, store, and run the PL/SQL package on the database server. Typically, it belongs in the schema of the security administrator who created it.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">A middle-tier application to get and set the client session ID.</span> For nondatabase users, which require a client session ID to be authenticated, you can use the Oracle Call Interface (OCI) calls in the middle-tier application to retrieve and set their session data. You can also use the <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> procedure to set the client session ID. An advantage of creating a client session ID to store the nondatabase user's name is that you can query the <code class="codeph">CLIENT_ID</code> column of <code class="codeph">DBA_AUDIT_TRAIL</code>, <code class="codeph">DBA_FGA_AUDIT_TRAIL</code>, and <code class="codeph">DBA_COMMON_AUDIT_TRAIL</code> data dictionary views to audit this user's activity. 
                           </p>
                           <div class="infoboxnote" id="GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664__GUID-B9A0D994-EC51-4AB5-8DA9-95937DE96323">
                              <p class="notep1">Note:</p>
                              <p>Be aware that the <code class="codeph">DBMS_APPLICATION_INFO.SET_CLIENT_INFO</code> setting can overwrite the value.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-authentication.html#GUID-E229BFB0-43FB-49DD-803D-760E4EE658D5" title="The DBMS_SESSION PL/SQL package manages client identifiers on both the middle tier and the database itself.">Use of the DBMS_SESSION PL/SQL Package to Set and Clear the Client Identifier</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG584"></a><div class="props_rev_3"><a id="GUID-1BC71E53-B267-4661-AC4E-F14FDC524983" name="GUID-1BC71E53-B267-4661-AC4E-F14FDC524983"></a><h4 id="DBSEG-GUID-1BC71E53-B267-4661-AC4E-F14FDC524983" class="sect4">Global Application Contexts in an Oracle Real Application Clusters Environment</h4>
                  <div>
                     <p>In an Oracle RAC environment, whenever a global application context is loaded or changed, it is visible only to the existing active instances. </p>
                     <p>Be aware that setting a global application context value in an Oracle RAC environment has performance overhead of propagating the context value consistently to all Oracle RAC instances.</p>
                     <p>If you flush the global application context (using the <code class="codeph">ALTER SYSTEM FLUSH GLOBAL_CONTEXT</code> SQL statement) in one Oracle RAC instance, then all the global application context is flushed in all other Oracle RAC instances as well. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG204"></a><div class="props_rev_3"><a id="GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" name="GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4"></a><h4 id="DBSEG-GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" class="sect4">Creating Global Application Contexts</h4>
                  <div>
                     <p>The <code class="codeph">CREATE CONTEXT</code> SQL statement creates the global application context, which is then located in the <code class="codeph">SYS</code> schema. 
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6A158C09-730F-437B-800C-13F835D40E22">Ownership of the Global Application Context</a><br>A global application context is owned by the <code class="codeph">SYS</code> schema. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219">Creating a Global Application Context</a><br>As with local application contexts, the global application context is created and stored in the security administratorâ€™s database schema. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG1034"></a><div class="props_rev_3"><a id="GUID-6A158C09-730F-437B-800C-13F835D40E22" name="GUID-6A158C09-730F-437B-800C-13F835D40E22"></a><h5 id="DBSEG-GUID-6A158C09-730F-437B-800C-13F835D40E22" class="sect5">Ownership of the Global Application Context</h5>
                     <div>
                        <p>A global application context is owned by the <code class="codeph">SYS</code> schema. 
                        </p>
                        <p>The ownership of the global application context is as follows: Even though a user who has been granted the <code class="codeph">CREATE ANY CONTEXT</code> and <code class="codeph">DROP ANY CONTEXT</code> privileges can create and drop the global application context, it is owned by the <code class="codeph">SYS</code> schema.
                        </p>
                        <p>Oracle Database associates the context with the schema account that created it, but if you drop this user, the context still exists in the <code class="codeph">SYS</code> schema. As user <code class="codeph">SYS</code>, you can drop the application context.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" title="The CREATE CONTEXT SQL statement creates the global application context, which is then located in the SYS schema.">Creating Global Application Contexts</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1048"></a><div class="props_rev_3"><a id="GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219" name="GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219"></a><h5 id="DBSEG-GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219" class="sect5">Creating a Global Application Context</h5>
                     <div>
                        <p>As with local application contexts, the global application context is created and stored in the security administratorâ€™s database schema. </p>
                        <div class="section">
                           <p>You must have the <code class="codeph">CREATE ANY CONTEXT</code> system privilege before you can create a global application context, and the <code class="codeph">DROP ANY CONTEXT</code> privilege before you can drop the context with the <code class="codeph">DROP CONTEXT</code> statement. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To create a global application context, use the <code class="codeph">CREATE CONTEXT</code> SQL statement to create the application context and include the <code class="codeph">ACCESSED GLOBALLY</code> clause in the statement.
                                 </p>
                              </li>
                           </ul>
                           <p>For example: </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE CONTEXT global_hr_ctx USING hr_ctx_pkg ACCESSED GLOBALLY CONTAINER = ALL;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" title="The CREATE CONTEXT SQL statement creates the global application context, which is then located in the SYS schema.">Creating Global Application Contexts</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG206"></a><div class="props_rev_3"><a id="GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" name="GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80"></a><h4 id="DBSEG-GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" class="sect4">PL/SQL Package to Manage a Global Application Context</h4>
                  <div>
                     <p>The <code class="codeph">DBMS_SESSION</code> PL/SQL package to manages global application contexts. 
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-280970AB-BC5E-40FE-85A3-3724017E9417">About the Package That Manages the Global Application Context</a><br>The package that is associated with a global application context uses the <code class="codeph">DBMS_SESSION</code> package to set and clear the global application context values. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-075BCAB6-8462-4825-B738-B81F31DF033A">How Editions Affects the Results of a Global Application Context PL/SQL Package</a><br>Global application context packages, Oracle Virtual Private Database packages, and fine-grained audit policies can be used across multiple editions.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8">DBMS_SESSION.SET_CONTEXT username and client_id Parameters</a><br>The <code class="codeph">DBMS_SESSION.SYS_CONTEXT</code> procedure provides the <code class="codeph">client_id</code> and <code class="codeph">username</code> parameters, to be used for global application contexts. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640">Sharing Global Application Context Values for All Database Users</a><br>You can share global application values for all database users to give them access to data in the database. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A6B636E-E712-4094-AD24-5174F07608B1">Example: Package to Manage Global Application Values for All Database Users</a><br>The <code class="codeph">CREATE PACKAGE</code> statement can manage global application values for all database users.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83">Global Contexts for Database Users Who Move Between Applications</a><br>A global application context can be used for database users who move between application, even when the applications have different access requirements.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-59436329-F584-4410-B6EE-B1A481278141">Global Application Context for Nondatabase Users</a><br>When a nondatabase user starts a client session, the application server generates a client session ID. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-32003F45-C354-49F4-9BC7-812E469B941B">Example: Package to Manage Global Application Context Values for Nondatabase Users</a><br>The <code class="codeph">CREATE PACKAGE</code> statement can manage global application context values for nondatabase users. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76">Clearing Session Data When the Session Closes</a><br>The application context exists within memory, so when the user exits a session, you must clear the <code class="codeph">client_identifier</code> context value. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG207"></a><div class="props_rev_3"><a id="GUID-280970AB-BC5E-40FE-85A3-3724017E9417" name="GUID-280970AB-BC5E-40FE-85A3-3724017E9417"></a><h5 id="DBSEG-GUID-280970AB-BC5E-40FE-85A3-3724017E9417" class="sect5">About the Package That Manages the Global Application Context</h5>
                     <div>
                        <p>The package that is associated with a global application context uses the <code class="codeph">DBMS_SESSION</code> package to set and clear the global application context values. 
                        </p>
                        <p>You must have the <code class="codeph">EXECUTE</code> privilege for the <code class="codeph">DBMS_SESSION</code> package before you use its procedures. Typically, you create and store this package in the database schema of a security administrator. The <code class="codeph">SYS</code> schema owns the <code class="codeph">DBMS_SESSION</code> package.
                        </p>
                        <p>Unlike PL/SQL packages used to set a local application context, you do not include a <code class="codeph">SYS_CONTEXT</code> function to get the user session data. You do not need to include this function because the owner of the session, recorded in the <code class="codeph">USERENV</code> context, is the same for every user who is connecting. 
                        </p>
                        <p>You can run the procedures within the PL/SQL package for a global application context at any time. You do not need to create logon and logoff triggers to execute the package procedures associated with the global application context. A common practice is to run the package procedures from within the database application. Additionally, for nondatabase users, you use middle-tier applications to get and set client session IDs.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-280970AB-BC5E-40FE-85A3-3724017E9417__GUID-0EFB083C-A74F-4416-A406-76B17C0A7135">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about the <code class="codeph">DBMS_SESSION</code> package
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG208"></a><div class="props_rev_3"><a id="GUID-075BCAB6-8462-4825-B738-B81F31DF033A" name="GUID-075BCAB6-8462-4825-B738-B81F31DF033A"></a><h5 id="DBSEG-GUID-075BCAB6-8462-4825-B738-B81F31DF033A" class="sect5">How Editions Affects the Results of a Global Application Context PL/SQL Package</h5>
                     <div>
                        <p>Global application context packages, Oracle Virtual Private Database packages, and fine-grained audit policies can be used across multiple editions.</p>
                        <p>Follow these guidelines: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">If you want to have the PL/SQL package results be the same across all editions.</span> To do so, create the package in the schema of a user who has not been editions enabled. To find users who are not editions enabled, you can query the <code class="codeph">DBA_USERS</code> and <code class="codeph">USER_USERS</code> data dictionary views. Remember that <code class="codeph">SYS</code>, <code class="codeph">SYSTEM</code>, and other default Oracle Database administrative accounts that are listed in the <code class="codeph">DBA_REGISTRY</code> data dictionary view are not and cannot be editions enabled. 
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">If you want to have the PL/SQL package results depend on the current state of the edition in which the package is run.</span> Here, the results may be different across all editions to which the package applies. In this case, create the package in the schema of a user who has been editions enabled. If the schema is editions enabled, then it is likely that there will be different actual copies of the package in different editions, where each copy has different behavior. This is useful for the following types of scenarios: 
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The package must use a new application context.</p>
                                 </li>
                                 <li>
                                    <p>The package must encode input values using a different scheme. </p>
                                 </li>
                                 <li>
                                    <p>The package must apply different validation rules for users logging in to the database. </p>
                                 </li>
                              </ul>
                              <p>For PL/SQL packages that set a global application context, use a single getter function to wrap the primitive <code class="codeph">SYS_CONTEXT</code> calls that will read the key-value application context pairs. You can put this getter function in the same package as the application context setter procedure. This approach lets you tag the value for the application context key to reflect a relevant concept. For example, the tag can be the edition in which the setter function is actual. Or, it can be the current edition of the session that set the context, which you can find by using <code class="codeph">SYS_CONTEXT('USERENV', 'CURRENT_EDITION_NAME')</code>. This tag can be any specific notion to which the setter function applies. 
                              </p>
                              <div class="infoboxnotealso" id="GUID-075BCAB6-8462-4825-B738-B81F31DF033A__GUID-A150F24F-9B29-401E-B444-F349581FDEF6">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../adfns/editions.html#ADFNS020" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for detailed information about editions
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG209"></a><a id="DBSEG77432"></a><div class="props_rev_3"><a id="GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" name="GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8"></a><h5 id="DBSEG-GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" class="sect5">DBMS_SESSION.SET_CONTEXT username and client_id Parameters</h5>
                     <div>
                        <p>The <code class="codeph">DBMS_SESSION.SYS_CONTEXT</code> procedure provides the <code class="codeph">client_id</code> and <code class="codeph">username</code> parameters, to be used for global application contexts. 
                        </p>
                        <div class="section">
                           <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8__CIHJGGGF" title="Results of Setting the DBMS_SESSION.SYS_CONTEXT username and client_id Parameters">Table 11-2</a> explains how the combination of these settings controls the type of global application context you can create.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8__CIHJGGGF">
                           <p class="titleintable">Table 11-2 Setting the DBMS_SESSION.SET_CONTEXT username and client_id Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Setting the DBMS_SESSION.SET_CONTEXT username and client_id Parameters" summary="Results of Setting the DBMS_SESSION.SYS_CONTEXT username and client_id Parameters" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d84552e9890">Combination&nbsp;Settings&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                                    <th align="left" valign="bottom" width="69%" id="d84552e9893">Result</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9898" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code> set to <code class="codeph">NULL</code></p>
                                       <p><code class="codeph">client_id</code> set to <code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9898 d84552e9893 ">
                                       <p>This combination enables all users to access the application context. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640" title="You can share global application values for all database users to give them access to data in the database.">Sharing Global Application Context Values for All Database Users</a> for more information.
                                       </p>
                                       <p>These settings are also used for database session-based application contexts. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="A database session-based application context enables you to retrieve session-based information about a user.">Using Database Session-Based Application Contexts</a> for more information.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9929" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code> set to a value
                                       </p>
                                       <p><code class="codeph">client_id</code> set to <code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9929 d84552e9893 ">
                                       <p>This combination enables an application context to be accessed by multiple sessions, as long as the <code class="codeph">username</code> setting is the same throughout. Ensure that the user name specified is a valid database user. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83" title="A global application context can be used for database users who move between application, even when the applications have different access requirements.">Global Contexts for Database Users Who Move Between Applications</a> for more information.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9953" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code> set to <code class="codeph">NULL</code></p>
                                       <p><code class="codeph">client_id</code> set to a value
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9953 d84552e9893 ">
                                       <p>This combination enables an application to be accessed by multiple user sessions, as long as the <code class="codeph">client_id</code> parameter is set to the same value throughout. This enables sessions of all users to see the application context values. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9971" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code> set to a value
                                       </p>
                                       <p><code class="codeph">client_id</code> set to a value
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9971 d84552e9893 ">
                                       <p>This combination enables the following two scenarios:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><span class="bold">Lightweight users.</span> If the user does not have a database account, the username specified is a connection pool owner. The <code class="codeph">client_id</code> setting is then associated with the nondatabase user who is logging in. 
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="bold">Database users.</span> If the user is a database user, this combination can be used for stateless Web sessions. 
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Setting the <code class="codeph">username</code> parameter in the <code class="codeph">SET_CONTEXT</code> procedure to <code class="codeph">USER</code> calls the Oracle Database-supplied <code class="codeph">USER</code> function. The <code class="codeph">USER</code> function specifies the session owner from the application context retrieval process and ensures that only the user who set the application context can access the context. See <a href="../sqlrf/USER.html#SQLRF06156" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">USER</code> function.
                                       </p>
                                       <p>See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-59436329-F584-4410-B6EE-B1A481278141" title="When a nondatabase user starts a client session, the application server generates a client session ID.">Global Application Context for Nondatabase Users</a> for more information.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG210"></a><div class="props_rev_3"><a id="GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640" name="GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640"></a><h5 id="DBSEG-GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640" class="sect5">Sharing Global Application Context Values for All Database Users</h5>
                     <div>
                        <p>You can share global application values for all database users to give them access to data in the database. </p>
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To share global application values for all database users, set the <code class="codeph">namespace</code>, <code class="codeph">attribute</code>, and <code class="codeph">value</code> parameters in the <code class="codeph">SET_CONTEXT</code> procedure. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A6B636E-E712-4094-AD24-5174F07608B1" title="The CREATE PACKAGE statement can manage global application values for all database users.">Example: Package to Manage Global Application Values for All Database Users</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG211"></a><div class="props_rev_3"><a id="GUID-5A6B636E-E712-4094-AD24-5174F07608B1" name="GUID-5A6B636E-E712-4094-AD24-5174F07608B1"></a><h5 id="DBSEG-GUID-5A6B636E-E712-4094-AD24-5174F07608B1" class="sect5">Example: Package to Manage Global Application Values for All Database Users</h5>
                     <div>
                        <p>The <code class="codeph">CREATE PACKAGE</code> statement can manage global application values for all database users.
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A6B636E-E712-4094-AD24-5174F07608B1__CIHCBBCI">Example 11-7</a> shows how to create a package that sets and clears a global application context for all database users.
                        </p>
                        <div class="example" id="GUID-5A6B636E-E712-4094-AD24-5174F07608B1__CIHCBBCI">
                           <p class="titleinexample">Example 11-7 Package to Manage Global Application Values for All Database Users</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE hr_ctx_pkg 
   AS  
    PROCEDURE set_hr_ctx(sec_level IN VARCHAR2); 
    PROCEDURE clear_hr_context;
   END;  
  /
  CREATE OR REPLACE PACKAGE BODY hr_ctx_pkg 
   AS                                            
    PROCEDURE set_hr_ctx(sec_level IN VARCHAR2)      
    AS   
    BEGIN  
     DBMS_SESSION.SET_CONTEXT(  
      namespace  =&gt; 'global_hr_ctx', 
      attribute  =&gt; 'job_role', 
      value      =&gt; sec_level);
     END set_hr_ctx;
           
  PROCEDURE clear_hr_context  
    AS
    BEGIN  
     DBMS_SESSION.CLEAR_CONTEXT('global_hr_ctx', 'job_role'); 
    END clear_context;  
  END; 
 /</pre><p>In this example:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">DBMS_SESSION.SET_CONTEXT ... END set_hr_ctx</code> uses the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure to set values for the <code class="codeph">namespace</code>, <code class="codeph">attribute</code>, and <code class="codeph">value</code> parameters. The <code class="codeph">sec_level</code> value is specified when the database application runs the <code class="codeph">hr_ctx_pkg.set_hr_ctx</code> procedure. 
                                 </p>
                                 <p>The <code class="codeph">username</code> and <code class="codeph">client_id</code> values are not set, hence, they are <code class="codeph">NULL</code>. This enables all users (database users) to have access to the values, which is appropriate for server-wide settings.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">namespace  =&gt; 'global_hr_ctx'</code> sets the <code class="codeph">namespace</code> to <code class="codeph">global_hr_ctx</code>, in the <code class="codeph">SET_CONTEXT</code> procedure.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">attribute  =&gt; 'job_role'</code> creates the <code class="codeph">job_role</code> attribute.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">value      =&gt; sec_level</code> sets the value for the <code class="codeph">job_role</code> attribute to <code class="codeph">sec_level</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PROCEDURE clear_hr_context</code> creates the <code class="codeph">clear_hr_context</code> procedure to clear the context values. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" title="The application context exists within memory, so when the user exits a session, you must clear the client_identifier context value.">Clearing Session Data When the Session Closes</a> for more information.
                                 </p>
                              </li>
                           </ul>
                           <p>Typically, you execute this procedure within a database application. For example, if all users logging in are clerks, and you want to use "clerk" as a security level, you would embed a call within a database application similar to the following:</p><pre class="oac_no_warn" dir="ltr">BEGIN
 hr_ctx_pkg.set_hr_ctx('clerk');
END;
/
</pre><p>If the procedure successfully completes, then you can check the application context values as follows:</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('global_hr_ctx', 'job_role') job_role FROM DUAL;

JOB_ROLE
-----------
clerk
</pre><p>You can clear the global application context values for all database users by running the following procedure:</p><pre class="oac_no_warn" dir="ltr">BEGIN
 hr_ctx_pkg.clear_hr_context;
END;
/</pre><p>To check that the global context value is really cleared, the following <code class="codeph">SELECT</code> statement should return no values: 
                           </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('global_hr_ctx', 'job_role') job_role FROM DUAL;

JOB_ROLE
-----------</pre><p>If Oracle Database returns error messages saying that you have insufficient privileges, then ensure that you have correctly created the global application context. You should also query the <code class="codeph">DBA_CONTEXT</code> database view to ensure that your settings are correct, for example, that you are calling the procedure from the schema in which you created it. 
                           </p>
                           <p>If <code class="codeph">NULL</code> is returned, then you may have inadvertently set a client identifier. To clear the client identifier, run the following procedure:
                           </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SESSION.CLEAR_IDENTIFIER;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG213"></a><a id="DBSEG212"></a><div class="props_rev_3"><a id="GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83" name="GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83"></a><h5 id="DBSEG-GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83" class="sect5">Global Contexts for Database Users Who Move Between Applications</h5>
                     <div>
                        <p>A global application context can be used for database users who move between application, even when the applications have different access requirements.</p>
                        <p>To do so, you must include the <code class="codeph">username</code> parameter in the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure.
                        </p>
                        <p>This parameter specifies that the same schema be used for all sessions. </p>
                        <p>You can use the following <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> parameters: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">namespace</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">attribute</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">value</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">username</code> 
                              </p>
                           </li>
                        </ul>
                        <p>Oracle Database matches the <code class="codeph">username</code> value so that the other application can recognize the application context. This enables the user to move between applications.
                        </p>
                        <p>By omitting the <code class="codeph">client_id</code> setting, its value is <code class="codeph">NULL</code>, the default. This means that values can be seen by multiple sessions if the <code class="codeph">username</code> setting is the same for a database user who maintains the same context in different applications. For example, you can have a suite of applications that control user access with Oracle Virtual Private Database policies, with each user restricted to a job role. 
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83__CIHCFCIH">Example 11-8</a> demonstrates how to set the <code class="codeph">username</code> parameter so that a specific user can move between applications. The use of the <code class="codeph">username</code> parameter is indicated in <span class="bold">bold</span> typeface.
                        </p>
                        <div class="example" id="GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83__CIHCFCIH">
                           <p class="titleinexample">Example 11-8 Package for Global Application Context Values for Moving Between Applications</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE hr_ctx_pkg
  AS
    PROCEDURE set_hr_ctx(sec_level IN VARCHAR2, <span class="bold">user_name IN VARCHAR2);</span>
    PROCEDURE clear_hr_context;
   END;
  /
  CREATE OR REPLACE PACKAGE BODY hr_ctx_pkg
   AS
    PROCEDURE set_hr_ctx(sec_level IN VARCHAR2, <span class="bold">user_name IN VARCHAR2)</span>
    AS
     BEGIN
      DBMS_SESSION.SET_CONTEXT(
       namespace  =&gt; 'global_hr_ctx',
       attribute  =&gt; 'job_role',
       value      =&gt; sec_level,
<span class="bold">       username   =&gt; user_name);</span>
      END set_hr_ctx;
 
   PROCEDURE clear_hr_context
    AS
     BEGIN
      DBMS_SESSION.CLEAR_CONTEXT('global_hr_ctx');
     END clear_context;
  END;
 / 
</pre><p>Typically, you execute this procedure within a database application by embedding a call similar to the following example. Ensure that the value for the <code class="codeph">user_name</code> parameter (<code class="codeph">scott</code> in this case) is a valid database user name. 
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
 hr_ctx_pkg.set_hr_ctx('clerk', 'scott');
END;
</pre><p>A secure way to manage this type of global application context is within your applications, embed code to grant a secure application role to the user. This code should include <code class="codeph">EXECUTE</code> permissions on the trusted PL/SQL package that sets the application context. In other words, the application, not the user, will set the context for the user. 
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG214"></a><div class="props_rev_3"><a id="GUID-59436329-F584-4410-B6EE-B1A481278141" name="GUID-59436329-F584-4410-B6EE-B1A481278141"></a><h5 id="DBSEG-GUID-59436329-F584-4410-B6EE-B1A481278141" class="sect5">Global Application Context for Nondatabase Users</h5>
                     <div>
                        <p>When a nondatabase user starts a client session, the application server generates a client session ID. </p>
                        <p>A nondatabase user is a user who is not known to the database, such as a Web application user.</p>
                        <p>Once this ID is set on the application server, it must be passed to the database server side. You can do this by using the <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> procedure to set the client session ID. 
                        </p>
                        <p>To set the context, you can set the <code class="codeph">client_id</code> parameter in the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure, in a PL/SQL procedure on the server side. This enables you to manage the application context globally, yet each client sees only his or her assigned application context.
                        </p>
                        <p>The <code class="codeph">client_id</code> value is the key here to getting and setting the correct attributes for the global application context. Remember that the client identifier is controlled by the middle-tier application, and once set, it remains open until it is cleared.
                        </p>
                        <p>A typical way to manage this type of application context is to place the <code class="codeph">session_id</code> value (<code class="codeph">client_identifier</code>) in a cookie, and send it to the end user's HTML page so that is returned on the next request. A lookup table in the application should also keep client identifiers so that they are prevented from being reused for other users and to implement an end-user session time out.
                        </p>
                        <p>For nondatabase users, configure the following <code class="codeph">SET_CONTEXT</code> parameters:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">namespace</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">attribute</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">value</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">username</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">client_id</code></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></li>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="Next, you are ready to set the client session ID using a middle-tier application.">Step 2: Set the Client Session ID Using a Middle-Tier Application</a></li>
                              <li><a href="configuring-authentication.html#GUID-18333ED1-0FE1-4110-A3A5-EA9B1B989DA4" title="Client identifiers preserve user identity in middle tier systems; they also can be used independently of the global application context.">Using Client Identifiers to Identify Application Users Unknown to the Database</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG215"></a><div class="props_rev_3"><a id="GUID-32003F45-C354-49F4-9BC7-812E469B941B" name="GUID-32003F45-C354-49F4-9BC7-812E469B941B"></a><h5 id="DBSEG-GUID-32003F45-C354-49F4-9BC7-812E469B941B" class="sect5">Example: Package to Manage Global Application Context Values for Nondatabase Users</h5>
                     <div>
                        <p>The <code class="codeph">CREATE PACKAGE</code> statement can manage global application context values for nondatabase users. 
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-32003F45-C354-49F4-9BC7-812E469B941B__CIHIEJHD">Example 11-9</a> shows how to create a package that manages this type of global application context. 
                        </p>
                        <div class="example" id="GUID-32003F45-C354-49F4-9BC7-812E469B941B__CIHIEJHD">
                           <p class="titleinexample">Example 11-9 Package to Manage Global Application Context Values for Nondatabase Users</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE hr_ctx_pkg  
  AS                         
   PROCEDURE set_session_id(session_id_p IN NUMBER); 
   PROCEDURE set_hr_ctx(sec_level_attr IN VARCHAR2,  
      sec_level_val IN VARCHAR2);    
   PROCEDURE clear_hr_session(session_id_p IN NUMBER); 
   PROCEDURE clear_hr_context;  
  END;     
/
  CREATE OR REPLACE PACKAGE BODY hr_ctx_pkg 
   AS                     
    session_id_global NUMBER;  
  PROCEDURE set_session_id(session_id_p IN NUMBER) 
   AS                     
   BEGIN   
    session_id_global := session_id_p; 
    DBMS_SESSION.SET_IDENTIFIER(session_id_p);
  END set_session_id; 
     
  PROCEDURE set_hr_ctx(sec_level_attr IN VARCHAR2,
     sec_level_val IN VARCHAR2) 
   AS     
   BEGIN      
    DBMS_SESSION.SET_CONTEXT(  
     namespace  =&gt; 'global_hr_ctx',  
     attribute  =&gt; sec_level_attr,
     value      =&gt; sec_level_val,
     username   =&gt; USER,
     client_id  =&gt; session_id_global); 
   END set_hr_ctx;  
        
  PROCEDURE clear_hr_session(session_id_p IN NUMBER)
   AS 
   BEGIN   
      DBMS_SESSION.SET_IDENTIFIER(session_id_p); 
      DBMS_SESSION.CLEAR_IDENTIFIER;  
   END clear_hr_session;   
   
  PROCEDURE clear_hr_context 
  AS       
  BEGIN            
   DBMS_SESSION.CLEAR_CONTEXT('global_hr_ctx', session_id_global);
  END clear_hr_context;  
 END;  
 /</pre><p>In this example: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">session_id_global NUMBER</code> creates the <code class="codeph">session_id_global</code> variable, which will hold the client session ID. The <code class="codeph">session_id_global</code> variable is referenced throughout the package definition, including the procedure that creates the global application context attributes and assigns them values. This means that the global application context values will always be associated with this particular session ID.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PROCEDURE set_session_id ... END set_session_id</code> creates the <code class="codeph">set_session_id</code> procedure, which writes the client session ID to the <code class="codeph">session_id_global</code> variable. 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PROCEDURE set_hr_ctx ... END set_hr_ctx</code> creates the <code class="codeph">set_hr_ctx</code> procedure, which creates global application context attributes and enables you to assign values to these attributes. Within this procedure: 
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">username   =&gt; USER</code> specifies the <code class="codeph">username</code> value. This example sets it by calling the Oracle Database-supplied <code class="codeph">USER</code> function, which adds the session owner from the context retrieval process. The <code class="codeph">USER</code> function ensures that only the user who set the application context can access the context. See <a href="../sqlrf/USER.html#SQLRF06156" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">USER</code> function.
                                       </p>
                                       <p>If you had specified <code class="codeph">NULL</code> (the default for the <code class="codeph">username</code> parameter), then any user can access the context. 
                                       </p>
                                       <p>Setting both the <code class="codeph">username</code> and <code class="codeph">client_id</code> values enables two scenarios. For lightweight users, set the <code class="codeph">username</code> parameter to a connection pool owner (for example, <code class="codeph">APPS_USER</code>), and then set <code class="codeph">client_id</code> to the client session ID. If you want to use a stateless Web session, set the <code class="codeph">user_name</code> parameter to the same database user who has logged in, and ensure that this user keeps the same client session ID. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" title="The DBMS_SESSION.SYS_CONTEXT procedure provides the client_id and username parameters, to be used for global application contexts.">DBMS_SESSION.SET_CONTEXT username and client_id Parameters</a> for an explanation of how different <code class="codeph">username</code> and <code class="codeph">client_id</code> settings work.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">client_id  =&gt; session_id_global</code> specifies <code class="codeph">client_id</code> value. This example sets it to the <code class="codeph">session_id_global</code> variable. This associates the context settings defined here with a specific client session ID, that is, the one that is set when you run the <code class="codeph">set_session_id</code> procedure. If you specify the <code class="codeph">client_id</code> parameter default, <code class="codeph">NULL</code>, then the global application context settings could be used by any session. 
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><code class="codeph">PROCEDURE clear_hr_session ... END clear_hr_session</code> creates the <code class="codeph">clear_hr_session</code> procedure to clear the client session identifier. The <code class="codeph">AS</code> clause sets it to ensure that you are clearing the correct session ID, that is, the one stored in variable <code class="codeph">session_id_p</code> defined in the <code class="codeph">CREATE OR REPLACE PACKAGE BODY</code> <code class="codeph">hr_ctx_pkg</code> procedure.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PROCEDURE clear_hr_context ... END clear_hr_context</code> creates the <code class="codeph">clear_hr_context</code> procedure, so that you can clear the context settings for the current user session, which were defined by the <code class="codeph">global_hr_ctx</code> variable. See <a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" title="The application context exists within memory, so when the user exits a session, you must clear the client_identifier context value.">Clearing Session Data When the Session Closes</a> for more information. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG216"></a><div class="props_rev_3"><a id="GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" name="GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76"></a><h5 id="DBSEG-GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" class="sect5">Clearing Session Data When the Session Closes</h5>
                     <div>
                        <p>The application context exists within memory, so when the user exits a session, you must clear the <code class="codeph">client_identifier</code> context value. 
                        </p>
                        <div class="section"> This releases memory and prevents other users from accidentally using any left over values.</div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To clear session data when a user exits a session, use either of the following methods in the server-side PL/SQL package:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="bold">Clearing the client identifier when a user exits a session.</span> Use the <code class="codeph">DBMS_SESSION.CLEAR_IDENTIFIER</code> procedure. For example: 
                                       </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_IDENTIFIER;
</pre></li>
                                    <li>
                                       <p><span class="bold">Continuing the session but still clearing the context.</span> If you want the session to continue, but you still need to clear the context, use the <code class="codeph">DBMS_SESSION.CLEAR_CONTEXT</code> or the <code class="codeph">DBMS_SESSION.CLEAR_ALL_CONTEXT</code> procedure. For example:
                                       </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_CONTEXT('my_ctx', 'my_attribute');
</pre><p>The <code class="codeph">CLEAR_CONTEXT</code> procedure clears the context for the current user. To clear the context values for all users, for example, when you need to shut down the application server, use the <code class="codeph">CLEAR_ALL_CONTEXT</code> procedure. 
                                       </p>
                                       <p>Global application context values are available until they are cleared, so you should use <code class="codeph">CLEAR_CONTEXT</code> or <code class="codeph">CLEAR_ALL_CONTEXT</code> to ensure that other sessions do not have access to these values. Be aware that any changes in the context value are reflected immediately and subsequent calls to access the value through the <code class="codeph">SYS_CONTEXT</code> function will return the most recent value.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="The DBMS_SESSION PL/SQL package to manages global application contexts.">PL/SQL Package to Manage a Global Application Context</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG70785"></a><div class="props_rev_3"><a id="GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" name="GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15"></a><h4 id="DBSEG-GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" class="sect4">Embedding Calls in Middle-Tier Applications to Manage the Client Session ID</h4>
                  <div>
                     <p>You can embed calls in middle-tier applications to manage client session IDs. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9">About Managing Client Session IDs Using a Middle-Tier Application</a><br>The application server generates the client session ID. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D">Step 1: Retrieve the Client Session ID Using a Middle-Tier Application</a><br>When a user starts a client session, the application server generates a client session ID. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7">Step 2: Set the Client Session ID Using a Middle-Tier Application</a><br>Next, you are ready to set the client session ID using a middle-tier application. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE">Step 3: Clear the Session Data Using a Middle-Tier Application</a><br>The application context exists entirely within memory. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG217"></a><div class="props_rev_3"><a id="GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9" name="GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9"></a><h5 id="DBSEG-GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9" class="sect5">About Managing Client Session IDs Using a Middle-Tier Application</h5>
                     <div>
                        <p>The application server generates the client session ID. </p>
                        <p>From a middle-tier application, you can get, set, and clear the client session IDs. To do so, you can embed either Oracle Call Interface (OCI) calls or <code class="codeph">DBMS_SESSION</code> PL/SQL package procedures into the middle-tier application code. 
                        </p>
                        <p>The application authenticates the user, sets the client identifier, and sets it in the current session. The PL/SQL package <code class="codeph">SET_CONTEXT</code> sets the <code class="codeph">client_identifier</code> value in the application context. 
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-59436329-F584-4410-B6EE-B1A481278141" title="When a nondatabase user starts a client session, the application server generates a client session ID.">Global Application Context for Nondatabase Users</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="You can embed calls in middle-tier applications to manage client session IDs.">Embedding Calls in Middle-Tier Applications to Manage the Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG77851"></a><div class="props_rev_3"><a id="GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D" name="GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D"></a><h5 id="DBSEG-GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D" class="sect5">Step 1: Retrieve the Client Session ID Using a Middle-Tier Application</h5>
                     <div>
                        <p>When a user starts a client session, the application server generates a client session ID. </p>
                        <div class="section">
                           <p>You can retrieve this ID for use in authenticating the user's access. </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To retrieve this client ID, use the <code class="codeph">OCIStmtExecute</code> call with any of the following statements:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">SELECT SYS_CONTEXT('userenv', 'client_identifier') FROM DUAL;</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SELECT CLIENT_IDENTIFIER from V$SESSION;</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SELECT value FROM session_context WHERE attribute='CLIENT_IDENTIFIER';</code></p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>For example, to use the <code class="codeph">OCIStmtExecute</code> call to retrieve a client session ID value:
                           </p><pre class="pre codeblock"><code>oratext    clientid[31];  
 OCIDefine  *defnp1 = (OCIDefine *) 0;
 OCIStmt    *statementhndle;
 oratext    *selcid = (oratext *)"SELECT SYS_CONTEXT('userenv',
            'client_identifier') FROM  DUAL";  

OCIStmtPrepare(statementhndle, errhp, selcid,
  (ub4) strlen((char *) selcid), (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);

OCIDefineByPos(statementhndle, &amp;defnp1, errhp, 1, (dvoid *)clientid, 31,
  SQLT_STR, (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, OCI_DEFAULT);

OCIStmtExecute(servhndle, statementhndle, errhp, (ub4) 1, (ub4) 0,
 (CONST OCISnapshot *) NULL, (OCISnapshot *) NULL, OCI_DEFAULT);

  printf("CLIENT_IDENTIFIER = %s \n", clientid);</code></pre><p>In this example:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">oratext</code>, <code class="codeph">OCIDefine</code>, <code class="codeph">OCIStmt</code>, and <code class="codeph">oratext</code> create variables to store the client session ID, reference call for <code class="codeph">OCIDefine</code>, the statement handle, and the <code class="codeph">SELECT</code> statement to use. 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtPrepar</code> prepares the statement <code class="codeph">selcid</code> for execution.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIDefineByPos</code> defines the output variable <code class="codeph">clientid</code> for client session ID.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtExecute</code> executes the statement in the <code class="codeph">selcid</code> variable. 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">printf</code> prints the formatted output for the retrieved client session ID. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="You can embed calls in middle-tier applications to manage client session IDs.">Embedding Calls in Middle-Tier Applications to Manage the Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG219"></a><div class="props_rev_3"><a id="GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" name="GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7"></a><h5 id="DBSEG-GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" class="sect5">Step 2: Set the Client Session ID Using a Middle-Tier Application</h5>
                     <div>
                        <p>Next, you are ready to set the client session ID using a middle-tier application. </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550">About Setting the Client Session ID Using a Middle-Tier Application</a><br>After you use the <code class="codeph">OCIStmtExecute</code> call to retrieve the client session ID, you are ready to set this ID.
                           </li>
                           <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6">Setting the Client Session ID Using a Middle-Tier Application</a><br>Oracle Call Interface or the <code class="codeph">DBMS_SESSION</code> PL/SQL package can set the client session ID using a middle-tier application.
                           </li>
                           <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6">Checking the Value of the Client Identifier</a><br>For both <code class="codeph">OCIAttrSet</code> and <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code>, you can check the value of the client identifier.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="You can embed calls in middle-tier applications to manage client session IDs.">Embedding Calls in Middle-Tier Applications to Manage the Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550" name="GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550"></a><h6 id="DBSEG-GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550" class="sect6">About Setting the Client Session ID Using a Middle-Tier Application</h6>
                        <div>
                           <p>After you use the <code class="codeph">OCIStmtExecute</code> call to retrieve the client session ID, you are ready to set this ID.
                           </p>
                           <p> The <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure in the server-side PL/SQL package then sets this session ID and optionally, overwrites the application context values.
                           </p>
                           <p>You must ensure that the middle-tier application code checks that the client session ID value (for example, the value written to <code class="codeph">user_id</code> in the previous examples) matches the <code class="codeph">client_id</code> setting defined in the server-side <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure. The sequence of calls on the application server side should be as follows: 
                           </p>
                           <ol>
                              <li>
                                 <p>Get the current client session ID. The session should already have this ID, but it is safer to ensure that it truly has the correct value.</p>
                              </li>
                              <li>
                                 <p>Clear the current client session ID. This prepares the application to service a request from a different end user.</p>
                              </li>
                              <li>
                                 <p>Set the new client session ID or the client session ID that has been assigned to the end user. This ensures that the session is using a different set of global application context values.</p>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="Next, you are ready to set the client session ID using a middle-tier application.">Step 2: Set the Client Session ID Using a Middle-Tier Application</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6" name="GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6"></a><h6 id="DBSEG-GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6" class="sect6">Setting the Client Session ID Using a Middle-Tier Application</h6>
                        <div>
                           <p>Oracle Call Interface or the <code class="codeph">DBMS_SESSION</code> PL/SQL package can set the client session ID using a middle-tier application.
                           </p>
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use either of the following methods to set the client session ID on the application server side:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="bold">Oracle Call Interface.</span> Set the <code class="codeph">OCI_ATTR_CLIENT_IDENTIFIER</code> attribute in an <code class="codeph">OCIAttrSet</code> OCI call. This attribute sets the client identifier in the session handle to track the end user identity.
                                          </p>
                                          <p>The following example shows how to use <code class="codeph">OCIAttrSet</code> with the <code class="codeph">ATTR_CLIENT_IDENTIFIER</code> parameter. The <code class="codeph">user_id</code> setting refers to a variable that stores the ID of the user who is logging on.
                                          </p><pre class="oac_no_warn" dir="ltr">OCIAttrSet((void *)session_handle, (ub4) OCI_HTYPE_SESSION, 
           (void *) user_id, (ub4)strlen(user_id),
           OCI_ATTR_CLIENT_IDENTIFIER, error_handle);
</pre></li>
                                       <li>
                                          <p><span class="bold">DBMS_SESSION package.</span> Use the <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> procedure to set the client identifier for the global application context. For example, assuming you are storing the ID of the user logging on in a variable called <code class="codeph">user_id</code>, you would enter the following line into the middle-tier application code: 
                                          </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_IDENTIFIER(user_id);</pre></li>
                                    </ul>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6__GUID-D0E82562-A265-4EC0-B54D-43FA6D908D03">
                                 <p class="notep1">Note:</p>
                                 <p>When the application generates a session ID for use as a <code class="codeph">CLIENT_IDENTIFIER</code>, then the session ID must be suitably random and protected over the network by encryption. If the session ID is not random, then a malicious user could guess the session ID and access the data of another user. If the session ID is not encrypted over the network, then a malicious user could retrieve the session ID and access the connection.
                                 </p>
                                 <p>You can encrypt the session ID by using network data encryption. See <a href="configuring-network-data-encryption-and-integrity.html#GUID-7F12066A-2BA1-476C-809B-BB95A3F727CF" title="You can configure native Oracle Net Services data encryption and data integrity for both servers and clients.">Configuring Oracle Database Native Network Encryption and&nbsp;Data Integrity</a> for more information. 
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="Next, you are ready to set the client session ID using a middle-tier application.">Step 2: Set the Client Session ID Using a Middle-Tier Application</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6" name="GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6"></a><h6 id="DBSEG-GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6" class="sect6">Checking the Value of the Client Identifier</h6>
                        <div>
                           <p>For both <code class="codeph">OCIAttrSet</code> and <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code>, you can check the value of the client identifier.
                           </p>
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>To check the value of the client identifier, use one of the of the following approaches:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>To check it using the <code class="codeph">SYS_CONTEXT</code> function:
                                          </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('userenv', 'client_identifier') FROM DUAL;
</pre></li>
                                       <li>
                                          <p>To check it by querying the <code class="codeph">V$SESSION</code> view:
                                          </p><pre class="oac_no_warn" dir="ltr">SELECT CLIENT_IDENTIFIER from V$SESSION;</pre></li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="Next, you are ready to set the client session ID using a middle-tier application.">Step 2: Set the Client Session ID Using a Middle-Tier Application</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="DBSEG220"></a><div class="props_rev_3"><a id="GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE" name="GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE"></a><h5 id="DBSEG-GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE" class="sect5">Step 3: Clear the Session Data Using a Middle-Tier Application</h5>
                     <div>
                        <p>The application context exists entirely within memory. </p>
                        <div class="section">
                           <p>When the user exits a session, you must clear the context for the <code class="codeph">client_identifier</code> value. This releases memory and prevents other users from accidentally using any left over values
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To clear session data when a user exits a session, use either of the following methods in the middle-tier application code:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="bold">Clearing the client identifier when a user exits a session.</span> Use the <code class="codeph">DBMS_SESSION.CLEAR_IDENTIFIER</code> procedure. For example: 
                                       </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_IDENTIFIER;
</pre></li>
                                    <li>
                                       <p><span class="bold">Continuing the session but still clearing the context.</span> If you want the session to continue, but you still need to clear the context, use the <code class="codeph">DBMS_SESSION.CLEAR_CONTEXT</code> or the <code class="codeph">DBMS_SESSION.CLEAR_ALL_CONTEXT</code> procedure. For example:
                                       </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_CONTEXT(<span class="italic">namespace</span>, <span class="italic">client_identifier</span>, <span class="italic">attribute</span>);
</pre><p>The <code class="codeph">CLEAR_CONTEXT</code> procedure clears the context for the current user. To clear the context values for all users, for example, when you need to shut down the application server, use the <code class="codeph">CLEAR_ALL_CONTEXT</code> procedure. 
                                       </p>
                                       <p>Global application context values are available until they are cleared, so you should use <code class="codeph">CLEAR_CONTEXT</code> or <code class="codeph">CLEAR_ALL_CONTEXT</code> to ensure that other sessions do not have access to these values.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="You can embed calls in middle-tier applications to manage client session IDs.">Embedding Calls in Middle-Tier Applications to Manage the Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG79745"></a><div class="props_rev_3"><a id="GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" name="GUID-BF276A5E-BC14-4B49-A02A-2EC984325805"></a><h4 id="DBSEG-GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" class="sect4">Tutorial: Creating a Global Application Context That Uses a Client Session ID</h4>
                  <div>
                     <p>This tutorial demonstrates how you can create a global application context that uses a client session ID.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C">About This Tutorial</a><br>This tutorial shows how to create a global application context that uses a client session ID for a lightweight user application.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9">Step 1: Create User Accounts</a><br>A security administrator will manage the application context and its package, and a user account will own the connection pool.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-72898F83-8073-407E-ABE1-99FDB6B83500">Step 2: Create the Global Application Context</a><br>Next, you are ready to create the global application context.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951">Step 3: Create a Package for the Global Application Context</a><br>The PL/SQL package will manage the global application context that you created.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-445250D8-B9F1-4221-A541-A8502110154F">Step 4: Test the Newly Created Global Application Context</a><br>At this stage, you are ready to explore how this global application context and session ID settings work.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F">Step 5: Modify the Session ID and Test the Global Application Context Again</a><br>Next, clear and then modify the session ID and test the global application context again.
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-749E5C36-1D7F-44F8-A843-351B69483D3C">Step 6: Remove the Components of This Tutorial</a><br>If you no longer need the components of this tutorial, then you can remove them.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG561"></a><div class="props_rev_3"><a id="GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C" name="GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C"></a><h5 id="DBSEG-GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C" class="sect5">About This Tutorial</h5>
                     <div>
                        <p>This tutorial shows how to create a global application context that uses a client session ID for a lightweight user application.</p>
                        <p>It demonstrates how to control nondatabase user access by using a connection pool. If you are using a multitenant environment, then this tutorial applies to the current PDB only. </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG221"></a><div class="props_rev_3"><a id="GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9" name="GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9"></a><h5 id="DBSEG-GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9" class="sect5">Step 1: Create User Accounts</h5>
                     <div>
                        <p>A security administrator will manage the application context and its package, and a user account will own the connection pool.</p>
                        <ol>
                           <li class="stepexpand"><span>Log on to SQL*Plus as <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege. </span><div><pre class="oac_no_warn" dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>In a multitenant environment, connect to the appropriate PDB. </span><div>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT SYS@my_pdb AS SYSDBA
Enter password: <span class="italic">password</span>
</pre><p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create the local user account <code class="codeph">sysadmin_ctx</code>, who will administer the global application context.</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER sysadmin_ctx IDENTIFIED BY <span class="italic">password</span> CONTAINER = CURRENT;
GRANT CREATE SESSION, CREATE ANY CONTEXT, CREATE PROCEDURE TO sysadmin_ctx;

GRANT EXECUTE ON DBMS_SESSION TO sysadmin_ctx;
</pre><p>Follow the guidelines in <a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">Minimum Requirements for Passwords</a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create the local database account <code class="codeph">apps_user</code>, who will own the connection pool.</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER apps_user IDENTIFIED BY <span class="italic">password</span> CONTAINER = CURRENT;
GRANT CREATE SESSION TO apps_user;
</pre><p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. 
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG222"></a><div class="props_rev_3"><a id="GUID-72898F83-8073-407E-ABE1-99FDB6B83500" name="GUID-72898F83-8073-407E-ABE1-99FDB6B83500"></a><h5 id="DBSEG-GUID-72898F83-8073-407E-ABE1-99FDB6B83500" class="sect5">Step 2: Create the Global Application Context</h5>
                     <div>
                        <p>Next, you are ready to create the global application context.</p>
                        <ol>
                           <li class="stepexpand"><span>Log on as the security administrator <code class="codeph">sysadmin_ctx</code>. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT sysadmin_ctx <span class="italic">-- Or, CONNECT sysadmin_ctx@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create the <code class="codeph">cust_ctx</code> global application context. </span><div><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT global_cust_ctx USING cust_ctx_pkg ACCESSED GLOBALLY;
</pre><p>The <code class="codeph">cust_ctx</code> context is created and associated with the schema of the security administrator <code class="codeph">sysadmin_ctx</code>. However, the <code class="codeph">SYS</code> schema owns the application context.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG223"></a><div class="props_rev_3"><a id="GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951" name="GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951"></a><h5 id="DBSEG-GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951" class="sect5">Step 3: Create a Package for the Global Application Context</h5>
                     <div>
                        <p>The PL/SQL package will manage the global application context that you created.</p>
                        <ol>
                           <li class="stepexpand"><span>As <code class="codeph">sysadmin_ctx</code>, create the following PL/SQL package:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE cust_ctx_pkg
  AS
   PROCEDURE set_session_id(session_id_p IN NUMBER); 
   PROCEDURE set_cust_ctx(sec_level_attr IN VARCHAR2, 
     sec_level_val IN VARCHAR2);
   PROCEDURE clear_hr_session(session_id_p IN NUMBER);
   PROCEDURE clear_hr_context;
  END;
 /
CREATE OR REPLACE PACKAGE BODY cust_ctx_pkg
  AS
  session_id_global NUMBER;
 
 PROCEDURE set_session_id(session_id_p IN NUMBER) 
  AS
  BEGIN
   session_id_global := session_id_p;
   DBMS_SESSION.SET_IDENTIFIER(session_id_p);
 END set_session_id;
 
 PROCEDURE set_cust_ctx(sec_level_attr IN VARCHAR2, sec_level_val IN VARCHAR2)
  AS
  BEGIN
   DBMS_SESSION.SET_CONTEXT(
    namespace  =&gt; 'global_cust_ctx',
    attribute  =&gt; sec_level_attr,
    value      =&gt; sec_level_val,
    username   =&gt; USER, <span class="italic">-- Retrieves the session user, in this case, apps_user</span>
    client_id  =&gt; session_id_global);
  END set_cust_ctx;
 
  PROCEDURE clear_hr_session(session_id_p IN NUMBER)
   AS
   BEGIN
     DBMS_SESSION.SET_IDENTIFIER(session_id_p);
     DBMS_SESSION.CLEAR_IDENTIFIER;
   END clear_hr_session;

 PROCEDURE clear_hr_context
  AS
  BEGIN
   DBMS_SESSION.CLEAR_CONTEXT('global_cust_ctx', session_id_global);
  END clear_hr_context;
 END;
/
</pre><p>For a detailed explanation of how this type of package works, see <a href="using-application-contexts-to-retrieve-user-information.html#GUID-32003F45-C354-49F4-9BC7-812E469B941B__CIHIEJHD">Example 11-9</a>. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Grant <code class="codeph">EXECUTE</code> privileges on the <code class="codeph">cust_ctx_pkg</code> package to the connection pool owner, <code class="codeph">apps_user</code>.</span><div><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON cust_ctx_pkg TO apps_user;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG952"></a><div class="props_rev_3"><a id="GUID-445250D8-B9F1-4221-A541-A8502110154F" name="GUID-445250D8-B9F1-4221-A541-A8502110154F"></a><h5 id="DBSEG-GUID-445250D8-B9F1-4221-A541-A8502110154F" class="sect5">Step 4: Test the Newly Created Global Application Context</h5>
                     <div>
                        <p>At this stage, you are ready to explore how this global application context and session ID settings work.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log on to SQL*Plus as the connection pool owner, user <code class="codeph">apps_user</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">CONNECT apps_user -- <span class="italic">Or, CONNECT apps_user@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></li>
                              <li id="GUID-445250D8-B9F1-4221-A541-A8502110154F__CIHIGCDB">
                                 <p>When the connection pool user logs on, the application sets the client session identifier as follows:</p><pre class="oac_no_warn" dir="ltr">BEGIN
 sysadmin_ctx.cust_ctx_pkg.set_session_id(34256);
END;
/
</pre></li>
                              <li>
                                 <p>Test the value of the client session identifier.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Set the session ID: </p><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.set_session_id(34256);
</pre></li>
                                    <li>
                                       <p>Check the session ID: </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('userenv', 'client_identifier') FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT('USERENV','CLIENT_IDENTIFIER')
--------------------------------------------------
34256
</pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Set the global application context as follows:</p><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.set_cust_ctx('Category', 'Gold Partner');
EXEC sysadmin_ctx.cust_ctx_pkg.set_cust_ctx('Benefit Level', 'Highest');
</pre><p>(In a real-world scenario, the middle-tier application would set the global application context values, similar to how the client session identifier was set in Step <a href="using-application-contexts-to-retrieve-user-information.html#GUID-445250D8-B9F1-4221-A541-A8502110154F__CIHIGCDB">2</a>.)
                                 </p>
                              </li>
                              <li>
                                 <p>Enter the following <code class="codeph">SELECT SYS_CONTEXT</code> statement to check that the settings were successful: 
                                 </p><pre class="oac_no_warn" dir="ltr">col category format a13
col benefit_level format a14

SELECT SYS_CONTEXT('global_cust_ctx', 'Category') category, SYS_CONTEXT('global_cust_ctx', 'Benefit Level') benefit_level FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">CATEGORY       BENEFIT_LEVEL
-------------  --------------
Gold Partner   Highest
</pre></li>
                           </ol>
                           <p>What <code class="codeph">apps_user</code> has done here, within the client session 34256, is set a global application context on behalf of a nondatabase user. This context sets the <code class="codeph">Category</code> and <code class="codeph">Benefit Level</code> <code class="codeph">DBMS_SESSION.SET_CONTEXT attributes</code> to be <code class="codeph">Gold Partner</code> and <code class="codeph">Highest</code>, respectively. The context exists only for user <code class="codeph">apps_user</code> with client ID 34256. When a nondatabase user logs in, behind the scenes, he or she is really logging on as the connection pool user <code class="codeph">apps_user</code>. Hence, the <code class="codeph">Gold Partner</code> and <code class="codeph">Highest</code> context values are available to the nondatabase user.
                           </p>
                           <p>Suppose the user had been a database user and could log in without using the intended application. (For example, the user logs in using SQL*Plus.) Because the user has not logged in through the connection pool user <code class="codeph">apps_user</code>, the global application context appears empty to our errant user. This is because the context was created and set under the <code class="codeph">apps_user</code> session. If the user runs the <code class="codeph">SELECT SYS_CONTEXT</code> statement, then the following output appears: 
                           </p><pre class="oac_no_warn" dir="ltr">CATEGORY       BENEFIT_LEVEL
-------------  --------------</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1051"></a><div class="props_rev_3"><a id="GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F" name="GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F"></a><h5 id="DBSEG-GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F" class="sect5">Step 5: Modify the Session ID and Test the Global Application Context Again</h5>
                     <div>
                        <p>Next, clear and then modify the session ID and test the global application context again.</p>
                        <ol>
                           <li class="stepexpand"><span>As user <code class="codeph">apps_user</code>, clear the session ID.</span><div><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.clear_hr_session(34256);
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Check the global application context settings again. </span><div><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('global_cust_ctx', 'Category') category, SYS_CONTEXT('global_cust_ctx', 'Benefit Level') benefit_level FROM DUAL;

CATEGORY       BENEFIT_LEVEL
-------------  --------------
</pre><p>Because <code class="codeph">apps_user</code> has cleared the session ID, the global application context settings are no longer available. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Restore the session ID to 34256, and then check the context values.</span><div><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.set_session_id(34256);

SELECT SYS_CONTEXT('global_cust_ctx', 'Category') category, SYS_CONTEXT('global_cust_ctx', 'Benefit Level') benefit_level FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">CATEGORY       BENEFIT_LEVEL
-------------  --------------
Gold Partner   Highest
</pre><p>As you can see, resetting the session ID to 34256 brings the application context values back again. To summarize, the global application context must be set only <span class="italic">once</span> for this user, but the client session ID must be set <span class="italic">each time</span> the user logs on.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Now try clearing and then checking the global application context values.</span><div><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.clear_hr_context;

SELECT SYS_CONTEXT('global_cust_ctx', 'Category') category, SYS_CONTEXT('global_cust_ctx', 'Benefit Level') benefit_level FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">CATEGORY       BENEFIT_LEVEL
-------------  --------------
</pre><p>At this stage, the client session ID, 34256 is still in place, but the application context settings no longer exist. This enables you to continue the session for this user but without using the previously set application context values.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG225"></a><div class="props_rev_3"><a id="GUID-749E5C36-1D7F-44F8-A843-351B69483D3C" name="GUID-749E5C36-1D7F-44F8-A843-351B69483D3C"></a><h5 id="DBSEG-GUID-749E5C36-1D7F-44F8-A843-351B69483D3C" class="sect5">Step 6: Remove the Components of This Tutorial</h5>
                     <div>
                        <p>If you no longer need the components of this tutorial, then you can remove them.</p>
                        <ol>
                           <li class="stepexpand"><span>Connect as <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@mypdb AS SYSDBA</span>
Enter password: <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Drop the global application context. </span><div><pre class="oac_no_warn" dir="ltr">DROP CONTEXT global_cust_ctx;
</pre><p>Remember that even though <code class="codeph">sysadmin_ctx</code> created the global application context, it is owned by the <code class="codeph">SYS</code> schema. 
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Drop the two sample users.</span><div><pre class="oac_no_warn" dir="ltr">DROP USER sysadmin_ctx CASCADE;
DROP USER apps_user;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="This tutorial demonstrates how you can create a global application context that uses a client session ID.">Tutorial: Creating a Global Application Context That Uses a Client Session ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG226"></a><div class="props_rev_3"><a id="GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" name="GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61"></a><h4 id="DBSEG-GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" class="sect4">Global Application Context Processes</h4>
                  <div>
                     <p>A simple global application context uses a database user account create the user session; a global application context is for lightweight users.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D">Simple Global Application Context Process</a><br>In a simple global application context process, the application uses a database user to create a user session. 
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5">Global Application Context Process for Lightweight Users</a><br>You can set a global application contexts for lightweight users. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="You can use a global application context to access application values across database sessions, including an Oracle Real Application Clusters environment.">Global Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG227"></a><div class="props_rev_3"><a id="GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D" name="GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D"></a><h5 id="DBSEG-GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D" class="sect5">Simple Global Application Context Process</h5>
                     <div>
                        <p>In a simple global application context process, the application uses a database user to create a user session. </p>
                        <p>The value for the context attribute of a simple global application context process can be retrieved from a <code class="codeph">SELECT</code> statement.
                        </p>
                        <p>Consider the application server, <code class="codeph">AppSvr</code>, which has assigned the client identifier <code class="codeph">12345</code> to client <code class="codeph">SCOTT</code>. The <code class="codeph">AppSvr</code> application uses the <code class="codeph">SCOTT</code> user to create a session. (In other words, it is not a connection pool.) The value assigned to the context attribute can come from anywhere, for example, from running a <code class="codeph">SELECT</code> statement on a table that holds the responsibility codes for users. When the application context is populated, it is stored in memory. As a result, any action that needs the responsibility code can access it quickly with a <code class="codeph">SYS_CONTEXT</code> call, without the overhead of accessing a table. The only advantage of a global context over a local context in this case is if <code class="codeph">SCOTT</code> were changing applications frequently and used the same context in each application.
                        </p>
                        <p>The following steps show how the global application context process sets the client identifier for <code class="codeph">SCOTT</code>:
                        </p>
                        <ol>
                           <li>
                              <p>The administrator creates a global context namespace by using the following statement:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE CONTEXT hr_ctx USING hr.init ACCESSED GLOBALLY;
</pre></li>
                           <li>
                              <p>The administrator creates a PL/SQL package for the <code class="codeph">hr_ctx</code> application context to indicate that, for this client identifier, there is an application context called <code class="codeph">responsibility</code> with a value of <code class="codeph">13</code> in the <code class="codeph">HR</code> namespace.:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE hr.init 
 AS
 BEGIN
  DBMS_SESSION.SET_CONTEXT(
    namespace =&gt; 'hr_ctx', 
    attribute =&gt; 'responsibility', 
    value     =&gt; '13', 
    username  =&gt; 'SCOTT', 
    client_id =&gt; '12345' );
 END;
/
</pre><p>This PL/SQL procedure is stored in the <code class="codeph">HR</code> database schema, but typically it is stored in the schema of the security administrator. 
                              </p>
                           </li>
                           <li>
                              <p>The AppSvr application issues the following command to indicate the connecting client identity each time <code class="codeph">scott</code> uses <code class="codeph">AppSvr</code> to connect to the database:
                              </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SESSION.SET_IDENTIFIER('12345');
</pre></li>
                           <li>
                              <p>When there is a <code class="codeph">SYS_CONTEXT('hr_ctx','responsibility')</code> call within the database session, the database matches the client identifier, <code class="codeph">12345</code>, to the global context, and then returns the value <code class="codeph">13</code>. 
                              </p>
                           </li>
                           <li>
                              <p>When exiting this database session, <code class="codeph">AppSvr</code> clears the client identifier by issuing the following procedure:
                              </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SESSION.CLEAR_IDENTIFIER( );
</pre></li>
                           <li>
                              <p>To release the memory used by the application context, <code class="codeph">AppSvr</code> issues the following procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_CONTEXT('hr_ctx', '12345');
</pre><p><code class="codeph">CLEAR_CONTEXT</code> is needed when the user session is no longer active, either on an explicit logout, timeout, or other conditions determined by the <code class="codeph">AppSvr</code> application.
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D__GUID-7E72A1CA-043A-4F5E-BC90-53729E089D68">
                           <p class="notep1">Note:</p>
                           <p>After a client identifier in a session is cleared, it becomes a <code class="codeph">NULL</code> value. This implies that subsequent <code class="codeph">SYS_CONTEXT</code> calls only retrieve application contexts with <code class="codeph">NULL</code> client identifiers, until the client identifier is set again using the <code class="codeph">SET_IDENTIFIER</code> interface.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" title="A simple global application context uses a database user account create the user session; a global application context is for lightweight users.">Global Application Context Processes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG228"></a><div class="props_rev_3"><a id="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5" name="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5"></a><h5 id="DBSEG-GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5" class="sect5">Global Application Context Process for Lightweight Users</h5>
                     <div>
                        <p>You can set a global application contexts for lightweight users. </p>
                        <p>You can configure this access so that when other users log in, they cannot access the global application context. </p>
                        <p>The following steps show the global application context process for a lightweight user application. The lightweight user, <code class="codeph">robert</code>, is not known to the database through the application. 
                        </p>
                        <ol>
                           <li>
                              <p>The administrator creates the global context namespace by using the following statement:</p><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT hr_ctx USING hr.init ACCESSED GLOBALLY;
</pre></li>
                           <li>
                              <p>The <code class="codeph">HR</code> application server, <code class="codeph">AppSvr</code>, starts and then establishes multiple connections to the <code class="codeph">HR</code> database as the <code class="codeph">appsmgr</code> user.
                              </p>
                           </li>
                           <li>
                              <p>User <code class="codeph">robert</code> logs in to the <code class="codeph">HR</code> application server.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AppSvr</code> authenticates <code class="codeph">robert</code> to the application. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AppSvr</code> assigns a temporary session ID (or uses the application user ID), <code class="codeph">12345</code>, for this connection. 
                              </p>
                           </li>
                           <li>
                              <p>The session ID is returned to the Web browser used by <code class="codeph">robert</code> as part of a cookie or is maintained by <code class="codeph">AppSvr</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AppSvr</code> initializes the application context for this client by calling the <code class="codeph">hr.init</code> package, which issues the following statements: 
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_CONTEXT( 'hr_ctx', 'id', 'robert', 'APPSMGR', 12345 );
DBMS_SESSION.SET_CONTEXT( 'hr_ctx', 'dept', 'sales', 'APPSMGR', 12345 );
</pre></li>
                           <li>
                              <p><code class="codeph">AppSvr</code> assigns a database connection to this session and initializes the session by issuing the following statement:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_IDENTIFIER( 12345 );
</pre></li>
                           <li>
                              <p>All <code class="codeph">SYS_CONTEXT</code> calls within this database session return application context values that belong only to the client session. 
                              </p>
                              <p>For example, <code class="codeph">SYS_CONTEXT('hr','id')</code> returns the value <code class="codeph">robert</code>.
                              </p>
                           </li>
                           <li>
                              <p>When finished with the session, <code class="codeph">AppSvr</code> issues the following statement to clean up the client identity:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_IDENTIFIER ( );
</pre></li>
                        </ol>
                        <p>Even if another user logged in to the database, this user cannot access the global context set by <code class="codeph">AppSvr</code>, because <code class="codeph">AppSvr</code> specified that only the application with user <code class="codeph">APPSMGR</code> logged in can see it. If <code class="codeph">AppSvr</code> used the following, then any user session with client ID set to <code class="codeph">12345</code> can see the global context:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_CONTEXT( 'hr_ctx', 'id', 'robert', NULL , 12345 );
DBMS_SESSION.SET_CONTEXT( 'hr_ctx', 'dept', 'sales', NULL , 12345 );
</pre><p>Setting <code class="codeph">USERNAME</code> to <code class="codeph">NULL</code> enables different users to share the same context. 
                        </p>
                        <div class="infoboxnote" id="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5__GUID-57539F15-8DBA-42B6-838F-4FAFF1F6EDBD">
                           <p class="notep1">Note:</p>
                           <p>Be aware of the security implication of different settings of the global context. <code class="codeph">NULL</code> in the user name means that any user can access the global context. A <code class="codeph">NULL</code> client ID in the global context means that a session with an uninitialized client ID can access the global context. To ensure that only the user who has logged on can access the session, specify <code class="codeph">USER</code> instead of <code class="codeph">NULL</code>.
                           </p>
                        </div>
                        <p>You can query the client identifier set in the session as follows:</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('USERENV','CLIENT_IDENTIFIER') FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT('USERENV','CLIENT_IDENTIFIER')
-------------------------------------------------
12345
</pre><p>A security administrator can see which sessions have the client identifier set by querying the <code class="codeph">V$SESSION</code> view for the <code class="codeph">CLIENT_IDENTIFIER</code> and <code class="codeph">USERNAME</code>, for example: 
                        </p><pre class="oac_no_warn" dir="ltr">COL client_identifier format a18
SELECT CLIENT_IDENTIFIER, USERNAME from V$SESSION;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">CLIENT_IDENTIFIER   USERNAME
------------------  --------
12345               APPSMGR
</pre><p>To check the amount of global context area (in bytes) being used, use the following query: </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT('USERENV','GLOBAL_CONTEXT_MEMORY') FROM DUAL;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT('USERENV','GLOBAL_CONTEXT_MEMORY')
----------------------------------------------
584</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5__GUID-6F2C5DD2-DEAA-4731-B38B-7E3CC33D0308">
                           <p class="notep1">See Also:</p>
                           <p>For more information about using the <code class="codeph">CLIENT_IDENTIFIER</code> predefined attribute of the <code class="codeph">USERENV</code> application context:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-authentication.html#GUID-7BE66BDB-CDC9-4589-904B-60A24A9C74B8" title="The CLIENT_IDENTIFIER predefined attribute of the built-in application context namespace, USERENV, captures the application user name for use with a global application context.">Use of the CLIENT_IDENTIFIER Attribute to Preserve User Identity</a></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/USERENV.html#SQLRF06157" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../lnoci/managing-scalable-platforms.html#LNOCI080" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" title="A simple global application context uses a database user account create the user session; a global application context is for lightweight users.">Global Application Context Processes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="DBSEG70748"></a><div class="props_rev_3"><a id="GUID-DD567E61-0D89-48D0-A0CB-47297461824F" name="GUID-DD567E61-0D89-48D0-A0CB-47297461824F"></a><h3 id="DBSEG-GUID-DD567E61-0D89-48D0-A0CB-47297461824F" class="sect3">Using Client Session-Based Application Contexts</h3>
               <div>
                  <p>A client session-based application context is stored in the User Global Area (UGA). </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-66E7658C-0DD5-4283-902B-787C4AA2742E">About Client Session-Based Application Contexts</a><br>Oracle Call Interface (OCI) functions can set and clear the User Global Area (UGA) user session information. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-63EC9C37-6415-43F1-BA98-7807D0458C57">Setting a Value in the CLIENTCONTEXT Namespace</a><br>Oracle Call Interface (OCI) can set the <code class="codeph">CLIENTCONTEXT</code> namespace. 
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD">Retrieving the CLIENTCONTEXT Namespace</a><br>You can use Oracle Call Interface to retrieve the <code class="codeph">CLIEINTCONTEXT</code> namespace.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F91C6512-F590-495A-92F9-D238B292AB11">Example: Retrieving a Client Session ID Value for Client Session-Based Contexts</a><br>The OCI <code class="codeph">OCIStmtExecute</code> call can retrieve client session ID values for client session-based contexts.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506">Clearing a Setting in the CLIENTCONTEXT Namespace</a><br>You can use Oracle Call Interface to clear the <code class="codeph">CLIENTCONTEXT</code> namespace.
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-E53BB503-2639-421C-8F90-0072D32BBE7F">Clearing All Settings in the CLIENTCONTEXT Namespace</a><br>You can use Oracle Call Interface (OCI) to clear the <code class="codeph">CLIENTCONTEXT</code> namespace.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG229"></a><div class="props_rev_3"><a id="GUID-66E7658C-0DD5-4283-902B-787C4AA2742E" name="GUID-66E7658C-0DD5-4283-902B-787C4AA2742E"></a><h4 id="DBSEG-GUID-66E7658C-0DD5-4283-902B-787C4AA2742E" class="sect4">About Client Session-Based Application Contexts</h4>
                  <div>
                     <p>Oracle Call Interface (OCI) functions can set and clear the User Global Area (UGA) user session information. </p>
                     <p>The advantage of this type of application context in a session-based application context is that an individual application can check for specific nondatabase user session data, rather than having the database perform this task. Another advantage is that the calls to set the application context value are included in the next call to the server, which improves performance. </p>
                     <p>However, be aware that application context security is compromised with a client session-based application context: any application user can set the client application context, and no check is performed in the database. </p>
                     <p>You configure the client session-based application context for the client application only. You do not configure any settings on the database server to which the client connects. Any application context settings in the database server do not affect the client session-based application context. </p>
                     <p>To configure a client session-based application context, use the <code class="codeph">OCIAppCtxSet</code> OCI function. A client session-based application context uses the <code class="codeph">CLIENTCONTEXT</code> namespace, updatable by any OCI client or by the existing <code class="codeph">DBMS_SESSION</code> package for application context. Oracle Database performs no privilege or package security checks for this type. 
                     </p>
                     <p>The <code class="codeph">CLIENTCONTEXT</code> namespace enables a single application transaction to both change the user context information and use the same user session handle to service the new user request. You can set or clear individual values for attributes in the <code class="codeph">CLIENTCONTEXT</code> namespace, or clear all their values.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>An OCI client uses the <code class="codeph">OCIAppCtx</code> function to set variable length data for the namespace, called <code class="codeph">OCISessionHandle</code>. The OCI network single, round-trip transport sends all the information to the server in one round-trip. On the server side, you can query the application context information by using the <code class="codeph">SYS_CONTEXT</code> SQL function on the namespace. For example: 
                           </p>
                        </li>
                        <li>
                           <p>A JDBC client uses the <code class="codeph">oracle.jdbc.internal.OracleConnection</code> function to achieve the same purposes. 
                           </p>
                        </li>
                     </ul>
                     <p>Any user can set, clear, or collect the information in the <code class="codeph">CLIENTCONTEXT</code> namespace, because it is not protected by package-based security.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-66E7658C-0DD5-4283-902B-787C4AA2742E__GUID-69368DEA-0A4E-4ED6-9A19-7E761B6A603C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../lnoci/managing-scalable-platforms.html#LNOCI3605" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for more information about client application contexts
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG60025"></a><div class="props_rev_3"><a id="GUID-63EC9C37-6415-43F1-BA98-7807D0458C57" name="GUID-63EC9C37-6415-43F1-BA98-7807D0458C57"></a><h4 id="DBSEG-GUID-63EC9C37-6415-43F1-BA98-7807D0458C57" class="sect4">Setting a Value in the CLIENTCONTEXT Namespace</h4>
                  <div>
                     <p>Oracle Call Interface (OCI) can set the <code class="codeph">CLIENTCONTEXT</code> namespace. 
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To set a value in the <code class="codeph">CLIENTCONTEXT</code> namespace, use the <code class="codeph">OCIAppCTXSet</code> command, in the following syntax:
                              </p><pre class="oac_no_warn" dir="ltr">err = OCIAppCtxSet((void *) <span class="italic">session_handle</span>,(dvoid *)"CLIENTCONTEXT",(ub4) 13,
                   (dvoid *)<span class="italic">attribute_name</span>, <span class="italic">length_of_attribute_name</span> 
                   (dvoid *)<span class="italic">attribute_value</span>, <span class="italic">length_of_attribute_value</span>, errhp,
                   OCI_DEFAULT);
</pre></li>
                        </ul>
                        <p>In this specification:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">session_handle</code></span> represents the <code class="codeph">OCISessionHandle</code> namespace.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">attribute_name</code></span> is the name of the attribute. For example, <code class="codeph">responsibility</code>, with a length of <code class="codeph">14</code>.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">attribute_value</code></span> is the value of the attribute. For example, <code class="codeph">manager</code>, with a length of <code class="codeph">7</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-63EC9C37-6415-43F1-BA98-7807D0458C57__GUID-4329F080-2FD1-4C87-A936-46FD859A5BF6">
                        <p class="notep1">See Also:</p><a href="../lnoci/managing-scalable-platforms.html#LNOCI080" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for details about the <code class="codeph">OCIAppCtx</code> function
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG97851"></a><div class="props_rev_3"><a id="GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD" name="GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD"></a><h4 id="DBSEG-GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD" class="sect4">Retrieving the CLIENTCONTEXT Namespace</h4>
                  <div>
                     <p>You can use Oracle Call Interface to retrieve the <code class="codeph">CLIEINTCONTEXT</code> namespace.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To retrieve the <code class="codeph">CLIENTCONTEXT</code> namespace, use the <code class="codeph">OCIStmtExecute</code> call with either of the following statements:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">SELECT SYS_CONTEXT('CLIENTCONTEXT', '</code><span class="italic"><code class="codeph">attribute-1</code></span><code class="codeph">') FROM DUAL;</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SELECT VALUE FROM SESSION_CONTEXT WHERE NAMESPACE='CLIENTCONTEXT' AND ATTRIBUTE='</code><span class="italic"><code class="codeph">attribute-1</code></span><code class="codeph">';</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>The <span class="italic"><code class="codeph">attribute-1</code></span> value can be any attribute value that has already been set in the <code class="codeph">CLIENTCONTEXT</code> namespace. Oracle Database only retrieves the set attribute; otherwise, it returns <code class="codeph">NULL</code>. Typically, you set the attribute by using the <code class="codeph">OCIAppCtxSet</code> call. In addition, you can embed a <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> call in the OCI code to set the attribute value. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG230"></a><div class="props_rev_3"><a id="GUID-F91C6512-F590-495A-92F9-D238B292AB11" name="GUID-F91C6512-F590-495A-92F9-D238B292AB11"></a><h4 id="DBSEG-GUID-F91C6512-F590-495A-92F9-D238B292AB11" class="sect4">Example: Retrieving a Client Session ID Value for Client Session-Based Contexts</h4>
                  <div>
                     <p>The OCI <code class="codeph">OCIStmtExecute</code> call can retrieve client session ID values for client session-based contexts.
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F91C6512-F590-495A-92F9-D238B292AB11__CIHCHABC">Example 11-10</a> shows how to use the <code class="codeph">OCIStmtExecute</code> call to retrieve a client session ID value.
                     </p>
                     <div class="example" id="GUID-F91C6512-F590-495A-92F9-D238B292AB11__CIHCHABC">
                        <p class="titleinexample">Example 11-10 Retrieving a Client Session ID Value for Client Session-Based Contexts</p><pre class="oac_no_warn" dir="ltr">oratext    clientid[31];
OCIDefine  *defnp1 = (OCIDefine *) 0;
OCIStmt    *statementhndle;
oratext    *selcid = (oratext *)"SELECT SYS_CONTEXT('CLIENTCONTEXT',
            attribute) FROM  DUAL"; 
 
OCIStmtPrepare(statementhndle, errhp, selcid, (ub4) strlen((char *) selcid),
  (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT); 
 
OCIDefineByPos(statementhndle, &amp;defnp1, errhp, 1, (dvoid *)clientid, 31,
  SQLT_STR, (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, OCI_DEFAULT);
 
OCIStmtExecute(servhndle, statementhndle, errhp, (ub4) 1, (ub4) 0,
  (CONST OCISnapshot *) NULL, (OCISnapshot *) NULL, OCI_DEFAULT);

 printf("CLIENT_IDENTIFIER = %s \n", clientid);</pre><p>In this example:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oratext</code>, <code class="codeph">OCIDefine</code>, <code class="codeph">OCIStmt</code>, and <code class="codeph">oratext</code> create variables to store the client session ID, reference call for <code class="codeph">OCIDefine</code>, the statement handle, and the <code class="codeph">SELECT</code> statement to use. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIStmtPrepare</code> prepares the statement <code class="codeph">selcid</code> for execution.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIDefineByPos</code> defines the output variable <code class="codeph">clientid</code> for client session ID.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIStmtExecute</code> executes the statement in the <code class="codeph">selcid</code> variable. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">printf</code> prints the formatted output for the retrieved client session ID. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG231"></a><div class="props_rev_3"><a id="GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506" name="GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506"></a><h4 id="DBSEG-GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506" class="sect4">Clearing a Setting in the CLIENTCONTEXT Namespace</h4>
                  <div>
                     <p>You can use Oracle Call Interface to clear the <code class="codeph">CLIENTCONTEXT</code> namespace.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To clear a setting in <code class="codeph">CLIENTCONTEXT</code>, set the value to <code class="codeph">NULL</code> or to an empty string by using one of the following commands:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The following command sets the empty string to zero:</p><pre class="oac_no_warn" dir="ltr">(void) OCIAppCtxSet((void *) <span class="italic">session_handle</span>, (dvoid *)"CLIENTCONTEXT", 13,
                   (dvoid *)<span class="italic">attribute_name</span>, <span class="italic">length_of_attribute_name</span>, 
                   (dvoid *)0, 0,errhp
                   OCI_DEFAULT);
</pre></li>
                                 <li>
                                    <p>This following command sets the empty string to a blank value:</p><pre class="oac_no_warn" dir="ltr">(void) OCIAppCtxSet((void *) <span class="italic">session_handle</span>, (dvoid *)"CLIENTCONTEXT", 13
                   (dvoid *)<span class="italic">attribute_name</span>, <span class="italic">length_of_attribute_name</span>, 
                   (dvoid *)"", 0,errhp,
                   OCI_DEFAULT);</pre><p></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG232"></a><div class="props_rev_3"><a id="GUID-E53BB503-2639-421C-8F90-0072D32BBE7F" name="GUID-E53BB503-2639-421C-8F90-0072D32BBE7F"></a><h4 id="DBSEG-GUID-E53BB503-2639-421C-8F90-0072D32BBE7F" class="sect4">Clearing All Settings in the CLIENTCONTEXT Namespace</h4>
                  <div>
                     <p>You can use Oracle Call Interface (OCI) to clear the <code class="codeph">CLIENTCONTEXT</code> namespace.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To clear the namespace, use the <code class="codeph">OCIAppCtxClearAll</code> command in the following form:
                              </p><pre class="oac_no_warn" dir="ltr">err = OCIAppCtxClearAll((void *) <span class="italic">session_handle</span>, 
                       (dvoid *)"CLIENTCONTEXT", 13,
                        errhp,                        OCI_DEFAULT);
 </pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">Using Client Session-Based Application Contexts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG234"></a><a id="DBSEG233"></a><div class="props_rev_3"><a id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526" name="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526"></a><h3 id="DBSEG-GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526" class="sect3">Application Context Data Dictionary Views</h3>
               <div>
                  <p>Oracle Database provides data dictionary views that provide information about application contexts.</p>
                  <div class="section">
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__CIHEEEHH" title="Application Context Views">Table 11-3</a> lists these data dictionary views.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__CIHEEEHH">
                     <p class="titleintable">Table 11-3 Data Dictionary Views That Display Information about Application Contexts</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Data Dictionary Views That Display Information about Application Contexts" summary="Application Context Views" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d84552e15869">View</th>
                              <th align="left" valign="bottom" width="74%" id="d84552e15872">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15877" headers="d84552e15869 ">
                                 <p><code class="codeph">ALL_CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15877 d84552e15872 ">
                                 <p>Describes all context namespaces in the current session for which attributes and values were specified using the <code class="codeph">DBMS_SESSION.SET_CONTEXT</code> procedure. It lists the namespace and its associated schema and PL/SQL package.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15888" headers="d84552e15869 ">
                                 <p><code class="codeph">ALL_POLICY_CONTEXTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15888 d84552e15872 ">
                                 <p>Describes the driving contexts defined for the synonyms, tables, and views accessible to the current user. (A driving context is a context used in a Virtual Private Database policy.)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15896" headers="d84552e15869 ">
                                 <p><code class="codeph">DBA_CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15896 d84552e15872 ">
                                 <p>Provides all context namespace information in the database. Its columns are the same as those in the <code class="codeph">ALL_CONTEXT</code> view, except that it includes the <code class="codeph">TYPE</code> column. The <code class="codeph">TYPE</code> column describes how the application context is accessed or initialized.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15913" headers="d84552e15869 ">
                                 <p><code class="codeph">DBA_OBJECTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15913 d84552e15872 ">
                                 <p>Provides the names of existing application contexts. Query the <code class="codeph">OBJECT_TYPE</code> column of the <code class="codeph">DBA_OBJECTS</code> view, as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15929" headers="d84552e15869 ">
                                 <p><code class="codeph">DBA_POLICY_CONTEXTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15929 d84552e15872 ">
                                 <p>Describes all driving contexts in the database that were added by the <code class="codeph">DBMS_RLS.ADD_POLICY_CONTEXT</code> procedure. Its columns are the same as those in <code class="codeph">ALL_POLICY_CONTEXTS</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15943" headers="d84552e15869 ">
                                 <p><code class="codeph">SESSION_CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15943 d84552e15872 ">
                                 <p>Describes the context attributes and their values set for the current session.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15951" headers="d84552e15869 ">
                                 <p><code class="codeph">USER_POLICY_CONTEXTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15951 d84552e15872 ">
                                 <p>Describes the driving contexts defined for the synonyms, tables, and views owned by the current user. Its columns (except for <code class="codeph">OBJECT_OWNER</code>) are the same as those in <code class="codeph">ALL_POLICY_CONTEXTS</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15965" headers="d84552e15869 ">
                                 <p><code class="codeph">V$CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15965 d84552e15872 ">
                                 <p>Lists set attributes in the current PDB session. Users do not have access to this view unless you grant the user the <code class="codeph">SELECT</code> privilege on it. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15976" headers="d84552e15869 ">
                                 <p><code class="codeph">V$SESSION</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15976 d84552e15872 ">
                                 <p>Lists detailed information about each current PDB session. Users do not have access to this view unless you grant the user the <code class="codeph">SELECT</code> privilege on it. 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infobox-tip" id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__GUID-308D2526-9B08-45DE-A068-38A7D164AB82">
                        <p class="notep1">Tip:</p>
                        <p>In addition to these views, check the database trace file if you find errors when running applications that use application contexts. The <code class="codeph">USER_DUMP_DEST</code> initialization parameter sets the directory location of the trace files. You can find the value of this parameter by issuing <code class="codeph">SHOW PARAMETER USER_DUMP_DEST</code> in SQL*Plus. 
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__GUID-A664E0C0-5581-4B74-93F1-5882F79B65A8">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../tgsql/performing-application-tracing.html#TGSQL809" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for more information about trace files
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for detailed information about these views
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts to&nbsp;Retrieve&nbsp;User&nbsp;Information</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
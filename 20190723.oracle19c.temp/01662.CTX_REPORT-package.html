<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CTX_REPORT Package</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:47:23-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96278-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CTX_QUERY-package.html" title="Previous" type="text/html">
      <link rel="next" href="CTX_THES-package.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Reference">
    <meta name="dcterms.isVersionOf" content="CCREF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CTX_QUERY-package.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CTX_THES-package.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> CTX_REPORT Package </li>
            </ol>
            <a id="GUID-8750E658-F568-4B17-B78B-0F71848A1C63" name="GUID-8750E658-F568-4B17-B78B-0F71848A1C63"></a><a id="CCREF1100"></a>
            
            <h2 id="CCREF-GUID-8750E658-F568-4B17-B78B-0F71848A1C63" class="sect2"><span class="enumeration_chapter">13 </span> CTX_REPORT Package 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to use the <code class="codeph">CTX_REPORT</code> package to create reports on indexing and querying. These reports can help you troubleshoot problems or fine-tune your applications. 
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-F906F875-B2FC-4611-AECF-3CF71688C935">Description of Procedures in CTX_REPORT</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F">Using the Function Versions</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-21915193-473D-4FE8-B738-034813D325F6">DESCRIBE_INDEX</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D">DESCRIBE_POLICY </a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97">CREATE_INDEX_SCRIPT</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-C515B497-D252-40C2-8140-336C0CCE9B8B">CREATE_POLICY_SCRIPT</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18">INDEX_SIZE</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1">INDEX_STATS</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-AFD54A2E-90C8-42F8-9607-AC517428056D">QUERY_LOG_SUMMARY</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3">TOKEN_INFO</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE">TOKEN_TYPE</a></p>
                  </li>
                  <li>
                     <p><a href="CTX_REPORT-package.html#GUID-06C55318-69A1-499E-B5C8-D7FC163A832C">VALIDATE_INDEX</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-8750E658-F568-4B17-B78B-0F71848A1C63__GUID-7C2A5B08-20D4-46D0-A997-F88ADD5757C4">
                  <p class="notep1">Note:</p>
                  <p>The APIs in the <code class="codeph">CTX_REPORT</code> package do not support identifiers that are prefixed with the schema or the owner name.
                  </p>
               </div>
               <div class="infoboxnotealso" id="GUID-8750E658-F568-4B17-B78B-0F71848A1C63__GUID-06412EF9-6158-4959-92C5-9C4B632E5D8B">
                  <p class="notep1">See Also:</p>
                  <p><a href="../ccapp/administering-oracle-text.html#CCAPP1000" target="_blank"><span class="italic">Oracle Text Application Developer's Guide</span></a> for an overview of the <code class="codeph">CTX_REPORT</code> package and how you can use the various procedures described in this chapter
                  </p>
               </div>
            </div><a id="CCREF2139"></a><div class="props_rev_3"><a id="GUID-F906F875-B2FC-4611-AECF-3CF71688C935" name="GUID-F906F875-B2FC-4611-AECF-3CF71688C935"></a><h3 id="CCREF-GUID-F906F875-B2FC-4611-AECF-3CF71688C935" class="sect3"><span class="enumeration_section">13.1 </span>Description of Procedures in CTX_REPORT
               </h3>
               <div>
                  <p>The <code class="codeph">CTX_REPORT</code> package contains the following procedures:
                  </p>
                  <div class="tblformal" id="GUID-F906F875-B2FC-4611-AECF-3CF71688C935__GUID-2F9F4412-ED07-4BE6-938F-67D19EAC3C19">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes CTX_REPORT Procedures." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d119504e226">Name</th>
                              <th align="left" valign="bottom" width="65%" id="d119504e230">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e235" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-21915193-473D-4FE8-B738-034813D325F6">DESCRIBE_INDEX</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e235 d119504e230 ">
                                 <p>Creates a report describing the index.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e244" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D">DESCRIBE_POLICY </a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e244 d119504e230 ">
                                 <p>Creates a report describing a policy.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e253" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97">CREATE_INDEX_SCRIPT</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e253 d119504e230 ">
                                 <p>Creates a SQL*Plus script to duplicate the named index.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e262" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-C515B497-D252-40C2-8140-336C0CCE9B8B">CREATE_POLICY_SCRIPT</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e262 d119504e230 ">
                                 <p>Creates a SQL*Plus script to duplicate the named policy.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e271" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18">INDEX_SIZE</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e271 d119504e230 ">
                                 <p>Creates a report to show the internal objects of an index, their tablespaces and used sizes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e280" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1">INDEX_STATS</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e280 d119504e230 ">
                                 <p>Creates a report to show the various statistics of an index.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e289" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-AFD54A2E-90C8-42F8-9607-AC517428056D">QUERY_LOG_SUMMARY</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e289 d119504e230 ">
                                 <p>Creates a report showing query statistics</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e298" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3">TOKEN_INFO</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e298 d119504e230 ">
                                 <p>Creates a report showing the information for a token, decoded.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e307" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE">TOKEN_TYPE</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e307 d119504e230 ">
                                 <p>Translates a name and returns a numeric token type.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d119504e316" headers="d119504e226 ">
                                 <p><a href="CTX_REPORT-package.html#GUID-06C55318-69A1-499E-B5C8-D7FC163A832C">VALIDATE_INDEX</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d119504e316 d119504e230 ">
                                 <p>Checks for index corruption and reports on problems found. Mainly used with Oracle Support.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="CCREF2140"></a><div class="props_rev_3"><a id="GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F" name="GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F"></a><h3 id="CCREF-GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F" class="sect3"><span class="enumeration_section">13.2 </span>Using the Function Versions
               </h3>
               <div>
                  <p>Some of the procedures in the <code class="codeph">CTX_REPORT</code> package have function versions. You can call these functions as follows:
                  </p><pre class="oac_no_warn" dir="ltr">select ctx_report.describe_index('MYINDEX') from dual;
</pre><p>In SQL*Plus, to generate an output file to send to support, you can do:</p><pre class="oac_no_warn" dir="ltr">set long 64000
set pages 0
set heading off
set feedback off
spool outputfile
select ctx_report.describe_index('MYINDEX') from dual;
spool off</pre></div>
            </div><a id="CCREF2141"></a><div class="props_rev_3"><a id="GUID-21915193-473D-4FE8-B738-034813D325F6" name="GUID-21915193-473D-4FE8-B738-034813D325F6"></a><h3 id="CCREF-GUID-21915193-473D-4FE8-B738-034813D325F6" class="sect3"><span class="enumeration_section">13.3 </span>DESCRIBE_INDEX
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a report describing the index. This includes the settings of the index metadata, the indexing objects used, the settings of the attributes of the objects, and index partition descriptions, if any.</p>
                     <p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-5110BC2E-6F7E-4F67-A823-2585D7CB4C45">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.DESCRIBE_INDEX(
  index_name     IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.DESCRIBE_INDEX(
  index_name     IN VARCHAR2,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
) return CLOB;</pre><dl>
                        <dt class="dlterm"><a name="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-1024632B-4DB9-4639-872B-37FC68C5E393">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index to describe.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-A028DD31-3B38-4320-87C0-91419EFCAB8F">
                              <!-- --></a>report
                        </dt>
                        <dd>
                           <p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.    
                           </p>
                           <p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-D339E01E-9A5F-400D-AA24-C5BD2C88C034">
                              <!-- --></a>report_format
                        </dt>
                        <dd>
                           <p>Specify whether the report should be generated as 'TEXT' or as 'XML'. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT.FMT_TEXT</code> or <code class="codeph">CTX_REPORT.FMT_XML</code>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-3884A41D-3091-44E9-A6DD-A69DEFA0E3F0">Notes</p>
                     <p><code class="codeph">CTX_REPORT.DESCRIBE_INDEX</code> outputs <code class="codeph">FILTER</code> <code class="codeph">BY</code> and <code class="codeph">ORDER</code> <code class="codeph">BY</code> column information if the index is created with <code class="codeph">FILTER</code> <code class="codeph">BY</code> and/or <code class="codeph">ORDER</code> <code class="codeph">BY</code> clauses.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-B5E3E2F8-E3CB-45E9-A63E-CBC17153220D">Related Topics</p>
                     <p><span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span></p>
                     <p><span class="q">"<a href="CTX_DDL-package.html#GUID-F8DD37A5-04BA-45A3-BF6F-6614922B5058">ADD_SDATA_COLUMN</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2142"></a><div class="props_rev_3"><a id="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D" name="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D"></a><h3 id="CCREF-GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D" class="sect3"><span class="enumeration_section">13.4 </span>DESCRIBE_POLICY 
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a report describing the policy. This includes the settings of the policy metadata, the indexing objects used, and the settings of the attributes of the objects.</p>
                     <p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-EC1E6735-4B18-4767-9236-599491E0B97C">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.DESCRIBE_POLICY(
  policy_name    IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.DESCRIBE_POLICY(
  policy_name    IN VARCHAR2,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
) return CLOB;</pre><dl>
                        <dt class="dlterm"><a name="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-595C0711-589D-44A6-A9A0-FBF388DEE6BE">
                              <!-- --></a>report
                        </dt>
                        <dd>
                           <p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.
                           </p>
                           <p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before <code class="codeph">report</code> is generated, so any existing contents will be overwritten by this call.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-58E7220D-8C29-40DD-A325-DFE618B2F2B8">
                              <!-- --></a>report_format
                        </dt>
                        <dd>
                           <p>Specify whether the report should be generated as 'TEXT' or as 'XML'. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT.FMT_TEXT</code> or <code class="codeph">CTX_REPORT.FMT_XML</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-91363CAD-E7A4-4A1A-A60D-9C1B0641DB8A">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the name of the policy to describe.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2143"></a><div class="props_rev_3"><a id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97" name="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97"></a><h3 id="CCREF-GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97" class="sect3"><span class="enumeration_section">13.5 </span>CREATE_INDEX_SCRIPT
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a SQL*Plus script which will create a text index that duplicates the named text index.</p>
                     <p>The created script will include creation of preferences identical to those used in the named text index. However, the names of the preferences will be different.</p>
                     <p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-99698794-E888-4F8A-A435-BA9F0E0AE8A4">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.CREATE_INDEX_SCRIPT(
  index_name      in varchar2,
  report          in out nocopy clob,
  prefname_prefix in varchar2 default null
);

function CTX_REPORT.CREATE_INDEX_SCRIPT(
  index_name      in varchar2,
  prefname_prefix in varchar2 default null
) return clob;</pre><dl>
                        <dt class="dlterm"><a name="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-E9417706-B737-414B-8B75-16E1905658E2">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-5159A058-85B8-4EB8-87AA-DE3D2839396E">
                              <!-- --></a>report
                        </dt>
                        <dd>
                           <p>Specify the <code class="codeph">CLOB</code> locator to which to write the script.
                           </p>
                           <p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-297ADFBE-BF41-408A-ABE1-903AA2F0D240">
                              <!-- --></a>prefname_prefix
                        </dt>
                        <dd>
                           <p>Specify optional prefix to use for preference names.</p>
                           <p>If <code class="codeph">prefname_prefix</code> is omitted or NULL, index name will be used. The <code class="codeph">prefname_prefix</code> follows index length restrictions.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-8D570EE9-849F-4FB7-B841-E10D1381865E">Notes</p>
                     <p><code class="codeph">CTX_REPORT.CREATE_INDEX_SCRIPT</code> will also generate necessary <code class="codeph">FILTER</code> <code class="codeph">BY</code> and <code class="codeph">ORDER</code> <code class="codeph">BY</code> clauses for <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> statements.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-28081B17-CC7C-4313-B7F1-CF5D2C935420">Related Topics</p>
                     <p><span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2144"></a><div class="props_rev_3"><a id="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B" name="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B"></a><h3 id="CCREF-GUID-C515B497-D252-40C2-8140-336C0CCE9B8B" class="sect3"><span class="enumeration_section">13.6 </span>CREATE_POLICY_SCRIPT
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a SQL*Plus script which will create a text policy that duplicates the named text policy.</p>
                     <p>The created script will include creation of preferences identical to those used in the named text policy.</p>
                     <p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-0517FADB-C45D-4F8F-BB28-B71C67217E1D">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.CREATE_POLICY_SCRIPT(
  policy_name      in varchar2,
  report           in out nocopy clob,
  prefname_prefix  in varchar2 default null
);

function CTX_REPORT.CREATE_POLICY_SCRIPT(
  policy_name      in varchar2,
  prefname_prefix  in varchar2 default null
) return clob;</pre><dl>
                        <dt class="dlterm"><a name="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-9DD72716-BDF7-4AA1-9EC2-690BDC80F3E0">
                              <!-- --></a>policy_name
                        </dt>
                        <dd>
                           <p>Specify the name of the policy.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-19BBD491-52B1-41AB-BF43-FD67C33B8D6A">
                              <!-- --></a>report
                        </dt>
                        <dd>
                           <p>Specify the locator to which to write the script.</p>
                           <p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call. 
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-3BA97093-FC97-46CF-B139-100C01257E31">
                              <!-- --></a>prefname_prefix
                        </dt>
                        <dd>
                           <p>Specify the optional prefix to use for preference names. If <code class="codeph">prefname_prefix</code> is omitted or NULL, policy name will be used. <code class="codeph">prefname_prefix</code> follows policy length restrictions.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2145"></a><div class="props_rev_3"><a id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18" name="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18"></a><h3 id="CCREF-GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18" class="sect3"><span class="enumeration_section">13.7 </span>INDEX_SIZE
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a report showing the internal objects of the text index or text index partition, and their tablespaces, allocated, and used sizes.</p>
                     <p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter, or as a function that returns the report as a <code class="codeph">CLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-2F768C93-2084-495E-B617-E4AB98F77CA5">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.INDEX_SIZE(
  index_name     IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  part_name      IN VARCHAR2 DEFAULT NULL,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.INDEX_SIZE(
  index_name     IN VARCHAR2,
  part_name      IN VARCHAR2 DEFAULT NULL,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
) return clob;</pre><dl>
                        <dt class="dlterm"><a name="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-E6A15AC6-E3FE-4696-85FD-A638176ED645">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index to describe.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-42AAFB60-13B1-4AB7-B23F-8E71D77C2924">
                              <!-- --></a>report
                        </dt>
                        <dd>
                           <p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.
                           </p>
                           <p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-0BBBB2EC-F27C-4ADF-9320-8F136F17B711">
                              <!-- --></a>part_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index partition (optional). If <code class="codeph">part_name</code> is NULL, and the index is a local partitioned text index, then all objects of all partitions will be displayed. If <code class="codeph">part_name</code> is provided, then only the objects of a particular partition will be displayed.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-96797A3C-405A-4CB5-AF03-2CDA76071821">
                              <!-- --></a>report_format
                        </dt>
                        <dd>
                           <p>Specify whether the report should be generated as 'TEXT' or as 'XML'. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_TEXT</code> or <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_XML</code>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-A8DDDBCF-36D3-4470-B9B0-82A72901125D">Notes</p>
                     <p><code class="codeph">CTX_REPORT.INDEX_SIZE</code> will also output information on dr$<span class="italic">indexname</span>$S table.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-213F2DE5-7FDC-4F71-B4C8-FC9F3B66A45E">Related Topics</p>
                     <p><span class="q">"<a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>"</span></p>
                     <p><a href="oracle-text-indexing-elements.html#GUID-5F662035-B0F5-4F72-A2A8-A5B07070ABBF__BHCGFIJI" title="This table describes the BASIC_STORAGE attributes.">Table 2-39</a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2146"></a><div class="props_rev_3"><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1" name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1"></a><h3 id="CCREF-GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1" class="sect3"><span class="enumeration_section">13.8 </span>INDEX_STATS
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a report showing various calculated statistics about the text index.</p>
                     <p>This procedure fully scans the text index tables, so it may take a long time to run for large indexes.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-46DBB576-D71D-445B-9F65-EBD5A4B09547">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure ctx_report.index_stats(
  index_name     IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  part_name      IN VARCHAR2 DEFAULT NULL,
  frag_stats     IN BOOLEAN DEFAULT TRUE,
  list_size      IN NUMBER DEFAULT 100,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT,
  stat_type      IN VARCHAR2 DEFAULT NULL
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-14E02E18-21D7-43C7-AB64-A6B6703F22A9">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index to describe. This must be a <code class="codeph">CONTEXT</code> index.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-03B226B5-E027-4D9F-9D21-A67DF7E4898A">
                              <!-- --></a>report
                        </dt>
                        <dd>
                           <p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.If report is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The report <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-E90592F9-4089-4CA8-A466-D803E42D7D25">
                              <!-- --></a>part_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index partition. If the index is a local partitioned index, then <code class="codeph">part_name</code> must be provided. <code class="codeph">INDEX_STATS</code> will calculate the statistics for that index partition.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-CDB7FDBF-4D76-475A-A1B5-D1398CA40827">
                              <!-- --></a>frag_stats
                        </dt>
                        <dd>
                           <p>Specify TRUE to calculate fragmentation statistics. If <code class="codeph">frag_stats</code> is FALSE, the report will not show any statistics relating to size of index data. However, the operation should take less time and resources to calculate the token statistics.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-3651910A-C1A8-4B21-A281-625A9823BF0C">
                              <!-- --></a>list_size
                        </dt>
                        <dd>
                           <p>Specify the number of elements in each compiled list. <code class="codeph">list_size</code> has a maximum value of 1000.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-69B68697-A14A-4602-897E-10A7DE7338CF">
                              <!-- --></a>report_format
                        </dt>
                        <dd>
                           <p>Specify whether the report should be generated as 'TEXT' or as 'XML'. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_TEXT</code> or <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_XML</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-DCC5F039-91F4-4DC1-94B1-C62D49DA4192">
                              <!-- --></a>stat_type
                        </dt>
                        <dd>
                           <p>Specify the estimated statistics to output. If this parameter is set, then <code class="codeph">frag_stats</code> is ignored. The possible values are:
                           </p>
                           <div class="tblformal" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-28CBF8B4-D89B-4397-B04D-729CFF698ED2">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table describes types of statistics." width="90%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="37%" id="d119504e1497">Statistics Type</th>
                                       <th align="left" valign="bottom" width="63%" id="d119504e1500">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="37%" id="d119504e1505" headers="d119504e1497 ">
                                          <p>EST_FRAG_STATS</p>
                                       </td>
                                       <td align="left" valign="top" width="63%" headers="d119504e1505 d119504e1500 ">
                                          <p>Get the estimated fragmentation stats for the index. When this type is given <code class="codeph">list_size</code> is ignored.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="37%" id="d119504e1515" headers="d119504e1497 ">
                                          <p>EST_FREQUENT_TOKENS</p>
                                       </td>
                                       <td align="left" valign="top" width="63%" headers="d119504e1515 d119504e1500 ">
                                          <p>Get the estimated frequently queried tokens for the index. You can give a value of up to 100 for <code class="codeph">list_size</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="37%" id="d119504e1525" headers="d119504e1497 ">
                                          <p>EST_TOKENS_TO_OPTIMIZE</p>
                                       </td>
                                       <td align="left" valign="top" width="63%" headers="d119504e1525 d119504e1500 ">
                                          <p>Show best tokens to optimize, based on frequency of querying and fragmentation. You can give a value of up to 100 for <code class="codeph">list_size</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="37%" id="d119504e1535" headers="d119504e1497 ">
                                          <p>EST_SLOWEST_QUERIES</p>
                                       </td>
                                       <td align="left" valign="top" width="63%" headers="d119504e1535 d119504e1500 ">
                                          <p>Show slowest running queries for the index. You can give a value of up to 100 for <code class="codeph">list_size</code>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-7B578B2A-756B-42C2-A89F-F361E4AFF705">
                        <p class="notep1">Note:</p>
                        <p>The estimated statistics for <code class="codeph">stat_type</code> is only available if <code class="codeph">query_stats</code> is enabled and the following privileges must be granted to the user running the report:
                        </p><pre class="pre codeblock"><code>grant select, insert, delete, update on ctxsys.dr$slowqrys to &lt;user&gt;; 

grant select, insert, delete, update on ctxsys.dr$freqtoks to &lt;user&gt;;</code></pre></div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-0635F22C-696A-4EB6-BB13-BB047796180A">Example for CTX_REPORT.INDEX_STATS</p><pre class="oac_no_warn" dir="ltr">create table output (result CLOB);
 
  declare
    x clob := null;
  begin
    ctx_report.index_stats('tdrbprx21',x);
    insert into output values (x);
    commit;
    dbms_lob.freetemporary(x);
  end;
  /
 
set long 32000
set head off
set pagesize 10000
select * from output; 
</pre><p>The following sample output is for <code class="codeph">INDEX_STATS</code> on a context index. This report has been truncated for clarity. It shows some of the token statistics and all of the fragmentation statistics.
                     </p>
                     <p>The fragmentation statistics are at the end of the report. It tells you optimal row fragmentation, an estimated amount of garbage data in the index, and a list of the most fragmented tokens. Running <code class="codeph">CTX_DDL.OPTIMIZE_INDEX</code> cleans up the index.
                     </p><pre class="oac_no_warn" dir="ltr">=================================================================
              STATISTICS FOR "DR_TEST"."TDRBPRX21"
=================================================================

indexed documents:                                          53
allocated docids:                                           68
$I rows:                                                16,259

-----------------------------------------------------------------
                        TOKEN STATISTICS
-----------------------------------------------------------------

unique tokens:                                          13,445
average $I rows for each token:                           1.21
tokens with most $I rows:
  telecommunications industry (THEME)                        6
  science and technology (THEME)                             6
  EMAIL (FIELD SECTION "SOURCE")                             6
  DEC (FIELD SECTION "TIMESTAMP")                            6
  electronic mail (THEME)                                    6
  computer networking (THEME)                                6
  communications (THEME)                                     6
  95 (FIELD SECTION "TIMESTAMP")                             6
  15 (FIELD SECTION "TIMESTAMP")                             6
  HEADLINE (ZONE SECTION)                                    6

average size for each token:                                 8
tokens with largest size:
  T (NORMAL)                                               405
  SAID (NORMAL)                                            313
  HEADLINE (ZONE SECTION)                                  272
  NEW (NORMAL)                                             267
  I (NORMAL)                                               230
  MILLION (PREFIX)                                         222
  D (NORMAL)                                               219
  MILLION (NORMAL)                                         215
  U (NORMAL)                                               192
  DEC (FIELD SECTION "TIMESTAMP")                          186

average frequency for each token:                         2.00
most frequent tokens:
  HEADLINE (ZONE SECTION)                                   68
  DEC (FIELD SECTION "TIMESTAMP")                           62
  95 (FIELD SECTION "TIMESTAMP")                            62
  15 (FIELD SECTION "TIMESTAMP")                            62
  T (NORMAL)                                                61
  D (NORMAL)                                                59
  881115 (THEME)                                            58
  881115 (NORMAL)                                           58
  I (NORMAL)                                                55
  geography (THEME)                                         52

token statistics by type:
  token type:                                           NORMAL
    unique tokens:                                       6,344
    total rows:                                          7,631
    average rows:                                         1.20
    total size:                              67,445 (65.86 KB)
    average size:                                           11
    average frequency:                                    2.33
    most frequent tokens:
      T                                                     61
      D                                                     59
      881115                                                58
      I                                                     55
      SAID                                                  45
      C                                                     43
      NEW                                                   36
      MILLION                                               32
      FIRST                                                 28
      COMPANY                                               27

  token type:                                            THEME
    unique tokens:                                       4,563
    total rows:                                          5,523
    average rows:                                         1.21
    total size:                              21,930 (21.42 KB)
    average size:                                            5
    average frequency:                                    2.40
    most frequent tokens:
      881115                                                58
      political geography                                   52
      geography                                             52
      United States                                         51
      business and economics                                50
      abstract ideas and concepts                           48
      North America                                         48
      science and technology                                46
      NKS                                                   34
      nulls                                                 34
</pre><p>The fragmentation portion of this report is as follows:</p><pre class="oac_no_warn" dir="ltr">-----------------------------------------------------------------
                    FRAGMENTATION STATISTICS
-----------------------------------------------------------------

total size of $I data:                     116,772 (114.04 KB)

$I rows:                                                16,259
estimated $I rows if optimal:                           13,445
estimated row fragmentation:                              17 %

garbage docids:                                             15
estimated garbage size:                      21,379 (20.88 KB)

most fragmented tokens:
  telecommunications industry (THEME)                     83 %
  science and technology (THEME)                          83 %
  EMAIL (FIELD SECTION "SOURCE")                          83 %
  DEC (FIELD SECTION "TIMESTAMP")                         83 %
  electronic mail (THEME)                                 83 %
  computer networking (THEME)                             83 %
  communications (THEME)                                  83 %
  95 (FIELD SECTION "TIMESTAMP")                          83 %
  HEADLINE (ZONE SECTION)                                 83 %
  15 (FIELD SECTION "TIMESTAMP")                          83 %</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-52B22FDF-12D7-4997-9845-0D2AD5529619">Examples for CTX_REPORT.INDEX_STATS with STAT_TYPE</p>
                     <p>The following sample output is for <code class="codeph">EST_FRAG_STATS</code> statistics type:
                     </p><pre class="pre codeblock"><code>var report clob;

	begin
		dbms_lob.createtemporary(:report, true);
		ctx_report.index_stats(
		index_name     =&gt; 'tdrbps.idx',
		report         =&gt; :report,
		report_format  =&gt; 'XML',
		stat_type =&gt; 'EST_FRAG_STATS'
		);
	end;
	/

select :report from dual;

:REPORT
------------------------------------------------------------------------------

&lt;CTXREPORT&gt;
&lt;INDEX_STATS&gt;
&lt;STAT_INDEX_NAME&gt;"TDRBPS"."IDX"&lt;/STAT_INDEX_NAME&gt;

&lt;STAT_INDEX_STATS&gt;
&lt;STAT_STATISTIC NAME="Estimated Fragmentation Stats"&gt;50&lt;/STAT_STATISTIC&gt;
&lt;/STAT_INDEX_STATS&gt;
&lt;/INDEX_STATS&gt;
&lt;/CTXREPORT&gt;</code></pre><p>The following sample output is for <code class="codeph">EST_FREQUENT_TOKENS</code> statistics type:
                     </p><pre class="pre codeblock"><code>	begin
		dbms_lob.createtemporary(:report, true);
		ctx_report.index_stats(
		index_name     =&gt; 'tdrbps.idx',
		report         =&gt; :report,
		report_format  =&gt; 'XML',
		stat_type =&gt; 'EST_FREQUENT_TOKENS'
		);
	end;
	/

select :report from dual;

:REPORT
------------------------------------------------------------------------------

&lt;CTXREPORT&gt; 
&lt;INDEX_STATS&gt; 
&lt;STAT_INDEX_NAME&gt;"TDRBPS"."IDX"&lt;/STAT_INDEX_NAME&gt;

&lt;STAT_INDEX_STATS&gt; 
&lt;STAT_TOKEN_LIST NAME="Most Frequently Queried Tokens"&gt; 
&lt;STAT_TOKEN&gt; 
&lt;STAT_TOKEN_TEXT&gt;ORACLE&lt;/STAT_TOKEN_TEXT&gt; 
&lt;STAT_TOKEN_TYPE&gt;0:TEXT&lt;/STAT_TOKEN_TYPE&gt; 
&lt;STAT_TOKEN_STATISTIC&gt;2&lt;/STAT_TOKEN_STATISTIC&gt; 
&lt;/STAT_TOKEN&gt; 
&lt;STAT_TOKEN&gt; 
&lt;STAT_TOKEN_TEXT&gt;DATABASE&lt;/STAT_TOKEN_TEXT&gt; 
&lt;STAT_TOKEN_TYPE&gt;0:TEXT&lt;/STAT_TOKEN_TYPE&gt; 
&lt;STAT_TOKEN_STATISTIC&gt;1&lt;/STAT_TOKEN_STATISTIC&gt; 
&lt;/STAT_TOKEN&gt;
&lt;/STAT_TOKEN_LIST&gt;
&lt;/STAT_INDEX_STATS&gt; 
&lt;/INDEX_STATS&gt; 
&lt;/CTXREPORT&gt;</code></pre><div class="infoboxnote" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-8691305C-AD2D-42F9-A9D3-AE69A94C7D2E">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">&lt;STAT_TOKEN_STATISTIC&gt;</code> shows the number of times a particular token was queried.
                        </p>
                     </div>
                     <p>The following sample output is for <code class="codeph">EST_SLOWEST_QUERIES</code> statistics type:
                     </p><pre class="pre codeblock"><code>	begin
		dbms_lob.createtemporary(:report, true);
		ctx_report.index_stats(
		index_name     =&gt; 'tdrbps.idx',
		report         =&gt; :report,
		report_format  =&gt; 'XML',
		stat_type =&gt; 'EST_SLOWEST_QUERIES'
		);
	end;
	/

select :report from dual;

:REPORT
------------------------------------------------------------------------------

&lt;CTXREPORT&gt; 
&lt;INDEX_STATS&gt; 
&lt;STAT_INDEX_NAME&gt;"TDRBPS"."IDX"&lt;/STAT_INDEX_NAME&gt;

&lt;STAT_INDEX_STATS&gt; 
&lt;STAT_QUERY_LIST NAME="Slowest Queries"&gt; 
&lt;STAT_QUERY&gt; 
&lt;STAT_QUERY_FULL&gt;select count(*) from tbl where
contains(txt,'Oracle')&gt;0&lt;/STAT_QUERY_FULL&gt; 
&lt;STAT_QUERY_TEXT_PART&gt;Oracle&lt;/STAT_QUERY_TEXT_PART&gt; 
&lt;STAT_QUERY_TIME&gt;114&lt;/STAT_QUERY_TIME&gt; 
&lt;STAT_QUERY_HASH&gt;2992140927&lt;/STAT_QUERY_HASH&gt;
&lt;/STAT_QUERY&gt; 
&lt;STAT_QUERY&gt; 
&lt;STAT_QUERY_FULL&gt;select count(*) from tbl where  
contains(txt,'ora%')&gt;0&lt;/STAT_QUERY_FULL&gt; 
&lt;STAT_QUERY_TEXT_PART&gt;ora%&lt;/STAT_QUERY_TEXT_PART&gt; 
&lt;STAT_QUERY_TIME&gt;4&lt;/STAT_QUERY_TIME&gt; 
&lt;STAT_QUERY_HASH&gt;2229259029&lt;/STAT_QUERY_HASH&gt; 
&lt;/STAT_QUERY&gt; 
&lt;STAT_QUERY&gt; 
&lt;STAT_QUERY_FULL&gt;select count(*) from tbl where  
contains(txt,'Database')&gt;0&lt;/STAT_QUERY_FULL&gt; 
&lt;STAT_QUERY_TEXT_PART&gt;Database&lt;/STAT_QUERY_TEXT_PART&gt; 
&lt;STAT_QUERY_TIME&gt;2&lt;/STAT_QUERY_TIME&gt; 
&lt;STAT_QUERY_HASH&gt;1111113040&lt;/STAT_QUERY_HASH&gt; 
&lt;/STAT_QUERY&gt; 
&lt;/STAT_QUERY_LIST&gt; 
&lt;/STAT_INDEX_STATS&gt; 
&lt;/INDEX_STATS&gt; 
&lt;/CTXREPORT&gt;</code></pre><div class="infoboxnote" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-DDA75A61-07A7-4966-9D79-E02541306405">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">&lt;STAT_QUERY_FULL&gt;</code> contains the full query and <code class="codeph">&lt;STAT_QUERY_TEXT_PART&gt;</code> contains the Oracle Text <code class="codeph">CONTAINS</code> clause of the query.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;STAT_QUERY_TIME&gt;</code> contains query response times and <code class="codeph">&lt;STAT_QUERY_HASH&gt;</code> contains the hash values of the queries.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>The following sample output is for <code class="codeph">EST_TOKENS_TO_OPTIMIZE</code> statistics type:
                     </p><pre class="pre codeblock"><code>	begin
		dbms_lob.createtemporary(:report, true);
		ctx_report.index_stats(
		index_name     =&gt; 'tdrbps.idx',
		report         =&gt; :report,
		report_format  =&gt; 'XML',
		stat_type =&gt; 'EST_TOKENS_TO_OPTIMIZE'
		);
	end;
	/

select :report from dual;

:REPORT
------------------------------------------------------------------------------

&lt;CTXREPORT&gt; 
&lt;INDEX_STATS&gt; 
&lt;STAT_INDEX_NAME&gt;"TDRBPS"."IDX"&lt;/STAT_INDEX_NAME&gt;&lt;STAT_INDEX_STATS&gt;

&lt;STAT_TOKEN_LIST NAME="Best Tokens To Optimize"&gt; 
&lt;STAT_TOKEN&gt; 
&lt;STAT_TOKEN_TEXT&gt;ORACLE&lt;/STAT_TOKEN_TEXT&gt; 
&lt;STAT_TOKEN_TYPE&gt;0:TEXT&lt;/STAT_TOKEN_TYPE&gt; 
&lt;STAT_TOKEN_STATISTIC&gt;100&lt;/STAT_TOKEN_STATISTIC&gt; 
&lt;/STAT_TOKEN&gt; 
&lt;STAT_TOKEN&gt; 
&lt;STAT_TOKEN_TEXT&gt;DATABASE&lt;/STAT_TOKEN_TEXT&gt; 
&lt;STAT_TOKEN_TYPE&gt;0:TEXT&lt;/STAT_TOKEN_TYPE&gt; 
&lt;STAT_TOKEN_STATISTIC&gt;50&lt;/STAT_TOKEN_STATISTIC&gt; 
&lt;/STAT_TOKEN&gt; 
&lt;/STAT_TOKEN_LIST&gt; 
&lt;/STAT_INDEX_STATS&gt; 
&lt;/INDEX_STATS&gt; 
&lt;/CTXREPORT&gt;</code></pre><div class="infoboxnote" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-CE245BF6-D236-45F2-9E5B-A4874B8E0F64">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">&lt;STAT_TOKEN_STATISTIC&gt;</code> indicates the fragmentation of a particular token.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-200F6661-D297-4830-A7AF-E6B29C34892D">Notes</p>
                     <p>These metadata are available only when <code class="codeph">QUERY_STATS</code> is turned on for the index: estimated fragmentation stats, estimated frequently queried tokens, estimated most fragmented frequently queried token, and estimated slowest running queries for the specified index.
                     </p>
                     <p><code class="codeph">CTX_REPORT.INDEX_STATS</code> will also output information on dr$<span class="italic">indexname</span>$S table, which is the section data, or <code class="codeph">SDATA</code>, table.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-0B0A1656-068B-427F-9F86-9C319E269769">Related Topics</p>
                     <p>CTX_OUTPUT.<a href="CTX_OUTPUT-package.html#GUID-D43D058C-F4FB-4C2A-965A-5872F134784F">ENABLE_QUERY_STATS</a></p>
                     <p>CTX_OUTPUT.<a href="CTX_OUTPUT-package.html#GUID-B772A716-F22F-4614-9086-4E95CDE63F84">DISABLE_QUERY_STATS</a></p>
                     <p><a href="oracle-text-SQL-statements-and-operators.html#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a></p>
                     <p><a href="oracle-text-indexing-elements.html#GUID-5F662035-B0F5-4F72-A2A8-A5B07070ABBF__BHCGFIJI" title="This table describes the BASIC_STORAGE attributes.">Table 2-39</a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2147"></a><div class="props_rev_3"><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D" name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D"></a><h3 id="CCREF-GUID-AFD54A2E-90C8-42F8-9607-AC517428056D" class="sect3"><span class="enumeration_section">13.9 </span>QUERY_LOG_SUMMARY
               </h3>
               <div>
                  <div class="section">
                     <p>Obtain a report of logged queries. </p>
                     <p><code class="codeph">QUERY_LOG_SUMMARY</code> enables you to analyze queries you have logged. For example, suppose you have an application that searches a database of large animals, and your analysis of queries against it shows that users are continually searching for the word <span class="italic">mouse</span>; this analysis might induce you to rewrite your application so that a search for <span class="italic">mouse</span> redirects the user to a database for small animals instead of simply returning an unsuccessful search.
                     </p>
                     <p>With query analysis, you can find out the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Which queries were made</p>
                        </li>
                        <li>
                           <p>Which queries were successful</p>
                        </li>
                        <li>
                           <p>Which queries were unsuccessful</p>
                        </li>
                        <li>
                           <p>How many times each query was made</p>
                        </li>
                     </ul>
                     <p>You can combine these factors in various ways, such as determining the 50 most frequent unsuccessful queries made by your application.</p>
                     <p>Query logging is begun with <code class="codeph">CTX_OUTPUT.START_QUERY_LOG</code> and terminated with <code class="codeph">CTX_OUTPUT.END_QUERY_LOG</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-9DE7550B-D09A-41CD-9FD9-4F14C06554C4">
                        <p class="notep1">Note:</p>
                        <p>You must connect as <code class="codeph">CTXSYS</code> to use <code class="codeph">CTX_REPORT.QUERY_LOG_SUMMARY</code>.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-5D61168B-73DA-46E6-A64A-CA7A424C989E">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="CTX_OUTPUT-package.html#GUID-1ED0F3CD-C3B5-4E22-A412-75FA9EC5E988">START_QUERY_LOG</a>"</span> and <span class="q">"<a href="CTX_OUTPUT-package.html#GUID-E79169B1-6785-4001-988A-32804490E87B">END_QUERY_LOG</a>"</span> 
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-4C8DEEB5-413B-4EC2-967D-25FFF67132AB">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.QUERY_LOG_SUMMARY(
   logfile       IN VARCHAR2,
   indexname     IN VARCHAR2 DEFAULT NULL,
   result_table  IN OUT NOCOPY QUERY_TABLE,
   row_num       IN NUMBER,
   most_freq     IN BOOLEAN DEFAULT TRUE,
   has_hit       IN BOOLEAN DEFAULT TRUE
);</pre><dl>
                        <dt class="dlterm"><a name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-179F0100-16E7-405C-9B7A-28310EB5E601">
                              <!-- --></a>logfile
                        </dt>
                        <dd>
                           <p>Specify the name of the logfile that contains the queries. Starting with Oracle Database 12<span class="italic">c</span> release 2 (12.2), this parameter is ignored as all the query logs are written to database trace files.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-727443D1-4803-4676-B866-63CE57218DD5">
                              <!-- --></a>indexname
                        </dt>
                        <dd>
                           <p>Specify the name of the context index for which you want the summary report. If you specify <code class="codeph">NULL</code>, the procedure provides a summary report for all context indexes.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-1CB61F76-AABA-44F8-B675-EC54DE7AC3CA">
                              <!-- --></a>result_table
                        </dt>
                        <dd>
                           <p>Specify the name of the in-memory table of type <code class="codeph">TABLE OF RECORD</code> where the results of the <code class="codeph">QUERY_LOG_SUMMARY</code> are to go. The default is the location specified by the system parameter <code class="codeph">LOG_DIRECTORY</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-B015B088-588A-465B-8E28-F9FCC215BF2F">
                              <!-- --></a>row_num
                        </dt>
                        <dd>
                           <p>The number of rows of results from <code class="codeph">QUERY_LOG_SUMMARY</code> to be reported into the table named by <span class="italic">restab</span>. For example, if this is number is 10, <span class="italic">most_freq</span> is TRUE, and <span class="italic">has_hit</span> is TRUE, then the procedure returns the 10 most frequent queries that were successful (that is, returned hits).
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-927E6708-4B0A-474F-97A5-F56DB0A0A627">
                              <!-- --></a>most_freq
                        </dt>
                        <dd>
                           <p>Specify whether <code class="codeph">QUERY_LOG_SUMMARY</code> should return the most frequent or least frequent queries. The default is most frequent queries. If <span class="italic">most_freq</span> is set to <code class="codeph">FALSE</code>, the procedure returns the least successful queries.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-5D202FEF-B5A9-4601-B386-B3274A75874E">
                              <!-- --></a>has_hit
                        </dt>
                        <dd>
                           <p>Specify whether <code class="codeph">QUERY_LOG_SUMMARY</code> should return queries that are successful (that is, that generate hits) or unsuccessful queries. The default is to count successful queries; set <span class="variable" translate="no">has_hit</span> to <code class="codeph">FALSE</code> to return unsuccessful queries.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-8105CD2E-9711-4F88-9D1A-5199B2680249">Example</p>
                     <p>The following example shows how a query log can be used.</p>
                     <p>First connect as <code class="codeph">CTXSYS</code>. Then create and populate two tables, and then create an index for each:
                     </p><pre class="oac_no_warn" dir="ltr">create table qlogtab1 (tk number primary key, text varchar2(2000));
insert into qlogtab1 values(1, 'The Roman name for France was Gaul.');
insert into qlogtab1 values(2, 'The Tour de France is held each summer.');
insert into qlogtab1 values(3, 'Jacques Anatole Thibault took the pen name Anatole France.');
create index idx_qlog1 on qlogtab1(text) indextype is ctxsys.context;
create table qlogtab2 (tk number primary key, text varchar2(2000));
insert into qlogtab2 values(1, 'The Great Wall of China is about 2400 kilometers long');
insert into qlogtab2 values(2, 'Soccer dates back at least to 217 C.E.');
insert into qlogtab2 values(3, 'The Corn Palace is a tourist attraction in South Dakota.');
create index idx_qlog2 on qlogtab2(text) indextype is ctxsys.context;</pre><pre class="oac_no_warn" dir="ltr"></pre><p>Turn on query logging, creating a log called <code class="codeph">query_log</code>:
                     </p><pre class="oac_no_warn" dir="ltr">
exec ctx_output.start_query_log('query.log');
</pre><p>Now make some queries (some of which will be unsuccessful):</p><pre class="oac_no_warn" dir="ltr">select text from qlogtab1 where contains(text, 'France',1)&gt;0;
select text from qlogtab1 where contains(text, 'cheese',1)&gt;0;
select text from qlogtab1 where contains(text, 'Text Wizard',1)&gt;0;
select text from qlogtab2 where contains(text, 'Corn Palace',1)&gt;0;
select text from qlogtab2 where contains(text, 'China',1)&gt;0;
select text from qlogtab1 where contains(text, 'Text Wizards',1)&gt;0;
select text from qlogtab2 where contains(text, 'South Dakota',1)&gt;0;
select text from qlogtab1 where contains(text, 'Text Wizard',1)&gt;0;
select text from qlogtab2 where contains(text, 'China',1)&gt;0;
select text from qlogtab1 where contains(text, 'Text Wizard',1)&gt;0;
select text from qlogtab2 where contains(text, 'company',1)&gt;0;
select text from qlogtab1 where contains(text, 'Text Wizard',1)&gt;0;
select text from qlogtab1 where contains(text, 'France',1)&gt;0;
select text from qlogtab1 where contains(text, 'database',1)&gt;0;
select text from qlogtab2 where contains(text, 'high-tech',1)&gt;0;
select text from qlogtab1 where contains(text, 'database',1)&gt;0;
select text from qlogtab1 where contains(text, 'France',1)&gt;0;
select text from qlogtab1 where contains(text, 'Japan',1)&gt;0;
select text from qlogtab1 where contains(text, 'Egypt',1)&gt;0;
select text from qlogtab1 where contains(text, 'Argentina',1)&gt;0;
select text from qlogtab1 where contains(text, 'Argentina',1)&gt;0;
select text from qlogtab1 where contains(text, 'Argentina',1)&gt;0;
select text from qlogtab1 where contains(text, 'Japan',1)&gt;0;
select text from qlogtab1 where contains(text, 'Egypt',1)&gt;0;
select text from qlogtab1 where contains(text, 'Air Shuttle',1)&gt;0;
select text from qlogtab1 where contains(text, 'Argentina',1)&gt;0;
</pre><p>With the querying over, turn query logging off:</p><pre class="oac_no_warn" dir="ltr">exec ctx_output.end_query_log;
</pre><p>Use <code class="codeph">QUERY_LOG_SUMMARY</code> to get query reports. In the first instance, you ask to see the three most frequent queries that return successfully.   First declare the results table (<code class="codeph">the_queries</code>).
                     </p><pre class="oac_no_warn" dir="ltr">set serveroutput on;
declare
   the_queries ctx_report.query_table;
begin
   ctx_report.query_log_summary('query.log', null, the_queries, 
                   row_num=&gt;3, most_freq=&gt;TRUE, has_hit=&gt;TRUE);
   dbms_output.put_line('The 3 most frequent queries returning hits');
   dbms_output.put_line('number of times  query string');
   for i in 1..the_queries.count loop
     dbms_output.put_line(the_queries(i).times||'                '||the_queries(i).query);
   end loop;
end;
/</pre><p>This returns the following:</p><pre class="oac_no_warn" dir="ltr">
The 3 most frequent queries returning hits
number of times  query string
3                France
2                China
1                Corn Palace
</pre><p>Next, look for the three most frequent queries on <code class="codeph">idx_qlog1</code> that were successful.
                     </p><pre class="oac_no_warn" dir="ltr">declare
   the_queries ctx_report.query_table;
begin
   ctx_report.query_log_summary('query.log', 'idx_qlog1', the_queries, 
                   row_num=&gt;3, most_freq=&gt;TRUE, has_hit=&gt;TRUE);
   dbms_output.put_line('The 3 most frequent queries returning hits for index idx_qlog1');
   dbms_output.put_line('number of times  query string');
   for i in 1..the_queries.count loop
     dbms_output.put_line(the_queries(i).times||'                '||the_queries(i).query);
   end loop;
end;
/</pre><p>Because only the queries for <span class="italic">France</span> were successful, <code class="codeph">ctx_report.query_log_summary</code> returns the following:
                     </p><pre class="oac_no_warn" dir="ltr">The 3 most frequent queries returning hits for index idx_qlog1
number of times  query string
3                France
</pre><p>Lastly, ask to see the three least frequent queries that returned no hits (that is, queries that were unsuccessful and called infrequently). In this case, you are interested in queries on both context indexes, so you set the indexname parameter to NULL.</p><pre class="oac_no_warn" dir="ltr">declare
   the_queries ctx_report.query_table;
begin
   ctx_report.query_log_summary('query.log', null, the_queries, row_num=&gt;3, 
                   most_freq=&gt;FALSE, has_hit=&gt;FALSE); 
   dbms_output.put_line('The 3 least frequent queries returning no hit');
   dbms_output.put_line('number of times  query string');
   for i in 1..the_queries.count loop
     dbms_output.put_line(the_queries(i).times||'                '||the_queries(i).query);
   end loop;
end;
/</pre><p>This returns the following results:</p><pre class="oac_no_warn" dir="ltr">The 3 least frequent queries returning no hit                               
number of times  query string                                              
1                high-tech                                                 
1                company                                                   
1                cheese                                                    
</pre><p><span class="italic">Argentina</span> and <span class="italic">Japan</span> do not make this list, because they are queried more than once, while <span class="italic">Corn Palace</span> does not make this list because it is successfully queried.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2148"></a><div class="props_rev_3"><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3" name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3"></a><h3 id="CCREF-GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3" class="sect3"><span class="enumeration_section">13.10 </span>TOKEN_INFO
               </h3>
               <div>
                  <div class="section">
                     <p>Creates a report showing the information for a token, decoded. This procedure will fully scan the info for a token, so it may take a long time to run for really large tokens.</p>
                     <p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-C56F96AB-50EE-49B1-B852-50F29A8FB87D">Syntax</p><pre class="oac_no_warn" dir="ltr">procedure CTX_REPORT.TOKEN_INFO(
  index_name      IN VARCHAR2,
  report          IN OUT NOCOPY CLOB,
  token           IN VARCHAR2,
  token_type      IN NUMBER,
  part_name       IN VARCHAR2 DEFAULT NULL,
  raw_info        IN BOOLEAN  DEFAULT FALSE,
  decoded_info    IN BOOLEAN  DEFAULT TRUE,
  report_format   IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.TOKEN_INFO(
  index_name      IN VARCHAR2,
  token           IN VARCHAR2,
  token_type      IN NUMBER,
  part_name       IN VARCHAR2 DEFAULT NULL,
  raw_info        IN VARCHAR2 DEFAULT 'N',
  decoded_info    IN VARCHAR2 DEFAULT 'Y',
  report_format   IN VARCHAR2 DEFAULT FMT_TEXT
) return clob;</pre><dl>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-A656B8E8-F0D7-45DE-93C1-8055224CC1D9">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-FA8DC8F2-FE08-449E-A1DA-317F82BCD0F8">
                              <!-- --></a>report 
                        </dt>
                        <dd>
                           <p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.
                           </p>
                           <p>If report is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller's responsibility to free this temporary <code class="codeph">CLOB</code> as needed.
                           </p>
                           <p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call token may be case-sensitive, depending on the passed-in token type.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-AF8736AD-A4DB-4798-8DF1-F767C5C96C61">
                              <!-- --></a>token
                        </dt>
                        <dd>
                           <p>Specify the token text.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-C5B884AA-A449-4196-A357-6D3DCA80D349">
                              <!-- --></a>token_type
                        </dt>
                        <dd>
                           <p>Specify the token type. You can use a number returned by the <a href="CTX_REPORT-package.html#GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE">TOKEN_TYPE</a> function. <code class="codeph">THEME</code>, <code class="codeph">ZONE</code>, <code class="codeph">ATTR</code>, <code class="codeph">PATH</code>, and <code class="codeph">PATH</code> <code class="codeph">ATTR</code> tokens are case-sensitive.
                           </p>
                           <p>Everything else gets passed through the lexer, so if the index's lexer is case-sensitive, the token input is case-sensitive.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-CE0DAF82-0AAE-443E-808C-1051D3CB741B">
                              <!-- --></a>part_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index partition.</p>
                           <p>If the index is a local partitioned index, then part_name must be provided. <code class="codeph">TOKEN_INFO</code> will apply to just that index partition.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-3E050372-DAB8-4677-9C7C-E399337198B8">
                              <!-- --></a>raw_info
                        </dt>
                        <dd>
                           <p>Specify <code class="codeph">TRUE</code> to include a hex dump of the index data. If raw_info is <code class="codeph">TRUE</code>, the report will include a hex dump of the raw data in the <code class="codeph">token_info</code> column.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-AD5D3BBB-C109-489D-90C9-ECFC89CF4D1E">
                              <!-- --></a>decoded_info
                        </dt>
                        <dd>
                           <p>Specify decode and include docid and offset data. If <code class="codeph">decoded_info</code> is FALSE, <code class="codeph">CTX_REPORT</code> will not attempt to decode the token information. This is useful when you just want a dump of data.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-E04BAE43-6BE2-46E4-AF06-9CEAE5FF59CB">
                              <!-- --></a>report_format
                        </dt>
                        <dd>
                           <p>Specify whether the report should be generated as 'TEXT' or as 'XML'. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT.FMT_TEXT</code> or <code class="codeph">CTX_REPORT.FMT_XML</code>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF2149"></a><div class="props_rev_3"><a id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE" name="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE"></a><h3 id="CCREF-GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE" class="sect3"><span class="enumeration_section">13.11 </span>TOKEN_TYPE
               </h3>
               <div>
                  <div class="section">
                     <p>This is a helper function which translates an English name into a numeric token type. This is suitable for use with <code class="codeph">token_info</code>, or any other <code class="codeph">CTX</code> API which takes in a <code class="codeph">token_type</code>.
                     </p><pre class="oac_no_warn" dir="ltr">function token_type(
  index_name in varchar2,
  type_name  in varchar2
) return number;

TOKEN_TYPE_TEXT      constant number := 0;
TOKEN_TYPE_THEME     constant number := 1;
TOKEN_TYPE_ZONE_SEC  constant number := 2;
TOKEN_TYPE_ORIG      	constant number := 3,
TOKEN_TYPE_ATTR_TEXT constant number := 4;
TOKEN_TYPE_ATTR_SEC  constant number := 5;
TOKEN_TYPE_PREFIX    constant number := 6;
TOKEN_TYPE_PATH_SEC  constant number := 7;
TOKEN_TYPE_PATH_ATTR constant number := 8;
TOKEN_TYPE_STEM      constant number := 9;</pre><dl>
                        <dt class="dlterm"><a name="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-01EC18E6-F477-4A5E-A7FD-0F231955DA9F">
                              <!-- --></a>index_name
                        </dt>
                        <dd>
                           <p>Specify the name of the index.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-1C105442-5745-410E-A5D4-9CFA74A271B1">
                              <!-- --></a>type_name
                        </dt>
                        <dd>
                           <p>Specify an English name for <code class="codeph">token_type</code>. The following strings are legal input. All input is case-insensitive.
                           </p>
                           <div class="tblformal" id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-3DE973FE-48CB-4BE0-ADA9-90ABB58852B4">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table shows legal input strings." width="90%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="38%" id="d119504e2328">Input</th>
                                       <th align="left" valign="bottom" width="39%" id="d119504e2331">Meaning</th>
                                       <th align="left" valign="bottom" width="23%" id="d119504e2334">Type Returned</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2339" headers="d119504e2328 ">
                                          <p><code class="codeph">TEXT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2339 d119504e2331 ">
                                          <p>Normal text token.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2339 d119504e2334 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2350" headers="d119504e2328 ">
                                          <p><code class="codeph">THEME</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2350 d119504e2331 ">
                                          <p>Theme token.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2350 d119504e2334 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2361" headers="d119504e2328 ">
                                          <p><code class="codeph">ZONE SEC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2361 d119504e2331 ">
                                          <p>Zone token.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2361 d119504e2334 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2372" headers="d119504e2328 ">
                                          <p><code class="codeph">ORIGINAL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2372 d119504e2331 ">
                                          <p>Original form token</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2372 d119504e2334 ">
                                          <p>3</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2383" headers="d119504e2328 ">
                                          <p><code class="codeph">ATTR TEXT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2383 d119504e2331 ">
                                          <p>Text that occurs in attribute.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2383 d119504e2334 ">
                                          <p>4</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2394" headers="d119504e2328 ">
                                          <p><code class="codeph">ATTR SEC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2394 d119504e2331 ">
                                          <p>Attribute section.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2394 d119504e2334 ">
                                          <p>5</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2405" headers="d119504e2328 ">
                                          <p><code class="codeph">PREFIX</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2405 d119504e2331 ">
                                          <p>Prefix token.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2405 d119504e2334 ">
                                          <p>6</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2416" headers="d119504e2328 ">
                                          <p><code class="codeph">PATH SEC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2416 d119504e2331 ">
                                          <p>Path section.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2416 d119504e2334 ">
                                          <p>7</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2427" headers="d119504e2328 ">
                                          <p><code class="codeph">PATH ATTR</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2427 d119504e2331 ">
                                          <p>Path attribute section.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2427 d119504e2334 ">
                                          <p>8</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2438" headers="d119504e2328 ">
                                          <p><code class="codeph">STEM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2438 d119504e2331 ">
                                          <p>Stem form token.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2438 d119504e2334 ">
                                          <p>9</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2449" headers="d119504e2328 ">
                                          <p><code class="codeph">FIELD &lt;name&gt; TEXT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2449 d119504e2331 ">
                                          <p>Text token in field section &lt;name&gt;</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2449 d119504e2334 ">
                                          <p>16-79</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2461" headers="d119504e2328 ">
                                          <p><code class="codeph">FIELD &lt;name&gt; PREFIX</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2461 d119504e2331 ">
                                          <p>Prefix token in field section &lt;name&gt;</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2461 d119504e2334 ">
                                          <p>616-916</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2472" headers="d119504e2328 ">
                                          <p><code class="codeph">FIELD &lt;name&gt; STEM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2472 d119504e2331 ">
                                          <p>Stem token in field section &lt;name&gt;</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2472 d119504e2334 ">
                                          <p>916-979</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2483" headers="d119504e2328 ">
                                          <p><code class="codeph">NDATA &lt;name&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2483 d119504e2331 ">
                                          <p><code class="codeph">NDATA</code>-type token
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2483 d119504e2334 ">
                                          <p>200-299</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2496" headers="d119504e2328 ">
                                          <p><code class="codeph">TOKEN_TYPE_ATTR_TXT_PFIX</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2496 d119504e2331 ">
                                          <p>Attribute text prefix.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2496 d119504e2334 ">
                                          <p>604</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="38%" id="d119504e2507" headers="d119504e2328 ">
                                          <p><code class="codeph">TOKEN_TYPE_ATTR_TXT_STEM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="39%" headers="d119504e2507 d119504e2331 ">
                                          <p>Attribute text stem.</p>
                                       </td>
                                       <td align="left" valign="top" width="23%" headers="d119504e2507 d119504e2334 ">
                                          <p>904</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>For <code class="codeph">FIELD</code> types, the index metadata needs to be read, so if you are going to be calling this a lot for such things, you might want to consider caching the values in local variables rather than calling token_type over and over again.
                           </p>
                           <p>The constant types (0 - 9) also have constants in this package defined.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-465C9537-19CA-4B1B-9B41-257EBA04B816">Notes</p>
                     <p>To get token types for <code class="codeph">MDATA</code> tokens, do not use <code class="codeph">CTX_REPORT.TOKEN_TYPE</code>; use the <a href="oracle-text-CONTAINS-query-operators.html#GUID-B995F693-A4AA-493D-A62D-6D79857BA50F">MDATA</a> operator instead. (See <span class="q">"<a href="oracle-text-CONTAINS-query-operators.html#GUID-B995F693-A4AA-493D-A62D-6D79857BA50F">MDATA</a>"</span>.) The syntax to use is '<code class="codeph">MDATA</code> <span class="italic">secname</span>'. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-DC188F45-1247-4399-9458-F3448004AC2F">Example</p><pre class="oac_no_warn" dir="ltr">typenum := ctx_report.token_type('myindex', 'field author text');</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="CCREF24106"></a><div class="props_rev_3"><a id="GUID-06C55318-69A1-499E-B5C8-D7FC163A832C" name="GUID-06C55318-69A1-499E-B5C8-D7FC163A832C"></a><h3 id="CCREF-GUID-06C55318-69A1-499E-B5C8-D7FC163A832C" class="sect3"><span class="enumeration_section">13.12 </span>VALIDATE_INDEX
               </h3>
               <div>
                  <div class="section">
                     <p>Provides diagnostics if index corruption is believed to have occurred. <code class="codeph">CTX_REPORT.VALIDATE_INDEX</code> checks an index (or a partition for a locally partitioned index) and reports whether or not any corruption has been detected. <code class="codeph">VALIDATE_INDEX</code> only checks $I rows that have <code class="codeph">token_type</code> <code class="codeph">0</code> and does not check other rows that contain information about sections, such as the <code class="codeph">NDATA</code> section.
                     </p>
                     <p>This procedure is primarily intended as a diagnostic tool to be used under the direction of Oracle Support.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
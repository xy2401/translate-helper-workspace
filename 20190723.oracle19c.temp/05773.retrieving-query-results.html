<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Retrieving Query Results</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Java API Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Java API Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="olap-java-api-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:53:39-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2000, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96402-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="understanding-cursor-classes-and-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="creating-dynamic-queries.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP Java API Developer's Guide">
    <meta name="dcterms.isVersionOf" content="OLAAP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="understanding-cursor-classes-and-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="creating-dynamic-queries.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java API Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Retrieving Query Results</li>
            </ol>
            <a id="GUID-41769CCE-61BC-4A3C-8086-A4F6342458DA" name="GUID-41769CCE-61BC-4A3C-8086-A4F6342458DA"></a><a id="OLAAP362"></a>
            
            <h2 id="OLAAP-GUID-41769CCE-61BC-4A3C-8086-A4F6342458DA" class="sect2"><span class="enumeration_chapter">9 </span> Retrieving Query Results
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to retrieve the results of a query with an Oracle OLAP Java API <code class="codeph">Cursor</code> and how to gain access to those results. This chapter also describes how to customize the behavior of a <code class="codeph">Cursor</code> to fit your method of displaying the results. For information on the class hierarchies of <code class="codeph">Cursor</code> and its related classes, and for information on the <code class="codeph">Cursor</code> concepts of position, fetch size, and extent, see <a href="understanding-cursor-classes-and-concepts.html#GUID-317FD4C8-9000-4A25-99FC-4D84D1894E0B"> Understanding Cursor Classes and Concepts</a>. 
               </p>
               <p>This chapter includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="retrieving-query-results.html#GUID-8A1CAB10-C688-4366-BC57-8B41170BEE37">Retrieving the Results of a Query</a></p>
                  </li>
                  <li>
                     <p><a href="retrieving-query-results.html#GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB">Navigating a CompoundCursor for Different Displays of Data</a></p>
                  </li>
                  <li>
                     <p><a href="retrieving-query-results.html#GUID-7CA568E5-D368-4C65-BA47-51D095DFA335">Specifying the Behavior of a Cursor</a></p>
                  </li>
                  <li>
                     <p><a href="retrieving-query-results.html#GUID-9FC27E5E-C901-4838-B157-23834A3244A9">Calculating Extent and Starting and Ending Positions of a Value</a></p>
                  </li>
                  <li>
                     <p><a href="retrieving-query-results.html#GUID-BA2A974A-FF8F-49A1-8FF7-489E6BF5A9A5">Specifying a Fetch Size</a></p>
                  </li>
               </ul>
            </div><a id="OLAAP364"></a><a id="OLAAP363"></a><div class="props_rev_3"><a id="GUID-8A1CAB10-C688-4366-BC57-8B41170BEE37" name="GUID-8A1CAB10-C688-4366-BC57-8B41170BEE37"></a><h3 id="OLAAP-GUID-8A1CAB10-C688-4366-BC57-8B41170BEE37" class="sect3"><span class="enumeration_section">9.1 </span>Retrieving the Results of a Query
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d26911e116" class="indexterm-anchor"></a>A query is an OLAP Java API <code class="codeph">Source</code> that specifies the data that you want to retrieve from the data store and any calculations that you want Oracle OLAP to perform on the data. A <code class="codeph">Cursor</code> is the object that retrieves, or <span class="italic">fetches</span>, the result set specified by a <code class="codeph">Source</code>. Creating a <code class="codeph">Cursor</code> for a <code class="codeph">Source</code> involves the following steps:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Get a primary <code class="codeph">Source</code> from an <code class="codeph">MdmObject</code> or create a derived <code class="codeph">Source</code> through operations on a <code class="codeph">DataProvider</code> or a <code class="codeph">Source</code>. For information on getting or creating <code class="codeph">Source</code> objects, see <a href="understanding-source-objects.html#GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2"> Understanding Source Objects</a>.</span></li>
                     <li><span>If the <code class="codeph">Source</code> is a derived <code class="codeph">Source</code>, then commit the <code class="codeph">Transaction</code> in which you created the <code class="codeph">Source</code>. To commit the <code class="codeph">Transaction</code>, call the <code class="codeph">commitCurrentTransaction</code> method of your <code class="codeph">TransactionProvider</code>. For more information on committing a <code class="codeph">Transaction</code>, see <a href="using-transaction-provider.html#GUID-E290E8B5-CC10-4BDF-91B1-7189BE7F12B9"> Using a TransactionProvider</a>. If the <code class="codeph">Source</code> is a primary <code class="codeph">Source</code>, then you do not need to commit the <code class="codeph">Transaction</code>.</span></li>
                     <li><span>Create a <code class="codeph">CursorManager</code> by calling a <code class="codeph">createCursorManager</code> method of your <code class="codeph">DataProvider</code> and passing that method the <code class="codeph">Source</code>.</span></li>
                     <li><span>Create a <code class="codeph">Cursor</code> by calling the <code class="codeph">createCursor</code> method of the <code class="codeph">CursorManager</code>.</span></li>
                  </ol>
                  <div class="example" id="GUID-8A1CAB10-C688-4366-BC57-8B41170BEE37__I1006606">
                     <p class="titleinexample">Example 9-1 Creating a Cursor</p>
                     <p><a id="d26911e240" class="indexterm-anchor"></a><a id="d26911e244" class="indexterm-anchor"></a><a id="d26911e248" class="indexterm-anchor"></a><a id="d26911e252" class="indexterm-anchor"></a>This example creates a <code class="codeph">Cursor</code> for the derived <code class="codeph">Source</code> named <code class="codeph">querySource</code>. The example uses a <code class="codeph">DataProvider</code> named <code class="codeph">dp</code>. The example creates a <code class="codeph">CursorManager</code> named <code class="codeph">cursorMngr</code> and a <code class="codeph">Cursor</code> named <code class="codeph">queryCursor</code>.
                     </p>
                     <p>Finally, the example closes the <code class="codeph">CursorManager</code>. When you have finished using the <code class="codeph">Cursor</code>, you should close the <code class="codeph">CursorManager</code> to free resources.
                     </p><pre class="oac_no_warn" dir="ltr">CursorManager cursorMngr = dp.createCursorManager(querySource);
Cursor queryCursor = cursorMngr.createCursor();

// Use the Cursor in some way, such as to display the values of it.

cursorMngr.close();</pre></div>
                  <!-- class="example" -->
               </div><a id="OLAAP366"></a><a id="OLAAP367"></a><a id="OLAAP368"></a><a id="OLAAP369"></a><a id="OLAAP365"></a><div class="props_rev_3"><a id="GUID-2BC05080-A108-4728-9465-9DC97510FCB2" name="GUID-2BC05080-A108-4728-9465-9DC97510FCB2"></a><h4 id="OLAAP-GUID-2BC05080-A108-4728-9465-9DC97510FCB2" class="sect4"><span class="enumeration_section">9.1.1 </span>Getting Values from a Cursor
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d26911e339" class="indexterm-anchor"></a>The <code class="codeph">Cursor</code> interface encapsulates the notion of a <span class="italic">current position</span> and has methods for moving the current position. The <code class="codeph">ValueCursor</code> and <code class="codeph">CompoundCursor</code> interfaces extend the <code class="codeph">Cursor</code> interface. The Oracle OLAP Java API has implementations of the <code class="codeph">ValueCursor</code> and <code class="codeph">CompoundCursor</code> interfaces. Calling the <code class="codeph">createCursor</code> method of a <code class="codeph">CursorManager</code> returns either a <code class="codeph">ValueCursor</code> or a <code class="codeph">CompoundCursor</code> implementation, depending on the <code class="codeph">Source</code> for which you are creating the <code class="codeph">Cursor</code>.
                        </p>
                        <p>A <code class="codeph">ValueCursor</code> is returned for a <code class="codeph">Source</code> that has a single set of values. A <code class="codeph">ValueCursor</code> has a value at its current position, and it has methods for getting the value at the current position.
                        </p>
                        <p>A <code class="codeph">CompoundCursor</code> is created for a <code class="codeph">Source</code> that has more than one set of values, which is a <code class="codeph">Source</code> that has one or more outputs. Each set of values of the <code class="codeph">Source</code> is represented by a child <code class="codeph">ValueCursor</code> of the <code class="codeph">CompoundCursor</code>. A <code class="codeph">CompoundCursor</code> has methods for getting its child <code class="codeph">Cursor</code> objects.
                        </p>
                        <p><a id="d26911e424" class="indexterm-anchor"></a>The structure of the <code class="codeph">Source</code> determines the structure of the <code class="codeph">Cursor</code>. A <code class="codeph">Source</code> can have nested outputs, which occurs when one or more of the outputs of the <code class="codeph">Source</code> is itself a <code class="codeph">Source</code> with outputs. If a <code class="codeph">Source</code> has a nested output, then the <code class="codeph">CompoundCursor</code> for that <code class="codeph">Source</code> has a child <code class="codeph">CompoundCursor</code> for that nested output.
                        </p>
                        <p>The <code class="codeph">CompoundCursor</code> coordinates the positions of the child <code class="codeph">Cursor</code> objects that it contains. The current position of the <code class="codeph">CompoundCursor</code> specifies one set of positions of the child <code class="codeph">Cursor</code> objects.
                        </p>
                        <p>For an example of a <code class="codeph">Source</code> that has only one level of output values, see <a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006671">Example 9-4</a>. For an example of a <code class="codeph">Source</code> that has nested output values, see <a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006700">Example 9-5</a>.
                        </p>
                        <p><a id="d26911e484" class="indexterm-anchor"></a>An example of a <code class="codeph">Source</code> that represents a single set of values is one returned by the <code class="codeph">getSource</code> method of an <code class="codeph">MdmDimension</code>, such as an <code class="codeph">MdmPrimaryDimension</code> that represents product values. Creating a <code class="codeph">Cursor</code> for that <code class="codeph">Source</code> returns a <code class="codeph">ValueCursor</code>. Calling the <code class="codeph">getCurrentValue</code> method returns the product value at the current position of that <code class="codeph">ValueCursor</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006620">
                        <p class="titleinexample">Example 9-2 Getting a Single Value from a ValueCursor</p>
                        <p>This example gets the <code class="codeph">Source</code> from <code class="codeph">mdmProdHier</code>, which is an <code class="codeph">MdmLevelHierarchy</code> that represents product values, and creates a <code class="codeph">Cursor</code> for that <code class="codeph">Source</code>. The example sets the current position to the fifth element of the <code class="codeph">ValueCursor</code> and gets the product value from the <code class="codeph">Cursor</code>. The example then closes the <code class="codeph">CursorManager</code>. In the example, <code class="codeph">dp</code> is the <code class="codeph">DataProvider</code>.
                        </p><pre class="oac_no_warn" dir="ltr">Source prodSource = mdmProdHier.getSource();
// Because prodSource is a primary Source, you do not need to
// commit the current Transaction.
CursorManager cursorMngr = dp.createCursorManager(prodSource);
Cursor prodCursor = cursorMngr.createCursor();
// Cast the Cursor to a ValueCursor.
ValueCursor prodValues = (ValueCursor) prodCursor;
// Set the position to the fifth element of the ValueCursor.
prodValues.setPosition(5);

// Product values are strings. Get the value at the current position.
String value = prodValues.getCurrentString();

// Do something with the value, such as display it.

// Close the CursorManager.
cursorMngr.close();
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006645">
                        <p class="titleinexample">Example 9-3 Getting All of the Values from a ValueCursor</p>
                        <p><a id="d26911e559" class="indexterm-anchor"></a>This example uses the same <code class="codeph">Cursor</code> as <a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006620">Example 9-2</a>. This example uses a <code class="codeph">do...while</code> loop and the <code class="codeph">next</code> method of the <code class="codeph">ValueCursor</code> to move through the positions of the <code class="codeph">ValueCursor</code>. The <code class="codeph">next</code> method begins at a valid position and returns <code class="codeph">true</code> when an additional position exists in the <code class="codeph">Cursor</code>. It also advances the current position to that next position.
                        </p>
                        <p>The example sets the position to the first position of the <code class="codeph">ValueCursor</code>. The example loops through the positions and uses the <code class="codeph">getCurrentValue</code> method to get the value at the current position.
                        </p><pre class="oac_no_warn" dir="ltr">// prodValues is the ValueCursor for prodSource.
prodValues.setPosition(1);
do 
{
&nbsp;&nbsp;println(prodValues.getCurrentValue);
} while(prodValues.next());
</pre><p><a id="d26911e602" class="indexterm-anchor"></a><a id="d26911e606" class="indexterm-anchor"></a><a id="d26911e610" class="indexterm-anchor"></a><a id="d26911e614" class="indexterm-anchor"></a>The values of the result set represented by a <code class="codeph">CompoundCursor</code> are in the child <code class="codeph">ValueCursor</code> objects of the <code class="codeph">CompoundCursor</code>. To get those values, you must get the child <code class="codeph">ValueCursor</code> objects from the <code class="codeph">CompoundCursor</code>.
                        </p>
                        <p><a id="d26911e636" class="indexterm-anchor"></a>An example of a <code class="codeph">CompoundCursor</code> is one that is returned by calling the <code class="codeph">createCursor</code> method of a <code class="codeph">CursorManager</code> for a <code class="codeph">Source</code> that represents the values of a measure as specified by selected values from the dimensions of the measure.
                        </p>
                        <p><a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006671">Example 9-4</a> uses a <code class="codeph">Source</code>, named <code class="codeph">units</code>, that results from calling the <code class="codeph">getSource</code> method of an <code class="codeph">MdmBaseMeasure</code> that represents the number of units sold. The dimensions of the measure are <code class="codeph">MdmPrimaryDimension</code> objects representing products, customers, times, and channels. This example uses <code class="codeph">Source</code> objects that represent selected values from the default hierarchies of those dimensions. The names of those <code class="codeph">Source</code> objects are <code class="codeph">prodSel</code>, <code class="codeph">custSel</code>, <code class="codeph">timeSel</code>, and <code class="codeph">chanSel</code>. The creation of the <code class="codeph">Source</code> objects representing the measure and the dimension selections is not shown.
                        </p>
                        <p><a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006671">Example 9-4</a> joins the dimension selections to the measure, which results in a <code class="codeph">Source</code> named <code class="codeph">unitsForSelections</code>. It creates a <code class="codeph">CompoundCursor</code>, named <code class="codeph">unitsForSelCursor</code>, for <code class="codeph">unitsForSelections</code>, and gets the base <code class="codeph">ValueCursor</code> and the outputs from the <code class="codeph">CompoundCursor</code>. Each output is a <code class="codeph">ValueCursor</code>, in this case. The outputs are returned in a <code class="codeph">List</code>. The order of the outputs in the <code class="codeph">List</code> is the inverse of the order in which the outputs were added to the list of outputs by the successive join operations. In the example, <code class="codeph">dp</code> is the <code class="codeph">DataProvider</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006671">
                        <p class="titleinexample">Example 9-4 Getting ValueCursor Objects from a CompoundCursor</p><pre class="oac_no_warn" dir="ltr">Source unitsForSelections = units.join(prodSel)
                                 .join(custSel)
                                 .join(timeSel)
                                 .join(chanSel);
// Commit the current Transaction (code not shown).

// Create a Cursor for unitsForSelections.
CursorManager cursorMngr = dp.createCursorManager(unitsForSelections);
CompoundCursor unitsForSelCursor = (CompoundCursor)
                                    cursorMngr.createCursor();

// Get the base ValueCursor.
ValueCursor specifiedUnitsVals = unitsForSelCursor.getValueCursor();

// Get the outputs.
List outputs = unitsForSelCursor.getOutputs();
ValueCursor chanSelVals = (ValueCursor) outputs.get(0);
ValueCursor timeSelVals = (ValueCursor) outputs.get(1);
ValueCursor custSelVals = (ValueCursor) outputs.get(2);
ValueCursor prodSelVals = (ValueCursor) outputs.get(3);

// You can now get the values from the ValueCursor objects.
// When you have finished using the Cursor objects, close the CursorManager.
cursorMngr.close();
</pre><p><a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006700">Example 9-5</a> uses the same units measure as <a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006671">Example 9-4</a>, but it joins the dimension selections to the measure differently. <a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006700">Example 9-5</a> joins two of the dimension selections together. It then joins the result to the <code class="codeph">Source</code> produced by joining the single dimension selections to the measure. The resulting <code class="codeph">Source</code>, <code class="codeph">unitsForSelections</code>, represents a query has nested outputs, which means it has more than one level of outputs.
                        </p>
                        <p>The <code class="codeph">CompoundCursor</code> that this example creates for <code class="codeph">unitsForSelections</code> therefore also has nested outputs. The <code class="codeph">CompoundCursor</code> has a child base <code class="codeph">ValueCursor</code> and has as outputs three child <code class="codeph">ValueCursor</code> objects and one child <code class="codeph">CompoundCursor</code>.
                        </p>
                        <p><a href="retrieving-query-results.html#GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006700">Example 9-5</a> joins the selection of channel dimension values, <code class="codeph">chanSel</code>, to the selection of customer dimension values, <code class="codeph">custSel</code>. The result is <code class="codeph">custByChanSel</code>, a <code class="codeph">Source</code> that has customer values as the base values and channel values as the values of the output. The example joins to <code class="codeph">units</code> the selections of product and time values, and then joins <code class="codeph">custByChanSel</code>. The resulting query is represented by <code class="codeph">unitsForSelections</code>.
                        </p>
                        <p>The example commits the current <code class="codeph">Transaction</code> and creates a <code class="codeph">CompoundCursor</code>, named <code class="codeph">unitsForSelCursor</code>, for <code class="codeph">unitsForSelections</code>.
                        </p>
                        <p>The example gets the base <code class="codeph">ValueCursor</code> and the outputs from the <code class="codeph">CompoundCursor</code>. In the example, <code class="codeph">dp</code> is the <code class="codeph">DataProvider</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-2BC05080-A108-4728-9465-9DC97510FCB2__I1006700">
                        <p class="titleinexample">Example 9-5 Getting Values from a CompoundCursor with Nested Outputs</p><pre class="oac_no_warn" dir="ltr"><a id="d26911e834" class="indexterm-anchor"></a><a id="d26911e838" class="indexterm-anchor"></a>Source custByChanSel = custSel.join(chanSel);
Source unitsForSelections = units.join(prodSel)
                                 .join(timeSel)
                                 .join(custByChanSel);
// Commit the current Transaction (code not shown).

// Create a Cursor for unitsForSelections.
CursorManager cursorMngr = dp.createCursorManager(unitsForSelections);
Cursor unitsForSelCursor = cursorMngr.createCursor();

// Send the Cursor to a method that does different operations 
// depending on whether the Cursor is a CompoundCursor or a 
// ValueCursor.
printCursor(unitsForSelCursor);
cursorMngr.close();
// The remaining code of someMethod is not shown.

// The following code is in from the CursorPrintWriter class.
<a id="d26911e843" class="indexterm-anchor"></a>// The printCursor method has a do...while loop that moves through the positions
// of the Cursor passed to it. At each position, the method prints the number of
// the iteration through the loop and then a colon and a space. The output
// object is a PrintWriter. The method calls the private _printTuple method and
// then prints a new line. A "tuple" is the set of output ValueCursor values
// specified by one position of the parent CompoundCursor. The method prints one
// line for each position of the parent CompoundCursor.
private void printCursor(Cursor rootCursor) 
{
  int i = 1;
  do 
  {
     print(i++ + ": ");
     _printTuple(rootCursor);
     println();
     flush();
  } while(rootCursor.next());
}

// If the Cursor passed to the _printTuple method is a ValueCursor, then
// the method prints the value at the current position of the ValueCursor. 
// If the Cursor passed in is a CompoundCursor, then the method gets the 
// outputs of the CompoundCursor and iterates through the outputs,  
// recursively calling itself for each output. The method then gets the 
// base ValueCursor of the CompoundCursor and calls itself again. 
private void _printTuple(Cursor cursor) 
{
  if(cursor instanceof CompoundCursor) 
  {
    CompoundCursor compoundCursor = (CompoundCursor)cursor;
    // Put an open parenthesis before the value of each output.
    print("(");
    Iterator iterOutputs = compoundCursor.getOutputs().iterator();
    Cursor output = (Cursor)iterOutputs.next();
    _printTuple(output);
    while(iterOutputs.hasNext())
    {
      // Put a comma after the value of each output.
      print(",");
      _printTuple((Cursor)iterOutputs.next());
    }
    // Put a comma after the value of the last output.
    print(",");
    // Get the base ValueCursor.
    _printTuple(compoundCursor.getValueCursor());
    
    // Put a close parenthesis after the base value to indicate  
    // the end of the tuple.
    print(")");
  }
  else if(cursor instanceof ValueCursor) 
  {
    ValueCursor valueCursor = (ValueCursor) cursor;
    if (valueCursor.hasCurrentValue())
      print(valueCursor.getCurrentValue());
    else                       // If this position has a null value.
      print("NA");
  }
}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="OLAAP371"></a><a id="OLAAP372"></a><a id="OLAAP373"></a><a id="OLAAP370"></a><div class="props_rev_3"><a id="GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB" name="GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB"></a><h3 id="OLAAP-GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB" class="sect3"><span class="enumeration_section">9.2 </span>Navigating a CompoundCursor for Different Displays of Data
               </h3>
               <div>
                  <div class="section">
                     <p>With the methods of a <code class="codeph">CompoundCursor</code> you can easily move through, or navigate, the <code class="codeph">CompoundCursor</code> structure and get the values from the <code class="codeph">ValueCursor</code> descendents of the <code class="codeph">CompoundCursor</code>. Data from a multidimensional OLAP query is often displayed in a crosstab format, or as a table or a graph.
                     </p>
                     <p>To display the data for multiple rows and columns, you loop through the positions at different levels of the <code class="codeph">CompoundCursor</code> depending on the needs of your display. For some displays, such as a table, you loop through the positions of the parent <code class="codeph">CompoundCursor</code>. For other displays, such as a crosstab, you loop through the positions of the child <code class="codeph">Cursor</code> objects.
                     </p>
                     <p><a id="d26911e913" class="indexterm-anchor"></a><a id="d26911e917" class="indexterm-anchor"></a>To display the results of a query in a table view, in which each row contains a value from each output <code class="codeph">ValueCursor</code> and from the base <code class="codeph">ValueCursor</code>, you determine the position of the top-level, or root, <code class="codeph">CompoundCursor</code> and then iterate through its positions. <a href="retrieving-query-results.html#GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB__I1006777">Example 9-6</a> displays only a portion of the result set at one time. It creates a <code class="codeph">Cursor</code> for a <code class="codeph">Source</code> that represents a query that is based on a measure that has unit cost values. The dimensions of the measure are the product and time dimensions. The creation of the primary <code class="codeph">Source</code> objects and the derived selections of the dimensions is not shown.
                     </p>
                     <p>The example joins the <code class="codeph">Source</code> objects representing the dimension value selections to the <code class="codeph">Source</code> representing the measure. It commits the current <code class="codeph">Transaction</code> and then creates a <code class="codeph">Cursor</code>, casting it to a <code class="codeph">CompoundCursor</code>. The example sets the position of the <code class="codeph">CompoundCursor</code>, iterates through twelve positions of the <code class="codeph">CompoundCursor</code>, and prints out the values specified at those positions. The <code class="codeph">DataProvider</code> is <code class="codeph">dp</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB__I1006777">
                     <p class="titleinexample">Example 9-6 Navigating for a Table View</p><pre class="oac_no_warn" dir="ltr">Source unitPriceByMonth = unitPrice.join(productSel)
                                   .join(timeSel);
// Commit the current Transaction (code not shown).

// Create a Cursor for unitPriceByMonth.
CursorManager cursorMngr = dp.createCursorManager(unitPriceByMonth);
CompoundCursor rootCursor = (CompoundCursor) cursorMngr.createCursor();

// Determine a starting position and the number of rows to display.
int start = 7;
int numRows = 12;

println("Month     Product     Unit Price");
println("-------   --------   ----------");

// Iterate through the specified positions of the root CompoundCursor.
// Assume that the Cursor contains at least (start + numRows) positions.
for(int pos = start; pos &lt; start + numRows; pos++) 
{
  // Set the position of the root CompoundCursor.
  rootCursor.setPosition(pos);
  // Print the local values of the output and base ValueCursors.
  // The getLocalValue method gets the local value from the unique
  // value of a dimension element.
  String timeValue = ((ValueCursor)rootCursor.getOutputs().get(0))
                     .getCurrentString();
  String timeLocVal = getLocalValue(timeValue);
  String prodValue = ((ValueCursor)rootCursor.getOutputs().get(1))
                     .getCurrentString();
  String prodLocVal = getLocalValue(prodValue);
  Object price = rootCursor.getValueCursor().getCurrentValue();
  println(timeLocVal + "   " + prodLocVal + "   " +  price);
}
cursorMngr.close();
</pre><p>If the time selection for the query has eight values, such as the first month of each calendar quarter for the years 2001 and 2002, and the product selection has three values, then the result set of the <code class="codeph">unitPriceByMonth</code> query has twenty-four positions. The example displays the following table, which has the values specified by positions 7 through 18 of the <code class="codeph">CompoundCursor</code>.
                     </p><pre class="oac_no_warn" dir="ltr">Month     Product    Unit Price
-------   --------   ----------
2001.07   ENVY ABM   2892.18
2001.07   ENVY EXE   3155.91
2001.07   ENVY STD   2505.57
2001.10   ENVY ABM   2856.86
2001.10   ENVY EXE   3105.53
2001.10   ENVY STD   2337.3
2002.01   ENVY ABM   2896.77
2002.01   ENVY EXE   3008.95
2002.01   ENVY STD   2140.71
2002.04   ENVY ABM   2880.39
2002.04   ENVY EXE   2953.96
2002.04   ENVY STD   2130.88
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB__I1006801">
                     <p class="titleinexample">Example 9-7 Navigating for a Crosstab View Without Pages</p>
                     <p>This example uses the same query as <a href="retrieving-query-results.html#GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB__I1006777">Example 9-6</a>. In a crosstab view, the first row is column headings, which are the values from <code class="codeph">prodSel</code> in this example. The output for <code class="codeph">prodSel</code> is the faster varying output because the <code class="codeph">prodSel</code> dimension selection is the last output in the list of outputs that results from the operations that join the measure to the dimension selections. The remaining rows begin with a row heading. The row headings are values from the slower varying output, which is <code class="codeph">timeSel</code>. The remaining positions of the rows, under the column headings, contain the <code class="codeph">unitPrice</code> values specified by the set of the dimension values. To display the results of a query in a crosstab view, you iterate through the positions of the children of the top-level <code class="codeph">CompoundCursor</code>. 
                     </p>
                     <p>The <code class="codeph">DataProvider</code> is <code class="codeph">dp</code>.
                     </p><pre class="oac_no_warn" dir="ltr"><a id="d26911e1023" class="indexterm-anchor"></a><a id="d26911e1027" class="indexterm-anchor"></a>Source unitPriceByMonth = unitPrice.join(productSel)
                                   .join(timeSel);
// Commit the current Transaction (code not shown).

// Create a Cursor for unitPriceByMonth.
CursorManager cursorMngr = dp.createCursorManager(unitPriceByMonth);
CompoundCursor rootCursor = (CompoundCursor) cursorMngr.createCursor();

// Get the outputs and the ValueCursor objects.
List outputs = rootCursor.getOutputs();
// The first output has the values of timeSel, the slower varying output.
ValueCursor rowCursor = (ValueCursor) outputs.get(0);
// The second output has the faster varying values of productSel.
ValueCursor columnCursor = (ValueCursor) outputs.get(1);
// The base ValueCursor has the values from unitPrice.
ValueCursor unitPriceValues = rootCursor.getValueCursor();

// Display the values as a crosstab.
println("                     PRODUCT");
println("          ---------------------------------");
print("Month     ");
do 
{
  String value = ((ValueCursor) columnCursor).getCurrentString();
  print(getContext().getLocalValue(value) + "    ");
} while (columnCursor.next());
println("\n-------   --------    --------    --------");

// Reset the column Cursor to its first element.
columnCursor.setPosition(1);

do 
{
  // Print the row dimension values.
  String value = ((ValueCursor) rowCursor).getCurrentString();
  print(getContext().getLocalValue(value) + "    ");
  // Loop over columns.
  do 
  {
    // Print data value.
    print(unitPriceValues.getCurrentValue() + "     ");
  } while (columnCursor.next());
 
  println();
 
  // Reset the column Cursor to its first element.
  columnCursor.setPosition(1);
  } while (rowCursor.next());

cursorMngr.close();
</pre><p>The following is a crosstab view of the values from the result set specified by the <code class="codeph">unitPriceByMonth</code> query. The first line labels the rightmost three columns as having product values. The third line labels the first column as having month values and then labels each of the rightmost three columns with the product value for that column. The remaining lines have the month value in the left column and then have the data values from the units measure for the specified month and product.
                     </p><pre class="oac_no_warn" dir="ltr">                     PRODUCT
          ---------------------------------
Month     ENVY ABM    ENVY EXE    ENVY STD
-------   --------    --------    --------
2001.01    3042.22     3223.28     2426.07
2001.04    3026.12     3107.65     2412.42
2001.07    2892.18     3155.91     2505.57
2001.10    2856.86     3105.53     2337.30
2002.01    2896.77     3008.95     2140.71
2002.04    2880.39     2953.96     2130.88
2002.07    2865.14     3002.34     2074.56
2002.10    2850.88     2943.96     1921.62
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB__I1006860">
                     <p class="titleinexample">Example 9-8 Navigating for a Crosstab View With Pages</p>
                     <p><a id="d26911e1043" class="indexterm-anchor"></a><a id="d26911e1047" class="indexterm-anchor"></a>This example creates a <code class="codeph">Source</code> that is based on a measure of units sold values. The dimensions of the measure are the customer, product, time, and channel dimensions. The <code class="codeph">Source</code> objects for the dimensions represent selections of the dimension values. The creation of those <code class="codeph">Source</code> objects is not shown.
                     </p>
                     <p>The query that results from joining the dimension selections to the measure <code class="codeph">Source</code> represents unit sold values as specified by the values of the outputs. 
                     </p>
                     <p>The example creates a <code class="codeph">Cursor</code> for the query and then sends the <code class="codeph">Cursor</code> to the <code class="codeph">printAsCrosstab</code> method, which prints the values from the <code class="codeph">Cursor</code> in a crosstab. That method calls other methods that print page, column, and row values.
                     </p>
                     <p>The fastest-varying output of the <code class="codeph">Cursor</code> is the selection of products, which has three values (the product items ENVY ABM, ENVY EXE, and ENVY STD). The product values are the column headings of the crosstab. The next fastest-varying output is the selection of customers, which has three values (the customers COMP SERV TOK, COMP WHSE LON, and COMP WHSE SD). Those three values are the row headings. The page dimensions are selections of three time values (the months 2000.01, 2000.02, and 2000.03), and one channel value (DIR, which is the direct sales channel).
                     </p>
                     <p>The <code class="codeph">DataProvider</code> is <code class="codeph">dp</code>. The <code class="codeph">getLocalValue</code> method gets the local value from a unique dimension value.
                     </p><pre class="oac_no_warn" dir="ltr">// In someMethod.
Source unitsForSelections = units.join(prodSel)
                                 .join(custSel)
                                 .join(timeSel)
                                 .join(chanSel);
// Commit the current Transaction (code not shown).

// Create a Cursor for unitsForSelections.
CursorManager cursorMngr = dp.createCursorManager(unitsForSelections);
CompoundCursor unitsForSelCursor = (CompoundCursor) cursorMngr.createCursor();

// Send the Cursor to the printAsCrosstab method.
printAsCrosstab(unitsForSelCursor);

cursorMngr.close();
// The remainder of the code of someMethod is not shown.

private void printAsCrosstab(CompoundCursor rootCursor)
{
  List outputs = rootCursor.getOutputs();
  int nOutputs = outputs.size();

  // Set the initial positions of all outputs.
  Iterator outputIter = outputs.iterator();
  while (outputIter.hasNext())
    ((Cursor) outputIter.next()).setPosition(1);
  
  // The last output is fastest-varying; it represents columns.
  // The next to last output represents rows.
  // All other outputs are on the page.
  Cursor colCursor = (Cursor) outputs.get(nOutputs - 1);
  Cursor rowCursor = (Cursor) outputs.get(nOutputs - 2);
  ArrayList pageCursors = new ArrayList();
  for (int i = 0 ; i &lt; nOutputs - 2 ; i++) 
  {
    pageCursors.add(outputs.get(i));
  }

  // Get the base ValueCursor, which has the data values.
  ValueCursor dataCursor = rootCursor.getValueCursor();

  // Print the pages of the crosstab.
  printPages(pageCursors, 0, rowCursor, colCursor, dataCursor);
}

// Prints the pages of a crosstab.
private void printPages(List pageCursors, int pageIndex, Cursor rowCursor,
                        Cursor colCursor, ValueCursor dataCursor) 
{
  // Get a Cursor for this page.
  Cursor pageCursor = (Cursor) pageCursors.get(pageIndex);

  // Loop over the values of this page dimension.
  do 
  {
    // If this is the fastest-varying page dimension, print a page.
    if (pageIndex == pageCursors.size() - 1) 
    {
      // Print the values of the page dimensions.
      printPageHeadings(pageCursors);

      // Print the column headings.
      printColumnHeadings(colCursor);

      // Print the rows.
      printRows(rowCursor, colCursor, dataCursor);

      // Print a couple of blank lines to delimit pages.
      println();
      println();
    }

    // If this is not the fastest-varying page, recurse to the
    // next fastest-varying dimension.
    else 
    {
      printPages(pageCursors, pageIndex + 1, rowCursor, colCursor, 
                 dataCursor);
    }
  } while (pageCursor.next());

  // Reset this page dimension Cursor to its first element.
  pageCursor.setPosition(1);
}

// Prints the values of the page dimensions on each page.
private void printPageHeadings(List pageCursors) 
{
  // Print the values of the page dimensions.
  Iterator pageIter = pageCursors.iterator();
  while (pageIter.hasNext())
  {
    String value = ((ValueCursor) pageIter.next()).getCurrentString();    
    println(getLocalValue(value));
  }
  println();
}

// Prints the column headings on each page.
private void printColumnHeadings(Cursor colCursor) 
{
  do 
  {
     print("\t");
     String value = ((ValueCursor) colCursor).getCurrentString();
     print(getLocalValue(value));
  } while (colCursor.next());
  println();
  colCursor.setPosition(1);
}

// Prints the rows of each page.
private void printRows(Cursor rowCursor, Cursor colCursor,
                       ValueCursor dataCursor) 
{
  // Loop over rows.
  do 
  {
    // Print row dimension value.
    String value = ((ValueCursor) rowCursor).getCurrentString();
    print(getLocalValue(value));
    print("\t");
    // Loop over columns.
    do 
    {
      // Print data value.
      print(dataCursor.getCurrentValue());
      print("\t");
    } while (colCursor.next());
    println();

    // Reset the column Cursor to its first element.
    colCursor.setPosition(1);
  } while (rowCursor.next());

  // Reset the row Cursor to its first element.
  rowCursor.setPosition(1);
}
</pre><p>The example displays the following values, formatted as a crosstab. The display has added page, column, and row headings to identify the local values of the dimensions.</p><pre class="oac_no_warn" dir="ltr">Channel DIR
Month 2001.01 
                           Product
                ------------------------------ 
Customer        ENVY ABM   ENVY EXE   ENVY STD
-------------   --------   --------   --------
COMP WHSE SD       0          0          1
COMP SERV TOK	      2          4          2
COMP WHSE LON	      1          1          2
 

Channel DIR
Month 2000.02
                           Product
                ------------------------------ 
Customer        ENVY ABM   ENVY EXE   ENVY STD
-------------   --------   --------   --------
COMP WHSE SD       1          1          1
COMP SERV TOK	      5          6          6
COMP WHSE LON	      1          2          2
 

Channel DIR
Month 2000.03
                           Product
                ------------------------------ 
Customer        ENVY ABM   ENVY EXE   ENVY STD
-------------   --------   --------   --------
COMP WHSE SD       0          2          2
COMP SERV TOK	      2          0          2
COMP WHSE LON	      0          2          3</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAAP375"></a><a id="OLAAP374"></a><div class="props_rev_3"><a id="GUID-7CA568E5-D368-4C65-BA47-51D095DFA335" name="GUID-7CA568E5-D368-4C65-BA47-51D095DFA335"></a><h3 id="OLAAP-GUID-7CA568E5-D368-4C65-BA47-51D095DFA335" class="sect3"><span class="enumeration_section">9.3 </span>Specifying the Behavior of a Cursor
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d26911e1141" class="indexterm-anchor"></a>You can specify the following aspects of the behavior of a <code class="codeph">Cursor</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <span class="bold">fetch size</span> of a <code class="codeph">Cursor</code>, which is the number of elements of the result set that the <code class="codeph">Cursor</code> retrieves during one fetch operation.
                           </p>
                        </li>
                        <li>
                           <p>Whether or not Oracle OLAP calculates the <span class="bold">extent</span> of the <code class="codeph">Cursor</code>. The extent is the total number of positions of the <code class="codeph">Cursor</code>. The extent of a child <code class="codeph">Cursor</code> of a <code class="codeph">CompoundCursor</code> is relative to any of the slower varying outputs of the <code class="codeph">CompoundCursor</code>.
                           </p>
                        </li>
                        <li>
                           <p>Whether or not Oracle OLAP calculates the positions in the parent <code class="codeph">Cursor</code> at which the value of a child <code class="codeph">Cursor</code> starts or ends. 
                           </p>
                        </li>
                     </ul>
                     <p>To specify the behavior of <code class="codeph">Cursor</code>, you use methods of a <code class="codeph">CursorSpecification</code> that you specify for that <code class="codeph">Cursor</code>. A <code class="codeph">CursorSpecification</code> implements the <code class="codeph">CursorInfoSpecification</code> interface.
                     </p>
                     <p> You create a <code class="codeph">CursorSpecification</code> for a <code class="codeph">Source</code> by calling the <code class="codeph">createCursorInfoSpecification</code> method of the <code class="codeph">DataProvider</code>. You use methods of the <code class="codeph">CursorSpecification</code> to set the characteristics that you want. You then create a <code class="codeph">CursorManager</code> by calling the appropriate <code class="codeph">createCursorManager</code> method of the <code class="codeph">DataProvider</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-7CA568E5-D368-4C65-BA47-51D095DFA335__GUID-625A646B-88A9-4DCD-9BA6-C47C0090C536">
                        <p class="notep1">Note:</p>
                        <p>Specifying the calculation of the extent or the starting or ending position in a parent <code class="codeph">Cursor</code> of the current value of a child <code class="codeph">Cursor</code> can be a very expensive operation. The calculation can require considerable time and computing resources. You should only specify these calculations when your application needs them.
                        </p>
                     </div>
                     <p>For more information on the relationships of <code class="codeph">Source</code>, <code class="codeph">Cursor</code>, and <code class="codeph">CursorSpecification</code> objects or the concepts of fetch size, extent, or <code class="codeph">Cursor</code> positions, see <a href="understanding-cursor-classes-and-concepts.html#GUID-317FD4C8-9000-4A25-99FC-4D84D1894E0B"> Understanding Cursor Classes and Concepts</a>.
                     </p>
                     <p><a id="d26911e1266" class="indexterm-anchor"></a><a id="d26911e1270" class="indexterm-anchor"></a><a href="retrieving-query-results.html#GUID-7CA568E5-D368-4C65-BA47-51D095DFA335__I1006988">Example 9-9</a> creates a <code class="codeph">Source</code>, creates a <code class="codeph">CompoundCursorSpecification</code> for a <code class="codeph">Source</code>, and then gets the child <code class="codeph">CursorSpecification</code> objects from the top-level <code class="codeph">CompoundCursorSpecification</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-7CA568E5-D368-4C65-BA47-51D095DFA335__I1006988">
                     <p class="titleinexample">Example 9-9 Getting CursorSpecification Objects for a Source</p><pre class="oac_no_warn" dir="ltr">Source unitsForSelections = units.join(prodSel)
                                 .join(custSel)
                                 .join(timeSel)
                                 .join(chanSel);
// Commit the current Transaction (code not shown).

// Create a CompoundCursorSpecification for unitsForSelections.
CompoundCursorSpecification rootCursorSpec = (CompoundCursorSpecification)
                      dp.createCursorInfoSpecification(unitsForSelections);

// Get the ValueCursorSpecification for the base values.
ValueCursorSpecification baseValueSpec =
                        rootCursorSpec.getValueCursorSpecification();

// Get the ValueCursorSpecification objects for the outputs.
List outputSpecs = rootCursorSpec.getOutputs();
ValueCursorSpecification chanSelValCSpec = 
                       (ValueCursorSpecification) outputSpecs.get(0);
ValueCursorSpecification timeSelValCSpec = 
                       (ValueCursorSpecification) outputSpecs.get(1);
ValueCursorSpecification prodSelValCSpec = 
                       (ValueCursorSpecification) outputSpecs.get(2);
ValueCursorSpecification custSelValCSpec = 
                       (ValueCursorSpecification) outputSpecs.get(3);
</pre><p>Once you have the <code class="codeph">CursorSpecification</code> objects, you can use their methods to specify the behavior of the <code class="codeph">Cursor</code> objects that correspond to them.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAAP377"></a><a id="OLAAP378"></a><a id="OLAAP379"></a><a id="OLAAP376"></a><div class="props_rev_3"><a id="GUID-9FC27E5E-C901-4838-B157-23834A3244A9" name="GUID-9FC27E5E-C901-4838-B157-23834A3244A9"></a><h3 id="OLAAP-GUID-9FC27E5E-C901-4838-B157-23834A3244A9" class="sect3"><span class="enumeration_section">9.4 </span>Calculating Extent and Starting and Ending Positions of a Value
               </h3>
               <div>
                  <p><a id="d26911e1344" class="indexterm-anchor"></a>To manage the display of the result set retrieved by a <code class="codeph">CompoundCursor</code>, you sometimes need to know the extent of the child <code class="codeph">Cursor</code> components. You might also want to know the position at which the current value of a child <code class="codeph">Cursor</code> starts in the parent <code class="codeph">CompoundCursor</code>. You might want to know the <span class="bold">span</span> of the current value of a child <code class="codeph">Cursor</code>. The span is the number of positions of the parent <code class="codeph">Cursor</code> that the current value of the child <code class="codeph">Cursor</code> occupies. You can calculate the span by subtracting the starting position of the value from the ending position and subtracting 1.
                  </p>
                  <p>Before you can get the extent of a <code class="codeph">Cursor</code> or get the starting or ending positions of a value in the parent <code class="codeph">Cursor</code>, you must specify that you want Oracle OLAP to calculate the extent or those positions. To specify the performance of those calculations, you use methods of the <code class="codeph">CursorSpecification</code> for the <code class="codeph">Cursor</code>.
                  </p>
                  <p><a id="d26911e1389" class="indexterm-anchor"></a><a id="d26911e1393" class="indexterm-anchor"></a><a href="retrieving-query-results.html#GUID-9FC27E5E-C901-4838-B157-23834A3244A9__I1007004">Example 9-10</a> specifies calculating the extent of a <code class="codeph">Cursor</code>. The example uses the <code class="codeph">CompoundCursorSpecification</code> from <a href="retrieving-query-results.html#GUID-7CA568E5-D368-4C65-BA47-51D095DFA335__I1006988">Example 9-9</a>.
                  </p>
                  <div class="example" id="GUID-9FC27E5E-C901-4838-B157-23834A3244A9__I1007004">
                     <p class="titleinexample">Example 9-10 Specifying the Calculation of the Extent of a Cursor</p><pre class="oac_no_warn" dir="ltr">rootCursorSpec.setExtentCalculationSpecified(true);
</pre><p>You can use methods of a <code class="codeph">CursorSpecification</code> to determine whether the <code class="codeph">CursorSpecification</code> specifies the calculation of the extent of a <code class="codeph">Cursor</code> as in the following example.
                     </p><pre class="oac_no_warn" dir="ltr">boolean isSet = rootCursorSpec.isExtentCalculationSpecified();
</pre><p><a id="d26911e1426" class="indexterm-anchor"></a><a href="retrieving-query-results.html#GUID-9FC27E5E-C901-4838-B157-23834A3244A9__I1007024">Example 9-11</a> specifies calculating the starting and ending positions of the current value of a child <code class="codeph">Cursor</code> in the parent <code class="codeph">Cursor</code>. The example uses the <code class="codeph">CompoundCursorSpecification</code> from <a href="retrieving-query-results.html#GUID-7CA568E5-D368-4C65-BA47-51D095DFA335__I1006988">Example 9-9</a>.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9FC27E5E-C901-4838-B157-23834A3244A9__I1007024">
                     <p class="titleinexample">Example 9-11 Specifying the Calculation of Starting and Ending Positions in a Parent </p><pre class="oac_no_warn" dir="ltr">// Get the List of CursorSpecification objects for the outputs. 
// Iterate through the list, specifying the calculation of the extent
// for each output CursorSpecification. 
Iterator iterOutputSpecs = rootCursorSpec.getOutputs().iterator();
while(iterOutputSpecs.hasNext()) 
{
  ValueCursorSpecification valCursorSpec = 
    (ValueCursorSpecification)iterOutputSpecs.next();
  valCursorSpec.setParentStartCalculationSpecified(true);
  valCursorSpec.setParentEndCalculationSpecified(true);
}
</pre><p>You can use methods of a <code class="codeph">CursorSpecification</code> to determine whether the <code class="codeph">CursorSpecification</code> specifies the calculation of the starting or ending positions of the current value of a child <code class="codeph">Cursor</code> in a parent <code class="codeph">Cursor</code>, as in the following example.
                     </p><pre class="oac_no_warn" dir="ltr">Iterator iterOutputSpecs = rootCursorSpec.getOutputs().iterator();
ValueCursorSpecification valCursorSpec =
  (ValueCursorSpecification)iterOutputSpecs.next();
while(iterOutputSpecs.hasNext()) 
{
  if (valCursorSpec.isParentStartCalculationSpecified())
    // Do something.
  if (valCursorSpec.isParentEndCalculationSpecified())
    // Do something.
  valCursorSpec = (ValueCursorSpecification) iterOutputSpecs.next();
}
</pre><p><a href="retrieving-query-results.html#GUID-9FC27E5E-C901-4838-B157-23834A3244A9__I1007049">Example 9-12</a> determines the span of the positions in a parent <code class="codeph">CompoundCursor</code> of the current value of a child <code class="codeph">Cursor</code> for two of the outputs of the <code class="codeph">CompoundCursor</code>. The example uses the <code class="codeph">unitForSelections</code> <code class="codeph">Source</code> from <a href="retrieving-query-results.html#GUID-2FF69CE4-873B-4CBF-B3B0-1376F114FEFB__I1006860">Example 9-8</a>.
                     </p>
                     <p>The example gets the starting and ending positions of the current values of the time and product selections and then calculates the span of those values in the parent <code class="codeph">Cursor</code>. The parent is the root <code class="codeph">CompoundCursor</code>. The <code class="codeph">DataProvider</code> is <code class="codeph">dp</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9FC27E5E-C901-4838-B157-23834A3244A9__I1007049">
                     <p class="titleinexample">Example 9-12 Calculating the Span of the Positions in the Parent of a Value</p><pre class="oac_no_warn" dir="ltr">Source unitsForSelections = units.join(prodSel)
                                 .join(custSel)
                                 .join(timeSel)
                                 .join(chanSel);
// Commit the current Transaction (code not shown).

// Create a CompoundCursorSpecification for unitsForSelections.
CompoundCursorSpecification rootCursorSpec = (CompoundCursorSpecification)
  dp.createCursorInfoSpecification(unitsForSelections);
// Get the CursorSpecification objects for the outputs.
List outputSpecs = rootCursorSpec.getOutputs();
ValueCursorSpecification timeSelValCSpec = 
  (ValueCursorSpecification)outputSpecs.get(1); // Output for time.
ValueCursorSpecification prodSelValCSpec = 
 (ValueCursorSpecification)outputSpecs.get(3);  // Output for product.

// Specify the calculation of the starting and ending positions.
timeSelValCSpec.setParentStartCalculationSpecified(true);
timeSelValCSpec.setParentEndCalculationSpecified(true);
prodSelValCSpec.setParentStartCalculationSpecified(true);
prodSelValCSpec.setParentEndCalculationSpecified(true);

// Create the CursorManager and the Cursor.
CursorManager cursorMngr =
  dp.createCursorManager(unitsForSelections, 100, rootCursorSpec);
CompoundCursor rootCursor = (CompoundCursor) cursorMngr.createCursor();

// Get the child Cursor objects.
ValueCursor baseValCursor = cursor.getValueCursor();
List outputs = rootCursor.getOutputs();
ValueCursor chanSelVals = (ValueCursor) outputs.get(0);
ValueCursor timeSelVals = (ValueCursor) outputs.get(1);
ValueCursor custSelVals = (ValueCursor) outputs.get(2);
ValueCursor prodSelVals = (ValueCursor) outputs.get(3);

// Set the position of the root CompoundCursor.
rootCursor.setPosition(15);

// Get the values at the current position and determine the span
// of the values of the time and product outputs.
print(chanSelVals.getCurrentValue() + ", ");
print(timeSelVals.getCurrentValue() + ",\n  ");
print(custSelVals.getCurrentValue() + ", ");
print(prodSelVals.getCurrentValue() + ", ");
print(baseValCursor.getCurrentValue());
println();

// Determine the span of the values of the two fastest-varying outputs.
long span;
span = (prodSelVals.getParentEnd() - prodSelVals.getParentStart()) +1);
println("\nThe span of " + prodSelVals.getCurrentValue() +
        " at the current position is " + span + ".")
span = (timeSelVals.getParentEnd() - timeSelVals.getParentStart()) +1);
println("The span of " + timeSelVals.getCurrentValue() +
        " at the current position is " + span + ".")
cursorMngr.close();
</pre><p>This example displays the following text.</p><pre class="oac_no_warn" dir="ltr">CHANNEL_PRIMARY::CHANNEL::DIR, CALENDAR_YEAR::MONTH::2000.02, 
  SHIPMENTS::SHIP_TO::COMP SERV TOK, PRODUCT_PRIMARY::ITEM::ENVY STD, 6.0

The span of PRODUCT_PRIMARY::ITEM::ENVY STD at the current position is 1.
The span of CALENDAR_YEAR::MONTH::2000.02 at the current position is 9.</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAAP381"></a><a id="OLAAP380"></a><div class="props_rev_3"><a id="GUID-BA2A974A-FF8F-49A1-8FF7-489E6BF5A9A5" name="GUID-BA2A974A-FF8F-49A1-8FF7-489E6BF5A9A5"></a><h3 id="OLAAP-GUID-BA2A974A-FF8F-49A1-8FF7-489E6BF5A9A5" class="sect3"><span class="enumeration_section">9.5 </span>Specifying a Fetch Size
               </h3>
               <div>
                  <div class="section">
                     <p>The number of elements of a <code class="codeph">Cursor</code> that Oracle OLAP sends to the client application during one fetch operation depends on the fetch size specified for that <code class="codeph">Cursor</code>. The default fetch size is 100. To change the fetch size, you can set the fetch size on the root <code class="codeph">Cursor</code> for a <code class="codeph">Source</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-BA2A974A-FF8F-49A1-8FF7-489E6BF5A9A5__CHDGHJJC">
                     <p class="titleinexample">Example 9-13 Specifying a Fetch Size</p>
                     <p><a id="d26911e1563" class="indexterm-anchor"></a><a id="d26911e1567" class="indexterm-anchor"></a>This example gets the default fetch size from the <code class="codeph">CompoundCursorSpecification</code> from <a href="retrieving-query-results.html#GUID-7CA568E5-D368-4C65-BA47-51D095DFA335__I1006988">Example 9-9</a>. The example creates a <code class="codeph">Cursor</code> and sets a different fetch size on it, and then gets the fetch size for the <code class="codeph">Cursor</code>. The <code class="codeph">DataProvider</code> is <code class="codeph">dp</code>.
                     </p><pre class="oac_no_warn" dir="ltr">println("The default fetch size is "
         + rootCursorSpec.getDefaultFetchSize() + ".");
Source source = rootCursorSpec.getSource();
CursorManager cursorMngr = dp.createCursorManager(source);
Cursor rootCursor = cursorMngr.createCursor();
rootCursor.setFetchSize(10);
println("The fetch size is now " + rootCursor.getFetchSize()) + ".";
</pre><p>The example displays the following text.</p><pre class="oac_no_warn" dir="ltr">The default fetch size is 100.
The fetch size is now 10.</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
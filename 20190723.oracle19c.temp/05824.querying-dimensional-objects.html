<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Querying Dimensional Objects</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="olap-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:54:33-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96405-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-dimensions-and-cubes.html" title="Previous" type="text/html">
      <link rel="next" href="enhancing-your-database-analytic-content.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP User's Guide">
    <meta name="dcterms.isVersionOf" content="OLAUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-dimensions-and-cubes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="enhancing-your-database-analytic-content.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Querying Dimensional Objects</li>
            </ol>
            <a id="GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB" name="GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB"></a><a id="OLAUG400"></a>
            
            <h2 id="OLAUG-GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB" class="sect2"><span class="enumeration_chapter">4 </span> Querying Dimensional Objects
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d12486e48" class="indexterm-anchor"></a>Oracle OLAP adds power to your SQL applications by providing extensive analytic content and fast query response times. A SQL query interface enables any application to query cubes and dimensions without any knowledge of OLAP.
               </p>
               <p>The OLAP option automatically generates a set of relational views on cubes, dimensions, and hierarchies. SQL applications query these views to display the information-rich contents of these objects to analysts and decision makers. You can also create custom views that follow the structure expected by your applications, using the system-generated views like base tables.</p>
               <p>In this chapter, you learn the basic methods for querying dimensional objects in SQL. It contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-5B4C57CC-9A50-48E4-8E3F-8168CE82B5B1">Exploring the OLAP Views</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-04DEC03F-3E6E-4435-840F-FF49FD2CA078">Creating Basic Queries</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-D74AA467-2DEC-4F1B-A8C1-DDBEEBB89808">Creating Hierarchical Queries</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-0A165A1E-4F52-4955-9E6E-DEAD37C8F65A">Using Calculations in Queries</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-08A8F74B-779F-425C-A148-A7070C7E384C">Using Attributes for Aggregation</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8">Joining Cubes to Tables and Views</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-C2359A2A-B7B6-4D31-BA84-2A5AB543C678">Viewing Execution Plans</a></p>
                  </li>
                  <li>
                     <p><a href="querying-dimensional-objects.html#GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288">Querying the Data Dictionary</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB__GUID-81BD23D3-A0B0-4C2B-B073-E78DAD1C16A9">
                  <p class="notep1">See Also:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="overview.html#GUID-BAC5B092-45CA-40E1-BDDC-C1645FCAB8C7">Developing Reports and Dashboards Using SQL Tools and Application&nbsp;Builders</a>"</span> for a sample dashboard created using Oracle Application Express
                        </p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="overview.html#GUID-EF116DF0-2536-470B-ACC3-A0253327A10B">Overview of the Dimensional Data Model</a>"</span> for a discussion of cubes, dimensions, and hierarchies
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="OLAUG9159"></a><div class="props_rev_3"><a id="GUID-5B4C57CC-9A50-48E4-8E3F-8168CE82B5B1" name="GUID-5B4C57CC-9A50-48E4-8E3F-8168CE82B5B1"></a><h3 id="OLAUG-GUID-5B4C57CC-9A50-48E4-8E3F-8168CE82B5B1" class="sect3"><span class="enumeration_section">4.1 </span>Exploring the OLAP Views
               </h3>
               <div>
                  <p>The system-generated views are created in the same schema as the analytic workspace. Oracle OLAP provides three types of views:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Cube views</p>
                     </li>
                     <li>
                        <p>Dimension views</p>
                     </li>
                     <li>
                        <p>Hierarchy views</p>
                     </li>
                  </ul>
                  <p>These views are related in the same way as fact and dimension tables are in a star schema. Cube views serve the same function as fact tables, and hierarchy views and dimension views serve the same function as dimension tables. Typical queries join a cube view with either a hierarchy view or a dimension view.</p>
               </div><a id="OLAUG9160"></a><div class="props_rev_3"><a id="GUID-40B1102B-BAC0-492D-8EDA-279E1864EBC7" name="GUID-40B1102B-BAC0-492D-8EDA-279E1864EBC7"></a><h4 id="OLAUG-GUID-40B1102B-BAC0-492D-8EDA-279E1864EBC7" class="sect4"><span class="enumeration_section">4.1.1 </span>Cube Views
                  </h4>
                  <div>
                     <p><a id="d12486e226" class="indexterm-anchor"></a>Each cube has a cube view that presents the data for all the measures and calculated measures in the cube. You can use a cube view like a fact table in a star or snowflake schema. However, the cube view contains all the summary data in addition to the detail level data. 
                     </p>
                  </div><a id="OLAUG9161"></a><div class="props_rev_3"><a id="GUID-761EABC0-3F23-4A5F-8876-53AF3B4521CE" name="GUID-761EABC0-3F23-4A5F-8876-53AF3B4521CE"></a><h5 id="OLAUG-GUID-761EABC0-3F23-4A5F-8876-53AF3B4521CE" class="sect5"><span class="enumeration_section">4.1.1.1 </span>Discovering the Names of the Cube Views
                     </h5>
                     <div>
                        <div class="section">
                           <p>The default name for a cube view is <span class="italic"><code class="codeph">cube</code></span><code class="codeph">_VIEW</code>. To find the view for <code class="codeph">UNITS_CUBE</code> in your schema, you might issue a query like this one:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT view_name FROM user_views WHERE view_name LIKE 'UNITS_CUBE%';

VIEW_NAME
------------------------------
UNITS_CUBE_VIEW
</pre><p>The next query returns the names of all the cube views in your schema from <code class="codeph">USER_CUBE_VIEWS</code>:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT view_name FROM user_cube_views;
 
VIEW_NAME
------------------------------
UNITS_CUBE_VIEW
PRICE_CUBE_VIEW</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9162"></a><div class="props_rev_3"><a id="GUID-51382A75-3CE7-4A99-A5D9-7BBE1C040C2D" name="GUID-51382A75-3CE7-4A99-A5D9-7BBE1C040C2D"></a><h5 id="OLAUG-GUID-51382A75-3CE7-4A99-A5D9-7BBE1C040C2D" class="sect5"><span class="enumeration_section">4.1.1.2 </span>Discovering the Columns of a Cube View
                     </h5>
                     <div>
                        <div class="section">
                           <p>Like a fact table, a cube view contains a column for each measure, calculated measure, and dimension in the cube. In the following example, <code class="codeph">UNITS_CUBE_VIEW</code> has columns for the <code class="codeph">SALES</code>, <code class="codeph">UNITS</code>, and <code class="codeph">COST</code> measures, for several calculated measures on <code class="codeph">SALES</code>, and for the <code class="codeph">TIME</code>, <code class="codeph">CUSTOMER</code>, <code class="codeph">PRODUCT</code>, and <code class="codeph">CHANNEL</code> dimensions.
                           </p><pre class="oac_no_warn" dir="ltr">DESCRIBE units_cube_view
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
SALES                                              NUMBER
UNITS                                              NUMBER
COST                                               NUMBER
SALES_PP                                           NUMBER
SALES_CHG_PP                                       NUMBER
SALES_PCTCHG_PP                                    NUMBER
SALES_PROD_SHARE_PARENT                            NUMBER
SALES_PROD_SHARE_TOTAL                             NUMBER
SALES_PROD_RANK_PARENT_PP                          NUMBER
TIME                                               VARCHAR2(100)
CUSTOMER                                           VARCHAR2(100)
PRODUCT                                            VARCHAR2(100)
CHANNEL                                            VARCHAR2(100)
</pre><p>The <a id="d12486e383" class="indexterm-anchor"></a><code class="codeph">USER_CUBE_VIEW_COLUMNS</code> data dictionary view describes the columns of a cube view, as shown by the following query.
                           </p><pre class="oac_no_warn" dir="ltr">SELECT column_name, column_type FROM user_cube_view_columns
     WHERE view_name = 'UNITS_CUBE_VIEW';
 
COLUMN_NAME                    COLUMN_TYPE
------------------------------ --------------
SALES                          MEASURE
UNITS                          MEASURE
COST                           MEASURE
SALES_PP                       MEASURE
SALES_CHG_PP                   MEASURE
SALES_PCTCHG_PP                MEASURE
SALES_PROD_SHARE_PARENT        MEASURE
SALES_PROD_SHARE_TOTAL         MEASURE
SALES_PROD_RANK_PARENT_PP      MEASURE
TIME                           KEY
CUSTOMER                       KEY
PRODUCT                        KEY
CHANNEL                        KEY
 
13 rows selected.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9163"></a><div class="props_rev_3"><a id="GUID-C5C7A142-6DE9-4961-9A62-56C29C422C42" name="GUID-C5C7A142-6DE9-4961-9A62-56C29C422C42"></a><h5 id="OLAUG-GUID-C5C7A142-6DE9-4961-9A62-56C29C422C42" class="sect5"><span class="enumeration_section">4.1.1.3 </span>Displaying the Contents of a Cube View
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can display the contents of a cube view quickly with a query like this one. All levels of the data are contained in the cube, from the detail level to the top.</p><pre class="oac_no_warn" dir="ltr">SELECT sales, units, time, customer, product, channel
     FROM units_cube_view WHERE ROWNUM &lt; 15;

     SALES      UNITS TIME       CUSTOMER   PRODUCT    CHANNEL
---------- ---------- ---------- ---------- ---------- --------
1120292752    4000968 TOTAL      TOTAL      TOTAL      TOTAL
 134109248     330425 CY1999     TOTAL      TOTAL      TOTAL
 130276514     534069 CY2003     TOTAL      TOTAL      TOTAL
 100870877     253816 CY1998     TOTAL      TOTAL      TOTAL
 136986572     565718 CY2005     TOTAL      TOTAL      TOTAL
 140138317     584929 CY2006     TOTAL      TOTAL      TOTAL
 144290686     587419 CY2004     TOTAL      TOTAL      TOTAL
 124173522     364233 CY2000     TOTAL      TOTAL      TOTAL
  92515295     364965 CY2002     TOTAL      TOTAL      TOTAL
 116931722     415394 CY2001     TOTAL      TOTAL      TOTAL
31522409.5      88484 CY2000.Q1  TOTAL      TOTAL      TOTAL
27798426.6      97346 CY2001.Q2  TOTAL      TOTAL      TOTAL
29691668.2     105704 CY2001.Q3  TOTAL      TOTAL      TOTAL
32617248.6     138953 CY2005.Q3  TOTAL      TOTAL      TOTAL
 
14 rows selected.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9164"></a><div class="props_rev_3"><a id="GUID-21D73E7B-C83E-46AB-B5FB-D6606D9FBF40" name="GUID-21D73E7B-C83E-46AB-B5FB-D6606D9FBF40"></a><h4 id="OLAUG-GUID-21D73E7B-C83E-46AB-B5FB-D6606D9FBF40" class="sect4"><span class="enumeration_section">4.1.2 </span>Dimension and Hierarchy Views
                  </h4>
                  <div>
                     <p><a id="d12486e495" class="indexterm-anchor"></a>Each dimension has one dimension view plus a hierarchy view for each hierarchy associated with the dimension. For example, a Time dimension might have these three views:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Time dimension view</p>
                        </li>
                        <li>
                           <p>Calendar hierarchy view</p>
                        </li>
                        <li>
                           <p>Fiscal hierarchy view</p>
                        </li>
                     </ul>
                     <p><a id="d12486e509" class="indexterm-anchor"></a>You can use dimension views and hierarchy views like dimension tables in a star schema.
                     </p>
                  </div><a id="OLAUG9165"></a><div class="props_rev_3"><a id="GUID-FD878C0D-3D28-4AB4-9033-CB775912B66A" name="GUID-FD878C0D-3D28-4AB4-9033-CB775912B66A"></a><h5 id="OLAUG-GUID-FD878C0D-3D28-4AB4-9033-CB775912B66A" class="sect5"><span class="enumeration_section">4.1.2.1 </span>Discovering the Names of Dimension and Hierarchy Views
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d12486e563" class="indexterm-anchor"></a><code class="codeph">USER_CUBE_DIM_VIEWS</code> identifies the dimension views for all dimensions. The default name for a dimension view is <span class="italic"><code class="codeph">dimension</code></span><code class="codeph">_VIEW</code>.
                           </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM user_cube_dim_views;
 
DIMENSION_NAME                 VIEW_NAME
------------------------------ ------------------------------
PRODUCT                        PRODUCT_VIEW
CUSTOMER                       CUSTOMER_VIEW
CHANNEL                        CHANNEL_VIEW
TIME                           TIME_VIEW
</pre><p><code class="codeph">USER_CUBE_HIER_VIEWS</code> identifies the hierarchy views for all the dimensions. For a hierarchy view, the default name is <span class="italic"><code class="codeph">dimension_hierarchy</code></span><code class="codeph">_VIEW</code>. The following query returns the dimension, hierarchy, and view names.
                           </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM user_cube_hier_views ORDER BY dimension_name;
 
DIMENSION_NAME  HIERARCHY_NAME  VIEW_NAME
--------------- --------------- ------------------------------
CHANNEL         PRIMARY         CHANNEL_PRIMARY_VIEW
CUSTOMER        MARKET          CUSTOMER_MARKET_VIEW
CUSTOMER        SHIPMENTS       CUSTOMER_SHIPMENTS_VIEW
PRODUCT         PRIMARY         PRODUCT_PRIMARY_VIEW
TIME            FISCAL          TIME_FISCAL_VIEW
TIME            CALENDAR        TIME_CALENDAR_VIEW</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9166"></a><div class="props_rev_3"><a id="GUID-D9569EA3-4CCC-4FA0-B693-6843A4B50CA8" name="GUID-D9569EA3-4CCC-4FA0-B693-6843A4B50CA8"></a><h5 id="OLAUG-GUID-D9569EA3-4CCC-4FA0-B693-6843A4B50CA8" class="sect5"><span class="enumeration_section">4.1.2.2 </span>Discovering the Columns of a Dimension View
                     </h5>
                     <div>
                        <div class="section">
                           <p>Like a dimension table, a dimension view contains a key column, level name, level keys for every level of every hierarchy associated with the dimension, and attribute columns. In the following example, <code class="codeph">TIME_VIEW</code> has a column for the dimension keys, the level name, and the dimension attributes.
                           </p><pre class="oac_no_warn" dir="ltr">DESCRIBE time_view
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
DIM_KEY                                            VARCHAR2(100)
LEVEL_NAME                                         VARCHAR2(30)
DIM_ORDER                                          NUMBER
END_DATE                                           DATE
LONG_DESCRIPTION                                   VARCHAR2(100)
SHORT_DESCRIPTION                                  VARCHAR2(100)
TIME_SPAN                                          NUMBER
</pre><p><code class="codeph">USER_CUBE_DIM_VIEW_COLUMNS</code> describes the information in each column, as shown in this query.
                           </p><pre class="oac_no_warn" dir="ltr">SELECT column_name, column_type FROM user_cube_dim_view_columns
     WHERE view_name ='TIME_VIEW';
 
COLUMN_NAME                    COLUMN_TYPE
------------------------------ --------------------
DIM_KEY                        KEY
LEVEL_NAME                     LEVEL_NAME
DIM_ORDER                      DIM_ORDER
END_DATE                       ATTRIBUTE
TIME_SPAN                      ATTRIBUTE
LONG_DESCRIPTION               ATTRIBUTE
SHORT_DESCRIPTION              ATTRIBUTE</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9167"></a><div class="props_rev_3"><a id="GUID-B2DD39FE-594D-485B-8BBD-C49E0C1BB617" name="GUID-B2DD39FE-594D-485B-8BBD-C49E0C1BB617"></a><h5 id="OLAUG-GUID-B2DD39FE-594D-485B-8BBD-C49E0C1BB617" class="sect5"><span class="enumeration_section">4.1.2.3 </span>Displaying the Contents of a Dimension View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The following query displays the level and attributes of each dimension key.</p><pre class="oac_no_warn" dir="ltr">SELECT dim_key, level_name, long_description description, time_span, end_date
     FROM time_view WHERE dim_key LIKE '%2005%';
 
DIM_KEY      LEVEL_NAME           DESCRIPTION   TIME_SPAN END_DATE
------------ -------------------- ------------ ---------- ---------
CY2005       CALENDAR_YEAR        2005                365 31-DEC-05
CY2005.Q2    CALENDAR_QUARTER     Q2.05                91 30-JUN-05
CY2005.Q4    CALENDAR_QUARTER     Q4.05                92 31-DEC-05
CY2005.Q3    CALENDAR_QUARTER     Q3.05                92 30-SEP-05
CY2005.Q1    CALENDAR_QUARTER     Q1.05                90 31-MAR-05
2005.01      MONTH                JAN-05               31 31-JAN-05
2005.05      MONTH                MAY-05               31 31-MAY-05
2005.07      MONTH                JUL-05               31 31-JUL-05
2005.03      MONTH                MAR-05               31 31-MAR-05
2005.04      MONTH                APR-05               30 30-APR-05
2005.08      MONTH                AUG-05               31 31-AUG-05
2005.09      MONTH                SEP-05               30 30-SEP-05
2005.02      MONTH                FEB-05               28 28-FEB-05
2005.11      MONTH                NOV-05               30 30-NOV-05
2005.06      MONTH                JUN-05               30 30-JUN-05
2005.10      MONTH                OCT-05               31 31-OCT-05
2005.12      MONTH                DEC-05               31 31-DEC-05
FY2005       FISCAL_YEAR          FY2005              365 30-JUN-05
FY2005.Q4    FISCAL_QUARTER       Q4 FY-05             91 30-JUN-05
FY2005.Q1    FISCAL_QUARTER       Q1 FY-05             92 30-SEP-04
FY2005.Q2    FISCAL_QUARTER       Q2 FY-05             92 31-DEC-04
FY2005.Q3    FISCAL_QUARTER       Q3 FY-05             90 31-MAR-05
 
22 rows selected.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9168"></a><div class="props_rev_3"><a id="GUID-CFCB642B-A2C3-4F5F-BCFA-D6D29527BA1D" name="GUID-CFCB642B-A2C3-4F5F-BCFA-D6D29527BA1D"></a><h5 id="OLAUG-GUID-CFCB642B-A2C3-4F5F-BCFA-D6D29527BA1D" class="sect5"><span class="enumeration_section">4.1.2.4 </span>Discovering the Columns of a Hierarchy View
                     </h5>
                     <div>
                        <div class="section">
                           <p>Like the dimension views, the hierarchy views also contain columns for the dimension key, level name, and level keys. However, all of the rows and columns are associated with the dimension keys that belong to the hierarchy.</p><pre class="oac_no_warn" dir="ltr">DESCRIBE time_calendar_view
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
DIM_KEY                                            VARCHAR2(100)
LEVEL_NAME                                         VARCHAR2(30)
DIM_ORDER                                          NUMBER
HIER_ORDER                                         NUMBER
LONG_DESCRIPTION                                   VARCHAR2(100)
SHORT_DESCRIPTION                                  VARCHAR2(100)
END_DATE                                           DATE
TIME_SPAN                                          NUMBER
PARENT                                             VARCHAR2(100)
TOTAL                                              VARCHAR2(100)
CALENDAR_YEAR                                      VARCHAR2(100)
CALENDAR_QUARTER                                   VARCHAR2(100)
MONTH                                              VARCHAR2(100)</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9169"></a><div class="props_rev_3"><a id="GUID-CC120690-879D-4FF0-9BF2-478D8D9BEACC" name="GUID-CC120690-879D-4FF0-9BF2-478D8D9BEACC"></a><h5 id="OLAUG-GUID-CC120690-879D-4FF0-9BF2-478D8D9BEACC" class="sect5"><span class="enumeration_section">4.1.2.5 </span>Displaying the Contents of a Hierarchy View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The following query displays the dimension keys, parent key, and the full ancestry for calendar year 2005. </p><pre class="oac_no_warn" dir="ltr">SELECT dim_key, long_description description, parent, calendar_year year,
       calendar_quarter quarter, month FROM time_calendar_view
       WHERE calendar_year='CY2005'
       ORDER BY level_name, end_date;

DIM_KEY      DESCRIPTION  PARENT       YEAR         QUARTER      MONTH
------------ ------------ ------------ ------------ ------------ ------------
CY2005.Q1    Q1.05        CY2005       CY2005       CY2005.Q1
CY2005.Q2    Q2.05        CY2005       CY2005       CY2005.Q2
CY2005.Q3    Q3.05        CY2005       CY2005       CY2005.Q3
CY2005.Q4    Q4.05        CY2005       CY2005       CY2005.Q4
CY2005       2005         TOTAL        CY2005
2005.01      JAN-05       CY2005.Q1    CY2005       CY2005.Q1    2005.01
2005.02      FEB-05       CY2005.Q1    CY2005       CY2005.Q1    2005.02
2005.03      MAR-05       CY2005.Q1    CY2005       CY2005.Q1    2005.03
2005.04      APR-05       CY2005.Q2    CY2005       CY2005.Q2    2005.04
2005.05      MAY-05       CY2005.Q2    CY2005       CY2005.Q2    2005.05
2005.06      JUN-05       CY2005.Q2    CY2005       CY2005.Q2    2005.06
2005.07      JUL-05       CY2005.Q3    CY2005       CY2005.Q3    2005.07
2005.08      AUG-05       CY2005.Q3    CY2005       CY2005.Q3    2005.08
2005.09      SEP-05       CY2005.Q3    CY2005       CY2005.Q3    2005.09
2005.10      OCT-05       CY2005.Q4    CY2005       CY2005.Q4    2005.10
2005.11      NOV-05       CY2005.Q4    CY2005       CY2005.Q4    2005.11
2005.12      DEC-05       CY2005.Q4    CY2005       CY2005.Q4    2005.12
 
17 rows selected.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="OLAUG9170"></a><div class="props_rev_3"><a id="GUID-04DEC03F-3E6E-4435-840F-FF49FD2CA078" name="GUID-04DEC03F-3E6E-4435-840F-FF49FD2CA078"></a><h3 id="OLAUG-GUID-04DEC03F-3E6E-4435-840F-FF49FD2CA078" class="sect3"><span class="enumeration_section">4.2 </span>Creating Basic Queries
               </h3>
               <div>
                  <p>Querying a cube is similar to querying a star schema. In a star schema, you join a fact table to a dimension table. The fact table provides the numeric business measures, and the dimension table provides descriptive attributes that give meaning to the data. Similarly, you join a cube view with either a dimension view or a hierarchy view to provide fully identified and meaningful data to your users.</p>
                  <p>For dimensions with no hierarchies, use the dimension views in your queries. For dimensions with hierarchies, use the hierarchy views, because they contain more information than the dimension views. </p>
                  <p>When querying a cube, remember these guidelines:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Apply a filter to every dimension. </p>
                        <p>The cube contains both detail level and aggregated data. A query with an unfiltered dimension typically returns more data than users need, which negatively impacts performance.</p>
                     </li>
                     <li>
                        <p>Let the cube aggregate the data.</p>
                        <p>Because the aggregations are calculated in the cube, a typical query does not need a <code class="codeph">GROUP BY</code> clause. Simply select the aggregations you want by using the appropriate filters on the dimension keys or attributes.
                        </p>
                     </li>
                  </ul>
               </div><a id="OLAUG9469"></a><a id="OLAUG9470"></a><a id="OLAUG9471"></a><a id="OLAUG9171"></a><div class="props_rev_3"><a id="GUID-4E4B57C1-4BBE-4C40-961C-B99011B0A92E" name="GUID-4E4B57C1-4BBE-4C40-961C-B99011B0A92E"></a><h4 id="OLAUG-GUID-4E4B57C1-4BBE-4C40-961C-B99011B0A92E" class="sect4"><span class="enumeration_section">4.2.1 </span>Applying a Filter to Every Dimension
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d12486e937" class="indexterm-anchor"></a><a id="d12486e939" class="indexterm-anchor"></a>To create a level filter, you must know the names of the dimension levels. You can easily acquire them by querying the dimension or hierarchy views:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT DISTINCT level_name FROM time_calendar_view;
 
LEVEL_NAME
------------------------------
CALENDAR_YEAR
CALENDAR_QUARTER
MONTH
TOTAL
</pre><p>Several data dictionary views list the names of the levels. The following example queries <code class="codeph">USER_CUBE_HIER_LEVELS</code>.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT level_name FROM user_cube_hier_levels
     WHERE dimension_name = 'TIME' AND hierarchy_name ='CALENDAR';
 
LEVEL_NAME
--------------------
TOTAL
CALENDAR_YEAR
CALENDAR_QUARTER
MONTH
</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4E4B57C1-4BBE-4C40-961C-B99011B0A92E__CBAEFEHJ">
                        <p class="titleinexample">Example 4-1 Displaying Aggregates at All Levels of Time</p>
                        <p>To see the importance of applying a filter to every dimension, consider the query in this example, which has no filter on the time dimension.</p><pre class="oac_no_warn" dir="ltr">/* Select key descriptions and facts */
SELECT t.long_description time,
     ROUND(f.sales) sales
/* From dimension views and cube view */
  FROM time_calendar_view t,
     product_primary_view p,
     customer_shipments_view cu,
     channel_primary_view ch,
     units_cube_view f
/* No filter on Time */
  WHERE p.level_name = 'TOTAL' 
     AND cu.level_name = 'TOTAL'
     AND ch.level_name = 'TOTAL'
/* Join dimension views to cube view */
     AND t.dim_key = f.time
     AND p.dim_key = f.product
     AND cu.dim_key = f.customer
     AND ch.dim_key = f.channel
  ORDER BY t.end_date;
</pre><p>Without a filter on the Time dimension, the query returns values for every level of time. This is more data than users typically want to see, and the volume of data returned can negatively impact performance.</p><pre class="oac_no_warn" dir="ltr">TIME            SALES
---------- ----------
JAN-98        8338545
FEB-98        7972132
Q1.98        24538588
MAR-98        8227911
APR-98        8470315
MAY-98        8160573
JUN-98        8362386
Q2.98        24993273
JUL-98        8296226
AUG-98        8377587
SEP-98        8406728
Q3.98        25080541
OCT-98        8316169
NOV-98        8984156
Q4.98        26258474
1998        100870877
                .
                .
                .
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4E4B57C1-4BBE-4C40-961C-B99011B0A92E__CBAFBDDD">
                        <p class="titleinexample">Example 4-2 Basic Cube View Query</p>
                        <p>Now consider the results when a filter restricts Time to yearly data. This example shows a basic query. It selects the Sales measure from <code class="codeph">UNITS_CUBE_VIEW</code>, and joins the keys from the cube view to the hierarchy views to get descriptions of the keys.
                        </p><pre class="oac_no_warn" dir="ltr">/* Select key descriptions and facts */
SELECT t.long_description time,
     ROUND(f.sales) sales
/* From dimension views and cube view */
  FROM time_calendar_view t,
     product_primary_view p,
     customer_shipments_view cu,
     channel_primary_view ch,
     units_cube_view f
/* Create level filters */
  WHERE t.level_name = 'CALENDAR_YEAR'
     AND p.level_name = 'TOTAL'
     AND cu.level_name = 'TOTAL'
     AND ch.level_name = 'TOTAL'
/* Join dimension views to cube view */
     AND t.dim_key = f.time
     AND p.dim_key = f.product
     AND cu.dim_key = f.customer
     AND ch.dim_key = f.channel
  ORDER BY t.end_date;
</pre><p>The example selects the following rows. For <code class="codeph">CUSTOMER</code>, <code class="codeph">PRODUCT</code>, and <code class="codeph">CHANNEL</code>, only one value is at the top level. <code class="codeph">TIME</code> has a value for each calendar year.
                        </p><pre class="oac_no_warn" dir="ltr">TIME          SALES
-------- ----------
1998      100870877
1999      134109248
2000      124173522
2001      116931722
2002       92515295
2003      130276514
2004      144290686
2005      136986572
2006      140138317

</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4E4B57C1-4BBE-4C40-961C-B99011B0A92E__CBAIFFGC">
                        <p class="titleinexample">Example 4-3 Selecting Data with Attribute Filters</p>
                        <p>Dimension attributes also provide a useful way to select the data for a query. The <code class="codeph">WHERE</code> clause in this example uses attributes values to filter all of the dimensions.
                        </p><pre class="oac_no_warn" dir="ltr">/* Select key descriptions and facts */
SELECT t.long_description time,
     p.long_description product,
     cu.long_description customer,
     ch.long_description channel,
     ROUND(f.sales) sales
/* From dimension views and cube view */
FROM time_calendar_view t,
     product_primary_view p,
     customer_shipments_view cu,
     channel_primary_view ch,
     units_cube_view f
/* Create attribute filters */
WHERE t.long_description in ('2005', '2006')
    AND p.package = 'Laptop Value Pack'
    AND cu.long_description LIKE '%Boston%'
    AND ch.long_description = 'Internet'
/* Join dimension views to cube view */
    AND t.dim_key = f.time
    AND p.dim_key = f.product
    AND cu.dim_key = f.customer
    AND ch.dim_key = f.channel
ORDER BY time, customer;
</pre><p>The query selects two calendar years, the products in the Laptop Value Pack, the customers in Boston, and the Internet channel. </p><pre class="oac_no_warn" dir="ltr">TIME   PRODUCT                        CUSTOMER              CHANNEL       SALES
------ ------------------------------ --------------------- -------- ----------
2005   Laptop carrying case           KOSH Entrpr Boston    Internet       5936
2005   56Kbps V.92 Type II Fax/Modem  KOSH Entrpr Boston    Internet      45285
2005   Internal 48X CD-ROM            KOSH Entrpr Boston    Internet       2828
2005   Standard Mouse                 KOSH Entrpr Boston    Internet        638
2005   Envoy Standard                 Warren Systems Boston Internet      19359
2005   Laptop carrying case           Warren Systems Boston Internet      13434
2005   Standard Mouse                 Warren Systems Boston Internet        130
2006   Standard Mouse                 KOSH Entrpr Boston    Internet        555
2006   Laptop carrying case           KOSH Entrpr Boston    Internet       6357
2006   56Kbps V.92 Type II Fax/Modem  KOSH Entrpr Boston    Internet      38042
2006   Internal 48X CD-ROM            KOSH Entrpr Boston    Internet       3343
2006   Envoy Standard                 Warren Systems Boston Internet      24198
2006   Laptop carrying case           Warren Systems Boston Internet      13153
2006   Standard Mouse                 Warren Systems Boston Internet         83
 
14 rows selected.</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAUG9172"></a><div class="props_rev_3"><a id="GUID-521D88A9-733B-4B4D-950B-637A6CF5E955" name="GUID-521D88A9-733B-4B4D-950B-637A6CF5E955"></a><h4 id="OLAUG-GUID-521D88A9-733B-4B4D-950B-637A6CF5E955" class="sect4"><span class="enumeration_section">4.2.2 </span>Allowing the Cube to Aggregate the Data
                  </h4>
                  <div>
                     <p>A cube contains all of the aggregate data. As shown in this chapter, a query against a cube just selects the aggregate data. It does not calculate the values. </p>
                     <p>The following is a basic query against a fact table:</p><pre class="oac_no_warn" dir="ltr">/* Querying a fact table */
SELECT t.calendar_year_dsc time,
     SUM(f.sales) sales
  FROM time_dim t, units_fact f
  WHERE t.calendar_year_dsc IN ('2005', '2006')
     AND t.month_id = f.month_id
  GROUP BY t.calendar_year_dsc;
</pre><p>The next query fetches the exact same results from a cube using filters:</p><pre class="oac_no_warn" dir="ltr">/* Querying a cube */
SELECT t.long_description time, f.sales sales
  FROM time_calendar_view t, 
     product_primary_view p,
     customer_shipments_view cu,
     channel_primary_view ch,
     units_cube_view f
/* Apply filters to every dimension */
  WHERE t.long_description IN ('2005', '2006')
     AND p.level_name = 'TOTAL'
     AND cu.level_name = 'TOTAL'
     AND ch.level_name = 'TOTAL'
/* Join dimension views to cube view */
     AND t.dim_key = f.TIME
     AND p.dim_key = f.product
     AND cu.dim_key = f.customer
     AND ch.dim_key = f.channel
  ORDER BY time;
</pre><p>Both queries return these results:</p><pre class="oac_no_warn" dir="ltr">TIME       SALES
----- ----------
2005   136986572
2006   140138317
</pre><p>The query against the cube does not compute the aggregate values with a <code class="codeph">SUM</code> operator and <code class="codeph">GROUP BY</code> clause. Because the aggregates exist in the cube, this would re-aggregate previously aggregated data. Instead, the query selects the aggregates directly from the cube and specifies the desired aggregates by applying the appropriate filter to each dimension.
                     </p>
                  </div>
               </div><a id="OLAUG9173"></a><div class="props_rev_3"><a id="GUID-1D50D612-8CFD-4F87-A60D-693D87E43E08" name="GUID-1D50D612-8CFD-4F87-A60D-693D87E43E08"></a><h4 id="OLAUG-GUID-1D50D612-8CFD-4F87-A60D-693D87E43E08" class="sect4"><span class="enumeration_section">4.2.3 </span>Query Processing
                  </h4>
                  <div>
                     <p>The most efficient queries allow the OLAP engine to filter the data, so that the minimum number of rows required by the query are returned to SQL.</p>
                     <p>The following are among the <a id="d12486e1127" class="indexterm-anchor"></a><code class="codeph">WHERE</code> clause operations that are pushed into the OLAP engine for processing:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">=</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">!=</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">&gt;</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">!&gt;</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">!&lt;</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">IN</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NOT IN</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">IS NULL</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">LIKE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NOT LIKE</code></p>
                        </li>
                     </ul>
                     <p>The OLAP engine also processes nested <a id="d12486e1179" class="indexterm-anchor"></a><a id="d12486e1181" class="indexterm-anchor"></a><a id="d12486e1183" class="indexterm-anchor"></a>character functions, including <code class="codeph">INSTR</code>, <code class="codeph">LENGTH</code>, <code class="codeph">NVL</code>, <code class="codeph">LOWER</code>, <code class="codeph">UPPER</code>, <code class="codeph">LTRIM</code>, <code class="codeph">RTRIM</code>, <code class="codeph">TRIM</code>, <code class="codeph">LPAD</code>, <code class="codeph">RPAD</code>, and <code class="codeph">SUBSTR</code>.
                     </p>
                     <p>SQL processes other operations and functions in the <code class="codeph">WHERE</code> clause, and all operations in other parts of the <code class="codeph">SELECT</code> syntax.
                     </p>
                  </div>
               </div>
            </div><a id="OLAUG9174"></a><div class="props_rev_3"><a id="GUID-D74AA467-2DEC-4F1B-A8C1-DDBEEBB89808" name="GUID-D74AA467-2DEC-4F1B-A8C1-DDBEEBB89808"></a><h3 id="OLAUG-GUID-D74AA467-2DEC-4F1B-A8C1-DDBEEBB89808" class="sect3"><span class="enumeration_section">4.3 </span>Creating Hierarchical Queries
               </h3>
               <div>
                  <p>Drilling is an important capability in business analysis. In a dashboard or an application, users click a dimension key to change the selection of data. Decision makers frequently want to drill down to see the contributors to a data value, or drill up to see how a particular data value contributes to the whole. For example, the Boston regional sales manager might start at total Boston sales, drill down to see the contributions of each sales representative, then drill up to see how the Boston region contributes to the New England sales total.</p>
                  <p>The hierarchy views include a <code class="codeph">PARENT</code> column that identifies the parent of every dimension key. This column encapsulates all of the hierarchical information of the dimension: If you know the parent of every key, then you can derive the ancestors, the children, and the descendants. 
                  </p>
                  <p>For level-based hierarchies, the <code class="codeph">LEVEL_NAME</code> column supplements this information by providing a convenient way to identify all the keys at the same depth in the hierarchy, from the top to the base. For value-based hierarchies, the <code class="codeph">PARENT</code> column provides all the information about the hierarchy.
                  </p>
                  <div class="infoboxnotealso" id="GUID-D74AA467-2DEC-4F1B-A8C1-DDBEEBB89808__GUID-F93CAB27-4B6A-4036-85AA-B26823EBCC76">
                     <p class="notep1">See Also:</p>
                     <p><a href="developing-reports-and-dashboards.html#GUID-20B8F759-16D6-4089-8744-CBA17E2259D6"> Developing Reports and Dashboards</a> about using bind variables to support drilling
                     </p>
                  </div>
               </div><a id="OLAUG9175"></a><div class="props_rev_3"><a id="GUID-C855370B-A629-48CA-9750-8CA08F17D7B6" name="GUID-C855370B-A629-48CA-9750-8CA08F17D7B6"></a><h4 id="OLAUG-GUID-C855370B-A629-48CA-9750-8CA08F17D7B6" class="sect4"><span class="enumeration_section">4.3.1 </span>Drilling Down to Children
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can use the <code class="codeph">PARENT</code> column of a hierarchy view to select only the children of a particular value. The following <code class="codeph">WHERE</code> clause selects the children of calendar year <code class="codeph">2005</code>. 
                        </p><pre class="oac_no_warn" dir="ltr">/* Select children of calendar year 2005 */
WHERE  t.parent = 'CY2005'
   AND p.dim_key = 'TOTAL'
   AND cu.dim_key = 'TOTAL'
   AND ch.dim_key = 'TOTAL'
</pre><p>The query drills down from Year to Quarter. The four quarters <code class="codeph">Q1-05</code> to <code class="codeph">Q4-05</code> are the children of year <code class="codeph">CY2005</code> in the Calendar hierarchy.
                        </p><pre class="oac_no_warn" dir="ltr">TIME          SALES
-------- ----------
Q1.05      31381338
Q2.05      37642741
Q3.05      32617249
Q4.05      35345244</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9176"></a><div class="props_rev_3"><a id="GUID-3174739E-67CC-469A-A4EC-DAF5CFF2024B" name="GUID-3174739E-67CC-469A-A4EC-DAF5CFF2024B"></a><h4 id="OLAUG-GUID-3174739E-67CC-469A-A4EC-DAF5CFF2024B" class="sect4"><span class="enumeration_section">4.3.2 </span>Drilling Up to Parents
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">PARENT</code> column of a hierarchy view identifies the parent of each dimension key. Columns of level keys identify the full heritage. The following <code class="codeph">WHERE</code> clause selects the parent of a Time key based on its <code class="codeph">LONG_DESCRIPTION</code> attribute. 
                        </p><pre class="oac_no_warn" dir="ltr">/* Select the parent of a Time key*/
WHERE t.dim_key = 
   (SELECT DISTINCT parent
      FROM time_calendar_view
      WHERE long_description='JAN-05')
   AND p.dim_key= 'TOTAL'
   AND cu.dim_key = 'TOTAL'
   AND ch.dim_key = 'TOTAL'
</pre><p>The query drills up from Month to Quarter. The parent of month <code class="codeph">JAN-05</code> is the quarter <code class="codeph">Q1-05</code> in the Calendar hierarchy.
                        </p><pre class="oac_no_warn" dir="ltr">TIME          SALES
-------- ----------
Q1.05      31381338</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9177"></a><div class="props_rev_3"><a id="GUID-C674585F-7F67-44DC-8631-D4173610AE0B" name="GUID-C674585F-7F67-44DC-8631-D4173610AE0B"></a><h4 id="OLAUG-GUID-C674585F-7F67-44DC-8631-D4173610AE0B" class="sect4"><span class="enumeration_section">4.3.3 </span>Drilling Down to Descendants
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following <code class="codeph">WHERE</code> clause selects the descendants of calendar year <code class="codeph">2005</code> by selecting the rows with a <code class="codeph">LEVEL_NAME</code> of <code class="codeph">MONTH</code> and a <code class="codeph">CALENDAR_YEAR</code> of <code class="codeph">CY2005</code>.
                        </p><pre class="oac_no_warn" dir="ltr">/* Select Time level and ancestor */
WHERE t.level_name = 'MONTH'
    AND t.calendar_year = 'CY2005'
    AND p.dim_key = 'TOTAL'
    AND cu.dim_key = 'TOTAL'
    AND ch.dim_key = 'TOTAL'
</pre><p>The query drills down two levels, from year to quarter to month. The 12 months <code class="codeph">Jan-05</code> to <code class="codeph">Dec-05</code> are the descendants of year <code class="codeph">2005</code> in the Calendar hierarchy. 
                        </p><pre class="oac_no_warn" dir="ltr">TIME          SALES
-------- ----------
JAN-05     12093518
FEB-05     10103162
MAR-05      9184658
APR-05      9185964
MAY-05     11640216
JUN-05     16816561
JUL-05     11110903
AUG-05      9475807
SEP-05     12030538
OCT-05     11135032
NOV-05     11067754
DEC-05     13142459</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9178"></a><div class="props_rev_3"><a id="GUID-2A193985-DEFD-41F6-A57F-B5F30F51CE96" name="GUID-2A193985-DEFD-41F6-A57F-B5F30F51CE96"></a><h4 id="OLAUG-GUID-2A193985-DEFD-41F6-A57F-B5F30F51CE96" class="sect4"><span class="enumeration_section">4.3.4 </span>Drilling Up to Ancestors
                  </h4>
                  <div>
                     <div class="section">
                        <p>The hierarchy views provide the full ancestry of each dimension key, as shown in <span class="q">"<a href="querying-dimensional-objects.html#GUID-CC120690-879D-4FF0-9BF2-478D8D9BEACC">Displaying the Contents of a Hierarchy View</a>"</span>. The following <code class="codeph">WHERE</code> clause uses the <code class="codeph">CALENDAR_YEAR</code> level key column to identify the ancestor of a <code class="codeph">MONTH</code> dimension key.
                        </p><pre class="oac_no_warn" dir="ltr">/* Select the ancestor of a Time key based on its Long Description attribute */
WHERE t.dim_key =
   (SELECT calendar_year
      FROM time_calendar_view
      WHERE long_description = 'JAN-05')
   AND p.dim_key = 'TOTAL'
   AND cu.dim_key = 'TOTAL'
   AND ch.dim_key = 'TOTAL'
</pre><p>The query drills up two levels from month to quarter to year. The ancestor of month <code class="codeph">Jan-05</code> is the year <code class="codeph">2005</code> in the Calendar hierarchy. 
                        </p><pre class="oac_no_warn" dir="ltr">TIME          SALES
-------- ----------
2005      136986572</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9472"></a><a id="OLAUG9179"></a><div class="props_rev_3"><a id="GUID-0A165A1E-4F52-4955-9E6E-DEAD37C8F65A" name="GUID-0A165A1E-4F52-4955-9E6E-DEAD37C8F65A"></a><h3 id="OLAUG-GUID-0A165A1E-4F52-4955-9E6E-DEAD37C8F65A" class="sect3"><span class="enumeration_section">4.4 </span>Using Calculations in Queries
               </h3>
               <div>
                  <p><a id="d12486e1665" class="indexterm-anchor"></a>A DBA can create calculated measures in Analytic Workspace Manager, so they are available to all applications. This not only simplifies application development, but ensures that all applications use the same name for the same calculation. 
                  </p>
                  <p>Nonetheless, you may want to develop queries that include your own calculations. In this case, you can use an inner query to select aggregate data from the cube, then perform calculations in an outer query. You can select data from cubes that use any type of aggregation operators, and you can use any functions or operators in the query. You must ensure only that you select the data from the cube at the appropriate levels for the calculation, and that the combination of operators in the cube and in the query create the calculation you want. </p>
                  <div class="example" id="GUID-0A165A1E-4F52-4955-9E6E-DEAD37C8F65A__CBAHIIGG">
                     <p class="titleinexample">Example 4-4 Calculating Average Sales Across Customers</p>
                     <p>This example shows a query that answers the question, What was the average sales of Sentinel Standard computers to Government customers for the third quarter of fiscal year 2005. <code class="codeph">UNITS_CUBE</code> is summed over all dimensions, so that <code class="codeph">FY2005.Q3</code> is a total for July, August, and September. The inner query extracts the data for these months, and the outer query uses the <code class="codeph">MIN</code>, <code class="codeph">MAX</code>, and <code class="codeph">AVG</code> operators and a <code class="codeph">GROUP BY</code> clause to calculate the averages.
                     </p><pre class="oac_no_warn" dir="ltr">SELECT customer, ROUND(MIN(sales)) minimum, ROUND(MAX(sales)) maximum, 
   ROUND(AVG(sales)) average
FROM
   (SELECT cu.long_description customer,
       t.month_long_description time
       f.sales sales
   FROM time_fiscal_view t,
     product_primary_view p,
     customer_market_view cu,
     channel_primary_view ch,
     units_cube_view f
   WHERE t.parent = 'FY2005.Q3'
     AND p.dim_key = 'SENT STD'
     AND cu.parent = 'GOV'
     AND ch.level_name = 'TOTAL'
     AND t.dim_key = f.time
     AND p.dim_key = f.product
     AND cu.dim_key = f.customer
     AND ch.dim_key = f.channel
   )
GROUP BY customer
ORDER BY customer;
</pre><p>This is the data extracted from the cube by the inner query:</p><pre class="oac_no_warn" dir="ltr">CUSTOMER                                 TIME          SALES
---------------------------------------- -------- ----------
Dept. of Labor                           JAN-05      1553.26
Dept. of Labor                           MAR-05       1555.6
Ministry of Intl Trade                   JAN-05      1553.26
Ministry of Intl Trade                   FEB-05      1554.56
Ministry of Intl Trade                   MAR-05       1555.6
Royal Air Force                          JAN-05      1553.26
Royal Air Force                          FEB-05      6218.23
UK Environmental Department              JAN-05      4659.78
UK Environmental Department              FEB-05      3109.12
</pre><p>The outer query calculates the minimum, maximum, and average sales for each customer:</p><pre class="oac_no_warn" dir="ltr">CUSTOMER                          MINIMUM    MAXIMUM    AVERAGE
------------------------------ ---------- ---------- ----------
Dept. of Labor                       1553       1556       1554
Ministry of Intl Trade               1553       1556       1554
Royal Air Force                      1553       6218       3886
UK Environmental Department          3109       4660       3884</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAUG9180"></a><div class="props_rev_3"><a id="GUID-08A8F74B-779F-425C-A148-A7070C7E384C" name="GUID-08A8F74B-779F-425C-A148-A7070C7E384C"></a><h3 id="OLAUG-GUID-08A8F74B-779F-425C-A148-A7070C7E384C" class="sect3"><span class="enumeration_section">4.5 </span>Using Attributes for Aggregation
               </h3>
               <div>
                  <p><a id="d12486e1756" class="indexterm-anchor"></a><a id="d12486e1760" class="indexterm-anchor"></a>An OLAP cube aggregates the data within its hierarchies, using the parent-child relationships revealed in the hierarchy views. The OLAP engine does not calculate aggregates over dimension attribute values.
                  </p>
                  <p>Nonetheless, you may want to aggregate products over color or size, or customers by age, zip code, or population density. This is the situation when you can use a <code class="codeph">GROUP BY</code> clause when querying a cube. Your query can extract data from the cube, then use SQL to aggregate by attribute value.
                  </p>
                  <p><a id="d12486e1769" class="indexterm-anchor"></a>The cube must use the same aggregation operator for all dimensions, and the aggregation operator in the <code class="codeph">SELECT</code> list of the query must match the aggregation operator of the cube. You can use a <code class="codeph">GROUP BY</code> clause to query cubes that use these operators:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>First Non-NA Value</p>
                     </li>
                     <li>
                        <p>Last Non-NA Value</p>
                     </li>
                     <li>
                        <p>Maximum</p>
                     </li>
                     <li>
                        <p>Minimum</p>
                     </li>
                     <li>
                        <p>Sum</p>
                     </li>
                  </ul>
               </div><a id="OLAUG9473"></a><a id="OLAUG9181"></a><div class="props_rev_3"><a id="GUID-36B73E8A-DD8C-465D-BE8D-E951F2E156B9" name="GUID-36B73E8A-DD8C-465D-BE8D-E951F2E156B9"></a><h4 id="OLAUG-GUID-36B73E8A-DD8C-465D-BE8D-E951F2E156B9" class="sect4"><span class="enumeration_section">4.5.1 </span>Aggregating Measures Over Attributes
                  </h4>
                  <div>
                     <p><a href="querying-dimensional-objects.html#GUID-36B73E8A-DD8C-465D-BE8D-E951F2E156B9__CBABAGBE">Example 4-5</a> shows a query that aggregates over an attribute named Package. It returns these results:
                     </p><pre class="oac_no_warn" dir="ltr">TIME   PACKAGE                 SALES
------ ------------------ ----------
2005   All                1809157.64
2005   Multimedia         18083256.3
2005   Executive            19836977
2005   Laptop Value Pack  9547494.81
</pre><p>Units Cube uses the <code class="codeph">SUM</code> operator for all dimensions, and the query uses the <code class="codeph">SUM</code> operator to aggregate over Sales. The Package attribute applies only to the Item level of the Product dimension, so the query selects the Item level of Product. It also eliminates nulls for Package, so that only products that belong to a package are included in the calculation. The <code class="codeph">GROUP BY</code> clause breaks out Total Sales by Time and Package.
                     </p>
                     <div class="example" id="GUID-36B73E8A-DD8C-465D-BE8D-E951F2E156B9__CBABAGBE">
                        <p class="titleinexample">Example 4-5 Aggregating Over an Attribute</p><pre class="oac_no_warn" dir="ltr">SELECT t.long_description time,
     p.package package,
     SUM(f.sales) sales
  FROM time_calendar_view t,
     product_primary_view p,
     customer_shipments_view cu,
     channel_primary_view ch,
     units_cube_view f
/* Select Product by level and attribute */
  WHERE p.level_name = 'ITEM'
     AND p.package IS NOT NULL
     AND t.long_description = '2005'
     AND cu.level_name = 'TOTAL'
     AND ch.level_name = 'TOTAL'
/* Join dimensions and cube */
     AND t.dim_key = f.time
     AND p.dim_key = f.product
     AND cu.dim_key = f.customer
     AND ch.dim_key = f.channel
  GROUP BY t.long_description, p.package;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAUG9474"></a><a id="OLAUG9182"></a><div class="props_rev_3"><a id="GUID-3B0ADDD2-9977-4D4A-9D87-5F2688888EEF" name="GUID-3B0ADDD2-9977-4D4A-9D87-5F2688888EEF"></a><h4 id="OLAUG-GUID-3B0ADDD2-9977-4D4A-9D87-5F2688888EEF" class="sect4"><span class="enumeration_section">4.5.2 </span>Aggregating Calculated Measures Over Attributes
                  </h4>
                  <div>
                     <p><a id="d12486e1916" class="indexterm-anchor"></a>Before using the technique described in <span class="q">"<a href="querying-dimensional-objects.html#GUID-36B73E8A-DD8C-465D-BE8D-E951F2E156B9">Aggregating Measures Over Attributes</a>"</span>, ensure that the calculation is meaningful. For example, the common calculation Percent Change might be defined as a calculated measure in a cube. Summing over Percent Change would produce unexpected results, because the calculation for Percent Change (<span class="italic"><code class="codeph">(a-b)/b</code></span>,) is not additive.
                     </p>
                     <p>Consider the following rows of data. The correct Total Percent Change is <code class="codeph">.33</code>, whereas the sum of the percent change for the first two rows is <code class="codeph">.75</code>.
                     </p>
                     <div class="tblformal" id="GUID-3B0ADDD2-9977-4D4A-9D87-5F2688888EEF__GUID-EAD2463C-2F67-4E56-9185-BBC51AD02D90">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Example of adding a nonadditive measure" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="16%" id="d12486e1948">Row</th>
                                 <th align="left" valign="bottom" width="16%" id="d12486e1951">Sales</th>
                                 <th align="left" valign="bottom" width="34%" id="d12486e1954">Sales Prior Period</th>
                                 <th align="left" valign="bottom" width="34%" id="d12486e1957">Percent Change</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d12486e1962" headers="d12486e1948 ">
                                    <p>1</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d12486e1962 d12486e1951 ">
                                    <p><code class="codeph">15</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d12486e1962 d12486e1954 ">
                                    <p><code class="codeph">10</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d12486e1962 d12486e1957 ">
                                    <p><code class="codeph">.50</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d12486e1978" headers="d12486e1948 ">
                                    <p>2</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d12486e1978 d12486e1951 ">
                                    <p><code class="codeph">25</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d12486e1978 d12486e1954 ">
                                    <p><code class="codeph">20</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d12486e1978 d12486e1957 ">
                                    <p><code class="codeph">.25</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d12486e1994" headers="d12486e1948 ">
                                    <p><span class="bold">Total</span></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d12486e1994 d12486e1951 ">
                                    <p><span class="bold"><code class="codeph">40</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d12486e1994 d12486e1954 ">
                                    <p><span class="bold"><code class="codeph">30</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d12486e1994 d12486e1957 ">
                                    <p><span class="bold"><code class="codeph">.33</code></span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="querying-dimensional-objects.html#GUID-3B0ADDD2-9977-4D4A-9D87-5F2688888EEF__CBAFHFIH">Example 4-6</a> shows a query that aggregates over the Package attribute and calculates Percent Change From Prior Period. The inner query aggregates Sales and Sales Prior Period over the attributes, and the outer query uses the results to compute the percent change. These are the results of the query, which show the expected results for <code class="codeph">PCT_CHG_PP</code>:
                     </p><pre class="oac_no_warn" dir="ltr">TIME   PACKAGE                 SALES PRIOR_PERIOD PCT_CHG_PP
------ ------------------ ---------- ------------ ----------
2005   All                1809157.64   1853928.06 -.02414895
2006   All                1720399.03   1809157.64 -.04906074
2005   Executive            19836977   20603879.8 -.03722128
2006   Executive          19580638.4     19836977 -.01292226
2005   Laptop Value Pack  9547494.81   10047298.6 -.04974509
2006   Laptop Value Pack  9091450.58   9547494.81 -.04776585
2005   Multimedia         18083256.3   19607675.5 -.07774604
2006   Multimedia         18328678.7   18083256.3 .013571806
 
8 rows selected.</pre><div class="example" id="GUID-3B0ADDD2-9977-4D4A-9D87-5F2688888EEF__CBAFHFIH">
                        <p class="titleinexample">Example 4-6 Querying Over Attributes Using Calculated Measures</p><pre class="oac_no_warn" dir="ltr">/* Calculate Percent Change */
SELECT TIME, package, sales, prior_period,
     ((sales - prior_period) / prior_period) pct_chg_pp
FROM
/* Fetch data from the cube and aggregate over Package */
     (SELECT t.long_description time,
          p.package package,
          SUM(f.sales) sales,
          SUM(f.sales_pp) prior_period
       FROM time_calendar_view t,
          product_primary_view p,
          customer_shipments_view cu,
          channel_primary_view ch,
          units_cube_view f
/* Create filters */
       WHERE p.level_name = 'ITEM'
          AND p.package IS NOT NULL
          AND t.long_description IN ('2005', '2006')
          AND cu.level_name = 'TOTAL'
          AND ch.level_name = 'TOTAL'
/* Join dimension views to cube view */
          AND t.dim_key = f.time
          AND p.dim_key = f.product
          AND cu.dim_key = f.customer
          AND ch.dim_key = f.channel
       GROUP BY t.long_description, p.package
       ORDER BY p.package);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="OLAUG9562"></a><a id="OLAUG9595"></a><div class="props_rev_3"><a id="GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8" name="GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8"></a><h3 id="OLAUG-GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8" class="sect3"><span class="enumeration_section">4.6 </span>Joining Cubes to Tables and Views
               </h3>
               <div>
                  <p><a id="d12486e2078" class="indexterm-anchor"></a><a id="d12486e2080" class="indexterm-anchor"></a>You can join cubes to other cubes and to relational objects such as:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Tables</p>
                     </li>
                     <li>
                        <p>Views including external tables and PL/SQL table functions</p>
                     </li>
                     <li>
                        <p>Other row source types, like other joins</p>
                     </li>
                  </ul>
                  <p><a id="d12486e2096" class="indexterm-anchor"></a>Typically, you do not need a fully aggregated cube when joining it to a table or view, and a <code class="codeph">CUBE JOIN</code> operation limits the number of fetched values to improve performance automatically. The cube must be on the right side of the equation. If the query does not support <code class="codeph">CUBE JOIN</code>, then the more expensive <code class="codeph">HASH JOIN</code>, <code class="codeph">MERGE JOIN</code>, or <code class="codeph">NESTED LOOPS</code> are commonly used.
                  </p>
                  <p><a id="d12486e2115" class="indexterm-anchor"></a><a id="d12486e2117" class="indexterm-anchor"></a>You can use hints in the query to influence the use of <code class="codeph">CUBE JOIN</code>:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">USE_CUBE</code> forces a <code class="codeph">CUBE JOIN</code> if possible.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">NO_USE_CUBE</code> prevents a <code class="codeph">CUBE JOIN</code>.
                        </p>
                     </li>
                  </ul>
                  <p>See <span class="q">"<a href="querying-dimensional-objects.html#GUID-C2359A2A-B7B6-4D31-BA84-2A5AB543C678">Viewing Execution Plans</a>"</span> for more information about <code class="codeph">CUBE JOIN</code>.
                  </p>
                  <p><a href="querying-dimensional-objects.html#GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8__BGBHEBGH">Example 4-7</a> joins a table that contains French descriptions of the Customer dimension to a cube that supports only English. The query returns these results:
                  </p><pre class="oac_no_warn" dir="ltr">CUSTOMER                                        SALES
---------------------------------------- ------------
La Marine des USA Washington                   600.34
Monolith Motor Co. Chattanooga               17946.51
Piedmont, Inc. San Jose                      24874.41
Ministere du Commerce Int. Nagano            27595.97
Depart. des commun. - Stuttgart              30706.10
Min. Env. Brit. Londres                      38125.77
Departement de travail Nouvelle-Orleans      42507.50
Ministere des Finances Sorbonne              43607.58
Monolith Motor Co. Knoxville                 50874.53
Serv. des USA de recherche Wyo               54497.19
Depart. des commun. - Bonn                   58944.97
     .
     .
     .</pre><div class="example" id="GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8__BGBHEBGH">
                     <p class="titleinexample">Example 4-7 Joining a Cube and a Table</p><pre class="oac_no_warn" dir="ltr">SELECT cu.ship_to_dsc_french customer,
     f.sales sales
FROM time_calendar_view t,
     product_primary_view p,
     customer_dim cu,
     channel_primary_view ch,
     units_cube_view f
WHERE t.dim_key = 'CY2006'
    AND p.level_name = 'TOTAL'
    AND ch.level_name = 'TOTAL'
    AND t.dim_key = f.TIME
    AND p.dim_key = f.product
    AND cu.ship_to_id = f.customer
    AND ch.dim_key = f.channel
ORDER BY f.sales;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OLAUG9183"></a><div class="props_rev_3"><a id="GUID-C2359A2A-B7B6-4D31-BA84-2A5AB543C678" name="GUID-C2359A2A-B7B6-4D31-BA84-2A5AB543C678"></a><h3 id="OLAUG-GUID-C2359A2A-B7B6-4D31-BA84-2A5AB543C678" class="sect3"><span class="enumeration_section">4.7 </span>Viewing Execution Plans
               </h3>
               <div>
                  <p><a id="d12486e2210" class="indexterm-anchor"></a>You can generate and view execution plans for queries against cubes and dimensions the same as for those against relational tables.
                  </p>
                  <p>The SQL <a id="d12486e2215" class="indexterm-anchor"></a><code class="codeph">EXPLAIN PLAN</code> command creates a table with the content of the explain plan. The default table name is <code class="codeph">PLAN_TABLE</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-C2359A2A-B7B6-4D31-BA84-2A5AB543C678__GUID-111FAFAD-D2D0-45CC-96F8-BFE4EC858645">
                     <p class="notep1">See Also:</p>
                     <p><a href="../tgsql/index.html" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for a complete discussion of execution plans
                     </p>
                  </div>
               </div><a id="OLAUG9476"></a><a id="OLAUG9563"></a><a id="OLAUG9184"></a><div class="props_rev_3"><a id="GUID-D6D8310D-8FC9-4507-9C6B-66C8131E7EAD" name="GUID-D6D8310D-8FC9-4507-9C6B-66C8131E7EAD"></a><h4 id="OLAUG-GUID-D6D8310D-8FC9-4507-9C6B-66C8131E7EAD" class="sect4"><span class="enumeration_section">4.7.1 </span>Generating Execution Plans
                  </h4>
                  <div>
                     <p>The following command creates an execution plan for a basic query on a cube: </p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR
  SELECT t.long_description time,
     p.long_description product,
     cu.long_description customer,
     ch.long_description channel,
     f.sales sales
  FROM time_calendar_view t,
     product_primary_view p,
     customer_shipments_view cu,
     channel_primary_view ch,
     units_cube_view f
  WHERE t.level_name = 'CALENDAR_YEAR'
     AND p.level_name = 'TOTAL'
     AND cu.level_name = 'TOTAL'
     AND ch.level_name = 'TOTAL'
     AND t.dim_key = f.TIME
     AND p.dim_key = f.product
     AND cu.dim_key = f.customer
     AND ch.dim_key = f.channel
  ORDER BY t.end_date;
</pre><div class="example" id="GUID-D6D8310D-8FC9-4507-9C6B-66C8131E7EAD__BAJEJJDJ">
                        <p class="titleinexample">Example 4-8 Execution Plan for a Cube Query</p>
                        <p>The <code class="codeph">DISPLAY</code> table function of the <code class="codeph">DBMS_XPLAN</code> PL/SQL package formats and displays information from an execution plan, as shown in this example.
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT plan_table_output FROM TABLE(dbms_xplan.display());
 
PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------------
Plan hash value: 1667678335
 
----------------------------------------------------------------------------------------------
| Id  | Operation                       | Name       | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                |            |     1 |   100 |   104   (3)| 00:00:02 |
|   1 |  SORT ORDER BY                  |            |     1 |   100 |   104   (3)| 00:00:02 |
|   2 |   JOINED CUBE SCAN PARTIAL OUTER|            |       |       |            |          |
|   3 |    CUBE ACCESS                  | UNITS_CUBE |       |       |            |          |
|   4 |    CUBE ACCESS                  | CHANNEL    |       |       |            |          |
|   5 |    CUBE ACCESS                  | CUSTOMER   |       |       |            |          |
|   6 |    CUBE ACCESS                  | PRODUCT    |       |       |            |          |
|*  7 |    CUBE ACCESS                  | TIME       |     1 |   100 |   103   (2)| 00:00:02 |
----------------------------------------------------------------------------------------------
 
Predicate Information (identified by operation id):
---------------------------------------------------
 
   7 - filter(SYS_OP_ATG(VALUE(KOKBF$),12,13,2)='CALENDAR_YEAR' AND
              SYS_OP_ATG(VALUE(KOKBF$),43,44,2)='TOTAL' AND
              SYS_OP_ATG(VALUE(KOKBF$),33,34,2)='TOTAL' AND
              SYS_OP_ATG(VALUE(KOKBF$),23,24,2)='TOTAL')
 
22 rows selected.
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D6D8310D-8FC9-4507-9C6B-66C8131E7EAD__BGBBGIAE">
                        <p class="titleinexample">Example 4-9 Execution Plan for a Cube Join</p>
                        <p>This example shows an execution plan for a query that joins a cube and a table. See <span class="q">"<a href="querying-dimensional-objects.html#GUID-9783E643-10F4-49C8-98B3-2A4FDA1B98B8">Joining Cubes to Tables and Views</a>"</span> for the query.
                        </p><pre class="oac_no_warn" dir="ltr">PLAN_TABLE_OUTPUT
-------------------------------------------------------------------------------------------------
Plan hash value: 3634608218
-------------------------------------------------------------------------------------------------
| Id  | Operation                        |Name        |Rows | Bytes |TempSpc|Cost (%CPU)| Time    |
--------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                 |            |1464 |   128K|       | 1524  (94)| 00:00:19|
|   1 |  SORT ORDER BY                   |            |1464 |   128K|   152K| 1524  (94)| 00:00:19|
|*  2 |   CUBE JOIN                      |            |1464 |   128K|       | 1422 (100)| 00:00:18|
|   3 |    TABLE ACCESS FULL             |CUSTOMER_DIM|  61 |  2379 |       |    4   (0)| 00:00:01|
|   4 |    JOINED CUBE SCAN PARTIAL OUTER|            |     |       |       |           |         |
|   5 |     CUBE ACCESS                  |UNITS_CUBE  |     |       |       |           |         |
|   6 |     CUBE ACCESS                  |CHANNEL     |     |       |       |           |         |
|   7 |     CUBE ACCESS                  |PRODUCT     |     |       |       |           |         |
|*  8 |     CUBE ACCESS                  |TIME        |2520 |   125K|       | 1417 (100)| 00:00:18|
--------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------
   2 - access("CU"."SHIP_TO_ID"=SYS_OP_ATG(VALUE(KOKBF$),76,77,2))
   8 - filter(SYS_OP_ATG(VALUE(KOKBF$),32,33,2)='CY2006' AND
              SYS_OP_ATG(VALUE(KOKBF$),85,86,2)='TOTAL' AND 
              SYS_OP_ATG(VALUE(KOKBF$),65,66,2)='TOTAL')

22 rows selected.</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAUG9477"></a><a id="OLAUG9185"></a><div class="props_rev_3"><a id="GUID-3F1F9973-3702-4545-953A-563A43BC2712" name="GUID-3F1F9973-3702-4545-953A-563A43BC2712"></a><h4 id="OLAUG-GUID-3F1F9973-3702-4545-953A-563A43BC2712" class="sect4"><span class="enumeration_section">4.7.2 </span>Types of Execution Plans
                  </h4>
                  <div>
                     <div class="section">
                        <p><a href="querying-dimensional-objects.html#GUID-3F1F9973-3702-4545-953A-563A43BC2712__BAJEJAFJ" title="Execution Plans">Table 4-1</a> describes the types of execution plans for cubes.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-3F1F9973-3702-4545-953A-563A43BC2712__BAJEJAFJ">
                        <p class="titleintable">Table 4-1 Descriptions of Execution Plans for Cubes and Dimensions</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Descriptions of Execution Plans for Cubes and Dimensions" summary="Execution Plans" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d12486e2378">Operation</th>
                                 <th align="left" valign="bottom" width="20%" id="d12486e2381">Option</th>
                                 <th align="left" valign="bottom" width="66%" id="d12486e2384">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2389" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE JOIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2389 d12486e2381 ">
                                    <p>--</p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2389 d12486e2384 ">
                                    <p>Joins a table or view on the left and a cube on the right.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2400" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE JOIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2400 d12486e2381 ">
                                    <p><code class="codeph">ANTI</code></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2400 d12486e2384 ">
                                    <p>Uses an antijoin for a table or view on the left and a cube on the right.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2412" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE JOIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2412 d12486e2381 ">
                                    <p><code class="codeph">ANTI SNA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2412 d12486e2384 ">
                                    <p>Uses an antijoin (Single-sided Null Aware) for a table or view on the left and a cube on the right. The join column on the right (cube side) is <code class="codeph">NOT NULL</code>. For example:
                                    </p><pre class="oac_no_warn" dir="ltr">SELECT cols FROM table 
   WHERE table.c1 NOT IN 
      (SELECT col FROM cube 
         WHERE cube.col IS NOT NULL)</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2429" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE JOIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2429 d12486e2381 ">
                                    <p><code class="codeph">OUTER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2429 d12486e2384 ">
                                    <p>Uses an outer join for a table or view on the left and a cube on the right.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2441" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE JOIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2441 d12486e2381 ">
                                    <p><code class="codeph">RIGHT SEMI</code></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2441 d12486e2384 ">
                                    <p>Uses a right semijoin for a table or view on the left and a cube on the right.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2453" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE SCAN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2453 d12486e2381 ">
                                    <p>--</p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2453 d12486e2384 ">
                                    <p><a id="d12486e2462" class="indexterm-anchor"></a>Uses inner joins for all cube access.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2466" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE SCAN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2466 d12486e2381 ">
                                    <p><code class="codeph">PARTIAL OUTER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2466 d12486e2384 ">
                                    <p>Uses an outer join for least one dimension, and inner joins for the other dimensions.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d12486e2478" headers="d12486e2378 ">
                                    <p><code class="codeph">CUBE SCAN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d12486e2478 d12486e2381 ">
                                    <p><code class="codeph">OUTER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d12486e2478 d12486e2384 ">
                                    <p>Uses outer joins for all cube access.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-3F1F9973-3702-4545-953A-563A43BC2712__GUID-37D8EA75-A7AD-4981-BDC2-E63691628F33">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/Joins.html#SQLRF30046" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for descriptions of these join types.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9478"></a><a id="OLAUG9186"></a><div class="props_rev_3"><a id="GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288" name="GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288"></a><h3 id="OLAUG-GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288" class="sect3"><span class="enumeration_section">4.8 </span>Querying the Data Dictionary
               </h3>
               <div>
                  <div class="section">
                     <p>If you are developing a generic application -- that is, one where the names of the dimensional objects are not known -- then your application can retrieve this information from the data dictionary.</p>
                     <p><a id="d12486e2551" class="indexterm-anchor"></a><a id="d12486e2553" class="indexterm-anchor"></a>Among the static views of the database data dictionary are those that provide information about dimensional objects. All OLAP metadata is stored in the data dictionary. A few of the data dictionary views were introduced previously in this chapter.
                     </p>
                     <p><a href="querying-dimensional-objects.html#GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288__CBAHIDHG" title="Descriptions of static data dictionary views for OLAP">Table 4-2</a> provides brief descriptions of the <code class="codeph">ALL</code> views. There are corresponding <code class="codeph">DBA</code> and <code class="codeph">USER</code> views.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288__CBAHIDHG">
                     <p class="titleintable">Table 4-2 Static Data Dictionary Views for OLAP</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Static Data Dictionary Views for OLAP" summary="Descriptions of static data dictionary views for OLAP" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d12486e2581">View</th>
                              <th align="left" valign="bottom" width="59%" id="d12486e2584">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2589" headers="d12486e2581 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/olaug&amp;id=REFRN20691" target="_blank"><code class="codeph">ALL_CUBE_ATTR_VISIBILITY</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2589 d12486e2584 ">
                                 <p>Describes the visibility of the attributes for cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2599" headers="d12486e2581 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/olaug&amp;id=REFRN20671" target="_blank"><code class="codeph">ALL_CUBE_ATTRIBUTES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2599 d12486e2584 ">
                                 <p>Describes the attributes for cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2609" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_BUILD_PROCESSES.html#REFRN20718" target="_blank"><code class="codeph">ALL_CUBE_BUILD_PROCESSES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2609 d12486e2584 ">
                                 <p>Describes the cube build processes and maintenance scripts.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2619" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_CALCULATED_MEMBERS.html#REFRN20672" target="_blank"><code class="codeph">ALL_CUBE_CALCULATED_MEMBERS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2619 d12486e2584 ">
                                 <p>Describes the calculated members (keys) for cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2629" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_DIM_LEVELS.html#REFRN20677" target="_blank"><code class="codeph">ALL_CUBE_DIM_LEVELS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2629 d12486e2584 ">
                                 <p>Describes the cube dimension levels.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2639" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_DIM_MODELS.html#REFRN20678" target="_blank"><code class="codeph">ALL_CUBE_DIM_MODELS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2639 d12486e2584 ">
                                 <p>Describes the models for cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2649" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_DIM_VIEW_COLUMNS.html#REFRN20680" target="_blank"><code class="codeph">ALL_CUBE_DIM_VIEW_COLUMNS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2649 d12486e2584 ">
                                 <p>Describes the columns of the system-generated relational views of cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2659" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_DIM_VIEWS.html#REFRN20679" target="_blank"><code class="codeph">ALL_CUBE_DIM_VIEWS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2659 d12486e2584 ">
                                 <p>Describes the system-generated relational views of OLAP dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2669" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_DIMENSIONALITY.html#REFRN20674" target="_blank"><code class="codeph">ALL_CUBE_DIMENSIONALITY</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2669 d12486e2584 ">
                                 <p>Describes the dimension order of the OLAP cubes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2679" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_DIMENSIONS.html#REFRN20690" target="_blank"><code class="codeph">ALL_CUBE_DIMENSIONS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2679 d12486e2584 ">
                                 <p>Describes the cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2689" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_HIER_LEVELS.html#REFRN20685" target="_blank"><code class="codeph">ALL_CUBE_HIER_LEVELS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2689 d12486e2584 ">
                                 <p>Describes the hierarchy levels for cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2700" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_HIER_VIEW_COLUMNS.html#REFRN20687" target="_blank"><code class="codeph">ALL_CUBE_HIER_VIEW_COLUMNS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2700 d12486e2584 ">
                                 <p>Describes the columns of relational hierarchy views of cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2710" headers="d12486e2581 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/olaug&amp;id=REFRN20686" target="_blank"><code class="codeph">ALL_CUBE_HIER_VIEWS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2710 d12486e2584 ">
                                 <p>Describes the hierarchies for cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2720" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_HIERARCHIES.html#REFRN20684" target="_blank"><code class="codeph">ALL_CUBE_HIERARCHIES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2720 d12486e2584 ">
                                 <p>Describes the OLAP dimension hierarchies.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2730" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_MEASURES.html#REFRN20688" target="_blank"><code class="codeph">ALL_CUBE_MEASURES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2730 d12486e2584 ">
                                 <p>Describes the measures in the OLAP cubes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2740" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_VIEW_COLUMNS.html#REFRN20676" target="_blank"><code class="codeph">ALL_CUBE_VIEW_COLUMNS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2740 d12486e2584 ">
                                 <p>Describes the columns of the relational views of OLAP cubes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2750" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBE_VIEWS.html#REFRN20675" target="_blank"><code class="codeph">ALL_CUBE_VIEWS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2750 d12486e2584 ">
                                 <p>Describes the system-generated relational views of OLAP cubes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2760" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_CUBES.html#REFRN20673" target="_blank"><code class="codeph">ALL_CUBES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2760 d12486e2584 ">
                                 <p>Describes the OLAP cubes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2770" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_MEASURE_FOLDER_CONTENTS.html#REFRN20716" target="_blank"><code class="codeph">ALL_MEASURE_FOLDER_CONTENTS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2770 d12486e2584 ">
                                 <p>Describes the contents of OLAP measure folders.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d12486e2780" headers="d12486e2581 ">
                                 <p><a href="../refrn/ALL_MEASURE_FOLDERS.html#REFRN20689" target="_blank"><code class="codeph">ALL_MEASURE_FOLDERS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d12486e2780 d12486e2584 ">
                                 <p>Describes the OLAP measure folders.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-CFEEC0B0-E039-4147-8CC9-EA8CA1FC5288__GUID-31122669-3148-46AB-A7D1-F0D9C007C4BD">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/olaug&amp;id=REFRN20691" target="_blank"><span class="italic">Oracle Database Reference</span></a> for full descriptions of data dictionary views.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
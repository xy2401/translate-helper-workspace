<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Messaging Gateway Message Conversion</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Queuing User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Queuing User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96511-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="omg-working.html" title="Previous" type="text/html">
      <link rel="next" href="omg-monitoring.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Advanced Queuing">
    <meta name="dcterms.isVersionOf" content="ADQUE">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="omg-working.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="omg-monitoring.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Queuing User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Messaging Gateway Message Conversion</li>
            </ol>
            <a id="GUID-700BFAE2-DBC0-4DD9-8208-57229D179F48" name="GUID-700BFAE2-DBC0-4DD9-8208-57229D179F48"></a><a id="ADQUE2000"></a>
            
            <h2 id="ADQUE-GUID-700BFAE2-DBC0-4DD9-8208-57229D179F48" class="sect2"><span class="enumeration_chapter">20 </span> Oracle Messaging Gateway Message Conversion
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The following topics discuss how Oracle Messaging Gateway (MGW) converts <a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">message</span></a> formats from one messaging system to another. A conversion is generally necessary when moving messages between Oracle Database Advanced Queuing and another system, because different messaging systems have different message formats. <a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java Message Service</span></a> (JMS) messages are a special case. A <a href="glossary.html#GUID-94D9662C-2A02-4DFC-BFEC-684F85CE4186"><span class="xrefglossterm">JMS message</span></a> can be propagated only to a JMS destination, making conversion a simple process.
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8">Converting Oracle Messaging Gateway Non-JMS Messages</a></p>
                  </li>
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9">Message Conversion for WebSphere MQ</a></p>
                  </li>
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-E4267AE0-B912-490A-98E0-0009719FEC36">Message Conversion for TIB/Rendezvous</a></p>
                  </li>
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E">JMS Messages</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3351"></a><div class="props_rev_3"><a id="GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8" name="GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8"></a><h3 id="ADQUE-GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8" class="sect3"><span class="enumeration_section">20.1 </span>Converting Oracle Messaging Gateway Non-JMS Messages
               </h3>
               <div>
                  <p>MGW converts the native message format of the source messaging system to the native message format of the destination messaging system during <a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">propagation</span></a>. MGW uses <a href="glossary.html#GUID-F4F4838D-1672-4364-A9E8-EF21D7473749"><span class="xrefglossterm">canonical</span></a> types and a model centering on Oracle Database Advanced Queuing for the conversion.
                  </p>
               </div><a id="ADQUE3353"></a><a id="ADQUE3352"></a><div class="props_rev_3"><a id="GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A" name="GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A"></a><h4 id="ADQUE-GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A" class="sect4"><span class="enumeration_section">20.1.1 </span>Overview of the Non-JMS Message Conversion Process
                  </h4>
                  <div>
                     <p>When a message is propagated by MGW, the message is converted from the native format of the source <a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">queue</span></a> to the native format of the destination queue.
                     </p>
                     <p>A native message usually contains a message header and a message body. The header contains the fixed header fields that all messages in that messaging system have, such as message properties in Oracle Database Advanced Queuing and the fixed header in WebSphere MQ. The body contains message contents, such as the Oracle Database Advanced Queuing payload, the WebSphere MQ message body, or the entire TIB/Rendezvous message. MGW converts both message header and message body components. </p>
                     <p><a href="omg-message-conversion.html#GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A__i1005857">Figure 20-1</a><span class="italic"><span class="bold"> </span></span>shows how non-JMS messages are converted in two stages. A message is first converted from the native format of the source queue to the MGW internal message format, and then it is converted from the internal message format to the native format of the destination queue.
                     </p>
                     <div class="figure" id="GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A__i1005857">
                        <p class="titleinfigure">Figure 20-1 Non-JMS Message Conversion</p><img width="496" src="img/adqmg003.gif" alt="Description of Figure 20-1 follows" title="Description of Figure 20-1 follows" longdesc="img_text/adqmg003.html"><br><a href="img_text/adqmg003.html">Description of "Figure 20-1 Non-JMS Message Conversion"</a></div>
                     <!-- class="figure" -->
                     <p>The MGW agent uses an internal message format consisting of a header that is similar to the Oracle Database Advanced Queuing message properties and a body that is a representation of an MGW canonical type.</p>
                  </div>
               </div><a id="ADQUE3354"></a><div class="props_rev_3"><a id="GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9" name="GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9"></a><h4 id="ADQUE-GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9" class="sect4"><span class="enumeration_section">20.1.2 </span>Oracle Messaging Gateway Canonical Types
                  </h4>
                  <div>
                     <p>MGW defines canonical types to support message conversion between Oracle Database Advanced Queuing and non-Oracle messaging systems. A canonical type is a message type representation in the form of a PL/SQL Oracle type in Oracle Database. The canonical types are <code class="codeph">RAW</code>, <code class="codeph">SYS.MGW_BASIC_MSG_T</code>, and <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>.
                     </p>
                     <p>WebSphere MQ propagation supports the canonical types <code class="codeph">SYS.MGW_BASIC_MSG_T</code> and <code class="codeph">RAW</code>. TIB/Rendezvous propagation supports the canonical types <code class="codeph">SYS.MGW_TIBRV_MSG_T</code> and <code class="codeph">RAW</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9__GUID-08B5463C-7E6E-4682-A0B2-AA9F5AE146E8">
                        <p class="notep1">See Also:</p>
                        <p>"DBMS_MGWMSG" in <a href="../arpls/DBMS_MGWMSG.html#ARPLS67062" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for Syntax and attribute information for <code class="codeph">SYS.MGW_BASIC_MSG_T </code>and <code class="codeph">SYS.MGW_TIBRV_MSG_T</code></p>
                     </div>
                  </div>
               </div><a id="ADQUE3355"></a><div class="props_rev_3"><a id="GUID-C72018E5-BE7D-4E13-95F4-FEEC446BD61C" name="GUID-C72018E5-BE7D-4E13-95F4-FEEC446BD61C"></a><h4 id="ADQUE-GUID-C72018E5-BE7D-4E13-95F4-FEEC446BD61C" class="sect4"><span class="enumeration_section">20.1.3 </span>Message Header Conversion
                  </h4>
                  <div>
                     <p>MGW provides default mappings between Oracle Database Advanced Queuing message properties and non-Oracle message header fields that have a counterpart in Oracle Database Advanced Queuing message properties with the same semantics. Where MGW does not provide a mapping, the message header fields are set to a default value, usually the default value defined by the messaging system. </p>
                  </div>
               </div><a id="ADQUE3356"></a><a id="ADQUE3357"></a><a id="ADQUE3358"></a><a id="ADQUE3359"></a><a id="ADQUE2001"></a><div class="props_rev_3"><a id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D" name="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D"></a><h4 id="ADQUE-GUID-54875DD0-41CC-46B8-B6F2-520118C7931D" class="sect4"><span class="enumeration_section">20.1.4 </span>Handling Arbitrary Payload Types Using Message Transformations
                  </h4>
                  <div>
                     <div class="section">
                        <p>When converting to or from Oracle Database Advanced Queuing messages, the MGW agent uses only its canonical types. Arbitrary payload types are supported, however, with the assistance of user-defined Oracle Database Advanced Queuing message transformations to convert between an Oracle Database Advanced Queuing queue payload and an MGW canonical type.</p>
                        <p>For MGW to propagate messages from an Oracle Database Advanced Queuing queue with an arbitrary <a href="glossary.html#GUID-4F65D487-125E-466A-8127-6EB40749DCA3"><span class="xrefglossterm">ADT</span></a> payload (outbound propagation), you must provide a mapping to an MGW canonical ADT. The <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">transformation</span></a> is invoked when the MGW agent dequeues messages from the Oracle Database Advanced Queuing queue. Similarly, for MGW to propagate messages to an Oracle Database Advanced Queuing queue with an arbitrary ADT payload (inbound propagation), you must provide a mapping from an MGW canonical ADT. The transformation is invoked when the MGW agent enqueues messages to the Oracle Database Advanced Queuing queue.
                        </p>
                        <div class="figure" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__GUID-73B3B524-EA48-4DD2-B520-8E92C6103571">
                           <p class="titleinfigure">Figure 20-2 Oracle Database Advanced Queuing Message Conversion</p><img src="img/adqmg004.gif" width="496" alt="Description of Figure 20-2 follows" title="Description of Figure 20-2 follows" longdesc="img_text/adqmg004.html"><br><a href="img_text/adqmg004.html">Description of "Figure 20-2 Oracle Database Advanced Queuing Message Conversion"</a></div>
                        <!-- class="figure" -->
                        <p>The transformation is always executed in the context of the MGW agent, which means that the MGW agent user (the user specified using <code class="codeph">DBMS_MGWADM</code>.<code class="codeph">CREATE_AGENT</code> or <code class="codeph">DBMS_MGWADM</code>.<code class="codeph">ALTER_AGENT</code>) must have <code class="codeph">EXECUTE</code> privileges on the transformation function and the Oracle Database Advanced Queuing payload type. This can be accomplished by granting the <code class="codeph">EXECUTE</code> privilege to <code class="codeph">PUBLIC</code> or by granting the <code class="codeph">EXECUTE</code> privilege directly to the MGW agent user.
                        </p>
                        <p>To configure a MGW propagation job with a transformation:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Create the transformation function.</span></li>
                        <li><span>Grant <code class="codeph">EXECUTE</code> to the MGW agent user or to <code class="codeph">PUBLIC</code> on the function and the object types it references.</span></li>
                        <li><span>Call <code class="codeph">DBMS_TRANSFORM.CREATE_TRANSFORMATION</code> to register the transformation.</span></li>
                        <li><span>Call <code class="codeph">DBMS_MGWADM</code>.<code class="codeph">CREATE_JOB</code> to create a MGW propagation job using the transformation, or <code class="codeph">DBMS_MGWADM</code>.<code class="codeph">ALTER_JOB</code> to alter an existing job. </span></li>
                     </ol>
                     <div class="example" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005674">
                        <p class="titleinexample">Example 20-1 Transformation Function Signature</p><pre class="oac_no_warn" dir="ltr">FUNCTION trans_sampleadt_to_mgw_basic(in_msg IN mgwuser.sampleADT)
RETURN SYS.MGW_BASIC_MSG_T;
</pre><p>You can create a transformation using <code class="codeph">DBMS_TRANSFORM.CREATE_TRANSFORMATION</code>, as shown in <a href="omg-message-conversion.html#GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__CBBJFDAD">Example 20-2</a>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__CBBJFDAD">
                        <p class="titleinexample">Example 20-2 Creating a Transformation</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_TRANSFORM.CREATE_TRANSFORMATION(
        schema         =&gt; 'mgwuser',
        name           =&gt; 'sample_adt_to_mgw_basic',
        from_schema    =&gt; 'mgwuser',
        from_type      =&gt; 'sampleadt',
        to_schema      =&gt; 'sys',
        to_type        =&gt; 'MGW_BASIC_MSG_T',
        transformation =&gt; 'mgwuser.trans_sampleadt_to_mgw_basic(user_data)');
END;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005710">
                        <p class="titleinexample">Example 20-3 Registering a Transformation</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_MGWADM.CREATE_JOB(
    job_name          =&gt;   'job_aq2mq',
    propagation_type  =&gt;    DBMS_MGWADM.OUTBOUND_PROPAGATION,
    source            =&gt;   'mgwuser.srcq',
    destination       =&gt;   'destq.mqlink',
    transformation    =&gt;   'mgwuser.sample_adt_to_mgw_basic',
    exception_queue   =&gt;   'mgwuser.excq');
END;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>The value passed in the transformation parameter for these APIs must be the registered transformation name and not the function name. For example, <code class="codeph">trans_sampleadt_to_mgw_basic</code> is a stored procedure representing a transformation function with the signature shown in <a href="omg-message-conversion.html#GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005674">Example 20-1</a>.
                        </p>
                        <div class="infoboxnote" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__GUID-F3B75821-3273-4952-91BF-5524E9DFCDBE">
                           <p class="notep1">Note:</p>
                           <p>All commands in the examples must be run as a user granted <code class="codeph">MGW_ADMINISTRATOR_ROLE</code>, except for the commands to create transformations.
                           </p>
                        </div>
                        <p>Once created, this transformation can be registered with MGW when creating a propagation job. <a href="omg-message-conversion.html#GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005710">Example 20-3</a> creates job <code class="codeph">job_aq2mq</code>, for whom messages are propagated from Oracle Database Advanced Queuing queue <code class="codeph">mgwuser.srcq</code> to non-Oracle messaging system queue <code class="codeph">destq@mqlink</code> using transformation <code class="codeph">mgwuser.sample_adt_to_mgw_basic</code>.
                        </p>
                        <p>An error that occurs while attempting a user-defined transformation is usually considered a message conversion exception, and the message is moved to the <a href="glossary.html#GUID-38CB652B-C8D2-49F4-92FD-926EB001284F"><span class="xrefglossterm">exception queue</span></a> if it exists.
                        </p>
                        <div class="infoboxnotealso" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__GUID-0B3C603C-3DBC-4EAC-B9C1-083D985FA157">
                           <p class="notep1">See Also:</p>
                           <p>"DBMS_MGWADM", "DBMS_MGWMSG", and "DBMS_TRANSFORM" in <a href="../arpls/DBMS_MGWMSG.html#ARPLS365" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3361"></a><a id="ADQUE3362"></a><a id="ADQUE3360"></a><div class="props_rev_3"><a id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD" name="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD"></a><h4 id="ADQUE-GUID-BC176537-9649-4CB2-B3A9-1216815EADFD" class="sect4"><span class="enumeration_section">20.1.5 </span>Handling Logical Change Records
                  </h4>
                  <div>
                     <p>MGW provides facilities to propagate Logical Change Records (LCRs). Routines are provided to help in creating transformations to handle the propagation of both row LCRs and DDL LCRs stored in queues with payload type <code class="codeph">ANYDATA</code>. An LCR is propagated as an XML string stored in the appropriate message type.
                     </p>
                     <div class="infoboxnote" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__GUID-C57396BA-42D9-41A3-ACD8-9FF1CD4D8D6B">
                        <p class="notep1">Note:</p>
                        <p>For LCR propagation, you must load the XDB package.</p>
                     </div>
                     <p>Because Oracle Streams uses <code class="codeph">ANYDATA</code> queues to store LCRs, an <code class="codeph">ANYDATA</code> queue is the source for outbound propagation. The transformation must first convert the <code class="codeph">ANYDATA</code> object containing an LCR into an XMLType object using the MGW routine <code class="codeph">DBMS_MGWMSG.LCR_TO_XML</code>. If the <code class="codeph">ANYDATA</code> object does not contain an LCR, then this routine raises an error. The XML document string of the LCR is then extracted from the XMLType and placed in the appropriate MGW canonical type (<code class="codeph">SYS.MGW_BASIC_MSG_T</code> or <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>).
                     </p>
                     <p><a href="omg-message-conversion.html#GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABCGJEH">Example 20-4</a> illustrates a simplified transformation used for LCR outbound propagation. The transformation converts an <code class="codeph">ANYDATA</code> payload containing an LCR to a <code class="codeph">SYS.MGW_TIBRV_MSG_T</code> object. The string representing the LCR as an XML document is put in a field named <code class="codeph">ORACLE_LCR</code>.
                     </p>
                     <p>For LCR inbound propagation, an MGW canonical type (<code class="codeph">SYS.MGW_BASIC_MSG_T</code> or <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>) is the transformation source type. A string in the format of an XML document representing an LCR must be contained in the canonical type. The transformation function must extract the string from the message, create an XMLType object from it, and convert it to an <code class="codeph">ANYDATA</code> object containing an LCR with the MGW routine <code class="codeph">DBMS_MGWMSG.XML_TO_LCR</code>. If the original XML document does not represent an LCR, then this routine raises an error.
                     </p>
                     <p><a href="omg-message-conversion.html#GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABDEJAG">Example 20-5</a> illustrates a simplified transformation used for LCR inbound propagation. The transformation converts a <code class="codeph">SYS.MGW_TIBRV_MSG_T</code> object with a field containing an XML string representing an LCR to an <code class="codeph">ANYDATA</code> object. The string representing the LCR as an XML document is taken from a field named <code class="codeph">ORACLE_LCR</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__GUID-02318280-F2FC-445A-B5B1-7EABE456CFB8">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>"DBMS_MGWMSG" in <a href="../arpls/DBMS_MGWMSG.html#ARPLS365" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/mgw/samples/lcr</code> for complete examples of LCR transformations
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABCGJEH">
                        <p class="titleinexample">Example 20-4 Outbound LCR Transformation</p><pre class="oac_no_warn" dir="ltr">create or replace function any2tibrv(adata in anydata)
return SYS.MGW_TIBRV_MSG_T is
    v_xml   XMLType;
    v_text  varchar2(2000);
    v_tibrv sys.mgw_tibrv_msg_t;
BEGIN
    v_xml   := dbms_mgwmsg.lcr_to_xml(adata);
    -- assume the lcr is smaller than 2000 characters long.
    v_text  := v_xml.getStringVal();
    v_tibrv := SYS.MGW_TIBRV_MSG_T.CONSTRUCT;
    v_tibrv.add_string('ORACLE_LCR', 0, v_text);
    return v_tibrv;
END any2tibrv;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABDEJAG">
                        <p class="titleinexample">Example 20-5 Inbound LCR Transformation</p><pre class="oac_no_warn" dir="ltr">create or replace function tibrv2any(tdata in sys.mgw_tibrv_msg_t)
return anydata is 
    v_field   sys.mgw_tibrv_field_t;
    v_xml     XMLType;
    v_text    varchar2(2000);
    v_any     anydata;
BEGIN
    v_field := tdata.get_field_by_name('ORACLE_LCR');
    -- type checking
    v_text  := v_field.text_value;
    -- assume it is not null
    v_xml  := XMLType.createXML(v_text);
    v_any  := dbms_mgwmsg.xml_to_lcr(v_xml); 
    return v_any;
END tibrv2any;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE3364"></a><a id="ADQUE3363"></a><div class="props_rev_3"><a id="GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9" name="GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9"></a><h3 id="ADQUE-GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9" class="sect3"><span class="enumeration_section">20.2 </span>Message Conversion for WebSphere MQ
               </h3>
               <div>
                  <p>MGW converts between the MGW canonical types and the WebSphere MQ native message format. WebSphere MQ native messages consist of a fixed message header and a message body. The message body is treated as either a <code class="codeph">TEXT</code> value or <code class="codeph">RAW</code> (bytes) value. The canonical types supported for WebSphere MQ propagation are <code class="codeph">SYS.MGW_BASIC_MSG_T</code> and <code class="codeph">RAW</code>.
                  </p>
                  <div class="figure" id="GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9__CBBEIJCA">
                     <p class="titleinfigure">Figure 20-3 Message Conversion for WebSphere MQ Using MGW_BASIC_MSG_T</p><img width="496" src="img/adqmg005.gif" alt="Description of Figure 20-3 follows" title="Description of Figure 20-3 follows" longdesc="img_text/adqmg005.html"><br><a href="img_text/adqmg005.html">Description of "Figure 20-3 Message Conversion for WebSphere MQ Using MGW_BASIC_MSG_T"</a></div>
                  <!-- class="figure" -->
                  <p><a href="omg-message-conversion.html#GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9__CBBEIJCA">Figure 20-3</a> illustrates the message conversion performed by the MGW WebSphere MQ driver when using the canonical type <code class="codeph">SYS.MGW_BASIC_MSG_T</code>. For outbound propagation, the driver maps the Oracle Database Advanced Queuing message properties and canonical message to a WebSphere MQ message having a fixed header and a message body. For inbound propagation, the driver maps a native message to a set of Oracle Database Advanced Queuing message properties and a canonical message. When the canonical type is <code class="codeph">RAW</code>, the mappings are the same, except no canonical headers exist.
                  </p>
               </div><a id="ADQUE3366"></a><a id="ADQUE3367"></a><a id="ADQUE3368"></a><a id="ADQUE3365"></a><div class="props_rev_3"><a id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596" name="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596"></a><h4 id="ADQUE-GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596" class="sect4"><span class="enumeration_section">20.2.1 </span>WebSphere MQ Message Header Mappings
                  </h4>
                  <div>
                     <p>When the MGW canonical type used in an outbound propagation job is <code class="codeph">RAW</code>, no WebSphere MQ header information is set from the <code class="codeph">RAW</code> message body. Similarly, for inbound propagation no WebSphere MQ header information is preserved in the <code class="codeph">RAW</code> message body. MGW canonical type <code class="codeph">SYS.MGW_BASIC_MSG_T</code>, however, has a header that can be used to specify WebSphere MQ header fields for outbound propagation, and preserve WebSphere MQ header fields for inbound propagation.
                     </p>
                     <p>This section describes the message properties supported for the WebSphere MQ messaging system when using <code class="codeph">SYS.MGW_BASIC_MSG_T</code> as the canonical type. <a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356" title="Rows correspond to Messaging Gateway names. The first column is the name, the second column is its Messaging Gateway type, the third column is the corresponding WebSphere MQ property name, and the fourth column indicates what it is used for.">Table 20-1</a> defines the MGW {name, value} pairs used to describe the WebSphere MQ header properties. The first column refers to valid string values for the <code class="codeph">SYS.MGW_NAME_VALUE_T.NAME</code> field in the <code class="codeph">SYS.MGW_BASIC_MSG_T</code> header. The second column refers to the <code class="codeph">SYS.MGW_NAME_VALUE_T.TYPE</code> value corresponding to the name. (Refer to <span class="q">"<a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__I1006616">Notes on Rows correspond to Messaging Gateway names. The first column is the name, the second column is its Messaging Gateway type, the third column is the corresponding WebSphere MQ property name, and the fourth column indicates what it is used for.</a>"</span> for explanations of the numbers in parentheses.) 
                     </p>
                     <p>For inbound propagation, the WebSphere MQ driver generates {name,value} pairs based on the source message header and stores them in the header part of the canonical message of the <code class="codeph">SYS.MGW_BASIC_MSG_T</code> type. For outbound propagation, the WebSphere MQ driver sets the message header and enqueue options from {name,value} pairs for these properties stored in the header part of the <code class="codeph">SYS.MGW_BASIC_MSG_T</code> canonical message.
                     </p>
                     <div class="tblformalwide" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356">
                        <p class="titleintable">Table 20-1 MGW Names for WebSphere MQ Header Values </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="MGW Names for WebSphere MQ Header Values " summary="Rows correspond to Messaging Gateway names. The first column is the name, the second column is its Messaging Gateway type, the third column is the corresponding WebSphere MQ property name, and the fourth column indicates what it is used for." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d114744e929">MGW Name</th>
                                 <th align="left" valign="bottom" width="22%" id="d114744e932">MGW Type</th>
                                 <th align="left" valign="bottom" width="25%" id="d114744e935">WebSphere MQ Property Name</th>
                                 <th align="left" valign="bottom" width="22%" id="d114744e938">Used For</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e943" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_accountingToken</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e943 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE (size 32)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e943 d114744e935 "><pre class="oac_no_warn" dir="ltr">accountingToken</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e943 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e956" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_applicationIdData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e956 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 32)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e956 d114744e935 "><pre class="oac_no_warn" dir="ltr">applicationIdData </pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e956 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e969" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_applicationOriginData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e969 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 4)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e969 d114744e935 "><pre class="oac_no_warn" dir="ltr">applicationOriginData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e969 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e982" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_backoutCount</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e982 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e982 d114744e935 "><pre class="oac_no_warn" dir="ltr">backoutCount</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e982 d114744e938 ">
                                    <p>Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e995" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_characterSet</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e995 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e995 d114744e935 "><pre class="oac_no_warn" dir="ltr">characterSet</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e995 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1008" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_correlationId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1008 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE (size 24)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1008 d114744e935 "><pre class="oac_no_warn" dir="ltr">correlationId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1008 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1021" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_encoding</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1021 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1021 d114744e935 "><pre class="oac_no_warn" dir="ltr">encoding</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1021 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1034" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_expiry</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1034 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1034 d114744e935 "><pre class="oac_no_warn" dir="ltr">expiry</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1034 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1047" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_feedback</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1047 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1047 d114744e935 "><pre class="oac_no_warn" dir="ltr">feedback</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1047 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1060" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_format</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1060 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 8)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1060 d114744e935 "><pre class="oac_no_warn" dir="ltr">format</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1060 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1073" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_groupId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1073 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE (size 24)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1073 d114744e935 "><pre class="oac_no_warn" dir="ltr">groupId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1073 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1087" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageFlags</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1087 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1087 d114744e935 "><pre class="oac_no_warn" dir="ltr">messageFlags</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1087 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1100" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1100 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE (size 24)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1100 d114744e935 "><pre class="oac_no_warn" dir="ltr">messageId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1100 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1113" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageSequenceNumber</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1113 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1113 d114744e935 "><pre class="oac_no_warn" dir="ltr">messageSequenceNumber</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1113 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1126" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1126 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1126 d114744e935 "><pre class="oac_no_warn" dir="ltr">messageType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1126 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1139" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_offset</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1139 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1139 d114744e935 "><pre class="oac_no_warn" dir="ltr">offset</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1139 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1152" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_originalLength</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1152 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1152 d114744e935 "><pre class="oac_no_warn" dir="ltr">originalLength</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1152 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1165" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_persistence</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1165 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1165 d114744e935 "><pre class="oac_no_warn" dir="ltr">persistence</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1165 d114744e938 ">
                                    <p>Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1178" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_priority</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1178 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1178 d114744e935 "><pre class="oac_no_warn" dir="ltr">priority</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1178 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1191" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putApplicationName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1191 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 28)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1191 d114744e935 "><pre class="oac_no_warn" dir="ltr">putApplicationName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1191 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1204" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putApplicationType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1204 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1204 d114744e935 "><pre class="oac_no_warn" dir="ltr">putApplicationType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1204 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1217" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putDateTime</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1217 d114744e932 "><pre class="oac_no_warn" dir="ltr">DATE_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1217 d114744e935 "><pre class="oac_no_warn" dir="ltr">putDateTime</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1217 d114744e938 ">
                                    <p>Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1231" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putMessageOptions</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1231 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1231 d114744e935 "><pre class="oac_no_warn" dir="ltr">putMessageOptions</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1231 d114744e938 ">
                                    <p>Outbound (1) (2)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1244" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_replyToQueueManagerName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1244 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 48)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1244 d114744e935 "><pre class="oac_no_warn" dir="ltr">replyToQueueManagerName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1244 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1257" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_replyToQueueName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1257 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 48)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1257 d114744e935 "><pre class="oac_no_warn" dir="ltr">replyToQueueName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1257 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1270" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_report</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1270 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1270 d114744e935 "><pre class="oac_no_warn" dir="ltr">report</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1270 d114744e938 ">
                                    <p>Outbound (1), Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1283" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_userId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1283 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE (size 12)</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1283 d114744e935 "><pre class="oac_no_warn" dir="ltr">userId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1283 d114744e938 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__GUID-42D875C8-6C41-4040-B330-4AD16DCB61EF">
                        <p class="notep1">See Also:</p>
                        <p>"DBMS_MGWMSG" in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=ARPLS365" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                     </div>
                     <div class="section" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__I1006616">
                        <p class="subhead3" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__GUID-46D56A8D-610F-477D-812A-2B446CBADD26">Notes on <span><a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356" title="Rows correspond to Messaging Gateway names. The first column is the name, the second column is its Messaging Gateway type, the third column is the corresponding WebSphere MQ property name, and the fourth column indicates what it is used for.">Table 20-1</a></span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>This use is subject to WebSphere MQ restrictions. For example, if <code class="codeph">MGW_MQ_accountingToken</code> is set for an outgoing message, then WebSphere MQ overrides its value unless <code class="codeph">MGW_MQ_putMessageOptions</code> is set to the WebSphere MQ constant <code class="codeph">MQPMD_SET_ALL_CONTEXT</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MGW_MQ_putMessageOptions</code> is used as the <code class="codeph">putMessageOptions</code> argument to the WebSphere MQ Base Java <code class="codeph">Queue.put()</code> method. It is not part of the WebSphere MQ header information and is therefore not an actual message property.
                              </p>
                              <p>The value for the <code class="codeph">openOptions</code> argument of the WebSphere MQ Base Java <code class="codeph">MQQueueManager.accessQueue</code> method is specified when the WebSphere MQ queue is registered using the <code class="codeph">DBMS_MGWADM.REGISTER_FOREIGN_QUEUE </code>call. Dependencies can exist between the two. For instance, for <code class="codeph">MGW_MQ_putMessageOptions</code> to include <code class="codeph">MQPMD_SET_ALL_CONTEXT,</code> <code class="codeph">the MQ_openMessageOptions</code> queue option must include <code class="codeph">MQOO_SET_CONTEXT</code>.
                              </p>
                              <p>The MGW agent adds the value <code class="codeph">MQPMO_SYNCPOINT</code> to any value that you can specify.
                              </p>
                           </li>
                        </ol>
                        <p>MGW sets default values for two WebSphere MQ message header fields: <code class="codeph">messageType</code> defaults to <code class="codeph">MQMT_DATAGRAM</code> and <code class="codeph">putMessageOptions</code> defaults to <code class="codeph">MQPMO_SYNCPOINT</code>.
                        </p>
                        <p>MGW provides two default mappings between Oracle Database Advanced Queuing message properties and WebSphere MQ header fields.</p>
                        <p>One maps the Oracle Database Advanced Queuing message property <code class="codeph">expiration</code>, representing the time-to-live of the message at the time the message becomes available in the queue, to the WebSphere MQ header field <code class="codeph">expiry</code>, representing the time-to-live of the message. For outbound propagation, the value used for <code class="codeph">expiry</code> is determined by subtracting the time the message was available in the queue from the <code class="codeph">expiration</code>, converted to tenths of a second. Oracle Database Advanced Queuing value <code class="codeph">NEVER</code> is mapped to <code class="codeph">MQEI_UNLIMITED</code>. For inbound propagation, the value of <code class="codeph">expiration</code> is simply <code class="codeph">expiry</code> converted to seconds. WebSphere MQ value <code class="codeph">MQEI_UNLIMITED</code> is mapped to <code class="codeph">NEVER</code>.
                        </p>
                        <p>The other default maps Oracle Database Advanced Queuing message property <code class="codeph">priority</code> with the WebSphere MQ header field <code class="codeph">priority</code>. It is described in <a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__BABFCEIH" title="The first column is propagation type, the second column is messaging system, and the third through twelfth columns are the corresponding priority values.">Table 20-2</a>.
                        </p>
                        <div class="tblformal" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__BABFCEIH">
                           <p class="titleintable">Table 20-2 Default Priority Mappings for Propagation</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Default Priority Mappings for Propagation" summary="The first column is propagation type, the second column is messaging system, and the third through twelfth columns are the corresponding priority values." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d114744e1447">Propagation Type</th>
                                    <th align="left" valign="bottom" width="24%" id="d114744e1450">Message System</th>
                                    <th colspan="10" class="text-center" valign="bottom" id="d114744e1453">Priority Values</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1458" headers="d114744e1447 ">
                                       <p>Outbound</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1458 d114744e1450 ">
                                       <p>Oracle Database Advanced Queuing</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>5</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1496" headers="d114744e1447 ">
                                       <p>Outbound</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1496 d114744e1450 ">
                                       <p>WebSphere MQ</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>5</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1534" headers="d114744e1447 ">
                                       <p>Inbound</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1534 d114744e1450 ">
                                       <p>Oracle Database Advanced Queuing</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>5</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1572" headers="d114744e1447 ">
                                       <p>Inbound</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1572 d114744e1450 ">
                                       <p>WebSphere MQ</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>5</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__GUID-E0DF9AC7-07FA-4BDE-B26F-A02D8B154B95">
                           <p class="notep1">Note:</p>
                           <p>For outbound propagation, Oracle Database Advanced Queuing priority values less than 0 are mapped to WebSphere MQ priority 9, and Oracle Database Advanced Queuing priority values greater than 9 are mapped to WebSphere MQ priority 0.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3369"></a><div class="props_rev_3"><a id="GUID-2BFEBC14-55C8-4B1A-BF46-C7C0BC82F268" name="GUID-2BFEBC14-55C8-4B1A-BF46-C7C0BC82F268"></a><h4 id="ADQUE-GUID-2BFEBC14-55C8-4B1A-BF46-C7C0BC82F268" class="sect4"><span class="enumeration_section">20.2.2 </span>WebSphere MQ Outbound Propagation
                  </h4>
                  <div>
                     <p>If no message transformation is provided for outbound propagation, then the Oracle Database Advanced Queuing source queue payload type must be either <code class="codeph">SYS.MGW_BASIC_MSG_T</code> or <code class="codeph">RAW</code>. If a message transformation is specified, then the target ADT of the transformation must be <code class="codeph">SYS.MGW_BASIC_MSG_T</code>, but the source ADT can be any ADT supported by Oracle Database Advanced Queuing.
                     </p>
                     <p>If the Oracle Database Advanced Queuing queue payload is RAW, then the resulting WebSphere MQ message has the message body set to the value of the RAW bytes and, by default, the <code class="codeph">format</code> field set to the value "<code class="codeph">MGW_Byte</code>".
                     </p>
                     <p>If the Oracle Database Advanced Queuing queue payload or transformation target ADT is <code class="codeph">SYS.MGW_BASIC_MSG_T</code>, then the message is mapped to a WebSphere MQ native message as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The WebSphere MQ fixed header fields are based on the internal Oracle Database Advanced Queuing message properties and the <code class="codeph">SYS.MGW_BASIC_MSG_T.header</code> attribute of the canonical message, as described in <span class="q">"<a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596">WebSphere MQ Message Header Mappings</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>If the canonical message has a <code class="codeph">TEXT</code> body, then the WebSphere MQ format header field is set to <code class="codeph">MQFMT_STRING</code> unless overridden by the header property <code class="codeph">MGW_MQ_format</code>. The message body is treated as text.
                           </p>
                        </li>
                        <li>
                           <p>If the canonical message has a <code class="codeph">RAW</code> body, then the WebSphere MQ format header field is set to "<code class="codeph">MGW_Byte</code>" unless overridden by the header property <code class="codeph">MGW_MQ_format</code>. The message body is treated as raw bytes.
                           </p>
                        </li>
                        <li>
                           <p>If the canonical message has both a <code class="codeph">TEXT</code> and <code class="codeph">RAW</code> body, then message conversion fails.
                           </p>
                        </li>
                        <li>
                           <p>If the canonical message has neither a <code class="codeph">TEXT</code> nor <code class="codeph">RAW</code> body, then no message body is set, and the WebSphere MQ format header field is <code class="codeph">MQFMT_NONE</code>.
                           </p>
                        </li>
                        <li>
                           <p>If the canonical message has a <code class="codeph">TEXT</code> body with both small and large values set (<code class="codeph">SYS.MGW_BASIC_MSG_T.TEXT_BODY.small_value</code> and <code class="codeph">SYS.MGW_BASIC_MSG_T.TEXT_BODY.large_value</code> not empty), then message conversion fails.
                           </p>
                        </li>
                        <li>
                           <p>If the canonical message has a <code class="codeph">RAW</code> body with both small and large values set (<code class="codeph">SYS.MGW_BASIC_MSG_T.RAW_BODY.small_value</code> and <code class="codeph">SYS.MGW_BASIC_MSG_T.RAW_BODY.large_value</code> not empty), then message conversion fails.
                           </p>
                        </li>
                     </ul>
                     <p>If the job option <code class="codeph">PreserveMessageID</code> is specified with a value of <code class="codeph">TRUE</code>, then the <code class="codeph">correlationId</code> field of the WebSphere message header will be set to the AQ source message identifier. The <code class="codeph">correlationId</code> value will be a 24-byte value of the form <code class="codeph">"AQMSGID:"+</code><span class="italic"><code class="codeph">AQ_msgid</code></span> where <span class="italic"><code class="codeph">AQ_msgid</code></span> represents the 16-byte Database AQ message identifier.
                     </p>
                  </div>
               </div><a id="ADQUE3370"></a><div class="props_rev_3"><a id="GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB" name="GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB"></a><h4 id="ADQUE-GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB" class="sect4"><span class="enumeration_section">20.2.3 </span>WebSphere MQ Inbound Propagation
                  </h4>
                  <div>
                     <p>If no message transformation is provided for inbound propagation, then the Oracle Database Advanced Queuing destination queue payload type must be either <code class="codeph">SYS.MGW_BASIC_MSG_T</code> or <code class="codeph">RAW</code>. If a message transformation is specified, then the source ADT of the transformation must be <code class="codeph">SYS.MGW_BASIC_MSG_T</code>, but the destination ADT can be any ADT supported by Oracle Database Advanced Queuing.
                     </p>
                     <p>If the Oracle Database Advanced Queuing queue payload is <code class="codeph">RAW</code> and the incoming WebSphere MQ message has a <code class="codeph">format</code> of <code class="codeph">MQFMT_STRING</code>, then message conversion fails. Otherwise the message body is considered as raw bytes and enqueued directly to the destination queue. If the number of bytes is greater than 32KB, then message conversion fails. The actual limit is 32512 bytes rather than 32767 bytes.
                     </p>
                     <p>If the Oracle Database Advanced Queuing queue payload or transformation source ADT is <code class="codeph">SYS.MGW_BASIC_MSG_T</code>, then the WebSphere MQ message is mapped to a <code class="codeph">SYS.MGW_BASIC_MSG_T</code> message as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Specific WebSphere MQ header fields are mapped to Oracle Database Advanced Queuing message properties as previously described.</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">SYS.MGW_BASIC_MSG_T.header</code> attribute of the canonical message is set to {name, value} pairs based on the WebSphere MQ header fields, as described in <a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356" title="Rows correspond to Messaging Gateway names. The first column is the name, the second column is its Messaging Gateway type, the third column is the corresponding WebSphere MQ property name, and the fourth column indicates what it is used for.">Table 20-1</a>. These values preserve the original content of the WebSphere MQ message header.
                           </p>
                        </li>
                        <li>
                           <p>If the WebSphere MQ <code class="codeph">format</code> header field is <code class="codeph">MQFMT_STRING</code>, then the WebSphere MQ message body is treated as text, and its value is mapped to <code class="codeph">SYS.MGW_BASIC_MSG_T.text_body</code>. For any other <code class="codeph">format</code> value, the message body is treated as raw bytes, and its value is mapped to <code class="codeph">SYS.MGW_BASIC_MSG_T.raw_body</code>.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB__GUID-32D97C47-C582-4642-A646-5FBCBCF5D46D">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596">WebSphere MQ Message Header Mappings</a>"</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE3372"></a><a id="ADQUE3373"></a><a id="ADQUE3371"></a><div class="props_rev_3"><a id="GUID-E4267AE0-B912-490A-98E0-0009719FEC36" name="GUID-E4267AE0-B912-490A-98E0-0009719FEC36"></a><h3 id="ADQUE-GUID-E4267AE0-B912-490A-98E0-0009719FEC36" class="sect3"><span class="enumeration_section">20.3 </span>Message Conversion for TIB/Rendezvous
               </h3>
               <div>
                  <p>MGW regards a TIB/Rendezvous message as a set of fields and supplementary information. <a href="omg-message-conversion.html#GUID-E4267AE0-B912-490A-98E0-0009719FEC36__i1007171">Figure 20-4</a> shows how messages are converted between MGW and TIB/Rendezvous.
                  </p>
                  <div class="figure" id="GUID-E4267AE0-B912-490A-98E0-0009719FEC36__i1007171">
                     <p class="titleinfigure">Figure 20-4 Message Conversion for TIB/Rendezvous</p><img width="464" src="img/adque447.gif" alt="Description of Figure 20-4 follows" title="Description of Figure 20-4 follows" longdesc="img_text/adque447.html"><br><a href="img_text/adque447.html">Description of "Figure 20-4 Message Conversion for TIB/Rendezvous"</a></div>
                  <!-- class="figure" -->
                  <p>When a message conversion failure occurs, messages are moved to an exception queue (if one has been provided), so that MGW can continue propagation of the remaining messages in the source queue. In inbound propagation from TIB/Rendezvous, an exception queue is a registered subject.</p>
                  <p>All TIB/Rendezvous wire format datatypes for TIB/Rendezvous fields are supported, except for the datatypes with unsigned integers and the nested message type. User-defined custom datatypes are not supported in this release. If a message contains data of the unsupported datatypes, then a message conversion failure occurs when the message is processed. A message conversion failure results in moving the failed message from the source queue to the exception queue, if an exception queue is provided.</p>
                  <p><a href="omg-message-conversion.html#GUID-E4267AE0-B912-490A-98E0-0009719FEC36__BABECCJE" title="The first column is the TIB/Rendezvous Wire Format, the second column is the corresponding Oracle Type, and the third column is the corresponding ADT Field Type.">Table 20-3</a> shows the datatype mapping used when MGW converts between a native TIB/Rendezvous message and the canonical ADT. For each supported TIB/Rendezvous wire format type, it shows the Oracle type used to store the data and the <code class="codeph">DBMS_MGWMSG</code> constant that represents that type.
                  </p>
                  <div class="tblformal" id="GUID-E4267AE0-B912-490A-98E0-0009719FEC36__BABECCJE">
                     <p class="titleintable">Table 20-3 TIB/Rendezvous Datatype Mapping</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="TIB/Rendezvous Datatype Mapping" summary="The first column is the TIB/Rendezvous Wire Format, the second column is the corresponding Oracle Type, and the third column is the corresponding ADT Field Type." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d114744e2015">TIB/Rendezvous Wire Format</th>
                              <th align="left" valign="bottom" width="41%" id="d114744e2018">Oracle Type</th>
                              <th align="left" valign="bottom" width="34%" id="d114744e2021">ADT Field Type</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2026" headers="d114744e2015 ">
                                 <p><code class="codeph">Bool</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2026 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2026 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_BOOL</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2042" headers="d114744e2015 ">
                                 <p><code class="codeph">F32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2042 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2042 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F32</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2058" headers="d114744e2015 ">
                                 <p><code class="codeph">F64</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2058 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2058 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F64</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2074" headers="d114744e2015 ">
                                 <p><code class="codeph">I8</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2074 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2074 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I8</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2090" headers="d114744e2015 ">
                                 <p><code class="codeph">I16</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2090 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2090 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I16</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2106" headers="d114744e2015 ">
                                 <p><code class="codeph">I32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2106 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2106 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I32</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2122" headers="d114744e2015 ">
                                 <p><code class="codeph">I64</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2122 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2122 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I64</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2138" headers="d114744e2015 ">
                                 <p><code class="codeph">U8</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2138 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2138 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2150" headers="d114744e2015 ">
                                 <p><code class="codeph">U16</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2150 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2150 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2162" headers="d114744e2015 ">
                                 <p><code class="codeph">U32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2162 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2162 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2174" headers="d114744e2015 ">
                                 <p><code class="codeph">U64</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2174 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2174 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2187" headers="d114744e2015 ">
                                 <p><code class="codeph">IPADDR32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2187 d114744e2018 ">
                                 <p><code class="codeph">VARCHAR2</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2187 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_IPADDR32</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2203" headers="d114744e2015 ">
                                 <p><code class="codeph">IPPORT16</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2203 d114744e2018 ">
                                 <p><code class="codeph">NUMBER</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2203 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_IPPORT16</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2219" headers="d114744e2015 ">
                                 <p><code class="codeph">DATETIME</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2219 d114744e2018 ">
                                 <p><code class="codeph">DATE</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2219 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_DATETIME</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2235" headers="d114744e2015 ">
                                 <p><code class="codeph">F32ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2235 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2235 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F32ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2251" headers="d114744e2015 ">
                                 <p><code class="codeph">F64ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2251 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2251 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F64ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2267" headers="d114744e2015 ">
                                 <p><code class="codeph">I8ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2267 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2267 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I8ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2283" headers="d114744e2015 ">
                                 <p><code class="codeph">I16ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2283 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2283 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I16ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2299" headers="d114744e2015 ">
                                 <p><code class="codeph">I32ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2299 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2299 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I32ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2315" headers="d114744e2015 ">
                                 <p><code class="codeph">I64ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2315 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2315 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I64ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2331" headers="d114744e2015 ">
                                 <p><code class="codeph">U8ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2331 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2331 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2343" headers="d114744e2015 ">
                                 <p><code class="codeph">U16ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2343 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2343 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2356" headers="d114744e2015 ">
                                 <p><code class="codeph">U32ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2356 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2356 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2368" headers="d114744e2015 ">
                                 <p><code class="codeph">U64ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2368 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2368 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2380" headers="d114744e2015 ">
                                 <p><code class="codeph">MSG</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2380 d114744e2018 ">
                                 <p>not supported</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2380 d114744e2021 ">
                                 <p>not supported</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2392" headers="d114744e2015 ">
                                 <p><code class="codeph">OPAQUE</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2392 d114744e2018 ">
                                 <p><code class="codeph">RAW</code> or <code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2392 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_OPAQUE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2410" headers="d114744e2015 ">
                                 <p><code class="codeph">STRING</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2410 d114744e2018 ">
                                 <p><code class="codeph">VARCHAR2</code> or <code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2410 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_STRING</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2428" headers="d114744e2015 ">
                                 <p><code class="codeph">XML</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2428 d114744e2018 ">
                                 <p><code class="codeph">RAW</code> or <code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2428 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_XML</code> 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>For propagation between Oracle Database Advanced Queuing and TIB/Rendezvous, MGW provides direct support for the Oracle Database Advanced Queuing payload types <code class="codeph">RAW</code> and <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>. To support any other Oracle Database Advanced Queuing payload type, you must supply a transformation.
                  </p>
               </div><a id="ADQUE3375"></a><a id="ADQUE3376"></a><a id="ADQUE3374"></a><div class="props_rev_3"><a id="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B" name="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B"></a><h4 id="ADQUE-GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B" class="sect4"><span class="enumeration_section">20.3.1 </span>AQ Message Property Mapping for TIB/Rendezvous
                  </h4>
                  <div>
                     <p>This section describes the mapping between Oracle Database AQ message properties and TIB/Rendezvous fields. This mapping is used to preserve Database AQ message properties during outbound propagation, and set Database AQ message properties during inbound propagation.</p>
                     <p><a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for.">Table 20-4</a> describes the Database AQ message properties supported using TIB/Rendezvous fields. The first column indicates the <code class="codeph">DBMS_AQ.MESSAGE_PROPERTIES_T</code> field for the Database AQ message property. The second and third columns indicate the name and datatype used for the TIB/Rendezvous field. The last column indicates if the message property is supported for inbound and outbound propagation.
                     </p>
                     <div class="tblformalwide" id="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586">
                        <p class="titleintable">Table 20-4 TIB/Rendezvous and MGW Names for Oracle Database Advanced Queuing Message Properties</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="TIB/Rendezvous and MGW Names for Oracle Database Advanced Queuing Message Properties" summary="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d114744e2531">Oracle Database Advanced Queuing Message Property</th>
                                 <th align="left" valign="bottom" width="32%" id="d114744e2534">MGW Name</th>
                                 <th align="left" valign="bottom" width="24%" id="d114744e2537">TIB/Rendezvous Wire Format Datatype</th>
                                 <th align="left" valign="bottom" width="23%" id="d114744e2540">Used For</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2545" headers="d114744e2531 ">
                                    <p><code class="codeph">priority</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2545 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_priority</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2545 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.I32</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2545 d114744e2540 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2564" headers="d114744e2531 ">
                                    <p><code class="codeph">expiration</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2564 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_expiration</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2564 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.I32</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2564 d114744e2540 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2583" headers="d114744e2531 ">
                                    <p><code class="codeph">delay</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2583 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_delay</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2583 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.I32</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2583 d114744e2540 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2602" headers="d114744e2531 ">
                                    <p><code class="codeph">correlation</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2602 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_correlation</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2602 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.STRING</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2602 d114744e2540 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2621" headers="d114744e2531 ">
                                    <p><code class="codeph">exception_queue</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2621 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_exception_queue</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2621 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.STRING</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2621 d114744e2540 ">
                                    <p>Outbound, Inbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2640" headers="d114744e2531 ">
                                    <p><code class="codeph">enqueue_time</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2640 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_enqueue_time</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2640 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.DATETIME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2640 d114744e2540 ">
                                    <p>Outbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2659" headers="d114744e2531 ">
                                    <p><code class="codeph">original_msgid</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2659 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_original_msgid</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2659 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.OPAQUE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2659 d114744e2540 ">
                                    <p>Outbound</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2678" headers="d114744e2531 ">
                                    <p><code class="codeph">msgid</code> (1)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2678 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_messageID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2678 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg.OPAQUE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2678 d114744e2540 ">
                                    <p>Outbound</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__GUID-647C037B-9C84-4222-ACE6-E8BA1E24EC26">Notes on <span><a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for.">Table 20-4</a></span>:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>The <code class="codeph">msgid</code> Database AQ property represents the Database AQ message identifier, rather than a particular field of the <code class="codeph">DBMS_AQ.MESSAGE_PROPERTIES_T</code> record.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3377"></a><div class="props_rev_3"><a id="GUID-C7B4D8F5-2C02-4A95-8067-8634BBF867CE" name="GUID-C7B4D8F5-2C02-4A95-8067-8634BBF867CE"></a><h4 id="ADQUE-GUID-C7B4D8F5-2C02-4A95-8067-8634BBF867CE" class="sect4"><span class="enumeration_section">20.3.2 </span>TIB/Rendezvous Outbound Propagation
                  </h4>
                  <div>
                     <p>If no propagation transformation is provided for outbound propagation, then the Oracle Database Advanced Queuing source queue payload type must be either <code class="codeph">SYS.MGW_TIBRV_MSG_T</code> or <code class="codeph">RAW</code>. If a propagation transformation is specified, then the target ADT of the transformation must be <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>, but the source ADT can be any ADT supported by Oracle Database Advanced Queuing. 
                     </p>
                     <p>If the Oracle Database Advanced Queuing queue payload or transformation target ADT is <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>, then: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Every field in the source message is converted to a TIB/Rendezvous message field of the resulting TIB/Rendezvous message.</p>
                        </li>
                        <li>
                           <p>If the <code class="codeph">reply_subject</code> attribute is not <code class="codeph">NULL</code>, then the reply subject supplementary information is set. 
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">send_subject</code> field is ignored.
                           </p>
                        </li>
                     </ul>
                     <p>If the Oracle Database Advanced Queuing queue payload is <code class="codeph">RAW</code>, then: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The resulting message contains a field named <code class="codeph">MGW_RAW_MSG</code> with value <code class="codeph">TibrvMsg.OPAQUE</code>. The field ID is set to 0.
                           </p>
                        </li>
                     </ul>
                     <p>If the job option <code class="codeph">AQ_MsgProperties</code> is specified with a value of <code class="codeph">TRUE</code>, then the MGW agent generates fields to preserve the Database AQ message properties in the TIB/Rendezvous message according to <a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for.">Table 20-4</a>.
                     </p>
                     <p>If the <code class="codeph">PreserveMessageID</code> job option is specified with a value of <code class="codeph">TRUE</code>, then the Database AQ message identifier (<code class="codeph">msgid</code>) is preserved in the TIB/Rendezvous message according to <a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for.">Table 20-4</a>.
                     </p>
                  </div>
               </div><a id="ADQUE3378"></a><div class="props_rev_3"><a id="GUID-06285C61-BB1C-4715-9224-B92132B665EC" name="GUID-06285C61-BB1C-4715-9224-B92132B665EC"></a><h4 id="ADQUE-GUID-06285C61-BB1C-4715-9224-B92132B665EC" class="sect4"><span class="enumeration_section">20.3.3 </span>TIB/Rendezvous Inbound Propagation
                  </h4>
                  <div>
                     <p>If no propagation transformation is provided for inbound propagation, then the Oracle Database Advanced Queuing destination queue payload type must be either <code class="codeph">RAW</code> or <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>. If a propagation transformation is specified, then the target ADT of the transformation can be any ADT supported by Oracle Database Advanced Queuing, but the source ADT of the transformation must be <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>.
                     </p>
                     <p>If the Oracle Database Advanced Queuing queue payload or transformation source ADT is <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>, then:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Every field in the source TIB/Rendezvous message is converted to a field of the resulting message of the<code class="codeph"> SYS.MGW_TIBRV_MSG_T</code> type. 
                           </p>
                        </li>
                        <li>
                           <p>The MGW agent extracts the send subject name from the source TIB/Rendezvous message and sets the <code class="codeph">send_subject</code> attribute in <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>. The send subject name is usually the same as the subject name of the registered propagation source queue, but it might be different when wildcards are used. 
                           </p>
                        </li>
                        <li>
                           <p>The MGW agent extracts the reply subject name from the source TIB/Rendezvous message, if it exists, and sets the <code class="codeph">reply_subject</code> attribute in <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>.
                           </p>
                        </li>
                        <li>
                           <p>If the source TIB/Rendezvous message contains more than three large text fields (greater than 4000 bytes of text) or more than three large bytes fields (greater than 2000 bytes), then message conversion fails.</p>
                        </li>
                     </ul>
                     <p>If the Oracle Database Advanced Queuing queue payload is <code class="codeph">RAW</code>, then:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Oracle Database Advanced Queuing message payload is the field data if the source TIB/Rendezvous message has a field named <code class="codeph">MGW_RAW_MSG</code> of type <code class="codeph">TibrvMsg.OPAQUE</code> or <code class="codeph">TibrvMsg.XML</code>. The field name and ID are ignored. If no such field exists or has an unexpected type, then a message conversion failure occurs.
                           </p>
                        </li>
                        <li>
                           <p>A message conversion failure occurs if the <code class="codeph">RAW</code> data size is greater than 32KB. This is due to a restriction on the data size allowed for a bind variable. Also, the actual limit is 32512 rather than 32767.
                           </p>
                        </li>
                     </ul>
                     <p>If the job option <code class="codeph">AQ_MsgProperties</code> is specified with a value of <code class="codeph">TRUE</code>, then the MGW agent searches for fields in the original TIB/Rendezvous messages with reserved field names. <a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for.">Table 20-4</a> shows the field name strings and the corresponding values used in the TIB/Rendezvous message.
                     </p>
                     <p>If such fields exist, then the MGW agent uses the field value to set the corresponding Oracle Database Advanced Queuing message properties, instead of using the default values. If there is more than one such field with the same name, then only the first one is used. Such fields are removed from the resulting payload only if the Oracle Database Advanced Queuing queue payload is <code class="codeph">RAW</code>. If a field with the reserved name does not have the expected datatype, then it causes a message conversion failure.
                     </p>
                     <div class="infoboxnotealso" id="GUID-06285C61-BB1C-4715-9224-B92132B665EC__GUID-00D98B61-C639-493C-AA50-ECC5363DBCCF">
                        <p class="notep1">See Also:</p>
                        <p>"DBMS_MGWMSG" in <a href="../arpls/DBMS_MGWMSG.html#ARPLS365" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for the value datatypes
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE3380"></a><a id="ADQUE3381"></a><a id="ADQUE3379"></a><div class="props_rev_3"><a id="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E" name="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E"></a><h3 id="ADQUE-GUID-1033A7B8-F827-452E-B491-A65DE6C5712E" class="sect3"><span class="enumeration_section">20.4 </span>JMS Messages
               </h3>
               <div>
                  <p>MGW propagates only JMS messages between Oracle JMS and non-Oracle JMS systems, without changing the message content. <a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__i1007470">Figure 20-5</a> shows JMS message propagation. 
                  </p>
                  <p>MGW supports only the standard JMS message types. It does not support:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>JMS provider extensions, because any such extensions would not be recognized by the destination JMS system. An attempt to propagate any such non-JMS message results in an error.</p>
                     </li>
                     <li>
                        <p>User transformations for JMS propagation.</p>
                     </li>
                     <li>
                        <p>Propagation of Logical Change Records (LCRs).</p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__i1007470">
                     <p class="titleinfigure">Figure 20-5 JMS Message Propagation</p><img width="592" src="img/adque450.gif" alt="Description of Figure 20-5 follows" title="Description of Figure 20-5 follows" longdesc="img_text/adque450.html"><br><a href="img_text/adque450.html">Description of "Figure 20-5 JMS Message Propagation"</a></div>
                  <!-- class="figure" -->
                  <p>For the purposes of this discussion, a JMS message is a Java object of a class that implements one of the five JMS message interfaces. <a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642" title="The first column lists JMS message types, and the second column lists corresponding ADT message types.">Table 20-5</a> shows the JMS message interfaces and the corresponding Oracle JMS ADTs. The table also shows the interface, <code class="codeph">javax.jms.Message</code>, which can be any one of the five specific types, and the corresponding generic Oracle JMS type <code class="codeph">SYS.AQ$_JMS_MESSAGE</code>. 
                  </p>
                  <div class="tblformal" id="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642">
                     <p class="titleintable">Table 20-5 Oracle JMS Message Conversion</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle JMS Message Conversion" summary="The first column lists JMS message types, and the second column lists corresponding ADT message types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="48%" id="d114744e3101">JMS Message</th>
                              <th align="left" valign="bottom" width="52%" id="d114744e3104">ADT</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3109" headers="d114744e3101 ">
                                 <p><code class="codeph">javax.jms.TextMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3109 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ$_JMS_TEXT_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3120" headers="d114744e3101 ">
                                 <p><code class="codeph">javax.jms.BytesMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3120 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ$_JMS_BYTES_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3131" headers="d114744e3101 ">
                                 <p><code class="codeph">javax.jms.MapMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3131 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ$_JMS_MAP_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3142" headers="d114744e3101 ">
                                 <p><code class="codeph">javax.jms.StreamMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3142 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ$_JMS_STREAM_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3153" headers="d114744e3101 ">
                                 <p><code class="codeph">javax.jms.ObjectMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3153 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ$_JMS_OBJECT_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3164" headers="d114744e3101 ">
                                 <p><code class="codeph">javax.jms.Message</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3164 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ$_JMS_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>When a propagation job is activated, the MGW agent checks the Oracle Database Advanced Queuing payload type for the propagation source or destination. If the type is one of those listed in <a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642" title="The first column lists JMS message types, and the second column lists corresponding ADT message types.">Table 20-5</a> or <code class="codeph">ANYDATA</code>, then message propagation is attempted. Otherwise an exception is logged and propagation is not attempted.
                  </p>
                  <p>The MGW agent may add a JMS <code class="codeph">String</code> property named <code class="codeph">OracleMGW_OriginalMessageID</code> to the JMS message sent to the destination queue in order to preserve the original message identifier of the source message. This property is added if the <code class="codeph">PreserveMessageID</code> job option is specified with a value of <code class="codeph">TRUE</code>. It will also be added for any message moved to an exception queue upon a message conversion failure.
                  </p>
               </div><a id="ADQUE3382"></a><div class="props_rev_3"><a id="GUID-892DAC10-1C41-49FC-92BF-8AA9C9ED1E89" name="GUID-892DAC10-1C41-49FC-92BF-8AA9C9ED1E89"></a><h4 id="ADQUE-GUID-892DAC10-1C41-49FC-92BF-8AA9C9ED1E89" class="sect4"><span class="enumeration_section">20.4.1 </span>JMS Outbound Propagation
                  </h4>
                  <div>
                     <p>When dequeuing a message from an Oracle Database Advanced Queuing queue, Oracle JMS converts instances of the ADTs shown in <a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642" title="The first column lists JMS message types, and the second column lists corresponding ADT message types.">Table 20-5</a> into JMS messages. In addition it can convert instances of <code class="codeph">ANYDATA</code> into JMS messages, depending on the content.
                     </p>
                     <p>A queue with payload type <code class="codeph">ANYDATA</code> can hold messages that do not map to a JMS message. MGW fails to dequeue such a message. An error is logged and propagation of messages from that queue does not continue until the message is removed.
                     </p>
                  </div>
               </div><a id="ADQUE3383"></a><div class="props_rev_3"><a id="GUID-71AB23EA-0551-4E20-9004-A8D1EDDBCAAD" name="GUID-71AB23EA-0551-4E20-9004-A8D1EDDBCAAD"></a><h4 id="ADQUE-GUID-71AB23EA-0551-4E20-9004-A8D1EDDBCAAD" class="sect4"><span class="enumeration_section">20.4.2 </span>JMS Inbound Propagation
                  </h4>
                  <div>
                     <p>Every message successfully dequeued using WebSphere MQ JMS is a JMS message. No message conversion is necessary prior to enqueuing using Oracle JMS. However, if the payload ADT of the propagation destination does not accept the type of the inbound message, then an exception is logged and an attempt is made to place the message in an exception queue. An example of such type mismatches is a JMS<code class="codeph"> TextMessage</code> and a queue payload type <code class="codeph">SYS.AQ$_JMS_BYTES_MESSAGE</code>.
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">
      <meta name="description" content="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">
      <title>XML Schema Storage and Query: Object-Relational Storage</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="XML-Schema-and-query-basic.html" title="Previous" type="text/html">
      <link rel="next" href="XPath-rewrite-for-object-relational-storage.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XML-Schema-and-query-basic.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="XPath-rewrite-for-object-relational-storage.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-Schema-and-object-relational-XMLType.html" property="item" typeof="WebPage"><span property="name">XML Schema and Object-Relational XMLType </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> XML Schema Storage and Query: Object-Relational Storage</li>
            </ol>
            <a id="GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" name="GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7"></a><a id="ADXDB0700"></a>
            
            <h2 id="ADXDB-GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" class="sect2"><span class="enumeration_chapter">18 </span> XML Schema Storage and Query: Object-Relational Storage
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='XML-Schema-and-query-object-relational-storage'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping  Schema data types to SQL; using <code class="codeph">complexType</code> extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing <code class="codeph">XMLType</code> data out of line, working with complex or large schemas, and debugging schema registration.
               </p>
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7__GUID-E7F26298-25E2-4630-AABB-A34E1ED9E534">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema is a standard for describing the content and structure of XML documents. You can register, update, and delete an XML schema used with Oracle XML&nbsp;DB. You can define storage structures to use for your XML schema-based data and map XML Schema data types to SQL data types.">XML Schema Storage and Query: Basic</a> for basic information about using XML Schema with Oracle XML&nbsp;DB
                           </p>
                        </li>
                        <li>
                           <p><a href="XPath-rewrite-for-object-relational-storage.html#GUID-35551023-CCAC-477B-8BBF-CD0E0B44C962" title="For XMLType data stored object-relationally, queries involving XPath expression arguments to various SQL functions can often be automatically rewritten to queries against the underlying SQL tables, which are highly optimized.">XPath Rewrite for Object-Relational Storage</a> for information about the optimization of XPath expressions in Oracle XML&nbsp;DB
                           </p>
                        </li>
                        <li>
                           <p><a href="XML-Schema-evolution.html#GUID-F2E920B3-C6D7-428B-9E75-5CE9C21F9B5F" title="You can use XML schema evolution to update your XML schema after you have registered it with Oracle XML&nbsp;DB.">XML Schema Evolution</a> for information about updating an XML schema after you have registered it with Oracle XML&nbsp;DB
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xschema0_primer" target="_blank">XML Schema Part 0: Primer Second Edition</a> for an introduction to XML Schema
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6">Object-Relational Storage of XML Documents</a><br>Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A">Oracle XML Schema Annotations</a><br>You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to <code class="codeph">complexType</code>, <code class="codeph">element</code>, and <code class="codeph">attribute</code> definitions that are declared by the XML schema. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a><br>You use PL/SQL package <code class="codeph">DBMS_XMLSCHEMA</code> to map data types for XML Schema attributes and elements to SQL data types.
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B">complexType Extensions and Restrictions in Oracle XML&nbsp;DB</a><br>In XML Schema, <code class="codeph">complexType</code> values are declared based on <code class="codeph">complexContent</code> and <code class="codeph">simpleContent</code>. Oracle XML&nbsp;DB defines various extensions and restrictions to <code class="codeph">complexType</code>.
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71">Creating XML Schema-Based XMLType Columns and Tables</a><br>After an XML schema has been registered with Oracle XML&nbsp;DB, you can reference it when you define <code class="codeph">XMLType</code> tables or columns. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8">Overview of Partitioning XMLType Tables and Columns Stored Object-Relationally</a><br>When you partition an object-relational <code class="codeph">XMLType</code> table or a table with an <code class="codeph">XMLType</code> column that is stored object-relationally and you use list, range, or hash partitioning, any ordered collection tables (OCTs) or out-of-line tables within the data are automatically partitioned accordingly, by default. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA">Specification of Relational Constraints on XMLType Tables and Columns</a><br>For <code class="codeph">XMLType</code> data stored object-relationally, you can specify typical relational constraints for elements and attributes that occur only once in an XML document. 
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-0EF2C8B6-927A-4F50-8126-47CD566A6B92">Out-Of-Line Storage of XMLType Data</a><br>By default, when <code class="codeph">XMLType</code> data is stored object-relationally a child element is mapped to an embedded SQL object attribute. Sometimes better performance can be obtained by storing some <code class="codeph">XMLType</code> data out of line. Use XML schema annotation <code class="codeph">xdb:SQLInline</code> to do this.
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE">Considerations for Working with Complex or Large XML Schemas</a><br>XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.
                  </li>
                  <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-D17B71BD-2AC2-4EC6-ADE3-8FE626FEC156">Debugging XML Schema Registration for XML Data Stored Object-Relationally</a><br>For XML data stored object-relationally, you can monitor the object types and tables created during XML schema registration by setting the event 31098 before invoking PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code>.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-Schema-and-object-relational-XMLType.html#GUID-817F95DE-D604-41DC-BCDE-76CDE30F9176" title="The use of XML Schema and object-relational storage of XMLType data is covered.">XML Schema and Object-Relational XMLType</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB6305"></a><div class="props_rev_3"><a id="GUID-79213AD7-C940-400B-BC11-5E401A1520A6" name="GUID-79213AD7-C940-400B-BC11-5E401A1520A6"></a><h3 id="ADXDB-GUID-79213AD7-C940-400B-BC11-5E401A1520A6" class="sect3"><span class="enumeration_section">18.1 </span>Object-Relational Storage of XML Documents
               </h3>
               <div>
                  <p>Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema. </p>
                  <p>A SQL type definition is generated from each <code class="codeph">complexType</code> defined by the XML schema. Each element or attribute defined by the <code class="codeph">complexType</code> becomes a SQL attribute in the corresponding SQL type. Oracle XML&nbsp;DB automatically maps the 47 scalar data types defined by the XML Schema Recommendation to the 19 scalar data types supported by SQL. A varray type is generated for each element and this can occur multiple times.
                  </p>
                  <p>The generated SQL types allow XML content that is compliant with the XML schema to be decomposed and stored in the database as a set of objects, without any loss of information. When an XML document is ingested, the constructs defined by the XML schema are mapped directly to the equivalent SQL types. This lets Oracle XML&nbsp;DB leverage the full power of Oracle Database when managing XML, and it can lead to significant reductions in the amount of space required to store the document. It can also reduce the amount of memory required to query and update XML content.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-7118A992-449B-4306-8579-8EF1C5890995">How Collections Are Stored for Object-Relational XMLType Storage</a><br>You can store an ordered collection as a varray in an ordered collection table (OCT), which can be either a heap-based table (recommended) or an index-organized table (IOT). You can store the actual data out of line by using varray entries that are <code class="codeph">REF</code>s to the data.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790">SQL Types Created during XML Schema Registration for Object-Relational Storage</a><br>Use <code class="codeph">TRUE</code> as the value of parameter <code class="codeph">GENTYPES</code> when you register an XML schema for use with XML data stored object-relationally (<code class="codeph">TRUE</code> is the default value). Oracle XML&nbsp;DB then creates the appropriate SQL object types that enable object-relational storage of conforming XML documents.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53">Default Tables Created during XML Schema Registration</a><br>You can create default tables as part of XML schema registration. Default tables are most useful when documents are inserted using APIs and protocols such as FTP and HTTP(S), which do not provide any table specification. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-75FCD51E-73B6-4CA6-BE6F-94553B73E9E0">Do Not Use Internal Constructs Generated during XML Schema Registration</a><br>In general, the SQL constructs (data types, nested tables, and tables associated with out-of-line storage) that are automatically generated during XML schema registration are <span class="italic">internal</span> to Oracle XML&nbsp;DB. Oracle recommends that you do <span class="italic">not</span> use them in your code.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-D3206DC0-7581-4AD3-8B46-9F38555D47CB">Generated Names are Case Sensitive</a><br>The names of any SQL tables, objects, and attributes generated by XML schema registration are <span class="italic">case sensitive</span>. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AF8651CF-49C5-4B13-A198-0AE1F0770439">SYS_XDBPD$ and DOM Fidelity for Object-Relational Storage</a><br>In order to provide DOM fidelity for XML data that is stored object-relationally, Oracle XML&nbsp;DB records all information that cannot be stored in any of the other object attributes as instance-level metadata using the system-defined binary object attribute <code class="codeph">SYS_XDBPD$</code> (positional descriptor, or PD).
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB6306"></a><div class="props_rev_3"><a id="GUID-7118A992-449B-4306-8579-8EF1C5890995" name="GUID-7118A992-449B-4306-8579-8EF1C5890995"></a><h4 id="ADXDB-GUID-7118A992-449B-4306-8579-8EF1C5890995" class="sect4"><span class="enumeration_section">18.1.1 </span>How Collections Are Stored for Object-Relational XMLType Storage
                  </h4>
                  <div>
                     <p>You can store an ordered collection as a varray in an ordered collection table (OCT), which can be either a heap-based table (recommended) or an index-organized table (IOT). You can store the actual data out of line by using varray entries that are <code class="codeph">REF</code>s to the data.
                     </p>
                     <p>When you register an XML schema for <code class="codeph">XMLType</code> data that is stored object-relationally and you set registration parameter <code class="codeph">GENTABLES</code> to <code class="codeph">TRUE</code>, default tables are created automatically to store the associated XML instance documents. 
                     </p>
                     <p>Order is preserved among XML collection elements when they are stored. The result is an <strong class="term">ordered collection</strong>. You can store data in an ordered collection in these ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><strong class="term">Varray in a table</strong>. Each element in the collection is mapped to a SQL object. The collection of SQL objects is stored as a set of rows in a table, called an <strong class="term">ordered collection table</strong> (<strong class="term">OCT</strong>). All collections are stored in OCTs. 
                           </p>
                        </li>
                     </ul>
                     <p>You can also use out-of-line storage for an ordered collection. This corresponds to XML schema annotation<code class="codeph"> SQLInline = "false"</code>, and it means that a varray of <code class="codeph">REF</code>s in the collection table (or the LOB) tracks the collection content, which is stored out of line.
                     </p>
                     <p>There is no requirement to annotate an XML schema before using it. Oracle XML&nbsp;DB uses a set of default assumptions when processing an XML schema that contains no annotations.</p>
                     <p>If you do not supply any of the annotations mentioned in this section, then Oracle XML&nbsp;DB stores a collection as a <span class="italic">heap-based</span> OCT. You can force OCTs to be stored as <strong class="term">index-organized tables</strong> (<strong class="term">IOTs</strong>) instead, by passing <span class="bold"><code class="codeph">REGISTER_NT_AS_IOT</code></span> in the <code class="codeph">OPTIONS</code> parameter of <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-7118A992-449B-4306-8579-8EF1C5890995__GUID-D6CFE58B-C5E3-4665-BFB2-26FD7F1746E7">
                        <p class="notep1">Note:</p>
                        <p>Use heap-based OCTs, <span class="italic">not</span> IOTs, unless you are explicitly advised by Oracle to use IOTs. IOT storage has these significant limitations:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>It disables partitioning of the collection tables (IOTs).</p>
                           </li>
                           <li>
                              <p>It supports only document-level Oracle Text indexes. It disables indexes that are element-specific or attribute-specific.</p>
                           </li>
                        </ul>
                     </div>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5" title="Set XML schema annotation xdb:SQLInline to false to store an XML fragment out of line. The element is mapped to a SQL object type with an embedded REF attribute, which points to another XMLType instance that is stored out of line and that corresponds to the XML fragment.">Setting Annotation Attribute xdb:SQLInline to false for Out-Of-Line Storage</a></li>
                           <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8" title="When you partition an object-relational XMLType table or a table with an XMLType column that is stored object-relationally and you use list, range, or hash partitioning, any ordered collection tables (OCTs) or out-of-line tables within the data are automatically partitioned accordingly, by default.">Overview of Partitioning XMLType Tables and Columns Stored Object-Relationally</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7118A992-449B-4306-8579-8EF1C5890995__GUID-12B95B23-26D0-4A24-B9D5-F012B912F7E5">
                        <p class="notep1">See Also:</p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a> for information about collection storage when you create <code class="codeph">XMLType</code> tables and columns manually using object-relational storage
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4465"></a><a id="ADXDB4464"></a><div class="props_rev_3"><a id="GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790" name="GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790"></a><h4 id="ADXDB-GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790" class="sect4"><span class="enumeration_section">18.1.2 </span>SQL Types Created during XML Schema Registration for Object-Relational Storage
                  </h4>
                  <div>
                     <p>Use <code class="codeph">TRUE</code> as the value of parameter <code class="codeph">GENTYPES</code> when you register an XML schema for use with XML data stored object-relationally (<code class="codeph">TRUE</code> is the default value). Oracle XML&nbsp;DB then creates the appropriate SQL object types that enable object-relational storage of conforming XML documents.
                     </p>
                     <p>By default, all SQL object types are created in the database schema of the user who registers the XML schema. If annotation <code class="codeph">xdb:defaultSchema</code> is used, then Oracle XML&nbsp;DB attempts to create the object type using the specified database schema. The current user must have the necessary privileges to create these object types. 
                     </p>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790__CHDFCAFB">Example 18-1</a> shows the SQL object types that are created automatically when XML schema <code class="codeph">purchaseOrder.xsd</code> is registered with Oracle XML&nbsp;DB.
                     </p>
                     <div class="infoboxnote" id="GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790__GUID-E6485FBE-49DB-44AA-A84A-7886DD1C03A2">
                        <p class="notep1">Note:</p>
                        <p>By default, the names of the SQL object types and attributes are system-generated. This is the case in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790__CHDFCAFB">Example 18-1</a>. If the XML schema does not contain attribute <code class="codeph">SQLName</code>, then the SQL name is derived from the XML name. You can use XML schema annotations to provide user-defined names (see <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a> for details).
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790__GUID-996A501A-0F38-4C63-BA50-AB4F9CB74B96">
                        <p class="notep1">Note:</p>
                        <p>Starting with Oracle Database 12c Release 2 (12.2.0.1), if you register an XML schema for object-relational storage for an <span class="italic">application common user</span> then you <span class="italic">must</span> annotate each complex type in the schema with <code class="codeph">xdb:SQLType</code>, to name the SQL data type. Otherwise, an error is raised.
                        </p>
                     </div>
                     <div class="example" id="GUID-9F4054FB-2277-4945-8A7C-FC0649AB2790__CHDFCAFB">
                        <p class="titleinexample">Example 18-1 SQL Object Types for Storing XMLType Tables</p><pre class="oac_no_warn" dir="ltr">DESCRIBE "PurchaseOrderType1668_T"
  
"PurchaseOrderType1668_T" is NOT FINAL
Name                 Null?  Type
-------------------- ------ -------------------------------
SYS_XDBPD$                  XDB.XDB$RAW_LIST_T
Reference                   VARCHAR2(30 CHAR)
Actions                     ActionsType1661_T
Reject                      RejectionType1660_T
Requestor                   VARCHAR2(128 CHAR)
User                        VARCHAR2(10 CHAR)
CostCenter                  VARCHAR2(4 CHAR)
ShippingInstructions        ShippingInstructionsTyp1659_T
SpecialInstructions         VARCHAR2(2048 CHAR)
LineItems                   LineItemsType1666_T
Notes                       VARCHAR2(4000 CHAR)
 
DESCRIBE "LineItemsType1666_T"
 
"LineItemsType1666_T" is NOT FINAL
Name                 Null? Type
-------------------- ----- -------------------------------
SYS_XDBPD$                 XDB.XDB$RAW_LIST_T
LineItem                   LineItem1667_COLL
 
DESCRIBE "LineItem1667_COLL"

"LineItem1667_COLL" VARRAY(2147483647) OF LineItemType1665_T
"LineItemType1665_T" is NOT FINAL
Name                Null? Type
------------------- ----- --------------------------------
SYS_XDBPD$                XDB.XDB$RAW_LIST_T
ItemNumber                NUMBER(38)
Description               VARCHAR2(256 CHAR)
Part                      PartType1664_T
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4467"></a><a id="ADXDB4466"></a><div class="props_rev_3"><a id="GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53" name="GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53"></a><h4 id="ADXDB-GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53" class="sect4"><span class="enumeration_section">18.1.3 </span>Default Tables Created during XML Schema Registration 
                  </h4>
                  <div>
                     <p>You can create default tables as part of XML schema registration. Default tables are most useful when documents are inserted using APIs and protocols such as FTP and HTTP(S), which do not provide any table specification. </p>
                     <p>In such cases, the XML instance is inserted into the default table.</p>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53__CEGGHHGE">Example 18-2</a> describes the default purchase-order table.
                     </p>
                     <p>If you provide a value for attribute <code class="codeph">xdb:defaultTable</code>, then the <code class="codeph">XMLType</code> table is created with that name. Otherwise it is created with an internally generated name.
                     </p>
                     <p>Any text specified using attributes <code class="codeph">xdb:tableProps</code> and <code class="codeph">xdb:columnProps</code> is appended to the generated <code class="codeph">CREATE TABLE</code> statement. 
                     </p>
                     <div class="example" id="GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53__CEGGHHGE">
                        <p class="titleinexample">Example 18-2 Default Table for Global Element PurchaseOrder</p><pre class="pre codeblock"><code>DESCRIBE "PurchaseOrder1669_TAB"

Name                        Null? Type
--------------------------- ----- -----------------------
TABLE of
  SYS.XMLTYPE(
    XMLSchema "http://xmlns.oracle.com/xdb/documentation/purchaseOrder.xsd"
    Element "PurchaseOrder")
  STORAGE OBJECT-RELATIONAL TYPE "PurchaseOrderType1668_T"
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6229"></a><div class="props_rev_3"><a id="GUID-75FCD51E-73B6-4CA6-BE6F-94553B73E9E0" name="GUID-75FCD51E-73B6-4CA6-BE6F-94553B73E9E0"></a><h4 id="ADXDB-GUID-75FCD51E-73B6-4CA6-BE6F-94553B73E9E0" class="sect4"><span class="enumeration_section">18.1.4 </span>Do Not Use Internal Constructs Generated during XML Schema Registration
                  </h4>
                  <div>
                     <p>In general, the SQL constructs (data types, nested tables, and tables associated with out-of-line storage) that are automatically generated during XML schema registration are <span class="italic">internal</span> to Oracle XML&nbsp;DB. Oracle recommends that you do <span class="italic">not</span> use them in your code.
                     </p>
                     <p>More precisely, generated SQL data types, nested tables, and tables associated with out-of-line storage are based on specific internal XML schema-to-object type mappings that are subject to change and redefinition by Oracle at any time. In general:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Do not use any generated SQL data types.</p>
                        </li>
                        <li>
                           <p>Do not access or modify any generated nested tables or out-of-line tables.</p>
                        </li>
                     </ul>
                     <p>You can, however, modify the storage options, such as partitioning, of generated tables, and you can create indexes and constraints on generated tables. You can also freely use any XML schema annotations provided by Oracle XML&nbsp;DB, including annotations that name generated constructs.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4468"></a><div class="props_rev_3"><a id="GUID-D3206DC0-7581-4AD3-8B46-9F38555D47CB" name="GUID-D3206DC0-7581-4AD3-8B46-9F38555D47CB"></a><h4 id="ADXDB-GUID-D3206DC0-7581-4AD3-8B46-9F38555D47CB" class="sect4"><span class="enumeration_section">18.1.5 </span>Generated Names are Case Sensitive
                  </h4>
                  <div>
                     <p>The names of any SQL tables, objects, and attributes generated by XML schema registration are <span class="italic">case sensitive</span>. 
                     </p>
                     <p>For instance, in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53__CEGGHHGE">Example 18-2</a>, the name of table <code class="codeph">PurchaseOrder1669_TAB</code> is derived from the name of element <code class="codeph">PurchaseOrder</code>, so it too is mixed case. You must therefore refer to this table using a quoted identifier: <span class="bold"><code class="codeph">"</code></span><code class="codeph">PurchaseOrder1669_TAB</code><span class="bold"><code class="codeph">"</code></span>. Failure to do so results in an object-not-found error, such as<code class="codeph"> ORA-00942: table or view does not exist</code>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4484"></a><div class="props_rev_3"><a id="GUID-AF8651CF-49C5-4B13-A198-0AE1F0770439" name="GUID-AF8651CF-49C5-4B13-A198-0AE1F0770439"></a><h4 id="ADXDB-GUID-AF8651CF-49C5-4B13-A198-0AE1F0770439" class="sect4"><span class="enumeration_section">18.1.6 </span>SYS_XDBPD$ and DOM Fidelity for Object-Relational Storage
                  </h4>
                  <div>
                     <p>In order to provide DOM fidelity for XML data that is stored object-relationally, Oracle XML&nbsp;DB records all information that cannot be stored in any of the other object attributes as instance-level metadata using the system-defined binary object attribute <code class="codeph">SYS_XDBPD$</code> (positional descriptor, or PD).
                     </p>
                     <p>With object-relational storage of XML data, the elements and attributes declared in an XML schema are mapped to separate attributes of the corresponding SQL object types. However, the following information in XML instance documents is not stored in these object attributes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Namespace declarations </p>
                        </li>
                        <li>
                           <p>Comments </p>
                        </li>
                        <li>
                           <p>Prefix information</p>
                        </li>
                     </ul>
                     <p>In order to provide DOM fidelity for XML data stored object-relationally, Oracle XML&nbsp;DB uses a separate mechanism to keep track of this information: it is recorded as instance-level metadata.</p>
                     <p>This metadata is tracked at the type level using the system-defined binary object attribute <code class="codeph">SYS_XDBPD$</code>. This object attribute is referred to as the <strong class="term">positional descriptor</strong>, or <strong class="term">PD</strong> for short. 
                     </p>
                     <p>The PD is intended for Oracle XML&nbsp;DB <span class="italic">internal use only</span>. You should never directly access or manipulate column PD.
                     </p>
                     <p>The positional descriptor stores all information that cannot be stored in any of the other object attributes. PD information is used to ensure the DOM fidelity of all XML documents stored in Oracle XML&nbsp;DB. Examples of PD information include: ordering information, comments, processing instructions, and namespace prefixes.</p>
                     <p>If DOM fidelity is not required, you can suppress the use of <code class="codeph">SYS_XDBPD$</code> by setting attribute <code class="codeph">xdb:maintainDOM</code> to <code class="codeph">false</code> in the XML schema, at the type level.
                     </p>
                     <div class="infoboxnote" id="GUID-AF8651CF-49C5-4B13-A198-0AE1F0770439__GUID-5A6B079D-FEC1-4FD0-865D-37994A8E4F49">
                        <p class="notep1">Note:</p>
                        <p>For clarity, object attribute <code class="codeph">SYS_XDBPD$</code> is omitted in many examples in this book. However, it is always present as a positional descriptor (PD) column in all SQL object types that are generated by the XML schema registration process. 
                        </p>
                        <p>In general, Oracle recommends that you do not suppress the PD attribute, because the extra information, such as comments and processing instructions, could be lost if there is no PD column.</p>
                     </div>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9F096CEA-7101-4CB9-AC16-2BC0EC370674" title="You can explicitly specify a SQLType value in an XML schema, as an annotation. The SQL data type that you specify is used for XML schema validation, overriding the default SQL data types.">You Can Override the SQLType Value in an XML Schema When Declaring Attributes</a></li>
                           <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-ED63CA4B-1200-4000-89A3-DA8B4E48E597" title="An element based on a complexType is, by default, mapped to a SQL object type that contains object attributes corresponding to each of its sub-elements and attributes. You can override this mapping by explicitly specifying a value for attribute SQLType in the input XML schema.">Override of the SQLType Value in an XML Schema When Declaring Elements</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AF8651CF-49C5-4B13-A198-0AE1F0770439__GUID-7B77A148-1DCB-4722-8C9F-057B004A5464">
                        <p class="notep1">See Also:</p>
                        <p><a href="XML-Schema-and-query-basic.html#GUID-F809A6FE-28CD-4776-AB11-0B34ECBD9FF6" title="DOM fidelity means that all information in an XML document is preserved except whitespace that is insignificant. You can use DOM fidelity to ensure the accuracy and integrity of XML documents stored in Oracle XML&nbsp;DB.">DOM Fidelity</a> for information about DOM fidelity and binary XML storage of XML data
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-79213AD7-C940-400B-BC11-5E401A1520A6" title="Object-relational storage of XML documents is based on decomposing the document content into a set of SQL objects. These SQL objects are based on the SQL 1999 Type framework. When an XML schema is registered with Oracle XML&nbsp;DB, the required SQL type definitions are automatically generated from the schema.">Object-Relational Storage of XML Documents</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4514"></a><div class="props_rev_3"><a id="GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" name="GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A"></a><h3 id="ADXDB-GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" class="sect3"><span class="enumeration_section">18.2 </span>Oracle XML Schema Annotations
               </h3>
               <div>
                  <p>You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to <code class="codeph">complexType</code>, <code class="codeph">element</code>, and <code class="codeph">attribute</code> definitions that are declared by the XML schema. 
                  </p>
                  <p>You can add such annotations manually by editing the XML schema document or, for the most common annotations, by invoking annotation-specific PL/SQL subprograms. See <a href="../arpls/DBMS_XMLSCHEMA_ANNOTATE.html#ARPLS73580" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, chapter "DBMS_XMLSCHEMA_ANNOTATE". 
                  </p>
                  <p>If you edit an XML schema manually using the Altova XMLSpy editor then you can take advantage of the <span class="italic">Oracle</span> tab in the editor for adding and editing Oracle-specific annotations. See <a href="XML-Schema-and-query-basic.html#GUID-0E11429E-1FF3-4C75-8B50-416A7F5C60C8__CEGIBHEB">Figure 17-2</a>.
                  </p>
                  <p>Most XML attributes used by Oracle XML&nbsp;DB belong to the namespace <code class="codeph">http://xmlns.oracle.com/xdb</code>. XML attributes used for encoding XML data as binary XML belong to the namespace <code class="codeph">http://xmlns.oracle.com/2004/CSX</code>. To simplify the process of annotating an XML schema, Oracle recommends that you declare namespace prefixes in the root element of the XML schema.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-087E2342-9239-4D23-BA4F-36C3F7BF49CF">Common Uses of XML Schema Annotations</a><br>You can annotate an XML schema to customize the names of object-relational tables, objects, and object attributes or to allow XPath rewrite when XQuery-expression arguments target recursive XML data.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D">XML Schema Annotation Example</a><br>A sample XML schema illustrates some of the most important Oracle XML&nbsp;DB annotations.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359">Annotating an XML Schema Using DBMS_XMLSCHEMA_ANNOTATE</a><br>PL/SQL package <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code> provides subprograms to annotate an XML schema. Using these subprograms can often be more convenient and less error prone than manually editing the XML schema. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-429A6872-5258-439F-B427-7AFFD054C00C">Available Oracle XML&nbsp;DB XML Schema Annotations</a><br>The Oracle XML&nbsp;DB annotations that you can specify in element and attribute declarations are described, along with the PL/SQL subprograms in package <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code> that you can use to manipulate them.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9">XML Schema Annotation Guidelines for Object-Relational Storage</a><br>For <code class="codeph">XMLType</code> data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3">Querying a Registered XML Schema to Obtain Annotations</a><br>You can query database views <code class="codeph">USER_XML_SCHEMAS</code> and <code class="codeph">ALL_XML_SCHEMAS</code> to obtain a registered XML schema with all of its annotations. The registered version of an XML schema contains a full set of Oracle XML&nbsp;DB annotations. These annotations were supplied by a user or set by default during XML schema registration. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4515"></a><div class="props_rev_3"><a id="GUID-087E2342-9239-4D23-BA4F-36C3F7BF49CF" name="GUID-087E2342-9239-4D23-BA4F-36C3F7BF49CF"></a><h4 id="ADXDB-GUID-087E2342-9239-4D23-BA4F-36C3F7BF49CF" class="sect4"><span class="enumeration_section">18.2.1 </span>Common Uses of XML Schema Annotations
                  </h4>
                  <div>
                     <p>You can annotate an XML schema to customize the names of object-relational tables, objects, and object attributes or to allow XPath rewrite when XQuery-expression arguments target recursive XML data.</p>
                     <p>Common reasons for wanting to annotate an XML schema include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To ensure that the names of the tables, objects, and object attributes created by PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code> for object-relational storage of <code class="codeph">XMLType</code> data are easy to recognize and compliant with any application-naming standards. Set parameter <code class="codeph">GENTYPES</code> or <code class="codeph">GENTABLES</code> to <code class="codeph">TRUE</code> for this (<code class="codeph">TRUE</code> is the default value for each of these parameters).
                           </p>
                        </li>
                        <li>
                           <p>To prevent the generation of mixed-case names that require the use of quoted identifiers when working directly with SQL.</p>
                        </li>
                        <li>
                           <p>To allow XPath rewrite for object-relational storage in the case of document-correlated recursive XPath queries. This applies to certain applications of SQL/XML access and query functions whose XQuery-expression argument targets recursive XML data.</p>
                        </li>
                     </ul>
                     <p>The most commonly used XML schema annotations are the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">xdb:defaultTable</code> &#x2013; Name of the default table generated for each global element when parameter <code class="codeph">GENTABLES</code> is <code class="codeph">TRUE</code>. Setting this to the empty string, <span class="bold"><code class="codeph">""</code></span>, prevents a default table from being generated for the element in question.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">xdb:SQLName</code> &#x2013; Name of the SQL object attribute that corresponds to each element or attribute defined in the XML schema.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">xdb:SQLType</code> &#x2013; For <code class="codeph">complexType</code> definitions, the corresponding object type. For <code class="codeph">simpleType</code> definitions, <code class="codeph">SQLType</code> is used to override the default mapping between XML schema data types and SQL data types. A common use of <code class="codeph">SQLType</code> is to define when unbounded strings should be stored as <code class="codeph">CLOB</code> values, rather than as <code class="codeph">VARCHAR(4000) CHAR</code> values (the default). Note: You cannot use data type <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, or <code class="codeph">NCLOB</code> as the value of a <code class="codeph">SQLType</code> annotation.
                           </p>
                           <div class="infoboxnote" id="GUID-087E2342-9239-4D23-BA4F-36C3F7BF49CF__STARTINGWITHORACLEDATABASE12CRELEAS-2195990D">
                              <p class="notep1">Note:</p>
                              <p>Starting with Oracle Database 12c Release 2 (12.2.0.1), if you register an XML schema for object-relational storage for an <span class="italic">application common user</span> then you <span class="italic">must</span> annotate each complex type in the schema with <code class="codeph">xdb:SQLType</code>, to name the SQL data type. Otherwise, an error is raised.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">xdb:SQLCollType</code> &#x2013; Used to specify the varray type that manages a collection of elements.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">xdb:maintainDOM</code> &#x2013; Used to determine whether or not DOM fidelity should be maintained for a given <code class="codeph">complexType</code> definition
                           </p>
                        </li>
                     </ul>
                     <p>You need not specify values for any of these attributes. Oracle XML&nbsp;DB provides appropriate values by default during the XML schema registration process. However, if you are using object-relational storage, then Oracle recommends that you specify the names of at least the top-level SQL types, so that you can reference them later.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4517"></a><a id="ADXDB4518"></a><a id="ADXDB4516"></a><div class="props_rev_3"><a id="GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D" name="GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D"></a><h4 id="ADXDB-GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D" class="sect4"><span class="enumeration_section">18.2.2 </span>XML Schema Annotation Example
                  </h4>
                  <div>
                     <p>A sample XML schema illustrates some of the most important Oracle XML&nbsp;DB annotations.</p>
                     <p>The XML schema in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D__BJFBCHGH">Example 18-3</a> is similar to the one in <a href="oracle-supplied-XML-schemas-and-examples.html#GUID-1CB2213C-C6E8-4BC4-86A3-EFDE51AEBEFD__BABDAGBF">Example A-2</a>, but it also defines a <code class="codeph">Notes</code> element and its type, <code class="codeph">NotesType</code>.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">schema</code> element includes the declaration of the <code class="codeph">xdb</code> namespace.
                           </p>
                        </li>
                        <li>
                           <p>The definition of global element <code class="codeph">PurchaseOrder</code> includes a <code class="codeph">defaultTable</code> annotation that specifies that the name of the default table associated with this element is <code class="codeph">purchaseorder</code>.
                           </p>
                        </li>
                        <li>
                           <p>The definition of global complex type <code class="codeph">PurchaseOrderType</code> includes a <code class="codeph">SQLType</code> annotation that specifies that the generated SQL object type is named <code class="codeph">purchaseorder_t</code>. Within the definition of this type, the following annotations are used:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The definition of element <code class="codeph">Reference</code> includes a <code class="codeph">SQLName</code> annotation that specifies that the SQL attribute corresponding to XML element <code class="codeph">Reference</code> is named <code class="codeph">reference</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The definition of element <code class="codeph">Actions</code> includes a <code class="codeph">SQLName</code> annotation that specifies that the SQL attribute corresponding to XML element <code class="codeph">Actions</code> is named <code class="codeph">action_collection</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The definition of element <code class="codeph">USER</code> includes a <code class="codeph">SQLName</code> annotation that specifies that the SQL attribute corresponding to XML element <code class="codeph">User</code> is named <code class="codeph">email</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The definition of element <code class="codeph">LineItems</code> includes a <code class="codeph">SQLName</code> annotation that specifies that the SQL attribute corresponding to XML element <code class="codeph">LineItems</code> is named <code class="codeph">lineitem_collection</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The definition of element <code class="codeph">Notes</code> includes a <code class="codeph">SQLType</code> annotation that specifies that the data type of the SQL attribute corresponding to XML element <code class="codeph">Notes</code> is <code class="codeph">CLOB</code>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>The definition of global complex type <code class="codeph">LineItemsType</code> includes a <code class="codeph">SQLType</code> annotation that specifies that the generated SQL object type is named <code class="codeph">lineitems_t</code>. Within the definition of this type, the following annotation is used:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The definition of element <code class="codeph">LineItem</code> includes a <code class="codeph">SQLName</code> annotation that specifies that the data type of the SQL attribute corresponding to XML element <code class="codeph">LineItems</code> is named <code class="codeph">lineitem_varray</code>, and a <code class="codeph">SQLCollName</code> annotation that specifies that the SQL object type that manages the collection is named <code class="codeph">lineitem_v</code>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>The definition of global complex type <code class="codeph">LineItemType</code> includes a <code class="codeph">SQLType</code> annotation that specifies that generated SQL object type is named <code class="codeph">lineitem_t</code>.
                           </p>
                        </li>
                        <li>
                           <p>The definition of complex type <code class="codeph">PartType</code> includes a <code class="codeph">SQLType</code> annotation that specifies that the SQL object type is named <code class="codeph">part_t</code>. It also includes the annotation <code class="codeph">xdb:maintainDOM = "false"</code>, specifying that there is no need for Oracle XML&nbsp;DB to maintain DOM fidelity for elements based on this data type.
                           </p>
                        </li>
                     </ul>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D__BJFGEIHH">Example 18-4</a> shows some of the tables and objects that are created when the annotated XML schema of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D__BJFBCHGH">Example 18-3</a> is registered.
                     </p>
                     <p>The following are results of this XML schema registration:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A table called <code class="codeph">purchaseorder</code> was created.
                           </p>
                        </li>
                        <li>
                           <p>Types called <code class="codeph">purchaseorder_t</code>, <code class="codeph">lineitems_t</code>, <code class="codeph">lineitem_v</code>, <code class="codeph">lineitem_t</code>, and <code class="codeph">part_t</code> were created. The attributes defined by these types are named according to supplied the <code class="codeph">SQLName</code> annotations.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">Notes</code> attribute defined by <code class="codeph">purchaseorder_t</code> is of data type <code class="codeph">CLOB</code>.
                           </p>
                        </li>
                        <li>
                           <p>Type <code class="codeph">part_t</code> does not include a positional descriptor (PD) attribute.
                           </p>
                        </li>
                        <li>
                           <p>Ordered collection tables (OCTs) were created to manage the collections of <code class="codeph">LineItem</code> and <code class="codeph">Action</code> elements.
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D__BJFBCHGH">
                        <p class="titleinexample">Example 18-3 Using Common Schema Annotations</p><pre class="pre codeblock"><code>&lt;xs:schema
  targetNamespace="http://xmlns.oracle.com/xdb/documentation/purchaseOrder"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xdb="http://xmlns.oracle.com/xdb"
  xmlns:po="http://xmlns.oracle.com/xdb/documentation/purchaseOrder"
  version="1.0"&gt;
  &lt;xs:element name="PurchaseOrder" type="po:PurchaseOrderType"
              <span class="bold">xdb:defaultTable</span>="PURCHASEORDER"/&gt;
  &lt;xs:complexType name="PurchaseOrderType" <span class="bold">xdb:SQLType</span>="PURCHASEORDER_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Reference" type="po:ReferenceType" minOccurs="1"
                  <span class="bold">xdb:SQLName</span>="REFERENCE"/&gt;
      &lt;xs:element name="Actions" type="po:ActionsType"
                  <span class="bold">xdb:SQLName</span>="ACTION_COLLECTION"/&gt;
      &lt;xs:element name="Reject" type="po:RejectionType" minOccurs="0"/&gt;
      &lt;xs:element name="Requestor" type="po:RequestorType"/&gt;
      &lt;xs:element name="User" type="po:UserType" minOccurs="1"
                  <span class="bold">xdb:SQLName</span>="EMAIL"/&gt;
      &lt;xs:element name="CostCenter" type="po:CostCenterType"/&gt;
      &lt;xs:element name="ShippingInstructions"
                  type="po:ShippingInstructionsType"/&gt;
      &lt;xs:element name="SpecialInstructions" type="po:SpecialInstructionsType"/&gt;
      &lt;xs:element name="LineItems" type="po:LineItemsType"
                  <span class="bold">xdb:SQLName</span>="LINEITEM_COLLECTION"/&gt;
      <span class="bold">&lt;xs:element name="Notes" type="po:NotesType" xdb:SQLType="CLOB"/&gt;</span>
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemsType" <span class="bold">xdb:SQLType</span>="LINEITEMS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="LineItem" type="po:LineItemType" maxOccurs="unbounded"
                  <span class="bold">xdb:SQLCollType</span>="LINEITEM_V" <span class="bold">xdb:SQLName</span>="LINEITEM_VARRAY"/&gt;
   &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemType" <span class="bold">xdb:SQLType</span>="LINEITEM_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Description" type="po:DescriptionType"/&gt;
      &lt;xs:element name="Part" type="po:PartType"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="ItemNumber" type="xs:integer"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="PartType" <span class="bold">xdb:SQLType</span>="PART_T" <span class="bold">xdb:maintainDOM</span>="false"&gt;
    &lt;xs:attribute name="Id"&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base="xs:string"&gt;
          &lt;xs:minLength value="10"/&gt;
          &lt;xs:maxLength value="14"/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name="Quantity" type="po:moneyType"/&gt;
    &lt;xs:attribute name="UnitPrice" type="po:quantityType"/&gt;
  &lt;/xs:complexType&gt;
  <span class="bold">&lt;xs:simpleType name="NotesType"&gt;</span>
    <span class="bold">&lt;xs:restriction base="xs:string"&gt;</span>
      <span class="bold">&lt;xs:minLength value="1"/&gt;</span>
      <span class="bold">&lt;xs:maxLength value="32767"/&gt;</span>
    <span class="bold">&lt;/xs:restriction&gt;</span>
  <span class="bold">&lt;/xs:simpleType&gt;</span>
&lt;/xs:schema&gt;
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D__BJFGEIHH">
                        <p class="titleinexample">Example 18-4 Registering an Annotated XML Schema</p><pre class="pre codeblock"><code>BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://xmlns.oracle.com/xdb/documentation/purchaseOrder.xsd',
    SCHEMADOC =&gt; bfilename('XMLDIR', 'purchaseOrder.Annotated.xsd'),
    LOCAL     =&gt; TRUE,
    GENTYPES  =&gt; TRUE,
    GENTABLES =&gt; TRUE,
    CSID      =&gt; nls_charset_id('AL32UTF8'));
END;
/
 
SELECT table_name, xmlschema, element_name FROM USER_XML_TABLES;
 
TABLE_NAME     XMLSCHEMA                             ELEMENT_NAME
-------------  -----------------------------------   -------------
PURCHASEORDER  http://xmlns.oracle.com/xdb/documen   PurchaseOrder
               tation/purchaseOrder.xsd              
 
1 row selected.
 
DESCRIBE <span class="bold">purchaseorder</span>

Name                            Null? Type
------------------------------  ----- -----------------
TABLE of SYS.XMLTYPE(XMLSchema
 "http://xmlns.oracle.com/xdb/documentation/purchaseOrder.xsd"
 ELEMENT "PurchaseOrder") STORAGE Object-relational TYPE "PURCHASEORDER_T"
 
DESCRIBE <span class="bold">purchaseorder_t</span>

PURCHASEORDER_T is NOT FINAL
Name                 Null? Type
-------------------- ----- --------------------------
SYS_XDBPD$                 XDB.XDB$RAW_LIST_T
REFERENCE                  VARCHAR2(30 CHAR)
ACTION_COLLECTION          ACTIONS_T
REJECT                     REJECTION_T
REQUESTOR                  VARCHAR2(128 CHAR)
EMAIL                      VARCHAR2(10 CHAR)
COSTCENTER                 VARCHAR2(4 CHAR)
SHIPPINGINSTRUCTIONS       SHIPPING_INSTRUCTIONS_T
SPECIALINSTRUCTIONS        VARCHAR2(2048 CHAR)
LINEITEM_COLLECTION        LINEITEMS_T
Notes                      CLOB

DESCRIBE <span class="bold">lineitems_t</span>
LINEITEMS_T is NOT FINAL
Name                 Null? Type
-------------------- ----- --------------------------
SYS_XDBPD$                 XDB.XDB$RAW_LIST_T
LINEITEM_VARRAY            LINEITEM_V

DESCRIBE <span class="bold">lineitem_v</span>

LINEITEM_V VARRAY(2147483647) OF LINEITEM_T
LINEITEM_T is NOT FINAL
Name                 Null? Type
-------------------- ----- --------------------------
SYS_XDBPD$                 XDB.XDB$RAW_LIST_T
ITEMNUMBER                 NUMBER(38)
DESCRIPTION                VARCHAR2(256 CHAR)
PART                       PART_T

DESCRIBE <span class="bold">part_t</span>
 
PART_T is NOT FINAL
Name                 Null? Type
-------------------- ----- --------------------------
ID                         VARCHAR2(14 CHAR)
QUANTITY                   NUMBER(12,2)
UNITPRICE                  NUMBER(8,4)

SELECT table_name, parent_table_column FROM USER_NESTED_TABLES
  WHERE parent_table_name = 'purchaseorder';

TABLE_NAME                       PARENT_TABLE_COLUMN
----------                       -----------------------   
SYS_NTNOHV+tfSTRaDTA9FETvBJw==   "XMLDATA"."LINEITEM_COLLECTION"."LINEITEM_VARRAY"
SYS_NTV4bNVqQ1S4WdCIvBK5qjZA==   "XMLDATA"."ACTION_COLLECTION"."ACTION_VARRAY"
 
2 rows selected.
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6119"></a><a id="ADXDB6115"></a><div class="props_rev_3"><a id="GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359" name="GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359"></a><h4 id="ADXDB-GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359" class="sect4"><span class="enumeration_section">18.2.3 </span>Annotating an XML Schema Using DBMS_XMLSCHEMA_ANNOTATE
                  </h4>
                  <div>
                     <p>PL/SQL package <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code> provides subprograms to annotate an XML schema. Using these subprograms can often be more convenient and less error prone than manually editing the XML schema. 
                     </p>
                     <p>In particular, you can use the PL/SQL subprograms in a script, which you can run at any time or multiple times, as needed. This can be especially useful if you are using a large XML schema or a standard or other third-party XML schema that you do not want to modify manually.</p>
                     <p>There are specific PL/SQL subprograms for each Oracle annotation. For example, you use PL/SQL procedure <code class="codeph">setDefaultTable</code> to add a <code class="codeph">xdb:defaultTable</code> annotation, and <code class="codeph">removeDefaultTable</code> to remove a <code class="codeph">xdb:defaultTable</code> annotation.
                     </p>
                     <p>Each annotation subprogram has the following as its parameters:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The XML schema to be annotated. This parameter is <code class="codeph">IN OUT</code>.
                           </p>
                        </li>
                        <li>
                           <p>The name of the global element where the annotation is to be added or removed.</p>
                        </li>
                        <li>
                           <p>The annotation (XML attribute) value.</p>
                        </li>
                        <li>
                           <p>A Boolean flag indicating whether any corresponding existing annotation is to be overwritten. By default, it is overwritten.</p>
                        </li>
                     </ul>
                     <p>If the element to be annotated is not a global element then you provide the local element name as an additional parameter. The global and local names together identify the target element. The element with the local name must be a descendent of the element with the global name.</p>
                     <p>If you use SQL*Plus, you can use PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE.printWarnings</code> to enable and disable printing of SQL*Plus warnings during the use of other <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code> subprograms. By default, no warnings are printed. An example of a warning is an inability to annotate the XML schema because there is no element with the name you provided to the annotation subprogram.
                     </p>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359__CEGCJBBA">Example 18-5</a> uses subprograms in PL/SQL package <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code> to produce the annotated XML schema shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0B63577E-7129-4F6B-8DE3-E6688F87AD4D__BJFBCHGH">Example 18-3</a>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359__GUID-6CE4644F-3B50-4A8C-9DB3-AF0FD3CC5897">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_XMLSCHEMA_ANNOTATE.html#ARPLS73580" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, chapter "DBMS_XMLSCHEMA_ANNOTATE"
                        </p>
                     </div>
                     <div class="example" id="GUID-A5E5BCE6-D72E-47C1-B637-6A0CAF9D6359__CEGCJBBA">
                        <p class="titleinexample">Example 18-5 Using DBMS_XMLSCHEMA_ANNOTATE</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE annotation_tab (id NUMBER, inp XMLType, out XMLType);
INSERT INTO annotation_tab VALUES (1, ... unannotated XML schema...);

DECLARE
  schema XMLType;
BEGIN
  SELECT t.inp INTO schema FROM annotation_tab t WHERE t.id = 1;

  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setDefaultTable</span>(schema, 'PurchaseOrder', '<span class="bold">PURCHASEORDER</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLType</span>(schema, 'PurchaseOrderType', '<span class="bold">PURCHASEORDER_T</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLName</span>(schema, 'complexType', 'PurchaseOrderType', 'element', '<span class="bold">Reference</span>',
                                     '<span class="bold">REFERENCE</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLName</span>(schema, 'complexType', 'PurchaseOrderType', 'element', '<span class="bold">Actions</span>',
                                     '<span class="bold">ACTIONS_COLLECTION</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLName</span>(schema, 'complexType', 'PurchaseOrderType', 'element', '<span class="bold">User</span>', '<span class="bold">EMAIL</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLName</span>(schema, 'complexType', 'PurchaseOrderType', 'element', '<span class="bold">LineItems</span>',
                                     '<span class="bold">LINEITEM_COLLECTION</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLType</span>(schema, 'complexType', 'PurchaseOrderType', 'element', 'Notes', '<span class="bold">CLOB</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLType</span>(schema, 'LineItemsType', '<span class="bold">LINEITEMS_T</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLCollType</span>(schema, 'complexType', 'LineItemsType', 'LineItem', '<span class="bold">LINEITEM_V</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLName</span>(schema, 'complexType', 'LineItemsType', 'element', '<span class="bold">LineItem</span>',
                                     '<span class="bold">LINEITEM_VARRAY</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLType</span>(schema, 'LineItemType', '<span class="bold">LINEITEM_T</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">setSQLType</span>(schema, 'PartType', '<span class="bold">PART_T</span>');
  DBMS_XMLSCHEMA_ANNOTATE.<span class="bold">disableMaintainDom</span>(schema, '<span class="bold">PartType</span>');

UPDATE annotation_tab t SET t.out = schema WHERE t.id = 1;
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4520"></a><a id="ADXDB4521"></a><a id="ADXDB4522"></a><a id="ADXDB4519"></a><div class="props_rev_3"><a id="GUID-429A6872-5258-439F-B427-7AFFD054C00C" name="GUID-429A6872-5258-439F-B427-7AFFD054C00C"></a><h4 id="ADXDB-GUID-429A6872-5258-439F-B427-7AFFD054C00C" class="sect4"><span class="enumeration_section">18.2.4 </span>Available Oracle XML&nbsp;DB XML Schema Annotations
                  </h4>
                  <div>
                     <p>The Oracle XML&nbsp;DB annotations that you can specify in element and attribute declarations are described, along with the PL/SQL subprograms in package <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code> that you can use to manipulate them.
                     </p>
                     <div class="section">
                        <p>All annotations except those that have the prefix <code class="codeph">csx</code> are applicable to XML schemas registered for object-relational storage.
                        </p>
                        <p>The following annotations apply to XML schemas that are registered for binary XML storage:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">xdb:defaultTable</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xdb:tableProps</code></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-429A6872-5258-439F-B427-7AFFD054C00C__GUID-38C69C39-2E1E-484D-AB63-81A290B27362">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_XMLSCHEMA_ANNOTATE.html#ARPLS73580" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, chapter "DBMS_XMLSCHEMA_ANNOTATE"
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-429A6872-5258-439F-B427-7AFFD054C00C__G1048403">
                        <p class="titleintable">Table 18-1 Annotations in Elements </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Annotations in Elements " summary="This table lists attributes you can specify in elements, with Oracle XML DB." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d86720e1985">Attribute and PL/SQL</th>
                                 <th align="left" valign="bottom" width="11%" id="d86720e1988">Values</th>
                                 <th align="left" valign="bottom" width="13%" id="d86720e1991">Default</th>
                                 <th align="left" valign="bottom" width="46%" id="d86720e1994">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e1999" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:columnProps</pre><p>No applicable PL/SQL.</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d86720e1999 d86720e1988 ">
                                    <p>Any column storage clause</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e1999 d86720e1991 ">
                                    <p><code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e1999 d86720e1994 ">
                                    <p>Specifies the <code class="codeph">COLUMN</code> storage clause that is inserted into the default <code class="codeph">CREATE TABLE</code> statement. It is useful mainly for elements that get mapped to SQL tables, namely top-level element declarations and out-of-line element declarations.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2021" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:defaultTable</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setDefaultTable
removeDefaultTable
enableDefaultTableCreation
disableDefaultTableCreation</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2021 d86720e1988 ">
                                    <p>Any table name</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2021 d86720e1991 ">
                                    <p>Based on element name</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2021 d86720e1994 ">
                                    <p>Specifies the name of the SQL table into which XML instances of this XML schema are stored. This is most useful in cases where the XML data is inserted from APIs and protocols, such as FTP and HTTP(S), where the table name is not specified. Applicable to object-relational storage and binary XML storage.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2038" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:maintainDOM</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">enableMaintainDOM
disableMaintainDOM</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2038 d86720e1988 ">
                                    <p><code class="codeph">true</code> | <code class="codeph">false</code></p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2038 d86720e1991 ">
                                    <p><code class="codeph">true</code></p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2038 d86720e1994 ">
                                    <p>If <code class="codeph">true</code>, then instances of this element are stored so that they retain DOM fidelity on output. This implies that all comments, processing instructions, namespace declarations, and so on are retained, in addition to the ordering of elements. 
                                    </p>
                                    <p>If <code class="codeph">false</code>, then the output is not guaranteed to have the same DOM action as the input. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2068" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:SQLCollType</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setSQLCollType
removeSQLCollType</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2068 d86720e1988 ">
                                    <p>Any SQL collection type </p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2068 d86720e1991 ">
                                    <p>Name generated from element name</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2068 d86720e1994 ">
                                    <p>Name of the SQL collection type that corresponds to this XML element. The XML element must be specified with <code class="codeph">maxOccurs</code> &gt; 1.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2088" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:SQLInline</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setOutOfLine
removeOutOfLine</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2088 d86720e1988 ">
                                    <p><code class="codeph">true</code> | <code class="codeph">false</code></p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2088 d86720e1991 ">
                                    <p><code class="codeph">true</code></p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2088 d86720e1994 ">
                                    <p>If <code class="codeph">true</code>, then this element is stored inline as an embedded object attribute (or as a collection, if <code class="codeph">maxOccurs</code> &gt; 1). 
                                    </p>
                                    <p>If <code class="codeph">false</code>, then a <code class="codeph">REF</code> value is stored (or a collection of <code class="codeph">REF</code> values, if <code class="codeph">maxOccurs</code> &gt; 1). This attribute is forced to <code class="codeph">false</code> in certain situations, such as cyclic references, where SQL does not support inlining.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2133" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:SQLName</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setSQLName
removeSQLName</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2133 d86720e1988 ">
                                    <p>Any SQL identifier</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2133 d86720e1991 ">
                                    <p>Element name</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2133 d86720e1994 ">
                                    <p>Name of the attribute within the SQL object that maps to this XML element.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2150" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:SQLType</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setSQLType
removeSQLType</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2150 d86720e1988 ">
                                    <p>Any SQL data type<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "See Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types.")"><sup>Foot&nbsp;1</sup></a>, <span class="italic">except</span> <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">NCLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2150 d86720e1991 ">
                                    <p>Name generated from element name</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2150 d86720e1994 ">
                                    <p>Name of the SQL type corresponding to this XML element declaration.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d86720e2191" headers="d86720e1985 "><pre class="oac_no_warn" dir="ltr">xdb:tableProps</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setTableProps
removeTableProps</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d86720e2191 d86720e1988 ">
                                    <p>Any table storage clause</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d86720e2191 d86720e1991 ">
                                    <p><code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d86720e2191 d86720e1994 ">
                                    <p>Specifies the <code class="codeph">TABLE</code> storage clause that is appended to the default <code class="codeph">CREATE TABLE</code> statement. This is meaningful mainly for global and out-of-line elements. Applicable to object-relational storage and binary XML storage.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>See <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a>.
                        </p>
                     <p></p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-429A6872-5258-439F-B427-7AFFD054C00C__GUID-E3BEBCC7-972D-4501-B75A-308E5A9A39D8">
                           <p class="notep1">See Also:</p>
                           <p><a href="XML-Schema-and-query-basic.html#GUID-F8159034-643E-4B26-BA57-4D60AF6D65D3" title="After you register an XML schema you can create an object-relational XMLType table or column for documents that conform to that schema. You can optionally specify object-relational storage options for the table or column.">Object-Relational Storage of XML Schema-Based Data</a> for information about specifying storage options when manually creating <code class="codeph">XMLType</code> tables for object-relational storage
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-429A6872-5258-439F-B427-7AFFD054C00C__CHDCHIHD">
                        <p class="titleintable">Table 18-2 Annotations in Elements Declaring Global complexType Elements</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Annotations in Elements Declaring Global complexType Elements" summary="This table lists attributes that you can specify in elements declaring global complextypes." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d86720e2241">Attribute</th>
                                 <th align="left" valign="bottom" width="20%" id="d86720e2244">Values</th>
                                 <th align="left" valign="bottom" width="21%" id="d86720e2247">Default</th>
                                 <th align="left" valign="bottom" width="37%" id="d86720e2250">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d86720e2255" headers="d86720e2241 "><pre class="oac_no_warn" dir="ltr">xdb:maintainDOM</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">enableMaintainDom
disableMaintainDom</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d86720e2255 d86720e2244 ">
                                    <p><code class="codeph">true</code> | <code class="codeph">false</code></p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d86720e2255 d86720e2247 ">
                                    <p><code class="codeph">true</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d86720e2255 d86720e2250 ">
                                    <p>If <code class="codeph">true</code>, then instances of this element are stored so that they retain DOM fidelity on output. This implies that all comments, processing instructions, namespace declarations, and so on are retained, in addition to the ordering of elements. 
                                    </p>
                                    <p>If <code class="codeph">false</code>, then the output is not guaranteed to have the same DOM action as the input. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d86720e2285" headers="d86720e2241 "><pre class="oac_no_warn" dir="ltr">xdb:SQLType</pre><p>PL/SQL:</p><pre class="oac_no_warn" dir="ltr">setSQLType
removeSQLType</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d86720e2285 d86720e2244 ">
                                    <p>Any SQL data type<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "See Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types.")"><sup>Foot&nbsp;2</sup></a> <span class="italic">except</span> <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">NCLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d86720e2285 d86720e2247 ">
                                    <p>Name generated from element name</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d86720e2285 d86720e2250 ">
                                    <p>Name of the SQL type that corresponds to this XML element declaration.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p>See <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a>.
                        </p>
                     <p></p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5837"></a><div class="props_rev_3"><a id="GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" name="GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9"></a><h4 id="ADXDB-GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" class="sect4"><span class="enumeration_section">18.2.5 </span>XML Schema Annotation Guidelines for Object-Relational Storage
                  </h4>
                  <div>
                     <p>For <code class="codeph">XMLType</code> data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations. 
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-72B2EF6A-A8A4-44E4-89BD-1AE5A0FACDE2">Avoid Creation of Unnecessary Tables for Unused Top-Level Elements</a><br>Whenever a top-level element in an XML schema is <span class="italic">never</span> used at the top level in any corresponding XML instance, you can avoid the creation of associated tables by adding annotation <code class="codeph">xdb:defaultTable = </code><span class="bold"><code class="codeph">""</code></span> to the element in the XML schema. An empty value for this attribute prevents default-table creation.
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AA67137B-0987-44FC-8AAB-FA0C0DD36302">Provide Your Own Names for Default Tables</a><br>For tuning purposes, you examine execution plan output for your queries. This refers to the tables that underlie <code class="codeph">XMLType</code> data stored object-relationally. By default, these tables have system-generated names. Oracle recommends that you provide your own table names instead, especially for tables that you are sure to be interested in. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9895677F-D247-4BCF-965F-51BEBFECE916">Turn Off DOM Fidelity If Not Needed</a><br>By default, XML schema registration generates tables that maintain DOM fidelity. It is often the case that for data-centric XML data DOM fidelity is not needed. You can improve the performance of storage, queries, and data modification by instead using object-relational tables that do not maintain DOM fidelity. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-A6368882-0B0F-4913-91A7-358FA3E27794">Annotate Time-Related Elements with a Timestamp Data Type</a><br>If your application needs to work with time-zone indicators, then annotate any XML schema elements of type <code class="codeph">xs:time</code> and <code class="codeph">xs:dateTime</code> with <code class="codeph">xdb:SQLType = "</code><span class="bold"><code class="codeph">TIMESTAMP WITH TIME ZONE</code></span><code class="codeph">"</code>. This ensures that values containing time-zone indicators can be stored, retrieved, and compared.
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-3CC2FD41-D68C-443F-93F6-C8DFB5752D9C">Add Table and Column Properties</a><br>If a table or column underlying object-relational <code class="codeph">XMLType</code> data needs additional properties specified, such as partition, tablespace, or compression, use annotation <code class="codeph">xdb:tableProps</code> or <code class="codeph">xdb:columnProps</code>. You can do this to add primary keys or constraints, for example. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-2BEC7690-3EB6-4995-9D47-19C061C4277E">Store Large Collections Out of Line</a><br>If you have large collections then you might need to use annotations <code class="codeph">xdb:defaultTable</code> and <code class="codeph">xdb:SQLInline</code> to specify that collection elements be stored out of line.
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="XPath-rewrite-for-object-relational-storage.html#GUID-35551023-CCAC-477B-8BBF-CD0E0B44C962" title="For XMLType data stored object-relationally, queries involving XPath expression arguments to various SQL functions can often be automatically rewritten to queries against the underlying SQL tables, which are highly optimized.">XPath Rewrite for Object-Relational Storage</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9__GUID-502B5EAE-1707-4AB7-9832-23CB6820D16C">
                        <p class="notep1">See Also:</p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-429A6872-5258-439F-B427-7AFFD054C00C__G1048403" title="This table lists attributes you can specify in elements, with Oracle XML DB.">Table 18-1</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5838"></a><div class="props_rev_3"><a id="GUID-72B2EF6A-A8A4-44E4-89BD-1AE5A0FACDE2" name="GUID-72B2EF6A-A8A4-44E4-89BD-1AE5A0FACDE2"></a><h5 id="ADXDB-GUID-72B2EF6A-A8A4-44E4-89BD-1AE5A0FACDE2" class="sect5"><span class="enumeration_section">18.2.5.1 </span>Avoid Creation of Unnecessary Tables for Unused Top-Level Elements
                     </h5>
                     <div>
                        <p>Whenever a top-level element in an XML schema is <span class="italic">never</span> used at the top level in any corresponding XML instance, you can avoid the creation of associated tables by adding annotation <code class="codeph">xdb:defaultTable = </code><span class="bold"><code class="codeph">""</code></span> to the element in the XML schema. An empty value for this attribute prevents default-table creation.
                        </p>
                        <p>By default, XML schema registration creates a top-level table for each top-level element defined in the schema. Some such elements might be used at top level in XML instances that conform to the schema. For example, elements in an XML schema might be top-level in order to be used as a <code class="codeph">REF</code> target.
                        </p>
                        <p>You can use PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE.disableDefaultTableCreation</code> to add an empty <code class="codeph">xdb:defaultTable</code> attribute to each top-level element that has no <code class="codeph">xdb:defaultTable</code> attribute.
                        </p>
                        <div class="infoboxnote" id="GUID-72B2EF6A-A8A4-44E4-89BD-1AE5A0FACDE2__GUID-57EDED1B-9EA6-4010-9FF3-068006A0DD82">
                           <p class="notep1">Note:</p>
                           <p>Any top-level XML schema element that is used as the root element of any instance documents must have a non-empty <code class="codeph">xdb:defaultTable</code> attribute.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-72B2EF6A-A8A4-44E4-89BD-1AE5A0FACDE2__GUID-F43B14BD-0FA8-4CBA-9522-77041C3ACCCC">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_XMLSCHEMA_ANNOTATE.html#ARPLS73580" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, chapter "DBMS_XMLSCHEMA_ANNOTATE" for information about PL/SQL procedure <code class="codeph">disableDefaultTableCreation</code>.
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" title="For XMLType data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations.">XML Schema Annotation Guidelines for Object-Relational Storage</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5839"></a><div class="props_rev_3"><a id="GUID-AA67137B-0987-44FC-8AAB-FA0C0DD36302" name="GUID-AA67137B-0987-44FC-8AAB-FA0C0DD36302"></a><h5 id="ADXDB-GUID-AA67137B-0987-44FC-8AAB-FA0C0DD36302" class="sect5"><span class="enumeration_section">18.2.5.2 </span>Provide Your Own Names for Default Tables
                     </h5>
                     <div>
                        <p>For tuning purposes, you examine execution plan output for your queries. This refers to the tables that underlie <code class="codeph">XMLType</code> data stored object-relationally. By default, these tables have system-generated names. Oracle recommends that you provide your own table names instead, especially for tables that you are sure to be interested in. 
                        </p>
                        <p>You do that using annotation <code class="codeph">xdb:defaultTable</code>.
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53" title="You can create default tables as part of XML schema registration. Default tables are most useful when documents are inserted using APIs and protocols such as FTP and HTTP(S), which do not provide any table specification.">Default Tables Created during XML Schema Registration</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" title="For XMLType data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations.">XML Schema Annotation Guidelines for Object-Relational Storage</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5840"></a><div class="props_rev_3"><a id="GUID-9895677F-D247-4BCF-965F-51BEBFECE916" name="GUID-9895677F-D247-4BCF-965F-51BEBFECE916"></a><h5 id="ADXDB-GUID-9895677F-D247-4BCF-965F-51BEBFECE916" class="sect5"><span class="enumeration_section">18.2.5.3 </span>Turn Off DOM Fidelity If Not Needed
                     </h5>
                     <div>
                        <p>By default, XML schema registration generates tables that maintain DOM fidelity. It is often the case that for data-centric XML data DOM fidelity is not needed. You can improve the performance of storage, queries, and data modification by instead using object-relational tables that do not maintain DOM fidelity. </p>
                        <p>You use the annotation<code class="codeph"> xdb:maintainDOM = "</code><span class="bold"><code class="codeph">false</code></span><code class="codeph">"</code> to do that.
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-basic.html#GUID-F809A6FE-28CD-4776-AB11-0B34ECBD9FF6" title="DOM fidelity means that all information in an XML document is preserved except whitespace that is insignificant. You can use DOM fidelity to ensure the accuracy and integrity of XML documents stored in Oracle XML&nbsp;DB.">DOM Fidelity</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" title="For XMLType data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations.">XML Schema Annotation Guidelines for Object-Relational Storage</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5842"></a><div class="props_rev_3"><a id="GUID-A6368882-0B0F-4913-91A7-358FA3E27794" name="GUID-A6368882-0B0F-4913-91A7-358FA3E27794"></a><h5 id="ADXDB-GUID-A6368882-0B0F-4913-91A7-358FA3E27794" class="sect5"><span class="enumeration_section">18.2.5.4 </span>Annotate Time-Related Elements with a Timestamp Data Type
                     </h5>
                     <div>
                        <p>If your application needs to work with time-zone indicators, then annotate any XML schema elements of type <code class="codeph">xs:time</code> and <code class="codeph">xs:dateTime</code> with <code class="codeph">xdb:SQLType = "</code><span class="bold"><code class="codeph">TIMESTAMP WITH TIME ZONE</code></span><code class="codeph">"</code>. This ensures that values containing time-zone indicators can be stored, retrieved, and compared.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" title="For XMLType data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations.">XML Schema Annotation Guidelines for Object-Relational Storage</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5843"></a><div class="props_rev_3"><a id="GUID-3CC2FD41-D68C-443F-93F6-C8DFB5752D9C" name="GUID-3CC2FD41-D68C-443F-93F6-C8DFB5752D9C"></a><h5 id="ADXDB-GUID-3CC2FD41-D68C-443F-93F6-C8DFB5752D9C" class="sect5"><span class="enumeration_section">18.2.5.5 </span>Add Table and Column Properties
                     </h5>
                     <div>
                        <p>If a table or column underlying object-relational <code class="codeph">XMLType</code> data needs additional properties specified, such as partition, tablespace, or compression, use annotation <code class="codeph">xdb:tableProps</code> or <code class="codeph">xdb:columnProps</code>. You can do this to add primary keys or constraints, for example. 
                        </p>
                        <p>For example, to achieve table compression for online transaction processing (OLTP), you would add <code class="codeph">COMPRESS FOR OLTP</code> using a <code class="codeph">tableProps</code> attribute.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3CC2FD41-D68C-443F-93F6-C8DFB5752D9C__GUID-4418A4E2-B58E-4621-A58B-F0EA5EE2CF30">
                           <p class="notep1">See Also:</p>
                           <p><a href="XML-Schema-and-query-basic.html#GUID-F8159034-643E-4B26-BA57-4D60AF6D65D3__BJFGGABH">Example 17-9</a> for an example of specifying Advanced Row Compression when creating <code class="codeph">XMLType</code> tables and columns manually
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" title="For XMLType data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations.">XML Schema Annotation Guidelines for Object-Relational Storage</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5844"></a><div class="props_rev_3"><a id="GUID-2BEC7690-3EB6-4995-9D47-19C061C4277E" name="GUID-2BEC7690-3EB6-4995-9D47-19C061C4277E"></a><h5 id="ADXDB-GUID-2BEC7690-3EB6-4995-9D47-19C061C4277E" class="sect5"><span class="enumeration_section">18.2.5.6 </span>Store Large Collections Out of Line
                     </h5>
                     <div>
                        <p>If you have large collections then you might need to use annotations <code class="codeph">xdb:defaultTable</code> and <code class="codeph">xdb:SQLInline</code> to specify that collection elements be stored out of line.
                        </p>
                        <p>The maximum number of elements and attributes defined by a <code class="codeph">complexType</code> is 1000. It is not possible to create a single table that can manage the SQL objects that are generated when an instance of that type is stored. If you have large collections, then you might run up against this limit of 1000 columns for a table.
                        </p>
                        <p>You can use annotations <code class="codeph">xdb:defaultTable</code> and <code class="codeph">xdb:SQLInline</code> to specify that such collection elements be stored out of line. That means that their data is stored in a separate table — only a reference to a row in that table is stored in the main collection table. Use <code class="codeph">xdb:defaultTable</code> to name the out-of -line table. Annotate each element of a potentially large collection with <code class="codeph">xdb:SQLInline = "</code><span class="bold"><code class="codeph">false</code></span><code class="codeph">",</code> to store it out of line.
                        </p>
                        <div class="infoboxnote" id="GUID-2BEC7690-3EB6-4995-9D47-19C061C4277E__GUID-960CF353-2CA1-4F32-8BC3-E5B793B0F3C7">
                           <p class="notep1">Note:</p>
                           <p>For each inheritance hierarchy or substitution group in an XML schema, a table is created whose columns cover the content models of that hierarchy or substitution group. This too can cause the 1000-column limit to be reached. </p>
                        </div>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-5F470098-54C0-4FC6-8E7B-732487497F90" title="Errors ORA-01792 and ORA-04031 can be raised when you work with large or complex XML schemas. You can encounter them when you register an XML schema or you create a table that is based on a global element defined by an XML schema.">ORA-01792 and ORA-04031: Issues with Large XML Schemas</a></li>
                              <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5" title="Set XML schema annotation xdb:SQLInline to false to store an XML fragment out of line. The element is mapped to a SQL object type with an embedded REF attribute, which points to another XMLType instance that is stored out of line and that corresponds to the XML fragment.">Setting Annotation Attribute xdb:SQLInline to false for Out-Of-Line Storage</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B1B67DF3-8E3A-4383-B67F-D14EF98BFBE9" title="For XMLType data stored object-relationally, careful planning is called for, to optimize performance. Similar considerations are in order as for relational data: entity-relationship models, indexing, data types, table partitions, and so on. To enable XPath rewrite and achieve optimal performance, you implement many such design choices using XML schema annotations.">XML Schema Annotation Guidelines for Object-Relational Storage</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB6116"></a><a id="ADXDB4524"></a><a id="ADXDB4523"></a><div class="props_rev_3"><a id="GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3" name="GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3"></a><h4 id="ADXDB-GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3" class="sect4"><span class="enumeration_section">18.2.6 </span>Querying a Registered XML Schema to Obtain Annotations
                  </h4>
                  <div>
                     <p>You can query database views <code class="codeph">USER_XML_SCHEMAS</code> and <code class="codeph">ALL_XML_SCHEMAS</code> to obtain a registered XML schema with all of its annotations. The registered version of an XML schema contains a full set of Oracle XML&nbsp;DB annotations. These annotations were supplied by a user or set by default during XML schema registration. 
                     </p>
                     <div class="section">
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3__CEGEGFAG">Example 18-6</a> illustrates this. It returns the XML schema as an <code class="codeph">XMLType</code> instance.
                        </p>
                        <p>As shown in <a href="XML-Schema-and-query-basic.html#GUID-26C1BFCD-5CC5-4608-A93E-24E5529B1077__BJFIJHJA">Example 17-3</a> and <a href="XML-Schema-and-query-basic.html#GUID-CA2A548B-11B3-4D83-9A21-53EC8CE6DDC9__BJFBGBEJ">Example 17-4</a>, the location of the registered XML schema depends on whether it is local or global. If you want to project specific annotation information to relational columns, you can query <code class="codeph">RESOURCE_VIEW</code>. <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3__CHDCDCCD">Example 18-7</a> illustrates this. It obtains the set of global <code class="codeph">complexType</code> definitions declared by an XML schema for object-relational storage of <code class="codeph">XMLType</code> data, and the corresponding SQL object types and DOM fidelity values.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3__CEGEGFAG">
                        <p class="titleinexample">Example 18-6 Querying View USER_XML_SCHEMAS for a Registered XML Schema</p><pre class="pre codeblock"><code>SELECT SCHEMA FROM USER_XML_SCHEMAS
  WHERE SCHEMA_URL = 'http://xmlns.oracle.com/xdb/documentation/purchaseOrder.xsd';
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3__CHDCDCCD">
                        <p class="titleinexample">Example 18-7 Querying Metadata from a Registered XML Schema</p><pre class="pre codeblock"><code>SELECT ct.xmlschema_type_name, ct.sql_type_name, ct.dom_fidelity
  FROM RESOURCE_VIEW,
       XMLTable(
         XMLNAMESPACES (
           'http://xmlns.oracle.com/xdb/XDBResource.xsd' AS "r",
           'http://xmlns.oracle.com/xdb/documentation/purchaseOrder' AS "po",
           'http://www.w3.org/2001/XMLSchema' AS "xs",
           'http://xmlns.oracle.com/xdb' AS "xdb"),
         '<span class="bold">/r:Resource/r:Contents/xs:schema/xs:complexType</span>' PASSING RES
         COLUMNS
           xmlschema_type_name VARCHAR2(30) PATH '<span class="bold">@name</span>',
           sql_type_name       VARCHAR2(30) PATH '<span class="bold">@xdb:SQLType</span>',
           dom_fidelity        VARCHAR2(6)  PATH '<span class="bold">@xdb:maintainDOM</span>') ct
  WHERE
    equals_path(
      RES,
      '/sys/schemas/SCOTT/xmlns.oracle.com/xdb/documentation/purchaseOrder.xsd')
    =1;

XMLSCHEMA_TYPE_NAME        SQL_TYPE_NAME            DOM_FIDELITY
-------------------------  -----------------------  ------------
PurchaseOrderType          PURCHASEORDER_T          true
LineItemsType              LINEITEMS_T              true
LineItemType               LINEITEM_T               true
PartType                   PART_T                   true
ActionsType                ACTIONS_T                true
RejectionType              REJECTION_T              true
ShippingInstructionsType   SHIPPING_INSTRUCTIONS_T  true

7 rows selected.</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AAA8C662-CEBE-4F38-8C41-AE25CF502790">You Can Apply Annotations from One XML Schema to Another</a><br>Sometimes you need to apply the annotations from one XML schema to another XML schema. A typical use case is applying the annotations from an older version of a schema to a new version. You can get and set annotations using PL/SQL subprograms <code class="codeph">getSchemaAnnotations</code> and <code class="codeph">setSchemaAnnotations</code>, respectively.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F7E43D3A-67D8-432E-833A-DE0EA4CFCE7A" title="You can annotate XML schemas to influence the objects and tables that are generated by the XML schema registration process. You do this by adding Oracle-specific attributes to complexType, element, and attribute definitions that are declared by the XML schema.">Oracle XML Schema Annotations</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB6117"></a><div class="props_rev_3"><a id="GUID-AAA8C662-CEBE-4F38-8C41-AE25CF502790" name="GUID-AAA8C662-CEBE-4F38-8C41-AE25CF502790"></a><h5 id="ADXDB-GUID-AAA8C662-CEBE-4F38-8C41-AE25CF502790" class="sect5"><span class="enumeration_section">18.2.6.1 </span>You Can Apply Annotations from One XML Schema to Another
                     </h5>
                     <div>
                        <p>Sometimes you need to apply the annotations from one XML schema to another XML schema. A typical use case is applying the annotations from an older version of a schema to a new version. You can get and set annotations using PL/SQL subprograms <code class="codeph">getSchemaAnnotations</code> and <code class="codeph">setSchemaAnnotations</code>, respectively.
                        </p>
                        <p>PL/SQL function <code class="codeph">getSchemaAnnotations</code> returns all of the annotations from an XML schema. PL/SQL procedure <code class="codeph">setSchemaAnnotations</code> sets annotations. These subprograms are in PL/SQL package <code class="codeph">DBMS_XMLSCHEMA_ANNOTATE</code>.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-AAA8C662-CEBE-4F38-8C41-AE25CF502790__GUID-6D263E04-2EBD-4E55-B6EC-5270D4E76D4C">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_XMLSCHEMA_ANNOTATE.html#ARPLS73580" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, chapter "DBMS_XMLSCHEMA_ANNOTATE" for information about PL/SQL subprograms <code class="codeph">getSchemaAnnotations</code> and <code class="codeph">setSchemaAnnotations</code>.
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0A560425-E6F2-4AA2-9818-B80EFE2D0AD3" title="You can query database views USER_XML_SCHEMAS and ALL_XML_SCHEMAS to obtain a registered XML schema with all of its annotations. The registered version of an XML schema contains a full set of Oracle XML&nbsp;DB annotations. These annotations were supplied by a user or set by default during XML schema registration.">Querying a Registered XML Schema to Obtain Annotations</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB4527"></a><div class="props_rev_3"><a id="GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" name="GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5"></a><h3 id="ADXDB-GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" class="sect3"><span class="enumeration_section">18.3 </span>Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types
               </h3>
               <div>
                  <p>You use PL/SQL package <code class="codeph">DBMS_XMLSCHEMA</code> to map data types for XML Schema attributes and elements to SQL data types.
                  </p>
                  <div class="infoboxnote" id="GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5__GUID-BF435932-5BE3-41C9-BA20-916CBDA6E4C8">
                     <p class="notep1">Note:</p>
                     <p>Do <span class="italic">not</span> directly access the SQL data types that are mapped from XML Schema data types during XML schema registration. These SQL types are part of the implementation of Oracle XML&nbsp;DB. They are not exposed for your use. Oracle reserves the right to change the implementation at any time, including in a product patch. Such a change by Oracle will have no effect on applications that abide by the XML abstraction, but it might impact applications that directly access these data types.
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-21E2C662-DB44-4DE3-8AA7-05D87465801A">Example of Mapping XML Schema Data Types to SQL</a><br>An example illustrates mapping XML Schema data types to SQL data types.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-73BF2445-E3AE-44AD-9DCE-669EFDD8299C">XML Schema Attribute Data Types Mapped to SQL</a><br>An XML attribute declaration can specify its XML Schema data type in terms of a primitive type, a local <code class="codeph">simpleType</code>, a global <code class="codeph">simpleType</code>, or a reference to a global attribute (<code class="codeph">ref=".."</code>). The SQL data type and its associated information are derived from the base XML Schema type. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-F800FE48-194A-4A60-B2D3-8382A3775D2C">XML Schema Element Data Types Mapped to SQL</a><br>An XML element declaration can specify its XML Schema data type using a primitive type, a local or global <code class="codeph">simpleType</code>, a local or global <code class="codeph">complexType</code>, or a reference to a global element (<code class="codeph">ref=".."</code>). The SQL data type and its associated information are derived from the base XML Schema type. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C">How XML Schema simpleType Is Mapped to SQL</a><br>XML <code class="codeph">simpleType</code> is mapped to SQL object types in various ways, depending on how the <code class="codeph">simpleType</code> is defined.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEE8E9EE-0397-4EE9-8496-DB20B1A82CC1">How XML Schema complexType Is Mapped to SQL</a><br>XML <code class="codeph">complexType</code> is mapped to SQL object types in various ways, depending on how the <code class="codeph">complexType</code> is defined.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4529"></a><a id="ADXDB4528"></a><div class="props_rev_3"><a id="GUID-21E2C662-DB44-4DE3-8AA7-05D87465801A" name="GUID-21E2C662-DB44-4DE3-8AA7-05D87465801A"></a><h4 id="ADXDB-GUID-21E2C662-DB44-4DE3-8AA7-05D87465801A" class="sect4"><span class="enumeration_section">18.3.1 </span>Example of Mapping XML Schema Data Types to SQL
                  </h4>
                  <div>
                     <p>An example illustrates mapping XML Schema data types to SQL data types.</p>
                     <div class="section">
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-21E2C662-DB44-4DE3-8AA7-05D87465801A__CIHIDFEB">Example 18-8</a> uses attribute <code class="codeph">SQLType</code> to specify the data-type mapping. It also uses attribute <code class="codeph">SQLName</code> to specify the object attributes to use for various XML elements and attributes.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-21E2C662-DB44-4DE3-8AA7-05D87465801A__CIHIDFEB">
                        <p class="titleinexample">Example 18-8 Mapping XML Schema Data Types to SQL Data Types Using Attribute SQLType</p><pre class="pre codeblock"><code>&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:xdb="http://xmlns.oracle.com/xdb"
           version="1.0"&gt;
  &lt;xs:element name="PurchaseOrder" type="PurchaseOrderType" xdb:defaultTable="PURCHASEORDER"/&gt;
  &lt;xs:complexType name="PurchaseOrderType" xdb:SQLType="PURCHASEORDER_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Reference" type="ReferenceType" minOccurs="1" xdb:SQLName="REFERENCE"/&gt;
      &lt;xs:element name="Actions" type="ActionsType" xdb:SQLName="ACTIONS"/&gt;
      &lt;xs:element name="Reject" type="RejectionType" minOccurs="0" xdb:SQLName="REJECTION"/&gt;
      &lt;xs:element name="Requestor" type="RequestorType" xdb:SQLName="REQUESTOR"/&gt;
      &lt;xs:element name="User" type="UserType" minOccurs="1" xdb:SQLName="USERID"/&gt;
      &lt;xs:element name="CostCenter" type="CostCenterType" xdb:SQLName="COST_CENTER"/&gt;
      &lt;xs:element name="ShippingInstructions" type="ShippingInstructionsType" 
                  xdb:SQLName="SHIPPING_INSTRUCTIONS"/&gt;
      &lt;xs:element name="SpecialInstructions" type="SpecialInstructionsType" 
                  xdb:SQLName="SPECIAL_INSTRUCTIONS"/&gt;
      &lt;xs:element name="LineItems" type="LineItemsType" xdb:SQLName="LINEITEMS"/&gt;
      &lt;xs:element name="Notes" type="po:NotesType" xdb:SQLType="CLOB"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemsType" xdb:SQLType="LINEITEMS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="LineItem" type="LineItemType" maxOccurs="unbounded" 
                  xdb:SQLName="LINEITEM" xdb:SQLCollType="LINEITEM_V"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemType" xdb:SQLType="LINEITEM_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Description" type="DescriptionType" 
                  xdb:SQLName="DESCRIPTION"/&gt;
      &lt;xs:element name="Part" type="PartType" xdb:SQLName="PART"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="ItemNumber" type="xs:integer" xdb:SQLName="ITEMNUMBER" 
                  xdb:SQLType="NUMBER"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="PartType" xdb:SQLType="PART_T"&gt;
    &lt;xs:attribute name="Id" xdb:SQLName="PART_NUMBER" xdb:SQLType="VARCHAR2"&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base="xs:string"&gt;
          &lt;xs:minLength value="10"/&gt;
          &lt;xs:maxLength value="14"/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name="Quantity" type="moneyType" xdb:SQLName="QUANTITY"/&gt;
    &lt;xs:attribute name="UnitPrice" type="quantityType" xdb:SQLName="UNITPRICE"/&gt;
  &lt;/xs:complexType&gt;

  <span class="bold">...</span>

  &lt;xs:complexType name="ActionsType" xdb:SQLType="ACTIONS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Action" maxOccurs="4" xdb:SQLName="ACTION" xdb:SQLCollType="ACTION_V"&gt;
        &lt;xs:complexType xdb:SQLType="ACTION_T"&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name="User" type="UserType" xdb:SQLName="ACTIONED_BY"/&gt;
            &lt;xs:element name="Date" type="DateType" minOccurs="0" xdb:SQLName="DATE_ACTIONED"/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="RejectionType" xdb:SQLType="REJECTION_T"&gt;
    &lt;xs:all&gt;
      &lt;xs:element name="User" type="UserType" minOccurs="0" xdb:SQLName="REJECTED_BY"/&gt;
      &lt;xs:element name="Date" type="DateType" minOccurs="0" xdb:SQLName="DATE_REJECTED"/&gt;
      &lt;xs:element name="Comments" type="CommentsType" minOccurs="0" xdb:SQLName="REASON_REJECTED"/&gt;
    &lt;/xs:all&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="ShippingInstructionsType" xdb:SQLType="SHIPPING_INSTRUCTIONS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="name" type="NameType" minOccurs="0" xdb:SQLName="SHIP_TO_NAME"/&gt;
      &lt;xs:element name="address" type="AddressType" minOccurs="0" xdb:SQLName="SHIP_TO_ADDRESS"/&gt;
      &lt;xs:element name="telephone" type="TelephoneType" minOccurs="0" xdb:SQLName="SHIP_TO_PHONE"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  <span class="bold">...</span>
&lt;/xs:schema&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4530"></a><div class="props_rev_3"><a id="GUID-73BF2445-E3AE-44AD-9DCE-669EFDD8299C" name="GUID-73BF2445-E3AE-44AD-9DCE-669EFDD8299C"></a><h4 id="ADXDB-GUID-73BF2445-E3AE-44AD-9DCE-669EFDD8299C" class="sect4"><span class="enumeration_section">18.3.2 </span>XML Schema Attribute Data Types Mapped to SQL
                  </h4>
                  <div>
                     <p>An XML attribute declaration can specify its XML Schema data type in terms of a primitive type, a local <code class="codeph">simpleType</code>, a global <code class="codeph">simpleType</code>, or a reference to a global attribute (<code class="codeph">ref=".."</code>). The SQL data type and its associated information are derived from the base XML Schema type. 
                     </p>
                     <p>An attribute declaration can specify its XML Schema data type in terms of any of the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Primitive type</p>
                        </li>
                        <li>
                           <p>Global <code class="codeph">simpleType</code>, declared within this XML schema or in an external XML schema
                           </p>
                        </li>
                        <li>
                           <p>Reference to global attribute (<code class="codeph">ref=".."</code>), declared within this XML schema or in an external XML schema
                           </p>
                        </li>
                        <li>
                           <p>Local <code class="codeph">simpleType</code></p>
                        </li>
                     </ul>
                     <p>In all cases, the SQL data type, any associated information (length, precision), and the memory mapping information are derived from the <code class="codeph">simpleType</code> on which the attribute is based. 
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9F096CEA-7101-4CB9-AC16-2BC0EC370674">You Can Override the SQLType Value in an XML Schema When Declaring Attributes</a><br>You can explicitly specify a <code class="codeph">SQLType</code> value in an XML schema, as an annotation. The SQL data type that you specify is used for XML schema validation, overriding the default SQL data types. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4531"></a><div class="props_rev_3"><a id="GUID-9F096CEA-7101-4CB9-AC16-2BC0EC370674" name="GUID-9F096CEA-7101-4CB9-AC16-2BC0EC370674"></a><h5 id="ADXDB-GUID-9F096CEA-7101-4CB9-AC16-2BC0EC370674" class="sect5"><span class="enumeration_section">18.3.2.1 </span>You Can Override the SQLType Value in an XML Schema When Declaring Attributes
                     </h5>
                     <div>
                        <p>You can explicitly specify a <code class="codeph">SQLType</code> value in an XML schema, as an annotation. The SQL data type that you specify is used for XML schema validation, overriding the default SQL data types. 
                        </p>
                        <p>Only the following specific forms of such SQL data-type overrides are allowed: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the default SQL data type is <code class="codeph">STRING</code> then you can override it with <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR</code>, or <code class="codeph">CLOB</code>.
                              </p>
                           </li>
                           <li>
                              <p>If the default SQL data type is <code class="codeph">RAW</code> then you can override it with <code class="codeph">RAW</code> or <code class="codeph">BLOB</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-73BF2445-E3AE-44AD-9DCE-669EFDD8299C" title="An XML attribute declaration can specify its XML Schema data type in terms of a primitive type, a local simpleType, a global simpleType, or a reference to a global attribute (ref=".."). The SQL data type and its associated information are derived from the base XML Schema type.">XML Schema Attribute Data Types Mapped to SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4532"></a><div class="props_rev_3"><a id="GUID-F800FE48-194A-4A60-B2D3-8382A3775D2C" name="GUID-F800FE48-194A-4A60-B2D3-8382A3775D2C"></a><h4 id="ADXDB-GUID-F800FE48-194A-4A60-B2D3-8382A3775D2C" class="sect4"><span class="enumeration_section">18.3.3 </span>XML Schema Element Data Types Mapped to SQL
                  </h4>
                  <div>
                     <p>An XML element declaration can specify its XML Schema data type using a primitive type, a local or global <code class="codeph">simpleType</code>, a local or global <code class="codeph">complexType</code>, or a reference to a global element (<code class="codeph">ref=".."</code>). The SQL data type and its associated information are derived from the base XML Schema type. 
                     </p>
                     <p>An element declaration can specify its XML Schema data type in terms of any of the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Any of the ways for specifying type for an attribute declaration. See <a href="XML-Schema-and-query-object-relational-storage.html#GUID-73BF2445-E3AE-44AD-9DCE-669EFDD8299C" title="An XML attribute declaration can specify its XML Schema data type in terms of a primitive type, a local simpleType, a global simpleType, or a reference to a global attribute (ref=".."). The SQL data type and its associated information are derived from the base XML Schema type.">XML Schema Attribute Data Types Mapped to SQL</a>. 
                           </p>
                        </li>
                        <li>
                           <p>Global <code class="codeph">complexType</code>, specified within this XML schema document or in an external XML schema.
                           </p>
                        </li>
                        <li>
                           <p>Reference to a global element (<code class="codeph">ref="..."</code>), which could itself be within this XML schema document or in an external XML schema.
                           </p>
                        </li>
                        <li>
                           <p>Local <code class="codeph">complexType</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-ED63CA4B-1200-4000-89A3-DA8B4E48E597">Override of the SQLType Value in an XML Schema When Declaring Elements</a><br>An element based on a <code class="codeph">complexType</code> is, by default, mapped to a SQL object type that contains object attributes corresponding to each of its sub-elements and attributes. You can override this mapping by explicitly specifying a value for attribute <code class="codeph">SQLType</code> in the input XML schema. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4533"></a><div class="props_rev_3"><a id="GUID-ED63CA4B-1200-4000-89A3-DA8B4E48E597" name="GUID-ED63CA4B-1200-4000-89A3-DA8B4E48E597"></a><h5 id="ADXDB-GUID-ED63CA4B-1200-4000-89A3-DA8B4E48E597" class="sect5"><span class="enumeration_section">18.3.3.1 </span>Override of the SQLType Value in an XML Schema When Declaring Elements
                     </h5>
                     <div>
                        <p>An element based on a <code class="codeph">complexType</code> is, by default, mapped to a SQL object type that contains object attributes corresponding to each of its sub-elements and attributes. You can override this mapping by explicitly specifying a value for attribute <code class="codeph">SQLType</code> in the input XML schema. 
                        </p>
                        <p>The following values for <code class="codeph">SQLType</code> are permitted here:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">VARCHAR2</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">RAW</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CLOB</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">BLOB</code></p>
                           </li>
                        </ul>
                        <p>These represent storage of the XML data in a text form in the database. </p>
                        <p>For example, to override the <code class="codeph">SQLType</code> from <code class="codeph">VARCHAR2</code> to <code class="codeph">CLOB</code>, declare the <code class="codeph">xdb</code> namespace using <code class="codeph">xmlns:xdb="http://xmlns.oracle.com/xdb"</code>, and then use <code class="codeph">xdb:SQLType = "CLOB"</code>.
                        </p>
                        <p>The following special cases are handled:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If a cycle is detected when processing the <code class="codeph">complexType</code> values that are used to declare elements and the elements declared within the c<code class="codeph">omplexType</code>, the <code class="codeph">SQLInline</code> attribute is forced to be <code class="codeph">false</code>, and the correct SQL mapping is set to <code class="codeph">REF</code> <code class="codeph">XMLType</code>. 
                              </p>
                           </li>
                           <li>
                              <p>If <code class="codeph">maxOccurs &gt; 1</code>, a varray type might be created.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If <code class="codeph">SQLInline</code> <code class="codeph">= "true"</code>, then a varray type is created whose element type is the SQL data type previously determined. Cardinality of the varray is based on the value of attribute <code class="codeph">maxOccurs</code>. Either you specify the name of the varray type using attribute <code class="codeph">SQLCollType</code>, or it is derived from the element name.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If <code class="codeph">SQLInline = "false"</code>, then the SQL data type is set to <code class="codeph">XDB.XDB$XMLTYPE_REF_LIST_T</code>. This is a predefined data type that represents an array of <code class="codeph">REF</code> values pointing to <code class="codeph">XMLType</code> instances.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If the element is a global element, or if <code class="codeph">SQLInline = "false"</code>, then the system creates a default table. Either you specify the name of the default table, or it is derived from the element name.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F800FE48-194A-4A60-B2D3-8382A3775D2C" title="An XML element declaration can specify its XML Schema data type using a primitive type, a local or global simpleType, a local or global complexType, or a reference to a global element (ref=".."). The SQL data type and its associated information are derived from the base XML Schema type.">XML Schema Element Data Types Mapped to SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4535"></a><a id="ADXDB4536"></a><a id="ADXDB4537"></a><a id="ADXDB4538"></a><a id="ADXDB4539"></a><a id="ADXDB4540"></a><a id="ADXDB4534"></a><div class="props_rev_3"><a id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C" name="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C"></a><h4 id="ADXDB-GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C" class="sect4"><span class="enumeration_section">18.3.4 </span>How XML Schema simpleType Is Mapped to SQL
                  </h4>
                  <div>
                     <p>XML <code class="codeph">simpleType</code> is mapped to SQL object types in various ways, depending on how the <code class="codeph">simpleType</code> is defined.
                     </p>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHHFDHA">Figure 18-1</a> illustrates one such mapping, XML string type to SQL <code class="codeph">VARCHAR2</code> or <code class="codeph">CLOB</code>.
                     </p>
                     <div class="figure" id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHHFDHA">
                        <p class="titleinfigure">Figure 18-1 simpleType Mapping: XML Strings to SQL VARCHAR2 or CLOB</p><img src="img/adxdb038.gif" width="228" alt="Description of Figure 18-1 follows" title="Description of Figure 18-1 follows" longdesc="img_text/adxdb038.html"><br><a href="img_text/adxdb038.html">Description of "Figure 18-1 simpleType Mapping: XML Strings to SQL VARCHAR2 or CLOB"</a></div>
                     <!-- class="figure" -->
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHJFDGH" title="This table describes the mapping of XML string datatypes to SQL. It includes the default mapping.">Table 18-3</a> through <a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHGIDDJ" title="This table describes the mapping of XML DATE datatype to SQL.">Table 18-6</a> present the default mapping of XML Schema <code class="codeph">simpleType</code> to SQL, as specified in the XML Schema definition. 
                     </p>
                     <p>For example:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>An XML Schema <span class="italic">primitive</span> type is mapped to the closest SQL data type. For example, <code class="codeph">DECIMAL</code>, <code class="codeph">POSITIVEINTEGER</code>, and <code class="codeph">FLOAT</code> are all mapped to SQL <code class="codeph">NUMBER</code>.
                           </p>
                        </li>
                        <li>
                           <p>An XML Schema <span class="italic">enumeration</span> type is mapped to a SQL object type with a single <code class="codeph">RAW(</code><span class="italic"><code class="codeph">n</code></span><code class="codeph">)</code> object attribute. The value of <span class="italic"><code class="codeph">n</code></span> is determined by the number of possible values in the enumeration declaration.
                           </p>
                        </li>
                        <li>
                           <p>An XML Schema <span class="italic">list</span> or a <span class="italic">union</span> type is mapped to a SQL string (<code class="codeph">VARCHAR2</code> or <code class="codeph">CLOB</code>) data type.
                           </p>
                        </li>
                     </ul>
                     <div class="tblformalwide" id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHJFDGH">
                        <p class="titleintable">Table 18-3 XML Schema String Data Types Mapped to SQL </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XML Schema String Data Types Mapped to SQL " summary="This table describes the mapping of XML string datatypes to SQL. It includes the default mapping." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d86720e3876">XML Schema String Type</th>
                                 <th align="left" valign="bottom" width="12%" id="d86720e3879">Length or MaxLength Facet</th>
                                 <th align="left" valign="bottom" width="52%" id="d86720e3882">Default SQL Data Type</th>
                                 <th align="left" valign="bottom" width="22%" id="d86720e3885">Compatible SQL Data Type</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d86720e3890" headers="d86720e3876 ">
                                    <p><code class="codeph">string</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d86720e3890 d86720e3879 ">
                                    <p>n</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d86720e3890 d86720e3882 ">
                                    <p><code class="codeph">VARCHAR2(n)</code> if <code class="codeph">n</code> &lt; 4000, else <code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d86720e3890 d86720e3885 ">
                                    <p><code class="codeph">CHAR</code>, <code class="codeph">CLOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d86720e3915" headers="d86720e3876 ">
                                    <p><code class="codeph">string</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d86720e3915 d86720e3879 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d86720e3915 d86720e3882 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code> if <code class="codeph">mapUnboundedStringToLob = "false"</code>, <code class="codeph">CLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d86720e3915 d86720e3885 ">
                                    <p><code class="codeph">CHAR</code>, <code class="codeph">CLOB</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformalwide" id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__GUID-1F77BC9E-C5F8-4877-9F9D-A6FDBDB6BADB">
                        <p class="titleintable">Table 18-4 XML Schema Binary Data Types (hexBinary/base64Binary) Mapped to SQL </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XML Schema Binary Data Types (hexBinary/base64Binary) Mapped to SQL " summary="This table describes the mapping of binary datatypes to SQL. It includes the default mapping." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d86720e3951">XML Schema Binary Type</th>
                                 <th align="left" valign="bottom" width="12%" id="d86720e3954">Length or MaxLength Facet</th>
                                 <th align="left" valign="bottom" width="50%" id="d86720e3957">Default SQL Data Type</th>
                                 <th align="left" valign="bottom" width="12%" id="d86720e3960">Compatible SQL Data Type</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d86720e3965" headers="d86720e3951 ">
                                    <p><code class="codeph">hexBinary</code>, <code class="codeph">base64Binary</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d86720e3965 d86720e3954 ">
                                    <p>n</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d86720e3965 d86720e3957 ">
                                    <p><code class="codeph">RAW(n)</code> if <code class="codeph">n</code> &lt; 2000, else <code class="codeph">RAW(2000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d86720e3965 d86720e3960 ">
                                    <p><code class="codeph">RAW</code>, <code class="codeph">BLOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d86720e3993" headers="d86720e3951 ">
                                    <p><code class="codeph">hexBinary</code>, <code class="codeph">base64Binary</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d86720e3993 d86720e3954 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d86720e3993 d86720e3957 ">
                                    <p><code class="codeph">RAW(2000)</code> if <code class="codeph">mapUnboundedStringToLob = "false"</code>, <code class="codeph">BLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d86720e3993 d86720e3960 ">
                                    <p><code class="codeph">RAW</code>, <code class="codeph">BLOB</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformalwide" id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__GUID-FEC3D7EF-86BE-4E99-BC3D-76307B2341B2">
                        <p class="titleintable">Table 18-5 Default Mapping of Numeric XML Schema Primitive Types to SQL</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Default Mapping of Numeric XML Schema Primitive Types to SQL" summary="This table describes the default mapping of numeric XML primitive types to SQL. It includes the default data type." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d86720e4032">XML Schema Simple Type</th>
                                 <th align="left" valign="bottom" width="17%" id="d86720e4035">Default SQL Data Type</th>
                                 <th align="left" valign="bottom" width="27%" id="d86720e4038">totalDigits (m), fractionDigits(n) Specified</th>
                                 <th align="left" valign="bottom" width="33%" id="d86720e4041">Compatible SQL Data Types</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4046" headers="d86720e4032 ">
                                    <p><code class="codeph">float</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4046 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4046 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4046 d86720e4041 ">
                                    <p><code class="codeph">FLOAT</code>, <code class="codeph">DOUBLE</code>, <code class="codeph">BINARY_FLOAT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4069" headers="d86720e4032 ">
                                    <p><code class="codeph">double</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4069 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4069 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4069 d86720e4041 ">
                                    <p><code class="codeph">FLOAT</code>, <code class="codeph">DOUBLE</code>, <code class="codeph">BINARY_DOUBLE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4092" headers="d86720e4032 ">
                                    <p><code class="codeph">decimal</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4092 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4092 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4092 d86720e4041 ">
                                    <p><code class="codeph">FLOAT</code>, <code class="codeph">DOUBLE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4112" headers="d86720e4032 ">
                                    <p><code class="codeph">integer</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4112 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4112 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4112 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4129" headers="d86720e4032 ">
                                    <p><code class="codeph">nonNegativeInteger</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4129 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4129 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4129 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4146" headers="d86720e4032 ">
                                    <p><code class="codeph">positiveInteger</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4146 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4146 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4146 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4163" headers="d86720e4032 ">
                                    <p><code class="codeph">nonPositiveInteger</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4163 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4163 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4163 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4180" headers="d86720e4032 ">
                                    <p><code class="codeph">negativeInteger</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4180 d86720e4035 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4180 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4180 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4197" headers="d86720e4032 ">
                                    <p><code class="codeph">long</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4197 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(20)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4197 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4197 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4214" headers="d86720e4032 ">
                                    <p><code class="codeph">unsignedLong</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4214 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(20)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4214 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4214 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4231" headers="d86720e4032 ">
                                    <p><code class="codeph">int</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4231 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(10)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4231 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4231 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4249" headers="d86720e4032 ">
                                    <p><code class="codeph">unsignedInt</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4249 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(10)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4249 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4249 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4266" headers="d86720e4032 ">
                                    <p><code class="codeph">short</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4266 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(5)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4266 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4266 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4283" headers="d86720e4032 ">
                                    <p><code class="codeph">unsignedShort</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4283 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(5)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4283 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4283 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4300" headers="d86720e4032 ">
                                    <p><code class="codeph">byte</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4300 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(3)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4300 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4300 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d86720e4317" headers="d86720e4032 ">
                                    <p><code class="codeph">unsignedByte</code></p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d86720e4317 d86720e4035 ">
                                    <p><code class="codeph">NUMBER(3)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4317 d86720e4038 ">
                                    <p><code class="codeph">NUMBER(m+n,n)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d86720e4317 d86720e4041 ">
                                    <p><code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformalwide" id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHGIDDJ">
                        <p class="titleintable">Table 18-6 XML Schema Date and Time Data Types Mapped to SQL </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XML Schema Date and Time Data Types Mapped to SQL " summary="This table describes the mapping of XML DATE datatype to SQL." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d86720e4344">XML Schema Date or Time Type</th>
                                 <th align="left" valign="bottom" width="29%" id="d86720e4347">Default SQL Data Type</th>
                                 <th align="left" valign="bottom" width="39%" id="d86720e4350">Compatible SQL Data Types</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4355" headers="d86720e4344 ">
                                    <p><code class="codeph">dateTime</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4355 d86720e4347 ">
                                    <p><code class="codeph">TIMESTAMP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4355 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code>, <code class="codeph">DATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4371" headers="d86720e4344 ">
                                    <p><code class="codeph">time</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4371 d86720e4347 ">
                                    <p><code class="codeph">TIMESTAMP</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4371 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code>, <code class="codeph">DATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4387" headers="d86720e4344 ">
                                    <p><code class="codeph">date</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4387 d86720e4347 ">
                                    <p><code class="codeph">DATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4387 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4400" headers="d86720e4344 ">
                                    <p><code class="codeph">gDay</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4400 d86720e4347 ">
                                    <p><code class="codeph">DATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4400 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4413" headers="d86720e4344 ">
                                    <p><code class="codeph">gMonth</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4413 d86720e4347 ">
                                    <p><code class="codeph">DATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4413 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4426" headers="d86720e4344 ">
                                    <p><code class="codeph">gYear</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4426 d86720e4347 ">
                                    <p><code class="codeph">DATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4426 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4439" headers="d86720e4344 ">
                                    <p><code class="codeph">gYearMonth</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4439 d86720e4347 ">
                                    <p><code class="codeph">DATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4439 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4452" headers="d86720e4344 ">
                                    <p><code class="codeph">gMonthDay</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4452 d86720e4347 ">
                                    <p><code class="codeph">DATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4452 d86720e4350 ">
                                    <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d86720e4465" headers="d86720e4344 ">
                                    <p><code class="codeph">duration</code></p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d86720e4465 d86720e4347 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d86720e4465 d86720e4350 ">
                                    <p>none</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformalwide" id="GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__GUID-B26BBA39-EB38-4C85-9E77-AAB58E3BB21F">
                        <p class="titleintable">Table 18-7 Default Mapping of Other XML Schema Primitive and Derived Data Types to SQL</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Default Mapping of Other XML Schema Primitive and Derived Data Types to SQL" summary="This table describes the default mapping of other XML primitive datatypes to SQL." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d86720e4487">XML Schema Primitive or Derived Type</th>
                                 <th align="left" valign="bottom" width="34%" id="d86720e4490">Default SQL Data Type</th>
                                 <th align="left" valign="bottom" width="27%" id="d86720e4493">Compatible SQL Data Types</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4498" headers="d86720e4487 ">
                                    <p><code class="codeph">boolean</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4498 d86720e4490 ">
                                    <p><code class="codeph">RAW(1)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4498 d86720e4493 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4511" headers="d86720e4487 ">
                                    <p><code class="codeph">language(string)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4511 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4511 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4527" headers="d86720e4487 ">
                                    <p><code class="codeph">NMTOKEN(string)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4527 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4527 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4543" headers="d86720e4487 ">
                                    <p><code class="codeph">NMTOKENS(string)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4543 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4543 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4559" headers="d86720e4487 ">
                                    <p><code class="codeph">Name(string)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4559 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4559 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4575" headers="d86720e4487 ">
                                    <p><code class="codeph">NCName(string)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4575 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4575 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4591" headers="d86720e4487 ">
                                    <p><code class="codeph">ID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4591 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4591 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4607" headers="d86720e4487 ">
                                    <p><code class="codeph">IDREF</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4607 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4607 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4623" headers="d86720e4487 ">
                                    <p><code class="codeph">IDREFS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4623 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4623 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4639" headers="d86720e4487 ">
                                    <p><code class="codeph">ENTITY</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4639 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4639 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4656" headers="d86720e4487 ">
                                    <p><code class="codeph">ENTITIES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4656 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4656 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4673" headers="d86720e4487 ">
                                    <p><code class="codeph">NOTATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4673 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4673 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4689" headers="d86720e4487 ">
                                    <p><code class="codeph">anyURI</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4689 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4689 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4705" headers="d86720e4487 ">
                                    <p><code class="codeph">anyType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4705 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4705 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4721" headers="d86720e4487 ">
                                    <p><code class="codeph">anySimpleType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4721 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4721 d86720e4493 ">
                                    <p><code class="codeph">CLOB</code>, <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4737" headers="d86720e4487 ">
                                    <p><code class="codeph">QName</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4737 d86720e4490 ">
                                    <p><code class="codeph">XDB.XDB$QNAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4737 d86720e4493 ">
                                    <p>none</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4749" headers="d86720e4487 ">
                                    <p><code class="codeph">normalizedString</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4749 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4749 d86720e4493 ">
                                    <p>none</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d86720e4761" headers="d86720e4487 ">
                                    <p><code class="codeph">token</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d86720e4761 d86720e4490 ">
                                    <p><code class="codeph">VARCHAR2(4000)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d86720e4761 d86720e4493 ">
                                    <p>none</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-07098CDC-609B-4A81-A112-0B54A27A103A">NCHAR, NVARCHAR2, and NCLOB SQLType Values Are Not Supported for SQLType</a><br>Oracle XML&nbsp;DB does <span class="italic">not</span> support <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">NCLOB</code> as values for attribute <code class="codeph">SQLType</code>: You cannot specify that an XML element or attribute is to be of type <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, or <code class="codeph">NCLOB</code>. Also, if you provide your own data type, do not use any of these data types.
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-0F8F7480-56F4-4910-9FD6-8566A1F70BC6">simpleType: How XML Strings Are Mapped to SQL VARCHAR2 Versus CLOB</a><br>If an XML schema specifies a data type as a string with <code class="codeph">maxLength</code> less than 4000, it is mapped to a <code class="codeph">VARCHAR2</code> object attribute of the specified length. If <code class="codeph">maxLength</code> is not specified in the schema then the XML Schema data type can only be mapped to a LOB. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-F6855A35-3E83-4837-ABE9-320498CCC45B">How XML Schema Time Zones Are Mapped to SQL</a><br>If your application needs to work with time-zone indicators, then use attribute <code class="codeph">SQLType</code> to specify the SQL data type as <code class="codeph">TIMESTAMP WITH TIME ZONE</code>. This ensures that values containing time-zone indicators can be stored and retrieved correctly. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4541"></a><div class="props_rev_3"><a id="GUID-07098CDC-609B-4A81-A112-0B54A27A103A" name="GUID-07098CDC-609B-4A81-A112-0B54A27A103A"></a><h5 id="ADXDB-GUID-07098CDC-609B-4A81-A112-0B54A27A103A" class="sect5"><span class="enumeration_section">18.3.4.1 </span>NCHAR, NVARCHAR2, and NCLOB SQLType Values Are Not Supported for SQLType
                     </h5>
                     <div>
                        <p>Oracle XML&nbsp;DB does <span class="italic">not</span> support <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">NCLOB</code> as values for attribute <code class="codeph">SQLType</code>: You cannot specify that an XML element or attribute is to be of type <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, or <code class="codeph">NCLOB</code>. Also, if you provide your own data type, do not use any of these data types.
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-DB-restrictions.html#GUID-149CBDAE-C2DA-4D44-A1E4-30F31CD1E4C3" title="The restrictions associated with Oracle XML&nbsp;DB are listed here.">Oracle XML&nbsp;DB Restrictions</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C" title="XML simpleType is mapped to SQL object types in various ways, depending on how the simpleType is defined.">How XML Schema simpleType Is Mapped to SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4542"></a><div class="props_rev_3"><a id="GUID-0F8F7480-56F4-4910-9FD6-8566A1F70BC6" name="GUID-0F8F7480-56F4-4910-9FD6-8566A1F70BC6"></a><h5 id="ADXDB-GUID-0F8F7480-56F4-4910-9FD6-8566A1F70BC6" class="sect5"><span class="enumeration_section">18.3.4.2 </span>simpleType: How XML Strings Are Mapped to SQL VARCHAR2 Versus CLOB
                     </h5>
                     <div>
                        <p>If an XML schema specifies a data type as a string with <code class="codeph">maxLength</code> less than 4000, it is mapped to a <code class="codeph">VARCHAR2</code> object attribute of the specified length. If <code class="codeph">maxLength</code> is not specified in the schema then the XML Schema data type can only be mapped to a LOB. 
                        </p>
                        <p>This is sub-optimal when most of the string values are small and only a small fraction of them are large enough to need a LOB. </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-0F8F7480-56F4-4910-9FD6-8566A1F70BC6__GUID-0524D69D-BEFA-4092-8E7E-81DF86762A79">
                           <p class="notep1">See Also:</p>
                           <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C__CIHJFDGH" title="This table describes the mapping of XML string datatypes to SQL. It includes the default mapping.">Table 18-3</a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C" title="XML simpleType is mapped to SQL object types in various ways, depending on how the simpleType is defined.">How XML Schema simpleType Is Mapped to SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4543"></a><div class="props_rev_3"><a id="GUID-F6855A35-3E83-4837-ABE9-320498CCC45B" name="GUID-F6855A35-3E83-4837-ABE9-320498CCC45B"></a><h5 id="ADXDB-GUID-F6855A35-3E83-4837-ABE9-320498CCC45B" class="sect5"><span class="enumeration_section">18.3.4.3 </span>How XML Schema Time Zones Are Mapped to SQL
                     </h5>
                     <div>
                        <p>If your application needs to work with time-zone indicators, then use attribute <code class="codeph">SQLType</code> to specify the SQL data type as <code class="codeph">TIMESTAMP WITH TIME ZONE</code>. This ensures that values containing time-zone indicators can be stored and retrieved correctly. 
                        </p>
                        <p>The following XML Schema data types allow for an optional time-zone indicator as part of their literal values: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">xsd:dateTime</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:time</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:date</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:gYear</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:gMonth</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:gDay</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:gYearMonth</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">xsd:gMonthDay</code></p>
                           </li>
                        </ul>
                        <p>By default, XML schema registration maps <code class="codeph">xsd:dateTime</code> and <code class="codeph">xsd:time</code> to SQL data type <code class="codeph">TIMESTAMP</code>, and it maps all other date types to SQL data type <code class="codeph">DATE</code>. 
                        </p>
                        <p>SQL data types <code class="codeph">TIMESTAMP</code> and <code class="codeph">DATE</code> do not permit a time-zone indicator. For this reason, if your application needs time-zone information then you must use attribute <code class="codeph">SQLType</code> to specify SQL data type <code class="codeph">TIMESTAMP WITH TIME ZONE</code>. For example:
                        </p><pre class="pre codeblock"><code>&lt;element name="dob" type="xsd:dateTime"
          xdb:SQLType="<span class="bold">TIMESTAMP WITH TIME ZONE</span>"/&gt;
&lt;attribute name="endofquarter" type="xsd:gMonthDay"
           xdb:SQLType="<span class="bold">TIMESTAMP WITH TIME ZONE</span>"/&gt;</code></pre></div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-E2EA0A87-F6F2-4512-9129-54DB1B714304">Use Trailing Z to Indicate UTC Time Zone</a><br>You can specify an XML Schema time-zone component as <code class="codeph">Z</code>, to indicate UTC time zone. When a value with a trailing <code class="codeph">Z</code> is stored as SQL <code class="codeph">TIMESTAMP WITH TIME ZONE</code>, the time zone is actually stored as <code class="codeph">+00:00</code>. The retrieved value contains the trailing <code class="codeph">+00:00</code> and not the original <code class="codeph">Z</code>. 
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-4920BA1A-5769-49C6-870E-E3CA30F0016C" title="XML simpleType is mapped to SQL object types in various ways, depending on how the simpleType is defined.">How XML Schema simpleType Is Mapped to SQL</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADXDB4544"></a><div class="props_rev_3"><a id="GUID-E2EA0A87-F6F2-4512-9129-54DB1B714304" name="GUID-E2EA0A87-F6F2-4512-9129-54DB1B714304"></a><h6 id="ADXDB-GUID-E2EA0A87-F6F2-4512-9129-54DB1B714304" class="sect6"><span class="enumeration_section">18.3.4.3.1 </span>Use Trailing Z to Indicate UTC Time Zone
                        </h6>
                        <div>
                           <p>You can specify an XML Schema time-zone component as <code class="codeph">Z</code>, to indicate UTC time zone. When a value with a trailing <code class="codeph">Z</code> is stored as SQL <code class="codeph">TIMESTAMP WITH TIME ZONE</code>, the time zone is actually stored as <code class="codeph">+00:00</code>. The retrieved value contains the trailing <code class="codeph">+00:00</code> and not the original <code class="codeph">Z</code>. 
                           </p>
                           <p>For example, if the value in an input XML document is <code class="codeph">1973-02-12T13:44:32</code><span class="bold"><code class="codeph">Z</code></span> then the output is <code class="codeph">1973-02-12T13:44:32</code><span class="bold"><code class="codeph">.000000+00:00</code></span>.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F6855A35-3E83-4837-ABE9-320498CCC45B" title="If your application needs to work with time-zone indicators, then use attribute SQLType to specify the SQL data type as TIMESTAMP WITH TIME ZONE. This ensures that values containing time-zone indicators can be stored and retrieved correctly.">How XML Schema Time Zones Are Mapped to SQL</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADXDB4545"></a><div class="props_rev_3"><a id="GUID-EEE8E9EE-0397-4EE9-8496-DB20B1A82CC1" name="GUID-EEE8E9EE-0397-4EE9-8496-DB20B1A82CC1"></a><h4 id="ADXDB-GUID-EEE8E9EE-0397-4EE9-8496-DB20B1A82CC1" class="sect4"><span class="enumeration_section">18.3.5 </span>How XML Schema complexType Is Mapped to SQL
                  </h4>
                  <div>
                     <p>XML <code class="codeph">complexType</code> is mapped to SQL object types in various ways, depending on how the <code class="codeph">complexType</code> is defined.
                     </p>
                     <p>Using XML Schema, a <code class="codeph">complexType</code> is mapped to a SQL object type as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>XML attributes declared within the <code class="codeph">complexType</code> are mapped to SQL object attributes. The <code class="codeph">simpleType</code> defining an XML attribute determines the SQL data type of the corresponding object attribute. 
                           </p>
                        </li>
                        <li>
                           <p>XML elements declared within the <code class="codeph">complexType</code> are also mapped to SQL object attributes. The <code class="codeph">simpleType</code> or <code class="codeph">complexType</code> defining an XML element determines the SQL data type of the corresponding object attribute. 
                           </p>
                        </li>
                     </ul>
                     <p>If the XML element is declared with attribute <code class="codeph">maxOccurs</code> &gt; 1 then it is mapped to a SQL collection (object) attribute. The collection is a varray value that is an ordered collections table (OCT).
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-34E0393B-7055-4410-AA12-EC9B859211A0">Attribute Specification in a complexType XML Schema Declaration</a><br>When an element is based on a global <code class="codeph">complexType</code>, attribute <code class="codeph">SQLType</code> must be specified for the <code class="codeph">complexType</code> declaration. You can optionally include the same <code class="codeph">SQLType</code> attribute within the element declaration.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="You use PL/SQL package DBMS_XMLSCHEMA to map data types for XML Schema attributes and elements to SQL data types.">Use DBMS_XMLSCHEMA to Map XML Schema Data Types to SQL Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4546"></a><div class="props_rev_3"><a id="GUID-34E0393B-7055-4410-AA12-EC9B859211A0" name="GUID-34E0393B-7055-4410-AA12-EC9B859211A0"></a><h5 id="ADXDB-GUID-34E0393B-7055-4410-AA12-EC9B859211A0" class="sect5"><span class="enumeration_section">18.3.5.1 </span>Attribute Specification in a complexType XML Schema Declaration
                     </h5>
                     <div>
                        <p>When an element is based on a global <code class="codeph">complexType</code>, attribute <code class="codeph">SQLType</code> must be specified for the <code class="codeph">complexType</code> declaration. You can optionally include the same <code class="codeph">SQLType</code> attribute within the element declaration.
                        </p>
                        <p>If you do not specify attribute <code class="codeph">SQLType</code> for the global <code class="codeph">complexType</code>, Oracle XML&nbsp;DB creates a <code class="codeph">SQLType</code> attribute with an internally generated name. The elements that reference this global type <span class="italic">cannot</span> then have a different value for <code class="codeph">SQLType</code>. The following code is acceptable:
                        </p><pre class="pre codeblock"><code>  &lt;xs:complexType name="LineItemsType" xdb:SQLType="LINEITEMS_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="LineItem" type="LineItemType" maxOccurs="unbounded" 
                  xdb:SQLName="LINEITEM" xdb:SQLCollType="LINEITEM_V"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="LineItemType" xdb:SQLType="LINEITEM_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="Description" type="DescriptionType" 
                  xdb:SQLName="DESCRIPTION"/&gt;
      &lt;xs:element name="Part" type="PartType" xdb:SQLName="PART"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="ItemNumber" type="xs:integer" xdb:SQLName="ITEMNUMBER" 
                  xdb:SQLType="NUMBER"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="PartType" xdb:SQLType="PART_T"&gt;
    &lt;xs:attribute name="Id" xdb:SQLName="PART_NUMBER" xdb:SQLType="VARCHAR2"&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base="xs:string"&gt;
          &lt;xs:minLength value="10"/&gt;
          &lt;xs:maxLength value="14"/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name="Quantity" type="moneyType" xdb:SQLName="QUANTITY"/&gt;
    &lt;xs:attribute name="UnitPrice" type="quantityType" xdb:SQLName="UNITPRICE"/&gt;
  &lt;/xs:complexType&gt;</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEE8E9EE-0397-4EE9-8496-DB20B1A82CC1" title="XML complexType is mapped to SQL object types in various ways, depending on how the complexType is defined.">How XML Schema complexType Is Mapped to SQL</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB4639"></a><div class="props_rev_3"><a id="GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B" name="GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B"></a><h3 id="ADXDB-GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B" class="sect3"><span class="enumeration_section">18.4 </span>complexType Extensions and Restrictions in Oracle XML&nbsp;DB
               </h3>
               <div>
                  <p>In XML Schema, <code class="codeph">complexType</code> values are declared based on <code class="codeph">complexContent</code> and <code class="codeph">simpleContent</code>. Oracle XML&nbsp;DB defines various extensions and restrictions to <code class="codeph">complexType</code>.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">simpleContent</code> is declared as an extension of <code class="codeph">simpleType</code>. 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">complexContent</code> is declared as one of the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Base type</p>
                           </li>
                           <li>
                              <p><code class="codeph">complexType</code> extension
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">complexType</code> restriction
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-F1674D49-86AF-4B3E-9331-10C285DF1502">complexType Declarations in XML Schema: Handling Inheritance</a><br>For <code class="codeph">complexType</code>, Oracle XML&nbsp;DB handles inheritance in an XML schema differently for types that extend and types that restrict other complex types
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-D7A801E3-9051-4203-9BD1-F2385E20609C">How a complexType Based on simpleContent Is Mapped to an Object Type</a><br>A complex type based on a <code class="codeph">simpleContent</code> declaration is mapped to an object type with attributes corresponding to the XML attributes and an extra <code class="codeph">SYS_XDBBODY$</code> attribute, which corresponds to the body value. The data type of the body attribute is based on a <code class="codeph">simpleType</code> that defines the body type. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E">How any and anyAttribute Declarations Are Mapped to Object Type Attributes</a><br>Oracle XML&nbsp;DB maps the element declaration <code class="codeph">any</code> and the attribute declaration <code class="codeph">anyAttribute </code>to <code class="codeph">VARCHAR2</code> attributes, or optionally to Large Objects (LOBs), in the created object type. The object attribute stores the text of the XML fragment that matches the <code class="codeph">any</code> declaration. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4641"></a><a id="ADXDB4642"></a><a id="ADXDB4640"></a><div class="props_rev_3"><a id="GUID-F1674D49-86AF-4B3E-9331-10C285DF1502" name="GUID-F1674D49-86AF-4B3E-9331-10C285DF1502"></a><h4 id="ADXDB-GUID-F1674D49-86AF-4B3E-9331-10C285DF1502" class="sect4"><span class="enumeration_section">18.4.1 </span>complexType Declarations in XML Schema: Handling Inheritance 
                  </h4>
                  <div>
                     <p>For <code class="codeph">complexType</code>, Oracle XML&nbsp;DB handles inheritance in an XML schema differently for types that extend and types that restrict other complex types
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For complex types declared to <span class="italic">extend</span> other complex types, the SQL type corresponding to the base type is specified as the supertype for the current SQL type. Only the additional attributes and elements declared in the sub-complextype are added as attributes to the sub-object-type. 
                           </p>
                        </li>
                        <li>
                           <p>For complex types declared to <span class="italic">restrict</span> other complex types, the SQL type for the sub-complex type is set to be the same as the SQL type for its base type. This is because SQL does not support restriction of object types through the inheritance mechanism. Any constraints are imposed by the restriction in XML schema.
                           </p>
                        </li>
                     </ul>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-F1674D49-86AF-4B3E-9331-10C285DF1502__BHABGCDF">Example 18-9</a> shows the registration of an XML schema that defines a base <code class="codeph">complexType</code> <code class="codeph">Address</code> and two extensions <code class="codeph">USAddress</code> and <code class="codeph">IntlAddress</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-F1674D49-86AF-4B3E-9331-10C285DF1502__GUID-0FF85054-0239-466C-AC59-5C44F50A5510">
                        <p class="notep1">Note:</p>
                        <p>Type <code class="codeph">intladdr_t</code> is created as a <span class="italic">final</span> type because the corresponding <code class="codeph">complexType</code> specifies the "<code class="codeph">final</code>" attribute. By default, all <code class="codeph">complexTypes</code> can be extended and restricted by other types, so all SQL object types are created as types that are <span class="italic">not</span> final.
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">CREATE TYPE addr_t AS OBJECT(SYS_XDBPD$ XDB.XDB$RAW_LIST_T,
                             "street" VARCHAR2(4000),
                             "city" VARCHAR2(4000)) NOT FINAL;
CREATE TYPE usaddr_t UNDER addr_t ("zip" VARCHAR2(4000)) NOT FINAL;
CREATE TYPE intladdr_t UNDER addr_t ("country" VARCHAR2(4000)) FINAL;
</pre><p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-F1674D49-86AF-4B3E-9331-10C285DF1502__BHAHEIHC">Example 18-10</a> shows the registration of an XML schema that defines a base <code class="codeph">complexType</code> <code class="codeph">Address</code> and a restricted type <code class="codeph">LocalAddress</code> that prohibits the specification of <code class="codeph">country</code> attribute.
                     </p>
                     <p>Because SQL inheritance does not support a notion of restriction, the SQL data type corresponding to a restricted <code class="codeph">complexType</code> is a empty subtype of the parent object type. For the XML schema of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-F1674D49-86AF-4B3E-9331-10C285DF1502__BHAHEIHC">Example 18-10</a>, Oracle XML&nbsp;DB generates the following SQL types: 
                     </p><pre class="pre codeblock"><code>CREATE TYPE addr_t AS OBJECT (SYS_XDBPD$ XDB.XDB$RAW_LIST_T,
                              "street"   VARCHAR2(4000),
                              "city"     VARCHAR2(4000),
                              "zip"      VARCHAR2(4000),
                              "country"  VARCHAR2(4000)) NOT FINAL;
CREATE TYPE usaddr_t UNDER addr_t;</code></pre><div class="example" id="GUID-F1674D49-86AF-4B3E-9331-10C285DF1502__BHABGCDF">
                        <p class="titleinexample">Example 18-9 XML Schema Inheritance: complexContent as an Extension of complexTypes</p><pre class="pre codeblock"><code>DECLARE
  doc VARCHAR2(3000) :=
    '&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;xs:complexType name="Address" xdb:SQLType="ADDR_T"&gt;
         &lt;xs:sequence&gt;
           &lt;xs:element name="street" type="xs:string"/&gt;
           &lt;xs:element name="city" type="xs:string"/&gt;
         &lt;/xs:sequence&gt;
       &lt;/xs:complexType&gt;
       &lt;xs:complexType name="USAddress" xdb:SQLType="USADDR_T"&gt;
         &lt;xs:complexContent&gt;
           &lt;xs:extension base="Address"&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="zip" type="xs:string"/&gt;
             &lt;/xs:sequence&gt;
           &lt;/xs:extension&gt;
         &lt;/xs:complexContent&gt;
       &lt;/xs:complexType&gt;
       &lt;xs:complexType name="IntlAddress" final="#all" xdb:SQLType="INTLADDR_T"&gt;
         &lt;xs:complexContent&gt;
           &lt;xs:extension base="Address"&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="country" type="xs:string"/&gt;
             &lt;/xs:sequence&gt;
           &lt;/xs:extension&gt;
         &lt;/xs:complexContent&gt;
       &lt;/xs:complexType&gt;
     &lt;/xs:schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/PO.xsd',
    SCHAMEDOC =&gt; doc);
END;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F1674D49-86AF-4B3E-9331-10C285DF1502__BHAHEIHC">
                        <p class="titleinexample">Example 18-10 Inheritance in XML Schema: Restrictions in complexTypes</p><pre class="pre codeblock"><code>DECLARE
  doc varchar2(3000) :=
    '&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;xs:complexType name="Address" xdb:SQLType="ADDR_T"&gt;
         &lt;xs:sequence&gt;
           &lt;xs:element name="street" type="xs:string"/&gt;
           &lt;xs:element name="city" type="xs:string"/&gt;
           &lt;xs:element name="zip" type="xs:string"/&gt;
           &lt;xs:element name="country" type="xs:string" minOccurs="0"
                       maxOccurs="1"/&gt;
         &lt;/xs:sequence&gt;
       &lt;/xs:complexType&gt;
       &lt;xs:complexType name="LocalAddress" xdb:SQLType="USADDR_T"&gt;
         &lt;xs:complexContent&gt;
           &lt;xs:restriction base="Address"&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="street" type="xs:string"/&gt;
               &lt;xs:element name="city" type="xs:string"/&gt;
               &lt;xs:element name="zip" type="xs:string"/&gt;
               &lt;xs:element name="country" type="xs:string" 
                           minOccurs="0" maxOccurs="0"/&gt;
             &lt;/xs:sequence&gt;
           &lt;/xs:restriction&gt;
         &lt;/xs:complexContent&gt;
       &lt;/xs:complexType&gt;
     &lt;/xs:schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/PO.xsd',
    SCHEMADOC =&gt; doc);
END;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B" title="In XML Schema, complexType values are declared based on complexContent and simpleContent. Oracle XML&nbsp;DB defines various extensions and restrictions to complexType.">complexType Extensions and Restrictions in Oracle XML&nbsp;DB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4644"></a><a id="ADXDB4643"></a><div class="props_rev_3"><a id="GUID-D7A801E3-9051-4203-9BD1-F2385E20609C" name="GUID-D7A801E3-9051-4203-9BD1-F2385E20609C"></a><h4 id="ADXDB-GUID-D7A801E3-9051-4203-9BD1-F2385E20609C" class="sect4"><span class="enumeration_section">18.4.2 </span>How a complexType Based on simpleContent Is Mapped to an Object Type
                  </h4>
                  <div>
                     <p>A complex type based on a <code class="codeph">simpleContent</code> declaration is mapped to an object type with attributes corresponding to the XML attributes and an extra <code class="codeph">SYS_XDBBODY$</code> attribute, which corresponds to the body value. The data type of the body attribute is based on a <code class="codeph">simpleType</code> that defines the body type. 
                     </p>
                     <p>For the XML schema of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-D7A801E3-9051-4203-9BD1-F2385E20609C__BHAFGHGJ">Example 18-11</a>, Oracle XML&nbsp;DB generates the following type:
                     </p><pre class="pre codeblock"><code>CREATE TYPE obj_t AS OBJECT(SYS_XDBPD$ XDB.XDB$RAW_LIST_T, 
                            SYS_XDBBODY$ VARCHAR2(4000));</code></pre><div class="example" id="GUID-D7A801E3-9051-4203-9BD1-F2385E20609C__BHAFGHGJ">
                        <p class="titleinexample">Example 18-11 XML Schema complexType: Mapping complexType to simpleContent</p><pre class="pre codeblock"><code>DECLARE
  doc VARCHAR2(3000) :=
    '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"               
             targetNamespace="http://www.oracle.com/emp.xsd"      
             xmlns:emp="http://www.oracle.com/emp.xsd" 
             xmlns:xdb="http://xmlns.oracle.com/xdb"&gt; 
       &lt;complexType name="name" xdb:SQLType="OBJ_T"&gt; 
         &lt;simpleContent&gt; 
           &lt;restriction base="string"&gt; 
           &lt;/restriction&gt; 
         &lt;/simpleContent&gt; 
       &lt;/complexType&gt;
     &lt;/schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/emp.xsd',
    SCHEMADOC =&gt; doc);
END;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B" title="In XML Schema, complexType values are declared based on complexContent and simpleContent. Oracle XML&nbsp;DB defines various extensions and restrictions to complexType.">complexType Extensions and Restrictions in Oracle XML&nbsp;DB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4646"></a><a id="ADXDB4645"></a><div class="props_rev_3"><a id="GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E" name="GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E"></a><h4 id="ADXDB-GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E" class="sect4"><span class="enumeration_section">18.4.3 </span>How any and anyAttribute Declarations Are Mapped to Object Type Attributes
                  </h4>
                  <div>
                     <p>Oracle XML&nbsp;DB maps the element declaration <code class="codeph">any</code> and the attribute declaration <code class="codeph">anyAttribute </code>to <code class="codeph">VARCHAR2</code> attributes, or optionally to Large Objects (LOBs), in the created object type. The object attribute stores the text of the XML fragment that matches the <code class="codeph">any</code> declaration. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">namespace</code> attribute can be used to restrict the contents so that they belong to a specified namespace. 
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">processContents</code> attribute within the <code class="codeph">any</code> element declaration, indicates the level of validation required for the contents matching the <code class="codeph">any</code> declaration. 
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E__GUID-2DE4011B-BFD5-420E-B13E-8B05FA6016E8">
                        <p class="notep1">Note:</p>Starting with Oracle Database 12c Release 2 (12.2.0.1), when an XML schema is registered for object-relational <code class="codeph">XMLType</code> storage by the common user of a multitenant container database (CDB) or by an application common user, you must annotate the complex type with <code class="codeph">xdb:SQLType</code> to specify the corresponding SQL type to use. Otherwise, an error is raised.
                     </div>
                     <p>The code in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E__BHACFACC">Example 18-12</a> declares an <code class="codeph">any</code> element and maps it to the column <code class="codeph">SYS_XDBANY$</code>, in object type <code class="codeph">obj_t</code>. It also declares that attribute <code class="codeph">processContents</code> does not validate contents that match the <code class="codeph">any</code> declaration.
                     </p>
                     <p>For the XML schema of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E__BHACFACC">Example 18-12</a>, Oracle XML&nbsp;DB generates the following type:
                     </p><pre class="pre codeblock"><code>CREATE TYPE obj_t AS OBJECT(SYS_XDBPD$ XDB.XDB$RAW_LIST_T,
                            Name VARCHAR2(4000), 
                            Age NUMBER, 
                            SYS_XDBANY$ VARCHAR2(4000));</code></pre><div class="example" id="GUID-9A48AE16-7F55-4376-8DE1-CEF04BC2000E__BHACFACC">
                        <p class="titleinexample">Example 18-12 XML Schema: Mapping complexType to any/anyAttribute</p><pre class="pre codeblock"><code>DECLARE
  doc VARCHAR2(3000) :=
    '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"  
             targetNamespace="http://www.oracle.com/any.xsd" 
             xmlns:emp="http://www.oracle.com/any.xsd" 
             xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;complexType name="Employee" xdb:SQLType="OBJ_T"&gt;
         &lt;sequence&gt;
           &lt;element name="Name" type="string"/&gt;
           &lt;element name="Age" type="decimal"/&gt;
           &lt;<span class="bold">any</span> namespace="http://www/w3.org/2001/xhtml"
                <span class="bold">processContents="skip"</span>/&gt;
         &lt;/sequence&gt;
       &lt;/complexType&gt;
     &lt;/schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/emp.xsd',
    SCHEMADOC =&gt; doc);
END;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-9E0CF72F-9E08-4CB8-ABBC-66F8ECEF949B" title="In XML Schema, complexType values are declared based on complexContent and simpleContent. Oracle XML&nbsp;DB defines various extensions and restrictions to complexType.">complexType Extensions and Restrictions in Oracle XML&nbsp;DB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB6318"></a><a id="ADXDB6319"></a><a id="ADXDB6320"></a><a id="ADXDB6317"></a><div class="props_rev_3"><a id="GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71" name="GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71"></a><h3 id="ADXDB-GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71" class="sect3"><span class="enumeration_section">18.5 </span>Creating XML Schema-Based XMLType Columns and Tables
               </h3>
               <div>
                  <p>After an XML schema has been registered with Oracle XML&nbsp;DB, you can reference it when you define <code class="codeph">XMLType</code> tables or columns. 
                  </p>
                  <div class="section">
                     <p>If you specify no storage model when creating an <code class="codeph">XMLType</code> table or column for XML Schema-based data then the storage model used is that specified during registration of the referenced XML schema. If no storage model was specified for the XML schema registration, then <span class="italic">object-relational</span> storage is used.
                     </p>
                     <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGIEAHJ">Example 18-13</a> shows how to manually create table <code class="codeph">purchaseorder</code>, the default table for <code class="codeph">PurchaseOrder</code> elements.
                     </p>
                     <p>The <code class="codeph">CREATE TABLE</code> statement of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGIEAHJ">Example 18-13</a> is equivalent to the <code class="codeph">CREATE TABLE</code> statement that is generated automatically by Oracle XML&nbsp;DB when you set parameter <code class="codeph">GENTABLES</code> to <code class="codeph">TRUE</code> during XML schema registration. 
                     </p>
                     <p>The XML schema referenced <a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGIEAHJ">Example 18-13</a> specifies that table <code class="codeph">purchaseorder</code> is the default table for <code class="codeph">PurchaseOrder</code> elements. When an XML document compliant with the XML schema is inserted into Oracle XML&nbsp;DB Repository using protocols or PL/SQL, the content of the document is stored as a row in table <code class="codeph">purchaseorder</code>.
                     </p>
                     <p>When an XML schema is registered as a <span class="italic">global</span> schema, you must grant the appropriate access rights on the default table to all other users of the database, before they can work with instance documents that conform to the globally registered XML schema.
                     </p>
                     <p>Each member of the varray that manages the collection of <code class="codeph">Action</code> elements is stored in the ordered collection table <code class="codeph">action_table</code>. Each member of the varray that manages the collection of <code class="codeph">LineItem</code> elements is stored as a row in ordered collection table <code class="codeph">lineitem_table</code>. The ordered collection tables are heap-based. Because of the <code class="codeph">PRIMARY KEY</code> specification, they automatically contain pseudocolumn <code class="codeph">NESTED_TABLE_ID</code> and column <code class="codeph">SYS_NC_ARRAY_INDEX$</code>, which are required to link them back to the parent column.
                     </p>
                     <p>XML schema registration automatically generates ordered collection tables (OCTs) for collections. These OCTs are given system-generated names, which can be difficult to work with. You can give them more meaningful names using the SQL statement <code class="codeph">RENAME TABLE</code>.
                     </p>
                     <p>The <code class="codeph">CREATE TABLE</code> statement in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGIEAHJ">Example 18-13</a> corresponds to a purchase-order document with a single level of nesting: The varray that manages the collection of <code class="codeph">LineItem</code> elements is ordered collection table <code class="codeph">lineitem_table</code>. 
                     </p>
                     <p>What if you had a different XML schema that had, say, a collection of <code class="codeph">Shipment</code> elements inside a <code class="codeph">Shipments</code> element that was, in turn, inside a <code class="codeph">LineItem</code> element? In that case, you could create the table manually as shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGEFCIG">Example 18-14</a>.
                     </p>
                     <p>A SQL*Plus <code class="codeph">DESCRIBE</code> statement can be used to view information about an <code class="codeph">XMLType</code> table, as shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGCEAAF">Example 18-15</a>.
                     </p>
                     <p>The output of the <code class="codeph">DESCRIBE</code> statement of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGCEAAF">Example 18-15</a> shows the following information about table <code class="codeph">purchaseorder</code>:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The table is an <code class="codeph">XMLType</code> table
                           </p>
                        </li>
                        <li>
                           <p>The table is constrained to storing <code class="codeph">PurchaseOrder</code> documents as defined by the <code class="codeph">PurchaseOrder</code> XML schema
                           </p>
                        </li>
                        <li>
                           <p>Rows in this table are stored as a set of objects in the database</p>
                        </li>
                        <li>
                           <p>SQL type <code class="codeph">purchaseorder_t</code> is the base object for this table
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGIEAHJ">
                     <p class="titleinexample">Example 18-13 Creating an XMLType Table that Conforms to an XML Schema</p><pre class="pre codeblock"><code>CREATE TABLE <span class="bold">purchaseorder</span> OF XMLType
  XMLSCHEMA "http://localhost:8080/source/schemas/poSource/xsd/<span class="bold">purchaseOrder.xsd</span>"
  ELEMENT "<span class="bold">PurchaseOrder</span>"
  VARRAY "XMLDATA"."ACTIONS"."ACTION"
    STORE AS TABLE <span class="bold">action_table</span> 
                   ((PRIMARY KEY (<span class="bold">NESTED_TABLE_ID</span>, <span class="bold">SYS_NC_ARRAY_INDEX$</span>)))
  VARRAY "XMLDATA"."LINEITEMS"."LINEITEM"
    STORE AS TABLE <span class="bold">lineitem_table</span> 
                   ((PRIMARY KEY (<span class="bold">NESTED_TABLE_ID</span>, <span class="bold">SYS_NC_ARRAY_INDEX$</span>)));
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGEFCIG">
                     <p class="titleinexample">Example 18-14 Creating an XMLType Table for Nested Collections</p><pre class="pre codeblock"><code>CREATE TABLE purchaseorder OF XMLType
  XMLSCHEMA "http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd"
  ELEMENT "PurchaseOrder"
  VARRAY "XMLDATA"."ACTIONS"."ACTION"
    STORE AS TABLE action_table 
                   ((PRIMARY KEY (NESTED_TABLE_ID, SYS_NC_ARRAY_INDEX$)))
                   <span class="bold">VARRAY "XMLDATA"."LINEITEMS"."LINEITEM"</span>
    STORE AS TABLE <span class="bold">lineitem_table</span> 
                   ((PRIMARY KEY (NESTED_TABLE_ID, SYS_NC_ARRAY_INDEX$))
                    <span class="bold">VARRAY "SHIPMENTS"."SHIPMENT"</span>
                      STORE AS TABLE <span class="bold">shipments_table</span>
                                     ((PRIMARY KEY (NESTED_TABLE_ID,
                                                    SYS_NC_ARRAY_INDEX$))));
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-7A85260C-44C1-4DEF-A000-6A66B24F1B71__CEGCEAAF">
                     <p class="titleinexample">Example 18-15 Using DESCRIBE with an XML Schema-Based XMLType Table</p><pre class="oac_no_warn" dir="ltr">DESCRIBE purchaseorder
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
TABLE of SYS.XMLTYPE(XMLSchema
"http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd"
Element "PurchaseOrder") STORAGE Object-relational TYPE "PURCHASEORDER_T"
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="XML-Schema-and-query-basic.html#GUID-5663C810-F20E-4CFE-99D5-96AC7D4081F4" title="An XML schema can be registered as local (visible only to its owner, by default) or global (visible to all database users, by default).">Local and Global XML Schemas</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB0730"></a><div class="props_rev_3"><a id="GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8" name="GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8"></a><h3 id="ADXDB-GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8" class="sect3"><span class="enumeration_section">18.6 </span>Overview of Partitioning XMLType Tables and Columns Stored Object-Relationally
               </h3>
               <div>
                  <p>When you partition an object-relational <code class="codeph">XMLType</code> table or a table with an <code class="codeph">XMLType</code> column that is stored object-relationally and you use list, range, or hash partitioning, any ordered collection tables (OCTs) or out-of-line tables within the data are automatically partitioned accordingly, by default. 
                  </p>
                  <p>This <strong class="term">equipartitioning</strong> means that the partitioning of an OCT or an out-of-line table follows the partitioning scheme of its parent (base) table. There is a corresponding child-table partition for each partition of the base table. A child element is stored in the child-table partition that corresponds to the base-table partition of its parent element.
                  </p>
                  <p>Storage attributes for a base table partition are, by default, also used for the corresponding child-table partitions. You can override these storage attributes for a given child-table partition. </p>
                  <p>Similarly, by default, the name of an OCT partition is the same as its base (parent) table, but you can override this behavior by specifying the name to use. The name of an out-of-line table partition is always the same as the partition of its parent-table (which could be a base table or an OCT).</p>
                  <div class="infoboxnote" id="GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8__GUID-930891E9-0479-40B1-9781-490BED9F80D8">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Equipartitioning of <code class="codeph">XMLType</code> data stored object-relationally is not available in releases prior to Oracle Database 11g Release 1 (11.1).
                           </p>
                        </li>
                        <li>
                           <p>Equipartitioning of <code class="codeph">XMLType</code> data that is stored out of line is not available in releases prior to Oracle Database 11g Release 2 (11.2.0.2). Starting with that release, out-of-line tables are not shared: You cannot create two top-level tables that are based on the same XML schema, if that schema specifies an out-of-line table. 
                           </p>
                        </li>
                     </ul>
                     <p>You can prevent partitioning of OCTs by specifying the keyword <code class="codeph">GLOBAL</code> in a <code class="codeph">CREATE TABLE</code> statement. (Starting with Oracle Database 11g Release 1 (11.1), the default behavior uses keyword <code class="codeph">LOCAL</code>). For information about converting a non-partitioned collection table to a partitioned collection table, see <a href="../vldbg/evolve-nopartition-table.html#VLDBG00302" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a>.
                     </p>
                     <p>You can prevent partitioning of out-of-line tables, and thus allow out-of-line sharing, by turning on event 31178 with level 0x200:</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EVENTS '31178 TRACE NAME CONTEXT FOREVER, LEVEL 0x200'</pre></div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64">Examples of Partitioning XMLType Data Stored Object-Relationally</a><br>You can specify partitioning information for an object-relational <code class="codeph">XMLType</code> base table during either the XML schema registration or the table creation. Examples here illustrate this.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-969A9AAC-8531-48FC-8EB3-67E31EC5ED35">Partition Maintenance for XMLType Data Stored Object-Relationally</a><br>You need not define or maintain child-table partitions manually. When you perform partition maintenance on the base (parent) table, corresponding maintenance is automatically performed on the child tables as well.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8__GUID-A36EF1E8-B614-48E8-B450-BA2652E97C8A">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about creating tables with partitions using keywords <code class="codeph">GLOBAL</code> and <code class="codeph">LOCAL</code></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4631"></a><a id="ADXDB4632"></a><a id="ADXDB4630"></a><div class="props_rev_3"><a id="GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64" name="GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64"></a><h4 id="ADXDB-GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64" class="sect4"><span class="enumeration_section">18.6.1 </span>Examples of Partitioning XMLType Data Stored Object-Relationally
                  </h4>
                  <div>
                     <p>You can specify partitioning information for an object-relational <code class="codeph">XMLType</code> base table during either the XML schema registration or the table creation. Examples here illustrate this.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>During XML schema registration, using XML Schema annotation <code class="codeph">xdb:tableProps</code></p>
                           </li>
                           <li>
                              <p>During table creation using <code class="codeph">CREATE TABLE</code></p>
                           </li>
                        </ul>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHADGCEG">Example 18-16</a> and <a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHABFFHC">Example 18-17</a> illustrate this. These two examples have exactly the same effect. They partition the base <code class="codeph">purchaseorder</code> table using the <code class="codeph">Reference</code> element to specify ranges. They equipartition the child table of line items with respect to the base table.
                        </p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHADGCEG">Example 18-16</a> shows element <code class="codeph">PurchaseOrder</code> from the purchase-order XML schema, annotated to partition the base table and its child table of line items.
                        </p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHABFFHC">Example 18-17</a> specifies the same partitioning as in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHADGCEG">Example 18-16</a>, but it does so during the creation of the base table <code class="codeph">purchaseorder</code>.
                        </p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHADGCEG">Example 18-16</a> and <a href="XML-Schema-and-query-object-relational-storage.html#GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHABFFHC">Example 18-17</a> also show how you can specify object storage options for the individual child-table partitions. In this case, the <code class="codeph">STORAGE</code> clauses specify that extents of size 14M are to be allocated initially for each of the child-table partitions.
                        </p>
                        <div class="infoboxnotealso" id="GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__GUID-F053E303-0072-4F6F-A353-8A183A4D5AE8">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-1CB2213C-C6E8-4BC4-86A3-EFDE51AEBEFD__BABDAGBF">Example A-2</a></p>
                              </li>
                              <li>
                                 <p><a href="../adobj/partitioning-table-that-contain-oracle-objects.html#ADOBJ00608" target="_blank"><span><cite>Oracle Database Object-Relational Developer's Guide</cite></span></a> for more information about partitioning object-relational data
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../vldbg/partition-create-tables-indexes.html#VLDBG1116" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> for more information about partitioning
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHADGCEG">
                        <p class="titleinexample">Example 18-16 Specifying Partitioning Information During XML Schema Registration</p><pre class="oac_no_warn" dir="ltr">&lt;xs:element name="PurchaseOrder" type="PurchaseOrderType"
            xdb:defaultTable="PURCHASEORDER"
            <span class="bold">xdb:tableProps</span> =
              "VARRAY XMLDATA.LINEITEMS.LINEITEM
                 STORE AS TABLE <span class="bold">lineitem_table</span>
                   ((PRIMARY KEY (NESTED_TABLE_ID, SYS_NC_ARRAY_INDEX$)))
                   <span class="bold">PARTITION</span> BY RANGE (XMLDATA.Reference)
                     (<span class="bold">PARTITION p1</span> VALUES LESS THAN (1000)
                        VARRAY XMLDATA.LINEITEMS.LINEITEM
                          <span class="bold">STORE AS TABLE lineitem_p1</span> (<span class="bold">STORAGE (MINEXTENTS 13)</span>),
                      <span class="bold">PARTITION p2</span> VALUES LESS THAN (2000)
                        VARRAY XMLDATA.LINEITEMS.LINEITEM
                          <span class="bold">STORE AS TABLE lineitem_p2</span> (<span class="bold">STORAGE (MINEXTENTS 13)</span>))"/&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-99B0AD73-F9C4-490B-BDDD-E52492E2CD64__BHABFFHC">
                        <p class="titleinexample">Example 18-17 Specifying Partitioning Information During Table Creation</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE purchaseorder OF XMLType
  XMLSCHEMA "http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd"
  ELEMENT "PurchaseOrder"
  VARRAY "XMLDATA"."LINEITEMS"."LINEITEM" STORE AS TABLE <span class="bold">lineitem_table</span>
    ((PRIMARY KEY (NESTED_TABLE_ID, SYS_NC_ARRAY_INDEX$)))
    <span class="bold">PARTITION</span> BY RANGE (XMLDATA.Reference)
      (<span class="bold">PARTITION p1</span> VALUES LESS THAN (1000)
         VARRAY "XMLDATA"."LINEITEMS"."LINEITEM" <span class="bold">STORE AS TABLE lineitem_p1</span>
           (<span class="bold">STORAGE (MINEXTENTS 13)</span>),
       <span class="bold">PARTITION p2</span> VALUES LESS THAN (2000)
         VARRAY  "XMLDATA"."LINEITEMS"."LINEITEM" <span class="bold">STORE AS TABLE lineitem_p2</span>
           (<span class="bold">STORAGE (MINEXTENTS 13)</span>));
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8" title="When you partition an object-relational XMLType table or a table with an XMLType column that is stored object-relationally and you use list, range, or hash partitioning, any ordered collection tables (OCTs) or out-of-line tables within the data are automatically partitioned accordingly, by default.">Overview of Partitioning XMLType Tables and Columns Stored Object-Relationally</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4633"></a><div class="props_rev_3"><a id="GUID-969A9AAC-8531-48FC-8EB3-67E31EC5ED35" name="GUID-969A9AAC-8531-48FC-8EB3-67E31EC5ED35"></a><h4 id="ADXDB-GUID-969A9AAC-8531-48FC-8EB3-67E31EC5ED35" class="sect4"><span class="enumeration_section">18.6.2 </span>Partition Maintenance for XMLType Data Stored Object-Relationally
                  </h4>
                  <div>
                     <p>You need not define or maintain child-table partitions manually. When you perform partition maintenance on the base (parent) table, corresponding maintenance is automatically performed on the child tables as well.</p>
                     <p>There are a few exceptions to the general rule that you perform partition maintenance only on the base table. In the following cases you perform maintenance on a child table:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Modify the <span class="italic">default</span> physical storage attributes of a collection partition
                           </p>
                        </li>
                        <li>
                           <p>Modify the physical storage attributes of a collection partition</p>
                        </li>
                        <li>
                           <p>Move a collection partition to a different segment, possibly in a different tablespace</p>
                        </li>
                        <li>
                           <p>Rename a collection partition</p>
                        </li>
                     </ul>
                     <p>For example, if you change the tablespace of a base table, that change is not cascaded to its child-table partitions. You must manually use <code class="codeph">ALTER TABLE MOVE PARTITION</code> on the child-table partitions to change their tablespace.
                     </p>
                     <p>Other than those exceptional operations, you perform all partition maintenance on the base table only. This includes operations such as adding, dropping, and splitting a partition.</p>
                     <p>Online partition redefinition is also supported for child tables. You can copy unpartitioned child tables to partitioned child tables during online redefinition of a base table. You typically specify parameter values <code class="codeph">copy_indexes =&gt; 0</code> and <code class="codeph">copy_constraints =&gt; false</code> for PL/SQL procedure <code class="codeph">DBMS_REDEFINITION.copy_table_dependents</code>, to protect the indexes and constraints of the newly defined child tables.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-969A9AAC-8531-48FC-8EB3-67E31EC5ED35__GUID-95B8F30D-DBA3-4957-9D05-15A000C4815E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about SQL statement <code class="codeph">ALTER TABLE</code></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_REDEFINITION.html#ARPLS042" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about online partition redefinition using PL/SQL package <code class="codeph">DBMS_REDEFINITION</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-8713E2AD-0D5F-4076-A2DE-BB0ECEFBFEA8" title="When you partition an object-relational XMLType table or a table with an XMLType column that is stored object-relationally and you use list, range, or hash partitioning, any ordered collection tables (OCTs) or out-of-line tables within the data are automatically partitioned accordingly, by default.">Overview of Partitioning XMLType Tables and Columns Stored Object-Relationally</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4111"></a><a id="ADXDB4513"></a><div class="props_rev_3"><a id="GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA" name="GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA"></a><h3 id="ADXDB-GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA" class="sect3"><span class="enumeration_section">18.7 </span>Specification of Relational Constraints on XMLType Tables and Columns
               </h3>
               <div>
                  <p>For <code class="codeph">XMLType</code> data stored object-relationally, you can specify typical relational constraints for elements and attributes that occur only once in an XML document. 
                  </p>
                  <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA__BABGHJIA">Example 18-18</a> defines uniqueness and foreign-key constraints on <code class="codeph">XMLType</code> table <code class="codeph">purchaseorder</code> in standard database schema <code class="codeph">OE</code>. 
                  </p>
                  <p>For <code class="codeph">XMLType</code> data that is stored object-relationally, such as that in table <code class="codeph">OE.purchaseorder</code>, constraints must be specified in terms of object attributes of the SQL data types that are used to manage the XML content.
                  </p>
                  <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA__BABGHJIA">Example 18-18</a> is similar to <a href="how-to-use-XML-DB.html#GUID-B08A78A0-351B-431E-8F81-E02FFF0357D1__CHDGIABF">Example 3-8</a>, which defines a uniqueness constraint on a binary XML table. But in addition, <a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA__BABGHJIA">Example 18-18</a> defines a foreign-key constraint that requires element <code class="codeph">User</code> of each <code class="codeph">OE.purchaseorder</code> document to be the e-mail address of an employee that is in table <code class="codeph">employees</code> of standard database schema <code class="codeph">HR</code>.
                  </p>
                  <p>Just as for <a href="how-to-use-XML-DB.html#GUID-B08A78A0-351B-431E-8F81-E02FFF0357D1__CHDGIABF">Example 3-8</a>, the uniqueness constraint <code class="codeph">reference_is_unique</code> of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA__BABGHJIA">Example 18-18</a> ensures the uniqueness of element <code class="codeph">Reference</code> across all documents stored in the table. The foreign key constraint <code class="codeph">user_is_valid</code> ensures that the value of element <code class="codeph">User</code> corresponds to a value in column <code class="codeph">email</code> of table <code class="codeph">HR.employees</code>.
                  </p>
                  <p>The text node associated with element <code class="codeph">Reference</code> in the XML document <code class="codeph">DuplicateReference.xml</code> contains the same value as the corresponding node in XML document <code class="codeph">PurchaseOrder.xml</code>. Attempting to store both documents in Oracle XML&nbsp;DB thus violates the constraint <code class="codeph">reference_is_unique</code>. 
                  </p>
                  <p>The text node associated with element <code class="codeph">User</code> in XML document <code class="codeph">InvalidUser.xml</code> contains the value <code class="codeph">HACKER</code>. There is no entry in table <code class="codeph">HR.employees</code> where the value of column <code class="codeph">email</code> is <code class="codeph">HACKER</code>. Attempting to store this document in Oracle XML&nbsp;DB violates the foreign-key constraint <code class="codeph">user_is_valid</code>. 
                  </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA__GUID-EC2F231E-5291-43A3-8C54-CC4C36F6B14E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="how-to-use-XML-DB.html#GUID-B08A78A0-351B-431E-8F81-E02FFF0357D1" title="You can use SQL constraints and database triggers to ensure data-integrity properties such as uniqueness and foreign-key relations.">Enforcing Referential Integrity Using SQL Constraints</a>, and <a href="how-to-use-XML-DB.html#GUID-B08A78A0-351B-431E-8F81-E02FFF0357D1__CHDGIABF">Example 3-8</a> in particular
                              </p>
                           </li>
                           <li>
                              <p><a href="how-to-use-XML-DB.html#GUID-8320CE79-5536-4252-BAF4-746692EBA596" title="You can combine the power of SQL and XML with the ability of the database to enforce rules.">Enforcing XML Data Integrity Using the Database</a> for information about defining contraints for <code class="codeph">XMLType</code> data stored as binary XML
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA__BABGHJIA">
                     <p class="titleinexample">Example 18-18 Integrity Constraints and Triggers for an XMLType Table Stored Object-Relationally</p><pre class="pre codeblock"><code>ALTER TABLE purchaseorder
  ADD CONSTRAINT reference_is_unique
  UNIQUE (<span class="bold">XMLDATA."REFERENCE"</span>);
 
ALTER TABLE purchaseorder
  ADD CONSTRAINT user_is_valid
  FOREIGN KEY (<span class="bold">XMLDATA."USERID"</span>) REFERENCES hr.employees(email);
 
INSERT INTO purchaseorder
  VALUES (XMLType(bfilename('XMLDIR', 'purchaseOrder.xml'),
                  nls_charset_id('AL32UTF8')));
 
INSERT INTO purchaseorder
  VALUES (XMLType(bfilename('XMLDIR', 'DuplicateReference.xml'),
                  nls_charset_id('AL32UTF8')));

INSERT INTO purchaseorder
*
ERROR at line 1:
<span class="bold">ORA-00001: unique constraint (QUINE.REFERENCE_IS_UNIQUE) violated</span>
 
INSERT INTO purchaseorder
  VALUES (XMLType(bfilename('XMLDIR', 'InvalidUser.xml'),
                  nls_charset_id('AL32UTF8')));

INSERT INTO purchaseorder
*
ERROR at line 1:
<span class="bold">ORA-02291: integrity constraint (QUINE.USER_IS_VALID) violated - parent key not</span>
 <span class="bold">found</span>
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541">Adding Unique Constraints to the Parent Element of an Attribute</a><br>To create constraints on elements that can occur more than once, store the varray as an ordered collection table (OCT). You can then create constraints on the OCT. You might, for example, want to create a unique key based on an attribute of an element that repeats itself (a collection). 
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541" title="To create constraints on elements that can occur more than once, store the varray as an ordered collection table (OCT). You can then create constraints on the OCT. You might, for example, want to create a unique key based on an attribute of an element that repeats itself (a collection).">Adding Unique Constraints to the Parent Element of an Attribute</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4617"></a><a id="ADXDB4616"></a><div class="props_rev_3"><a id="GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541" name="GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541"></a><h4 id="ADXDB-GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541" class="sect4"><span class="enumeration_section">18.7.1 </span>Adding Unique Constraints to the Parent Element of an Attribute
                  </h4>
                  <div>
                     <p>To create constraints on elements that can occur more than once, store the varray as an ordered collection table (OCT). You can then create constraints on the OCT. You might, for example, want to create a unique key based on an attribute of an element that repeats itself (a collection). </p>
                     <div class="section">
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541__BABIGCIH">Example 18-19</a> shows an XML schema that lets attribute <code class="codeph">No</code> of element <code class="codeph">&lt;PhoneNumber&gt;</code> appear more than once. The example shows how you can add a unique constraint to ensure that the same phone number cannot be repeated within a given instance document.
                        </p>
                        <p>The constraint in this example applies to each collection, and not across all instances. This is achieved by creating a concatenated index with the collection id column. To apply the constraint across all collections of all instance documents, omit the collection id column.</p>
                        <div class="infoboxnote" id="GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541__GUID-9970F054-26BA-4C81-88F2-5F13C39B9DFA">
                           <p class="notep1">Note:</p>
                           <p>You can create only a <span class="italic">functional</span> constraint as a unique or foreign key constraint on <code class="codeph">XMLType</code> data stored as binary XML.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D8FB50DB-D87D-4F1F-99E1-D6D66EAC8541__BABIGCIH">
                        <p class="titleinexample">Example 18-19 Adding a Unique Constraint to the Parent Element of an Attribute</p><pre class="pre codeblock"><code>BEGIN DBMS_XMLSCHEMA.registerSchema(
  SCHEMAURL =&gt; 'emp.xsd',
  SCHEMADOC =&gt; '&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
                           xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
                  &lt;xs:element name="Employee" xdb:SQLType="EMP_TYPE"&gt;
                    &lt;xs:complexType&gt;
                      &lt;xs:sequence&gt;
                        &lt;xs:element name="EmployeeId" type="xs:positiveInteger"/&gt;
                        &lt;xs:element name="<span class="bold">PhoneNumber</span>" maxOccurs="10"/&gt;
                          &lt;xs:complexType&gt;
                            &lt;xs:attribute name="<span class="bold">No</span>" type="xs:integer"/&gt;
                          &lt;/xs:complexType&gt;
                        &lt;/xs:element&gt;
                      &lt;/xs:sequence&gt;
                    &lt;/xs:complexType&gt;
                  &lt;/xs:element&gt;
                &lt;/xs:schema&gt;',
   LOCAL     =&gt; FALSE, 
   GENTYPES  =&gt; FALSE); 
END;/

PL/SQL procedure successfully completed.

CREATE TABLE emp_tab OF XMLType
  XMLSCHEMA "emp.xsd" ELEMENT "Employee"
  VARRAY XMLDATA."<span class="bold">PhoneNumber</span>" STORE AS TABLE phone_tab;

Table created.
</code></pre><pre class="pre codeblock"><code>ALTER TABLE phone_tab ADD <span class="bold">UNIQUE</span> (NESTED_TABLE_ID, "<span class="bold">No</span>");

Table altered.
</code></pre><pre class="pre codeblock"><code>INSERT INTO emp_tab 
  VALUES(XMLType('&lt;Employee&gt;
                    &lt;EmployeeId&gt;1234&lt;/EmployeeId&gt;
                    &lt;PhoneNumber <span class="bold">No="1234"</span>/&gt;
                    &lt;PhoneNumber <span class="bold">No="2345"</span>/&gt;
                  &lt;/Employee&gt;').createSchemaBasedXML('emp.xsd'));

1 row created.
</code></pre><pre class="pre codeblock"><code>INSERT INTO emp_tab 
  VALUES(XMLType('&lt;Employee&gt;
                    &lt;EmployeeId&gt;3456&lt;/EmployeeId&gt;
                    &lt;PhoneNumber <span class="bold">No="4444"</span>/&gt;
                    &lt;PhoneNumber <span class="bold">No="4444"</span>/&gt;
                  &lt;/Employee&gt;').createSchemaBasedXML('emp.xsd'));
</code></pre><p>This returns the expected result:</p><pre class="pre codeblock"><code>*
ERROR at line 1:
ORA-00001: <span class="bold">unique constraint</span> (SCOTT.SYS_C002136) <span class="bold">violated</span>
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-EEF1789B-F8B0-4371-96FB-40D0547060BA" title="For XMLType data stored object-relationally, you can specify typical relational constraints for elements and attributes that occur only once in an XML document.">Specification of Relational Constraints on XMLType Tables and Columns</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB6367"></a><div class="props_rev_3"><a id="GUID-0EF2C8B6-927A-4F50-8126-47CD566A6B92" name="GUID-0EF2C8B6-927A-4F50-8126-47CD566A6B92"></a><h3 id="ADXDB-GUID-0EF2C8B6-927A-4F50-8126-47CD566A6B92" class="sect3"><span class="enumeration_section">18.8 </span>Out-Of-Line Storage of XMLType Data
               </h3>
               <div>
                  <p>By default, when <code class="codeph">XMLType</code> data is stored object-relationally a child element is mapped to an embedded SQL object attribute. Sometimes better performance can be obtained by storing some <code class="codeph">XMLType</code> data out of line. Use XML schema annotation <code class="codeph">xdb:SQLInline</code> to do this.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5">Setting Annotation Attribute xdb:SQLInline to false for Out-Of-Line Storage</a><br>Set XML schema annotation <code class="codeph">xdb:SQLInline</code> to <code class="codeph">false</code> to store an XML fragment out of line. The element is mapped to a SQL object type with an embedded <code class="codeph">REF</code> attribute, which points to another <code class="codeph">XMLType</code> instance that is stored out of line and that corresponds to the XML fragment.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-37820174-3776-4B5D-B96E-CA2515E7016C">Storing Collections in Out-Of-Line Tables</a><br>You can store collection items out of line. Instead of a single <code class="codeph">REF</code> column, the parent element contains a varray of <code class="codeph">REF</code> values that point to the collection members. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4619"></a><a id="ADXDB4620"></a><a id="ADXDB5882"></a><a id="ADXDB4621"></a><a id="ADXDB4618"></a><div class="props_rev_3"><a id="GUID-AC221997-9F02-423E-9F39-BA02046763B5" name="GUID-AC221997-9F02-423E-9F39-BA02046763B5"></a><h4 id="ADXDB-GUID-AC221997-9F02-423E-9F39-BA02046763B5" class="sect4"><span class="enumeration_section">18.8.1 </span>Setting Annotation Attribute xdb:SQLInline to false for Out-Of-Line Storage
                  </h4>
                  <div>
                     <p>Set XML schema annotation <code class="codeph">xdb:SQLInline</code> to <code class="codeph">false</code> to store an XML fragment out of line. The element is mapped to a SQL object type with an embedded <code class="codeph">REF</code> attribute, which points to another <code class="codeph">XMLType</code> instance that is stored out of line and that corresponds to the XML fragment.
                     </p>
                     <div class="section">
                        <p>By default, a child XML element is mapped to an embedded SQL object attribute when <code class="codeph">XMLType</code> data is stored object-relationally. However, there are scenarios where out-of-line storage offers better performance. In such cases, set XML schema annotation (attribute) <code class="codeph">xdb:SQLInline</code> to <code class="codeph">false</code>, so Oracle XML&nbsp;DB generates a SQL object type with an embedded <code class="codeph">REF</code> attribute. The <code class="codeph">REF</code> points to another <code class="codeph">XMLType</code> instance that is stored out of line and that corresponds to the XML fragment. Default <code class="codeph">XMLType</code> tables are also created, to store the out-of-line fragments.
                        </p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5__I1030591">Figure 18-2</a> illustrates the mapping of <code class="codeph">complexType</code> to SQL for out-of-line storage.
                        </p>
                        <div class="figure" id="GUID-AC221997-9F02-423E-9F39-BA02046763B5__I1030591">
                           <p class="titleinfigure">Figure 18-2 Mapping complexType to SQL for Out-Of-Line Storage</p><img src="img/adxdb010.gif" width="373" alt="Description of Figure 18-2 follows" title="Description of Figure 18-2 follows" longdesc="img_text/adxdb010.html"><br><a href="img_text/adxdb010.html">Description of "Figure 18-2 Mapping complexType to SQL for Out-Of-Line Storage"</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnote" id="GUID-AC221997-9F02-423E-9F39-BA02046763B5__GUID-4D82F318-C491-4EF5-9099-BB6E1FDE7798">
                           <p class="notep1">Note:</p>
                           <p>Starting with Oracle Database&nbsp;11g Release 2 (11.2.0.2), you can create only <span class="italic">one</span> <code class="codeph">XMLType</code> table that uses an XML schema that results in <code class="codeph">an out-of-line table</code>. An error is raised if you try to create a second table that uses the same XML schema.
                           </p>
                        </div>
                        <p>In <a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5__CHDCEIGC">Example 18-20</a>, attribute <code class="codeph">xdb:SQLInline</code> of element <code class="codeph">Addr</code> has value <code class="codeph">false</code>. The resulting SQL object type, <code class="codeph">obj_t2</code>, has an <code class="codeph">XMLType</code> column with an embedded <code class="codeph">REF</code> object attribute. The <code class="codeph">REF</code> attribute points to an <code class="codeph">XMLType</code> instance of SQL object type <code class="codeph">obj_t1</code> in table <code class="codeph">addr_tab</code>. Table <code class="codeph">addr_tab</code> is stored out of line. It has columns <code class="codeph">street</code> and <code class="codeph">city</code>.
                        </p>
                        <p>When registering this XML schema, Oracle XML&nbsp;DB generates the <code class="codeph">XMLType</code> tables and types shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5__BHAHAIEC">Example 18-21</a>.
                        </p>
                        <p>Table <code class="codeph">emp_tab</code> holds all of the employee information, and it contains an object reference that points to the address information that is stored out of line, in table <code class="codeph">addr_tab</code>.
                        </p>
                        <p>An advantage of this model is that it lets you query the out-of-line table (<code class="codeph">addr_tab</code>) directly, to look up address information. <a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5__CHDDDBCI">Example 18-22</a> illustrates querying table <code class="codeph">addr_tab</code> directly to obtain the distinct city information for all employees.
                        </p>
                        <p>The disadvantage of this storage model is that, in order to obtain the entire <code class="codeph">Employee</code> element, you must access an additional table for the address.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-AC221997-9F02-423E-9F39-BA02046763B5__CHDCEIGC">
                        <p class="titleinexample">Example 18-20 Setting SQLInline to False for Out-Of-Line Storage</p><pre class="oac_no_warn" dir="ltr">DECLARE
  doc VARCHAR2(3000) :=
    '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"                     
             targetNamespace="http://www.oracle.com/emp.xsd"       
             xmlns:emp="http://www.oracle.com/emp.xsd"       
             xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;complexType name="EmpType" xdb:SQLType="EMP_T"&gt;
         &lt;sequence&gt;
           &lt;element name="Name" type="string"/&gt;
           &lt;element name="Age" type="decimal"/&gt;
           &lt;element name="Addr" 
                    <span class="bold">xdb:SQLInline="false"</span>
                    xdb:defaultTable="ADDR_TAB"&gt;
             &lt;complexType xdb:SQLType="ADDR_T"&gt;
               &lt;sequence&gt;
                 &lt;element name="Street" type="string"/&gt;
                 &lt;element name="City" type="string"/&gt;
               &lt;/sequence&gt;
             &lt;/complexType&gt;
           &lt;/element&gt;
         &lt;/sequence&gt;
       &lt;/complexType&gt;
       &lt;element name="Employee" type="emp:EmpType"
                xdb:defaultTable="EMP_TAB"/&gt;
     &lt;/schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL        =&gt; 'emp.xsd',
    SCHEMADOC        =&gt; doc,
    ENABLE_HIERARCHY =&gt; DBMS_XMLSCHEMA.ENABLE_HIERARCHY_NONE);
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AC221997-9F02-423E-9F39-BA02046763B5__BHAHAIEC">
                        <p class="titleinexample">Example 18-21 Generated XMLType Tables and Types</p><pre class="oac_no_warn" dir="ltr">DESCRIBE emp_tab
 Name                          Null?    Type
 ----------------------------- -------- ----------------------------------------------------------
TABLE of SYS.XMLTYPE(XMLSchema "emp.xsd" Element "Employee") STORAGE Object-relational TYPE "EMP_T"
 
DESCRIBE addr_tab
 Name                          Null?    Type
 ----------------------------- -------- --------------------------------------------------------
TABLE of SYS.XMLTYPE(XMLSchema "emp.xsd" Element "Addr") STORAGE Object-relational TYPE "ADDR_T"

DESCRIBE emp_t
 emp_t is NOT FINAL
 Name                          Null?    Type
 ----------------------------- -------- --------------------
 SYS_XDBPD$                             XDB.XDB$RAW_LIST_T
 Name                                   VARCHAR2(4000 CHAR)
 Age                                    NUMBER
 Addr                                   <span class="bold">REF OF XMLTYPE</span>

DESCRIBE addr_t
 Name                          Null?    Type
 ----------------------------- -------- --------------------
 SYS_XDBPD$                             XDB.XDB$RAW_LIST_T
 Street                                 VARCHAR2(4000 CHAR)
 City                                   VARCHAR2(4000 CHAR)
 </pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AC221997-9F02-423E-9F39-BA02046763B5__CHDDDBCI">
                        <p class="titleinexample">Example 18-22 Querying an Out-Of-Line Table</p><pre class="oac_no_warn" dir="ltr">INSERT INTO emp_tab
  VALUES
    (XMLType('&lt;x:Employee
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:x="http://www.oracle.com/emp.xsd"
                 xsi:schemaLocation="http://www.oracle.com/emp.xsd emp.xsd"&gt;
                &lt;Name&gt;Abe Bee&lt;/Name&gt;
                &lt;Age&gt;22&lt;/Age&gt;
                &lt;Addr&gt;
                  &lt;Street&gt;A Street&lt;/Street&gt;
                  &lt;City&gt;San Francisco&lt;/City&gt;
                &lt;/Addr&gt;
              &lt;/x:Employee&gt;'));
 
INSERT INTO emp_tab
  VALUES
    (XMLType('&lt;x:Employee
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:x="http://www.oracle.com/emp.xsd"
                 xsi:schemaLocation="http://www.oracle.com/emp.xsd emp.xsd"&gt;
                &lt;Name&gt;Cecilia Dee&lt;/Name&gt;
                &lt;Age&gt;23&lt;/Age&gt;
                &lt;Addr&gt;
                  &lt;Street&gt;C Street&lt;/Street&gt;
                  &lt;City&gt;Redwood City&lt;/City&gt;
                &lt;/Addr&gt;
              &lt;/x:Employee&gt;'));
<span class="bold">. . .</span>
</pre><pre class="oac_no_warn" dir="ltr">SELECT DISTINCT XMLCast(XMLQuery('/Addr/City' PASSING OBJECT_VALUE AS "." 
                                              RETURNING CONTENT)
                       AS VARCHAR2(20))
  FROM addr_tab;

CITY
-------------
Redwood City
San Francisco
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0EF2C8B6-927A-4F50-8126-47CD566A6B92" title="By default, when XMLType data is stored object-relationally a child element is mapped to an embedded SQL object attribute. Sometimes better performance can be obtained by storing some XMLType data out of line. Use XML schema annotation xdb:SQLInline to do this.">Out-Of-Line Storage of XMLType Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4626"></a><a id="ADXDB5883"></a><a id="ADXDB4627"></a><a id="ADXDB4628"></a><a id="ADXDB4629"></a><a id="ADXDB4625"></a><div class="props_rev_3"><a id="GUID-37820174-3776-4B5D-B96E-CA2515E7016C" name="GUID-37820174-3776-4B5D-B96E-CA2515E7016C"></a><h4 id="ADXDB-GUID-37820174-3776-4B5D-B96E-CA2515E7016C" class="sect4"><span class="enumeration_section">18.8.2 </span>Storing Collections in Out-Of-Line Tables
                  </h4>
                  <div>
                     <p>You can store collection items out of line. Instead of a single <code class="codeph">REF</code> column, the parent element contains a varray of <code class="codeph">REF</code> values that point to the collection members. 
                     </p>
                     <div class="section">
                        <p>For example, suppose that there is a list of addresses for each employee and that list is mapped to out-of-line storage, as shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDJHBIE">Example 18-23</a>.
                        </p>
                        <p>During registration of this XML schema, Oracle XML&nbsp;DB generates tables <code class="codeph">emp_tab</code> and <code class="codeph">addr_tab</code> and types <code class="codeph">emp_t</code> and <code class="codeph">addr_t</code>, just as in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-AC221997-9F02-423E-9F39-BA02046763B5__CHDCEIGC">Example 18-20</a>. However, this time, type <code class="codeph">emp_t</code> contains a varray of <code class="codeph">REF</code> values that point to addresses, instead of a single <code class="codeph">REF</code> attribute, as shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-37820174-3776-4B5D-B96E-CA2515E7016C__BHAJFCCG">Example 18-24</a>.
                        </p>
                        <p>The varray of <code class="codeph">REF</code> values is stored out of line, in an intermediate table. That is, in addition to creating the tables and types just mentioned, XML schema registration also creates the intermediate table that stores the list of <code class="codeph">REF</code> values. This table has a system-generated name, but you can rename it. That can be useful, for example, in order to create an index on it.
                        </p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDDAJBJ">Example 18-26</a> shows a query that selects the names of all San Francisco-based employees and the streets in which they live. The example queries the address table on element <code class="codeph">City</code>, and joins back with the employee table. The explain-plan fragment shown indicates a join between tables <code class="codeph">emp_tab_reflist</code> and <code class="codeph">emp_tab</code>.
                        </p>
                        <p>To improve performance you can create an index on the <code class="codeph">REF</code> values in the intermediate table, <code class="codeph">emp_tab_reflist</code>. This lets Oracle XML&nbsp;DB query the address table, obtain an object reference (<code class="codeph">REF</code>) to the relevant row, join it with the intermediate table storing the list of <code class="codeph">REF</code> values, and join that table back with the employee table.
                        </p>
                        <p>You can create an index on <code class="codeph">REF</code> values only if the <code class="codeph">REF</code> is <span class="italic">scoped</span> or has a referential constraint. A scoped <code class="codeph">REF</code> column stores pointers only to objects in a particular table. The <code class="codeph">REF</code> values in table <code class="codeph">emp_tab_reflist</code> point only to objects in table <code class="codeph">addr_tab</code>, so you can create a scope constraint and an index on the <code class="codeph">REF</code> column, as shown in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDIAFAE">Example 18-27</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDJHBIE">
                        <p class="titleinexample">Example 18-23 Storing a Collection Out of Line</p><pre class="pre codeblock"><code>DECLARE
  doc VARCHAR2(3000) :=
    '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
             targetNamespace="http://www.oracle.com/emp.xsd"
             xmlns:emp="http://www.oracle.com/emp.xsd"
             xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;complexType name="EmpType" xdb:SQLType="EMP_T"&gt;
         &lt;sequence&gt;
           &lt;element name="Name" type="string"/&gt;
           &lt;element name="Age" type="decimal"/&gt;
           &lt;element name="Addr" <span class="bold">xdb:SQLInline="false"</span>
                    <span class="bold">maxOccurs="unbounded"</span> xdb:defaultTable="ADDR_TAB"&gt;
             &lt;complexType xdb:SQLType="ADDR_T"&gt;
               &lt;sequence&gt;
                 &lt;element name="Street" type="string"/&gt;
                 &lt;element name="City" type="string"/&gt;
               &lt;/sequence&gt;
             &lt;/complexType&gt;
           &lt;/element&gt;
         &lt;/sequence&gt;
       &lt;/complexType&gt;
       &lt;element name="Employee" type="emp:EmpType"
                xdb:defaultTable="EMP_TAB"/&gt;
     &lt;/schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL        =&gt; 'emp.xsd',
    SCHEMADOC        =&gt; doc,
    ENABLE_HIERARCHY =&gt; DBMS_XMLSCHEMA.ENABLE_HIERARCHY_NONE);
END;
/
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-37820174-3776-4B5D-B96E-CA2515E7016C__BHAJFCCG">
                        <p class="titleinexample">Example 18-24 Generated Out-Of-Line Collection Type</p><pre class="pre codeblock"><code>DESCRIBE emp_t
 emp_t is NOT FINAL
 Name                                   Null?    Type
 -------------------------------------- -------- --------------------------
 SYS_XDBPD$                                      XDB.XDB$RAW_LIST_T
 Name                                            VARCHAR2(4000 CHAR)
 Age                                             NUMBER
 Addr                                            <span class="bold">XDB.XDB$XMLTYPE_REF_LIST_T</span>
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-37820174-3776-4B5D-B96E-CA2515E7016C__GUID-F7F6B2D2-A3B0-4392-8A56-421BA1A88013">
                        <p class="titleinexample">Example 18-25 Renaming an Intermediate Table of REF Values</p><pre class="pre codeblock"><code>DECLARE
  gen_name VARCHAR2 (4000);
BEGIN
  SELECT TABLE_NAME INTO gen_name FROM USER_NESTED_TABLES
    WHERE PARENT_TABLE_NAME = 'EMP_TAB';
  EXECUTE IMMEDIATE 'RENAME "' || gen_name || '"TO <span class="bold">emp_tab_reflist</span>';
END;
/
 
DESCRIBE <span class="bold">emp_tab_reflist</span>
 Name                    Null?    Type
 ----------------------- -------- ----------------
 COLUMN_VALUE                     <span class="bold">REF OF XMLTYPE</span>
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDDAJBJ">
                        <p class="titleinexample">Example 18-26 XPath Rewrite for an Out-Of-Line Collection</p><pre class="pre codeblock"><code>SELECT em.name, ad.street
  FROM emp_tab,
       XMLTable(XMLNAMESPACES ('http://www.oracle.com/emp.xsd' AS "x"),
                '/x:Employee' PASSING OBJECT_VALUE
                COLUMNS name   VARCHAR2(20) PATH 'Name') em,
       XMLTable(XMLNAMESPACES ('http://www.oracle.com/emp.xsd' AS "x"),
                '/x:Employee/Addr' PASSING OBJECT_VALUE
                COLUMNS street VARCHAR2(20) PATH 'Street',
                        city   VARCHAR2(20) PATH 'City') ad
  WHERE ad.city = 'San Francisco';
 
NAME                 STREET
-------------------- --------------------
Abe Bee              A Street
Eve Fong             E Street
George Hu            G Street
Iris Jones           I Street
Karl Luomo           K Street
Marina Namur         M Street
Omar Pinano          O Street
Quincy Roberts       Q Street
 
8 rows selected.
</code></pre><pre class="oac_no_warn" dir="ltr">|   4 |    TABLE ACCESS FULL         | EMP_TAB_REFLIST |    32 |   640 |     2   (0)| 00:00:01 |
|   5 |   TABLE ACCESS BY INDEX ROWID| EMP_TAB         |     1 |    29 |     1   (0)| 00:00:01 |
|*  6 |    INDEX UNIQUE SCAN         | SYS_C005567     |     1 |       |     0   (0)| 00:00:01 |
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDIAFAE">
                        <p class="titleinexample">Example 18-27 XPath Rewrite for an Out-Of-Line Collection, with Index on REFs</p><pre class="pre codeblock"><code>ALTER TABLE emp_tab_reflist <span class="bold">ADD SCOPE FOR</span> (COLUMN_VALUE) IS addr_tab;
CREATE INDEX reflist_idx ON emp_tab_reflist (COLUMN_VALUE);
</code></pre><p>The explain-plan fragment for the same query as in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-37820174-3776-4B5D-B96E-CA2515E7016C__CHDDAJBJ">Example 18-26</a> shows that index <code class="codeph">reflist_idx</code> is picked up.
                        </p><pre class="pre codeblock"><code>|   4 |    TABLE ACCESS BY INDEX ROWID| EMP_TAB_REFLIST |     1 |    20 |     1   (0)| 00:00:01 |
|*  5 |     INDEX RANGE SCAN          | <span class="bold">REFLIST_IDX</span>     |     1 |       |     0   (0)| 00:00:01 |
|   6 |   TABLE ACCESS BY INDEX ROWID | EMP_TAB         |       |       |            |          |
|*  7 |    INDEX UNIQUE SCAN          | SYS_C005567     |     1 |       |     0   (0)| 00:00:01 |
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-0EF2C8B6-927A-4F50-8126-47CD566A6B92" title="By default, when XMLType data is stored object-relationally a child element is mapped to an embedded SQL object attribute. Sometimes better performance can be obtained by storing some XMLType data out of line. Use XML schema annotation xdb:SQLInline to do this.">Out-Of-Line Storage of XMLType Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB6368"></a><div class="props_rev_3"><a id="GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" name="GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE"></a><h3 id="ADXDB-GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" class="sect3"><span class="enumeration_section">18.9 </span>Considerations for Working with Complex or Large XML Schemas
               </h3>
               <div>
                  <p>XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D">Circular and Cyclical Dependencies Among XML Schemas</a><br>The W3C XML Schema Recommendation lets <code class="codeph">complexTypes</code> and global elements contain recursive references. This kind of structure allows for instance documents where the element in question can appear an infinite number of times in a recursive hierarchy. 
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C">Support for Recursive Schemas</a><br>A <code class="codeph">REF</code> to a recursive structure in an out-of-line table can make it difficult to rewrite XPath queries, because it is not known at compile time how deep the structure is. To enable XPath rewrite, a <code class="codeph">DOCID</code> column points back to the root document in any recursive structure.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-80571C92-AB92-40F6-B067-01E228534C9D">XML Fragments Can Be Mapped to Large Objects (LOBs)</a><br>You can specify the&nbsp;SQL data type to use for a complex element as being&nbsp;<code class="codeph">CLOB</code>&nbsp;or&nbsp;<code class="codeph">BLOB</code>.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-5F470098-54C0-4FC6-8E7B-732487497F90">ORA-01792 and ORA-04031: Issues with Large XML Schemas</a><br>Errors <code class="codeph">ORA-01792</code> and <code class="codeph">ORA-04031</code> can be raised when you work with large or complex XML schemas. You can encounter them when you register an XML schema or you create a table that is based on a global element defined by an XML schema.
                     </li>
                     <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-32930A3C-AFD4-4950-94B6-B26ACAFBC70D">Considerations for Loading and Retrieving Large Documents with Collections</a><br>Oracle XML&nbsp;DB configuration file <code class="codeph">xdbconfig.xml</code> has parameters that control the amount of memory used by the loading operation: <code class="codeph">xdbcore-loadableunit-size</code> and <code class="codeph">xdbcore-xobmem-bound</code>.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4656"></a><a id="ADXDB4655"></a><div class="props_rev_3"><a id="GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D" name="GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D"></a><h4 id="ADXDB-GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D" class="sect4"><span class="enumeration_section">18.9.1 </span>Circular and Cyclical Dependencies Among XML Schemas
                  </h4>
                  <div>
                     <p>The W3C XML Schema Recommendation lets <code class="codeph">complexTypes</code> and global elements contain recursive references. This kind of structure allows for instance documents where the element in question can appear an infinite number of times in a recursive hierarchy. 
                     </p>
                     <p>For example, a <code class="codeph">complexType</code> definition can <span class="italic">contain</span> an element based on that same <code class="codeph">complexType</code>, or a global element can contain a reference to itself. In both cases the reference can be direct or indirect. 
                     </p>
                     <div class="example" id="GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D__BABBFFDC">
                        <p class="titleinexample">Example 18-28 An XML Schema with Circular Dependency</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:xdb="http://xmlns.oracle.com/xdb" 
           elementFormDefault="qualified" attributeFormDefault="unqualified"&gt;
  &lt;xs:element name="person" type="personType" xdb:defaultTable="PERSON_TABLE"/&gt;
  &lt;xs:complexType name="<span class="bold">personType</span>" xdb:SQLType="PERSON_T"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="descendant" type="<span class="bold">personType</span>" minOccurs="0"  
                  maxOccurs="unbounded" xdb:SQLName="DESCENDANT"
                  xdb:defaultTable="DESCENDANT_TABLE"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="personName" use="required" xdb:SQLName="PERSON_NAME"&gt; 
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base="xs:string"&gt;
          &lt;xs:maxLength value="20"/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
</code></pre><p>The XML schema in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D__BABBFFDC">Example 18-28</a> includes a circular dependency. The <code class="codeph">complexType</code> <code class="codeph">personType</code> consists of a <code class="codeph">personName</code> attribute and a collection of <code class="codeph">descendant</code> elements. The <code class="codeph">descendant</code> element is defined as being of type <code class="codeph">personType</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-E95371E5-432C-43E2-8ABE-606982BE93AB">For Circular XML Schema Dependencies Set Parameter GENTABLES to TRUE</a><br>Oracle XML&nbsp;DB supports XML schemas that involve circular schema dependencies. It does this by detecting the cycles, breaking them, and storing the recursive elements as rows in a separate <code class="codeph">XMLType</code> table that is created during XML schema registration. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9">complexType Declarations in XML Schema: Handling Cycles</a><br>SQL object types do not allow cycles. Cycles in an XML schema are broken while generating the object types, by introducing a <code class="codeph">REF</code> attribute where the cycle would be completed. Part of the data is stored out of line, but it is retrieved as part of the parent XML document. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D">Cyclical References Among XML Schemas</a><br>XML schemas can depend on each other in such a way that they cannot be registered one after the other in the usual manner. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" title="XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.">Considerations for Working with Complex or Large XML Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4657"></a><div class="props_rev_3"><a id="GUID-E95371E5-432C-43E2-8ABE-606982BE93AB" name="GUID-E95371E5-432C-43E2-8ABE-606982BE93AB"></a><h5 id="ADXDB-GUID-E95371E5-432C-43E2-8ABE-606982BE93AB" class="sect5"><span class="enumeration_section">18.9.1.1 </span>For Circular XML Schema Dependencies Set Parameter GENTABLES to TRUE
                     </h5>
                     <div>
                        <p>Oracle XML&nbsp;DB supports XML schemas that involve circular schema dependencies. It does this by detecting the cycles, breaking them, and storing the recursive elements as rows in a separate <code class="codeph">XMLType</code> table that is created during XML schema registration. 
                        </p>
                        <p>Consequently, it is important to ensure that parameter <code class="codeph">GENTABLES</code> is set to <code class="codeph">TRUE</code> when registering an XML schema that defines this kind of structure. The name of the table used to store the recursive elements can be specified by adding an <code class="codeph">xdb:defaultTable</code> annotation to the XML schema.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D" title="The W3C XML Schema Recommendation lets complexTypes and global elements contain recursive references. This kind of structure allows for instance documents where the element in question can appear an infinite number of times in a recursive hierarchy.">Circular and Cyclical Dependencies Among XML Schemas</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4660"></a><a id="ADXDB4663"></a><a id="ADXDB4659"></a><a id="ADXDB4661"></a><a id="ADXDB4658"></a><div class="props_rev_3"><a id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9" name="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9"></a><h5 id="ADXDB-GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9" class="sect5"><span class="enumeration_section">18.9.1.2 </span>complexType Declarations in XML Schema: Handling Cycles
                     </h5>
                     <div>
                        <p>SQL object types do not allow cycles. Cycles in an XML schema are broken while generating the object types, by introducing a <code class="codeph">REF</code> attribute where the cycle would be completed. Part of the data is stored out of line, but it is retrieved as part of the parent XML document. 
                        </p>
                        <div class="infoboxnote" id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__GUID-51F33F51-9DB3-4558-B69B-C7ED2D4A4B38">
                           <p class="notep1">Note:</p>
                           <p>Starting with Oracle Database&nbsp;11g Release 2 (11.2.0.2), you can create only <span class="italic">one</span> <code class="codeph">XMLType</code> table that uses an XML schema that results in <code class="codeph">an out-of-line table</code>. An error is raised if you try to create a second table that uses the same XML schema.
                           </p>
                        </div>
                        <p>XML schemas permit cycling between definitions of complex types. <a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__I1044847">Figure 18-3</a> shows this, where the definition of complex type <code class="codeph">CT1</code> can reference another complex type <code class="codeph">CT2</code>, whereas the definition of <code class="codeph">CT2</code> references the first type <code class="codeph">CT1</code>.
                        </p>
                        <p>XML schemas permit cycles among definitions of complex types. <a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHAGBAFH">Example 18-29</a> creates a cycle of length two:
                        </p>
                        <p>SQL types do not allow cycles in type definitions. However, they do support <strong class="term">weak cycles</strong>, that is, cycles involving <code class="codeph">REF</code> (reference) object attributes. Cyclic XML schema definitions are mapped to SQL object types in such a way that cycles are avoided by forcing <code class="codeph">SQLInline = "false"</code> at the appropriate points. This creates a weak SQL cycle.
                        </p>
                        <p>For the XML schema of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHAGBAFH">Example 18-29</a>, Oracle XML&nbsp;DB generates the following types: 
                        </p><pre class="pre codeblock"><code>CREATE TYPE ct1 AS OBJECT (SYS_XDBPD$  XDB.XDB$RAW_LIST_T,
                           "e1"        VARCHAR2(4000),
                           "e2"        <span class="bold">REF</span> XMLType) NOT FINAL;
CREATE TYPE ct2 AS OBJECT (SYS_XDBPD$  XDB.XDB$RAW_LIST_T,
                           "e1"        VARCHAR2(4000),
                           "e2"        CT1) NOT FINAL;</code></pre><div class="figure" id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__I1044847">
                           <p class="titleinfigure">Figure 18-3 Cross Referencing Between Different complexTypes in the Same XML Schema</p><img src="img/adxdb012.gif" width="279" alt="Description of Figure 18-3 follows" title="Description of Figure 18-3 follows" longdesc="img_text/adxdb012.html"><br><a href="img_text/adxdb012.html">Description of "Figure 18-3 Cross Referencing Between Different complexTypes in the Same XML Schema"</a></div>
                        <!-- class="figure" -->
                        <p>Another example of a cyclic complex type involves the declaration of the complex type that refers to itself. In <a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHADFCCI">Example 18-30</a>, type <code class="codeph">SectionT</code> does this. 
                        </p>
                        <p>For the XML schema of <a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHADFCCI">Example 18-30</a>, Oracle XML&nbsp;DB generates the following types: 
                        </p><pre class="pre codeblock"><code>CREATE TYPE body_coll AS VARRAY(32767<a id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__CIHGAFIH" name="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__CIHGAFIH" href="#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__CIHGAFIH" onclick="footdisplay(3, "This value of 32767 assumes that the value of initialization parameter MAX_STRING_SIZE is EXTENDED. See Oracle Database SQL Language Reference.")"><sup>Foot&nbsp;3</sup></a>) OF VARCHAR2(32767<a id="fnsrc_d86720e7840" name="fnsrc_d86720e7840" href="#fnsrc_d86720e7840" onclick="footdisplay(3, "This value of 32767 assumes that the value of initialization parameter MAX_STRING_SIZE is EXTENDED. See Oracle Database SQL Language Reference.")"><sup>Footref&nbsp;3</sup></a>);
CREATE TYPE section_t AS OBJECT (SYS_XDBPD$  XDB.XDB$RAW_LIST_T, 
                                 "title"     VARCHAR2(32767<a id="fnsrc_d86720e7843" name="fnsrc_d86720e7843" href="#fnsrc_d86720e7843" onclick="footdisplay(3, "This value of 32767 assumes that the value of initialization parameter MAX_STRING_SIZE is EXTENDED. See Oracle Database SQL Language Reference.")"><sup>Footref&nbsp;3</sup></a>),
                                 "body"      BODY_COLL,
                                 "section"   XDB.XDB$REF_LIST_T) NOT FINAL;</code></pre><div class="infoboxnote" id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__GUID-A577CD97-AA9D-4EEF-A88C-5C6A7A018BC2">
                           <p class="notep1">Note:</p>
                           <p>In <a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHADFCCI">Example 18-30</a>, object attribute <code class="codeph">section</code> is declared as a varray of <code class="codeph">REF</code> references to <code class="codeph">XMLType</code> instances. Because there can be more than one occurrence of embedded sections, the attribute is a varray. It is a varray of <code class="codeph">REF</code> references to <code class="codeph">XMLType</code> instances, to avoid forming a cycle of SQL objects.
                           </p>
                        </div>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__I1044836">Figure 18-4</a> illustrates schematically how a <code class="codeph">complexType</code> can reference itself.
                        </p>
                        <div class="figure" id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__I1044836">
                           <p class="titleinfigure">Figure 18-4 Self-Referencing Complex Type within an XML Schema</p><img src="img/adxdb037.gif" width="215" alt="Description of Figure 18-4 follows" title="Description of Figure 18-4 follows" longdesc="img_text/adxdb037.html"><br><a href="img_text/adxdb037.html">Description of "Figure 18-4 Self-Referencing Complex Type within an XML Schema"</a></div>
                        <!-- class="figure" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHAGBAFH">
                           <p class="titleinexample">Example 18-29 XML Schema: Cycling Between complexTypes</p><pre class="pre codeblock"><code>DECLARE 
  doc VARCHAR2(3000) :=
    '&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;xs:complexType name="<span class="bold">CT1</span>" xdb:SQLType="CT1"&gt;
         &lt;xs:sequence&gt;
           &lt;xs:element name="e1" type="xs:string"/&gt;
           &lt;xs:element name="e2" type="<span class="bold">CT2</span>"/&gt;
         &lt;/xs:sequence&gt;
       &lt;/xs:complexType&gt;
       &lt;xs:complexType name="<span class="bold">CT2</span>" xdb:SQLType="CT2"&gt;
         &lt;xs:sequence&gt;
           &lt;xs:element name="e1" type="xs:string"/&gt;
           &lt;xs:element name="e2" type="<span class="bold">CT1</span>"/&gt;
         &lt;/xs:sequence&gt;
       &lt;/xs:complexType&gt;
     &lt;/xs:schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/emp.xsd',
    SCHEMADOC =&gt; doc);
END;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-71DC594A-3BAA-4EBF-9B0C-0E1BAC5A0CC9__BHADFCCI">
                           <p class="titleinexample">Example 18-30 XML Schema: Cycling Between complexTypes, Self-Reference</p><pre class="pre codeblock"><code>DECLARE 
  doc VARCHAR2(3000) :=
    '&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"        
                xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;xs:complexType name="<span class="bold">SectionT</span>" xdb:SQLType="SECTION_T"&gt;
         &lt;xs:sequence&gt;
           &lt;xs:element name="title" type="xs:string"/&gt;
           &lt;xs:choice maxOccurs="unbounded"&gt;
             &lt;xs:element name="body" type="xs:string" 
                         xdb:SQLCollType="BODY_COLL"/&gt;
             &lt;xs:element name="section" type="<span class="bold">SectionT</span>"/&gt;
           &lt;/xs:choice&gt;
         &lt;/xs:sequence&gt;
       &lt;/xs:complexType&gt;
     &lt;/xs:schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/section.xsd',
    SCHEMADOC =&gt; doc);
END;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D" title="XML schemas can depend on each other in such a way that they cannot be registered one after the other in the usual manner.">Cyclical References Among XML Schemas</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D" title="The W3C XML Schema Recommendation lets complexTypes and global elements contain recursive references. This kind of structure allows for instance documents where the element in question can appear an infinite number of times in a recursive hierarchy.">Circular and Cyclical Dependencies Among XML Schemas</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4665"></a><a id="ADXDB4666"></a><a id="ADXDB5884"></a><a id="ADXDB5885"></a><a id="ADXDB5886"></a><a id="ADXDB4664"></a><div class="props_rev_3"><a id="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D" name="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D"></a><h5 id="ADXDB-GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D" class="sect5"><span class="enumeration_section">18.9.1.3 </span>Cyclical References Among XML Schemas
                     </h5>
                     <div>
                        <p>XML schemas can depend on each other in such a way that they cannot be registered one after the other in the usual manner. </p>
                        <p>This is illustrated in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__I1044849">Figure 18-5</a>.
                        </p>
                        <p>In the top half of the illustration, an example of indirect cyclical references between three XML schemas is shown.</p>
                        <p>In the bottom half of the illustration, an example of cyclical dependencies between two XML schemas is shown. The details of this simpler example are presented first.</p>
                        <div class="figure" id="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__I1044849">
                           <p class="titleinfigure">Figure 18-5 Cyclical References Between XML Schemas</p><img src="img/adxdb013.gif" width="376" alt="Description of Figure 18-5 follows" title="Description of Figure 18-5 follows" longdesc="img_text/adxdb013.html"><br><a href="img_text/adxdb013.html">Description of "Figure 18-5 Cyclical References Between XML Schemas"</a></div>
                        <!-- class="figure" -->
                        <p>An XML schema that includes another XML schema cannot be created if the included XML schema does not exist. The registration of XML schema <code class="codeph">xm40.xsd</code> in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHABJJ">Example 18-31</a> fails, if <code class="codeph">xm40a.xsd</code> does not exist.
                        </p>
                        <p>XML schema <code class="codeph">xm40.xsd</code> can, however, be created if you specify option <code class="codeph">FORCE =&gt; TRUE</code>, as in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHFACD">Example 18-32</a>:
                        </p>
                        <p>However, an attempt to use XML schema <code class="codeph">xm40.xsd</code>, as in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHFAFF">Example 18-33</a>, fails.
                        </p>
                        <p>If you register <code class="codeph">xm40a.xsd</code> using the <code class="codeph">FORCE</code> option, as in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHIGDH">Example 18-34</a>, then both XML schemas can be used, as shown by the <code class="codeph">CREATE TABLE</code> statements.
                        </p>
                        <p>Thus, to register these XML schemas, which depend on each other, you must use the <code class="codeph">FORCE</code> parameter in <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code> for each schema, as follows: 
                        </p>
                        <ol>
                           <li>
                              <p>Register <code class="codeph">xm40.xsd</code> with <code class="codeph">FORCE</code> mode set to <code class="codeph">TRUE</code>:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.registerSchema("xm40.xsd", "&lt;schema ...", ..., <span class="bold">FORCE =&gt; TRUE</span>)
</pre><p>At this point, <code class="codeph">xm40.xsd</code> <span class="italic">cannot</span> be used.
                              </p>
                           </li>
                           <li>
                              <p>Register <code class="codeph">xm40a.xsd</code> in <code class="codeph">FORCE</code> mode set to <code class="codeph">TRUE</code>:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.registerSchema("xm40a.xsd", "&lt;schema ...", ..., <span class="bold">FORCE =&gt; TRUE</span>)
</pre><p>The second operation automatically compiles <code class="codeph">xm40.xsd</code> and makes both XML schemas usable.
                              </p>
                           </li>
                        </ol>
                        <div class="example" id="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHABJJ">
                           <p class="titleinexample">Example 18-31 An XML Schema that Includes a Non-Existent XML Schema</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XMLSCHEMA.registerSchema(
  SCHEMAURL =&gt; '<span class="bold">xm40.xsd</span>',
  SCHEMADOC =&gt; '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
                        xmlns:my="xm40"  
                        targetNamespace="xm40"&gt;
     <span class="bold">             &lt;include schemaLocation="xm40a.xsd"/&gt;</span>
                  &lt;!-- Define a global complextype here --&gt;
                  &lt;complexType name="Company"&gt;
                    &lt;sequence&gt;
                      &lt;element name="Name" type="string"/&gt;
                      &lt;element name="Address" type="string"/&gt;
                    &lt;/sequence&gt;
                  &lt;/complexType&gt;
                  &lt;!-- Define a global element depending on included schema --&gt;
                  &lt;element name="Emp" type="my:Employee"/&gt;
                &lt;/schema&gt;',
  LOCAL     =&gt; TRUE, 
  GENTYPES  =&gt; TRUE, 
  GENTABLES =&gt; TRUE); 
END;
/
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHFACD">
                           <p class="titleinexample">Example 18-32 Using the FORCE Option to Register XML Schema xm40.xsd</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XMLSCHEMA.registerSchema(
  SCHEMAURL =&gt; 'xm40.xsd',
  SCHEMADOC =&gt; '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
                        xmlns:my="xm40"  
                        targetNamespace="xm40"&gt;
                  &lt;include schemaLocation="xm40a.xsd"/&gt;
                  &lt;!-- Define a global complextype here --&gt;
                  &lt;complexType name="Company"&gt;
                    &lt;sequence&gt;
                      &lt;element name="Name" type="string"/&gt;
                      &lt;element name="Address" type="string"/&gt;
                    &lt;/sequence&gt;
                  &lt;/complexType&gt;
                  &lt;!-- Define a global element depending on included schema --&gt;
                  &lt;element name="Emp" type="my:Employee"/&gt;
                &lt;/schema&gt;',
  LOCAL     =&gt; TRUE, 
  GENTYPES  =&gt; TRUE, 
  GENTABLES =&gt; TRUE, 
  FORCE     =&gt; <span class="bold">TRUE</span>); 
END;
/
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHFAFF">
                           <p class="titleinexample">Example 18-33 Trying to Create a Table Using a Cyclic XML Schema</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE foo OF XMLType XMLSCHEMA "xm40.xsd" ELEMENT "Emp";
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-CD3986D6-D50C-4E84-9690-30DE8577C12D__BHAHIGDH">
                           <p class="titleinexample">Example 18-34 Using the FORCE Option to Register XML Schema xm40a.xsd</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XMLSCHEMA.registerSchema(
  SCHEMAURL =&gt; '<span class="bold">xm40a.xsd</span>',
  SCHEMADOC =&gt; '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
                        xmlns:my="xm40" 
                        targetNamespace="xm40"&gt;
                  <span class="bold">&lt;include schemaLocation="xm40.xsd"/&gt;</span>
                  &lt;!-- Define a global complextype here --&gt;
                  &lt;complexType name="Employee"&gt;
                    &lt;sequence&gt;
                      &lt;element name="Name" type="string"/&gt;
                      &lt;element name="Age" type="positiveInteger"/&gt;
                      &lt;element name="Phone" type="string"/&gt;
                    &lt;/sequence&gt;
                  &lt;/complexType&gt;
                  &lt;!-- Define a global element depending on included schema --&gt;
                  &lt;element name="Comp" type="my:Company"/&gt;
                &lt;/schema&gt;',
  LOCAL     =&gt; TRUE, 
  GENTYPES  =&gt; TRUE, 
  GENTABLES =&gt; TRUE, 
  FORCE     =&gt; <span class="bold">TRUE</span>); 
END;
/
</pre><pre class="oac_no_warn" dir="ltr">CREATE TABLE foo  OF XMLType XMLSCHEMA "xm40.xsd"  ELEMENT "Emp";
CREATE TABLE foo2 OF XMLType XMLSCHEMA "xm40a.xsd" ELEMENT "Comp";
 </pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-CDED9D6F-A153-4A83-BBC3-C2ECC428196D" title="The W3C XML Schema Recommendation lets complexTypes and global elements contain recursive references. This kind of structure allows for instance documents where the element in question can appear an infinite number of times in a recursive hierarchy.">Circular and Cyclical Dependencies Among XML Schemas</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4667"></a><a id="ADXDB0710"></a><div class="props_rev_3"><a id="GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C" name="GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C"></a><h4 id="ADXDB-GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C" class="sect4"><span class="enumeration_section">18.9.2 </span>Support for Recursive Schemas
                  </h4>
                  <div>
                     <p>A <code class="codeph">REF</code> to a recursive structure in an out-of-line table can make it difficult to rewrite XPath queries, because it is not known at compile time how deep the structure is. To enable XPath rewrite, a <code class="codeph">DOCID</code> column points back to the root document in any recursive structure.
                     </p>
                     <p>This enables some XPath queries to use the out-of-line tables directly and join back using this column. </p>
                     <p>A <strong class="term">document-correlated recursive query</strong> is a query using a SQL function that accepts an XPath or XQuery expression and an <code class="codeph">XMLType</code> instance, where that XPath or XQuery expression contains '<code class="codeph">//</code>'. A document-correlated recursive query can be <span class="italic">rewritten</span> if it can be determined at query compilation time that both of the following conditions are met:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>All fragments of the <code class="codeph">XMLType</code> instance that are targeted by the XPath or XQuery expression reside in a single out-of-line table.
                           </p>
                        </li>
                        <li>
                           <p>No other fragments of the <code class="codeph">XMLType</code> instance reside in the same out-of-line table.
                           </p>
                        </li>
                     </ul>
                     <p>The rewritten query is a join with the out-of-line table, based on the <code class="codeph">DOCID</code> column.
                     </p>
                     <p>Other queries with '<code class="codeph">//</code>' can also be rewritten. For example, if there are several <code class="codeph">address</code> elements, all of the same type, in different sections of a schema, and you often query all <code class="codeph">address</code> elements with '<code class="codeph">//</code>', not caring about their specific location in the document, rewrite can occur.
                     </p>
                     <p>During schema registration, an additional <code class="codeph">DOCID</code> column is generated for out-of-line <code class="codeph">XMLType</code> tables This column stores the <code class="codeph">OID</code> (Object Identifier Values) of the document, that is, the root element. This column is automatically populated when data is inserted in the tables. You can export tables containing <code class="codeph">DOCID</code> columns and import them later.
                     </p>
                     <div class="example" id="GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C__BHAEBJCA">
                        <p class="titleinexample">Example 18-35 Recursive XML Schema</p><pre class="pre codeblock"><code>&lt;schema targetNamespace="AbcNS" xmlns="http://www.w3.org/2001/XMLSchema"
          xmlns:abc="AbcNS" xmlnm:xdb="http://xmlns.oracle.com.xdb"&gt;
  &lt;element name="AbcCode" xdb:defaultTable="ABCCODETAB"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element ref="abc:AbcSection"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
 
  &lt;element name="AbcSection"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="ID" type="integer"/&gt;
        &lt;element name="Contents" type="string"/&gt;
        &lt;element ref="abc:AbcSection"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
&lt;/schema&gt;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB">defaultTable Shared Among Common Out-Of-Line Elements</a><br>Out-of-line elements of the same qualified name (namespace and local name) and same type are stored in the same default table. As a special case, you can store the root element of a cyclic element structure out of line in the same table as the sub-elements.
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-6A4D3B64-7438-494E-9698-298716FC8C13">Query Rewrite when DOCID is Present</a><br>Before processing <code class="codeph">//</code> XPath expressions, check to find multiple occurrences of the same element. If all occurrences under the <code class="codeph">//</code> share the same <code class="codeph">defaultTable</code> then the query can be rewritten against that table, using the <code class="codeph">DOCID</code>. 
                        </li>
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-E4CCB4F6-6FE4-41F3-8B83-76393E0A1261">DOCID Column Creation Disabling</a><br>You can disable the creation of column <code class="codeph">DOCID</code> by specifying an <code class="codeph">OPTIONS</code> parameter when calling <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code>. This disables <code class="codeph">DOCID</code> creation in all <code class="codeph">XMLType</code> tables generated during schema registration. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" title="XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.">Considerations for Working with Complex or Large XML Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4669"></a><a id="ADXDB4670"></a><a id="ADXDB4668"></a><div class="props_rev_3"><a id="GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB" name="GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB"></a><h5 id="ADXDB-GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB" class="sect5"><span class="enumeration_section">18.9.2.1 </span>defaultTable Shared Among Common Out-Of-Line Elements
                     </h5>
                     <div>
                        <p>Out-of-line elements of the same qualified name (namespace and local name) and same type are stored in the same default table. As a special case, you can store the root element of a cyclic element structure out of line in the same table as the sub-elements.</p>
                        <p>Both of the elements sharing the default table must be out-of-line elements, that is, the default table for an out-of-line element cannot be the same as the table for a top-level element. To do this, specify <code class="codeph">xdb:SQLInline = "false" </code>for both elements and specify an explicit <code class="codeph">xdb:defaultTable</code> attribute having the same value in both elements.
                        </p>
                        <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB__CHDHDJBC">Example 18-36</a> shows an XML schema with an out-of-line table that is stored in <code class="codeph">ABCSECTIONTAB</code>.
                        </p>
                        <p>Both of the out-of-line <code class="codeph">AbcSection</code> elements in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB__CHDHDJBC">Example 18-36</a> share the same default table, <code class="codeph">ABCSECTIONTAB</code>.
                        </p>
                        <p>However, <a href="XML-Schema-and-query-object-relational-storage.html#GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB__BHAFGIHA">Example 18-37</a> illustrates <span class="italic">invalid</span> default table sharing: recursive elements (<code class="codeph">XyZSection</code>) do not share the same out-of-line table.
                        </p>
                        <p>The following query cannot be rewritten.</p><pre class="pre codeblock"><code>SELECT XMLQuery('//XyzSection' PASSING OBJECT_VALUE RETURNING CONTENT)
  FROM xyzcode;</code></pre><div class="example" id="GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB__CHDHDJBC">
                           <p class="titleinexample">Example 18-36 Out-of-line Table</p><pre class="pre codeblock"><code>&lt;schema targetNamespace="AbcNS" xmlns="http://www.w3.org/2001/XMLSchema"
           xmlns:abc="AbcNS" xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
  &lt;element name="AbcCode" xdb:defaultTable="ABCCODETAB"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element ref="abc:AbcSection" xdb:SQLInline="false"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
 
  &lt;element name="AbcSection" xdb:defaultTable=""&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="ID" type="integer"/&gt;
        &lt;element name="Contents" type="string"/&gt;
        &lt;element ref="abc:AbcSection" <span class="bold">xdb:SQLInline="false"</span>
                 xdb:defaultTable="<span class="bold">ABCSECTIONTAB</span>"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
&lt;/schema&gt;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB__BHAFGIHA">
                           <p class="titleinexample">Example 18-37 Invalid Default Table Sharing</p><pre class="pre codeblock"><code> &lt;schema targetNamespace="XyzNS" xmlns="http://www.w3.org/2001/XMLSchema"
         xmlns:xyz="XyzNS" xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
   &lt;element name="XyzCode" xdb:defaultTable="XYZCODETAB"&gt;
   &lt;complexType&gt;
   &lt;sequence&gt;
      &lt;element name="CodeNumber" type="integer" minOccurs="0"/&gt;
      &lt;element ref="xyz:XyzChapter" xdb:SQLInline="false"/&gt;
      &lt;element ref="xyz:XyzPara" xdb:SQLInline="false" /&gt;
   &lt;/sequence&gt;
   &lt;/complexType&gt;
   &lt;/element&gt;
 
    &lt;element name="XyzChapter" xdb:defaultTable="XYZCHAPTAB"&gt;
     &lt;complexType&gt;
     &lt;sequence&gt;
         &lt;element name="Title" type="string"/&gt;
         &lt;element ref="xyz:XyzSection" xdb:SQLInline="false" 
                  <span class="bold">xdb:defaultTable="XYZSECTIONTAB"</span>/&gt;
      &lt;/sequence&gt;
      &lt;/complexType&gt;
    &lt;/element&gt;
 
    &lt;element name="XyzPara" xdb:defaultTable="XYZPARATAB"&gt;
     &lt;complexType&gt;
     &lt;sequence&gt;
         &lt;element name="Title" type="string"/&gt;
         &lt;element ref="xyz:XyzSection" xdb:SQLInline="false" 
                  <span class="bold">xdb:defaultTable="Other_XYZSECTIONTAB</span>"/&gt;
      &lt;/sequence&gt;
      &lt;/complexType&gt;
    &lt;/element&gt;
   
    &lt;element name="XyzSection"&gt;
    &lt;complexType&gt;
    &lt;sequence&gt;
        &lt;element name="ID" type="integer"/&gt;
        &lt;element name="Contents" type="string"/&gt;
        &lt;element ref="xyz:XyzSection" xdb:defaultTable="XYZSECTIONTAB"/&gt;
     &lt;/sequence&gt;
     &lt;/complexType&gt;
    &lt;/element&gt;
 &lt;/schema&gt;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C" title="A REF to a recursive structure in an out-of-line table can make it difficult to rewrite XPath queries, because it is not known at compile time how deep the structure is. To enable XPath rewrite, a DOCID column points back to the root document in any recursive structure.">Support for Recursive Schemas</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4671"></a><div class="props_rev_3"><a id="GUID-6A4D3B64-7438-494E-9698-298716FC8C13" name="GUID-6A4D3B64-7438-494E-9698-298716FC8C13"></a><h5 id="ADXDB-GUID-6A4D3B64-7438-494E-9698-298716FC8C13" class="sect5"><span class="enumeration_section">18.9.2.2 </span>Query Rewrite when DOCID is Present
                     </h5>
                     <div>
                        <p>Before processing <code class="codeph">//</code> XPath expressions, check to find multiple occurrences of the same element. If all occurrences under the <code class="codeph">//</code> share the same <code class="codeph">defaultTable</code> then the query can be rewritten against that table, using the <code class="codeph">DOCID</code>. 
                        </p>
                        <p>If there are other occurrences of the same element under the root sharing that table, but not under <code class="codeph">//</code>, then the query cannot be rewritten. 
                        </p>
                        <p>For example, consider this element structure:</p>
                        <p><code class="codeph">&lt;Book&gt;</code> contains a <code class="codeph">&lt;Chapter&gt;</code> and a <code class="codeph">&lt;Part&gt;</code>. <code class="codeph">&lt;Part&gt;</code> contains a <code class="codeph">&lt;Chapter&gt;</code>.
                        </p>
                        <p>Assume that both of the <code class="codeph">&lt;Chapter&gt;</code> elements are stored out of line and they share the same default table. The query <code class="codeph">/Book//Chapter</code> can be rewritten to go against the default table for the <code class="codeph">&lt;Chapter&gt;</code> elements because all of the <code class="codeph">&lt;Chapter&gt;</code> elements under <code class="codeph">&lt;Book&gt;</code> share the same default table. Thus, this XPath query is a document-correlated recursive XPath query.
                        </p>
                        <p>However, a query such as <code class="codeph">/Book/Part//Chapter</code> cannot be rewritten, even though all the <code class="codeph">&lt;Chapter&gt;</code> elements under <code class="codeph">&lt;Part&gt;</code> share the same table, because there is another <code class="codeph">&lt;Chapter&gt;</code> element under <code class="codeph">&lt;Book&gt;</code>, which is the document root that also shares that table.
                        </p>
                        <p>Consider the case where you are extracting <code class="codeph">//AbcSection</code> with <code class="codeph">DOCID</code> present, as in the XML schema described in <a href="XML-Schema-and-query-object-relational-storage.html#GUID-25C3FAE7-5B36-4EFC-8747-5729321E22DB__CHDHDJBC">Example 18-36</a>:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery('//AbcSection' PASSING OBJECT_VALUE RETURNING CONTENT)
  FROM abccodetab;
</pre><p>Both of the <code class="codeph">AbcSection</code> elements are stored in the same table, <code class="codeph">abcsectiontab</code>. The extraction applies to the underlying table, <code class="codeph">abcsectiontab</code>.
                        </p>
                        <p>Consider this query when <code class="codeph">DOCID</code> is present:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery('/AbcCode/AbcSection//AbcSection'
                PASSING OBJECT_VALUE RETURNING CONTENT)
  FROM abccodetab;
</pre><p>In both this case and the previous case, all reachable <code class="codeph">AbcSection</code> elements are stored in the same out-of-line table. However, the first <code class="codeph">AbcSection</code> element at <code class="codeph">/AbcCode/AbcSection</code> cannot be retrieved by this query. Since the join condition is a <code class="codeph">DOCID</code>, which cannot distinguish between different positions in the parent document, the correct result cannot be achieved by a direct query on table <code class="codeph">abcsectiontab</code>. In this case, query rewrite does not occur since it is not a document-correlated recursive XPath. If this top-level <code class="codeph">AbcSection</code> were not stored out of line with the rest, then the query could be rewritten.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C" title="A REF to a recursive structure in an out-of-line table can make it difficult to rewrite XPath queries, because it is not known at compile time how deep the structure is. To enable XPath rewrite, a DOCID column points back to the root document in any recursive structure.">Support for Recursive Schemas</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4672"></a><div class="props_rev_3"><a id="GUID-E4CCB4F6-6FE4-41F3-8B83-76393E0A1261" name="GUID-E4CCB4F6-6FE4-41F3-8B83-76393E0A1261"></a><h5 id="ADXDB-GUID-E4CCB4F6-6FE4-41F3-8B83-76393E0A1261" class="sect5"><span class="enumeration_section">18.9.2.3 </span>DOCID Column Creation Disabling
                     </h5>
                     <div>
                        <p>You can disable the creation of column <code class="codeph">DOCID</code> by specifying an <code class="codeph">OPTIONS</code> parameter when calling <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code>. This disables <code class="codeph">DOCID</code> creation in all <code class="codeph">XMLType</code> tables generated during schema registration. 
                        </p>
                        <p><code class="codeph">OPTIONS</code> is an input parameter of data type <code class="codeph">PLS_INTEGER</code>. Its default value is <code class="codeph">0</code>, meaning that no options are used. To inhibit the generation of column <code class="codeph">DOCID</code>, set parameter <code class="codeph">OPTIONS</code> to <code class="codeph">DBMS_XMLSCHEMA.REGISTER_NODOCID</code> (which is <code class="codeph">1</code>).
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E4CCB4F6-6FE4-41F3-8B83-76393E0A1261__GUID-BEB9DBA0-52ED-4E58-9B41-9FA5A3801D3D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_XMLSCHEMA.html#ARPLS377" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B43E7FEE-51C2-413F-A7FB-B023374CB26C" title="A REF to a recursive structure in an out-of-line table can make it difficult to rewrite XPath queries, because it is not known at compile time how deep the structure is. To enable XPath rewrite, a DOCID column points back to the root document in any recursive structure.">Support for Recursive Schemas</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4638"></a><a id="ADXDB4637"></a><a id="ADXDB4636"></a><div class="props_rev_3"><a id="GUID-80571C92-AB92-40F6-B067-01E228534C9D" name="GUID-80571C92-AB92-40F6-B067-01E228534C9D"></a><h4 id="ADXDB-GUID-80571C92-AB92-40F6-B067-01E228534C9D" class="sect4"><span class="enumeration_section">18.9.3 </span>XML Fragments Can Be Mapped to Large Objects (LOBs)
                  </h4>
                  <div>
                     <p>You can specify the&nbsp;SQL data type to use for a complex element as being&nbsp;<code class="codeph">CLOB</code>&nbsp;or&nbsp;<code class="codeph">BLOB</code>.
                     </p>
                     <p>In <a href="XML-Schema-and-query-object-relational-storage.html#GUID-80571C92-AB92-40F6-B067-01E228534C9D__I1044845">Figure 18-6</a>, for example, an entire XML fragment is stored in a LOB attribute. 
                     </p>
                     <p>In <a href="XML-Schema-and-query-object-relational-storage.html#GUID-80571C92-AB92-40F6-B067-01E228534C9D__BHAFGFDA">Example 18-38</a>, the XML schema defines element <code class="codeph">Addr</code> using the annotation <code class="codeph">SQLType = "CLOB"</code>:
                     </p>
                     <div class="figure" id="GUID-80571C92-AB92-40F6-B067-01E228534C9D__I1044845">
                        <p class="titleinfigure">Figure 18-6 Mapping complexType XML Fragments to CLOB Instances</p><img src="img/adxdb011.gif" width="249" alt="Description of Figure 18-6 follows" title="Description of Figure 18-6 follows" longdesc="img_text/adxdb011.html"><br><a href="img_text/adxdb011.html">Description of "Figure 18-6 Mapping complexType XML Fragments to CLOB Instances"</a></div>
                     <!-- class="figure" -->
                     <div class="example" id="GUID-80571C92-AB92-40F6-B067-01E228534C9D__BHAFGFDA">
                        <p class="titleinexample">Example 18-38 Oracle XML&nbsp;DB XML Schema: Mapping complexType XML Fragments to LOBs</p><pre class="oac_no_warn" dir="ltr">DECLARE
  doc VARCHAR2(3000) :=
    '&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"       
             targetNamespace="http://www.oracle.com/emp.xsd"       
             xmlns:emp="http://www.oracle.com/emp.xsd"       
             xmlns:xdb="http://xmlns.oracle.com/xdb"&gt;
       &lt;complexType name="Employee" xdb:SQLType="OBJ_T"&gt;
         &lt;sequence&gt;
           &lt;element name="Name" type="string"/&gt;
           &lt;element name="Age" type="decimal"/&gt;
           <span class="bold">&lt;element name="Addr" xdb:SQLType="CLOB"&gt;</span>
             &lt;complexType &gt;
               &lt;sequence&gt;
                 &lt;element name="Street" type="string"/&gt;
                 &lt;element name="City" type="string"/&gt;
               &lt;/sequence&gt;
             &lt;/complexType&gt;
           &lt;/element&gt;
         &lt;/sequence&gt;
       &lt;/complexType&gt;
     &lt;/schema&gt;';
BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL =&gt; 'http://www.oracle.com/PO.xsd',
    SCHEMADOC =&gt; doc);
END;
</pre><p>When registering this XML schema, Oracle XML&nbsp;DB generates the following types and <code class="codeph">XMLType</code> tables:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE obj_t AS OBJECT(SYS_XDBPD$ XDB.XDB$RAW_LIST_T, 
                            Name VARCHAR2(4000), 
                            Age NUMBER, 
                            Addr CLOB);</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" title="XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.">Considerations for Working with Complex or Large XML Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6315"></a><div class="props_rev_3"><a id="GUID-5F470098-54C0-4FC6-8E7B-732487497F90" name="GUID-5F470098-54C0-4FC6-8E7B-732487497F90"></a><h4 id="ADXDB-GUID-5F470098-54C0-4FC6-8E7B-732487497F90" class="sect4"><span class="enumeration_section">18.9.4 </span>ORA-01792 and ORA-04031: Issues with Large XML Schemas
                  </h4>
                  <div>
                     <p>Errors <code class="codeph">ORA-01792</code> and <code class="codeph">ORA-04031</code> can be raised when you work with large or complex XML schemas. You can encounter them when you register an XML schema or you create a table that is based on a global element defined by an XML schema.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">ORA-01792: maximum number of columns in a table or view is 1000</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ORA-04031: unable to allocate</code> <span class="italic"><code class="codeph">string</code></span> <code class="codeph">bytes of shared memory ("</code><span class="italic"><code class="codeph">string</code></span><code class="codeph">","</code><span class="italic"><code class="codeph">string</code></span><code class="codeph">","</code><span class="italic"><code class="codeph">string</code></span><code class="codeph">","</code><span class="italic"><code class="codeph">string</code></span>"<code class="codeph">) </code></p>
                        </li>
                     </ul>
                     <p>These errors are raised when you try to create an <code class="codeph">XMLType</code> table or column based on a global element and the global element is defined as a <code class="codeph">complexType</code> that contains a very large number of element and attribute definitions. 
                     </p>
                     <p>They are raised only when creating an <code class="codeph">XMLType</code> table or column that uses object-relational storage. The table or column is persisted using a SQL type, and each object attribute defined by the SQL type counts as one column in the underlying table. If the SQL type contains object attributes that are based on other SQL types, then the attributes defined by those types also count as columns in the underlying table. 
                     </p>
                     <p>If the total number of object attributes in all of the SQL types exceeds the Oracle Database limit of 1000 columns in a table, then the storage table cannot be created. When the total number of elements and attributes defined by a <code class="codeph">complexType</code> reaches 1000, it is not possible to create a single table that can manage the SQL objects that are generated when an instance of that type is stored in the database.
                     </p>
                     <div class="infobox-tip" id="GUID-5F470098-54C0-4FC6-8E7B-732487497F90__GUID-C550F651-743C-4A2E-8924-2378911A8A3A">
                        <p class="notep1">Tip:</p>
                        <p>You can use the following query to determine the number of columns for a given <code class="codeph">XMLType</code> table stored object-relationally:
                        </p><pre class="pre codeblock"><code>SELECT count(*) FROM USER_TAB_COLS WHERE TABLE_NAME = '<span class="italic">&lt;the table&gt;</span>'</code></pre><p>where <span class="italic"><code class="codeph">&lt;the table&gt;</code></span> is the table you want to check.
                        </p>
                     </div>
                     <p>Error <code class="codeph">ORA-01792</code> reports that the 1000-column limit has been exceeded. Error <code class="codeph">ORA-04031</code> reports that memory is insufficient during the processing of a large number of element and attribute definitions. To resolve this problem of having too many element and attribute definitions, you must reduce the total number of object attributes in the SQL types that are used to create the storage tables. 
                     </p>
                     <p>There are two ways to achieve this reduction:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use a top-down technique, with <span class="italic">multiple</span> <code class="codeph">XMLType</code> <span class="italic">tables</span> that manage the XML documents. This reduces the number of SQL attributes in the SQL type hierarchy for a given storage table. As long as none of the tables need to manage more than 1000 object attributes, the problem is resolved.
                           </p>
                        </li>
                        <li>
                           <p>Use a bottom-up technique, which reduces the number of SQL attributes in the SQL type hierarchy, <span class="italic">collapsing some elements and attributes</span> defined by the XML schema so that they are stored as a single <code class="codeph">CLOB</code> value.
                           </p>
                        </li>
                     </ul>
                     <p>Both techniques rely on annotating the XML schema to define how a particular <code class="codeph">complexType</code> is stored in the database. 
                     </p>
                     <p>For the top-down technique, annotations <code class="codeph">SQLInline = "false"</code> and <code class="codeph">defaultTable</code> force some subelements in the XML document to be stored as rows in a separate <code class="codeph">XMLType</code> table. Oracle XML&nbsp;DB maintains the relationship between the two tables using a <code class="codeph">REF</code> of <code class="codeph">XMLType</code>. Good candidates for this approach are XML schemas that do either of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Define a <span class="italic">choice</span>, where each element within the choice is defined as a <code class="codeph">complexType</code></p>
                        </li>
                        <li>
                           <p>Define an element based on a <code class="codeph">complexType</code> that contains a <span class="italic">large number of element and attribute definitions</span></p>
                        </li>
                     </ul>
                     <p>The bottom-up technique involves reducing the total number of attributes in the SQL object types by choosing to store some of the lower-level <code class="codeph">complexType</code> elements as <code class="codeph">CLOB</code> values, rather than as objects. This is achieved by annotating the <code class="codeph">complexType</code> or the usage of the <code class="codeph">complexType</code> with <code class="codeph">SQLType = "CLOB"</code>.
                     </p>
                     <p>Which technique you use depends on the application and the type of queries and updates to be performed against the data.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" title="XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.">Considerations for Working with Complex or Large XML Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4678"></a><div class="props_rev_3"><a id="GUID-32930A3C-AFD4-4950-94B6-B26ACAFBC70D" name="GUID-32930A3C-AFD4-4950-94B6-B26ACAFBC70D"></a><h4 id="ADXDB-GUID-32930A3C-AFD4-4950-94B6-B26ACAFBC70D" class="sect4"><span class="enumeration_section">18.9.5 </span>Considerations for Loading and Retrieving Large Documents with Collections
                  </h4>
                  <div>
                     <p>Oracle XML&nbsp;DB configuration file <code class="codeph">xdbconfig.xml</code> has parameters that control the amount of memory used by the loading operation: <code class="codeph">xdbcore-loadableunit-size</code> and <code class="codeph">xdbcore-xobmem-bound</code>.
                     </p>
                     <p>These let you optimize the loading process, provided the following conditions are met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The document is loaded using one of the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Protocols (FTP, HTTP(S), or DAV)</p>
                              </li>
                              <li>
                                 <p>PL/SQL function <code class="codeph">DBMS_XDB_REPOS.createResource</code></p>
                              </li>
                              <li>
                                 <p>A SQL <code class="codeph">INSERT</code> statement into an <code class="codeph">XMLType</code> table (but not an <code class="codeph">XMLType</code> column)
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>The document is XML schema-based and contains large collections (elements with <code class="codeph">maxOccurs</code> set to a large number).
                           </p>
                        </li>
                        <li>
                           <p>Collections in the document are stored as OCTs. This is the default behavior.</p>
                        </li>
                     </ul>
                     <p>In the following situations, the optimizations are sometimes suboptimal:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When there are triggers on the base table.</p>
                        </li>
                        <li>
                           <p>When the base table is partitioned.</p>
                        </li>
                        <li>
                           <p>When collections are stored out of line (applies only to SQL <code class="codeph">INSERT</code>).
                           </p>
                        </li>
                     </ul>
                     <p>The basic idea behind this optimization is that it lets the collections be swapped into or out of the memory in bounded sizes. As an illustration of this idea consider the following example conforming to a purchase-order XML schema:</p><pre class="pre codeblock"><code>&lt;PurchaseOrder&gt;
  &lt;LineItem itemID="1"&gt;
    ...
  &lt;/LineItem&gt;
    .
    .
  &lt;LineItem itemID="10240"&gt;
    ...
  &lt;/LineItem&gt;
&lt;/PurchaseOrder&gt;
</code></pre><p>The purchase-order document here contains a collection of 10240 <code class="codeph">LineItem</code> elements. Creating the entire document in memory and then pushing it out to disk can lead to excessive memory usage and in some instances a load failure due to inadequate system memory. 
                     </p>
                     <p>To avoid that, you can create the documents in finite chunks of memory called <strong class="term">loadable units</strong>. 
                     </p>
                     <p>In the example case, assume that each line item needs 1 KB of memory and that you want to use loadable units of 512 KB each. Each loadable unit then contains 512 line items, and there are approximately 20 such units. If you want the entire memory representation of the document to never exceed 2 MB, then you must ensure that at any time no more than 4 loadable units are maintained in the memory. You can use an LRU mechanism to swap out the loadable units. </p>
                     <p>By controlling the size of the loadable unit and the bound on the size of the document you can tune the memory usage and performance of the load or retrieval. Typically a larger loadable unit size translates into a smaller number of disk accesses, but it requires more memory. This is controlled by configuration parameter <code class="codeph">xdbcore-loadableunit-size</code>, whose default value is 16 KB. You can indicate the amount of memory to be given to a document by setting parameter <code class="codeph">xdbcore-xobmem-bound</code>, which defaults to 1 MB. The values of these parameters are specified in kilobytes. So, the default value of <code class="codeph">xdbcore-xobmem-bound</code> is 1024 and that of <code class="codeph">xdbcore-loadableunit-size</code> is 16. These are soft limits that provide some guidance to the system about how to use the memory optimally. 
                     </p>
                     <p>When a document is loaded using FTP, the pattern in which the loadable units (LU) are created and flushed to the disk is as follows:</p><pre class="pre codeblock"><code>No LUs
Create LU1[LineItems(LI):1-512]
LU1[LI:1-512], Create LU2[LI:513-1024]
.
.
LU1[LI:1-512],...,Create LU4[LI:1517:2028]    &lt;-   Total memory size = 2M
Swap Out LU1[LI:1-512], LU2[LI:513-1024],...,LU4[LI:1517-2028], Create LU5[LI:2029-2540]
Swap Out LU2[LI:513-1024], LU3, LU4, LU5, Create LU6[LI:2541-2052]
.
.
.
Swap Out LU16, LU17, LU18, LU10, Create LU20[LI:9729-10240]
Flush LU17,LU18,LU19,LU20
</code></pre></div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XML-Schema-and-query-object-relational-storage.html#GUID-1B84F42B-18DC-4BA5-A1C6-651101408B11">Guidelines for Configuration Parameters xdbcore-loadableunit-size and xdbcore-xobmem-bound</a><br>Use PGA size and trial and error to determine the best values for configuration parameters <code class="codeph">xdbcore-loadableunit-size</code> and <code class="codeph">xdbcore-xobmem-bound</code>.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-A9BDECE7-16AF-4CA4-96D5-5B03FA3E94CE" title="XML schemas can be complex. Examples of complex schemas include those that are recursive and those that contain circular or cyclical references. Working with complex or large XML schemas can be challenging and requires taking certain considerations into account.">Considerations for Working with Complex or Large XML Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4679"></a><div class="props_rev_3"><a id="GUID-1B84F42B-18DC-4BA5-A1C6-651101408B11" name="GUID-1B84F42B-18DC-4BA5-A1C6-651101408B11"></a><h5 id="ADXDB-GUID-1B84F42B-18DC-4BA5-A1C6-651101408B11" class="sect5"><span class="enumeration_section">18.9.5.1 </span>Guidelines for  Configuration Parameters xdbcore-loadableunit-size and xdbcore-xobmem-bound
                     </h5>
                     <div>
                        <p>Use PGA size and trial and error to determine the best values for configuration parameters <code class="codeph">xdbcore-loadableunit-size</code> and <code class="codeph">xdbcore-xobmem-bound</code>.
                        </p>
                        <p>Typically, if you have 1 GB of addressable PG then give about 1/10th of PGA to the document. Set <code class="codeph">xobcore-xobmem-bound</code> to 1/10 of addressable PGA, which is 100M. During full document retrievals and loads, the value of <code class="codeph">xdbcore-loadableunit-size</code> should be as close as possible to the value of <code class="codeph">xobcore-xobmem-bound</code>. 
                        </p>
                        <p>Start by setting <code class="codeph">xdbcore-loadableunit-size</code> to half the value of <code class="codeph">xdbcore-xobmem-bound</code> (50 MB). Then try to load the document. 
                        </p>
                        <p>If you run out of memory then reduce the value of <code class="codeph">xdbcore-xobmem-bound</code> and set <code class="codeph">xdbcore-loadableunot-size</code> to half of that value. Continue this way until the documents load successfully. 
                        </p>
                        <p>If the load operation succeeds then try to increase <code class="codeph">xdbcore-loadableunit-size</code>, to obtain better performance. If <code class="codeph">xdbcore-loadableunit-size</code> equals <code class="codeph">xdbcore-xobmem-bound</code>, then try to increase both parameter values for further performance improvements.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-32930A3C-AFD4-4950-94B6-B26ACAFBC70D" title="Oracle XML&nbsp;DB configuration file xdbconfig.xml has parameters that control the amount of memory used by the loading operation: xdbcore-loadableunit-size and xdbcore-xobmem-bound.">Considerations for Loading and Retrieving Large Documents with Collections</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB4463"></a><div class="props_rev_3"><a id="GUID-D17B71BD-2AC2-4EC6-ADE3-8FE626FEC156" name="GUID-D17B71BD-2AC2-4EC6-ADE3-8FE626FEC156"></a><h3 id="ADXDB-GUID-D17B71BD-2AC2-4EC6-ADE3-8FE626FEC156" class="sect3"><span class="enumeration_section">18.10 </span>Debugging XML Schema Registration for XML Data Stored Object-Relationally
               </h3>
               <div>
                  <p>For XML data stored object-relationally, you can monitor the object types and tables created during XML schema registration by setting the event 31098 before invoking PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code>.
                  </p>
                  <div class="section"><pre class="pre codeblock"><code>ALTER SESSION SET EVENTS = '31098 TRACE NAME CONTEXT FOREVER'
</code></pre><p>Setting this event causes the generation of a log of all of the <code class="codeph">CREATE TYPE</code> and <code class="codeph">CREATE TABLE</code> statements. The log is written to the user session trace file, typically found in <code class="codeph">ORACLE_BASE/diag/rdbms/ORACLE_SID/ORACLE_SID/udump</code>. This trace output can be a useful aid in diagnosing problems during XML schema registration.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="XML-Schema-and-query-object-relational-storage.html#GUID-B0C1A0B0-2DD1-491A-8CE1-1F857FD267B7" title="Advanced techniques for XML Schema-based data include using object-relational storage; annotating XML schemas; mapping Schema data types to SQL; using complexType extensions and restrictions; creating, specifying relational constraints on, and partitioning XML Schema-based data, storing XMLType data out of line, working with complex or large schemas, and debugging schema registration.">XML Schema Storage and Query: Object-Relational Storage</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;3: 
            <p>This value of 32767 assumes that the value of initialization parameter <code class="codeph">MAX_STRING_SIZE</code> is <code class="codeph">EXTENDED</code>. See <a href="../sqlrf/Data-Types.html#SQLRF55623" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
            </p><br></div>
      </article>
   </body>
</html>
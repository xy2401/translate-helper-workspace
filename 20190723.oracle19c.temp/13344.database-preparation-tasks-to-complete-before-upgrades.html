<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">
      <meta name="description" content="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">
      <title>Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="installing-new-oracle-database-software.html" title="Previous" type="text/html">
      <link rel="next" href="prepare-dbua-oracle-data-guard-rolling-upgrades.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="installing-new-oracle-database-software.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="prepare-dbua-oracle-data-guard-rolling-upgrades.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tasks-prepare-upgrade-oracle-database.html" property="item" typeof="WebPage"><span property="name"> Preparing to Upgrade Oracle Database </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</li>
            </ol>
            <a id="GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" name="GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2"></a>
            
            <h2 id="UPGRD-GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" class="sect2">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</h2>
         </header>
         <div class="ind">
            <div>
               <p>Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.</p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-46F09541-C36A-4790-B3D3-E0E336A7BBC3">Patch Set Updates and Requirements for Upgrading Oracle Database</a><br>Before starting upgrades, update your new release Oracle Database to the latest Oracle bundle patch, patch set update (BP or PSU), or Release Update (Update), or Release Update Revision (Revision). 
                  </li>
                  <li class="ulchildlink"><a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-6C0D6F38-2ADE-4E60-8603-A7DB1F218B8B">Copying Transparent Encryption Oracle Wallets</a><br>If you use Oracle wallet with Transparent Data Encryption (TDE), then copy the <code class="codeph">sqlnet.ora</code> and wallet file to the new Oracle home. 
                  </li>
                  <li class="ulchildlink"><a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-6732E4F8-93B5-4257-A8FC-5257F28E44E3">Recommendations for Oracle Net Services When Upgrading Oracle Database</a><br>Review these procedures and parameter changes for Oracle Net Services before you upgrade. 
                  </li>
                  <li class="ulchildlink"><a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-6428A98A-6621-4E49-89E5-FAFD51F04B60">Understanding Password Case Sensitivity and Upgrades</a><br>By default, Oracle Database 12<span class="italic">c</span> Release 2 (12.2) and later releases are upgraded to an Exclusive Mode. Exclusive Modes do not support case-insensitive password-based authentication.
                  </li>
                  <li class="ulchildlink"><a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE">Checking for Accounts Using Case-Insensitive Password Version</a><br>Use these procedures to identify if the Oracle Database that you want to upgrade has accounts or configuration parameters that are using a case-insensitive password version.
                  </li>
                  <li class="ulchildlink"><a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-E10096D0-36E3-41AF-9381-D74089FC6E17">Running Upgrades with Read-Only Tablespaces</a><br>Use the Parallel Upgrade Utility with the <code class="codeph">-T</code> option to take schema-based tablespaces offline during upgrade.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="tasks-prepare-upgrade-oracle-database.html#GUID-733D2563-A42D-4366-9FCD-DABD25D0E2DF" title="Complete preupgrade tasks and checks to assist you with completing a successful upgrade.">Preparing to Upgrade Oracle Database</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD52782"></a><div class="props_rev_3"><a id="GUID-46F09541-C36A-4790-B3D3-E0E336A7BBC3" name="GUID-46F09541-C36A-4790-B3D3-E0E336A7BBC3"></a><h3 id="UPGRD-GUID-46F09541-C36A-4790-B3D3-E0E336A7BBC3" class="sect3">Patch Set Updates and Requirements for Upgrading Oracle Database</h3>
               <div>
                  <p>Before starting upgrades, update your new release Oracle Database to the latest Oracle bundle patch, patch set update (BP or PSU), or Release Update (Update), or Release Update Revision (Revision). </p>
                  <p>The software for new Oracle Database releases contains a full release that includes all the latest patches and updates for Oracle Database at the time of the release.</p>
                  <p>Before you start an upgrade or downgrade process, Oracle strongly recommends that you update both your earlier release and your new release Oracle Database. For Oracle Database 12<span class="italic">c</span> or earlier releases, update to the latest Oracle bundle patch, or patch set update (BP or PSU). For Oracle Database 12<span class="italic">c</span> release 2 (12.2), Oracle Database 18c, or later releases, update to the latest quarterly Release Update (Update) or Release Update Revision (Revision). 
                  </p>
                  <div class="p">My Oracle Support provides detailed notes about how you can obtain the latest patches, as well as tools for lifecycle management and automated patching. For example:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>My Oracle Support note 854428.1 contains information about patch sets and updates.</p>
                        </li>
                        <li>
                           <p>My Oracle Support note 730365.1 contains an upgrade reference list for most available Oracle Database releases, including download information, patch numbers, and links to other notes. </p>
                        </li>
                        <li>
                           <p>My Oracle Support note 2180188.1 contains lists of one-off patches for upgrades, downgrades, and coexistence with previous releases. </p>
                        </li>
                        <li>
                           <p>My Oracle Support note 1227443.1 contains a list of Oracle Database PSU/BP/Update/Revision known issues. This note provides information about all known issues notes for Oracle Database, Oracle Grid Infrastructure, and the Oracle JavaVM Component (OJVM).</p>
                        </li>
                        <li>
                           <p>My Oracle Support note 2118136.2 contains a download assistant to help you select the updates, revisions, Patch Set Updates (PSU), SPU (CPU), Bundle Patches, Patchsets, and Base Releases that you need for your environment. Oracle highly recommends that you start here. </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=854428.1" target="_blank">My Oracle Support Note 854428.1</a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=730365.1" target="_blank">My Oracle Support Note 730365.1</a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=2180188.1" target="_blank">My Oracle Support Note 2180188.1</a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1227443.1" target="_blank">My Oracle Support Note 1227443.1</a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;amp;id=2118136.2" target="_blank">My Oracle Support Note 2118136.2</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" title="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-6C0D6F38-2ADE-4E60-8603-A7DB1F218B8B" name="GUID-6C0D6F38-2ADE-4E60-8603-A7DB1F218B8B"></a><h3 id="UPGRD-GUID-6C0D6F38-2ADE-4E60-8603-A7DB1F218B8B" class="sect3">Copying Transparent Encryption Oracle Wallets</h3>
               <div>
                  <p>If you use Oracle wallet with Transparent Data Encryption (TDE), then copy the <code class="codeph">sqlnet.ora</code> and wallet file to the new Oracle home. 
                  </p>
                  <div class="section">
                     <p>You must copy the <code class="codeph">sqlnet.ora</code> and the wallet file manually before starting the upgrade. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Log in as an authorized user.</span></li>
                     <li class="stepexpand"><span>Manually copy the <code class="codeph">sqlnet.ora</code> file, and the wallet file, <code class="codeph">ewallet.p12</code>, to the new release Oracle home.</span></li>
                     <li class="stepexpand"><span>Open the Oracle wallet in mount.</span><div>
                           <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; STARTUP MOUNT;
SQL&gt; ALTER SYSTEM SET ENCRYPTION WALLET OPEN</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" title="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52802"></a><div class="props_rev_3"><a id="GUID-6732E4F8-93B5-4257-A8FC-5257F28E44E3" name="GUID-6732E4F8-93B5-4257-A8FC-5257F28E44E3"></a><h3 id="UPGRD-GUID-6732E4F8-93B5-4257-A8FC-5257F28E44E3" class="sect3">Recommendations for Oracle Net Services When Upgrading Oracle Database</h3>
               <div>
                  <p>Review these procedures and parameter changes for Oracle Net Services before you upgrade. </p>
                  <p>In Oracle Database 12<span class="italic">c</span>, new underlying net services parameters enable data compression, which reduces the size of the session data unit that is transmitted over a SQL TCP connection.
                  </p>
                  <p>The following new parameters for the <code class="codeph">sqlnet.ora</code> file specify compression, and the preferred compression scheme:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">SQLNET.COMPRESSION</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SQLNET.COMPRESSION_LEVELS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">SQLNET.COMPRESSION_THRESHOLD</code></p>
                     </li>
                  </ul>
                  <p>These parameters introduced with Oracle Database 12<span class="italic">c</span> are not supported in earlier releases. They are only available in Oracle Database 12<span class="italic">c</span>, and later releases For more information about these <code class="codeph">sqlnet.ora</code> compression parameters, refer to <cite>Oracle Net Services Reference</cite>. 
                  </p>
                  <p>If the Oracle Database that you are upgrading does not have a listener configured, then before you run DBUA, you must run Oracle Net Configuration Assistant (NETCA) to configure the listening protocol address and service information for the new release of Oracle Database, including a <code class="codeph">listener.ora</code> file. You must create a new version of the listener for releases of Oracle Database earlier than release 11.2. The current listener is backward-compatible with earlier Oracle Database releases.
                  </p>
                  <p>When you upgrade an Oracle RAC database with DBUA, it automatically migrates the listener from your old Oracle home to the new Oracle Grid Infrastructure home. You must administer the listener by using the <code class="codeph">lsnrctl</code> command in the Oracle Grid Infrastructure home. Do not attempt to use the <code class="codeph">lsnrctl</code> commands from Oracle home locations for earlier releases.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../netrf/parameters-for-the-sqlnet.ora.html#NETRF1972" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" title="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-6428A98A-6621-4E49-89E5-FAFD51F04B60" name="GUID-6428A98A-6621-4E49-89E5-FAFD51F04B60"></a><h3 id="UPGRD-GUID-6428A98A-6621-4E49-89E5-FAFD51F04B60" class="sect3">Understanding Password Case Sensitivity and Upgrades</h3>
               <div>
                  <p>By default, Oracle Database 12<span class="italic">c</span> Release 2 (12.2) and later releases are upgraded to an Exclusive Mode. Exclusive Modes do not support case-insensitive password-based authentication.
                  </p>
                  <p>Accounts that have only the <code class="codeph">10G</code> password version become inaccessible when the server runs in an Exclusive Mode.
                  </p>
                  <p>In previous Oracle Database releases, you can configure the authentication protocol so that it allows case-insensitive password-based authentication by setting <code class="codeph">SEC_CASE_SENSITIVE_LOGON=FALSE</code>. Starting with Oracle Database 12<span class="italic">c</span> release 2 (12.2), the default password-based authentication protocol configuration excludes the use of the case-insensitive <code class="codeph">10G</code> password version. By default, the <code class="codeph">SQLNET.ORA</code> parameter <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> is set to <code class="codeph">12</code>, which is an Exclusive Mode. When the database is configured in Exclusive Mode, the password-based authentication protocol requires that one of the case-sensitive password versions (<code class="codeph">11G</code> or <code class="codeph">12C</code>) is present for the account being authenticated. This mode excludes the use of the <code class="codeph">10G</code> password version used in earlier releases. After upgrading to Oracle Database 12<span class="italic">c</span> release 2 and later releases, accounts that have only the case-insensitive <code class="codeph">10G</code> password version become inaccessible. This change occurs because the server runs in an Exclusive Mode by default. When Oracle Database is configured in Exclusive Mode, it cannot use the old <code class="codeph">10G</code> password version to authenticate the client. The server is left with no password version with which to authenticate the client.
                  </p>
                  <p>For greater security, Oracle recommends that you leave case-sensitive password-based authentication enabled. This setting is the default. However, you can temporarily disable case-sensitive authentication during the upgrade to new Oracle Database releases. After the upgrade, you can then decide if you want to enable the case-sensitive password-based authentication feature as part of your implementation plan to manage your password versions.</p>
                  <p>Before upgrading, Oracle recommends that you determine if this change to the default password-based authentication protocol configuration affects you. Perform the following checks:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Identify if you have accounts that use only <code class="codeph">10G</code> case-insensitive password authentication versions.
                        </p>
                     </li>
                     <li>
                        <p>Identify if you have Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3) database or earlier clients that have not applied critical patch update <code class="codeph">CPUOct2012</code>, or a later patch update, and have any account that does not have the case-insensitive <code class="codeph">10G</code> password version.
                        </p>
                     </li>
                     <li>
                        <p>Ensure that you do not have the deprecated parameter SEC_CASE_SENSITIVE_LOGON set to FALSE. Setting this parameter to FALSE prevents the use of the case-sensitive password versions (the <code class="codeph">11G</code> and <code class="codeph">12C</code> password versions) for authentication.
                        </p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-6428A98A-6621-4E49-89E5-FAFD51F04B60__GUID-B89D9889-C12A-4D63-8AF6-3DF52997D394">Options for Accounts Using Case-Insensitive Versions</p>
                     <p>If you have user accounts that have only the case-insensitive <code class="codeph">10G</code> password version, then you must choose one of the following alternatives:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Before upgrade, update the password versions for each account that has only the <code class="codeph">10G</code> password version. You can update the password versions by expiring user passwords using the <code class="codeph">10G</code> password version, and requesting that these users log in to their account. When they attempt to log in, the server automatically updates the list of password versions, which includes the case-sensitive password versions.
                           </p>
                        </li>
                        <li>
                           <p>Change the setting of the SQLNET.ORA parameter <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> to any of the settings that are not Exclusive Mode. For example: <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER=11</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../admqs/administering-user-accounts-and-security.html#ADMQS007" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a></li>
                        <li><a href="../netrf/parameters-for-the-sqlnet.ora.html#NETRF2010" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a></li>
                        <li><a href="../dbseg/configuring-authentication.html#DBSEG30321" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" title="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE" name="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE"></a><h3 id="UPGRD-GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE" class="sect3">Checking for Accounts Using Case-Insensitive Password Version</h3>
               <div>
                  <p>Use these procedures to identify if the Oracle Database that you want to upgrade has accounts or configuration parameters that are using a case-insensitive password version.</p>
                  <div class="section">
                     <p>By default, in Oracle Database 12<span class="italic">c</span> release 2 (12.2) and later releases, the <code class="codeph">10G</code> password version is not generated or allowed.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">
                     <p>If you do not set <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> to a permissive authentication protocol that permits case-insensitive versions, and you do not want user accounts authenticated with case-insensitive password versions to be locked out of the database, then you must identify affected accounts, and ensure that they are using case-sensitive password versions.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE__GUID-116A107A-5B52-40CF-BD0E-E88A9D8D19B8">
                     <p class="titleinexample">Example 2-1 Finding User Accounts That Use Case-Insensitive (10G) Version</p>
                     <p>Log in to SQL*Plus as an administrative user, and enter the following SQL query:</p><pre class="pre codeblock"><code>SELECT USERNAME,PASSWORD_VERSIONS FROM DBA_USERS;</code></pre><p>The following result shows password versions for the accounts:</p><pre class="pre codeblock"><code>USERNAME                       PASSWORD_VERSIONS
------------------------------ -----------------
JONES                          10G 11G 12C
ADAMS                          10G 11G
CLARK                          10G 11G
PRESTON                        11G
BLAKE                          10G</code></pre><p>In this example, the backgrounds for each user account password verification version in use are different:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JONES</code> was created in Oracle Database <code class="codeph">10G</code>, and the password for <code class="codeph">JONES</code> was reset in Oracle Database <code class="codeph">12C</code> when the setting for the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> parameter was set to <code class="codeph">8</code>. As a result, this password reset created all three versions. <code class="codeph">11G</code> and <code class="codeph">12C</code> use case-sensitive passwords.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ADAMS</code> and <code class="codeph">CLARK</code> were originally created with the <code class="codeph">10G</code> version, and then <code class="codeph">11G</code>, after they were imported from an earlier release. These account passwords were then reset in <code class="codeph">11G</code>, with the deprecated parameter SEC_CASE_SENSITIVE_LOGON set to TRUE. 
                           </p>
                        </li>
                        <li>
                           <p>The password for <code class="codeph">BLAKE</code> was created with the <code class="codeph">10G</code> version, and the password has not been reset. As a result, user BLAKE continues to use the <code class="codeph">10G</code> password version, which uses a case-insensitive password. 
                           </p>
                        </li>
                     </ul>
                     <p>The user <code class="codeph">BLAKE</code> has only the <code class="codeph">10G</code> password version before upgrade:
                     </p><pre class="pre codeblock"><code>SQL&gt; SELECT USERNAME,PASSWORD_VERSIONS FROM DBA_USERS;

USERNAME PASSWORD_VERSIONS
------------------------------ -----------------
BLAKE 10G</code></pre><p>If you upgrade to a new Oracle Database release without taking any further action, then this account becomes inaccessible. Ensure that the system is not configured in Exclusive Mode (by setting the <code class="codeph">SQLNET.ORA</code> parameter <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> to a more permissive authentication mode) before the upgrade.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE__GUID-E00AD49A-B76C-4BBD-B42D-4270043AB4AC">
                     <p class="titleinexample">Example 2-2 Fixing Accounts with Case-Insensitive Passwords</p>
                     <p>Complete the following procedure:</p>
                     <ol>
                        <li>
                           <p>Use the following SQL query to find the accounts that only have the <code class="codeph">10G</code> password version:
                           </p><pre class="oac_no_warn" dir="ltr">      select USERNAME
         from DBA_USERS
        where ( PASSWORD_VERSIONS = '10G '
               or PASSWORD_VERSIONS = '10G HTTP ')
          and USERNAME &lt;&gt; 'ANONYMOUS';
</pre></li>
                        <li>
                           <p>Configure the system so that it is not running in Exclusive Mode by editing the setting of the <code class="codeph">SQLNET.ORA</code> parameter <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> to a level appropriate for affected accounts. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER=11</pre><p>After you make this change, proceed with the upgrade. </p>
                        </li>
                        <li>
                           <p>After the upgrade completes, use the following command syntax to expire the accounts you found in step 1, where <code class="codeph"><span class="variable" translate="no">username</span></code> is the name of a user returned from the query in step 1:
                           </p>
                           <p><code class="codeph">ALTER USER <span class="variable" translate="no">username</span> PASSWORD EXPIRE;</code></p>
                        </li>
                        <li>
                           <p>Ask the users for whom you have expired the passwords to log in.</p>
                        </li>
                        <li>
                           <p>When these users log in, they are prompted to reset their passwords. The system internally generates the missing <code class="codeph">11G</code> and <code class="codeph">12C</code> password versions for their account, in addition to the <code class="codeph">10G</code> password version. The <code class="codeph">10G</code> password version is still present, because the system is running in the permissive mode.
                           </p>
                        </li>
                        <li>
                           <p>Ensure that the client software with which users are connecting has the <code class="codeph">O5L_NP</code> capability flag.
                           </p>
                           <div class="infoboxnote" id="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE__GUID-1143859E-29FB-4502-8F2D-536D695A024D">
                              <p class="notep1">Note:</p>
                              <p>All Oracle Database release 11.2.0.4 and later clients, and all Oracle Database release 12.1 and later clients have the <code class="codeph">O5L_NP</code> capability. Other clients require the <code class="codeph">CPUOct2012</code> patch to acquire the <code class="codeph">O5L_NP</code> capability.
                              </p>
                              <p>The <code class="codeph">O5L_NP</code> capability flag is documented in <cite>Oracle Database Net Services Reference</cite>, in the section on the parameter <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code>.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>After all clients have the <code class="codeph">O5L_NP</code> capability, raise the server security back to Exclusive Mode by using the following procedure:
                           </p>
                           <ol type="a">
                              <li>
                                 <p>Remove the <code class="codeph">SEC_CASE_SENSITIVE_LOGON</code> setting from the instance initialization file, or set the <code class="codeph">SEC_CASE_SENSITIVE_LOGON</code> instance initialization parameter to <code class="codeph">TRUE</code>. For example:
                                 </p>
                                 <p><code class="codeph">SEC_CASE_SENSITIVE_LOGON = TRUE</code></p>
                              </li>
                              <li>
                                 <p>Remove the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> parameter from the server <code class="codeph">SQLNET.ORA</code> file, or set it back to Exclusive Mode by changing the value of <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> in the server <code class="codeph">SQLNET.ORA</code> file back to <code class="codeph">12</code>. For example:
                                 </p>
                                 <p><code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER = 12</code></p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Use the following SQL query to find the accounts that still have the <code class="codeph">10G</code> password version:
                           </p><pre class="oac_no_warn" dir="ltr">       select USERNAME
         from DBA_USERS
        where PASSWORD_VERSIONS like '%10G%'
          and USERNAME &lt;&gt; 'ANONYMOUS';</pre></li>
                        <li>
                           <p>Use the list of accounts returned from the query in step 8 to expire all the accounts that still have the <code class="codeph">10G</code> password version. Expire the accounts using the following syntax, where <code class="codeph"><span class="variable" translate="no">username</span></code> is a name on the list returned by the query:
                           </p>
                           <p><code class="codeph">ALTER USER <span class="variable" translate="no">username</span> PASSWORD EXPIRE;</code></p>
                        </li>
                        <li>
                           <p>Request the users whose accounts you expired to log in to their accounts. </p>
                           <p>When the users log in, they are prompted to reset their password. The system internally generates only the <code class="codeph">11G</code> and <code class="codeph">12C</code> password versions for their account. Because the system is running in Exclusive Mode, the <code class="codeph">10G</code> password version is no longer generated. 
                           </p>
                        </li>
                        <li>
                           <p>Check that the system is running in a secure mode by rerunning the query from step 1. Ensure that no users are found. When the query finds no users, this result means that no <code class="codeph">10G</code> password version remains present in the system. 
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE__GUID-E4DAD84C-5307-46AD-B58A-A68C91417160">
                     <p class="titleinexample">Example 2-3 Checking for the Presence of SEC_CASE_SENSITIVE_LOGON Set to FALSE</p>
                     <p>Oracle Database does not prevent the use of the <code class="codeph">FALSE</code> setting for <code class="codeph">SEC_CASE_SENSITIVE_LOGON</code> when the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> parameter is set to <code class="codeph">12</code> or <code class="codeph">12a</code>. This setting can result in all accounts in the upgraded database becoming inaccessible.
                     </p><pre class="pre codeblock"><code>SQL&gt; SHOW PARAMETER SEC_CASE_SENSITIVE_LOGON

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
sec_case_sensitive_logon             boolean     FALSE</code></pre><div class="p">You can change this parameter by using the following command:<pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET SEC_CASE_SENSITIVE_LOGON = TRUE;

System altered.
</code></pre></div>
                     <div class="infoboxnote" id="GUID-ABD2D296-EFB9-49CA-94C5-FB1068AF19DE__GUID-DDF30492-AA19-4933-9BE9-AFCDB2724733">
                        <p class="notep1">Note:</p>
                        <p>Unless the value for the parameter <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> is changed to a version that is more permissive than <code class="codeph">12</code>, such as <code class="codeph">11</code>, do not set the <code class="codeph">SEC_CASE_SENSITIVE_LOGON</code> parameter to FALSE.
                        </p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../netrf/parameters-for-the-sqlnet.ora.html#NETRF2016" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a></li>
                        <li><a href="../dbseg/configuring-authentication.html#DBSEG30321" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" title="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52775"></a><div class="props_rev_3"><a id="GUID-E10096D0-36E3-41AF-9381-D74089FC6E17" name="GUID-E10096D0-36E3-41AF-9381-D74089FC6E17"></a><h3 id="UPGRD-GUID-E10096D0-36E3-41AF-9381-D74089FC6E17" class="sect3">Running Upgrades with Read-Only Tablespaces</h3>
               <div>
                  <p>Use the Parallel Upgrade Utility with the <code class="codeph">-T</code> option to take schema-based tablespaces offline during upgrade.
                  </p>
                  <p>Oracle Database can read file headers created in earlier releases, so you are not required to do anything to them during the upgrade. The file headers of <code class="codeph">READ ONLY</code> tablespaces are updated when they are changed to <code class="codeph">READ WRITE</code>. 
                  </p>
                  <p></p>
                  <p>If the upgrade suffers a catastrophic error, so that the upgrade is unable to bring the tablespaces back online, then review the upgrade log files. The log files contain the actual SQL statements required to make the tablespaces available. To bring the tablespaces back online, you must run the SQL statements in the log files for the database, or run the log files for each PDB.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E10096D0-36E3-41AF-9381-D74089FC6E17__GUID-10AEECB2-077E-4EC6-8F85-694E6BE30EBC">Viewing Tablespace Commands in Upgrade Log Files</p>
                     <p>If a catastrophic upgrade failure occurs, then you can navigate to the log directory (<code class="codeph"><span class="variable" translate="no">Oracle_base</span>/cfgtoologs/dbua</code>), and run commands in the log files manually to bring up tablespaces. You can view tablespace commands in the following log files:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Non-CDB Upgrades: <code class="codeph">catupgrd0.log</code></p>
                        </li>
                        <li>
                           <p>PDB databases: <code class="codeph">catupgrd<span class="variable" translate="no">pdbname</span>0.log</code>, where <code class="codeph"><span class="variable" translate="no">pdbname</span></code> is the name of the PDB that you are upgrading.
                           </p>
                        </li>
                     </ul>
                     <p>At the beginning of each log file, you find SQL statements such as the following, which sets tables to <code class="codeph">READ ONLY</code>:
                     </p><pre class="pre codeblock"><code>SQL&gt; ALTER TABLESPACE ARGROTBLSPA6 READ ONLY;

Tablespace altered.

SQL&gt; ALTER TABLESPACE ARGROTBLSPB6 READ ONLY;

Tablespace altered.</code></pre><p>Near the end of each log file, you find SQL statements to reset tables to <code class="codeph">READ WRITE</code>: 
                     </p><pre class="pre codeblock"><code>SQL&gt; ALTER TABLESPACE ARGROTBLSPA6 READ WRITE;

Tablespace altered.

SQL&gt; ALTER TABLESPACE ARGROTBLSPB6 READ WRITE;

Tablespace altered.</code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E10096D0-36E3-41AF-9381-D74089FC6E17__GUID-9D35EB74-16FD-4AD2-89EB-BEDEFF8B9FA7">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/transporting-data.html#ADMIN11394" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about transporting tablespaces between databases
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="database-preparation-tasks-to-complete-before-upgrades.html#GUID-58C1A4B9-32F4-44E5-B82B-5D0EC78A6AE2" title="Ensure that you have completed these database preparation tasks before starting an Oracle Database upgrade.">Database Preparation Tasks to Complete Before Starting Oracle Database Upgrades</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="">
      <meta name="description" content="">
      <title>Shared Pool Support for Multitenant Data Sources</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Universal Connection Pool Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Universal Connection Pool Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="universal-connection-pool-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T06:57:38-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96473-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="jmx-based-management.html" title="Previous" type="text/html">
      <link rel="next" href="using-Oracle-RAC-features.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Universal Connection Pool Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JJUCP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jmx-based-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-Oracle-RAC-features.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Universal Connection Pool Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Shared Pool Support for Multitenant Data Sources</li>
            </ol>
            <a id="GUID-7C397AA8-9C78-4DB0-AAF4-15BBF9AFFB85" name="GUID-7C397AA8-9C78-4DB0-AAF4-15BBF9AFFB85"></a>
            
            <h2 id="JJUCP-GUID-7C397AA8-9C78-4DB0-AAF4-15BBF9AFFB85" class="sect2"><span class="enumeration_chapter">8 </span>Shared Pool Support for Multitenant Data Sources
            </h2>
         </header>
         <div class="ind">
            <div>
               <p></p>
               <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), multiple data sources of multitenant data sources can share a common pool of connections in UCP and repurpose connections in the common connection pool, whenever needed. This section describes the following concepts related to new Shared Pool feature:
               </p>
               <div class="infoboxnote" id="GUID-7C397AA8-9C78-4DB0-AAF4-15BBF9AFFB85__GUID-18FC4E3B-B32A-409A-A5FB-42C8B6B14391">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Only the JDBC Thin driver supports the Shared Pool feature, and not the JDBC OCI driver.</p>
                     </li>
                     <li>
                        <p>For using this feature, you <span class="italic">must</span> use an XML configuration file.
                        </p>
                     </li>
                  </ul>
               </div>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="shared-pool-for-multitenant-data-sources.html#GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46">Overview of Shared Pool Support</a></p>
                  </li>
                  <li>
                     <p><a href="shared-pool-for-multitenant-data-sources.html#GUID-E316D680-55B5-4A58-95D1-BC25ADF71113">Prerequisites for Supporting Shared Pool</a></p>
                  </li>
                  <li>
                     <p><a href="shared-pool-for-multitenant-data-sources.html#GUID-5BB08487-DBCB-445F-8166-B815234209B1">Configuring the Shared Pool</a></p>
                  </li>
                  <li>
                     <p><a href="shared-pool-for-multitenant-data-sources.html#GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3">APIs for Shared Pool Support</a></p>
                  </li>
                  <li>
                     <p><a href="shared-pool-for-multitenant-data-sources.html#GUID-35C35A0D-996A-49AD-BA2F-F4E0842F0221">Sample XML Configuration File for Shared Pool</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="shared-pool-for-multitenant-data-sources.html#GUID-35C35A0D-996A-49AD-BA2F-F4E0842F0221">Sample XML Configuration File for Shared Pool</a></li>
                  </ul>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46" name="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46"></a><h3 id="JJUCP-GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46" class="sect3"><span class="enumeration_section">8.1 </span>Overview of Shared Pool Support
               </h3>
               <div>
                  <p></p>
                  <p>In UCP, the pool instances have a one-to-one mapping with the data sources. Every data source creates its own connection pool instance and that instance is not accessible or shared by another data source, even if they internally create and cache connections to the same database and service. In this architecture, a lot of isolated connection pools are created, which causes a scalability problem because a database can scale up to only a certain number of connections.</p>
                  <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), UCP supports multiple data sources, connected to the same database, to share the same connection pool. This common connection pool is called as Shared Pool. The Shared Pool optimizes system resources for a scalable deployment of multitenant Java applications in Oracle Database Multitenant environment. This feature provides more flexibility in situations when there is an uneven load on each data source. When individual pool per data sources are created, then it is impossible to move around idle resources from an idle connection pool to a loaded one. However, when a Shared Pool is used, connections can be utilized in an efficient way by sharing and repurposing connections between the data sources. So, this feature reduces the total number of database connections, and improves resource usage, diagnosability, manageability, and scaling at the database servers.
                  </p>
                  <p>Following are the two scenarios in which this feature can be implemented:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Single Multitenant Data Source Using Shared Pool</p>
                     </li>
                     <li>
                        <p>One Data Source per Tenant Using Shared Pool</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46__GUID-1C74CFEF-7336-4DC3-9030-50BA816245BE">Single Multitenant Data Source Using Shared Pool</p>
                     <p>With this configuration, multiple tenants use the common data source and a common pool to serve connections with different services applicable to each of the tenants, as illustrated in the following diagram:</p>
                     <div class="figure" id="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46__SINGLEMULTITENANTDATASOURCEUSINGCON-906D8C37">
                        <p class="titleinfigure">Figure 8-1 Single Multitenant Data Source Using Shared Pool</p><img src="img/singlemtds.gif" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows" longdesc="img_text/singlemtds.html"><br><a href="img_text/singlemtds.html">Description of "Figure 8-1 Single Multitenant Data Source Using Shared Pool"</a></div>
                     <!-- class="figure" -->
                     <p>The following code snippet explains how this feature works:</p><pre class="pre codeblock"><code>    PoolDataSource multiTenantDS = PoolDataSourceFactory.getPoolDataSource();

    //common user for the CDB
    multiTenantDS.setUser("c##common_user");
    multiTenantDS.setPassword("password");   

    //Points to the root service of the CDB
    multiTenantDS.setURL("jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)"
        + "(HOST=myhost)(PORT=5521))(CONNECT_DATA=(SERVICE_NAME=root.oracle.com)))");   

    // password enabled role for tenant-1
    Properties tenant1Roles = new Properties();
    tenant1Roles.put("tenant1-role", "tenant1-password"); 

    //Create Connection to Tenant-1 and apply the tenant specific PDB roles.
    Connection tenant1Connection =
        multiTenantDS.createConnectionBuilder()
                     .serviceName("tenant1Svc.oracle.com")
                     .pdbRoles(tenant1Roles)
                     .build();

    // password enabled role for tenant-2
    Properties tenant2Roles = new Properties();
    tenant1Roles.put("tenant2-role", "tenant2-password");

    //Create Connection to Tenant-2 and apply the tenant specific PDB roles.
    Connection tenant2Connection =
        multiTenantDS.createConnectionBuilder()
                     .serviceName("tenant2Svc.oracle.com")
                     .pdbRoles(tenant2Roles)
                     .build();</code></pre><p>Refer to the “UCP APIs for Shared Pool Support” section for more information about the new APIs.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46__GUID-60C0065B-27B6-4FF7-89EB-CDEDD0F5F35F">One Data Source per Tenant Using Shared Pool</p>
                     <p>With this configuration, multitenant applications have separate data sources per tenant and a common Shared Pool for connections. This results in the individual data sources being configured with tenant specific service information and sharing a common pool, as illustrated in the following diagram:</p>
                     <div class="figure" id="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46__FIG-1463-90BD7754">
                        <p class="titleinfigure">Figure 8-2 One Data Source per Tenant Using Shared Pool</p><img src="img/onedspertenant.gif" alt="Description of Figure 8-2 follows" title="Description of Figure 8-2 follows" longdesc="img_text/onedspertenant.html"><br><a href="img_text/onedspertenant.html">Description of "Figure 8-2 One Data Source per Tenant Using Shared Pool"</a></div>
                     <!-- class="figure" -->
                     <p>The following code snippet explains how this feature works:</p><pre class="pre codeblock"><code>
    // UCP XML configuration file path in case of Unix 
    String file_URI = "file:/user/app/sharedpool/initial-shared-pool-config.xml";

    // UCP XML configuration file path in case of Windows 
    String file_URI = "file:/D:/user/app/sharedpool/initial-shared-pool-config.xml";

    // Java system property to specify XML configuration file location
    System.setProperty("oracle.ucp.jdbc.xmlConfigFile",&lt;file_URI&gt;);

    // Get the datasource instance, named as "pds1" in XML configuration file(initial-shared-pool-config.xml)
    PoolDataSource pds1 = PoolDataSourceFactory.getPoolDataSource("pds1");
    Connection pds1Conn = pds1.getConnection();
   
    // Get the datasource instance, named as "pds2" in XML configuration file(initial-shared-pool-config.xml)
    PoolDataSource pds2 = PoolDataSourceFactory.getPoolDataSource("pds2");
    Connection pds2Conn = pds2.getConnection();
   
    // Reconfigure datasource(pds1) using the new properties
    Properties newProps = new Properties();
    newProps.put("serviceName", &lt;newServiceName&gt;);
    pds1.reconfigureDataSource(newProps);
   
    // Configure a new datasource(pds3) to running pool using the new data source properties
    Properties dataSourceProps = new Properties();
    dataSourceProps.put("serviceName", &lt;serviceName&gt;);
    dataSourceProps.put("connectionPoolName", &lt;poolName&gt;);
    dataSourceProps.put("dataSourceName", &lt;dataSourceName&gt;);
    PoolDataSource pds3 = PoolDataSourceFactory.getPoolDataSource(dataSourceProps);
   
    // Reconfigure connection pool("pool1") using the new properties

    Properties newPoolProps = new Properties();
    newPoolProps.put("initialPoolSize", &lt;newInitialPoolSizeValue&gt;);
    newPoolProps.put("maxPoolSize", &lt;newMaxPoolSizeValue&gt;);
    UniversalConnectionPoolManager ucpMgr = UniversalConnectionPoolManagerImpl.getUniversalConnectionPoolManager();
    ucpMgr.reconfigureConnectionPool("pool1", newPoolProps);</code></pre><div class="infoboxnote" id="GUID-4945D8A0-7607-43BE-9F5C-A7CD526EFE46__GUID-6D40077A-837E-4B3D-BC22-77DB2E41443C">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>UCP uses a service switch for implementing this feature. However, the service switch in Shared Pools is supported only for homogenous services. There is no support for heterogeneous services (heterogeneity in terms of service attributes like Transaction Guard and Application Continuity) in Shared Pools.</p>
                           </li>
                           <li>
                              <p>For the XML configuration file used in the code snippets, refer to the “XML Configuration File Required for Shared Pool Support” section.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-E316D680-55B5-4A58-95D1-BC25ADF71113" name="GUID-E316D680-55B5-4A58-95D1-BC25ADF71113"></a><h3 id="JJUCP-GUID-E316D680-55B5-4A58-95D1-BC25ADF71113" class="sect3"><span class="enumeration_section">8.2 </span>Prerequisites for Supporting Shared Pool
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>Following are the prerequisites for multitenant data sources to use the Shared Pool:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must provide the initial configuration of Shared Pools through an XML configuration file. You can specify the initial XML configuration file for UCP through the system property <code class="codeph">oracle.ucp.jdbc.xmlConfigFile</code>. The location of the initial XML configuration file should be specified as a URI. For example, <code class="codeph">file:/user_directory/ucp.xml</code>.
                           </p>
                           <p>The <code class="codeph">configuration.xsd</code> schema file is included in the <code class="codeph">ucp.jar</code> file for reference. Refer to this file while creating a UCP XML configuration file.
                           </p>
                        </li>
                        <li>
                           <p>During the reconfiguration of a shared pool, updated pool properties should be provided through reconfiguration APIs.</p>
                        </li>
                        <li>
                           <p>Always use application service for the services used for Shared Pool, and for the individual tenant data source specific services. Connections are not repurposed or reused when an Administrative service or default PDB services are used.</p>
                        </li>
                        <li>
                           <p>The various services accessed through the Shared Pool must be homogenous, that is, they should have similar properties with respect to Application Continuity (AC), DRCP (Database Resident Connection Pool), and so on.</p>
                        </li>
                        <li>
                           <p>The Shared Pool must be configured with a single user, and this user should be a common user configured on the CDB. The common user should have the following privileges - <code class="codeph">CREATE SESSION</code>, <code class="codeph">ALTER SESSION</code>, and <code class="codeph">SET CONTAINER</code>. The common user should also have the execute permission on the <code class="codeph">DBMS_SERVICE_PRVT</code> package.
                           </p>
                           <div class="infoboxnote" id="GUID-E316D680-55B5-4A58-95D1-BC25ADF71113__GUID-1D09BF2F-DEC8-46AB-825F-03AE420AB8AC">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the common user needs specific roles or password-enabled roles per tenant, then these roles should be specified in the respective tenant data source properties.</p>
                                 </li>
                                 <li>
                                    <p>The advantage of the <code class="codeph">SET CONTAINER</code> statement is that the pool does not have to create a new connection to a PDB, if there is an existing connection to a different PDB. The pool can use the existing connection and can connect to the desired PDB through the <code class="codeph">SET CONTAINER</code> statement.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>Connection repurposing among various tenant connections in the Shared Pool happens only when the total number of the connections in the pool reaches the connection repurpose threshold (if configured on the pool) and the minimum pool size.</p>
                        </li>
                        <li>
                           <p>The URL specified for the Shared Pool in the XML configuration file must have the LONG format, with service name explicitly specified. Short format or Easy Connection URL is not supported.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-5BB08487-DBCB-445F-8166-B815234209B1" name="GUID-5BB08487-DBCB-445F-8166-B815234209B1"></a><h3 id="JJUCP-GUID-5BB08487-DBCB-445F-8166-B815234209B1" class="sect3"><span class="enumeration_section">8.3 </span>Configuring the Shared Pool
               </h3>
               <div>
                  <p></p>
                  <div class="section">The following sections describe the Shared Pool configuration:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Initial Configuration of the Pool</p>
                        </li>
                        <li>
                           <p>Reconfiguration of the Pool</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5BB08487-DBCB-445F-8166-B815234209B1__GUID-217865DF-DE17-4D06-873E-9BB1565F9B37">Initial Configuration of the Pool</p>
                     <p>For the initial configuration of the pool, get a data source instance by using the XML configuration file and then, using that data source, get a connection from a Shared Pool.</p><pre class="pre codeblock"><code>    // Get the data source instance, named as "pds1" in the XML configuration file(initial-shared-pool-config.xml)
    PoolDataSource pds1 = PoolDataSourceFactory.getPoolDataSource("pds1");
    Connection pds1Conn = pds1.getConnection();</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5BB08487-DBCB-445F-8166-B815234209B1__GUID-1690D80B-1C88-433D-8231-B4C60AC334B4">Reconfiguration of the Pool</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The following code snippet shows how to reconfigure the data source that you obtained during the initial configuration of the pool:</p><pre class="pre codeblock"><code> // Reconfigure datasource(pds1) using the new propertries for reconfiguration

Properties newProps = new Properties();
newProps.put("serviceName",&lt;newServiceName&gt;);
pds1.reconfigureDataSource(newProps);</code></pre></li>
                        <li>
                           <p>The following code snippet shows how to add a new data source to an already running Shared Pool:</p><pre class="pre codeblock"><code>// Configure a new datasource(pds3) to the running pool using the new data source properties

Properties dataSourceProps = new Properties();
dataSourceProps.put("serviceName", &lt;serviceName&gt;);
dataSourceProps.put("connectionPoolName", &lt;poolName&gt;);
dataSourceProps.put("dataSourceName", &lt;dataSourceName&gt;);
PoolDataSource pds3 = PoolDataSourceFactory.getPoolDataSource(dataSourceProps);</code></pre></li>
                        <li>
                           <p>The following code snippet shows how to reconfigure the connection pool:</p><pre class="pre codeblock"><code>// Reconfigure connection pool("pool1") using the new properties

Properties newPoolProps = new Properties();
newPoolProps.put("initialPoolSize", &lt;newInitialPoolSizeValue&gt;);
newPoolProps.put("maxPoolSize", &lt;newMaxPoolSizeValue&gt;);
UniversalConnectionPoolManager ucpMgr = UniversalConnectionPoolManagerImpl.getUniversalConnectionPoolManager();
ucpMgr.reconfigureConnectionPool("pool1", newPoolProps);</code></pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3" name="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3"></a><h3 id="JJUCP-GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3" class="sect3"><span class="enumeration_section">8.4 </span>UCP APIs for Shared Pool Support
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3__GUID-A4AA3D5D-FFCC-473C-A685-EC927746F8AD">New Methods in PoolDataSource Interface</p>
                     <p>The following methods have been introduced in the <code class="codeph">oracle.ucp.jdbc.PoolDataSource</code> interface:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">reconfigureDataSource(Properties configuration)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getMaxConnectionsPerService()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getServiceName()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getPdbRoles()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getConnectionRepurposeThreshold()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">setConnectionRepurposeThreshold(int threshold)</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3__GUID-AEA33F49-B460-4570-8977-2CE914CD2535">New Methods in PoolDataSourceFactory Class</p>
                     <p>The following methods have been introduced in the <code class="codeph">oracle.ucp.jdbc.PoolDataSourceFactory</code> class:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">getPoolDataSource(String dataSourceName)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getPoolDataSource(Properties configuration)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getPoolXADataSource(String dataSourceName)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getPoolXADataSource(Properties configuration)</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3__GUID-2919C277-E033-400E-92D7-B0128D99DBC6">New Method in oracle.ucp.admin.UniversalConnectionPoolManager Interface</p>
                     <p>The following method has been introduced in the <code class="codeph">oracle.ucp.admin.UniversalConnectionPoolManager</code> interface:
                     </p><pre class="pre codeblock"><code>reconfigureConnectionPool(String poolName , Properties configuration)</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3__GUID-08F4A84E-953D-4751-8479-9155F43050E7">New Method in oracle.ucp.admin.UniversalConnectionPool Interface</p>
                     <p>The following method has been introduced in the <code class="codeph">oracle.ucp.admin.UniversalConnectionPool</code> interface:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">isShareable()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getMaxConnectionsPerService()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">setMaxConnectionsPerService(int maxConnectionsPerService)</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-DD1127BC-C049-4B9E-8D15-DEB8D0E695B3__GUID-237550DB-33D9-4161-9320-7B0A9D45B3A0">
                        <p class="notep1">See Also:</p>
                        <p><a href="../jjuar/index.html" target="_blank"><span><cite>Oracle Universal Connection Pool Java API Reference</cite></span></a> for more information about these methods.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-35C35A0D-996A-49AD-BA2F-F4E0842F0221" name="GUID-35C35A0D-996A-49AD-BA2F-F4E0842F0221"></a><h3 id="JJUCP-GUID-35C35A0D-996A-49AD-BA2F-F4E0842F0221" class="sect3"><span class="enumeration_section">8.5 </span>Sample XML Configuration File for Shared Pool
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-35C35A0D-996A-49AD-BA2F-F4E0842F0221__GUID-62546415-B32A-4CA2-AAE8-3D5C36F7DF7C">initial-shared-pool-config.xml</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ucp-properties&gt;
    &lt;connection-pool
        connection-pool-name="pool1"
        connection-factory-class-name="oracle.jdbc.pool.OracleDataSource"
        url="jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(HOST=<span class="italic">host_name</span>)(PORT=1521)(PROTOCOL=tcp))( CONNECT_DATA=(SERVICE_NAME=<span class="italic">myorcldbservicename</span>)))"
        user="C##CommonUser"
        password=<span class="italic">password</span>        
        initial-pool-size="10"
        min-pool-size="5" 
        max-pool-size="20"
        connection-repurpose-threshold="13"
        max-connections-per-service="15"
        validate-connection-on-borrow="true"
        sql-for-validate-connection="select 1 from dual"    
        shared="true"
    &gt;

        &lt;connection-property name="oracle.jdbc.ReadTimeout" value="2000"/&gt;
        &lt;connection-property name="oracle.net.OUTBOUND_CONNECT_TIMEOUT" value="2000"/&gt; 

        &lt;data-source
            data-source-name="pds1"
            service=<span class="italic">pdb1_service_name</span>
            description="pdb1 data source"/&gt;
   
        &lt;data-source
            data-source-name="pds2"
            service=<span class="italic">pdb2_service_name</span>
            description="pdb2 data source"/&gt;

  
    &lt;/connection-pool&gt;
&lt;/ucp-properties&gt;</code></pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
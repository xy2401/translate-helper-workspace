<html lang="zh-Hans" dir="ltr">
<head>

<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2011. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<meta http-equiv="Content-Style-Type" content="text/css"></meta>
<link rel="STYLESHEET" href="../book.css" type="text/css" charset="ISO-8859-1"></link>
<title>更新</title>
<meta name="keyword" content="team"></meta>
</head>

<body bgcolor="#ffffff" dir="ltr">
<h1 class="Head">更新</h1>

<p>当您在Workbench中处理项目时，团队的其他成员可能会对存储库中项目的副本进行更改。要进行这些更改，您可以“更新”Workbench以匹配分支的状态。您将看到的更改将特定于Workbench项目配置为共享的分支。您可以控制何时选择更新。
</p>

<p>可以从两个位置发出update命令： <b>Team&gt; Update</b>菜单或<b>Synchronize</b>视图。为了理解这两个命令之间的区别，了解三种不同类型的传入更改非常重要。
</p>

<ul>
  <li>当文件已远程更改但尚未在本地修改时，会发生<i>非冲突的</i>更改。</li>
  <li>当远程和本地更改ASCII文件（即具有未提交的本地更改）但更改位于不同的行时，会发生<i>自动合并的冲突</i>更改。</li>
  <li>当ASCII文件的一个或多个相同行或远程和本地更改二进制文件时，会发生<i>非自动合并的冲突</i>更改（二进制文件永远不可自动合并）。</li>
</ul>

<p>选择“ <b>团队”&gt;“更新”时</b> ，将使用上述所有三种类型的传入更改来更新本地资源的内容。您可以指定更新行为应该在的内容<a class="command-link" href="javascript:void(0);"><img src="PLUGINS_ROOT/org.eclipse.help/command_link.svg" alt="命令链接"> <b>团队&gt; CVS&gt;更新/合并</b></a>首选项页面。选择是：</p>
  <ul>
  <li><b>在更新之前预览所有传入的更改</b> ：所有更改将显示在同步视图或对话框中（取决于您的设置）。然后，您可以逐行合并每个更改，或一次更新所有非冲突的更改，然后处理剩余的冲突。</li>
  
  <li><b>更新所有非冲突的更改，然后预览其余更改</b> ：所有非冲突的传入更改将自动合并，任何剩余的冲突将显示在“同步视图”（ <em>默认</em> ）或对话框中。您可以从“更新/合并”首选项页面指定显示冲突的位置。</li>
   
  <li><b>永远不要预览和使用CVS文本标记来指示冲突（ <em>默认</em> ）</b> ：此选项将自动合并所有更改，而无需任何用户交互。将使用CVS文本标记合并冲突的更改：<br>
  	<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt;原始文件修订版<br>[原始代码]<br>= = = = = = =<br>[收到代码]<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;传入文件修订版<br>
  
   <br>然后，您必须进入包含合并冲突的每个文件，并将文件编辑为所需的最终状态。
  </li>
  </ul>
 <p>在更新任何本地资源之前，通常需要知道传入的更改。“同步”视图解决了这些问题。
</p>

<p>要在传入模式下打开“同步”视图：</p>

<ol>
  <li>在其中一个导航视图中，选择要更新的资源。</li>
  <li>从所选资源的弹出菜单中，选择<b>Team&gt; Synchronize with Repository</b> 。“同步”视图将打开。</li>
  <li>在“同步视图”的工具栏上，单击“ <b>传入模式”</b>按钮以过滤掉您可能具有的任何已修改的Workbench资源（传出更改）。</li>
</ol>

<p>在传入模式下，您将看到自上次更新以来已提交给分支的更改。该视图将指示每个传入更改的类型。有两个更新命令（可从视图中的任何资源的上下文菜单中获得）来处理不同类型的冲突： <b>更新</b>和<b>覆盖和更新</b> 。在“同步”视图中选择“ <b>更新”</b>命令时，将处理所有选定的传入和可自动合并的冲突更改，而不会更新不可自动合并的冲突（已从视图中删除任何已成功处理的文件）。“ <b>覆盖”和“更新”</b>命令对冲突进行操作，并将使用远程内容替换本地资源。这种“替代”行为很少是期望的。稍后描述替代方案。</p>

<p>要更新非冲突和可自动合并的文件：</p>
<ol>
  <li>“同步”视图顶部的“结构比较”窗格包含具有传入更改的资源层次结构。</li>
  <li>选择所有冲突的文件，然后从弹出菜单中选择“ <b>更新</b> ”。这将更新所选资源，这些资源是传入更改或可自动合并的冲突，并从视图中删除它们。内容不可自动合并的冲突将保留在视图中。</li>
</ol>

<p>如果本地Workbench包含任何无法与分支中的传入更改自动合并的传出更改，则可以手动将差异合并到Workbench中，而不是执行<b>覆盖和更新</b> ，如下所示：</p>

<ol>
  <li>在“结构比较”窗格中，如果资源列表中存在冲突（由红色箭头表示），请将其打开（通过双击或从上下文菜单中选择“ <strong>在比较编辑器中打开”</strong> ）。</li>
  <li>在比较编辑器的“文本比较”区域中，左侧表示本地Workbench数据，右侧表示存储库分支数据。检查两者之间的差异。</li>
  <li>使用文本比较区域合并任何更改。您可以将更改从文件的存储库修订复制到文件的Workbench副本，并保存合并的Workbench文件（使用左窗格中的弹出菜单）。</li>
  <li>完成将远程更改合并到本地文件后，从“同步”视图的弹出菜单中选择“ <b>标记为合并”</b> 。这将标记本地文件已更新并允许您提交更改。</li>
</ol>

<p><em>注意：</em>更新时，存储库内容不会更改。接受传入更改后，这些更改将应用于Workbench。只有在提交传出更改时才会更改存储库。
</p>

<p><em>提示：</em>在“同步”视图中，选择一组传入更改的祖先将对所有相应的子项执行操作。例如，选择最顶层文件夹并选择“ <b>更新”</b>将处理所有传入和可自动合并的冲突更改，并使所有其他传入更改保持未处理状态。
</p>

<p><em>警告：</em>上述“ <b>覆盖和更新”</b>命令的行为仅适用于“同步”视图的传入模式。在视图的<b>传入/传出模式下</b> ，传入更改和冲突的行为是相同的，但命令将还原传出更改为存储库内容的任何内容。如果在Incoming / Outgoing模式下使用此命令，请务必谨慎。</p>

<h3 class="related">相关概念</h3>
<a href="../concepts/concepts-26.htm">使用CVS进行团队编程</a><br>
<a href="../concepts/concepts-30.htm">与CVS存储库同步</a>

<h3 class="related">相关任务</h3>
<a href="tasks-114.htm">提交</a><br>
<a href="tasks-113b.htm">解决冲突</a><br>
<a href="tasks-68.htm">比较资源</a><br>
<a href="tasks-100d.htm">版本控制生命周期：添加和忽略资源</a>

<h3 class="related">相关参考</h3>
<a href="../reference/ref-47.htm">CVS</a><br>
<a href="../reference/ref-33.htm">同步视图</a>

</body>
</html>
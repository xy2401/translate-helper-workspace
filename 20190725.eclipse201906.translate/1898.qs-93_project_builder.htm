<html lang="zh-Hans" >
<head>
<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2011. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page.">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="STYLESHEET" href="../book.css" type="text/css" charset="ISO-8859-1">
<title>创建项目构建器Ant构建文件</title>

</head>
<body >
<h1>创建项目构建器Ant构建文件</h1>
<p>为了了解项目构建器的工作原理，我们将创建一个简单的项目，其中包含单个源文件和一个用于破坏单个类文件的Ant构建文件。虽然此示例使用Java，但应注意项目构建器可用于所有项目，Java或其他项目。</p>
<ol>
  <li>创建名为<code>HW</code>的Java项目。</li>
  <li>使用main方法创建名为<code>HelloWorld</code>的Java源文件。</li>
  <li>在main方法中放置一个<code>System.out.println()</code>语句，并使其打印出您选择的问候语。</li>
  <li>保存更改。</li>
  <li>创建名为<code>projectBuilder.xml</code>的文件，在其上打开<b><a href="../reference/ref-anteditor.htm">Ant编辑器</a></b> ，输入以下内容并保存更改。
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="HW.makejar" default="makejar" basedir="."&gt;
  &lt;target name ="makejar" description="Create a jar for the HW project"&gt;
    &lt;jar jarfile="HelloWorld.jar" includes="*.class" basedir="bin"/&gt;
  &lt;/target&gt;
&lt;/project&gt;
</pre>
  </li>
  <li>在其中一个导航视图中，选择HW项目，然后从其上下文菜单中选择“ <b>属性”</b> 。</li>
  <li>在项目属性对话框中，选择“ <b>构建器”</b> ，然后单击“ <b>新建...”</b> 。
  </li>
  <li>在<strong>Choose configuration type</strong>对话框中，选择<strong>Ant build</strong> ，然后单击<b>OK</b> 。</li>
  <li>出现“ <strong>外部工具”</strong>对话框。将名称设置为<code>Makejar</code> 。在<b>Main选项卡中</b> ，单击<strong>Buildfile</strong> <b>Browse Workspace ...</b> 并将<b>Location</b>设置为上面创建的<code>projectBuilder.xml</code>构建文件。然后单击<strong>基本目录</strong> <b>浏览工作区...</b> 并将基本目录设置为HW项目。
    <p><img src="../images/ant_builder_main_tab.png" alt="外部工具对话框的主选项卡" border="0"></p>
  </li>
  <li>在<b>Refresh</b>选项卡中，我们希望确保在创建<code>HelloWorld.jar</code>时，我们在Eclipse中看到它。默认情况下，在项目构建器完成运行时不会进行刷新，因此请<b>在完成时</b>选中<b>Refresh资源</b> ，然后在范围变量列表中选择<b>包含所选资源的项目</b> 。因为刷新可能很昂贵，所以通常应该刷新包含将受构建文件影响的所有资源的最小实体。
    <p><img src="../images/ant_builder_refresh_tab.png" alt="外部工具对话框的刷新选项卡" border="0"></p>
  </li>
  <li>在“ <b>目标”</b>选项卡中，您可以指定何时执行此项目构建器以及指定哪些目标。默认情况下， <code>default</code>目标设置为<strong>在“清理”</strong>和“ <strong>手动构建</strong> <strong>”之后</strong>运行。您可以指定其他目标和其他触发器。可以在自动构建期间运行项目构建器，但由于性能问题，不推荐使用。有关构建类型的更多信息，请访问<a href="qs-93a_project_builder_targets.htm">此处</a> 。
    <p><img src="../images/ant_builder_targets_tab.png" alt="外部工具对话框的目标选项卡" border="0"></p>
  </li>
  <li>应用更改并单击“ <b>确定”</b> 。</li>
  <li>回到项目属性对话框，您现在将看到一个名为<code>Makejar</code>的项目构建器，该构建器设置为在默认<b><a href="PLUGINS_ROOT/org.eclipse.jdt.doc.user/concepts/concept-java-builder.htm">Java构建器</a></b>之后运行。单击“ <b>确定”</b>以保存项目构建器并关闭对话框。<br>
    <strong>注意：</strong>您可以更改顺序，以便在<b><a href="PLUGINS_ROOT/org.eclipse.jdt.doc.user/concepts/concept-java-builder.htm">Java构建器</a></b>之前运行Ant构建文件，尽管在此示例中这没有意义。
    <p><img src="../images/builder_property_page.png" alt="项目属性对话框" border="0"></p>
  </li>
</ol>
<p><b><a href="PLUGINS_ROOT/org.eclipse.jdt.doc.user/concepts/concept-java-builder.htm">Java构建器</a></b>运行内部Eclipse Java编译器，后者负责索引源代码，以便可以使用搜索，重构和许多其他功能。因此，无法使用项目构建器替换内部Eclipse Java编译器。您可以禁用<b><a href="PLUGINS_ROOT/org.eclipse.jdt.doc.user/concepts/concept-java-builder.htm">Java构建器，</a></b>并且可以控制Java Builder何时针对您定义的项目构建器运行。</p>

<h3 class="related">相关任务</h3>
	<a href="qs-82_create.htm">创建Ant构建文件</a><br>
	<a href="qs-93a_project_builder_targets.htm">项目构建器Ant目标</a><br>
	<a href="qs-83_edit.htm">编辑Ant构建文件</a><br>
	<a href="qs-85_ant_configs.htm">保存和重用Ant选项</a><br>
	<a href="qs-84_run_ant.htm">运行Ant构建文件</a><br>
	<a href="qs-92_project_builders.htm">Ant buildfiles作为项目构建者</a><br>
	<a href="qs-94_run_pj.htm">执行项目构建器</a><br>
	<a href="qs-95_external_tools.htm">外部工具</a><br>
	<a href="qs-96_non_ant_pjs.htm">非Ant项目构建者</a><br>
	<a href="qs-97_standalone_ets.htm">独立的外部工具</a>

</body>
</html>
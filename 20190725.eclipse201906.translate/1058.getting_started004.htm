<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<title>使用持久字段创建Java持久性实体</title>
<meta name="copyright" content="Copyright (c) 2000, 2009 oracle . All rights reserved. This program and the accompanying materials are made available under the terms of the Eclipse Public License 2.0 which accompanies this distribution, and is available at http://www.eclipse.org/legal/epl-2.0/. Contributors: Oracle - initial API and implementation">
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = ohj/ohw) - Version 1.0.11">
<meta name="date" content="2013-04-05T12:21:20Z">
<meta name="robots" content="noarchive">
<meta name="doctitle" content="Creating a Java persistent entity with persistent fields">
<meta name="relnum" content="Release 3.3">
<meta name="partnum" content="Release 3.3">
<link rel="copyright" href="dcommon/html/cpyr.htm" title="Copyright" type="text/html">
<link rel="stylesheet" href="dcommon/css/blafdoc.css" title="Oracle BLAFDoc" type="text/css">
</head>
<body dir="ltr">
<p><a id="BABFGDDG" name="BABFGDDG"></a></p>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h1>使用持久字段创建Java持久性实体</h1>
<p><a id="sthref12" name="sthref12"></a>本快速入门展示了如何创建新的持久Java实体。我们将创建一个与数据库表关联的实体。您还需要将ADDRESS表添加到数据库中。</p>
<ol>
<li>
<p>在Navigator或Project Explorer中选择JPA项目，然后单击<span class="bold">New&gt; Other</span> 。将出现“选择向导”对话框。</p>
</li>
<li>
<p>选择<span class="bold">JPA&gt; Entity</span> ，然后单击<span class="bold">Next</span> 。将显示“ <a href="ref_EntityClassPage.htm#CIAFEIGF">实体类”页面</a> 。</p>
</li>
<li>
<p>输入包名称（例如<code>quickstart.demo.model</code> ），类名称（例如<code>Address</code> ），然后单击<span class="bold">Next</span> 。此时将显示“ <a href="ref_EntityPropertiesPage.htm#CIADECIA">实体属性”页面</a> ，您可以使用该<a href="ref_EntityPropertiesPage.htm#CIADECIA">页面</a>定义持久性字段，这些字段将映射到数据库表的列。</p>
</li>
<li>
<p><a id="sthref13" name="sthref13"></a><a id="sthref14" name="sthref14"></a>使用“实体字段”对话框（通过单击“ <span class="bold">添加”</span>调用）将持久性字段添加到“地址”类：</p>
<pre xml:space="preserve" class="oac_no_warn">
private Long id;
private String city;
private String country;
private String stateOrProvince;
private String postalCode;
private String street;
</pre>
<div align="center">
<div class="inftblnote"><br>
<table class="Note oac_no_warn" cellpadding="3" cellspacing="0" summary="">
<tbody>
<tr>
<td align="left">
<p class="notep1">注意：</p>
<p>您还需要将以下列添加到<code>ADDRESS</code>数据库表：</p>
<pre xml:space="preserve" class="oac_no_warn">
NUMBER(10,0) ADDRESS_ID (primary key)
VARCHAR2(80) PROVINCE
VARCHAR2(80) COUNTRY
VARCHAR2(20) P_CODE
VARCHAR2(80) STREET
VARCHAR2(80) CITY
</pre></td>
</tr>
</tbody>
</table>
<br></div>
<!-- class="inftblnote" --></div>
</li>
<li>
<p>单击<span class="bold">完成</span> 。完成Create JPA Entity向导后，Eclipse将在JPA Structure视图中显示<span class="bold">Address</span>实体。</p>
</li>
</ol>
<p><code>Address.java</code>包含<code>@Entity</code>注释，持久性字段，以及每个字段的<code>getter</code>和<code>setter</code>方法。</p>
<div class="figure"><a id="sthref15" name="sthref15"></a>
<p class="titleinfigure">Address.java中的地址实体</p>
<img src="img/java_editor_address.png" alt="带有Address实体的Java编辑器。" title="带有Address实体的Java编辑器。"><br></div>
<!-- class="figure" -->
<p>Eclipse还在JPA Structure视图中显示<span class="bold">Address</span>实体。</p>
<div class="figure"><a id="sthref16" name="sthref16"></a>
<p class="titleinfigure">在JPA结构视图中寻址实体</p>
<img src="img/address_java_JPA_structure_quickstart.png" alt="JPA结构视图中的Address.java。" title="JPA结构视图中的Address.java。"><br></div>
<!-- class="figure" -->
<p>创建实体后，必须将其与数据库表关联。</p>
<ol>
<li>
<p>在Project Explorer视图中选择<span class="gui-object-action">Address</span>类。</p>
</li>
<li>
<p>在<span class="gui-object-title">JPA Details</span>视图中，请注意Dali已自动将<code>ADDRESS</code>数据库表与实体关联，因为它们的名称相同。</p>
<div class="figure"><a id="sthref17" name="sthref17"></a>
<p class="titleinfigure">JPA详细信息查看地址实体</p>
<img src="img/address.java_jpa_details.png" alt="JPA详细信息视图中的Address.java。" title="JPA详细信息视图中的Address.java。"><br></div>
<!-- class="figure" -->
<div align="center">
<div class="inftblnote"><br>
<table class="Note oac_no_warn" cellpadding="3" cellspacing="0" summary="">
<tbody>
<tr>
<td align="left">
<p class="notep1">注意：</p>
<p>根据您的数据库连接类型，您可能需要指定<span class="bold">架构</span> 。</p>
</td>
</tr>
</tbody>
</table>
<br></div>
<!-- class="inftblnote" --></div>
</li>
</ol>
<div align="center">
<div class="inftblnotealso"><br>
<table class="NoteAlso oac_no_warn" cellpadding="3" cellspacing="0" summary="">
<tbody>
<tr>
<td align="left">
<p class="notep1">小费：</p>
<p>将实体与数据库表关联后，应更新<code>persistence.xml</code>文件以包含此JPA实体。</p>
<p>右键单击Project Explorer中的<code>persistence.xml</code>文件，然后选择<span class="bold">JPA Tools&gt; Synchronize Class List</span> 。Dali将以下内容添加到<code>persistence.xml</code>文件中：</p>
<p><code>&lt;class&gt;quickstart.demo.model.Address&lt;/class&gt;</code></p>
</td>
</tr>
</tbody>
</table>
<br></div>
<!-- class="inftblnotealso" --></div>
<p>现在我们准备将Address类中的每个字段映射到数据库表中的一列。</p>
<ol>
<li>
<p>在JPA Details视图中选择<span class="gui-object-action">id</span>字段。</p>
</li>
<li>
<p>右键单击id，然后选择<span class="bold">Map As&gt; id</span> 。</p>
</li>
<li>
<p>在JPA Details视图中，在Name字段中选择<span class="bold">ADDRESS_ID</span> ：</p>
<div class="figure"><a id="sthref18" name="sthref18"></a>
<p class="titleinfigure">JPA详细信息查看addressId字段</p>
<img src="img/address_id_details_quickstart.png" alt="Address实体的id属性的JPA Details视图。" title="Address实体的id属性的JPA Details视图。"><br></div>
<!-- class="figure" -->
<p>Eclipse将以下注释添加到Address实体：</p>
<pre xml:space="preserve" class="oac_no_warn">
@Id
@Column(name="ADDRESS_ID")
</pre></li>
<li>
<p>将以下每个字段（作为<span class="bold">基本</span>映射）映射到相应的数据库列：</p>
<div class="inftblhruleinformal">
<table class="HRuleInformal" title="此表描述了Address实体中每个字段的映射。" dir="ltr" border="1" width="100%" cellpadding="3" cellspacing="0" summary="This table describes the mappings for each of the fields in the Address entity." frame="hsides" rules="rows">
<col width="*">
<col width="33%">
<col width="33%">
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t8">领域</th>
<th align="left" valign="bottom" id="r1c2-t8">地图为</th>
<th align="left" valign="bottom" id="r1c3-t8">数据库列</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t8" headers="r1c1-t8">
<p><code>city</code></p>
</td>
<td align="left" headers="r2c1-t8 r1c2-t8">
<p>基本</p>
</td>
<td align="left" headers="r2c1-t8 r1c3-t8">
<p><code>CITY</code></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t8" headers="r1c1-t8">
<p><code>country</code></p>
</td>
<td align="left" headers="r3c1-t8 r1c2-t8">
<p>基本</p>
</td>
<td align="left" headers="r3c1-t8 r1c3-t8">
<p><code>COUNTRY</code></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t8" headers="r1c1-t8">
<p><code>postalCode</code></p>
</td>
<td align="left" headers="r4c1-t8 r1c2-t8">
<p>基本</p>
</td>
<td align="left" headers="r4c1-t8 r1c3-t8">
<p><code>P_CODE</code></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t8" headers="r1c1-t8">
<p><code>provinceOrState</code></p>
</td>
<td align="left" headers="r5c1-t8 r1c2-t8">
<p>基本</p>
</td>
<td align="left" headers="r5c1-t8 r1c3-t8">
<p><code>PROVINCE</code></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t8" headers="r1c1-t8">
<p><code>street</code></p>
</td>
<td align="left" headers="r6c1-t8 r1c2-t8">
<p>基本</p>
</td>
<td align="left" headers="r6c1-t8 r1c3-t8">
<p><code>STREET</code></p>
</td>
</tr>
</tbody>
</table>
<br></div>
<!-- class="inftblhruleinformal" --></li>
</ol>
<p>如果名称相同，Dali会自动将某些字段映射到正确的数据库列（例如<code>city</code>字段到<code>City</code>列）。</p>
</div>
<!-- class="sect2" -->
<!-- class="sect1" -->
<!-- Start Footer -->
<div class="footer">
<table class="simple oac_no_warn" cellspacing="0" cellpadding="0" width="100%" summary="">
<col width="86%">
<col width="*">
<tr>
<td align="left"><span class="copyrightlogo">版权所有©2011,2013，Oracle和/或其附属公司。版权所有。</span><br>
<a href="dcommon/html/cpyr.htm"><span class="copyrightlogo">法律声明</span></a></td>
</tr>
</table>
</div>
<!-- class="footer" -->
</body>
</html>
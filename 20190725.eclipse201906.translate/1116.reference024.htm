<html lang="zh-Hans" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii"></meta>
<meta http-equiv="Content-Style-Type" content="text/css"></meta>
<meta http-equiv="Content-Script-Type" content="text/javascript"></meta>
<title>高速缓存</title>
<meta name="copyright" content="Copyright (c) 2000, 2009 oracle . All rights reserved. This program and the accompanying materials are made available under the terms of the Eclipse Public License 2.0 which accompanies this distribution, and is available at http://www.eclipse.org/legal/epl-2.0/. Contributors: Oracle - initial API and implementation"></meta>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = ohj/ohw) - Version 1.0.11"></meta>
<meta name="date" content="2013-04-05T12:21:40Z"></meta>
<meta name="robots" content="noarchive"></meta>
<meta name="doctitle" content="Caching"></meta>
<meta name="relnum" content="Release 3.3"></meta>
<meta name="partnum" content="Release 3.3"></meta>
<link rel="copyright" href="dcommon/html/cpyr.htm" title="Copyright" type="text/html"></link>
<link rel="stylesheet" href="dcommon/css/blafdoc.css" title="Oracle BLAFDoc" type="text/css"></link>
</head>
<body dir="ltr">
<p><a id="CACJBBCA" name="CACJBBCA"></a></p>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h1>高速缓存</h1>
<p><a id="sthref479" name="sthref479"></a>此表列出了每个实体类型的<span class="gui-object-title">JPA Details</span>视图中可用的缓存信息字段。</p>
<div class="inftblhruleinformalwide">
<table class="HRuleInformalWide" title="此表描述“持久性属性”视图“常规”选项卡上的选项。" dir="ltr" border="1" width="100%" cellpadding="3" cellspacing="0" summary="This table describes the options on the Persistence Properties view, General tab." frame="hsides" rules="rows">
<col width="16%">
<col width="*">
<col width="16%">
<col width="20%">
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t26">属性</th>
<th align="left" valign="bottom" id="r1c2-t26">描述</th>
<th align="left" valign="bottom" id="r1c3-t26">默认</th>
<th align="left" valign="bottom" id="r1c4-t26">适用于实体类型</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t26" headers="r1c1-t26">
<p><span class="bold">可缓存</span></p>
</td>
<td align="left" headers="r2c1-t26 r1c2-t26">
<p>指定实体是否可缓存。</p>
<p>该字段对应于<code>@Cachable</code>注释。</p>
</td>
<td align="left" headers="r2c1-t26 r1c3-t26">
<p>真正</p>
</td>
<td align="left" headers="r2c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t26" headers="r1c1-t26">
<p>类型</p>
</td>
<td align="left" headers="r3c1-t26 r1c2-t26">
<p>选择以下之一作为默认缓存类型：</p>
<ul>
<li>
<p><span class="bold">软Subcache弱</span> - 此选项类似于<span class="bold">Weak with Hard Subcache，</span>除了它维护一个最常用的使用软引用的子<span class="bold">进程</span> 。子缓存的大小与身份映射的大小成比例。子进程使用软引用来确保仅在系统内存不足时才对这些对象进行垃圾回收。</p>
<p>在大多数情况下使用此身份映射作为控制缓存使用的内存的方法。</p>
</li>
<li>
<p><span class="bold">使用Hard Subcache弱</span> - 此选项类似于<span class="bold">Soft with Weak</span>子类，除了它维护一个最常用的使用硬引用的子类。如果软参考不适合您的平台，请使用此身份映射。</p>
</li>
<li>
<p><span class="bold">弱</span> - 这个选项类似于<span class="bold">Full</span> ，除了使用弱引用引用对象。此选项使用的内存少于<span class="bold">Full</span> ，允许完整的垃圾收集并提供完整的缓存和保证的身份。</p>
<p>将此身份映射用于一旦启动，保留在服务器端的事务。</p>
</li>
<li>
<p><span class="bold">Soft</span> -This选项类似于<span class="bold">Weak，</span>只是地图使用软引用保存对象。此标识映射在内存不足时启用完全垃圾回收。它提供完整的缓存和保证身份。</p>
</li>
<li>
<p><span class="bold">完整</span> - 此选项提供完全缓存和保证身份：所有对象都被缓存而不是被删除。</p>
<p>注意：读取许多对象时，此过程可能会占用大量内存。</p>
</li>
<li>
<p><span class="bold">无</span> - 此选项不保留对象标识，也不缓存对象。不建议使用此选项。</p>
</li>
</ul>
</td>
<td align="left" headers="r3c1-t26 r1c3-t26">
<p>软Subcache弱</p>
</td>
<td align="left" headers="r3c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t26" headers="r1c1-t26">
<p>尺寸</p>
</td>
<td align="left" headers="r4c1-t26 r1c2-t26">
<p>定义要使用的缓存大小（对象数）。</p>
</td>
<td align="left" headers="r4c1-t26 r1c3-t26">
<p>100</p>
</td>
<td align="left" headers="r4c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t26" headers="r1c1-t26">
<p><span class="bold">高级</span></p>
</td>
<td align="left" headers="r5c1-t26 r1c2-t26"><br></td>
<td align="left" headers="r5c1-t26 r1c3-t26"><br></td>
<td align="left" headers="r5c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t26" headers="r1c1-t26">
<p>到期</p>
</td>
<td align="left" headers="r6c1-t26 r1c2-t26">
<p>在固定的时间段（毫秒）之后启用缓存实例的到期。在此之后对缓存执行的查询将被强制返回数据库以获得刷新的副本。</p>
</td>
<td align="left" headers="r6c1-t26 r1c3-t26">
<p>没有到期</p>
</td>
<td align="left" headers="r6c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t26" headers="r1c1-t26">
<p>永远刷新</p>
</td>
<td align="left" headers="r7c1-t26 r1c2-t26">
<p>指定转到数据库的所有查询是否应始终刷新缓存。</p>
</td>
<td align="left" headers="r7c1-t26 r1c3-t26">
<p>假</p>
</td>
<td align="left" headers="r7c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t26" headers="r1c1-t26">
<p>仅在较新时刷新</p>
</td>
<td align="left" headers="r8c1-t26 r1c2-t26">
<p>指定仅当查询从数据库接收的数据比缓存中的数据更新时（由乐观锁定字段确定），所有转到数据库的查询是否应刷新缓存。</p>
<p><span class="bold">注意事项</span> ：</p>
<ul>
<li>
<p>此选项仅适用于已启用其他刷新选项之一（例如alwaysRefresh）的情况。</p>
</li>
<li>
<p>应用此功能需要版本字段。</p>
</li>
</ul>
</td>
<td align="left" headers="r8c1-t26 r1c3-t26">
<p>假</p>
</td>
<td align="left" headers="r8c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t26" headers="r1c1-t26">
<p>禁用点击</p>
</td>
<td align="left" headers="r9c1-t26 r1c2-t26">
<p>指定是否所有查询都应绕过高速缓存的命中，但仍然针对高速缓存解析标识。这会强制所有查询命中数据库。</p>
</td>
<td align="left" headers="r9c1-t26 r1c3-t26">
<p>假</p>
</td>
<td align="left" headers="r9c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t26" headers="r1c1-t26">
<p>协调类型</p>
</td>
<td align="left" headers="r10c1-t26 r1c2-t26">
<p>指定缓存协调模式：</p>
<ul>
<li>
<p>发送对象更改</p>
</li>
<li>
<p>使更改的对象无效</p>
</li>
<li>
<p>发送带有更改的新对象</p>
</li>
<li>
<p>没有</p>
</li>
</ul>
</td>
<td align="left" headers="r10c1-t26 r1c3-t26">
<p>发送对象更改</p>
</td>
<td align="left" headers="r10c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t26" headers="r1c1-t26">
<p><span class="bold">存在性检查</span></p>
</td>
<td align="left" headers="r11c1-t26 r1c2-t26">
<p>指定Dali应如何检查以确定实体是新的还是存在的。</p>
<ul>
<li>
<p>检查缓存 - 如果对象的主键不包含null并且它在缓存中，则它必须存在。</p>
</li>
<li>
<p>检查缓存然后数据库 - 在数据库上执行“确实存在检查”。</p>
</li>
<li>
<p>假设存在 - 如果对象的主键不包含null，则它必须存在。如果应用程序保证或不关心存在检查，您可以使用此选项。</p>
</li>
<li>
<p>假设不存在 - 假设对象不存在。如果应用程序保证或不关心存在检查，您可以使用此选项。这将始终强制执行INSERT操作。</p>
</li>
</ul>
</td>
<td align="left" headers="r11c1-t26 r1c3-t26">
<p>检查缓存然后数据库</p>
</td>
<td align="left" headers="r11c1-t26 r1c4-t26">
<p><a href="tasks004.htm#BABGBIEE">实体</a>和<a href="tasks006.htm#BABDAGCI">映射的超类</a></p>
</td>
</tr>
</tbody>
</table>
<br></div>
<!-- class="inftblhruleinformalwide" -->
<a id="sthref480" name="sthref480"></a>
<p class="subhead2">相关参考</p>
<ul>
<li>
<p><a href="ref_persistence_prop_view.htm#BABFAEBB">JPA详细信息视图（适用于实体）</a></p>
</li>
<li>
<p>Eclipse的<span class="italic">Java Persistence API（JPA）扩展参考中的</span> “缓存” <br>
<code><a href="http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_cache.htm">http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_cache.htm</a></code></p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<!-- Start Footer -->
<div class="footer">
<table class="simple oac_no_warn" cellspacing="0" cellpadding="0" width="100%" summary="">
<col width="86%">
<col width="*">
<tr>
<td align="left"><span class="copyrightlogo">版权所有©2011,2013，Oracle和/或其附属公司。版权所有。</span><br>
<a href="dcommon/html/cpyr.htm"><span class="copyrightlogo">法律声明</span></a></td>
</tr>
</table>
</div>
<!-- class="footer" -->
</body>
</html>
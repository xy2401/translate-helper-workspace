<html lang="zh-Hans" dir="ltr">
<head>

<meta name="copyright" content="Copyright (c) IBM Corporation and others 2008, 2011. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<meta http-equiv="Content-Style-Type" content="text/css"></meta>

<link rel="STYLESHEET" href="../book.css" type="text/css" charset="ISO-8859-1"></link>
<title>使用安全存储开发</title>

<link rel="stylesheet" type="text/css" href="../book.css"></link>
</head>
<body bgcolor="#ffffff" dir="ltr">

<h2>使用安全存储开发</h2>

<h4>中央类和接口</h4>

<p>安全存储的功能通过<b>org.eclipse.equinox.security</b>包的API公开。<b><a href="../reference/api/org/eclipse/equinox/security/storage/package-summary.html">org.eclipse.equinox.security.storage</a></b>包中包含几个可能作为起点的类和接口。</p>

<p><a href="../reference/api/org/eclipse/equinox/security/storage/SecurePreferencesFactory.html"><b>SecurePreferencesFactory</b></a>可用于获取安全首选项的根节点。<a href="../reference/api/org/eclipse/equinox/security/storage/SecurePreferencesFactory.html#getDefault()"><b>SecurePreferencesFactory＃getDefault（）</b></a>方法将返回默认的安全首选项根节点。如果您希望将安全存储与应用程序的其余部分隔离，则可以使用<a href="../reference/api/org/eclipse/equinox/security/storage/SecurePreferencesFactory.html#open(java.net.URL, java.util.Map)"><b>SecurePreferencesFactory #open（URL位置，映射选项）</b></a>方法打开与您选择的位置相对应的安全存储。此方法还会获取可选提示的映射，这些提示可用于影响此安全存储实例的行为。</p>

<p>对节点名称的限制类似于<a href="https://osgi.org/javadoc/r4v42/org/osgi/service/prefs/Preferences.html" title="org.osgi.service.prefs中的首选项规范"><b>OSGi首选项</b></a> ：没有双正斜杠，没有正斜杠。此外，节点名称只能包含可打印的ASCII字符。如果需要使用不符合这些限制的字符串，可以使用<a href="../reference/api/org/eclipse/equinox/security/storage/EncodingUtils.html"><b>EncodingUtils</b></a>类将字符串转换为兼容形式。</p>

<p><a href="../reference/api/org/eclipse/equinox/security/storage/ISecurePreferences.html"><b>ISecurePreferences</b></a>接口描述了节点提供的功能。您会发现此界面与OSGi首选项非常相似，但有一些细微差别。其中一个区别是许多方法使用<a href="../reference/api/org/eclipse/equinox/security/storage/StorageException.html"><b>StorageException</b></a>来提供更详细的异常描述。</p>

<h4>调试</h4>

<p>可以在中看到默认安全存储的内容<a class="command-link" href="javascript:void(0);"><img src="PLUGINS_ROOT/org.eclipse.help/command_link.png" alt="命令链接"> <strong>常规&gt;安全性&gt;安全存储</strong></a>首选项页面。要启用对安全存储内容的修改，请启用<b>org.eclipse.equinox.security.ui</b>包的调试选项。启用调试选项会将上下文菜单添加到首选项页面树和值表。上下文菜单允许直接从首选项页面执行节点和值的删除和添加。</p>

<p>您会注意到<i>“org.eclipse.equinox.secure.storage”</i>节点的上下文菜单已禁用。此节点及其子节点保留用于安全存储使用，不应直接修改。</p>

</body>
</html>
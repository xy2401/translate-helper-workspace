<html lang="zh-Hans" dir="ltr">
<head>
<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2011. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<meta http-equiv="Content-Style-Type" content="text/css"></meta>
<link rel="STYLESHEET" href="../book.css" type="text/css" charset="ISO-8859-1"></link>
<script src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" type="text/javascript" language="JavaScript"></script>
<title>编写帮助动作</title>
</head>
<body dir="ltr">

<h3>编写帮助动作</h3>

<p><a href="../reference/api/org/eclipse/help/ILiveHelpAction.html"><b>ILiveHelpAction</b></a>接口用于构建活动的帮助操作。</p>


<p>实现<a href="../reference/api/org/eclipse/help/ILiveHelpAction.html"><b>ILiveHelpAction</b></a>很简单<b>。</b> 您必须实现两种方法。</p>


<ul>
  <li><b>run（）</b> - 调用此方法以运行实时帮助操作。帮助系统将从非UI线程调用此方法，因此UI访问必须包装在<b><a href="../reference/api/org/eclipse/swt/widgets/Display.html">Display.syncExec（）</a></b>方法中。</li>
  <li><b>setInitializationString（String）</b> - 调用此方法以使用您可以在运行JavaScript <b>liveAction</b>的HTML中指定的String数据参数初始化您的操作。如果您不需要初始化数据，则只需实现此方法即可。在<b>run（）</b>之前调用此方法。</li>
</ul>


<p>以下是打开消息对话框的实时帮助操作的简单实现。我们不需要JavaScript中的任何信息，因此忽略初始化数据。</p>


<pre>package org.eclipse.platform.doc.isv.activeHelp; import org.eclipse.help。ILiveHelpAction; import org.eclipse.jface.dialogs。MessageDialog; import org.eclipse.swt.widgets。*; import org.eclipse.ui。*; / ** *活动帮助操作示例。* / public class ActiveHelpOpenDialogAction实现ILiveHelpAction {public void setInitializationString（String data）{//忽略数据。我们不使用任何javascript参数。} public void run（）{//活动帮助不在UI线程上运行，因此我们必须使用syncExec Display.getDefault（）。syncExec（new Runnable（）{public void run（）{IWorkbenchWindow window = PlatformUI.getWorkbench（ ）.getActiveWorkbenchWindow（）; if（窗口！= null）{//将Workbench窗口置于其他窗口的顶部; //在某些Windows系统上，它只会闪现任务栏上的Workbench //图标Shell shell = window.getShell（）; shell.setMinimized（假）; shell.forceActive（）; //打开一个消息对话框MessageDialog.openInformation（window.getShell（），“Hello World。”，“Hello World。”）; }}}; }}</pre>

</body>
</html>
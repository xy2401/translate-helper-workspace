<html lang="zh-Hans" dir="ltr">
<head>

<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2010. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page."></meta>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<meta http-equiv="Content-Style-Type" content="text/css"></meta>
<link rel="STYLESHEET" href="../book.css" type="text/css" charset="ISO-8859-1"></link>
<title>使用补丁</title>
</head>

<body bgcolor="#ffffff" dir="ltr">
<h1>使用补丁</h1>

<p>修补程序允许开发人员共享工作而不将其存储在存储库中。当开发人员想要为通过存储库共享但没有对存储库的写访问权的项目做出贡献时，这很有用。在这种情况下，开发人员可以创建补丁，并将其通过电子邮件发送给具有写入权限的开发人员，或者将其附加到项目使用的错误报告系统中的错误，具体取决于项目定义的过程。具有写访问权限的开发人员可以将修补程序应用于项目并提交更改。</p>
<h2>要从CVS项目创建补丁：</h2>
<ol>
  <li>选择包含要包含在修补程序中的修改的资源。您可以选择驻留在多个项目和任何级别的资源，因为Create Patch向导在默认模式下运行时，知道如何创建多项目修补程序。补丁也应该应用于生成它的相同文件修订版，因此应该采取措施确保补丁应用于相同的资源阵容（最简单的方法是在顶部创建补丁）厌恶）。</li>
  <li>从弹出菜单中，选择<b>Team&gt; Create Patch ....</b>Create Patch向导将打开。</li>
  <li>选择应该保存补丁的位置：<ol type="a">
      <li><i>保存到剪贴板</i> - 这会将修补程序放在剪贴板上，以便将其粘贴到文本编辑器（如电子邮件程序）中。</li>
      <li><i>保存到文件系统</i> - 这会将修补程序放在本地文件系统中的指定文件中</li>
      <li><i>保存在工作区中</i> - 这会将补丁放在指定文件中的一个现有工作台项目中。</li>
    </ol>对于小补丁，使用剪贴板传输补丁可能是合理的，但在大多数情况下，本地文件系统是最佳选择。</li>
    <li>您可以通过展开“更改”窗格中显示的“资源”树来预览和微调您的修补程序选择。只有那些被检查的元素才会包含在补丁中。单击“ <b>下一步”</b>配置补丁的生成方式。</li>
  <li>选择如何配置补丁：<ol type="a">
      <li><i>DIFF输出格式</i> -允许的几种常见的diff输出格式的选择。<i>Unified</i>是许多补丁应用程序工具（包括Eclipse）使用的格式。Context和Unified diffs中使用的格式允许应用补丁，即使为hunk（补丁术语）提到的行号不正确。在这种情况下，当应用补丁时，算法向前和向后扫描一组与匹配为大块给出的上下文的行。</li>
      <li><i>补丁根</i> - 允许您指定补丁根据的级别。选择是<i>工作区</i> ， <i>项目</i>和<i>选择</i> 。<br>
      <br><i>Workspace</i>允许您在补丁中包含多个项目的资源，这是<em>默认</em>选项。工作区修补程序可以应用于工作空间中的任何资源 - 它们包含足够的信息以允许“应用修补程序”向导确定需要修补哪些资源。<br>
      <br><i>项目</i>补丁根植于项目级别 - 这意味着它们只能包含来自一个项目的资源，并且必须应用于同一项目。<br>
      <br><i>选择</i>修补程序以所选资源为根，并且必须应用于同一资源。
   	</li>
    </ol>
  </li>
  <li>单击<b>完成</b> 。</li>
  <li>根据要修补的项目传输补丁。</li>
</ol>
<h2>要应用补丁：</h2>
<ol>
  <li>选择生成修补程序的资源。此资源应包含与生成修补程序的阵容相同的文件修订。</li>
  <li>从弹出菜单中，选择<b>Team&gt; Apply Patch ....</b>“应用修补程序”向导将打开。<br><br>这也可以通过将补丁内容复制到剪贴板并通过选择“ <b>编辑”&gt;“粘贴”</b>将其直接粘贴到“包资源管理器”视图中来实现。在这种情况下，您可以跳过下一步。</li>
  <li>指示要找到补丁的位置：<ol type="a">
      <li><i>文件</i> - 补丁位于本地文件系统的文件中。键入文件的完整路径或使用“ <b>浏览...”</b>按钮查找文件。</li>
      <li><i>剪贴板</i> - 补丁在剪贴板上。<b>警告：</b>使用基于文件的补丁更安全。如果使用剪贴板并且在不同平台（即Linux与Windows）上生成补丁，则可能无法正确处理行结尾。</li>
       <li><i>URL</i> - 补丁位于给定的URL下。 <b>警告：</b>确保您输入的URL有效并包含正确的修补程序。否则你将无法申请。此外，请记住，直接从URL应用修补程序可能需要一些时间。
       </li> 
       <li><i>工作区</i> - 修补程序已保存在工作区的某个位置。</li>
    </ol>单击“ <b>下一步”</b>以查看应用修补程序的效果。</li>
  <li>
  <b>可选步骤</b> ： <i>此步骤适用，仅当您有一个以项目或选择级别为根的补丁时 - 工作区根目录补丁将自动进入补丁预览页面。</i> 在“修补程序目标规范”页面中，您应该选择要充当修补程序根目录的资源。
  </li>
  <li>修补程序预览页面显示修补程序是否可以成功应用于工作区中的文件。顶部窗格显示修补程序中包含的更改列表。顶部窗格中有两种类型的条目：文件更改和不匹配的修补程序段（在修补程序术语中称为“hunk”）。
  <ol type="a">
  <li>如果一个或多个补丁段可以自动应用于该文件，则该文件将显示一个传入的更改指示符。您可以通过双击文件来检查更改。</li>
  <li>如果无法自动应用一个或多个帅哥，则hunk条目将显示为顶部窗格中文件的子项，并且红色感叹号表示补丁或块状物存在问题。您可以通过双击检查大块。然后，您可以手动将右侧窗格中的hunk应用到左侧的文件中。从左窗格保存将更新顶部窗格中的父文件条目，但不会修改磁盘上的文件。仅在按下完成时修改磁盘上的文件。为了成功应用完整补丁，您必须通过手动应用补丁段，通过从上下文菜单中选择“ <strong>删除</strong> ”或通过调整此选项来从操作中排除补丁段来消除问题（红色感叹号）。向导页面（参见下面的“选项”）。
  </li>
  </ol>
  </li>
  <li>如果一切正常，请单击“ <b>完成”</b>以应用修补程序。工作区现在将包含修补程序修改的每个文件的传出更改。</li>
</ol>

<p>可以通过将补丁与本地内容同步来应用补丁</p>   

<h3>要与补丁同步：</h3>
<ol>
	<li>从Team Synchronizing透视图中选择<strong>Synchronize ...</strong> 来自Synchronize的动作<img src="../images/synch_participants.png" alt="" border="0">按钮下拉。
	</li>
	<li>从可能的同步类型列表中选择<strong>Synchronize with Patch</strong> ，然后单击<strong>Next</strong> 。
	</li>
	<li>指示要找到补丁的位置：<ol type="a">
      <li><i>文件</i> - 补丁位于本地文件系统的文件中。键入文件的完整路径或使用“ <b>浏览...”</b>按钮查找文件。</li>
      <li><i>剪贴板</i> - 补丁在剪贴板上。<b>警告：</b>使用基于文件的补丁更安全。如果使用剪贴板并且在不同平台（即Linux与Windows）上生成补丁，则可能无法正确处理行结尾。</li>
       <li><i>URL</i> - 补丁位于给定的URL下。 <b>警告：</b>确保您输入的URL有效并包含正确的修补程序。否则您将无法应用该补丁。此外，请记住，直接从URL应用修补程序可能需要一些时间。
       </li>
       <li><i>工作区</i> - 修补程序已保存在工作区的某个位置。</li>
    </ol>单击“ <b>下一步”</b>以查看应用修补程序的效果。
    </li>
	<li>
		<b>可选步骤</b> ： <i>此步骤适用，仅当您有一个以项目或选择级别为根的补丁时 - 工作区根目录补丁将自动进入补丁预览页面。</i> 在“修补程序目标规范”页面中，您应该选择要充当修补程序根目录的资源。
	</li>
	<li>
		<b>可选步骤</b> ： <i>此步骤适用，仅当您的补丁引用无法访问的项目时 - 如果补丁中的所有项目都存在于工作区中且已打开，则将跳过此页面。</i> 在Inaccessible Projects页面中，您可以打开任何已关闭的项目。此外，还将显示有关不存在项目的详细信息。无法修补工作空间中已关闭或不存在的项目。
	</li>
	<li>在最后一页上，单击“ <b>完成”</b>以在“同步”视图中预览修补程序更改。
	</li>
</ol>

<h3>应用补丁的选项</h3>要获得补丁文件的成功匹配，您有以下选择：<ol>
   	
   		<li>返回Apply Patch向导的第一页，选择要应用补丁的正确资源。
   		</li>
   	
   	  	<li>如果修补程序文件中存储的路径名的公共前缀与当前工作空间中的路径名不匹配，则可以<i>忽略前导路径名段</i> 。
  		</li>

   	  	<li>使用“ <i>忽略空白”</i>按钮使匹配过程独立于补丁文件与工作空间中的文件之间的空白差异。
  		</li>

   	  	<li>调整<i>Fuzz因子</i> （补丁术语）。此因子指示要忽略的Hunk上下文行的数量。如果Fuzz因子值为零，则所有行都需要匹配。如果模糊因子大于零，例如2，则忽略大块之前的前两个上下文行和大块之后的最后两个上下文行。单击“ <b>猜测”</b>以计算允许匹配最多的帅哥的模糊因子。
  		</li>

   	  	<li>对已应用于工作区的修补程序文件使用“ <i>反向修补程序”</i>选项。此选项对撤消或重做补丁也很有用。
  		</li>

  		<li>对于Workspace修补程序，您可以在工作区中选择另一个项目以应用修补程序更改。为此，请在顶部窗格中选择一个项目，然后从上下文菜单中选择“ <b>移动</b> ”。这将启动一个对话框，其中包含工作区中所有可用项目的列表。选择一个项目并单击“ <b>确定”</b> ;修补程序更改将应用于您选择的项目。
  		</li>

  		<li>使用“ <i>显示已排除”</i>选项可显示已选择未包含在修补程序中的区域。
		</li>

		<li>与补丁同步时，上面的选项可在Synchronize View的下拉菜单中找到。您还可以在可用模型之间切换，以获取有关所应用更改的额外信息。
  		</li>

   	</ol>


<h3 class="related">相关概念</h3>
<a href="../concepts/concepts-26.htm">使用CVS进行团队编程</a>

<h3 class="related">相关任务</h3>
<a href="tasks-68.htm">比较资源</a><br>
<a href="tasks-115.htm">与存储库同步</a>

<h3 class="related">相关参考</h3>
<a href="../reference/ref-19.htm">球队</a><br>
<a href="../reference/ref-47.htm">CVS</a>

</body>
</html>
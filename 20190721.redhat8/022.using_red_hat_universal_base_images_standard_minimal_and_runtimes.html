<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 4. Using Red Hat Universal Base Images (standard, minimal, and runtimes)</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="using_red_hat_universal_base_images_standard_minimal_and_runtimes"/>Chapter 4. Using Red Hat Universal Base Images (standard, minimal, and runtimes)</h1></div></div></div><p>
			Red Hat Enterprise Linux (RHEL) base images are meant to form the foundation for the container images you build. For RHEL 8, all Red Hat base images are available as new Universal Base Images (UBI). These include versions of RHEL standard, minimal, init, and Red Hat Software Collections that are all now freely available and redistributable. Characteristics of RHEL base images include:
		</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
					<span class="strong"><strong>Supported</strong></span>: Supported by Red Hat for use with your containerized applications. Contains the same secured, tested, and certified software packages you have in Red Hat Enterprise Linux.
				</li><li class="listitem">
					<span class="strong"><strong>Cataloged</strong></span>: Listed in the <a class="link" href="https://access.redhat.com/containers/">Red Hat Container Catalog</a>, where you can find descriptions, technical details, and a health index for each image.
				</li><li class="listitem">
					<span class="strong"><strong>Updated</strong></span>: Offered with a well-defined update schedule, so you know you are getting the latest software (see <a class="link" href="https://access.redhat.com/articles/2208321">Red Hat Container Image Updates</a>).
				</li><li class="listitem">
					<span class="strong"><strong>Tracked</strong></span>: Tracked by errata, to help you understand the changes that go into each update.
				</li><li class="listitem">
					<span class="strong"><strong>Reusable</strong></span>: Only need to be downloaded and cached in your production environment once, where each base image can be reused by all containers that include it as their foundation.
				</li></ul></div><p>
			Red Hat Universal Base Images (UBI) for RHEL 8 provide the same quality RHEL software for building container images as their non-UBI predecessors (<code class="literal">rhel6</code>, <code class="literal">rhel7</code>, <code class="literal">rhel-init</code>, and <code class="literal">rhel-minimal</code> base images), but offer more freedom in how they are used and distributed.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="what_are_red_hat_base_images"/>What are Red Hat base images?</h1></div></div></div><p>
				Red Hat provides multiple base images that you can use as a starting point for your own images. These images are available through the Red Hat Registry (registry.access.redhat.com and registry.redhat.io) and described in the <a class="link" href="https://access.redhat.com/containers/?count=10#/category/Base%20Image">Red Hat Container Catalog</a>.
			</p><p>
				For RHEL 8, there are standard, minimal and init base image available. Red Hat also provides a set of <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_software_collections/3/html-single/using_red_hat_software_collections_container_images/">Red Hat Software Collections</a> images that you can build on when you are creating containers for applications that require specific runtimes. These include python, php, nodejs, and others. All of these images RHEL 8 images are UBI images, which means that you can freely obtain and redistribute them.
			</p><p>
				There is a set of RHEL 7 images as well that you can run on RHEL 8 systems. For RHEL 7, there are both UBI (redistributable) and non-UBI (require subscription access and are non-redistributable) base images. Those images include three regular base images (<code class="literal">rhel7</code>, <code class="literal">rhel-init</code>, and <code class="literal">rhel-minimal</code>) and three UBI images (<code class="literal">ubi7</code>, <code class="literal">ubi7-init</code>, and <code class="literal">ubi7-minimal</code>).
			</p><p>
				Although Red Hat does not offer tools for running containers on RHEL 6 systems, it does offer RHEL 6 container images you can use. There are standard (<code class="literal">rhel6</code>) and Init (<code class="literal">rhel6-init</code>) base image available for RHEL 6, but no minimal RHEL 6 image. Likewise, there are no RHEL 6 UBI images.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_standard_red_hat_base_images"/>Using standard Red Hat base images</h2></div></div></div><p>
					Standard RHEL 8 base images (<code class="literal">ubi8</code>) have a robust set of software features that include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<span class="strong"><strong>init system</strong></span>: All the features of the systemd initialization system you need to manage systemd services are available in the standard base images. These init systems let you install RPM packages that are pre-configured to start up services automatically, such as a Web server (httpd) or FTP server (vsftpd).
						</li><li class="listitem">
							<span class="strong"><strong>yum</strong></span>: Software needed to install software packages is included via the standard set of <code class="literal">yum</code> commands (<code class="literal">yum</code>, <code class="literal">yum-config-manager</code>, <code class="literal">yumdownloader</code>, and so on). For the UBI base images, you have access to free yum repositories for adding and updating software.
						</li><li class="listitem">
							<span class="strong"><strong>utilities</strong></span>: The standard base image includes some useful utilities for working inside the container. Utilities that are in this base image that are not in the minimal images include <code class="literal">ps</code>, <code class="literal">tar</code>, <code class="literal">cpio</code>, <code class="literal">dmidecode</code>, <code class="literal">gzip</code>, <code class="literal">lsmod</code> (and other module commands), <code class="literal">getfacl</code> (and other acl commands), <code class="literal">dmsetup</code> (and other device mapper commands), and others.
						</li><li class="listitem">
							<span class="strong"><strong>python</strong></span>: Python runtime libraries and modules (currently Python 2.7) are included in the standard base image.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_minimal_red_hat_base_images"/>Using minimal Red Hat base images</h2></div></div></div><p>
					The <code class="literal">ubi8-minimal</code> images are stripped-down RHEL images to use when a bare-bones base image in desired. If you are looking for the smallest possible base image to use as part of the larger Red Hat ecosystem, you can start with these minimal images.
				</p><p>
					RHEL minimal images provide a base for your own container images that is less than half the size of the standard image, while still being able to draw on RHEL software repositories and maintain any compliance requirements your software has.
				</p><p>
					Here are some features of the minimal base images:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<span class="strong"><strong>Small size</strong></span>: Minimal images are about 75M on disk and 28M compressed. This makes it less than half the size of the standard images.
						</li><li class="listitem">
							<span class="strong"><strong>Software installation (microdnf)</strong></span>: Instead of including the full-blown yum facility for working with software repositories and RPM software packages, the minimal images includes the microdnf utility. Microdnf is a scaled-down version of dnf. It includes only what is needed to enable and disable repositories, as well as install, remove, and update packages. It also has a clean option, to clean out cache after packages have been installed.
						</li><li class="listitem">
							<span class="strong"><strong>Based on RHEL packaging</strong></span>: Because minimal images incorporate regular RHEL software RPM packages, with a few features removed such as extra language files or documentation, you can continue to rely on RHEL repositories for building your images. This allows you to still maintain compliance requirements you have that are based on RHEL software. Features of minimal images make them perfect for trying out applications you want to run with RHEL, while carrying the smallest possible amount of overhead. What you don’t get with minimal images is an initialization and service management system (systemd or System V init), a Python run-time environment, and a bunch of common shell utilities.
						</li></ul></div><p>
					If your goal, however, is just to try to run some simple binaries or pre-packaged software that doesn’t have a lot of requirements from the operating system, the minimal images might suit your needs. If your application does have dependencies on other software from RHEL, you can simply use microdnf to install the needed packages at build time.
				</p><p>
					Red Hat intends for you to always use the latest version of the minimal images, which is implied by simply requesting <code class="literal">ubi8/ubi-minimal</code> or <code class="literal">ubi8-minimal</code>. Red Hat does not expect to support older versions of minimal images going forward.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_init_red_hat_base_images"/>Using Init Red Hat base images</h2></div></div></div><p>
					The UBI <code class="literal">ubi8-init</code> images contains the systemd initialization system, making them useful for building images in which you want to run systemd services, such as a web server or file server. The Init image contents are less than what you get with the standard images, but more than what is in the minimal images.
				</p><p>
					Historically, Red Hat Enterprise Linux base container images were designed for Red Hat customers to run enterprise applications, but were not free to redistribute. This can create challenges for some organizations that need to redistribute their applications. That’s where the Red Hat Universal Base Images come in.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="how_are_ubi_images_different"/>How are UBI images different?</h1></div></div></div><p>
				UBI images were created so you can build your container images on a foundation of official Red Hat software that can be freely shared and deployed. From a technical perspective, they are nearly identical to legacy Red Hat Enterprise Linux images, which means they have great security, performance, and life cycles, but they are released under a different End User License Agreement. Here are some attributes of Red Hat UBI images:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<span class="strong"><strong>Built from a subset of RHEL content</strong></span>: Red Hat Universal Base images are built from a subset of normal Red Hat Enterprise Linux content. All of the content used to build selected UBI images is released in a publicly available set of yum repositories. This lets you install extra packages, as well as update any package in UBI base images.
					</li><li class="listitem">
						<span class="strong"><strong>Redistributable</strong></span>: The intent of UBI images is to allow Red Hat customers, partners, ISVs, and others to standardize on one container base image, allowing users to focus on application needs instead of distribution rules. These images can be shared and run in any environment capable of running those images. As long as you follow some basic guidelines, you will be able to freely redistribute your UBI-based images.
					</li><li class="listitem">
						<span class="strong"><strong>Base and RHSCL images</strong></span>: Besides the three types of base images, UBI versions of some <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_software_collections/3/html-single/using_red_hat_software_collections_container_images/">Red Hat Software Collections</a> (RHSCL) runtime images are available as well. These RHSCL images provide a foundation for applications that can benefit from standard, supported runtimes such as python, php, nodejs, and ruby.
					</li><li class="listitem"><p class="simpara">
						<span class="strong"><strong>Enabled yum repositories</strong></span>: The following yum repositories are enabled within each RHEL 8 UBI image:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								The <code class="literal">rhubi-8.0-baseos</code> repo holds the redistributable subset of RHEL packages you can include in your container.
							</li><li class="listitem">
								The <code class="literal">rhubi-8.0-appstream</code> repo holds Red Hat Software Collections packages that you can add to a UBI image to help you standardize the environments you use with applications that require particular runtimes.
							</li></ul></div></li><li class="listitem">
						<span class="strong"><strong>Licensing</strong></span>: You are free to use and redistribute UBI images, provided you adhere to the <a class="link" href="https://www.redhat.com/licenses/EULA_Red_Hat_Universal_Base_Image_English_20190422.pdf">Red Hat Universal Base Image End User Licensing Agreement</a>.
					</li><li class="listitem">
						<span class="strong"><strong>Adding UBI RPMs</strong></span>: You can add RPM packages to UBI images from preconfigured UBI repositories. If you happen to be in a disconnected environment, you must whitelist the UBI Content Delivery Network (<a class="link" href="https://cdn-ubi.redhat.com">https://cdn-ubi.redhat.com</a>) to use that feature. See the <a class="link" href="https://access.redhat.com/solutions/4165521">Connect to https://cdn-ubi.redhat.com</a> solution for details.
					</li></ul></div><p>
				Although the legacy RHEL 7 base images will continue to be supported, UBI images are recommended going forward. For that reason, examples in the rest of this chapter are done with RHEL 8 UBI images.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="get_ubi_images"/>Get UBI images</h1></div></div></div><p>
				The following table shows the UBI base images currently available. Notice that some of those images have multiple names you can use to refer to them.
			</p><div class="table"><a id="idm140360638268608"/><p class="title"><strong>Table 4.1. Available Red Hat Universal Base Images</strong></p><div class="table-contents"><table summary="Available Red Hat Universal Base Images" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/><col class="col_4"/></colgroup><thead><tr><th style="text-align: left" valign="top">Registry names</th><th style="text-align: left" valign="top">Namespace</th><th style="text-align: left" valign="top">Image</th><th style="text-align: left" valign="top">RHEL version</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								registry.access.redhat.com
							</p>
							 <p>
								registry.redhat.io
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								/
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ubi8
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi8-minimal
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi8-init
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								registry.access.redhat.com
							</p>
							 <p>
								registry.redhat.io
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ubi8/
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ubi
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi-init
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi-minimal
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								s2i-core
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								s2i-base
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								dotnet-21-runtime
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								dotnet-21
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								perl-526
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								php-72
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								nodejs-10
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ruby-25
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								python-27
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								python-36
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								registry.redhat.io
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								rhel8
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								s2i-core
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								s2i-base
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								dotnet-21-runtime
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								dotnet-21
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								nginx-114
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								perl-526
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								php-72
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								nodejs-10
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								httpd-24
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								redis-5
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								varnish-6
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ruby-25
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								python-27
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								python-36
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								memcached
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								net-snmp
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								sssd
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ipa-server
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								support-tools
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								rsyslog
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								GCC
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								rust-toolset
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								go-toolset
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								llvm-toolset
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								postgresql-10
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								postgresql-96
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								mysql-80
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								mariadb-103
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								8.0.0
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								registry.access.redhat.com
							</p>
							 <p>
								registry.redhat.io
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								/
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ubi7
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi7-minimal
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi7-init
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								registry.access.redhat.com
							</p>
							 <p>
								registry.redhat.io
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ubi7/
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								ubi
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi-init
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ubi-minimal
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								php-72
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								nodejs-8
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								ruby-25
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								python-27
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								python-36
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								s2i-core
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top"> <p>
								s2i-base
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								7.6.4
							</p>
							 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="pull_ubi_images"/>Pull UBI images</h1></div></div></div><p>
				To pull UBI images to your system so you can use them with tools such as podman, buildah or skopeo, type the following:
			</p><pre class="screen"># podman pull registry.access.redhat.com/ubi8/ubi:latest
# podman pull registry.access.redhat.com/ubi/ubi-minimal:latest</pre><p>
				To check that the images are available on your system, type:
			</p><pre class="screen"># podman images
REPOSITORY                                   TAG    IMAGE ID       CREATED      SIZE
registry.access.redhat.com/ubi8/ubi-minimal  latest  c94a444803e3  8 hours ago  80.9 MB
registry.access.redhat.com/ubi8/ubi          latest  40b488f87628  17 hours ago 214 MB</pre><p>
				When pulled in this way, images are available and usable by <code class="literal">podman</code>, <code class="literal">buildah</code>, <code class="literal">skopeo</code> and the CRI-O container image, but they are not available to the Docker service or <code class="literal">docker</code> command. To use these images with Docker, you can run <code class="literal">docker pull</code> instead.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="redistributing_ubi_images"/>Redistributing UBI images</h1></div></div></div><p>
				After you pull a UBI image, you are free to push it to your own registry and share it with others. You can upgrade or add to that image from UBI yum repositories as you like. Here is an example of how to push a UBI image to your own or another third-party repository:
			</p><pre class="screen"># podman pull registry.redhat.io/ubi8/ubi
# podman tag registry.access.redhat.com/ubi8/ubi registry.example.com:5000/ubi8/ubi
# podman push registry.example.com:5000/ubi8/ubi</pre><p>
				While there are few restrictions on how you use these images, there are some restrictions about how you can refer to them. For example, you can’t call those images Red Hat certified or Red Hat supported unless you certify it through the <a class="link" href="https://connect.redhat.com">Red Hat Partner Connect Program</a>, either with Red Hat Container Certification or Red Hat OpenShift Operator Certification.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="run_ubi_images"/>Run UBI images</h1></div></div></div><p>
				To start a container from a UBI image and run the bash shell in that image (so you can look around inside), do the following (type exit when you are done):
			</p><pre class="screen"># podman run --rm -it registry.access.redhat.com/ubi8/ubi-minimal:latest /bin/bash
[root@da9213157c51 /]#
# podman run --rm -it registry.access.redhat.com/ubi8/ubi:latest /bin/bash
bash-4.2#</pre><p>
				While in the container:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Run <code class="literal">rpm -qa</code> to see a list of package inside each container.
					</li><li class="listitem">
						Type <code class="literal">yum list available</code> to see packages available to add to the image from the UBI yum repos. (The yum command is not available in the <code class="literal">ubi-minimal</code> containers.)
					</li><li class="listitem">
						Get source code, as described in the "Getting UBI Container Image Source Code," later in this chapter.
					</li></ul></div><p>
				On systems that include the Docker service, you can use <code class="literal">docker run</code> instead.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="add_software_to_a_running_ubi_container"/>Add software to a running UBI container</h1></div></div></div><p>
				UBI images are built from 100% Red Hat content. These UBI images also provide a subset of Red Hat Enterprise Linux packages that are freely available to install for use with UBI. To add or update software, UBI images are pre-configured to point to the freely available yum repositories that hold official Red Hat RPMs.
			</p><p>
				To add packages from UBI repos to running UBI containers:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						On <code class="literal">ubi</code> images, the yum command is installed to let you draw packages
					</li><li class="listitem">
						On <code class="literal">ubi-minimal</code> images, the <code class="literal">microdnf</code> command (with a smaller feature set) is included instead of <code class="literal">yum</code>.
					</li></ul></div><p>
				Keep in mind that installing and working with software packages directly in running containers is just for adding packages temporarily or learning about the repos. Refer to the “Build a UBI-based image” for more permanent ways of building UBI-based images.
			</p><p>
				When you add software to a UBI container, procedures differ for updating UBI images on a subscribed RHEL host or on an unsubscribed (or non-RHEL) system. Those two ways of working with UBI images are illustrated below.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding_software_to_a_ubi_container_subscribed_host"/>Adding software to a UBI container (subscribed host)</h2></div></div></div><p>
					If you are running a UBI container on a registered and subscribed RHEL host, the main RHEL Server repository is enabled inside the standard UBI container, along with all the UBI repos. So the full set of Red Hat packages is available. From the UBI minimal container, all UBI repos are enabled by default, but no repos are enabled from the host by default.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding_software_inside_the_standard_ubi_container"/>Adding software inside the standard UBI container</h2></div></div></div><p>
					To ensure the containers you build can be redistributed, disable subscription management in the standard UBI image when you add software. If you disable the subscription-manager plugin, only packages from the freely available repos are used when you add software.
				</p><p>
					With a shell open inside a standard UBI base image container (<code class="literal">ubi8/ubi</code>) from a subscribed RHEL host, run the following command to add a package to that container (for example, the bzip2 package):
				</p><pre class="screen"># yum install --disableplugin=subscription-manager bzip2</pre><p>
					To add software inside a standard UBI container that is in the RHEL server repo, but not in UBI repos, leave the subscription-manager plugin intact and just install the package:
				</p><pre class="screen"># yum install zsh</pre><p>
					To install a package that is in a different host repo from inside the standard UBI container, you have to explicitly enable the repo you need. For example:
				</p><pre class="screen"># yum install --enablerepo=rhel-7-server-optional-rpms zsh-html</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						Installing Red Hat packages that are not inside the Red Hat UBI repos might limit how widely you can distribute the container outside of subscribed hosts.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding_software_inside_the_minimal_ubi_container"/>Adding software inside the minimal UBI container</h2></div></div></div><p>
					UBI yum repositories are enabled inside the UBI minimal image by default.
				</p><p>
					To install the same package demonstrated earlier (bzip2) from one of those UBI yum repositories on a subscribed RHEL host from the UBI minimal container, type:
				</p><pre class="screen"># microdnf install bzip2</pre><p>
					To install packages inside a minimal UBI container from repos available on a subscribed host that are not part of a UBI yum repo, you would have to explicitly enable those repos. For example:
				</p><pre class="screen"># microdnf install --enablerepo=rhel-7-server-rpms zsh
# microdnf install --enablerepo=rhel-7-server-rpms \
        --enablerepo=rhel-7-server-optional-rpms zsh-html</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
						Using non-UBI RHEL repositories to install packages in your UBI images could restrict your ability to share those images to run outside of subscribed RHEL systems.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding_software_to_a_ubi_container_unsubscribed_host"/>Adding software to a UBI container (unsubscribed host)</h2></div></div></div><p>
					To add software packages to a running container that is either on an unsubscribed RHEL host or some other Linux system, you don’t have to disable the subscription-manager plugin. For example:
				</p><pre class="screen"># yum install bzip2</pre><p>
					To install that package on a subscribed RHEL host from the UBI minimal container, type:
				</p><pre class="screen"># microdnf install bzip2</pre><p>
					As noted earlier, both of these means of adding software to a running UBI container are not intended for creating permanent UBI-based container images. For that, you should build new layers on to UBI images, as described in the following section.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="build_a_ubi_based_image"/>Build a UBI-based image</h2></div></div></div><p>
					You can build UBI-based container images in the same way you build other images, with one exception. You should disable Red Hat subscriptions when you actually build the images, if you want to be sure that your image only contains Red Hat software that you can redistribute.
				</p><p>
					Here’s an example of creating a UBI-based Web server container from a Dockerfile with the <code class="literal">buildah</code> utility:
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						For ubl8/ubi-minimal images, use microdnf instead of yum below:
					</p><pre class="screen">RUN microdnf update -y &amp;&amp; rm -rf /var/cache/yum
RUN microdnf install httpd -y &amp;&amp; microdnf clean all</pre></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							<span class="strong"><strong>Create a Dockerfile</strong></span>: Add a <code class="literal">Dockerfile</code> with the following contents to a new directory:
						</p><pre class="screen">FROM registry.access.redhat.com/ubi8/ubi
USER root
LABEL maintainer="John Doe"
# Update image
RUN yum update --disableplugin=subscription-manager -y &amp;&amp; rm -rf /var/cache/yum
RUN yum install --disableplugin=subscription-manager httpd -y &amp;&amp; rm -rf /var/cache/yum
# Add default Web page and expose port
RUN echo "The Web Server is Running" &gt; /var/www/html/index.html
EXPOSE 80
# Start the service
CMD ["-D", "FOREGROUND"]
ENTRYPOINT ["/usr/sbin/httpd"]</pre></li><li class="listitem"><p class="simpara">
							<span class="strong"><strong>Build the new image</strong></span>: While in that directory, use <code class="literal">buildah</code> to create a new UBI layered image:
						</p><pre class="screen"># buildah bud -t johndoe/webserver .
STEP 1: FROM registry.access.redhat.com/ubi8/ubi:latest
STEP 2: USER root
STEP 3: LABEL maintainer="John Doe"
STEP 4: RUN yum update --disableplugin=subscription-manager -y
. . .
No packages marked for update
STEP 5: RUN yum install --disableplugin=subscription-manager httpd -y
Loaded plugins: ovl, product-id, search-disabled-repos
Resolving Dependencies
--&gt; Running transaction check
=============================================================
 Package                  Arch               Version                        Repository                    Size
=============================================================
Installing:
 httpd              x86_64 2.4.37-10
                                              latest-rhubi-8.0-appstream 1.4 M
Installing dependencies:
 apr                x86_64 1.6.3-9.el8        latest-rhubi-8.0-appstream 125 k
 apr-util           x86_64 1.6.1-6.el8        latest-rhubi-8.0-appstream 105 k
 httpd-filesystem   noarch 2.4.37-10
                                              latest-rhubi-8.0-appstream  34 k
 httpd-tools        x86_64 2.4.37-10.
...

Transaction Summary
...
Complete!
STEP 6: RUN echo "The Web Server is Running" &gt; /var/www/html/index.html
STEP 7: EXPOSE 80
STEP 8: CMD ["-D", "FOREGROUND"]
STEP 9: ENTRYPOINT ["/usr/sbin/httpd"]
STEP 10: COMMIT
...
Writing manifest to image destination
Storing signatures
--&gt; 36a604cc0dd3657b46f8762d7ef69873f65e16343b54c63096e636c80f0d68c7</pre></li><li class="listitem"><p class="simpara">
							<span class="strong"><strong>Test</strong></span>: Test the UBI layered webserver image:
						</p><pre class="screen"># podman run -d -p 80:80 johndoe/webserver
bbe98c71d18720d966e4567949888dc4fb86eec7d304e785d5177168a5965f64
# curl http://localhost/index.html
The Web Server is Running</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_red_hat_software_collections_runtime_images"/>Using Red Hat Software Collections runtime images</h2></div></div></div><p>
					Red Hat Software Collections offers another set of container images that you can use as the basis for your container builds. These images are built on RHEL standard base images, with some already updated as UBI images. Each of these images include additional software you might want to use for specific runtime environments.
				</p><p>
					So, if you expect to build multiple images that require, for example, php runtime software, you can use provide a more consistent platform for those images by starting with a PHP software collections image.
				</p><p>
					Here are a few examples of Red Hat Software Collections container images built on UBI base images, that are available from the Red Hat Registry (registry.access.redhat.com or registry.redhat.io):
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<span class="strong"><strong>ubi8/php-72</strong></span>: PHP 7.2 platform for building and running applications
						</li><li class="listitem">
							<span class="strong"><strong>ubi8/nodejs-10</strong></span>: Node.js 10 platform for building and running applications. Used by Node.js 10 Source-To-Image builds
						</li><li class="listitem">
							<span class="strong"><strong>ubi8/ruby25</strong></span>: Ruby 2.5 platform for building and running applications
						</li><li class="listitem">
							<span class="strong"><strong>ubi8/python-27</strong></span>: Python 2.7 platform for building and running applications
						</li><li class="listitem">
							<span class="strong"><strong>ubi8/python-36</strong></span>: Python 3.6 platform for building and running applications
						</li><li class="listitem">
							<span class="strong"><strong>ubi8/s2i-core</strong></span>: Base image with essential libraries and tools used as a base for builder images like perl, python, ruby, and so on
						</li><li class="listitem">
							<span class="strong"><strong>ubi8/s2i-base</strong></span>: Base image for Source-to-Image builds
						</li></ul></div><p>
					Because these UBI images container the same basic software as their legacy image counterparts, you can learn about those images from the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_software_collections/3/html-single/using_red_hat_software_collections_container_images/index"> Using Red Hat Software Collections Container Images</a> guide. Be sure to use the UBI image names to pull those images.
				</p><p>
					Red Hat Software Collections container images are updated every time RHEL base images are updated. Search the <a class="link" href="https://access.redhat.com/containers">Red Hat Container Catalog</a> for details on any of these images. For more information on update schedules, see <a class="link" href="https://access.redhat.com/articles/2208321:">Red Hat Container Image Updates</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="getting_ubi_container_image_source_code"/>Getting UBI Container Image Source Code</h2></div></div></div><p>
					You can download the source code for all UBI base images (excluding the minimal images) by starting up those images with a bash shell and running the following set of commands from inside that container:
				</p><pre class="screen"># yum install yum-utils -y
# for i in `rpm -qa`
    do
       yumdownloader --source $i
    done</pre><p>
					The source code RPM for each binary RPM package is downloaded to the current directory. Because the UBI minimal images include a subset of RPMs from the regular UBI images, running the <code class="literal">yumdownloader</code> loop just shown will get you the minimal image packages as well.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="tips_and_tricks_for_using_ubi_images"/>Tips and tricks for using UBI images</h2></div></div></div><p>
					Here are a few issues to consider when working with UBI images:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Hundreds of RPM packages used in existing Red Hat Software Collections runtime images are stored in the yum repositories packaged with the new UBI images. Feel free to install those RPMs on your UBI images to emulate the runtime (python, php, nodejs, etc.) that interests you.
						</li><li class="listitem">
							Because some language files and documentation have been stripped out of the minimal UBI image (<code class="literal">ubi8/ubi-minimal</code>), running <code class="literal">rpm -Va</code> inside that container will show the contents of many packages as being missing or modified. If having a complete list of files inside that container is important to you, consider using a tool such as <code class="literal">Tripwire</code> to record the files in the container and check it later.
						</li><li class="listitem">
							After a layered image has been created, use <code class="literal">podman history</code> to check which UBI image it was built on. For example, after completing the webserver example shown earlier, type <code class="literal">podman history johndoe/webserver</code> to see that the image it was built on includes the image ID of the UBI image you added on the FROM line of the Dockerfile.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="how_to_request_new_features_in_ubi"/>How to request new features in UBI?</h2></div></div></div><p>
					Red Hat partners and customers can request new features, including package requests, by filing a support ticket through standard methods. Non-Red Hat customers do not receive support, but can file requests through the standard Red Hat Bugzilla for the appropriate RHEL product. See also: <a class="link" href="https://red.ht/2UmqzEH">Red Hat Bugzilla Queue</a>
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="how_to_file_a_support_case_for_ubi"/>How to file a support case for UBI?</h2></div></div></div><p>
					Red Hat partners and customers can file support tickets through standard methods when running UBI on a supported Red Hat platform (OpenShift/RHEL). Red Hat support staff will guide partners and customers
				</p><p>
					See also: <a class="link" href="https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;">Open a Support Case</a>
				</p></div></div></div></body></html>
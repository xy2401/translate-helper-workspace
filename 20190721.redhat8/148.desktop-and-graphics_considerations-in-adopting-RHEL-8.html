<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 18. Desktop and graphics</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="desktop-and-graphics_considerations-in-adopting-RHEL-8"/>Chapter 18. Desktop and graphics</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="gnome-shell-is-the-default-desktop-environment_desktop-and-graphics"/>GNOME Shell is the default desktop environment</h1></div></div></div><p>
				RHEL 8 is distributed with GNOME Shell as the default desktop environment.
			</p><p>
				All packages related to KDE Plasma Workspaces (KDE) have been removed, and it is no longer possible to use KDE as an alternative to the default GNOME desktop environment.
			</p><p>
				Red Hat does not support migration from RHEL 7 with KDE to RHEL 8 GNOME. Users of RHEL 7 with KDE are recommended to back up their data and install RHEL 8 with GNOME Shell.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="notable-changes-in-gnome-shell_desktop-and-graphics"/>Notable changes in GNOME Shell</h1></div></div></div><p>
				RHEL 8 is distributed with GNOME Shell, version 3.28.
			</p><p>
				This section:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Highlights enhancements related to GNOME Shell, version 3.28.
					</li><li class="listitem">
						Informs about the change in default combination of GNOME Shell environment and display protocol.
					</li><li class="listitem">
						Explains how to access features that are not available by default.
					</li><li class="listitem">
						Explains changes in GNOME tools for software management.
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-shell-in-rhel-8_notable-changes-in-gnome-shell"/>GNOME Shell, version 3.28 in RHEL 8</h2></div></div></div><p>
					GNOME Shell, version 3.28 is available in RHEL 8. Notable enhancements include:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							New GNOME Boxes features
						</li><li class="listitem">
							New on-screen keyboard
						</li><li class="listitem">
							Extended devices support, most significantly integration for the Thunderbolt 3 interface
						</li><li class="listitem">
							Improvements for GNOME Software, dconf-editor and GNOME Terminal
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-shell-environments_notable-changes-in-gnome-shell"/>GNOME Shell environments</h2></div></div></div><p>
					GNOME 3 provides two essential environments:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							GNOME Standard
						</li><li class="listitem">
							GNOME Classic
						</li></ul></div><p>
					Both environments can use two different protocols to build a graphical user interface:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The <span class="strong"><strong>X11</strong></span> protocol, which uses <span class="strong"><strong>X.Org</strong></span> as the display server.
						</li><li class="listitem"><p class="simpara">
							The <span class="strong"><strong>Wayland</strong></span> protocol, which uses <span class="strong"><strong>GNOME Shell</strong></span> as the <span class="strong"><strong>Wayland</strong></span> compositor and display server.
						</p><p class="simpara">
							This solution of display server is further referred as <span class="strong"><strong>GNOME Shell on Wayland</strong></span>.
						</p></li></ul></div><p>
					The default combination in RHEL 8 is GNOME Standard environment using <span class="strong"><strong>GNOME Shell on Wayland</strong></span> as the display server.
				</p><p>
					However, you may want to switch to another combination of GNOME Shell environment and graphics protocol stack. For more information, see <a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="Selecting GNOME environment and display protocol">the section called “Selecting GNOME environment and display protocol”</a>.
				</p><p>
					For more information on basics of using both GNOME Shell environments, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#gnome-environments_starting-using-gnome">Managing RHEL systems from your desktop</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="desktop-icons_notable-changes-in-gnome-shell"/>Desktop icons</h2></div></div></div><p>
					In RHEL 8, the Desktop icons functionality is no longer provided by the Nautilus file manager, but by the desktop icons gnome-shell extension.
				</p><p>
					To be able to use the extension, you must install the <code class="literal">gnome-shell-extension-desktop-icons</code> package available in the Appstream repository.
				</p><p>
					For more information on Desktop icons in RHEL 8, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#desktop-icons_starting-using-gnome">Managing RHEL systems from your desktop</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="fractional-scaling_notable-changes-in-gnome-shell"/>Fractional scaling</h2></div></div></div><p>
					On a <span class="strong"><strong>GNOME Shell on Wayland</strong></span> session, the fractional scaling feature is available. The feature makes it possible to scale the GUI by fractions, which improves the appearance of scaled GUI on certain displays.
				</p><p>
					Note that the feature is currently considered experimental and is, therefore, disabled by default.
				</p><p>
					To enable fractional scaling, run the following command:
				</p><pre class="literallayout"># gsettings set org.gnome.mutter experimental-features "['scale-monitor-framebuffer']"</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-software-for-package-management_notable-changes-in-gnome-shell"/>GNOME Software for package management</h2></div></div></div><p>
					The <code class="literal">gnome-packagekit</code> package that provided a collection of tools for package management in graphical environment on RHEL 7 is no longer available.
				</p><p>
					On RHEL 8, similar functionality is provided by the <span class="strong"><strong>GNOME Software</strong></span> utility, which enables you to install and update applications and gnome-shell extensions. <span class="strong"><strong>GNOME Software</strong></span> is distributed in the <code class="literal">gnome-software</code> package.
				</p><p>
					For more information for installing applications with <span class="strong"><strong>GNOME software</strong></span>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#installing-applications_starting-using-gnome">Managing RHEL systems from your desktop</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="opening-graphical-applications-with-sudo_notable-changes-in-gnome-shell"/>Opening graphical applications with sudo</h2></div></div></div><p>
					When attempting to open a graphical application in a terminal using the <code class="literal">sudo</code> command, you must do the following:
				</p><h4><a id="x11_applications"/>X11 applications</h4><p>
					If the application uses the <code class="literal">X11</code> display protocol, add the local user <code class="literal">root</code> in the X server access control list. As a result, <code class="literal">root</code> is allowed to connect to <code class="literal">Xwayland</code>, which translates the <code class="literal">X11</code> protocol into the <code class="literal">Wayland</code> protocol and reversely.
				</p><div class="example"><a id="idm139646225050848"/><p class="title"><strong>Example 18.1. Adding <code class="literal">root</code> to the X server access control list to open xclock with sudo</strong></p><div class="example-contents"><p>
						$ xhost +si:localuser:root
					</p><p>
						$ sudo xclock
					</p></div></div><h4><a id="wayland_applications"/>Wayland applications</h4><p>
					If the application is <code class="literal">Wayland</code> native, include the <code class="literal">-E</code> option.
				</p><div class="example"><a id="idm139646225045168"/><p class="title"><strong>Example 18.2. Opening GNOME Calculator with sudo</strong></p><div class="example-contents"><p>
						$ sudo -E gnome-calculator
					</p></div></div><p>
					Otherwise, if you type just <code class="literal">sudo</code> and the name of the application, the operation of opening the application fails with the following error message:
				</p><pre class="literallayout">No protocol specified
Unable to init server: could not connect: connection refused
# Failed to parse arguments: Cannot open display</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="selecting-gnome-environment-modified_desktop-and-graphics"/>Selecting GNOME environment and display protocol</h1></div></div></div><p>
				For switching between various combinations of GNOME environment and graphics protocol stacks, use the following procedure.
			</p><h3><a id="procedure"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						From the login screen (GDM), click the cogwheel next to the <span class="strong"><strong>Sign In</strong></span> button.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							You cannot access this option from the lock screen. The login screen appears when you first start RHEL 8 or when you log out of your current session.
						</p></div><p class="simpara">
						<span class="inlinemediaobject"><img src="images/gnome-environments-new.png" alt="gnome environments new"/></span>

					</p></li><li class="listitem"><p class="simpara">
						From the drop-down menu that appears, select the option that you prefer.
					</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							Note that in the menu that appears on the login screen, the <span class="strong"><strong>X.Org</strong></span> display server is marked as <span class="strong"><strong>X11</strong></span> display server.
						</p></div></li></ol></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					The change of GNOME environment and graphics protocol stack resulting from the above procedure is persistent across user logouts, and also when powering off or rebooting the computer.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="graphics-stack_desktop-and-graphics"/>Graphics stack</h1></div></div></div><p>
				In RHEL 8, you can choose between two protocols to build a graphical user interface:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						X11
					</li><li class="listitem">
						Wayland
					</li></ul></div><p>
				The <span class="strong"><strong>X11</strong></span> protocol uses <span class="strong"><strong>X.Org</strong></span> as the display server. Displaying graphics based on this protocol works the same way as in RHEL 7, where this was the only option.
			</p><p>
				The <span class="strong"><strong>Wayland</strong></span> protocol on RHEL 8 uses <span class="strong"><strong>GNOME Shell</strong></span> as its compositor and display server, which is further referred as <span class="strong"><strong>GNOME Shell on Wayland</strong></span>.
			</p><p>
				New installations of RHEL 8 automatically select <span class="strong"><strong>GNOME Shell on Wayland</strong></span>, so the <span class="strong"><strong>Wayland</strong></span> protocol is used by default. However, due to <a class="link" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#current-wayland-limitations-modified_graphics-stack" title="Current Wayland limitations">Current Wayland limitations</a> or in <a class="link" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#environments-where-x11-is-preferred-over-wayland_graphics-stack" title="Environments where X11 is preferred over Wayland">Environments where X11 is preferred over Wayland</a>, you may want to switch to <span class="strong"><strong>X.Org</strong></span>, or select the required combination of GNOME environment and display server as described in <a class="link" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="Selecting GNOME environment and display protocol">Selecting GNOME environment and display protocol</a>.
			</p><p>
				This section describes:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Key differences between <span class="strong"><strong>Wayland</strong></span> and <span class="strong"><strong>X11</strong></span>
					</li><li class="listitem">
						Current <span class="strong"><strong>Wayland</strong></span> limitations
					</li><li class="listitem">
						Environments where <span class="strong"><strong>X11</strong></span> is preferred over <span class="strong"><strong>Wayland</strong></span>
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="key-differences-between-wayland-and-x11_graphics-stack"/>Key differences between Wayland and X11</h2></div></div></div><h4><a id="x11_applications_2"/>X11 Applications</h4><p>
					Client applications need to be ported to the <span class="strong"><strong>Wayland</strong></span> protocol or use a graphical toolkit that has a <span class="strong"><strong>Wayland</strong></span> backend, such as GTK, to be able to work natively with the compositor and display server based on <span class="strong"><strong>Wayland</strong></span>.
				</p><p>
					Legacy <span class="strong"><strong>X11</strong></span> applications that cannot be ported to <span class="strong"><strong>Wayland</strong></span> automatically use <span class="strong"><strong>Xwayland</strong></span> as a proxy between the <span class="strong"><strong>X11</strong></span> legacy clients and the <span class="strong"><strong>Wayland</strong></span> compositor. <span class="strong"><strong>Xwayland</strong></span> functions both as an <span class="strong"><strong>X11</strong></span> server and a <span class="strong"><strong>Wayland</strong></span> client. The role of <span class="strong"><strong>Xwayland</strong></span> is to translate the <span class="strong"><strong>X11</strong></span> protocol into the <span class="strong"><strong>Wayland</strong></span> protocol and reversely, so that <span class="strong"><strong>X11</strong></span> legacy applications can work with the display server based on <span class="strong"><strong>Wayland</strong></span>.
				</p><p>
					On <span class="strong"><strong>GNOME Shell on Wayland</strong></span>, <span class="strong"><strong>Xwayland</strong></span> is started automatically at startup, which ensures that most <span class="strong"><strong>X11</strong></span> legacy applications work as expected when using <span class="strong"><strong>GNOME Shell on Wayland</strong></span>. However, the <span class="strong"><strong>X11</strong></span> and <span class="strong"><strong>Wayland</strong></span> protocols are different, and so some clients relying on <span class="strong"><strong>X11</strong></span>-specific features may behave differently under <span class="strong"><strong>Xwayland</strong></span>. For such specific clients, you can switch to the <span class="strong"><strong>X.Org</strong></span> display server as described in <a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="Selecting GNOME environment and display protocol">the section called “Selecting GNOME environment and display protocol”</a>.
				</p><h4><a id="libinput"/>libinput</h4><p>
					RHEL 8 uses a new unified input stack, <code class="literal">libinput</code>, which manages all common device types, such as mice, touchpads, touchscreens, tablets, trackballs and pointing sticks. This unified stack is used both by the <span class="strong"><strong>X.Org</strong></span> and by the <span class="strong"><strong>GNOME Shell on Wayland</strong></span> compositor.
				</p><p>
					<span class="strong"><strong>GNOME Shell on Wayland</strong></span> uses <code class="literal">libinput</code> directly for all devices, and no switchable driver support is available. Under <code class="literal">X.Org</code>, <code class="literal">libinput</code> is implemented as the <code class="literal">X.Org libinput</code> driver. For information on driver support under <code class="literal">X.Org</code>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#libinput">Managing RHEL systems from your desktop</a>.
				</p><h4><a id="gestures"/>Gestures</h4><p>
					<span class="strong"><strong>GNOME Shell on Wayland</strong></span> supports new touchpad and touchscreen gestures. These gestures include:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Switching workspaces by dragging up or down with four fingers.
						</li><li class="listitem">
							Opening the Activities Overview by bringing three fingers closer together.
						</li></ul></div><h4><a id="additional_information"/>Additional information</h4><p>
					For more information on differences between <span class="strong"><strong>Wayland</strong></span> and <span class="strong"><strong>X11</strong></span>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#wayland-differences-xorg_displaying-graphics">Managing RHEL systems from your desktop</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="current-wayland-limitations-modified_graphics-stack"/>Current Wayland limitations</h2></div></div></div><p>
					Using the <span class="strong"><strong>Wayland</strong></span> display protocol has currently multiple notable limitations:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Proprietary Nvidia binary drivers are not supported.
						</li><li class="listitem">
							Certain traditional VNC tools are not available.
						</li><li class="listitem">
							The X Display Manager Control Protocol (XDMCP) is not supported.
						</li></ul></div><p>
					Other limitations include:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							X.Org* screen manipulation utilities are not available.
						</li><li class="listitem">
							The <code class="literal">xrandr</code> utility is not supported because <span class="strong"><strong>Wayland</strong></span> handles layout, rotations, and resolutions differently.
						</li><li class="listitem">
							The GNOME Shell cannot be restarted using the <code class="literal">ALT+F2/r</code> method.
						</li><li class="listitem">
							Due to stability issues, using <span class="strong"><strong>X11</strong></span> instead of <span class="strong"><strong>Wayland</strong></span> is recommended in virtual environments.
						</li><li class="listitem">
							<span class="strong"><strong>Wayland</strong></span> does not support the custom or niche devices that cannot be handled by the <code class="literal">libinput</code> driver.
						</li></ul></div><p>
					For more information on current <span class="strong"><strong>Wayland</strong></span> limitations, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#wayland-limitations_displaying-graphics">Managing RHEL systems from your desktop</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="environments-where-x11-is-preferred-over-wayland_graphics-stack"/>Environments where X11 is preferred over Wayland</h2></div></div></div><p>
					In certain environments, <span class="strong"><strong>X11</strong></span> is preferred over <span class="strong"><strong>Wayland</strong></span>:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Cirrus graphics used in a VM environment
						</li><li class="listitem">
							Matrox graphics
						</li><li class="listitem">
							Aspeed graphics
						</li><li class="listitem">
							QXL graphics used in a VM environment
						</li><li class="listitem">
							Nvidia graphics when used with the proprietary driver
						</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						The Nvidia graphics by default use <code class="literal">Nouveau</code>, which is an open source driver. <code class="literal">Nouveau</code> is supported on <span class="strong"><strong>GNOME Shell on Wayland</strong></span>, so you can use Nvidia graphics with <code class="literal">Nouveau</code> without any limitations. However, using Nvidia graphics with proprietary Nvidia binary drivers is not supported on <span class="strong"><strong>GNOME Shell on Wayland</strong></span>. In this case, switch to <span class="strong"><strong>X.Org</strong></span> as described in <a class="xref" href="desktop-and-graphics_considerations-in-adopting-RHEL-8.html#selecting-gnome-environment-modified_desktop-and-graphics" title="Selecting GNOME environment and display protocol">the section called “Selecting GNOME environment and display protocol”</a>.
					</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						You can find the current list of environments for which <span class="strong"><strong>Wayland</strong></span> is not available in the <code class="literal">/usr/lib/udev/rules.d/61-gdm.rules</code> file.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="related-information-graphics-stack"/>Additional information</h2></div></div></div><p>
					For more information on displaying graphics in RHEL 8, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_rhel_systems_from_your_desktop/index#displaying-graphics_starting-using-gnome">Managing RHEL systems from your desktop</a>.
				</p></div></div></div></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 5. Installer and image creation</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installer-and-image-creation_considerations-in-adopting-RHEL-8"/>Chapter 5. Installer and image creation</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="add-ons_installation-and-booting"/>Add-ons</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="oscap"/>OSCAP</h2></div></div></div><p>
					The OSCAP add-on is enabled by default in Red Hat Enterprise Linux 8.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="kdump"/>Kdump</h2></div></div></div><p>
					The Kdump add-on adds support for configuring kernel crash dumping during installation. This add-on has full support in Kickstart (using the <code class="literal">%addon com_redhat_kdump</code> command and its options), and is fully integrated as an additional window in the graphical and text-based user interfaces.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installer-networking_installation-and-booting"/>Installer networking</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="device_naming_scheme"/>Device naming scheme</h2></div></div></div><p>
					A new network device naming scheme that generates network interface names based on a user-defined prefix is available in Red Hat Enterprise Linux 8. The <code class="literal">net.ifnames.prefix</code> boot option allows the device naming scheme to be used by the installation program and the installed system. See the <code class="literal">dracut.cmdline(7)</code> man page for information.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installation-images-and-packages_installation-and-booting"/>Installation images and packages</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="unified_iso"/>Unified ISO</h2></div></div></div><p>
					In Red Hat Enterprise Linux 8, a unified ISO automatically loads the <span class="strong"><strong>BaseOS</strong></span> and <span class="strong"><strong>AppStream</strong></span> installation source repositories. This feature works for the first base repository that is loaded during installation. For example, if you boot the installation with no repository configured and have the unified ISO as the base repository in the graphical user interface (GUI), or if you boot the installation using the <code class="literal">inst.repo=</code> option that points to the unified ISO.
				</p><p>
					As a result, the AppStream repository is enabled under the <span class="strong"><strong>Additional Repositories</strong></span> section of the <span class="strong"><strong>Installation Source</strong></span> GUI window. You cannot remove the AppStream repository or change its settings but you can disable it in <span class="strong"><strong>Installation Source</strong></span>. This feature does not work if you boot the installation using a different base repository and then change it to the unified ISO. If you do that, the base repository is replaced. However, the AppStream repository is not replaced and points to the original file.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stage2_image"/>Stage2 image</h2></div></div></div><p>
					In Red Hat Enterprise Linux 8, multiple network locations of <code class="literal">stage2</code> or Kickstart files can be specified to prevent installation failure. This update enables the specification of multiple <code class="literal">inst.stage2</code> and <code class="literal">inst.ks</code> boot options with network locations of <code class="literal">stage2</code> and a Kickstart file. This avoids the situation in which the requested files cannot be reached and the installation fails because the contacted server with the <code class="literal">stage2</code> or the Kickstart file is inaccessible.
				</p><p>
					With this new update, the installation failure can be avoided if multiple locations are specified. If all the defined locations are URLs, namely <code class="literal">HTTP</code>, <code class="literal">HTTPS</code>, or <code class="literal">FTP</code>, they will be tried sequentially until the requested file is fetched successfully. If there is a location that is not a URL, only the last specified location is tried. The remaining locations are ignored.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="inst_addrepo_parameter"/>inst.addrepo parameter</h2></div></div></div><p>
					Previously, you could only specify a base repository from the kernel boot parameters. In Red Hat Enterprise Linux 8, a new kernel parameter, <code class="literal">inst.addrepo=&lt;name&gt;,&lt;url&gt;</code>, allows you to specify an additional repository during installation. This parameter has two mandatory values: the name of the repository and the URL that points to the repository. For more information, see the <a class="link" href="https://anaconda-installer.readthedocs.io/en/latest/boot-options.html#inst-addrepo">inst-addrepo usage</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installation_from_an_expanded_iso"/>Installation from an expanded ISO</h2></div></div></div><p>
					Red Hat Enterprise Linux 8 supports installing from a repository on a local hard drive. Previously, the only installation method from a hard drive was using an ISO image as the installation source. However, the Red Hat Enterprise Linux 8 ISO image might be too big for some file systems; for example, the FAT32 file system cannot store files larger than 4 GiB. In Red Hat Enterprise Linux 8, you can enable installation from a repository on a local hard drive; you only need to specify the directory instead of the ISO image. For example: <code class="literal">inst.repo=hd:&lt;device&gt;:&lt;path to the repository&gt;</code>.
				</p><p>
					For more information about the Red Hat Enterprise Linux 8 BaseOS and AppStream repositories, see the <span class="emphasis"><em>Repositories</em></span> section of this document.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="graphical-user-interface_installation-and-booting"/>Installer Graphical User Interface</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="the_installation_summary_window"/>The Installation Summary window</h2></div></div></div><p>
					The Installation Summary window of the Red Hat Enterprise Linux 8 graphical installation has been updated to a new three-column layout that provides improved organization of graphical installation settings.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="system-purpose_installation-and-booting"/>System Purpose new in RHEL</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="system_purpose_support_in_the_graphical_installation"/>System Purpose support in the graphical installation</h2></div></div></div><p>
					Previously, the Red Hat Enterprise Linux installation program did not provide system purpose information to Subscription Manager. In Red Hat Enterprise Linux 8, you can set the intended purpose of the system during a graphical installation by using the <span class="strong"><strong>System Purpose</strong></span> window, or in a Kickstart configuration file by using the <code class="literal">syspurpose</code> command. When you set a system’s purpose, the entitlement server receives information that helps auto-attach a subscription that satisfies the intended use of the system.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="system_purpose_support_in_pykickstart"/>System Purpose support in Pykickstart</h2></div></div></div><p>
					Previously, it was not possible for the <code class="literal">pykickstart</code> library to provide system purpose information to Subscription Manager. In Red Hat Enterprise Linux 8, <code class="literal">pykickstart</code> parses the new <code class="literal">syspurpose</code> command and records the intended purpose of the system during automated and partially-automated installation. The information is then passed to the installation program, saved on the newly-installed system, and available for Subscription Manager when subscribing the system.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installer-module-support_installation-and-booting"/>Installer module support</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installing_modules_using_kickstart"/>Installing modules using Kickstart</h2></div></div></div><p>
					In Red Hat Enterprise Linux 8, the installation program has been extended to handle all modular features. Kickstart scripts can now enable module and stream combinations, install module profiles, and install modular packages.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="kickstart-changes_installation-and-booting"/>Kickstart changes</h1></div></div></div><p>
				The folowing sections describe the changes in Kickstart commands and options in Red Hat Enterprise Linux 8.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="auth_or_authconfig_is_deprecated_in_rhel_8"/>auth or authconfig is deprecated in RHEL 8</h2></div></div></div><p>
					The <code class="literal">auth</code> or <code class="literal">authconfig</code> Kickstart command is deprecated in Red Hat Enterprise Linux 8 because the <code class="literal">authconfig</code> tool and package have been removed.
				</p><p>
					Similarly to <code class="literal">authconfig</code> commands issued on command line, <code class="literal">authconfig</code> commands in Kickstart scripts now use the <code class="literal">authselect-compat</code> tool to run the new <code class="literal">authselect</code> tool. For a description of this compatibility layer and its known issues, see the manual page <code class="literal">authselect-migration(7)</code>. The installation program will automatically detect use of the deprecated commands and install on the system the <code class="literal">authselect-compat</code> package to provide the compatibility layer.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="kickstart_no_longer_supports_btrfs"/>Kickstart no longer supports Btrfs</h2></div></div></div><p>
					The Btrfs file system is not supported in Red Hat Enterprise Linux 8. As a result, the Graphical User Interface (GUI) and the Kickstart commands no longer support Btrfs.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using_kickstart_files_from_previous_rhel_releases"/>Using Kickstart files from previous RHEL releases</h2></div></div></div><p>
					If you are using Kickstart files from previous RHEL releases, see the <span class="emphasis"><em>Repositories</em></span> section of this document for more information about the Red Hat Enterprise Linux 8 BaseOS and AppStream repositories.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="deprecated-kickstart-comands-and-options_kickstart-changes"/>Deprecated Kickstart comands and options</h2></div></div></div><p>
					The following Kickstart commands and options have been deprecated in Red Hat Enterprise Linux 8. Using them in Kickstart files will print a warning in the logs.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">auth</code> or <code class="literal">authconfig</code> - use <code class="literal">authselect instead</code>
						</li><li class="listitem">
							<code class="literal">device</code>
						</li><li class="listitem">
							<code class="literal">deviceprobe</code>
						</li><li class="listitem">
							<code class="literal">dmraid</code>
						</li><li class="listitem">
							<code class="literal">install</code> - use the subcommands or methods directly as commands
						</li><li class="listitem">
							<code class="literal">lilo</code>
						</li><li class="listitem">
							<code class="literal">lilocheck</code>
						</li><li class="listitem">
							<code class="literal">mouse</code>
						</li><li class="listitem">
							<code class="literal">multipath</code>
						</li><li class="listitem">
							<code class="literal">bootloader --upgrade</code>
						</li><li class="listitem">
							<code class="literal">ignoredisk --interactive</code>
						</li><li class="listitem">
							<code class="literal">partition --active</code>
						</li><li class="listitem">
							<code class="literal">reboot --kexec</code>
						</li></ul></div><p>
					Where only specific options are listed, the base command and its other options are still available and not deprecated.
				</p><p>
					Note also you can turn the deprecated command warnings into errors with the <code class="literal">inst.ksstrict</code> boot option.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="removed-kickstart-comands-and-options_kickstart-changes"/>Removed Kickstart comands and options</h2></div></div></div><p>
					The following Kickstart commands and options have been completely removed in Red Hat Enterprise Linux 8. Using them in Kickstart files will cause an error.
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">upgrade</code> (This command had already previously been deprecated.)
						</li><li class="listitem">
							<code class="literal">btrfs</code>
						</li><li class="listitem">
							<code class="literal">part/partition btrfs</code>
						</li><li class="listitem">
							<code class="literal">part --fstype btrfs</code> or <code class="literal">partition --fstype btrfs</code>
						</li><li class="listitem">
							<code class="literal">logvol --fstype btrfs</code>
						</li><li class="listitem">
							<code class="literal">raid --fstype btrfs</code>
						</li><li class="listitem">
							<code class="literal">unsupported_hardware</code>
						</li></ul></div><p>
					Where only specific options and values are listed, the base command and its other options are still available and not removed.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="new-kickstart-comands-and-options_kickstart-changes"/>New Kickstart comands and options</h2></div></div></div><p>
					The following commands and options have been added in Red Hat Enterprise Linux 8.
				</p><div class="itemizedlist"><p class="title"><strong>RHEL 8.0</strong></p><ul class="itemizedlist"><li class="listitem">
							<code class="literal">authselect</code>
						</li><li class="listitem">
							<code class="literal">module</code>
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="image-creation_installation-and-booting"/>Image creation</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="custom_system_image_creation_with_image_builder"/>Custom system image creation with Image Builder</h2></div></div></div><p>
					The Image Builder tool enables users to create customized RHEL images. Image Builder is available in AppStream in the <span class="strong"><strong><span class="package">lorax-composer</span></strong></span> package.
				</p><p>
					With Image Builder, users can create custom system images which include additional packages. Image Builder functionality can be accessed through:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							a graphical user interface in the web console
						</li><li class="listitem">
							a command line interface in the <code class="literal">composer-cli</code> tool.
						</li></ul></div><p>
					Image Builder output formats include, among others:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							live ISO disk image
						</li><li class="listitem">
							qcow2 file for direct use with a virtual machine or OpenStack
						</li><li class="listitem">
							file system image file
						</li><li class="listitem">
							cloud images for Azure, VMWare and AWS
						</li></ul></div><p>
					To learn more about Image Builder, see the documentation title <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/">Composing a customized RHEL system image</a>.
				</p></div></div></div></body></html>
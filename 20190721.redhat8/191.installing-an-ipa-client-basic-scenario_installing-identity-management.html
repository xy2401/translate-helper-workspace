<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. Installing an Identity Management client: Basic scenario</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="installing-an-ipa-client-basic-scenario_installing-identity-management"/>Chapter 9. Installing an Identity Management client: Basic scenario</h1></div></div></div><p>
				The following sections describe how to configure a system as an Identity Management (IdM) client by using the <code class="literal">ipa-client-install</code> utility. Configuring a system as an IdM client enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.
			</p><p>
				Several options are available for a basic installation:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For installing a client interactively using privileged user’s credentials, see <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-user-credentials-interactive-installation" title="Installing a client by using user credentials: Interactive installation">the section called “Installing a client by using user credentials: Interactive installation”</a>.
					</li><li class="listitem">
						For installing a client interactively using a one-time password, see <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-a-one-time-password-interactive-installation" title="Installing a client by using a one-time password: Interactive installation">the section called “Installing a client by using a one-time password: Interactive installation”</a>.
					</li><li class="listitem">
						For installing a client noninteractively using either a privileged user’s credentials, a one-time password or a keytab from previous enrollment, see <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-ipa-client-non-interactive-install_install-client-basic" title="Installing a client: Non-interactive installation">the section called “Installing a client: Non-interactive installation”</a>.
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="prerequisites_4"/>Prerequisites</h1></div></div></div><p>
					Before you start installing the Identity Management client, make sure that you have met all the prerequisites. See <a class="xref" href="preparing-the-system-for-ipa-client-installation_installing-identity-management.html" title="Chapter 8. Preparing the system for Identity Management client installation">Chapter 8, <em>Preparing the system for Identity Management client installation</em></a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="overview-of-the-ipa-client-installation-options"/>An overview of the Identity Management client installation options</h1></div></div></div><p>
					To install an Identity Management client successfully, you must provide credentials that can be used to enroll the client. The following authentication methods are available:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							The credentials of a user authorized to enroll clients. This is the default option expected by <code class="literal">ipa-client-install</code>.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									To provide the credentials of an authorized user directly to <code class="literal">ipa-client-install</code>, use the <code class="literal">--principal</code> and <code class="literal">--password</code> options. See <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-user-credentials-interactive-installation" title="Installing a client by using user credentials: Interactive installation">the section called “Installing a client by using user credentials: Interactive installation”</a> for a detailed procedure.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							A random, one-time password pre-generated on the server:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									To use this authentication method, add the <code class="literal">--random</code> option to <code class="literal">ipa-client-install</code> option. See <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#installing-client-basic-installing-a-client-by-using-a-one-time-password-interactive-installation" title="Installing a client by using a one-time password: Interactive installation">the section called “Installing a client by using a one-time password: Interactive installation”</a> for a detailed procedure.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The client principal from the previous enrollment:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									This option is available if the system was previously enrolled as an Identity Management client. To use this authentication method, add the <code class="literal">--keytab</code> option to <code class="literal">ipa-client-install</code>. See <a class="xref" href="re-enrolling-an-ipa-client_installing-identity-management.html" title="Chapter 11. Re-enrolling an Identity Management client">Chapter 11, <em>Re-enrolling an Identity Management client</em></a> for details.
								</li></ul></div></li></ul></div><h4><a id="additional_resources_6"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For details on the options accepted by <code class="literal">ipa-client-install</code>, see the <span class="strong"><strong>ipa-client-install</strong></span>(1) man page.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-client-basic-installing-a-client-by-using-user-credentials-interactive-installation"/>Installing a client by using user credentials: Interactive installation</h1></div></div></div><p>
					This procedure describes installing an Identity Management client interactively by using the credentials of an authorized user to enroll the system into the domain.
				</p><h3><a id="prerequisites_5"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Ensure you have the credentials of a user authorized to enroll clients into the Identity Management domain. This could be, for example, a <code class="literal">hostadmin</code> user with the Enrollment Administrator role.
						</li></ul></div><h3><a id="procedure_12"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Run the <code class="literal">ipa-client-install</code> utility on the system that you want to configure as an Identity Management client.
						</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install</strong></span></pre><p class="simpara">
							Add the <code class="literal">--enable-dns-updates</code> option to update the DNS records with the IP address of the client system if either of the following conditions applies:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									The Identity Management server the client will be enrolled with was installed with integrated DNS
								</li><li class="listitem">
									The DNS server on the network accepts DNS entry updates with the GSS-TSIG protocol
								</li></ul></div><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --enable-dns-updates</strong></span></pre><p class="simpara">
							Enabling DNS updates is useful if your client:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									has a dynamic IP address issued using the Dynamic Host Configuration Protocol
								</li><li class="listitem">
									has a static IP address but it has just been allocated and the IdM server does not know about it
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The installation script attempts to obtain all the required settings, such as DNS records, automatically.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
									If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values and displays them. Enter <code class="literal">yes</code> to confirm.
								</p><pre class="literallayout">Client hostname: client.example.com
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: server.example.com
BaseDN: dc=example,dc=com

Continue to configure the system with these values? [no]: <span class="strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">
									To install the system with different values, enter <code class="literal">no</code>. Then run <code class="literal">ipa-client-install</code> again, and specify the required values by adding command-line options to <code class="literal">ipa-client-install</code>, for example:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											<code class="literal">--hostname</code>
										</li><li class="listitem">
											<code class="literal">--realm</code>
										</li><li class="listitem">
											<code class="literal">--domain</code>
										</li><li class="listitem">
											<code class="literal">--server</code>
										</li></ul></div></li><li class="listitem">
									If the script fails to obtain some settings automatically, it prompts you for the values.
								</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								The fully qualified domain name must be a valid DNS name:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Only numbers, alphabetic characters, and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
									</li><li class="listitem">
										The host name must be all lower-case. No capital letters are allowed.
									</li></ul></div></div></li><li class="listitem"><p class="simpara">
							The script prompts for a user whose identity will be used to enroll the client. This could be, for example, a <code class="literal">hostadmin</code> user with the Enrollment Administrator role:
						</p><pre class="literallayout">User authorized to enroll computers: <code class="literal">hostadmin</code>
Password for <code class="literal">hostadmin</code>@<code class="literal">EXAMPLE.COM</code>:</pre></li><li class="listitem"><p class="simpara">
							The installation script now configures the client. Wait for the operation to complete.
						</p><pre class="literallayout">Client configuration complete.</pre></li></ol></div><h3><a id="additional_resources_7"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For details on how the client installation script searches for the DNS records, see the <code class="literal">DNS Autodiscovery</code> section in the <code class="literal">ipa-client-install</code>(1) man page.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-client-basic-installing-a-client-by-using-a-one-time-password-interactive-installation"/>Installing a client by using a one-time password: Interactive installation</h1></div></div></div><p>
					This procedure describes installing an Identity Management client interactively by using a one-time password to enroll the system into the domain.
				</p><h3><a id="prerequisites_6"/>Prerequisites</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							On a server in the domain, add the future client system as an Identity Management host. Use the <code class="literal">--random</code> option with the <code class="literal">ipa host-add</code> command to generate a one-time random password for the enrollment.
						</p><pre class="literallayout">$ <span class="strong"><strong>ipa host-add <span class="emphasis"><em>client.example.com</em></span> --random</strong></span>
 --------------------------------------------------
 Added host "client.example.com"
 --------------------------------------------------
  Host name: client.example.com
  Random password: <span class="strong"><strong>W5YpARl=7M.n</strong></span>
  Password: True
  Keytab: False
  Managed by: server.example.com</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
								The generated password will become invalid after you use it to enroll the machine into the Identity Management domain. It will be replaced with a proper host keytab after the enrollment is finished.
							</p></div></li></ol></div><h3><a id="procedure_13"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Run the <code class="literal">ipa-client-install</code> utility on the system that you want to configure as an Identity Management client. Use the <code class="literal">--password</code> option to provide the one-time random password. Because the password often contains special characters, enclose it in single quotes (').
						</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install</strong></span></pre><p class="simpara">
							Add the <code class="literal">--enable-dns-updates</code> option to update the DNS records with the IP address of the client system if either of the following conditions applies:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									The Identity Management server the client will be enrolled with was installed with integrated DNS
								</li><li class="listitem">
									The DNS server on the network accepts DNS entry updates with the GSS-TSIG protocol
								</li></ul></div><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --password 'W5YpARl=7M.n' --enable-dns-updates</strong></span></pre><p class="simpara">
							Enabling DNS updates is useful if your client:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									has a dynamic IP address issued using the Dynamic Host Configuration Protocol
								</li><li class="listitem">
									has a static IP address but it has just been allocated and the IdM server does not know about it
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The installation script attempts to obtain all the required settings, such as DNS records, automatically.
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
									If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values and displays them. Enter <code class="literal">yes</code> to confirm.
								</p><pre class="literallayout">Client hostname: client.example.com
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: server.example.com
BaseDN: dc=example,dc=com

Continue to configure the system with these values? [no]: <span class="strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">
									To install the system with different values, enter <code class="literal">no</code>. Then run <code class="literal">ipa-client-install</code> again, and specify the required values by adding command-line options to <code class="literal">ipa-client-install</code>, for example:
								</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
											<code class="literal">--hostname</code>
										</li><li class="listitem">
											<code class="literal">--realm</code>
										</li><li class="listitem">
											<code class="literal">--domain</code>
										</li><li class="listitem">
											<code class="literal">--server</code>
										</li></ul></div></li><li class="listitem">
									If the script fails to obtain some settings automatically, it prompts you for the values.
								</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								The fully qualified domain name must be a valid DNS name:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										Only numbers, alphabetic characters, and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
									</li><li class="listitem">
										The host name must be all lower-case. No capital letters are allowed.
									</li></ul></div></div></li><li class="listitem"><p class="simpara">
							The installation script now configures the client. Wait for the operation to complete.
						</p><pre class="literallayout">Client configuration complete.</pre></li></ol></div><h3><a id="additional_resources_8"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For details on how the client installation script searches for the DNS records, see the <code class="literal">DNS Autodiscovery</code> section in the <code class="literal">ipa-client-install</code>(1) man page.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="installing-ipa-client-non-interactive-install_install-client-basic"/>Installing a client: Non-interactive installation</h1></div></div></div><p>
					For a non-interactive installation, you must provide all required information to the <code class="literal">ipa-client-install</code> utility using command-line options. The following sections describe the minimum required options for a non-interactive installation.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Options for the intended authentication method for client enrollment</span></dt><dd><p class="simpara">
								The available options are:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<code class="literal">--principal</code> and <code class="literal">--password</code> to specify the credentials of a user authorized to enroll clients
									</li><li class="listitem">
										<code class="literal">--random</code> to specify a one-time random password generated for the client
									</li><li class="listitem">
										<code class="literal">--keytab</code> to specify the keytab from a previous enrollment
									</li></ul></div><p class="simpara">
								For details, see <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#overview-of-the-ipa-client-installation-options" title="An overview of the Identity Management client installation options">the section called “An overview of the Identity Management client installation options”</a>.
							</p></dd><dt><span class="term">The option for unattended installation</span></dt><dd><p class="simpara">
								The <code class="literal">--unattended</code> lets the installation run without requiring user confirmation.
							</p><p class="simpara">
								If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values. If the script cannot discover the values automatically, provide them using command-line options, such as:
							</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
										<code class="literal">--hostname</code> to specify a static host name for the client machine
									</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
											The fully qualified domain name must be a valid DNS name:
										</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
													Only numbers, alphabetic characters, and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
												</li><li class="listitem">
													The host name must be all lower-case. No capital letters are allowed.
												</li></ul></div></div></li><li class="listitem">
										<code class="literal">--server</code> to specify the host name of the IdM server the client will be enrolled with
									</li><li class="listitem">
										<code class="literal">--domain</code> to specify the DNS domain name of the IdM server the client will be enrolled with
									</li><li class="listitem">
										<code class="literal">--realm</code> to specify the Kerberos realm name
									</li></ul></div></dd></dl></div><p>
					An example of a basic <span class="strong"><strong>ipa-client-install</strong></span> command for non-interactive installation:
				</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --password '<span class="emphasis"><em>W5YpARl=7M.n</em></span>' --unattended</strong></span></pre><p>
					 <br/>
				</p><p>
					An example of an <span class="strong"><strong>ipa-client-install</strong></span> command for non-interactive installation with more options specified:
				</p><pre class="literallayout"># <span class="strong"><strong>ipa-client-install --password '<span class="emphasis"><em>W5YpARl=7M.n</em></span>' --domain <span class="emphasis"><em>example.com</em></span> --server <span class="emphasis"><em>server.idm.example.com</em></span> --unattended</strong></span></pre><h3><a id="additional_resources_9"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For a complete list of options accepted by <code class="literal">ipa-client-install</code>, see the <span class="strong"><strong>ipa-client-install</strong></span>(1) man page.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="removing-pre-ipa-configuration-after-installing-client_install-client-basic"/>Removing pre-Identity Management configuration after installing a client</h1></div></div></div><p>
					The <code class="literal">ipa-client-install</code> script does not remove any previous LDAP and SSSD configuration from the <code class="literal">/etc/openldap/ldap.conf</code> and <code class="literal">/etc/sssd/sssd.conf</code> files. If you modified the configuration in these files before installing the client, the script adds the new client values, but comments them out. For example:
				</p><pre class="literallayout">BASE   dc=example,dc=com
URI    ldap://ldap.example.com

#URI ldaps://server.example.com # modified by IPA
#BASE dc=ipa,dc=example,dc=com # modified by IPA</pre><p>
					To apply the new Identity Management configuration values:
				</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
							Open <code class="literal">/etc/openldap/ldap.conf</code> and <code class="literal">/etc/sssd/sssd.conf</code>.
						</li><li class="listitem">
							Delete the previous configuration.
						</li><li class="listitem">
							Uncomment the new Identity Management configuration.
						</li><li class="listitem">
							Server processes that rely on system-wide LDAP configuration might require a restart to apply the changes. Applications that use <code class="literal">openldap</code> libraries typically import the configuration when started.
						</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="testing-an-ipa-client-installing-client-basic"/>Testing an Identity Management client</h1></div></div></div><p>
					The Command-Line Interface informs you that the <code class="literal">ipa-client-install</code> was successful, but you can also do your own test.
				</p><p>
					To test that the Identity Management client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default <code class="literal">admin</code> user:
				</p><pre class="literallayout">[user@client ~]$ <span class="strong"><strong>id admin</strong></span>
uid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)</pre><p>
					To test that authentication works correctly, <code class="literal">su</code> to a root user from a non-root user:
				</p><pre class="literallayout">[user@client ~]$ <span class="strong"><strong>su -</strong></span>
Last login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0
[root@client ~]#</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="connection-requests-during-an-ipa-client-installation"/>Connections performed during an Identity Management client installation</h1></div></div></div><p>
					<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-requests-client-installation" title="Table 9.1. Requests performed during an Identity Management client installation">Table 9.1, “Requests performed during an Identity Management client installation”</a> lists the operations performed by <code class="literal">ipa-client-install</code>, the Identity Management (IdM) client installation tool.
				</p><div class="table"><a id="tab-requests-client-installation"/><p class="title"><strong>Table 9.1. Requests performed during an Identity Management client installation</strong></p><div class="table-contents"><table summary="Requests performed during an Identity Management client installation" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Operation</th><th style="text-align: left" valign="top">Protocol used</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									DNS resolution against the DNS resolvers configured on the client system
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									DNS
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									To discover the IP addresses of IdM masters; (optionally) to add A/AAAA and SSHFP records
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Requests to ports 88 (TCP/TCP6 and UDP/UDP6) on an IdM replica
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Kerberos
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									To obtain a Kerberos ticket
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM masters
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									HTTPS
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									IdM client enrollment; retrieval of CA certificate chain if LDAP method fails; request for a certificate issuance if required
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Requests over TCP/TCP6 to ports 389 on IdM servers, using SASL GSSAPI authentication, plain LDAP, or both
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									LDAP
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									IdM client enrollment; identity retrieval by SSSD processes; Kerberos key retrieval for the host principal
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Network time protocol (NTP) discovery and resolution (optionally)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									NTP
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									To synchronize time between the client system and an NTP server
								</p>
								 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ipa-client-communication-with-server"/>Identity Management client’s communications with the server during post-installation deployment</h1></div></div></div><p>
					The client side of Identity Management (IdM) framework is implemented with two different applications:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							the <code class="literal">ipa</code> command-line interface (CLI)
						</li><li class="listitem">
							the browser-based web UI
						</li></ul></div><p>
					The browser-based web UI is optional.
				</p><p>
					<a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-ipa-operations" title="Table 9.2. CLI post-installation operations">Table 9.2, “CLI post-installation operations”</a> shows the operations performed by the CLI during an IdM client post-installation deployment. <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-browser-operations" title="Table 9.3. webUI post-installation operations">Table 9.3, “webUI post-installation operations”</a> shows the operations performed by the web UI during an IdM client post-installation deployment.
				</p><p>
					Two daemons run on the IdM client, the <code class="literal">System Security Services Daemon</code> (SSSD) and <code class="literal">certmonger</code>. <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#sssd-deployment-operations" title="SSSD communication patterns">the section called “SSSD communication patterns”</a> and <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#certmonger-deployment-operations" title="Certmonger communication patterns">the section called “Certmonger communication patterns”</a> describe how these daemons communicate with the services available on the IdM and Active Directory servers.
				</p><div class="table"><a id="tab-ipa-operations"/><p class="title"><strong>Table 9.2. CLI post-installation operations</strong></p><div class="table-contents"><table summary="CLI post-installation operations" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Operation</th><th style="text-align: left" valign="top">Protocol used</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									DNS resolution against the DNS resolvers configured on the client system
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									DNS
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									To discover the IP addresses of IdM masters
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Requests to ports 88 (TCP/TCP6 and UDP/UDP6) and 464 (TCP/TCP6 and UDP/UDP6) on an IdM replica
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Kerberos
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									To obtain a Kerberos ticket; change a Kerberos password; authenticate to the IdM Web UI
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM masters
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									HTTPS
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									any <code class="literal">ipa</code> utility usage
								</p>
								 </td></tr></tbody></table></div></div><div class="table"><a id="tab-browser-operations"/><p class="title"><strong>Table 9.3. webUI post-installation operations</strong></p><div class="table-contents"><table summary="webUI post-installation operations" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Operation</th><th style="text-align: left" valign="top">Protocol used</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM masters
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									HTTPS
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									To retrieve the IdM web UI pages
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sssd-deployment-operations"/>SSSD communication patterns</h2></div></div></div><p>
						The System Security Services Daemon (SSSD) is a system service to access remote directories and authentication mechanisms. If configured on an IdM client, it connects to the IdM server, which provides authentication, authorization and other identity and policy information. If the IdM server is in a trust relationships with Active Directory (AD), SSSD also connects to AD to perform authentication for AD users using the Kerberos protocol. By default, SSSD uses Kerberos to authenticate any non-local user. In special situations, SSSD might be configured to use the LDAP protocol instead.
					</p><p>
						The System Security Services Daemon (SSSD) can be configured to communicate with multiple servers. <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-sssd-deployment-operations-clients" title="Table 9.4. Communication patterns of SSSD on IdM clients when talking to IdM servers">Table 9.4, “Communication patterns of SSSD on IdM clients when talking to IdM servers”</a> and <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-sssd-deployment-operations-trust-controllers" title="Table 9.5. Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers">Table 9.5, “Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers”</a> show common communication patterns for SSSD in IdM.
					</p><div class="table"><a id="tab-sssd-deployment-operations-clients"/><p class="title"><strong>Table 9.4. Communication patterns of SSSD on IdM clients when talking to IdM servers</strong></p><div class="table-contents"><table summary="Communication patterns of SSSD on IdM clients when talking to IdM servers" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Operation</th><th style="text-align: left" valign="top">Protocol used</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										DNS resolution against the DNS resolvers configured on the client system
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										DNS
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To discover the IP addresses of IdM masters
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										Requests to ports 88 (TCP/TCP6 and UDP/UDP6), 464 (TCP/TCP6 and UDP/UDP6), and 749 (TCP/TCP6) on an Identity Management replica and Active Directory domain controllers
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Kerberos
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain a Kerberos ticket; to change a Kerberos password
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										Requests over TCP/TCP6 to ports 389 on IdM servers, using SASL GSSAPI authentication, plain LDAP, or both
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										LDAP
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain information about IdM users and hosts, download HBAC and sudo rules, automount maps, the SELinux user context, public SSH keys, and other information stored in IdM LDAP
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										(optionally) In case of smart-card authentication, requests to the Online Certificate Status Protocol (OCSP) responder, if it is configured. This often is done via port 80, but it depends on the actual value of the OCSP responder URL in a client certificate.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										HTTP
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain information about the status of the certificate installed in the smart card
									</p>
									 </td></tr></tbody></table></div></div><div class="table"><a id="tab-sssd-deployment-operations-trust-controllers"/><p class="title"><strong>Table 9.5. Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers</strong></p><div class="table-contents"><table summary="Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Operation</th><th style="text-align: left" valign="top">Protocol used</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										DNS resolution against the DNS resolvers configured on the client system
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										DNS
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To discover the IP addresses of IdM masters
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										Requests to ports 88 (TCP/TCP6 and UDP/UDP6), 464 (TCP/TCP6 and UDP/UDP6), and 749 (TCP/TCP6) on an Identity Management replica and Active Directory domain controllers
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Kerberos
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain a Kerberos ticket; change a Kerberos password; administer Kerberos remotely
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										Requests to ports 389 (TCP/TCP6 and UDP/UDP6) and 3268 (TCP/TCP6)
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										LDAP
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To query Active Directory user and group information; to discover Active Directory domain controllers
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										(optionally) In case of smart-card authentication, requests to the Online Certificate Status Protocol (OCSP) responder, if it is configured. This often is done via port 80, but it depends on the actual value of the OCSP responder URL in a client certificate.
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										HTTP
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain information about the status of the certificate installed in the smart card
									</p>
									 </td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="certmonger-deployment-operations"/>Certmonger communication patterns</h2></div></div></div><p>
						<code class="literal">Certmonger</code> is a daemon running on IdM masters and IdM clients to allow a timely renewal of SSL certificates associated with the services on the host. The <a class="xref" href="installing-an-ipa-client-basic-scenario_installing-identity-management.html#tab-certmonger-deployment-operations" title="Table 9.6. Certmonger communication patterns">Table 9.6, “Certmonger communication patterns”</a> shows the operations performed by IdM client’s <code class="literal">certmonger</code> utility on IdM masters.
					</p><div class="table"><a id="tab-certmonger-deployment-operations"/><p class="title"><strong>Table 9.6. Certmonger communication patterns</strong></p><div class="table-contents"><table summary="Certmonger communication patterns" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Operation</th><th style="text-align: left" valign="top">Protocol used</th><th style="text-align: left" valign="top">Purpose</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
										DNS resolution against the DNS resolvers configured on the client system
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										DNS
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To discover the IP addresses of IdM masters
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										Requests to ports 88 (TCP/TCP6 and UDP/UDP6) and 464 (TCP/TCP6 and UDP/UDP6) on an IdM replica
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										Kerberos
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain a Kerberos ticket
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM masters
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										HTTPS
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To request new certificates
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										Access over port 8080 (TCP/TCP6) on the IdM master
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										HTTP
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To obtain an Online Certificate Status Protocol (OCSP) responder and certificate status
									</p>
									 </td></tr><tr><td style="text-align: left" valign="top"> <p>
										(on the first installed server or on the server where certificate tracking has been transferred) Access over port 8443 (TCP/TCP6) on the IdM master
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										HTTPS
									</p>
									 </td><td style="text-align: left" valign="top"> <p>
										To administer the Certificate Authority on the IdM master (only during IdM master and replica installation)
									</p>
									 </td></tr></tbody></table></div></div></div></div></div></body></html>
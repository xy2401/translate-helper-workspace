<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 3. Managing services with systemd</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="managing-services-with-systemd_configuring-basic-system-settings"/>Chapter 3. Managing services with systemd</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="introduction-to-systemd_managing-services-with-systemd"/>Introduction to systemd</h1></div></div></div><p>
				<span class="strong"><strong><span class="application">Systemd</span></strong></span> is a system and service manager for Linux operating systems. It is designed to be backwards compatible with SysV init scripts, and provides a number of features such as parallel startup of system services at boot time, on-demand activation of daemons, or dependency-based service control logic. Starting with Red Hat Enterprise Linux 7, <span class="strong"><strong><span class="application">systemd</span></strong></span> replaced Upstart as the default init system.
			</p><p>
				<span class="strong"><strong><span class="application">Systemd</span></strong></span> introduces the concept of <span class="emphasis"><em>systemd units</em></span>. These units are represented by unit configuration files located in one of the directories listed in the following table.
			</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Introduction-Units-Locations"/><p class="title"><strong>Table 3.1. Systemd unit files locations</strong></p><div class="table-contents"><table summary="Systemd unit files locations" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Directory</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">/usr/lib/systemd/system/</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Systemd unit files distributed with installed RPM packages.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">/run/systemd/system/</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Systemd unit files created at run time. This directory takes precedence over the directory with installed service unit files.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">/etc/systemd/system/</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Systemd unit files created by <code class="literal">systemctl enable</code> as well as unit files added for extending a service. This directory takes precedence over the directory with runtime unit files.
							</p>
							 </td></tr></tbody></table></div></div><p>
				The units encapsulate information about:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						System services
					</li><li class="listitem">
						Listening sockets
					</li><li class="listitem">
						Other objects that are relevant to the init system
					</li></ul></div><p>
				For a complete list of available systemd unit types, see the follwoing table.
			</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Introduction-Units-Types"/><p class="title"><strong>Table 3.2. Available systemd unit types</strong></p><div class="table-contents"><table summary="Available systemd unit types" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Unit Type</th><th style="text-align: left" valign="top">File Extension</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								Service unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A system service.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Target unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A group of systemd units.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Automount unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.automount</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A file system automount point.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Device unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.device</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A device file recognized by the kernel.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Mount unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.mount</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A file system mount point.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Path unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.path</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A file or directory in a file system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Scope unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.scope</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								An externally created process.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Slice unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.slice</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A group of hierarchically organized units that manage system processes.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Socket unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.socket</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								An inter-process communication socket.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Swap unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.swap</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A swap device or a swap file.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								Timer unit
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">.timer</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								A systemd timer.
							</p>
							 </td></tr></tbody></table></div></div><h5><a id="overriding_the_default_systemd_configuration_using_system_conf"/>Overriding the default systemd configuration using system.conf</h5><p>
				The default configuration of <span class="strong"><strong><span class="application">systemd</span></strong></span> is defined during the compilation and it can be found in the systemd configuration file at <code class="literal">/etc/systemd/system.conf</code>. Use this file if you want to deviate from those defaults and override selected default values for systemd units globally.
			</p><p>
				For example, to override the default value of the timeout limit, which is set to 90 seconds, use the <code class="literal">DefaultTimeoutStartSec</code> parameter to input the required value in seconds.
			</p><pre class="literallayout">DefaultTimeoutStartSec=<span class="emphasis"><em>required value</em></span></pre><p>
				For further information, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Overriding_Unit_Mod-Change-timout-limit" title="Example 3.20. Changing the timeout limit">Example 3.20, “Changing the timeout limit”</a>.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Introduction-Features"/>Main features</h2></div></div></div><p>
					The systemd system and service manager provides the following main features:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
							<span class="strong"><strong>Socket-based activation</strong></span> — At boot time, <span class="strong"><strong><span class="application">systemd</span></strong></span> creates listening sockets for all system services that support this type of activation, and passes the sockets to these services as soon as they are started. This not only allows <span class="strong"><strong><span class="application">systemd</span></strong></span> to start services in parallel, but also makes it possible to restart a service without losing any message sent to it while it is unavailable: the corresponding socket remains accessible and all messages are queued.
						</p><p class="simpara">
							<span class="strong"><strong><span class="application">Systemd</span></strong></span> uses <span class="emphasis"><em>socket units</em></span> for socket-based activation.
						</p></li><li class="listitem">
							<span class="strong"><strong>Bus-based activation</strong></span> — System services that use D-Bus for inter-process communication can be started on-demand the first time a client application attempts to communicate with them. <span class="strong"><strong><span class="application">Systemd</span></strong></span> uses <span class="emphasis"><em>D-Bus service files</em></span> for bus-based activation.
						</li><li class="listitem">
							<span class="strong"><strong>Device-based activation</strong></span> — System services that support device-based activation can be started on-demand when a particular type of hardware is plugged in or becomes available. <span class="strong"><strong><span class="application">Systemd</span></strong></span> uses <span class="emphasis"><em>device units</em></span> for device-based activation.
						</li><li class="listitem">
							<span class="strong"><strong>Path-based activation</strong></span> — System services that support path-based activation can be started on-demand when a particular file or directory changes its state. <span class="strong"><strong><span class="application">Systemd</span></strong></span> uses <span class="emphasis"><em>path units</em></span> for path-based activation.
						</li><li class="listitem">
							<span class="strong"><strong>Mount and automount point management</strong></span> — <span class="strong"><strong><span class="application">Systemd</span></strong></span> monitors and manages mount and automount points. <span class="strong"><strong><span class="application">Systemd</span></strong></span> uses <span class="emphasis"><em>mount units</em></span> for mount points and <span class="emphasis"><em>automount units</em></span> for automount points.
						</li><li class="listitem">
							<span class="strong"><strong>Aggressive parallelization</strong></span> — Because of the use of socket-based activation, <span class="strong"><strong><span class="application">systemd</span></strong></span> can start system services in parallel as soon as all listening sockets are in place. In combination with system services that support on-demand activation, parallel activation significantly reduces the time required to boot the system.
						</li><li class="listitem">
							<span class="strong"><strong>Transactional unit activation logic</strong></span> — Before activating or deactivating a unit, <span class="strong"><strong><span class="application">systemd</span></strong></span> calculates its dependencies, creates a temporary transaction, and verifies that this transaction is consistent. If a transaction is inconsistent, <span class="strong"><strong><span class="application">systemd</span></strong></span> automatically attempts to correct it and remove non-essential jobs from it before reporting an error.
						</li><li class="listitem">
							<span class="strong"><strong>Backwards compatibility with SysV init</strong></span> — <span class="strong"><strong><span class="application">Systemd</span></strong></span> supports SysV init scripts as described in the <span class="emphasis"><em><span class="citetitle">Linux Standard Base Core Specification</span></em></span>, which eases the upgrade path to systemd service units.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Compatibility_Changes"/>Compatibility changes</h2></div></div></div><p>
					The systemd system and service manager is designed to be mostly compatible with SysV init and Upstart. The following are the most notable compatibility changes with regards to Red Hat Enterprise Linux 6 system that used SysV init:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<span class="strong"><strong><span class="application">Systemd</span></strong></span> has only limited support for runlevels. It provides a number of target units that can be directly mapped to these runlevels and for compatibility reasons, it is also distributed with the earlier <code class="literal">runlevel</code> command. Not all systemd targets can be directly mapped to runlevels, however, and as a consequence, this command might return <code class="literal">N</code> to indicate an unknown runlevel. It is recommended that you avoid using the <code class="literal">runlevel</code> command if possible. <br/> For more information about systemd targets and their comparison with runlevels, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#working-with-systemd-targets_managing-services-with-systemd" title="Working with systemd targets">the section called “Working with systemd targets”</a>.
						</li><li class="listitem"><p class="simpara">
							The <code class="literal">systemctl</code> utility does not support custom commands. In addition to standard commands such as <code class="literal">start</code>, <code class="literal">stop</code>, and <code class="literal">status</code>, authors of SysV init scripts could implement support for any number of arbitrary commands in order to provide additional functionality. For example, the init script for <code class="literal">iptables</code> could be executed with the <code class="literal">panic</code> command, which immediately enabled panic mode and reconfigured the system to start dropping all incoming and outgoing packets. This is not supported in <span class="strong"><strong><span class="application">systemd</span></strong></span> and the <code class="literal">systemctl</code> only accepts documented commands.
						</p><p class="simpara">
							For more information about the <code class="literal">systemctl</code> utility and its comparison with the earlier <code class="literal">service</code> utility, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Services-systemctl" title="Table 3.3. Comparison of the service utility with systemctl">Table 3.3, “Comparison of the service utility with systemctl”</a>.
						</p></li><li class="listitem">
							The <code class="literal">systemctl</code> utility does not communicate with services that have not been started by <span class="strong"><strong><span class="application">systemd</span></strong></span>. When <span class="strong"><strong><span class="application">systemd</span></strong></span> starts a system service, it stores the ID of its main process in order to keep track of it. The <code class="literal">systemctl</code> utility then uses this PID to query and manage the service. Consequently, if a user starts a particular daemon directly on the command line, <code class="literal">systemctl</code> is unable to determine its current status or stop it.
						</li><li class="listitem">
							<span class="strong"><strong><span class="application">Systemd</span></strong></span> stops only running services. Previously, when the shutdown sequence was initiated, Red Hat Enterprise Linux 6 and earlier releases of the system used symbolic links located in the <code class="literal">/etc/rc0.d/</code> directory to stop all available system services regardless of their status. With <span class="strong"><strong><span class="application">systemd</span></strong></span> , only running services are stopped on shutdown.
						</li><li class="listitem">
							System services are unable to read from the standard input stream. When <span class="strong"><strong><span class="application">systemd</span></strong></span> starts a service, it connects its standard input to <code class="literal">/dev/null</code> to prevent any interaction with the user.
						</li><li class="listitem">
							System services do not inherit any context (such as the <code class="literal">HOME</code> and <code class="literal">PATH</code> environment variables) from the invoking user and their session. Each service runs in a clean execution context.
						</li><li class="listitem">
							When loading a SysV init script, <span class="strong"><strong><span class="application">systemd</span></strong></span> reads dependency information encoded in the Linux Standard Base (LSB) header and interprets it at run time.
						</li><li class="listitem">
							All operations on service units are subject to a default timeout of 5 minutes to prevent a malfunctioning service from freezing the system. This value is hardcoded for services that are generated from initscripts and cannot be changed. However, individual configuration files can be used to specify a longer timeout value per service, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Overriding_Unit_Mod-Change-timout-limit" title="Example 3.20. Changing the timeout limit">Example 3.20, “Changing the timeout limit”</a>.
						</li></ul></div><p>
					For a detailed list of compatibility changes introduced with <span class="strong"><strong><span class="application">systemd</span></strong></span>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Migration_Planning_Guide/">Migration Planning Guide</a> for Red Hat Enterprise Linux 7.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="managing-system-services_managing-services-with-systemd"/>Managing system services</h1></div></div></div><p>
				Previous versions of Red Hat Enterprise Linux, which were distributed with SysV init or Upstart, used <span class="emphasis"><em>init scripts</em></span> located in the <code class="literal">/etc/rc.d/init.d/</code> directory. These init scripts were typically written in Bash, and allowed the system administrator to control the state of services and daemons in their system. Starting with Red Hat Enterprise Linux 7, these init scripts have been replaced with <span class="emphasis"><em>service units</em></span>.
			</p><p>
				Service units end with the <code class="literal">.service</code> file extension and serve a similar purpose as init scripts. To view, start, stop, restart, enable, or disable system services, use the <code class="literal">systemctl</code> command as described in <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Services-systemctl" title="Table 3.3. Comparison of the service utility with systemctl">Comparison of the service utility with systemctl</a>, <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Services-chkconfig" title="Table 3.4. Comparison of the chkconfig utility with systemctl">Comparison of the chkconfig utility with systemctl</a>, and further in this section. The <code class="literal">service</code> and <code class="literal">chkconfig</code> commands are still available in the system and work as expected, but are only included for compatibility reasons and should be avoided.
			</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Services-systemctl"/><p class="title"><strong>Table 3.3. Comparison of the service utility with systemctl</strong></p><div class="table-contents"><table summary="Comparison of the service utility with systemctl" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">service</th><th style="text-align: left" valign="top">systemctl</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service <span class="emphasis"><em>name</em></span> start</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl start <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Starts a service.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service <span class="emphasis"><em>name</em></span> stop</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl stop <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Stops a service.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service <span class="emphasis"><em>name</em></span> restart</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl restart <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Restarts a service.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service <span class="emphasis"><em>name</em></span> condrestart</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl try-restart <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Restarts a service only if it is running.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service <span class="emphasis"><em>name</em></span> reload</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl reload <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Reloads configuration.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service <span class="emphasis"><em>name</em></span> status</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl status <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 <p>

							</p>
							 <p>
								<code class="literal">systemctl is-active <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Checks if a service is running.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">service --status-all</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl list-units --type service --all</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Displays the status of all services.
							</p>
							 </td></tr></tbody></table></div></div><div class="table"><a id="tabl-Managing_Services_with_systemd-Services-chkconfig"/><p class="title"><strong>Table 3.4. Comparison of the chkconfig utility with systemctl</strong></p><div class="table-contents"><table summary="Comparison of the chkconfig utility with systemctl" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">chkconfig</th><th style="text-align: left" valign="top">systemctl</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">chkconfig <span class="emphasis"><em>name</em></span> on</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl enable <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Enables a service.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">chkconfig <span class="emphasis"><em>name</em></span> off</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl disable <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Disables a service.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">chkconfig --list <span class="emphasis"><em>name</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl status <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 <p>

							</p>
							 <p>
								<code class="literal">systemctl is-enabled <span class="emphasis"><em>name</em></span>.service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Checks if a service is enabled.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">chkconfig --list</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl list-unit-files --type service</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Lists all services and checks if they are enabled.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">chkconfig --list</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl list-dependencies --after</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Lists services that are ordered to start before the specified unit.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">chkconfig --list</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl list-dependencies --before</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Lists services that are ordered to start after the specified unit.
							</p>
							 </td></tr></tbody></table></div></div><h3><a id="specifying_service_units"/>Specifying service units</h3><p>
				For clarity, all command examples in the rest of this section use full unit names with the <code class="literal">.service</code> file extension, for example:
			</p><pre class="literallayout">~]# systemctl stop nfs-server.service</pre><p>
				However, the file extension can be omitted, in which case the <code class="literal">systemctl</code> utility assumes the argument is a service unit. The following command is equivalent to the one above:
			</p><pre class="literallayout">~]# systemctl stop nfs-server</pre><p>
				Additionally, some units have alias names. Those names can have shorter names than units, which can be used instead of the actual unit names. To find all aliases that can be used for a particular unit, use:
			</p><pre class="literallayout">~]# systemctl show nfs-server.service -p Names</pre><h3><a id="behavior_of_systemctl_in_a_chroot_environment"/>Behavior of systemctl in a chroot environment</h3><p>
				If you change the root directory using the <code class="literal">chroot</code> command, most <code class="literal">systemctl</code> commands refuse to perform any action. The reason for this is that the <code class="literal">systemd</code> process and the user that used the <code class="literal">chroot</code> command do not have the same view of the filesystem. This happens, for example, when <code class="literal">systemctl</code> is invoked from a <code class="literal">kickstart</code> file.
			</p><p>
				The exception to this are unit file commands such as the <code class="literal">systemctl enable</code> and <code class="literal">systemctl disable</code> commands. These commands do not need a running system and do not affect running processes, but they do affect unit files. Therefore, you can run these commands even in <code class="literal">chroot</code> environment. For example, to enable the <code class="literal">httpd</code> service on a system under the <code class="literal">/srv/website1/</code> directory:
			</p><pre class="literallayout">~]# chroot /srv/website1
~]# systemctl enable httpd.service
Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service, pointing to /usr/lib/systemd/system/httpd.service.</pre><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-List"/>Listing services</h2></div></div></div><p>
					To list all currently loaded service units, type the following at a shell prompt:
				</p><pre class="literallayout"><code class="literal">systemctl list-units --type service</code></pre><p>
					For each service unit file, this command displays its full name (<code class="literal">UNIT</code>) followed by a note whether the unit file has been loaded (<code class="literal">LOAD</code>), its high-level (<code class="literal">ACTIVE</code>) and low-level (<code class="literal">SUB</code>) unit file activation state, and a short description (<code class="literal">DESCRIPTION</code>).
				</p><p>
					By default, the <code class="literal">systemctl list-units</code> command displays only active units. If you want to list all loaded units regardless of their state, run this command with the <code class="literal">--all</code> or <code class="literal">-a</code> command line option:
				</p><pre class="literallayout"><code class="literal">systemctl list-units --type service --all</code></pre><p>
					You can also list all available service units to see if they are enabled. To do so, type:
				</p><pre class="literallayout"><code class="literal">systemctl list-unit-files --type service</code></pre><p>
					For each service unit, this command displays its full name (<code class="literal">UNIT FILE</code>) followed by information whether the service unit is enabled or not (<code class="literal">STATE</code>). For information on how to determine the status of individual service units, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Status" title="Displaying service status">Displaying service status</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-List"/><p class="title"><strong>Example 3.1. Listing services</strong></p><div class="example-contents"><p>
						To list all currently loaded service units, run the following command:
					</p><pre class="literallayout">~]$ <code class="literal">systemctl list-units --type service</code>
UNIT                           LOAD   ACTIVE SUB     DESCRIPTION
abrt-ccpp.service              loaded active exited  Install ABRT coredump hook
abrt-oops.service              loaded active running ABRT kernel log watcher
abrt-vmcore.service            loaded active exited  Harvest vmcores for ABRT
abrt-xorg.service              loaded active running ABRT Xorg log watcher
abrtd.service                  loaded active running ABRT Automated Bug Reporting Tool
…​
systemd-vconsole-setup.service loaded active exited  Setup Virtual Console
tog-pegasus.service            loaded active running OpenPegasus CIM Server

LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

<span class="strong"><strong>46 loaded units listed.</strong></span> Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'</pre><p>
						To list all installed service unit files to determine if they are enabled, type:
					</p><pre class="literallayout">~]$ systemctl list-unit-files --type service
UNIT FILE                                   STATE
abrt-ccpp.service                           enabled
abrt-oops.service                           enabled
abrt-vmcore.service                         enabled
abrt-xorg.service                           enabled
abrtd.service                               enabled
…​
wpa_supplicant.service                      disabled
ypbind.service                              disabled

208 unit files listed.</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Status"/>Displaying service status</h2></div></div></div><p>
					To display detailed information about a service unit that corresponds to a system service, type the following at a shell prompt:
				</p><pre class="literallayout"><code class="literal">systemctl status <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to inspect (for example, <code class="literal">gdm</code>). This command displays the name of the selected service unit followed by its short description, one or more fields described in <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Services-Status" title="Table 3.5. Available service unit information">Table 3.5, “Available service unit information”</a>, and if it is executed by the <code class="literal">root</code> user, also the most recent log entries.
				</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Services-Status"/><p class="title"><strong>Table 3.5. Available service unit information</strong></p><div class="table-contents"><table summary="Available service unit information" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Field</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Loaded</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Information whether the service unit has been loaded, the absolute path to the unit file, and a note whether the unit is enabled.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Active</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Information whether the service unit is running followed by a time stamp.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Main PID</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									The PID of the corresponding system service followed by its name.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Status</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Additional information about the corresponding system service.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Process</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Additional information about related processes.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">CGroup</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Additional information about related Control Groups (cgroups).
								</p>
								 </td></tr></tbody></table></div></div><p>
					To only verify that a particular service unit is running, run the following command:
				</p><pre class="literallayout"><code class="literal">systemctl is-active <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Similarly, to determine whether a particular service unit is enabled, type:
				</p><pre class="literallayout"><code class="literal">systemctl is-enabled <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Note that both <code class="literal">systemctl is-active</code> and <code class="literal">systemctl is-enabled</code> return an exit status of <code class="literal">0</code> if the specified service unit is running or enabled. For information on how to list all currently loaded service units, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-List" title="Listing services">Listing services</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Status"/><p class="title"><strong>Example 3.2. Displaying service status</strong></p><div class="example-contents"><p>
						The service unit for the GNOME Display Manager is named <code class="literal">gdm.service</code>. To determine the current status of this service unit, type the following at a shell prompt:
					</p><pre class="literallayout">~]# systemctl status gdm.service
gdm.service - GNOME Display Manager
   Loaded: loaded (/usr/lib/systemd/system/gdm.service; enabled)
   Active: active (running) since Thu 2013-10-17 17:31:23 CEST; 5min ago
 Main PID: 1029 (gdm)
   CGroup: /system.slice/gdm.service
           ├─1029 /usr/sbin/gdm
           ├─1037 /usr/libexec/gdm-simple-slave --display-id /org/gno…​
           └─1047 /usr/bin/Xorg :0 -background none -verbose -auth /r…​

Oct 17 17:31:23 localhost systemd[1]: Started GNOME Display Manager.</pre></div></div><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Status_Start_Before"/><p class="title"><strong>Example 3.3. Displaying services ordered to start before a service</strong></p><div class="example-contents"><p>
						To determine what services are ordered to start before the specified service, type the following at a shell prompt:
					</p><pre class="literallayout">~]# systemctl list-dependencies --after gdm.service
gdm.service
├─dbus.socket
├─getty@tty1.service
├─livesys.service
├─plymouth-quit.service
├─system.slice
├─systemd-journald.socket
├─systemd-user-sessions.service
└─basic.target
[output truncated]</pre></div></div><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Status_Start_After"/><p class="title"><strong>Example 3.4. Displaying services ordered to start after a service</strong></p><div class="example-contents"><p>
						To determine what services are ordered to start after the specified service, type the following at a shell prompt:
					</p><pre class="literallayout">~]# systemctl list-dependencies --before gdm.service
gdm.service
├─dracut-shutdown.service
├─graphical.target
│ ├─systemd-readahead-done.service
│ ├─systemd-readahead-done.timer
│ └─systemd-update-utmp-runlevel.service
└─shutdown.target
  ├─systemd-reboot.service
  └─final.target
    └─systemd-reboot.service</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Start"/>Starting a service</h2></div></div></div><p>
					To start a service unit that corresponds to a system service, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl start <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to start (for example, <code class="literal">gdm</code>). This command starts the selected service unit in the current session. For information on how to enable a service unit to be started at boot time, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Enable" title="Enabling a service">Enabling a service</a>. For information on how to determine the status of a certain service unit, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Status" title="Displaying service status">Displaying service status</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Start"/><p class="title"><strong>Example 3.5. Starting a service</strong></p><div class="example-contents"><p>
						The service unit for the Apache HTTP Server is named <code class="literal">httpd.service</code>. To activate this service unit and start the <code class="literal">httpd</code> daemon in the current session, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl start httpd.service</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Stop"/>Stopping a service</h2></div></div></div><p>
					To stop a service unit that corresponds to a system service, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl stop <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to stop (for example, <code class="literal">bluetooth</code>). This command stops the selected service unit in the current session. For information on how to disable a service unit and prevent it from being started at boot time, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Disable" title="Disabling a service">Disabling a service</a>. For information on how to determine the status of a certain service unit, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Status" title="Displaying service status">Displaying service status</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Stop"/><p class="title"><strong>Example 3.6. Stopping a service</strong></p><div class="example-contents"><p>
						The service unit for the <code class="literal">bluetoothd</code> daemon is named <code class="literal">bluetooth.service</code>. To deactivate this service unit and stop the <code class="literal">bluetoothd</code> daemon in the current session, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl stop bluetooth.service</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Restart"/>Restarting a service</h2></div></div></div><p>
					To restart a service unit that corresponds to a system service, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to restart (for example, <code class="literal">httpd</code>). This command stops the selected service unit in the current session and immediately starts it again. Importantly, if the selected service unit is not running, this command starts it too. To tell <span class="strong"><strong><span class="application">systemd</span></strong></span> to restart a service unit only if the corresponding service is already running, run the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl try-restart <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Certain system services also allow you to reload their configuration without interrupting their execution. To do so, type as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl reload <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Note that system services that do not support this feature ignore this command altogether. For convenience, the <code class="literal">systemctl</code> command also supports the <code class="literal">reload-or-restart</code> and <code class="literal">reload-or-try-restart</code> commands that restart such services instead. For information on how to determine the status of a certain service unit, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Status" title="Displaying service status">Displaying service status</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Restart"/><p class="title"><strong>Example 3.7. Restarting a service</strong></p><div class="example-contents"><p>
						In order to prevent users from encountering unnecessary error messages or partially rendered web pages, the Apache HTTP Server allows you to edit and reload its configuration without the need to restart it and interrupt actively processed requests. To do so, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl reload httpd.service</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Enable"/>Enabling a service</h2></div></div></div><p>
					To configure a service unit that corresponds to a system service to be automatically started at boot time, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl enable <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to enable (for example, <code class="literal">httpd</code>). This command reads the <code class="literal">[Install]</code> section of the selected service unit and creates appropriate symbolic links to the <code class="literal">/usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.service</code> file in the <code class="literal">/etc/systemd/system/</code> directory and its subdirectories. This command does not, however, rewrite links that already exist. If you want to ensure that the symbolic links are re-created, use the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl reenable <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					This command disables the selected service unit and immediately enables it again. For information on how to determine whether a certain service unit is enabled to start at boot time, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Status" title="Displaying service status">Displaying service status</a>. For information on how to start a service in the current session, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Start" title="Starting a service">Starting a service</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Enable"/><p class="title"><strong>Example 3.8. Enabling a service</strong></p><div class="example-contents"><p>
						To configure the Apache HTTP Server to start automatically at boot time, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl enable httpd.service
Created symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Disable"/>Disabling a service</h2></div></div></div><p>
					To prevent a service unit that corresponds to a system service from being automatically started at boot time, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl disable <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to disable (for example, <code class="literal">bluetooth</code>). This command reads the <code class="literal">[Install]</code> section of the selected service unit and removes appropriate symbolic links to the <code class="literal">/usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.service</code> file from the <code class="literal">/etc/systemd/system/</code> directory and its subdirectories. In addition, you can mask any service unit to prevent it from being started manually or by another service. To do so, run the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl mask <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					This command replaces the <code class="literal">/etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code> file with a symbolic link to <code class="literal">/dev/null</code>, rendering the actual unit file inaccessible to <span class="strong"><strong><span class="application">systemd</span></strong></span>. To revert this action and unmask a service unit, type as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl unmask <span class="emphasis"><em>name</em></span>.service</code></pre><p>
					For information on how to determine whether a certain service unit is enabled to start at boot time, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Status" title="Displaying service status">Displaying service status</a>. For information on how to stop a service in the current session, see <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Stop" title="Stopping a service">Stopping a service</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Services-Disable"/><p class="title"><strong>Example 3.9. Disabling a service</strong></p><div class="example-contents"><p>
						<a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#exam-Managing_Services_with_systemd-Services-Stop" title="Example 3.6. Stopping a service">Example 3.6, “Stopping a service”</a> illustrates how to stop the <code class="literal">bluetooth.service</code> unit in the current session. To prevent this service unit from starting at boot time, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl disable bluetooth.service
Removed symlink /etc/systemd/system/bluetooth.target.wants/bluetooth.service.
Removed symlink /etc/systemd/system/dbus-org.bluez.service.</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Services-Start_confl"/>Starting a conflicting service</h2></div></div></div><p>
					In <span class="strong"><strong><span class="application">systemd</span></strong></span>, positive and negative dependencies between services exist. Starting particular service may require starting one or more other services (positive dependency) or stopping one or more services (negative dependency).
				</p><p>
					When you attempt to start a new service, <span class="strong"><strong><span class="application">systemd</span></strong></span> resolves all dependencies automatically. Note that this is done without explicit notification to the user. If you are already running a service, and you attempt to start another service with a negative dependency, the first service is automatically stopped.
				</p><p>
					For example, if you are running the <code class="literal">postfix</code> service, and you try to start the <code class="literal">sendmail</code> service, <span class="strong"><strong><span class="application">systemd</span></strong></span> first automatically stops <code class="literal">postfix</code>, because these two services are conflicting and cannot run on the same port.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="working-with-systemd-targets_managing-services-with-systemd"/>Working with systemd targets</h1></div></div></div><p>
				Previous versions of Red Hat Enterprise Linux, which were distributed with SysV init or Upstart, implemented a predefined set of <span class="emphasis"><em>runlevels</em></span> that represented specific modes of operation. These runlevels were numbered from 0 to 6 and were defined by a selection of system services to be run when a particular runlevel was enabled by the system administrator. Starting with Red Hat Enterprise Linux 7, the concept of runlevels has been replaced with <span class="emphasis"><em>systemd targets</em></span>.
			</p><p>
				Systemd targets are represented by <span class="emphasis"><em>target units</em></span>. Target units end with the <code class="literal">.target</code> file extension and their only purpose is to group together other systemd units through a chain of dependencies. For example, the <code class="literal">graphical.target</code> unit, which is used to start a graphical session, starts system services such as the GNOME Display Manager (<code class="literal">gdm.service</code>) or Accounts Service (<code class="literal">accounts-daemon.service</code>) and also activates the <code class="literal">multi-user.target</code> unit. Similarly, the <code class="literal">multi-user.target</code> unit starts other essential system services such as NetworkManager (<code class="literal">NetworkManager.service</code>) or D-Bus (<code class="literal">dbus.service</code>) and activates another target unit named <code class="literal">basic.target</code>.
			</p><p>
				Red Hat Enterprise Linux 7 was distributed with a number of predefined targets that are more or less similar to the standard set of runlevels from the previous releases of this system. For compatibility reasons, it also provides aliases for these targets that directly map them to SysV runlevels. <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Targets-Runlevels" title="Table 3.6. Comparison of SysV runlevels with systemd targets">Table 3.6, “Comparison of SysV runlevels with systemd targets”</a> provides a complete list of SysV runlevels and their corresponding systemd targets.
			</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Targets-Runlevels"/><p class="title"><strong>Table 3.6. Comparison of SysV runlevels with systemd targets</strong></p><div class="table-contents"><table summary="Comparison of SysV runlevels with systemd targets" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Runlevel</th><th style="text-align: left" valign="top">Target Units</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">0</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel0.target</code>, <code class="literal">poweroff.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Shut down and power off the system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">1</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel1.target</code>, <code class="literal">rescue.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Set up a rescue shell.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">2</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel2.target</code>, <code class="literal">multi-user.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Set up a non-graphical multi-user system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">3</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel3.target</code>, <code class="literal">multi-user.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Set up a non-graphical multi-user system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">4</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel4.target</code>, <code class="literal">multi-user.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Set up a non-graphical multi-user system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">5</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel5.target</code>, <code class="literal">graphical.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Set up a graphical multi-user system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">6</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel6.target</code>, <code class="literal">reboot.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Shut down and reboot the system.
							</p>
							 </td></tr></tbody></table></div></div><p>
				To view, change, or configure systemd targets, use the <code class="literal">systemctl</code> utility as described in <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Targets-telinit" title="Table 3.7. Comparison of SysV init commands with systemctl">Table 3.7, “Comparison of SysV init commands with systemctl”</a> and in the sections below. The <code class="literal">runlevel</code> and <code class="literal">telinit</code> commands are still available in the system and work as expected, but are only included for compatibility reasons and should be avoided.
			</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Targets-telinit"/><p class="title"><strong>Table 3.7. Comparison of SysV init commands with systemctl</strong></p><div class="table-contents"><table summary="Comparison of SysV init commands with systemctl" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Old Command</th><th style="text-align: left" valign="top">New Command</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">runlevel</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl list-units --type target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Lists currently loaded target units.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">telinit <span class="emphasis"><em>runlevel</em></span></code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl isolate <span class="emphasis"><em>name</em></span>.target</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Changes the current target.
							</p>
							 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Targets-View_Default"/>Viewing the default target</h2></div></div></div><p>
					To determine which target unit is used by default, run the following command:
				</p><pre class="literallayout"><code class="literal">systemctl get-default</code></pre><p>
					This command resolves the symbolic link located at <code class="literal">/etc/systemd/system/default.target</code> and displays the result.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Targets-View_Default"/><p class="title"><strong>Example 3.10. Viewing the default target</strong></p><div class="example-contents"><p>
						To display the default target unit, type:
					</p><pre class="literallayout">~]$ <code class="literal">systemctl get-default</code>
graphical.target</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Targets-View_Current"/>Viewing the current target</h2></div></div></div><p>
					To list all currently loaded target units, type the following command at a shell prompt:
				</p><pre class="literallayout"><code class="literal">systemctl list-units --type target</code></pre><p>
					For each target unit, this commands displays its full name (<code class="literal">UNIT</code>) followed by a note whether the unit has been loaded (<code class="literal">LOAD</code>), its high-level (<code class="literal">ACTIVE</code>) and low-level (<code class="literal">SUB</code>) unit activation state, and a short description (<code class="literal">DESCRIPTION</code>).
				</p><p>
					By default, the <code class="literal">systemctl list-units</code> command displays only active units. If you want to list all loaded units regardless of their state, run this command with the <code class="literal">--all</code> or <code class="literal">-a</code> command line option:
				</p><pre class="literallayout"><code class="literal">systemctl list-units --type target --all</code></pre><div class="example"><a id="exam-Managing_Services_with_systemd-Targets-View_Current"/><p class="title"><strong>Example 3.11. Viewing the current target</strong></p><div class="example-contents"><p>
						To list all currently loaded target units, run:
					</p><pre class="literallayout">~]$ <code class="literal">systemctl list-units --type target</code>
UNIT                  LOAD   ACTIVE SUB    DESCRIPTION
basic.target          loaded active active Basic System
cryptsetup.target     loaded active active Encrypted Volumes
getty.target          loaded active active Login Prompts
graphical.target      loaded active active Graphical Interface
local-fs-pre.target   loaded active active Local File Systems (Pre)
local-fs.target       loaded active active Local File Systems
multi-user.target     loaded active active Multi-User System
network.target        loaded active active Network
paths.target          loaded active active Paths
remote-fs.target      loaded active active Remote File Systems
sockets.target        loaded active active Sockets
sound.target          loaded active active Sound Card
spice-vdagentd.target loaded active active Agent daemon for Spice guests
swap.target           loaded active active Swap
sysinit.target        loaded active active System Initialization
time-sync.target      loaded active active System Time Synchronized
timers.target         loaded active active Timers

LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

<span class="strong"><strong>17 loaded units listed.</strong></span> Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Targets-Change_Default"/>Changing the default target</h2></div></div></div><p>
					To configure the system to use a different target unit by default, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl set-default <span class="emphasis"><em>name</em></span>.target</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the target unit you want to use by default (for example, <code class="literal">multi-user</code>). This command replaces the <code class="literal">/etc/systemd/system/default.target</code> file with a symbolic link to <code class="literal">/usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.target</code>, where <span class="emphasis"><em>name</em></span> is the name of the target unit you want to use.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Targets-Change_Default"/><p class="title"><strong>Example 3.12. Changing the default target</strong></p><div class="example-contents"><p>
						To configure the system to use the <code class="literal">multi-user.target</code> unit by default, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl set-default multi-user.target
rm '/etc/systemd/system/default.target'
ln -s '/usr/lib/systemd/system/multi-user.target' '/etc/systemd/system/default.target'</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Targets-Change_Current"/>Changing the current target</h2></div></div></div><p>
					To change to a different target unit in the current session, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl isolate <span class="emphasis"><em>name</em></span>.target</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the target unit you want to use (for example, <code class="literal">multi-user</code>). This command starts the target unit named <span class="emphasis"><em>name</em></span> and all dependent units, and immediately stops all others.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Targets-Change_Current"/><p class="title"><strong>Example 3.13. Changing the current target</strong></p><div class="example-contents"><p>
						To turn off the graphical user interface and change to the <code class="literal">multi-user.target</code> unit in the current session, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl isolate multi-user.target</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Targets-Rescue"/>Changing to rescue mode</h2></div></div></div><p>
					<span class="emphasis"><em>Rescue mode</em></span> provides a convenient single-user environment and allows you to repair your system in situations when it is unable to complete a regular booting process. In rescue mode, the system attempts to mount all local file systems and start some important system services, but it does not activate network interfaces or allow more users to be logged into the system at the same time. Rescue mode requires the root password.
				</p><p>
					To change the current target and enter rescue mode in the current session, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl rescue</code></pre><p>
					This command is similar to <code class="literal">systemctl isolate rescue.target</code>, but it also sends an informative message to all users that are currently logged into the system. To prevent <span class="strong"><strong><span class="application">systemd</span></strong></span> from sending this message, run this command with the <code class="literal">--no-wall</code> command line option:
				</p><pre class="literallayout"><code class="literal">systemctl --no-wall rescue</code></pre><p>
					For information on how to enter emergency mode, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#sect-Managing_Services_with_systemd-Targets-Emergency" title="Changing to emergency mode">the section called “Changing to emergency mode”</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Targets-Rescue"/><p class="title"><strong>Example 3.14. Changing to rescue mode</strong></p><div class="example-contents"><p>
						To enter rescue mode in the current session, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl rescue

Broadcast message from root@localhost on pts/0 (Fri 2013-10-25 18:23:15 CEST):

The system is going down to rescue mode NOW!</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Targets-Emergency"/>Changing to emergency mode</h2></div></div></div><p>
					<span class="emphasis"><em>Emergency mode</em></span> provides the most minimal environment possible and allows you to repair your system even in situations when the system is unable to enter rescue mode. In emergency mode, the system mounts the root file system only for reading, does not attempt to mount any other local file systems, does not activate network interfaces, and only starts a few essential services. Emergency mode requires the root password.
				</p><p>
					To change the current target and enter emergency mode, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl emergency</code></pre><p>
					This command is similar to <code class="literal">systemctl isolate emergency.target</code>, but it also sends an informative message to all users that are currently logged into the system. To prevent <span class="strong"><strong><span class="application">systemd</span></strong></span> from sending this message, run this command with the <code class="literal">--no-wall</code> command line option:
				</p><pre class="literallayout"><code class="literal">systemctl --no-wall emergency</code></pre><p>
					For information on how to enter rescue mode, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#sect-Managing_Services_with_systemd-Targets-Rescue" title="Changing to rescue mode">the section called “Changing to rescue mode”</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-Targets-Emergency"/><p class="title"><strong>Example 3.15. Changing to emergency mode</strong></p><div class="example-contents"><p>
						To enter emergency mode without sending a message to all users that are currently logged into the system, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl --no-wall emergency</pre></div></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="shutting-down-suspending-hibernating-system_managing-services-with-systemd"/>Shutting down, suspending, and hibernating the system</h1></div></div></div><p>
				In Red Hat Enterprise Linux 7, the <code class="literal">systemctl</code> utility replaced a number of power management commands used in previous versions of Red Hat Enterprise Linux. The commands listed in <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Power" title="Table 3.8. Comparison of power management commands with systemctl">Table 3.8, “Comparison of power management commands with systemctl”</a> are still available in the system for compatibility reasons, but it is advised that you use <code class="literal">systemctl</code> when possible.
			</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Power"/><p class="title"><strong>Table 3.8. Comparison of power management commands with systemctl</strong></p><div class="table-contents"><table summary="Comparison of power management commands with systemctl" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Old Command</th><th style="text-align: left" valign="top">New Command</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">halt</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl halt</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Halts the system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">poweroff</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl poweroff</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Powers off the system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">reboot</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl reboot</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Restarts the system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">pm-suspend</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl suspend</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Suspends the system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">pm-hibernate</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl hibernate</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Hibernates the system.
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								<code class="literal">pm-suspend-hybrid</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<code class="literal">systemctl hybrid-sleep</code>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Hibernates and suspends the system.
							</p>
							 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Power-Halt"/>Shutting down the system</h2></div></div></div><p>
					The <code class="literal">systemctl</code> utility provides commands for shutting down the system, however the traditional <code class="literal">shutdown</code> command is also supported. Although the <code class="literal">shutdown</code> command will call the <code class="literal">systemctl</code> utility to perform the shutdown, it has an advantage in that it also supports a time argument. This is particularly useful for scheduled maintenance and to allow more time for users to react to the warning that a system shutdown has been scheduled. The option to cancel the shutdown can also be an advantage.
				</p><h4><a id="using_systemctl_commands"/>Using systemctl commands</h4><p>
					To shut down the system and power off the machine, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl poweroff</code></pre><p>
					To shut down and halt the system without powering off the machine, run the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl halt</code></pre><p>
					By default, running either of these commands causes <span class="strong"><strong><span class="application">systemd</span></strong></span> to send an informative message to all users that are currently logged into the system. To prevent <span class="strong"><strong><span class="application">systemd</span></strong></span> from sending this message, run the selected command with the <code class="literal">--no-wall</code> command line option, for example:
				</p><pre class="literallayout"><code class="literal">systemctl --no-wall poweroff</code></pre><h4><a id="using_the_shutdown_command"/>Using the shutdown command</h4><p>
					To shut down the system and power off the machine at a certain time, use a command in the following format as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">shutdown --poweroff <span class="emphasis"><em>hh:mm</em></span></code></pre><p>
					Where <span class="emphasis"><em>hh:mm</em></span> is the time in 24 hour clock format. The <code class="literal">/run/nologin</code> file is created 5 minutes before system shutdown to prevent new logins. When a time argument is used, an optional message, the <span class="emphasis"><em>wall message</em></span>, can be appended to the command.
				</p><p>
					To shut down and halt the system after a delay, without powering off the machine, use a command in the following format as <code class="literal">root</code>:
				</p><pre class="literallayout">shutdown --halt +m</pre><p>
					Where <span class="emphasis"><em>+m</em></span> is the delay time in minutes. The <code class="literal">now</code> keyword is an alias for <code class="literal">+0</code>.
				</p><p>
					A pending shutdown can be canceled by the <code class="literal">root</code> user as follows:
				</p><pre class="literallayout"><code class="literal">shutdown -c</code></pre><p>
					See the <code class="literal">shutdown(8)</code> manual page for further command options.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Power-Reboot"/>Restarting the system</h2></div></div></div><p>
					To restart the system, run the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl reboot</code></pre><p>
					By default, this command causes <span class="strong"><strong><span class="application">systemd</span></strong></span> to send an informative message to all users that are currently logged into the system. To prevent <span class="strong"><strong><span class="application">systemd</span></strong></span> from sending this message, run this command with the <code class="literal">--no-wall</code> command line option:
				</p><pre class="literallayout"><code class="literal">systemctl --no-wall reboot</code></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Power-Suspend"/>Suspending the system</h2></div></div></div><p>
					To suspend the system, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl suspend</code></pre><p>
					This command saves the system state in RAM and with the exception of the RAM module, powers off most of the devices in the machine. When you turn the machine back on, the system then restores its state from RAM without having to boot again. Because the system state is saved in RAM and not on the hard disk, restoring the system from suspend mode is significantly faster than restoring it from hibernation, but as a consequence, a suspended system state is also vulnerable to power outages.
				</p><p>
					For information on how to hibernate the system, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#sect-Managing_Services_with_systemd-Power-Hibernate" title="Hibernating the system">the section called “Hibernating the system”</a>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Managing_Services_with_systemd-Power-Hibernate"/>Hibernating the system</h2></div></div></div><p>
					To hibernate the system, type the following at a shell prompt as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl hibernate</code></pre><p>
					This command saves the system state on the hard disk drive and powers off the machine. When you turn the machine back on, the system then restores its state from the saved data without having to boot again. Because the system state is saved on the hard disk and not in RAM, the machine does not have to maintain electrical power to the RAM module, but as a consequence, restoring the system from hibernation is significantly slower than restoring it from suspend mode.
				</p><p>
					To hibernate and suspend the system, run the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl hybrid-sleep</code></pre><p>
					For information on how to suspend the system, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#sect-Managing_Services_with_systemd-Power-Suspend" title="Suspending the system">the section called “Suspending the system”</a>.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="working-with-systemd-unit-files_managing-services-with-systemd"/>Working with systemd unit files</h1></div></div></div><p>
				A unit file contains configuration directives that describe the unit and define its behavior. Several <code class="literal">systemctl</code> commands work with unit files in the background. To make finer adjustments, system administrator must edit or create unit files manually. <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Introduction-Units-Locations" title="Table 3.1. Systemd unit files locations">Table 3.1, “Systemd unit files locations”</a> lists three main directories where unit files are stored on the system, the <code class="literal">/etc/systemd/system/</code> directory is reserved for unit files created or customized by the system administrator.
			</p><p>
				Unit file names take the following form:
			</p><pre class="literallayout"><span class="emphasis"><em>unit_name</em></span>.<span class="emphasis"><em>type_extension</em></span></pre><p>
				Here, <span class="emphasis"><em>unit_name</em></span> stands for the name of the unit and <span class="emphasis"><em>type_extension</em></span> identifies the unit type, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Introduction-Units-Types" title="Table 3.2. Available systemd unit types">Table 3.2, “Available systemd unit types”</a> for a complete list of unit types. For example, there usually is <code class="literal">sshd.service</code> as well as <code class="literal">sshd.socket</code> unit present on your system.
			</p><p>
				Unit files can be supplemented with a directory for additional configuration files. For example, to add custom configuration options to <code class="literal">sshd.service</code>, create the <code class="literal">sshd.service.d/custom.conf</code> file and insert additional directives there. For more information on configuration directories, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Unit_File_Modify" title="Modifying existing unit files">the section called “Modifying existing unit files”</a>.
			</p><p>
				Also, the <code class="literal">sshd.service.wants/</code> and <code class="literal">sshd.service.requires/</code> directories can be created. These directories contain symbolic links to unit files that are dependencies of the <code class="literal">sshd</code> service. The symbolic links are automatically created either during installation according to [Install] unit file options or at runtime based on [Unit] options. It is also possible to create these directories and symbolic links manually. For more details on [Install] and [Unit] options, see the tables below.
			</p><p>
				Many unit file options can be set using the so called <span class="strong"><strong>unit specifiers</strong></span> – wildcard strings that are dynamically replaced with unit parameters when the unit file is loaded. This enables creation of generic unit files that serve as templates for generating instantiated units. See <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Instantiated_Units" title="Working with instantiated units">the section called “Working with instantiated units”</a> for details.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Unit_File_Structure"/>Understanding the unit file structure</h2></div></div></div><p>
					Unit files typically consist of three sections:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The <code class="literal">[Unit]</code> section — contains generic options that are not dependent on the type of the unit. These options provide unit description, specify the unit’s behavior, and set dependencies to other units. For a list of most frequently used [Unit] options, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Unit_Sec_Options" title="Table 3.9. Important [Unit] section options">Table 3.9, “Important [Unit] section options”</a>.
						</li><li class="listitem">
							The <code class="literal">[Unit type]</code> section — if a unit has type-specific directives, these are grouped under a section named after the unit type. For example, service unit files contain the <code class="literal">[Service]</code> section.
						</li><li class="listitem">
							The <code class="literal">[Install]</code> section — contains information about unit installation used by <code class="literal">systemctl enable</code> and <code class="literal">disable</code> commands. For a list of options for the <code class="literal">[Install]</code> section, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Install_Sec_Options" title="Table 3.11. Important [Install] section options">Table 3.11, “Important [Install] section options”</a>.
						</li></ul></div><div class="table"><a id="tabl-Managing_Services_with_systemd-Unit_Sec_Options"/><p class="title"><strong>Table 3.9. Important [Unit] section options</strong></p><div class="table-contents"><table summary="Important [Unit] section options" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Option<a href="#ftn.idm140276619584432" class="footnote" id="idm140276619584432"><sup class="footnote">[a]</sup></a> section, see the <code class="literal">systemd.unit(5)</code> manual page.]</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Description</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A meaningful description of the unit. This text is displayed for example in the output of the <code class="literal">systemctl status</code> command.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Documentation</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Provides a list of URIs referencing documentation for the unit.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">After</code><a href="#ftn.idm140276619569104" class="footnote" id="idm140276619569104"><sup class="footnote">[b]</sup></a>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Defines the order in which units are started. The unit starts only after the units specified in <code class="literal">After</code> are active. Unlike <code class="literal">Requires</code>, <code class="literal">After</code> does not explicitly activate the specified units. The <code class="literal">Before</code> option has the opposite functionality to <code class="literal">After</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Requires</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Configures dependencies on other units. The units listed in <code class="literal">Requires</code> are activated together with the unit. If any of the required units fail to start, the unit is not activated.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Wants</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Configures weaker dependencies than <code class="literal">Requires</code>. If any of the listed units does not start successfully, it has no impact on the unit activation. This is the recommended way to establish custom unit dependencies.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Conflicts</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Configures negative dependencies, an opposite to <code class="literal">Requires</code>.
								</p>
								 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140276619584432" class="footnote"><p><a href="#idm140276619584432" class="simpara"><sup class="simpara">[a] </sup></a>
									For a complete list of options configurable in the [Unit
								</p></div><div id="ftn.idm140276619569104" class="footnote"><p><a href="#idm140276619569104" class="simpara"><sup class="simpara">[b] </sup></a>
										In most cases, it is sufficient to set only the ordering dependencies with <code class="literal">After</code> and <code class="literal">Before</code> unit file options. If you also set a requirement dependency with <code class="literal">Wants</code> (recommended) or <code class="literal">Requires</code>, the ordering dependency still needs to be specified. That is because ordering and requirement dependencies work independently from each other.
									</p></div></td></tr></tbody></table></div></div><div class="table"><a id="tabl-Managing_Services_with_systemd-Service_Sec_Options"/><p class="title"><strong>Table 3.10. Important [Service] section options</strong></p><div class="table-contents"><table summary="Important [Service] section options" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Option<a href="#ftn.idm140276619535840" class="footnote" id="idm140276619535840"><sup class="footnote">[a]</sup></a> section, see the <code class="literal">systemd.service(5)</code> manual page.]</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Type</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Configures the unit process startup type that affects the functionality of <code class="literal">ExecStart</code> and related options. One of:
								</p>
								 <p>

								</p>
								 <p>
									* <code class="literal">simple</code> – The default value. The process started with <code class="literal">ExecStart</code> is the main process of the service.
								</p>
								 <p>
									* <code class="literal">forking</code> – The process started with <code class="literal">ExecStart</code> spawns a child process that becomes the main process of the service. The parent process exits when the startup is complete.
								</p>
								 <p>
									* <code class="literal">oneshot</code> – This type is similar to <code class="literal">simple</code>, but the process exits before starting consequent units.
								</p>
								 <p>
									* <code class="literal">dbus</code> – This type is similar to <code class="literal">simple</code>, but consequent units are started only after the main process gains a D-Bus name.
								</p>
								 <p>
									* <code class="literal">notify</code> – This type is similar to <code class="literal">simple</code>, but consequent units are started only after a notification message is sent via the sd_notify() function.
								</p>
								 <p>
									* <code class="literal">idle</code> – similar to <code class="literal">simple</code>, the actual execution of the service binary is delayed until all jobs are finished, which avoids mixing the status output with shell output of services.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">ExecStart</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Specifies commands or scripts to be executed when the unit is started. <code class="literal">ExecStartPre</code> and <code class="literal">ExecStartPost</code> specify custom commands to be executed before and after <code class="literal">ExecStart</code>. <code class="literal">Type=oneshot</code> enables specifying multiple custom commands that are then executed sequentially.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">ExecStop</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Specifies commands or scripts to be executed when the unit is stopped.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">ExecReload</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Specifies commands or scripts to be executed when the unit is reloaded.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Restart</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									With this option enabled, the service is restarted after its process exits, with the exception of a clean stop by the <code class="literal">systemctl</code> command.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">RemainAfterExit</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									If set to True, the service is considered active even when all its processes exited. Default value is False. This option is especially useful if <code class="literal">Type=oneshot</code> is configured.
								</p>
								 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140276619535840" class="footnote"><p><a href="#idm140276619535840" class="simpara"><sup class="simpara">[a] </sup></a>
									For a complete list of options configurable in the [Service
								</p></div></td></tr></tbody></table></div></div><div class="table"><a id="tabl-Managing_Services_with_systemd-Install_Sec_Options"/><p class="title"><strong>Table 3.11. Important [Install] section options</strong></p><div class="table-contents"><table summary="Important [Install] section options" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Option<a href="#ftn.idm140276559011744" class="footnote" id="idm140276559011744"><sup class="footnote">[a]</sup></a> section, see the <code class="literal">systemd.unit(5)</code> manual page.]</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Alias</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Provides a space-separated list of additional names for the unit. Most <code class="literal">systemctl</code> commands, excluding <code class="literal">systemctl enable</code>, can use aliases instead of the actual unit name.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">RequiredBy</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of units that depend on the unit. When this unit is enabled, the units listed in <code class="literal">RequiredBy</code> gain a <code class="literal">Require</code> dependency on the unit.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">WantedBy</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A list of units that weakly depend on the unit. When this unit is enabled, the units listed in <code class="literal">WantedBy</code> gain a <code class="literal">Want</code> dependency on the unit.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Also</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Specifies a list of units to be installed or uninstalled along with the unit.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">DefaultInstance</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Limited to instantiated units, this option specifies the default instance for which the unit is enabled. See <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Instantiated_Units" title="Working with instantiated units">the section called “Working with instantiated units”</a>
								</p>
								 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140276559011744" class="footnote"><p><a href="#idm140276559011744" class="simpara"><sup class="simpara">[a] </sup></a>
									For a complete list of options configurable in the [Install
								</p></div></td></tr></tbody></table></div></div><p>
					A whole range of options that can be used to fine tune the unit configuration. The below example shows a service unit installed on the system. Moreover, unit file options can be defined in a way that enables dynamic creation of units as described in <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Instantiated_Units" title="Working with instantiated units">Working with instantiated units</a>.
				</p><div class="example"><a id="exam-Managing_Services_with_systemd-postfix_unit_file"/><p class="title"><strong>Example 3.16. postfix.service unit file</strong></p><div class="example-contents"><p>
						What follows is the content of the <code class="literal">/usr/lib/systemd/system/postfix.service</code> unit file as currently provided by the <span class="strong"><strong><span class="package">postfix</span></strong></span> package:
					</p><pre class="literallayout">[Unit]
Description=Postfix Mail Transport Agent
After=syslog.target network.target
Conflicts=sendmail.service exim.service

[Service]
Type=forking
PIDFile=/var/spool/postfix/pid/master.pid
EnvironmentFile=-/etc/sysconfig/network
ExecStartPre=-/usr/libexec/postfix/aliasesdb
ExecStartPre=-/usr/libexec/postfix/chroot-update
ExecStart=/usr/sbin/postfix start
ExecReload=/usr/sbin/postfix reload
ExecStop=/usr/sbin/postfix stop

[Install]
WantedBy=multi-user.target</pre><p>
						The [Unit] section describes the service, specifies the ordering dependencies, as well as conflicting units. In [Service], a sequence of custom scripts is specified to be executed during unit activation, on stop, and on reload. <code class="literal">EnvironmentFile</code> points to the location where environment variables for the service are defined, <code class="literal">PIDFile</code> specifies a stable PID for the main process of the service. Finally, the [Install] section lists units that depend on the service.
					</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Unit_File_Create"/>Creating custom unit files</h2></div></div></div><p>
					There are several use cases for creating unit files from scratch: you could run a custom daemon, create a second instance of some existing service (as in <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#ex-Managing_Services_with_systemd-Multiple_sshd" title="Example 3.18. Creating a second instance of the sshd service">Creating a second instance of the sshd service</a>), or import a SysV init script (more in <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Unit_File_Convert" title="Converting SysV init scripts to unit files">Converting SysV init scripts to unit files</a>). On the other hand, if you intend just to modify or extend the behavior of an existing unit, use the instructions from <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Unit_File_Modify" title="Modifying existing unit files">Modifying existing unit files</a>. The following procedure describes the general process of creating a custom service:
				</p><div class="orderedlist"><a id="proc-Managing_Services_with_systemd-Unit_File_Create"/><ol class="orderedlist"><li class="listitem">
							Prepare the executable file with the custom service. This can be a custom-created script, or an executable delivered by a software provider. If required, prepare a PID file to hold a constant PID for the main process of the custom service. It is also possible to include environment files to store shell variables for the service. Make sure the source script is executable (by executing the <code class="literal">chmod a+x</code>) and is not interactive.
						</li><li class="listitem"><p class="simpara">
							Create a unit file in the <code class="literal">/etc/systemd/system/</code> directory and make sure it has correct file permissions. Execute as <code class="literal">root</code>:
						</p><pre class="literallayout"><code class="literal">touch /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code>

<code class="literal">chmod 664 /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code></pre><p class="simpara">
							Replace <span class="emphasis"><em>name</em></span> with a name of the service to be created. Note that file does not need to be executable.
						</p></li><li class="listitem"><p class="simpara">
							Open the <code class="literal"><span class="emphasis"><em>name</em></span>.service</code> file created in the previous step, and add the service configuration options. There is a variety of options that can be used depending on the type of service you wish to create, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Unit_File_Structure" title="Understanding the unit file structure">the section called “Understanding the unit file structure”</a>. The following is an example unit configuration for a network-related service:
						</p><pre class="literallayout">[Unit]
Description=<span class="emphasis"><em>service_description</em></span>
After=network.target

[Service]
ExecStart=<span class="emphasis"><em>path_to_executable</em></span>
Type=forking
PIDFile=<span class="emphasis"><em>path_to_pidfile</em></span>

[Install]
WantedBy=default.target</pre><p class="simpara">
							Where:
						</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
									<span class="emphasis"><em>service_description</em></span> is an informative description that is displayed in journal log files and in the output of the <code class="literal">systemctl status</code> command.
								</li><li class="listitem">
									the <code class="literal">After</code> setting ensures that the service is started only after the network is running. Add a space-separated list of other relevant services or targets.
								</li><li class="listitem">
									<span class="emphasis"><em>path_to_executable</em></span> stands for the path to the actual service executable.
								</li><li class="listitem">
									<code class="literal">Type=forking</code> is used for daemons that make the fork system call. The main process of the service is created with the PID specified in <span class="emphasis"><em>path_to_pidfile</em></span>. Find other startup types in <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Service_Sec_Options" title="Table 3.10. Important [Service] section options">Table 3.10, “Important [Service] section options”</a>.
								</li><li class="listitem">
									<code class="literal">WantedBy</code> states the target or targets that the service should be started under. Think of these targets as of a replacement of the older concept of runlevels, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#working-with-systemd-targets_managing-services-with-systemd" title="Working with systemd targets">the section called “Working with systemd targets”</a> for details.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Notify <span class="strong"><strong><span class="application">systemd</span></strong></span> that a new <code class="literal"><span class="emphasis"><em>name</em></span>.service</code> file exists by executing the following command as <code class="literal">root</code>:
						</p><pre class="literallayout"><code class="literal">systemctl daemon-reload</code>

<code class="literal">systemctl start <span class="emphasis"><em>name</em></span>.service</code></pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
								Always run the <code class="literal">systemctl daemon-reload</code> command after creating new unit files or modifying existing unit files. Otherwise, the <code class="literal">systemctl start</code> or <code class="literal">systemctl enable</code> commands could fail due to a mismatch between states of <span class="strong"><strong><span class="application">systemd</span></strong></span> and actual service unit files on disk. Note, that on systems with a large number of units this can take a long time, as the state of each unit has to be serialized and subsequently deserialized during the reload.
							</p></div></li></ol></div><div class="example"><a id="exam-Managing_Services_with_systemd-Emacs_Service"/><p class="title"><strong>Example 3.17. Creating the emacs.service file</strong></p><div class="example-contents"><p>
						When using the <span class="strong"><strong><span class="application">Emacs</span></strong></span> text editor, it is often faster and more convenient to have it running in the background instead of starting a new instance of the program whenever editing a file. The following steps show how to create a unit file for Emacs, so that it can be handled like a service.
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Create a unit file in the <code class="literal">/etc/systemd/system/</code> directory and make sure it has the correct file permissions. Execute as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# touch /etc/systemd/system/emacs.service</pre><pre class="literallayout">~]# chmod 664 /etc/systemd/system/emacs.service</pre></li><li class="listitem"><p class="simpara">
								Add the following content to the file:
							</p><pre class="literallayout">[Unit]
Description=Emacs: the extensible, self-documenting text editor

[Service]
Type=forking
ExecStart=/usr/bin/emacs --daemon
ExecStop=/usr/bin/emacsclient --eval "(kill-emacs)"
Environment=SSH_AUTH_SOCK=%t/keyring/ssh
Restart=always

[Install]
WantedBy=default.target</pre><p class="simpara">
								With the above configuration, the <code class="literal">/usr/bin/emacs</code> executable is started in daemon mode on service start. The SSH_AUTH_SOCK environment variable is set using the "%t" unit specifier that stands for the runtime directory. The service also restarts the emacs process if it exits unexpectedly.
							</p></li><li class="listitem"><p class="simpara">
								Execute the following commands to reload the configuration and start the custom service:
							</p><pre class="literallayout">~]# systemctl daemon-reload</pre><pre class="literallayout">~]# systemctl start emacs.service</pre></li></ol></div><p>
						As the editor is now registered as a systemd service, you can use all standard <code class="literal">systemctl</code> commands. For example, run <code class="literal">systemctl status emacs</code> to display the editor’s status or <code class="literal">systemctl enable emacs</code> to make the editor start automatically on system boot.
					</p></div></div><div class="example"><a id="ex-Managing_Services_with_systemd-Multiple_sshd"/><p class="title"><strong>Example 3.18. Creating a second instance of the sshd service</strong></p><div class="example-contents"><p>
						System Administrators often need to configure and run multiple instances of a service. This is done by creating copies of the original service configuration files and modifying certain parameters to avoid conflicts with the primary instance of the service. The following procedure shows how to create a second instance of the <code class="literal">sshd</code> service:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Create a copy of the <code class="literal">sshd_config</code> file that will be used by the second daemon:
							</p><pre class="literallayout">~]# cp /etc/ssh/sshd{,-second}_config</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">sshd-second_config</code> file created in the previous step to assign a different port number and PID file to the second daemon:
							</p><pre class="literallayout">Port 22220
PidFile /var/run/sshd-second.pid</pre><p class="simpara">
								See the <code class="literal">sshd_config</code>(5) manual page for more information on <code class="literal">Port</code> and <code class="literal">PidFile</code> options. Make sure the port you choose is not in use by any other service. The PID file does not have to exist before running the service, it is generated automatically on service start.
							</p></li><li class="listitem"><p class="simpara">
								Create a copy of the systemd unit file for the <code class="literal">sshd</code> service:
							</p><pre class="literallayout">~]# cp /usr/lib/systemd/system/sshd.service /etc/systemd/system/sshd-second.service</pre></li><li class="listitem"><p class="simpara">
								Alter the <code class="literal">sshd-second.service</code> created in the previous step as follows:
							</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
										Modify the <code class="literal">Description</code> option:
									</p><pre class="literallayout">Description=OpenSSH server second instance daemon</pre></li><li class="listitem"><p class="simpara">
										Add sshd.service to services specified in the <code class="literal">After</code> option, so that the second instance starts only after the first one has already started:
									</p><pre class="literallayout">After=syslog.target network.target auditd.service sshd.service</pre></li><li class="listitem">
										The first instance of sshd includes key generation, therefore remove the <span class="strong"><strong>ExecStartPre=/usr/sbin/sshd-keygen</strong></span> line.
									</li><li class="listitem"><p class="simpara">
										Add the <code class="literal">-f /etc/ssh/sshd-second_config</code> parameter to the <code class="literal">sshd</code> command, so that the alternative configuration file is used:
									</p><pre class="literallayout">ExecStart=/usr/sbin/sshd -D -f /etc/ssh/sshd-second_config $OPTIONS</pre></li><li class="listitem"><p class="simpara">
										After the above modifications, the sshd-second.service should look as follows:
									</p><pre class="literallayout">[Unit]
Description=OpenSSH server second instance daemon
After=syslog.target network.target auditd.service sshd.service

[Service]
EnvironmentFile=/etc/sysconfig/sshd
ExecStart=/usr/sbin/sshd -D -f /etc/ssh/sshd-second_config $OPTIONS
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=on-failure
RestartSec=42s

[Install]
WantedBy=multi-user.target</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								If using SELinux, add the port for the second instance of sshd to SSH ports, otherwise the second instance of sshd will be rejected to bind to the port:
							</p><pre class="literallayout">~]# semanage port -a -t ssh_port_t -p tcp 22220</pre></li><li class="listitem"><p class="simpara">
								Enable sshd-second.service, so that it starts automatically upon boot:
							</p><pre class="literallayout">~]# systemctl enable sshd-second.service</pre><p class="simpara">
								Verify if the sshd-second.service is running by using the <code class="literal">systemctl status</code> command. Also, verify if the port is enabled correctly by connecting to the service:
							</p><pre class="literallayout">~]$ <code class="literal">ssh -p 22220 user@server</code></pre><p class="simpara">
								If the firewall is in use, make sure that it is configured appropriately in order to allow connections to the second instance of sshd.
							</p></li></ol></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">To learn how to properly choose a target for ordering and dependencies of your custom unit files, see the following articles</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
										<a class="link" href="https://access.redhat.com/solutions/3120581">How to write a service unit file which enforces that particular services have to be started</a>
									</li><li class="listitem">
										<a class="link" href="https://access.redhat.com/solutions/3116611">How to decide what dependencies a systemd service unit definition should have</a>
									</li></ul></div></dd></dl></div><p>
					Additional information with some real-world examples of cases triggered by the ordering and dependencies in a unit file is available in Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/3120801">Is there any useful information about writing unit files?</a>
				</p><p>
					If you want to set limits for services started by <code class="literal">systemd</code>, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/1257953"> How to set limits for services in RHEL 7 and systemd</a>. These limits need to be set in the service’s unit file. Note that <code class="literal">systemd</code> ignores limits set in the <code class="literal">/etc/security/limits.conf</code> and <code class="literal">/etc/security/limits.d/*.conf</code> configuration files. The limits defined in these files are set by PAM when starting a login session, but daemons started by <code class="literal">systemd</code> do not use PAM login sessions.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Unit_File_Convert"/>Converting SysV init scripts to unit files</h2></div></div></div><p>
					Before taking time to convert a SysV init script to a unit file, make sure that the conversion was not already done elsewhere. All core services installed on Red Hat Enterprise Linux come with default unit files, and the same applies for many third-party software packages.
				</p><p>
					Converting an init script to a unit file requires analyzing the script and extracting the necessary information from it. Based on this data you can create a unit file. As init scripts can vary greatly depending on the type of the service, you might need to employ more configuration options for translation than outlined in this chapter. Note that some levels of customization that were available with init scripts are no longer supported by systemd units.
				</p><p>
					The majority of information needed for conversion is provided in the script’s header. The following example shows the opening section of the init script used to start the <code class="literal">postfix</code> service on Red Hat Enterprise Linux 6:
				</p><pre class="literallayout"><span class="marked">!/bin/bash # postfix Postfix Mail Transfer Agent # chkconfig: 2345 80 30 # description: Postfix is a Mail Transport Agent, which is the program that moves mail from one machine to another. # processname: master # pidfile: /var/spool/postfix/pid/master.pid # config: /etc/postfix/main.cf # config: /etc/postfix/master.cf <span class="marked"/> BEGIN INIT INFO # Provides: postfix MTA # Required-Start: $local_fs $network $remote_fs # Required-Stop: $local_fs $network $remote_fs # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: start and stop postfix # Description: Postfix is a Mail Transport Agent, which is the program that moves mail from one machine to another. </span># END INIT INFO</pre><p>
					In the above example, only lines starting with <span class="strong"><strong># chkconfig</strong></span> and <span class="strong"><strong># description</strong></span> are mandatory, so you might not find the rest in different init files. The text enclosed between the <span class="strong"><strong>BEGIN INIT INFO</strong></span> and <span class="strong"><strong>END INIT INFO</strong></span> lines is called <span class="strong"><strong>Linux Standard Base (LSB) header</strong></span>. If specified, LSB headers contain directives defining the service description, dependencies, and default runlevels. What follows is an overview of analytic tasks aiming to collect the data needed for a new unit file. The postfix init script is used as an example, see the resulting postfix unit file in <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 3.16. postfix.service unit file">Example 3.16, “postfix.service unit file”</a>.
				</p><h4><a id="Managing_Services_with_systemd-Init_Desc"/>Finding the service description</h4><p>
					Find descriptive information about the script on the line starting with <span class="strong"><strong>#description</strong></span>. Use this description together with the service name in the <code class="literal">Description</code> option in the [Unit] section of the unit file. The LSB header might contain similar data on the <span class="strong"><strong>#Short-Description</strong></span> and <span class="strong"><strong>#Description</strong></span> lines.
				</p><h4><a id="Managing_Services_with_systemd-Init_Deps"/>Finding service dependencies</h4><p>
					The LSB header might contain several directives that form dependencies between services. Most of them are translatable to systemd unit options, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Init_Deps" title="Table 3.12. Dependency options from the LSB header">Table 3.12, “Dependency options from the LSB header”</a>
				</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Init_Deps"/><p class="title"><strong>Table 3.12. Dependency options from the LSB header</strong></p><div class="table-contents"><table summary="Dependency options from the LSB header" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">LSB Option</th><th style="text-align: left" valign="top">Description</th><th style="text-align: left" valign="top">Unit File Equivalent</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Provides</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Specifies the boot facility name of the service, that can be referenced in other init scripts (with the "$" prefix). This is no longer needed as unit files refer to other units by their file names.
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									–
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Required-Start</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Contains boot facility names of required services. This is translated as an ordering dependency, boot facility names are replaced with unit file names of corresponding services or targets they belong to. For example, in case of <code class="literal">postfix</code>, the Required-Start dependency on $network was translated to the After dependency on network.target.
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<code class="literal">After</code>, <code class="literal">Before</code>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Should-Start</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Constitutes weaker dependencies than Required-Start. Failed Should-Start dependencies do not affect the service startup.
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<code class="literal">After</code>, <code class="literal">Before</code>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">Required-Stop</code>, <code class="literal">Should-Stop</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Constitute negative dependencies.
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									<code class="literal">Conflicts</code>
								</p>
								 </td></tr></tbody></table></div></div><h4><a id="Managing_Services_with_systemd-Init_Targs"/>Finding default targets of the service</h4><p>
					The line starting with <span class="strong"><strong>#chkconfig</strong></span> contains three numerical values. The most important is the first number that represents the default runlevels in which the service is started. Map these runlevels to equivalent systemd targets. Then list these targets in the <code class="literal">WantedBy</code> option in the [Install] section of the unit file. For example, <code class="literal">postfix</code> was previously started in runlevels 2, 3, 4, and 5, which translates to multi-user.target and graphical.target. Note that the graphical.target depends on multiuser.target, therefore it is not necessary to specify both, as in <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 3.16. postfix.service unit file">Example 3.16, “postfix.service unit file”</a>. You might find information on default and forbidden runlevels also at <span class="strong"><strong>#Default-Start</strong></span> and <span class="strong"><strong>#Default-Stop</strong></span> lines in the LSB header.
				</p><p>
					The other two values specified on the <span class="strong"><strong>#chkconfig</strong></span> line represent startup and shutdown priorities of the init script. These values are interpreted by <span class="strong"><strong><span class="application">systemd</span></strong></span> if it loads the init script, but there is no unit file equivalent.
				</p><h4><a id="Managing_Services_with_systemd-Init_Runlevels"/>Finding files used by the service</h4><p>
					Init scripts require loading a function library from a dedicated directory and allow importing configuration, environment, and PID files. Environment variables are specified on the line starting with <span class="strong"><strong>#config</strong></span> in the init script header, which translates to the <code class="literal">EnvironmentFile</code> unit file option. The PID file specified on the <span class="strong"><strong>#pidfile</strong></span> init script line is imported to the unit file with the <code class="literal">PIDFile</code> option.
				</p><p>
					The key information that is not included in the init script header is the path to the service executable, and potentially some other files required by the service. In previous versions of Red Hat Enterprise Linux, init scripts used a Bash case statement to define the behavior of the service on default actions, such as <span class="strong"><strong>start</strong></span>, <span class="strong"><strong>stop</strong></span>, or <span class="strong"><strong>restart</strong></span>, as well as custom-defined actions. The following excerpt from the <code class="literal">postfix</code> init script shows the block of code to be executed at service start.
				</p><pre class="literallayout">conf_check() {
    [ -x /usr/sbin/postfix ] || exit 5
    [ -d /etc/postfix ] || exit 6
    [ -d /var/spool/postfix ] || exit 5
}

make_aliasesdb() {
	if [ "$(/usr/sbin/postconf -h alias_database)" == "hash:/etc/aliases" ]
	then
		# /etc/aliases.db might be used by other MTA, make sure nothing
		# has touched it since our last newaliases call
		[ /etc/aliases -nt /etc/aliases.db ] ||
			[ "$ALIASESDB_STAMP" -nt /etc/aliases.db ] ||
			[ "$ALIASESDB_STAMP" -ot /etc/aliases.db ] || return
		/usr/bin/newaliases
		touch -r /etc/aliases.db "$ALIASESDB_STAMP"
	else
		/usr/bin/newaliases
	fi
}

start() {
	[ "$EUID" != "0" ] &amp;&amp; exit 4
	# Check that networking is up.
	[ ${NETWORKING} = "no" ] &amp;&amp; exit 1
	conf_check
	# Start daemons.
	echo -n $"Starting postfix: "
	make_aliasesdb &gt;/dev/null 2&gt;&amp;1
	[ -x $CHROOT_UPDATE ] &amp;&amp; $CHROOT_UPDATE
	/usr/sbin/postfix start 2&gt;/dev/null 1&gt;&amp;2 &amp;&amp; success || failure $"$prog start"
	RETVAL=$?
	[ $RETVAL -eq 0 ] &amp;&amp; touch $lockfile
        echo
	return $RETVAL
}</pre><p>
					The extensibility of the init script allowed specifying two custom functions, <code class="literal">conf_check()</code> and <code class="literal">make_aliasesdb()</code>, that are called from the <code class="literal">start()</code> function block. On closer look, several external files and directories are mentioned in the above code: the main service executable <code class="literal">/usr/sbin/postfix</code>, the <code class="literal">/etc/postfix/</code> and <code class="literal">/var/spool/postfix/</code> configuration directories, as well as the <code class="literal">/usr/sbin/postconf/</code> directory.
				</p><p>
					<span class="strong"><strong><span class="application">Systemd</span></strong></span> supports only the predefined actions, but enables executing custom executables with <code class="literal">ExecStart</code>, <code class="literal">ExecStartPre</code>, <code class="literal">ExecStartPost</code>, <code class="literal">ExecStop</code>, and <code class="literal">ExecReload</code> options. The <code class="literal">/usr/sbin/postfix</code> together with supporting scripts are executed on service start. Consult the <code class="literal">postfix</code> unit file at <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 3.16. postfix.service unit file">Example 3.16, “postfix.service unit file”</a>.
				</p><p>
					Converting complex init scripts requires understanding the purpose of every statement in the script. Some of the statements are specific to the operating system version, therefore you do not need to translate them. On the other hand, some adjustments might be needed in the new environment, both in unit file as well as in the service executable and supporting files.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Unit_File_Modify"/>Modifying existing unit files</h2></div></div></div><p>
					Services installed on the system come with default unit files that are stored in the <code class="literal">/usr/lib/systemd/system/</code> directory. System Administrators should not modify these files directly, therefore any customization must be confined to configuration files in the <code class="literal">/etc/systemd/system/</code> directory. Depending on the extent of the required changes, pick one of the following approaches:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Create a directory for supplementary configuration files at <code class="literal">/etc/systemd/system/<span class="emphasis"><em>unit</em></span>.d/</code>. This method is recommended for most use cases. It enables extending the default configuration with additional functionality, while still referring to the original unit file. Changes to the default unit introduced with a package upgrade are therefore applied automatically. See <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Extending_Unit_Config" title="Extending the default unit configuration">Extending the default unit configuration</a> for more information.
						</li><li class="listitem">
							Create a copy of the original unit file <code class="literal">/usr/lib/systemd/system/</code> in <code class="literal">/etc/systemd/system/</code> and make changes there. The copy overrides the original file, therefore changes introduced with the package update are not applied. This method is useful for making significant unit changes that should persist regardless of package updates. See <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Overriding_Unit_Mod" title="Overriding the default unit configuration">Overriding the default unit configuration</a> for details.
						</li></ul></div><p>
					In order to return to the default configuration of the unit, just delete custom-created configuration files in <code class="literal">/etc/systemd/system/</code>. To apply changes to unit files without rebooting the system, execute:
				</p><pre class="literallayout"><code class="literal">systemctl daemon-reload</code></pre><p>
					The <code class="literal">daemon-reload</code> option reloads all unit files and recreates the entire dependency tree, which is needed to immediately apply any change to a unit file. As an alternative, you can achieve the same result with the following command, which must be executed under the <code class="literal">root</code> user:
				</p><pre class="literallayout"><code class="literal">init q</code></pre><p>
					Also, if the modified unit file belongs to a running service, this service must be restarted to accept new settings:
				</p><pre class="literallayout"><code class="literal">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						To modify properties, such as dependencies or timeouts, of a service that is handled by a SysV initscript, do not modify the initscript itself. Instead, create a <code class="literal">systemd</code> drop-in configuration file for the service as described in <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Extending_Unit_Config" title="Extending the default unit configuration">Extending the default unit configuration</a> and <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Overriding_Unit_Mod" title="Overriding the default unit configuration">Overriding the default unit configuration</a>. Then manage this service in the same way as a normal <code class="literal">systemd</code> service.
					</p><p>
						For example, to extend the configuration of the <code class="literal">network</code> service, do not modify the <code class="literal">/etc/rc.d/init.d/network</code> initscript file. Instead, create new directory <code class="literal">/etc/systemd/system/network.service.d/</code> and a <code class="literal">systemd</code> drop-in file <code class="literal">/etc/systemd/system/network.service.d/<span class="emphasis"><em>my_config</em></span>.conf</code>. Then, put the modified values into the drop-in file. Note: <code class="literal">systemd</code> knows the <code class="literal">network</code> service as <code class="literal">network.service</code>, which is why the created directory must be called <code class="literal">network.service.d</code>
					</p></div><h4><a id="Managing_Services_with_systemd-Extending_Unit_Config"/>Extending the default unit configuration</h4><p>
					To extend the default unit file with additional configuration options, first create a configuration directory in <code class="literal">/etc/systemd/system/</code>. If extending a service unit, execute the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">mkdir /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service.d/</code></pre><p>
					Replace <span class="emphasis"><em>name</em></span> with the name of the service you want to extend. The above syntax applies to all unit types.
				</p><p>
					Create a configuration file in the directory made in the previous step. Note that the file name must end with the <span class="strong"><strong>.conf</strong></span> suffix. Type:
				</p><pre class="literallayout">touch /etc/systemd/system/name.service.d/config_name.conf</pre><p>
					Replace <span class="emphasis"><em>config_name</em></span> with the name of the configuration file. This file adheres to the normal unit file structure, therefore all directives must be specified under appropriate sections, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Unit_File_Structure" title="Understanding the unit file structure">the section called “Understanding the unit file structure”</a>.
				</p><p>
					For example, to add a custom dependency, create a configuration file with the following content:
				</p><pre class="literallayout">[Unit]
Requires=<span class="emphasis"><em>new_dependency</em></span>
After=<span class="emphasis"><em>new_dependency</em></span></pre><p>
					Where <span class="emphasis"><em>new_dependency</em></span> stands for the unit to be marked as a dependency. Another example is a configuration file that restarts the service after its main process exited, with a delay of 30 seconds:
				</p><pre class="literallayout">[Service]
Restart=always
RestartSec=30</pre><p>
					It is recommended to create small configuration files focused only on one task. Such files can be easily moved or linked to configuration directories of other services.
				</p><p>
					To apply changes made to the unit, execute as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl daemon-reload</code>
<code class="literal">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><div class="example"><a id="exam-Managing_Services_with_systemd-Extending_Unit_Config"/><p class="title"><strong>Example 3.19. Extending the httpd.service configuration</strong></p><div class="example-contents"><p>
						To modify the httpd.service unit so that a custom shell script is automatically executed when starting the Apache service, perform the following steps. First, create a directory and a custom configuration file:
					</p><pre class="literallayout">~]# mkdir /etc/systemd/system/httpd.service.d/</pre><pre class="literallayout">~]# touch /etc/systemd/system/httpd.service.d/custom_script.conf</pre><p>
						Provided that the script you want to start automatically with Apache is located at <code class="literal">/usr/local/bin/custom.sh</code>, insert the following text to the <code class="literal">custom_script.conf</code> file:
					</p><pre class="literallayout">[Service]
ExecStartPost=/usr/local/bin/custom.sh</pre><p>
						To apply the unit changes, execute:
					</p><pre class="literallayout">~]# systemctl daemon-reload</pre><pre class="literallayout">~]# systemctl restart httpd.service</pre></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						The configuration files from configuration directories in <code class="literal">/etc/systemd/system/</code> take precedence over unit files in <code class="literal">/usr/lib/systemd/system/</code>. Therefore, if the configuration files contain an option that can be specified only once, such as <code class="literal">Description</code> or <code class="literal">ExecStart</code>, the default value of this option is overridden. Note that in the output of the <code class="literal">systemd-delta</code> command, described in <a class="link" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Monitoring_Overrides" title="Monitoring overriden units">Monitoring overriden units</a>, such units are always marked as [EXTENDED], even though in sum, certain options are actually overridden.
					</p></div><h4><a id="Managing_Services_with_systemd-Overriding_Unit_Mod"/>Overriding the default unit configuration</h4><p>
					To make changes that will persist after updating the package that provides the unit file, first copy the file to the <code class="literal">/etc/systemd/system/</code> directory. To do so, execute the following command as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">cp /usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.service /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code></pre><p>
					Where <span class="emphasis"><em>name</em></span> stands for the name of the service unit you wish to modify. The above syntax applies to all unit types.
				</p><p>
					Open the copied file with a text editor, and make the desired changes. To apply the unit changes, execute as <code class="literal">root</code>:
				</p><pre class="literallayout"><code class="literal">systemctl daemon-reload</code>
<code class="literal">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><div class="example"><a id="Overriding_Unit_Mod-Change-timout-limit"/><p class="title"><strong>Example 3.20. Changing the timeout limit</strong></p><div class="example-contents"><p>
						You can specify a timeout value per service to prevent a malfunctioning service from freezing the system. Otherwise, timeout is set by default to 90 seconds for normal services and to 300 seconds for SysV-compatible services.
					</p><p>
						For example, to extend timeout limit for the <code class="literal">httpd</code> service:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Copy the <code class="literal">httpd</code> unit file to the <code class="literal">/etc/systemd/system/</code> directory:
							</p><pre class="literallayout"><code class="literal">cp /usr/lib/systemd/system/httpd.service /etc/systemd/system/httpd.service</code></pre></li><li class="listitem"><p class="simpara">
								Open file <code class="literal">/etc/systemd/system/httpd.service</code> and specify the <code class="literal">TimeoutStartUSec</code> value in the <code class="literal">[Service]</code> section:
							</p><pre class="literallayout"><span class="emphasis"><em>…​</em></span>
[Service]
<span class="emphasis"><em>…​</em></span>
PrivateTmp=true
<span class="strong"><strong>TimeoutStartSec=10</strong></span>

[Install]
WantedBy=multi-user.target
<span class="emphasis"><em>…​</em></span></pre></li><li class="listitem"><p class="simpara">
								Reload the <code class="literal">systemd</code> daemon:
							</p><pre class="literallayout"><code class="literal">systemctl daemon-reload</code></pre></li><li class="listitem"><p class="simpara">
								<span class="strong"><strong>Optional.</strong></span> Verify the new timeout value:
							</p><pre class="literallayout"><code class="literal">systemctl show httpd -p TimeoutStartUSec</code></pre></li></ol></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
						To change the timeout limit globally, input the <code class="literal">DefaultTimeoutStartSec</code> in the <code class="literal">/etc/systemd/system.conf</code> file.
					</p></div><h4><a id="Managing_Services_with_systemd-Monitoring_Overrides"/>Monitoring overriden units</h4><p>
					To display an overview of overridden or modified unit files, use the following command:
				</p><pre class="literallayout"><code class="literal">systemd-delta</code></pre><p>
					For example, the output of the above command can look as follows:
				</p><pre class="literallayout">[EQUIVALENT] /etc/systemd/system/default.target → /usr/lib/systemd/system/default.target
[OVERRIDDEN] /etc/systemd/system/autofs.service → /usr/lib/systemd/system/autofs.service

--- /usr/lib/systemd/system/autofs.service      2014-10-16 21:30:39.000000000 -0400
+ /etc/systemd/system/autofs.service  2014-11-21 10:00:58.513568275 -0500
@@ -8,7 +8,8 @@
 EnvironmentFile=-/etc/sysconfig/autofs
 ExecStart=/usr/sbin/automount $OPTIONS --pid-file /run/autofs.pid
 ExecReload=/usr/bin/kill -HUP $MAINPID
-TimeoutSec=180
+TimeoutSec=240
+Restart=Always

 [Install]
 WantedBy=multi-user.target

[MASKED]     /etc/systemd/system/cups.service → /usr/lib/systemd/system/cups.service
[EXTENDED]   /usr/lib/systemd/system/sssd.service → /etc/systemd/system/sssd.service.d/journal.conf

4 overridden configuration files found.</pre><p>
					<a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Override_types" title="Table 3.13. systemd-delta difference types">Table 3.13, “systemd-delta difference types”</a> lists override types that can appear in the output of <code class="literal">systemd-delta</code>. Note that if a file is overridden, <code class="literal">systemd-delta</code> by default displays a summary of changes similar to the output of the <code class="literal">diff</code> command.
				</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Override_types"/><p class="title"><strong>Table 3.13. systemd-delta difference types</strong></p><div class="table-contents"><table summary="systemd-delta difference types" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">Type</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									[MASKED]
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Masked unit files, see <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#Managing_Services_with_systemd-Services-Disable" title="Disabling a service">the section called “Disabling a service”</a> for description of unit masking.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									[EQUIVALENT]
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Unmodified copies that override the original files but do not differ in content, typically symbolic links.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									[REDIRECTED]
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Files that are redirected to another file.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									[OVERRIDEN]
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Overridden and changed files.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									[EXTENDED]
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Files that are extended with .conf files in the <code class="literal">/etc/systemd/system/<span class="emphasis"><em>unit</em></span>.d/</code> directory.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									[UNCHANGED]
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Unmodified files are displayed only when the <code class="literal">--type=unchanged</code> option is used.
								</p>
								 </td></tr></tbody></table></div></div><p>
					It is good practice to run <code class="literal">systemd-delta</code> after system update to check if there are any updates to the default units that are currently overridden by custom configuration. It is also possible to limit the output only to a certain difference type. For example, to view just the overridden units, execute:
				</p><pre class="literallayout"><code class="literal">systemd-delta --type=overridden</code></pre><p>
					If you want to edit a unit file and automatically create a drop-in file with the submitted changes, use the following command:
				</p><pre class="literallayout">~]# systemctl edit <span class="emphasis"><em>unit_name.type_extension</em></span></pre><p>
					To dump the unit configuration applying all overrides and drop-ins, use this command:
				</p><pre class="literallayout">~]# systemctl cat <span class="emphasis"><em>unit_name.type_extension</em></span></pre><p>
					Replace the <span class="emphasis"><em>unit_name.type_extension</em></span> by the name of the required unit and its type, for example <code class="literal">tuned.service</code>.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Managing_Services_with_systemd-Instantiated_Units"/>Working with instantiated units</h2></div></div></div><p>
					It is possible to instantiate multiple units from a single template configuration file at runtime. The "@" character is used to mark the template and to associate units with it. Instantiated units can be started from another unit file (using <code class="literal">Requires</code> or <code class="literal">Wants</code> options), or with the <code class="literal">systemctl start</code> command. Instantiated service units are named the following way:
				</p><pre class="literallayout"><span class="emphasis"><em>template_name</em></span>@<span class="emphasis"><em>instance_name</em></span>.service</pre><p>
					Where <span class="emphasis"><em>template_name</em></span> stands for the name of the template configuration file. Replace <span class="emphasis"><em>instance_name</em></span> with the name for the unit instance. Several instances can point to the same template file with configuration options common for all instances of the unit. Template unit name has the form of:
				</p><pre class="literallayout"><span class="emphasis"><em>unit_name</em></span>@.service</pre><p>
					For example, the following <code class="literal">Wants</code> setting in a unit file:
				</p><pre class="literallayout">Wants=getty@ttyA.service getty@ttyB.service</pre><p>
					first makes systemd search for given service units. If no such units are found, the part between "@" and the type suffix is ignored and <span class="strong"><strong><span class="application">systemd</span></strong></span> searches for the <code class="literal">getty@.service</code> file, reads the configuration from it, and starts the services.
				</p><p>
					Wildcard characters, called <span class="strong"><strong>unit specifiers</strong></span>, can be used in any unit configuration file. Unit specifiers substitute certain unit parameters and are interpreted at runtime. <a class="xref" href="managing-services-with-systemd_configuring-basic-system-settings.html#tabl-Managing_Services_with_systemd-Unit_Specifiers" title="Table 3.14. Important unit specifiers">Table 3.14, “Important unit specifiers”</a> lists unit specifiers that are particularly useful for template units.
				</p><div class="table"><a id="tabl-Managing_Services_with_systemd-Unit_Specifiers"/><p class="title"><strong>Table 3.14. Important unit specifiers</strong></p><div class="table-contents"><table summary="Important unit specifiers" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Unit Specifier</th><th style="text-align: left" valign="top">Meaning</th><th style="text-align: left" valign="top">Description</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">%n</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Full unit name
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Stands for the full unit name including the type suffix. <code class="literal">%N</code> has the same meaning but also replaces the forbidden characters with ASCII codes.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">%p</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Prefix name
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Stands for a unit name with type suffix removed. For instantiated units %p stands for the part of the unit name before the "@" character.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">%i</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Instance name
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Is the part of the instantiated unit name between the "@" character and the type suffix. <code class="literal">%I</code> has the same meaning but also replaces the forbidden characters for ASCII codes.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">%H</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Host name
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Stands for the hostname of the running system at the point in time the unit configuration is loaded.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									<code class="literal">%t</code>
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Runtime directory
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Represents the runtime directory, which is either <code class="literal">/run</code> for the <code class="literal">root</code> user, or the value of the XDG_RUNTIME_DIR variable for unprivileged users.
								</p>
								 </td></tr></tbody></table></div></div><p>
					For a complete list of unit specifiers, see the <code class="literal">systemd.unit(5)</code> manual page.
				</p><p>
					For example, the <code class="literal">getty@.service</code> template contains the following directives:
				</p><pre class="literallayout">[Unit]
Description=Getty on %I
…​
[Service]
ExecStart=-/sbin/agetty --noclear %I $TERM
…​</pre><p>
					When the getty@ttyA.service and getty@ttyB.service are instantiated form the above template, <code class="literal">Description</code>= is resolved as <span class="strong"><strong>Getty on ttyA</strong></span> and <span class="strong"><strong>Getty on ttyB</strong></span>.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="optimizing-systemd-to-shorten-the-boot-time_managing-services-with-systemd"/>Optimizing systemd to shorten the boot time</h1></div></div></div><p>
				There is a list of systemd unit files that are enabled by default. System services that are defined by these unit files are automatically run at boot, which influences the boot time.
			</p><p>
				This section describes:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The tools to examine system boot performance.
					</li><li class="listitem">
						The purpose of systemd units enabled by default, and circumstances under which you can safely disable such systemd units in order to shorten the boot time.
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="examining-system-boot-performance_optimizing-systemd-to-shorten-the-boot-time"/>Examining system boot performance</h2></div></div></div><p>
					To examine system boot performance, you can use the <code class="literal">systemd-analyze</code> command. This command has many options available. However, this section covers only the selected ones that may be important for systemd tuning in order to shorten the boot time.
				</p><p>
					For a complete list and detailed description of all options, see the <code class="literal">systemd-analyze</code> man page.
				</p><h4><a id="prerequisites_9"/>Prerequisites</h4><p>
					Before starting to examine systemd in order to tune the boot time, you may want to list all enabled services:
				</p><pre class="literallayout">~]$ systemctl list-unit-files --state=enabled</pre><h4><a id="analyzing_overall_boot_time"/>Analyzing overall boot time</h4><h5><a id="procedure_10"/>Procedure</h5><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For the overall information about the time that the last successful boot took, use:
						</li></ul></div><pre class="literallayout">~]$ systemd-analyze</pre><h4><a id="analyzing_unit_initialization_time"/>Analyzing unit initialization time</h4><h5><a id="procedure_11"/>Procedure</h5><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For the information about the initialization time of each systemd unit, use:
						</li></ul></div><pre class="literallayout">~]$ systemd-analyze blame</pre><p>
					The output lists the units in descending order according to the time they took to initialize during the last successful boot.
				</p><h4><a id="identifying_critical_units"/>Identifying critical units</h4><h5><a id="procedure_12"/>Procedure</h5><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							To identify the units that took most time to initialize at the last successful boot, use:
						</li></ul></div><pre class="literallayout">~]$ systemd-analyze critical-chain</pre><p>
					The output highlights the units that critically slow down the boot with the red color.
				</p><div class="figure"><a id="idm140276560717968"/><p class="title"><strong>Figure 3.1. The output of the systemd-analyze critical-chain command</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/systemd-analyze-critical.png" alt="systemd analyze critical"/></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="a-guide-to-selecting-services-that-can-be-safely-disabled_optimizing-systemd-to-shorten-the-boot-time"/>A guide to selecting services that can be safely disabled</h2></div></div></div><p>
					If you find the boot time of your system long, you can shorten it by disabling some of the services enabled on boot by default.
				</p><p>
					To list such services, run:
				</p><pre class="literallayout">~]$ systemctl list-unit-files --state=enabled</pre><p>
					To disable a service, run:
				</p><pre class="literallayout">~]# systemctl disable <span class="emphasis"><em>service_name</em></span></pre><p>
					However, certain services must stay enabled in order that your operating system is safe and functions in the way you need.
				</p><p>
					You can use the table below as a guide to selecting the services that you can safely disable. The table lists all services enabled by default on a minimal installation of Red Hat Enterprise Linux 8, and for each service it states whether this service can be safely disabled.
				</p><p>
					The table also provides more information about the circumstances under which the service can be disabled, or the reason why you should not disable the service.
				</p><div class="table"><a id="idm140276560706464"/><p class="title"><strong>Table 3.15. Services enabled by default on a minimal installation of RHEL 8</strong></p><div class="table-contents"><table summary="Services enabled by default on a minimal installation of RHEL 8" border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Service name</th><th style="text-align: left" valign="top">Can it be disabled?</th><th style="text-align: left" valign="top">More information</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									auditd.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">auditd.service</code> only if you do not need audit messages from the kernel. Be aware that if you disable <code class="literal">auditd.service</code>, the <code class="literal">/var/log/audit/audit.log</code> file is not produced. Consequently, you are not able to retroactively review some commonly-reviewed actions or events, such as user logins, service starts or password changes. Also note that auditd has two parts: a kernel part, and a service itself. By using the <code class="literal">systemctl disable auditd</code> command, you only disable the service, but not the kernel part. To disable system auditing in its entirety, set <code class="literal">audit=0</code> on kernel command line.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									autovt@.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									no
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									This service runs only when it is really needed, so it does not need to be disabled.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									crond.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Be aware that no items from crontab will run if you disable crond.service.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									dbus-org.fedoraproject.FirewallD1.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A symlink to <code class="literal">firewalld.service</code>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									dbus-org.freedesktop.NetworkManager.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A symlink to <code class="literal">NetworkManager.service</code>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									dbus-org.freedesktop.nm-dispatcher.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									A symlink to <code class="literal">NetworkManager-dispatcher.service</code>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									firewalld.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">firewalld.service</code> only if you do not need firewall.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									getty@.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									no
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									This service runs only when it is really needed, so it does not need to be disabled.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									import-state.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">import-state.service</code> only if you do not need to boot from a network storage.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									irqbalance.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">irqbalance.service</code> only if you have just one CPU. Do not disable <code class="literal">irqbalance.service</code> on systems with multiple CPUs.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									kdump.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">kdump.service</code> only if you do not need reports from kernel crashes.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									loadmodules.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									This service is not started unless the <code class="literal">/etc/rc.modules</code> or <code class="literal">/etc/sysconfig/modules</code> directory exists, which means that it is not started on a minimal RHEL 8 installation.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									lvm2-monitor.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">lvm2-monitor.service</code> only if you do not use Logical Volume Manager (LVM).
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									microcode.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									no
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Do not be disable the service because it provides updates of the microcode software in CPU.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NetworkManager-dispatcher.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">NetworkManager-dispatcher.service</code> only if you do not need notifications on network configuration changes (for example in static networks).
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NetworkManager-wait-online.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">NetworkManager-wait-online.service</code> only if you do not need working network connection available right after the boot. If the service is enabled, the system does not finish the boot before the network connection is working. This may prolong the boot time significantly.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NetworkManager.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">NetworkManager.service</code> only if you do not need connection to a network.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									nis-domainname.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">nis-domainname.service</code> only if you do not use Network Information Service (NIS).
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									rhsmcertd.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									no
								</p>
								 </td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top"> <p>
									rngd.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">rngd.service</code> only if you do not need a lot of entropy on your system, or you do not have any sort of hardware generator. Note that the service is necessary in environments that require a lot of good entropy, such as systems used for generation of X.509 certificates (for example the FreeIPA server).
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									rsyslog.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">rsyslog.service</code> only if you do not need persistent logs, or you set <code class="literal">systemd-journald</code> to persistent mode.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									selinux-autorelabel-mark.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">selinux-autorelabel-mark.service</code> only if you do not use SELinux.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									sshd.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">sshd.service</code> only if you do not need remote logins by OpenSSH server.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									sssd.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">sssd.service</code> only if there are no users who log in the system over the network (for example by using LDAP or Kerberos). Red Hat recommends to disable all <code class="literal">sssd-*</code> units if you disable <code class="literal">sssd.service</code>.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									syslog.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									An alias for <code class="literal">rsyslog.service</code>
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									tuned.service
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">tuned.service</code> only if you do need to use performance tuning.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									lvm2-lvmpolld.socket
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">lvm2-lvmpolld.socket</code> only if you do not use Logical Volume Manager (LVM).
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									dnf-makecache.timer
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">dnf-makecache.timer</code> only if you do not need your package metadata to be updated automatically.
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									unbound-anchor.timer
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Disable <code class="literal">unbound-anchor.timer</code> only if you do not need daily update of the root trust anchor for DNS Security Extensions (DNSSEC). This root trust anchor is used by Unbound resolver and resolver library for DNSSEC validation.
								</p>
								 </td></tr></tbody></table></div></div><p>
					To find more information about a service, you can run one of the following commands:
				</p><pre class="literallayout">~]$ systemctl cat &lt;service_name&gt;</pre><pre class="literallayout">~]$ systemctl help &lt;service_name&gt;</pre><p>
					The <code class="literal">systemctl cat</code> command provides the content of the service file located under <code class="literal">/usr/lib/systemd/system/&lt;service&gt;</code>, as well as all applicable overrides. The applicable overrides include unit file overrides from the <code class="literal">/etc/systemd/system/&lt;service&gt;</code> file or drop-in files from a corresponding <code class="literal">unit.type.d</code> directory.
				</p><p>
					For more information on drop-in files, see the <code class="literal">systemd.unit</code> man page.
				</p><p>
					The <code class="literal">systemctl help</code> command shows the man page of the particular service.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="systemd-additional-resources_managing-services-with-systemd"/>Additional Resources</h1></div></div></div><p>
				For more information on systemd and its usage on Red Hat Enterprise Linux, see the resources listed below.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installed_documentation_2"/>Installed Documentation</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">systemctl</code>(1) — The manual page for the <code class="literal">systemctl</code> command line utility provides a complete list of supported options and commands.
						</li><li class="listitem">
							<code class="literal">systemd</code>(1) — The manual page for the <code class="literal">systemd</code> system and service manager provides more information about its concepts and documents available command line options and environment variables, supported configuration files and directories, recognized signals, and available kernel options.
						</li><li class="listitem">
							<code class="literal">systemd-delta</code>(1) — The manual page for the <code class="literal">systemd-delta</code> utility that allows to find extended and overridden configuration files.
						</li><li class="listitem">
							<code class="literal">systemd.directives(7)</code> — The manual page named <code class="literal">systemd.directives</code> provides detailed information about systemd directives.
						</li><li class="listitem">
							<code class="literal">systemd.unit</code>(5) — The manual page named <code class="literal">systemd.unit</code> provides detailed information about systemd unit files and documents all available configuration options.
						</li><li class="listitem">
							<code class="literal">systemd.service</code>(5) — The manual page named <code class="literal">systemd.service</code> documents the format of service unit files.
						</li><li class="listitem">
							<code class="literal">systemd.target</code>(5) — The manual page named <code class="literal">systemd.target</code> documents the format of target unit files.
						</li><li class="listitem">
							<code class="literal">systemd.kill</code>(5) — The manual page named <code class="literal">systemd.kill</code> documents the configuration of the process killing procedure.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="online_documentation_2"/>Online Documentation</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="link" href="http://www.freedesktop.org/wiki/Software/systemd">systemd Home Page</a> — The project home page provides more information about systemd.
						</li></ul></div></div></div></div></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 6. Configuring networking with nmcli</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Configuring-Networking-with-nmcli_configuring-and-managing-networking"/>Chapter 6. Configuring networking with nmcli</h1></div></div></div><p>
			The following section provides how you can configure a network interface using <span class="strong"><strong><span class="application">nmcli</span></strong></span>.
		</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Getting-started-with-nmcli_Configuring-Networking-with-nmcli"/>Getting started with nmcli</h1></div></div></div><p>
				<span class="strong"><strong><span class="application">nmcli</span></strong></span> (NetworkManager Command Line Interface) is the command-line utility to configure networking through <span class="strong"><strong>NetworkManager</strong></span>. <span class="strong"><strong><span class="application">nmcli</span></strong></span> is used to create, display, edit, delete, activate, and deactivate network connections, as well as control and display network device status.
			</p><p>
				The <span class="strong"><strong><span class="application">nmcli</span></strong></span> utility can be used by both users and scripts:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For servers, headless machines, and terminals, <span class="strong"><strong><span class="application">nmcli</span></strong></span> can be used to control <span class="strong"><strong><span class="application">NetworkManager</span></strong></span> directly, without GUI.
					</li><li class="listitem">
						For scripts, <span class="strong"><strong><span class="application">nmcli</span></strong></span> supports options to change the output to a format better suited for script processing.
					</li></ul></div><p>
				Each network device corresponds to a <span class="strong"><strong><span class="application">NetworkManager</span></strong></span> device. The configuration of a network device is completely stored in a single <span class="strong"><strong>NetworkManager</strong></span> connection. You can perform a network configuration applying a <span class="strong"><strong>NetworkManager</strong></span> connection to a <span class="strong"><strong>NetworkManager</strong></span> device.
			</p><p>
				To get started with <span class="strong"><strong>nmcli</strong></span> the most common <span class="strong"><strong>nmcli</strong></span> commands are <code class="literal">nmcli device</code> and <code class="literal">nmcli connection</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal">nmcli device</code> command lists the available network devices in the system.
					</li></ul></div><p>
				A device can be:
			</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						<code class="literal">managed</code> - under the <span class="strong"><strong>NetworkManager</strong></span> control. A <code class="literal">managed</code> device may be <code class="literal">connected</code>, meaning that it is activated and configured, or <code class="literal">disconnected</code>, meaning that it is not configured but ready to be activated again.
					</li><li class="listitem">
						<code class="literal">unmanaged</code> - <span class="strong"><strong>NetworkManager</strong></span> does not control it.
					</li></ol></div><p>
				For more details on setting a <code class="literal">managed</code> or <code class="literal">unmanaged</code> device, see <a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Setting-a-device-managed-or-unmanaged-with-nmcli_Configuring-Networking-with-nmcli" title="Setting a device managed or unmanaged with nmcli">the section called “Setting a device managed or unmanaged with nmcli”</a>.
			</p><p>
				The <code class="literal">nmcli device</code> command can take many arguments. Most notable are: <code class="literal">status</code>, <code class="literal">show</code>, <code class="literal">set</code>, <code class="literal">connect</code>, <code class="literal">disconnect</code>, <code class="literal">modify</code>, <code class="literal">delete</code>, <code class="literal">wifi</code>. Enter the <code class="literal">nmcli device help</code> command to see the full list.
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <code class="literal">nmcli connection</code> command lists the available connection profiles in <span class="strong"><strong>NetworkManager</strong></span>.
					</li></ul></div><p>
				Every connection that is active is displayed as green on top of the list. The inactive connections are displayed as white. The DEVICE field identifies the device on which the connection is applied on.
			</p><p>
				The <code class="literal">nmcli connection</code> command can take many arguments to manage connection profiles. Most notable are: <code class="literal">show</code>, <code class="literal">up</code>, <code class="literal">down</code>, <code class="literal">add</code>, <code class="literal">modify</code>, <code class="literal">delete</code>. Enter the <code class="literal">nmcli connection help</code> command to see the full list.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					If you use the <span class="strong"><strong>nmcli</strong></span> commands, it is recommended to type a partial <span class="strong"><strong>nmcli</strong></span> command, and then press the <span class="keycap"><strong>Tab</strong></span> key to auto-complete the command sequence. If multiple completions are possible, then <span class="keycap"><strong>Tab</strong></span> lists them all. This helps users to type commands faster and easier. To enable the <span class="strong"><strong>nmcli</strong></span> auto-complete feature be sure to install the <code class="literal">bash-completion</code> package:
				</p><pre class="literallayout">~]# yum install bash-completion</pre><p>
					After the package installation, <code class="literal">nmcli auto-complete</code> will be available next time you login into a console. To activate it also in the current console, enter:
				</p><pre class="literallayout">~]$ source /etc/profile.d/bash_completion.sh</pre></div><p>
				The basic format of using <span class="strong"><strong>nmcli</strong></span> is:
			</p><pre class="literallayout">nmcli [OPTIONS] OBJECT { COMMAND | help }</pre><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="simpara">
						where [OPTIONS] can be optional options, such as:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-t, terse</span></dt><dd><p class="simpara">
									This mode can be used for computer script processing as you can see a terse output displaying only the values.
								</p><div class="example"><a id="ex-Viewing_a_terse_output_for_scripts"/><p class="title"><strong>Example 6.1. Viewing a terse output</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli -t device</code>
ens3:ethernet:connected:Profile 1
lo:loopback:unmanaged:</pre></div></div></dd><dt><span class="term">-f, field</span></dt><dd><p class="simpara">
									This option specifies what fields can be displayed in output. For example, NAME,UUID,TYPE,AUTOCONNECT,ACTIVE,DEVICE,STATE. You can use one or more fields. If you want to use more, do not use space after comma to separate the fields.
								</p><div class="example"><a id="ex-Specifying_Fields_in_the_output"/><p class="title"><strong>Example 6.2. Specifying fields in the output</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli -f DEVICE,TYPE device</code>
DEVICE  TYPE
ens3    ethernet
lo      loopback</pre><p>
										or even better for scripting:
									</p><pre class="literallayout">~]$ <code class="literal">nmcli -t -f DEVICE,TYPE device</code>
ens3:ethernet
lo:loopback</pre></div></div></dd><dt><span class="term">-p, pretty</span></dt><dd><p class="simpara">
									This option causes <span class="strong"><strong><span class="application">nmcli</span></strong></span> to produce human-readable output. For example, values are aligned and headers are printed.
								</p><div class="example"><a id="ex-Viewing_an_output_in_pretty_Mode"/><p class="title"><strong>Example 6.3. Viewing an output in pretty mode</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli -p device</code>
=====================
  Status of devices
=====================
DEVICE  TYPE      STATE      CONNECTION
--------------------------------------------------------------
ens3    ethernet  connected  Profile 1
lo      loopback  unmanaged  --</pre></div></div></dd><dt><span class="term">-h, help</span></dt><dd>
									Prints help information.
								</dd></dl></div></li><li class="listitem">
						where OBJECT can be one of the following options: <code class="literal">general</code>, <code class="literal">networking</code>, <code class="literal">radio</code>, <code class="literal">connection</code>, <code class="literal">device</code>, <code class="literal">agent</code>, and <code class="literal">monitor</code>.
					</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					You can use any prefix of the above options in your commands. For example, <code class="literal">nmcli con help</code>, <code class="literal">nmcli c help</code>, <code class="literal">nmcli connection help</code> generate the same output.
				</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						where COMMAND, the required <span class="strong"><strong>nmcli</strong></span> command.
					</li><li class="listitem">
						where <span class="emphasis"><em>help</em></span> is to list available actions related to a specified object:
					</li></ul></div><pre class="literallayout">~]$ <code class="literal">nmcli <span class="emphasis"><em>OBJECT</em></span> help</code></pre><p>
				For example,
			</p><pre class="literallayout">~]$ <code class="literal">nmcli c help</code></pre><h3><a id="additional_resources_10"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="getting-started-with-managing-networking-with-NetworkManager_configuring-and-managing-networking.html#NetworkManager-tools_getting-started-with-networking-devices-with-NetworkManager" title="NetworkManager tools">the section called “NetworkManager tools”</a>
					</li><li class="listitem">
						the <span class="emphasis"><em><span class="citetitle"><span class="strong"><strong>nmcli</strong></span>(1)</span></em></span> man page.
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Brief-Selection-of-nmcli-commands_Configuring-Networking-with-nmcli" title="Brief selection of nmcli commands">the section called “Brief selection of <span class="strong"><strong>nmcli</strong></span> commands”</a>
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Creating-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli" title="Creating a connection profile with nmcli">the section called “Creating a connection profile with nmcli”</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Overview-of-nmcli-property-names-and-aliases_Configuring-Networking-with-nmcli"/>Overview of nmcli property names and aliases</h1></div></div></div><h3><a id="prerequisites_5"/>Prerequisites</h3><p>
				<code class="literal">Property</code> names are specific names that <span class="strong"><strong>NetworkManager</strong></span> uses to identify a common option. Following are some of the important <span class="strong"><strong><span class="application">nmcli</span></strong></span> <code class="literal">property</code> names:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">connection.type</code></span></dt><dd>
							A type of a specific connection. Allowed values are: <span class="strong"><strong>adsl, bond, bond-slave, bridge, bridge-slave, bluetooth, cdma, ethernet, gsm, infiniband, olpc-mesh, team, team-slave, vlan, wifi, wimax</strong></span>. Each connection type has type-specific command options. You can see the <code class="literal">TYPE_SPECIFIC_OPTIONS</code> list in the <span class="emphasis"><em><span class="citetitle"><span class="strong"><strong>nmcli</strong></span>(1)</span></em></span> man page. For example, a <code class="literal">gsm</code> connection requires the access point name specified in an <code class="literal">apn</code>. A <code class="literal">wifi</code> device requires the service set identifier specified in a <code class="literal">ssid</code>.
						</dd><dt><span class="term"><code class="literal">connection.interface-name</code></span></dt><dd>
							A device name relevant for the connection. For example, <span class="emphasis"><em>eth0</em></span>.
						</dd><dt><span class="term"><code class="literal">connection.id</code></span></dt><dd><p class="simpara">
							A name used for the connection profile. If you do not specify a connection name, one will be generated as follows:
						</p><pre class="literallayout"><span class="emphasis"><em>connection.type -connection.interface-name</em></span></pre><p class="simpara">
							The <code class="literal">connection.id</code> is the name of a <span class="emphasis"><em>connection profile</em></span> and should not be confused with the interface name which denotes a device (<code class="literal">wlan0</code>, <code class="literal">ens3</code>, <code class="literal">em1</code>). However, users can name the connections after interfaces, but they are not the same thing. There can be multiple connection profiles available for a device. This is particularly useful for mobile devices or when switching a network cable back and forth between different devices. Rather than edit the configuration, create different profiles and apply them to the interface as needed. The <code class="literal">id</code> option also refers to the connection profile name.
						</p></dd></dl></div><p>
				The most important options for <span class="strong"><strong><span class="application">nmcli</span></strong></span> commands such as <code class="literal">show</code>, <code class="literal">up</code>, <code class="literal">down</code> are:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">id</code></span></dt><dd>
							An identification string assigned by the user to a connection profile. Id can be used in <span class="strong"><strong>nmcli</strong></span> connection commands to identify a connection. The NAME field in the command output always denotes the connection id. It refers to the same connection profile name that the con-name does.
						</dd><dt><span class="term"><code class="literal">uuid</code></span></dt><dd>
							A unique identification string assigned by the system to a connection profile. The <code class="literal">uuid</code> can be used in <code class="literal">nmcli connection</code> commands to identify a connection.
						</dd></dl></div><p><a id="tabl-Aliases-and-property-names"/></p><div class="title"><strong>Aliases and property names</strong></div><p>
					An <code class="literal">alias</code> is an alternative name for a <code class="literal">property</code> name — aliases are translated to properties internally in <span class="strong"><strong>nmcli</strong></span>. <code class="literal">Aliases</code> are more readable but <code class="literal">property names</code> are preferable to use.Both can be used interchangeably.
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/><col class="col_4"/><col class="col_5"/></colgroup><thead><tr><th style="text-align: left" valign="top">Alias</th><th style="text-align: left" valign="top">Example</th><th style="text-align: left" valign="top">Property</th><th style="text-align: left" valign="top">Example</th><th style="text-align: left" valign="top">Definition</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								type
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<span class="strong"><strong>type</strong></span> <span class="emphasis"><em>bond</em></span>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								connection.type
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<span class="strong"><strong>connection.type</strong></span> <span class="emphasis"><em>bond</em></span>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								type of a specific connection. Some of the connection types are: <span class="strong"><strong>bond, bridge, ethernet, wifi, infiniband, vlan</strong></span>
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								ifname
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<span class="strong"><strong>ifname</strong></span> <span class="emphasis"><em>eth0</em></span>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								connection.interface-name
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<span class="strong"><strong>connection.interface-name</strong></span> <span class="emphasis"><em>eth0</em></span>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								name of the device to which a connection belongs to
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								con-name
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<span class="strong"><strong>con-name</strong></span> <span class="emphasis"><em>"My Connection"</em></span>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								connection.id
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								<span class="strong"><strong>connection.id</strong></span> <span class="emphasis"><em>"My Connection"</em></span>
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								name of a connection
							</p>
							 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Brief-Selection-of-nmcli-commands_Configuring-Networking-with-nmcli"/>Brief selection of <span class="strong"><strong>nmcli</strong></span> commands</h1></div></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					If you use the <span class="strong"><strong>nmcli</strong></span> commands, it is recommended to type a partial <span class="strong"><strong>nmcli</strong></span> command, and then press the <span class="keycap"><strong>Tab</strong></span> key to auto-complete the command sequence. If multiple completions are possible, then <span class="keycap"><strong>Tab</strong></span> lists them all. This helps users to type commands faster and easier. To enable the <span class="strong"><strong>nmcli</strong></span> auto-complete feature be sure to install the <code class="literal">bash-completion</code> package:
				</p><pre class="literallayout">~]# yum install bash-completion</pre><p>
					After the package installation, <code class="literal">nmcli auto-complete</code> will be available next time you login into a console. To activate it also in the current console, enter:
				</p><pre class="literallayout">~]$ source /etc/profile.d/bash_completion.sh</pre></div><p>
				The following examples show how to use <span class="strong"><strong><span class="application">nmcli</span></strong></span> in specific use cases:
			</p><div class="example"><a id="idm139932819182304"/><p class="title"><strong>Example 6.4. Viewing all connections</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli connection show</code>
  NAME       UUID                                  TYPE      DEVICE
Profile 1  db1060e9-c164-476f-b2b5-caec62dc1b05  ethernet    ens3
bond0       aaf6eb56-73e5-4746-9037-eed42caa8a65  ethernet    --</pre></div></div><div class="example"><a id="idm139932819179600"/><p class="title"><strong>Example 6.5. Viewing only currently active connections</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli connection show --active</code>
  NAME       UUID                                  TYPE      DEVICE
Profile 1  db1060e9-c164-476f-b2b5-caec62dc1b05  ethernet     ens3</pre></div></div><div class="example"><a id="idm139932819177024"/><p class="title"><strong>Example 6.6. Activating a connection</strong></p><div class="example-contents"><p>
					Use the <span class="strong"><strong>up</strong></span> argument to activate a connection.
				</p><pre class="literallayout">~]$ <code class="literal">nmcli connection show</code>
  NAME       UUID                                  TYPE      DEVICE
Profile 1  db1060e9-c164-476f-b2b5-caec62dc1b05  ethernet    ens3
bond0       aaf6eb56-73e5-4746-9037-eed42caa8a65  ethernet    --</pre><pre class="literallayout">~]$ <code class="literal">nmcli connection up id <span class="emphasis"><em>bond0</em></span></code>
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)</pre><pre class="literallayout">~]$ <code class="literal">nmcli connection show</code>
NAME       UUID                                  TYPE      DEVICE
Profile 1  db1060e9-c164-476f-b2b5-caec62dc1b05  ethernet    ens3
bond0       aaf6eb56-73e5-4746-9037-eed42caa8a65  ethernet   bond0</pre></div></div><div class="example"><a id="idm139932819169360"/><p class="title"><strong>Example 6.7. Deactivating a specific active connection</strong></p><div class="example-contents"><p>
					Use the <span class="strong"><strong>down</strong></span> argument to deactivate a specific active connection:
				</p><pre class="literallayout">~]$ <code class="literal">nmcli connection down id <span class="emphasis"><em>bond0</em></span></code></pre><pre class="literallayout">~]$ <code class="literal">nmcli connection show</code>
  NAME       UUID                                  TYPE      DEVICE
Profile 1  db1060e9-c164-476f-b2b5-caec62dc1b05  ethernet    ens3
bond0      aaf6eb56-73e5-4746-9037-eed42caa8a65  ethernet    --</pre></div></div><div class="example"><a id="idm139932819163760"/><p class="title"><strong>Example 6.8. Disconnecting a device preventing it from automatically started again</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli device disconnect id <span class="emphasis"><em>bond0</em></span></code></pre></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					The <code class="literal">nmcli connection down</code> command, deactivates a connection from a device without preventing the device from further auto-activation. The <code class="literal">nmcli device disconnect</code> command, disconnects a device and prevent the device from automatically activating further connections without manual intervention. If the connection has the <code class="literal">connection.autoconnect</code> flag set to <code class="literal">yes</code>, the connection automatically starts on the disconnected device again. In this case, use the <code class="literal">nmcli device disconnect</code> command instead of the <code class="literal">nmcli connection down</code> command.
				</p></div><div class="example"><a id="idm139932819155104"/><p class="title"><strong>Example 6.9. Viewing only devices recognized by <span class="strong"><span class="application">NetworkManager</span></span> and their state</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli device status</code>
DEVICE  TYPE      STATE      CONNECTION
ens3    ethernet  connected  Profile 1
lo      loopback  unmanaged  --</pre></div></div><div class="example"><a id="idm139932723646528"/><p class="title"><strong>Example 6.10. Viewing general information for a device</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli device show</code>
GENERAL.DEVICE:                         ens3
GENERAL.TYPE:                           ethernet
GENERAL.HWADDR:                         52:54:00:0A:2F:ED
GENERAL.MTU:                            1500
GENERAL.STATE:                          100 (connected)
GENERAL.CONNECTION:                     ens3
[...]</pre></div></div><div class="example"><a id="idm139932723643744"/><p class="title"><strong>Example 6.11. Checking the overall status of <span class="strong">NetworkManager</span></strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli general status</code>
STATE      CONNECTIVITY  WIFI-HW  WIFI     WWAN-HW  WWAN
connected  full          enabled  enabled  enabled  enabled</pre><p>
					In terse mode:
				</p><pre class="literallayout">~]$ <code class="literal">nmcli -t -f STATE general</code>
connected</pre></div></div><div class="example"><a id="idm139932723638544"/><p class="title"><strong>Example 6.12. Viewing NetworkManager logging status</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli general logging</code>
  LEVEL  DOMAINS
  INFO   PLATFORM,RFKILL,ETHER,WIFI,BT,MB,DHCP4,DHCP6,PPP,WIFI_SCAN,IP4,IP6,A
UTOIP4,DNS,VPN,SHARING,SUPPLICANT,AGENTS,SETTINGS,SUSPEND,CORE,DEVICE,OLPC,
WIMAX,INFINIBAND,FIREWALL,ADSL,BOND,VLAN,BRIDGE,DBUS_PROPS,TEAM,CONCHECK,DC
B,DISPATCH</pre></div></div><p>
				You can also use the following abbreviations of the <span class="strong"><strong><span class="application">nmcli</span></strong></span> commands:
			</p><div class="table"><a id="tabl-nmcli_examples"/><p class="title"><strong>Table 6.1. Abbreviations of some nmcli commands</strong></p><div class="table-contents"><table summary="Abbreviations of some nmcli commands" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">nmcli command</th><th style="text-align: left" valign="top">abbreviation</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								nmcli general status
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nmcli g
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								nmcli general logging
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nmcli g log
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								nmcli connection show
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nmcli con show or nmcli c
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								nmcli connection show --active
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nmcli con show -a or nmcli c -a
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								nmcli device status
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nmcli dev or nmcli d
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								nmcli device show
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								nmcli dev show or nmcli d show
							</p>
							 </td></tr></tbody></table></div></div><h3><a id="additional_resources_11"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For more information on the comprehensive list of <span class="strong"><strong>nmcli</strong></span> options, see the <span class="emphasis"><em><span class="citetitle"><span class="strong"><strong>nmcli</strong></span>(1)</span></em></span> man page.
					</li><li class="listitem">
						For more examples, see the <span class="emphasis"><em><span class="citetitle"><span class="strong"><strong>nmcli-examples</strong></span>(5)</span></em></span> man page.
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Creating-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli" title="Creating a connection profile with nmcli">the section called “Creating a connection profile with nmcli”</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Setting-a-device-managed-or-unmanaged-with-nmcli_Configuring-Networking-with-nmcli"/>Setting a device managed or unmanaged with nmcli</h1></div></div></div><h3><a id="prerequisites_6"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Getting-started-with-nmcli_Configuring-Networking-with-nmcli" title="Getting started with nmcli">the section called “Getting started with nmcli”</a>
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Overview-of-nmcli-property-names-and-aliases_Configuring-Networking-with-nmcli" title="Overview of nmcli property names and aliases">the section called “Overview of nmcli property names and aliases”</a>
					</li></ul></div><h3><a id="procedure_4"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To list the currently available network connections:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli con show</code>
NAME              UUID                                  TYPE            DEVICE
Auto Ethernet     9b7f2511-5432-40ae-b091-af2457dfd988  802-3-ethernet  --
ens3              fb157a65-ad32-47ed-858c-102a48e064a2  802-3-ethernet  ens3
MyWiFi            91451385-4eb8-4080-8b82-720aab8328dd  802-11-wireless wlan0</pre><p class="simpara">
						Note that the <code class="literal">NAME</code> field in the output always denotes the <span class="strong"><strong>connection ID</strong></span> (name). It is not the interface name even though it might look the same. In the second connection shown above, <span class="emphasis"><em>ens3</em></span> in the <code class="literal">NAME</code> field is the <span class="strong"><strong>connection ID</strong></span> given by the user to the profile applied to the interface <span class="emphasis"><em>ens3</em></span>. In the last connection shown, the user has assigned the connection ID <span class="emphasis"><em>MyWiFi</em></span> to the interface <span class="emphasis"><em>wlan0</em></span>.
					</p><p class="simpara">
						Adding an Ethernet connection means creating a configuration profile which is then assigned to a device. Before creating a new profile, review the available devices as follows:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli device status</code>
DEVICE  TYPE      STATE         CONNECTION
ens3    ethernet  disconnected  --
ens9    ethernet  disconnected  --
lo      loopback  unmanaged     --</pre></li><li class="listitem"><p class="simpara">
						To set the device unmanaged by the <span class="strong"><strong><span class="application">NetworkManager</span></strong></span>:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli device set <span class="emphasis"><em>ifname</em></span> managed no</code></pre></li></ol></div><p>
				For example, to set <span class="emphasis"><em>eth2</em></span> unmanaged:
			</p><pre class="literallayout">~]$ <code class="literal">nmcli device status</code>
DEVICE      TYPE      STATE      CONNECTION
bond0       bond      connected  bond0
virbr0      bridge    connected  virbr0
eth1        ethernet  connected  bond-slave-eth1
eth2        ethernet  connected  bond-slave-eth2
eth0        ethernet  unmanaged  --</pre><pre class="literallayout">~]$ <code class="literal">nmcli device set <span class="emphasis"><em>eth2</em></span> managed no</code></pre><pre class="literallayout">~]$ <code class="literal">nmcli device status</code>
DEVICE      TYPE      STATE      CONNECTION
bond0       bond      connected  bond0
virbr0      bridge    connected  virbr0
eth1        ethernet  connected  bond-slave-eth1
eth2        ethernet  unmanaged  --
eth0        ethernet  unmanaged  --</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					When you set the device unmanaged, <span class="strong"><strong><span class="application">NetworkManager</span></strong></span> does not control it. If the device you want to configure is listed as unmanaged, no <span class="strong"><strong>nmcli</strong></span> command has any effect on this device. However, the device is still connected.
				</p></div><h3><a id="additional_resources_12"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For more information, see the <span class="emphasis"><em><span class="citetitle"><span class="strong"><strong>nmcli</strong></span>(1)</span></em></span> man page.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Creating-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli"/>Creating a connection profile with nmcli</h1></div></div></div><p>
				You can create a connection profile to be associated with a device.
			</p><h3><a id="prerequisites_7"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Getting-started-with-nmcli_Configuring-Networking-with-nmcli" title="Getting started with nmcli">the section called “Getting started with nmcli”</a>
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Overview-of-nmcli-property-names-and-aliases_Configuring-Networking-with-nmcli" title="Overview of nmcli property names and aliases">the section called “Overview of nmcli property names and aliases”</a>
					</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					If you use the <span class="strong"><strong>nmcli</strong></span> commands, it is recommended to type a partial <span class="strong"><strong>nmcli</strong></span> command, and then press the <span class="keycap"><strong>Tab</strong></span> key to auto-complete the command sequence. If multiple completions are possible, then <span class="keycap"><strong>Tab</strong></span> lists them all. This helps users to type commands faster and easier. To enable the <span class="strong"><strong>nmcli</strong></span> auto-complete feature be sure to install the <code class="literal">bash-completion</code> package:
				</p><pre class="literallayout">~]# yum install bash-completion</pre><p>
					After the package installation, <code class="literal">nmcli auto-complete</code> will be available next time you login into a console. To activate it also in the current console, enter:
				</p><pre class="literallayout">~]$ source /etc/profile.d/bash_completion.sh</pre></div><h3><a id="procedure_5"/>Procedure</h3><p>
				The basic format to <span class="strong"><strong>create</strong></span> a new profile for <span class="strong"><strong><span class="application">NetworkManager</span></strong></span> using <span class="strong"><strong><span class="application">nmcli</span></strong></span>:
			</p><pre class="literallayout"><code class="literal">nmcli c add {COMMON_OPTIONS} [IP_OPTIONS]/[NETMASK] [GATEWAY]</code></pre><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						where <code class="literal">{COMMON_OPTIONS}</code> are the aliases or property names, see <a class="link" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#tabl-Aliases-and-property-names" title="Aliases and property names">Aliases and Property names</a>.
					</li><li class="listitem"><p class="simpara">
						where <code class="literal">[IP_OPTIONS]</code> are the IP addresses:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								For IPv4 addresses: <code class="literal">ip4</code>
							</li><li class="listitem">
								For IPv6 addresses: <code class="literal">ip6</code>
							</li></ul></div></li><li class="listitem">
						where <code class="literal">[NETMASK]</code> is the network mask width. For example, <code class="literal">255.255.255.0</code> is the network mask for the prefix <span class="emphasis"><em>198.51.100.0</em></span>/<code class="literal">24</code>.
					</li><li class="listitem"><p class="simpara">
						where <code class="literal">[GATEWAY]</code> is the gateway information:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								For IPv4 addresses: <code class="literal">gw4</code>
							</li><li class="listitem">
								For IPv6 addresses: <code class="literal">gw6</code>
							</li></ul></div></li></ol></div><pre class="literallayout"><code class="literal">nmcli connection add</code> <span class="strong"><strong>type</strong></span> ethernet <span class="strong"><strong>con-name</strong></span> <span class="emphasis"><em>connection-name</em></span> <span class="strong"><strong>ifname</strong></span> <span class="emphasis"><em>interface-name</em></span> <span class="strong"><strong>ip4</strong></span> <span class="emphasis"><em>address</em></span>/<span class="emphasis"><em>network mask</em></span> <span class="strong"><strong>gw4</strong></span> <span class="emphasis"><em>address</em></span></pre><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To create a connection profile with an IPv4 address:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli c add type <span class="emphasis"><em>ethernet</em></span> ifname <span class="emphasis"><em>eth0</em></span> con-name <span class="emphasis"><em>"My Connection"</em></span> ip4 192.168.2.100/24 gw4 192.168.2.1</code>
Connection 'new-ens33' (f0c23472-1aec-4e84-8f1b-be8a2ecbeade) successfully added.</pre></li><li class="listitem"><p class="simpara">
						To activate the created connection:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli c up _"My Connection"</code></pre></li><li class="listitem"><p class="simpara">
						To view the created connection:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli c show <span class="emphasis"><em>"My Connection"</em></span></code></pre></li></ol></div><p>
				Note that the <span class="strong"><strong>nmcli c show <span class="emphasis"><em>con-name</em></span></strong></span> command displays all the properties present in the connection, even those that are empty or have a default value. If the output is longer than a terminal page, <span class="strong"><strong>nmcli</strong></span> generates a pager to allow an easy navigation on the output. In the pager, use arrows to move up and down and the <span class="keycap"><strong>q</strong></span> key to quit.
			</p><p>
				For a more compact display of the connection, use the <code class="literal">-o</code> option:
			</p><pre class="literallayout">~]$ <code class="literal">nmcli -o c show <span class="emphasis"><em>"My Connection"</em></span></code></pre><p>
				The <span class="strong"><strong>nmcli -o c show <span class="emphasis"><em>con-name</em></span></strong></span> command still displays the connection content, but omits empty properties or those that are set to a default value. This usually results in a shorter output that is more readable.
			</p><h3><a id="additional_resources_13"/>Additional Resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						See the <code class="literal">nm-settings(5)</code> man page for more information on properties and their settings.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Using-the-nmcli-Interactive-Connection-Editor_Configuring-Networking-with-nmcli"/>Using the nmcli interactive connection editor</h1></div></div></div><p>
				The <span class="strong"><strong><span class="application">nmcli</span></strong></span> tool has an interactive connection editor. It allows you to change connection parameters according to your needs. To use it:
			</p><pre class="literallayout">~]$ <code class="literal">nmcli con edit</code></pre><p>
				You should enter a valid <span class="strong"><strong>connection type</strong></span> from the list displayed. Then, you are able to modify its parameters.
			</p><pre class="literallayout">~]$ <code class="literal">nmcli con edit</code>
Valid connection types: generic, 802-3-ethernet (ethernet), pppoe, 802-11-wireless (wifi), wimax, gsm, cdma, infiniband, adsl, bluetooth, vpn, 802-11-olpc-mesh (olpc-mesh), vlan, bond, team, bridge, bond-slave, team-slave, bridge-slave, no-slave, tun, ip-tunnel, macsec, macvlan, vxlan, dummy
Enter connection type: <code class="literal">ethernet</code>

===| nmcli interactive connection editor |===

Adding a new '802-11-wireless' connection

Type 'help' or '?' for available commands.
Type 'describe [&lt;setting&gt;.&lt;prop&gt;]' for detailed property description.

You may edit the following settings: connection, 802-11-wireless (wifi), 802-11-wireless-security (wifi-sec), 802-1x, ipv4, ipv6, proxy
nmcli&gt;</pre><p>
				It is possible now to edit the <code class="literal">ethernet</code> connection settings. To get the list of available commands, type <code class="literal">help</code> or <code class="literal">?</code>:
			</p><pre class="literallayout">nmcli&gt; <code class="literal">?</code>
------------------------------------------------------------------------------
---[ Main menu ]---
goto     [&lt;setting&gt; | &lt;prop&gt;]        :: go to a setting or property
remove   &lt;setting&gt;[.&lt;prop&gt;] | &lt;prop&gt; :: remove setting or reset property value
set      [&lt;setting&gt;.&lt;prop&gt; &lt;value&gt;]  :: set property value
describe [&lt;setting&gt;.&lt;prop&gt;]          :: describe property
print    [all | &lt;setting&gt;[.&lt;prop&gt;]]  :: print the connection
verify   [all | fix]                 :: verify the connection
save     [persistent|temporary]      :: save the connection
activate [&lt;ifname&gt;] [/&lt;ap&gt;|&lt;nsp&gt;]    :: activate the connection
back                                 :: go one level up (back)
help/?   [&lt;command&gt;]                 :: print this help
nmcli    &lt;conf-option&gt; &lt;value&gt;       :: nmcli configuration
quit                                 :: exit nmcli
------------------------------------------------------------------------------
nmcli&gt;</pre><p>
				To exit, enter the <code class="literal">quit</code> command.
			</p><div class="example"><a id="idm139932836212528"/><p class="title"><strong>Example 6.13. Adding a new <code class="literal">Ethernet</code> connection using the <span class="strong">nmcli</span> interactive connection editor</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal">nmcli con edit</code>
Valid connection types: generic, 802-3-ethernet (ethernet), pppoe, 802-11-wireless (wifi), wimax, gsm, cdma, infiniband, adsl, bluetooth, vpn, 802-11-olpc-mesh (olpc-mesh), vlan, bond, team, bridge, bond-slave, team-slave, bridge-slave, no-slave, tun, ip-tunnel, macsec, macvlan, vxlan, dummy
Enter connection type: <code class="literal">ethernet</code>

===| nmcli interactive connection editor |===

Adding a new '802-3-ethernet' connection

Type 'help' or '?' for available commands.
Type 'describe [&lt;setting&gt;.&lt;prop&gt;]' for detailed property description.

You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, dcb, ipv4, ipv6, proxy
nmcli&gt; <code class="literal">set connection.id <span class="emphasis"><em>new_eth1</em></span></code>
nmcli&gt; <code class="literal">set connection.interface-name <span class="emphasis"><em>eth1</em></span></code>
nmcli&gt; <code class="literal">set connection.autoconnect yes</code>
nmcli&gt; <code class="literal">save</code>
Saving the connection with 'autoconnect=yes'. That might result in an immediate activation of the connection.
Do you still want to save? (yes/no) [yes] <code class="literal">yes</code>
Connection 'new_eth1' (34ac8f9a-e9d8-4e0b-9751-d5dc87cc0467) successfully saved.
nmcli&gt; <code class="literal">quit</code></pre></div></div><p>
				A new network interface configuration file is created in the <code class="literal">/etc/sysconfig/network-scripts</code> directory:
			</p><pre class="literallayout">~]# <code class="literal">ls -lrt /etc/sysconfig/network-scripts/ifcfg*</code>
-rw-r--r--. 1 root root 254 Aug 15  2017 /etc/sysconfig/network-scripts/ifcfg-lo
-rw-r--r--. 1 root root 304 Apr 26 22:14 /etc/sysconfig/network-scripts/ifcfg-ens3
-rw-r--r--. 1 root root 266 Aug  6 11:03 /etc/sysconfig/network-scripts/ifcfg-new_eth1</pre></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Modifying-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli"/>Modifying a connection profile with nmcli</h1></div></div></div><p>
				You can modify the existing configuration of a connection profile.
			</p><h3><a id="prerequisites_8"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Getting-started-with-nmcli_Configuring-Networking-with-nmcli" title="Getting started with nmcli">the section called “Getting started with nmcli”</a>
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Overview-of-nmcli-property-names-and-aliases_Configuring-Networking-with-nmcli" title="Overview of nmcli property names and aliases">the section called “Overview of nmcli property names and aliases”</a>
					</li><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Creating-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli" title="Creating a connection profile with nmcli">the section called “Creating a connection profile with nmcli”</a>
					</li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
					If you use the <span class="strong"><strong>nmcli</strong></span> commands, it is recommended to type a partial <span class="strong"><strong>nmcli</strong></span> command, and then press the <span class="keycap"><strong>Tab</strong></span> key to auto-complete the command sequence. If multiple completions are possible, then <span class="keycap"><strong>Tab</strong></span> lists them all. This helps users to type commands faster and easier. To enable the <span class="strong"><strong>nmcli</strong></span> auto-complete feature be sure to install the <code class="literal">bash-completion</code> package:
				</p><pre class="literallayout">~]# yum install bash-completion</pre><p>
					After the package installation, <code class="literal">nmcli auto-complete</code> will be available next time you login into a console. To activate it also in the current console, enter:
				</p><pre class="literallayout">~]$ source /etc/profile.d/bash_completion.sh</pre></div><h3><a id="procedure_6"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To modify one or more properties of a connection profile, use the following command:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli c modify</code></pre><p class="simpara">
						For example, to change the <span class="strong"><strong>connection.id</strong></span> from <span class="emphasis"><em>"My Connection"</em></span> to <span class="emphasis"><em>"My favorite connection"</em></span> and the <span class="strong"><strong>connection.interface-name</strong></span> to <span class="emphasis"><em>eth1</em></span>:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli c modify <span class="emphasis"><em>"My Connection"</em></span> connection.id <span class="emphasis"><em>"My favorite connection"</em></span> connection.interface-name <span class="emphasis"><em>eth1</em></span></code></pre></li><li class="listitem"><p class="simpara">
						To <span class="strong"><strong>apply</strong></span> changes after a modified connection using <span class="strong"><strong>nmcli</strong></span>, activate again the connection by entering:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli con up "My favorite connection"</code>
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/16)</pre></li><li class="listitem">
						To view the modified connection, enter the <code class="literal">nmcli con show <span class="emphasis"><em>con-name</em></span></code> command.
					</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configuring-a-Static-Ethernet-Connection_Configuring-Networking-with-nmcli"/>Configuring a static Ethernet connection</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_a_static_ethernet_connection_with_emphasis_role_strong_nmcli_emphasis"/>Configuring a static Ethernet connection with <span class="strong"><strong>nmcli</strong></span></h2></div></div></div><h3><a id="prerequisites_9"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Getting-started-with-nmcli_Configuring-Networking-with-nmcli" title="Getting started with nmcli">the section called “Getting started with nmcli”</a>
						</li><li class="listitem">
							<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Creating-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli" title="Creating a connection profile with nmcli">the section called “Creating a connection profile with nmcli”</a>
						</li></ul></div><h3><a id="procedure_7"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Setting two <code class="literal">IPv4</code> <code class="literal">DNS</code> server addresses:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con mod <span class="emphasis"><em>test-lab</em></span> ipv4.dns "8.8.8.8 8.8.4.4"</code></pre><p class="simpara">
							Note that this will replace any previously set <code class="literal">DNS</code> servers.
						</p><p class="simpara">
							Alternatively, to set two <code class="literal">IPv6</code> <code class="literal">DNS</code> server addresses:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con mod <span class="emphasis"><em>test-lab</em></span> ipv6.dns "2001:4860:4860::8888 2001:4860:4860::8844"</code></pre><p class="simpara">
							Note that this will replace any previously set <code class="literal">DNS</code> servers.
						</p></li><li class="listitem"><p class="simpara">
							To add additional <code class="literal">DNS</code> servers to any previously set, use the <code class="literal">+</code> prefix:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con mod <span class="emphasis"><em>test-lab</em></span> +ipv4.dns "8.8.8.8 8.8.4.4"</code></pre><pre class="literallayout">~]$ nmcli con mod <span class="emphasis"><em>test-lab</em></span> +ipv6.dns "2001:4860:4860::8888 2001:4860:4860::8844"</pre></li><li class="listitem"><p class="simpara">
							To activate the new <span class="strong"><strong>Ethernet</strong></span> connection:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con up <span class="emphasis"><em>test-lab</em></span> <span class="strong"><strong>ifname</strong></span> <span class="emphasis"><em>ens9</em></span></code>
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/6)</pre></li><li class="listitem"><p class="simpara">
							To review the status of the devices and connections:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli device status</code>
DEVICE  TYPE      STATE      CONNECTION
ens3    ethernet  connected  my-office
ens9    ethernet  connected  test-lab
lo      loopback  unmanaged  --</pre></li><li class="listitem">
							To view detailed information about the newly configured connection:
						</li></ol></div><pre class="literallayout">~]$ <code class="literal">nmcli -p con show <span class="emphasis"><em>test-lab</em></span></code>
===============================================================================
                     Connection profile details (test-lab)
===============================================================================
connection.id:                          test-lab
connection.uuid:                        05abfd5e-324e-4461-844e-8501ba704773
connection.interface-name:              ens9
connection.type:                        802-3-ethernet
connection.autoconnect:                 yes
connection.timestamp:                   1410428968
connection.read-only:                   no
connection.permissions:
connection.zone:                        --
connection.master:                      --
connection.slave-type:                  --
connection.secondaries:
connection.gateway-ping-timeout:        0
<span class="emphasis"><em>[output truncated]</em></span></pre><p>
					The use of the <code class="literal">-p, --pretty</code> option adds a title banner and section breaks to the output.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_a_static_ethernet_connection_using_the_nmcli_interactive_editor"/>Configuring a static Ethernet connection using the nmcli interactive editor</h2></div></div></div><p>
					To configure a static Ethernet connection using the <span class="strong"><strong>nmcli</strong></span> interactive editor:
				</p><pre class="literallayout">~]$ <code class="literal">nmcli con edit <span class="strong"><strong>type</strong></span> ethernet <span class="strong"><strong>con-name</strong></span> <span class="emphasis"><em>ens3</em></span></code>

===| nmcli interactive connection editor |===

Adding a new '802-3-ethernet' connection

Type 'help' or '?' for available commands.
Type 'describe [&gt;setting&lt;.&gt;prop&lt;]' for detailed property description.

You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, ipv4, ipv6, dcb
nmcli&gt; <code class="literal">set ipv4.addresses 192.168.122.88/24</code>
Do you also want to set 'ipv4.method' to 'manual'? [yes]: <code class="literal">yes</code>
nmcli&gt; <code class="literal">save temporary</code>
Saving the connection with 'autoconnect=yes'. That might result in an immediate activation of the connection.
Do you still want to save? [yes] <code class="literal">yes</code>
Connection 'ens3' (704a5666-8cbd-4d89-b5f9-fa65a3dbc916) successfully saved.
nmcli&gt; <code class="literal">quit</code></pre><p>
					The default action is to save the connection profile as persistent. If required, the profile can be held in memory only, until the next restart, by means of the <code class="literal">save temporary</code> command.
				</p><h3><a id="additional_resources_14"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							See the <code class="literal">nm-settings(5)</code> man page for more information on properties and their settings.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Configuring-a-Dynamic-Ethernet-Connection_Configuring-Networking-with-nmcli"/>Configuring a dynamic Ethernet connection</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_a_dynamic_ethernet_connection_with_emphasis_role_strong_nmcli_emphasis"/>Configuring a dynamic Ethernet connection with <span class="strong"><strong>nmcli</strong></span></h2></div></div></div><h3><a id="prerequisites_10"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Getting-started-with-nmcli_Configuring-Networking-with-nmcli" title="Getting started with nmcli">the section called “Getting started with nmcli”</a>
						</li><li class="listitem">
							<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#Creating-a-connection-profile-with-nmcli_Configuring-Networking-with-nmcli" title="Creating a connection profile with nmcli">the section called “Creating a connection profile with nmcli”</a>
						</li></ul></div><h3><a id="procedure_8"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							To change the host name sent by a host to a <code class="literal">DHCP</code> server, modify the <code class="literal">dhcp-hostname</code> property:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con modify my-office <span class="emphasis"><em>my-office</em></span> ipv4.dhcp-hostname <span class="emphasis"><em>host-name</em></span> ipv6.dhcp-hostname <span class="emphasis"><em>host-name</em></span></code></pre></li><li class="listitem"><p class="simpara">
							To change the <code class="literal">IPv4</code> client ID sent by a host to a <code class="literal">DHCP</code> server, modify the <code class="literal">dhcp-client-id</code> property:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con modify my-office <span class="emphasis"><em>my-office</em></span> ipv4.dhcp-client-id <span class="emphasis"><em>client-ID-string</em></span></code></pre><p class="simpara">
							There is no <code class="literal">dhcp-client-id</code> property for <code class="literal">IPv6</code>, <span class="strong"><strong><span class="application">dhclient</span></strong></span> to create an identifier for <code class="literal">IPv6</code>. See the <code class="literal">dhclient(8)</code> man page for details.
						</p></li><li class="listitem"><p class="simpara">
							To ignore the <code class="literal">DNS</code> servers sent to a host by a <code class="literal">DHCP</code> server, modify the <code class="literal">ignore-auto-dns</code> property:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con modify my-office <span class="emphasis"><em>my-office</em></span> ipv4.ignore-auto-dns <span class="emphasis"><em>yes</em></span> ipv6.ignore-auto-dns <span class="emphasis"><em>yes</em></span></code></pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring_a_dynamic_ethernet_connection_using_the_interactive_editor"/>Configuring a dynamic Ethernet connection using the interactive editor</h2></div></div></div><p>
					To configure a dynamic Ethernet connection using the interactive editor:
				</p><pre class="literallayout">~]$ <code class="literal">nmcli con edit type ethernet con-name <span class="emphasis"><em>ens3</em></span></code>

===| nmcli interactive connection editor |===

Adding a new '802-3-ethernet' connection

Type 'help' or '?' for available commands.
Type 'describe [&lt;setting&gt;.&lt;prop&gt;]' for detailed property description.

You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, ipv4, ipv6, dcb
nmcli&gt; <code class="literal">describe ipv4.method</code>

=== [method] ===
[NM property description]
IPv4 configuration method.  If 'auto' is specified then the appropriate automatic method (DHCP, PPP, etc) is used for the interface and most other properties can be left unset.  If 'link-local' is specified, then a link-local address in the 169.254/16 range will be assigned to the interface.  If 'manual' is specified, static IP addressing is used and at least one IP address must be given in the 'addresses' property.  If 'shared' is specified (indicating that this connection will provide network access to other computers) then the interface is assigned an address in the 10.42.x.1/24 range and a DHCP and forwarding DNS server are started, and the interface is NAT-ed to the current default network connection.  'disabled' means IPv4 will not be used on this connection.  This property must be set.

nmcli&gt; <code class="literal">set ipv4.method auto</code>
nmcli&gt; <code class="literal">save</code>
Saving the connection with 'autoconnect=yes'. That might result in an immediate activation of the connection.
Do you still want to save? [yes] <code class="literal">yes</code>
Connection 'ens3' (090b61f7-540f-4dd6-bf1f-a905831fc287) successfully saved.
nmcli&gt; <code class="literal">quit</code></pre><p>
					The default action is to save the connection profile as persistent. If required, the profile can be held in memory only, until the next restart, by means of the <code class="literal">save temporary</code> command.
				</p><h3><a id="additional_resources_15"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							See the <code class="literal">nm-settings(5)</code> man page for more information on properties and their settings.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="how-to-use-the-nmcli-command-to-configure-a-static-route_Configuring-Networking-with-nmcli"/>How to use the nmcli command to configure a static route</h1></div></div></div><p>
				To configure a static route, use the <code class="literal">nmcli</code> utility with the following syntax:
			</p><pre class="literallayout">$ <code class="literal">nmcli connection modify <span class="emphasis"><em>connection_name</em></span> ipv4.routes "<span class="emphasis"><em>ip</em></span>[/<span class="emphasis"><em>prefix</em></span>] [<span class="emphasis"><em>next_hop</em></span>] [<span class="emphasis"><em>metric</em></span>] [<span class="emphasis"><em>attribute</em></span>=<span class="emphasis"><em>value</em></span>] [<span class="emphasis"><em>attribute</em></span>=<span class="emphasis"><em>value</em></span>] ..."</code></pre><p>
				The command supports the following route attributes:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">table=<span class="emphasis"><em>n</em></span></code>
					</li><li class="listitem">
						<code class="literal">src=<span class="emphasis"><em>address</em></span></code>
					</li><li class="listitem">
						<code class="literal">tos=<span class="emphasis"><em>n</em></span></code>
					</li><li class="listitem">
						<code class="literal">onlink=true|false</code>
					</li><li class="listitem">
						<code class="literal">window=<span class="emphasis"><em>n</em></span></code>
					</li><li class="listitem">
						<code class="literal">cwnd=<span class="emphasis"><em>n</em></span></code>
					</li><li class="listitem">
						<code class="literal">mtu=<span class="emphasis"><em>n</em></span></code>
					</li><li class="listitem">
						<code class="literal">lock-window=true|false</code>
					</li><li class="listitem">
						<code class="literal">lock-cwdn=true|false</code>
					</li><li class="listitem">
						<code class="literal">lock-mtu=true|false</code>
					</li></ul></div><p>
				If you use the <code class="literal">ipv4.routes</code> sub-command, <code class="literal">nmcli</code> overrides all current settings of this parameter. To add an additional route, use the <code class="literal">nmcli connection modify <span class="emphasis"><em>connection_name</em></span> +ipv4.routes "…​"</code> command. In a similar way, you can use <code class="literal">nmcli connection modify <span class="emphasis"><em>connection_name</em></span> -ipv4.routes "…​"</code> to remove a specific route.
			</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-a-static-route-using-a-nmcli-command_Configuring-Networking-with-nmcli"/>Configuring a static route using a nmcli command</h1></div></div></div><p>
				You can add a static route to the configuration of a network connection using the <code class="literal">nmcli connection modify</code> command.
			</p><p>
				The procedure in this section describes how to add a route to the <code class="literal">192.0.2.0/24</code> network that uses the gateway running on <code class="literal">198.51.100.1</code>, which is reachable through the <code class="literal">example</code> connection.
			</p><h3><a id="prerequisites_11"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The network is configured
					</li><li class="listitem">
						The gateway for the static route must be directly reachable on the interface.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, the command requires <code class="literal">root</code> permissions.
					</li></ul></div><h3><a id="procedure_9"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Add the static route to the <code class="literal">example</code> connection:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection modify <span class="emphasis"><em>example</em></span> +ipv4.routes "192.0.2.0/24 198.51.100.1"</code></pre><p class="simpara">
						To set multiple routes in one step, pass the individual routes comma-separated to the command. For example, to add a route to the <code class="literal">192.0.2.0/24</code> and <code class="literal">203.0.113.0/24</code> networks, both routed through the <code class="literal">198.51.100.1</code> gateway, enter:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection modify <span class="emphasis"><em>example</em></span> +ipv4.routes "192.0.2.0/24 198.51.100.1, 203.0.113.0/24 198.51.100.1"</code></pre></li><li class="listitem"><p class="simpara">
						Optionally, verify that the routes were added correctly to the configuration:
					</p><pre class="literallayout">$ <code class="literal">nmcli connection show <span class="emphasis"><em>example</em></span></code>
...
ipv4.routes:        { ip = 192.0.2.1/24, nh = 198.51.100.1 }
...</pre></li><li class="listitem"><p class="simpara">
						Restart the network connection:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection up <span class="emphasis"><em>example</em></span></code></pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							Restarting the connection briefly disrupts connectivity on that interface.
						</p></div></li><li class="listitem"><p class="simpara">
						Optionally, verify that the route is active:
					</p><pre class="literallayout">$ <code class="literal">ip route</code>
...
192.0.2.0/24 via 198.51.100.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre></li></ol></div><h3><a id="additional_resources_16"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For further details about <code class="literal">nmcli</code>, see the <code class="literal">nmcli(1)</code> man page.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-a-static-route-using-the-nmcli-interactive-mode_Configuring-Networking-with-nmcli"/>Configuring a static route using the nmcli interactive mode</h1></div></div></div><p>
				You can use the interactive mode of the <code class="literal">nmcli</code> utility to add a static route to the configuration of a network connection.
			</p><p>
				The procedure in this section describes how to add a route to the <code class="literal">192.0.2.0/24</code> network that uses the gateway running on <code class="literal">198.51.100.1</code>, which is reachable trough the <code class="literal">example</code> connection.
			</p><h3><a id="prerequisites_12"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The network is configured
					</li><li class="listitem">
						The gateway for the static route must be directly reachable on the interface.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, the command requires <code class="literal">root</code> permissions.
					</li></ul></div><h3><a id="procedure_10"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Open the <code class="literal">nmcli</code> interactive mode for the <code class="literal">example</code> connection:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection edit <span class="emphasis"><em>example</em></span></code></pre></li><li class="listitem"><p class="simpara">
						Add the static route:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">set ipv4.routes 192.0.2.0/24 198.51.100.1</code></pre></li><li class="listitem"><p class="simpara">
						Optionally, verify that the routes were added correctly to the configuration:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">print</code>
...
ipv4.routes:        { ip = 192.0.2.1/24, nh = 198.51.100.1 }
...</pre><p class="simpara">
						The <code class="literal">ip</code> attribute displays the network to route and the <code class="literal">nh</code> attribute the gateway (next hop).
					</p></li><li class="listitem"><p class="simpara">
						Save the configuration:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">save persistent</code></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">activate <span class="emphasis"><em>example</em></span></code></pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							When you restart the connection, all connections currently using this connection will be temporarily interrupted.
						</p></div></li><li class="listitem"><p class="simpara">
						Leave the <code class="literal">nmcli</code> interactive mode:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">quit</code></pre></li><li class="listitem"><p class="simpara">
						Optionally, verify that the route is active:
					</p><pre class="literallayout">$ <code class="literal">ip route</code>
...
192.0.2.0/24 via 198.51.100.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre></li></ol></div><h3><a id="additional_resources_17"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For the list of commands available in the interactive mode, enter <code class="literal">help</code> in the interactive shell.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="setting-the-default-gateway-on-an-existing-connection-using-nmcli_Configuring-Networking-with-nmcli"/>Setting the default gateway on an existing connection using nmcli</h1></div></div></div><p>
				In most situations, administrators set the default gateway when they create a connection as explained in, for example, <a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#configuring_a_static_ethernet_connection_with_emphasis_role_strong_nmcli_emphasis" title="Configuring a static Ethernet connection with nmcli">the section called “Configuring a static Ethernet connection with <span class="strong"><strong>nmcli</strong></span>”</a>.
			</p><p>
				This section describes how to set or update the default gateway on a previously created connection using the <code class="literal">nmcli</code> utility.
			</p><h3><a id="prerequisites_13"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, user must have <code class="literal">root</code> permissions.
					</li></ul></div><h3><a id="procedure_11"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Set the IP address of the default gateway.
					</p><p class="simpara">
						For example, to set the IPv4 address of the default gateway on the <code class="literal"><span class="emphasis"><em>example</em></span></code> connection to <code class="literal">192.0.2.1</code>:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection modify <span class="emphasis"><em>example</em></span> ipv4.gateway "192.0.2.1"</code></pre><p class="simpara">
						For example, to set the IPv6 address of the default gateway on the <code class="literal"><span class="emphasis"><em>example</em></span></code> connection to <code class="literal">2001:db8::1</code>:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection modify <span class="emphasis"><em>example</em></span> ipv6.gateway "2001:db8::1"</code></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection for changes to take effect. For example, to restart the <code class="literal"><span class="emphasis"><em>example</em></span></code> connection using the command line:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection up <span class="emphasis"><em>example</em></span></code></pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							All connections currently using this network connection are temporarily interrupted during the restart.
						</p></div></li><li class="listitem"><p class="simpara">
						Optionally, verify that the route is active.
					</p><p class="simpara">
						To display the IPv4 default gateway:
					</p><pre class="literallayout">$ <code class="literal">ip -4 route</code>
default via 192.0.2.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre><p class="simpara">
						To display the IPv6 default gateway:
					</p><pre class="literallayout">$ <code class="literal">ip -6 route</code>
default via 2001:db8::1 dev <span class="emphasis"><em>example</em></span> proto static metric 100 pref medium</pre></li></ol></div><h3><a id="additional_resources_18"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#configuring_a_static_ethernet_connection_with_emphasis_role_strong_nmcli_emphasis" title="Configuring a static Ethernet connection with nmcli">the section called “Configuring a static Ethernet connection with <span class="strong"><strong>nmcli</strong></span>”</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="setting-the-default-gateway-on-an-existing-connection-using-the-nmcli-interactive-mode_Configuring-Networking-with-nmcli"/>Setting the default gateway on an existing connection using the nmcli interactive mode</h1></div></div></div><p>
				In most situations, administrators set the default gateway when they create a connection as explained in, for example, <a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#configuring_a_static_ethernet_connection_using_the_nmcli_interactive_editor" title="Configuring a static Ethernet connection using the nmcli interactive editor">the section called “Configuring a static Ethernet connection using the nmcli interactive editor”</a>.
			</p><p>
				This section describes how to set or update the default gateway on a previously created connection using the interactive mode of the <code class="literal">nmcli</code> utility.
			</p><h3><a id="prerequisites_14"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, the user must have <code class="literal">root</code> permissions.
					</li></ul></div><h3><a id="procedure_12"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Open the <code class="literal">nmcli</code> interactive mode for the required connection. For example, to open the <code class="literal">nmcli</code> interactive mode for the <span class="emphasis"><em>example</em></span> connection:
					</p><pre class="literallayout">$ <code class="literal">sudo nmcli connection edit <span class="emphasis"><em>example</em></span></code></pre></li><li class="listitem"><p class="simpara">
						Set the default gateway.
					</p><p class="simpara">
						For example, to set the IPv4 address of the default gateway on the <code class="literal"><span class="emphasis"><em>example</em></span></code> connection to <code class="literal">192.0.2.1</code>:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">set ipv4.gateway 192.0.2.1</code></pre><p class="simpara">
						For example, to set the IPv6 address of the default gateway on the <code class="literal"><span class="emphasis"><em>example</em></span></code> connection to <code class="literal">2001:db8::1</code>:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">set ipv6.gateway 2001:db8::1</code></pre></li><li class="listitem"><p class="simpara">
						Optionally, verify that the default gateway was set correctly:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">print</code>
...
ipv4.gateway:                           192.0.2.1
...
ipv6.gateway:                           2001:db8::1
...</pre></li><li class="listitem"><p class="simpara">
						Save the configuration:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">save persistent</code></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection for changes to take effect:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">activate <span class="emphasis"><em>example</em></span></code></pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
							All connections currently using this network connection are temporarily interrupted during the restart.
						</p></div></li><li class="listitem"><p class="simpara">
						Leave the <code class="literal">nmcli</code> interactive mode:
					</p><pre class="literallayout">nmcli&gt; <code class="literal">quit</code></pre></li><li class="listitem"><p class="simpara">
						Optionally, verify that the route is active.
					</p><p class="simpara">
						To display the IPv4 default gateway:
					</p><pre class="literallayout">$ <code class="literal">ip -4 route</code>
default via 192.0.2.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre><p class="simpara">
						To display the IPv6 default gateway:
					</p><pre class="literallayout">$ <code class="literal">ip -6 route</code>
default via 2001:db8::1 dev <span class="emphasis"><em>example</em></span> proto static metric 100 pref medium</pre></li></ol></div><h3><a id="additional_resources_19"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#configuring_a_static_ethernet_connection_using_the_nmcli_interactive_editor" title="Configuring a static Ethernet connection using the nmcli interactive editor">the section called “Configuring a static Ethernet connection using the nmcli interactive editor”</a>
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="connecting-a-Wi-Fi-connection-with-nmcli_Configuring-Networking-with-nmcli"/>Connecting a Wi-Fi connection with nmcli</h1></div></div></div><p>
				This procedure describes how to connect to a <code class="literal">wireless</code> connection using the <span class="strong"><strong>nmcli</strong></span> utility.
			</p><h3><a id="prerequisites_15"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <span class="strong"><strong>nmcli</strong></span> utility to be installed.
					</li><li class="listitem">
						Make sure that the WiFi radio is on (default):
					</li></ul></div><pre class="literallayout">~]$ <code class="literal">nmcli radio wifi on</code></pre><h3><a id="procedure_13"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To refresh the available Wi-Fi connection list:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli device wifi rescan</code></pre></li><li class="listitem"><p class="simpara">
						To view the available Wi-Fi access points:
					</p><pre class="literallayout">~]$ <code class="literal">nmcli dev wifi list</code>

IN-USE  SSID      MODE   CHAN  RATE        SIGNAL  BARS  SECURITY
...
        MyCafe    Infra  3     405 Mbit/s  85      ▂▄▆█  WPA1 WPA2</pre></li><li class="listitem">
						To connect to a Wi-Fi connection using <span class="strong"><strong>nmcli</strong></span>:
					</li></ol></div><pre class="literallayout">~]$ `nmcli dev wifi connect _SSID-Name_ password _wireless-password_`</pre><p>
				For example:
			</p><pre class="literallayout">~]$ <code class="literal">nmcli dev wifi connect MyCafe password <span class="emphasis"><em>wireless-password</em></span></code></pre><p>
				Note that if you want to disable the Wi-Fi state:
			</p><pre class="literallayout">~]$ <code class="literal">nmcli radio wifi off</code></pre><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-a-wifi-using-nmcli_Configuring-Networking-with-nmcli"/>Configuring a Wi-Fi connection using nmcli</h2></div></div></div><h3><a id="prerequisites_16"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The <span class="strong"><strong>nmcli</strong></span> utility to be installed.
						</li><li class="listitem">
							Make sure that the WiFi radio is on (default):
						</li></ul></div><pre class="literallayout">~]$ <code class="literal">nmcli radio wifi on</code></pre><h3><a id="procedure_14"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							To create a Wi-Fi connection profile with static <code class="literal">IP</code> configuration:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli con add con-name <span class="emphasis"><em>MyCafe</em></span> ifname wlan0 type wifi ssid MyCafe ` `ip4 192.168.100.101/24 gw4 192.168.100.1</code></pre></li><li class="listitem"><p class="simpara">
							To check a specific property, for example <code class="literal">mtu</code>:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli connection show id <span class="emphasis"><em>MyCafe</em></span> | grep mtu</code>
802-11-wireless.mtu:                     auto</pre></li><li class="listitem"><p class="simpara">
							To change the property of a setting:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli connection modify id <span class="emphasis"><em>MyCafe</em></span> 802-11-wireless.mtu 1350</code></pre></li><li class="listitem"><p class="simpara">
							To verify the change:
						</p><pre class="literallayout">~]$ <code class="literal">nmcli connection show id <span class="emphasis"><em>MyCafe</em></span> | grep mtu</code>
802-11-wireless.mtu:                     1350</pre><h3><a id="additional_resources_20"/>Additional resources</h3></li></ol></div><p>
					See the <code class="literal">nm-settings(5)</code> man page for more information on properties and their settings.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="proc_connecting-to-a-hidden-network-using-nmcli_Configuring-Networking-with-nmcli"/>Connecting to a hidden network using nmcli</h2></div></div></div><p>
					All access points have a Service Set Identifier (SSID) to identify them. However, an access point may be configured not to broadcast its SSID, in which case it is hidden, and will not show up in <span class="strong"><strong>NetworkManager’s</strong></span> list of Available networks.
				</p><p>
					This procedure shows how you can connect to a hidden network using the <span class="strong"><strong>nmcli</strong></span> tool.
				</p><h3><a id="prerequisites_17"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							The <span class="strong"><strong>nmcli</strong></span> utility to be installed. *
						</li><li class="listitem">
							To know the SSID, and password of the <code class="literal">Wi-Fi</code> connection.
						</li><li class="listitem">
							Make sure that the WiFi radio is on (default):
						</li></ul></div><pre class="literallayout">~]$ <code class="literal">nmcli radio wifi on</code></pre><h3><a id="procedure_15"/>Procedure</h3><p>
					Connect to the SSID that is hidden:
				</p><pre class="literallayout">~]$ <code class="literal">nmcli dev wifi connect <span class="emphasis"><em>SSID_Name</em></span> password <span class="emphasis"><em>wireless_password</em></span> hidden yes</code></pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="sec-Configuring_802.3_Link_Settings"/>Configuring 802.3 link settings</h1></div></div></div><p>
				You can configure the 802.3 link settings of an Ethernet connection by modifying the following configuration parameters:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						<code class="literal">802-3-ethernet.auto-negotiate</code>
					</li><li class="listitem">
						<code class="literal">802-3-ethernet.speed</code>
					</li><li class="listitem">
						<code class="literal">802-3-ethernet.duplex</code>
					</li></ul></div><p>
				You can configure the 802.3 link settings to the following main modes:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Ignore link negotiation
					</li><li class="listitem">
						Enforce the auto-negotiation activation
					</li><li class="listitem">
						Manually set the <code class="literal">speed</code> and <code class="literal">duplex</code> link settings
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-802-3-link-settings-with-nmcli-tool_Configuring-Networking-with-nmcli"/>Configuring 802.3 link settings with nmcli tool</h1></div></div></div><p>
				This procedure describes how to configure 802.3 link settings using the <code class="literal">nmcli</code> tool.
			</p><h3><a id="prerequisites_18"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <span class="strong"><strong><span class="application">NetworkManager</span></strong></span> must be installed and running.
					</li></ul></div><h3><a id="procedure_16"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						To ignore link negotiation, set the following parameters:
					</p><pre class="literallayout">~]# nmcli connection modify <span class="emphasis"><em>connection_name</em></span> 802-3-ethernet.auto-negotiate no 802-3-ethernet.speed 0 802-3-ethernet.duplex ""</pre><p class="simpara">
						Note, that the auto-negotiation parameter is not disabled even if the speed and duplex parameters are not set and the auto-negotiation parameter is set to no.
					</p></li><li class="listitem"><p class="simpara">
						To enforce the auto-negotiation activation, enter the following command:
					</p><pre class="literallayout">~]# nmcli connection modify <span class="emphasis"><em>connection_name</em></span> 802-3-ethernet.auto-negotiate yes 802-3-ethernet.speed 0 802-3-ethernet.duplex ""</pre><p class="simpara">
						That allows to negotiate all the available speed and duplex modes supported by the NIC.
					</p><p class="simpara">
						You can also enable auto-negotiation while advertising and allowing only one speed/duplex mode. This can be useful if you want to enforce <code class="literal">1000BASE-T</code> and <code class="literal">10GBASE-T</code> Ethernet link configuration, as these standards mandate auto-negotiation enabled. To enforce <code class="literal">1000BASE-T</code> standard:
					</p><pre class="literallayout">~]# nmcli connection modify <span class="emphasis"><em>connection_name</em></span> 802-3-ethernet.auto-negotiate yes 802-3-ethernet.speed 1000 802-3-ethernet.duplex full</pre></li><li class="listitem"><p class="simpara">
						To manually set the speed and duplex link settings, enter the following command:
					</p><pre class="literallayout">~]# nmcli connection modify <span class="emphasis"><em>connection_name</em></span> 802-3-ethernet.auto-negotiate no 802-3-ethernet.speed [speed in Mbit/s] 802-3-ethernet.duplex [full|half]</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-802-1x-security-for-wi-fi-and-wired-with-nmcli_Configuring-Networking-with-nmcli"/>Configuring 802.1X security for Wi-Fi and wired with nmcli</h1></div></div></div><p>
				This procedure describes how to set the network security settings in a <code class="literal">wireless</code> or a <code class="literal">Wired</code> connection using the <span class="strong"><strong>nmcli</strong></span> utility.
			</p><h3><a id="prerequisites_19"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The <span class="strong"><strong>nmcli</strong></span> utility is installed.
					</li></ul></div><h3><a id="procedure_17"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem">
						For a <code class="literal">wireless</code> connection, set the authenticated <code class="literal">key-mgmt</code> (key management) protocol. It configures the keying mechanism for a secure <code class="literal">wifi</code> connection.
					</li><li class="listitem">
						Configure the 802-1x authentication settings.
					</li></ol></div><div class="table"><a id="tabl-802-1x_authentication_settings"/><p class="title"><strong>Table 6.2. The 802-1x authentication settings</strong></p><div class="table-contents"><table summary="The 802-1x authentication settings" border="1"><colgroup><col class="col_1"/><col class="col_2"/></colgroup><thead><tr><th style="text-align: left" valign="top">802-1x authentication setting</th><th style="text-align: left" valign="top">Name</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
								802-1x.identity
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Identity
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								802-1x.ca-cert
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								CA certificate
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								802-1x.client-cert
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								User certificate
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								802-1x.private-key
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Private key
							</p>
							 </td></tr><tr><td style="text-align: left" valign="top"> <p>
								802-1x.private-key-password
							</p>
							 </td><td style="text-align: left" valign="top"> <p>
								Private key password
							</p>
							 </td></tr></tbody></table></div></div><p>
				For example, to configure WPA2 Enterprise using the EAP-TLS authentication method, apply the following settings:
			</p><pre class="screen">~]$ nmcli c add type wifi ifname <span class="emphasis"><em>wlan0</em></span> con-name <span class="emphasis"><em>'My Wifi Network'</em></span> \
      802-11-wireless.ssid <span class="emphasis"><em>'My Wifi'</em></span> \
      802-11-wireless-security.key-mgmt <span class="emphasis"><em>wpa-eap</em></span> \
      802-1x.eap tls \
      802-1x.identity <span class="emphasis"><em>identity@example.com</em></span> \
      802-1x.ca-cert /etc/pki/my-wifi/ca.crt \
      802-1x.client-cert /etc/pki/my-wifi/client.crt \
      802-1x.private-key /etc/pki/my-wifi/client.key \
      802-1x.private-key-password s3cr3t</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
					To configure a <code class="literal">wired</code> connection using the <span class="strong"><strong><span class="application">nmcli</span></strong></span> tool, follow the same procedure as for a <code class="literal">wireless</code> connection, except the <code class="literal">802-11-wireless.ssid</code> and <code class="literal">802-11-wireless-security</code> key-mgmt settings.
				</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-network-bonding-using-nmcli_Configuring-Networking-with-nmcli"/>Configuring network bonding using nmcli</h1></div></div></div><p>
				This section describes the basics of network bonding, the differences between bonding and teaming, and how to configure a network bond on Red Hat Enterprise Linux 8 using the <code class="literal">nmcli</code> utility.
			</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="understanding-network-bonding_configuring-network-bonding-using-nmcli"/>Understanding network bonding</h2></div></div></div><p>
					Network bonding is a method to combine or aggregate network interfaces to provide a logical interface with higher throughput or redundancy.
				</p><p>
					The <code class="literal">active-backup</code>, <code class="literal">balance-tlb</code>, and <code class="literal">balance-alb</code> modes do not require any specific configuration of the network switch. However, other bonding modes require configuring the switch to aggregate the links. For example, Cisco switches requires <code class="literal">EtherChannel</code> for modes 0, 2, and 3, but for mode 4, the Link Aggregation Control Protocol (LACP) and <code class="literal">EtherChannel</code> are required.
				</p><p>
					For further details, see the documentation of your switch and <a class="link" href="https://www.kernel.org/doc/Documentation/networking/bonding.txt">https://www.kernel.org/doc/Documentation/networking/bonding.txt</a>.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Certain network bonding features, such as the fail-over mechanism, do not support direct cable connections without a network switch. For further details, see the <a class="link" href="https://access.redhat.com/solutions/202583">Is bonding supported with direct connection using crossover cables?</a> KCS solution.
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="understanding-the-default-behavior-of-master-and-slave-interfaces_configuring-network-bonding-using-nmcli"/>Understanding the default behavior of master and slave interfaces</h2></div></div></div><p>
					Consider the following default behavior of, when managing or troubleshooting team or bond port interfaces using the <code class="literal">NetworkManager</code> service:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Starting the master interface does not automatically start the port interfaces.
						</li><li class="listitem">
							Starting a port interface always starts the master interface.
						</li><li class="listitem">
							Stopping the master interface also stops the port interface.
						</li><li class="listitem">
							A master without ports can start static IP connections.
						</li><li class="listitem">
							A master without ports waits for ports when starting DHCP connections.
						</li><li class="listitem">
							A master with a DHCP connection waiting for ports completes when you add a port with a carrier.
						</li><li class="listitem">
							A master with a DHCP connection waiting for ports continues waiting when you add a port without carrier.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="comparison-of-network-teaming-and-bonding-features_configuring-network-bonding-using-nmcli"/>Comparison of network teaming and bonding features</h2></div></div></div><p>
					The following table compares features supported in network teams and network bonds:
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Feature</th><th style="text-align: left" valign="top">Network bond</th><th style="text-align: left" valign="top">Network team</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									Broadcast Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Round-robin Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Active-backup Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									LACP (802.3ad) support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes (active only)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Hash-based Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									User can set hash function
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Tx load-balancing support (TLB)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									LACP hash port select
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Load-balancing for LACP support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Ethtool link monitoring
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									ARP link monitoring
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NS/NA (IPv6) link monitoring
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Ports up/down delays
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Port priorities and stickiness (“primary” option enhancement)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Separate per-port link monitoring setup
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Multiple link monitoring setup
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Limited
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Lockless Tx/Rx path
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No (rwlock)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes (RCU)
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									VLAN support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									User-space runtime control
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Limited
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Logic in user-space
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Extensibility
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Hard
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Easy
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Modular design
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Performance overhead
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Low
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Very low
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									D-Bus interface
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Multiple device stacking
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Zero config using LLDP
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									(in planning)
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NetworkManager support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-a-network-bond-using-nmcli-commands_configuring-network-bonding-using-nmcli"/>Configuring a network bond using nmcli commands</h2></div></div></div><p>
					This section describes how to configure a network bond using <code class="literal">nmcli</code> commands.
				</p><h4><a id="prerequisites_20"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Two or more network cards are installed in the server.
						</li><li class="listitem">
							The network cards are connected to a switch.
						</li></ul></div><h4><a id="procedure_18"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Create a bond interface. For example, to create a bond interface that uses the <code class="literal">active-backup</code> mode and both the interface and the connection are named <code class="literal">bond0</code>, enter:
						</p><pre class="literallayout"># nmcli connection add type bond con-name bond0 ifname bond0 bond.options "mode=active-backup"</pre><p class="simpara">
							To additionally set a Media Independent Interface (MII) monitoring interval, add the <code class="literal">miimon=<span class="emphasis"><em>interval</em></span></code> option to the <code class="literal">bond.options</code> property. For example, to use the same command but, additionally, set the MII monitoring interval to <code class="literal">1000</code> milliseconds (1 second), enter:
						</p><pre class="literallayout"># nmcli connection add type bond con-name bond0 ifname bond0 bond.options "mode=active-backup,miimon=1000"</pre></li><li class="listitem"><p class="simpara">
							Configure the IPv4 settings. For example, to set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">bond0</code> connection, enter:
						</p><pre class="literallayout"># nmcli connection modify bond0 ipv4.addresses '192.0.2.1/24'
# nmcli connection modify bond0 ipv4.gateway '192.0.2.254'
# nmcli connection modify bond0 ipv4.dns '192.0.2.253'
# nmcli connection modify bond0 ipv4.method manual</pre></li><li class="listitem"><p class="simpara">
							Configure the IPv6 settings. For example, to set a static IPv6 address, network mask, default gateway, and DNS server of the <code class="literal">bond0</code> connection, enter:
						</p><pre class="literallayout"># nmcli connection modify bond0 ipv6.addresses '2001:db8::1/32
# nmcli connection modify bond0 ipv6.gateway '2001:db8::fffe'
# nmcli connection modify bond0 ipv6.dns '2001:db8::fffd'
# nmcli connection modify bond0 ipv6.method manual</pre></li><li class="listitem"><p class="simpara">
							Optionally, display the network interfaces, and note names of interfaces you plan to add to the bond:
						</p><pre class="literallayout"># # nmcli device
DEVICE  TYPE      STATE         CONNECTION
enp1s0  ethernet  connected     enp1s0
enp7s0  ethernet  disconnected  --
enp8s0  ethernet  disconnected  --
lo      loopback  unmanaged     --</pre></li><li class="listitem"><p class="simpara">
							Assign port interfaces to the bond’s connection. For example, to add the interfaces named <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> to the <code class="literal">bond0</code> connection:
						</p><pre class="literallayout"># nmcli connection add type ethernet slave-type bond con-name bond0-port1 ifname enp7s0 master bond0
# nmcli connection add type ethernet slave-type bond con-name bond0-port2 ifname enp8s0 master bond0</pre></li><li class="listitem"><p class="simpara">
							Activate the connection. For example, to activate the <code class="literal">bond0</code> connection:
						</p><pre class="literallayout"># nmcli connection up bond0</pre></li><li class="listitem"><p class="simpara">
							Verify that the slave devices are connected, and the <code class="literal">CONNECTION</code> column displays the slave’s connection name:
						</p><pre class="literallayout"># nmcli device
DEVICE   TYPE      STATE      CONNECTION
...
enp7s0   ethernet  connected  bond0-port1
enp8s0   ethernet  connected  bond0-port2</pre><p class="simpara">
							Red Hat Enterprise Linux activates master and slave devices when the system boots. By activating any slave connection, the master is also activated. However, in this case, only one slave connection is activated. By default, activating the master does not automatically activate the slaves. However, you can enable this behavior by setting:
						</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
									Enable the <code class="literal">connection.autoconnect-slaves</code> parameter of the bond’s connection:
								</p><pre class="literallayout"># nmcli connection modify bond0 connection.autoconnect-slaves 1</pre></li><li class="listitem"><p class="simpara">
									Reactivate the bridge:
								</p><pre class="literallayout"># nmcli connection up bond0</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Optionally, display the status of the bond:
						</p><pre class="literallayout"># cat /proc/net/bonding/<span class="emphasis"><em>bond0</em></span>
Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)

Bonding Mode: fault-tolerance (active-backup)
Primary Slave: None
Currently Active Slave: enp7s0
MII Status: up
MII Polling Interval (ms): 100
Up Delay (ms): 0
Down Delay (ms): 0

Slave Interface: enp7s0
MII Status: up
Speed: Unknown
Duplex: Unknown
Link Failure Count: 0
Permanent HW addr: 52:54:00:d5:e0:fb
Slave queue ID: 0

Slave Interface: enp8s0
MII Status: up
Speed: Unknown
Duplex: Unknown
Link Failure Count: 0
Permanent HW addr: 52:54:00:b2:e2:63
Slave queue ID: 0</pre><p class="simpara">
							In the example, both ports are up.
						</p></li></ol></div><h4><a id="additional_resources_21"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							For <code class="literal">nmcli</code> examples, see the <code class="literal">nmcli-examples(7)</code> man page.
						</li><li class="listitem">
							For a list of options you can set in the <code class="literal">bond.options</code> parameter of the <code class="literal">nmcli</code> command when you create a bond, see <a class="link" href="https://www.kernel.org/doc/Documentation/networking/bonding.txt">https://www.kernel.org/doc/Documentation/networking/bonding.txt</a>.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-a-network-bridge-using-nmcli-commands_Configuring-Networking-with-nmcli"/>Configuring a network bridge using nmcli commands</h1></div></div></div><p>
				This section explains how to configure a network bridge using the <code class="literal">nmcli</code> utility.
			</p><p>
				A network bridge is a link-layer device which forwards traffic between networks based on MAC addresses. The bridge device decides on forwarding packages based on a table of MAC addresses. The bridge builds the MAC addresses table by listening to network traffic and thereby learning what hosts are connected to each network.
			</p><p>
				For example, you can use a software bridge on a Red Hat Enterprise Linux 8 host:
			</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						To emulate a hardware bridge
					</li><li class="listitem">
						In virtualization environments, to integrate virtual machines (VM) to the same network as the host
					</li></ul></div><p>
				Due to the IEEE 802.11 standard which specifies the use of 3-address frames in Wi-Fi for the efficient use of airtime, you cannot configure a bridge over Wi-Fi networks operating in Ad-Hoc or Infrastructure modes.
			</p><h3><a id="prerequisites_21"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Two or more physical or virtual network devices are installed in the server.
					</li><li class="listitem">
						You are logged in as the <code class="literal">root</code> user.
					</li></ul></div><h3><a id="procedure_19"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Create a bridge interface. For example, to create the bridge interface named <code class="literal">bridge0</code>, enter:
					</p><pre class="literallayout"># nmcli connection add type bridge con-name bridge0 ifname bridge0</pre></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings. For example, to set a static IPv4 address, network mask, default gateway, and DNS server of the <code class="literal">bridge0</code> connection, enter:
					</p><pre class="literallayout"># nmcli connection modify bridge0 ipv4.addresses '192.0.2.1/24'
# nmcli connection modify bridge0 ipv4.gateway '192.0.2.254'
# nmcli connection modify bridge0 ipv4.dns '192.0.2.253'
# nmcli connection modify bridge0 ipv4.method manual</pre></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings. For example, to set a static IPv6 address, network mask, default gateway, and DNS server of the <code class="literal">bridge0</code> connection, enter:
					</p><pre class="literallayout"># nmcli connection modify bridge0 ipv6.addresses '2001:db8::1/32'
# nmcli connection modify bridge0 ipv6.gateway '2001:db8::fffe'
# nmcli connection modify bridge0 ipv6.dns '2001:db8::fffd'
# nmcli connection modify bridge0 ipv6.method manual</pre></li><li class="listitem"><p class="simpara">
						Optionally, configure further properties of the bridge. For example, to set the Spanning Tree Protocol (STP) priority of <code class="literal">bridge0</code> to <code class="literal">16384</code>, enter:
					</p><pre class="literallayout"># nmcli connection modify bridge0 bridge.priority '16384'</pre><p class="simpara">
						By default, STP is enabled.
					</p></li><li class="listitem"><p class="simpara">
						Optionally, display the network interfaces, and note the names of the interfaces you want to add to the bridge as a slave in the next step:
					</p><pre class="literallayout"># nmcli device
DEVICE  TYPE      STATE         CONNECTION
enp1s0  ethernet  connected     enp1s0
enp7s0  ethernet  disconnected  --
enp8s0  ethernet  disconnected  --
lo      loopback  unmanaged     --</pre></li><li class="listitem"><p class="simpara">
						Assign the port interfaces to the bridge’s connection. For example, to add the interfaces named <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> to the <code class="literal">bridge0</code> connection, enter:
					</p><pre class="literallayout"># nmcli connection add type ethernet slave-type bridge con-name bridge0-port1 ifname enp7s0 master bridge0
# nmcli connection add type ethernet slave-type bridge con-name bridge0-port2 ifname enp8s0 master bridge0</pre></li><li class="listitem"><p class="simpara">
						Activate the connection. For example, to activate the <code class="literal">bridge0</code> connection, enter:
					</p><pre class="literallayout"># nmcli connection up bridge0</pre></li><li class="listitem"><p class="simpara">
						Verify that the slave devices are connected, and the <code class="literal">CONNECTION</code> column displays the slave’s connection name:
					</p><pre class="literallayout"># nmcli  device
DEVICE   TYPE      STATE      CONNECTION
...
enp7s0   ethernet  connected  bridge0-port1
enp8s0   ethernet  connected  bridge0-port2</pre><p class="simpara">
						Red Hat Enterprise Linux activates master and slave devices when the system boots. By activating any slave connection, the master is also activated. However, in this case, only one slave connection is activated. By default, activating the master does not automatically activate the slaves. However, you can enable this behavior by setting:
					</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
								Enable the <code class="literal">connection.autoconnect-slaves</code> parameter of the bridge connection:
							</p><pre class="literallayout"># nmcli connection modify bridge0 connection.autoconnect-slaves 1</pre></li><li class="listitem"><p class="simpara">
								Reactivate the bridge:
							</p><pre class="literallayout"># nmcli connection up bridge0</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Optionally, use the following command to display the status of the bridge:
					</p><pre class="literallayout"># bridge link show bridge0
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100</pre></li></ol></div><h3><a id="additional_resources_22"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For <code class="literal">nmcli</code> examples, see the <code class="literal">nmcli-examples(7)</code> man page.
					</li><li class="listitem">
						For all bridge properties you can set, see the <code class="literal">bridge settings</code> section in the <code class="literal">nm-settings(5)</code> man page.
					</li><li class="listitem">
						For all bridge port properties you can set, see the <code class="literal">bridge-port settings</code> section in the <code class="literal">nm-settings(5)</code> man page.
					</li><li class="listitem">
						For details about the <code class="literal">bridge</code> utility, see the <code class="literal">bridge(8)</code> man page.
					</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-network-teaming-using-nmcli_Configuring-Networking-with-nmcli"/>Configuring network teaming using nmcli</h1></div></div></div><p>
				This section describes the basics of network teaming, the differences between bonding and teaming, and how to configure a network team on Red Hat Enterprise Linux 8 using the <code class="literal">nmcli</code> utility.
			</p><h3><a id="prerequisites_22"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						Red Hat Enterprise Linux 8 is installed.
					</li><li class="listitem">
						The system has an active subscription assigned.
					</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="understanding-network-teaming_configuring-network-teaming-using-nmcli"/>Understanding network teaming</h2></div></div></div><p>
					Network teaming is a feature that combines or aggregates network interfaces to provide a logical interface with higher throughput or redundancy.
				</p><p>
					Network teaming uses a kernel driver to implement fast handling of packet flows, as well as user-space libraries and services for other tasks. This way, network teaming is an easily extensible and scalable solution for load-balancing and redundancy requirements.
				</p><p>
					Note that in the context of network teaming, the term <code class="literal">port</code> is also known as <code class="literal">slave</code>. In the <code class="literal">teamd</code> service, the term <code class="literal">port</code> is preferred while in the <code class="literal">NetworkManager</code> service, the term <code class="literal">slave</code> refers to interfaces which create a team.
				</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
						Certain network teaming features, such as the fail-over mechanism, do not support direct cable connections without a network switch. For further details, see <a class="link" href="https://access.redhat.com/solutions/202583">Is bonding supported with direct connection using crossover cables?</a>
					</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="understanding-the-default-behavior-of-master-and-slave-interfaces_configuring-network-teaming-using-nmcli"/>Understanding the default behavior of master and slave interfaces</h2></div></div></div><p>
					Consider the following default behavior of, when managing or troubleshooting team or bond port interfaces using the <code class="literal">NetworkManager</code> service:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Starting the master interface does not automatically start the port interfaces.
						</li><li class="listitem">
							Starting a port interface always starts the master interface.
						</li><li class="listitem">
							Stopping the master interface also stops the port interface.
						</li><li class="listitem">
							A master without ports can start static IP connections.
						</li><li class="listitem">
							A master without ports waits for ports when starting DHCP connections.
						</li><li class="listitem">
							A master with a DHCP connection waiting for ports completes when you add a port with a carrier.
						</li><li class="listitem">
							A master with a DHCP connection waiting for ports continues waiting when you add a port without carrier.
						</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="comparison-of-network-teaming-and-bonding-features_configuring-network-teaming-using-nmcli"/>Comparison of network teaming and bonding features</h2></div></div></div><p>
					The following table compares features supported in network teams and network bonds:
				</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: left" valign="top">Feature</th><th style="text-align: left" valign="top">Network bond</th><th style="text-align: left" valign="top">Network team</th></tr></thead><tbody><tr><td style="text-align: left" valign="top"> <p>
									Broadcast Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Round-robin Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Active-backup Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									LACP (802.3ad) support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes (active only)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Hash-based Tx policy
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									User can set hash function
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Tx load-balancing support (TLB)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									LACP hash port select
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Load-balancing for LACP support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Ethtool link monitoring
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									ARP link monitoring
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NS/NA (IPv6) link monitoring
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Ports up/down delays
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Port priorities and stickiness (“primary” option enhancement)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Separate per-port link monitoring setup
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Multiple link monitoring setup
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Limited
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Lockless Tx/Rx path
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No (rwlock)
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes (RCU)
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									VLAN support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									User-space runtime control
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Limited
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Logic in user-space
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Extensibility
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Hard
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Easy
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Modular design
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Performance overhead
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Low
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Very low
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									D-Bus interface
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Multiple device stacking
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									Zero config using LLDP
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									No
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									(in planning)
								</p>
								 </td></tr><tr><td style="text-align: left" valign="top"> <p>
									NetworkManager support
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td><td style="text-align: left" valign="top"> <p>
									Yes
								</p>
								 </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming-using-nmcli"/>Understanding the teamd service, runners, and link-watchers</h2></div></div></div><p>
					The team service, <code class="literal">teamd</code>, controls one instance of the team driver. This instance of the driver adds instances of a hardware device driver to form a team of network interfaces. The team driver presents a network interface, for example <code class="literal">team0</code>, to the kernel.
				</p><p>
					The <code class="literal">teamd</code> service implements the common logic to all methods of teaming. Those functions are unique to the different load sharing and backup methods, such as round-robin, and implemented by separate units of code referred to as <code class="literal">runners</code>. Administrators specify runners in JavaScript Object Notation (JSON) format, and the JSON code is compiled into an instance of <code class="literal">teamd</code> when the instance is created. Alternatively, when using <code class="literal">NetworkManager</code>, you can set the runner in the <code class="literal">team.runner</code> parameter, and <code class="literal">NetworkManager</code> auto-creates the corresponding JSON code.
				</p><p>
					The following runners are available:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">broadcast</code>: Transmits data over all ports.
						</li><li class="listitem">
							<code class="literal">roundrobin</code>: Transmits data over all ports in turn.
						</li><li class="listitem">
							<code class="literal">activebackup</code>: Transmits data over one port while the others are kept as a backup.
						</li><li class="listitem">
							<code class="literal">loadbalance</code>: Transmits data over all ports with active Tx load balancing and Berkeley Packet Filter (BPF)-based Tx port selectors.
						</li><li class="listitem">
							<code class="literal">random</code>: Transmits data on a randomly selected port.
						</li><li class="listitem">
							<code class="literal">lacp</code>: Implements the 802.3ad Link Aggregation Control Protocol (LACP).
						</li></ul></div><p>
					The <code class="literal">teamd</code> services uses a link watcher to monitor the state of subordinate devices. The following link-watchers are available:
				</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<code class="literal">ethtool</code>: The <code class="literal">libteam</code> library uses the <code class="literal">ethtool</code> utility to watch for link state changes. This is the default link-watcher.
						</li><li class="listitem">
							<code class="literal">arp_ping</code>: The <code class="literal">libteam</code> library uses the <code class="literal">arp_ping</code> utility to monitor the presence of a far-end hardware address using Address Resolution Protocol (ARP).
						</li><li class="listitem">
							<code class="literal">nsna_ping</code>: On IPv6 connections, the <code class="literal">libteam</code> library uses the Neighbor Advertisement and Neighbor Solicitation features from the IPv6 Neighbor Discovery protocol to monitor the presence of a neighbor’s interface.
						</li></ul></div><p>
					Each runner can use any link watcher, with the exception of <code class="literal">lacp</code>. This runner can only use the <code class="literal">ethtool</code> link watcher.
				</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="installing-the-teamd-service_configuring-network-teaming-using-nmcli"/>Installing the teamd service</h2></div></div></div><p>
					To configure a network team in <code class="literal">NetworkManager</code>, you require the <code class="literal">teamd</code> service and the team plug-in for <code class="literal">NetworkManager</code>. Both are installed on Red Hat Enterprise Linux 8 by default. This section describes how you install the required packages in case that you remove them.
				</p><h4><a id="prerequisites_23"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							An active Red Hat subscription is assigned to the host.
						</li></ul></div><h4><a id="procedure_20"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Install the <code class="literal">teamd</code> and <code class="literal">NetworkManager-team</code> packages:
						</p><pre class="literallayout"># yum install teamd NetworkManager-team</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-a-network-team-using-nmcli-commands_configuring-network-teaming-using-nmcli"/>Configuring a network team using nmcli commands</h2></div></div></div><p>
					This section describes how you configure a network team using <code class="literal">nmcli</code> commands.
				</p><h4><a id="prerequisites_24"/>Prerequisites</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							Two or more network cards are installed in the server.
						</li><li class="listitem">
							The network cards are connected to a switch.
						</li></ul></div><h4><a id="procedure_21"/>Procedure</h4><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
							Create the team interface. For example, to create a team interface that uses the <code class="literal">activebackup</code> runner and both the interface and connection named <code class="literal">team0</code>, enter:
						</p><pre class="literallayout"># nmcli connection add type team con-name team0 ifname team0 team.runner activebackup</pre></li><li class="listitem"><p class="simpara">
							Optionally, set a link watcher. For example, to set the <code class="literal">ethtool</code> link watcher, modify the <code class="literal">team0</code> connection:
						</p><pre class="literallayout"># nmcli connection modify team0 team.link-watchers "name=ethtool"</pre><p class="simpara">
							Link watchers support different parameters. To set parameters for a link watcher, specify them space-separated in the <code class="literal">name</code> property. Note that the name property must be surrounded by quotes. For example, to use the <code class="literal">ethtool</code> link watcher and set its <code class="literal">delay-up</code> parameter to <code class="literal">2500</code> milliseconds (2.5 seconds):
						</p><pre class="literallayout"># nmcli connection modify team0 team.link-watchers "name=ethtool delay-up=2500"</pre><p class="simpara">
							To set multiple link watchers and each of them with specific parameters, the link watchers must be separated by a comma. The following example sets the <code class="literal">ethtool</code> link watcher with the <code class="literal">delay-up</code> parameter and the <code class="literal">arp_ping</code> link watcher with the <code class="literal">source-host</code> and <code class="literal">target-host</code> parameter:
						</p><pre class="literallayout"># nmcli connection modify team0 team.link-watchers "name=ethtool delay-up=2, name=arp_ping source-host=192.0.2.1 target-host=192.0.2.2"</pre></li><li class="listitem"><p class="simpara">
							Configure the IPv4 settings. For example, to set a static IPv4 address, network mask, default gateway, and DNS server of the <code class="literal">team0</code> connection, enter:
						</p><pre class="literallayout"># nmcli connection modify team0 ipv4.addresses '192.0.2.1/24'
# nmcli connection modify team0 ipv4.gateway '192.0.2.254'
# nmcli connection modify team0 ipv4.dns '192.0.2.253'
# nmcli connection modify team0 ipv4.method manual</pre></li><li class="listitem"><p class="simpara">
							Configure the IPv6 settings. For example, to set a static IPv6 address, network mask, default gateway, and DNS server of the <code class="literal">team0</code> connection, enter:
						</p><pre class="literallayout"># nmcli connection modify team0 ipv6.addresses '2001:db8::1/32'
# nmcli connection modify team0 ipv6.gateway '2001:db8::fffe'
# nmcli connection modify team0 ipv6.dns '2001:db8::fffd'
# nmcli connection modify team0 ipv6.method manual</pre></li><li class="listitem"><p class="simpara">
							Optionally, display the network interfaces, and note the names of the interfaces you want to add to the team in the next step:
						</p><pre class="literallayout"># nmcli device
DEVICE  TYPE      STATE         CONNECTION
enp1s0  ethernet  connected     enp1s0
enp7s0  ethernet  disconnected  --
enp8s0  ethernet  disconnected  --
lo      loopback  unmanaged     --</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
								You can only use network interfaces in a team that are not assigned to any connection. In the above example, you can only use the <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> interfaces.
							</p></div></li><li class="listitem"><p class="simpara">
							Assign the port interfaces to the team’s connection. For example, to add the interfaces named <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> to the <code class="literal">team0</code> connection:
						</p><pre class="literallayout"># nmcli connection add type ethernet slave-type team con-name team0-port1 ifname enp7s0 master team0
# nmcli connection add type ethernet slave-type team con-name team0-port2 ifname enp8s0 master team0</pre></li><li class="listitem"><p class="simpara">
							Activate the connection. For example, to activate the <code class="literal">team0</code> connection:
						</p><pre class="literallayout"># nmcli connection up team0</pre></li><li class="listitem"><p class="simpara">
							Optionally, display the status of the team:
						</p><pre class="literallayout"># teamdctl team0 state
setup:
  runner: activebackup
ports:
  enp7s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
  enp8s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
runner:
  active port: enp7s0</pre><p class="simpara">
							In the example, both ports are up.
						</p></li></ol></div><h4><a id="additional_resources_23"/>Additional resources</h4><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
							<a class="xref" href="Configuring-Networking-with-nmcli_configuring-and-managing-networking.html#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming-using-nmcli" title="Understanding the teamd service, runners, and link-watchers">the section called “Understanding the teamd service, runners, and link-watchers”</a>.
						</li><li class="listitem">
							For <code class="literal">nmcli</code> examples, see the <code class="literal">nmcli-examples(7)</code> man page.
						</li><li class="listitem">
							For all team properties you can set, see the <code class="literal">team</code> section in the <code class="literal">nm-settings(5)</code> man page.
						</li><li class="listitem">
							For parameters you can set in the JSON configuration, as well as JSON examples, see the <code class="literal">teamd.conf(5)</code> man page.
						</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="configuring-vlan-tagging-using-nmcli-commands_Configuring-Networking-with-nmcli"/>Configuring VLAN tagging using nmcli commands</h1></div></div></div><p>
				This section describes how to configure Virtual Local Area Network (VLAN) tagging using <code class="literal">nmcli</code> commands. A VLAN is a logical network within a physical network. The VLAN interface tags packets with the VLAN ID as they pass through the interface, and removes tags of returning packets.
			</p><p>
				You create a VLAN interface on top of another interface, such as Ethernet, bond, team, or bridge. This interface is called the <code class="literal">parent interface</code>.
			</p><h3><a id="prerequisites_25"/>Prerequisites</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						The interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.
					</li><li class="listitem"><p class="simpara">
						If you configure the VLAN on top of a bond interface:
					</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
								The slaves of the bond are up.
							</li><li class="listitem">
								The bond is not configured with the <code class="literal">fail_over_mac=follow</code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the then incorrect source MAC address.
							</li></ul></div></li><li class="listitem">
						The switch the host is connected to is configured to support VLAN tags. For details, see the documentation of your switch.
					</li></ul></div><h3><a id="procedure_22"/>Procedure</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="simpara">
						Optionally, display the available network interfaces:
					</p><pre class="literallayout"># ip address show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:d5:e0:fb brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
						Create the VLAN interface. For example, to create a VLAN interface named <code class="literal">vlan10</code> that uses <code class="literal">enp1s0</code> as its parent interface and that tags packets with VLAN ID <code class="literal">10</code>, enter:
					</p><pre class="literallayout"># nmcli connection add type vlan con-name vlan10 ifname vlan10 vlan.parent enp1s0 vlan.id 10</pre><p class="simpara">
						Note that the VLAN must be within the range from <code class="literal">0</code> to <code class="literal">4094</code>.
					</p></li><li class="listitem"><p class="simpara">
						By default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value:
					</p><pre class="literallayout"># nmcli connection modify vlan10 802-3-ethernet.mtu <span class="emphasis"><em>2000</em></span></pre></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings. For example, to set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">vlan10</code> connection, enter:
					</p><pre class="literallayout"># nmcli connection modify vlan10 ipv4.addresses '192.0.2.1/24'
# nmcli connection modify vlan10 ipv4.gateway '192.0.2.254'
# nmcli connection modify vlan10 ipv4.dns '192.0.2.253'
# nmcli connection modify vlan10 ipv4.method manual</pre></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings. For example, to set a static IPv6 address, network mask, default gateway, and DNS server to the <code class="literal">vlan10</code> connection, enter:
					</p><pre class="literallayout"># nmcli connection modify vlan10 ipv6.addresses '2001:db8::1/32'
# nmcli connection modify vlan10 ipv6.gateway '2001:db8::fffe'
# nmcli connection modify vlan10 ipv6.dns '2001:db8::fffd'
# nmcli connection modify vlan10 ipv6.method manual</pre></li><li class="listitem"><p class="simpara">
						Optionally, verify the settings:
					</p><pre class="literallayout"># ip -d addr show <span class="emphasis"><em>vlan10</em></span>
4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:d5:e0:fb brd ff:ff:ff:ff:ff:ff promiscuity 0
    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10
       valid_lft forever preferred_lft forever
    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><h3><a id="additional_resources_24"/>Additional resources</h3><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
						For <code class="literal">nmcli</code> examples, see the <code class="literal">nmcli-examples(7)</code> man page.
					</li><li class="listitem">
						For all vlan properties you can set, see the <code class="literal">vlan setting</code> section in the <code class="literal">nm-settings(5)</code> man page.
					</li></ul></div></div></div></body></html>
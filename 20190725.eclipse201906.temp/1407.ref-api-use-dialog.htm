<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
  <meta name="copyright"
 content="Copyright (c) IBM Corporation and others 2010, 2013. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page.">
  <meta http-equiv="Content-Type"
 content="text/html; charset=ISO-8859-1">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <link rel="STYLESHEET" href="../../../book.css" charset="ISO-8859-1" type="text/css">
  <title>API Use Reports</title>
  <script language="JavaScript" src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" type="text/javascript"> </script>
</head>
<body>
<h1>API Use Reports</h1>
<p>An <b>API Use Report</b> describes a set of references from one set of bundles to another set of bundles.
A report can be generated using the <a href="../ant-tasks/apiuse-ant-task.htm">API Use Ant Task</a>.
A user interface is provided to configure and generate a report in the <b>External Tools</b> dialog.
To create a new use scan configuration simply double-click the <em>API Use Report</em> configuration type.</p>

<h3>API Use Report Tab</h3>
<p>The <b>API Use Report</b> tab allows you to configure the analysis.</p>
<p>The following example shows a configuration to extract all references to Eclipse bundles in a 3.4 installation.</p>

<p><img src="../images/use-ui.png" alt="API Use Report tab" border="0"></p><br>

<table border="1" cellspacing="0" cellpadding= "5" width="100%">
  <thead>
    <tr>
      <th rowspan="1" colspan="1" width="15%"> <p> Option </p></th>
      <th rowspan="1" colspan="1"> <p> Description </p></th>
      <th rowspan="1" colspan="1" width="5%"> <p> Default </p></th>
    </tr>
  </thead>
  <tbody>
  	<tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze</td>
      <td rowspan="1" colspan="1" valign="top" align="left">You can select what you want to analyze, which can be either an API baseline, target definition or a directory of bundles. 
      You can also select to only generate HTML for an existing report. You can only select one option, with each option allowing you to configure it. I.e. you can go to the API baselines preference page to edit existing baselines if you select analyzing an API baseline.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">API Baseline</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; API Baseline</td>
      <td rowspan="1" colspan="1" valign="top" align="left">You can choose any API baseline from the combo box to analyze</td>
      <td rowspan="1" colspan="1" valign="top" align="center">Default baseline or empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; Baselines...</td>
      <td rowspan="1" colspan="1" valign="top" align="left"> Allows access to the  <b><a href="../preferences/ref-baselines.htm">API Baselines</a></b> preference page to configure the baseline to analyze.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; Target Definition</td>
      <td rowspan="1" colspan="1" valign="top" align="left">You can choose any target definition from the combo box to analyze</td>
      <td rowspan="1" colspan="1" valign="top" align="center">The active target definition or empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; Targets</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows access to the <b><a href="../../../guide/tools/preference_pages/target_platform.htm">Target Platform</a></b> preference page to configure the target definition to analyze.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; Directory</td>
      <td rowspan="1" colspan="1" valign="top" align="left">You can enter the absolute path to a directory containing the bundles.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; Browse...</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to browse for a folder of bundles to analyze.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Analyze &gt; Generate HTML report for existing use scan</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to create a report for an existing scan and not have to perform the analysis again.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Search for &gt; References to</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to specify the name (or matching RegEx) of the bundle that you want to see references to. 
      Consider the following example: <code>org\.eclipse.*</code>. In this example we are saying that we want to see all references to any bundle that starts with the name <code>org.eclipse.</code>.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Search for &gt; API references</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to scan for API references.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">unchecked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Search for &gt; Internal references</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to scan for internal references.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">checked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Search for &gt; Illegal API Use</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to scan for illegal API usage i.e. usage of restricted API members.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">unchecked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Search in &gt; Bundles matching</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to specify the name (or matching RegEx) of the bundle(s) that you want to scan for references from i.e. a search scope. 
      Consider the following example: <code>.*</code>. In this example we are saying that we want to search in all bundles whose name matches any character sequence. 
      The same effect can be achieved leaving the field blank.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
       <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Filters &gt; Additional Filters</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to specify a directory of API problem filters to use during the scan.  
        <p>
        The setting is the root directory of the .api_filters files that should be used to filter potential references found by the use scan.<br>
        The root is specified using an absolute path.<br>
        The root needs to contain the following structure:
        <pre>
root
 |
 +-- component name (i.e. org.eclipse.jface)
        |
        +--- .api_filters
		</pre>
        </td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Filters &gt; Browse...</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Opens a dialog where you can select a root filter directory.  
        </td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Report Type</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to choose between two html report formats.  If <em>Referenced bundles report (Producers)</em> is selected the report
      will list all of the bundles containing the types that are being referenced in the searched bundles.  If <em>Referencing bundles report (Consumers)</em> is selected the report will
      be organized to show all of the bundles in the search scope that contain references.
      <p>
      When switching report types, check that the <em>References to</em> and <em>Bundles matching</em> regular expressions have the correct values.  When using a wildcard expression such as .* in one
      setting, switching to another report type often requires the wilcard being moved to the other setting to get the most useful report.
      </p> 
      </td>
      <td rowspan="1" colspan="1" valign="top" align="center">Referenced bundles report (Producers)</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Report Output Location</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to specify the absolute path where any generated reports should be placed.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Browse...</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Opens a dialog where you can select the location to output any reports.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Clean report directory before reporting new results</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to clear out an existing XML report location prior to the scan reporting any results. 
      It should be noted that this option will completely remove the specified report directory if it exists, with all child directories being recursively removed as well.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">unchecked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Create HTML reports</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Converts all of the XML output into formatted HTML and place it in <code>&lt;report location&gt;\html</code></td>
      <td rowspan="1" colspan="1" valign="top" align="center">unchecked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Clean HTML report location</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to clear out an existing HTML location prior to creating new reports. 
      It should be noted that this option will completely remove the specified HTML directory if it exists, with all child directories being recursively removed as well.
      This option only enables if you select the <b>Create HTML Reports</b> option mentioned above.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">unchecked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Open report when search completes</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Opens the HTML report when the analysis is complete. This option only enables if you select the <b>Create HTML Reports</b> option mentioned above.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">unchecked</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Reporting &gt; Description</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to enter a human-readable description for the report.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">empty</td>
    </tr>
  </tbody>
</table>

<h3>Patterns Tab</h3>
<p>The <b>Patterns</b> tab allows you to create a variety of Regular Expression patterns to control the use analysis. 
There are currently three supported kinds of patterns:</p> 
	<ol>
		<li>Archive Pattern - Allows you to specify nested archives that should be ignored during analysis.</li>
		<li>Package Pattern - Allows you to specify packages that should be API or internal without having to update your bundle manifest.</li>
		<li>Report Conversion Pattern - Allows you to create a package name regular expression to filter references taht are reported. All reported referece are filtered
		using their fully qualified package name.</li>
	</ol>

<p><img src="../images/use-ui-patterns.png" alt="Patterns tab" border="0"></p><br>

<table border="1" cellspacing="0" cellpadding= "5" width="100%">
  <thead>
    <tr>
      <th rowspan="1" colspan="1" width="15%"> <p> Option </p></th>
      <th rowspan="1" colspan="1"> <p> Description </p></th>
      <th rowspan="1" colspan="1" width="5%"> <p> Default </p></th>
    </tr>
  </thead>
  <tbody>
	<tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Add...</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to add a new pattern. This button will start the 
      <a href="ref-apiuse-patterns-wizard.htm"><strong>Pattern wizard</strong></a>.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Edit</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to edit the currently selected pattern. Only one pattern can be edited at a time.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1" valign="top" align="left">Remove</td>
      <td rowspan="1" colspan="1" valign="top" align="left">Allows you to remove the selected pattern(s). You can remove more than one pattern at a time.</td>
      <td rowspan="1" colspan="1" valign="top" align="center">&nbsp;</td>
    </tr>
  </tbody>
</table>

<h3 class="related">Related tasks</h3>
<a href="../../../tasks/api_tooling_compare_to_baseline.htm">Comparing to an API baseline</a><br>
<a href="../../../tasks/api_tooling_baseline.htm">Setting up a baseline</a>

<h3 class="related">Related references</h3>
<a href="../preferences/ref-baselines.htm">API Baselines Preferences</a><br>
<a href="ref-apiuse-patterns-wizard.htm">API Use Patterns Wizard</a>
</body>
</html>

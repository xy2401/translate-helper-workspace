<html id='03541.EXP-00000.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>EXP-00000 to EXP-00114</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Error Messages">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Error Messages">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-error-messages.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T07:32:34-07:00">
      <meta name="dcterms.title" content="Database Error Messages">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95938-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="EVM-00001.html" title="Previous" type="text/html">
      <link rel="next" href="GIMR-01001.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ERRMG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="EVM-00001.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="GIMR-01001.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Error Messages</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> EXP-00000 to EXP-00114</li>
            </ol>
            <a id="GUID-DF48625B-F309-41FF-8414-B31D39526C3B" name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B"></a>
            
            <h2 id="ERRMG-GUID-DF48625B-F309-41FF-8414-B31D39526C3B" class="sect2"><span class="enumeration_chapter">32 </span> EXP-00000 to EXP-00114
            </h2>
         </header>
         <div class="ind">
            <div>
               <dl>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-00C10289-9B28-4392-84EC-DA5004BC01B9">
                        <!-- --></a>
EXP-00000: Export terminated unsuccessfully\n
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered an Oracle error.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Look up the accompanying Oracle message in the ORA message chapters of this manual, and take appropriate action.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-52743FC8-5BC1-4556-930E-2AEE1FBDC310">
                        <!-- --></a>
EXP-00001: data field truncation - column length=<span class="variable" translate="no">number</span>, buffer size=<span class="variable" translate="no">number</span> actual size=<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export could not fit a column in the data buffer.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Record the given size parameters and the accompanying messages and report this as an Export internal error to customer support. (Part of the table has been exported. Export will continue with the next table.)

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-569D633C-7EA0-44FA-907A-951537120407">
                        <!-- --></a>
EXP-00002: error in writing to export file
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export could not write to the export file, probably because of a device error. This message is usually followed by a device message from the operating system.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Take appropriate action to restore the device.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-E14D4F03-7044-4795-A7DD-E71AF7F4F0FD">
                        <!-- --></a>
EXP-00003: no storage definition found for segment(<span class="variable" translate="no">number</span>, <span class="variable" translate="no">number</span>)
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export could not find the storage definitions for a cluster, index, or table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Record the accompanying messages and report this as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-300572EA-F125-47DE-B65C-19ABE702FA18">
                        <!-- --></a>
EXP-00004: invalid username or password
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An invalid username or password was specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry with a valid username and password.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-DCC89145-C41F-4D96-8991-88425AB02245">
                        <!-- --></a>
EXP-00005: all allowable logon attempts failed
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Attempts were repeatedly made to log on with an invalid username or password.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Shut down the utility, then restart and retry with a valid username and password.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-241B50DE-CB02-4876-BBB4-6D717D1FFBCA">
                        <!-- --></a>
EXP-00006: internal inconsistency error
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export's data structure was corrupted.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Record the accompanying messages and report this as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-5E369F4D-B60D-4C3B-AA9E-75B579EFFF44">
                        <!-- --></a>
EXP-00007: dictionary shows no columns for <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export failed to gather column information from the data dictionary. The table may have been dropped.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the export and, if this error recurs, report it as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-0F4E3FA3-A349-4F99-BF2C-50D4DA4303D1">
                        <!-- --></a>
EXP-00008: ORACLE error <span class="variable" translate="no">number</span> encountered
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered the referenced Oracle error.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Look up the Oracle message in the ORA message chapters of this manual and take appropriate action.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-1958FE18-20BB-46E6-A732-8FEA2FA00674">
                        <!-- --></a>
EXP-00009: no privilege to export <span class="variable" translate="no">string</span>'s table <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to export another user's table. Only a database administrator can export another user's tables.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask your database administrator to do the export.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-F60A09FA-6723-49BB-8F7B-71CD5E032B60">
                        <!-- --></a>
EXP-00010: <span class="variable" translate="no">string</span> is not a valid username
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An invalid username was specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Shut down the utility, then restart and retry with a valid username.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-3E0377E8-7FBF-4519-B555-2E621741B8FC">
                        <!-- --></a>
EXP-00011: <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> does not exist
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export could not find the specified table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry with the correct table name.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-9CBBA706-E481-4E4A-AFD8-157A74B8DB42">
                        <!-- --></a>
EXP-00012: <span class="variable" translate="no">string</span> is not a valid export mode
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An invalid export mode was specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry with a valid export mode.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-C343FF39-8210-4FEB-BBD3-F0269BAFB443">
                        <!-- --></a>
EXP-00013: respond with either 'Y', 'N', RETURN or '.' to quit
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An invalid response was entered.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Enter any of the responses shown in the message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-7271700A-A56B-455C-A9ED-D57895943ECD">
                        <!-- --></a>
EXP-00014: error on row <span class="variable" translate="no">number</span> of table <span class="variable" translate="no">string</span>\n
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered an Oracle error while fetching rows.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Look up the accompanying Oracle message in the ORA message chapters of this manual and take appropriate action.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-34824D0F-3E5E-4CCC-AA1F-F28E73E7B4D2">
                        <!-- --></a>
EXP-00015: error on row <span class="variable" translate="no">number</span> of table <span class="variable" translate="no">string</span>, column <span class="variable" translate="no">string</span>, datatype <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered an error while fetching or writing the column. An accompanying message gives more information.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Correct the error and try again.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-C1DF2B4B-16D7-407A-88D4-16B712445CF8">
                        <!-- --></a>
EXP-00016: ORACLE error encountered while reading default auditing options
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered an Oracle error while reading the default auditing options (those for updates, deletes, and so on).

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Look up the accompanying Oracle message in the ORA message chapters of this manual and take appropriate action.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-3CCC2ED4-A41F-4F69-A98E-A1C60D9B6881">
                        <!-- --></a>
EXP-00017: feature "<span class="variable" translate="no">string</span>" is needed, but not present in database
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The command entered requires the specified feature.  Either that feature is not installed, or the row describing the feature is missing from table V$OPTION

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Reinstall Oracle with the feature specified in the message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-7D097784-0003-413D-997B-6EE9D3B61AB5">
                        <!-- --></a>
EXP-00018: datatype (<span class="variable" translate="no">number</span>) for column <span class="variable" translate="no">string</span>, table <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> is not supported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export does not support the referenced datatype.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry with an acceptable datatype (CHAR, NUMBER, DATE, LONG, or RAW).

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-2298045E-383E-45AA-8761-15269F7DB7F5">
                        <!-- --></a>
EXP-00019: failed to process parameters, type 'EXP HELP=Y' for help
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Invalid command-line parameters were specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check the online help screen for the set of valid parameters, then retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-C514DF21-02E7-48D4-A283-3C0CA1A1CAE9">
                        <!-- --></a>
EXP-00020: failed to allocate memory of size <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export failed to allocate the necessary memory.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Decrease the export buffer size so that less memory is required, or increase the runtime memory size for Export.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-D908D843-4D0D-45A1-8938-FC602177622B">
                        <!-- --></a>
EXP-00021: can only perform incremental export in Full Database mode
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
USER or TABLE mode was specified when doing an incremental export.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify FULL database mode (FULL=Y) and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-77CBA522-F3F6-4200-BB67-41635CCC40B1">
                        <!-- --></a>
EXP-00022: must be SYS or SYSTEM to do incremental export
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The privileges needed to do an incremental export do not exist. Only a data base administrator can do incremental exports.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask the database administrator to do the incremental export.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-DD03F5A8-FBE2-4249-83C8-D17A2212168F">
                        <!-- --></a>
EXP-00023: must be a DBA to do Full Database or Tablespace export
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The privileges needed to do a FULL database export do not exist. Only a database administrator can do a FULL database export.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask the database administrator to do the FULL database export.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-E4FEAFE6-5ADC-4940-B42E-D1A79A006B4A">
                        <!-- --></a>
EXP-00024: Export views not installed, please notify your DBA
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The necessary Export views were not installed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask the database administrator to install the required Export views.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-BDC9D6F0-EC59-4AEA-9E7F-CF3FC25FCA29">
                        <!-- --></a>
EXP-00025: dictionary shows no column for constraint <span class="variable" translate="no">string</span>.<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export failed to gather column information about the referenced constraint from the data dictionary. The constraint may have been altered.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the export and, if this error recurs, report it as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-3C31FE9B-C3B8-432F-AFD7-EC1EB44E79FD">
                        <!-- --></a>
EXP-00026: conflicting modes specified
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Conflicting export modes were specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify only one parameter and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-DAE134EC-68B7-4F41-BAB7-8E142BEE94D3">
                        <!-- --></a>
EXP-00027: failed to calculate ORACLE block size
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export failed to calculate the Oracle block size.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Report this as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-3C2F62C6-B727-4D64-ADDD-7292C94D1963">
                        <!-- --></a>
EXP-00028: failed to open <span class="variable" translate="no">string</span> for write
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export failed to open the export file for writing. This message is usually followed by device messages from the operating system.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Take appropriate action to restore the device.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6BFA6A42-7EED-440E-9D14-23335B10B3E0">
                        <!-- --></a>
EXP-00029: Incremental export mode and consistent mode are not compatible
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Both consistent and incremental exports were specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
None. Consistent mode is turned off.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-8687C640-8851-4951-8BA3-30CCA54DB774">
                        <!-- --></a>
EXP-00030: Unexpected End-Of-File encountered while reading input
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Encountered an End-Of-File while reading the user input.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If input to export is being redirected, check the file for errors.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-49D76D23-9F44-49D8-A96D-C67CA6122A38">
                        <!-- --></a>
EXP-00031: Arraysize not in valid range. Using arraysize=<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The arraysize value specified is not in the valid range.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
None

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-959A62E2-C99D-4137-9BDC-5B9F5E98DBF0">
                        <!-- --></a>
EXP-00032: Non-DBAs may not export other users
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Only database administrators can export to other users. A non- database administrator attempted to specify owner=user where exporter is not the user.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Request that this operation be performed by the database administrator.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-62E1339E-6B81-458E-9421-2DC5C722EB91">
                        <!-- --></a>
EXP-00033: Could not find environment character set
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The environment character set is missing or incorrectly specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the environment character set is correctly specified and is present.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-52E966A7-1BD2-4279-B3C3-E16F32D547C1">
                        <!-- --></a>
EXP-00034: error on rowid: file# <span class="variable" translate="no">number</span> block# <span class="variable" translate="no">number</span> slot# <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Identifies the rowid on which an error occurred.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
This is an information message. No action is required.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-AE89ECA9-F836-4D18-85EF-B81EDEE3DF84">
                        <!-- --></a>
EXP-00035: QUERY parameter valid only for table mode exports
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
You specified the QUERY parameter in an export command, but you are not performing a table mode export.  The QUERY parameter cannot be used for a user mode export, a full export, nor a point in time recovery export.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If you want to select a subset of rows for a table, you must export the table independently with a table mode export.  Issue a table mode export command that specifies the table name and the query you want to execute during export.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-075793F2-43A3-4FF0-887E-D13B312CA528">
                        <!-- --></a>
EXP-00036: Object <span class="variable" translate="no">number</span> non-existent in dictionary
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified object could not be found in the dictionary. The object might have been dropped during the export

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
The object no longer exists; no action is needed.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6B905D2B-DD87-4D41-A9D2-FCFC9B04F692">
                        <!-- --></a>
EXP-00037: Export views not compatible with database version
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The Export utility is at a higher version than the database version and is thereby incompatible.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the same version of Export utility as the database.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-1635D7C2-66C2-403D-B11A-0A39692A77B0">
                        <!-- --></a>
EXP-00038: Bad Hash cluster id in clu$
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The function id in clu$ is not a legal number. Clu$ has become corrupted.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-98930435-2D32-4F0D-B6DC-762B4DBD8AD6">
                        <!-- --></a>
EXP-00039: export file <span class="variable" translate="no">string</span> must be on a disk
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
On some platforms, export can read files from tape.  This message is displayed if the first file in an export file set was on disk and you specified a tape device for a second or subsequent file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Verify that you have specified the correct file name for the export file.  Remember that all export files can be either on disk or all files can be on tape, but not mixed both tape and disk.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-8AA76D5C-5F30-4A75-9A67-374D6BE6EF1D">
                        <!-- --></a>
EXP-00040: Dump file and log file must be different
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The dump file and log file cannot be the same file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify different file names for the dump file and the log file, then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-3BF3B1D1-9818-4C63-BCA8-97F8BCEEE6F1">
                        <!-- --></a>
EXP-00041: INCTYPE parameter is obsolete
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered the INCTYPE parameter when parsing Export options.  Incremental Exports are no longer supported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Consult the Oracle Backup and Recovery guide. Export will attempt to continue.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-68AE7355-DCB0-4ED6-A4E8-30211BF2FFA4">
                        <!-- --></a>
EXP-00042: Missing NLS_CHARACTERSET/NLS_NCHAR_CHARACTERSET in props$
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A value for NLS_CHARACTERSET/NLS_NCHAR_CHARACTERSET was not entered in the props$ table"

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
internal error.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-3911A123-C39E-4E77-A3D8-0A11B87EA9D7">
                        <!-- --></a>
EXP-00043: Invalid data dictionary information in the row where column "<span class="variable" translate="no">string</span>" is "<span class="variable" translate="no">string</span>" in table <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The export utility retrieved invalid data from the data dictionary.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Suport.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-8D5A3AE5-80F0-4404-9F47-15606960D92E">
                        <!-- --></a>
EXP-00044: must be connected 'AS SYSDBA' to do Point-in-time Recovery or Transportable Tablespace import
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The user must log in 'as SYSDBA' to perform transportable tablespace imports or Point-In-Time Recovery imports.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask your database adminstrator to perform the Transportable Tablespace import or the Tablespace Point-in-time Recovery import.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-C92DA614-907E-4CEA-B222-013A9AAE20E3">
                        <!-- --></a>
EXP-00045: Cannot export SYSTEM Tablespace for Point-in-time Recovery or Transportable Tablespace
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
SYSTEM tablespace cannot be part of recovery set or transportable tablespace set.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Wordwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-489B1F5A-FB3D-4398-B206-3C35ED103B59">
                        <!-- --></a>
EXP-00046: Tablespace named <span class="variable" translate="no">string</span> does not exist
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified tablespace does not exist in dictionary.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Wordwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6A3E5C35-B1B0-4C77-8A82-EF7088CB8FED">
                        <!-- --></a>
EXP-00047: Missing tablespace name(s)
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Tablespace name(s) were not supplied

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Provide tablespace name(s)

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-FF8EDD3B-A7CB-4896-960D-31E25F633D5B">
                        <!-- --></a>
EXP-00048: Cannot export SYSAUX Tablespace for Point-in-time Recovery or Transportable Tablespace
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
SYSAUX tablespace cannot be part of recovery set or transportable tablespace set.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Wordwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-FF7B8742-E3A7-4287-9A5E-5E227167AF67">
                        <!-- --></a>
EXP-00049: <span class="variable" translate="no">string</span> option is not compatible with Point-in-time Recovery or Transportable Tablespace Export
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An option was specified incompatible with Point-in-time Recovery or Transportable Tablespace Export.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the Export without the displayed option.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-604FF59E-2363-47F8-A86D-8267CAD06332">
                        <!-- --></a>
EXP-00050: Cannot perform Partition Export "<span class="variable" translate="no">string</span>" on non-partitioned table "<span class="variable" translate="no">string</span>"
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The table specified in this Partition Export is not a partitioned table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use Table mode, or specify a non-partitioned table.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-058B243F-8B04-4B1E-9FFD-C6D221D72AED">
                        <!-- --></a>
EXP-00051: "<span class="variable" translate="no">string</span>" - given partition or subpartition name is not part of "<span class="variable" translate="no">string</span>" table
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified partition or subpartition name is not in the specified table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check if the correct table, partition or subpartition name was specified.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-07B7339A-B38E-4E04-8FD0-2943D3C6A8FE">
                        <!-- --></a>
EXP-00052: error on row <span class="variable" translate="no">number</span> of partition <span class="variable" translate="no">string</span>\n
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered the referenced Oracle error while fetching rows.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Look up the Oracle message in the ORA message chapters of this manual and take appropriate action.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-A311F413-4F59-4AF2-A0E3-0C8DBB93BB1F">
                        <!-- --></a>
EXP-00053: unable to execute QUERY on table <span class="variable" translate="no">string</span> because the table has inner nested tables
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
You specified the QUERY parameter on a table that has one or more inner nested tables.  The QUERY parameter cannot be specified on tables that have inner nested tables.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Export the entire table by omitting the QUERY parameter.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-EC1CF023-E438-4E5D-BCAB-466D36D312FE">
                        <!-- --></a>
EXP-00054: error on row <span class="variable" translate="no">number</span> of subpartition <span class="variable" translate="no">string</span>\n
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export encountered the referenced Oracle error while fetching rows.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Look up the Oracle message in the ORA message chapters of this manual and take appropriate action.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-5DDEA3A0-C2CF-495F-9B21-1B163DF04C9F">
                        <!-- --></a>
EXP-00055: <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> is marked not exportable
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An object was marked as non-exportable in the NOEXP$ table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Consult your database administrator.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-2EFB7DAE-6E68-44A4-91EB-E89E52B0E022">
                        <!-- --></a>
EXP-00057: Failure to initialize parameter manager
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The parameter manager failed in intialization.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Record the messages that follow and report this to Oracle Wordwide Support as an Export internal bug.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-B94FD5E3-67CD-4B6B-B5B1-73C3DFF8C734">
                        <!-- --></a>
EXP-00058: Password Verify Function for <span class="variable" translate="no">string</span> profile does not exist
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Cannot find the function for the profile.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check if the profile was created properly.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-41B3322D-0DC0-4A8F-AD07-466EE39F861C">
                        <!-- --></a>
EXP-00059: error converting an object type's identifier to characters
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An invalid length of an object type identifier prevented its conversion.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-265DD428-F061-4581-98F7-E94524281885">
                        <!-- --></a>
EXP-00060: an object type had multiple TYPE BODYs
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
More than one TYPE BODY was found for an object type.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Try dropping the TYPE BODY, if that is not successful, contact Oracle Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-A9170004-2279-4413-A535-957CBC88418F">
                        <!-- --></a>
EXP-00061: unable to find the outer table name of a nested table 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
While exporting a bitmap index or posttable action on an inner nested table, the name of the outer table could not be located, using the NTAB$ table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Verify the table is properly defined.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-33F2E43C-2023-4A6E-B16C-4B6B31EDD69D">
                        <!-- --></a>
EXP-00062: invalid source statements for an object type
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
TYPE was not found in the statements in SOURCE$ for an Object Type

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-335C46AA-A550-43E4-BCDA-635502EA009C">
                        <!-- --></a>
EXP-00063: error in changing language handle
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Unable to change language handle.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-DDAA550E-F0B4-4D2D-B0BF-893AC59ACACB">
                        <!-- --></a>
EXP-00064: <span class="variable" translate="no">string</span> is an inner nested table and cannot be exported.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to export an inner nested table without its parent table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Export the parent of the inner nested table.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6E9DDE1B-2104-4695-83CB-09646E0B477C">
                        <!-- --></a>
EXP-00065: Error writing lob to the dump file.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The current LOB could not be written to the dump file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Identify the cause of the write failure and fix it.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-0AD69981-0B78-43A4-BA7F-B730322D3E8E">
                        <!-- --></a>
EXP-00066: Object table <span class="variable" translate="no">string</span> is missing its object identifier index
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
All object tables must have an object identifier index, but the specified table was missing an index on its object identifier column.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Recreate the type table and retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-0A0C1EF2-3DD6-4FD2-82FF-462EA4F515E0">
                        <!-- --></a>
EXP-00068: tablespace <span class="variable" translate="no">string</span> is offline
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export failed to export tablespace (tablespace being offline).

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Make tablespace online and re export.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-4D2BD64C-5ECD-4942-A546-6F091308DA35">
                        <!-- --></a>
EXP-00070: attempt to free unallocated memory
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to free memory that was not allocated.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-8B7FE1F5-39D7-421E-91AB-4A943F252D76">
                        <!-- --></a>
EXP-00071: QUERY parameter not compatible with Direct Path export
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
You specified a value for the QUERY parameter for a direct path export. The QUERY parameter cannot be used with a direct path export.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Re-issue the export command with DIRECT=N or omit the DIRECT parameter from the command line.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-19CA13B6-A83F-476C-8311-2980E8DE9071">
                        <!-- --></a>
EXP-00072: error closing export file <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An error occurred while trying to close the export file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-E9E3F74E-6E1D-448A-AB27-C4AE38FD410D">
                        <!-- --></a>
EXP-00073: dump file size too small
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
You specified either the FILESIZE parameter or the VOLSIZE parameter (if your platform supports it), and the value of the parameter is too small to hold the header information for the export file, plus any data.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Increase the value of the FILESIZE or VOLSIZE parameter.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-1883B224-7B84-4D22-AD6B-A290B14D67F1">
                        <!-- --></a>
EXP-00074: rounding VOLSIZE down, new value is <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The VOLSIZE parameter must be a multiple of the RECORDLENGTH, but the value you specified for VOLSIZE does not meet this requirement.  The value of VOLSIZE has been rounded down to be a multiple of the RECORDLENGTH used for the dump file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
No action is required.  You can adjust the VOLSIZE or RECORDLENGTH parameter to avoid this message.  When importing this file, you must specify the VOLSIZE value reported by this message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-2194B34B-2BFD-465D-A72F-0620BFE59545">
                        <!-- --></a>
EXP-00075: rounding FILESIZE down, new value is <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The FILESIZE parameter must be a multiple of the RECORDLENGTH, but the value you specified for FILESIZE does not meet this requirement.  The value of FILESIZE has been rounded down to be a multiple of the RECORDLENGTH used for the dump file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
No action is required.  You can adjust the FILESIZE or RECORDLENGTH parameter to avoid this message.  When importing this file, you must specify the FILESIZE value reported by this message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-94DA3D0B-A84A-4927-A958-063CEEC3E35A">
                        <!-- --></a>
EXP-00076: multiple devices specified for tape output
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
You specified multiple file names when doing an export to a tape device.  EXPORT uses the same device for writing all files, of the number of tape volumes required.  For this reason, export will accept only one value for the FILE parameter when writing to tape.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Reenter the EXPORT command, but specify only one tape device in the FILE parameter.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-9A952012-50AD-4F8F-B1A5-4E83747F29C4">
                        <!-- --></a>
EXP-00077: multiple output files specified for unbounded export file
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
You specified multiple file names when doing an export and you also specified a value of 0 for the FILESIZE parameter.  Note that 0 is the value used if FILESIZE is not specified on the command line. Since a value of 0 for FILESIZE means that only one file will be written and there is no size limit for that file, the other files you specified in the FILE parameter can never be used.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If you intended to write multiple files, respecify the command but use the FILESIZE to specify the maximum number of bytes that EXPORT should write to each file.  If you intended to write only one file with no limits on it's size, reissue the EXPORT command but specify only one file name for the FILE parameter.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-82C52496-62F2-4C1E-BA5E-E1D2C8040E1D">
                        <!-- --></a>
EXP-00078: Error exporting metadata for index <span class="variable" translate="no">string</span>. Index creation will be skipped
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Domain indexes export private metadata via anonymous PL/SQL blocks prior to the CREATE INDEX statement. Export does this by calling the ODCIIndexGetMetadata method on the implementation type associated with the index. A problem occurred inside this routine. Because the metadata is considered an integral part of the index, the CREATE INDEX statement was not written to the dump file.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact the developer of the index's implementation type. If this is an Oracle-supplied index (perhaps via a data cartridge), contact Oracle Worldwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-E1E4BF85-4DD9-48C3-8FCC-42E871B8A072">
                        <!-- --></a>
EXP-00079: Data in table "<span class="variable" translate="no">string</span>" is protected. Conventional path may only be exporting partial table.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
User without the execute privilege on DBMS_RLS, the access control package, tries to export a table that has access control. Since table owner is also subjected to access control, the owner may not be able to export all rows in the table, but only the ones he can see.  Also, to preserve integrity of the table, user exporting the table should have enough privilege to recreate the table with the security policies at import time. Therefore, it is strongly recommended the database administrator should be handling exporting of this table. Granting the table owner execute privilege would also satisfy this security check, though it might have other security implications. If the table does not have objects, can use direct mode.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask the database administrator to export/import this table/view.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-4D14B128-599D-4F6D-BF1D-59926D5A13BD">
                        <!-- --></a>
EXP-00080: Data in table "<span class="variable" translate="no">string</span>" is protected. Using conventional mode.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
User without the execute privilege on DBMS_RLS, the access control package, tries to direct export a table that has access control enabled. Using conventional export mode instead. Note that because of access control, only a partial table may be exported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask the database administrator to export/import this table/view.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-05B2E388-83FB-46D8-BE45-97052E88DB94">
                        <!-- --></a>
EXP-00081: Exporting access control for table/view "<span class="variable" translate="no">string</span>" as non-DBA.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A non-DBA user tries to export table/view and the associated fine grain access control policies.  The user may not have enough privilege to recreate the access control policies when importing the table/view. And such an event may cause inconsistency in the security model of the table/view.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ask the database administrator to export/import this table/view.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-09A80A4B-A755-4DB1-A124-26AEB8E6FA90">
                        <!-- --></a>
EXP-00082: Invalid function name passed to procedural object support: <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Internal inconsistency error: The listed function is not a method on export's procedural object interface specification.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-F84948CB-CCB4-4932-A47D-45005AAF4D01">
                        <!-- --></a>
EXP-00083: The previous problem occurred when calling <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The listed package provides export/import support for procedural actions. The previously listed error occurred while calling the specified function.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support. Most packages are supplied by Oracle internal cartridge or server development groups. The package name will help Support determine the correct owner of the problem.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-BDD053BF-348E-4E8C-8532-9A44D621D19D">
                        <!-- --></a>
EXP-00084: Unexpected DbmsJava error <span class="variable" translate="no">number</span> at step <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The error was returned from a call to a DbmsJava procedure.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Record the accompanying messages and report this as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-008644E2-437D-48B4-BC0B-86F038B47FF2">
                        <!-- --></a>
EXP-00085: The previous problem occurred when calling <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> for object <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The listed package provides export/import support for procedural objects, i.e, those whose DDL is supplied by stored procedures. The previously listed error occurred while calling the specified function.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support. Most packages are supplied by Oracle internal cartridge or server development groups. The package name will help Support determine the correct owner of the problem.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6AB82FCE-144C-4DB5-B1A5-00B976AD1320">
                        <!-- --></a>
EXP-00086: Primary key REFs in table "<span class="variable" translate="no">string</span>"may not be valid on import
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified table contains primary key REFs which may not be valid in the import database.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Do not use Export/Import to move Primary key REFs between databases having differing character sets.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-D60D33E1-D346-4D3F-8F54-76E847AF5F69">
                        <!-- --></a>
EXP-00087: Problem with internal hash table of schema/table names
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Most likely a problem with allocating memory for the hash table entries.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-0AD5AE6F-46F8-4AA6-8DDD-E3DF6045AEEC">
                        <!-- --></a>
EXP-00089: invalid FILE_FORMAT specification
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The FILE_FORMAT specification did not contain an instance of "%s".  This wildcard string must be present.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Correct the error and reenter the EXPORT command.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-73DEA35F-F045-4CD9-9547-3099DA7F9E8E">
                        <!-- --></a>
EXP-00090: cannot pin type "<span class="variable" translate="no">string</span>"."<span class="variable" translate="no">string</span>"
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export was unable to pin the specified type in the object cache. This is typically caused because a type could not be made valid (for example because of authorization violations in accessing subtypes).

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Fix the problem with the offending type until the type can be successfully compiled.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-28FA9484-582F-413C-BF1F-41DD069393F1">
                        <!-- --></a>
EXP-00091: Exporting questionable statistics.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export was able export statistics, but the statistics may not be usuable. The statistics are questionable because one or more of the following happened during export: a row error occurred, client character set or NCHARSET does not match with the server, a query clause was specified on export, only certain partitions or subpartitions were exported, or a fatal error occurred while processing a table.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
To export non-questionable statistics, change the client character set or NCHARSET to match the server, export with no query clause, export complete tables. If desired, import parameters can be supplied so that only non-questionable statistics will be imported, and all questionable statistics will be recalculated.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-BD771C01-3400-4538-96BC-9A64B58E3314">
                        <!-- --></a>
EXP-00092: Unable to set NLS_NUMERIC_CHARACTERS to required defaults.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export was unable to set NLS_NUMERIC_CHARACTERS to '.,'

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Record the accompanying messages and report this as an Export internal error to customer support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-CE1B8080-8C4C-48B0-ADEF-D71E73CABCF9">
                        <!-- --></a>
EXP-00093: Could not convert to server character set's handle
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Internal error.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Worldwide support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-F82D7427-9167-4D22-BDE0-581B69012023">
                        <!-- --></a>
EXP-00094: Could not convert to server national character set's handle
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Internal error.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Worldwide support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-0E81C3D9-EAA4-4BEE-9A2C-FA927FF3247F">
                        <!-- --></a>
EXP-00095: Flashback_time and Flashback_scn are not compatible
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Both flashback_time and flashback_scn paramerers were specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Reissue command with only one flashback parameter.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-DCC345F7-250F-4D1A-986A-58A37F49F5E5">
                        <!-- --></a>
EXP-00097: Object type "<span class="variable" translate="no">string</span>"."<span class="variable" translate="no">string</span>" is not in a valid state, type will not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The object type's status is invalid which may be caused by a dependant type's modification (or removal) without cascading the change.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
The type must be recompiled using ALTER TYPE COMPILE.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-AC54DD09-F0F1-4AF7-9A06-0C0ABA5D327E">
                        <!-- --></a>
EXP-00098: Data in table has not been upgraded, table will not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export is attempting to process a table containing references to a type which has evolved.  In order for Export to process the table successfully, all data within each table must be upgraded to the latest revision of each referenced type.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
The table must be updated using ALTER TABLE UPGRADE DATA.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-83076DF3-025B-485A-97E8-02519ABCA022">
                        <!-- --></a>
EXP-00099: Table "<span class="variable" translate="no">string</span>"."<span class="variable" translate="no">string</span>" is not in a valid state, table will not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A table or one of its dependant types has modified without cascading the change.  This left the table in an INVALID state.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
The table must be updated using ALTER TABLE UPDATE.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-93323D69-0CF1-48BA-92AE-CD88B0BB57DE">
                        <!-- --></a>
EXP-00100: error converting an object type's hashcode to characters
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An invalid length of an object type identifier prevented its conversion.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-DC8EA66E-C639-4C49-BEB2-3B6471295F2F">
                        <!-- --></a>
EXP-00101: Version 1 extensible index "<span class="variable" translate="no">string</span>"."<span class="variable" translate="no">string</span>" can not be included in Transportable Tablespace Export
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Transporable Tablespace extensible indexes must be at least version 2.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Upgrade extensibile index implementation to version 2 specifications.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-E070AED4-1FAB-4BBF-858D-B56ABF3202F5">
                        <!-- --></a>
EXP-00102: Resumable parameters ignored -- current session not resumable
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Current session is not resumable.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Must specify RESUMABLE=Y to enable resumable session in order for the RESUMABLE_NAME and RESUMABLE_TIMEOUT parameters to take effect.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-66EF8303-D9D8-429E-AAAD-35F8CE1D2F60">
                        <!-- --></a>
EXP-00103: The FLASHBACK_TIME parameter was invalid
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
FLASHBACK_TIME did not contain a valid timestamp or an expression that yields a valid timestamp.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a timestamp value in the format of YYYY-MM-DD HH24:MI:SS or an expression that evaluates to a valid timestamp.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-282CB012-1D83-4CFB-8788-44480C9A2B2E">
                        <!-- --></a>
EXP-00104: datatype (<span class="variable" translate="no">string</span>) of column <span class="variable" translate="no">string</span> in table <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> is not supported, table will not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The column is of a datatype which does not contain the required support.  The table will not be exported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the Data Pump version of Export to export this table.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-87401197-49FD-4878-8FD2-E06D5A1120EE">
                        <!-- --></a>
EXP-00105: parameter <span class="variable" translate="no">string</span> is not supported for this user
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The user attempted to specify either CONSISTENT or OBJECT_CONSISTENT when connected as sysdba.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If a consistent export is needed, then connect as another user.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6194CE46-CE08-481D-84C8-F1F25EFF5AAF">
                        <!-- --></a>
EXP-00106: Invalid Database Link Passwords
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Invalid Encoded Password for Database Link

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Please drop the Database Link and recreate it after import.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-007B7AA0-A5FC-4DA1-A33B-5A05D8CA517C">
                        <!-- --></a>
EXP-00107: Feature (<span class="variable" translate="no">string</span>) of column <span class="variable" translate="no">string</span> in table <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> is not supported. The table will not be exported.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export does not contain the required support for this feature. The table will not be exported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the Data Pump version of Export to export this table.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-23C5F765-9042-41A2-B3D6-F84119468B3A">
                        <!-- --></a>
EXP-00108: NULL lob fetched
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Internal error

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-49465702-69B1-41A8-9AC6-9FE1F1A7329D">
                        <!-- --></a>
EXP-00109: XSL delimiter not found
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Internal error

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Worldwide Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-FF7AC37C-39E3-48EA-916C-A3B74633A3CD">
                        <!-- --></a>
EXP-00110: Tablespace <span class="variable" translate="no">string</span> is encrypted and will not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Encrypted Tablespace feature is not supported by classic export

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use DATAPUMP Utility to export this tablespace.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-D7511116-C7EA-41C7-8F77-A4A542710709">
                        <!-- --></a>
EXP-00111: Table <span class="variable" translate="no">string</span> resides in an Encrypted Tablespace <span class="variable" translate="no">string</span> and will not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Encrypted Tablespace feature is not supported by classic export

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use DATAPUMP Utility to export this table.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-52E10468-8012-40BF-BB94-B5AE90C831B9">
                        <!-- --></a>
EXP-00112: Index <span class="variable" translate="no">string</span> is of XMLType and could not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export does not contain the required support for this feature. The index could not be exported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use Oracle Data Pump Utility to export this index.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-EFE17DB5-0D1F-4A59-B1D2-5D9C47A6F065">
                        <!-- --></a>
EXP-00113: Feature <span class="variable" translate="no">string</span> is unsupported. <span class="variable" translate="no">string</span> <span class="variable" translate="no">string</span>.<span class="variable" translate="no">string</span> could not be exported
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Export does not contain the required support for this feature.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use Oracle Data Pump Utility

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-DF48625B-F309-41FF-8414-B31D39526C3B__GUID-6C5B816B-E987-485C-A7EF-D8EA7D309651">
                        <!-- --></a>
EXP-00114: Length of <span class="variable" translate="no">string</span> <span class="variable" translate="no">string</span> is exceeding the maximum limit
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Provided length was more than the maximum limit allowed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check the input value and provide the correct value.

                     </p>
                     
                  </dd>
               </dl>
            </div>
         </div>
      </article>
   </body>
</html><html id='13052.tuning-program-global-area.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Tuning the Program Global Area</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Performance Tuning Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Performance Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00">
      <meta name="dcterms.title" content="Database Performance Tuning Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96347-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="tuning-result-cache.html" title="Previous" type="text/html">
      <link rel="next" href="part-IV-managing-system-resources.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="tuning-result-cache.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-IV-managing-system-resources.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Performance Tuning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-tuning-database-memory.html" property="item" typeof="WebPage"><span property="name">Tuning Database Memory </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Tuning the Program Global Area </li>
            </ol>
            <a id="GUID-FE1954FB-FAC9-4302-896E-6F47EB6C8A73" name="GUID-FE1954FB-FAC9-4302-896E-6F47EB6C8A73"></a><a id="TGDBA346"></a>
            
            <h2 id="TGDBA-GUID-FE1954FB-FAC9-4302-896E-6F47EB6C8A73" class="sect2"><span class="enumeration_chapter">16 </span>Tuning the Program Global Area 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to tune the Program Global Area (PGA). If you are using automatic memory management to manage the database memory on your system, then you do not need to manually tune the PGA as described in this chapter.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="tuning-program-global-area.html#GUID-C698E2D4-495D-4DD7-AB7F-916F9C6EE8D1">About the Program Global Area</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-program-global-area.html#GUID-251F5619-7D47-492F-8B9B-C2BA6BA3BA66">Sizing the Program Global Area Using Automatic Memory Management</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-program-global-area.html#GUID-C1796FFD-5A7E-4FA7-945B-4B6CE374091A">Sizing the Program Global Area Using a Hard Limit</a></p>
                  </li>
               </ul>
            </div><a id="TGDBA347"></a><div class="props_rev_3"><a id="GUID-C698E2D4-495D-4DD7-AB7F-916F9C6EE8D1" name="GUID-C698E2D4-495D-4DD7-AB7F-916F9C6EE8D1"></a><h3 id="TGDBA-GUID-C698E2D4-495D-4DD7-AB7F-916F9C6EE8D1" class="sect3"><span class="enumeration_section">16.1 </span>About the Program Global Area
               </h3>
               <div>
                  <p>The Program Global Area (PGA) is a private memory region that contains the data and control information for a server process. Only a server process can access the PGA. Oracle Database reads and writes information in the PGA on behalf of the server process. An example of such information is the run-time area of a cursor. Each time a cursor is executed, a new run-time area is created for that cursor in the PGA memory region of the server process executing that cursor.</p>
                  <div class="infoboxnote" id="GUID-C698E2D4-495D-4DD7-AB7F-916F9C6EE8D1__GUID-40D90668-E3DC-4E57-8B68-198A7C0A5593">
                     <p class="notep1">Note:</p>
                     <p>Part of the run-time area can be located in the Shared Global Area (SGA) when using shared servers.</p>
                  </div>
                  <p>For complex queries (such as decision support queries), a big portion of the run-time area is dedicated to work areas allocated by memory intensive operators, including:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Sort-based operators, such as <code class="codeph">ORDER</code> <code class="codeph">BY</code>, <code class="codeph">GROUP</code> <code class="codeph">BY</code>, <code class="codeph">ROLLUP</code>, and window functions
                        </p>
                     </li>
                     <li>
                        <p>Hash-join</p>
                     </li>
                     <li>
                        <p>Bitmap merge</p>
                     </li>
                     <li>
                        <p>Bitmap create</p>
                     </li>
                     <li>
                        <p>Write buffers used by bulk load operations</p>
                     </li>
                  </ul>
                  <p>A sort operator uses a work area (the sort area) to perform the in-memory sorting of a set of rows. Similarly, a hash-join operator uses a work area (the hash area) to build a hash table from its left input.</p>
               </div><a id="TGDBA469"></a><div class="props_rev_3"><a id="GUID-41CAC946-617F-4708-A3C2-EFF28CCD0C5F" name="GUID-41CAC946-617F-4708-A3C2-EFF28CCD0C5F"></a><h4 id="TGDBA-GUID-41CAC946-617F-4708-A3C2-EFF28CCD0C5F" class="sect4"><span class="enumeration_section">16.1.1 </span>Work Area Sizes
                  </h4>
                  <div>
                     <p>Oracle Database enables you to control and tune the sizes of <a id="d49029e207" class="indexterm-anchor"></a><a id="d49029e211" class="indexterm-anchor"></a>work areas. Generally, bigger work areas can significantly improve the performance of a particular operator at the cost of higher memory consumption. The available work area sizes include:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Optimal</p>
                           <p>Optimal size is when the size of a work area is large enough that it can accommodate the input data and auxiliary memory structures allocated by its associated SQL operator. This is the ideal size for the work area.</p>
                        </li>
                        <li>
                           <p>One-pass</p>
                           <p>One-pass size is when the size of the work area is below optimal size and an extra pass is performed over part of the input data. With one-pass size, the response time is increased.</p>
                        </li>
                        <li>
                           <p>Multi-pass</p>
                           <p>Multi-pass size is when the size of the work area is below the one-pass threshold and multiple passes over the input data are needed. With multi-pass size, the response time is dramatically increased because the size of the work area is too small compared to the input data size.</p>
                        </li>
                     </ul>
                     <p>For example, a serial sort operation that must sort 10 GB of data requires a little more than 10 GB to run as optimal size and at least 40 MB to run as one-pass size. If the work area is less than 40 MB, then the sort operation must perform several passes over the input data.</p>
                     <p>When sizing the work area, the goal is to have most work areas running with optimal size (more than 90%, or even 100% for pure OLTP systems), and only a small number of them running with one-pass size (less than 10%). Multi-pass executions should be avoided for the following reasons:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Multi-pass executions can severely degrade performance.</p>
                           <p>A high number of multi-pass work areas has an exponentially adverse effect on the response time of its associated SQL operator.</p>
                        </li>
                        <li>
                           <p>Running one-pass executions does not require a large amount of memory.</p>
                           <p>Only 22 MB is required to sort 1 GB of data in one-pass size.</p>
                        </li>
                     </ul>
                     <p>Even for DSS systems running large sorts and hash-joins, the memory requirement for one-pass executions is relatively small. A system configured with a reasonable amount of PGA memory should not need to perform multiple passes over the input data.</p>
                  </div>
               </div>
            </div><a id="TGDBA363"></a><div class="props_rev_3"><a id="GUID-251F5619-7D47-492F-8B9B-C2BA6BA3BA66" name="GUID-251F5619-7D47-492F-8B9B-C2BA6BA3BA66"></a><h3 id="TGDBA-GUID-251F5619-7D47-492F-8B9B-C2BA6BA3BA66" class="sect3"><span class="enumeration_section">16.2 </span>Sizing the Program Global Area Using Automatic Memory Management
               </h3>
               <div>
                  <p>Automatic PGA memory management simplifies and improves the way PGA memory is allocated. By default, PGA memory management is enabled. In this mode, Oracle Database automatically sizes the PGA by dynamically adjusting the portion of the PGA memory dedicated to work areas, based on 20% of the SGA memory size. The minimum value is 10MB.</p>
                  <div class="infoboxnote" id="GUID-251F5619-7D47-492F-8B9B-C2BA6BA3BA66__GUID-63A3F267-DED8-4F6D-A1E8-4B6D75E76882">
                     <p class="notep1">Note:</p>
                     <p>For backward compatibility, automatic PGA memory management can be disabled by setting the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter to 0. When automatic PGA memory management is disabled, the maximum size of a work area can be sized with the associated <code class="codeph">_AREA_SIZE</code> parameter, such as the <code class="codeph">SORT_AREA_SIZE</code> initialization parameter.
                     </p>
                  </div>
                  <p>This section describes how to size the PGA using automatic PGA memory management and contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="tuning-program-global-area.html#GUID-6D7A1290-77B1-4388-BA84-73B8594DCF44">Configuring Automatic PGA Memory Management</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-program-global-area.html#GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD">Setting the Initial Value for PGA_AGGREGATE_TARGET</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-program-global-area.html#GUID-903DB64B-3019-4272-8812-4F00A05371FB">Monitoring Automatic PGA Memory Management</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-program-global-area.html#GUID-C8C6D009-CF38-4996-AD0E-D97CE0CECE3D">Tuning PGA_AGGREGATE_TARGET</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA470"></a><div class="props_rev_3"><a id="GUID-6D7A1290-77B1-4388-BA84-73B8594DCF44" name="GUID-6D7A1290-77B1-4388-BA84-73B8594DCF44"></a><h4 id="TGDBA-GUID-6D7A1290-77B1-4388-BA84-73B8594DCF44" class="sect4"><span class="enumeration_section">16.2.1 </span>Configuring Automatic PGA Memory Management
                  </h4>
                  <div>
                     <div class="section">
                        <p>When running Oracle Database in automatic PGA memory management mode, sizing of work areas for all sessions is automatic, and the <code class="codeph">*_AREA_SIZE</code> parameters are ignored by all sessions running in this mode. Oracle Database automatically derives the total amount of PGA memory available to active work areas from the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter. The amount of PGA memory is set to the value of <code class="codeph">PGA_AGGREGATE_TARGET</code> minus the amount of PGA memory allocated to other components of the system (such as PGA memory allocated by sessions). Oracle Database then assigns the resulting PGA memory to individual active work areas based on their specific memory requirements.
                        </p>
                        <p>Oracle Database attempts to adhere to the <code class="codeph">PGA_AGGREGATE_TARGET</code> value set by the DBA by dynamically controlling the amount of PGA memory allotted to work areas. To accomplish this, Oracle Database first tries to maximize the number of optimal work areas for all memory-intensive SQL operations. The rest of the work areas are executed in one-pass mode, unless the PGA memory limit set by the DBA (using the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter) is so low that multi-pass execution is required to reduce memory consumption to honor the PGA target limit.
                        </p>
                        <p>When configuring a new database instance, it can be difficult to determine the appropriate setting for <code class="codeph">PGA_AGGREGATE_TARGET</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D7A1290-77B1-4388-BA84-73B8594DCF44__GUID-8405E02C-0202-4078-943E-D694E85F4A92">To configure automatic PGA memory management:</p>
                        <ol>
                           <li>
                              <p>Make an initial estimate for the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD">Setting the Initial Value for PGA_AGGREGATE_TARGET</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Run a representative workload on the database instance and monitor its performance, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-903DB64B-3019-4272-8812-4F00A05371FB">Monitoring Automatic PGA Memory Management</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Tune the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter using Oracle PGA advice statistics, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-C8C6D009-CF38-4996-AD0E-D97CE0CECE3D">Tuning PGA_AGGREGATE_TARGET</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-6D7A1290-77B1-4388-BA84-73B8594DCF44__GUID-1253D2F9-042A-4B72-A7D5-8D238D964AD8">
                           <p class="notep1">See Also:</p>
                           <p><a href="../refrn/PGA_AGGREGATE_TARGET.html#REFRN-GUID-DEBBD3F7-9F6D-4AC8-952C-0E0B2E62312D" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA471"></a><div class="props_rev_3"><a id="GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD" name="GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD"></a><h4 id="TGDBA-GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD" class="sect4"><span class="enumeration_section">16.2.2 </span>Setting the Initial Value for PGA_AGGREGATE_TARGET
                  </h4>
                  <div>
                     <div class="section">
                        <p>Set the initial value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter based on the amount of available memory for the Oracle database instance. This value can then be tuned and dynamically modified at the instance level. By default, Oracle Database uses 20% of the SGA size for this value. However, this setting may be too low for a large DSS system.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD__GUID-7CA439E8-F6B9-495E-9C16-83E5F943C09A">To set the initial value for PGA_AGGREGATE_TARGET:</p>
                        <ol>
                           <li>
                              <p>Determine how much of the total physical memory to reserve for the operating system and other non-Oracle applications running on the same system.</p>
                              <p>For example, you might decide to reserve 20% of the total physical memory for the operating system and other non-Oracle applications, dedicating 80% of the memory on the system to the Oracle database instance.</p>
                           </li>
                           <li>
                              <p>Divide the remaining available memory between the SGA and the PGA:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>For OLTP systems, the PGA memory typically makes up a small fraction of the available memory, leaving most of the remaining memory for the SGA.</p>
                                    <p>Oracle recommends initially dedicating 20% of the available memory to the PGA, and 80% to the SGA. Therefore, the initial value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter for an OLTP system can be calculated as:
                                    </p>
                                    <p><code class="codeph">PGA_AGGREGATE_TARGET</code> = (<span class="italic"><code class="codeph">total_mem</code></span> * 0.8) * 0.2 where <span class="italic"><code class="codeph">total_mem</code></span> is the total amount of physical memory available on the system.
                                    </p>
                                 </li>
                                 <li>
                                    <p>For DSS systems running large, memory-intensive queries, PGA memory can typically use up to 70% of the available memory.</p>
                                    <p>Oracle recommends initially dedicating 50% of the available memory to the PGA, and 50% to the SGA. Therefore, the initial value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter for a DSS system can be calculated as:
                                    </p>
                                    <p><code class="codeph">PGA_AGGREGATE_TARGET</code> = (<span class="italic"><code class="codeph">total_mem</code></span> * 0.8) * 0.5 where <span class="italic"><code class="codeph">total_mem</code></span> is the total amount of physical memory available on the system.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>For example, if an Oracle database instance is configured to run on a system with 4 GB of physical memory, and if 80% (or 3.2 GB) of the memory is dedicated to the Oracle database instance, then initially set <code class="codeph">PGA_AGGREGATE_TARGET</code> to 640 MB for an OLTP system, or 1,600 MB for a DSS system.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA472"></a><div class="props_rev_3"><a id="GUID-903DB64B-3019-4272-8812-4F00A05371FB" name="GUID-903DB64B-3019-4272-8812-4F00A05371FB"></a><h4 id="TGDBA-GUID-903DB64B-3019-4272-8812-4F00A05371FB" class="sect4"><span class="enumeration_section">16.2.3 </span>Monitoring Automatic PGA Memory Management
                  </h4>
                  <div>
                     <p>Before starting the tuning process, run a representative workload on the database instance and monitor its performance. PGA statistics collected by Oracle Database enable you to determine if the maximum PGA size is under-configured or over-configured. Monitoring these statistics enables you to assess the performance of automatic PGA memory management and tune the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter accordingly.
                     </p>
                     <p>This section describes how to use performance views to monitor automatic PGA memory management and contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-892FC04E-16ED-435D-8DF3-8B74A379993B">Using the V$PGASTAT View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-9C657D3F-C162-46E1-AC5A-BFF7AAA3B3BA">Using the V$PROCESS View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-B837C371-5384-49B5-9C6D-12982A8DF3BD">Using the V$PROCESS_MEMORY View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811">Using the V$SQL_WORKAREA_HISTOGRAM View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-E2A9A057-60C3-4021-B6AC-8ECA79049CD5">Using the V$WORKAREA_ACTIVE View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-060EB774-7876-40E3-B690-03409346AA9A">Using the V$SQL_WORKAREA View</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA475"></a><a id="TGDBA474"></a><a id="TGDBA476"></a><a id="TGDBA473"></a><div class="props_rev_3"><a id="GUID-892FC04E-16ED-435D-8DF3-8B74A379993B" name="GUID-892FC04E-16ED-435D-8DF3-8B74A379993B"></a><h5 id="TGDBA-GUID-892FC04E-16ED-435D-8DF3-8B74A379993B" class="sect5"><span class="enumeration_section">16.2.3.1 </span>Using the V$PGASTAT View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$PGASTAT</code> view provides instance-level statistics about PGA memory usage and the automatic PGA memory manager.
                           </p>
                           <p>The following example shows a query of this view.</p><pre class="oac_no_warn" dir="ltr">SELECT *
  FROM V$PGASTAT;
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">NAME                                                          VALUE UNIT
-------------------------------------------------------- ---------- ------------
aggregate PGA target parameter                             41156608 bytes
aggregate PGA auto target                                  21823488 bytes
global memory bound                                         2057216 bytes
total PGA inuse                                            16899072 bytes
total PGA allocated                                        35014656 bytes
maximum PGA allocated                                     136795136 bytes
total freeable PGA memory                                    524288 bytes
PGA memory freed back to OS                              1713242112 bytes
total PGA used for auto workareas                                 0 bytes
maximum PGA used for auto workareas                         2383872 bytes
total PGA used for manual workareas                               0 bytes
maximum PGA used for manual workareas                       8470528 bytes
over allocation count                                           291
bytes processed                                          2124600320 bytes
extra bytes read/written                                   39949312 bytes
cache hit percentage                                          98.15 percent
</pre><p><a href="tuning-program-global-area.html#GUID-892FC04E-16ED-435D-8DF3-8B74A379993B__BGBFJJBJ" title="Describes the main statistics shown in the V$PGASTAT view.">Table 16-1</a> describes the main statistics shown in the <code class="codeph">V$PGASTAT</code> view.
                           </p>
                           <div class="tblformal" id="GUID-892FC04E-16ED-435D-8DF3-8B74A379993B__BGBFJJBJ">
                              <p class="titleintable">Table 16-1 Statistics in the V$PGASTAT View</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Statistics in the V$PGASTAT View" summary="Describes the main statistics shown in the V$PGASTAT view." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="31%" id="d49029e741">Statistic</th>
                                       <th align="left" valign="bottom" width="69%" id="d49029e744">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e749" headers="d49029e741 ">
                                          <p><code class="codeph">aggregate PGA target parameter</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e749 d49029e744 ">
                                          <p>This statistic shows the current value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter. The default value is 20% of the SGA size. Setting this parameter to 0 disables automatic PGA memory management.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e760" headers="d49029e741 ">
                                          <p><code class="codeph">aggregate PGA auto target</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e760 d49029e744 ">
                                          <p>This statistic shows the amount of PGA memory Oracle Database can use for work areas running in automatic mode. This amount is dynamically derived from the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter and the current work area workload. Hence, it is continuously adjusted by Oracle Database. If this value is small compared to the <code class="codeph">PGA_AGGREGATE_TARGET</code> value, then most of PGA memory is used by other system components (such as PL/SQL or Java) and little is left for work areas. Ensure that enough PGA memory remains for work areas running in automatic mode.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e774" headers="d49029e741 ">
                                          <p><code class="codeph">global memory bound</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e774 d49029e744 ">
                                          <p>This statistic shows the maximum size of a work area executed in automatic mode. This value is continuously adjusted by Oracle Database to reflect the current state of the work area workload. The global memory bound generally decreases when the number of active work areas increases in the system. As a rule of thumb, the value of the global bound should not decrease to less than 1 MB. If it does, increase the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e785" headers="d49029e741 ">
                                          <p><code class="codeph">total PGA allocated</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e785 d49029e744 ">
                                          <p>This statistic shows the current amount of PGA memory allocated by the database instance. Oracle Database tries to keep this number less than the <code class="codeph">PGA_AGGREGATE_TARGET</code> value. However, if the work area workload is increasing rapidly or the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter is set to a value that is too low, it is possible for the PGA allocated to exceed this value by a small percentage and for a short time.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e799" headers="d49029e741 ">
                                          <p><code class="codeph">total freeable PGA memory</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e799 d49029e744 ">
                                          <p>This statistic indicates how much allocated PGA memory can be freed.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e807" headers="d49029e741 ">
                                          <p><code class="codeph">total PGA used for auto workareas</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e807 d49029e744 ">
                                          <p>This statistic indicates how much PGA memory is currently consumed by work areas running in automatic mode. Use this number to determine how much memory is consumed by other consumers of the PGA memory (such as PL/SQL or Java):</p><pre class="oac_no_warn" dir="ltr">PGA other = total PGA allocated - total PGA used for auto workareas</pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e817" headers="d49029e741 ">
                                          <p><code class="codeph">over allocation count</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e817 d49029e744 ">
                                          <p>This statistic is cumulative from instance startup. Over-allocating PGA memory can happen if the <code class="codeph">PGA_AGGREGATE_TARGET</code> value is too small to accommodate the <code class="codeph">PGA other</code> component and the minimum memory required to execute the work area workload. In this case, Oracle Database cannot honor the <code class="codeph">PGA_AGGREGATE_TARGET</code> value, and extra PGA memory must be allocated. If over-allocation occurs, increase the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter using the information provided by the <code class="codeph">V$PGA_TARGET_ADVICE</code> view, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427">Using the V$PGA_TARGET_ADVICE View</a>"</span>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e846" headers="d49029e741 ">
                                          <p><code class="codeph">total bytes processed</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e846 d49029e744 ">
                                          <p>This statistic indicates the number of bytes processed by memory-intensive SQL operators since instance startup. For example, the number of bytes processed is the input size for a sort operation. This number is used to compute the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> metric.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e863" headers="d49029e741 ">
                                          <p><code class="codeph">extra bytes read/written</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e863 d49029e744 ">
                                          <p>When a work area cannot run optimally, one or more extra passes is performed over the input data. This statistic represents the number of bytes processed during these extra passes since instance startup. This number is also used to compute the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> metric. Ideally, it should be small compared to <code class="codeph">total bytes processed</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="31%" id="d49029e883" headers="d49029e741 ">
                                          <p><code class="codeph">cache hit percentage</code></p>
                                       </td>
                                       <td align="left" valign="top" width="69%" headers="d49029e883 d49029e744 ">
                                          <p>This metric is computed by Oracle Database to reflect the performance of the PGA memory component. It is cumulative from instance startup. A value of 100% means that all work areas executed by the system since instance startup are using an optimal amount of PGA memory. This is ideal but rarely happens except for pure OLTP systems. Typically, some work areas run one-pass or even multi-pass, depending on the overall size of the PGA memory. When a work area cannot run optimally, one or more extra passes are performed over the input data. This reduces the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> in proportion to the size of the input data and the number of extra passes performed. For an example of how this metric is calculated, see <a href="tuning-program-global-area.html#GUID-892FC04E-16ED-435D-8DF3-8B74A379993B__BGBECDGE">Example 16-1</a>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p><a href="tuning-program-global-area.html#GUID-892FC04E-16ED-435D-8DF3-8B74A379993B__BGBECDGE">Example 16-1</a> shows how extra passes affect the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> metric.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-892FC04E-16ED-435D-8DF3-8B74A379993B__BGBECDGE">
                           <p class="titleinexample">Example 16-1 Calculating Cache Hit Percentage</p>
                           <p>Four sort operations have been executed, three were small (1 MB of input data) and one was bigger (100 MB of input data). The total number of bytes processed (BP) by the four operations is 103 MB. If one of the small sorts runs one-pass, an extra pass over 1 MB of input data is performed. This 1 MB value is the number of <code class="codeph">extra</code> <code class="codeph">bytes</code> <code class="codeph">read/written</code>, or EBP.
                           </p>
                           <p>The <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> is calculated using the following formula:
                           </p><pre class="oac_no_warn" dir="ltr">BP x 100 / (BP + EBP)
</pre><p>In this example, the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> is 99.03%. This value reflects that only one of the small sort operations performed an extra pass, while all other sort operations were able to run in optimal size. Therefore, the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> is almost 100%, because the extra pass over 1 MB represents a tiny overhead. However, if the bigger sort operation runs in one-pass size, then the EBP is 100 MB instead of 1 MB, and the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> falls to 50.73%, because the extra pass has a much bigger impact.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA478"></a><a id="TGDBA477"></a><div class="props_rev_3"><a id="GUID-9C657D3F-C162-46E1-AC5A-BFF7AAA3B3BA" name="GUID-9C657D3F-C162-46E1-AC5A-BFF7AAA3B3BA"></a><h5 id="TGDBA-GUID-9C657D3F-C162-46E1-AC5A-BFF7AAA3B3BA" class="sect5"><span class="enumeration_section">16.2.3.2 </span>Using the V$PROCESS View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$PROCESS</code> view contains one row for each Oracle process connected to the database instance. Use the following columns in this view to monitor the PGA memory usage of these processes:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">PGA_USED_MEM</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">PGA_ALLOC_MEM</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">PGA_FREEABLE_MEM</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">PGA_MAX_MEM</code></p>
                              </li>
                           </ul>
                           <p><a href="tuning-program-global-area.html#GUID-9C657D3F-C162-46E1-AC5A-BFF7AAA3B3BA__BGBFGAGD">Example 16-2</a> shows a query of this view.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9C657D3F-C162-46E1-AC5A-BFF7AAA3B3BA__BGBFGAGD">
                           <p class="titleinexample">Example 16-2 Querying the V$PROCESS View</p><pre class="oac_no_warn" dir="ltr">SELECT program, pga_used_mem, pga_alloc_mem, pga_freeable_mem, pga_max_mem
  FROM V$PROCESS;
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">PROGRAM                 PGA_USED_MEM PGA_ALLOC_MEM PGA_FREEABLE_MEM PGA_MAX_MEM
----------------------- ------------ ------------- ---------------- -----------
PSEUDO                             0             0                0           0
oracle@examp1690 (PMON)       314540        685860                0      685860
oracle@examp1690 (MMAN)       313992        685860                0      685860
oracle@examp1690 (DBW0)       696720       1063112                0     1063112
oracle@examp1690 (LGWR)     10835108      22967940                0    22967940
oracle@examp1690 (CKPT)       352716        710376                0      710376
oracle@examp1690 (SMON)       541508        948004                0     1603364
oracle@examp1690 (RECO)       323688        685860                0      816932
oracle@examp1690 (q001)       233508        585128                0      585128
oracle@examp1690 (QMNC)       314332        685860                0      685860
oracle@examp1690 (MMON)       885756       1996548           393216     1996548
oracle@examp1690 (MMNL)       315068        685860                0      685860
oracle@examp1690 (q000)       330872        716200            65536      716200
oracle@examp1690 (CJQ0)       533476       1013540                0     1144612
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA479"></a><div class="props_rev_3"><a id="GUID-B837C371-5384-49B5-9C6D-12982A8DF3BD" name="GUID-B837C371-5384-49B5-9C6D-12982A8DF3BD"></a><h5 id="TGDBA-GUID-B837C371-5384-49B5-9C6D-12982A8DF3BD" class="sect5"><span class="enumeration_section">16.2.3.3 </span>Using the V$PROCESS_MEMORY View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$PROCESS_MEMORY</code> view displays dynamic PGA memory usage by named component categories for each Oracle process. This view contains up to six rows for each Oracle process, one row for:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Each named component category:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Java</p>
                                    </li>
                                    <li>
                                       <p>PL/SQL</p>
                                    </li>
                                    <li>
                                       <p>OLAP</p>
                                    </li>
                                    <li>
                                       <p>SQL</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Freeable</p>
                                 <p>Memory that has been allocated to the process by the operating system, but not to a specific category</p>
                              </li>
                              <li>
                                 <p>Other</p>
                                 <p>Memory that has been allocated to a category, but not to a named category</p>
                              </li>
                           </ul>
                           <p>Use the following columns in this view to dynamically monitor the PGA memory usage of Oracle processes for each of the six categories:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">CATEGORY</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALLOCATED</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">USED</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">MAX_ALLOCATED</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-B837C371-5384-49B5-9C6D-12982A8DF3BD__GUID-7AE26004-F418-47DC-B893-F928457DD4BF">
                              <p class="notep1">Note:</p>
                              <p> The <code class="codeph">V$PROCESS_MEMORY_DETAIL</code> view displays dynamic PGA memory usage for the Oracle processes that exceed 500 MB of PGA usage. The <code class="codeph">V$PROCESS_MEMORY_DETAIL</code> view is available starting with Oracle Database 12<span class="italic">c</span> Release 2.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-B837C371-5384-49B5-9C6D-12982A8DF3BD__GUID-518C46AB-7937-4422-B512-AE93AE46C1E0">
                              <p class="notep1">See Also:</p>
                              <p><span class="italic">Oracle Database Reference</span> for more information about the <a href="../refrn/V-PROCESS_MEMORY_DETAIL.html#REFRN-GUID-D16BB4C3-C11D-4EAD-BA06-F96A5450F8E8" target="_blank"><code class="codeph">V$PROCESS_MEMORY</code></a> and <a href="../refrn/V-PROCESS_MEMORY_DETAIL.html#REFRN-GUID-D16BB4C3-C11D-4EAD-BA06-F96A5450F8E8" target="_blank"><code class="codeph">V$PROCESS_MEMORY_DETAIL</code></a> views
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA481"></a><a id="TGDBA482"></a><a id="TGDBA480"></a><div class="props_rev_3"><a id="GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811" name="GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811"></a><h5 id="TGDBA-GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811" class="sect5"><span class="enumeration_section">16.2.3.4 </span>Using the V$SQL_WORKAREA_HISTOGRAM View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$SQL_WORKAREA_HISTOGRAM</code> view shows the number of work areas executed with optimal, one-pass, and multi-pass memory size since instance startup. Statistics in this view are divided into buckets. The buckets are defined by the optimal memory requirements of the work areas. Each bucket is identified by a range of optimal memory requirements, specified by the values in the <code class="codeph">LOW_OPTIMAL_SIZE</code> and <code class="codeph">HIGH_OPTIMAL_SIZE</code> columns.
                           </p>
                           <p>For example, a sort operation may require 3 MB of memory to run in optimal size (cached). Statistics about the work area used by this sort operation are placed in the bucket defined by:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">LOW_OPTIMAL_SIZE</code> = 2097152 (2 MB)
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">HIGH_OPTIMAL_SIZE</code> = 4194303 (4 MB minus 1 byte)
                                 </p>
                              </li>
                           </ul>
                           <p>Statistics are segmented by work area size, because the performance impact of running a work area in optimal, one-pass or multi-pass size depends mainly on the size of the work area. In this example, statistics about the work area are placed in this bucket because 3 MB lies within that range of optimal sizes.</p>
                           <p><a href="tuning-program-global-area.html#GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811__BGBBCAEC">Example 16-3</a> and <a href="tuning-program-global-area.html#GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811__BGBIFJDF">Example 16-4</a> show two methods for querying this view.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811__BGBBCAEC">
                           <p class="titleinexample">Example 16-3 Querying the V$SQL_WORKAREA_HISTOGRAM View: Non-Empty Buckets</p>
                           <p>The following query shows statistics for all non-empty buckets:</p><pre class="oac_no_warn" dir="ltr">SELECT low_optimal_size/1024 low_kb,
       (high_optimal_size+1)/1024 high_kb,
       optimal_executions, onepass_executions, multipasses_executions
  FROM V$SQL_WORKAREA_HISTOGRAM
 WHERE total_executions != 0;
</pre><p>The result of the query might look like the following: </p><pre class="oac_no_warn" dir="ltr">LOW_KB HIGH_KB OPTIMAL_EXECUTIONS ONEPASS_EXECUTIONS MULTIPASSES_EXECUTIONS
------ ------- ------------------ ------------------ ----------------------
     8      16             156255                  0                      0
    16      32                150                  0                      0
    32      64                 89                  0                      0
    64     128                 13                  0                      0
   128     256                 60                  0                      0
   256     512                  8                  0                      0
   512    1024                657                  0                      0
  1024    2048                551                 16                      0
  2048    4096                538                 26                      0
  4096    8192                243                 28                      0
  8192   16384                137                 35                      0
 16384   32768                 45                107                      0
 32768   65536                  0                153                      0
 65536  131072                  0                 73                      0
131072  262144                  0                 44                      0
262144  524288                  0                 22                      0
</pre><p>In this example, the output shows that—in the 1 MB to 2 MB bucket—551 work areas ran in optimal size, while 16 ran in one-pass size and none ran in multi-pass size. It also shows that all work areas under 1 MB were able to run in optimal size.</p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-58B5CC9D-1B5D-4A1E-8417-C6C18FD06811__BGBIFJDF">
                           <p class="titleinexample">Example 16-4 Querying the V$SQL_WORKAREA_HISTOGRAM View: Percent Optimal</p>
                           <p>The following query shows the percentage of times work areas are executed in optimal, one-pass, or multi-pass size since startup. This query only considers work areas of a certain size, with an optimal memory requirement of at least 64 KB:</p><pre class="oac_no_warn" dir="ltr">SELECT optimal_count, ROUND(optimal_count*100/total, 2) optimal_perc, 
       onepass_count, ROUND(onepass_count*100/total, 2) onepass_perc,
       multipass_count, ROUND(multipass_count*100/total, 2) multipass_perc
FROM
 (SELECT DECODE(SUM(total_executions), 0, 1, SUM(total_executions)) total,
         SUM(optimal_executions) optimal_count,
         SUM(onepass_executions) onepass_count,
         SUM(multipass_executions) multipass_count
    FROM V$SQL_WORKAREA_HISTOGRAM
   WHERE low_optimal_size &gt;= 64*1024);
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">OPTIMAL_COUNT OPTIMAL_PERC ONEPASS_COUNT ONEPASS_PERC MULTIPASS_COUNT MULTIPASS_PERC
------------- ------------ ------------- ------------ --------------- --------------
         2239        81.63           504        18.37               0              0</pre><p>In this example, the output shows that 81.63% of the work areas were able to run in optimal size. The remaining work areas (18.37%) ran in one-pass size and none of them ran in multi-pass size.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA484"></a><a id="TGDBA483"></a><div class="props_rev_3"><a id="GUID-E2A9A057-60C3-4021-B6AC-8ECA79049CD5" name="GUID-E2A9A057-60C3-4021-B6AC-8ECA79049CD5"></a><h5 id="TGDBA-GUID-E2A9A057-60C3-4021-B6AC-8ECA79049CD5" class="sect5"><span class="enumeration_section">16.2.3.5 </span>Using the V$WORKAREA_ACTIVE View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$WORKAREA_ACTIVE</code> view displays the work areas that are active (or executing) in the database instance. Small, active sort operations (under 64 KB) are excluded from this view. Use this view to precisely monitor the size of all active work areas and to determine whether these active work areas spill to a temporary segment.
                           </p>
                           <p><a href="tuning-program-global-area.html#GUID-E2A9A057-60C3-4021-B6AC-8ECA79049CD5__BGBDHADJ">Example 16-5</a> shows a query of this view.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E2A9A057-60C3-4021-B6AC-8ECA79049CD5__BGBDHADJ">
                           <p class="titleinexample">Example 16-5 Querying the V$WORKAREA_ACTIVE View</p><pre class="oac_no_warn" dir="ltr">SELECT TO_NUMBER(DECODE(sid, 65535, null, sid)) sid,
       operation_type operation,
       TRUNC(expected_size/1024) esize,
       TRUNC(actual_mem_used/1024) mem,
       TRUNC(max_mem_used/1024) "max mem",
       number_passes pass,
       TRUNC(TEMPSEG_SIZE/1024) tsize
  FROM V$SQL_WORKAREA_ACTIVE
 ORDER BY 1,2;
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">SID         OPERATION     ESIZE       MEM   MAX MEM  PASS   TSIZE
--- ----------------- --------- --------- --------- ----- -------
  8   GROUP BY (SORT)       315       280       904     0
  8         HASH-JOIN      2995      2377      2430     1   20000
  9   GROUP BY (SORT)     34300     22688     22688     0
 11         HASH-JOIN     18044     54482     54482     0
 12         HASH-JOIN     18044     11406     21406     1  120000
</pre><p>In this example, the output shows that:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Session 12 (<code class="codeph">SID</code> column) is running a hash-join operation (<code class="codeph">OPERATION</code> column) in a work area running in one-pass size (<code class="codeph">PASS</code> column)
                                 </p>
                              </li>
                              <li>
                                 <p>The maximum amount of memory that the PGA memory manager expects this hash-join operation to use is 18044 KB (<code class="codeph">ESIZE</code> column)
                                 </p>
                              </li>
                              <li>
                                 <p>The work area is currently using 11406 KB of memory (<code class="codeph">MEM</code> column)
                                 </p>
                              </li>
                              <li>
                                 <p>The work area used up to 21406 KB of PGA memory (<code class="codeph">MAX</code> <code class="codeph">MEM</code> column) in the past
                                 </p>
                              </li>
                              <li>
                                 <p>The work area spilled to a temporary segment of 120000 KB (<code class="codeph">TSIZE</code> column)
                                 </p>
                              </li>
                           </ul>
                           <p>When the work area is deallocated—or when the execution of its associated SQL operator is complete—it is automatically removed from this view.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA486"></a><a id="TGDBA485"></a><div class="props_rev_3"><a id="GUID-060EB774-7876-40E3-B690-03409346AA9A" name="GUID-060EB774-7876-40E3-B690-03409346AA9A"></a><h5 id="TGDBA-GUID-060EB774-7876-40E3-B690-03409346AA9A" class="sect5"><span class="enumeration_section">16.2.3.6 </span>Using the V$SQL_WORKAREA View
                     </h5>
                     <div>
                        <div class="section">
                           <p>Oracle Database maintains cumulative work area statistics for each loaded cursor whose execution plan uses one or more work areas. Each time a work area is deallocated, the <code class="codeph">V$SQL_WORKAREA</code> view is updated with execution statistics for that work area.
                           </p>
                           <p>You can join the <code class="codeph">V$SQL_WORKAREA</code> view with the <code class="codeph">V$SQL</code> view to relate a work area to a cursor, and with the <code class="codeph">V$SQL_PLAN</code> view to precisely determine which operator in the plan uses a work area.
                           </p>
                           <p><a href="tuning-program-global-area.html#GUID-060EB774-7876-40E3-B690-03409346AA9A__BGBGHEAG">Example 16-6</a> shows three queries of this view.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-060EB774-7876-40E3-B690-03409346AA9A__BGBGHEAG">
                           <p class="titleinexample">Example 16-6 Querying the V$SQL_WORKAREA View</p>
                           <p>The following query finds the top 10 work areas that require the most cache memory:</p><pre class="oac_no_warn" dir="ltr">SELECT *
FROM   (SELECT workarea_address, operation_type, policy, estimated_optimal_size
        FROM V$SQL_WORKAREA
        ORDER BY estimated_optimal_size DESC)
 WHERE ROWNUM &lt;= 10;
</pre><p>The following query finds the cursors with one or more work areas that have been executed in one or multiple passes:</p><pre class="oac_no_warn" dir="ltr">col sql_text format A80 wrap 
SELECT sql_text, sum(ONEPASS_EXECUTIONS) onepass_cnt,
       sum(MULTIPASSES_EXECUTIONS) mpass_cnt 
FROM V$SQL s, V$SQL_WORKAREA wa 
WHERE s.address = wa.address 
GROUP BY sql_text 
HAVING sum(ONEPASS_EXECUTIONS+MULTIPASSES_EXECUTIONS)&gt;0;
</pre><p>Using the hash value and address of a particular cursor, the following query displays the cursor execution plan, including information about the associated work areas:</p><pre class="oac_no_warn" dir="ltr">col "O/1/M" format a10
col name format a20
SELECT operation, options, object_name name, trunc(bytes/1024/1024) "input(MB)",
       TRUNC(last_memory_used/1024) last_mem,
       TRUNC(estimated_optimal_size/1024) optimal_mem, 
       TRUNC(estimated_onepass_size/1024) onepass_mem, 
       DECODE(optimal_executions, null, null, 
              optimal_executions||'/'||onepass_executions||'/'||
              multipasses_executions) "O/1/M"
  FROM V$SQL_PLAN p, V$SQL_WORKAREA w 
 WHERE p.address=w.address(+) 
   AND p.hash_value=w.hash_value(+) 
   AND p.id=w.operation_id(+) 
   AND p.address='88BB460C'
   AND p.hash_value=3738161960; 
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">OPERATION    OPTIONS  NAME     input(MB) LAST_MEM OPTIMAL_ME ONEPASS_ME O/1/M 
------------ -------- -------- --------- -------- ---------- ---------- ------
SELECT STATE                                                                  
HASH         GROUP BY               4582        8         16         16 16/0/0
HASH JOIN    SEMI                   4582     5976       5194       2187 16/0/0
TABLE ACCESS FULL     ORDERS          51                                      
TABLE ACCESS FUL      LINEITEM      1000                                      
</pre><p>You can get the address and hash value from the <code class="codeph">V$SQL</code> view by specifying a pattern in the query, as shown in the following query:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT address, hash_value 
  FROM V$SQL 
 WHERE sql_text LIKE '%<span class="italic">my_pattern</span>%';</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="TGDBA487"></a><div class="props_rev_3"><a id="GUID-C8C6D009-CF38-4996-AD0E-D97CE0CECE3D" name="GUID-C8C6D009-CF38-4996-AD0E-D97CE0CECE3D"></a><h4 id="TGDBA-GUID-C8C6D009-CF38-4996-AD0E-D97CE0CECE3D" class="sect4"><span class="enumeration_section">16.2.4 </span>Tuning PGA_AGGREGATE_TARGET
                  </h4>
                  <div>
                     <p>To help you tune the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter, Oracle Database provides two PGA performance advisory views: <code class="codeph">V$PGA_TARGET_ADVICE</code> and <code class="codeph">V$PGA_TARGET_ADVICE_HISTOGRAM</code>. By using these views, you do not need to use an empirical approach to tune the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter. Instead, you can use these views to predict how changing the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter will affect key PGA statistics.
                     </p>
                     <p>This section describes how to tune the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter and contains the following topics:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-326DEB90-E13C-4511-8731-F8A37C4D83D6">Enabling Automatic Generation of PGA Performance Advisory Views</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427">Using the V$PGA_TARGET_ADVICE View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-A2C80240-8436-42FC-B40F-B0358C955216">Using the V$PGA_TARGET_ADVICE_HISTOGRAM View</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-1E3F26AD-1F4A-4188-B775-53429DE27963">Using the V$SYSSTAT and V$SESSTAT Views</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-program-global-area.html#GUID-BC6CBF45-EA12-44AE-AB84-EE7DF7B09DE8">Tutorial: How to Tune PGA_AGGREGATE_TARGET</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA488"></a><div class="props_rev_3"><a id="GUID-326DEB90-E13C-4511-8731-F8A37C4D83D6" name="GUID-326DEB90-E13C-4511-8731-F8A37C4D83D6"></a><h5 id="TGDBA-GUID-326DEB90-E13C-4511-8731-F8A37C4D83D6" class="sect5"><span class="enumeration_section">16.2.4.1 </span>Enabling Automatic Generation of PGA Performance Advisory Views
                     </h5>
                     <div>
                        <div class="section">
                           <p>Oracle Database generates the <code class="codeph">V$PGA_TARGET_ADVICE</code> and <code class="codeph">V$PGA_TARGET_ADVICE_HISTOGRAM</code> views by recording the workload history, and then simulating this history for different values of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter. The values of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter are derived from fractions and multiples of its current value to assess possible higher and lower values. These values are used for the prediction and range from 10 MB to a maximum of 256 GB. The simulation process happens in the background and continuously updates the workload history to produce the simulation result. You can view the result at any time by querying these views.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-326DEB90-E13C-4511-8731-F8A37C4D83D6__GUID-13320479-F08F-43BE-867D-2469FA60F3A2">To enable automatic generation of PGA performance advice views:</p>
                           <ol>
                              <li>
                                 <p>Set the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter to enable automatic PGA memory management.
                                 </p>
                                 <p>Setting this parameter to 0 disables automatic PGA memory management and is not recommended. For information about setting this parameter, see <span class="q">"<a href="tuning-program-global-area.html#GUID-7A3C7085-C5F9-4E02-A57D-FDC491723FAD">Setting the Initial Value for PGA_AGGREGATE_TARGET</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">STATISTICS_LEVEL</code> parameter to <code class="codeph">TYPICAL</code> (the default) or <code class="codeph">ALL</code>.
                                 </p>
                                 <p>Setting this parameter to <code class="codeph">BASIC</code> disables generation of the PGA performance advice views and is not recommended.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-326DEB90-E13C-4511-8731-F8A37C4D83D6__GUID-C0FC7DFB-9733-4004-879D-13BE54D78073">
                              <p class="notep1">Note:</p>
                              <p>The contents of the PGA advice performance views are reset at instance startup or when the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter is changed.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA491"></a><a id="TGDBA490"></a><a id="TGDBA489"></a><div class="props_rev_3"><a id="GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427" name="GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427"></a><h5 id="TGDBA-GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427" class="sect5"><span class="enumeration_section">16.2.4.2 </span>Using the V$PGA_TARGET_ADVICE View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$PGA_TARGET_ADVICE</code> view predicts how changing the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter will affect the following statistics in the <code class="codeph">V$PGASTAT</code> view:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>cache hit percentage</p>
                              </li>
                              <li>
                                 <p>over allocation count</p>
                              </li>
                           </ul>
                           <p>The following example shows a query of this view.</p><pre class="oac_no_warn" dir="ltr">SELECT ROUND(pga_target_for_estimate/1024/1024) target_mb,
       estd_pga_cache_hit_percentage cache_hit_perc,
       estd_overalloc_count
  FROM V$PGA_TARGET_ADVICE;
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr"> TARGET_MB  CACHE_HIT_PERC  ESTD_OVERALLOC_COUNT
----------  --------------  --------------------
        63              23                   367
       125              24                    30
       250              30                     3
       375              39                     0
       500              58                     0
       600              59                     0
       700              59                     0
       800              60                     0
       900              60                     0
      1000              61                     0
      1500              67                     0
      2000              76                     0
      3000              83                     0
      4000              85                     0
</pre><p>The following figure illustrates how the result of this query can be plotted.</p>
                           <div class="figure" id="GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427__BGBCEIAF">
                              <p class="titleinfigure">Figure 16-1 Graphical Representation of V$PGA_TARGET_ADVICE</p><img src="img/figure_161_v_pga_target_advice.png" alt="Description of Figure 16-1 follows" title="Description of Figure 16-1 follows" longdesc="img_text/figure_161_v_pga_target_advice.html"><br><a href="img_text/figure_161_v_pga_target_advice.html">Description of "Figure 16-1 Graphical Representation of V$PGA_TARGET_ADVICE"</a></div>
                           <!-- class="figure" -->
                           <p>The curve shows how PGA <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> improves as the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter increases. The shaded zone in the graph represents the <code class="codeph">over</code> <code class="codeph">allocation</code> zone, where the value of the <code class="codeph">ESTD_OVERALLOCATION_COUNT</code> column is non-zero. This area indicates that the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter is too small to meet the minimum PGA memory requirements. If the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter is set within the <code class="codeph">over</code> <code class="codeph">allocation</code> zone, then the memory manager will over-allocate memory and the actual PGA memory consumed will exceed the limit that was set. It is therefore meaningless to set a value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter in that zone. In this particular example, the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter should be set to at least 375 MB.
                           </p>
                           <p>Beyond the <code class="codeph">over</code> <code class="codeph">allocation</code> zone, the value of the PGA <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> increases rapidly. This is due to an increase in the number of optimal or one-pass work areas and a decrease in the number of multi-pass executions. At some point, around 500 MB in this example, an inflection in the curve corresponds to the point where most (probably all) work areas can run in optimal or at least one-pass size. Beyond this point, the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> keeps increasing, though at a lower pace, up to the point where it starts to taper off and only slight improvement is achieved with increase in the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter. In the figure, this happens when <code class="codeph">PGA_AGGREGATE_TARGET</code> reaches 3 GB. At this point, the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> is 83% and only marginal improvement (by 2%) is achieved with one extra gigabyte of PGA memory. In this example, 3 GB is the optimal value for the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter.
                           </p>
                           <div class="infoboxnote" id="GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427__GUID-CC65C720-18FA-42A0-84BC-20B9111289FA">
                              <p class="notep1">Note:</p>
                              <p>Although the theoretical maximum for the PGA <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> is 100%, a practical limit exists on the maximum size of a work area that may prevent this theoretical maximum from being reached, even when the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter is further increased. This should happen only in large DSS systems where the optimal memory requirement is large and may cause the value of the <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> to taper off at a lower percentage, such as 90%.
                              </p>
                           </div>
                           <p>Ideally, the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter should be set to the optimal value, or at least to the maximum value possible in the region beyond the <code class="codeph">over</code> <code class="codeph">allocation</code> zone. As a rule of thumb, the PGA <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> should be higher than 60%, because at 60% the system is almost processing double the number of bytes it actually needs to process in an ideal situation. In this example, the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter should be set to at least 500 MB, and as close to 3 GB as possible. However, the correct setting for the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter depends on how much memory can be dedicated to the PGA component. Generally, adding PGA memory requires reducing memory for some SGA components—like the shared pool or buffer cache—because the overall memory dedicated to the database instance is often bound by the amount of physical memory available on the system. Therefore, any decisions to increase PGA memory must be taken in the larger context of the available memory in the system and the performance of the various SGA components (which you can monitor with shared pool advisory and buffer cache advisory statistics). If you cannot reduce memory from the SGA components, consider adding more physical memory to the system.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA493"></a><a id="TGDBA492"></a><div class="props_rev_3"><a id="GUID-A2C80240-8436-42FC-B40F-B0358C955216" name="GUID-A2C80240-8436-42FC-B40F-B0358C955216"></a><h5 id="TGDBA-GUID-A2C80240-8436-42FC-B40F-B0358C955216" class="sect5"><span class="enumeration_section">16.2.4.3 </span>Using the V$PGA_TARGET_ADVICE_HISTOGRAM View
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">V$PGA_TARGET_ADVICE_HISTOGRAM</code> view predicts how changing the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter will affect the statistics in the <code class="codeph">V$SQL_WORKAREA_HISTOGRAM</code> view. Use this view to display detailed information about the predicted number of optimal, one-pass, and multi-pass work area executions for the <code class="codeph">PGA_AGGREGATE_TARGET</code> values used for the prediction.
                           </p>
                           <p>The <code class="codeph">V$PGA_TARGET_ADVICE_HISTOGRAM</code> view is identical to the <code class="codeph">V$SQL_WORKAREA_HISTOGRAM</code> view, with two additional columns to represent the <code class="codeph">PGA_AGGREGATE_TARGET</code> values used for the prediction. Therefore, any query executed against the <code class="codeph">V$SQL_WORKAREA_HISTOGRAM</code> view can be used on this view, with an additional predicate to select the desired value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter.
                           </p>
                           <p><a href="tuning-program-global-area.html#GUID-A2C80240-8436-42FC-B40F-B0358C955216__BGBGCFAG">Example 16-7</a> shows a query of this view that displays the predicted content of the <code class="codeph">V$SQL_WORKAREA_HISTOGRAM</code> view for a value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter set to twice its current value.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-A2C80240-8436-42FC-B40F-B0358C955216__BGBGCFAG">
                           <p class="titleinexample">Example 16-7 Querying the V$PGA_TARGET_ADVICE_HISTOGRAM View</p><pre class="oac_no_warn" dir="ltr">SELECT low_optimal_size/1024 low_kb, (high_optimal_size+1)/1024 high_kb,
       estd_optimal_executions estd_opt_cnt,
       estd_onepass_executions estd_onepass_cnt,
       estd_multipasses_executions estd_mpass_cnt
  FROM V$PGA_TARGET_ADVICE_HISTOGRAM
 WHERE pga_target_factor = 2
   AND estd_total_executions != 0
 ORDER BY 1;
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">LOW_KB   HIGH_KB   ESTD_OPTIMAL_CNT   ESTD_ONEPASS_CNT   ESTD_MPASS_CNT
------   -------   ----------------   ----------------   --------------
     8        16             156107                  0                0
    16        32                148                  0                0
    32        64                 89                  0                0
    64       128                 13                  0                0
   128       256                 58                  0                0
   256       512                 10                  0                0
   512      1024                653                  0                0
  1024      2048                530                  0                0
  2048      4096                509                  0                0
  4096      8192                227                  0                0
  8192     16384                176                  0                0
 16384     32768                133                 16                0
 32768     65536                 66                103                0
 65536    131072                 15                 47                0
131072    262144                  0                 48                0
262144    524288                  0                 23                0
</pre><p>In this example, the output shows that increasing the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter by a factor of 2 will enable all work areas under 16 MB to execute in optimal size.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA495"></a><a id="TGDBA494"></a><div class="props_rev_3"><a id="GUID-1E3F26AD-1F4A-4188-B775-53429DE27963" name="GUID-1E3F26AD-1F4A-4188-B775-53429DE27963"></a><h5 id="TGDBA-GUID-1E3F26AD-1F4A-4188-B775-53429DE27963" class="sect5"><span class="enumeration_section">16.2.4.4 </span>Using the V$SYSSTAT and V$SESSTAT Views
                     </h5>
                     <div>
                        <div class="section">
                           <p>Statistics in the <code class="codeph">V$SYSSTAT</code> and <code class="codeph">V$SESSTAT</code> views show the total number of work areas executed with optimal, one-pass, and multi-pass memory size. These statistics are cumulative since the instance or the session was started.
                           </p>
                           <p><a href="tuning-program-global-area.html#GUID-1E3F26AD-1F4A-4188-B775-53429DE27963__BGBEEAEI">Example 16-8</a> shows a query of the <code class="codeph">V$SYSSTAT</code> view that displays the total number and the percentage of times work areas were executed in these three sizes since the instance was started:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1E3F26AD-1F4A-4188-B775-53429DE27963__BGBEEAEI">
                           <p class="titleinexample">Example 16-8 Querying the V$SYSSTAT View</p><pre class="oac_no_warn" dir="ltr">SELECT name profile, cnt, DECODE(total, 0, 0, ROUND(cnt*100/total)) percentage
  FROM (SELECT name, value cnt, (SUM(value) over ()) total
  FROM V$SYSSTAT
 WHERE name
  LIKE 'workarea exec%');
</pre><p>The output of this query might look like the following:</p><pre class="oac_no_warn" dir="ltr">PROFILE                                    CNT PERCENTAGE
----------------------------------- ---------- ----------
workarea executions - optimal             5395         95
workarea executions - onepass              284          5
workarea executions - multipass              0          0
</pre><p>In this example, the output shows that 5,395 work area executions (or 95%) were executed in optimal size, and 284 work area executions (or 5%) were executed in one-pass size.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA496"></a><div class="props_rev_3"><a id="GUID-BC6CBF45-EA12-44AE-AB84-EE7DF7B09DE8" name="GUID-BC6CBF45-EA12-44AE-AB84-EE7DF7B09DE8"></a><h5 id="TGDBA-GUID-BC6CBF45-EA12-44AE-AB84-EE7DF7B09DE8" class="sect5"><span class="enumeration_section">16.2.4.5 </span>Tutorial: How to Tune PGA_AGGREGATE_TARGET
                     </h5>
                     <div>
                        <div class="section">
                           <p>This tutorial provides a guideline for tuning the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter using the various views discussed in this chapter.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BC6CBF45-EA12-44AE-AB84-EE7DF7B09DE8__GUID-D8A4698C-EB6D-4566-82A0-A8ACD49D5A8B">To tune PGA_AGGREGATE_TARGET:</p>
                           <ol>
                              <li>
                                 <p>Set the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter to avoid memory over-allocation.
                                 </p>
                                 <p>Use the <code class="codeph">V$PGA_TARGET_ADVICE</code> view to ensure that the <code class="codeph">PGA_AGGREGATE_TARGET</code> value is not set within the over-allocation zone, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427">Using the V$PGA_TARGET_ADVICE View</a>"</span>. In Example 16&#x2013;8, the <code class="codeph">PGA_AGGREGATE_TARGET</code> value should be set to at least 375 MB.
                                 </p>
                              </li>
                              <li>
                                 <p>Maximize the PGA <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code>, based on response time requirements and memory constraints.
                                 </p>
                                 <p>Use the <code class="codeph">V$PGA_TARGET_ADVICE</code> view to determine the optimal value for the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter and set its value to the optimal value, or to the maximum value possible, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-4ED57621-B8D5-438C-A1CB-B5204A6C0427">Using the V$PGA_TARGET_ADVICE View</a>"</span>.
                                 </p>
                                 <p>Assume a limit <span class="italic">X</span> on the memory that can be allocated to PGA:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>If limit <span class="italic">X</span> is higher than the optimal value, set the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter to the optimal value.
                                       </p>
                                       <p>In Example 16&#x2013;8, if you have 10 GB to dedicate to PGA, set the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter to 3 GB and dedicate the remaining 7 GB to the SGA.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If limit <span class="italic">X</span> is less than the optimal value, set the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter to <span class="italic">X</span>.
                                       </p>
                                       <p>In Example 16&#x2013;8, if you have only 2 GB to dedicate to PGA, set the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter to 2 GB and accept a <code class="codeph">cache</code> <code class="codeph">hit</code> <code class="codeph">percentage</code> of 75%.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Verify that the new value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter will result in the desired number of optimal and one-pass work area executions and avoid any multi-pass work area executions.
                                 </p>
                                 <p>Use the <code class="codeph">V$PGA_TARGET_ADVICE_HISTOGRAM</code> view to predict the number of optimal, one-pass, and multi-pass work area executions, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-A2C80240-8436-42FC-B40F-B0358C955216">Using the V$PGA_TARGET_ADVICE_HISTOGRAM View</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>If more PGA memory is required, then increase PGA memory by either reducing memory from SGA components or adding more physical memory to the system.</p>
                              </li>
                              <li>
                                 <p>At any time, ensure the number of optimal, one-pass, and multi-pass work area executions matches predictions and tune the value of the <code class="codeph">PGA_AGGREGATE_TARGET</code> parameter if necessary.
                                 </p>
                                 <p>Use the <code class="codeph">V$SYSSTAT</code> and <code class="codeph">V$SESSTAT</code> views to verify the total number of work areas executed with optimal, one-pass, and multi-pass memory size since instance or session startup, respectively, as described in <span class="q">"<a href="tuning-program-global-area.html#GUID-1E3F26AD-1F4A-4188-B775-53429DE27963">Using the V$SYSSTAT and V$SESSTAT Views</a>"</span>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA95344"></a><div class="props_rev_3"><a id="GUID-C1796FFD-5A7E-4FA7-945B-4B6CE374091A" name="GUID-C1796FFD-5A7E-4FA7-945B-4B6CE374091A"></a><h3 id="TGDBA-GUID-C1796FFD-5A7E-4FA7-945B-4B6CE374091A" class="sect3"><span class="enumeration_section">16.3 </span>Sizing the Program Global Area by Specifying an Absolute Limit
               </h3>
               <div>
                  <p>In automatic PGA memory management mode, Oracle Database attempts to adhere to the <code class="codeph">PGA_AGGREGATE_TARGET</code> value by dynamically controlling the amount of PGA memory allotted to work areas. However, PGA memory usage may exceed the <code class="codeph">PGA_AGGREGATE_TARGET</code> setting at times due to the following reasons:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">PGA_AGGREGATE_TARGET</code> setting acts as a target, and not a limit.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">PGA_AGGREGATE_TARGET</code> only controls allocations of tunable memory.
                        </p>
                     </li>
                  </ul>
                  <div class="p">Excessive PGA usage can lead to high rates of swapping. When this occurs, the system may become unresponsive and unstable. In that case, consider using any of the following methods to specify an absolute limit on the PGA memory usage:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use <code class="codeph">PGA_AGGREGATE_LIMIT</code> parameter to set an absolute limit on the overall PGA memory usage.
                           </p>
                           <p>See <span class="q">"<a href="tuning-program-global-area.html#GUID-2DAF0E1B-E24F-4463-BB5D-B1C89904C443">Sizing the Program Global Area Using the PGA_AGGREGATE_LIMIT Parameter</a>"</span> 
                           </p>
                        </li>
                        <li>
                           <p>Use the Resource Manager procedure <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE</code> to set an absolute limit on the PGA memory usage for each session in a particular consumer group.
                           </p>
                           <p>See <span class="q">"<a href="tuning-program-global-area.html#GUID-5988E64F-5BE0-4976-BACF-9310154F24E7">Sizing the Program Global Area Using the Resource Manager</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGDBA95346"></a><div class="props_rev_3"><a id="GUID-2DAF0E1B-E24F-4463-BB5D-B1C89904C443" name="GUID-2DAF0E1B-E24F-4463-BB5D-B1C89904C443"></a><h4 id="TGDBA-GUID-2DAF0E1B-E24F-4463-BB5D-B1C89904C443" class="sect4"><span class="enumeration_section">16.3.1 </span>Sizing the Program Global Area Using the PGA_AGGREGATE_LIMIT Parameter
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter enables you to specify an absolute limit on the PGA memory usage. If the <code class="codeph">PGA_AGGREGATE_LIMIT</code> value is exceeded, Oracle Database aborts or terminates the sessions or processes that are consuming the most untunable PGA memory in the following order:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Calls for sessions that are consuming the most untunable PGA memory are aborted.</p>
                           </li>
                           <li>
                              <p>If PGA memory usage is still over the <code class="codeph">PGA_AGGREGATE_LIMIT</code>, then the sessions and processes that are consuming the most untunable PGA memory are terminated.
                              </p>
                           </li>
                        </ul>
                        <p>In determining the sessions and processes to abort or terminate, Oracle Database treats parallel queries as a single unit.</p>
                        <p>By default, the <code class="codeph">PGA_AGGREGATE_LIMIT</code> parameter is set to the greater of 2 GB, 200% of the <code class="codeph">PGA_AGGREGATE_TARGET</code> value, or 3 MB times the value of the <code class="codeph">PROCESSES</code> parameter. However, it will not exceed 120% of the physical memory size minus the total SGA size. The default value is printed into the alert log. A warning message is printed in the alert log if the amount of physical memory on the system cannot be determined.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DAF0E1B-E24F-4463-BB5D-B1C89904C443__GUID-D14D6529-8A07-49A5-A3C1-C3A4B56921B4">To set PGA_AGGREGATE_LIMIT:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter to a desired value in number of bytes.
                              </p>
                              <p>The value is expresses as a number followed by <code class="codeph">K</code> (for kilobytes), <code class="codeph">M</code> (for megabytes), or <code class="codeph">G</code> (for gigabytes). Setting the value to 0 disables the hard limit on PGA memory.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-2DAF0E1B-E24F-4463-BB5D-B1C89904C443__GUID-E8E34211-5CDA-4EDB-BDA0-C4DE7142D7B2">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../refrn/PGA_AGGREGATE_LIMIT.html#REFRN10328" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=REFRN30180" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">V$PGASTAT</code> view
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN027" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about Oracle Database Resource Manager and consumer groups
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-5988E64F-5BE0-4976-BACF-9310154F24E7" name="GUID-5988E64F-5BE0-4976-BACF-9310154F24E7"></a><h4 id="TGDBA-GUID-5988E64F-5BE0-4976-BACF-9310154F24E7" class="sect4"><span class="enumeration_section">16.3.2 </span>Sizing the Program Global Area Using the Resource Manager
                  </h4>
                  <div>
                     <p>You can set an absolute limit on the amount of PGA memory that can be allocated to each session in a particular consumer group using the <code class="codeph">SESSION_PGA_LIMIT</code> parameter of the <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE</code> procedure of the Oracle Database Resource Manager. If a session exceeds the PGA memory limit set for its consumer group, then that session is terminated with the <code class="codeph">ORA-10260</code> error message.
                     </p>
                     <div class="infoboxnotealso" id="GUID-5988E64F-5BE0-4976-BACF-9310154F24E7__ORACLEDATABASEADMINISTRATIONGUIDE-0279DEF5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic">Oracle Database Administration Guide</span> topics:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-6D549CB5-9AEB-43F2-9901-0092C7B76115" target="_blank"><span class="q">"Program Global Area (PGA)"</span></a> for more information about limiting the PGA memory for each session in a consumer group.
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-3BDCC024-22DD-479D-A7C3-92E7145C854F" target="_blank"><span class="q">"Creating Resource Plan Directives"</span></a> for more information about creating resource plan directives using the <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE</code> procedure.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_RESOURCE_MANAGER.html#ARPLS-GUID-8EC6C735-338D-46D4-B346-AD16D0622B30" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for the syntax of the <code class="codeph">DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE</code> procedure.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='05213.dynamic-sql.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Dynamic SQL is a programming methodology for generating and running SQL statements at run time.">
      <meta name="description" content="Dynamic SQL is a programming methodology for generating and running SQL statements at run time.">
      <title>PL/SQL Dynamic SQL</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database PL/SQL Language Reference ">
      <meta property="og:description" content="Dynamic SQL is a programming methodology for generating and running SQL statements at run time.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database PL/SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96448-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="static-sql.html" title="Previous" type="text/html">
      <link rel="next" href="plsql-subprograms.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="LNPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="static-sql.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="plsql-subprograms.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database PL/SQL Language Reference </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL/SQL Dynamic SQL</li>
            </ol>
            <a id="GUID-7E2F596F-9CA3-4DC8-8333-0C117962DB73" name="GUID-7E2F596F-9CA3-4DC8-8333-0C117962DB73"></a><a id="LNPLS513"></a><a id="LNPLS011"></a>
            
            <h2 id="LNPLS-GUID-7E2F596F-9CA3-4DC8-8333-0C117962DB73" class="sect2"><span class="enumeration_chapter">7 </span>PL/SQL Dynamic SQL
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><span class="bold">Dynamic SQL</span> is a programming methodology for generating and running SQL statements at run time. 
               </p>
               <p>It is useful when writing general-purpose and flexible programs like ad hoc query systems, when writing programs that must run database definition language (DDL) statements, or when you do not know at compile time the full text of a SQL statement or the number or data types of its input and output variables.</p>
               <p>PL/SQL provides two ways to write dynamic SQL:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Native dynamic SQL, a PL/SQL language (that is, native) feature for building and running dynamic SQL statements</p>
                  </li>
                  <li>
                     <p><code class="codeph">DBMS_SQL</code> package, an API for building, running, and describing dynamic SQL statements
                     </p>
                  </li>
               </ul>
               <p>Native dynamic SQL code is easier to read and write than equivalent code that uses the <code class="codeph">DBMS_SQL</code> package, and runs noticeably faster (especially when it can be optimized by the compiler). However, to write native dynamic SQL code, you must know at compile time the number and data types of the input and output variables of the dynamic SQL statement. If you do not know this information at compile time, you must use the <code class="codeph">DBMS_SQL</code> package. You must also use the <code class="codeph">DBMS_SQL</code> package if you want a stored subprogram to return a query result implicitly (not through an <code class="codeph">OUT</code> <code class="codeph">REF</code> <code class="codeph">CURSOR</code> parameter).
               </p>
               <p>When you need both the <code class="codeph">DBMS_SQL</code> package and native dynamic SQL, you can switch between them, using the <span class="q">"<a href="dynamic-sql.html#GUID-A194C9FA-221A-466B-9179-6238FEC5143B">DBMS_SQL.TO_REFCURSOR Function</a>"</span> and <span class="q">"<a href="dynamic-sql.html#GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF">DBMS_SQL.TO_CURSOR_NUMBER Function</a>"</span>.
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-7E2F596F-9CA3-4DC8-8333-0C117962DB73__GUID-44B456EB-7CB5-4348-AAA6-8A004AE3CF99">Topics</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="dynamic-sql.html#GUID-DAFD83C8-FA3A-40A6-95E5-3B2F082E1798">When You Need Dynamic SQL</a></p>
                  </li>
                  <li>
                     <p><a href="dynamic-sql.html#GUID-D2613968-6660-4AA2-9057-28E425A3040D" title="Native dynamic SQL processes most dynamic SQL statements with the EXECUTE IMMEDIATE statement.">Native Dynamic SQL</a></p>
                  </li>
                  <li>
                     <p><a href="dynamic-sql.html#GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B" title="The&nbsp;DBMS_SQL&nbsp;package defines an entity called a&nbsp;SQL cursor number. Because the SQL cursor number is a PL/SQL integer, you can pass it across call boundaries and store it.">DBMS_SQL Package</a></p>
                  </li>
                  <li>
                     <p><a href="dynamic-sql.html#GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C" title="SQL injection maliciously exploits applications that use client-supplied data in SQL statements, thereby gaining unauthorized access to a database to view or manipulate restricted data.">SQL Injection</a></p>
                  </li>
               </ul>
            </div><a id="LNPLS01101"></a><div class="props_rev_3"><a id="GUID-DAFD83C8-FA3A-40A6-95E5-3B2F082E1798" name="GUID-DAFD83C8-FA3A-40A6-95E5-3B2F082E1798"></a><h3 id="LNPLS-GUID-DAFD83C8-FA3A-40A6-95E5-3B2F082E1798" class="sect3"><span class="enumeration_section">7.1 </span>When You Need Dynamic SQL
               </h3>
               <div>
                  <p>In PL/SQL, you need dynamic SQL to run:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>SQL whose text is unknown at compile time</p>
                        <p>For example, a <code class="codeph">SELECT</code> statement that includes an identifier that is unknown at compile time (such as a table name) or a <code class="codeph">WHERE</code> clause in which the number of subclauses is unknown at compile time.
                        </p>
                     </li>
                     <li>
                        <p>SQL that is not supported as static SQL</p>
                        <p>That is, any SQL construct not included in <span class="q">"<a href="static-sql.html#GUID-54ABD9E3-EA4D-4C60-A84A-021925501C0C" title="Static SQL has the same syntax as SQL, except as noted.">Description of Static SQL</a>"</span>.
                        </p>
                     </li>
                  </ul>
                  <p>If you do not need dynamic SQL, use static SQL, which has these advantages:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Successful compilation verifies that static SQL statements reference valid database objects and that the necessary privileges are in place to access those objects.</p>
                     </li>
                     <li>
                        <p>Successful compilation creates schema object dependencies.</p>
                        <p>For information about schema object dependencies, see <a href="../adfns/schema-object-dependency.html#ADFNS99967" target="_blank"><span class="italic">Oracle Database Development Guide</span></a>.
                        </p>
                     </li>
                  </ul>
                  <p>For information about using static SQL statements with PL/SQL, see <a href="static-sql.html#GUID-A2E4086F-94DC-4CC7-9E4B-30285BEC3313" title="Static SQL is a PL/SQL feature that allows SQL syntax directly in a PL/SQL statement.">PL/SQL Static SQL</a>.
                  </p>
               </div>
            </div><a id="LNPLS514"></a><a id="LNPLS01102"></a><div class="props_rev_3"><a id="GUID-D2613968-6660-4AA2-9057-28E425A3040D" name="GUID-D2613968-6660-4AA2-9057-28E425A3040D"></a><h3 id="LNPLS-GUID-D2613968-6660-4AA2-9057-28E425A3040D" class="sect3"><span class="enumeration_section">7.2 </span>Native Dynamic SQL
               </h3>
               <div>
                  <p>Native dynamic SQL processes most dynamic SQL statements with the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement.
                  </p>
                  <p>If the dynamic SQL statement is a <code class="codeph">SELECT</code> statement that returns multiple rows, native dynamic SQL gives you these choices:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement with the <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> <code class="codeph">INTO</code> clause.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">OPEN</code> <code class="codeph">FOR</code>, <code class="codeph">FETCH</code>, and <code class="codeph">CLOSE</code> statements.
                        </p>
                     </li>
                  </ul>
                  <p>The SQL cursor attributes work the same way after native dynamic SQL <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, <code class="codeph">MERGE</code>, and single-row <code class="codeph">SELECT</code> statements as they do for their static SQL counterparts. For more information about SQL cursor attributes, see <span class="q">"<a href="static-sql.html#GUID-F1FE15F9-5C96-4C4E-B240-B7363D25A8F1" title="A cursor is a pointer to a private SQL area that stores information about processing a specific SELECT or DML statement.">Cursors Overview</a>"</span>.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-D2613968-6660-4AA2-9057-28E425A3040D__GUID-9C922323-0C53-4EFD-A818-B4BBD2C93A2B">Topics</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="dynamic-sql.html#GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217" title="The EXECUTE IMMEDIATE statement is the means by which native dynamic SQL processes most dynamic SQL statements.">EXECUTE IMMEDIATE Statement</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2">OPEN FOR, FETCH, and CLOSE Statements</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-4E5C6A4F-C1DB-44DD-964E-C683120B448E" title="If you repeat placeholder names in dynamic SQL statements, be aware that the way placeholders are associated with bind variables depends on the kind of dynamic SQL statement.">Repeated Placeholder Names in Dynamic SQL Statements</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPLS626"></a><a id="LNPLS515"></a><a id="LNPLS516"></a><a id="LNPLS517"></a><a id="LNPLS1854"></a><a id="LNPLS1855"></a><a id="LNPLS628"></a><a id="LNPLS01115"></a><div class="props_rev_3"><a id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217" name="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217"></a><h4 id="LNPLS-GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217" class="sect4"><span class="enumeration_section">7.2.1 </span>EXECUTE IMMEDIATE Statement
                  </h4>
                  <div>
                     <p>The <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement is the means by which native dynamic SQL processes most dynamic SQL statements.
                     </p>
                     <p>If the dynamic SQL statement is <span class="bold">self-contained</span> (that is, if it has no placeholders for bind variables and the only result that it can possibly return is an error), then the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement needs no clauses.
                     </p>
                     <p>If the dynamic SQL statement includes placeholders for bind variables, each placeholder must have a corresponding bind variable in the appropriate clause of the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement, as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the dynamic SQL statement is a <code class="codeph">SELECT</code> statement that can return at most one row, put out-bind variables (defines) in the <code class="codeph">INTO</code> clause and in-bind variables in the <code class="codeph">USING</code> clause.
                           </p>
                        </li>
                        <li>
                           <p>If the dynamic SQL statement is a <code class="codeph">SELECT</code> statement that can return multiple rows, put out-bind variables (defines) in the <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> <code class="codeph">INTO</code> clause and in-bind variables in the <code class="codeph">USING</code> clause.
                           </p>
                        </li>
                        <li>
                           <p>If the dynamic SQL statement is a DML statement without a <code class="codeph">RETURNING</code> <code class="codeph">INTO</code> clause, other than <code class="codeph">SELECT</code>, put all bind variables in the <code class="codeph">USING</code> clause.
                           </p>
                        </li>
                        <li>
                           <p>If the dynamic SQL statement is a DML statement with a <code class="codeph">RETURNING</code> <code class="codeph">INTO</code> clause, put in-bind variables in the <code class="codeph">USING</code> clause and out-bind variables in the <code class="codeph">RETURNING</code> <code class="codeph">INTO</code> clause.
                           </p>
                        </li>
                        <li>
                           <p>If the dynamic SQL statement is an anonymous PL/SQL block or a <code class="codeph">CALL</code> statement, put all bind variables in the <code class="codeph">USING</code> clause.
                           </p>
                           <p>If the dynamic SQL statement invokes a subprogram, ensure that:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The subprogram is either created at schema level or declared and defined in a package specification. </p>
                              </li>
                              <li>
                                 <p>Every bind variable that corresponds to a placeholder for a subprogram parameter has the same parameter mode as that subprogram parameter and a data type that is compatible with that of the subprogram parameter.</p>
                              </li>
                              <li>
                                 <p>No bind variable is the reserved word <code class="codeph">NULL</code>.
                                 </p>
                                 <p>To work around this restriction, use an uninitialized variable where you want to use <code class="codeph">NULL</code>, as in <a href="dynamic-sql.html#GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__BHCBIICB">Example 7-7</a>.
                                 </p>
                              </li>
                              <li>
                                 <p>No bind variable has a data type that SQL does not support (such as associative array indexed by string).</p>
                                 <p>If the data type is a collection or record type, then it must be declared in a package specification. </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__GUID-C61A4D55-E5C8-4939-BD57-9D81EF049CC3">
                        <p class="notep1">Note:</p>
                        <p>Bind variables can be evaluated in any order. If a program determines order of evaluation, then at the point where the program does so, its behavior is undefined.</p>
                     </div>
                     <p>In <a href="dynamic-sql.html#GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDECEFD">Example 7-4</a>, <a href="dynamic-sql.html#GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDFAJCJ">Example 7-5</a>, and <a href="dynamic-sql.html#GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDJAAIJ">Example 7-6</a>, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram that has a formal parameter of a PL/SQL collection type. Collection types are not SQL data types. In each example, the collection type is declared in a package specification, and the subprogram is declared in the package specification and defined in the package body. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__GUID-DFDCF893-E357-49BA-B39C-5105AEB3E0BB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="CREATE-FUNCTION-statement.html#GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2" title="The CREATE FUNCTION statement creates or replaces a standalone function or a call specification.">CREATE FUNCTION Statement</a>"</span> for information about creating functions at schema level
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="CREATE-PROCEDURE-statement.html#GUID-5F84DB47-B5BE-4292-848F-756BF365EC54" title="The CREATE PROCEDURE statement creates or replaces a standalone procedure or a call specification.">CREATE PROCEDURE Statement</a>"</span> for information about creating procedures at schema level
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="plsql-packages.html#GUID-C285EC5A-BE50-4192-A88E-48C0778B34E0" title="This chapter explains how to bundle related PL/SQL code and data into a package, whose contents are available to many applications.">PL/SQL Packages</a>"</span>  for information about packages
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="CREATE-PACKAGE-statement.html#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5" title="The CREATE PACKAGE statement creates or replaces the specification for a stored package, which is an encapsulated collection of related procedures, functions, and other program objects stored as a unit in the database.">CREATE PACKAGE Statement</a>"</span> for information about declaring subprograms in packages
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="CREATE-PACKAGE-BODY-statement.html#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE" title="The CREATE PACKAGE BODY statement creates or replaces the body of a stored package, which is an encapsulated collection of related procedures, stored functions, and other program objects stored as a unit in the database.">CREATE PACKAGE BODY Statement</a>"</span> for information about declaring and defining subprograms in packages
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="CREATE-PACKAGE-statement.html#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5" title="The CREATE PACKAGE statement creates or replaces the specification for a stored package, which is an encapsulated collection of related procedures, functions, and other program objects stored as a unit in the database.">CREATE PACKAGE Statement</a>"</span> for more information about declaring types in a package specification
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="EXECUTE-IMMEDIATE-statement.html#GUID-C3245A95-B85B-4280-A01F-12307B108DC8" title="The EXECUTE IMMEDIATE statement builds and runs a dynamic SQL statement in a single operation.">EXECUTE IMMEDIATE Statement</a>"</span>for syntax details of the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="plsql-collections-and-records.html#GUID-7115C8B6-62F9-496D-BEC3-F7441DFE148A" title="PL/SQL lets you define two kinds of composite data types: collection and record.">PL/SQL Collections and Records</a>"</span> for information about collection types
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDIEFCJ">
                        <p class="titleinexample">Example 7-1 Invoking Subprogram from Dynamic PL/SQL Block</p>
                        <p>In this example, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram created at schema level.</p><pre class="oac_no_warn" dir="ltr"><span class="bold">-- Subprogram that dynamic PL/SQL block invokes:</span>
CREATE OR REPLACE PROCEDURE create_dept (
  deptid <span class="bold">IN OUT</span> NUMBER,
  dname  <span class="bold">IN</span>     VARCHAR2,
  mgrid  <span class="bold">IN</span>     NUMBER,
  locid  <span class="bold">IN</span>     NUMBER
) AUTHID DEFINER AS
BEGIN
  deptid := departments_seq.NEXTVAL;

  INSERT INTO departments (
    department_id,
    department_name,
    manager_id,
    location_id
  )
  VALUES (deptid, dname, mgrid, locid);
END;
/
DECLARE
  plsql_block VARCHAR2(500);
  new_deptid  NUMBER(4);
  new_dname   VARCHAR2(30) := 'Advertising';
  new_mgrid   NUMBER(6)    := 200;
  new_locid   NUMBER(4)    := 1700;
BEGIN
<span class="bold"> -- Dynamic PL/SQL block invokes subprogram:</span>
  plsql_block := 'BEGIN create_dept(:a, :b, :c, :d); END;';

<span class="bold"> /* Specify bind variables in USING clause.</span>
<span class="bold">    Specify mode for first parameter.</span>
<span class="bold">    Modes of other parameters are correct by default. */</span>

  EXECUTE IMMEDIATE plsql_block
    USING <span class="bold">IN OUT</span> new_deptid, new_dname, new_mgrid, new_locid;
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDFCDFC">
                        <p class="titleinexample">Example 7-2 Dynamically Invoking Subprogram with BOOLEAN Formal Parameter</p>
                        <p>In this example, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram that has a formal parameter of the PL/SQL (but not SQL) data type <code class="codeph">BOOLEAN</code>.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE p (x <span class="bold">BOOLEAN</span>) AUTHID DEFINER AS
BEGIN
  IF x THEN
    DBMS_OUTPUT.PUT_LINE('x is true');
  END IF;
END;
/

DECLARE
  dyn_stmt VARCHAR2(200);
  <span class="bold">b        BOOLEAN</span> := TRUE;
BEGIN
  dyn_stmt := 'BEGIN <span class="bold">p(:x)</span>; END;';
  EXECUTE IMMEDIATE dyn_stmt USING <span class="bold">b</span>;
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">x is true
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDFCAGD">
                        <p class="titleinexample">Example 7-3 Dynamically Invoking Subprogram with RECORD Formal Parameter</p>
                        <p>In this example, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram that has a formal parameter of the PL/SQL (but not SQL) data type <code class="codeph">RECORD</code>. The record type is declared in a package specification, and the subprogram is declared in the package specification and defined in the package body.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE pkg AUTHID DEFINER AS
 
  <span class="bold">TYPE rec IS RECORD (n1 NUMBER, n2 NUMBER);</span>
 
  <span class="bold">PROCEDURE p (x OUT rec, y NUMBER, z NUMBER);</span>
END pkg;
/
CREATE OR REPLACE PACKAGE BODY pkg AS
 
  PROCEDURE p (x OUT rec, y NUMBER, z NUMBER) AS
  BEGIN
    x.n1 := y;
    x.n2 := z;
  END p;
END pkg;
/
DECLARE
  <span class="bold">r       pkg.rec;</span>
  dyn_str VARCHAR2(3000);
BEGIN
  dyn_str := 'BEGIN <span class="bold">pkg.p(:x, 6, 8);</span> END;';
 
  EXECUTE IMMEDIATE dyn_str USING <span class="bold">OUT r</span>;
 
  DBMS_OUTPUT.PUT_LINE('r.n1 = ' || r.n1);
  DBMS_OUTPUT.PUT_LINE('r.n2 = ' || r.n2);
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDECEFD">
                        <p class="titleinexample">Example 7-4 Dynamically Invoking Subprogram with Assoc. Array Formal Parameter</p>
                        <p>In this example, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram that has a formal parameter of the PL/SQL collection type associative array indexed by <code class="codeph">PLS_INTEGER</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__GUID-4A3E7FB5-07E9-42AF-B3BD-17B834418F49">
                           <p class="notep1">Note:</p>
                           <p>An associative array type used in this context must be indexed by <code class="codeph">PLS_INTEGER</code>.
                           </p>
                        </div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE pkg AUTHID DEFINER AS
 
  <span class="bold">TYPE number_names IS TABLE OF VARCHAR2(5)</span>
    <span class="bold">INDEX BY PLS_INTEGER;</span>
 
  <span class="bold">PROCEDURE print_number_names (x number_names);</span>
END pkg;
/
CREATE OR REPLACE PACKAGE BODY pkg AS
  PROCEDURE print_number_names (x number_names) IS
  BEGIN
    FOR i IN x.FIRST .. x.LAST LOOP
      DBMS_OUTPUT.PUT_LINE(x(i));
    END LOOP;
  END;
END pkg;
/
DECLARE  
  <span class="bold">digit_names  pkg.number_names;</span>
  dyn_stmt     VARCHAR2(3000);
BEGIN
  digit_names(0) := 'zero';
  digit_names(1) := 'one';
  digit_names(2) := 'two';
  digit_names(3) := 'three';
  digit_names(4) := 'four';
  digit_names(5) := 'five';
  digit_names(6) := 'six';
  digit_names(7) := 'seven';
  digit_names(8) := 'eight';
  digit_names(9) := 'nine';
 
  dyn_stmt := 'BEGIN <span class="bold">pkg.print_number_names(:x);</span> END;';
  EXECUTE IMMEDIATE dyn_stmt USING <span class="bold">digit_names</span>;
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDFAJCJ">
                        <p class="titleinexample">Example 7-5 Dynamically Invoking Subprogram with Nested Table Formal Parameter</p>
                        <p>In this example, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram that has a formal parameter of the PL/SQL collection type nested table.</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE pkg AUTHID DEFINER AS
 
  <span class="bold">TYPE names IS TABLE OF VARCHAR2(10);</span>
 
  <span class="bold">PROCEDURE print_names (x names);</span>
END pkg;
/
CREATE OR REPLACE PACKAGE BODY pkg AS
  PROCEDURE print_names (x names) IS
  BEGIN
    FOR i IN x.FIRST .. x.LAST LOOP
      DBMS_OUTPUT.PUT_LINE(x(i));
    END LOOP;
  END;
END pkg;
/
DECLARE
  <span class="bold">fruits   pkg.names;</span>
  dyn_stmt VARCHAR2(3000);
BEGIN
  fruits := pkg.names('apple', 'banana', 'cherry');
  
  dyn_stmt := 'BEGIN <span class="bold">pkg.print_names(:x);</span> END;';
  EXECUTE IMMEDIATE dyn_stmt USING <span class="bold">fruits</span>;
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__CHDJAAIJ">
                        <p class="titleinexample">Example 7-6 Dynamically Invoking Subprogram with Varray Formal Parameter</p>
                        <p>In this example, the dynamic PL/SQL block is an anonymous PL/SQL block that invokes a subprogram that has a formal parameter of the PL/SQL collection type varray.</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE pkg AUTHID DEFINER AS
 
  <span class="bold">TYPE foursome IS VARRAY(4) OF VARCHAR2(5);</span>
 
  <span class="bold">PROCEDURE print_foursome (x foursome);</span>
END pkg;
/
CREATE OR REPLACE PACKAGE BODY pkg AS
  PROCEDURE print_foursome (x foursome) IS
  BEGIN
    IF x.COUNT = 0 THEN
      DBMS_OUTPUT.PUT_LINE('Empty');
    ELSE 
      FOR i IN x.FIRST .. x.LAST LOOP
        DBMS_OUTPUT.PUT_LINE(x(i));
      END LOOP;
    END IF;
  END;
END pkg;
/
DECLARE
  <span class="bold">directions pkg.foursome;</span>
  dyn_stmt VARCHAR2(3000);
BEGIN
  directions := pkg.foursome('north', 'south', 'east', 'west');
  
  dyn_stmt := 'BEGIN <span class="bold">pkg.print_foursome(:x);</span> END;';
  EXECUTE IMMEDIATE dyn_stmt USING <span class="bold">directions</span>;
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__BHCBIICB">
                        <p class="titleinexample">Example 7-7 Uninitialized Variable Represents NULL in USING Clause</p>
                        <p>This example uses an uninitialized variable to represent the reserved word <code class="codeph">NULL</code> in the <code class="codeph">USING</code> clause.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees_temp AS SELECT * FROM EMPLOYEES;

DECLARE
  a_null  CHAR(1);  <span class="bold">-- Set to NULL automatically at run time</span>
BEGIN
  EXECUTE IMMEDIATE 'UPDATE employees_temp SET commission_pct = <span class="bold">:x</span>'
    USING <span class="bold">a_null</span>;
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS630"></a><a id="LNPLS519"></a><a id="LNPLS629"></a><div class="props_rev_3"><a id="GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2" name="GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2"></a><h4 id="LNPLS-GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2" class="sect4"><span class="enumeration_section">7.2.2 </span>OPEN FOR, FETCH, and CLOSE Statements
                  </h4>
                  <div>
                     <p>If the dynamic SQL statement represents a <code class="codeph">SELECT</code> statement that returns multiple rows, you can process it with native dynamic SQL as follows:
                     </p>
                     <ol>
                        <li>
                           <p>Use an <code class="codeph">OPEN</code> <code class="codeph">FOR</code> statement to associate a cursor variable with the dynamic SQL statement. In the <code class="codeph">USING</code> clause of the <code class="codeph">OPEN</code> <code class="codeph">FOR</code> statement, specify a bind variable for each placeholder in the dynamic SQL statement.
                           </p>
                           <p>The <code class="codeph">USING</code> clause cannot contain the literal <code class="codeph">NULL</code>. To work around this restriction, use an uninitialized variable where you want to use <code class="codeph">NULL</code>, as in <a href="dynamic-sql.html#GUID-30ADFC05-8DFB-4C8A-831D-426C2E97F217__BHCBIICB">Example 7-7</a>.
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">FETCH</code> statement to retrieve result set rows one at a time, several at a time, or all at once.
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">CLOSE</code> statement to close the cursor variable. 
                           </p>
                        </li>
                     </ol>
                     <p>The dynamic SQL statement can query a collection if the collection meets the criteria in <span class="q">"<a href="static-sql.html#GUID-65ADB424-2C2D-49ED-9E98-99A3A68BA248">Querying a Collection</a>"</span>. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2__GUID-A4B16287-D713-478E-8E53-B4F5A63D2C08">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="OPEN-FOR-statement.html#GUID-EB7AF439-FDD3-4461-9E3F-B621E8ABFB96" title="The OPEN FOR statement associates a cursor variable with a query, allocates database resources to process the query, identifies the result set, and positions the cursor before the first row of the result set.">OPEN FOR Statement</a>"</span> for syntax details
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="FETCH-statement.html#GUID-75BC6E63-841A-4103-9B96-8AC97F5C28BB" title="The FETCH statement retrieves rows of data from the result set of a multiple-row query—one row at a time, several rows at a time, or all rows at once—and stores the data in variables, records, or collections.">FETCH Statement</a>"</span> for syntax details
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="CLOSE-statement.html#GUID-46E7086C-8C29-4689-A062-0FF059E268FD" title="The CLOSE statement closes a named cursor, freeing its resources for reuse.">CLOSE Statement</a>"</span> for syntax details
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2__BHCFDIAI">
                        <p class="titleinexample">Example 7-8 Native Dynamic SQL with OPEN FOR, FETCH, and CLOSE Statements</p>
                        <p>This example lists all employees who are managers, retrieving result set rows one at a time.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  TYPE EmpCurTyp  IS REF CURSOR;
  v_emp_cursor    EmpCurTyp;
  emp_record      employees%ROWTYPE;
  v_stmt_str      VARCHAR2(200);
  v_e_job         employees.job%TYPE;
BEGIN
  <span class="bold">-- Dynamic SQL statement with placeholder:</span>
  v_stmt_str := 'SELECT * FROM employees WHERE job_id = :j';

  <span class="bold">-- Open cursor &amp; specify bind variable in USING clause:</span>
  OPEN v_emp_cursor FOR v_stmt_str USING 'MANAGER';

  <span class="bold">-- Fetch rows from result set one at a time:</span>
  LOOP
    FETCH v_emp_cursor INTO emp_record;
    EXIT WHEN v_emp_cursor%NOTFOUND;
  END LOOP;

  <span class="bold">-- Close cursor:</span>
  CLOSE v_emp_cursor;
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BAC52F38-B427-4860-9B6D-336B3AEE6AD2__CHDDBFJB">
                        <p class="titleinexample">Example 7-9 Querying a Collection with Native Dynamic SQL</p>
                        <p>This example is like <a href="static-sql.html#GUID-65ADB424-2C2D-49ED-9E98-99A3A68BA248__BABJDADA">Example 6-30</a> except that the collection variable <code class="codeph">v1</code> is a bind variable.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE pkg AUTHID DEFINER AS
  TYPE rec IS RECORD(f1 NUMBER, f2 VARCHAR2(30));
  TYPE mytab IS TABLE OF rec INDEX BY pls_integer;
END;
/

DECLARE
  <span class="bold">v1 pkg.mytab;  -- collection of records</span>
  v2 pkg.rec;
  c1 SYS_REFCURSOR;
BEGIN
  <span class="bold">OPEN c1 FOR 'SELECT * FROM TABLE(:1)' USING v1;</span>
  FETCH c1 INTO v2;
  CLOSE c1;
  DBMS_OUTPUT.PUT_LINE('Values in record are ' || v2.f1 || ' and ' || v2.f2);
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS520"></a><a id="LNPLS631"></a><div class="props_rev_3"><a id="GUID-4E5C6A4F-C1DB-44DD-964E-C683120B448E" name="GUID-4E5C6A4F-C1DB-44DD-964E-C683120B448E"></a><h4 id="LNPLS-GUID-4E5C6A4F-C1DB-44DD-964E-C683120B448E" class="sect4"><span class="enumeration_section">7.2.3 </span>Repeated Placeholder Names in Dynamic SQL Statements
                  </h4>
                  <div>
                     <p>If you repeat placeholder names in dynamic SQL statements, be aware that the way placeholders are associated with bind variables depends on the kind of dynamic SQL statement.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4E5C6A4F-C1DB-44DD-964E-C683120B448E__GUID-057AA3A3-A1A7-421B-AB14-8FA69A3C3509">Topics</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="dynamic-sql.html#GUID-D17344F2-3CA5-4F33-A074-47E059CA91CC" title="If the dynamic SQL statement does not represent an anonymous PL/SQL block or a CALL statement, repetition of placeholder names is insignificant.">Dynamic SQL Statement is Not Anonymous Block or CALL Statement</a></p>
                           </li>
                           <li>
                              <p><a href="dynamic-sql.html#GUID-A31BBD6E-1CB5-47D2-A01B-48DC3BE203C7" title="If the dynamic SQL statement represents an anonymous PL/SQL block or a CALL statement, repetition of placeholder names is significant.">Dynamic SQL Statement is Anonymous Block or CALL Statement</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPLS632"></a><div class="props_rev_3"><a id="GUID-D17344F2-3CA5-4F33-A074-47E059CA91CC" name="GUID-D17344F2-3CA5-4F33-A074-47E059CA91CC"></a><h5 id="LNPLS-GUID-D17344F2-3CA5-4F33-A074-47E059CA91CC" class="sect5"><span class="enumeration_section">7.2.3.1 </span>Dynamic SQL Statement is Not Anonymous Block or CALL Statement
                     </h5>
                     <div>
                        <p>If the dynamic SQL statement does not represent an anonymous PL/SQL block or a <code class="codeph">CALL</code> statement, repetition of placeholder names is insignificant. 
                        </p>
                        <p>Placeholders are associated with bind variables in the <code class="codeph">USING</code> clause by position, not by name.
                        </p>
                        <p>For example, in this dynamic SQL statement, the repetition of the name :<code class="codeph">x</code> is insignificant:
                        </p><pre class="oac_no_warn" dir="ltr">sql_stmt := 'INSERT INTO payroll VALUES (:x, :x, :y, :x)';
</pre><p>In the corresponding <code class="codeph">USING</code> clause, you must supply four bind variables. They can be different; for example:
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE IMMEDIATE sql_stmt USING a, b, c, d;
</pre><p>The preceding <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement runs this SQL statement:
                        </p><pre class="oac_no_warn" dir="ltr">INSERT INTO payroll VALUES (a, b, c, d)
</pre><p>To associate the same bind variable with each occurrence of :<code class="codeph">x</code>, you must repeat that bind variable; for example:
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE IMMEDIATE sql_stmt USING a, a, b, a;
</pre><p>The preceding <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement runs this SQL statement:
                        </p><pre class="oac_no_warn" dir="ltr">INSERT INTO payroll VALUES (a, a, b, a)</pre></div>
                  </div><a id="LNPLS634"></a><a id="LNPLS633"></a><div class="props_rev_3"><a id="GUID-A31BBD6E-1CB5-47D2-A01B-48DC3BE203C7" name="GUID-A31BBD6E-1CB5-47D2-A01B-48DC3BE203C7"></a><h5 id="LNPLS-GUID-A31BBD6E-1CB5-47D2-A01B-48DC3BE203C7" class="sect5"><span class="enumeration_section">7.2.3.2 </span>Dynamic SQL Statement is Anonymous Block or CALL Statement
                     </h5>
                     <div>
                        <p>If the dynamic SQL statement represents an anonymous PL/SQL block or a <code class="codeph">CALL</code> statement, repetition of placeholder names is significant.
                        </p>
                        <p> Each unique placeholder name must have a corresponding bind variable in the <code class="codeph">USING</code> clause. If you repeat a placeholder name, you need not repeat its corresponding bind variable. All references to that placeholder name correspond to one bind variable in the <code class="codeph">USING</code> clause.
                        </p>
                        <div class="example" id="GUID-A31BBD6E-1CB5-47D2-A01B-48DC3BE203C7__CHDFHEAG">
                           <p class="titleinexample">Example 7-10 Repeated Placeholder Names in Dynamic PL/SQL Block</p>
                           <p>In this example, all references to the first unique placeholder name, :<code class="codeph">x</code>, are associated with the first bind variable in the <code class="codeph">USING</code> clause, <code class="codeph">a</code>, and the second unique placeholder name, :<code class="codeph">y</code>, is associated with the second bind variable in the <code class="codeph">USING</code> clause, <code class="codeph">b</code>.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE PROCEDURE calc_stats (
  w NUMBER,
  x NUMBER,
  y NUMBER,
  z NUMBER )
IS
BEGIN
  DBMS_OUTPUT.PUT_LINE(w + x + y + z);
END;
/
DECLARE
  a NUMBER := 4;
  b NUMBER := 7;
  plsql_block VARCHAR2(100);
BEGIN
  plsql_block := 'BEGIN calc_stats(:x, :x, :y, :x); END;';
  EXECUTE IMMEDIATE plsql_block USING a, b;  <span class="bold">-- calc_stats(a, a, b, a)</span>
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNPLS2173"></a><a id="LNPLS01108"></a><div class="props_rev_3"><a id="GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B" name="GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B"></a><h3 id="LNPLS-GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B" class="sect3"><span class="enumeration_section">7.3 </span>DBMS_SQL Package
               </h3>
               <div>
                  <p>The&nbsp;DBMS_SQL&nbsp;package defines an entity called a&nbsp;SQL cursor number. Because the SQL cursor number is a PL/SQL integer, you can pass it across call boundaries and store it.</p>
                  <p>You must use the <code class="codeph">DBMS_SQL</code> package to run a dynamic SQL statement if any of the following are true:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You do not know the <code class="codeph">SELECT</code> list until run time.
                        </p>
                     </li>
                     <li>
                        <p>You do not know until run time what placeholders in a <code class="codeph">SELECT</code> or DML statement must be bound.
                        </p>
                     </li>
                     <li>
                        <p>You want a stored subprogram to return a query result implicitly (not through an <code class="codeph">OUT</code> <code class="codeph">REF</code> <code class="codeph">CURSOR</code> parameter), which requires the <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure.
                        </p>
                     </li>
                  </ul>
                  <p>In these situations, you must use native dynamic SQL instead of the <code class="codeph">DBMS_SQL</code> package:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The dynamic SQL statement retrieves rows into records.</p>
                     </li>
                     <li>
                        <p>You want to use the SQL cursor attribute <code class="codeph">%FOUND</code>, <code class="codeph">%ISOPEN</code>, <code class="codeph">%NOTFOUND</code>, or <code class="codeph">%ROWCOUNT</code> after issuing a dynamic SQL statement that is an <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, <code class="codeph">MERGE</code>, or single-row <code class="codeph">SELECT</code> statement.
                        </p>
                     </li>
                  </ul>
                  <p>When you need both the <code class="codeph">DBMS_SQL</code> package and native dynamic SQL, you can switch between them, using the functions <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_REFCURSOR</code> and <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_CURSOR_NUMBER</code>.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B__GUID-F9B6E901-8744-4B79-81D0-98D843671A2A">Topics</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="dynamic-sql.html#GUID-8CFE5AA9-0BBD-417B-A7EE-6F05AF49001B">DBMS_SQL.RETURN_RESULT Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-1D6A4302-CBA0-47A6-B4A7-80B089DF4E61">DBMS_SQL.GET_NEXT_RESULT Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-A194C9FA-221A-466B-9179-6238FEC5143B">DBMS_SQL.TO_REFCURSOR Function</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF">DBMS_SQL.TO_CURSOR_NUMBER Function</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B__GUID-05B48BB9-8E56-451E-A4DD-8E3A6047E821">
                        <p class="notep1">Note:</p>
                        <p>You can invoke <code class="codeph">DBMS_SQL</code> subprograms remotely.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-4E1FD47B-7E1A-42E9-9792-210F13C75A1B__GUID-9361F58E-E823-4C88-8DA9-00B9EAD77BEA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="dynamic-sql.html#GUID-D2613968-6660-4AA2-9057-28E425A3040D" title="Native dynamic SQL processes most dynamic SQL statements with the EXECUTE IMMEDIATE statement.">Native Dynamic SQL</a>"</span>for information about native dynamic SQL
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQL.html#ARPLS058" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_SQL</code> package, including instructions for running a dynamic SQL statement that has an unknown number of input or output variables ("Method 4")
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPLS2175"></a><a id="LNPLS2174"></a><div class="props_rev_3"><a id="GUID-8CFE5AA9-0BBD-417B-A7EE-6F05AF49001B" name="GUID-8CFE5AA9-0BBD-417B-A7EE-6F05AF49001B"></a><h4 id="LNPLS-GUID-8CFE5AA9-0BBD-417B-A7EE-6F05AF49001B" class="sect4"><span class="enumeration_section">7.3.1 </span>DBMS_SQL.RETURN_RESULT Procedure
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure lets a stored subprogram return a query result implicitly to either the client program (which invokes the subprogram indirectly) or the immediate caller of the subprogram. After <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> returns the result, only the recipient can access it.
                     </p>
                     <p>The <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> has two overloads:
                     </p><pre class="oac_no_warn" dir="ltr">PROCEDURE RETURN_RESULT (rc IN OUT <span class="bold">SYS_REFCURSOR</span>,
                         to_client IN BOOLEAN DEFAULT TRUE);

PROCEDURE RETURN_RESULT (rc IN OUT <span class="bold">INTEGER</span>,
                         to_client IN BOOLEAN DEFAULT TRUE);
</pre><p>The <code class="codeph">rc</code> parameter is either an open cursor variable (<code class="codeph">SYS_REFCURSOR</code>) or the cursor number (<code class="codeph">INTEGER</code>) of an open cursor. To open a cursor and get its cursor number, invoke the <code class="codeph">DBMS_SQL</code>.<code class="codeph">OPEN_CURSOR</code> function, described in <a href="../arpls/DBMS_SQL.html#ARPLS68275" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                     </p>
                     <p>When the <code class="codeph">to_client</code> parameter is <code class="codeph">TRUE</code> (the default), the <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure returns the query result to the client program (which invokes the subprogram indirectly); when this parameter is <code class="codeph">FALSE</code>, the procedure returns the query result to the subprogram's immediate caller.
                     </p>
                     <div class="infoboxnotealso" id="GUID-8CFE5AA9-0BBD-417B-A7EE-6F05AF49001B__GUID-408BA65C-2409-4206-B3EC-27A403EA4EB7">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../arpls/DBMS_SQL.html#ARPLS73893" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/performance-topics.html#LNOCI73008" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for information about C and .NET support for implicit query results
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqpug/using-scripts-in-SQL-Plus.html#SQPUG200" target="_blank"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for information about SQL*Plus support for implicit query results
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-8CFE5AA9-0BBD-417B-A7EE-6F05AF49001B__CHDFBIBJ">
                        <p class="titleinexample">Example 7-11 DBMS_SQL.RETURN_RESULT Procedure</p>
                        <p>In this example, the procedure <code class="codeph">p</code> invokes <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> without the optional <code class="codeph">to_client</code> parameter (which is <code class="codeph">TRUE</code> by default). Therefore, <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> returns the query result to the subprogram client (the anonymous block that invokes <code class="codeph">p</code>). After <code class="codeph">p</code> returns a result to the anonymous block, only the anonymous block can access that result.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE p AUTHID DEFINER AS
  c1 SYS_REFCURSOR;
  c2 SYS_REFCURSOR;
BEGIN
  OPEN c1 FOR
    SELECT first_name, last_name
    FROM employees
    WHERE employee_id = 176;
 
  <span class="bold">DBMS_SQL.RETURN_RESULT (c1);</span>
  <span class="bold">-- Now p cannot access the result.</span>
 
  OPEN c2 FOR
    SELECT city, state_province
    FROM locations
    WHERE country_id = 'AU';
 
  <span class="bold">DBMS_SQL.RETURN_RESULT (c2);</span>
  <span class="bold">-- Now p cannot access the result.</span>
END;
/
BEGIN
  p;
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ResultSet #1

FIRST_NAME           LAST_NAME
-------------------- -------------------------
Jonathon             Taylor

ResultSet #2

CITY                           STATE_PROVINCE
------------------------------ -------------------------
Sydney                         New South Wales</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS2177"></a><a id="LNPLS2176"></a><div class="props_rev_3"><a id="GUID-1D6A4302-CBA0-47A6-B4A7-80B089DF4E61" name="GUID-1D6A4302-CBA0-47A6-B4A7-80B089DF4E61"></a><h4 id="LNPLS-GUID-1D6A4302-CBA0-47A6-B4A7-80B089DF4E61" class="sect4"><span class="enumeration_section">7.3.2 </span>DBMS_SQL.GET_NEXT_RESULT Procedure
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_SQL</code>.<code class="codeph">GET_NEXT_RESULT</code> procedure gets the next result that the <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure returned to the recipient. The two procedures return results in the same order.
                     </p>
                     <p>The <code class="codeph">DBMS_SQL</code>.<code class="codeph">GET_NEXT_RESULT</code> has two overloads:
                     </p><pre class="oac_no_warn" dir="ltr">PROCEDURE GET_NEXT_RESULT (c IN INTEGER, rc OUT <span class="bold">SYS_REFCURSOR</span>);

PROCEDURE GET_NEXT_RESULT (c IN INTEGER, rc OUT <span class="bold">INTEGER</span>);
</pre><p>The <code class="codeph">c</code> parameter is the cursor number of an open cursor that directly or indirectly invokes a subprogram that uses the <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure to return a query result implicitly.
                     </p>
                     <p>To open a cursor and get its cursor number, invoke the <code class="codeph">DBMS_SQL</code>.<code class="codeph">OPEN_CURSOR</code> function. <code class="codeph">DBMS_SQL</code>.<code class="codeph">OPEN_CURSOR</code> has an optional parameter, <code class="codeph">treat_as_client_for_results</code>. When this parameter is <code class="codeph">FALSE</code> (the default), the caller that opens this cursor (to invoke a subprogram) is not treated as the client that receives query results for the client from the subprogram that uses <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code>—those query results are returned to the client in a upper tier instead. When this parameter is <code class="codeph">TRUE</code>, the caller is treated as the client. For more information about the <code class="codeph">DBMS_SQL</code>.<code class="codeph">OPEN_CURSOR</code> function, see <a href="../arpls/DBMS_SQL.html#ARPLS68275" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                     </p>
                     <p>The <code class="codeph">rc</code> parameter is either a cursor variable (<code class="codeph">SYS_REFCURSOR</code>) or the cursor number (<code class="codeph">INTEGER</code>) of an open cursor.
                     </p>
                     <p>In <a href="dynamic-sql.html#GUID-1D6A4302-CBA0-47A6-B4A7-80B089DF4E61__CHDBBIFI">Example 7-12</a>, the procedure <code class="codeph">get_employee_info</code> uses <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> to return two query results to a client program and is invoked dynamically by the anonymous block <code class="codeph">&lt;&lt;main&gt;&gt;</code>. Because <code class="codeph">&lt;&lt;main&gt;&gt;</code> needs to receive the two query results that <code class="codeph">get_employee_info</code> returns, <code class="codeph">&lt;&lt;main&gt;&gt;</code> opens a cursor to invoke <code class="codeph">get_employee_info</code> using <code class="codeph">DBMS_SQL</code>.<code class="codeph">OPEN_CURSOR</code> with the parameter <code class="codeph">treat_as_client_for_results</code> set to <code class="codeph">TRUE</code>. Therefore, <code class="codeph">DBMS_SQL</code>.<code class="codeph">GET_NEXT_RESULT</code> returns its results to <code class="codeph">&lt;&lt;main&gt;&gt;</code>, which uses the cursor <code class="codeph">rc</code> to fetch them.
                     </p>
                     <div class="example" id="GUID-1D6A4302-CBA0-47A6-B4A7-80B089DF4E61__CHDBBIFI">
                        <p class="titleinexample">Example 7-12 DBMS_SQL.GET_NEXT_RESULT Procedure</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE get_employee_info (id IN VARCHAR2) AUTHID DEFINER AS
  rc  SYS_REFCURSOR;
BEGIN
  -- Return employee info
 
  OPEN rc FOR SELECT first_name, last_name, email, phone_number
              FROM employees
              WHERE employee_id = id;
  <span class="bold">DBMS_SQL.RETURN_RESULT(rc);</span>
 
  -- Return employee job history
 
  OPEN RC FOR SELECT job_title, start_date, end_date
              FROM job_history jh, jobs j
              WHERE jh.employee_id = id AND
                    jh.job_id = j.job_id
              ORDER BY start_date DESC;
  <span class="bold">DBMS_SQL.RETURN_RESULT(rc);</span>
END;
/
<span class="bold">&lt;&lt;main&gt;&gt;</span>
DECLARE
  c            INTEGER;
  rc           SYS_REFCURSOR;
  n            NUMBER;
 
  first_name   VARCHAR2(20);
  last_name    VARCHAR2(25);
  email        VARCHAR2(25);
  phone_number VARCHAR2(20);
 
  job_title    VARCHAR2(35);
  start_date   DATE;
  end_date     DATE;
 
BEGIN
 
  <span class="bold">c := DBMS_SQL.OPEN_CURSOR(true);</span>
  DBMS_SQL.PARSE(<span class="bold">c</span>, '<span class="bold">BEGIN get_employee_info(:id); END;</span>', DBMS_SQL.NATIVE);
  DBMS_SQL.BIND_VARIABLE(c, ':id', 176);
  n := DBMS_SQL.EXECUTE(c);
 
  -- Get employee info
 
  <span class="bold">dbms_sql.get_next_result(c, rc);</span>
  <span class="bold">FETCH rc INTO first_name, last_name, email, phone_number;</span>
 
  DBMS_OUTPUT.PUT_LINE('Employee: '||first_name || ' ' || last_name);
  DBMS_OUTPUT.PUT_LINE('Email: ' ||email);
  DBMS_OUTPUT.PUT_LINE('Phone: ' ||phone_number);
 
  -- Get employee job history
 
  DBMS_OUTPUT.PUT_LINE('Titles:');
  <span class="bold">DBMS_SQL.GET_NEXT_RESULT(c, rc);</span>
  LOOP
    <span class="bold">FETCH rc INTO job_title, start_date, end_date;</span>
    EXIT WHEN rc%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE
      ('- '||job_title||' ('||start_date||' - ' ||end_date||')');
  END LOOP;
 
  DBMS_SQL.CLOSE_CURSOR(c);
END main;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Employee: Jonathon Taylor
Email: JTAYLOR
Phone: 011.44.1644.429265
Titles:
- Sales Manager (01-JAN-07 - 31-DEC-07)
- Sales Representative (24-MAR-06 - 31-DEC-06)
 
PL/SQL procedure successfully completed.</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS635"></a><a id="LNPLS01113"></a><div class="props_rev_3"><a id="GUID-A194C9FA-221A-466B-9179-6238FEC5143B" name="GUID-A194C9FA-221A-466B-9179-6238FEC5143B"></a><h4 id="LNPLS-GUID-A194C9FA-221A-466B-9179-6238FEC5143B" class="sect4"><span class="enumeration_section">7.3.3 </span>DBMS_SQL.TO_REFCURSOR Function
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_REFCURSOR</code> function converts a SQL cursor number to a weak cursor variable, which you can use in native dynamic SQL statements.
                     </p>
                     <p>Before passing a SQL cursor number to the <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_REFCURSOR</code> function, you must <code class="codeph">OPEN</code>, <code class="codeph">PARSE</code>, and <code class="codeph">EXECUTE</code> it (otherwise an error occurs).
                     </p>
                     <p>After you convert a SQL cursor number to a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> variable, <code class="codeph">DBMS_SQL</code> operations can access it only as the <code class="codeph">REF</code> <code class="codeph">CURSOR</code> variable, not as the SQL cursor number. For example, using the <code class="codeph">DBMS_SQL</code>.<code class="codeph">IS_OPEN</code> function to see if a converted SQL cursor number is still open causes an error.
                     </p>
                     <p><a href="dynamic-sql.html#GUID-A194C9FA-221A-466B-9179-6238FEC5143B__g1777282">Example 7-13</a> uses the <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_REFCURSOR</code> function to switch from the <code class="codeph">DBMS_SQL</code> package to native dynamic SQL.
                     </p>
                     <div class="example" id="GUID-A194C9FA-221A-466B-9179-6238FEC5143B__g1777282">
                        <p class="titleinexample">Example 7-13 Switching from DBMS_SQL Package to Native Dynamic SQL</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE vc_array IS TABLE OF VARCHAR2(200);
/
CREATE OR REPLACE TYPE numlist IS TABLE OF NUMBER;
/
CREATE OR REPLACE PROCEDURE do_query_1 (
  placeholder vc_array,
  bindvars vc_array,
  sql_stmt VARCHAR2
) AUTHID DEFINER
IS
  TYPE curtype IS REF CURSOR;
  src_cur     curtype;
  curid       NUMBER;
  bindnames   vc_array;
  empnos      numlist;
  depts       numlist;
  ret         NUMBER;
  isopen      BOOLEAN;
BEGIN
  <span class="bold">-- Open SQL cursor number:</span>
  curid := DBMS_SQL.OPEN_CURSOR;

  <span class="bold">-- Parse SQL cursor number:</span>
  DBMS_SQL.PARSE(curid, sql_stmt, DBMS_SQL.NATIVE);

  bindnames := placeholder;

  -- Bind variables:
  FOR i IN 1 .. bindnames.COUNT LOOP
    DBMS_SQL.BIND_VARIABLE(curid, bindnames(i), bindvars(i));
  END LOOP;

  <span class="bold">-- Run SQL cursor number:</span>
  ret := DBMS_SQL.EXECUTE(curid);

  <span class="bold">-- Switch from DBMS_SQL to native dynamic SQL:</span>
  src_cur := DBMS_SQL.TO_REFCURSOR(curid);
  FETCH src_cur BULK COLLECT INTO empnos, depts;

  <span class="bold">-- This would cause an error because curid was converted to a REF CURSOR:</span>
  -- isopen := DBMS_SQL.IS_OPEN(curid);

  CLOSE src_cur;
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS636"></a><a id="LNPLS00001"></a><div class="props_rev_3"><a id="GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF" name="GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF"></a><h4 id="LNPLS-GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF" class="sect4"><span class="enumeration_section">7.3.4 </span>DBMS_SQL.TO_CURSOR_NUMBER Function
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_CURSOR_NUMBER</code> function converts a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> variable (either strong or weak) to a SQL cursor number, which you can pass to <code class="codeph">DBMS_SQL</code> subprograms.
                     </p>
                     <p>Before passing a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> variable to the <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_CURSOR_NUMBER</code> function, you must <code class="codeph">OPEN</code> it.
                     </p>
                     <p>After you convert a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> variable to a SQL cursor number, native dynamic SQL operations cannot access it.
                     </p>
                     <p><a href="dynamic-sql.html#GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF__BHCHJBHJ">Example 7-14</a> uses the <code class="codeph">DBMS_SQL</code>.<code class="codeph">TO_CURSOR_NUMBER</code> function to switch from native dynamic SQL to the <code class="codeph">DBMS_SQL</code> package.
                     </p>
                     <div class="example" id="GUID-8DF5B8A3-70F8-4AF5-A747-B1CE6B7D90DF__BHCHJBHJ">
                        <p class="titleinexample">Example 7-14 Switching from Native Dynamic SQL to DBMS_SQL Package</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE do_query_2 (
  sql_stmt VARCHAR2
) AUTHID DEFINER
IS
  TYPE curtype IS REF CURSOR;
  src_cur   curtype;
  curid     NUMBER;
  desctab   DBMS_SQL.DESC_TAB;
  colcnt    NUMBER;
  namevar   VARCHAR2(50);
  numvar    NUMBER;
  datevar   DATE;
  empno     NUMBER := 100;
BEGIN
  -- sql_stmt := SELECT ... FROM employees WHERE employee_id = :b1';

  <span class="bold">-- Open REF CURSOR variable:</span>
  OPEN src_cur FOR sql_stmt USING empno;

  <span class="bold">-- Switch from native dynamic SQL to DBMS_SQL package:</span>
  curid := DBMS_SQL.TO_CURSOR_NUMBER(src_cur);
  DBMS_SQL.DESCRIBE_COLUMNS(curid, colcnt, desctab);

  -- Define columns:
  FOR i IN 1 .. colcnt LOOP
    IF desctab(i).col_type = 2 THEN
      DBMS_SQL.DEFINE_COLUMN(curid, i, numvar);
    ELSIF desctab(i).col_type = 12 THEN
      DBMS_SQL.DEFINE_COLUMN(curid, i, datevar);
      -- statements
    ELSE
      DBMS_SQL.DEFINE_COLUMN(curid, i, namevar, 50);
    END IF;
  END LOOP;

  -- Fetch rows with DBMS_SQL package:
  WHILE DBMS_SQL.FETCH_ROWS(curid) &gt; 0 LOOP
    FOR i IN 1 .. colcnt LOOP
      IF (desctab(i).col_type = 1) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, namevar);
      ELSIF (desctab(i).col_type = 2) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, numvar);
      ELSIF (desctab(i).col_type = 12) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, datevar);
        -- statements
      END IF;
    END LOOP;
  END LOOP;

  DBMS_SQL.CLOSE_CURSOR(curid);
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNPLS521"></a><a id="LNPLS637"></a><a id="LNPLS01109"></a><div class="props_rev_3"><a id="GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C" name="GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C"></a><h3 id="LNPLS-GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C" class="sect3"><span class="enumeration_section">7.4 </span>SQL Injection
               </h3>
               <div>
                  <p>SQL injection maliciously exploits applications that use client-supplied data in SQL statements, thereby gaining unauthorized access to a database to view or manipulate restricted data. </p>
                  <p>This section describes SQL injection vulnerabilities in PL/SQL and explains how to guard against them.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C__GUID-36C59DA9-FB2E-425E-9A86-39F0EB280269">Topics</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="dynamic-sql.html#GUID-9353B33A-460A-4D4F-8FFF-FFF06A8C68D5" title="All SQL injection techniques exploit a single vulnerability: String input is not correctly validated and is concatenated into a dynamic SQL statement.">SQL Injection Techniques</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-4503110E-DF12-487E-B613-6890CC55B6CD" title="If you use dynamic SQL in your PL/SQL applications, you must check the input text to ensure that it is exactly what you expected.">Guards Against SQL Injection</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C__CHDBJCFF">
                     <p class="titleinexample">Example 7-15 Setup for SQL Injection Examples</p>
                     <p>To try the examples, run these statements.</p>
                     <div class="infoboxnote" id="GUID-1E31057E-057F-4A53-B1DD-8BC2C337AA2C__GUID-38E9A2F6-64C1-49E1-B4CF-50224D594ECD">
                        <p class="notep1">Live SQL:</p>
                        <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/lnpls/plsql-dynamic-sql/tdlnplsdynamic3.html" target="_blank">SQL Injection Demo</a></p>
                     </div><pre class="oac_no_warn" dir="ltr">DROP TABLE secret_records;
CREATE TABLE secret_records (
  user_name    VARCHAR2(9),
  service_type VARCHAR2(12),
  value        VARCHAR2(30),
  date_created DATE
);

INSERT INTO secret_records (
  user_name, service_type, value, date_created
)
VALUES ('Andy', 'Waiter', 'Serve dinner at Cafe Pete', SYSDATE);
 
INSERT INTO secret_records (
  user_name, service_type, value, date_created
)
VALUES ('Chuck', 'Merger', 'Buy company XYZ', SYSDATE);</pre></div>
                  <!-- class="example" -->
               </div><a id="LNPLS522"></a><a id="LNPLS638"></a><div class="props_rev_3"><a id="GUID-9353B33A-460A-4D4F-8FFF-FFF06A8C68D5" name="GUID-9353B33A-460A-4D4F-8FFF-FFF06A8C68D5"></a><h4 id="LNPLS-GUID-9353B33A-460A-4D4F-8FFF-FFF06A8C68D5" class="sect4"><span class="enumeration_section">7.4.1 </span>SQL Injection Techniques
                  </h4>
                  <div>
                     <p>All SQL injection techniques exploit a single vulnerability: String input is not correctly validated and is concatenated into a dynamic SQL statement.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9353B33A-460A-4D4F-8FFF-FFF06A8C68D5__GUID-76E36AC5-93EA-43EC-BC1A-A65F13D09B0B">Topics</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="dynamic-sql.html#GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F" title="Statement modification means deliberately altering a dynamic SQL statement so that it runs in a way unintended by the application developer.">Statement Modification</a></p>
                           </li>
                           <li>
                              <p><a href="dynamic-sql.html#GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C" title="Statement injection means that a user appends one or more SQL statements to a dynamic SQL statement.">Statement Injection</a></p>
                           </li>
                           <li>
                              <p><a href="dynamic-sql.html#GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75" title="A less known SQL injection technique uses NLS session parameters to modify or inject SQL statements.">Data Type Conversion</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPLS640"></a><a id="LNPLS639"></a><div class="props_rev_3"><a id="GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F" name="GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F"></a><h5 id="LNPLS-GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F" class="sect5"><span class="enumeration_section">7.4.1.1 </span>Statement Modification
                     </h5>
                     <div>
                        <p><span class="bold">Statement modification</span> means deliberately altering a dynamic SQL statement so that it runs in a way unintended by the application developer. 
                        </p>
                        <p>Typically, the user retrieves unauthorized data by changing the <code class="codeph">WHERE</code> clause of a <code class="codeph">SELECT</code> statement or by inserting a <code class="codeph">UNION</code> <code class="codeph">ALL</code> clause. The classic example of this technique is bypassing password authentication by making a <code class="codeph">WHERE</code> clause always <code class="codeph">TRUE</code>.
                        </p>
                        <div class="example" id="GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F__BJEJABIC">
                           <p class="titleinexample">Example 7-16 Procedure Vulnerable to Statement Modification</p>
                           <p>This example creates a procedure that is vulnerable to statement modification and then invokes that procedure with and without statement modification. With statement modification, the procedure returns a supposedly secret record.</p>
                           <div class="infoboxnote" id="GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F__GUID-38E9A2F6-64C1-49E1-B4CF-50224D594ECD">
                              <p class="notep1">Live SQL:</p>
                              <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/lnpls/plsql-dynamic-sql/tdlnplsdynamic3.html" target="_blank">SQL Injection Demo</a></p>
                           </div>
                           <p>Create vulnerable procedure:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE get_record (
  user_name    IN  VARCHAR2,
  service_type IN  VARCHAR2,
  rec          OUT VARCHAR2
) AUTHID DEFINER
IS
  query VARCHAR2(4000);
BEGIN
  <span class="bold">-- Following SELECT statement is vulnerable to modification</span>
  <span class="bold">-- because it uses concatenation to build WHERE clause.</span>
  query := 'SELECT value FROM secret_records WHERE user_name='''
           || user_name 
           || ''' AND service_type=''' 
           || service_type 
           || '''';
  DBMS_OUTPUT.PUT_LINE('Query: ' || query);
  EXECUTE IMMEDIATE query INTO rec ;
  DBMS_OUTPUT.PUT_LINE('Rec: ' || rec );
END;
/
</pre><p>Demonstrate procedure without SQL injection:</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;

DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_record('Andy', 'Waiter', record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Query: SELECT value FROM secret_records WHERE user_name='Andy' AND
service_type='Waiter'
Rec: Serve dinner at Cafe Pete
 </pre><p>Example of statement modification:</p><pre class="oac_no_warn" dir="ltr">DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_record(
  <span class="bold">'Anybody '' OR service_type=''Merger''--',</span>
  'Anything',
  record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">Query: SELECT value FROM secret_records WHERE user_name='Anybody ' OR</span>
<span class="bold">service_type='Merger'--' AND service_type='Anything'</span>
<span class="bold">Rec: Buy company XYZ</span>

PL/SQL procedure successfully completed.</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNPLS642"></a><a id="LNPLS641"></a><div class="props_rev_3"><a id="GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C" name="GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C"></a><h5 id="LNPLS-GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C" class="sect5"><span class="enumeration_section">7.4.1.2 </span>Statement Injection
                     </h5>
                     <div>
                        <p><span class="bold">Statement injection</span> means that a user appends one or more SQL statements to a dynamic SQL statement. 
                        </p>
                        <p>Anonymous PL/SQL blocks are vulnerable to this technique.</p>
                        <div class="example" id="GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C__BJEHHAFF">
                           <p class="titleinexample">Example 7-17 Procedure Vulnerable to Statement Injection</p>
                           <p>This example creates a procedure that is vulnerable to statement injection and then invokes that procedure with and without statement injection. With statement injection, the procedure deletes the supposedly secret record exposed in <a href="dynamic-sql.html#GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F__BJEJABIC">Example 7-16</a>.
                           </p>
                           <div class="infoboxnote" id="GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C__GUID-38E9A2F6-64C1-49E1-B4CF-50224D594ECD">
                              <p class="notep1">Live SQL:</p>
                              <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/lnpls/plsql-dynamic-sql/tdlnplsdynamic3.html" target="_blank">SQL Injection Demo</a></p>
                           </div>
                           <p>Create vulnerable procedure:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE p (
  user_name    IN  VARCHAR2,
  service_type IN  VARCHAR2
) AUTHID DEFINER
IS
  block1 VARCHAR2(4000);
BEGIN
  <span class="bold">-- Following block is vulnerable to statement injection</span>
  <span class="bold">-- because it is built by concatenation.</span>
  block1 :=
    'BEGIN
    DBMS_OUTPUT.PUT_LINE(''user_name: ' || user_name || ''');'
    || 'DBMS_OUTPUT.PUT_LINE(''service_type: ' || service_type || ''');
    END;';

  DBMS_OUTPUT.PUT_LINE('Block1: ' || block1);
  
  EXECUTE IMMEDIATE block1;
END;
/
</pre><p>Demonstrate procedure without SQL injection:</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;

BEGIN
  p('Andy', 'Waiter');
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Block1: BEGIN
         DBMS_OUTPUT.PUT_LINE('user_name: Andy');
         DBMS_OUTPUT.PUT_LINE('service_type: Waiter');
       END;
user_name: Andy
service_type: Waiter
</pre><p>SQL*Plus formatting command:</p><pre class="oac_no_warn" dir="ltr">COLUMN date_created FORMAT A12;
</pre><p>Query:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">SELECT * FROM secret_records ORDER BY user_name;</span>
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">USER_NAME SERVICE_TYPE VALUE                          DATE_CREATED
--------- ------------ ------------------------------ ------------
Andy      Waiter       Serve dinner at Cafe Pete      28-APR-10
Chuck     Merger       Buy company XYZ                28-APR-10
</pre><p>Example of statement modification:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  p('Anybody', <span class="bold">'Anything'');</span>
  <span class="bold">DELETE FROM secret_records WHERE service_type=INITCAP(''Merger'</span>);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Block1: BEGIN
       DBMS_OUTPUT.PUT_LINE('user_name: Anybody');
       DBMS_OUTPUT.PUT_LINE('service_type: Anything<span class="bold">');</span>
       <span class="bold">DELETE FROM secret_records WHERE service_type=INITCAP('Merger'</span>);
     END;
user_name: Anybody
service_type: Anything

PL/SQL procedure successfully completed.
</pre><p>Query:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">SELECT * FROM secret_records;</span>
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">USER_NAME SERVICE_TYPE VALUE                          DATE_CREATED
--------- ------------ ------------------------------ ------------
Andy      Waiter       Serve dinner at Cafe Pete      18-MAR-09
 
<span class="bold">1 row selected.</span></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNPLS644"></a><a id="LNPLS643"></a><div class="props_rev_3"><a id="GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75" name="GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75"></a><h5 id="LNPLS-GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75" class="sect5"><span class="enumeration_section">7.4.1.3 </span>Data Type Conversion
                     </h5>
                     <div>
                        <p>A less known SQL injection technique uses NLS session parameters to modify or inject SQL statements.</p>
                        <p>A datetime or numeric value that is concatenated into the text of a dynamic SQL statement must be converted to the <code class="codeph">VARCHAR2</code> data type. The conversion can be either implicit (when the value is an operand of the concatenation operator) or explicit (when the value is the argument of the <code class="codeph">TO_CHAR</code> function). This data type conversion depends on the NLS settings of the database session that runs the dynamic SQL statement. The conversion of datetime values uses format models specified in the parameters <code class="codeph">NLS_DATE_FORMAT</code>, <code class="codeph">NLS_TIMESTAMP_FORMAT</code>, or <code class="codeph">NLS_TIMESTAMP_TZ_FORMAT</code>, depending on the particular datetime data type. The conversion of numeric values applies decimal and group separators specified in the parameter <code class="codeph">NLS_NUMERIC_CHARACTERS</code>.
                        </p>
                        <p>One datetime format model is <code class="codeph">"</code><span class="italic"><code class="codeph">text</code></span><code class="codeph">"</code>. The <span class="italic"><code class="codeph">text</code></span> is copied into the conversion result. For example, if the value of <code class="codeph">NLS_DATE_FORMAT</code> is <code class="codeph">'"Month:" Month'</code>, then in June, <code class="codeph">TO_CHAR(SYSDATE)</code> returns <code class="codeph">'Month: June'</code>. The datetime format model can be abused as shown in <a href="dynamic-sql.html#GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75__CHDEIABG">Example 7-18</a>.
                        </p>
                        <div class="example" id="GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75__CHDEIABG">
                           <p class="titleinexample">Example 7-18 Procedure Vulnerable to SQL Injection Through Data Type Conversion</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM secret_records;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">USER_NAME SERVICE_TYPE VALUE                          DATE_CREATE
--------- ------------ ------------------------------ -----------
Andy      Waiter       Serve dinner at Cafe Pete      28-APR-2010
Chuck     Merger       Buy company XYZ                28-APR-2010
</pre><p>Create vulnerable procedure:</p><pre class="oac_no_warn" dir="ltr">-- Return records not older than a month

CREATE OR REPLACE PROCEDURE get_recent_record (
  user_name    IN  VARCHAR2,
  service_type IN  VARCHAR2,
  rec          OUT VARCHAR2
) AUTHID DEFINER
IS
  query VARCHAR2(4000);
BEGIN
  <span class="bold">/* Following SELECT statement is vulnerable to modification</span>
  <span class="bold">   because it uses concatenation to build WHERE clause</span>
  <span class="bold">   and because SYSDATE depends on the value of NLS_DATE_FORMAT. */</span>

  query := 'SELECT value FROM secret_records WHERE user_name='''
           || user_name
           || ''' AND service_type='''
           || service_type
           || ''' AND date_created&gt;'''
           || <span class="bold">(SYSDATE - 30)</span>
           || '''';

  DBMS_OUTPUT.PUT_LINE('Query: ' || query);
  EXECUTE IMMEDIATE query INTO rec;
  DBMS_OUTPUT.PUT_LINE('Rec: ' || rec);
END;
/
</pre><p>Demonstrate procedure without SQL injection:</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;
<span class="bold">ALTER SESSION SET NLS_DATE_FORMAT='DD-MON-YYYY';</span>

DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_recent_record('Andy', 'Waiter', record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Query: SELECT value FROM secret_records WHERE user_name='Andy' AND
service_type='Waiter' AND date_created&gt;'29-MAR-2010'
Rec: Serve dinner at Cafe Pete
  </pre><p>Example of statement modification:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">ALTER SESSION SET NLS_DATE_FORMAT='"'' OR service_type=''Merger"';</span>

DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_recent_record('Anybody', 'Anything', record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">Query: SELECT value FROM secret_records WHERE user_name='Anybody' AND</span>
<span class="bold">service_type='Anything' AND date_created&gt;'' OR service_type='Merger'</span>
<span class="bold">Rec: Buy company XYZ</span>
 
PL/SQL procedure successfully completed.</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="LNPLS645"></a><div class="props_rev_3"><a id="GUID-4503110E-DF12-487E-B613-6890CC55B6CD" name="GUID-4503110E-DF12-487E-B613-6890CC55B6CD"></a><h4 id="LNPLS-GUID-4503110E-DF12-487E-B613-6890CC55B6CD" class="sect4"><span class="enumeration_section">7.4.2 </span>Guards Against SQL Injection
                  </h4>
                  <div>
                     <p>If you use dynamic SQL in your PL/SQL applications, you must check the input text to ensure that it is exactly what you expected. </p>
                     <p>You can use the following techniques:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="dynamic-sql.html#GUID-EF9233BB-9570-453D-96EB-E13F43B10596" title="The most effective way to make your PL/SQL code invulnerable to SQL injection attacks is to use bind variables.">Bind Variables</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A" title="Always have your program validate user input to ensure that it is what is intended.">Validation Checks</a></p>
                        </li>
                        <li>
                           <p><a href="dynamic-sql.html#GUID-4DB96B62-75BE-424E-B6F7-BB0597FCAA58" title="Using explicit locale-independent format models to construct SQL is recommended not only from a security perspective, but also to ensure that the dynamic SQL statement runs correctly in any globalization environment.">Explicit Format Models</a></p>
                        </li>
                     </ul>
                  </div><a id="LNPLS647"></a><a id="LNPLS646"></a><div class="props_rev_3"><a id="GUID-EF9233BB-9570-453D-96EB-E13F43B10596" name="GUID-EF9233BB-9570-453D-96EB-E13F43B10596"></a><h5 id="LNPLS-GUID-EF9233BB-9570-453D-96EB-E13F43B10596" class="sect5"><span class="enumeration_section">7.4.2.1 </span>Bind Variables
                     </h5>
                     <div>
                        <p>The most effective way to make your PL/SQL code invulnerable to SQL injection attacks is to use bind variables. </p>
                        <p>The database uses the values of bind variables exclusively and does not interpret their contents in any way. (Bind variables also improve performance.)</p>
                        <div class="example" id="GUID-EF9233BB-9570-453D-96EB-E13F43B10596__BJEIJEBJ">
                           <p class="titleinexample">Example 7-19 Bind Variables Guarding Against SQL Injection</p>
                           <p>The procedure in this example is invulnerable to SQL injection because it builds the dynamic SQL statement with bind variables (not by concatenation as in the vulnerable procedure in <a href="dynamic-sql.html#GUID-0ED23CF7-1967-4C06-88CF-B3BB4AE7687F__BJEJABIC">Example 7-16</a>). The same binding technique fixes the vulnerable procedure shown in <a href="dynamic-sql.html#GUID-BA52854E-DAA5-497E-82B0-1686D4ED7C5C__BJEHHAFF">Example 7-17</a>.
                           </p>
                           <p>Create invulnerable procedure:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE get_record_2 (
  user_name    IN  VARCHAR2,
  service_type IN  VARCHAR2,
  rec          OUT VARCHAR2
) AUTHID DEFINER
IS
  query VARCHAR2(4000);
BEGIN
  query := 'SELECT value FROM secret_records
            WHERE user_name=<span class="bold">:a</span>
            AND service_type=<span class="bold">:b</span>';
 
  DBMS_OUTPUT.PUT_LINE('Query: ' || query);
 
  EXECUTE IMMEDIATE query INTO rec <span class="bold">USING user_name, service_type</span>;
 
  DBMS_OUTPUT.PUT_LINE('Rec: ' || rec);
END;
/
 </pre><p>Demonstrate procedure without SQL injection:</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;
DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_record_2('Andy', 'Waiter', record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Query: SELECT value FROM secret_records
            WHERE user_name=<span class="bold">:a</span>
            AND service_type=<span class="bold">:b</span>
Rec: Serve dinner at Cafe Pete
 
PL/SQL procedure successfully completed.
 </pre><p>Try statement modification:</p><pre class="oac_no_warn" dir="ltr">DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_record_2('Anybody '' OR service_type=''Merger''--',
               'Anything',
               record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Query: SELECT value FROM secret_records
            WHERE user_name=<span class="bold">:a</span>
            AND service_type=<span class="bold">:b</span>
DECLARE
*
<span class="bold">ERROR at line 1:</span>
<span class="bold">ORA-01403: no data found</span>
<span class="bold">ORA-06512: at "HR.GET_RECORD_2", line 15</span>
<span class="bold">ORA-06512: at line 4</span></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNPLS649"></a><a id="LNPLS648"></a><div class="props_rev_3"><a id="GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A" name="GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A"></a><h5 id="LNPLS-GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A" class="sect5"><span class="enumeration_section">7.4.2.2 </span>Validation Checks
                     </h5>
                     <div>
                        <p>Always have your program validate user input to ensure that it is what is intended.</p>
                        <p>For example, if the user is passing a department number for a <code class="codeph">DELETE</code> statement, check the validity of this department number by selecting from the <code class="codeph">departments</code> table. Similarly, if a user enters the name of a table to be deleted, check that this table exists by selecting from the static data dictionary view <code class="codeph">ALL_TABLES</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A__GUID-EEBA64CB-B62B-4CE1-9661-F0AB2AC2E021">
                           <p class="notep1">Caution:</p>
                           <p>When checking the validity of a user name and its password, always return the same error regardless of which item is invalid. Otherwise, a malicious user who receives the error message "invalid password" but not "invalid user name" (or the reverse) can realize that he or she has guessed one of these correctly.</p>
                        </div>
                        <p>In validation-checking code, the subprograms in the <code class="codeph">DBMS_ASSERT</code> package are often useful. For example, you can use the <code class="codeph">DBMS_ASSERT</code>.<code class="codeph">ENQUOTE_LITERAL</code> function to enclose a string literal in quotation marks, as <a href="dynamic-sql.html#GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A__CHDGJEGD">Example 7-20</a> does. This prevents a malicious user from injecting text between an opening quotation mark and its corresponding closing quotation mark.
                        </p>
                        <div class="infoboxnote" id="GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A__GUID-4AD6631A-88F3-4964-9000-7C2FB39EC9B2">
                           <p class="notep1">Caution:</p>
                           <p>Although the <code class="codeph">DBMS_ASSERT</code> subprograms are useful in validation code, they do not replace it. For example, an input string can be a qualified SQL name (verified by <code class="codeph">DBMS_ASSERT</code>.<code class="codeph">QUALIFIED_SQL_NAME</code>) and still be a fraudulent password.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A__GUID-B11BBB2F-639D-4520-9A31-8F6724B0DA3E">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_ASSERT.html#ARPLS231" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about <code class="codeph">DBMS_ASSERT</code> subprograms
                           </p>
                        </div>
                        <div class="example" id="GUID-44F80A6B-99B4-4DB7-8BF8-B17994AD197A__CHDGJEGD">
                           <p class="titleinexample">Example 7-20 Validation Checks Guarding Against SQL Injection</p>
                           <p>In this example, the procedure <code class="codeph">raise_emp_salary</code> checks the validity of the column name that was passed to it before it updates the <code class="codeph">employees</code> table, and then the anonymous block invokes the procedure from both a dynamic PL/SQL block and a dynamic SQL statement.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE raise_emp_salary (
  column_value  NUMBER,
  emp_column    VARCHAR2,
  amount NUMBER ) AUTHID DEFINER
IS
  v_column  VARCHAR2(30);
  sql_stmt  VARCHAR2(200);
BEGIN
  <span class="bold">-- Check validity of column name that was given as input:</span>
  SELECT column_name INTO v_column
  FROM USER_TAB_COLS
  WHERE TABLE_NAME = 'EMPLOYEES'
  AND COLUMN_NAME = emp_column;

  sql_stmt := 'UPDATE employees SET salary = salary + :1 WHERE '
    || <span class="bold">DBMS_ASSERT.ENQUOTE_NAME(v_column,FALSE)</span> || ' = :2';

  EXECUTE IMMEDIATE sql_stmt USING amount, column_value;

  <span class="bold">-- If column name is valid:</span>
  IF SQL%ROWCOUNT &gt; 0 THEN
    DBMS_OUTPUT.PUT_LINE('Salaries were updated for: '
      || emp_column || ' = ' || column_value);
  END IF;

  <span class="bold">-- If column name is not valid:</span>
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      DBMS_OUTPUT.PUT_LINE ('Invalid Column: ' || emp_column);
END raise_emp_salary;
/

DECLARE
  plsql_block  VARCHAR2(500);
BEGIN
  <span class="bold">-- Invoke raise_emp_salary from a dynamic PL/SQL block:</span>
  plsql_block :=
    'BEGIN raise_emp_salary(:cvalue, :cname, :amt); END;';

  EXECUTE IMMEDIATE plsql_block
    USING 110, 'DEPARTMENT_ID', 10;

  <span class="bold">-- Invoke raise_emp_salary from a dynamic SQL statement:</span>
  EXECUTE IMMEDIATE 'BEGIN raise_emp_salary(:cvalue, :cname, :amt); END;'
    USING 112, 'EMPLOYEE_ID', 10;
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Salaries were updated for: DEPARTMENT_ID = 110
Salaries were updated for: EMPLOYEE_ID = 112</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNPLS651"></a><a id="LNPLS650"></a><div class="props_rev_3"><a id="GUID-4DB96B62-75BE-424E-B6F7-BB0597FCAA58" name="GUID-4DB96B62-75BE-424E-B6F7-BB0597FCAA58"></a><h5 id="LNPLS-GUID-4DB96B62-75BE-424E-B6F7-BB0597FCAA58" class="sect5"><span class="enumeration_section">7.4.2.3 </span>Explicit Format Models
                     </h5>
                     <div>
                        <p>Using explicit locale-independent format models to construct SQL is recommended not only from a security perspective, but also to ensure that the dynamic SQL statement runs correctly in any globalization environment.</p>
                        <p>If you use datetime and numeric values that are concatenated into the text of a SQL or PL/SQL statement, and you cannot pass them as bind variables, convert them to text using explicit format models that are independent from the values of the NLS parameters of the running session. Ensure that the converted values have the format of SQL datetime or numeric literals. </p>
                        <div class="example" id="GUID-4DB96B62-75BE-424E-B6F7-BB0597FCAA58__CHDFIIEF">
                           <p class="titleinexample">Example 7-21 Explicit Format Models Guarding Against SQL Injection</p>
                           <p>This procedure is invulnerable to SQL injection because it converts the datetime parameter value, <code class="codeph">SYSDATE</code> <code class="codeph">-</code> <code class="codeph">30</code>, to a <code class="codeph">VARCHAR2</code> value explicitly, using the <code class="codeph">TO_CHAR</code> function and a locale-independent format model (not implicitly, as in the vulnerable procedure in <a href="dynamic-sql.html#GUID-9D45630C-ECBF-409B-91C0-D85CCC3FBD75__CHDEIABG">Example 7-18</a>).
                           </p>
                           <p>Create invulnerable procedure:</p><pre class="oac_no_warn" dir="ltr">-- Return records not older than a month

CREATE OR REPLACE PROCEDURE get_recent_record (
  user_name     IN  VARCHAR2,
  service_type  IN  VARCHAR2,
  rec           OUT VARCHAR2
) AUTHID DEFINER
IS
  query VARCHAR2(4000);
BEGIN
  /* Following SELECT statement is vulnerable to modification
     because it uses concatenation to build WHERE clause. */

  query := 'SELECT value FROM secret_records WHERE user_name='''
           || user_name 
           || ''' AND service_type=''' 
           || service_type 
           || ''' AND date_created&gt; DATE ''' 
           || <span class="bold">TO_CHAR(SYSDATE - 30,'YYYY-MM-DD'</span>) 
           || '''';

  DBMS_OUTPUT.PUT_LINE('Query: ' || query);
  EXECUTE IMMEDIATE query INTO rec;
  DBMS_OUTPUT.PUT_LINE('Rec: ' || rec);
END;
/
</pre><p>Try statement modification:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">ALTER SESSION SET NLS_DATE_FORMAT='"'' OR service_type=''Merger"';</span> 

DECLARE
  record_value VARCHAR2(4000);
BEGIN
  get_recent_record('Anybody', 'Anything', record_value);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">Query: SELECT value FROM secret_records WHERE user_name='Anybody' AND</span> 
<span class="bold">service_type='Anything' AND date_created&gt; DATE '2010-03-29'</span> 
<span class="bold">DECLARE</span> 
<span class="bold">*</span> 
<span class="bold">ERROR at line 1:</span> 
<span class="bold">ORA-01403: no data found</span> 
<span class="bold">ORA-06512: at "SYS.GET_RECENT_RECORD", line 21</span> 
<span class="bold">ORA-06512: at line 4</span> </pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='09691.sharding-loading-data.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">
      <meta name="description" content="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">
      <title>Migrating Data to a Sharded Database</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Using Oracle Sharding">
      <meta property="og:description" content="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Using Oracle Sharding">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="using-oracle-sharding.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-14T12:19:13-08:00">
      <meta name="dcterms.title" content="Using Oracle Sharding">
      <meta name="dcterms.dateCopyrighted" content="2018, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E87088-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="sharding-deployment.html" title="Previous" type="text/html">
      <link rel="next" href="sharding-lifecycle-management.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="SHARD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sharding-deployment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="sharding-lifecycle-management.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Using Oracle Sharding</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Migrating Data to a Sharded Database</li>
            </ol>
            <a id="GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" name="GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0"></a>
            
            <h2 id="SHARD-GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" class="sect2"><span class="enumeration_chapter">9 </span>Migrating Data to a Sharded Database
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.</p>
               <p>These data loading methods assume that you are using a non-sharded Oracle database at the time you want to migrate to a sharded one. These methods proposed also apply to migrating data from other database systems, as well as the first time database users.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-041069C8-FA7B-4BA5-BFB8-B5A949DA12A9">About Migrating Data to a Sharded Database</a><br>After Oracle Sharding software installation, and sharded database configuration and creation, you can migrate your data to a sharded database.
                  </li>
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-6E455646-F4AA-4992-B50B-58A1290355FE">General Guidelines for Loading Data into a Sharded Database</a><br>Transitioning from non-sharded to a sharded database involves moving the data from non-sharded tables to sharded and duplicated tables. Moving data from non-sharded tables to duplicated tables does not introduce any complexity, but moving data from non-sharded tables to sharded tables requires special attention.
                  </li>
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-DD36B05A-AC5F-488D-9012-70043ED3E7EE">Migrating the Schema</a><br>Before the existing database can be migrated to the sharded database, you must decide how to organize the sharded database, including the number of shards and the replication strategy, and you must decide which tables in the application are sharded and which tables are duplicated tables. For the sharded tables, you must decide the sharding method as well as the parent-child relationships between the sharded tables in the table family.
                  </li>
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-18D1592D-3A41-4C81-ABEF-86527A610A3D">Preparing the Source Database</a><br>To make the transition to a sharded database schema smoother, you can modify the source, non-sharded database so that it matches the table definitions in the target sharded database.
                  </li>
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-59B5EABA-3C10-4329-B662-9E17F2303498">Preparing the Target Sharded Database</a><br>Before you start data migration to the sharded database, you must create the sharded database schema according to your design.
                  </li>
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F">Migrating Your Data</a><br>After you create the target sharded database with a single shard, or multiple shards, and you have your sharded and duplicated tables defined, you can start migrating your data into the sharded database.
                  </li>
                  <li class="ulchildlink"><a href="sharding-loading-data.html#GUID-FD50835F-514F-4E74-95D3-BD0B4A6B0F20">Migrating Your Application</a><br>The sharded database operating environment empowers applications with direct access to shards. This feature provides true linear scalability, but it comes with a small price—a slight change to the application code.
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-041069C8-FA7B-4BA5-BFB8-B5A949DA12A9" name="GUID-041069C8-FA7B-4BA5-BFB8-B5A949DA12A9"></a><h3 id="SHARD-GUID-041069C8-FA7B-4BA5-BFB8-B5A949DA12A9" class="sect3"><span class="enumeration_section">9.1 </span>About Migrating Data to a Sharded Database
               </h3>
               <div>
                  <p>After Oracle Sharding software installation, and sharded database configuration and creation, you can migrate your data to a sharded database.</p>
                  <p>The following are the high level steps to migrate to a sharded database environment.</p>
                  <ol>
                     <li> Design and create the sharded database schema.</li>
                     <li>Migrate the data.</li>
                     <li>Migrate the application.</li>
                  </ol>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-041069C8-FA7B-4BA5-BFB8-B5A949DA12A9__GUID-9D648D57-1DC0-4351-BFAE-DE1153704986">
                     <p class="notep1">See Also:</p>
                     <p><a href="sharding-overview.html#GUID-DDF69235-8761-44DA-98AC-3080A239E63E" title="Oracle Sharding is for OLTP applications that are suitable for a sharded database.">Application Suitability for Sharding</a> to familiarize yourself with the constraints of migration to a sharded database applications.
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE" name="GUID-6E455646-F4AA-4992-B50B-58A1290355FE"></a><h3 id="SHARD-GUID-6E455646-F4AA-4992-B50B-58A1290355FE" class="sect3"><span class="enumeration_section">9.2 </span>General Guidelines for Loading Data into a Sharded Database
               </h3>
               <div>
                  <p>Transitioning from non-sharded to a sharded database involves moving the data from non-sharded tables to sharded and duplicated tables. Moving data from non-sharded tables to duplicated tables does not introduce any complexity, but moving data from non-sharded tables to sharded tables requires special attention.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__GUID-4C5D6A0D-884E-4B75-8BC6-DDFBEB05E343">Loading Data into Duplicated Tables</p>
                     <p>Loading data into a duplicated table can be accomplished using any existing database tools: Data Pump, SQL Loader, or plain SQL. The data must be loaded using the shard catalog (coordinator) database node. In other words, the entire contents of the duplicated table is contained in the shard catalog database. Because the contents of the duplicated table is fully replicated to the database shards using materialized views, loading a duplicated table may take longer than loading the same data into a non-sharded table.</p>
                     <div class="figure" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__FIG_JCC_F5G_5GB">
                        <p class="titleinfigure">Figure 9-1 Loading Duplicated Tables</p><br><div class="imageleft"><img class="imageleft" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__IMAGE_KCC_F5G_5GB" src="img/load_duplicate_tables.png" alt="Description of Figure 9-1 follows" title="Description of Figure 9-1 follows" longdesc="img_text/load_duplicate_tables.html"><br><a href="img_text/load_duplicate_tables.html">Description of "Figure 9-1 Loading Duplicated Tables"</a></div><br></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__GUID-51AE4E26-A9F9-4055-AFD7-EE916519E5B1">Loading Data into Sharded Tables</p>
                     <p>When loading a sharded table, each database shard accommodates a distinct subset (shard) of the entire data set, so you must split (shuffle) the data before loading each subset to a particular shard.</p>
                     <div class="figure" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__FIG_OD1_CVG_5GB">
                        <p class="titleinfigure">Figure 9-2 Loading Sharded Tables Using the Shard Catalog</p><br><div class="imageleft"><img class="imageleft" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__IMAGE_PD1_CVG_5GB" src="img/load_sharded_tables_coordinator.png" alt="Description of Figure 9-2 follows" title="Description of Figure 9-2 follows" longdesc="img_text/load_sharded_tables_coordinator.html"><br><a href="img_text/load_sharded_tables_coordinator.html">Description of "Figure 9-2 Loading Sharded Tables Using the Shard Catalog"</a></div><br></div>
                     <!-- class="figure" -->
                     <p>You must use the Oracle Data Pump utility to load the data across database shards in subsets. Consider the following two options: </p>
                     <ul style="list-style-type: disc;" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__UL_D45_C42_KGB">
                        <li>Load the data through the sharding coordinator (catalog) node, as illustrated above.</li>
                        <li>Load the data directly to the database shards, as illustrated below.</li>
                     </ul>
                     <div class="figure" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__FIG_GY2_TVG_5GB">
                        <p class="titleinfigure">Figure 9-3 Loading Sharded Tables Directly to the Database Shards</p><br><div class="imageleft"><img class="imageleft" id="GUID-6E455646-F4AA-4992-B50B-58A1290355FE__IMAGE_HY2_TVG_5GB" src="img/load_sharded_tables_direct.png" alt="Description of Figure 9-3 follows" title="Description of Figure 9-3 follows" longdesc="img_text/load_sharded_tables_direct.html"><br><a href="img_text/load_sharded_tables_direct.html">Description of "Figure 9-3 Loading Sharded Tables Directly to the Database Shards"</a></div><br></div>
                     <!-- class="figure" -->
                     <p>Loading the data into a sharded database using the sharding coordinator is slower than loading the entire data set into a non-sharded table, because of the splitting logic running on the sharding coordinator (catalog) node and additional overhead of pushing the data to the shards. </p>
                     <p>Loading the data directly into the database shards is much faster, because each shard is loaded separately. That is, by running Data Pump on each shard, you can complete the data loading operation within the period of time needed to load the shard with the maximum subset of the entire data set. On average, the loading time can be approximated as the time needed to load the entire data set into a non-sharded database, divided by the number of shards in the sharded database.</p>
                     <p>Rather than relying on the Oracle Data Pump utility to split the load data set in distinct subsets, you can use an open source shard splitting library that integrates the splitting (shuffling) logic into your application. The shard splitting library source code, as well as sample use, is available in the Oracle Sharding Tools Library at <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=sharding_tools_library" target="_blank">https://github.com/oracle/db-sharding/</a>. Based on this shard splitting library, Oracle develops a generic streaming load library for the use in the Oracle Cloud. At this time the streaming load library is only available upon request.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-DD36B05A-AC5F-488D-9012-70043ED3E7EE" name="GUID-DD36B05A-AC5F-488D-9012-70043ED3E7EE"></a><h3 id="SHARD-GUID-DD36B05A-AC5F-488D-9012-70043ED3E7EE" class="sect3"><span class="enumeration_section">9.3 </span>Migrating the Schema
               </h3>
               <div>
                  <p>Before the existing database can be migrated to the sharded database, you must decide how to organize the sharded database, including the number of shards and the replication strategy, and you must decide which tables in the application are sharded and which tables are duplicated tables. For the sharded tables, you must decide the sharding method as well as the parent-child relationships between the sharded tables in the table family.</p>
                  <p>The schema migration to a sharded database environment is illustrated using a sample application, which is defined over a data model and imposed constraints. We analyze how migration to a sharded database affects the application using sample program code. The following figure shows the sample application data model</p>
                  <div class="figure" id="GUID-DD36B05A-AC5F-488D-9012-70043ED3E7EE__GUID-3D6A995B-26D2-4857-9631-8FCFBE978202">
                     <p class="titleinfigure">Figure 9-4 </p><img src="img/sample_schema.png" alt="Description of Figure 9-4 follows" title="Description of Figure 9-4 follows" longdesc="img_text/sample_schema.html"><br><a href="img_text/sample_schema.html">Description of "Figure 9-4 "</a></div>
                  <!-- class="figure" -->
                  <p>The data model comprises four tables: Customers, Orders, StockItems, and LineItems, and the model enforces the following primary key constraints.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Customer.(CustNo)</p>
                     </li>
                     <li>
                        <p>Orders.(PONo)</p>
                     </li>
                     <li>
                        <p>StockItems.(StockNo)</p>
                     </li>
                     <li>
                        <p>LineItems.(LineNo, PONo)</p>
                     </li>
                  </ul>
                  <p>The data model defines the following referential integrity constrains.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Customers.CustNo -&gt; Orders.CustNo </p>
                     </li>
                     <li>
                        <p>Orders.PONo -&gt; LineItems.PONo</p>
                     </li>
                     <li>
                        <p>StockItems.StockNo -&gt; LineItems.StockNo</p>
                     </li>
                  </ul>
                  <p>The following DDL statements create the sample application database schema definitions:</p><pre class="pre codeblock"><code>CREATE TABLE Customers (
 CustNo     NUMBER(3) NOT NULL,
 CusName    VARCHAR2(30) NOT NULL,
 Street     VARCHAR2(20) NOT NULL,
 City       VARCHAR2(20) NOT NULL,
 State      CHAR(2) NOT NULL,
 Zip        VARCHAR2(10) NOT NULL,
 Phone      VARCHAR2(12),
 PRIMARY KEY (CustNo)
);

CREATE TABLE Orders (
 PoNo       NUMBER(5),
 CustNo     NUMBER(3) REFERENCES Customers,
 OrderDate  DATE,
 ShipDate   DATE,
 ToStreet   VARCHAR2(20),
 ToCity     VARCHAR2(20),
 ToState    CHAR(2),
 ToZip      VARCHAR2(10),
 PRIMARY KEY (PoNo)
);

CREATE TABLE StockItems (
 StockNo     NUMBER(4) PRIMARY KEY
 Description VARCHAR2(20),
 Price       NUMBER(6,2)
);

CREATE TABLE LineItems (
 LineNo      NUMBER(2),
 PoNo        NUMBER(5) REFERENCES Orders,
 StockNo     NUMBER(4) REFERENCES StockItems,
 Quantity    NUMBER(2),
 Discount    NUMBER(4,2),
 PRIMARY KEY (LineNo, PoNo)
);</code></pre><div class="section">
                     <p class="subhead2" id="GUID-DD36B05A-AC5F-488D-9012-70043ED3E7EE__GUID-B5F2DD8A-C80D-4520-9858-C009749FE400">Sharding Key</p>
                     <p>Sharding is a database scaling technique based on horizontal partitioning across multiple independent Oracle databases. The database requests are routed to appropriate shard database based on the value of sharding key column. The sharding design goal is to select a sharding key which maximizes single shard operations and minimizes or eliminates cross shard operations.</p>
                     <p>Based on the primary key to foreign key functional dependencies identified in the sample application data model, the following table family is formed.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Customers &#x2013; parent table</p>
                        </li>
                        <li>
                           <p>Orders &#x2013; child table</p>
                        </li>
                        <li>
                           <p>Lineitems &#x2013; grandchild table</p>
                        </li>
                     </ul>
                     <p>The remaining StockItems table is simply a lookup table mapping stock item number to stock item description and price (StockNo -&gt; (Description, Price)).</p>
                     <p>Sharded database definitions require the following table DDL statements for members of the table family using reference partitioning, plus the additional DDL statement defining the StockItems lookup table:</p><pre class="pre codeblock"><code>CREATE <span class="bold">SHARDED</span> TABLE Customers (
 CustNo     NUMBER(3) NOT NULL,
 CusName    VARCHAR2(30) NOT NULL,
 Street     VARCHAR2(20) NOT NULL,
 City       VARCHAR2(20) NOT NULL,
 State      CHAR(2) NOT NULL,
 Zip        VARCHAR2(10) NOT NULL,
 Phone      VARCHAR2(12),
 CONSTRAINT RootPK PRIMARY KEY (CustNo)
)
<span class="bold">PARTITION BY CONSISTENT HASH </span>(CustNo)
PARTITIONS AUTO
TABLESPACE SET ts1
;

CREATE <span class="bold">SHARDED</span> TABLE Orders (
 PoNo       NUMBER(5) NOT NULL,
 CustNo     NUMBER(3) NOT NULL,
 OrderDate  DATE,
 ShipDate   DATE,
 ToStreet   VARCHAR2(20),
 ToCity     VARCHAR2(20),
 ToState    CHAR(2),
 ToZip      VARCHAR2(10),
 CONSTRAINT OrderPK PRIMARY KEY (CustNo, PoNo)
 CONSTRAINT CustFK Foreign Key (CustNo) REFERENCES Cusomters (CustNo)
)
<span class="bold">PARTITION BY REFERENCE</span> (CustFK)
;

CREATE <span class="bold">DUPLICATED</span> TABLE StockItems (
 StockNo     NUMBER(4) PRIMARY KEY
 Description VARCHAR2(20),
 Price       NUMBER(6,2)
);

CREATE <span class="bold">SHARDED</span> TABLE LineItems (
 LineNo      NUMBER(2) NOT NULL,
 PoNo        NUMBER(5) NOT NULL,
 StockNo     NUMBER(4) REFERENCES StockItems,
 Quantity    NUMBER(2),
 Discount    NUMBER(4,2),
 CONSTRAINT LinePK PRIMARY KEY (<span class="bold">CustNo</span>, LineNo, PoNo)
 CONSTRAINT LineFK FOREIGN KEY (<span class="bold">CustNo</span>, PoNo) REFERENCES Orders (CustNo, PoNo)
)
<span class="bold">PARTITION BY REFERENCE</span> (LineFK)
;</code></pre><p>After comparing the sharded database DDL, shown above, to the original (non-sharded) database tables, you notice the following structural table changes (appearing in large bold italic).</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">CREATE TABLE</code> statement for tables in the table family includes the additional <code class="codeph">SHARDED</code> keyword.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">CREATE TABLE</code> statement for the lookup table includes additional keyword, <code class="codeph">DUPLICATED</code>.
                           </p>
                        </li>
                        <li>
                           <p>All tables in the table family contain the sharding key column, CustNo, as the leading column of the primary key. This is the sharding-specific de-normalization, which expands a composite primary key at every level of the table family hierarchy to include the immediate parent key, also known as the level key, as the leading component.</p>
                        </li>
                        <li>
                           <p>Sharded tables are <code class="codeph">PARTITIONED BY</code> the sharding key column. In this particular case, the root table of the family is partitioned by <code class="codeph">CONSISTENT HASH</code>. This partitioning schema propagates to lower hierarchy levels <code class="codeph">BY REFERENCE</code> (reference partitioning). The data partitioning by <code class="codeph">CONSISTENT HASH</code> is called the system-managed sharding method (as opposed to user-defined sharding).
                           </p>
                        </li>
                        <li>
                           <p>In system-managed sharding, tablespace sets are defined for sharded tables. The first set of tablespaces is used for <code class="codeph">SHARDED</code> tables. A tablespace set is used in a sharded database as a logical storage unit for one or more sharded tables and indexes. A tablespace set consists of multiple tablespaces distributed across shards in a shardspace. The database automatically creates the tablespaces in a tablespace set.  The number of tablespaces is determined automatically and is equal to the number of chunks in the corresponding shardspace.
                           </p>
                           <p><code class="codeph">CREATE TABLESPACE SET tbs1; </code> for the sharded tables
                           </p>
                           <p>In our example, Customers, Orders, and LineItems are placed in tablespace set tbs1. That means that corresponding partitions of the three tables in the table family are stored in the same tablespace set, tbs1 (partition by reference). However, it is possible to specify separate tablespace sets for each table.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="sharding-physical-organization.html#GUID-3D0475BE-3F6F-4D2E-8B2E-B1161DBB1A78" title="Distribution of partitions across shards is achieved by creating partitions in tablespaces that reside on different shards.">Partitions, Tablespaces, and Chunks</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-18D1592D-3A41-4C81-ABEF-86527A610A3D" name="GUID-18D1592D-3A41-4C81-ABEF-86527A610A3D"></a><h3 id="SHARD-GUID-18D1592D-3A41-4C81-ABEF-86527A610A3D" class="sect3"><span class="enumeration_section">9.4 </span>Preparing the Source Database
               </h3>
               <div>
                  <p>To make the transition to a sharded database schema smoother, you can modify the source, non-sharded database so that it matches the table definitions in the target sharded database.</p>
                  <p>Ideally, the table definitions (table name, column names, and their data types) in the target sharded database and the table definitions in the source database would be exactly the same. However, as part of the transition to a sharded database, you might need to modify the table definitions for use in the sharded database. If that is the case, you can modify the source, non-sharded database so that it matches the table definitions in the new sharded database. Depending on the extent of changes, this can also require changes to the application code. By modifying the source database schema, so that it matches the target sharded database schema ahead of the migration process, you provide conditions for uninterrupted transition from original non-sharded to the new sharded database. These preparations are prerequisites for minimum downtime, if downtime would be incurred at all. Also, as illustrated by the example application, the preparation for migration is a seamless and easily reversible process. The activities you undertake to prepare the source database are highly desirable, but not required. If you are, for whatever reason, not able to modify your source database operating environment, you can skip this topic.</p>
                  <p>The steps shown here follow the same sample schema that was defined in the previous topic.</p>
                  <p>In order to migrate the sample database, you must add the sharding key column, CustNo, to the LineItems table in the source database using <code class="codeph">ALTER TABLE</code> , as shown in this example.
                  </p><pre class="pre codeblock"><code>ALTER TABLE LineItems ADD (CustNo NUMBER(3));</code></pre><p>With this additional column, the row data layout in the source table and the desired layout in the target sharded table are identical. Now you are ready to prime this new column with the matching data. Values in the additional sharding key column, CustNo, in the LineItems table must be derived from Orders joining LineItems in a parent-child relationship.</p><pre class="pre codeblock"><code>SELECT Orders.CustNo FROM Orders JOIN LineItems ON Orders.PONo = LineItems.PONo;</code></pre><p>In this example, use the <code class="codeph">MERGE</code> statement to populate the CustNo column. You could also use the standard SQL to accomplish the same goal. In the example shown here, the <code class="codeph">MERGE</code> statement would look as follows.
                  </p><pre class="pre codeblock"><code>SQL&gt; BEGIN
  2  MERGE INTO LineItems l
  3  USING Orders o
  4  ON (l.PONo = o.PONo)
  5  WHEN MATCHED THEN
  6  UPDATE SET l.CustNo = o.CustNo;
  7  END;
  8  /</code></pre><p>You may discover at this point that there is a referential integrity to be maintained for the CustNo column. To make sure the new column is populated correctly, you should add a <code class="codeph">NOT NULL</code> constraint after executing the <code class="codeph">MERGE</code> statement., as shown here.
                  </p><pre class="pre codeblock"><code>ALTER TABLE LineItems MODIFY CustNo NOT NULL;</code></pre><p>By running the above <code class="codeph">MERGE</code> statement you bring the LineItems table row layout and the row data to the desired state. The additional CustNo column makes the LineItems table sharded the same way as the root of the table family (Customers). You might consider using this change as the one of the last actions before the actual migration. Otherwise, you must maintain this new column within your application. Consequently, you must also maintain the referential integrity for the added sharding key column in your existing database. The referential integrity constraint for the matching CustNo columns is defined in the LineItems table as shown here.
                  </p><pre class="pre codeblock"><code>ALTER TABLE LineItems ADD CONSTRAINT LineFk FOREIGN KEY (CustNo, PONo) REFERENCES Orders (CustNo, PONo);</code></pre><p>Before changing the referential integrity constraint on the LineItems table you must drop the existing <code class="codeph">FOREIGN KEY</code> constraint referencing the Orders table. This could be accomplished safely by enclosing the <code class="codeph">DROP CONSTRAINT</code> followed by <code class="codeph">ADD CONSTRAINT</code> statements within <code class="codeph">ALTER TABLE LineItems READ ONLY;</code> and <code class="codeph">ALTER TABLE LineItems READ WRITE;</code>, or simply by locking the table with <code class="codeph">LOCK TABLE LineItems IN SHARE MODE</code>for the duration of the constraint modifications. 
                  </p>
                  <p>As a result of adding the CustNo column as a part of the foreign key definition in the LineItems table, you must modify the primary key on the Orders table. Changing the primary key, in turn, requires rebuilding indexes, and this may take some time to complete. This effort makes sense only if you plan to run your application against this new schema for some period of time before migrating to the sharded database.</p>
                  <p>The following example illustrates changing the LineItems and Orders schemata as a result of adding the sharding key to the LineItems table. Prior to dropping the existing foreign key constraint on the LineItems table, and primary key constraint on the Orders table, you must retrieve the respective constraint names as shown here.</p><pre class="pre codeblock"><code>SQL&gt; SELECT a.table_name, a.column_name, a.constraint_name
  2  FROM ALL_CONS_COLUMNS A, ALL_CONSTRAINTS C
  3  WHERE A.CONSTRAINT_NAME = C.CONSTRAINT_NAME
  4  and a.table_name='LINEITEMS' and C.CONSTRAINT_TYPE = 'R';

LINEITEMS
PONO
SYS_C009087

LINEITEMS
STOCKNO
SYS_C009088

SQL&gt; SELECT cols.table_name, cols.column_name, cols.constraint_name, cols.position
  2  FROM all_constraints cons, all_cons_columns cols
  3  WHERE cons.constraint_type = 'P'
  4  AND cons.constraint_name = cols.constraint_name
  5  AND cols.table_name = 'ORDERS'
  6  ORDER BY cols.table_name, cols.position;

ORDERS
ORDER_ID
ORDER_PK
         1
ORDERS
PONO
SYS_C009148
         1

SQL&gt; ALTER TABLE LineItems READ ONLY;

Table altered.

SQL&gt; ALTER TABLE Orders READ ONLY;

Table altered.

SQL&gt; ALTER TABLE LineItems DROP CONSTRAINT SYS_C009087;

Table altered.

SQL&gt; ALTER TABLE ORDERS DROP CONSTRAINT SYS_C009148;

Table altered.

SQL&gt; ALTER TABLE ORDERS ADD CONSTRAINT order_pk PRIMARY KEY (CustNo, PONo);

Table altered.

SQL&gt; ALTER TABLE LineItems ADD CONSTRAINT LineFk FOREIGN KEY (CustNo, PONo) REFERENCES Orders (CustNo, PONo);

Table altered.

SQL&gt; ALTER TABLE Orders READ WRITE;

Table altered.

SQL&gt; ALTER TABLE LineItems READ WRITE;

Table altered.</code></pre><p>Similarly, you should extend the <code class="codeph">PRIMARY KEY</code> definition for the LineItems table to a full level key by including CustNo as the leading column, as shown here.
                  </p><pre class="pre codeblock"><code>ALTER TABLE LineItems ADD CONSTRAINT LinePK PRIMARY KEY (CustNo, PONo, LineNo);</code></pre><p>Again, you must drop the existing <code class="codeph">PRIMARY KEY</code> constraint before introducing the new one. To preserve the data integrity, modify the <code class="codeph">PRIMARY KEY</code> and <code class="codeph">FOREIGN KEY</code> constraints using one of the two transaction isolation strategies suggested earlier. In the following example, the LineItems table is locked while the constraint modifications take place. Afterward, <code class="codeph">COMMIT</code> releases the lock.
                  </p><pre class="pre codeblock"><code>SQL&gt; SELECT cols.table_name, cols.column_name, cols.constraint_name, cols.position
  2  FROM all_constraints cons, all_cons_columns cols
  3  WHERE cons.constraint_type = 'P'
  4  AND cons.constraint_name = cols.constraint_name
  5  AND cols.table_name = 'LINEITEMS'
  6  ORDER BY cols.table_name, cols.position;

LINEITEMS
LINENO
SYS_C009086
         1
LINEITEMS
PONO
SYS_C009086
         2

SQL&gt; LOCK TABLE LineItems IN SHARE MODE;

Table(s) Locked.

SQL&gt; ALTER TABLE LINEITEMS DROP CONSTRAINT SYS_C009086;

Table altered.

SQL&gt; ALTER TABLE LineItems ADD CONSTRAINT LinePK PRIMARY KEY (CustNo, PONo, LineNo);

Table altered.

SQL&gt; COMMIT;

Commit complete.</code></pre><p>The referential integrity related modifications are optional. The proposed modifications bring the source database very close to resembling the sharded target database. This further facilitates the transition process.</p>
                  <p>In some cases, referential integrity cannot be imposed or it is undesirable to create. If this is the case, then the reference partitioning cannot be defined. In that situation you can use the <code class="codeph">PARENT</code> clause instead.
                  </p>
                  <p>Finally, the additional CustNo column in the LineItems table might affect the existing queries, such as <code class="codeph">SELECT * FROM LineItems</code>. To avoid this problem you can modify the CustNo column to become invisible, as shown here.
                  </p><pre class="pre codeblock"><code>SQL&gt; ALTER TABLE LineItems MODIFY CustNo INVISIBLE;</code></pre><p>With these modifications to the source database tables, you have prepared the existing sample database for the migration.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-59B5EABA-3C10-4329-B662-9E17F2303498" name="GUID-59B5EABA-3C10-4329-B662-9E17F2303498"></a><h3 id="SHARD-GUID-59B5EABA-3C10-4329-B662-9E17F2303498" class="sect3"><span class="enumeration_section">9.5 </span>Preparing the Target Sharded Database
               </h3>
               <div>
                  <p>Before you start data migration to the sharded database, you must create the sharded database schema according to your design.</p>
                  <p>The data migration from a non-sharded to a sharded database environment can be accomplished in two distinct ways:</p>
                  <ul style="list-style-type: disc;" id="GUID-59B5EABA-3C10-4329-B662-9E17F2303498__UL_DHR_4W4_LGB">
                     <li><span class="bold">Two-step approach:</span> This is a more cautious, incremental approach to data migration. Create a sharded database with only one shard. As long as your sharded database is contained within one shard, your application, as well as your database maintenance procedures could be used without application code changes and/or a negligible amount of related modifications. In other words, your sharded database would behave the same way as non-sharded database upon migration to the sharded environment. Then, once you modify your applications and operating procedures for sharding, you can proceed with scaling out the database to the appropriate number of shards.
                     </li>
                     <li><span class="bold">Single-step approach:</span> Create a sharded database with the appropriate number of shards initially. In this case your application and operating procedures should be fully prepared for sharding operations upon migration.
                     </li>
                  </ul>
                  <p>The more cautious, two-step approach allows a smooth, but significantly longer transition to a sharded database environment. Running your application against a single shard gives you time to gradually modify your application for direct routing. Only after you modify your existing applications to use the shard director to connect to the correct shard, the remaining shards can be instantiated. </p>
                  <p>The first step of the process is creating a sharded database with only one shard. Then you modify your existing application as suggested in one of the following sections. The last step is to scale-out your sharded database to the number of shards you need. This method also provides an opportunity to split and rebalance the data chunks across all of the shards before scaling out.</p>
                  <p>This two-step migration approach not only requires more time, but it also requires more space. If you migrate all of your data to a single shard, you can load your sharded table data directly to the single shard without restrictions. After you scale out to multiple shards, you should strictly use the Data Pump utility if you want to correctly load sharded tables directly into multiple database shards. Duplicated tables reside in the catalog database, and you should always load duplicated tables using the catalog database.</p>
                  <p>Whether you decide to use the one-step or two-step approach, you must export your data and create your sharded database schema before you load the data into the sharded database. In the examples below, it is assumed that the software installation is complete and that you have created a sharded database environment, including at least a sharding catalog and one or more databases for the shards. You can create a new shard catalog or use an existing one. To illustrate the migration process, the examples in this procedure use the following database instances:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>orignode &#x2013; site hosting the original, non-sharded database instance, SID=orig</p>
                     </li>
                     <li>
                        <p>catnode &#x2013; catalog node hosting shard catalog database instance, SID=ctlg </p>
                     </li>
                     <li>
                        <p>shrdnodeN &#x2013; shard node(s) hosting the database shard instance(s), SID=shrdN, where N could be 1, 2, and so on</p>
                     </li>
                     <li>
                        <p>gsmnode &#x2013; catalog node hosting the shard director (GSM) instance, SID=gsm1</p>
                     </li>
                  </ul>
                  <p>Whether you have modified the source database in preparation for migration or not, your migration process requires modifications to DDL definitions including, at least, the <code class="codeph">CREATE SHARDED TABLE</code> and <code class="codeph">CREATE DUPLICATED TABLE</code> statements. In order to migrate the database schema to the target sharded database, you must extract the DDL definitions from your source database and modify the SHARDED and DUPLICATED table metadata. A convenient way to extract the DDL statements from the source database is to create a Data Pump extract file. Then use the Data Pump import utility against the database export file, as shown here.
                  </p><pre class="pre codeblock"><code>impdp uname/pwd@orignode directory=expdir dumpfile=sample.dmp sqlfile=sample_ddl.sql</code></pre><p>In this example, the <code class="codeph">impdp</code> command does not actually perform an import of the contents of the dump file. Rather, the <code class="codeph">sqlfile</code> parameter triggers the creation of a script named sample_ddl.sql which contains all of the DDL from within the export dump file. This database export file is created as shown here.
                  </p><pre class="pre codeblock"><code>expdp uname/pwd@orignode full=Y directory=expdir dumpfile=sample.dmp logfile=sample.log</code></pre><p>The full database export file has the entire database contents: data and metadata. Exporting the entire database may take a long time. If you want to do this step quickly, you can export only the metadata, or only the part containing the set of tables you are interested in, as shown in this example.</p><pre class="pre codeblock"><code>expdp uname/pwd directory=DATA_PUMP_DIR dumpfile=sample_mdt.dmp logfile=sample_mdt.log INCLUDE=TABLE:\"IN \( \'CUSTOMERS\', \'ORDERS\', \'STOCKITEMS\', \'LINEITEMS\' \) \" CONSISTENT=Y CONTENT=METADATA_ONLY</code></pre><p>Trimming down the export in this way more efficiently captures a consistent image of the database metadata without a possibly lengthy database data dump process. You still must get the DDL statements in text format and perform the DDL modifications as required by your sharded database schema design. If you decided to export the entire database, you would likely also use it as an input for loading your data.</p>
                  <p>Data Pump provides a secure way to transport you data. The database administrator has to authorize the database user for required access to the database export directory, as shown here.</p><pre class="pre codeblock"><code>CREATE OR REPLACE DIRECTORY expdir AS ‘/some/directory’; 
GRANT READ, WRITE ON DIRECTORY expdir TO uname;
GRANT EXP_FULL_DATABASE TO uname;
</code></pre><p>With a full database export, the database administrator must grant the <code class="codeph">EXP_FULL_DATABASE</code> role to the user, <code class="codeph">uname</code>. No additional role is required for a table level export. For more information about the Data Pump utility see the Database Utilities documentation in the references below.
                  </p>
                  <p>If you modified your source (non-sharded) database so that the row layout matches the target (sharded) database, no full database or table level export is required. The data can be efficiently transferred as is, without an intermediate dump file.</p>
                  <p>After finalizing your sharded database schema, run the prepared DDL against the sharding catalog database (ctlg) using database administrator credentials. All DDL statements must be executed in a session with the <code class="codeph">SHARD DDL</code> setting enabled to ensure that all DDL statements are propagated from the catalog database (ctlg) to the shard databases (shrd1, 2, ..., N).
                  </p><pre class="pre codeblock"><code>ALTER SESSTION ENABLE SHARD DDL;</code></pre><p>With the sharded and duplicated tables defined, your sharded database is ready for data loading. It is recommended that you validate the sharding configuration using the GDSCTL <code class="codeph">VALIDATE</code> command, before loading the data.
                  </p><pre class="pre codeblock"><code>gdsctl validate</code></pre><p>After successful validation your sharded database is ready for data loading. If you see inconsistencies or errors, you must correct the problem using the GDSCTL commands <code class="codeph">SHOW DDL</code> and <code class="codeph">RECOVER</code>.
                  </p>
                  <p>Data Pump&nbsp;export&nbsp;utility files are, by default, consistent on a per table basis. If you want all of the tables in the export to be consistent to the same point in time, you must use the&nbsp;<code class="codeph">FLASHBACK_SCN</code>&nbsp;or&nbsp;<code class="codeph">FLASHBACK_TIME</code>&nbsp;parameters. Having a consistent “as of” point in time database export file is recommended. This is especially important if you opt for uninterrupted migration from a non-sharded to a sharded database, that is, if you want to provide continuous database operations during the migration. Migration to a sharded database using Data Pump during continuous operations is complemented with Oracle GoldenGate. An export command producing a consistent database snapshot would look like the following.
                  </p><pre class="pre codeblock"><code>expdp uname/pwd@orignode full=Y directory=expdir dumpfile=sample.dmp logfile=sample.log CONSISTENT=Y FLASHBACK_TIME=SYSTIMESTAMP</code></pre><p>The consistent snapshot database image requires additional <code class="codeph">CONSISTENT</code> or <code class="codeph">FLASHBACK_TIME</code> parameters. When you run the command you notice that both parameters, <code class="codeph">CONSISTENT</code> and <code class="codeph">FLASHBACK_TIME</code>, mean the same thing. Note that the timestamp converts to a system change number (SCN) as shown here.
                  </p><pre class="pre codeblock"><code>SQL&gt; SELECT TIMESTAMP_TO_SCN(SYSTIMESTAMP) FROM dual; 
TIMESTAMP_TO_SCN(SYSTIMESTAMP)
------------------------------
                       1559981
</code></pre><p>If you prefer using <code class="codeph">FLASHBACK_SCN</code>&nbsp;over <code class="codeph">FLASHBACK_TIME</code>, you can obtain&nbsp;the current SCN by selecting it from V$DATABASE as shown here.
                  </p><pre class="pre codeblock"><code>SQL&gt; SELECT current_scn FROM v$database;
CURRENT_SCN
-----------
    1560005
</code></pre><p>Alternatively, you can declare it as shown here.</p><pre class="pre codeblock"><code>SQL&gt; SET SERVEROUTPUT ON
SQL&gt; DECLARE SCN NUMBER;
  2  BEGIN
  3  SCN := DBMS_FLASHBACK.GET_SYSTEM_CHANGE_NUMBER;
  4  DBMS_OUTPUT.PUT_LINE(SCN);
  5  END;
  6  /
1560598
</code></pre><p>You might need to ask a database administrator for authorization to access <code class="codeph">DBMS_FLASHBACK</code>.
                  </p>
                  <p>You can make Data Pump run faster by using the&nbsp;<code class="codeph">PARALLEL</code>&nbsp;parameter. This parameter should be used in conjunction with the %U wildcard in the&nbsp;<code class="codeph">DUMPFILE</code>&nbsp;parameter to allow multiple dump files be created, as shown in this example.
                  </p><pre class="pre codeblock"><code>expdp uname/pwd@orignode full=Y directory=expdir dumpfile=samp_%U.dmp logfile=samp.log CONSISTENT=Y PARALLEL=3 </code></pre><p>The above command uses four parallel workers and creates four dump files suffixed with _01, _02, _03. The same wildcard can be used during the import to allow you to reference multiple input files. Note that the three dump files, samp_01.dmp, samp_02.dmp, and samp_03.dmp, are created by parallel export rather than the single output file, sample.dmp created in a previous example. Also, the elapsed time of the parallel export is less than third of the elapsed time with serial execution, that is, a single dump file output.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-59B5EABA-3C10-4329-B662-9E17F2303498__GUID-8219201B-DAA6-4512-A101-96D088AF9447">
                     <p class="notep1">See Also:</p>
                     <p><a href="sharding-deployment.html#GUID-F99B8742-4089-4E77-87D4-4691EA932207" title="Sharded database deployment includes the prerequisites and instructions for installing the required software components, creating the catalog, roles, and the sharded database, configuring replication for high availability, and creating the schema for the sharded database.">Sharded Database Deployment</a></p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SUTIL-GUID-501A9908-BCC5-434C-8853-9A6096766B5A" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a></p>
                     <p><a href="../gsmug/gdsctl-reference.html#GSMUG-GUID-E6E76443-AD85-455C-99AA-BF0A7856F880" target="_blank"><span><cite>Oracle Database Global Data Services Concepts and Administration Guide</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F" name="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F"></a><h3 id="SHARD-GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F" class="sect3"><span class="enumeration_section">9.6 </span>Migrating Your Data
               </h3>
               <div>
                  <p>After you create the target sharded database with a single shard, or multiple shards, and you have your sharded and duplicated tables defined, you can start migrating your data into the sharded database.</p>
                  <p>Make sure you understand the following data loading considerations before you start migrating your data from your source to the sharded database:</p>
                  <ul style="list-style-type: disc;">
                     <li>Differences between migrating duplicated and sharded tables
                        <p>Duplicated tables reside in the shard catalog, they are always loaded into the shard catalog database using any of available data loading utilities, or plain SQL. You have two options for loading sharded tables, however. The sharded tables can be loaded using the sharding coordinator (catalog), or they can be loaded directly into the shards, using the Data Pump utility.</p>
                     </li>
                     <li>Migrating sharded tables using the coordinator or direct loading to the shards
                        <p>Loading your sharded tables directly to the shard databases is always faster because you can load multiple shards simultaneously.</p>
                     </li>
                     <li>Migrating to multiple shards or migrating to a single shard
                        <p>Migrating a non-sharded database to a sharded database with a single shard does not require major changes to your application and database maintenance procedures. You can continue with your current operations largely unchanged until you are ready to split the data into shards. However, migrating a non-sharded database to sharded database with multiple shards involves non-trivial preparation processes, with modifications to the application source code being the most time consuming prerequisite. If you intend to migrate to sharded database with a single shard, you must also set up a plan to scale your database to multiple shards, that is, distribute the database chunks across multiple shards, at some later time. Meanwhile, you can work on the application and other changes required to run with a sharded database with multiple shards.</p>
                     </li>
                     <li>Migration with downtime or uninterrupted migration
                        <p>Uninterrupted migration from a non-sharded to a sharded database with only one shard is much easier and simpler than migration to a sharded database with multiple shards. The subsequent scale-out from one shard to multiple shards is preformed while the database is running. </p>
                        <p>If you want to migrate from your non-sharded database to the target multi-shard database in a single step, it is strongly recommended that you try this out in a test environment first, and start migrating your production environment only after you make sure that the test environment migrates without issues.</p>
                     </li>
                  </ul>
                  <p>Whether the target row data layout is prepared in the source database or not, there are various methods to choose from for efficient data migration. Choose the method that best fits your conditions: available disk space, remote file access, network throughput, and so on.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F__GUID-BEDEF66C-FC5D-4902-B4B7-F928F7296716">Consider Downtime During Migration</p>
                     <p>If you want to eliminate database down time, your migration plan must include Oracle GoldenGate. To keep your target (sharded) database in sync with the source (non-sharded) database, you must use Oracle GoldenGate to process the changes that are made to the source database during the migration process. </p>
                     <p>In addition to the benefit of a zero downtime migration, you might also choose to use Oracle GoldenGate for active-active replication of your sharded database. If you have defined Oracle GoldenGate active-active replication for your sharded database then all of the data migration activity should be restricted to the shard catalog database. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F__GUID-66344188-4E93-451A-9E88-9035CCC80C41">Migrating Data to Sharded Tables With Downtime</p>
                     <p>If you do not use Oracle GoldenGate, take measures to keep your database as available as possible during the migration; you should plan for the downtime.</p>
                     <p>If you decide to modify your source, non-sharded database tables before migration, your table schema would match your target sharded database schema, and your data migration process will be smoother than if you did not take this pre-migration step. This approach results in an identical row data layout in the source database and corresponding layout in your target sharded database, so you can copy over the database content directly.</p>
                     <ol id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F__OL_CBW_TKL_MGB">
                        <li>Export the data from your database tables.<pre class="pre codeblock"><code>expdp uname/pwd@non_sharded_db directory=file_dir
      dumpfile=original_tables.dmp logfile=original_table.log
      INCLUDE=TABLE:\"IN \( \'CUSTOMERS\', \'ORDERS\', \'STOCKITEMS\',
      \'LINEITEMS\' \) \" CONSISTENT=Y CONTENT=DATA_ONLY</code></pre><p>This Data Pump export example is limited to the tables used by the Oracle Sharding sample application. Because the SHARDED and DUPLICATED tables have been already created in the sample, you only export the table content (DATA_ONLY). </p>
                        </li>
                        <li>Make the export file (original_tables.dmp) accessible by the target database nodes before you start importing the data to the sharded database. 
                           <p>You can either move this file (or multiple files in the case of parallel export) to the target database system or share the file over the network.</p>
                        </li>
                        <li>When the export is complete, you can start importing the content to your sharded database. 
                           <p>The DUPLICATED table (StockItems) must be loaded using the shard catalog. The following is an example of the import command.</p><pre class="pre codeblock"><code>impdp uname/pwd@catnode:1521/ctlg directory=data_pump_dir
      dumpfile=original_tables.dmp logfile=imp.log tables=<span class="italic">StockItems</span>
      content=DATA_ONLY</code></pre></li>
                        <li>Load the shards directly, or use the shard catalog to load them.
                           <p>The best way to load the SHARDED tables (Customers, Orders, and LineItems) is to run the Data Pump on each shard (shrd1,2,…, N) directly. The following is an example of the import command on the first shard.</p><pre class="pre codeblock"><code>impdp uname/pwd@shrdnode:1521/shrd1 directory=data_pump_dir
      dumpfile=original_tables.dmp logfile=imp.log tables=<span class="italic">Customers</span>,
      <span class="italic">Orders</span>, <span class="italic">LineItems</span> content=DATA_ONLY</code></pre><p>Alternatively, you can run Data Pump on the shard catalog to load all of the tables. The following example shows the import command.</p><pre class="pre codeblock"><code>impdp uname/pwd@catnode:1521/ctlg directory=data_pump_dir
      dumpfile=original_tables.dmp logfile=imp.log
      tables=<span class="italic">Customers</span>, <span class="italic">Orders</span>, <span class="italic">LineItems, StockItems</span>
      content=DATA_ONLY</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F__GUID-08E571DD-D3E5-437E-8DB5-1A5F3837B32B">Migrating Data to Sharded Tables Without Downtime</p>
                     <p>Oracle Sharding provides tight integration between Oracle GoldenGate replication and Data Pump export and import utilities. If Oracle GoldenGate is not currently present on either the source database or target sharded database, then before you install it you should upgrade your database to the latest release of Oracle Database on both the source and target databases. Upgrading the databases provides the maximum available functionality and simplifies the setup. With Oracle Database 12c Release 2 and later you can use integrated capture on the non-sharded source and integrated replicat on the target sharded database.</p>
                     <p>As long as Data Pump export and import are used to recreate the entire database, Oracle GoldenGate ensures that the migration of database changes during and after the export and import takes place. It is up to you to decide what needs to be replicated by Oracle GoldenGate during the migration process. It is not recommended that you replicate database changes that are not required by the application. </p>
                     <p>When Oracle GoldenGate is configured for the source and target databases, it is recommended that you do testing using the live data before scheduling the production migration. If the source database is cloned you can use the clone for testing the migration without affecting your production environment.</p>
                     <div class="figure" id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F__FIG_FZ1_HSG_5GB">
                        <p class="titleinfigure">Figure 9-5 Migration Without Downtime</p><br><div class="imageleft"><img class="imageleft" id="GUID-B464BEB3-AEB7-4F6D-8328-C25F69FD223F__IMAGE_GZ1_HSG_5GB" src="img/migration_without_downtime.png" alt="Description of Figure 9-5 follows" title="Description of Figure 9-5 follows" longdesc="img_text/migration_without_downtime.html"><br><a href="img_text/migration_without_downtime.html">Description of "Figure 9-5 Migration Without Downtime"</a></div><br></div>
                     <!-- class="figure" -->
                     <p>The migration process using Data Pump combined with Oracle GoldenGate is illustrated above. The bulk of the data migration is performed using Data Pump, moving data directly to the shard catalog and shards. The database changes during the Data Pump run are collected in Oracle GoldeGate local trail files, and moved to the shard catalog database. The changes to sharded tables are propagated from the shard catalog database to the shards.</p>
                     <p>From the Data Pump perspective, the source database (ORIG) is split into the shard catalog (CTLG) and the shard databases (SHRD1, SHRD2, and SHRD3) using impdp non-sharded and impdp sharded processes. The impdp non-sharded process migrates duplicated tables to the shard catalog database. The three impdp sharded parallel processes migrate the sharded tables directly to shards SHRD1, SHRD2, and SHRD3.</p>
                     <p>From the Oracle GoldenGate perspective, all of the databases share extract (exsh), pump (pmsh), and replicat (rpsh) process pipelines forked from the Extract root process.</p>
                     <p>Assuming that you have prepared the <code class="codeph">obey</code> files corresponding to the diagram above, a GGSCI terminal session for Oracle GoldenGate pipeline from the source database node (orignode) to shard catalog node (catnode) would look like the following example.
                     </p><pre class="pre codeblock"><code>view params ./dirprm/add_exsh_2pumps.oby
-- add a change data extract process group named exsh 
-- exsh reads DUPLICATED and SHARDED tables from orig database redo logs
add extract exsh, tranlog, begin now
-- associate the trail file as output from exsh process group
add exttrail ./dirdat/et, extract exsh
-- add SHARDED and DUPLICATE change data extract pump process pmsh
-- pmsh copies local trail data to ctlgnode remote trail location
add extract pmsh, exttrailsource ./dirdat/et
-- associate the remote trail with pmsh
add rmttrail ./dirdat/et, extract pmsh
-- connect to the database and add table level supplemental logging for:
-- Customers, Orders, LineItems, and StockItems tables
add trandata uname.Customers
add trandata uname.Orders
add trandata uname.LineItems
add trandata uname.StockItems</code></pre><p>Run the GGSCI <code class="codeph">obey</code> command for the pipeline, followed by <code class="codeph">info all</code>.
                     </p><pre class="pre codeblock"><code>obey ./dirprm/add_exsh_2pumps.oby
info all</code></pre><p>You should see the extract processes for the non-sharded and sharded pipeline initialized, and waiting in stopped status.</p><pre class="pre codeblock"><code>…
EXTRACT STOPPED exsh …
EXTRACT STOPPED pmsh …
…
</code></pre><p>Check the process group parameter, <code class="codeph">EXTRACT</code>, for the sharded and catalog tables.
                     </p><pre class="pre codeblock"><code>view params exsh
-- first line must be extract followed the name
extract exsh
-- login info to get metadata
userid uname@orignode, password pwd
-- export is writing to trail info
exttrail ./dirdat/exsh
-- checkpoint time interval with source
checkpointsecs 1
-- source table
table uname.Customers
table uname.Orders
table uname.LineItems
table uname.StockItems</code></pre><p>View parameters for the Pump process group for all tables, pmsh.</p><pre class="pre codeblock"><code>view parms pmsh
-- first line must be extract followed the name
extract pmsh
-- no need to log into the database 
passthru
-- connect to remote host, write and talk to the manager there
rmthost shrdnode, mgrport 7810
-- where is the trail on remote host
rmttrail ./dirdat/rt
-- checkpoint time interval with target
checkpointsecs 1
-- tables
table uname.Customers
table uname.Orders
table uname.LineItems
table uname.StockItems</code></pre><p>The Oracle GoldenGate Pump process is created under the assumption that the manager process on the Shard catalog node (catnode) uses port number 7810. This is a fair assumption because the shard catalog and shard databases run on separate machines. </p>
                     <p>Check the definition on the shard catalog node (catnode).</p><pre class="pre codeblock"><code>view params mgr
PORT 7810
-- used by the PUMP process on the source side for the collector on the target
DYNAMICPORTLIST 8000-8010
SYSLOG NONE</code></pre><p>On the shard catalog node (catnode), look at the prepared Replicat process obey command file.</p><pre class="pre codeblock"><code>view params ./dirprm/add_rpsh.oby
-- connect to the database
dblogin userid uname@catnode, password pwd
-- add checkpoint table
add checkpointtable uname.gg_checkpoint
-- add replicat process rpsh that will convert remote trail into SQL continuously
add replicat rpsh, exttrail ./dirdat/rt, checkpointtable uname.gg_checkpoint</code></pre><p>If you modified the source database to match the sharded row data layout in preparation for migration, you might have introduced invisible columns. Invisible columns can be preserved during the replication process by adding <code class="codeph">MAPINVISIBLECOLUMNS</code> as a replicat process parameter.
                     </p>
                     <p>Run the obey file ./dirprm/add_rpsh.oby on the shard catalog node (catnode). </p>
                     <p>At this point the system is configured for data migration without downtime. The bulk of the load is performed by the Data Pump export (expdp) and import (impdp) database utilities. The eventual database changes during the export and import processes are synchronized by Oracle GoldenGate processes. Note that the Oracle GoldenGate Pump process has nothing to do with any of the Data Pump processes.</p>
                     <p>Before starting the Data Pump export, the Oracle GoldenGate replication process must be provided with instantiation Commit Sequence Numbers (CSNs) for each table that is a part of the Data Pump export. As described earlier, this can be done by running expdp with <code class="codeph">CONSISTENT=Y</code> and <code class="codeph">FLASBACK_SCN=scn_num</code>. The <code class="codeph">FLASHBACK_SCN</code> can be obtained with the following statement.
                     </p><pre class="pre codeblock"><code>SELECT current_scn from v$database;</code></pre><p>Because expdp is run with <code class="codeph">CONSISTENT=Y</code>, all table images appear “as of scn_num”, so that the replication process can be started from the same, in this case, CSN number. 
                     </p>
                     <p>For the replicat on the shard catalog node, the appropriate GGSCI command might look like this.</p><pre class="pre codeblock"><code>START REPLICAT rpsh, AFTERCSN scn_num</code></pre><p>The simpler way to do this is to use the <code class="codeph">ADD SCHEMATRANDATA</code> GGSCI command on the source node. This command populates the system tables and views so that the instantiation CSNs can be used on the import. This way the Oracle GoldenGate CSN becomes synchronized with the Data Pump SCN by matching two stamps representing the committed version of the database. In other words, <code class="codeph">FLASHBACK_SCN</code> for export process and <code class="codeph">AFTERCSN</code> for replicat process are defined automatically, as shown here.
                     </p><pre class="pre codeblock"><code>ADD SCHEMATRANDATA uname PREPARESCN ALLCOLS</code></pre><p>The <code class="codeph">ADD SCHEMATRANDATA</code> command enables schema-level supplemental logging for all of the current and future tables in a given ‘uname’ schema of the ORIG database to automatically log a superset of keys that Oracle GoldenGate uses for row identification. The <code class="codeph">PREPARESCN</code> parameter instructs the Data Pump export (expdp) to automatically generate actions to set instantiation CSN (GGSCI command, <code class="codeph">SET_INSTANTIATION_CSN</code>) for each table at target upon import (impdp). The <code class="codeph">ALLCOLS</code> parameter enables the unconditional supplemental logging of all supported key and non-key columns for all current and future tables in the given schema. This option enables the logging of the keys required to compute dependencies, plus columns that are required for filtering, conflict resolution, or other purposes. It is important to note that the sharding related data migration is limited to the specific set of tables, and other database (incremental) changes are not propagated to the shard catalog.
                     </p>
                     <p>The replication on the target database should be stopped before starting the Data Pump export. This should always be the case because the target database is created from scratch. The GGSCI command to stop the replicat process on the sahrd catalog node is shown here.</p><pre class="pre codeblock"><code>STOP REPLICAT rpsh</code></pre><p>This command preserves the state of synchronization for the next time the replicat process starts, and it ensures that the Oracle GoldenGate manager processes do not automatically start the replicat process. </p>
                     <p>The extract process on the source database should be active before starting the Data Pump export. Check if extract is already active by using the <code class="codeph">INFO EXTRACT</code> or <code class="codeph">STATUS EXTRACT</code> command. The following command starts the extract process, if it is not already started.
                     </p><pre class="pre codeblock"><code>START EXTRACT exsh, BEGIN NOW</code></pre><p>From this point on, the extract process collects the changes to the source database for all of the tables involved in the sharding process, and you can safely initiate Data Pump export.</p><pre class="pre codeblock"><code>expdp uname/pwd@orignode full=Y directory=expdir dumpfile=sample.dmp
      logfile=sample.log</code></pre><p>It is a good practice to verify that the export utility expdp <code class="codeph">FLASHBACK_SCN</code> parameter is added automatically. You should be able to find the message “FLASHBACK automatically enabled to preserve database integrity” in the expdp command output. After the export completes, immediately continue with the Data Pump import on the target databases as described earlier for the shard catalog.
                     </p><pre class="pre codeblock"><code>impdp uname/pwd@catnode:1521/ctlg directory=data_pump_dir
      dumpfile=sample.dmp logfile=imp.log
      tables=Customers,Orders,LineItems,StockItems content=DATA_ONLY</code></pre><p>At this point it is safe to start replicat processes on the shard catalog node.</p><pre class="pre codeblock"><code>START REPLICAT rpsh</code></pre><p>From this point on, the selected set of tables in the source database (Customers, Orders, LineItems, and StockItems) will be in synch with the Customers, Orders, and LineItems tables in the shards and the StockItems duplicated table in the shard catalog database. It is a good practice, after starting replicat processes, to take a look at the report file for the replicat processes. Verify that the replicat process was aware of the SCN or CSN number existing in the database while the export was in progress, and it knows that any changes after that SCN now need to be applied on the target table, look for “Instantiation CSN filtering is enabled on table uname.Customers, uname,Orders, …” to verify.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-FD50835F-514F-4E74-95D3-BD0B4A6B0F20" name="GUID-FD50835F-514F-4E74-95D3-BD0B4A6B0F20"></a><h3 id="SHARD-GUID-FD50835F-514F-4E74-95D3-BD0B4A6B0F20" class="sect3"><span class="enumeration_section">9.7 </span>Migrating Your Application
               </h3>
               <div>
                  <p>The sharded database operating environment empowers applications with direct access to shards. This feature provides true linear scalability, but it comes with a small price—a slight change to the application code.</p>
                  <p>The examples that follow show you how to migrate your application. The examples are a skeleton of the sample application for which we migrated the database schema and data. The key parts of the sample application include order management and reporting functionality. contained in Java class, POManager. The first static method in this class introduces a new row into the Customers table using the addCustomer() method. The column values are passed in to this function using a parameter list, as shown here.</p><pre class="pre codeblock"><code>import java.sql.*;
import java.io.*;
import oracle.jdbc.driver.*;

public class POManager {
  public static void addCustomer (int custNo, String custName,
    String street, String city, String state, String zipCode,
    String phoneNo) throws SQLException {
      String sql = "INSERT INTO Customers VALUES (?,?,?,?,?,?,?)";
      try {
        Connection conn =
          DriverManager.getConnection("jdbc:default:connection:");
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, custNo);
        pstmt.setString(2, custName);
        pstmt.setString(3, street);
        pstmt.setString(4, city);
        pstmt.setString(5, state);
        pstmt.setString(6, zipCode);
        pstmt.setString(7, phoneNo);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The second static method in the POManager class, addStockItem(), adds a row in the StockItem table. The column values are passed as parameter values, as shown in the following example.</p><pre class="pre codeblock"><code>  public static void addStockItem (int stockNo, String description,
    float price) throws SQLException {
      String sql = "INSERT INTO StockItems VALUES (?,?,?)";
      try {
        Connection conn =
          DriverManager.getConnection("jdbc:default:connection:");
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, stockNo);
        pstmt.setString(2, description);
        pstmt.setFloat(3, price);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The third static method in the POManager class, enterOrder(), adds a row into the Orders table. The column values are provided in a parameter list, as shown here.</p><pre class="pre codeblock"><code>  public static void enterOrder (int orderNo, int custNo,
    String orderDate, String shipDate, String toStreet,
    String toCity, String toState, String toZipCode)
    throws SQLException {
      String sql = "INSERT INTO Orders VALUES (?,?,?,?,?,?,?,?)";
      try {
        Connection conn =
          DriverManager.getConnection("jdbc:default:connection:");
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, orderNo);
        pstmt.setInt(2, custNo);
        pstmt.setString(3, orderDate);
        pstmt.setString(4, shipDate);
        pstmt.setString(5, toStreet);
        pstmt.setString(6, toCity);
        pstmt.setString(7, toState);
        pstmt.setString(8, toZipCode);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The next static method in the POManager class, addLineItem(), adds a row in the LineItems table. The column values are passed in as parameter values, as shown in the following example.</p><pre class="pre codeblock"><code>public static void addLineItem (int lineNo, int orderNo,
    int stockNo, int quantity, float discount) throws SQLException {
      String sql = "INSERT INTO LineItems VALUES (?,?,?,?,?)";
      try {
        Connection conn =
          DriverManager.getConnection("jdbc:default:connection:");
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, lineNo);
        pstmt.setInt(2, orderNo);
        pstmt.setInt(3, stockNo);
        pstmt.setInt(4, quantity);
        pstmt.setFloat(5, discount);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The next static method in the POManager class, totalOrders(), produces the total order value for every order in the Orders table. The result set relation is printed out using the printResult() method, as shown here.</p><pre class="pre codeblock"><code>public static void totalOrders () throws SQLException {
    String sql = 
      "SELECT O.PONo, ROUND(SUM(S.Price * L.Quantity)) AS TOTAL " +
      "FROM Orders O, LineItems L, StockItems S " +
      "WHERE O.PONo = L.PONo AND L.StockNo = S.StockNo " +
      "GROUP BY O.PONo";
    try {
      Connection conn =
        DriverManager.getConnection("jdbc:default:connection:");
      PreparedStatement pstmt = conn.prepareStatement(sql);
      ResultSet rset = pstmt.executeQuery();
      printResults(rset);
      rset.close();
      pstmt.close();
    } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The helper method, printResults(), shown below, is used to print out the result set relations produced by the totalOrders() method. A reference to the result set relation is passed in as a parameter.</p><pre class="pre codeblock"><code>static void printResults (ResultSet rset) throws SQLException {
    String buffer = "";
    try {
      ResultSetMetaData meta = rset.getMetaData();
      int cols = meta.getColumnCount(), rows = 0;
      for (int i = 1; i &lt;= cols; i++) {
        int size = meta.getPrecision(i);
        String label = meta.getColumnLabel(i);
        if (label.length() &gt; size) size = label.length();
        while (label.length() &lt; size) label += " ";
        buffer = buffer + label + "  ";
      }
      buffer = buffer + "\n";
      while (rset.next()) {
        rows++;
        for (int i = 1; i &lt;= cols; i++) {
          int size = meta.getPrecision(i);
          String label = meta.getColumnLabel(i);
          String value = rset.getString(i);
          if (label.length() &gt; size) size = label.length();
          while (value.length() &lt; size) value += " ";
          buffer = buffer + value + "  ";
        }
        buffer = buffer + "\n";
      }
      if (rows == 0) buffer = "No data found!\n";
      System.out.println(buffer);
    } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The checkStockItem() static method, shown below, retrieves all orders, customers, and line item details for the specified stock item. The stock item is passed in as a parameter. The helper method, printResults(), detailed above, is used to print out the result set relations produced by the checkStockItem() method.</p><pre class="pre codeblock"><code>public static void checkStockItem (int stockNo)
    throws SQLException {
      String sql = "SELECT O.PONo, O.CustNo, L.StockNo, " + 
        "L.LineNo, L.Quantity, L.Discount " +
        "FROM Orders O, LineItems L " +
        "WHERE O.PONo = L.PONo AND L.StockNo = ?";
      try {
        Connection conn =
          DriverManager.getConnection("jdbc:default:connection:");
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, stockNo);
        ResultSet rset = pstmt.executeQuery();
        printResults(rset);
        rset.close();
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The changeQuantity() static method updates the line item quantity for the given order and the stock item. The specific order number and the stock item are provided as input parameters, as shown here.</p><pre class="pre codeblock"><code>  public static void changeQuantity (int newQty, int orderNo,
    int stockNo) throws SQLException {
      String sql = "UPDATE LineItems SET Quantity = ? " +
        "WHERE PONo = ? AND StockNo = ?";
      try {
        Connection conn =
          DriverManager.getConnection("jdbc:default:connection:");
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, newQty);
        pstmt.setInt(2, orderNo);
        pstmt.setInt(3, stockNo);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  }</code></pre><p>The last static method, deleteOrder(), removes the specified order from the Orders table and all associated line items. The order that is to be deleted is specified as the input parameter, as shown in the following example.</p><pre class="pre codeblock"><code>public static void deleteOrder (int orderNo) throws SQLException {
    String sql = "DELETE FROM LineItems WHERE PONo = ?";
    try {
      Connection conn =
        DriverManager.getConnection("jdbc:default:connection:");
      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setInt(1, orderNo);
      pstmt.executeUpdate(); 
      sql = "DELETE FROM Orders WHERE PONo = ?";
      pstmt = conn.prepareStatement(sql);
      pstmt.setInt(1, orderNo);
      pstmt.executeUpdate(); 
      pstmt.close();
    } catch (SQLException e) {System.err.println(e.getMessage());}
  }
}</code></pre><p>Now, look at the sample application program code that is modified for sharding. The first thing to note are the additional imports of sharding related Java packages, starting with OracleShardingKey.</p><pre class="pre codeblock"><code>import java.sql.*;
import java.io.*;
import oracle.jdbc.driver.*;

//
// import sharding and related packages
//
import oracle.jdbc.OracleShardingKey;
import oracle.jdbc.OracleType;
import oracle.jdbc.pool.OracleDataSource;

// 
// Sample App: order management and reporting
// modified for sharding
//
public class POManager 
{
  // Connection factory for the sharded database used by Sample App
  private OracleDataSource ods;

  // 
  // Construct POManager class using Sharded database connection properties.
  // Use service name when connecting to sharded database, something like:
  // "jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(HOST=myhost)(PORT=3216)”
  //   “(PROTOCOL=tcp))(CONNECT_DATA=(SERVICE_NAME=myservice)(REGION=east)))"
  //
  public POManager(String yourURL, String yourUser, String yourPwd) 
    throws SQLException
  {
      ods = new OracleDataSource();
      ods.setURL(yourURL);
      ods.setUser(yourUser);
      ods.setPassword(yourPwd);
 } // POManager</code></pre><p>As shown above, the POManager class now contains the OracleDataSource factory for Connection objects. The following two methods show you how to use the connection factory to produce direct and proxy routing connections. The getCatConn() method returns a connection to the sharding catalog. The getShardConn() method returns the connection to the shard that matches the sharding key provided as a parameter. </p><pre class="pre codeblock"><code> //
 // Connect to the Sharding Catalog database.
 //
 public static Connection getCatConn() throws SQLException
 {
    Connection catConn = ods.getConnection();
 } // getCatConn

 //
 // Connect to Shard database using sharding key.
 //
 public static Connection getShardConn(int custNo) throws SQLException
 {
     OracleShardingKey shardKey = 
    ods.createShardingKeyBuilder().subkey(custNo, JDBCType.NUMERIC).build();
  OracleConnection shardConn = 
    ods.createConnectionBuilder().shardingKey(shardingKey);
  return shardConn;
 } // getShardConn</code></pre><p>With all of this in mind, you would rewrite the addCustomer() method for the sharding environment, using getShardConn(), as shown here.</p><pre class="pre codeblock"><code>  //
  // Connect to Shard database to add a customer.
  //
  public static void addCustomer (int custNo, String custName,
    String street, String city, String state, String zipCode,
    String phoneNo) throws SQLException {
      String sql = "INSERT INTO Customers VALUES (?,?,?,?,?,?,?)";
      try {
        Connection conn = getShardConn(custNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, custNo);
        pstmt.setString(2, custName);
        pstmt.setString(3, street);
        pstmt.setString(4, city);
        pstmt.setString(5, state);
        pstmt.setString(6, zipCode);
        pstmt.setString(7, phoneNo);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // addCustomer</code></pre><p>In addStockItem(), you use getCatConn() to connect to the shard catalog database and insert into the duplicated table, StockItems.</p><pre class="pre codeblock"><code>//
  // Connect to Sharding Catalog to add a stock item.
  //
  public static void addStockItem (int stockNo, String description,
    float price) throws SQLException {
      String sql = "INSERT INTO StockItems VALUES (?,?,?)";
      try {
        Connection conn = getCatConn();
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, stockNo);
        pstmt.setString(2, description);
        pstmt.setFloat(3, price);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // addStockItem</code></pre><p>The Orders tables is a child of the Customers table. To insert into the Orders table, connect to the shard database based on the provided sharding key, as shown in the following example.</p><pre class="pre codeblock"><code>//
  // Connect to Shard database to add an order for a customer.
  //
  public static void enterOrder (int orderNo, int custNo,
    String orderDate, String shipDate, String toStreet,
    String toCity, String toState, String toZipCode)
    throws SQLException {
      String sql = "INSERT INTO Orders VALUES (?,?,?,?,?,?,?,?)";
      try {
        Connection conn = getShardConn(custNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, orderNo);
        pstmt.setInt(2, custNo);
        pstmt.setString(3, orderDate);
        pstmt.setString(4, shipDate);
        pstmt.setString(5, toStreet);
        pstmt.setString(6, toCity);
        pstmt.setString(7, toState);
        pstmt.setString(8, toZipCode);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // enterOrder</code></pre><p>Notice that for the root of the table family, Customers, and the immediate child level, Orders, the sharding kay is provided as a parameter. For levels below immediate child you might not have a full level key, so you must retrieve it from the immediate parent. In the following example there is a helper method, getCustomerFromOrder(), for retrieving the sharding key, custNo, from the Order table, based on the Order table key value, orderNo. Every child table row is supposed to have a single parent row. That is why an integrity violation exception is raised for children without a parent, or children with more than one parent.</p><pre class="pre codeblock"><code>//
  // Determine which shard order is in
  //
  static int getCustomerFromOrder(int orderNo) throws SQLException
  {
     String sql = "SELECT O.CustNo FROM Orders O " +
                  "WHERE O.PONo = ?";
     int custNo;
     int rsSize = 0;
     Exception exception;
     try {
        Connection conn = getCatConn();
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, orderNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        ResultSet rset = pstmt.executeQuery();
        while(rset.next() &amp;&amp; rsSize &lt; 3) {
          custNo = rs.getInt(“CustNo);
          rsSize++;
        }
        rset.close();
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
      if (rsSize == 0) {
        throw new 
          SQLIntegrityConstraintViolationException(
                                    “No matching parent level key”);
      If (rsSize == 2)
      {
        throw new
          SQLIntegrityConstraintViolationException(
                                   “More than one parent level key”);
      }
      return custNo;
  } // getCustomerFromOrder</code></pre><div class="infoboxnote" id="GUID-FD50835F-514F-4E74-95D3-BD0B4A6B0F20__GUID-E25A47B3-8BD7-429B-8E38-6D8B57CF34F4">
                     <p class="notep1">Note:</p>Your code should not make any assumptions about the number of shards in the sharded database.
                  </div>
                  <p>The following example shows the rewritten addLineItem() method, that was provided in the original POManager class, now using the getCustomerFromOrder() helper method. For a given orderNo it queries the shard catalog for the matching custNo values. This part of the query is propagated to all of the shards using proxy routing. The helper function returns a single custNo value. Based on this value, use the direct route to the shard to insert the LineItems table row.</p><pre class="pre codeblock"><code>  //
  // Get customer (parent) from the catalog, then insert into a shard!
  // 
  public static void addLineItem (int lineNo, int orderNo,
    int stockNo, int quantity, float discount) throws SQLException {
      String sql = "INSERT INTO LineItems VALUES (?,?,?,?,?,?)";
      try {
        int custNo = getCustomerFromOrder(orderNo);
        Connection conn = getShardConn(custNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, custNo);
        pstmt.setInt(2, lineNo);
        pstmt.setInt(3, orderNo);
        pstmt.setInt(4, stockNo);
        pstmt.setInt(5, quantity);
        pstmt.setFloat(6, discount);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // addLineItem

  //
  // You’ve got whole level key handy, insert into a shard directly.
  // 
  public static void addLineItemWithinParent (int lineNo, int orderNo,
    int custNo, int stockNo, int quantity, float discount) 
    throws SQLException 
  {
      String sql = "INSERT INTO LineItems VALUES (?,?,?,?,?,?)";
      try {
        Connection conn = getShardConn(custNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, custNo);
        pstmt.setInt(2, lineNo);
        pstmt.setInt(3, orderNo);
        pstmt.setInt(4, stockNo);
        pstmt.setInt(5, quantity);
        pstmt.setFloat(6, discount);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // addLineItemWithinParent</code></pre><div class="infoboxnote" id="GUID-FD50835F-514F-4E74-95D3-BD0B4A6B0F20__GUID-E3F55FFD-25BA-4540-A3DE-00C6EA4C693E">
                     <p class="notep1">Note:</p>Most of the time the full level key context will be available in the application context. That is why we introduce the additional method addLineItemWithinParent() which connects directly to the shard based on the leading column custNo in the LineItems table composite level key. This eliminates the round-trip to the shard catalog. Avoid using expensive sharding programming practices similar to our helper function: getCustomerFromOrder() whenever possible.
                  </div>
                  <p>A majority of aggregate queries must be executed using the shard catalog connection. The shard catalog database uses proxy routing to collect partial results from the shards. The final aggregation is produced based on the partial results produced by the shards. This is why the totalOrders() method introduced in the original POManager class is rewritten to connect to the shard catalog database, as shown here.</p><pre class="pre codeblock"><code>//
  // xshard aggregate connects to the shard catalog
  //
  public static void totalOrders () throws SQLException {
    String sql = 
      "SELECT O.PONo, ROUND(SUM(S.Price * L.Quantity)) AS TOTAL " +
      "FROM Orders O, LineItems L, StockItems S " +
      "WHERE O.PONo = L.PONo AND L.StockNo = S.StockNo " +
      "GROUP BY O.PONo";
    try {
      Connection conn = getCatConn();
      PreparedStatement pstmt = conn.prepareStatement(sql);
      ResultSet rset = pstmt.executeQuery();
      printResults(rset);
      rset.close();
      pstmt.close();
    } catch (SQLException e) {System.err.println(e.getMessage());}
  } // totalOrders</code></pre><p>The printResults() helper function, introduced previously, does not depend on the database structure, so no modifications are necessary.</p><pre class="pre codeblock"><code>  //
  // helper function &#x2013; no change required
  //
  static void printResults (ResultSet rset) throws SQLException {
    String buffer = "";
    try {
      ResultSetMetaData meta = rset.getMetaData();
      int cols = meta.getColumnCount(), rows = 0;
      for (int i = 1; i &lt;= cols; i++) {
        int size = meta.getPrecision(i);
        String label = meta.getColumnLabel(i);
        if (label.length() &gt; size) size = label.length();
        while (label.length() &lt; size) label += " ";
        buffer = buffer + label + "  ";
      }
      buffer = buffer + "\n";
      while (rset.next()) {
        rows++;
        for (int i = 1; i &lt;= cols; i++) {
          int size = meta.getPrecision(i);
          String label = meta.getColumnLabel(i);
          String value = rset.getString(i);
          if (label.length() &gt; size) size = label.length();
          while (value.length() &lt; size) value += " ";
          buffer = buffer + value + "  ";
        }
        buffer = buffer + "\n";
      }
      if (rows == 0) buffer = "No data found!\n";
      System.out.println(buffer);
    } catch (SQLException e) {System.err.println(e.getMessage());}
  } // printResults</code></pre><p>The values in StockItem table key column, stockNo, could potentially match Order table rows on all of the shards. That is why you must modify the checkStockItem() method, introduced in the original POManager class, to connect to the shard catalog. The shard catalog database returns a union of all rows returned as a result of local joins performed in each shard.</p><pre class="pre codeblock"><code> //
  // xshard query matching duplicated table 
  //
  public static void checkStockItem (int stockNo)
    throws SQLException {
      String sql = "SELECT O.PONo, O.CustNo, L.StockNo, " + 
        "L.LineNo, L.Quantity, L.Discount " +
        "FROM Orders O, LineItems L " +
        "WHERE O.PONo = L.PONo AND L.StockNo = ?";
      try {
        Connection conn = getCatConn();
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, stockNo);
        ResultSet rset = pstmt.executeQuery();
        printResults(rset);
        rset.close();
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // checkStockItem</code></pre><p>The changeQuantity() method, introduced in the original POManager class, updates the grandchild table, LineItems. Again, use the getCustomerFromOrder() helper method to obtain the sharding key so your application can connect to the correct shard to perform the update. Similar to the addLineItem() method modification, you should expect that the custNo column value is available in the application context. That is why you should use changeQuantifyWithinParent() in changeQuantity(), saving the round trip to the shard catalog.</p><pre class="pre codeblock"><code>  //
  // Get customer (parent) from the catalog then update a shard!
  //
  public static void changeQuantity (int newQty, 
                                     int orderNo, int stockNo) 
     throws SQLException 
  {
      String sql = "UPDATE LineItems SET Quantity = ? " +
        "WHERE CustNo = ? AND PONo = ? AND StockNo = ?";
      try {
        int custNo = getCustomerFromOrder(orderNo);
        Connection conn = getShardConn(custNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, newQty);
        pstmt.setInt(2, custNo);
        pstmt.setInt(3, orderNo);
        pstmt.setInt(4, stockNo);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // changeQuantity

  //
  // You’ve got the full level key handy, update shard directly. 
  //
  public static void changeQuantityWithinParent (int newQty, 
                       int custNo, int orderNo, int stockNo) 
      throws SQLException 
  {
      String sql = "UPDATE LineItems SET Quantity = ? " +
        "WHERE CustNo = ? AND PONo = ? AND StockNo = ?";
      try {
        Connection conn = getShardConn(custNo);
        PreparedStatement pstmt = conn.prepareStatement(sql);
        pstmt.setInt(1, newQty);
        pstmt.setInt(2, custNo);
        pstmt.setInt(3, orderNo);
        pstmt.setInt(4, stockNo);
        pstmt.executeUpdate(); 
        pstmt.close();
      } catch (SQLException e) {System.err.println(e.getMessage());}
  } // changeQuantityWithinParent</code></pre><p>The modification to the last method, deleteOrder(), follows the same guidelines applied to addLineItem(), and changeQuantity(). Before deleting a row from the LineItems table, your application should first look in the shard catalog for the custNo sharding key value corresponding to the requested order. Once you have the sharding key, connect to the shard and perform the delete. Again, use the deleteOrderWithinParent() method, with the expectation that the sharding key value is available in the application context.</p><pre class="pre codeblock"><code>  //
  // Get customer (parent) first from the catalog, delete in a shard!
  //
  public static void deleteOrder (int orderNo) throws SQLException 
  {
    String sql = "DELETE FROM LineItems WHERE CustNo = ? AND PONo = ?";
    try {
      int custNo = getCustomerFromOrder(orderNo);
      Connection conn = getShardConn(custNo);
      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setInt(1, orderNo);
      pstmt.executeUpdate(); 
      sql = "DELETE FROM Orders WHERE PONo = ?";
      pstmt = conn.prepareStatement(sql);
      pstmt.setInt(1, custNo);
      pstmt.setInt(2, orderNo);
      pstmt.executeUpdate(); 
      pstmt.close();
    } catch (SQLException e) {System.err.println(e.getMessage());}
  } // deleteOrder

  //
  // You’ve got whole level key handy, delete in shard directly
  //
  public static void deleteOrderWithinParent (int custNo, 
                                              int orderNo) 
      throws SQLException 
  {
    String sql = "DELETE FROM LineItems WHERE CustNo = ? AND PONo = ?";
    try {
      Connection conn = getShardConn(custNo);
      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setInt(1, orderNo);
      pstmt.executeUpdate(); 
      sql = "DELETE FROM Orders WHERE PONo = ?";
      pstmt = conn.prepareStatement(sql);
      pstmt.setInt(1, custNo);
      pstmt.setInt(2, orderNo);
      pstmt.executeUpdate(); 
      pstmt.close();
    } catch (SQLException e) {System.err.println(e.getMessage());}
  } // deleteOrderWithinParent


} // POManager</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-loading-data.html#GUID-6140925F-6192-4C6F-9ADC-BC2332ADA3B0" title="You can migrate data from a non-sharded database to an Oracle Sharding sharded database using the methods described here.">Migrating Data to a Sharded Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id='01920.oracle-clusterware-agent-framework-c-application-program-interfaces.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Clusterware Agent Framework C Application Program Interfaces</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Clusterware Administration and Deployment Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Clusterware Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00">
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95727-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="server-control-command-reference.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-clusterware-c-application-program-interfaces.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="server-control-command-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-clusterware-c-application-program-interfaces.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Clusterware Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware Agent Framework C Application Program Interfaces</li>
            </ol>
            <a id="GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082" name="GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082"></a><a id="CWADD92426"></a>
            
            <h2 id="CWADD-GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082" class="sect2"><span class="enumeration_appendix">H </span>Oracle Clusterware Agent Framework C Application Program Interfaces
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Clusterware manages applications registered as resources with Oracle Clusterware and must have access to application-specific primitives that have the ability to start, stop, and monitor a specific resource. Oracle Clusterware runs all resource-specific commands through an entity called an <span class="italic">agent</span>.
               </p>
               <p>An agent is a program that contains the agent framework and user code to manage resources. The agent framework is a C library that enables you to plug in your application-specific code to manage customized applications. You program all of the actual application management functions in C or C++, such as starting, stopping, and checking the health of an application, into the agent. These functions are referred to as <span class="italic">entry points</span>. The agent framework is responsible for invoking these entry point functions on behalf of Oracle Clusterware. Agent developers can use these entry points to plug in the required functionality for a specific resource regarding how to start, stop, and monitor a resource. Agents are capable of managing multiple resources.
               </p>
               <p>This appendix includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B95F8E6-76AD-444A-BEA2-956038E35080">Agent Framework Data Types</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04">Agent Framework Context Initialization and Persistence</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0">Prototype for C and C++ Entry Point Functions</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E">C and C++ Entry Point Types and Codes</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795">C and C++ Entry Point Function Return Values</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB">Multithreading Considerations</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-AE0637F9-774B-4408-A948-09BE47A12EAB">Deprecated APIs</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B" title="Registers a resource type that the agent manages.Initiates a check action on a specific resource.Creates an iterator to access all the attributes of the current resource.Deletes a cookie stored in the agent framework.Terminates the agent process with resource retry feedback.Returns the next attribute name and value from the created iterator.Obtains the value of an attribute of the current resource.Returns the type of the check command currently being executed.Returns the type of the command for which the entry point is invoked.Retrieves the value of a cookie stored in the agent framework.Returns the name of the custom action to be executed on a resource.Retrieves the ID of the resource for which the entry point is being executed.Retrieves the resource name of the current command.Returns the retry attempt number for the current command.Retrieves the type name of the resource for which the entry point is being executed.Initializes the agent framework.Returns the cause of the ABORT entry point.Prints a diagnostic message to the agent log file.Modifies an attribute of the current resource.Resets the attribute iterator.Reports progress, warning, and error messages to the Oracle Clusterware server and the user.Stores a cookie and its value in the agent framework.Sets the C/C++ entry point function to be executed for a particular action on the resource.Registers a function to be called when the agent process exits.Sets a custom label on the current resource.Starts the agent framework.">API Reference</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9">Agent Example</a></p>
                  </li>
               </ul>
            </div><a id="CWADD92428"></a><a id="CWADD92427"></a><div class="sect2"><a id="GUID-9B95F8E6-76AD-444A-BEA2-956038E35080" name="GUID-9B95F8E6-76AD-444A-BEA2-956038E35080"></a><h3 id="CWADD-GUID-9B95F8E6-76AD-444A-BEA2-956038E35080" class="sect3">Agent Framework Data Types</h3>
               <div>
                  <p>The Oracle Clusterware agent framework uses Oracle-defined portable data types to represent strings and numbers. By using these data types, you can build and execute agent programs on multiple platforms. <a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B95F8E6-76AD-444A-BEA2-956038E35080__CACEJGGA" title="This table lists and describes Oracle data types used in the agent framework.">Table H-1</a> lists and describes the Oracle data types used in the agent framework.
                  </p>
                  <div class="tblformal" id="GUID-9B95F8E6-76AD-444A-BEA2-956038E35080__CACEJGGA">
                     <p class="titleintable">Table H-1 Oracle Data Types Used in the Agent Framework</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle Data Types Used in the Agent Framework" summary="This table lists and describes Oracle data types used in the agent framework." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d183093e309">Oracle Data Type</th>
                              <th align="left" valign="bottom" width="69%" id="d183093e312">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d183093e317" headers="d183093e309 ">
                                 <p>ub4</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d183093e317 d183093e312 ">
                                 <p>Unsigned 32-bit integer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d183093e324" headers="d183093e309 ">
                                 <p>sb4</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d183093e324 d183093e312 ">
                                 <p>Signed 32-bit integer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d183093e331" headers="d183093e309 ">
                                 <p>oratext*</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d183093e331 d183093e312 ">
                                 <p>C style null-terminated strings, explicit cast to <span class="bold">char *</span> required
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>The agent framework APIs return a status value of type <code class="codeph">clsagfwret</code>, as follows:
                  </p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li><code class="codeph">CLSAGFW_SUCCESS</code>: Function executed successfully
                     </li>
                     <li><code class="codeph">CLSAGFW_FAIL</code>: There was error in the parameters or in execution of the function
                     </li>
                     <li></li>
                  </ul>
                  <p>String values returned by an API are only accessible in the scope of the current command entry point. Agents can copy the returned string value to its own buffers to retain the value.</p>
               </div>
            </div><a id="CWADD92429"></a><div class="sect2"><a id="GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04" name="GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04"></a><h3 id="CWADD-GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04" class="sect3">Agent Framework Context Initialization and Persistence</h3>
               <div>
                  <p>The agent framework is initialized by the <code class="codeph">clsagfw_init()</code> function call. There is no context that you need to maintain. Action entry point functions are passed a pointer to the agent framework context (type <code class="codeph">clsagfw_aectx</code>). This context is specific to the entry point being called and cannot be used beyond the scope of the entry point. Other agent framework APIs take this context pointer as a parameter. This is an opaque data structure that the agent framework maintains but does not explicitly initialize or destroy.
                  </p>
               </div>
            </div><a id="CWADD92430"></a><div class="sect2"><a id="GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0" name="GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0"></a><h3 id="CWADD-GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0" class="sect3">Prototype for C and C++ Entry Point Functions</h3>
               <div>
                  <p>The agent implements the entry point functions for the resource management commands and registers these functions with the agent framework. The agent framework calls an entry point function to execute a command or action on a resource. The entry point functions need to conform to the following prototype and convention:</p><pre class="oac_no_warn" dir="ltr">typedef ub4 (*clsagfw_action_entry) (const clsagfw_aectx *aectx)
</pre><p>The entry point function is called with a pointer to a context area that the agent framework maintains. This function should return a value indicating the status of execution of the entry point. For the CHECK entry point, the function returns the current state of the resource.</p>
                  <p>If you develop the agent using C++, then you declare the entry point function prototypes using the <span class="bold"><code class="codeph">extern ‘C'</code></span> keyword.
                  </p>
               </div>
            </div><a id="CWADD92432"></a><a id="CWADD92431"></a><div class="sect2"><a id="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E" name="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E"></a><h3 id="CWADD-GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E" class="sect3">C and C++ Entry Point Types and Codes</h3>
               <div>
                  <p>The agent framework currently defines seven entry point types corresponding to resource management commands and operations performed on a resource. Agents must register entry points for START, STOP, CHECK, and CLEAN commands. Other command entry points are optional. The agent registers entry points by calling the <code class="codeph">clsagfw_set_entrypoint()</code> API for each resource type and command. <a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E__CACGAJFF" title="This table lists and describes entry point types.">Table H-2</a> lists and describes entry point types and their equivalent type codes.
                  </p>
                  <div class="tblformal" id="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E__CACGAJFF">
                     <p class="titleintable">Table H-2 Entry Point Types</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Entry Point Types" summary="This table lists and describes entry point types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="16%" id="d183093e748">Name</th>
                              <th align="left" valign="bottom" width="49%" id="d183093e751">Description</th>
                              <th align="left" valign="bottom" width="36%" id="d183093e754">Type Code</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e759" headers="d183093e748 ">
                                 <p>START</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e759 d183093e751 ">
                                 <p>Start a resource and bring it online</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e759 d183093e754 ">
                                 <p>CLSAGFW_ACTION_START</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e769" headers="d183093e748 ">
                                 <p>STOP</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e769 d183093e751 ">
                                 <p>Stop a resource and take it offline</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e769 d183093e754 ">
                                 <p>CLSAGFW_ACTION_STOP</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e779" headers="d183093e748 ">
                                 <p>CLEAN</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e779 d183093e751 ">
                                 <p>Clean up after a failed command on the resource</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e779 d183093e754 ">
                                 <p>CLSAGFW_ACTION_CLEAN</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e789" headers="d183093e748 ">
                                 <p>CHECK</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e789 d183093e751 ">
                                 <p>Check the state of the resource</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e789 d183093e754 ">
                                 <p>CLSAGFW_ACTION_CHECK</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e799" headers="d183093e748 ">
                                 <p>ABORT</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e799 d183093e751 ">
                                 <p>End an executing command that has timed out</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e799 d183093e754 ">
                                 <p>CLSAGFW_ACTION_ABORT</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e809" headers="d183093e748 ">
                                 <p>DELETE</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e809 d183093e751 ">
                                 <p>Resource is about to be deleted</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e809 d183093e754 ">
                                 <p>CLSAGFW_ACTION_RES_DELETED</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e819" headers="d183093e748 ">
                                 <p>MODIFY</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e819 d183093e751 ">
                                 <p>Resource is modified</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e819 d183093e754 ">
                                 <p>CLSAGFW_RESATTR_MODIFIED</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e829" headers="d183093e748 ">
                                 <p>ACTION</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e829 d183093e751 ">
                                 <p>Invoke custom action on the resource</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e829 d183093e754 ">
                                 <p>CLSAGFW_RES_ACTION</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E__GUID-AB2DC922-B92B-4370-B943-F6C0D80C770B">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" title="Oracle Clusterware manages applications and processes as resources that you register with Oracle Clusterware.A virtual machine is an environment created for a running operating system, known as a guest operating system. The virtual machine displays as a window on your computer’s desktop which can be displayed in full-screen mode or remotely on another computer.A resource group is a container for a logically related group of resources.In Oracle Clusterware, a resource type is a template for a class of resources.Use CRSCTL to create resource groups, resource group types, and to add resources to resource groups.Oracle Clusterware runs all resource-specific commands through an entity called an agent.An action script defines one or more actions to start, stop, check, or clean resources.Register resources in Oracle Clusterware 12c using the crsctl add resource command.">Oracle Clusterware Resources and Agents</a>"</span> for more information about entry points
                     </p>
                  </div>
               </div>
            </div><a id="CWADD92433"></a><div class="sect2"><a id="GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795" name="GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795"></a><h3 id="CWADD-GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795" class="sect3">C and C++ Entry Point Function Return Values</h3>
               <div>
                  <p>All entry point functions, except for the CHECK entry point, return one of the following values to indicate the status of execution of the entry point:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">CLSAGFW_AE_SUCCESS</span>: Entry point execution completed successfully
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">CLSAGFW_AE_FAIL</span>: Entry point execution failed
                        </p>
                     </li>
                  </ul>
                  <p>The agent framework calls the CHECK entry point function to monitor the state of the resource. This function returns one of the following values that represents the current state of the resource:</p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li>CLSAGFW_ONLINE</li>
                     <li>CLSAGFW_UNPLANNED_OFFLINE</li>
                     <li>CLSAGFW_PLANNED_OFFLINE</li>
                     <li>CLSAGFW_UNKNOWN</li>
                     <li>CLSAGFW_PARTIAL</li>
                     <li>CLSAGFW_FAILED</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795__GUID-C0996094-F7DE-47C9-9950-20A68F15F28F">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware runs all resource-specific commands through an entity called an agent.">Agents in Oracle Clusterware</a>"</span> for more information about evaluating and returning the state of a resource
                     </p>
                  </div>
               </div>
            </div><a id="CWADD92434"></a><div class="sect2"><a id="GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB" name="GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB"></a><h3 id="CWADD-GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB" class="sect3">Multithreading Considerations</h3>
               <div>
                  <p>The Oracle Clusterware agent framework is multithreaded by design. The agent code can also start new threads to execute application-specific functionality, such as monitoring external event sources. The agent framework executes only one entry point of a resource at a time, with the only exception being the ABORT entry point which is invoked to end a currently active action on a resource. C and C++ developers must ensure that all agent code is multithread safe. Access to global variables and other resources must be serialized using locking mechanisms, such mutexes. Other external C or C++ libraries included by the agent should also be multithread safe.</p>
               </div>
            </div><a id="CWADD92941"></a><a id="CWADD92940"></a><div class="sect2"><a id="GUID-AE0637F9-774B-4408-A948-09BE47A12EAB" name="GUID-AE0637F9-774B-4408-A948-09BE47A12EAB"></a><h3 id="CWADD-GUID-AE0637F9-774B-4408-A948-09BE47A12EAB" class="sect3">Deprecated APIs</h3>
               <div>
                  <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-AE0637F9-774B-4408-A948-09BE47A12EAB__BABEACFC" title="This table lists deprecated agent framework API commands and their replacements.">Table H-3</a> lists the deprecated agent framework APIs and the corresponding replacement APIs for Oracle Clusterware.
                  </p>
                  <div class="tblformalwide" id="GUID-AE0637F9-774B-4408-A948-09BE47A12EAB__BABEACFC">
                     <p class="titleintable">Table H-3 Deprecated Agent Framework APIs</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Deprecated Agent Framework APIs" summary="This table lists deprecated agent framework API commands and their replacements." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="45%" id="d183093e1266">Deprecated API</th>
                              <th align="left" valign="bottom" width="55%" id="d183093e1269">Replacement</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d183093e1274" headers="d183093e1266 "><pre class="oac_no_warn" dir="ltr">clsagfw_exit()</pre></td>
                              <td align="left" valign="top" width="55%" headers="d183093e1274 d183093e1269 "><pre class="oac_no_warn" dir="ltr">clsagfw_exit2()</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d183093e1281" headers="d183093e1266 "><pre class="oac_no_warn" dir="ltr">clsagfw_send_status()</pre></td>
                              <td align="left" valign="top" width="55%" headers="d183093e1281 d183093e1269 "><pre class="oac_no_warn" dir="ltr">clsagfw_send_status2()</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="CWADD92435"></a><div class="sect2"><a id="GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B" name="GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B"></a><h3 id="CWADD-GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B" class="sect3">API Reference</h3>
               <div>
                  <p>This section lists and describes the following functions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822" title="Registers a resource type that the agent manages.">clsagfw_add_type()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-AE09D76E-63EC-4270-83FC-0504D38276BD" title="Initiates a check action on a specific resource.">clsagfw_check_resource()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0" title="Creates an iterator to access all the attributes of the current resource.">clsagfw_create_attr_iterator()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC" title="Deletes a cookie stored in the agent framework.">clsagfw_delete_cookie()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-452087CF-77B9-4381-94A6-3E89E978A58C" title="Terminates the agent process with resource retry feedback.">clsagfw_exit2()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B" title="Returns the next attribute name and value from the created iterator.">clsagfw_get_attr_from_iterator()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86" title="Obtains the value of an attribute of the current resource.">clsagfw_get_attrvalue()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-7D7A085C-51D6-446F-9687-B04A20AA139A" title="Returns the type of the check command currently being executed.">clsagfw_get_check_type()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3" title="Returns the type of the command for which the entry point is invoked.">clsagfw_get_cmdid()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-24F42F78-86EB-4157-89E5-31C98F37946B" title="Retrieves the value of a cookie stored in the agent framework.">clsagfw_get_cookie()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A" title="Returns the name of the custom action to be executed on a resource.">clsagfw_get_request_action_name()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6" title="Retrieves the ID of the resource for which the entry point is being executed.">clsagfw_get_resource_id()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" title="Retrieves the resource name of the current command.">clsagfw_get_resource_name()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06" title="Returns the retry attempt number for the current command.">clsagfw_get_retry_count()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37" title="Retrieves the type name of the resource for which the entry point is being executed.">clsagfw_get_type_name()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21" title="Initializes the agent framework.">clsagfw_init()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7" title="Returns the cause of the ABORT entry point.">clsagfw_is_cmd_timedout()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4" title="Prints a diagnostic message to the agent log file.">clsagfw_log()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B" title="Modifies an attribute of the current resource.">clsagfw_modify_attribute()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B" title="Resets the attribute iterator.">clsagfw_reset_attr_iterator()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BCB22E7E-D21C-445E-A253-3B099331304B" title="Reports progress, warning, and error messages to the Oracle Clusterware server and the user.">clsagfw_send_status2()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C" title="Stores a cookie and its value in the agent framework.">clsagfw_set_cookie()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842" title="Sets the C/C++ entry point function to be executed for a particular action on the resource.">clsagfw_set_entrypoint()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C" title="Registers a function to be called when the agent process exits.">clsagfw_set_exitcb()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841" title="Sets a custom label on the current resource.">clsagfw_set_resource_state_label()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-800B6FFF-3807-47E2-8239-92C293D1E385" title="Starts the agent framework.">clsagfw_startup()</a></code></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822" name="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822"></a><h4 id="CWADD-GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822" class="sect4">clsagfw_add_type()</h4>
                  <div>
                     <p>Registers a resource type that the agent manages.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822__GUID-CA3DDE40-D277-442D-A24A-573295DCADC9">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_add_type(const oratext *type_name);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822__GUID-95DD9DE0-3454-4378-895C-70F664B8117F">Input</p>
                        <p><code class="codeph">type_name</code>: Resource type name that the agent is to manage
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822__GUID-2D8725C5-FCEF-47D2-A1B2-F611F6A7BA44">Usage Notes</p>
                        <p>On startup, an agent must register all the resource types that it manages. A single agent can manage multiple resource types and multiple resources.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD" name="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD"></a><h4 id="CWADD-GUID-AE09D76E-63EC-4270-83FC-0504D38276BD" class="sect4">clsagfw_check_resource()</h4>
                  <div>
                     <p>Initiates a check action on a specific resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD__GUID-7409E839-ECE8-4260-B889-21658608EE56">Syntax</p><pre class="pre codeblock"><code>void clsagfw_check_resource(const oratext *pResId)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD__GUID-DBE12892-2CF6-4E4A-87C9-54FD6DBD0050">Input</p>
                        <p><code class="codeph">pResId</code>: Identification of the resource
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD__GUID-63A52656-064E-4DA5-95D0-E94C1405B9A8">Usage Notes</p>
                        <p>Agents can use this function in entry points or in other background threads to initiate a check action on a specific resource. The agent framework schedules and executes the check action in another thread. This function has no effect if invoked from a CHECK entry point.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0" name="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0"></a><h4 id="CWADD-GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0" class="sect4">clsagfw_create_attr_iterator()</h4>
                  <div>
                     <p>Creates an iterator to access all the attributes of the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0__GUID-21F8ECB8-9B38-4BE4-B03C-A69F3F57F549">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_create_attr_iterator(const clsagfw_aectx *pAeCtx,
                                        clsagfw_ai_flags    flags);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0__GUID-D03AFB99-7F92-49C3-8401-13EF5EBEA0E8">Input</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">flags</code>:
                              </p>
                              <p>             <code class="codeph">CLSAGFW_ALL_ATTRS</code>: All attributes of the resource
                              </p>
                              <p>             <code class="codeph">CLSAGFW_MODIFIED_ATTRS</code>: Only modified attributes
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0__GUID-9DC193DC-0E11-4DEC-9F15-D061CED131CB">Usage Notes</p>
                        <p>Agents call this function to create an iterator to navigate through all the attributes of the resource. This is useful for agents managing multiple resources of different types. The iterator is an internal iterator maintained in the agent framework context. Each attribute is retrieved by calling the <code class="codeph">clsagfw_get_attr_from_iterator()</code> API. Modified attributes can be accessed only in the MODIFY entry point. At any given time, an entry point can create only one iterator. All subsequent attempts to create an iterator gets the pointer to the iterator that is already created.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC" name="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC"></a><h4 id="CWADD-GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC" class="sect4">clsagfw_delete_cookie()</h4>
                  <div>
                     <p>Deletes a cookie stored in the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC__GUID-6289891F-90D3-4EFC-A0BF-C73974F746E0">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_delete_cookie(const oratext *key);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC__GUID-AD08D837-F4C8-41F8-8207-5F0F12CFA119">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC__GUID-470E209E-B50C-48AC-9C76-1685B55BECBE">Usage Notes</p>
                        <p>This function deletes the cookie and frees all the memory used by the cookie and its value.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C" name="GUID-452087CF-77B9-4381-94A6-3E89E978A58C"></a><h4 id="CWADD-GUID-452087CF-77B9-4381-94A6-3E89E978A58C" class="sect4">clsagfw_exit2()</h4>
                  <div>
                     <p>Terminates the agent process with resource retry feedback.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C__GUID-01DB4A37-73A5-49FF-A2A5-21079BDDFA4A">Syntax</p><pre class="pre codeblock"><code>void clsagfw_exit2(const oratext *rid, sb4 exitCode, bool retry);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C__GUID-CDCE196D-14F2-437B-B3FD-C6578E4925B4">Input</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">rid</code>: Resource ID of the resource causing the irrecoverable error
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">exitCode</code>: Process exit code
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">retry</code>: option to retry resource
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C__GUID-50EA6F2A-5ACE-4122-BF6D-0B6B2D4E22A6">Usage Notes</p>
                        <p>An agent can encounter a irrecoverable error when executing an entry point for a resource and then must terminate the current process. An agent can use this API to end the agent process and provide feedback to the agent framework on the resource that is the cause for the irrecoverable error. If the retry parameter is set to <span class="italic">true</span>, then the current command on the resource is retried when the agent process restarts. If the parameter is set to <span class="italic">false</span>, then the current resource command is not retried and monitoring of the resource is disabled. This option can be used when a particular resource is the cause of repeated failures of an agent. The Oracle Clusterware server keeps track of the resources causing agent exits and automatically disables a resource if the failure rate is high. To re-enable a resource disabled due to high failure rate, must issue an explicit request to start the resource (for example, using CRSCTL).
                        </p>
                        <p>The Oracle Clusterware server restarts the agent to continue monitoring resources managed by the agent.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B" name="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B"></a><h4 id="CWADD-GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B" class="sect4">clsagfw_get_attr_from_iterator()</h4>
                  <div>
                     <p>Returns the next attribute name and value from the created iterator.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-092EF3B4-81EB-4887-A706-4E42542111CE">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_get_attr_from_iterator(const clsagfw_aectx *pAeCtx,
                                          const oratext **argName,
                                          const oratext **argValue);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-245BDF89-B7B4-4573-913F-84454D9AAA0D">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-B14245A3-3927-40F5-A3F6-BCAAD3254E8C">Returns</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">argname</code>: Attribute name
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">argValue</code>: Attribute value
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-576CC7DE-CCF1-4F89-9CCB-3853E6678CDB">Usage Notes</p>
                        <p>Use this function to retrieve attributes after the iterator has been created in the agent framework context. The iterator is advanced to the next attribute when this function returns. If the API returns CLSAGFW_FAIL, then there are no more attributes to retrieve for the resource.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86" name="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86"></a><h4 id="CWADD-GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86" class="sect4">clsagfw_get_attrvalue()</h4>
                  <div>
                     <p>Obtains the value of an attribute of the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-F7F1B394-7B02-4B1A-A23D-FE1F7A94B80F">Syntax</p><pre class="pre codeblock"><code>void clsagfw_get_attrvalue(const clsagfw_aectx *pAeCtx,
                           const oratext *pAttrName,
                           const oratext **pAttrValue);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-E1468BEB-84FD-47B0-BBB2-A6D7E597C60A">Input</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pAttrName</code>: Name of attribute to retrieve
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-37A9BEC8-554B-43C2-8005-CAC8DE0B4450">Returns</p>
                        <p><code class="codeph">pAttrValue</code>: Value of the specified attribute
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-72B2671F-7A3F-48AC-BBB8-9A71E3A64AF1">Usage Notes</p>
                        <p>Agents use this API to retrieve the value of a single attribute of the current command resource.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A" name="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A"></a><h4 id="CWADD-GUID-7D7A085C-51D6-446F-9687-B04A20AA139A" class="sect4">clsagfw_get_check_type()</h4>
                  <div>
                     <p>Returns the type of the check command currently being executed.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A__GUID-7FF69B67-3E86-4411-B2DD-E094A5C07772">Syntax</p><pre class="pre codeblock"><code>clsagfw_checktype
clsagfw_get_check_type(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A__GUID-688A3557-4019-4074-A0FD-1D795FCE3563">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A__GUID-A5AED642-FBB0-4EAA-802C-5AE0F31F1E4E">Usage Notes</p>
                        <p>The agent framework invokes the CHECK entry point of a resource for multiple conditions. By using this function, the agent can identify the exact condition for the current CHECK entry point and perform appropriate actions.</p>
                        <p>Possible conditions include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">CLSAGFW_INITIAL_CHECK</span>: Check entry point invoked as part of the initial probe stage when the Oracle Clusterware server is started or restarted.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_CHECK_AFTER_CMD</span>: Check entry point invoked to follow up the prior action (such as start or stop) to determine the resultant resource state after the action execution.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_PERIODIC_CHECK</span>: Check entry point invoked by the agent framework at periodic intervals to monitor the state of a resource. The time interval is specified in the <code class="codeph">CHECK_INTERVAL</code> attribute of the resource.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_EXTERNAL_CHECK</span>: Check entry point invoked by agent framework when it receives an explicit check request from external entities, such as CRSCTL.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_CHECKFROM_EP</span>: Check action initiated by the agent itself by calling the <code class="codeph">clsagfw_check_resource()</code> API.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3" name="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3"></a><h4 id="CWADD-GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3" class="sect4">clsagfw_get_cmdid()</h4>
                  <div>
                     <p>Returns the type of the command for which the entry point is invoked.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3__GUID-179A7993-BABC-4652-8DB8-E96E334BB4D3">Syntax</p><pre class="pre codeblock"><code>clsagfw_aecode clsagfw_get_cmdid(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3__GUID-D854E0F9-86AE-4B5F-B73B-DAC2AE8F7B5F">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3__GUID-54356944-5773-4E55-A813-E94B0E083370">Usage Notes</p>
                        <p>The agent can call this API in the ABORT entry point to determine the resource command that is being aborted.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-24F42F78-86EB-4157-89E5-31C98F37946B" name="GUID-24F42F78-86EB-4157-89E5-31C98F37946B"></a><h4 id="CWADD-GUID-24F42F78-86EB-4157-89E5-31C98F37946B" class="sect4">clsagfw_get_cookie()</h4>
                  <div>
                     <p>Retrieves the value of a cookie stored in the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-24F42F78-86EB-4157-89E5-31C98F37946B__GUID-19ECE386-8F42-4D2A-A156-8624404CDB39">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfwret clsagfw_set_cookie(const oratext *key,
                                         const void **value);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24F42F78-86EB-4157-89E5-31C98F37946B__GUID-795AF91F-E624-4F96-8406-977FB0BA2CB1">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                        <p><code class="codeph">Value</code>: Pointer to the value of the cookie
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A" name="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A"></a><h4 id="CWADD-GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A" class="sect4">clsagfw_get_request_action_name()</h4>
                  <div>
                     <p>Returns the name of the custom action to be executed on a resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A__GUID-4269D22E-1165-41D6-9621-D94B13908CF5">Syntax</p><pre class="pre codeblock"><code>const oratext *
clsagfw_get_request_action_name(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A__GUID-DE01E973-35CD-4CEC-922B-21FCC926766D">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context that is passed to user entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A__GUID-8A961D7B-AFDE-4F03-BD94-DA335BF528E1">Usage Notes</p>
                        <p>This function is called in the ACTION entry point to retrieve the action name that you specified in a request action command. You configure the list of actions for a resource in the ACTION attribute of the resource.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6" name="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6"></a><h4 id="CWADD-GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6" class="sect4">clsagfw_get_resource_id()</h4>
                  <div>
                     <p>Retrieves the ID of the resource for which the entry point is being executed.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6__GUID-5918E859-DB36-4863-9573-9611F298D260">Syntax</p><pre class="pre codeblock"><code>const oratext* clsagfw_get_resource_id(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6__GUID-8C6F4EA9-1D7C-4187-B67F-C2F47561E2D1">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6__GUID-1240969F-4741-4FC8-9DA5-29D6743A3991">Usage Notes</p>
                        <p>This function returns the Oracle Clusterware-generated resource ID. To retrieve the public display name of the resource, use the <code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" title="Retrieves the resource name of the current command.">clsagfw_get_resource_name()</a></code> API.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" name="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9"></a><h4 id="CWADD-GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" class="sect4">clsagfw_get_resource_name()</h4>
                  <div>
                     <p>Retrieves the resource name of the current command.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9__GUID-A097A44A-9886-494A-B250-BD52C89E6E37">Syntax</p><pre class="pre codeblock"><code>const oratext*
  clsagfw_get_resource_name(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9__GUID-317809A6-9F94-483D-A9D8-20A01BB193C8">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9__GUID-0140BCD0-AAAD-4AFD-919E-501BBAAD64F4">Usage Notes</p>
                        <p>This function returns the name of the resource for which the current command and entry point are being executed.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06" name="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06"></a><h4 id="CWADD-GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06" class="sect4">clsagfw_get_retry_count()</h4>
                  <div>
                     <p>Returns the retry attempt number for the current command.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06__GUID-FA275796-3249-4C11-98B9-11B848725927">Syntax</p><pre class="pre codeblock"><code>ub4 clsagfw_get_retry_count(const clsagfw_aectx *pAeCtx)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06__GUID-4E5A9A58-62FF-423E-8FEB-7A6450433869">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context that is passed to user entrypoints
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06__GUID-E26D738D-EEA3-4538-A441-57ABD73BC9F5">Usage Notes</p>
                        <p>Agents can call this function in entrypoints to check if the current command is being retried. An agent process or Oracle Clusterware server process can terminate in the middle of executing a command on a resource. Oracle Clusterware retries the failed command when the agent or server process restarts. The command may have successfully or partially executed in the previous attempt. The agent can perform resume or clean up actions when Oracle Clusterware retries the command. The number of times a command can be retried is an internal parameter of Oracle Clusterware.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37" name="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37"></a><h4 id="CWADD-GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37" class="sect4">clsagfw_get_type_name()</h4>
                  <div>
                     <p>Retrieves the type name of the resource for which the entry point is being executed.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37__GUID-81C067C9-6587-4E7C-8733-5FCEDB3A9B27">Syntax</p><pre class="pre codeblock"><code>const oratext* clsagfw_get_type_name(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37__GUID-12029F61-EB81-4CD7-ACD3-8192415168B8">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37__GUID-A92D75F7-5E09-4CFD-9428-7F7A5F5CC053">Usage Notes</p>
                        <p>This function returns the Oracle Clusterware-generated resource ID. To retrieve the public display name of the resource, use the <code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" title="Retrieves the resource name of the current command.">clsagfw_get_resource_name()</a></code> API.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21" name="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21"></a><h4 id="CWADD-GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21" class="sect4">clsagfw_init()</h4>
                  <div>
                     <p>Initializes the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21__GUID-830E1A20-5C7A-4930-8BE1-3FF37DCE3457">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_init(sb4 argc,
                        oratext **argv,
                        ub4 flags,
                        const oratext *logName,
                        void *reserved);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21__GUID-1F27FCF8-D3DD-4589-9D3F-7FBE6801A212">Input</p>
                        <p><code class="codeph">argc</code>: Number of command line arguments passed to the agent process
                        </p>
                        <p><code class="codeph">argv</code>: Command line arguments passed to the agent process
                        </p>
                        <p><code class="codeph">flags</code>:
                        </p>
                        <p><code class="codeph">logName</code>: Name of the log file for this agent
                        </p>
                        <p><code class="codeph">reserved</code>: Pass NULL
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21__GUID-A5CBA3CA-46D9-40F4-B9E9-AB1D8BB85CD1">Usage Notes</p>
                        <p>Oracle Clusterware automatically starts the agent configured for a resource when actions must be performed on the resource. On startup, the agent process calls this function first to initialize the agent framework run time. The command line arguments passed to the agent process by the Oracle Clusterware server must be passed to <code class="codeph">clsagfw_init()</code>. After initialization is complete, the agent can register resource types that are managed by the agent.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7" name="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7"></a><h4 id="CWADD-GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7" class="sect4">clsagfw_is_cmd_timedout()</h4>
                  <div>
                     <p>Returns the cause of the ABORT entry point.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7__GUID-58CBCE73-26BA-425A-9601-372C3C8313B3">Syntax</p><pre class="pre codeblock"><code>bool clsagfw_is_cmd_timedout(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7__GUID-B60F40B6-FB79-4455-8645-067851ADB096">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7__GUID-1EC4E16D-4EA0-44C4-A401-8D60A175B66E">Usage Notes</p>
                        <p>Agents can use this function in the ABORT entry point to identify the cause of the ABORT entry point invocation. The ABORT entry point can either be invoked if a command execution time exceeds its time out value or if the Oracle Clusterware administrator aborts the command.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4" name="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4"></a><h4 id="CWADD-GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4" class="sect4">clsagfw_log()</h4>
                  <div>
                     <p>Prints a diagnostic message to the agent log file.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4__GUID-E50403F5-885B-47EA-B217-94C80018865E">Syntax</p><pre class="pre codeblock"><code>void clsagfw_log(const clsagfw_aectx *pAeCtx,
                const ub4 log_level,
                const oratext *fmtp, ...);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4__GUID-442FD625-6F8B-47ED-BFC2-6538D3260740">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context that is passed to user entry points
                        </p>
                        <p><code class="codeph">log_level</code>: Log level of the message in the range of 1-5
                        </p>
                        <p><code class="codeph">fmtp</code>: Message format string, according to Standard C library print specifications
                        </p>
                        <p><code class="codeph">...</code>: Variable parameters corresponding to the format string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4__GUID-882A5145-292A-4C1A-9670-D73DBF2009FE">Usage Notes</p>
                        <p>Agents call this function to log diagnostic messages that help in debugging and understanding agent execution. You can use the <code class="codeph">LOG_LEVEL</code> parameter to control the volume of log messages. You can configure the current logging level of a resource using CRSCTL, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">$ crsctl set log level res "myResource1=3"
</pre><p>The misusages are logged to the agent log file in the <code class="codeph">TODO</code> directory. By default, the name of the log file is the same as the agent executable name. You can change this by passing the <code class="codeph">logName</code> parameter to the <code class="codeph">clsagfw_init()</code> API.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B" name="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B"></a><h4 id="CWADD-GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B" class="sect4">clsagfw_modify_attribute()</h4>
                  <div>
                     <p>Modifies an attribute of the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B__GUID-4E37C94D-1B64-431F-8F5C-2DF9B025AA67">Syntax</p><pre class="pre codeblock"><code>void clsagfw_modify_attribute(const clsagfw_aectx *pAeCtx,
                              const oratext *pAttrName,
                              const oratext *pAttrValue);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B__GUID-B7FC4F29-F09C-49BF-BBEA-7679DFF1818D">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">pAttrName</code>: Name of attribute to be modified
                        </p>
                        <p><code class="codeph">pAttrValue</code>: New value of attribute
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B__GUID-115E72C1-2574-41FD-8AC3-26E806B3E0FF">Usage Notes</p>
                        <p>Agents can modify the value of an attribute of the current command resource by calling this API. A resource modification request is sent to the Oracle Clusterware server for validation and the updated attribute value is reflected in the agent only after confirmation from the Oracle Clusterware server. This function can be only called from the START, STOP, and CLEAN entry points.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B" name="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B"></a><h4 id="CWADD-GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B" class="sect4">clsagfw_reset_attr_iterator()</h4>
                  <div>
                     <p>Resets the attribute iterator.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B__GUID-80222244-D1F1-49EF-B1EF-038562F0024C">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_reset_attr_iterator(const clsagfw_aectx *pAeCtx,
                                       clsagfw_ai_flags    flags);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B__GUID-29903647-2101-4BDE-8A48-618E86B56CE4">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">flags</code>: Which attributes to be accessed:
                        </p>
                        <p>            <code class="codeph">CLSAGFW_ALL_ATTRS</code>: All attributes of the resource
                        </p>
                        <p>            <code class="codeph">CLSAGFW_MODIFIED_ATTRS</code>: Only modified attributes
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B__GUID-B970722B-C935-4200-BB34-0E964433C269">Usage Notes</p>
                        <p>This function resets the iterator in the agent framework context so that agents can restart attribute navigation.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B" name="GUID-BCB22E7E-D21C-445E-A253-3B099331304B"></a><h4 id="CWADD-GUID-BCB22E7E-D21C-445E-A253-3B099331304B" class="sect4">clsagfw_send_status2()</h4>
                  <div>
                     <p>Reports progress, warning, and error messages to the Oracle Clusterware server and the user.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B__GUID-F9841C4E-0F6D-47F4-88C6-B78BF90E6ACB">Syntax</p><pre class="pre codeblock"><code>void clsagfw_send_status2(const clsagfw_aectx* pAeCtx,
                          const oratext*       pResId,
                          clsagfw_status_type type,
                          const oratext* fmtp,...);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B__GUID-8E98061F-4C6F-498C-A66D-6F121F9B4638">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">pResId</code>: Resource for which the message is being reported
                        </p>
                        <p><code class="codeph">type</code>: One of the following types of messages:
                        </p>
                        <p>          <code class="codeph">CLSAGFW_STATUS_PROGRESS</code>: Progress message
                        </p>
                        <p>          <code class="codeph">CLSAGFW_STATUS_WARNING</code>: Warning message
                        </p>
                        <p>          <code class="codeph">CLSAGFW_STATUS_ERROR</code>: Error message
                        </p>
                        <p><code class="codeph">fmtp</code>: Message format string
                        </p>
                        <p><code class="codeph">...</code>: Variables corresponding to positions in the message format string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B__GUID-4C70A852-8960-4C90-8326-BDC73F17BC36">Usage Notes</p>
                        <p>During execution of a command, the agent can send informational messages to the Oracle Clusterware server and to the user performing operations on resources. These messages can inform you about execution progress and if there are any warnings or errors.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C" name="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C"></a><h4 id="CWADD-GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C" class="sect4">clsagfw_set_cookie()</h4>
                  <div>
                     <p>Stores a cookie and its value in the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C__GUID-BBAE0B51-155D-4E6A-864B-AD3C14EE1525">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfwret clsagfw_set_cookie(const oratext *key,
                                         const void *value);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C__GUID-509982C0-7D1E-47A1-80E9-FD4C12F52DF0">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                        <p><code class="codeph">Value</code>: Pointer to the value of the cookie to be stored
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C__GUID-0117165C-9C1B-4756-81AB-9ECE22099480">Usage Notes</p>
                        <p>The value of the saved cookie can be later retrieved by calling <code class="codeph">clsagfw_get_cookie()</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842" name="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842"></a><h4 id="CWADD-GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842" class="sect4">clsagfw_set_entrypoint()</h4>
                  <div>
                     <p>Sets the C/C++ entry point function to be executed for a particular action on the resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842__GUID-0C202471-EAF2-4645-B21E-9F62501EBCFD">Syntax</p><pre class="pre codeblock"><code>void clsagfw_set_entrypoint(const oratext *type_name,
                            clsagfw_action_entry action_entry,
                            clsagfw_aecode action_entrycode)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842__GUID-BFD50C9B-9B22-4C48-BD5B-ED462FBAA618">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                        <p><code class="codeph">Value</code>: Pointer to the value of the cookie to be stored
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842__GUID-187506C8-CFFC-4A4B-90DE-54F8CD2B19C6">Usage Notes</p>
                        <p>The value of the saved cookie can be later retrieved by calling <code class="codeph">clsagfw_get_cookie()</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C" name="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C"></a><h4 id="CWADD-GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C" class="sect4">clsagfw_set_exitcb()</h4>
                  <div>
                     <p>Registers a function to be called when the agent process exits.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C__GUID-83430690-2C2B-49E3-B715-F47E565490E8">Syntax</p><pre class="pre codeblock"><code>typedef void (*clsagfw_exit_callback) (sb4 exitCode);
void clsagfw_set_exitcb(clsagfw_exit_callback exit_func)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C__GUID-CA8ECBB8-7996-43A0-8776-7EC9BE638C13">Input</p>
                        <p><code class="codeph">exit_func</code>: Function to be invoked when agent process exits
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C__GUID-61A162D6-0117-4BD0-99E8-59335027C130">Usage Notes</p>
                        <p>Agents can register a callback function to be invoked when the agent framework terminates the agent process. The callback function can perform proper clean up of any internal resources instantiated by the agent. If the agent process is exiting to recover from an irrecoverable error, then the Oracle Clusterware server does not restart the agent until the old incarnation has exited.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841" name="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841"></a><h4 id="CWADD-GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841" class="sect4">clsagfw_set_resource_state_label()</h4>
                  <div>
                     <p>Sets a custom label on the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841__GUID-E03F333F-A299-406D-AE2A-41B4721B6D2C">Syntax</p><pre class="pre codeblock"><code>void clsagfw_set_resource_state_label(const clsagfw_aectx *pAeCtx,
                                      const oratext *pLabel);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841__GUID-36BF0255-AD42-4E5F-9A01-0CDE4F980918">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">pLabel</code>: Label to associate with the resource, null terminated string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841__GUID-394FD817-7B85-4890-B3CB-B43FE4DA8D98">Usage Notes</p>
                        <p>Agents can use this function to set a descriptive label associated with the state of the resource. This label is reported in the <code class="codeph">STATE_DETAILS</code> attribute of the resource.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-800B6FFF-3807-47E2-8239-92C293D1E385" name="GUID-800B6FFF-3807-47E2-8239-92C293D1E385"></a><h4 id="CWADD-GUID-800B6FFF-3807-47E2-8239-92C293D1E385" class="sect4">clsagfw_startup()</h4>
                  <div>
                     <p>Starts the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-800B6FFF-3807-47E2-8239-92C293D1E385__GUID-D1ACD077-3DD3-4219-B43D-49DC90AE2061">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_startup(void)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-800B6FFF-3807-47E2-8239-92C293D1E385__GUID-6A1E87A4-F587-4D68-AC46-FC72C5EE0D5E">Usage Notes</p>
                        <p>After the agent framework is initialized and the resource types and their entry points are registered, the agent calls this API to start the agent framework, which, in turn, starts the multithreaded infrastructure to monitor and perform actions on the resources.</p>
                        <p>On success, this function never returns to the calling thread. Entry points for the resource actions are invoked by the agent framework threads as and when required.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD92533"></a><a id="CWADD92532"></a><div class="sect2"><a id="GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9" name="GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9"></a><h3 id="CWADD-GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9" class="sect3">Agent Example</h3>
               <div>
                  <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9__CACDAJEB">Example H-1</a> details an agent implementation to manage a resource that represents a file.
                  </p>
                  <div class="example" id="GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9__CACDAJEB">
                     <p class="titleinexample">Example H-1 demoagent1.cpp</p><pre class="oac_no_warn" dir="ltr">/* Copyright (c) 2004, 2012, Oracle and/or its affiliates.
All rights reserved. */

/*
 * NAME
 * Demoagent1.cpp: Demonstrates agent to monitor a file
 *
 * DESCRIPTION
 * This is a sample program that demonstrates an agent to monitor
 * a file. The agent has the following tasks:
 *  - On startup         : Create the file.
 *  - On shutdown        : Delete the file.
 *  - On check command   : Detect whether the file is present or not.
 *  - On clean command   : Delete the file.
 * This program can be used as a basis to build up more complicated
 * agents that manage real-world resources.
 *


#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;clsagfw.h&gt;
</pre></div>
                  <!-- class="example" -->
                  <p>Include the agent framework <code class="codeph">clsagfw.h</code> header file.
                  </p><pre class="oac_no_warn" dir="ltr">#define TEST_TYPE1                   (oratext *) "HOTFILE_TYPE"
#define TEST_PATHNAME_ATTR           (oratext *) "PATH_NAME"


/*
 * NAME
 *    test_agent_exit
 * DESCRIPTION
 *    Function to clean up, called by framework whenever the agent
 *    process is about to terminate
 * PARAMS
 *    exitCode, which is an sb4 describing the reason for exit.
 * RETURNS
 *    void
 */
void
test_agent_exit(sb4 exitCode)
{
  clsagfw_log(NULL, 1, (oratext *)"Demo Agent is exiting..\n");
}
</pre><p>Exit callback function registered with the agent framework.</p><pre class="oac_no_warn" dir="ltr">/*
 * NAME
 *    type1_start
 * DESCRIPTION
 *    Action entry point for the 'start' command. Creates the file for
 *    monitoring.
 * PARAMS
 *    Pointer to the agent framework context
 * RETURNS
 *    ub4 which could be CLSAGFW_AE_FAIL or CLSAGFW_AE_SUCCESS
 *    depending on whether the action failed or succeeded.
 */
ub4
type1_start(const clsagfw_aectx *ectx)
{
    ub4  ret = CLSAGFW_AE_FAIL;
    const oratext   *pResName  = NULL;
    const oratext   *pPathName = NULL;
    FILE *fp;

    clsagfw_log(ectx, 1, (oratext *)"Start action called..");

    /* Try to read the resource name */
    if (clsagfw_get_attrvalue(ectx, (oratext *)"NAME", &amp;pResName) !=
            CLSAGFW_SUCCESS)
    {
      goto done;
    }

    /* Try to read the PATH_NAME attribute */
    if (clsagfw_get_attrvalue(ectx, TEST_PATHNAME_ATTR, &amp;pPathName) !=
            CLSAGFW_SUCCESS)
    {
      goto done;
    }
</pre><p>Retrieve the resource name and the value of the <code class="codeph">PATH_NAME</code> attribute using <code class="codeph">clsagfw_get_attrvalue()</code>.
                  </p><pre class="oac_no_warn" dir="ltr">    clsagfw_log(ectx, 1,
                (oratext *)"Start action arguments: resName = %s,
                pathName = %s", pResName, pPathName);

    /* Try to create the file */
    fp = fopen((char *)pPathName, "w");

    if(!fp)
    {
      /* Could not create the file */
        clsagfw_log(ectx, 1, (oratext *) "START action for resource %s:
                    FAILED\n", pResName);
        ret = CLSAGFW_AE_FAIL;
    }
    else
    {
      /* Created the file successfully */
        clsagfw_log(ectx, 1, (oratext *) "START action for resource %s: 
                    SUCCESS\n", pResName);
        ret = CLSAGFW_AE_SUCCESS;
      fclose(fp);
    }

done:
    return ret;
}</pre><p>Diagnostic and error messages are logged to the agent log file by calling <code class="codeph">clsagfw_log()</code>.
                  </p><pre class="oac_no_warn" dir="ltr">/*
 * NAME
 *    type1_stop
 * DESCRIPTION
 *    Action entry point for the 'stop' and 'clean' commands. Deletes
 *    the file being monitored.
 * PARAMS
 *    Pointer to agent framework context
 * RETURNS
 *    ub4 which could be CLSAGFW_AE_FAIL or CLSAGFW_AE_SUCCESS
 *    depending on whether the action failed or succeeded.
 */
ub4
type1_stop (const clsagfw_aectx *ectx)
{
    ub4             ret = CLSAGFW_AE_FAIL;
    const oratext   *pResName  = NULL;
    const oratext   *pPathName = NULL;

    clsagfw_log(ectx, 1, (oratext *)"Stop action called..");

    /* Try to read the resource name */
    if (clsagfw_get_attrvalue(ectx, (oratext *)"NAME", &amp;pResName) !=
            CLSAGFW_SUCCESS)
    {
      clsagfw_log(ectx, 1, (oratext *)"STOP action: %s: Could not
                  read attribute\n", pResName);
      goto done;
    }

    /* Try to read the PATH_NAME attribute */
    if (clsagfw_get_attrvalue(ectx, TEST_PATHNAME_ATTR, &amp;pPathName) !=
            CLSAGFW_SUCCESS)
    {
        pPathName = pResName;
    }

    clsagfw_log(ectx, 1,
                (oratext *)"Stop action arguments: resName = %s,
                pathName = %s", pResName, pPathName);

    /* Try to delete the file */
    if (remove((char *)pPathName))
    {
      /* Could not delete the file */
      clsagfw_log(ectx, 1, (oratext *)"STOP action for resource %s:
                  FAILED\n", pResName);
      ret = CLSAGFW_AE_FAIL;
    }
    else
    {
      /* Deleted the file successfully */
      clsagfw_log(ectx, 1, (oratext *)"STOP action for resource %s:
                  SUCCESS\n", pResName);
      ret = CLSAGFW_AE_SUCCESS;
    }

done:
    return ret;
}

/*
 * NAME
 *    type1_check
 * DESCRIPTION
 *    Action entry point for the 'check' command. Determines if the
 *    file exists.
 * PARAMS
 *    Pointer to agent framework context.
 * RETURNS
 *    ub4 which gives the status of the resource. Check the
 *    agent framework reference for details on this function's
 *     return codes.
 */
ub4 
type1_check(const clsagfw_aectx *ectx)
{
    ub4             ret = CLSAGFW_UNKNOWN;
    const oratext   *pResName  = NULL;
    const oratext   *pPathName = NULL;
    FILE *fp;

    clsagfw_log(ectx, 1, (oratext *)"Check action called..");

    /* Try to read the resource name */
    if (clsagfw_get_attrvalue(ectx, (oratext *) "NAME", &amp;pResName) !=
            CLSAGFW_SUCCESS)
    {
      goto done;
    }

    /* Try to read the PATH_NAME attribute */
    if (clsagfw_get_attrvalue(ectx, TEST_PATHNAME_ATTR, &amp;pPathName) !=
            CLSAGFW_SUCCESS)
    {
      clsagfw_log(ectx, 1, (oratext *)"CHECK action: %s: Could not
                  read attribute\n", pResName);
      goto done;
    }

    clsagfw_log(ectx, 1,
                (oratext *)"Check action arguments: resName = %s,
                pathName = %s", pResName, pPathName);

    /* Check if the file is accessible */
    fp = fopen((char *)pPathName, "r");
    if (!fp)
    {
      /* Could not open file */
      clsagfw_log(ectx, 1, (oratext *)"CHECK action: %s status &#x2013;
                  UNPLANNED_OFFLINE\n", pResName);
      ret = CLSAGFW_UNPLANNED_OFFLINE;
    }
    else
    {
      /* Opened file successfully */
      clsagfw_log(ectx, 1,(oratext *)"CHECK action: %s status &#x2013;
                  ONLINE\n", pResName);
      fclose(fp);
      ret = CLSAGFW_ONLINE;
    }

done:
    return ret;
}

/*
 * Initialization of the agent framework and registration of types is
 *  done in main.
 */
int main(sb4 argc, oratext **argv)
{
    clsagfw_log(NULL, 1, (oratext *)" *** Agent Framework Demo Agent
                Started *** \n");

    /*
     * Initialize the agent framework
     */
    if (clsagfw_init(argc, argv, 0, NULL, 0)
        != CLSAGFW_SUCCESS)
    {
      clsagfw_log(NULL, 1, (oratext *)"Failed to initilize the agent
                  framework\n");
      clsagfw_exit(-1);
    }

    /*
     * Set the exit callback function
     */
    clsagfw_set_exitcb(test_agent_exit);

    /*
     * Add the type definition to the framework
     */ 
    if (clsagfw_add_type(TEST_TYPE1) != CLSAGFW_SUCCESS)
    {
      clsagfw_log(NULL, 1,(oratext *)"Failed in adding type %s to the
                  framework\n", TEST_TYPE1);
      clsagfw_exit(-1);
    }


    /*
     * Set all entry points for for HOTFILE_TYPE
     */
    clsagfw_set_entrypoint(TEST_TYPE1, type1_start,
                           CLSAGFW_ACTION_START);
    clsagfw_set_entrypoint(TEST_TYPE1, type1_stop,
                           CLSAGFW_ACTION_STOP);
    clsagfw_set_entrypoint(TEST_TYPE1, type1_check,
                           CLSAGFW_ACTION_CHECK);
    clsagfw_set_entrypoint(TEST_TYPE1, type1_stop,
                           CLSAGFW_ACTION_CLEAN);

    clsagfw_log(NULL, 1, (oratext *)"Added resource type [%s] to the
                agent framework\n", TEST_TYPE1);

    /*
     * All set to go, Start the framework. This function does not
     * return if the framework starts successfully.
     */
    clsagfw_startup();

    /*** NOT REACHED **/

    return 0;
}</pre></div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00380.getting-started-with-database-administration.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter provides a brief roadmap for administering your database. It introduces you to Oracle Enterprise Manager Database Express (EM Express), the Web-based interface for managing an Oracle database.">
      <meta name="description" content="This chapter provides a brief roadmap for administering your database. It introduces you to Oracle Enterprise Manager Database Express (EM Express), the Web-based interface for managing an Oracle database.">
      <title>Getting Started with Database Administration</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day DBA">
      <meta property="og:description" content="This chapter provides a brief roadmap for administering your database. It introduces you to Oracle Enterprise Manager Database Express (EM Express), the Web-based interface for managing an Oracle database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day DBA">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="2-day-dba.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T23:13:13-07:00">
      <meta name="dcterms.title" content="2 Day DBA">
      <meta name="dcterms.dateCopyrighted" content="2004, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96197-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="installing-oracle-database-creating-database.html" title="Previous" type="text/html">
      <link rel="next" href="configuring-the-network-environment.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADMQS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="installing-oracle-database-creating-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuring-the-network-environment.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day DBA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Getting Started with Database Administration </li>
            </ol>
            <a id="GUID-2BF9BB16-53C9-4E40-952D-774FEA514335" name="GUID-2BF9BB16-53C9-4E40-952D-774FEA514335"></a><a id="ADMQS003"></a>
            
            <h2 id="ADMQS-GUID-2BF9BB16-53C9-4E40-952D-774FEA514335" class="sect2"><span class="enumeration_chapter">3 </span> Getting Started with Database Administration 
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='getting-started-with-database-administration'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>This chapter provides a brief roadmap for administering your database. It introduces you to Oracle Enterprise Manager Database Express (EM Express), the Web-based interface for managing an Oracle database.</p>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-C30ACE99-853A-43FB-A628-FC65E034B67D" title="This section provides an overview of the tasks involved in managing an Oracle database instance. Each chapter in this guide describes a different task in detail.">Managing Your Database: An Overview</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2" title="Before using certain tools that access the Oracle database, such as SQL*Plus, you must configure environment variables for your operating system. These environment variables are used by Oracle Database to determine the database instance to which the tool should connect.">Configuring the Operating System Environment Variables</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA" title="EM Express is a web-based database management tool that is built inside the Oracle Database. It supports key performance management and basic database administration functions.">Introduction to Oracle Enterprise Manager Database Express</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" title="You can use Oracle Enterprise Manager Database Express (EM Express) to manage non-CDBs, multitenant container databases (CDBs), and pluggable databases (PDBs). EM Express uses an HTTPS port to connect to and manage non-CDBs, CDBs, and PDBs.">Starting EM Express</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" title="The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.">Configuring the HTTPS Port for EM Express</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-638AB4AB-27B5-4C00-8EA4-ACCDE0C985F5" title="In addition to using EM Express to monitor and manage Oracle Database on-premises, you can also use EM Express to manage Oracle Database Cloud Service (DBCS) database deployments.">About EM Express and Database Cloud Service Deployments</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4" title="The Database Home page is the main database management page in Oracle Enterprise Manager Database Express (EM Express).">Accessing the Database Home Page</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-E01797C6-B9D5-4124-BF24-092CE93F34B9" title="As a database administrator, you can log in to Oracle Enterprise Manager Database Express (EM Express) with the SYS or SYSTEM user account to perform administrative and other tasks. Nonadministrative users may also want to log in to EM Express.">Granting Access to EM Express for Nonadministrative Users</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-ADF47AF3-3546-4AC4-9D6B-E3F54B35FF6F" title="In addition to using the graphical user interface (GUI) pages presented in Oracle Enterprise Manager Database Express (EM Express), you can use other Oracle tools such as SQL Developer and SQL*Plus to administer your database.">Administering the Database with SQL-Based Management Tools</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-database-administration.html#GUID-90D9A35A-8A40-4205-9C10-BB49BEF72A0B" title="Oracle by Example (OBE) has a series on the Oracle Database 2 Day DBA guide. This OBE steps you through the tasks in this chapter and includes annotated screenshots.">Getting Started with Database Administration: Oracle by Example Series</a></p>
                  </li>
               </ul>
            </div><a id="ADMQS12132"></a><a id="ADMQS037"></a><div class="props_rev_3"><a id="GUID-C30ACE99-853A-43FB-A628-FC65E034B67D" name="GUID-C30ACE99-853A-43FB-A628-FC65E034B67D"></a><h3 id="ADMQS-GUID-C30ACE99-853A-43FB-A628-FC65E034B67D" class="sect3"><span class="enumeration_section">3.1 </span>Managing Your Database: An Overview
               </h3>
               <div>
                  <p>This section provides an overview of the tasks involved in managing an Oracle database instance. Each chapter in this guide describes a different task in detail.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-C30ACE99-853A-43FB-A628-FC65E034B67D__GUID-B7B7FECE-F418-4F08-9F23-1973A8BDB5A3">To manage your Oracle database: </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start the database instance. </span><div>
                           <p>After the installation, your instance is started and your database is open. In the future, there will be times, perhaps for doing database maintenance or because of a power or media failure, that you shut down your database instance and later restart it.</p>
                           <p>See <span class="q">"<a href="managing-the-oracle-instance.html#GUID-C2CFFCE3-95F7-4D3D-B388-294DBBF25793" title="This section provides instructions about two methods you can use to start or shut down the Oracle instance.">Shutting Down and Starting Up the Oracle Instance</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Optionally, configure the network environment to enable clients to connect to your database.</span><div>
                           <p>See <span class="q">"<a href="configuring-the-network-environment.html#GUID-C6DD213A-D37E-4905-983D-F9DCA8AE286A" title="This chapter helps you configure your client/server network.">Configuring the Network Environment</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Review your database storage structures: tablespaces and data files, online redo log files, and control files. Create or modify storage structures as needed.</span><div>
                           <p>See <span class="q">"<a href="managing-database-storage-structures.html#GUID-1C4BBF52-BBD8-4F37-92DD-80D414A75B59" title="This chapter discusses using Oracle Enterprise Manager Database Express (EM Express) to view and manage the storage structures of your database.">Managing Database Storage Structures</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Review memory allocation and adjust as needed.</span><div>
                           <p>See <span class="q">"<a href="managing-the-oracle-instance.html#GUID-8BDFF6EB-2EDE-4307-9393-D159E2F1E84F" title="This section provides background information about managing memory for the Oracle instance, and includes instructions about how to adjust the memory allocation for the Oracle instance.">Managing Memory</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Review, unlock, and reset passwords for predefined database users as needed. Create new users, and assign privileges and roles to them.</span><div>
                           <p>See <span class="q">"<a href="administering-user-accounts-and-security.html#GUID-7FC1D8BE-4BB9-4642-A4CE-29CD2B8A5F23" title="This chapter describes how to create and manage user accounts using Oracle Enterprise Manager Database Express (EM Express).">Administering User Accounts and Security</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the necessary schema objects, including tables, views, and indexes. Populate the tables with data.</span><div>
                           <p>See <span class="q">"<a href="managing-schema-objects.html#GUID-F11F80CE-A94A-4459-ABA7-0B1E5A16ADE2" title="This chapter discusses the creation and management of schema objects using SQL Developer.">Managing Schema Objects</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create or review the backup strategy for the database and back up the database.</span><div>
                           <p>See <span class="q">"<a href="performing-backup-and-recovery.html#GUID-C6EEB732-9548-4814-8558-8B903DD74759" title="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files.">Performing Backup and Recovery</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable archiving of online redo log files, if not already done.</span><div>
                           <p>See <span class="q">"<a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">Configuring Recovery Settings</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Monitor database performance, diagnose performance problems, and tune the database as necessary.</span><div>
                           <p>See <span class="q">"<a href="monitoring-and-tuning-the-database.html#GUID-95716F9A-C500-4CCD-AC3F-6541E3191E40" title="Monitoring the performance of a database and ensuring that it performs optimally is an important task for a database administrator. This chapter discusses the features and functions included in Oracle Database that make it easy to monitor database health, identify performance problems, and implement any corrective actions.">Monitoring and Tuning the Database</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Keep Oracle Database software up-to-date with the latest releases.</span><div>
                           <p>See <span class="q">"<a href="managing-oracle-database-software.html#GUID-04A112C8-5A4E-4DEE-9D95-7B8F6BF5514C" title="This chapter describes how to keep your Oracle Database software up-to-date.">Managing Oracle Database Software</a>"</span>.
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="ADMQS12370"></a><a id="ADMQS12371"></a><a id="ADMQS12369"></a><div class="props_rev_3"><a id="GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2" name="GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2"></a><h3 id="ADMQS-GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2" class="sect3"><span class="enumeration_section">3.2 </span>Configuring the Operating System Environment Variables 
               </h3>
               <div>
                  <p>Before using certain tools that access the Oracle database, such as SQL*Plus, you must configure environment variables for your operating system. These environment variables are used by Oracle Database to determine the database instance to which the tool should connect.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2__GUID-C13BE538-F4E4-4D1E-B71E-91F378BA8A20">To configure operating system environment variables for your database instance on Linux and UNIX systems:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>Open an operating system command window.</p>
                        </li>
                        <li>
                           <p>Ensure that the environment variables <code class="codeph">ORACLE_HOME</code> and <code class="codeph">ORACLE_SID</code> are set properly. The commands to use to set these environment variables depend on the shell you use to interface with the operating system. For example:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>(bash or ksh) <code class="codeph">export ORACLE_SID=orcl</code></p>
                              </li>
                              <li>
                                 <p>(csh or tcsh) <code class="codeph">setenv ORACLE_SID orcl</code></p>
                              </li>
                           </ul>
                           <p>You can set these with the scripts <code class="codeph">coraenv</code> (for the C shell) and <code class="codeph">oraenv</code> (for other shells). These scripts are typically located in the <code class="codeph">/usr/local/bin</code> directory. 
                           </p>
                        </li>
                        <li>
                           <p>Ensure that the <code class="codeph">$ORACLE_HOME/bin</code> directory is in your <code class="codeph">PATH</code> environment variable.
                           </p>
                        </li>
                        <li>
                           <p>You can also edit the profile file for your default shell in the home directory of the software owner, for example <code class="codeph">/home/oracle</code>, so that these environment variables are set every time you log in as that user.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2__GUID-0C530373-E3C7-4035-915B-4276FF2233CB">To configure operating system environment variables for your database instance on Windows systems:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Open an operating system command window.</span></li>
                     <li class="stepexpand"><span>Use <code class="codeph">regedit</code> to make sure the <code class="codeph">ORACLE_HOME</code> and <code class="codeph">ORACLE_SID</code> parameters are set to the correct values in the <code class="codeph">HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_HOME_NAME</code> registry subkey. </span></li>
                     <li class="stepexpand"><span>Ensure that the <code class="codeph">%ORACLE_HOME%\bin</code> directory is in your <code class="codeph">PATH</code> environment variable. At a command prompt, use a command similar to the following:</span><div><pre class="oac_no_warn" dir="ltr">set PATH=%ORACLE_HOME%\bin;%PATH%
</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2__GUID-651FE8FB-79DA-4CD3-81A2-73DFA251F1CF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../unxar/administering-oracle-database.html#UNXAR001" target="_blank"><span><cite>Oracle Database Administrator's Reference for Linux and UNIX-Based Operating Systems</cite></span></a> for more information about setting environment variables
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=NTQRF180" target="_blank"><span><cite>Oracle Database Administrator’s Reference for Microsoft Windows</cite></span></a> for details on modifying the registry entries
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADMQS12308"></a><a id="ADMQS12310"></a><a id="ADMQS031"></a><div class="props_rev_3"><a id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA" name="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA"></a><h3 id="ADMQS-GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA" class="sect3"><span class="enumeration_section">3.3 </span>Introduction to Oracle Enterprise Manager Database Express
               </h3>
               <div>
                  <div><span>EM Express is a web-based database management tool that is built inside the Oracle Database. It supports key performance management and basic database administration functions.</span> From an architectural perspective, EM Express has no mid-tier or middleware components, ensuring that its overhead on the database server is negligible.
                  </div>
                  <p>Using <a id="d9663e453" class="indexterm-anchor"></a>EM Express, you can perform administrative tasks such as managing user security and managing database memory and storage. You can also view performance and information about your database.
                  </p>
                  <p>EM Express is available only when the database is open. This means that EM Express cannot be used to start up the database. Other operations that require that the database change state, such as enable or disable ARCHIVELOG mode, are also not available in EM Express.</p>
                  <div class="infoboxnote" id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__GUID-F6C4F908-26FE-4010-8633-B5B02CA63EAC">
                     <p class="notep1">Note:</p>
                     <p>In accordance with industry standards, Oracle is deprecating Flash-based Oracle Enterprise Manager Express (Oracle EM Express). Starting with Oracle Database 19c, Oracle EM Express, the default management option for Oracle Database, is based on Java JET technology. In this initial release, there are some options available in Flash-based Oracle EM Express that are not available in the JET version. If necessary, use the following command to revert to Flash Oracle EM Express:</p><pre class="pre codeblock"><code>SQL&gt; @?/rdbms/admin/execemx emx</code></pre><p>To return to JET Oracle EM Express, use the following command:</p><pre class="pre codeblock"><code>SQL&gt; @?/rdbms/admin/execemx omx</code></pre></div>
                  <div class="infoboxnote" id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__GUID-78AA9A75-6452-4B13-89D9-8C4E74AD0DFB">
                     <p class="notep1">Note:</p>
                     <p>Enterprise Manager Database Control is no longer available in Oracle Database 12<span class="italic">c</span>. You can use Enterprise Manager Cloud Control 12<span class="italic">c</span> or EM Express 12<span class="italic">c</span> to manage your Oracle Database 12<span class="italic">c</span> databases.
                     </p>
                     <p>Enterprise Manager Cloud Control supports Oracle Database 12<span class="italic">c</span> targets, including multitenant <a id="d9663e489" class="indexterm-anchor"></a><a id="d9663e493" class="indexterm-anchor"></a>container databases (CDBs), pluggable databases (PDBs), non-CDBs, Oracle Real Application Clusters (Oracle RAC) databases, and Oracle Automatic Storage Management (Oracle ASM) databases.
                     </p>
                     <p>See <a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for an introduction to CDBs and PDBs, <a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for information about managing CDBs and PDBs, <a href="../racad/introduction-to-oracle-rac.html#RACAD1111" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for more information about Oracle RAC databases, and <a href="../ostmg/asm-intro.html#OSTMG036" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a> for more information about Oracle ASM databases.
                     </p>
                  </div>
                  <p>You can use the Enterprise Manager Database Express features described below against non-CDBs, CDBs, PDBs, or Oracle RAC database instances.</p>
                  <p>Configuration:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Initialization parameters (init.ora) management</p>
                     </li>
                     <li>
                        <p>Memory management</p>
                     </li>
                     <li>
                        <p>Database Feature Usage</p>
                     </li>
                     <li>
                        <p>Database Properties</p>
                     </li>
                  </ul>
                  <p>Storage:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Tablespace management</p>
                     </li>
                     <li>
                        <p>Undo management<a id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__CACFEJIB" name="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__CACFEJIB" href="#GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__CACFEJIB" onclick="footdisplay(1, "In a CDB, this feature is available for the CDB only, not for individual PDBs.")"><sup>Foot&nbsp;1</sup></a></p>
                     </li>
                     <li>
                        <p>Redo management<a id="fnsrc_d9663e556" name="fnsrc_d9663e556" href="#fnsrc_d9663e556" onclick="footdisplay(1, "In a CDB, this feature is available for the CDB only, not for individual PDBs.")"><sup>Footref&nbsp;1</sup></a></p>
                     </li>
                     <li>
                        <p>Archive log management<a id="fnsrc_d9663e561" name="fnsrc_d9663e561" href="#fnsrc_d9663e561" onclick="footdisplay(1, "In a CDB, this feature is available for the CDB only, not for individual PDBs.")"><sup>Footref&nbsp;1</sup></a></p>
                     </li>
                     <li>
                        <p>Control files management<a id="fnsrc_d9663e566" name="fnsrc_d9663e566" href="#fnsrc_d9663e566" onclick="footdisplay(1, "In a CDB, this feature is available for the CDB only, not for individual PDBs.")"><sup>Footref&nbsp;1</sup></a></p>
                     </li>
                  </ul>
                  <p>Performance:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Performance Hub, which includes these features:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Real-time performance monitoring and tuning</p>
                           </li>
                           <li>
                              <p>Historical performance and tuning</p>
                           </li>
                           <li>
                              <p>SQL monitoring (real-time and historical)</p>
                           </li>
                           <li>
                              <p>Database operations monitoring</p>
                           </li>
                           <li>
                              <p>ADDM, including Real-Time ADDM</p>
                           </li>
                           <li>
                              <p>Active Session History (ASH) Analytics</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Automatic and manual SQL Tuning Advisor</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__GUID-0E492352-F8A5-4F20-B525-9F64EAB8B5D1">Database Home Page</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The main page for database administration is the Database Home page. This is the page that loads when you log in to EM Express. See <span class="q">"<a href="getting-started-with-database-administration.html#GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4" title="The Database Home page is the main database management page in Oracle Enterprise Manager Database Express (EM Express).">Accessing the Database Home Page</a>"</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__GUID-C1A3C334-9942-464B-BEE8-FB3FE46BE5A0">Navigation</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Menus at the top of the Database Home page organize database management tasks into distinct categories. Choosing a menu option takes you to the EM Express page for that database management task. For example, to view the Users page, from the <span class="bold">Security</span> menu, select <span class="bold">Users</span>.
                     </p>
                     <div class="figure" id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__GUID-9993F4BB-9FD2-4B70-9891-142653BDE426"><img src="img/exp_menus.gif" width="273" alt="Description of exp_menus.gif follows" title="Description of exp_menus.gif follows" longdesc="img_text/exp_menus.html"><br><a href="img_text/exp_menus.html">Description of the illustration exp_menus.gif</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-BA75AD46-D22E-4914-A31E-C395CD6A2BBA__GUID-0EC679F3-75C1-488C-9D5C-37250A46BCE2">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/distributed-database-concepts.html#ADMIN12110" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about Oracle Enterprise Manager <a id="d9663e633" class="indexterm-anchor"></a>Cloud Control
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADMQS12462"></a><div class="props_rev_3"><a id="GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" name="GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923"></a><h3 id="ADMQS-GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" class="sect3"><span class="enumeration_section">3.4 </span>Starting EM Express
               </h3>
               <div>
                  <p>You can use Oracle Enterprise Manager Database Express (EM Express) to manage non-CDBs, multitenant container databases (CDBs), and pluggable databases (PDBs). EM Express uses an HTTPS port to connect to and manage non-CDBs, CDBs, and PDBs.</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923__GUID-ABAAAFCE-10EF-4BCF-8E86-64AB0D8BB848">
                        <p class="notep1">Note:</p>
                        <p>You can use EM Express to manage a CDB, and all the PDBs in the CDB except for the seed PDB.</p>
                     </div>
                     <p>You must know the HTTPS port for a non-CDB, CDB, or PDB to manage the database using EM Express.</p>
                     <p>Usually the HTTPS port for a non-CDB, or for a CDB and its PDBs, is provided by DBCA when it configures your non-CDB or CDB.</p>
                     <p>When you specify the EM Express URL in your web browser, enter your database hostname instead of 'localhost.'</p>
                     <p>In other words, enter the EM Express URL in this format to start EM Express:</p><pre class="oac_no_warn" dir="ltr">https://<span class="italic"><code class="codeph">database-hostname</code></span>:<span class="italic"><code class="codeph">portnumber</code></span>/em/
</pre><p>For example:</p><pre class="oac_no_warn" dir="ltr">https://mydbhost.example.com:5500/em/
</pre><p>When EM Express prompts you for your username and password, log in as a user with <code class="codeph">DBA</code> privilege (such as <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code>).
                     </p>
                     <p><span class="q">"<a href="administering-user-accounts-and-security.html#GUID-CF1CD853-AF15-41EC-BC80-61918C73FDB5" title="The SYS and SYSTEM administrative user accounts are automatically created when you install Oracle Database. They are both created with the password that you supplied upon installation, and they are both automatically granted the DBA role.">SYS and SYSTEM Users</a>"</span> provides information about the recommended alternative to using the <code class="codeph">SYSTEM</code> account for day-to-day administrative tasks.
                     </p>
                     <div class="infoboxnote" id="GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923__GUID-3C7B1754-62C1-40F3-856F-C55754B79AB4">
                        <p class="notep1">Note:</p>
                        <p>The first time you enter the URL for EM Express in your web browser, your browser may display warning messages.</p>
                        <p>EM Express is a servlet built on top of Oracle XML DB. The Oracle XML DB default wallet has a self-signed certificate, and some existing browsers consider self-signed certificates as untrusted because they are not signed by a trusted CA (certificate authority). However, the self-signed certificate is still secure, as it ensures that the traffic is encrypted between the Oracle XML DB server and the client (browser).</p>
                        <p>Therefore, enter a security exception for the EM Express URL in your web browser.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923__GUID-CF71EBEC-4D02-4718-A14D-2E346416C1FD">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-4F64DEA7-E7B6-4E3C-A0CB-328080680DE3" title="To start Oracle Enterprise Manager Database Express (EM Express) for a non-CDB, use the EM Express URL provided by Database Configuration Assistant (DBCA) when DBCA configured your non-CDB.">Starting EM Express for a Non-CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-A9A56FE4-74BC-4EEB-9DC1-8F62965DACF4" title="To start Oracle Enterprise Manager Database Express (EM Express) for a multitenant container database (CDB), use the EM Express URL provided by Database Configuration Assistant (DBCA) when DBCA configured your CDB.">Starting EM Express for a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-06C767B0-B435-4C6B-9123-C39C030DF457" title="To start EM Express for a PDB, ensure that the PDB is open in read/write mode and then try one of the following methods described in this topic (in the order shown):">Starting EM Express for a PDB</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADMQS12483"></a><div class="props_rev_3"><a id="GUID-4F64DEA7-E7B6-4E3C-A0CB-328080680DE3" name="GUID-4F64DEA7-E7B6-4E3C-A0CB-328080680DE3"></a><h4 id="ADMQS-GUID-4F64DEA7-E7B6-4E3C-A0CB-328080680DE3" class="sect4"><span class="enumeration_section">3.4.1 </span>Starting EM Express for a Non-CDB
                  </h4>
                  <div>
                     <div><span>To start Oracle Enterprise Manager Database Express (EM Express) for a non-CDB, use the EM Express URL provided by Database Configuration Assistant (DBCA) when DBCA configured your non-CDB.</span> The assignment of the URL is described in <span class="q">"<a href="installing-oracle-database-creating-database.html#GUID-011C3545-9427-44F7-9645-2D402A88017F" title="This section briefly describes the steps for a system class installation. Most steps are common to all platforms and involve running Oracle Universal Installer (OUI).">Installing Oracle Database Software</a>."</span> The URL includes the HTTPS port number for the non-CDB.
                     </div>
                     <div class="section">
                        <p>If you do not know the <a id="d9663e800" class="indexterm-anchor"></a>HTTPS port number for the non-CDB, issue the following SQL statement in your non-CDB, which returns the port that is configured for EM Express:
                        </p><pre class="oac_no_warn" dir="ltr">select dbms_xdb_config.gethttpsport() from dual;
</pre><p>If a value other than 0 is returned by the <code class="codeph">gethttpsport</code> procedure, the returned value is the port that you should use to connect to the non-CDB using EM Express.
                        </p>
                        <p>If a value of 0 is returned by the procedure, it means that an HTTPS port is not configured for the non-CDB. In this case, you must manually configure an HTTPS port for this non-CDB, as described in <span class="q">"<a href="getting-started-with-database-administration.html#GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" title="The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.">Configuring the HTTPS Port for EM Express</a>."</span></p>
                        <div class="infoboxnotealso" id="GUID-4F64DEA7-E7B6-4E3C-A0CB-328080680DE3__GUID-352954A2-D21E-4BB4-9B8A-D8CBF44AF363">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" title="You can use Oracle Enterprise Manager Database Express (EM Express) to manage non-CDBs, multitenant container databases (CDBs), and pluggable databases (PDBs). EM Express uses an HTTPS port to connect to and manage non-CDBs, CDBs, and PDBs.">Starting EM Express</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XDB_CONFIG.html#ARPLS74944" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information on the <code class="codeph">gethttpsport</code> procedure
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS12484"></a><div class="props_rev_3"><a id="GUID-A9A56FE4-74BC-4EEB-9DC1-8F62965DACF4" name="GUID-A9A56FE4-74BC-4EEB-9DC1-8F62965DACF4"></a><h4 id="ADMQS-GUID-A9A56FE4-74BC-4EEB-9DC1-8F62965DACF4" class="sect4"><span class="enumeration_section">3.4.2 </span>Starting EM Express for a CDB
                  </h4>
                  <div>
                     <div><span>To start Oracle Enterprise Manager Database Express (EM Express) for a multitenant container database (CDB), use the EM Express URL provided by Database Configuration Assistant (DBCA) when DBCA configured your CDB.</span> The assignment of the URL is described in <span class="q">"<a href="installing-oracle-database-creating-database.html#GUID-011C3545-9427-44F7-9645-2D402A88017F" title="This section briefly describes the steps for a system class installation. Most steps are common to all platforms and involve running Oracle Universal Installer (OUI).">Installing Oracle Database Software</a>."</span> The URL includes the HTTPS port number for the CDB.
                     </div>
                     <div class="section">
                        <p>If you do not know the <a id="d9663e886" class="indexterm-anchor"></a>HTTPS port number for the CDB, go to the root and issue the following SQL statement, which returns the port that is configured for EM Express:
                        </p><pre class="oac_no_warn" dir="ltr">alter session set container=CDB$ROOT;
select dbms_xdb_config.gethttpsport() from dual;
</pre><p>If a value other than 0 is returned by the <code class="codeph">gethttpsport</code> procedure, the returned value is the port that you should use to connect to the CDB using EM Express.
                        </p>
                        <p>If a value of 0 is returned by this statement, it means that an HTTPS port is not configured for the CDB. In this case, you must manually configure an HTTPS port for this CDB, as described in <span class="q">"<a href="getting-started-with-database-administration.html#GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" title="The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.">Configuring the HTTPS Port for EM Express</a>."</span></p>
                        <p>When connected to the root, EM Express displays data and enables actions that apply to the entire CDB.</p>
                        <div class="infoboxnotealso" id="GUID-A9A56FE4-74BC-4EEB-9DC1-8F62965DACF4__GUID-CC85BD6B-0BC8-4993-91C0-DE24E7802211">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" title="You can use Oracle Enterprise Manager Database Express (EM Express) to manage non-CDBs, multitenant container databases (CDBs), and pluggable databases (PDBs). EM Express uses an HTTPS port to connect to and manage non-CDBs, CDBs, and PDBs.">Starting EM Express</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-pdbs-with-em-express.html#GUID-24A7DC45-7A14-47A1-B14A-E1A7093CE6D9" title="This chapter describes managing pluggable databases (PDBs) in a multitenant container database (CDB) using Oracle Enterprise Manager Database Express (EM Express).">Managing PDBs with EM Express</a>"</span> for more information about using EM Express to manage pluggable databases (PDBs) in a CDB
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13616" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for information about switching to a container using the <code class="codeph">ALTER SESSION</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XDB_CONFIG.html#ARPLS74944" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information on the <code class="codeph">gethttpsport</code> procedure
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS12485"></a><div class="props_rev_3"><a id="GUID-06C767B0-B435-4C6B-9123-C39C030DF457" name="GUID-06C767B0-B435-4C6B-9123-C39C030DF457"></a><h4 id="ADMQS-GUID-06C767B0-B435-4C6B-9123-C39C030DF457" class="sect4"><span class="enumeration_section">3.4.3 </span>Starting EM Express for a PDB
                  </h4>
                  <div>
                     <p>To start EM Express for a PDB, ensure that the PDB is open in read/write mode and then try one of the following methods described in this topic (in the order shown):</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Connect to the CDB$ROOT container for the CDB that includes the PDB, and issue the following SQL statement to configure the global port for the CDB:</p><pre class="oac_no_warn" dir="ltr">exec dbms_xdb_config.setglobalportenabled(TRUE);</pre></li>
                           <li>
                              <p>Then, in a web browser, enter the EM Express URL provided by Database Configuration Assistant (DBCA) when it configured the CDB that includes the PDB.</p>
                              <p>By default, the HTTPS port that DBCA configures for a CDB can also be used for the PDBs in that CDB.</p>
                           </li>
                           <li>
                              <p>When the EM Express login screen appears, specify your administrator credentials and enter the name of the PDB that you want to connect to in the <span class="uicontrol bold">Container Name</span> field.
                              </p>
                           </li>
                        </ol>
                        <p>The advantage of using a global port is that you do not need to configure a port for each PDB. (In a large site, there can be thousands of PDBs.) With a global port, you configure one port and then set EM Express to point to it. A second advantage is that you do not need to look up the port number for this PDB; this configuration automatically routes requests to the PDB.</p>
                        <p>If EM Express does not connect to the PDB, try the next method:</p>
                        <ol>
                           <li>
                              <p>Connect to the PDB that you want to manage (PDB1 in this example) and<a id="d9663e1006" class="indexterm-anchor"></a> use the <code class="codeph">gethttpsport</code> procedure to determine whether an HTTPS port is configured for EM Express:
                              </p><pre class="oac_no_warn" dir="ltr">alter session set container=PDB1;
select dbms_xdb_config.gethttpsport() from dual;</pre><p>If a value other than 0 is returned by the <code class="codeph">gethttpsport</code> procedure, the returned value is the port that you should use to connect to the PDB using EM Express.
                              </p>
                           </li>
                           <li>
                              <p>If 0 is returned by the <code class="codeph">gethttpsport</code> procedure, then you must manually configure an HTTPS port for this PDB, as described in <span class="q">"<a href="getting-started-with-database-administration.html#GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" title="The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.">Configuring the HTTPS Port for EM Express</a>."</span></p>
                              <p>After you manually configure an HTTPS port for a PDB, you can specify that port in an EM Express URL to connect to that PDB. When you use an HTTPS port that was manually configured for a PDB in an EM Express URL, the <span class="uicontrol bold">Container Name</span> field does not appear on the EM Express login screen because that port can be used only to access that PDB.
                              </p>
                           </li>
                        </ol>
                        <p>When connected to a PDB, EM Express displays data and enables actions that apply to the PDB only.</p>
                        <div class="infoboxnotealso" id="GUID-06C767B0-B435-4C6B-9123-C39C030DF457__GUID-09F3F54D-7484-48B7-A46F-551E473C2DB3">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" title="You can use Oracle Enterprise Manager Database Express (EM Express) to manage non-CDBs, multitenant container databases (CDBs), and pluggable databases (PDBs). EM Express uses an HTTPS port to connect to and manage non-CDBs, CDBs, and PDBs.">Starting EM Express</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-pdbs-with-em-express.html#GUID-24A7DC45-7A14-47A1-B14A-E1A7093CE6D9" title="This chapter describes managing pluggable databases (PDBs) in a multitenant container database (CDB) using Oracle Enterprise Manager Database Express (EM Express).">Managing PDBs with EM Express</a>"</span> for more information about using EM Express to manage the PDBs in a multitenant container database (CDB)
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XDB_CONFIG.html#ARPLS-GUID-24CC7F8C-33C9-4444-A4FA-48BAD06353BA" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">dbms_xdb_config.setglobalportenabled</code> procedure
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XDB_CONFIG.html#ARPLS-GUID-1247CAF7-5A8C-4CF5-8081-19E8C7A7E8CC" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">dbms_xdb_config.isglobalportenabled</code> function
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13616" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for information about switching to a container using the <code class="codeph">ALTER SESSION</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XDB_CONFIG.html#ARPLS74944" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information on the <code class="codeph">dbms_xdb_config.gethttpsport</code> procedure
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMQS12133"></a><a id="ADMQS032"></a><div class="props_rev_3"><a id="GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" name="GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5"></a><h3 id="ADMQS-GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" class="sect3"><span class="enumeration_section">3.5 </span>Configuring the HTTPS Port for EM Express
               </h3>
               <div>
                  <div><span>The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.</span> Otherwise, you can start EM Express by following the instructions in <span class="q">"<a href="getting-started-with-database-administration.html#GUID-F1C3023C-35DC-4086-A63F-F58F3FFC2923" title="You can use Oracle Enterprise Manager Database Express (EM Express) to manage non-CDBs, multitenant container databases (CDBs), and pluggable databases (PDBs). EM Express uses an HTTPS port to connect to and manage non-CDBs, CDBs, and PDBs.">Starting EM Express</a>."</span></div>
                  <div class="section">
                     <p>Before you can access EM Express from a Web browser, the HTTPS port for EM Express must be configured. After the HTTPS port for EM Express is configured, you use it to access EM Express.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5__GUID-CBD6FDAC-FABE-4269-9143-11EFB2FAAA13">To manually configure the HTTPS port for EM Express:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Configure and start the Oracle Net Listener (the listener). You can use lsnrctl to start, stop, and view the status of the listener.</span></li>
                     <li class="stepexpand"><span>If the listener is running on a nonstandard port (for example, not 1521), then the <code class="codeph">init.ora</code> file for the database you want to manage using EM Express must contain a <code class="codeph">local_listener</code> entry so that the HTTPS port can register with the correct listener. The<code class="codeph"> local_listener</code> entry references a TNSNAMES entry that points to the correct listener. For example:</span><div><pre class="oac_no_warn" dir="ltr">local_listener=inst1
</pre><p>where <code class="codeph">inst1</code> is a TNSNAMES entry defined in <code class="codeph">tnsnames.ora</code> that points to the listener. For example:
                           </p><pre class="oac_no_warn" dir="ltr">inst1= (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=<span class="italic"><code class="codeph">host_name</code></span>)(PORT=1234))
(CONNECT_DATA=(SERVICE_NAME=<span class="italic"><code class="codeph">service_name</code></span>)(SERVER=DEDICATED)))
</pre><p>In this example, 1234 is the nonstandard port on which the listener has been configured to listen.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable the TCP dispatcher by adding the following entry to the <code class="codeph">init.ora</code> file for the database you want to manage using EM Express:</span><div><pre class="oac_no_warn" dir="ltr">dispatchers="(PROTOCOL=TCP)(SERVICE=&lt;sid&gt;XDB)"
</pre><p>For example, if the database SID is ORCL, then the entry would be:</p><pre class="oac_no_warn" dir="ltr">dispatchers="(PROTOCOL=TCP)(SERVICE=ORCLXDB)"
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Restart the database so that the changes made in the <code class="codeph">init.ora</code> file take effect.</span></li>
                     <li class="stepexpand"><span>Use the PL/SQL procedure <code class="codeph">DBMS_XDB_CONFIG.SETHTTPSPORT</code> to set the HTTPS port for EM Express for the database to a port that is not in use. This will update the HTTPS <code class="codeph">port </code>in the <code class="codeph">xdbconfig.xml</code> file in the Oracle XML DB Repository. You must connect as <code class="codeph">SYS / AS SYSDBA</code> to run the procedure.</span><div>
                           <p>For example, to set the <a id="d9663e1235" class="indexterm-anchor"></a>HTTPS port for EM Express for a non-CDB:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; exec DBMS_XDB_CONFIG.SETHTTPSPORT(5500);
</pre><p>To set the <a id="d9663e1244" class="indexterm-anchor"></a>HTTPS port for EM Express for a multitenant container database (CDB), go to the root in the CDB and then use the PL/SQL procedure <code class="codeph">DBMS_XDB_CONFIG.SETHTTPSPORT</code> in the CDB to set the HTTPS port for EM Express for the CDB to a port that is not in use. This will update the HTTPS <code class="codeph">port </code>in the <code class="codeph">xdbconfig.xml</code> file in the Oracle XML DB Repository. You must connect as <code class="codeph">SYS / AS SYSDBA</code> to run the procedure. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter session set container=CDB$ROOT;
SQL&gt; exec DBMS_XDB_CONFIG.SETHTTPSPORT(5501);
</pre><p>To set the <a id="d9663e1265" class="indexterm-anchor"></a>HTTPS port for EM Express for a PDB, ensure that the PDB is open in read/write mode, and then use the PL/SQL procedure <code class="codeph">DBMS_XDB_CONFIG.SETHTTPSPORT</code> in the PDB to set the HTTPS port for EM Express for the PDB to a port that is not in use. This will update the HTTPS <code class="codeph">port </code>in the <code class="codeph">xdbconfig.xml</code> file in the Oracle XML DB Repository. You must connect as <code class="codeph">SYS / AS SYSDBA</code> to run the procedure. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter session set container=PDB1;
SQL&gt; exec DBMS_XDB_CONFIG.SETHTTPSPORT(5502);
</pre><p>Use the following command to confirm that the port has registered with the listener:</p><pre class="oac_no_warn" dir="ltr">$ lsnrctl status | grep -i 5502
(DESCRIPTION=(ADDRESS=(PROTOCOL=tcps)(HOST=<span class="italic"><code class="codeph">hostname.example.com</code></span>)(PORT=5502)
)(Security=(my_wallet_directory=/$<span class="italic"><code class="codeph">ORACLE_BASE</code></span>/admin/<span class="italic"><code class="codeph">sid</code></span>/xdb_wallet))
(Presentation=HTTP)(Session=RAW))
</pre></div>
                     </li>
                     <li class="stepexpand"><span>To access EM Express for a non-CDB, CDB, or PDB, enter a URL in the following format in a Web browser, specifying the EM Express port number for the non-CDB, CDB, or PDB you want to manage:</span><div><pre class="oac_no_warn" dir="ltr">https://<span class="italic"><code class="codeph">database-hostname</code></span>:<span class="italic"><code class="codeph">portnumber</code></span>/em/
</pre><p>For example:</p><pre class="oac_no_warn" dir="ltr">https://mydbhost.example.com:5500/em/
</pre><p>When prompted for your username and password, log in as a user with DBA privilege (such as <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code>).
                           </p>
                           <div class="infoboxnote" id="GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5__GUID-2FFA5532-CEDD-4CE9-8749-0AC5B411C2C2">
                              <p class="notep1">Note:</p>
                              <p>The TLS version of EM Express is determined by the <code class="codeph">SSL_VERSION</code> parameter set in the <code class="codeph">sqlnet.ora</code> file of the database.
                              </p>
                              <p>See <a href="../netrf/parameters-for-the-sqlnet.ora.html#NETRF-GUID-A2A81CEE-162D-4602-8315-990C8CC9E9E2" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a> for more information about the <code class="codeph">SSL_VERSION</code> parameter.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5__GUID-F279B926-7545-4F1C-B471-6A5C9421862C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG010" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for more information about configuring and using the listener
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../netrf/index.html" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a> for more information about listener parameters
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG1154" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for more information about the <code class="codeph">local_listener</code> entry
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../adxdb/repository-access-using-protocols.html#ADXDB2500" target="_blank"><span><cite>Oracle XML&nbsp;DB Developer’s Guide</cite></span></a> for more information about accessing the Oracle XML DB Repository
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../adxdb/administration-of-XML-DB.html#ADXDB2700" target="_blank"><span><cite>Oracle XML&nbsp;DB Developer’s Guide</cite></span></a> for more information about administering Oracle XML DB
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_XDB_CONFIG.html#ARPLS74945" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">sethttpsport</code> procedure
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13632" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for information about using the <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement to modify the mode of a PDB
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13616" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for information about switching to a container using the <code class="codeph">ALTER SESSION</code> statement
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="managing-pdbs-with-em-express.html#GUID-24A7DC45-7A14-47A1-B14A-E1A7093CE6D9" title="This chapter describes managing pluggable databases (PDBs) in a multitenant container database (CDB) using Oracle Enterprise Manager Database Express (EM Express).">Managing PDBs with EM Express</a>"</span> for more information about using EM Express to manage the PDBs in a CDB
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="administering-user-accounts-and-security.html#GUID-CF1CD853-AF15-41EC-BC80-61918C73FDB5" title="The SYS and SYSTEM administrative user accounts are automatically created when you install Oracle Database. They are both created with the password that you supplied upon installation, and they are both automatically granted the DBA role.">SYS and SYSTEM Users</a>"</span> for information about the recommended alternative to using the <code class="codeph">SYSTEM</code> account for day-to-day administrative tasks
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="sect2"><a id="GUID-638AB4AB-27B5-4C00-8EA4-ACCDE0C985F5" name="GUID-638AB4AB-27B5-4C00-8EA4-ACCDE0C985F5"></a><h3 id="ADMQS-GUID-638AB4AB-27B5-4C00-8EA4-ACCDE0C985F5" class="sect3"><span class="enumeration_section">3.6 </span>About EM Express and Database Cloud Service Deployments
               </h3>
               <div>
                  <p>In addition to using EM Express to monitor and manage Oracle Database on-premises, you can also use EM Express to manage Oracle Database Cloud Service (DBCS) database deployments.</p>
                  <p>For information about using EM Express to manage DBCS database deployments, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=CSDBI-GUID-EAB971AC-3BF3-4370-B8DF-B72F777A5575" target="_blank"><span class="italic">Oracle Cloud Administering Oracle Database Cloud Service</span></a>.
                  </p>
               </div>
            </div><a id="ADMQS12135"></a><a id="ADMQS033"></a><div class="props_rev_3"><a id="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4" name="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4"></a><h3 id="ADMQS-GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4" class="sect3"><span class="enumeration_section">3.7 </span>Accessing the Database Home Page
               </h3>
               <div>
                  <p>The Database Home page is the main database management page in Oracle Enterprise Manager Database Express (EM Express).</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4__GUID-6A3D5DF9-4E8C-442C-85E9-042F287D2A6E">To access the Database Home page:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Ensure that the HTTPS port for EM Express is configured.</span><div>
                           <p>See <span class="q">"<a href="getting-started-with-database-administration.html#GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" title="The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.">Configuring the HTTPS Port for EM Express</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>In your Web browser, enter the EM Express URL for the database or pluggable database (PDB) you want to manage:</span><div><pre class="oac_no_warn" dir="ltr">https://<span class="italic">database-hostname:portnumber</span>/em
</pre><p>For example, if you installed the database on a host computer named <code class="codeph">mydbhost.example.com</code>, and port number <code class="codeph">5500</code> is configured as the HTTPS port number for EM Express for the database, then enter the following URL:
                           </p><pre class="oac_no_warn" dir="ltr">https://mydbhost.example.com:5500/em
</pre><p>If the database instance is running, then the Login page appears when you access EM Express.</p>
                           <p>If the database instance is not running, start it. See <a href="../admin/starting-up-and-shutting-down.html#ADMIN10063" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about starting the instance.
                           </p>
                           <p>If port number 5501 is configured as the HTTPS port number for EM Express for the PDB you want to manage, then enter the following URL:</p><pre class="oac_no_warn" dir="ltr">https://mydbhost.example.com:5501/em
</pre><p>If the PDB is open in read/write mode, then the Login page appears when you access EM Express.</p>
                           <p>If the PDB is not open in read/write mode, open it in read/write mode. See <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13632" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a> for information about using the <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement to open a PDB in read/write mode.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Log in to the database or PDB with a user account that is authorized to access EM Express. The <code class="codeph">EM_EXPRESS_BASIC</code> and <code class="codeph">EM_EXPRESS_ALL</code> roles are created for EM Express, and a user who has been granted at least one of these roles can log in to EM Express.</span><div>
                           <p>This user initially could be <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code>, with the password that you specified during database installation. 
                           </p>
                           <p>Although you can use the <code class="codeph">SYSTEM</code> account to perform day-to-day administrative tasks, Oracle strongly recommends creating a named user account for administering the Oracle database to enable monitoring of database activity. To back up, recover, or upgrade the database, you must log in as a user with the SYSDBA privilege.
                           </p>
                           <p>EM Express displays the Database Home page.</p>
                           <div class="figure" id="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4__GUID-021C3C5C-354F-4156-BDCB-9DE44FEE2C6E"><img src="img/exp_db_home_page2.gif" width="512" alt="Description of exp_db_home_page2.gif follows" title="Description of exp_db_home_page2.gif follows" longdesc="img_text/exp_db_home_page2.html"><br><a href="img_text/exp_db_home_page2.html">Description of the illustration exp_db_home_page2.gif</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnote" id="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4__GUID-A2CD7784-38B4-417D-82F3-182ACCFB61F5">
                              <p class="notep1">Note:</p>
                              <p>The Database Home page above is for a CDB. The Containers tab in the Performance section does not appear on the Database Home page for a non-CDB or PDB.</p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>To return to the Database Home page after you have navigated to another EM Express page, you can:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Click the database icon at the top left of any EM Express page:</p>
                                 <div class="figure" id="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4__GUID-4BCBC2A5-1A42-47B9-8AA5-1B6E4A15EE6A"><img src="img/exp_db_home_page_icon2.gif" width="122" alt="Description of exp_db_home_page_icon2.gif follows" title="Description of exp_db_home_page_icon2.gif follows" longdesc="img_text/exp_db_home_page_icon2.html"><br><a href="img_text/exp_db_home_page_icon2.html">Description of the illustration exp_db_home_page_icon2.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>Click the <span class="bold">Back</span> button for your web browser until the Database Home page appears.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>The various sections of the Database Home page provide information about the environment and status of the database. The Status section shows basic information about the database. When the database instance is a multitenant container database (CDB), the line after the Type field in the Status section is a link that identifies the instance as a CDB and lists the number of PDBs in the CDB. Click the <span class="bold">CDB (n PDBs)</span> link to view the Containers page for the CDB, which shows status, performance, and resource information for the CDB containers (PDBs). The Incidents - Last 24 Hours section lists critical error alerts in the database during the last 24 hours. The SQL Monitor section warns you of long-running SQL statements that may impact the performance of your database. Then, you can use the menu options to get more detail about the problem areas, and, in some cases, to obtain recommendations for resolving the problems. These topics are discussed in <a href="monitoring-and-tuning-the-database.html#GUID-95716F9A-C500-4CCD-AC3F-6541E3191E40" title="Monitoring the performance of a database and ensuring that it performs optimally is an important task for a database administrator. This chapter discusses the features and functions included in Oracle Database that make it easy to monitor database health, identify performance problems, and implement any corrective actions.">Monitoring and Tuning the Database</a>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4__GUID-003F7540-05BD-4CAD-9222-3F0AE8B97CC2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-EB851101-07BE-4038-BB9D-06E01CC7F5D5" title="The steps in this section need to be performed only if Database Configuration Assistant (DBCA) did not provide you with the Oracle Enterprise Manager Database Express (EM Express) URL when configuring your database or pluggable database (PDB), or if you need to change the EM Express port later on.">Configuring the HTTPS Port for EM Express</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-pdbs-with-em-express.html#GUID-24A7DC45-7A14-47A1-B14A-E1A7093CE6D9" title="This chapter describes managing pluggable databases (PDBs) in a multitenant container database (CDB) using Oracle Enterprise Manager Database Express (EM Express).">Managing PDBs with EM Express</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADMQS12090"></a><div class="props_rev_3"><a id="GUID-E01797C6-B9D5-4124-BF24-092CE93F34B9" name="GUID-E01797C6-B9D5-4124-BF24-092CE93F34B9"></a><h3 id="ADMQS-GUID-E01797C6-B9D5-4124-BF24-092CE93F34B9" class="sect3"><span class="enumeration_section">3.8 </span>Granting Access to EM Express for Nonadministrative Users
               </h3>
               <div>
                  <div><span>As a database administrator, you can log in to Oracle Enterprise Manager Database Express (EM Express) with the <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> user account to perform administrative and other tasks. Nonadministrative users may also want to log in to EM Express.</span> For example, application developers may want to take advantage of the EM Express interface to create or modify tables, indexes, views, and so on. You must grant access to EM Express to these users before they can log in.
                  </div>
                  <p><a id="d9663e1690" class="indexterm-anchor"></a>For nonadministrative users to have access to EM Express, they must be granted the <code class="codeph">EM_EXPRESS_BASIC</code> or the <code class="codeph">EM_EXPRESS_ALL</code> role.
                  </p>
                  <p>The <code class="codeph">EM_EXPRESS_BASIC</code> role enables users to connect to EM Express and to view the pages in read-only mode. The <code class="codeph">EM_EXPRESS_BASIC</code> role includes the <code class="codeph">SELECT_CATALOG_ROLE</code> role.
                  </p>
                  <p>The <code class="codeph">EM_EXPRESS_ALL</code> role enables users to connect to EM Express and use all the functionality provided by EM Express (read/write access to all EM Express features). The <code class="codeph">EM_EXPRESS_ALL</code> role includes the <code class="codeph">EM_EXPRESS_BASIC</code> role.
                  </p>
                  <p>For an example of granting privileges and roles to a user account, see <span class="q">"<a href="administering-user-accounts-and-security.html#GUID-D44F6873-123C-480E-AF2D-20A4670DA70A" title="You can use Oracle Enterprise Manager Database Express (EM Express) to grant privileges and roles to a user account.">Example: Granting Privileges and Roles to a User Account</a>"</span>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-E01797C6-B9D5-4124-BF24-092CE93F34B9__GUID-1952C54C-A637-4F73-9402-52C1A15A7E18">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="administering-user-accounts-and-security.html#GUID-CF1CD853-AF15-41EC-BC80-61918C73FDB5" title="The SYS and SYSTEM administrative user accounts are automatically created when you install Oracle Database. They are both created with the password that you supplied upon installation, and they are both automatically granted the DBA role.">SYS and SYSTEM Users</a>"</span> for information about the recommended alternative to using the <code class="codeph">SYSTEM</code> account for day-to-day administrative tasks
                     </p>
                  </div>
               </div>
            </div><a id="ADMQS12035"></a><div class="props_rev_3"><a id="GUID-ADF47AF3-3546-4AC4-9D6B-E3F54B35FF6F" name="GUID-ADF47AF3-3546-4AC4-9D6B-E3F54B35FF6F"></a><h3 id="ADMQS-GUID-ADF47AF3-3546-4AC4-9D6B-E3F54B35FF6F" class="sect3"><span class="enumeration_section">3.9 </span>Administering the Database with SQL-Based Management Tools
               </h3>
               <div>
                  <div><span>In addition to using the graphical user interface (GUI) pages presented in Oracle Enterprise Manager Database Express (EM Express), you can use other Oracle tools such as SQL Developer and SQL*Plus to administer your database.</span> These tools enable you to perform database management operations, and to query, insert, update, or delete data directly in the database.
                  </div>
                  <p>The following sections provide details:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-database-administration.html#GUID-BE3E18AA-BB53-47DC-BD11-78E08AE5D3E3" title="To perform many of its operations, Oracle Enterprise Manager Database Express (EM Express) submits structured query language (SQL) statements to the database. SQL (pronounced like sequel) is an industry-standard English-like computer programming language for querying and updating databases.">About SQL</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-database-administration.html#GUID-16D90628-1B26-4035-AA61-BCF2D47539AD" title="SQL*Plus is a command-line program that you use to submit SQL and PL/SQL statements to an Oracle database. You can submit statements interactively or as SQL*Plus scripts.">About SQL*Plus</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-database-administration.html#GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7" title="The section describes how to start SQL*Plus and connect to the database from both the command line and the Windows Start menu.">Starting SQL*Plus and Connecting to the Database</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-database-administration.html#GUID-5A09A54A-9ECA-40B8-B73A-65A5CB81DD04" title="SQL Developer provides another GUI for accessing your Oracle database. SQL Developer supports development in both the SQL and PL/SQL languages. It is available in the default installation of Oracle Database.">About SQL Developer</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-ADF47AF3-3546-4AC4-9D6B-E3F54B35FF6F__GUID-80ACA4A9-3732-4B67-A8B5-CE4E1DCFAEA1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../tdddg/connecting-exploring-database.html#TDDDG12200" target="_blank"><span><cite>Oracle Database 2 Day Developer's Guide</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADMQS12311"></a><div class="props_rev_3"><a id="GUID-BE3E18AA-BB53-47DC-BD11-78E08AE5D3E3" name="GUID-BE3E18AA-BB53-47DC-BD11-78E08AE5D3E3"></a><h4 id="ADMQS-GUID-BE3E18AA-BB53-47DC-BD11-78E08AE5D3E3" class="sect4"><span class="enumeration_section">3.9.1 </span>About SQL
                  </h4>
                  <div>
                     <p>To perform many of its operations, Oracle Enterprise Manager Database Express (EM Express) submits structured query language (SQL) statements to the database. SQL (pronounced like <span class="italic">sequel</span>) is an industry-standard English-like computer programming language for querying and updating databases.
                     </p>
                     <p>The following is an example of a SQL query that lists information about countries in a countries table, which is owned by user <code class="codeph">hr</code>:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT COUNTRY_ID, COUNTRY_NAME FROM HR.COUNTRIES;
</pre><p>SQL is a powerful language that can also be used to perform a variety of database administration tasks. The following SQL statement creates the database user <code class="codeph">nick</code> and assigns him a password of your choosing, represented by <span class="italic">password</span>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE USER nick IDENTIFIED BY <span class="italic">password</span>;
</pre><p>When performing some administrative tasks in EM Express, you can click <span class="bold">Show SQL</span> to see the SQL statements that EM Express generates and submits.
                     </p>
                  </div>
               </div><a id="ADMQS12312"></a><div class="props_rev_3"><a id="GUID-16D90628-1B26-4035-AA61-BCF2D47539AD" name="GUID-16D90628-1B26-4035-AA61-BCF2D47539AD"></a><h4 id="ADMQS-GUID-16D90628-1B26-4035-AA61-BCF2D47539AD" class="sect4"><span class="enumeration_section">3.9.2 </span>About SQL*Plus
                  </h4>
                  <div>
                     <div><span>SQL*Plus is a command-line program that you use to submit SQL and PL/SQL statements to an Oracle database. You can submit statements interactively or as SQL*Plus scripts.</span> SQL*Plus is installed with the database and is located in your <span class="italic"><code class="codeph"><span class="codeinlineitalic"><code class="codeph">ORACLE_HOME</code></span></code></span><code class="codeph">/bin</code> directory.
                     </div>
                     <p>You can start SQL*Plus from the command line, or on Microsoft Windows, from the Start menu.</p>
                     <p>When SQL*Plus loads, it issues the SQL prompt, which looks like this:</p><pre class="oac_no_warn" dir="ltr">SQL&gt;
</pre><p>At the SQL prompt, you can enter statements that perform administrative tasks such as shutting down the database or creating a new user, or you can query, insert, update, and delete data.</p>
                     <p>You can enter a single SQL statement on multiple lines. You must end each statement with a semicolon (;). For most statements, you can rerun a statement by entering a slash (/) on a line by itself.</p>
                     <div class="infoboxnotealso" id="GUID-16D90628-1B26-4035-AA61-BCF2D47539AD__GUID-883F0DA4-52CF-4921-8321-EF5190239263">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqpug/SQL-Plus-quick-start.html#SQPUG002" target="_blank"><span><cite>SQL*Plus User's Guide and Reference</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../cncpt/concepts-for-database-administrators.html#CNCPT829" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADMQS12142"></a><a id="ADMQS12143"></a><a id="ADMQS0361"></a><div class="props_rev_3"><a id="GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7" name="GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7"></a><h4 id="ADMQS-GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7" class="sect4"><span class="enumeration_section">3.9.3 </span>Starting SQL*Plus and Connecting to the Database
                  </h4>
                  <div>
                     <p>The section describes how to start SQL*Plus and connect to the database from both the command line and the Windows Start menu.</p>
                     <div class="section">
                        <p>For a new installation, you connect to the database using either the <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> database accounts. When you enter <code class="codeph">SYS</code> or a slash (<code class="codeph">/</code>) as the user name and provide the <code class="codeph">AS</code> <code class="codeph">SYSDBA</code> clause, your access is authenticated using operating system authentication. <span class="bold">Operating system authentication</span> uses your Windows, UNIX, or Linux host user account to authenticate you to Oracle Database. You must have logged in to the host computer with a user account that is a member of a special host user group. On UNIX and Linux, this user group is typically <code class="codeph">dba</code>. This type of authentication enables you to connect to an Oracle database that is not yet started, so that you can start it up. See <a href="../admin/getting-started-with-database-administration.html#ADMIN11010" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information.
                        </p>
                        <p>The following procedures show how to log in to the database as user <code class="codeph">SYS</code> using the <code class="codeph">SYSDBA</code> privilege.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7__GUID-3BE96531-5C30-4A14-BC4A-7A4C4A560D78">To start SQL*Plus and connect to the database from the command line:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Open a command window.</p>
                           </li>
                           <li>
                              <p>Configure the operating system environment variables, as described in <span class="q">"<a href="getting-started-with-database-administration.html#GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2" title="Before using certain tools that access the Oracle database, such as SQL*Plus, you must configure environment variables for your operating system. These environment variables are used by Oracle Database to determine the database instance to which the tool should connect.">Configuring the Operating System Environment Variables</a>."</span></p>
                           </li>
                           <li>
                              <p>Start SQL*Plus using a command in the following format:</p><pre class="oac_no_warn" dir="ltr">sqlplus {<span class="italic"><code class="codeph">username</code></span> | /} [as sysdba]
</pre><p>An example of this command is:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus / AS SYSDBA
Enter password: <span class="italic">password</span>
</pre><p>For <span class="italic"><code class="codeph">username</code></span>, you can use the <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> administrative users. At the prompt, enter the password that you set up during installation. If you use the <code class="codeph">SYS</code> user, you must include <code class="codeph">AS SYSDBA</code> after the username.
                              </p>
                              <p>SQL*Plus connects you to the default database instance (Microsoft Windows) or the database instance specified by environment variables (Linux and UNIX).</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7__GUID-290A4110-2A1F-4EE5-AF49-297A3E8F98EF">To start SQL*Plus and connect to the database from the Windows Start menu:</p>
                        <ol>
                           <li>
                              <p>Configure the operating system environment variables, as described in <span class="q">"<a href="getting-started-with-database-administration.html#GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2" title="Before using certain tools that access the Oracle database, such as SQL*Plus, you must configure environment variables for your operating system. These environment variables are used by Oracle Database to determine the database instance to which the tool should connect.">Configuring the Operating System Environment Variables</a>."</span></p>
                           </li>
                           <li>
                              <p>Click <span class="uicontrol bold">Start</span>, select <span class="uicontrol bold">Programs</span> (or <span class="uicontrol bold">All Programs</span>), then <span class="uicontrol bold">Oracle - </span><span class="bold"><span class="italic">HOME_NAME</span></span>, then <span class="uicontrol bold">Application Development</span>, and then <span class="uicontrol bold">SQL*Plus</span>.
                              </p>
                           </li>
                           <li>
                              <p>When prompted, enter the <span class="uicontrol bold">user name</span> and <span class="uicontrol bold">password</span> for the account to use to connect to the database.
                              </p>
                              <p>For the user name, you can use the <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> administrative accounts, and you can use the password that you set up during installation.
                              </p>
                              <p>If you use <code class="codeph">SYS</code> or <code class="codeph">/</code> as the user name, follow them with a space and then the clause <code class="codeph">AS</code> <code class="codeph">SYSDBA</code>, as shown in the following examples:
                              </p><pre class="oac_no_warn" dir="ltr">Enter user-name: SYS AS SYSDBA
Enter password: <span class="italic">password</span>

or

Enter user-name: / AS SYSDBA</pre></li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7__GUID-6DBC6F44-1A0A-4F19-90D5-3458752A8F01">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-user-accounts-and-security.html#GUID-CF1CD853-AF15-41EC-BC80-61918C73FDB5" title="The SYS and SYSTEM administrative user accounts are automatically created when you install Oracle Database. They are both created with the password that you supplied upon installation, and they are both automatically granted the DBA role.">SYS and SYSTEM Users</a>"</span> for information about the recommended alternative to using the <code class="codeph">SYSTEM</code> account for day-to-day administrative tasks
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="configuring-the-network-environment.html#GUID-1A15D322-B3AC-426A-86A1-EB7590930687" title="This section describes how to use SQL*Plus and the easy connect naming method to connect to an Oracle database from a client computer.">Connecting to an Oracle Database from a Client Computer</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="administering-user-accounts-and-security.html#GUID-3C78F89D-3616-48FA-B2B8-CE6988D78939" title="Administrative accounts and privileges enable you to perform administrative functions such as managing users, managing database memory, and starting up and shutting down the database.">About Administrative Accounts and Privileges</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../sqpug/starting-SQL-Plus.html#SQPUG352" target="_blank"><span><cite>SQL*Plus User's Guide and Reference</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS12036"></a><div class="props_rev_3"><a id="GUID-5A09A54A-9ECA-40B8-B73A-65A5CB81DD04" name="GUID-5A09A54A-9ECA-40B8-B73A-65A5CB81DD04"></a><h4 id="ADMQS-GUID-5A09A54A-9ECA-40B8-B73A-65A5CB81DD04" class="sect4"><span class="enumeration_section">3.9.4 </span>About SQL Developer
                  </h4>
                  <div>
                     <p>SQL Developer provides another GUI for accessing your Oracle database. SQL Developer supports development in both the SQL and PL/SQL languages. It is available in the default installation of Oracle Database.</p>
                     <p>With SQL Developer, you can browse database objects, run SQL statements and SQL scripts, and edit and debug PL/SQL statements. You can also run any number of provided reports, and also create and save your own.</p>
                     <p>You can also download the latest release of SQL Developer from the Oracle Technology Network (OTN) Web site.</p>
                     <div class="infoboxnotealso" id="GUID-5A09A54A-9ECA-40B8-B73A-65A5CB81DD04__GUID-9D3FA743-3FE3-4B2E-B96B-FE43FBD9A152">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-schema-objects.html#GUID-F565723B-46AF-42EC-BA3C-F738663DCC99" title="Oracle SQL Developer is a graphical version of SQL*Plus that gives database administrators a convenient way to perform basic tasks involving schema objects.">About SQL Developer</a>"</span> for information about installing and using SQL Developer
                              </p>
                           </li>
                           <li>
                              <p><a href="../tdddg/connecting-exploring-database.html#TDDDG12200" target="_blank"><span><cite>Oracle Database 2 Day Developer's Guide</cite></span></a> for instructions for starting SQL Developer
                              </p>
                           </li>
                           <li>
                              <p><a href="../cncpt/concepts-for-database-developers.html#CNCPT7654" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS038"></a><div class="props_rev_3"><a id="GUID-90D9A35A-8A40-4205-9C10-BB49BEF72A0B" name="GUID-90D9A35A-8A40-4205-9C10-BB49BEF72A0B"></a><h3 id="ADMQS-GUID-90D9A35A-8A40-4205-9C10-BB49BEF72A0B" class="sect3"><span class="enumeration_section">3.10 </span>Getting Started with Database Administration: Oracle by Example Series
               </h3>
               <div>
                  <p>Oracle by Example (OBE) has a series on the <span class="italic">Oracle Database 2 Day DBA</span> guide. This OBE steps you through the tasks in this chapter and includes annotated screenshots.
                  </p>
                  <div class="section">
                     <p>To view the Getting Started with Database Administration OBE, enter the following URL in your web browser:</p>
                     <p><a href="https://apexapps.oracle.com/pls/apex/f?p=44785:24:0::NO:24:P24_CONTENT_ID:16825" target="_blank"><code class="codeph">https://apexapps.oracle.com/pls/apex/f?p=44785:24:0::NO:24:P24_CONTENT_ID:16825</code></a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;1: 
            <p>In a CDB, this feature is available for the CDB only, not for individual PDBs.</p><br></div>
      </article>
   </body>
</html><html id='01176.Rule-TYPEs.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes the types used with rules, rule sets, and evaluation contexts.">
      <meta name="description" content="This chapter describes the types used with rules, rule sets, and evaluation contexts.">
      <title>Rule TYPEs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="This chapter describes the types used with rules, rule sets, and evaluation contexts.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="MGD_ID-Package-Types.html" title="Previous" type="text/html">
      <link rel="next" href="SODA_TYPES.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="MGD_ID-Package-Types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="SODA_TYPES.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Rule TYPEs</li>
            </ol>
            <a id="GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" name="GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B"></a><a id="ARPLS319"></a><a id="ARPLS319"></a>
            
            <h2 id="ARPLS-GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" class="sect2"><span class="enumeration_chapter">281 </span>Rule TYPEs
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes the types used with rules, rule sets, and evaluation contexts.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="Rule-TYPEs.html#GUID-E2621898-DE72-49F4-8456-02C94B91823C" title="These types are used in rules and enable clients to evaluate rules with the rules engine.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="Rule-TYPEs.html#GUID-FBF1A00D-1783-4397-8EA9-FFB4056E1538" title="PUBLIC is granted EXECUTE privilege on these RULE types.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="Rule-TYPEs.html#GUID-F5D7718F-78FF-4E63-82BD-A640C77BB9A4" title="This table lists the Rule Types and briefly describes them.">Summary of Rule Types</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS73292"></a><a id="ARPLS73292"></a><div class="props_rev_3"><a id="GUID-E2621898-DE72-49F4-8456-02C94B91823C" name="GUID-E2621898-DE72-49F4-8456-02C94B91823C"></a><h3 id="ARPLS-GUID-E2621898-DE72-49F4-8456-02C94B91823C" class="sect3"><span class="enumeration_section">281.1 </span>Rule TYPEs Overview
               </h3>
               <div>
                  <p>These types are used in rules and enable clients to evaluate rules with the rules engine.</p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-E2621898-DE72-49F4-8456-02C94B91823C__GUID-DEB785F2-6F75-47A5-9EB5-79FC3A20502B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="DBMS_RULE.html#GUID-B846207D-78A5-4EB5-BE93-9224756F6CC0" title="The DBMS_RULE package contains subprograms that enable the evaluation of a rule set for a specified event."> DBMS_RULE</a></p>
                           </li>
                           <li>
                              <p><a href="DBMS_RULE_ADM.html#GUID-3AC54B50-C163-43E0-AFB6-DD1B7C1CDF03" title="The DBMS_RULE_ADM package provides the subprograms for creating and managing rules, rule sets, and rule evaluation contexts."> DBMS_RULE_ADM</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73293"></a><a id="ARPLS73293"></a><div class="props_rev_3"><a id="GUID-FBF1A00D-1783-4397-8EA9-FFB4056E1538" name="GUID-FBF1A00D-1783-4397-8EA9-FFB4056E1538"></a><h3 id="ARPLS-GUID-FBF1A00D-1783-4397-8EA9-FFB4056E1538" class="sect3"><span class="enumeration_section">281.2 </span>Rule TYPEs Security Model
               </h3>
               <div>
                  <p><code class="codeph">PUBLIC</code> is granted <code class="codeph">EXECUTE</code> privilege on these RULE types.
                  </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-FBF1A00D-1783-4397-8EA9-FFB4056E1538__GUID-8C87A603-8B63-462C-BAD3-E2E2B62155A5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG40048" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information about user group <code class="codeph">PUBLIC</code></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS822"></a><a id="ARPLS71919"></a><a id="ARPLS71919"></a><a id="ARPLS822"></a><div class="props_rev_3"><a id="GUID-F5D7718F-78FF-4E63-82BD-A640C77BB9A4" name="GUID-F5D7718F-78FF-4E63-82BD-A640C77BB9A4"></a><h3 id="ARPLS-GUID-F5D7718F-78FF-4E63-82BD-A640C77BB9A4" class="sect3"><span class="enumeration_section">281.3 </span>Summary of Rule Types
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">Rule Types</code> and briefly describes them.
                  </p>
                  <div class="tblformal" id="GUID-F5D7718F-78FF-4E63-82BD-A640C77BB9A4__GUID-B773CF5D-E5F5-4997-AF98-C5E640A896B8">
                     <p class="titleintable">Table 281-1 Rule Types</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Rule Types" summary="This table lists the Rule Types in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="42%" id="d1605288e443">Type</th>
                              <th align="left" valign="bottom" width="58%" id="d1605288e446">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e451" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125" title="RE$ATTRIBUTE_VALUE type specifies the value of a variable attribute.">RE$ATTRIBUTE_VALUE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e451 d1605288e446 ">
                                 <p>Specifies the value of a variable attribute</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e465" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-C1B16B9A-740D-445F-B561-3A5E758FD73A" title="The RE$ATTRIBUTE_VALUE_LIST type identifies a list of attribute values.">RE$ATTRIBUTE_VALUE_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e465 d1605288e446 ">
                                 <p>Identifies a list of attribute values</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e480" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-A756F133-62C4-4F33-B5A8-508149836105" title="RE$COLUMN_VALUE type specifies the value of a table column.">RE$COLUMN_VALUE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e480 d1605288e446 ">
                                 <p>Specifies the value of a table column</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e494" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-B4DBAE4D-BD5E-4343-98FC-46E0C72AEA46" title="RE$COLUMN_VALUE_LIST type identifies a list of column values.">RE$COLUMN_VALUE_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e494 d1605288e446 ">
                                 <p>Identifies a list of column values</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e508" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-C98C3E09-ACF9-423A-BF53-1C71D5053A66" title="RE$NAME_ARRAY type identifies a list of names.">RE$NAME_ARRAY Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e508 d1605288e446 ">
                                 <p>Identifies a list of names</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e522" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-C98C3E09-ACF9-423A-BF53-1C71D5053A66" title="RE$NAME_ARRAY type identifies a list of names.">RE$NAME_ARRAY Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e522 d1605288e446 ">
                                 <p>Identifies a list of name-value pairs</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e536" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274" title="identifies an object containing a list of name-value pairs and methods that operate on this list.">RE$NV_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e536 d1605288e446 ">
                                 <p>Identifies an object containing a list of name-value pairs and methods that operate on this list. This object type is used to represent the event context and the action context for a rule</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e548" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF" title="RE$COLUMN_VALUE type identifies a name-value pair.">RE$NV_NODE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e548 d1605288e446 ">
                                 <p>Identifies a name-value pair</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e562" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13" title="The RE$RULE_HIT type specifies a rule found because of an evaluation.">RE$RULE_HIT Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e562 d1605288e446 ">
                                 <p>Specifies a rule found because of evaluation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e577" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-B4D58719-CDF0-4BE2-977D-B17B910EC236" title="The RE$RULE_HIT_LIST type identifies a list of rules found because of an evaluation.">RE$RULE_HIT_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e577 d1605288e446 ">
                                 <p>Identifies a list of rules found because of evaluation</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e592" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD" title="The RE$RULE_HIT type is create to allow use to pass a list of rule as argument.">RE$RULE_NAME Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e592 d1605288e446 ">
                                 <p>Allows users to pass a list of rule as argument.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e608" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-D1A9F34A-9A66-4298-A15B-6C0C3E06AE2F" title="RE$RULE_HIT_LIST type Identifies a list of Rule Name values.">RE$RULE_NAME_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e608 d1605288e446 ">
                                 <p>Identifies a list of Rule Name values</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e622" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11" title="RE$TABLE_ALIAS type provides the table corresponding to an alias used in a rule evaluation context.">RE$TABLE_ALIAS Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e622 d1605288e446 ">
                                 <p>Provides the table corresponding to an alias used in a rule evaluation context</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e636" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-2278B65F-2B5A-4934-87D5-7839C5516147" title="The RE$TABLE_ALIAS_LIST type identifies a list of table aliases used in a rule evaluation context.">RE$TABLE_ALIAS_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e636 d1605288e446 ">
                                 <p>Identifies a list of table aliases used in a rule evaluation context</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e651" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816" title="The RE$TABLE_VALUE type specifies the value of a table row using a ROWID.">RE$TABLE_VALUE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e651 d1605288e446 ">
                                 <p>Specifies the value of a table row using a <code class="codeph">ROWID</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e671" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-6C381E6D-B306-43A6-8857-B6BA277665F9" title="The RE$TABLE_VALUE_LIST type identifies a list of table values.">RE$TABLE_VALUE_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e671 d1605288e446 ">
                                 <p>Identifies a list of table values</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e686" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-375A770A-B997-4D96-9708-324C110AFD71" title="The RE$VALUE type represents one datapoint value element.">RE$VALUE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e686 d1605288e446 ">
                                 <p>Represents one datapoint value element</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e701" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-31A9ABB9-5395-438D-9CFC-2BD227702B7F" title="RE$TABLE_VALUE_LIST type is a varray for defining a list of RE$VALUE type. It represents a list of datapoint element.">RE$VALUE_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e701 d1605288e446 ">
                                 <p>Defines a list of <code class="codeph">RE$VALUE</code> type
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e721" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221" title="The RE$VARIABLE_TYPE type provides the type of a variable used in a rule evaluation context. A specified variable name must satisfy the schema object naming rules.">RE$VARIABLE_TYPE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e721 d1605288e446 ">
                                 <p>Provides the type of a variable used in a rule evaluation context</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e736" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-C6E738A8-F0B2-4EFD-B2D0-83C7F4C0F832" title="The RE$VARIABLE_TYPE_LIST type identifies a list of variables and their types used in a rule evaluation context.">RE$VARIABLE_TYPE_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e736 d1605288e446 ">
                                 <p>Identifies a list of variables and their types used in a rule evaluation context</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e751" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-67420543-C600-4AAE-8647-A11DC15990E9" title="The RE$VARIABLE_VALUE type specifies the value of a variable.">RE$VARIABLE_VALUE Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e751 d1605288e446 ">
                                 <p>Specifies the value of a variable</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d1605288e766" headers="d1605288e443 ">
                                 <p><a href="Rule-TYPEs.html#GUID-29C791A6-E5AD-409F-B9FE-8A3CE01BBF2A" title="The RE$VARIABLE_VALUE_LIST type identifies a list of variable values.">RE$VARIABLE_VALUE_LIST Type</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d1605288e766 d1605288e446 ">
                                 <p>Identifies a list of variable values</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>Rule types are used with the following Oracle-supplied PL/SQL packages:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DBMS_RULE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DBMS_RULE_ADM</code></p>
                        </li>
                     </ul>
                     <p>You can use the <code class="codeph">DBMS_RULE_ADM</code> package to create and administer rules, rule sets, and evaluation contexts, and you can use the <code class="codeph">DBMS_RULE</code> package to evaluate rules. 
                     </p>
                     <p>When you use Replication (Oracle GoldenGate and XStream), rules determine which changes are captured by a capture process, which messages are propagated by a propagation, which messages are applied by an apply process, and which messages are dequeued by a messaging client. The following Replication (Oracle GoldenGate and XStream) packages use rules:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DBMS_APPLY_ADM</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DBMS_CAPTURE_ADM</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DBMS_PROPAGATION_ADM</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS571"></a><a id="ARPLS71920"></a><a id="ARPLS71920"></a><a id="ARPLS571"></a><div class="props_rev_3"><a id="GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125" name="GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125"></a><h4 id="ARPLS-GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125" class="sect4"><span class="enumeration_section">281.3.1 </span>RE$ATTRIBUTE_VALUE Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$ATTRIBUTE_VALUE</code> type specifies the value of a variable attribute. 
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125__GUID-CDD3E058-58BB-45A3-8F3E-5E6CC286F04B">
                           <p class="notep1">Note:</p>
                           <p>Enclose the variable name and attribute name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125__GUID-6BDE69EF-071A-4065-B720-F4BBEE031A73">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$ATTRIBUTE_VALUE (
&nbsp;&nbsp;&nbsp;variable_name &nbsp;&nbsp;&nbsp;VARCHAR2(32), 
&nbsp;&nbsp;&nbsp;attribute_name   VARCHAR2(4000),
&nbsp;&nbsp;&nbsp;attribute_value  ANYDATA); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125__GUID-26DA7A5B-A332-4FED-906D-31DB1F76E19B">Attributes</p>
                        <div class="tblformal" id="GUID-66F76A1D-DB2B-43D0-AE15-CB1368EA1125__GUID-2C5EAF7F-08C1-4EC1-B9A3-AE840764B544">
                           <p class="titleintable">Table 281-2 RE$ATTRIBUTE_VALUE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$ATTRIBUTE_VALUE Attributes" summary="This table describes Attributes of the RuleType RE$ATTRIBUTE_VALUE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e935">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e938">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e943" headers="d1605288e935 ">
                                       <p><code class="codeph">variable_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e943 d1605288e938 ">
                                       <p>Specifies the variable used in a rule</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e951" headers="d1605288e935 ">
                                       <p><code class="codeph">attribute_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e951 d1605288e938 ">
                                       <p>Specifies the attribute name. The attribute name can be a multi-component name, such as <code class="codeph">a1.b2.c3</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e962" headers="d1605288e935 ">
                                       <p><code class="codeph">attribute_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e962 d1605288e938 ">
                                       <p>Specifies the attribute value</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS572"></a><a id="ARPLS572"></a><div class="props_rev_3"><a id="GUID-C1B16B9A-740D-445F-B561-3A5E758FD73A" name="GUID-C1B16B9A-740D-445F-B561-3A5E758FD73A"></a><h4 id="ARPLS-GUID-C1B16B9A-740D-445F-B561-3A5E758FD73A" class="sect4"><span class="enumeration_section">281.3.2 </span>RE$ATTRIBUTE_VALUE_LIST Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$ATTRIBUTE_VALUE_LIST</code> type identifies a list of attribute values.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C1B16B9A-740D-445F-B561-3A5E758FD73A__GUID-A64B57F7-74C1-478C-91DF-F8E640986D7F">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$ATTRIBUTE_VALUE_LIST AS VARRAY(1024) OF SYS.RE$ATTRIBUTE_VALUE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS573"></a><a id="ARPLS71921"></a><a id="ARPLS71921"></a><a id="ARPLS573"></a><div class="props_rev_3"><a id="GUID-A756F133-62C4-4F33-B5A8-508149836105" name="GUID-A756F133-62C4-4F33-B5A8-508149836105"></a><h4 id="ARPLS-GUID-A756F133-62C4-4F33-B5A8-508149836105" class="sect4"><span class="enumeration_section">281.3.3 </span>RE$COLUMN_VALUE Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$COLUMN_VALUE</code> type specifies the value of a table column. 
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A756F133-62C4-4F33-B5A8-508149836105__GUID-D9CF63EB-37DC-46F5-99F6-F64B7B6836ED">
                           <p class="notep1">Note:</p>
                           <p>Enclose the column name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A756F133-62C4-4F33-B5A8-508149836105__GUID-A4807DDB-73BE-4132-A73E-CF523E1416FF">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$COLUMN_VALUE (
&nbsp;&nbsp;&nbsp;table_alias &nbsp;&nbsp;VARCHAR2(32), 
   column_name   VARCHAR2(4000),
&nbsp;&nbsp;&nbsp;column_value  ANYDATA); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A756F133-62C4-4F33-B5A8-508149836105__GUID-015DF46C-EBB1-4A01-A990-D24A3D709F98">Attributes</p>
                        <div class="tblformal" id="GUID-A756F133-62C4-4F33-B5A8-508149836105__GUID-B2651771-184B-4AF1-84BB-B7FE16A5A33D">
                           <p class="titleintable">Table 281-3 RE$COLUMN_VALUE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$COLUMN_VALUE Attributes" summary="This table describes Attributes of the RuleType RE$COLUMN_V ALUE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e1192">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e1195">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e1200" headers="d1605288e1192 ">
                                       <p><code class="codeph">table_alias</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e1200 d1605288e1195 ">
                                       <p>Specifies the alias used for the table in a rule</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e1208" headers="d1605288e1192 ">
                                       <p><code class="codeph">column_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e1208 d1605288e1195 ">
                                       <p>Specifies the column name</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e1216" headers="d1605288e1192 ">
                                       <p><code class="codeph">column_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e1216 d1605288e1195 ">
                                       <p>Specifies the column value</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS574"></a><a id="ARPLS574"></a><div class="props_rev_3"><a id="GUID-B4DBAE4D-BD5E-4343-98FC-46E0C72AEA46" name="GUID-B4DBAE4D-BD5E-4343-98FC-46E0C72AEA46"></a><h4 id="ARPLS-GUID-B4DBAE4D-BD5E-4343-98FC-46E0C72AEA46" class="sect4"><span class="enumeration_section">281.3.4 </span>RE$COLUMN_VALUE_LIST Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$COLUMN_VALUE_LIST</code> type identifies a list of column values.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4DBAE4D-BD5E-4343-98FC-46E0C72AEA46__GUID-F8DDAE66-73CC-46ED-AA01-5E5C36906577">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$COLUMN_VALUE_LIST AS VARRAY(1024) OF SYS.RE$COLUMN_VALUE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS575"></a><a id="ARPLS575"></a><div class="props_rev_3"><a id="GUID-C98C3E09-ACF9-423A-BF53-1C71D5053A66" name="GUID-C98C3E09-ACF9-423A-BF53-1C71D5053A66"></a><h4 id="ARPLS-GUID-C98C3E09-ACF9-423A-BF53-1C71D5053A66" class="sect4"><span class="enumeration_section">281.3.5 </span>RE$NAME_ARRAY Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$NAME_ARRAY</code> type identifies a list of names.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C98C3E09-ACF9-423A-BF53-1C71D5053A66__GUID-FCA886A1-C076-4D06-845E-3594DE7F020D">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$NAME_ARRAY AS VARRAY(1024) OF VARCHAR2(30);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS576"></a><a id="ARPLS576"></a><div class="props_rev_3"><a id="GUID-4F7A31B7-29D3-424E-87F1-11EA6B9ABB67" name="GUID-4F7A31B7-29D3-424E-87F1-11EA6B9ABB67"></a><h4 id="ARPLS-GUID-4F7A31B7-29D3-424E-87F1-11EA6B9ABB67" class="sect4"><span class="enumeration_section">281.3.6 </span>RE$NV_ARRAY Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$NV_ARRAY</code> type identifies a list of name-value pairs. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4F7A31B7-29D3-424E-87F1-11EA6B9ABB67__GUID-690AC72D-A2E5-4481-A9EE-B57C4BEB1848">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$NV_ARRAY AS VARRAY(1024) OF SYS.RE$NV_NODE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS577"></a><a id="ARPLS71923"></a><a id="ARPLS71924"></a><a id="ARPLS71925"></a><a id="ARPLS71926"></a><a id="ARPLS71927"></a><a id="ARPLS71928"></a><a id="ARPLS71929"></a><a id="ARPLS71930"></a><a id="ARPLS71931"></a><a id="ARPLS71932"></a><a id="ARPLS71933"></a><a id="ARPLS71923"></a><a id="ARPLS71924"></a><a id="ARPLS71925"></a><a id="ARPLS71926"></a><a id="ARPLS71927"></a><a id="ARPLS71928"></a><a id="ARPLS71929"></a><a id="ARPLS71930"></a><a id="ARPLS71931"></a><a id="ARPLS71932"></a><a id="ARPLS71933"></a><a id="ARPLS577"></a><div class="props_rev_3"><a id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274" name="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274"></a><h4 id="ARPLS-GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274" class="sect4"><span class="enumeration_section">281.3.7 </span>RE$NV_LIST Type
                  </h4>
                  <div>
                     <p> identifies an object containing a list of name-value pairs and methods that operate on this list.</p>
                     <div class="section">
                        <p>This object type is used to represent the event context for rule set evaluation and the action context for a rule.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-28F5FC1D-3E1F-4E71-BFBA-D6DD97B86CE7">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$NV_LIST AS OBJECT( 
   actx_list  SYS.RE$NV_ARRAY);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-3FC07F8E-CAF0-4916-9AD8-091CE8604E41">Attributes</p>
                        <div class="tblformal" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-263E2093-F412-4B1B-9BDA-21D8091553DD">
                           <p class="titleintable">Table 281-4 RE$NV_LIST Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$NV_LIST Attributes" summary="This table describes Attributes of the RuleType  RE$NV_LIST." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e1715">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e1718">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e1723" headers="d1605288e1715 ">
                                       <p><code class="codeph">actx_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e1723 d1605288e1718 ">
                                       <p>The list of name-value pairs</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-C90C433F-F2BC-45DD-AC90-67B15680FACF">RE$NV_LIST Subprograms</p>
                        <p>This section describes the following member procedures and member functions of the <code class="codeph">SYS.RE$NV_LIST</code> type:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="Rule-TYPEs.html#GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__I997111">ADD_PAIR Member Procedure</a></p>
                           </li>
                           <li>
                              <p><a href="Rule-TYPEs.html#GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__CHDDFAIC">GET_ALL_NAMES Member Function</a></p>
                           </li>
                           <li>
                              <p><a href="Rule-TYPEs.html#GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__I997145">GET_VALUE Member Function</a></p>
                           </li>
                           <li>
                              <p><a href="Rule-TYPEs.html#GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__I997168">REMOVE_PAIR Member Procedure</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__I997111">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-2418EB15-6F89-4C9A-84A4-93BD83B056FF">ADD_PAIR Member Procedure</p>
                        <p>Adds a name-value pair to the list of name-value pairs.</p>
                        <div class="infoboxnote" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-80BD348B-0BD9-44AD-B0C3-FE7BF06553F1">
                           <p class="notep1">Note:</p>
                           <p>Enclose the name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                        <p>Syntax</p><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE ADD_PAIR(
   name   IN  VARCHAR2, 
   value  IN  ANYDATA);</pre><p>Parameters</p>
                        <div class="tblformal" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-E19ED44D-DEDE-494D-A39D-54E9F8FE0B4C">
                           <p class="titleintable">Table 281-5 ADD_PAIR Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_PAIR Procedure Parameters" summary="This table describes the Parameters of the SYS.RE$NV_LIST type member subprogam ADD_PAIR." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e1779">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e1782">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e1787" headers="d1605288e1779 ">
                                       <p><code class="codeph">name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e1787 d1605288e1782 ">
                                       <p>The name in the name-value pair being added to the list. If the name exists in the list, then this procedure raises an error.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e1795" headers="d1605288e1779 ">
                                       <p><code class="codeph">value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e1795 d1605288e1782 ">
                                       <p>The value in the name-value pair being added to the list</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__CHDDFAIC">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-BCA1DDFC-B8A0-4BB1-BAC2-4AE4A7C93A9C">GET_ALL_NAMES Member Function</p>
                        <p>Returns a list of all the names in the name-value pair list.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-19D36B7A-CE70-43BE-BBDF-A72E4BCB5A0B">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION GET_ALL_NAMES()
RETURN SYS.RE$NAME_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__I997145">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-86757AE5-12E4-445A-BED8-4F4593DF731A">GET_VALUE Member Function</p>
                        <p>Returns the value for the specified name in a name-value pair list.</p>
                        <div class="infoboxnote" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-8347A070-B5AA-4DA9-82B7-8E07006F0FA7">
                           <p class="notep1">Note:</p>
                           <p>Enclose the name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-BC77F195-9710-420C-9335-8AEFE96B4058">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">MEMBER FUNCTION GET_VALUE(
   name  IN  VARCHAR2) 
RETURN ANYDATA;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-9E301E65-024C-4B84-A926-E02366EA3712">Parameters</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-E992CCDE-21BA-4609-A8EE-E2D1081465F5">
                        <p class="titleintable">Table 281-6 GET_VALUE Function Parameters</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="GET_VALUE Function Parameters" summary="This table describes the Parameters of the SYS.RE$NV_LIST type member subprogam GET_VALUE." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d1605288e1841">Parameter</th>
                                 <th align="left" valign="bottom" width="69%" id="d1605288e1844">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d1605288e1849" headers="d1605288e1841 ">
                                    <p><code class="codeph">name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d1605288e1849 d1605288e1844 ">
                                    <p>The name whose value to return</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__I997168">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-AFBBE58E-1F02-436A-AC58-95CEA484EF8D">REMOVE_PAIR Member Procedure</p>
                        <p>Removes the name-value pair with the specified name from the name-value pair list.</p>
                        <div class="infoboxnote" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-EB043578-2B03-4CC8-BFF8-F0F4F1090AD7">
                           <p class="notep1">Note:</p>
                           <p>Enclose the name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-8EBC0C7F-B9C1-4EEA-A0A1-1CEA6371AA9E">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">MEMBER PROCEDURE REMOVE_PAIR(
   name  IN  VARCHAR2);
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-ECF327FB-3A37-459B-AD3D-A74EE5C8ACC3">Parameters</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-59062511-EE10-4AFD-B4C2-86F88E3F0274__GUID-E0C6E64A-86E8-48FE-B1E2-BF61DCF72428">
                        <p class="titleintable">Table 281-7 REMOVE_PAIR Procedure Parameters</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PAIR Procedure Parameters" summary="This table describes the Parameters of the SYS.RE$NV_LIST type member subprogam REMOVE_PAIR." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d1605288e1883">Parameter</th>
                                 <th align="left" valign="bottom" width="69%" id="d1605288e1886">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d1605288e1891" headers="d1605288e1883 ">
                                    <p><code class="codeph">name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d1605288e1891 d1605288e1886 ">
                                    <p>The name of the pair to remove</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ARPLS578"></a><a id="ARPLS71934"></a><a id="ARPLS71934"></a><a id="ARPLS578"></a><div class="props_rev_3"><a id="GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF" name="GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF"></a><h4 id="ARPLS-GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF" class="sect4"><span class="enumeration_section">281.3.8 </span>RE$NV_NODE Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$COLUMN_VALUE</code> type identifies a name-value pair. 
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF__GUID-B1073B57-BD02-4999-845B-0D72F706EFDE">
                           <p class="notep1">Note:</p>
                           <p>Enclose the name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF__GUID-C97A3D25-ADE9-42CB-8DE0-3A879C7A1B81">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$NV_NODE (
&nbsp;&nbsp;&nbsp;nvn_name &nbsp;&nbsp;VARCHAR2(30), 
   nvn_value  ANYDATA); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF__GUID-D909002C-59A1-45C9-884B-62863319ECAA">Attributes</p>
                        <div class="tblformal" id="GUID-046D6972-5724-4AE1-B22B-02A605FC6FDF__GUID-D84CB080-DEBC-43AD-840A-B93CC1D596C2">
                           <p class="titleintable">Table 281-8 RE$NV_NODE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$NV_NODE Attributes" summary="This table describes Attributes of the RuleType RE$NV_NODE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e2019">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e2022">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e2027" headers="d1605288e2019 ">
                                       <p><code class="codeph">nvn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e2027 d1605288e2022 ">
                                       <p>Specifies the name in the name-value pair</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e2035" headers="d1605288e2019 ">
                                       <p><code class="codeph">nvn_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e2035 d1605288e2022 ">
                                       <p>Specifies the value in the name-value pair</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS579"></a><a id="ARPLS71935"></a><a id="ARPLS71935"></a><a id="ARPLS579"></a><div class="props_rev_3"><a id="GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13" name="GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13"></a><h4 id="ARPLS-GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13" class="sect4"><span class="enumeration_section">281.3.9 </span>RE$RULE_HIT Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$RULE_HIT</code> type specifies a rule found because of an evaluation. 
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13__GUID-9001400A-7BCA-4677-8095-1519E14AF4BA">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="DBMS_RULE_ADM.html#GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7" title="This procedure creates a rule.">CREATE_RULE Procedure</a></p>
                              </li>
                              <li>
                                 <p><a href="DBMS_RULE_ADM.html#GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9" title="This procedure changes one or more aspects of the specified rule.">ALTER_RULE Procedure</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13__GUID-41EA7B3E-6F92-4DB6-91C6-190C681304C7">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$RULE_HIT (
&nbsp;&nbsp;&nbsp;rule_name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VARCHAR2(65),
&nbsp;&nbsp;&nbsp;rule_action_context &nbsp;RE$NV_LIST); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13__GUID-55078AE1-7B0D-450C-97CF-20A3E987B59F">Attributes</p>
                        <div class="tblformal" id="GUID-BD91B0B5-CBC7-4BD3-BA21-3CF907285F13__GUID-F1968F03-9AA8-4040-B379-1303DD1F6813">
                           <p class="titleintable">Table 281-9 RE$RULE_HIT Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$RULE_HIT Attributes" summary="This table describes Attributes of the RuleType RE$RULE_HIT." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e2178">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e2181">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e2186" headers="d1605288e2178 ">
                                       <p><code class="codeph">rule_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e2186 d1605288e2181 ">
                                       <p>The rule name in the form <span class="italic"><code class="codeph">schema_name.rule_name</code></span>. For example, a rule named <code class="codeph">employee_rule</code> in the <code class="codeph">hr</code> schema is returned in the form "<code class="codeph">hr"."employee_rule"</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e2207" headers="d1605288e2178 ">
                                       <p><code class="codeph">rule_action_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e2207 d1605288e2181 ">
                                       <p>The rule action context as specified in the <code class="codeph">CREATE_RULE</code> or <code class="codeph">ALTER_RULE</code> procedure of the <code class="codeph">DBMS_RULE_ADM</code> package
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS580"></a><a id="ARPLS580"></a><div class="props_rev_3"><a id="GUID-B4D58719-CDF0-4BE2-977D-B17B910EC236" name="GUID-B4D58719-CDF0-4BE2-977D-B17B910EC236"></a><h4 id="ARPLS-GUID-B4D58719-CDF0-4BE2-977D-B17B910EC236" class="sect4"><span class="enumeration_section">281.3.10 </span>RE$RULE_HIT_LIST Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$RULE_HIT_LIST</code> type identifies a list of rules found because of an evaluation.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4D58719-CDF0-4BE2-977D-B17B910EC236__GUID-FF311537-A3E1-4791-93A2-F5CA445169C4">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$RULE_HIT_LIST AS VARRAY(1024) OF SYS.RE$RULE_HIT;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74464"></a><a id="ARPLS74465"></a><a id="ARPLS74465"></a><a id="ARPLS74464"></a><div class="props_rev_3"><a id="GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD" name="GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD"></a><h4 id="ARPLS-GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD" class="sect4"><span class="enumeration_section">281.3.11 </span>RE$RULE_NAME Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$RULE_HIT</code> type is create to allow use to pass a list of rule as argument.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD__GUID-F37FC213-B00D-4D21-B7D7-1A07368CBDF1">Syntax</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE SYS.RE$RULE_NAME AS OBJECT(
  rule_name            IN       varchar2,
  evaluation_context   IN       varchar2);
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD__GUID-6A856CFD-B6EE-4F69-8103-C1BCE7CB1C15">Attributes</p>
                        <div class="tblformal" id="GUID-1090B4F6-2AC3-40F6-BC90-29B3988EF1BD__GUID-D2484309-5587-4A7A-AD50-3C3851D2B542">
                           <p class="titleintable">Table 281-10 RE$RULE_NAME Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$RULE_NAME Attributes" summary="This table describes Attributes of the RuleType RE$RULE_NAME." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e2443">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e2446">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e2451" headers="d1605288e2443 ">
                                       <p><code class="codeph">rule_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e2451 d1605288e2446 ">
                                       <p>The rule name in the form <span class="italic"><code class="codeph">SCHEMA_NAME.RULE_NAME</code></span>. For example, a rule named <code class="codeph">employee_rule</code> in the <code class="codeph">hr</code> schema is returned in the form "<code class="codeph">hr"."employee_rule"</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e2472" headers="d1605288e2443 ">
                                       <p><code class="codeph">Evaluation_context </code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e2472 d1605288e2446 ">
                                       <p>The evaluation context as specified in the <code class="codeph">CREATE_RULE</code> or <code class="codeph">ALTER_RULE</code> procedure of the <code class="codeph">DBMS_RULE_ADM</code> package
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74466"></a><a id="ARPLS74466"></a><div class="props_rev_3"><a id="GUID-D1A9F34A-9A66-4298-A15B-6C0C3E06AE2F" name="GUID-D1A9F34A-9A66-4298-A15B-6C0C3E06AE2F"></a><h4 id="ARPLS-GUID-D1A9F34A-9A66-4298-A15B-6C0C3E06AE2F" class="sect4"><span class="enumeration_section">281.3.12 </span>RE$RULE_NAME_LIST Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$RULE_HIT_LIST</code> type Identifies a list of Rule Name values.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D1A9F34A-9A66-4298-A15B-6C0C3E06AE2F__GUID-426F9526-4069-4EED-BA7E-A2D7722358B7">Syntax</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE SYS.RE$RULE_NAME_LIST AS VARRAY(1024) OF SYS.RE$RULE_NAME;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS581"></a><a id="ARPLS71936"></a><a id="ARPLS71936"></a><a id="ARPLS581"></a><div class="props_rev_3"><a id="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11" name="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11"></a><h4 id="ARPLS-GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11" class="sect4"><span class="enumeration_section">281.3.13 </span>RE$TABLE_ALIAS Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$TABLE_ALIAS</code> type provides the table corresponding to an alias used in a rule evaluation context.
                     </p>
                     <div class="section">
                        <p>A specified table name must satisfy the schema object naming rules.</p>
                        <div class="infoboxnote" id="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11__GUID-ABF20AF4-9D51-4184-9FE2-0F066DA5BF0B">
                           <p class="notep1">Note:</p>
                           <p>Enclose the table name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11__GUID-5F64E826-2F47-4F14-898F-3AE312528093">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for information about schema object naming rules
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11__GUID-92D4E4D9-AA99-4D5C-ABB6-2712CB25ACC1">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$TABLE_ALIAS IS OBJECT(
 &nbsp;&nbsp;table_alias  VARCHAR2(32),
&nbsp; &nbsp;table_name   VARCHAR2(194));</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11__GUID-A8BD49A3-2846-48FF-9ECB-15900CBAF4D1">Attributes</p>
                        <div class="tblformal" id="GUID-A0E1AEE9-D955-41FA-983F-C9A7A2C98A11__GUID-C8762783-9E39-4B95-A89F-FB46CA0FF78B">
                           <p class="titleintable">Table 281-11 RE$TABLE_ALIAS Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$TABLE_ALIAS Attributes" summary="This table describes Attributes of the RuleType RE$TABLE_ALIAS." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="21%" id="d1605288e2718">Attribute</th>
                                    <th align="left" valign="bottom" width="79%" id="d1605288e2721">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d1605288e2726" headers="d1605288e2718 ">
                                       <p><code class="codeph">table_alias</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d1605288e2726 d1605288e2721 ">
                                       <p>The alias used for the table in a rule</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d1605288e2734" headers="d1605288e2718 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d1605288e2734 d1605288e2721 ">
                                       <p>The table name referred to by the alias. A synonym can be specified. The table name is resolved in the evaluation context schema.</p>
                                       <p>The format is one of the following:</p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema_name</span>.<span class="italic">table_name</span>

<span class="italic">table_name</span>
</pre><p>For example, if the <span class="italic"><code class="codeph">schema_name</code></span> is <code class="codeph">hr</code> and the <span class="italic"><code class="codeph">table_name</code></span> is <code class="codeph">employees</code>, then enter the following:
                                       </p><pre class="oac_no_warn" dir="ltr">hr.employees</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS582"></a><a id="ARPLS582"></a><div class="props_rev_3"><a id="GUID-2278B65F-2B5A-4934-87D5-7839C5516147" name="GUID-2278B65F-2B5A-4934-87D5-7839C5516147"></a><h4 id="ARPLS-GUID-2278B65F-2B5A-4934-87D5-7839C5516147" class="sect4"><span class="enumeration_section">281.3.14 </span>RE$TABLE_ALIAS_LIST Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$TABLE_ALIAS_LIST</code> type identifies a list of table aliases used in a rule evaluation context.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2278B65F-2B5A-4934-87D5-7839C5516147__GUID-BF20FCD3-E210-405E-85E3-DFF01617A596">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$TABLE_ALIAS_LIST AS VARRAY(1024) OF SYS.RE$TABLE_ALIAS;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS583"></a><a id="ARPLS71937"></a><a id="ARPLS71937"></a><a id="ARPLS583"></a><div class="props_rev_3"><a id="GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816" name="GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816"></a><h4 id="ARPLS-GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816" class="sect4"><span class="enumeration_section">281.3.15 </span>RE$TABLE_VALUE Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$TABLE_VALUE</code> type specifies the value of a table row using a <code class="codeph">ROWID</code>. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816__GUID-3A877B46-55F7-4F64-BD61-4A3E300DCA68">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$TABLE_VALUE(
&nbsp;&nbsp;&nbsp;table_alias  VARCHAR2(32), 
   table_rowid &nbsp;VARCHAR2(18));</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816__GUID-5D40FB47-C9D1-4551-ABE1-766F6999195B">Attributes</p>
                        <div class="tblformal" id="GUID-2B77E586-8DE0-4DE4-BF99-51F18DD7B816__GUID-F094AC66-29EE-4F77-ACA3-969F03908B59">
                           <p class="titleintable">Table 281-12 RE$TABLE_VALUE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$TABLE_VALUE Attributes" summary="This table describes Attributes of the RuleType RE$TABLE_VALUE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e2994">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e2997">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e3002" headers="d1605288e2994 ">
                                       <p><code class="codeph">table_alias</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e3002 d1605288e2997 ">
                                       <p>Specifies the alias used for the table in a rule</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e3010" headers="d1605288e2994 ">
                                       <p><code class="codeph">table_rowid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e3010 d1605288e2997 ">
                                       <p>Specifies the rowid for the table row</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS584"></a><a id="ARPLS584"></a><div class="props_rev_3"><a id="GUID-6C381E6D-B306-43A6-8857-B6BA277665F9" name="GUID-6C381E6D-B306-43A6-8857-B6BA277665F9"></a><h4 id="ARPLS-GUID-6C381E6D-B306-43A6-8857-B6BA277665F9" class="sect4"><span class="enumeration_section">281.3.16 </span>RE$TABLE_VALUE_LIST Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$TABLE_VALUE_LIST</code> type identifies a list of table values.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-6C381E6D-B306-43A6-8857-B6BA277665F9__GUID-022DA62D-1137-40DA-BBC2-48647A9E3947">
                           <p class="notep1">Note:</p>
                           <p>Each table alias in the list in the list must be unique.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C381E6D-B306-43A6-8857-B6BA277665F9__GUID-B8E1331B-6B1D-49D4-97EF-44A08DAFB02D">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$TABLE_VALUE_LIST AS VARRAY(1024) OF SYS.RE$TABLE_VALUE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74467"></a><a id="ARPLS74468"></a><a id="ARPLS74468"></a><a id="ARPLS74467"></a><div class="props_rev_3"><a id="GUID-375A770A-B997-4D96-9708-324C110AFD71" name="GUID-375A770A-B997-4D96-9708-324C110AFD71"></a><h4 id="ARPLS-GUID-375A770A-B997-4D96-9708-324C110AFD71" class="sect4"><span class="enumeration_section">281.3.17 </span>RE$VALUE Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$VALUE</code> type represents one datapoint value element. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-375A770A-B997-4D96-9708-324C110AFD71__GUID-3DA61193-A1EC-4EE4-B0A4-5FDB0DAAF221">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$VALUE  (
     table_values          IN       SYS.RE$TABLE_VALUE_LIST:= NULL,
     column_values         IN       SYS.RE$COLUMN_VALUE_LIST:=NULL,
     variable_values       IN       SYS.RE$VARIABLE_VALUE_LIST:=NULL,
     attribute_values      IN       SYS.RE$ATTRIBUTE_VALUE_LIST:=NULL)
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-375A770A-B997-4D96-9708-324C110AFD71__GUID-721858ED-6B4B-4372-A4B7-5533F6277C61">Attributes</p>
                        <div class="tblformal" id="GUID-375A770A-B997-4D96-9708-324C110AFD71__GUID-9065E8A8-FF0B-47AE-B2C7-C7BFD0CF9A95">
                           <p class="titleintable">Table 281-13 RE$VALUE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$VALUE Attributes" summary="This table describes Attributes of the RuleType RE$VALUE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="21%" id="d1605288e3241">Attribute</th>
                                    <th align="left" valign="bottom" width="79%" id="d1605288e3244">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d1605288e3249" headers="d1605288e3241 ">
                                       <p><code class="codeph">table_values</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d1605288e3249 d1605288e3244 ">
                                       <p>ROWID of table row for expression evaluation</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d1605288e3257" headers="d1605288e3241 ">
                                       <p><code class="codeph">column_ values</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d1605288e3257 d1605288e3244 ">
                                       <p>Values of columns referred in the expression</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d1605288e3265" headers="d1605288e3241 ">
                                       <p><code class="codeph">variable_values</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d1605288e3265 d1605288e3244 ">
                                       <p>Values of variables referred in expressio</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="21%" id="d1605288e3273" headers="d1605288e3241 ">
                                       <p><code class="codeph">attribute_values</code></p>
                                    </td>
                                    <td align="left" valign="top" width="79%" headers="d1605288e3273 d1605288e3244 ">
                                       <p>Values of attributes referred in expression</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74469"></a><a id="ARPLS74469"></a><div class="props_rev_3"><a id="GUID-31A9ABB9-5395-438D-9CFC-2BD227702B7F" name="GUID-31A9ABB9-5395-438D-9CFC-2BD227702B7F"></a><h4 id="ARPLS-GUID-31A9ABB9-5395-438D-9CFC-2BD227702B7F" class="sect4"><span class="enumeration_section">281.3.18 </span>RE$VALUE_LIST Type
                  </h4>
                  <div>
                     <p><code class="codeph">RE$TABLE_VALUE_LIST</code> type is a varray for defining a list of <code class="codeph">RE$VALUE</code> type. It represents a list of datapoint element.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-31A9ABB9-5395-438D-9CFC-2BD227702B7F__GUID-79AE3969-5AAD-4325-B63B-28668635C8A9">Syntax</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE SYS.RE$VALUE _LIST AS VARRAY(1024) OF SYS.RE$VALUE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS585"></a><a id="ARPLS71938"></a><a id="ARPLS71938"></a><a id="ARPLS585"></a><div class="props_rev_3"><a id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221" name="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221"></a><h4 id="ARPLS-GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221" class="sect4"><span class="enumeration_section">281.3.19 </span>RE$VARIABLE_TYPE Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$VARIABLE_TYPE</code> type provides the type of a variable used in a rule evaluation context. A specified variable name must satisfy the schema object naming rules.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-4797988D-56C8-440C-B53F-888D6AF8E761">
                           <p class="notep1">Note:</p>
                           <p>Enclose the variable name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-0E6B9340-5EBD-444D-850F-551562C2DD37">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for information about schema object naming rules
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-67726475-9B5B-45A0-9F93-312396E8C76C">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$VARIABLE_TYPE (
 &nbsp;&nbsp;variable_name             VARCHAR2(32),
&nbsp;&nbsp; variable_type             VARCHAR2(4000),
   variable_value_function   VARCHAR2(228),
   variable_method_function  VARCHAR2(228));</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-1D9C3389-96A2-4DC9-8C2F-DCC53C69FB1B">Attributes</p>
                        <div class="tblformal" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-062A2A73-9586-482D-ABE6-72A82B9EE2E1">
                           <p class="titleintable">Table 281-14 RE$VARIABLE_TYPE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$VARIABLE_TYPE Attributes" summary="This table describes Attributes of the RuleType RE$VARIABLE_TYPE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="37%" id="d1605288e3512">Attribute</th>
                                    <th align="left" valign="bottom" width="63%" id="d1605288e3515">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d1605288e3520" headers="d1605288e3512 ">
                                       <p><code class="codeph">variable_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d1605288e3520 d1605288e3515 ">
                                       <p>The variable name used in a rule</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d1605288e3528" headers="d1605288e3512 ">
                                       <p><code class="codeph">variable_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d1605288e3528 d1605288e3515 ">
                                       <p>The type that is resolved in the evaluation context schema. Any valid Oracle built-in datatype, user-defined type, or Oracle-supplied type can be specified. See the<a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic"> Oracle Database SQL Language Reference </span></a>for more information about these types.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d1605288e3541" headers="d1605288e3512 ">
                                       <p><code class="codeph">variable_value_function</code></p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d1605288e3541 d1605288e3515 ">
                                       <p>A value function that can be specified for implicit variables. A synonym can be specified. The function name is resolved in the evaluation context schema. It is executed on behalf of the owner of a rule set using the evaluation context or containing a rule that uses the evaluation context.</p>
                                       <p>See the <span class="q">"<a href="Rule-TYPEs.html#GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__I997441">Usage Notes</a>"</span> for more information.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d1605288e3555" headers="d1605288e3512 ">
                                       <p><code class="codeph">variable_method_function</code></p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d1605288e3555 d1605288e3515 ">
                                       <p>Specifies a value function, which can return the result of a method invocation. Specifying such a function can speed up evaluation, if there are many simple rules that invoke the method on the variable. The function can be a synonym or a remote function.</p>
                                       <p>The function name is resolved in the evaluation context schema. It is executed on behalf of the owner of a rule set using the evaluation context or containing a rule that uses the evaluation context.</p>
                                       <p>See the <span class="q">"<a href="Rule-TYPEs.html#GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__I997441">Usage Notes</a>"</span> for more information.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__I997441">
                        <p class="subhead3" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-3D704018-2CE6-4E35-83AF-4252D1F7C4AA">Usage Notes</p>
                        <p>The functions for both the for the <code class="codeph">variable_value_function</code> parameter and <code class="codeph">variable_method_function</code> parameter have the following format:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema_name</span>.<span class="italic">package_name</span>.<span class="italic">function_name</span>@<span class="italic">dblink</span>
</pre><p>Any of the following parts of the format can be omitted: <span class="italic"><code class="codeph">schema_name</code></span>, <span class="italic"><code class="codeph">package_name</code></span>, and <span class="italic"><code class="codeph">@dblink</code></span>.
                        </p>
                        <p>For example, if the <span class="italic"><code class="codeph">schema_name</code></span> is <code class="codeph">hr</code>, the <span class="italic"><code class="codeph">package_name</code></span> is <code class="codeph">var_pac</code>, the <span class="italic"><code class="codeph">function_name</code></span> is <code class="codeph">func_value</code>, and the <span class="italic"><code class="codeph">dblink</code></span> is <code class="codeph">dbs1.net</code>, then enter the following:
                        </p><pre class="oac_no_warn" dir="ltr">hr.var_pac.func_value@dbs1.net
</pre><p>The following sections describe the signature of the functions.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-89453E65-7E7B-4791-A247-C94BB7874D55">Signature for variable_value_function</p>
                        <p>The function must have the following signature:</p><pre class="oac_no_warn" dir="ltr">FUNCTION <span class="italic">variable_value_function_name</span>(
  evaluation_context_schema  IN VARCHAR2,       
  evaluation_context_name    IN VARCHAR2,
  variable_name              IN VARCHAR2,
  event_context              IN SYS.RE$NV_LIST )
RETURN SYS.RE$VARIABLE_VALUE;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EA2F12D-02E2-4840-A344-12F2D4B52221__GUID-B1472E34-B849-4CDA-A857-3038DBF8F8AB">Signature for variable_method_function</p>
                        <p>This function must have the following signature: </p><pre class="oac_no_warn" dir="ltr">FUNCTION <span class="italic">variable_method_function_name</span>(    
  evaluation_context_schema  IN VARCHAR2, 
  evaluation_context_name    IN VARCHAR2, 
  variable_value             IN SYS.RE$VARIABLE_VALUE, 
  method_name                IN VARCHAR2, 
  event_context              IN SYS.RE$NV_LIST)
RETURN SYS.RE$ATTRIBUTE_VALUE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS586"></a><a id="ARPLS586"></a><div class="props_rev_3"><a id="GUID-C6E738A8-F0B2-4EFD-B2D0-83C7F4C0F832" name="GUID-C6E738A8-F0B2-4EFD-B2D0-83C7F4C0F832"></a><h4 id="ARPLS-GUID-C6E738A8-F0B2-4EFD-B2D0-83C7F4C0F832" class="sect4"><span class="enumeration_section">281.3.20 </span>RE$VARIABLE_TYPE_LIST Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$VARIABLE_TYPE_LIST</code> type identifies a list of variables and their types used in a rule evaluation context.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C6E738A8-F0B2-4EFD-B2D0-83C7F4C0F832__GUID-7691AB24-0D43-4154-9CDA-7E632D841C99">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$VARIABLE_TYPE_LIST AS VARRAY(1024) OF SYS.RE$VARIABLE_TYPE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS587"></a><a id="ARPLS71939"></a><a id="ARPLS71939"></a><a id="ARPLS587"></a><div class="props_rev_3"><a id="GUID-67420543-C600-4AAE-8647-A11DC15990E9" name="GUID-67420543-C600-4AAE-8647-A11DC15990E9"></a><h4 id="ARPLS-GUID-67420543-C600-4AAE-8647-A11DC15990E9" class="sect4"><span class="enumeration_section">281.3.21 </span>RE$VARIABLE_VALUE Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$VARIABLE_VALUE</code> type specifies the value of a variable. 
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-67420543-C600-4AAE-8647-A11DC15990E9__GUID-75F7F527-D725-42A3-96B3-C8CDCCD8718D">
                           <p class="notep1">Note:</p>
                           <p>Enclose the variable name in double quotation marks (") if the name contains special characters.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-67420543-C600-4AAE-8647-A11DC15990E9__GUID-D9C6B823-84C8-4E15-9144-3548940FEBD5">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$VARIABLE_VALUE (
&nbsp;&nbsp;&nbsp;variable_name &nbsp;VARCHAR2(32), 
&nbsp;&nbsp;&nbsp;variable_data &nbsp;ANYDATA); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-67420543-C600-4AAE-8647-A11DC15990E9__GUID-10ADAEA4-AB4E-4F4F-B0DC-DCEC1E7F1F5B">Attributes</p>
                        <div class="tblformal" id="GUID-67420543-C600-4AAE-8647-A11DC15990E9__GUID-01B021A0-0C97-4EF0-9547-8851A3F8E788">
                           <p class="titleintable">Table 281-15 RE$VARIABLE_VALUE Attributes</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RE$VARIABLE_VALUE Attributes" summary="This table describes Attributes of the RuleType RE$VARIABLE_VALUE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1605288e3887">Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d1605288e3890">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e3895" headers="d1605288e3887 ">
                                       <p><code class="codeph">variable_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e3895 d1605288e3890 ">
                                       <p>Specifies the variable name used in a rule</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1605288e3903" headers="d1605288e3887 ">
                                       <p><code class="codeph">variable_data</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1605288e3903 d1605288e3890 ">
                                       <p>Specifies the data for the variable value</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS588"></a><a id="ARPLS588"></a><div class="props_rev_3"><a id="GUID-29C791A6-E5AD-409F-B9FE-8A3CE01BBF2A" name="GUID-29C791A6-E5AD-409F-B9FE-8A3CE01BBF2A"></a><h4 id="ARPLS-GUID-29C791A6-E5AD-409F-B9FE-8A3CE01BBF2A" class="sect4"><span class="enumeration_section">281.3.22 </span>RE$VARIABLE_VALUE_LIST Type
                  </h4>
                  <div>
                     <p>The <code class="codeph">RE$VARIABLE_VALUE_LIST</code> type identifies a list of variable values.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-29C791A6-E5AD-409F-B9FE-8A3CE01BBF2A__GUID-0BFE6AAC-EC23-4452-9BA3-F96C6C7A2783">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE SYS.RE$VARIABLE_VALUE_LIST AS VARRAY(1024) OF SYS.RE$VARIABLE_VALUE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='03386.using-training-mode-to-log-realm-and-command-rule-activities.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">
      <meta name="description" content="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">
      <title>Using Simulation Mode for Logging Realm and Command Rule Activities</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide ">
      <meta property="og:description" content="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96302-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-oracle-database-vault-policies.html" title="Previous" type="text/html">
      <link rel="next" href="integrating-database-vault-with-other-oracle-products.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="DVADM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-oracle-database-vault-policies.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="integrating-database-vault-with-other-oracle-products.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Simulation Mode for Logging Realm and Command Rule Activities</li>
            </ol>
            <a id="GUID-23CA88C2-C52C-4676-8564-2395898BECE7" name="GUID-23CA88C2-C52C-4676-8564-2395898BECE7"></a>
            
            <h2 id="DVADM-GUID-23CA88C2-C52C-4676-8564-2395898BECE7" class="sect2"><span class="enumeration_chapter">10 </span>Using Simulation Mode for Logging Realm and Command Rule Activities
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723">About Simulation Mode</a><br>Simulation mode enables you to capture violations in a simulation log instead of blocking SQL execution by Oracle Database Vault realms and command rules.
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2">Simulation Mode Use Cases</a><br>Simulation mode is useful for testing a development configuration of new realms and command rules. 
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0">Logging Realms in Simulation Mode</a><br>You can set both regular and mandatory realms in simulation mode. 
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a><br>This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm. 
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6">Use Cases and Guidelines for Logging Realms in Simulation Mode</a><br>Oracle provides a set of use cases and guidelines for logging realms in simulation mode.
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723" name="GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723"></a><h3 id="DVADM-GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723" class="sect3">About Simulation Mode</h3>
               <div>
                  <p>Simulation mode enables you to capture violations in a simulation log instead of blocking SQL execution by Oracle Database Vault realms and command rules.</p>
                  <p>Simulation mode stores the errors that are captured in one location for easy analysis. To use simulation mode, when you create or update a realm or command rule, instead of enabling or disabling the realm or command rule, you can set it to simulation mode. The realm or command rule is still enabled, but because violations are not blocked and are instead recorded to the simulation log file, you can test it for any potential errors before you enable it for a production environment. When simulation mode is enabled, the report may include violations for multiple realms or command rules. For more detailed reports that can help you better identify the source of user SQL statements, you can configure simulation mode to include the PL/SQL call stack. The call stack captures the calling procedures and functions recursively to better troubleshoot the Database Vault audit records. Call stack information is stored in the <code class="codeph">PL_SQL_STACK</code> column in the <code class="codeph">DVSYS.DBA_DV_SIMULATION_LOG</code> data dictionary view.
                  </p>
                  <p>For example, the following creation statement for a realm enables simulation mode and generates the PL/SQL call stack:</p><pre class="oac_no_warn" dir="ltr">BEGIN
 DBMS_MACADM.CREATE_REALM(
 realm_name    =&gt; 'HR Apps',
 description   =&gt; 'Realm to protect the HR realm', 
 enabled       =&gt; DBMS_MACUTL.G_SIMULATION,
 audit_options =&gt; DBMS_MACUTL.G_REALM_AUDIT_FAIL,
 realm_type    =&gt; 1,
 realm_scope   =&gt; DBMS_MACUTL.G_SCOPE_LOCAL,
 pl_sql_stack  =&gt; TRUE);
END; 
/</pre><p>At this stage, SQL statements that violate realms or command rules are still able to execute, but these activities are recorded to the <code class="codeph">DBA_DV_SIMULATION_LOG</code> data dictionary view. For example, the following query finds violations against the HR Apps realm and any other realms or command rules that have been configured for simulation mode:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT USERNAME, COMMAND, SQLTEXT, VIOLATION_TYPE FROM DBA_DV_SIMULATION_LOG WHERE REALM_NAME = "HR APPS";

USERNAME  COMMAND    SQLTEXT                          VIOLATION_TYPE            
    
--------  ---------- -------------------------------  --------------
DGRANT    SELECT     SELECT SALARY FROM HR.EMPLOYEES; Realm Violation</pre><p>After you have completed testing the realm or command rule, a user who has been granted the <code class="codeph">DV_ADMIN</code> or <code class="codeph">DV_OWNER</code> role can clear the <code class="codeph">DBA_DV_SIMULATION_LOG</code> data dictionary view by deleting the contents of the underlying table of this view, <code class="codeph">DVSYS.SIMULATION_LOG$</code>. 
                  </p>
                  <p>For example: </p><pre class="oac_no_warn" dir="ltr">DELETE FROM DVSYS.SIMULATION_LOG$;</pre><p>Or:</p><pre class="oac_no_warn" dir="ltr">DELETE FROM DVSYS.SIMULATION_LOG$ WHERE COMMAND = 'SELECT';</pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">Using Simulation Mode for Logging Realm and Command Rule Activities</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2" name="GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2"></a><h3 id="DVADM-GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2" class="sect3">Simulation Mode Use Cases</h3>
               <div>
                  <p>Simulation mode is useful for testing a development configuration of new realms and command rules. </p>
                  <p>Use cases are as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Application certification</p>
                        <p>When you are certifying applications, you can use simulation mode as follows in an application test environment:</p>
                        <ol>
                           <li>
                              <p>Put all schemas for the application into mandatory realms with simulation mode enabled. </p>
                           </li>
                           <li>
                              <p>Run a full regression test.</p>
                           </li>
                           <li>
                              <p>Analyze the simulation mode log by querying the <code class="codeph">DBA_DV_SIMULATION_LOG</code> data dictionary view to find who can access these schemas. 
                              </p>
                           </li>
                           <li>
                              <p>Update the realms with new authorizations, and the enable the realms (that is, not using simulation mode).</p>
                           </li>
                           <li>
                              <p>Re-run the regression test. </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>Introduction of a new command rule</p>
                        <p>You can use simulation mode on a production database that has Oracle Database Vault enabled. </p>
                        <ol>
                           <li>
                              <p>Put the new command rule into production in simulation mode for however many weeks that are necessary. </p>
                           </li>
                           <li>
                              <p>Analyze the simulation mode log by querying <code class="codeph">DBA_DV_SIMULATION_LOG</code> to determine if the command rule is working correctly. 
                              </p>
                           </li>
                           <li>
                              <p>Make changes to the command rule as necessary.</p>
                           </li>
                           <li>
                              <p>Enable the command rule.</p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>Putting a new realm into a production database in simulation mode. </p>
                        <p>This method can help to find the system context information needed to set the trusted path rules in rule sets and find authorized users for realms. </p>
                        <ol>
                           <li>
                              <p>Create the new realm in mandatory mode and add the protected objects</p>
                           </li>
                           <li>
                              <p>Do not add any authorized users.</p>
                           </li>
                           <li>
                              <p>Run applications and development operations from the normal IP addresses that will be used.</p>
                           </li>
                           <li>
                              <p>Check the simulation log file for both authorized users and system context information that you can use to create trusted paths.</p>
                           </li>
                           <li>
                              <p>Create the trusted paths, and then add the authorized users.</p>
                           </li>
                           <li>
                              <p>Clear the simulation log and run the application and development operation tasks again.</p>
                           </li>
                           <li>
                              <p>After a period of time, review the simulation log. If all the controls were updated correctly, then the simulation log is empty. Log entries in the simulation mode indicate additional changes that you need to make to the realm and rule sets or the log entries may indicate a malicious use.</p>
                           </li>
                        </ol>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">Using Simulation Mode for Logging Realm and Command Rule Activities</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-5487F685-D481-49E6-B990-20CC319219C0" name="GUID-5487F685-D481-49E6-B990-20CC319219C0"></a><h3 id="DVADM-GUID-5487F685-D481-49E6-B990-20CC319219C0" class="sect3">Logging Realms in Simulation Mode</h3>
               <div>
                  <p>You can set both regular and mandatory realms in simulation mode. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775">Considerations When Logging Realms in Simulation Mode</a><br>There are several use cases to consider if you want to use realms in simulation mode.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D">Use Case: All New Realms in Simulation Mode</a><br>In this use case, all realms are either mandatory or regular and all user-created realms are in simulation mode. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048">Use Case: New Realms Introduced to Existing Realms</a><br>In this use case, you add a set of new realms to a database that has an existing set of realms. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD">Use Case: Testing the Addition of New Objects in a Realm</a><br>In this use case, you add new objects to an existing realm and then test it using simulation mode without removing the current realm protections. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71">Use Case: Testing the Removal of Objects from a Realm</a><br>In this use case, you test the removal of objects to an existing realm. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370">Use Case: Testing the Addition of an Authorized User to a Realm</a><br>In this use case, you loosen security controls by adding more users. You do not need to simulate anything if you are simply adding more authorized users.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-B677F532-E093-4B29-928A-9344F3FA28A9">Use Case: Testing the Removal of an Authorized User from a Realm</a><br>In this use case, you want to drop an authorized user and use simulation mode to check if the user still needs to access the realm.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A">Use Case: Testing New Factors with Realms</a><br>In this use case, you want to test changes to factors.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF">Use Case: Testing Changes to an Existing Command Rule</a><br>In this use case, you test changes to an existing command rule while keeping the original command rule enabled. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">Using Simulation Mode for Logging Realm and Command Rule Activities</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775" name="GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775"></a><h4 id="DVADM-GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775" class="sect4">Considerations When Logging Realms in Simulation Mode</h4>
                  <div>
                     <p>There are several use cases to consider if you want to use realms in simulation mode.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Testing an application with all new Database Vault controls: all realms are in simulation mode</p>
                        </li>
                        <li>
                           <p>Adding a realm to existing working Database Vault controls: only a subset of realms are in simulation mode</p>
                        </li>
                        <li>
                           <p>Adding new objects to an existing enabled realm and then testing the difference with simulation mode and not disabling existing controls</p>
                        </li>
                        <li>
                           <p>Dropping one or more existing objects from an existing enabled realm and then testing the difference with simulation mode and not disabling existing controls</p>
                        </li>
                        <li>
                           <p>Adding new authorized users to an existing enabled realm and then testing the difference with simulation mode and not disabling existing controls</p>
                        </li>
                        <li>
                           <p>Dropping one or more existing authorized users from an existing enabled realm and then testing the difference with simulation mode and not disabling existing controls</p>
                        </li>
                        <li>
                           <p>Adding or changing factors in an existing enabled realm and then testing the difference with simulation mode and not disabling existing controls</p>
                        </li>
                        <li>
                           <p>Testing changes to a command rule in production while keeping the original command rule enabled</p>
                        </li>
                     </ul>
                     <p>When a user executes a SQL statement and it fails, it may fail for realms that are enabled, fail for realms that are simulated, or it could fail for both of these reasons. There could be mandatory realms, regular realms, or both. These conditions determine the data that is captured in the simulation log.</p>
                     <p>After you create the use cases that are described in the next sections, regular realms are completely overpowered by mandatory realms when an object has both types of realms protecting it. In all cases where mandatory and regular realms protect the same object, regular realms can be ignored with regard to simulation logs. Only mandatory realm failures are captured in the simulation logs. The only time regular realm failures are entered into the simulation log is when all realms for an object are regular realms. And then, the following must happen for regular realms to be written to the simulation log:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>All regular realms in simulation mode fails and</p>
                        </li>
                        <li>
                           <p>All regular realms that are enabled also fail</p>
                        </li>
                     </ul>
                     <p>If at least one enabled or simulation regular realm succeeds, then no simulation regular realms are logged.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D" name="GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D"></a><h4 id="DVADM-GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D" class="sect4">Use Case: All New Realms in Simulation Mode</h4>
                  <div>
                     <p>In this use case, all realms are either mandatory or regular and all user-created realms are in simulation mode. </p>
                     <p>Examples are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Mandatory realms only, which are all in simulation mode</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The user is authorized to execute the SQL statement in all mandatory realms. Nothing is captured in the simulation log table.</p>
                              </li>
                              <li>
                                 <p>The user fails one or more mandatory realm checks. All realm check failures are logged to the simulation log. Mandatory realm checks where the user’s SQL statement succeeded is not logged.</p>
                                 <p>In this example, there are three mandatory realms. The user SQL statement succeeds with one realm and fails with the other two. Only the two failed realm checks are recorded in the simulation log.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Regular realms only, which are all in simulation mode</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The user is authorized to execute the SQL statement in at least one regular realm. The user should have access to the data so nothing is logged to the simulation log.</p>
                              </li>
                              <li>
                                 <p>The user is not authorized to execute the SQL statement in all regular realms. The simulation log captures all the failed realm authorization failures. This enables the user to select which realm to which the user should be authorized. The SQL only needs to be authorized in one regular realm to work and not all regular realms need to be updated to authorize the SQL.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Mix of mandatory and regular realms, which are all in simulation mode</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>In this case, you capture the key realms when a user is rejected. In the case with mandatory and regular realms, the mandatory realms are the key realms. All mandatory realms must pass the authorization check for the user to gain access. In fact, regular realms could be considered superfluous when mandatory realms are protecting an object. So in cases where there are both mandatory and regular realms protecting the same object, it is only the mandatory realms that control if the SQL statement is blocked or allowed to execute. It does not matter whether the user was authorized to the regular realm or not. This example follows the rules for the first scenario, for mandatory realms in simulation mode. </p>
                              </li>
                              <li>
                                 <p>The user is authorized to execute the SQL statement in all mandatory realms. Nothing is captured in the simulation log table. Even though the user may succeed or fail in one or more regular realms, nothing about regular realm failure is captured.</p>
                              </li>
                              <li>
                                 <p>The user fails one or more mandatory realm checks. All realm check failures are logged to the simulation log. Mandatory realm checks where the user SQL statement succeeded are not be logged.</p>
                                 <p>For example, there are three mandatory realms. The user SQL statement succeeds with one realm and fails with the other two. Only the two failed realm checks are recorded in the simulation log.</p>
                                 <p>No regular realms need to be captured, because only the mandatory realms need to be captured in the simulation log.</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048" name="GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048"></a><h4 id="DVADM-GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048" class="sect4">Use Case: New Realms Introduced to Existing Realms</h4>
                  <div>
                     <p>In this use case, you add a set of new realms to a database that has an existing set of realms. </p>
                     <p>The existing realms are enabled and working. The new realms are in simulation mode. This use case applies only if both simulation and enabled realms are protecting the same object. </p>
                     <p>Examples: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>New mandatory realms in simulation mode with existing enabled mandatory realms. This use case shows some additional mandatory realms for an object: adding more security to an existing object.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Enabled mandatory realms and mandatory realms in simulation mode all successful with user SQL statement: in this case, the SQL executes normally and nothing is captured</p>
                              </li>
                              <li>
                                 <p>Enabled mandatory realms (at least one) fails and mandatory realms in simulation mode all successful: SQL is blocked and nothing is written to the simulation log</p>
                              </li>
                              <li>
                                 <p>Enabled mandatory realms (at least one) fails and mandatory realms in simulation mode has one or more failures: SQL is blocked and all failing mandatory realms in simulation mode are entered into simulation log</p>
                              </li>
                              <li>
                                 <p>Enabled mandatory realms all successful and mandatory realms in simulation mode have at least one failure: SQL is not blocked, all failed mandatory realms in simulation mode entered into simulation log</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>New regular realms in simulation mode with existing enabled regular realms: More regular realms are added to a security object, providing new ways for users to access sensitive data</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Enabled regular realms (at least one) and regular realms in simulation mode (at least one) successful: the user SQL executes normally with nothing written to simulation log</p>
                              </li>
                              <li>
                                 <p>Enabled regular realms (at least one) is successful, and regular realms in simulation mode all fail: user SQL executes normally, nothing is entered into the simulation log</p>
                              </li>
                              <li>
                                 <p>Enabled regular realms all fail and regular realms in simulation mode all fail: the user SQL is blocked and all regular realms in simulation mode are entered into simulation log. The user must evaluate which regular realm to authorize to if needed. The current implementation blocks the SQL and does not add the regular realms in simulation mode into the simulation log because the enabled regular realm would have blocked it anyway. This must change because the user may have added a new realm to authorize the SQL in this use case. There is no way to tell what happened if the new SQL should have worked, but is blocked by all regular realms in simulation mode as well (when one of the regular realms in simulation mode was designed to allow it to work). This would simulate an entry into the audit log for this situation.</p>
                              </li>
                              <li>
                                 <p>Enabled regular realms all fail and regular realms in simulation mode (at least one) successful: the user SQL is blocked and nothing is written to the simulation log.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>New regular realms with existing enabled mandatory realms: You do not need to do anything in this situation. The enabled mandatory realms will continue to control the objects and the new regular realms in simulation mode will have no impact if they are enabled or not. No simulation logs should be generated in this case.</p>
                        </li>
                        <li>
                           <p>New mandatory realms in simulation mode with existing enabled regular realm: While the enabled regular realm controls the objects for now, when the new mandatory realms in simulation mode are enabled, then they will have full control over the objects with no control by the older enabled regular realms. So, simulation logs will be created for all mandatory realms. This is the same as the scenario for new mandatory realms with existing enabled mandatory realms. </p>
                        </li>
                        <li>
                           <p>New regular realms in simulation mode with existing enabled mandatory and regular realms: The enabled mandatory realms will be the deciding realms whether the new regular realms in simulation mode are added to the existing enabled regular realms in the system. This is the same as the scenario as a mix of mandatory and regular realms, all in simulation mode. Nothing is written to the simulation logs.</p>
                        </li>
                        <li>
                           <p>New mandatory realms in simulation mode with enabled mandatory and regular realms: The enabled regular realms can be ignored. This is the same as the scenario for new mandatory realms with existing enabled mandatory realms. </p>
                        </li>
                        <li>
                           <p>Mix of new mandatory and regular realms in simulation mode with existing enabled mandatory and regular realms: Ignore all enabled and mandatory regular realms. This is simply adding more mandatory realms to an existing object. This is the same scenario as new mandatory realms with existing enabled mandatory realms. </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD" name="GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD"></a><h4 id="DVADM-GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD" class="sect4">Use Case: Testing the Addition of New Objects in a Realm</h4>
                  <div>
                     <p>In this use case, you add new objects to an existing realm and then test it using simulation mode without removing the current realm protections. </p>
                     <p>Oracle recommends that you create a duplicate realm in simulation mode for the new objects with the same authorized users and rule sets. This way, the existing realm can continue to provide protection to the existing objects while testing the new object.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71" name="GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71"></a><h4 id="DVADM-GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71" class="sect4">Use Case: Testing the Removal of Objects from a Realm</h4>
                  <div>
                     <p>In this use case, you test the removal of objects to an existing realm. </p>
                     <p>Because you are removing security controls for an existing object, there is no need to use simulation mode. Simply remove the object from the realm.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370" name="GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370"></a><h4 id="DVADM-GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370" class="sect4">Use Case: Testing the Addition of an Authorized User to a Realm</h4>
                  <div>
                     <p>In this use case, you loosen security controls by adding more users. You do not need to simulate anything if you are simply adding more authorized users.</p>
                     <p>If you are adding new functionality that is accessing data in a realm, but are not sure which new database users to authorize to the realm, then simply run the new functionality as a test (which will be blocked if not already authorized). Review the Database Vault audit logs to see the user name that attempted to access the realm data and add any new database users that are now authorized.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-B677F532-E093-4B29-928A-9344F3FA28A9" name="GUID-B677F532-E093-4B29-928A-9344F3FA28A9"></a><h4 id="DVADM-GUID-B677F532-E093-4B29-928A-9344F3FA28A9" class="sect4">Use Case: Testing the Removal of an Authorized User from a Realm</h4>
                  <div>
                     <p>In this use case, you want to drop an authorized user and use simulation mode to check if the user still needs to access the realm.</p>
                     <p>You may not be sure about dropping this user because you must check if the authorized user is accessing the realm for authorized activities. </p>
                     <p>If the data is only protected by a regular realm, then you can clone the realm with authorized users as the only difference. Remove the user to be dropped from the original realm and then add this user to the cloned realm. Then the cloned realm’s audit setting is changed to capture <code class="codeph">audit on success</code>.  This enables the dropped user to be visible in the audit records if they accessed the realm over a period of time. Audit policies can also be used in this case. For data that is protected by a mandatory realm, the best solution is to create an audit policy.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A" name="GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A"></a><h4 id="DVADM-GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A" class="sect4">Use Case: Testing New Factors with Realms</h4>
                  <div>
                     <p>In this use case, you want to test changes to factors.</p>
                     <p>There are two scenarios where the factors can change: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Changes to an application or the infrastructure that force a change to the factors</p>
                           <p>In this case, you do not need to keep the original factors in place. However, objects and authorized users should be able to remain enabled during the testing of the new factors. With an enabled realm, you can remove the factors from the authorized users. At the same time, create a mandatory realm for the same protected objects in simulation mode with no authorized users. The regular realm will protect the objects from unauthorized users while the simulation realm will capture all access along with the factor information. The simulation log can then be mined for each user to come up with the new factors which can then be added to the mandatory realm in simulation mode to make sure it’s clean before being migrated to the original regular realm.</p>
                        </li>
                        <li>
                           <p>No changes to the application or the infrastructure but changes such as new factors being added or factors being removed take place</p>
                           <p>When factors are being added, you must clone a second simulation realm from the original, but with the new factors added in. If the simulation logs shows that the usage is clean, then you can safely introduce the new factors into the original realm.</p>
                           <p>Dropping factors lowers the security profile, so you can simply drop the factor from the rule set.  No testing needs to be done.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF" name="GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF"></a><h4 id="DVADM-GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF" class="sect4">Use Case: Testing Changes to an Existing Command Rule</h4>
                  <div>
                     <p>In this use case, you test changes to an existing command rule while keeping the original command rule enabled. </p>
                     <p>Command rules may need to be updated and ideally tested before the changes are enabled in production. For a new command rule that will be added to a set of already existing command rules, put the new command rule into simulation mode when you create it. The other pre-existing command rules are already enabled and offer protection.</p>
                     <p>If you want to modify an existing command rule, there is no way to maintain the existing protection and test the new modification. Oracle recommends that you create an audit policy to capture what the original command rule was doing and then set an alert for it. The audit will not prevent the SQL as a command rule would do, but at least you can be alerted about the action. Then you can put the new updated command rule into simulation mode and test it.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="You can set both regular and mandatory realms in simulation mode.">Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" name="GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C"></a><h3 id="DVADM-GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" class="sect3">Tutorial: Tracking Violations to a Realm Using Simulation Mode</h3>
               <div>
                  <p>This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3">About This Tutorial</a><br>In this tutorial, you will create a realm around the <code class="codeph">HR.EMPLOYEES</code> table and test violations against it.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-A33AA63A-9DC2-4482-92E8-714823CC965F">Step 1: Create Users for This Tutorial</a><br>You must create three users for this tutorial. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-6AE7A50C-6498-4D86-8EC4-537E30920482">Step 2: Create a Realm and an Oracle Database Vault Policy</a><br>Next, you create a realm around the <code class="codeph">HR.EMPLOYEES</code> table, and then add this realm to an Oracle Database Vault policy.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-650EA278-861B-4F50-BAAF-1323621E491B">Step 3: Test the Realm and Policy</a><br>User <code class="codeph">tjones_dba</code> will commit a violation on the realm to test the realm and policy. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35">Step 4: Query the DBA_DV_SIMULATION_LOG View for Violations</a><br>Now you can check the simulation mode log the violations that user <code class="codeph">tjones_dba</code> committed.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A">Step 5: Enable and Re-test the Realm</a><br>Now that you have captured the violations, user <code class="codeph">psmith</code> can update the <code class="codeph">HR.EMPLOYEES_pol</code> policy.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-6D55E925-85AF-491A-9184-7E4D8636FC47">Step 6: Remove the Components for This Tutorial</a><br>You can remove the components that you created for this tutorial if you no longer need them. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">Using Simulation Mode for Logging Realm and Command Rule Activities</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3" name="GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3"></a><h4 id="DVADM-GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3" class="sect4">About This Tutorial</h4>
                  <div>
                     <p>In this tutorial, you will create a realm around the <code class="codeph">HR.EMPLOYEES</code> table and test violations against it.
                     </p>
                     <p>The <code class="codeph">HR.EMPLOYEES</code> table contains confidential data such employee salaries. To test the realm, an administrator, <code class="codeph">tjones_dba</code>, will look up and modify the salary of another employee, <code class="codeph">smavris</code>. The Database Vault administrator, <code class="codeph">leo_dvowner</code>, will use simulation mode to track the violations to the <code class="codeph">HR.EMPLOYEES</code> table. To accomplish this, user <code class="codeph">leo_dvowner</code> will create a Database Vault policy, which a delegated administrator, user <code class="codeph">psmith</code>, will own. User <code class="codeph">psmith</code> will then be able to make limited changes to the policy without needing the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-A33AA63A-9DC2-4482-92E8-714823CC965F" name="GUID-A33AA63A-9DC2-4482-92E8-714823CC965F"></a><h4 id="DVADM-GUID-A33AA63A-9DC2-4482-92E8-714823CC965F" class="sect4">Step 1: Create Users for This Tutorial</h4>
                  <div>
                     <p>You must create three users for this tutorial. </p>
                     <div class="section">The users are: <code class="codeph">psmith</code>, who is the Database Vault policy owner; <code class="codeph">tjones_dba</code>, who commits violations on the <code class="codeph">HR.EMPLOYEES</code> table; and <code class="codeph">smavris</code>, whose salary is the recipient of <code class="codeph">tjones_dba</code>’s violations. 
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role.</span><div>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr
Enter password: <span class="italic">password</span>
</pre><p>In a multitenant environment, you must log in to the appropriate pluggable database (PDB). For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr@hrpdb
Enter password: <span class="italic">password</span>
</pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create the following users and grant them the <code class="codeph">CREATE SESSION</code> privilege. </span><div><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO psmith IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO tjones_dba IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO smavris IDENTIFIED BY <span class="italic">password</span>;</pre><p>Follow the guidelines in <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_OWNER</code> role. </span><div>For example:<pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner -- <span class="italic">Or, leo_dvowner@hrpdb
</span>Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Grant user <code class="codeph">psmith</code> the <code class="codeph">DV_POLICY_OWNER</code> role, which enables <code class="codeph">psmith</code> to manage Database Vault policies.</span><div><pre class="oac_no_warn" dir="ltr">GRANT DV_POLICY_OWNER TO psmith;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@hrpdb</span> AS SYSDBA
Enter password: <span class="italic">password</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Grant the <code class="codeph">DBA</code> role to user <code class="codeph">tjones_dba</code> </span><div><pre class="oac_no_warn" dir="ltr">GRANT DBA TO tjones_dba;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the <code class="codeph">HR</code> schema owner. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR <span class="italic">-- Or, HR@hrpdb</span>
Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Grant the <code class="codeph">SELECT</code> privilege on the <code class="codeph">HR.EMPLOYEES</code> table to user <code class="codeph">smavris</code> </span><div><pre class="oac_no_warn" dir="ltr">GRANT SELECT ON HR.EMPLOYEES TO smavris;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">At this stage, the users have all been created and granted the appropriate privileges.</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-6AE7A50C-6498-4D86-8EC4-537E30920482" name="GUID-6AE7A50C-6498-4D86-8EC4-537E30920482"></a><h4 id="DVADM-GUID-6AE7A50C-6498-4D86-8EC4-537E30920482" class="sect4">Step 2: Create a Realm and an Oracle Database Vault Policy</h4>
                  <div>
                     <p>Next, you create a realm around the <code class="codeph">HR.EMPLOYEES</code> table, and then add this realm to an Oracle Database Vault policy.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_OWNER</code> role. </span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner -- <span class="italic">Or, leo_dvowner@hrpdb
</span>Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the realm around <code class="codeph">HR.EMPLOYEES</code> table as follows.</span><div>
                              <p>These procedures create the <code class="codeph">HR.EMPLOYEES_realm</code> realm, add the <code class="codeph">HR.EMPLOYEES</code> table to this realm, authenticate <code class="codeph">HR</code> as an owner, authenticate user <code class="codeph">psmith</code> as an participant, and set the realm in simulation mode.
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
 DBMS_MACADM.CREATE_REALM(
  realm_name    =&gt; 'HR.EMPLOYEES_realm', 
  description   =&gt; 'Realm to protect HR.EMPLOYEES', 
  enabled       =&gt; DBMS_MACUTL.G_SIMULATION, 
  audit_options =&gt; DBMS_MACUTL.G_REALM_AUDIT_FAIL,
  realm_type    =&gt; 0);
END; 
/

BEGIN
 DBMS_MACADM.ADD_OBJECT_TO_REALM(
  realm_name   =&gt; 'HR.EMPLOYEES_realm', 
  object_owner =&gt; 'HR', 
  object_name  =&gt; 'EMPLOYEES', 
  object_type  =&gt; 'TABLE'); 
END;
/

</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the <code class="codeph">HR.EMPLOYEES_pol</code> Database Vault policy and set it to be in simulation mode. </span><div>
                              <p>These procedures create the <code class="codeph">HR.EMPLOYEES_pol</code> policy, add the realm that was just created to the policy, and then add user <code class="codeph">psmith</code> as the owner of the policy.
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
 DBMS_MACADM.CREATE_POLICY(
  policy_name  =&gt; 'HR.EMPLOYEES_pol',
  description  =&gt; 'Policy to protect HR.EMPLOYEES',
  policy_state =&gt; DBMS_MACADM.G_SIMULATION);
END;
/

BEGIN
 DBMS_MACADM.ADD_REALM_TO_POLICY(
  policy_name  =&gt; 'HR.EMPLOYEES_pol',
  realm_name   =&gt; 'HR.EMPLOYEES_realm');
END;
/

BEGIN
 DBMS_MACADM.ADD_OWNER_TO_POLICY(
  policy_name  =&gt; 'HR.EMPLOYEES_pol',
  owner_name   =&gt; 'PSMITH');
END;
/
</pre></div>
                        </li>
                     </ol>
                     <div class="section">At this point, the realm and policy are ready to be tested. </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-650EA278-861B-4F50-BAAF-1323621E491B" name="GUID-650EA278-861B-4F50-BAAF-1323621E491B"></a><h4 id="DVADM-GUID-650EA278-861B-4F50-BAAF-1323621E491B" class="sect4">Step 3: Test the Realm and Policy</h4>
                  <div>
                     <p>User <code class="codeph">tjones_dba</code> will commit a violation on the realm to test the realm and policy. 
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">tjones_dba</code>. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT tjones_dba -- <span class="italic">Or, tjones_dba@hrpdb
</span>Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the <code class="codeph">HR.EMPLOYEES</code> table for the salary of <code class="codeph">smavris</code>.</span><div><pre class="oac_no_warn" dir="ltr">SELECT SALARY FROM HR.EMPLOYEES WHERE EMAIL = 'SMAVRIS';</pre><p>Output similar to the following should appear:</p><pre class="oac_no_warn" dir="ltr">    SALARY
----------
      6500

</pre></div>
                        </li>
                        <li class="stepexpand"><span>Cut <code class="codeph">smavris</code>’s salary in half.</span><div><pre class="oac_no_warn" dir="ltr">UPDATE HR.EMPLOYEES
SET SALARY = SALARY / 2
WHERE EMAIL = 'SMAVRIS';

1 row updated.</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">smavris</code>.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT smavris <span class="italic">-- Or, smavris@hrpdb</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the salary of <code class="codeph">smavris</code>.</span><div><pre class="oac_no_warn" dir="ltr">SELECT SALARY FROM HR.EMPLOYEES WHERE EMAIL = 'SMAVRIS';</pre><p>Output similar to the following should appear:</p><pre class="oac_no_warn" dir="ltr">    SALARY
----------
      3250
</pre></div>
                        </li>
                     </ol>
                     <div class="section">At this point, <code class="codeph">tjones_dba</code>’s violations have been recorded in the <code class="codeph">DBA_DV_SIMULATION_LOG</code> data dictionary view.
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35" name="GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35"></a><h4 id="DVADM-GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35" class="sect4">Step 4: Query the DBA_DV_SIMULATION_LOG View for Violations</h4>
                  <div>
                     <p>Now you can check the simulation mode log the violations that user <code class="codeph">tjones_dba</code> committed.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_OWNER</code> role. </span><div>For example:<pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner -- <span class="italic">Or, leo_dvowner@hrpdb
</span>Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the <code class="codeph">DBA_DV_SIMULATION_LOG</code> data dictionary view.</span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME, SQLTEXT, VIOLATION_TYPE FROM (
SELECT T1.*, T2.COLUMN_VALUE AS REALM
FROM DVSYS.DBA_DV_SIMULATION_LOG T1, TABLE(T1.REALM_NAME) T2
) WHERE REALM = 'HR.EMPLOYEES_realm';
</pre><p>Output similar to the following should appear:</p><pre class="oac_no_warn" dir="ltr">USERNAME
--------------------------------------------------------------------------------
SQLTEXT
--------------------------------------------------------------------------------
VIOLATION_TYPE
--------------------------------------------------------------------------------
TJONES_DBA
SELECT SALARY FROM HR.EMPLOYEES WHERE EMAIL = 'SMAVRIS'
Realm Violation

TJONES_DBA
UPDATE HR.EMPLOYEES SET SALARY = SALARY / 2 WHERE EMAIL = 'SMAVRIS'
Realm Violation
</pre></div>
                        </li>
                     </ol>
                     <div class="section">The output indicates that user <code class="codeph">tjones_dba</code> has committed two offences: first, he looked at another employee’s salary, and not only that, he cut it in half. The violation type is a realm violation. The query by <code class="codeph">smavris</code> was not captured because she legitimately can look at her salary. 
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A" name="GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A"></a><h4 id="DVADM-GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A" class="sect4">Step 5: Enable and Re-test the Realm</h4>
                  <div>
                     <p>Now that you have captured the violations, user <code class="codeph">psmith</code> can update the <code class="codeph">HR.EMPLOYEES_pol</code> policy.
                     </p>
                     <div class="section">This is  so that the <code class="codeph">HR.EMPLOYEES_realm</code> realm can be enabled. Then you can test the violations again.
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">psmith</code>. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT psmith -- <span class="italic">Or, psmith@hrpdb
</span>Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Update the policy so that it is enabled.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
 DBMS_MACADM.UPDATE_POLICY_STATE(
  policy_name   =&gt; 'HR.EMPLOYEES_pol',
  policy_state  =&gt; 1);
END;
/</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">tjones_dba</code>.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT tjones_dba <span class="italic">--Or, tjones_dba@hrpdb</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Try lowering <code class="codeph">smavris</code>’s salary to new depths.</span><div><pre class="oac_no_warn" dir="ltr">UPDATE HR.EMPLOYEES
SET SALARY = SALARY / 2
WHERE EMAIL = 'SMAVRIS';</pre><p>Output similar to the following should appear:</p><pre class="oac_no_warn" dir="ltr">ERROR at line 1:
ORA-01031: insufficient privileges

</pre></div>
                           <div>The policy, now enabled, enables the realm to protect the <code class="codeph">HR.EMPLOYEES</code> table. <code class="codeph">smavris</code>’s salary can shrink no more.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-6D55E925-85AF-491A-9184-7E4D8636FC47" name="GUID-6D55E925-85AF-491A-9184-7E4D8636FC47"></a><h4 id="DVADM-GUID-6D55E925-85AF-491A-9184-7E4D8636FC47" class="sect4">Step 6: Remove the Components for This Tutorial</h4>
                  <div>
                     <p>You can remove the components that you created for this tutorial if you no longer need them. </p>
                     <ol>
                        <li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_OWNER</code> role.</span><div>For example:<pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner -- <span class="italic">Or, leo_dvowner@hrpdb
</span>Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Remove the <code class="codeph">HR.EMPLOYEES_pol</code> Database Vault policy. </span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DROP_POLICY('HR.EMPLOYEES_pol');</pre></div>
                           <div>You first must remove the policy before you can drop its contents.</div>
                        </li>
                        <li class="stepexpand"><span>Remove the <code class="codeph">HR.EMPLOYEES_realm</code> realm.</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DELETE_REALM('HR.EMPLOYEES_realm');</pre></div>
                        </li>
                        <li class="stepexpand"><span>Remove the simulation mode log data that was accumulated.</span><div>
                              <p>Because the simulation mode log only captured information about user <code class="codeph">tjones_dba</code>, you can remove only the rows that relate to this user.
                              </p><pre class="oac_no_warn" dir="ltr">DELETE FROM DVSYS.SIMULATION_LOG$ WHERE USERNAME = 'TJONES_DBA';</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">HR</code>.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR <span class="italic">-- Or, CONNECT HR@hrpdb</span>
Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Revert <code class="codeph">smavris</code>’s salary back to its pre-violated state.</span><div><pre class="oac_no_warn" dir="ltr">UPDATE HR.EMPLOYEES
SET SALARY = 6500
WHERE EMAIL = 'SMAVRIS';</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr <span class="italic">-- Or, bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Remove the users <code class="codeph">psmith</code>, <code class="codeph">smavris</code>, and <code class="codeph">tjones_dba</code>. </span><div><pre class="oac_no_warn" dir="ltr">DROP USER psmith;
DROP USER smavris;
DROP USER tjones_dba;</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="This tutorial shows how to create a realm that uses simulation mode and then test violations to the realm.">Tutorial: Tracking Violations to a Realm Using Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" name="GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6"></a><h3 id="DVADM-GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" class="sect3">Use Cases and Guidelines for Logging Realms in Simulation Mode</h3>
               <div>
                  <p>Oracle provides a set of use cases and guidelines for logging realms in simulation mode.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21">About Logging Realms in Simulation Mode</a><br>The type of realm used can affect the data that is written to the simulation log.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1">Use Case: New Realms All in Simulation Mode</a><br>In this use case, all realms are either mandatory or regular, and all user-created realms are in simulation mode.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568">Use Case: New Realms Introduced to Existing Realms</a><br>The new realms are in simulation mode and the existing realms are enabled and working. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230">Use Case: New Objects Added to a Realm</a><br>You can add new objects to an existing realm and then test it by using simulation mode, without removing the current realm protections.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-11157AE0-2A52-4BC5-ACD1-42D049907534">Use Case: Removing Objects from a Realm</a><br>You can remove objects from a realm by using the <code class="codeph">DBMS_MACADM.DELETE_OBJECT_FROM_REALM</code> procedure. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A">Use Case: Adding an Authorized User to a Realm</a><br>You can add authorized users to a realm by using the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure.
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-152BA89E-73F2-4406-8C31-A1643EB5A652">Use Case: Removing an Authorized User from a Realm</a><br>You can remove an authorized user from a realm by using the <code class="codeph">DBMS_MACADM.DELETE_AUTH_FROM_REALM</code> procedure. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116">Use Case: Testing New Factors in a Realm</a><br>If a realm has new factors, you can use simulation mode to test if there have been changes to the factors. 
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79">Use Case: Testing Changes to an Existing Command Rule While Keeping the Original Command Control Enabled</a><br>You can test changes to an existing command rule while keeping the original command control enabled. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls.">Using Simulation Mode for Logging Realm and Command Rule Activities</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21" name="GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21"></a><h4 id="DVADM-GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21" class="sect4">About Logging Realms in Simulation Mode</h4>
                  <div>
                     <p>The type of realm used can affect the data that is written to the simulation log.</p>
                     <p>When a user executes a SQL statement and it fails, it may fail for realms that are enabled or fail for realms that are simulated (or both). These could be mandatory realms, regular realms, or both. These conditions determine what is captured in the simulation log.</p>
                     <p>When an object has both regular realms and mandatory realms protecting it, the mandatory realm protection takes precedence. When both regular and mandatory realms protect an object, the simulation log captures only the activity from the mandatory realm. The simulation log will capture only mandatory realm failures. The only time that the simulation log will capture a regular realm failure is when all realms for the object are regular realms, and if the regular realms have the following behavior:</p>
                     <ul style="list-style-type: disc;" id="GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21__UL_ARG_1DQ_SFB">
                        <li>All regular realms in simulation mode fail, and </li>
                        <li>All regular realms that are enabled also fail</li>
                     </ul>
                     <p>If at least one enabled or simulation regular realm succeeds, then no simulation regular realms are logged in the simulation log.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1" name="GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1"></a><h4 id="DVADM-GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1" class="sect4">Use Case: New Realms All in Simulation Mode</h4>
                  <div>
                     <p>In this use case, all realms are either mandatory or regular, and all user-created realms are in simulation mode.</p>
                     <ul style="list-style-type: disc;" id="GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1__UL_P3M_QHV_SFB">
                        <li><span class="bold">Mandatory realms only: all are in simulation mode</span><p>The user is authorized to execute the SQL statement in all mandatory realms. Nothing is captured in the simulation log table. </p>
                           <p>If the user fails one or more mandatory realm checks, then all realm check failures are written to the simulation log. Mandatory realm checks where the user SQL statement succeeded are not written to the simulation log. Suppose there are three mandatory realms, and a user SQL statement succeeds with one realm and fails with the other two. Only the two failed realm checks are written to the simulation log.</p>
                        </li>
                        <li><span class="bold">Regular realms only: all are in simulation mode</span><p>Suppose the user is authorized to execute the SQL statement in at least one regular realm. This user should have access to the data, so nothing is written the simulation log.</p>
                           <p>Alternatively, suppose the user is not authorized to execute the SQL statement of any of the regular realms. The simulation log will capture the failed realm authorization failures. Because the failures are recorded, an administrator can then select which realms to which the user should be authorized. The SQL only needs to be authorized in one regular realm to work. Not all regular realms need to be updated to authorize the SQL.</p>
                        </li>
                        <li><span class="bold">Mix of mandatory and regular realms: all are in simulation mode</span><p>In this scenario, you capture the gating realms when a user is rejected. With mandatory and regular realms, the mandatory realms are the gating realms. All mandatory realms must pass the authorization check for the user to gain access. In fact, regular realms could be considered superfluous when mandatory realms protect an object. Therefore, in cases where there are mandatory and regular realms, only mandatory realms should be logged into the simulation log . It does not matter whether the user was authorized to the regular realm or not. In this case, only mandatory realms are used and they are all in simulation mode. </p>
                           <p>Suppose the user is authorized to execute a SQL statement in all mandatory realms. In this case, nothing is captured in the simulation log table. Even though the user may succeed or fail in one or more regular realms, nothing about regular realm failure is captured.</p>
                           <p>If the user fails one or more mandatory realm checks, then all realm check failures are logged to the simulation log. Mandatory realm checks where the user SQL statement succeeded are not logged. For example, suppose there are three mandatory realms. If the user's SQL statement succeeds with one realm and fails with the other two, then only the two failed realm checks are recorded in the simulation log. No regular realms need to be captured, because for this scenario, it does not matter.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568" name="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568"></a><h4 id="DVADM-GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568" class="sect4">Use Case: New Realms Introduced to Existing Realms</h4>
                  <div>
                     <p>The new realms are in simulation mode and the existing realms are enabled and working. </p>
                     <p>This use case applies only if both simulation mode and enabled realms protect the same object. </p>
                     <ul style="list-style-type: disc;" id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568__UL_MHG_5MW_SFB">
                        <li><span class="bold">New enabled mandatory realms with existing enabled mandatory realms</span><p>This scenario shows some additional mandatory realms for an existing object, which is designed to add more security to the object.</p>
                           <ul style="list-style-type: disc;" id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568__UL_OHC_2PW_SFB">
                              <li>Enabled mandatory realms and mandatory realms in simulation mode are all successful with user's SQL: the SQL executes normally and nothing is written to the simulation log.</li>
                              <li>At least one enabled mandatory realm fails and mandatory realms in simulation mode are successful: the SQL is blocked and nothing is written to the simulation mode log.</li>
                              <li>At least one enabled mandatory realm fails and mandatory realms in simulation mode have one or more failures: the SQL is blocked and all failing mandatory realms in simulation mode are written to the simulation mode log.</li>
                              <li>Enabled mandatory realms are all successful and mandatory realms in simulation mode have at least one failure: the SQL is not blocked, and all failed mandatory realms in simulation mode are written to the simulation log.</li>
                           </ul>
                        </li>
                        <li>New regular realms in simulation mode with existing enabled regular realms: More regular realms are added to a security object to provide new ways for users to access sensitive data. 
                           <ul style="list-style-type: disc;" id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568__UL_IFF_TYW_SFB">
                              <li>At least one enabled regular realm and at least one regular realm in simulation mode are successful: the SQL executes normally with nothing is written to the simulation log.</li>
                              <li>At least one enabled regular realm and all regular realms in simulation mode fail: The SQL statement executes normally, so nothing is written to the simulation log.</li>
                              <li>All enabled regular realms and regular realms in simulation mode all fail: the SQL statement is blocked and all regular realms in simulation mode are written to the simulation log. You must evaluate which regular realms to authorize to if necessary. Oracle Database Vault will block the SQL and not record the regular realms in simulation mode in the simulation log because the enabled regular realms would have blocked it anyway. This must change because a user may have added a new realm to authorize the SQL in this use case. There is no way to tell what happened if the new SQL should have worked, but is blocked by all regular realms in simulation mode as well (when one of the regular realms in simulation mode was designed to allow it to work). This would simulate an entry into the audit log for this situation.</li>
                              <li>Enabled regular realms all fail and at least one regular realm in simulation mode successful: the SQL is blocked and nothing is written to the simulation log.</li>
                           </ul>
                        </li>
                        <li>New regular realm in simulation mode with existing enabled regular realm: This is a do-nothing situation. The enabled regular realm will continue to control the objects and the new regular realm in simulated mode will have no impact if they are enabled or not. Because there is no impact, no simulation logs are generetaed. </li>
                        <li>New mandatory realm in simulated mode with an existing enabled regular realm: While the enabled regular realm will control the objects for now, when the new mandatory realm in simulated mode is enabled, then they  will have full control over the objects with no control by the older enabled regular realm. So, simulation logs will be generated for all mandatory realms in simulated mode that fail the authorization checks. This is the same as the use case as with when mandatory realms are all in simulated mode.</li>
                        <li>New regular realms in simulated mode with existing enabled mandatory realms in simulated mode and an enabled regular realm: the enabled mandatory realms will be the deciding realms for whether the new simulated mode regular realms are added to the existing enabled regular realms in the system. This is the same as the use case with a new regular realm in simulation mode with existing enabled regular realm. Nothing will be written to the simulation log.</li>
                        <li>New mandatory realms in simulated mode with existing enabled mandatory and regular realms: the enabled regular realms can be ignored. This use case is the same as the use case with new simulated mode mandatory realms with existing enabled mandatory realms.</li>
                        <li>Mix of new simulated mode mandatory and regular realms with existing enabled mandatory and regular realms: ignore all enabled and simulated mode regular realms. This is simply adding more mandatory realms to an existing object. This use case is the same as the use case with new simulated mandatory realms and enabled mandatory realms. </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230" name="GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230"></a><h4 id="DVADM-GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230" class="sect4">Use Case: New Objects Added to a Realm</h4>
                  <div>
                     <p>You can add new objects to an existing realm and then test it by using simulation mode, without removing the current realm protections.</p>
                     <p>Oracle recommends that you create a duplicate realm in simulation mode for the new objects with the same authorized users and rule sets. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-11157AE0-2A52-4BC5-ACD1-42D049907534" name="GUID-11157AE0-2A52-4BC5-ACD1-42D049907534"></a><h4 id="DVADM-GUID-11157AE0-2A52-4BC5-ACD1-42D049907534" class="sect4">Use Case: Removing Objects from a Realm</h4>
                  <div>
                     <p>You can remove objects from a realm by using the <code class="codeph">DBMS_MACADM.DELETE_OBJECT_FROM_REALM</code> procedure. 
                     </p>
                     <p>However, because you are removing security controls for an existing object, there is no need to use simulation mode. All you need to do is remove the object from the realm. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A" name="GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A"></a><h4 id="DVADM-GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A" class="sect4">Use Case: Adding an Authorized User to a Realm</h4>
                  <div>
                     <p>You can add authorized users to a realm by using the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure.
                     </p>
                     <p>In this scenario, you are loosening security controls by adding more users. You do not need to set simulation mode; just add the users. If you do not know which authorized users to add and want to use simulation mode to find out, then Oracle Database Vault enables all users to access the objects. In this case, you must put the original realm in simulation mode. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652" name="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652"></a><h4 id="DVADM-GUID-152BA89E-73F2-4406-8C31-A1643EB5A652" class="sect4">Use Case: Removing an Authorized User from a Realm</h4>
                  <div>
                     <p>You can remove an authorized user from a realm by using the <code class="codeph">DBMS_MACADM.DELETE_AUTH_FROM_REALM</code> procedure. 
                     </p>
                     <p>In this scenario, you may or may not have dropped a user from a realm authorization list. However, you want to see if the dropped user can still access the realm for authorized activities, as follows: </p>
                     <ol id="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652__OL_Y45_LMG_5FB">
                        <li>Clone the realm.</li>
                        <li>In the original realm, remove the user that you want to drop and then add this user to the cloned realm. </li>
                        <li>Configure auditing on the cloned realm so that the user that you want to drop is visible in the audit records. 
                           <ul style="list-style-type: disc;" id="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652__UL_PG2_WNG_5FB">
                              <li>If the cloned realm is a regular realm, then use the <code class="codeph">DBMS_MACADM.UPDATE_REALM</code> procedure to set the <code class="codeph">audit_options</code> parameter to <code class="codeph">DBMS_MACUTL.G_REALM_AUDIT_SUCCESS</code>. Alternatively, create a unified audit policy to capture the user's successful activity.
                              </li>
                              <li>If the cloned realm is a mandatory realm, then create a unified audit policy to capture the user's successful activity.</li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116" name="GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116"></a><h4 id="DVADM-GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116" class="sect4">Use Case: Testing New Factors in a Realm</h4>
                  <div>
                     <p>If a realm has new factors, you can use simulation mode to test if there have been changes to the factors. </p>
                     <p>In this scenario, there are two use cases: </p>
                     <ul style="list-style-type: disc;" id="GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116__UL_KBK_YPG_5FB">
                        <li><span class="bold">There have been changes to the application or infrastructure that will force a change to the factors.</span> 
                           <p>In this scenario, enable the (regular) realm and then remove the factors from the authorized users. Then create a mandatory realm for the same protected objects in simulation mode with no authorized users. The regular realm will protect the objects from unauthorized users while the mandatory realm in simulation mode will capture all access, along with any information about the factors. You can check  the simulation log for each user to come up with new factors which then can be added to the mandatory realm in simulation mode. This will ensure that the mandatory realm is clean before you migrate it to the original regular realm.  </p>
                        </li>
                        <li><span class="bold">There have been no changes to the application or infrastructure, but changes are being made to the factors, such as new factors added or existing factors removed. </span><p>In this scenario, the concern is about how to configure the addition of new factors. Dropping factors lowers the security profile, so all you need to do is to drop the factors from the rule set. When you add a factor, you must clone a realm from the original and then configure it to be in simulation mode. Add the new factors to this cloned realm. If the simulation log records are clean for this cloned realm, then you can safely add factors to the original realm. </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79" name="GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79"></a><h4 id="DVADM-GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79" class="sect4">Use Case: Testing Changes to an Existing Command Rule While Keeping the Original Command Control Enabled</h4>
                  <div>
                     <p>You can test changes to an existing command rule while keeping the original command control enabled. </p>
                     <p>When you update a command rule, ideally you should test it before the changes are enabled and in production. For a new command rule, you only need to put it in simulation mode. However, an existing command rule is already enabled and offering protection. In this case, Oracle recommends that you create an audit policy to capture what the original command rule was doing and set an alert for it. The audit policy will not prevent the SQL from taking place, but at least you will have an alert for it. After you are satisfied that the original command rule works correctly, you can put the updated command rule into simulation mode and then test it. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle provides a set of use cases and guidelines for logging realms in simulation mode.">Use Cases and Guidelines for Logging Realms in Simulation Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='04714.optimizing-performance-of-cplusplus-applications.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Optimizing Performance of C++ Applications</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96205-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-xa-library.html" title="Previous" type="text/html">
      <link rel="next" href="occi-application-programing-interface.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNCPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-xa-library.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="occi-application-programing-interface.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Optimizing Performance of C++ Applications</li>
            </ol>
            <a id="GUID-0901F6D0-F5DE-462A-A367-EE2C2AA55698" name="GUID-0901F6D0-F5DE-462A-A367-EE2C2AA55698"></a><a id="LNCPP012"></a>
            
            <h2 id="LNCPP-GUID-0901F6D0-F5DE-462A-A367-EE2C2AA55698" class="sect2"><span class="enumeration_chapter">12 </span> Optimizing Performance of C++ Applications
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes a few suggestions that lead to better performance for your OCCI custom applications.</p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-B822003D-DCE2-4704-9D83-4BF401B26882">About Transparent Application Failover</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-7191B319-0109-446E-96A1-65AB696C8C99">About Connection Sharing</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-96783A66-4018-4CC4-9D9A-36075BB3FF1A">About Application-Managed Data Buffering</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-F6AD3A0C-7DD2-4362-8BFE-F4718D26817C">Using the Array Fetch Using next() Method</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-B406B496-9395-4D76-899F-71E414B68FB9">Modifying Rows Iteratively</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61" title="Oracle Connection Manager in Traffic Director Mode is a proxy that is placed between supported database clients and database instances.">About Using Oracle Connection Manager in Traffic Director Mode</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-5F06D230-7248-4BB0-AC4C-0BC42AC6B3AC">About Run-time Load Balancing of the Stateless Connection Pool</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-8ADCAB82-EBBE-43C0-BECE-4E74687A166D">About Fault Diagnosability</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-740894FB-9DAE-4F98-BA70-0C4E04479200">Using Client Result Cache</a></p>
                  </li>
                  <li>
                     <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-E8DD631B-9AFF-49F5-BFBA-ED55001DB052">About Client-Side Deployment Parameters and Auto Tuning</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-0901F6D0-F5DE-462A-A367-EE2C2AA55698__GUID-EC4BD1C4-6E53-41FC-9630-B47F3073E041">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI Application Programming Interface</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNCPP20011"></a><div class="props_rev_3"><a id="GUID-B822003D-DCE2-4704-9D83-4BF401B26882" name="GUID-B822003D-DCE2-4704-9D83-4BF401B26882"></a><h3 id="LNCPP-GUID-B822003D-DCE2-4704-9D83-4BF401B26882" class="sect3"><span class="enumeration_section">12.1 </span>About Transparent Application Failover
               </h3>
               <div>
                  <p>OCCI <span class="bold">Transparent Application Failover</span> (TAF) enables OCCI to be more robust in handling database instance failures in distributed applications at run time. If a server node becomes unavailable, applications automatically reconnect to another surviving node.
                  </p>
                  <p>TAF occurs when the client application, during a roundtrip operation, detects that the database instance is down. It establishes a connection to the backup database configured for TAF. This backup can be another node in an Oracle RAC configuration, a hot standby database, or the same database instance itself. </p>
                  <p>The OCCI/OCI API responsible for the roundtrip on the failed connection will typically return one of the following errors:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">ORA-25401: can not continue fetches</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ORA-25402: transaction must roll back</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ORA-25408: can not safely replay call</code></p>
                     </li>
                  </ul>
                  <p>The new connection is may be used for subsequent application requests and for any   ongoing work that must be restarted.Idle connections in the application are not affected.</p>
                  <p>Some design options should be considered when including Transparent Application Failover in an application:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Because of the delays inherent to failover processing, the design of the application may include a notice to the user that a failover is in progress and that normal operation should resume shortly. </p>
                     </li>
                     <li>
                        <p>If the session on the initial instance received <code class="codeph">ALTER SESSION</code> commands before the failover began, they are not automatically replayed on the second instance.
                        </p>
                        <p>Consequently, the developer may want to replay these <code class="codeph">ALTER SESSION</code> commands on the second instance.
                        </p>
                     </li>
                  </ul>
                  <p>It is the user's responsibility to track changes to the <code class="codeph">SESSION</code> parameters.
                  </p>
                  <p>To address these problems, the application can register a failover callback function. After a failover, the callback function is invoked at different times while reestablishing the user's session. </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The first call to the callback function occurs when Oracle first detects an instance connection loss. This callback is intended to allow the application to inform the user of an upcoming delay. </p>
                     </li>
                     <li>
                        <p>If failover is successful, a second call to the callback function occurs when the connection is reestablished and usable. At this time the client may want to replay <code class="codeph">ALTER SESSION</code> commands and inform the user that failover has happened. Note that you must keep track of <code class="codeph">SESSION</code> parameter changes and then replay them after the failover is complete.
                        </p>
                        <p>If failover is unsuccessful, then the callback function is called to inform the application that failover cannot take place.</p>
                     </li>
                     <li>
                        <p>An initial attempt at failover may not always successful. The failover callback should return <code class="codeph">FO_RETRY</code> to indicate that the failover should be attempted again.
                        </p>
                        <div class="infoboxnotealso" id="GUID-B822003D-DCE2-4704-9D83-4BF401B26882__GUID-9E243EF4-4174-48DD-944B-E7A5B6585D4F">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Definition of <code class="codeph">FailOverType</code> and <code class="codeph">FailOverEventType</code> in <a href="connection-class.html#GUID-412D06D3-7636-4A32-AF24-534099F989D0__BBAEAHAH" title="First column lists the attribute used by the class, the second column describes the options available to each attribute">Table 13-11</a> in <a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI Application Programming Interface</a> 
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../netag/enabling-advanced-features.html#NETAG455" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for more detailed information about application failover.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-D8B753E9-89F6-46F1-BB03-4B6836DBD138">Using Transparent Application Failover</a></p>
                        </li>
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-6729D045-E737-4BE9-A50D-6AB39243DA5F">About Objects and Transparent Application Failover</a></p>
                        </li>
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-146ED846-BA38-42BC-8F71-F88BD9631444">Using Connection Pooling and Transparent Application Failover</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20477"></a><div class="props_rev_3"><a id="GUID-D8B753E9-89F6-46F1-BB03-4B6836DBD138" name="GUID-D8B753E9-89F6-46F1-BB03-4B6836DBD138"></a><h4 id="LNCPP-GUID-D8B753E9-89F6-46F1-BB03-4B6836DBD138" class="sect4"><span class="enumeration_section">12.1.1 </span>Using Transparent Application Failover
                  </h4>
                  <div>
                     <div class="section">
                        <p>To enable TAF, the connect string has to be configured for failover and registered on <code class="codeph">Connection</code> (created from <code class="codeph">Environment</code>, <code class="codeph">ConnectionPool</code> and <code class="codeph">StatelessConnectionPool</code>). To register the callback function, use the <a href="connection-class.html#GUID-412D06D3-7636-4A32-AF24-534099F989D0">Connection Class</a> interface <a href="connection-class.html#GUID-0C0A528D-6669-490E-BC2E-9A8183D4F95B">setTAFNotify()</a>:
                        </p><pre class="oac_no_warn" dir="ltr">void Connection::setTAFNotify(
&nbsp;&nbsp;&nbsp;int (*notifyFn)(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Environment *env,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection *conn,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *ctx,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FailOverType foType,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FailOverEventType foEvent),
&nbsp;&nbsp;&nbsp;void *ctxTAF);
</pre><p>Note that TAF support for <code class="codeph">ConnectionPool</code>s does not include <code class="codeph">BACKUP</code> and <code class="codeph">PRECONNECT</code> clauses; these should not be used in the connect string.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNCPP20478"></a><div class="props_rev_3"><a id="GUID-6729D045-E737-4BE9-A50D-6AB39243DA5F" name="GUID-6729D045-E737-4BE9-A50D-6AB39243DA5F"></a><h4 id="LNCPP-GUID-6729D045-E737-4BE9-A50D-6AB39243DA5F" class="sect4"><span class="enumeration_section">12.1.2 </span>About Objects and Transparent Application Failover
                  </h4>
                  <div>
                     <p>Transparent application failover works with the OCCI navigational and associative access models and the object cache. In a non-Oracle RAC setup, you must ensure that the object type definitions and object OIDs in primary and backup instances are identical.</p>
                     <p>If the application receives <code class="codeph">ORA-25402: transaction must roll back</code> error after the failover, then it must initiate a rollback to correctly reset the object cache on the client. If a transaction has not started before the failover, the application should still initiate a rollback after the failover to refresh the objects on the client object cache from the new instance.
                     </p>
                  </div>
               </div><a id="LNCPP21907"></a><a id="LNCPP20479"></a><div class="props_rev_3"><a id="GUID-146ED846-BA38-42BC-8F71-F88BD9631444" name="GUID-146ED846-BA38-42BC-8F71-F88BD9631444"></a><h4 id="LNCPP-GUID-146ED846-BA38-42BC-8F71-F88BD9631444" class="sect4"><span class="enumeration_section">12.1.3 </span>Using Connection Pooling and Transparent Application Failover
                  </h4>
                  <div>
                     <div class="section">
                        <p>If the transparent application failover feature is activated, connections created in a connection pool are also failed over. The application failover callback must be specified for each connection obtained from the connection pool; these connections are failed over when used after the primary instance failure.</p>
                        <p>Note that connections in a custom connection pool must be explicitly cleaned and repaired. Consider an application that has 500 connections in a pool; 10 of the connections are busy (doing a round-trip) and 490 are free or idle. If the database instance fails, then TAF will work on 10 active connections, and client requests on these connections must be restarted. When each of the other 490 connections are picked up by the application, TAF is performed and OCCI returns one of error codes <code class="codeph">ORA-25401</code>, <code class="codeph">ORA-24502</code>, or <code class="codeph">ORA-25408</code>, forcing a restart of the user request. The application can avoid these errors on the 490 idle connections by repairing or purging these connections by using the knowledge that TAF was previously activated on 10 connections in the connection pool.
                        </p>
                        <p>To repair connections in OCCI, use the <a href="connection-class.html#GUID-412D06D3-7636-4A32-AF24-534099F989D0">Connection Class</a> interface <a href="connection-class.html#GUID-D158EE4A-59B4-46F6-82FF-F26E6B07C1B7">getServerVersion()</a>, a light-weight, data-neutral database call for starting TAF on connections to failed instances:
                        </p><pre class="oac_no_warn" dir="ltr">string getServerVersion() const;
</pre><p>In the OCCI TAF callback, applications may invoke <a href="connection-class.html#GUID-D158EE4A-59B4-46F6-82FF-F26E6B07C1B7">getServerVersion()</a> on idle connections in the custom pool, to start and complete failover for these connections.
                        </p>
                        <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-146ED846-BA38-42BC-8F71-F88BD9631444__BBACAHGD">Example 12-1</a> demonstrates how to use OCCI for TAF callbacks and for repairing bad connections. Note that the example does not show custom pool data structure or mutexing and concurrency control.
                        </p>
                        <p>Note that TAF behavior is the same for standalone connections and connections in a custom connection pool.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-146ED846-BA38-42BC-8F71-F88BD9631444__BBACAHGD">
                        <p class="titleinexample">Example 12-1 How to Enable TAF for Connection Pooling</p><pre class="oac_no_warn" dir="ltr">#include &lt;occi.h&gt;
#include &lt;iostream&gt;
#include &lt;time.h&gt;
 
using namespace std;
using namespace oracle::occi;
 
//Application custom pool of 3 connections
Environment *env;
Connection *conn1,*conn2,*conn3;
bool conn1free,conn2free,conn3free;
bool repairing = false;
 
int taf_callback(Environment *env, Connection *conn, void *ctx,  
  Connection::FailOverType foType, Connection::FailOverEventType foEvent)
{
   cout &lt;&lt; "TAF callback for connection " &lt;&lt; conn &lt;&lt; endl;

   if(foEvent == Connection::FO_ERROR)
   {
      cout &lt;&lt; "Retrying" &lt;&lt; endl;
      return FO_RETRY;
   }
 
   if (foEvent ==  Connection::FO_END)
   {
     cout &lt;&lt; "TAF complete for connnection " &lt;&lt; conn &lt;&lt; endl;
     if (repairing == false)
     {
      repairing = true;
      cout &lt;&lt; "repairing other idle connections" &lt;&lt; endl;
   
      //ignore errors during TAF
      try
      {
         if (conn1free) conn1-&gt;getServerVersion();
      }
      catch (...)
      {
      }
      try
      {
         if (conn2free) conn2-&gt;getServerVersion();
      }
      catch (...)
      {
      }
      try
      {
         if (conn3free) conn3-&gt;getServerVersion();
      }
      catch (...)
      {
      }
      repairing = false;
     }//if
   }//if
 
   return 0; //continue failover
}
 
main()
{
try
{ 
env = Environment::createEnvironment(Environment::THREADED_MUTEXED);
//open 3 connections;
 conn1 = env-&gt;createConnection("hr","<span class="italic">password</span>","inst1_failback");
 conn2 = env-&gt;createConnection("hr","<span class="italic">password</span>","inst1_failback");
 conn3 = env-&gt;createConnection("hr","<span class="italic">password</span>","inst1_failback");
 
//all connections are 'free'
conn1free = conn2free = conn3free = true;
 
//set TAF callbacks on all connection
conn1-&gt;setTAFNotify(taf_callback,NULL);
conn2-&gt;setTAFNotify(taf_callback,NULL);
conn3-&gt;setTAFNotify(taf_callback,NULL);
 
//use 1 connection
conn1free=false;
cout &lt;&lt; "Using conn1" &lt;&lt; endl;
Statement *stmt = conn1-&gt;createStatement ("select * from employees");
ResultSet *rs  = stmt-&gt;executeQuery();
while (rs-&gt;next())
{
   cout &lt;&lt; (rs-&gt;getString(2)) &lt;&lt; endl;
}
stmt-&gt;closeResultSet(rs);
conn1-&gt;terminateStatement(stmt);
 
cout &lt;&lt; "Shutdown and restart the database" &lt;&lt; endl;
string buf;
cin &gt;&gt; buf;
 
Statement *stmt2;
try
{
   cout &lt;&lt; "Trying a update on EMP table" &lt;&lt; endl;
   stmt2 = conn1-&gt;createStatement("delete from employees");
   stmt2-&gt;executeUpdate();
}
catch (SQLException &amp;ex)
{
   cout &lt;&lt; "Update EMPLOYEES returned error : " &lt;&lt; ex.getMessage() &lt;&lt; endl;
   cin &gt;&gt; buf;
}
 
cout &lt;&lt; "Done" &lt;&lt; endl;
env-&gt;terminateConnection(conn1);
env-&gt;terminateConnection(conn2);
env-&gt;terminateConnection(conn3);
Environment::terminateEnvironment(env);
}
catch(SQLException &amp;ex)
{
cout &lt;&lt; ex.getMessage() &lt;&lt; endl;
}
}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNCPP1202"></a><div class="props_rev_3"><a id="GUID-7191B319-0109-446E-96A1-65AB696C8C99" name="GUID-7191B319-0109-446E-96A1-65AB696C8C99"></a><h3 id="LNCPP-GUID-7191B319-0109-446E-96A1-65AB696C8C99" class="sect3"><span class="enumeration_section">12.2 </span>About Connection Sharing
               </h3>
               <div>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-E81F6929-F527-4FF3-A38C-58FCC384964E">Introduction to Thread Safety</a></p>
                     </li>
                     <li>
                        <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-2462E0CD-D58A-405C-B7D6-E725ED5147AE">Implementing Thread Safety</a></p>
                     </li>
                     <li>
                        <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-A1BDEA6E-2FB9-4E0F-B15B-83F1A56419A3">About Serialization</a></p>
                     </li>
                     <li>
                        <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-11EFCB7F-D572-43D8-A345-4737BD09E9EF">Operating System Considerations</a></p>
                     </li>
                  </ul>
               </div><a id="LNCPP20480"></a><div class="props_rev_3"><a id="GUID-E81F6929-F527-4FF3-A38C-58FCC384964E" name="GUID-E81F6929-F527-4FF3-A38C-58FCC384964E"></a><h4 id="LNCPP-GUID-E81F6929-F527-4FF3-A38C-58FCC384964E" class="sect4"><span class="enumeration_section">12.2.1 </span>Introduction to Thread Safety
                  </h4>
                  <div>
                     <p>Threads are lightweight processes that exist within a larger process. Threads each share the same code and data segments, but have their own program counters, system registers, and stack. Global and static variables are common to all threads, and a mutual exclusivity mechanism may be required to manage access to these variables from multiple threads within an application. </p>
                     <p>Once spawned, threads run asynchronously to one another. They can access common data elements and make OCCI calls in any order. Because of this shared access to data elements, a mechanism is required to maintain the integrity of data being accessed by multiple threads.   The mechanism to manage data access takes the form of mutexes (mutual exclusivity locks), which ensure that no conflicts arise between multiple threads that are accessing shared resources within an application. In OCCI, mutexes are granted on an OCCI environment basis.</p>
                     <p>This thread safety feature of the Oracle database server and OCCI library enables developers to use OCCI in a multithreaded application with these added benefits: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Multiple threads of execution can make OCCI calls with the same result as successive calls made by a single thread. </p>
                        </li>
                        <li>
                           <p>When multiple threads make OCCI calls, there are no side effects between threads. </p>
                        </li>
                        <li>
                           <p>Even if you do not write a multithreaded program, you do not pay any performance penalty for including thread-safe OCCI calls. </p>
                        </li>
                        <li>
                           <p>Use of multiple threads can improve program performance. You can discern gains on multiprocessor systems where threads run concurrently on separate processors, and on single processor systems where overlap can occur between slower operations and faster operations. </p>
                        </li>
                     </ul>
                     <p>In addition to client/server applications, where the client can be a multithreaded program, thread safety is typically used in three-tier or client/agent/server architectures. In this architecture, the client is concerned only with presentation services. The agent (or application server) processes the application logic for the client application. Typically, this relationship is a many-to-one relationship, with multiple clients sharing the same application server. </p>
                     <p>The server tier in the three-tier architecture is an Oracle database server. The applications server (agent) supports multithreading, with each thread serving a separate client application. In an Oracle environment, this middle-tier application server is an OCCI or precompiler program. </p>
                  </div>
               </div><a id="LNCPP20481"></a><div class="props_rev_3"><a id="GUID-2462E0CD-D58A-405C-B7D6-E725ED5147AE" name="GUID-2462E0CD-D58A-405C-B7D6-E725ED5147AE"></a><h4 id="LNCPP-GUID-2462E0CD-D58A-405C-B7D6-E725ED5147AE" class="sect4"><span class="enumeration_section">12.2.2 </span>Implementing Thread Safety
                  </h4>
                  <div>
                     <div class="section">
                        <p>To take advantage of thread safety by using OCCI, an application must be running in a thread-safe operating system. Then the application must inform OCCI that the application is running in multithreaded mode by specifying <code class="codeph">THREADED_MUTEXED</code> or <code class="codeph">THREADED_UNMUTEXED</code> for the mode parameter of the <code class="codeph">createEnvironment()</code> method. For example, to turn on mutual exclusivity locking, issue the following statement: 
                        </p><pre class="oac_no_warn" dir="ltr">Environment *env = Environment::createEnvironment( 
          Environment::THREADED_MUTEXED);</pre><p>Note that once <code class="codeph">createEnvironment</code> is called with <code class="codeph">THREADED_MUTEXED</code> or <code class="codeph">THREADED_UNMUTEXED</code>, all subsequent calls to the <code class="codeph">createEnvironment</code> method must also be made with <code class="codeph">THREADED_MUTEXED</code> or <code class="codeph">THREADED_UNMUTEXED</code> modes.
                        </p>
                        <p>If a multithreaded application is running in a thread-safe operating system, then the OCCI library manages mutexes for the application on a for each-OCCI-environment basis. However, you can override this feature and have your application maintain its own mutex scheme. This is done by specifying a mode value of <code class="codeph">THREADED_UNMUTEXED</code> to the <code class="codeph">createEnvironment()</code> method.
                        </p>
                        <p>Applications that run on non-thread-safe platforms should not pass a value of <code class="codeph">THREADED_MUTEXED</code> or <code class="codeph">THREADED_UNMUTEXED</code> to the <code class="codeph">createEnvironment()</code> method.
                        </p>
                        <p>If an application is single threaded, regardless of whether the platform is thread safe, the application should pass a value of <code class="codeph">Environment::DEFAULT</code> to the <code class="codeph">createEnvironment()</code> method. This is also the default value for the mode parameter. Single threaded applications which run in <code class="codeph">THREADED_MUTEXED</code> mode may incur performance degradation.
                        </p>
                        <p>OCCI does not support nonblocking mode.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNCPP20482"></a><div class="props_rev_3"><a id="GUID-A1BDEA6E-2FB9-4E0F-B15B-83F1A56419A3" name="GUID-A1BDEA6E-2FB9-4E0F-B15B-83F1A56419A3"></a><h4 id="LNCPP-GUID-A1BDEA6E-2FB9-4E0F-B15B-83F1A56419A3" class="sect4"><span class="enumeration_section">12.2.3 </span>About Serialization
                  </h4>
                  <div>
                     <p>As an application programmer, you have two basic options regarding concurrency in a multithreaded application:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-747EE0AB-EED6-4B03-9029-190AF2C0B609">Automatic Serialization</a>, in which you use OTIS's transparent mechanisms
                           </p>
                        </li>
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-9A71755F-9EC4-4F00-AED0-B7CBBF96DFEF">Application-Provided Serialization</a>, in which you manage the contingencies involved in maintaining multiple threads
                           </p>
                        </li>
                     </ul>
                  </div><a id="LNCPP20483"></a><div class="props_rev_3"><a id="GUID-747EE0AB-EED6-4B03-9029-190AF2C0B609" name="GUID-747EE0AB-EED6-4B03-9029-190AF2C0B609"></a><h5 id="LNCPP-GUID-747EE0AB-EED6-4B03-9029-190AF2C0B609" class="sect5"><span class="enumeration_section">12.2.3.1 </span>Automatic Serialization
                     </h5>
                     <div>
                        <p>In cases where there are multiple threads operating on objects (connections and connection pools) derived from an OCCI environment, you can elect to let OCCI serialize access to those objects. The first step is to pass a value of <code class="codeph">THREADED_MUTEXED</code> to the <code class="codeph">createEnvironment</code> method. At this point, the OCCI library automatically acquires a mutex on thread-safe objects in the environment. 
                        </p>
                        <p>When the OCCI environment is created with <code class="codeph">THREADED_MUTEXED</code> mode, then only the <code class="codeph">Environment</code>, <code class="codeph">Map</code>, <code class="codeph">ConnectionPool</code>, <code class="codeph">StatelessConnectionPool</code> and <code class="codeph">Connection</code> objects are thread-safe. That is, if two threads make simultaneous calls on one of these objects, then OCCI serializes them internally. However, note that all other OCCI objects, such as <code class="codeph">Statement</code>, <code class="codeph">ResultSet</code>, <code class="codeph">SQLException</code>, <code class="codeph">Stream</code>, and so on, are not thread-safe as, applications should not operate on these objects simultaneously from multiple threads.
                        </p>
                        <p>Note that the bulk of processing for an OCCI call happens on the server, so if two threads that use OCCI calls go to the same connection, then one of them could be blocked while the other finishes processing at the server.</p>
                     </div>
                  </div><a id="LNCPP20484"></a><div class="props_rev_3"><a id="GUID-9A71755F-9EC4-4F00-AED0-B7CBBF96DFEF" name="GUID-9A71755F-9EC4-4F00-AED0-B7CBBF96DFEF"></a><h5 id="LNCPP-GUID-9A71755F-9EC4-4F00-AED0-B7CBBF96DFEF" class="sect5"><span class="enumeration_section">12.2.3.2 </span>Application-Provided Serialization
                     </h5>
                     <div>
                        <p>In cases where there are multiple threads operating on objects derived from an OCCI environment, you can chose to manage serialization. The first step is to pass a value of <code class="codeph">THREADED_UNMUTEXED</code> for the <code class="codeph">createEnvironment</code> mode. In this case the application must mutual exclusively lock OCCI calls made on objects derived from the same OCCI environment. This has the advantage that the mutex scheme can be optimized based on the application design to gain greater concurrency.
                        </p>
                        <p>When an OCCI environment is created in this mode, OCCI recognizes that the application is running in a multithreaded application, but that OCCI need not acquire its internal mutexes. OCCI assumes that all calls to methods of objects derived from that OCCI environment are serialized by the application. You can achieve this two different ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Each thread has its own environment. That is, the environment and all objects derived from it (connections, connection pools, statements, result sets, and so on) are not shared across threads. In this case your application need not apply any mutexes.</p>
                           </li>
                           <li>
                              <p>If the application shares an OCCI environment or any object derived from the environment across threads, then it must serialize access to those objects (by using a mutex, and so on) such that only one thread is calling an OCCI method on any of those objects.</p>
                           </li>
                        </ul>
                        <p>In both cases, no mutexes are acquired by OCCI. You must ensure that only one OCCI call is in process on any object derived from the OCCI environment at any given time when <code class="codeph">THREADED_UNMUTEXED</code> is used.
                        </p>
                        <p>OCCI is optimized to reuse objects as much as possible. Since each environment has its own heap, multiple environments result in increased consumption of memory. Having multiple environments may imply duplicating work regarding connections, connection pools, statements, and result set objects. This results in further memory consumption.</p>
                        <p>Having multiple connections to the server results in more resource consumption on both the server and the network. Having multiple environments normally entails more connections.</p>
                     </div>
                  </div>
               </div><a id="LNCPP21906"></a><div class="props_rev_3"><a id="GUID-11EFCB7F-D572-43D8-A345-4737BD09E9EF" name="GUID-11EFCB7F-D572-43D8-A345-4737BD09E9EF"></a><h4 id="LNCPP-GUID-11EFCB7F-D572-43D8-A345-4737BD09E9EF" class="sect4"><span class="enumeration_section">12.2.4 </span>Operating System Considerations
                  </h4>
                  <div>
                     <p>Some operating systems provide facilities for spawning processes that allow child processes to reuse states created by their parent process.</p>
                     <p>After a parent process spawns a child process, the child process <span class="italic">must not</span> use the database connection created by the parent. Because SQL*Net expects only one user process to use a particular connection to the database, attempts by the child process to use the same database connection as the parent may cause undesired connection interference, and result in intermittent <code class="codeph">ORA-03137</code> errors.
                     </p>
                     <p>When the application requires multiple concurrent connections, Oracle recommends using threads on platforms that support threading. Oracle supports concurrent connections in both single-threaded and multi-threaded applications.</p>
                     <p>See <span class="q">"<a href="optimizing-performance-of-cplusplus-applications.html#GUID-E81F6929-F527-4FF3-A38C-58FCC384964E">Introduction to Thread Safety</a>"</span> and <span class="q">"<a href="optimizing-performance-of-cplusplus-applications.html#GUID-2462E0CD-D58A-405C-B7D6-E725ED5147AE">Implementing Thread Safety</a>"</span> for more information about threads.
                     </p>
                     <p>For improving performance with many concurrently opened connections, see <span class="q">"<a href="accessing-oracle-database-using-cplusplus.html#GUID-753C36CE-E6A0-4F0D-B85E-C253EB916C8D">About Pooling Connections</a>"</span>.
                     </p>
                  </div>
               </div>
            </div><a id="LNCPP1203"></a><div class="props_rev_3"><a id="GUID-96783A66-4018-4CC4-9D9A-36075BB3FF1A" name="GUID-96783A66-4018-4CC4-9D9A-36075BB3FF1A"></a><h3 id="LNCPP-GUID-96783A66-4018-4CC4-9D9A-36075BB3FF1A" class="sect3"><span class="enumeration_section">12.3 </span>About Application-Managed Data Buffering
               </h3>
               <div>
                  <p>When you provide data for bind parameters by the <code class="codeph">set</code><span class="italic">xxx</span> methods in parameterized statements, the values are copied into an internal data buffer, and the copied values are then provided to the database server for insertion. To reduce overhead of copying <code class="codeph">string</code> type data that is available in user buffers, use the <a href="resultset-class.html#GUID-98BF5B63-A834-419B-927B-7F02E9ECF1B3">setDataBuffer()</a> and <a href="resultset-class.html#GUID-1535D185-F592-4B90-B358-998EDC72094A">next()</a> methods of the <a href="resultset-class.html#GUID-9E0C0A68-57B7-4C77-8865-A306BF6953CA">ResultSet Class</a> and the <a href="statement-class.html#GUID-9D152584-D72E-42AE-A3CC-3C6A4F35C11B">execute()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a>.
                  </p>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-0F9A3D45-5912-4AD0-B0FB-DDA8F03C91B5">Using the setDataBuffer() Method</a></p>
                        </li>
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-D689DB14-F381-4874-9200-8705FCA00CFC">Using the executeArrayUpdate() Method</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20485"></a><div class="props_rev_3"><a id="GUID-0F9A3D45-5912-4AD0-B0FB-DDA8F03C91B5" name="GUID-0F9A3D45-5912-4AD0-B0FB-DDA8F03C91B5"></a><h4 id="LNCPP-GUID-0F9A3D45-5912-4AD0-B0FB-DDA8F03C91B5" class="sect4"><span class="enumeration_section">12.3.1 </span>Using the setDataBuffer() Method
                  </h4>
                  <div>
                     <div class="section">
                        <p>For high performance applications, OCCI provides the <code class="codeph">setDataBuffer</code> method whereby the data buffer is managed by the application. The following example shows the <a href="resultset-class.html#GUID-98BF5B63-A834-419B-927B-7F02E9ECF1B3">setDataBuffer()</a> method: 
                        </p><pre class="oac_no_warn" dir="ltr">void setDataBuffer(int paramIndex,
&nbsp;&nbsp;&nbsp;void *buffer,
&nbsp;&nbsp;&nbsp;Type type,
&nbsp;&nbsp;&nbsp;sb4 size,
&nbsp;&nbsp;&nbsp;ub2 *length,
&nbsp;&nbsp;&nbsp;sb2 *ind = NULL, 
&nbsp;&nbsp;&nbsp;ub2 *rc = NULL); 
</pre><p>The following parameters are used in the previous method example:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">paramIndex</code>: Parameter number
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">buffer</code>: Data buffer containing data
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">type</code>: Type of the data in the data buffer
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">size</code>: Size of the data buffer
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">length</code>: Current length of data in the data buffer
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ind</code>: Indicator information. This indicates whether the data is <code class="codeph">NULL</code> or not. For parameterized statements, a value of <code class="codeph">-1</code> means a <code class="codeph">NULL</code> value is to be inserted. For data returned from callable statements, a value of <code class="codeph">-1</code> means <code class="codeph">NULL</code> data is retrieved.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">rc</code>: Return code. This variable is not applicable to data provided to the <code class="codeph">Statement</code> method. However, for data returned from callable statements, the return code specifies parameter-specific error numbers. 
                              </p>
                           </li>
                        </ul>
                        <p>Not all data types can be provided and retrieved by the <code class="codeph">setDataBuffer()</code> method. For instance, C++ Standard Library strings cannot be provided with the <code class="codeph">setDataBuffer()</code> interface. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-0F9A3D45-5912-4AD0-B0FB-DDA8F03C91B5__GUID-4F095C86-BBAE-47A8-9BF4-7F33B153427E">
                           <p class="notep1">See Also:</p>
                           <p><a href="data-types.html#GUID-62361201-C028-425D-A809-AB0CC01F2F67__CJAFHAAD" title="This table has 4 columns. Column 1 lists external datatypes; column 2 provides a brief description; column 3 lists matching C++ type(s); column 4 lists matching OCCI Types.">Table 5-2</a> in <a href="data-types.html#GUID-90F238BF-BF35-411C-9CB8-3D6A2970729D">Data Types</a> for specific cases
                           </p>
                        </div>
                        <p>There is an important difference between the data provided by the <code class="codeph">set</code><span class="italic">xxx</span><code class="codeph">() </code>methods and <code class="codeph">setDataBuffer()</code> method. When data is copied in the <code class="codeph">set</code><span class="italic">xxx</span><code class="codeph">()</code> methods, the original can change once the data is copied. For example, you can use a <code class="codeph">setString(str1)</code> method, then change the value of <code class="codeph">str1</code> before execute. The value of <code class="codeph">str1</code> that is used is the value at the time <code class="codeph">setString(str1)</code> is called. However, for data provided by the <code class="codeph">setDataBuffer()</code> method, the buffer must remain valid until the execution is completed.
                        </p>
                        <p>If iterative executes or the <code class="codeph">executeArrayUpdate()</code> method is used, then data for multiple rows and iterations can be provided in a single buffer. In this case, the data for the <span class="italic">i</span>th iteration is at <code class="codeph">buffer + (i-1) *size address</code> and the length, indicator, and return codes are at <code class="codeph">*(length + i)</code>, <code class="codeph">*(ind + i)</code>, and <code class="codeph">*(rc + i)</code> respectively.
                        </p>
                        <p>This interface is also meant for use with array executions and callable statements that have array or <code class="codeph">OUT</code> bind parameters. 
                        </p>
                        <p>The same method is available in the <code class="codeph">ResultSet</code> class to retrieve data without re-allocating the buffer for each fetch.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNCPP20487"></a><a id="LNCPP20488"></a><a id="LNCPP20486"></a><div class="props_rev_3"><a id="GUID-D689DB14-F381-4874-9200-8705FCA00CFC" name="GUID-D689DB14-F381-4874-9200-8705FCA00CFC"></a><h4 id="LNCPP-GUID-D689DB14-F381-4874-9200-8705FCA00CFC" class="sect4"><span class="enumeration_section">12.3.2 </span>Using the executeArrayUpdate() Method
                  </h4>
                  <div>
                     <div class="section">
                        <p>If all data is provided with the <code class="codeph">setDataBuffer()</code> methods or output streams (that is, no <code class="codeph">set</code><span class="italic">xxx()</span> methods besides <code class="codeph">setDataBuffer()</code> or <code class="codeph">getStream()</code> are called), then there is a simplified way of doing iterative execution. 
                        </p>
                        <p>In this case, you should not call <code class="codeph">setMaxIterations()</code> and <code class="codeph">setMaxParamSize()</code>. Instead, call the <code class="codeph">setDataBuffer()</code> or <code class="codeph">getStream()</code> method for each parameter with the appropriate size arrays to provide data for each iteration, followed by the <code class="codeph">executeArrayUpdate(int</code> <code class="codeph">arrayLength)</code> method. The <code class="codeph">arrayLength</code> parameter specifies the number of elements provided in each buffer. Essentially, this is same as setting the number of iterations to <code class="codeph">arrayLength</code> and executing the statement. 
                        </p>
                        <p>Since the stream parameters are specified only once, they can be used with array executes as well. However, if any <code class="codeph">set</code><span class="italic">xxx</span><code class="codeph">()</code> methods are used, then the <code class="codeph">addIteration()</code> method is called to provide data for multiple rows. To compare the two approaches, consider <a href="optimizing-performance-of-cplusplus-applications.html#GUID-D689DB14-F381-4874-9200-8705FCA00CFC__CIAEIFHJ">Example 12-2</a> that inserts two employees in the <code class="codeph">employees</code> table: 
                        </p>
                        <p>However, if the first parameter could also be provided through the <code class="codeph">setDataBuffer()</code> interface, then, instead of the <code class="codeph">addIteration()</code> method, you would use the <code class="codeph">executeArrayUpdate()</code> method, as shown in <a href="optimizing-performance-of-cplusplus-applications.html#GUID-D689DB14-F381-4874-9200-8705FCA00CFC__CIAIGGHF">Example 12-3</a>: 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D689DB14-F381-4874-9200-8705FCA00CFC__CIAEIFHJ">
                        <p class="titleinexample">Example 12-2 How to Insert Records Using the addIteration() method</p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(
&nbsp;&nbsp;"insert into departments (department_id, department_name) values(:1, :2)"); 
char dnames[][100] = {"Community Outreach", "University Recruiting"}; 
ub2 dnameLen[2]; 

for (int i = 0; i &lt; 2; i++) 
&nbsp;&nbsp;dnameLen[i] = strlen(dnames[i] + 1);

stmt-&gt;setMaxIterations(2); &nbsp;&nbsp;&nbsp;// set maximum number of iterations 

stmt-&gt;setInt(1, 7369); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// specify data for the first row 
stmt-&gt;setDataBuffer(2, dnames, OCCI_SQLT_STR, sizeof(dnames[0]), dnameLen); 
stmt-&gt;addIteration(); 

stmt-&gt;setInt(1, 7654); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// specify data for the second row 
                              // a setDatBuffer is unnecessary for the second 
                              // bind parameter as data provided through
                              // setDataBuffer is specified only once. 
stmt-&gt;executeUpdate(); 
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D689DB14-F381-4874-9200-8705FCA00CFC__CIAIGGHF">
                        <p class="titleinexample">Example 12-3 How to Insert Records Using the executeArrayUpdate() Method</p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(
&nbsp;&nbsp;"insert into departments (department_id, department_name) values(:1, :2)"); 
char dnames[][100] = {"Community Outreach", "University Recruiting"}; 
ub2 dnameLen[2]; 

for (int i = 0; i &lt; 2; i++) 
&nbsp;&nbsp;dnameLen[i] = strlen(dnames[i] + 1); 

int ids[2] = {7369, 7654}; 
ub2 idLen[2] = {sizeof(ids[0]), sizeof(ids[1])}; 
stmt-&gt;setDataBuffer(1, ids, OCCIINT, sizeof(ids[0]), idLen); 
stmt-&gt;setDataBuffer(2, dnames, OCCI_SQLT_STR, sizeof(dnames[0]), dnameLen); 

stmt-&gt;executeArrayUpdate(2); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// data for two rows is inserted. </pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNCPP20489"></a><a id="LNCPP1204"></a><div class="props_rev_2"><a id="GUID-F6AD3A0C-7DD2-4362-8BFE-F4718D26817C" name="GUID-F6AD3A0C-7DD2-4362-8BFE-F4718D26817C"></a><h3 id="LNCPP-GUID-F6AD3A0C-7DD2-4362-8BFE-F4718D26817C" class="sect3"><span class="enumeration_section">12.4 </span>Using the Array Fetch Using next() Method
               </h3>
               <div>
                  <div class="section">
                     <p>If the application is fetching data with only the <code class="codeph">setDataBuffer()</code> interface or the stream interface, then an array fetch can be executed. The array fetch is implemented through the <code class="codeph">next(</code>) method of the <code class="codeph">ResultSet</code> class. You must process the results obtained through next() before calling it again.
                     </p>
                     <p> This causes up to <span class="italic"><code class="codeph">numRows</code></span> amount of data to be fetched for each column. The buffers specified with the <code class="codeph">setDataBuffer()</code> interface should large enough to hold at least <span class="italic"><code class="codeph">numRows</code></span> of data.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F6AD3A0C-7DD2-4362-8BFE-F4718D26817C__GUID-4F56D45D-D0E1-4A40-BF56-949B04A764CC">
                     <p class="titleinexample">Example 12-4 How to use Array Fetch with a ResultSet</p><pre class="oac_no_warn" dir="ltr">ResultSet *resultSet = stmt-&gt;executeQuery(...);
resultSet-&gt;setDataBuffer(...);
while (resultSet-&gt;next(<span class="italic">numRows</span>) == DATA_AVAILABLE)
&nbsp;&nbsp;&nbsp;process(resultSet-&gt;getNumArrayRows() );
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNCPP20490"></a><a id="LNCPP1205"></a><div class="props_rev_3"><a id="GUID-B406B496-9395-4D76-899F-71E414B68FB9" name="GUID-B406B496-9395-4D76-899F-71E414B68FB9"></a><h3 id="LNCPP-GUID-B406B496-9395-4D76-899F-71E414B68FB9" class="sect3"><span class="enumeration_section">12.5 </span>Modifying Rows Iteratively
               </h3>
               <div>
                  <div class="section">
                     <p>To process batch errors, specify that the <code class="codeph">Statement</code> object is in a <code class="codeph">batchMode</code> of execution using the <a href="statement-class.html#GUID-EF2EE8DD-29C6-4669-BE6C-76173C5DF0A8">setBatchErrorMode()</a> method. Once the <code class="codeph">batchMode</code> is set and a batch update runs, any resulting errors are reported through the <a href="batchsqlexcept-class.html#GUID-C0D03734-0259-41A6-881A-6176820F7249">BatchSQLException Class</a>.
                     </p>
                     <p>The <code class="codeph">BatchSQLException</code> class provides methods that handle batch errors. <a href="optimizing-performance-of-cplusplus-applications.html#GUID-B406B496-9395-4D76-899F-71E414B68FB9__CHDHIIJD">Example 12-5</a> illustrates how batch handling can be implemented within any OCCI application. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B406B496-9395-4D76-899F-71E414B68FB9__CHDHIIJD">
                     <p class="titleinexample">Example 12-5 How to Modify Rows Iteratively and Handle Errors</p>
                     <ol>
                        <li>
                           <p>Create the Statement object and set its batch error mode to <code class="codeph">TRUE</code>.
                           </p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement ("...");
stmt-&gt;setBatchErrorMode (true);
</pre></li>
                        <li>
                           <p>Perform programmatic changes necessary by the application.</p>
                        </li>
                        <li>
                           <p>Update the statement.</p><pre class="oac_no_warn" dir="ltr">try {
&nbsp;&nbsp;updateCount = stmt-&gt;executeUpdate ();
}
</pre></li>
                        <li>
                           <p>Catch and handle any errors generated during the batch insert or update.</p><pre class="oac_no_warn" dir="ltr">catch (BatchSQLException &amp;batchEx)
{
&nbsp;&nbsp;cout&lt;&lt;"Batch Exception: "&lt;&lt;batchEx.what()&lt;&lt;endl;
&nbsp;&nbsp;int errCount = batchEx.getFailedRowCount();
&nbsp;&nbsp;cout &lt;&lt; "Number of rows failed " &lt;&lt; errCount &lt;endl;
&nbsp;&nbsp;for (int i = 0; i &lt; errCount; i++ )
&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;SQLException err = batchEx.getException(i);
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int rowIndex = batchEx.getRowNum(i);
&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;"Row " &lt;&lt; rowIndex &lt;&lt; " failed because of "
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; err.getErrorCode() &lt;&lt; endl; 
&nbsp;&nbsp;}
&nbsp;&nbsp;// take recovery action on the failed rows
}
</pre></li>
                        <li>
                           <p>Catch and handle other errors generated during the statement update. Note that statement-level errors are still thrown as instances of a <code class="codeph">SQLException</code>.
                           </p><pre class="oac_no_warn" dir="ltr">catch( SQLException &amp;ex) // to catch other SQLExceptions.
{
   cout &lt;&lt; "SQLException: " &lt;&lt; e.what() &lt;&lt; endl;
}</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61" name="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61"></a><h3 id="LNCPP-GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61" class="sect3"><span class="enumeration_section">12.6 </span>About Using Oracle Connection Manager in Traffic Director Mode
               </h3>
               <div>
                  <p>Oracle Connection Manager in Traffic Director Mode is a proxy that is placed between supported database clients and database instances.</p>
                  <div class="p">Supported clients from Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and later can connect to Oracle Connection Manager in Traffic Director Mode. Oracle Connection Manager in Traffic Director Mode provides improved high availability (HA) for planned and unplanned database server outages, connection multiplexing support, and load balancing. Support for Oracle Connection Manager in Traffic Director Mode is described in more detail in the following sections
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__MODESOFOPERATION-4FD4C8FE">Modes of Operation</a></p>
                        </li>
                        <li>
                           <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__KEYFEATURES-4FD4D08F">Key Features</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="section" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__MODESOFOPERATION-4FD4C8FE">
                     <p class="subhead2" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__GUID-749BC524-93BC-42F1-B765-970605875B7F">Modes of Operation</p>
                     <p>Oracle Connection Manager in Traffic Director Mode supports the following modes of operation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <div class="p">In pooled connection mode, Oracle Connection Manager in Traffic Director Mode supports any application using the following database client releases:
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>OCI, OCCI, and Open Source Drivers (Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.4) and later))
                                    </p>
                                 </li>
                                 <li>
                                    <p>JDBC (Oracle Database 12<span class="italic">c</span> release 1 (12.1) and later)
                                    </p>
                                 </li>
                                 <li>
                                    <p>ODP.NET (Oracle Database 12<span class="italic">c</span> release 2 (12.2) and later)
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>In addition, applications must use DRCP. That is, the application must enable DRCP in the connect string (or in the <code class="codeph">tnsnames.ora</code> alias).
                           </p>
                        </li>
                        <li>
                           <p>In non-pooled connection (or dedicated) mode, Oracle Connection Manager in Traffic Director Mode supports any application using database client releases Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.4) and later. In this mode, some capabilities, such as connection multiplexing are not available. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__KEYFEATURES-4FD4D08F">
                     <p class="subhead2" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__GUID-3A52B2C3-D63C-4ACB-8FED-1BAFC3801338">Key Features</p>
                     <div class="p">Oracle Connection Manager in Traffic Director Mode furnishes support for the following:
                        <ul style="list-style-type: disc;">
                           <li>
                              <div class="p">Transparent performance enhancements and connection multiplexing, which includes:
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Statement caching, rows prefetching, and result set caching are auto-enabled for all modes of operation.</p>
                                    </li>
                                    <li>
                                       <p>Database session multiplexing (pooled mode only) using the proxy resident connection pool (PRCP), where PRCP is a proxy mode of Database Resident Connection Pooling (DRCP). Applications get transparent connect-time load balancing and run-time load balancing between Oracle Connection Manager in Traffic Director Mode and the database.</p>
                                    </li>
                                    <li>
                                       <p>For multiple Oracle Connection Manager in Traffic Director Mode instances, applications get increased scalability through client-side connect time load balancing or with a load balancer (BIG-IP, NGINX, and others)</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <div class="p">Zero application downtime
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <div class="p">Planned database maintenance or pluggable database (PDB) relocation
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>Pooled mode</p>
                                                <p>Oracle Connection Manager in Traffic Director Mode responds to Oracle Notification Service (ONS) events for planned outages and redirects work. Connections are drained from the pool on Oracle Connection Manager in Traffic Director Mode when the request completes. Service relocation is supported for Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.4) and later.
                                                </p>
                                                <p>For PDB relocation, Oracle Connection Manager in Traffic Director Mode responds to in-band notifications when a PDB is relocated, that is even when ONS is not configured (for Oracle Database release 18c, version 18.1 and later server only)&nbsp;</p>
                                             </li>
                                             <li>
                                                <p>Non-pooled or dedicated mode</p>
                                                <div class="p">When there is no request boundary information from the client, Oracle Connection Manager in Traffic Director Mode supports planned outage for many applications (as long as only simple session state and cursor state need to be preserved across the request/transaction boundaries). This support includes:
                                                   <ul style="list-style-type: disc;">
                                                      <li>
                                                         <p>Stop service/PDB at the transaction boundary or it leverages Oracle Database release 18c&nbsp;continuous application availability&nbsp;to stop the service at the request boundary</p>
                                                      </li>
                                                      <li>
                                                         <p>Oracle Connection Manager in Traffic Director Mode leverages Transparent Application Failover (TAF) failover restore to reconnect and restore simple states.</p>
                                                      </li>
                                                   </ul>
                                                </div>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                    <li>
                                       <p>Unplanned database outages for read-mostly workloads</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <div class="p">High Availability of Oracle Connection Manager in Traffic Director Mode to avoid a single point of failure. This is supported by:
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Multiple instances of Oracle Connection Manager in Traffic Director Mode using a load balancer or client side load balancing/failover in the connect string</p>
                                    </li>
                                    <li>
                                       <p>Rolling upgrade of Oracle Connection Manager in Traffic Director Mode instances</p>
                                    </li>
                                    <li>
                                       <p>Graceful close of existing connections from client to Oracle Connection Manager in Traffic Director Mode for planned outages</p>
                                    </li>
                                    <li>
                                       <p>In-band notifications to Oracle Database release 18c and later clients</p>
                                    </li>
                                    <li>
                                       <p>For older clients, notifications are sent with the response of the current request</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <div class="p">For security and isolation, Oracle Connection Manager in Traffic Director Mode furnishes:
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Database Proxy supporting transmission control protocol/transmission control protocol secure (TCP/TCPS) and protocol conversion</p>
                                    </li>
                                    <li>
                                       <p>Firewall based on the IP address, service name, and secure socket layer/transport layer security (SSL/TLS) wallets</p>
                                    </li>
                                    <li>
                                       <p>Tenant isolation in a multi-tenant environment</p>
                                    </li>
                                    <li>
                                       <p>Protection against denial-of-service and fuzzing attacks</p>
                                    </li>
                                    <li>
                                       <p>Secure tunneling of database traffic across Oracle Database on-premises and Oracle Cloud</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__GUID-A2DD3A99-8792-4704-A482-B66B30AD1B85">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-3917FC5D-4B23-4752-85BA-39A88C4D13F8" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for information about configuring <code class="codeph">cman.ora</code> configuration file to set up Oracle Connection Manager in Traffic Director Mode
                              </p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-58847B76-3836-41DB-9EB6-A81D5C397024" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for information about configuring databases for Oracle Connection Manager in Traffic Director Mode proxy authentication
                              </p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-96FA23BA-F32B-4D47-9CBB-69D27E8D94F6" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for information about configuring Oracle Connection Manager in Traffic Director Mode for unplanned down events
                              </p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-E73658E7-BBF7-4C13-AAD5-70D32062AD8D" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for information about configuring Oracle Connection Manager in Traffic Director Mode for planned down events
                              </p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-15756B12-5ED5-4EDE-9D4B-6B890D5BE9AF" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span> </a> for information about configuring proxy resident connection pools for use by Oracle Connection Manager in Traffic Director Mode
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lncpp&amp;id=NETAG-GUID-FC833F8F-CE5A-4C02-A962-244954158853" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for information about functionality not supported for all drivers with Oracle Connection Manager in Traffic Director Mode
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lncpp&amp;id=NETRF-GUID-668B9035-0B99-4CDF-B7D5-468B30AD7A80" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a> for an overview of Oracle CMAN configuration file
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP20028"></a><div class="props_rev_3"><a id="GUID-5F06D230-7248-4BB0-AC4C-0BC42AC6B3AC" name="GUID-5F06D230-7248-4BB0-AC4C-0BC42AC6B3AC"></a><h3 id="LNCPP-GUID-5F06D230-7248-4BB0-AC4C-0BC42AC6B3AC" class="sect3"><span class="enumeration_section">12.7 </span>About Run-time Load Balancing of the Stateless Connection Pool
               </h3>
               <div>
                  <p>Run-time load balancing in a stateless connection pool dynamically routs connection requests to the least loaded instance of the database. This is achieved by use of service metrics, which are distributed by the Oracle RAC load-balancing advisory.</p>
                  <p>The feature modifies the stateless connection pool in the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The pool receives periodic notifications about the instance load.</p>
                     </li>
                     <li>
                        <p>When a request for a connection is received, the pool picks the best possible connection for the type of request, based on the load of the instance.</p>
                     </li>
                     <li>
                        <p>The stateless connection pool periodically terminates connections of overloaded instances, maintaining the connection topology that corresponds to the instance load.</p>
                     </li>
                     <li>
                        <p>Since the connections to overloaded instances may be terminated, the pool creates new connections to maintain the concurrency requirement. These new connections are created using the connect-time load balancing of the Oracle RAC listener.</p>
                     </li>
                  </ul>
                  <p>Run-time load balancing is turned on by default when the OCCI environment is created in <code class="codeph">THREADED_MUTEXED</code> and <code class="codeph">EVENTS</code> modes, and when the server is configured to issue event notifications.
                  </p>
                  <div class="infoboxnotealso" id="GUID-5F06D230-7248-4BB0-AC4C-0BC42AC6B3AC__GUID-14845788-AC87-4745-A21F-DFF4FD4F1AF3">
                     <p class="notep1">See Also:</p>
                     <p><a href="../lnoci/index.html" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                  </div>
                  <p>This section includes the following topic: <a href="optimizing-performance-of-cplusplus-applications.html#GUID-7DBAD779-65CD-4AED-9A9B-C48D8D533337">API Support</a>.
                  </p>
               </div><a id="LNCPP20491"></a><div class="props_rev_3"><a id="GUID-7DBAD779-65CD-4AED-9A9B-C48D8D533337" name="GUID-7DBAD779-65CD-4AED-9A9B-C48D8D533337"></a><h4 id="LNCPP-GUID-7DBAD779-65CD-4AED-9A9B-C48D8D533337" class="sect4"><span class="enumeration_section">12.7.1 </span>API Support
                  </h4>
                  <div>
                     <p>New <code class="codeph">NO_RLB</code> option for the <code class="codeph">PoolType</code> attribute of the <a href="statelessconnectionpool-class.html#GUID-C0591485-F818-4AC0-9875-ED245BDABCA6">StatelessConnectionPool Class</a> disables run-time load balancing.
                     </p>
                  </div>
               </div>
            </div><a id="LNCPP1206"></a><div class="props_rev_3"><a id="GUID-8ADCAB82-EBBE-43C0-BECE-4E74687A166D" name="GUID-8ADCAB82-EBBE-43C0-BECE-4E74687A166D"></a><h3 id="LNCPP-GUID-8ADCAB82-EBBE-43C0-BECE-4E74687A166D" class="sect3"><span class="enumeration_section">12.8 </span>About Fault Diagnosability
               </h3>
               <div>
                  <p>Fault diagnosability captures diagnostic data, such as dump files or core dump files, on the OCCI client when a problem incident occurs. For each incident, the fault diagnosability feature creates an Automatic Diagnostic Repository (ADR) subdirectory for storing this diagnostic data. For example, if either a Linux or a UNIX application fails with a null pointer reference, then the core file appears in the ADR home directory (if it exists), not in the operating system directory. This section discusses the ADR subdirectory structure and the utility to manage its output, the ADR Command Interpreter (ADRCI).</p>
                  <p>An ADR home is the root directory for all diagnostic data for an instance of a product, such as OCCI, and a particular operating system user. All ADR homes appear under the same root directory, the ADR base. </p>
                  <div class="infoboxnotealso" id="GUID-8ADCAB82-EBBE-43C0-BECE-4E74687A166D__GUID-0B2FA5EE-F101-448F-A5A3-786E12127A41">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11007" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></p>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-1D994784-B26E-4934-ADFE-83A997CCF3DA">Using ADR Base Location</a></p>
                           </li>
                           <li>
                              <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A">Using ADRCI</a></p>
                           </li>
                           <li>
                              <p><a href="optimizing-performance-of-cplusplus-applications.html#GUID-20C6A172-C450-44C0-BE4E-CE7AEF56F243">Controlling ADR Creation and Disabling Fault Diagnosability</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNCPP20492"></a><div class="props_rev_3"><a id="GUID-1D994784-B26E-4934-ADFE-83A997CCF3DA" name="GUID-1D994784-B26E-4934-ADFE-83A997CCF3DA"></a><h4 id="LNCPP-GUID-1D994784-B26E-4934-ADFE-83A997CCF3DA" class="sect4"><span class="enumeration_section">12.8.1 </span>Using ADR Base Location
                  </h4>
                  <div>
                     <div class="section">
                        <p>The location of the ADR base is determined in the following order:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In the <code class="codeph">sqlnet.ora</code> file (on <span class="italic"><span class="bold">Windows</span></span>, in the <code class="codeph">%TNS_ADMIN%</code> directory, or on <span class="italic"><span class="bold">Linux</span></span> or <span class="italic"><span class="bold">UNIX</span></span>, in the <code class="codeph">$TNS_ADMIN</code> directory).</span><div>
                              <p>If there is no <code class="codeph">TNS_ADMIN</code> directory, then <code class="codeph">sqlnet.ora</code> is stored in the current directory.
                              </p>
                              <p>If the ADR base is listed in the <code class="codeph">sqlnet.ora</code> file, it is a statement of the type:
                              </p><pre class="oac_no_warn" dir="ltr">ADR_BASE=<span class="italic">/directory/adr</span>
</pre><p>where:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <span class="italic"><code class="codeph">adr</code></span> argument is a directory that must exist and be writable by all operating system users who execute OCCI applications and want to share the same ADR base.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <span class="italic"><code class="codeph">directory</code></span> argument is the path name
                                    </p>
                                 </li>
                              </ul>
                              <p>If <code class="codeph">ADR_BASE</code> is set, and if all users share a single <code class="codeph">sqlnet.ora</code> file, then OCCI stops searching when directory <code class="codeph">adr</code> does not exist or if it is not writable. If <code class="codeph">ADR_BASE</code> is not set, then OCCI continues the search, testing for the existence of other specific directories.
                              </p>
                              <p>For example, if <code class="codeph">sqlnet.ora</code> contains the entry <code class="codeph">ADR_BASE=/home/chuck/test</code> then:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> ADR base is: </p><pre class="oac_no_warn" dir="ltr">/home/chuck/test/oradiag_chuck
</pre></li>
                                 <li>
                                    <p>ADR home may be: </p><pre class="oac_no_warn" dir="ltr">/home/chuck/test/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11
</pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the Oracle base exists (on <span class="italic"><span class="bold">Windows</span></span>: <span class="italic"><code class="codeph">%ORACLE_BASE%</code></span>, or on <span class="italic"><span class="bold">Linux</span></span> and <span class="italic"><span class="bold">UNIX</span></span>: <span class="italic"><code class="codeph">$ORACLE_BASE</code></span>), the client subdirectory also exists because it is created by the Oracle Universal Installer when the database is installed.</span><div>
                              <p>For example, if <span class="italic"><code class="codeph">$ORACLE_BASE</code></span> is <code class="codeph">/home/chuck/obase</code> , then:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> ADR base is:</p><pre class="oac_no_warn" dir="ltr">/home/chuck/obase
</pre></li>
                                 <li>
                                    <p>ADR home may be: </p><pre class="oac_no_warn" dir="ltr">/home/chuck/obase/diag/clients/user_chuck/host_4144260688_11
</pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the Oracle home exists (on <span class="italic"><span class="bold">Windows</span></span>: <span class="italic"><code class="codeph">%ORACLE_HOME%</code></span>, or on <span class="italic"><span class="bold">Linux</span></span> and <span class="italic"><span class="bold">UNIX</span></span>: <span class="italic"><code class="codeph">$ORACLE_HOME</code></span>), the client subdirectory also exists because it is created by the Oracle Universal Installer when the database is installed.</span><div>
                              <p>For example, if <span class="italic"><code class="codeph">$ORACLE_HOME</code></span> is <code class="codeph">/ade/chuck_l1/oracle</code> , then:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> ADR base is:</p><pre class="oac_no_warn" dir="ltr">/ade/chuck_l1/oracle/log
</pre></li>
                                 <li>
                                    <p>ADR home may be: </p><pre class="oac_no_warn" dir="ltr">/ade/chuck_l1/oracle/log/diag/clients/user_chuck/host_4144260688_11
</pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the operating system home directory.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>On <span class="italic"><span class="bold">Windows</span></span>, the operating system home directory is <span class="italic"><code class="codeph">%USERPROFILE%</code></span>.
                                    </p>
                                    <p>The location of folder <code class="codeph">Oracle</code> is at: 
                                    </p><pre class="oac_no_warn" dir="ltr">C:\Documents and Settings\chuck
</pre><p>If the application runs as a service, the home directory option is skipped.</p>
                                 </li>
                                 <li>
                                    <p>On <span class="italic"><span class="bold">Linux</span></span> and <span class="italic"><span class="bold">UNIX</span></span>, the operating system home directory is <span class="italic"><code class="codeph">$HOME</code></span>.
                                    </p>
                                    <p>The location may be: </p><pre class="oac_no_warn" dir="ltr">/home/chuck/oradiag_chuck
</pre></li>
                              </ul>
                              <p>For example, in an Instant Client, if <span class="italic"><code class="codeph">$HOME</code></span> is <code class="codeph">/home/chuck</code>, then:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> ADR base is:</p><pre class="oac_no_warn" dir="ltr">/home/chuck/oradiag_chuck
</pre></li>
                                 <li>
                                    <p>ADR home may be: </p><pre class="oac_no_warn" dir="ltr">/home/chuck/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11
</pre></li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-1D994784-B26E-4934-ADFE-83A997CCF3DA__GUID-7D725391-A376-4CF6-9BB0-C574EDC9FC22">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="installation-and-upgrading.html#GUID-5556BCFD-E14D-4562-A0CE-5AFAD47AC08F">About the Instant Client</a>"</span></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>In the temporary directory.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>On <span class="italic"><span class="bold">Windows</span></span>, the temporary directories are searched in the following order:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">%TMP%</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">%TEMP%</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">%USERPROFILE%</code></p>
                                       </li>
                                       <li>
                                          <p>Windows system directory</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>On <span class="italic"><span class="bold">Linux</span></span> and <span class="italic"><span class="bold">UNIX</span></span>, the temporary directory is in <code class="codeph">/var/tmp</code>. 
                                    </p>
                                 </li>
                              </ul>
                              <p>For example, in an Instant Client, if <span class="italic"><code class="codeph">$HOME</code></span> is not writable, then:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> ADR base is:</p><pre class="oac_no_warn" dir="ltr">/var/tmp/oradiag_chuck
</pre></li>
                                 <li>
                                    <p>ADR home may be: </p><pre class="oac_no_warn" dir="ltr">/var/tmp/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11
</pre></li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>If none of these directory choices are available and writable, ADR is not created and diagnostics are not stored.</p>
                        <div class="infoboxnotealso" id="GUID-1D994784-B26E-4934-ADFE-83A997CCF3DA__GUID-068B4674-3807-49CB-AB44-D36C6F44DCE6">
                           <p class="notep1">See Also:</p>
                           <p><a href="../netrf/index.html" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNCPP20494"></a><a id="LNCPP20495"></a><a id="LNCPP20493"></a><div class="props_rev_3"><a id="GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A" name="GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A"></a><h4 id="LNCPP-GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A" class="sect4"><span class="enumeration_section">12.8.2 </span>Using ADRCI
                  </h4>
                  <div>
                     <div class="section">
                        <p>ADRCI is a command-line tool that enables you to view diagnostic data within the ADR, and to package incident and problem information into a zip file that can be shared with Oracle Support. ADRCI can be used either interactively and through a script. </p>
                        <p>A <span class="bold">problem</span> is a critical error in OCI or the client. Each problem has a problem key. An <span class="bold">incident</span> is a single occurrence of a problem, and it is identified by a unique numeric incident ID. Each incident has a problem key which has a set of attributes: the <code class="codeph">ORA</code> error number, error parameter values, and similar information. Two incidents have the same root cause if their problem keys match.
                        </p>
                        <p>The following examples demonstrate how to use ADRCI on a Linux operating system. Note that ARDCI commands are case-insensitive. All user input is in bold typeface.</p>
                        <div class="infoboxnotealso" id="GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A__GUID-E3351A51-3514-47B0-9B28-2F4690F4B6E7">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a>for an introduction to the ADRCI
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="installation-and-upgrading.html#GUID-5556BCFD-E14D-4562-A0CE-5AFAD47AC08F">About the Instant Client</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A__GUID-6A25581C-7456-40D0-A025-EF54C747C2EF">
                        <p class="titleinexample">Example 12-6 How to Use ADRCI for OCCI Application Incidents</p>
                        <p>To launch ADRCI in a Linux system, use the <code class="codeph">adrci</code> command. Once ADRCI starts, find out the particulars of the <code class="codeph">show base</code> command with <code class="codeph">help</code>, and then determine the base of a particular client using the <code class="codeph">-product client</code> option (necessary for OCCI applications). To set the ADRCI base, use the set base command. Once <code class="codeph">ADRCI</code> starts, then the default ADR base is for the <code class="codeph">rdbms</code> server. The <span class="italic"><code class="codeph">$ORACLE_HOME</code></span> is set to <code class="codeph">/ade/chuck_l3/oracle</code>. To view the incidents, use the <code class="codeph">show incidents</code> command. to exit ADRCI, use the <code class="codeph">quit</code> command.
                        </p><pre class="oac_no_warn" dir="ltr">% <span class="bold">adrci</span> 

ADRCI: Release 11.2. - on Wed November 25 16:16:55 2008
 
Copyright (c) 1982, 2008, Oracle.  All rights reserved.

adrci&gt; <span class="bold">help show base</span>
 
  Usage: SHOW BASE [-product &lt;product_name&gt;]
 
  Purpose: Show the current ADR base setting.
 
  Options:
    [-product &lt;product_name&gt;]: This option allows users to show the
    given product's ADR Base location. The current registered products are
    "CLIENT" and "ADRCI".
 
  Examples: 
    show base -product client
    show base
 
adrci&gt; <span class="bold">show base -product client</span>
ADR base is "/ade/chuck_l3/oracle/log"

adrci&gt; <span class="bold">help set base</span>
 
  Usage:  SET BASE &lt;base_str&gt;
 
  Purpose: Set the ADR base to use in the current ADRCI session.
           If there are valid ADR homes under the base, all homes 
           are added to the current ADRCI session.
 
  Arguments:
    &lt;base_str&gt;: It is the ADR base directory, which is a system-dependent
    directory path string.
 
  Notes:
    On platforms that use "." to signify current working directory,
    it can be used as base_str.
 
  Example: 
    set base /net/sttttd1/scratch/someone/view_storage/someone_v1/log
    set base .

adrci&gt; <span class="bold">set base /ade/chuck_l3/oracle/log</span>

adrci&gt; <span class="bold">show incidents</span>
...
adrci&gt; <span class="bold">quit</span></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A__GUID-794139B0-25F9-4654-99E3-9E54F0D86006">
                        <p class="titleinexample">Example 12-7 How to Use ADRCI for Instant Client</p>
                        <p>Because Instant Client does not use <span class="italic"><code class="codeph">$ORACLE_HOME</code></span>, the default ADR base is the user's home directory.
                        </p><pre class="oac_no_warn" dir="ltr">adrci&gt; <span class="bold">show base -product client</span>
ADR base is "/home/chuck/oradiag_chuck"
adrci&gt; <span class="bold">set base /home/chuck/oradiag_chuck</span>
adrci&gt; <span class="bold">show incidents</span>
 
ADR Home = /home/chuck/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11:
*************************************************************************
INCIDENT_ID    PROBLEM_KEY           CREATE_TIME
-------------------------------------------------------------------------
1                     oci 24550 [6]              2007-05-01 17:20:02.803697 -07:00                      
1 rows fetched
 
adrci&gt; <span class="bold">quit</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20496"></a><div class="props_rev_3"><a id="GUID-20C6A172-C450-44C0-BE4E-CE7AEF56F243" name="GUID-20C6A172-C450-44C0-BE4E-CE7AEF56F243"></a><h4 id="LNCPP-GUID-20C6A172-C450-44C0-BE4E-CE7AEF56F243" class="sect4"><span class="enumeration_section">12.8.3 </span>Controlling ADR Creation and Disabling Fault Diagnosability
                  </h4>
                  <div>
                     <div class="section">
                        <p>To disable the fault diagnosability feature, you must turn off the capture of diagnostics. Edit the <code class="codeph">sqlnet.ora</code> file by changing the values of the <code class="codeph">DIAG_ADR_ENABLED</code> and <code class="codeph">DIAG_DDE_ENABLED</code> parameters to either <code class="codeph">FALSE</code> or <code class="codeph">OFF</code>; the default values are either <code class="codeph">TRUE</code> or <code class="codeph">ON</code>.
                        </p>
                        <p>To turn off the OCCI signal handler and to re-enable standard operating system failure processing, edit the <code class="codeph">sqlnet.ora</code> file by adding the corresponding parameter: <code class="codeph">DIAG_SIGHANDLER_ENABLED=FALSE</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-20C6A172-C450-44C0-BE4E-CE7AEF56F243__GUID-62806A91-EF36-40C9-85F7-F74B42829BA5">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lncpp&amp;id=LNOCI-GUID-E100960D-1E4F-4C3D-A6A3-0D5A5FB06B4C" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNCPP21897"></a><a id="LNCPP21896"></a><div class="props_rev_3"><a id="GUID-740894FB-9DAE-4F98-BA70-0C4E04479200" name="GUID-740894FB-9DAE-4F98-BA70-0C4E04479200"></a><h3 id="LNCPP-GUID-740894FB-9DAE-4F98-BA70-0C4E04479200" class="sect3"><span class="enumeration_section">12.9 </span>Using Client Result Cache
               </h3>
               <div>
                  <div class="section">
                     <p>The Client Result Cache improves the response times of queries that are executed repeatedly. This feature uses client memory to cache results of SQL queries executed and fetched from the database. Subsequent execution of the same query fetches the results from the client cache, reducing server CPU usage. Because database round-trips are eliminated, applications have improved response times.</p>
                     <p>OCCI applications may transparently use the Client Result Cache feature by enabling OCCI statement caching. Note that <code class="codeph">SELECT</code> queries that must be cached are annotated with a <code class="codeph">/*+ result_cache */</code> hint. <a href="optimizing-performance-of-cplusplus-applications.html#GUID-740894FB-9DAE-4F98-BA70-0C4E04479200__CIADDJCA">Example 12-8</a> shows how to create a OCCI Statement object that uses such a <code class="codeph">SELECT</code> query.
                     </p>
                     <p>For usage guidelines, cache consistency, and restrictions, see <a href="../lnoci/performance-topics.html#LNOCI10103" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-740894FB-9DAE-4F98-BA70-0C4E04479200__CIADDJCA">
                     <p class="titleinexample">Example 12-8 How to Enable and Use the Client Result Cache</p><pre class="oac_no_warn" dir="ltr">Connection *conn;
Statement *stmt;
ResultSet *rs;
 
...
//enable OCCI Statement Caching
conn-&gt;setStmtCacheSize(20);
 
//Specify the hint in the SELECT query
stmt = conn-&gt;createStatement("select /*+ result_cache */ * from products \
                              where product_id = :1");
 
//the following execute fetches rows from the client cache if
//the query results are cached. If this is the first execute
//of the query, the results fetched from the server are
//cached on the client side.
rs = stmt-&gt;executeQuery();
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNCPP78967"></a><div class="props_rev_3"><a id="GUID-E8DD631B-9AFF-49F5-BFBA-ED55001DB052" name="GUID-E8DD631B-9AFF-49F5-BFBA-ED55001DB052"></a><h3 id="LNCPP-GUID-E8DD631B-9AFF-49F5-BFBA-ED55001DB052" class="sect3"><span class="enumeration_section">12.10 </span>About Client-Side Deployment Parameters and Auto Tuning
               </h3>
               <div>
                  <p>Starting with Oracle Database Release 12<span class="italic">c</span> Release 1 (12.1), Oracle provides <code class="codeph">oraaccess.xml</code>, a client-side configuration file that can be used to configure selected properties, allowing the application behavior to be changed during deployment without modifying the source code.
                  </p>
                  <div class="infoboxnote" id="GUID-E8DD631B-9AFF-49F5-BFBA-ED55001DB052__GUID-40C288AE-8E23-4CC1-B185-6B79C6745052">
                     <p class="notep1">Note:</p>
                     <p>Do not use the prefetch deployment parameter if the OCCI application is already using the <code class="codeph">setPrefetchRowCount()</code> or <code class="codeph">setPrefetchMemorySize()</code> methods.
                     </p>
                  </div>
                  <div class="infoboxnote" id="GUID-E8DD631B-9AFF-49F5-BFBA-ED55001DB052__GUID-A0EC8D27-7D85-4E91-BB2E-C3BD9FAB5EBD">
                     <p class="notep1">See:</p>
                     <p><a href="../lnoci/index.html" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for more information about client-side deployment parameters and auto tuning
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
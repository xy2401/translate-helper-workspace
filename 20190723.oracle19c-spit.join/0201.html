<html id='10295.ADMINISTER-KEY-MANAGEMENT.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ADMINISTER KEY MANAGEMENT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="How-the-SQL-Statement-Chapters-are-Organized.html" title="Previous" type="text/html">
      <link rel="next" href="ALTER-ANALYTIC-VIEW.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="How-the-SQL-Statement-Chapters-are-Organized.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ALTER-ANALYTIC-VIEW.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ADMINISTER-KEY-MANAGEMENT-to-ALTER-JAVA.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: ADMINISTER KEY MANAGEMENT to ALTER JAVA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ADMINISTER KEY MANAGEMENT</li>
            </ol>
            <a id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9" name="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9"></a><a id="SQLRF55977"></a><a id="SQLRF55978"></a><a id="SQLRF55979"></a><a id="SQLRF55983"></a><a id="SQLRF56251"></a><a id="SQLRF55984"></a><a id="SQLRF55980"></a><a id="SQLRF55981"></a><a id="SQLRF55982"></a><a id="SQLRF55986"></a><a id="SQLRF56252"></a><a id="SQLRF55987"></a><a id="SQLRF55988"></a><a id="SQLRF55989"></a><a id="SQLRF55991"></a><a id="SQLRF55990"></a><a id="SQLRF56071"></a><a id="SQLRF56253"></a><a id="SQLRF55992"></a><a id="SQLRF55993"></a><a id="SQLRF55994"></a><a id="SQLRF56254"></a><a id="SQLRF56255"></a><a id="SQLRF56256"></a><a id="SQLRF56257"></a><a id="SQLRF56258"></a><a id="SQLRF56259"></a><a id="SQLRF56260"></a><a id="SQLRF56261"></a><a id="SQLRF56262"></a><a id="SQLRF56267"></a><a id="SQLRF56268"></a><a id="SQLRF56269"></a><a id="SQLRF56272"></a><a id="SQLRF56270"></a><a id="SQLRF56271"></a><a id="SQLRF56273"></a><a id="SQLRF56275"></a><a id="SQLRF56625"></a><a id="SQLRF56274"></a><a id="SQLRF56276"></a><a id="SQLRF56277"></a><a id="SQLRF56278"></a><a id="SQLRF56279"></a><a id="SQLRF56280"></a><a id="SQLRF56522"></a><a id="SQLRF56340"></a><a id="SQLRF56341"></a><a id="SQLRF56493"></a><a id="SQLRF56494"></a><a id="SQLRF56495"></a><a id="SQLRF56496"></a><a id="SQLRF56497"></a><a id="SQLRF56498"></a><a id="SQLRF56499"></a><a id="SQLRF56500"></a><a id="SQLRF56501"></a><a id="SQLRF56502"></a><a id="SQLRF56503"></a><a id="SQLRF56504"></a><a id="SQLRF56626"></a><a id="SQLRF56505"></a><a id="SQLRF56506"></a><a id="SQLRF56507"></a><a id="SQLRF55976"></a>
            
            <h2 id="SQLRF-GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9" class="sect2">ADMINISTER KEY MANAGEMENT</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-B5E6F278-EC9B-4DC5-B5E0-47B00945B36F">Purpose</p>
                  <p>The <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> statement provides a unified key management interface for Transparent Data Encryption. Use this statement to:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Manage software and hardware keystores</p>
                     </li>
                     <li>
                        <p>Manage encryption keys</p>
                     </li>
                     <li>
                        <p>Manage secrets</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-240DA612-1671-4378-A66D-154A981CDC9F">Prerequisites</p>
                  <p>You must have the <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> or <code class="codeph">SYSKM</code> system privilege.
                  </p>
                  <p>To specify the <code class="codeph">CONTAINER</code> clause, you must be connected to a multitenant container database (CDB). To specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code>, the current container must be the root and you must have the commonly granted <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-6CF17967-CAFC-47E7-8712-5BDFBFE27BA4">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-56C8FC2B-3170-4C86-8881-C12F1EC0011B"><span class="italic">administer_key_management</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-153AE32B-309C-4F30-A706-664D18507604"><img src="img/administer_key_management.gif" alt="Description of administer_key_management.eps follows" title="Description of administer_key_management.eps follows" longdesc="img_text/administer_key_management.html"><br><a href="img_text/administer_key_management.html">Description of the illustration administer_key_management.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJEEFB">keystore_management_clauses::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFECGG">key_management_clauses::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEJDAI">secret_management_clauses::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJEEFB">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-78098F38-585E-4EEB-A3B4-58A9F04D1219"><span class="italic">keystore_management_clauses</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C48F50F7-BEAE-4DCD-9470-7994B53BDA6E"><img src="img/keystore_management_clauses.gif" alt="Description of keystore_management_clauses.eps follows" title="Description of keystore_management_clauses.eps follows" longdesc="img_text/keystore_management_clauses.html"><br><a href="img_text/keystore_management_clauses.html">Description of the illustration keystore_management_clauses.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFAFFD">create_keystore::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDBEJF">open_keystore::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDHCEE">close_keystore::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJDBFF">backup_keystore::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFDIEE">alter_keystore_password::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGJCGG">merge_into_new_keystore::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFFGDF">merge_into_existing_keystore::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFAFFD">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-959D5464-035C-4B37-8CF4-66EA17543430"><span class="italic">create_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-237FEC5C-365A-4EA6-B4BC-CAB276A92613"><img src="img/create_keystore.gif" alt="Description of create_keystore.eps follows" title="Description of create_keystore.eps follows" longdesc="img_text/create_keystore.html"><br><a href="img_text/create_keystore.html">Description of the illustration create_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDBEJF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-65DD492B-F0E1-4714-BA38-C34599350B48"><span class="italic">open_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F77A22EF-D732-47C9-8539-47F949D484C9"><img src="img/open_keystore.gif" alt="Description of open_keystore.eps follows" title="Description of open_keystore.eps follows" longdesc="img_text/open_keystore.html"><br><a href="img_text/open_keystore.html">Description of the illustration open_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDHCEE">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5C592801-3D26-425D-803F-DA3F7A9E3D28"><span class="italic">close_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-E4ABEB03-9472-4ECC-AC75-B69E8C7E34B8"><img src="img/close_keystore.gif" alt="Description of close_keystore.eps follows" title="Description of close_keystore.eps follows" longdesc="img_text/close_keystore.html"><br><a href="img_text/close_keystore.html">Description of the illustration close_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJDBFF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-950A0E57-307E-4BF5-9EDF-6F6EA36A7473"><span class="italic">backup_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-2BFE6D64-8679-41B3-BD27-284E751B3D3D"><img src="img/backup_keystore.gif" alt="Description of backup_keystore.eps follows" title="Description of backup_keystore.eps follows" longdesc="img_text/backup_keystore.html"><br><a href="img_text/backup_keystore.html">Description of the illustration backup_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFDIEE">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8CDA471F-4B5E-44A8-A20F-E6E88014B20F"><span class="italic">alter_keystore_password</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9791208A-A4B2-416C-BD60-96A568DBE6A2"><img src="img/alter_keystore_password.gif" alt="Description of alter_keystore_password.eps follows" title="Description of alter_keystore_password.eps follows" longdesc="img_text/alter_keystore_password.html"><br><a href="img_text/alter_keystore_password.html">Description of the illustration alter_keystore_password.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGJCGG">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-96F61513-7E8D-4F46-BBB7-8B1E7BA45BE2"><span class="italic">merge_into_new_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-DC120BBD-AAD7-4694-872F-A89EE4923EC7"><img src="img/merge_into_new_keystore.gif" alt="Description of merge_into_new_keystore.eps follows" title="Description of merge_into_new_keystore.eps follows" longdesc="img_text/merge_into_new_keystore.html"><br><a href="img_text/merge_into_new_keystore.html">Description of the illustration merge_into_new_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFFGDF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C0BF7400-1381-46F3-AA2D-221918DDDCBE"><span class="italic">merge_into_existing_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-06368538-79EE-4283-BD52-B28D65015EB4"><img src="img/merge_into_existing_keystore.gif" alt="Description of merge_into_existing_keystore.eps follows" title="Description of merge_into_existing_keystore.eps follows" longdesc="img_text/merge_into_existing_keystore.html"><br><a href="img_text/merge_into_existing_keystore.html">Description of the illustration merge_into_existing_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-543FE332-9838-4F1D-A9BC-4EB8AB011161"><span class="italic">isolate_keystore</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F037B44B-1450-4D44-902F-6FC1B8E6DC01"><img src="img/isolate_keystore.gif" alt="Description of isolate_keystore.eps follows" title="Description of isolate_keystore.eps follows" longdesc="img_text/isolate_keystore.html"><br><a href="img_text/isolate_keystore.html">Description of the illustration isolate_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-03BB1F8F-DAC6-4A7F-8960-36982969CF6B"><span class="italic">unite_keystore</span> ::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-2F0FE261-F31C-47F1-9E54-051BF50563D9"><img src="img/unite_keystore.gif" alt="Description of unite_keystore.eps follows" title="Description of unite_keystore.eps follows" longdesc="img_text/unite_keystore.html"><br><a href="img_text/unite_keystore.html">Description of the illustration unite_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFECGG">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9249C472-D4F7-4368-94F3-84EC55052857"><span class="italic">key_management_clauses</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9CFBDAE5-D4CA-4BD8-875D-2D9D9AEDAA0A"><img src="img/key_management_clauses.gif" alt="Description of key_management_clauses.eps follows" title="Description of key_management_clauses.eps follows" longdesc="img_text/key_management_clauses.html"><br><a href="img_text/key_management_clauses.html">Description of the illustration key_management_clauses.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEHAIAI">set_key::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGGEGI">create_key::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJHBCJ">use_key::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBBAC">set_key_tag::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGECAFFH">export_keys::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJBIFJ">import_keys::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBHGHA">migrate_key::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEAGHG">reverse_migrate_key::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEHAIAI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-13644FFD-38F4-43FB-A043-E7FFD35935DD"><span class="italic">set_key</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-38DA1A10-3ED1-4314-8111-D7E9FA377590"><img src="img/set_key.gif" alt="Description of set_key.eps follows" title="Description of set_key.eps follows" longdesc="img_text/set_key.html"><br><a href="img_text/set_key.html">Description of the illustration set_key.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGGEGI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-96B7F9AE-432D-4DDC-9845-40BF6DAF78F9"><span class="italic">create_key</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5B421E25-BD50-461A-ABAA-81CBB8C55AF7"><img src="img/create_key.gif" alt="Description of create_key.eps follows" title="Description of create_key.eps follows" longdesc="img_text/create_key.html"><br><a href="img_text/create_key.html">Description of the illustration create_key.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJHBCJ">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-656E033B-6D26-4E4B-A90D-0417B4FE3CAE"><span class="italic">use_key</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-011FE799-EF5A-4724-A5BE-C357AED57915"><img src="img/use_key.gif" alt="Description of use_key.eps follows" title="Description of use_key.eps follows" longdesc="img_text/use_key.html"><br><a href="img_text/use_key.html">Description of the illustration use_key.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBBAC">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-35AB658F-0A56-4012-972D-9A081DDD7202"><span class="italic">set_key_tag</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-51283FCF-615E-4DDC-B264-B6AAC7302A8C"><img src="img/set_key_tag.gif" alt="Description of set_key_tag.eps follows" title="Description of set_key_tag.eps follows" longdesc="img_text/set_key_tag.html"><br><a href="img_text/set_key_tag.html">Description of the illustration set_key_tag.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGECAFFH">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5F8328C3-DB8B-49CC-9B53-6CA3EA741176"><span class="italic">export_keys</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C13EE6AD-98E1-42ED-9EA5-CE708AD6BA87"><img src="img/export_keys.gif" alt="Description of export_keys.eps follows" title="Description of export_keys.eps follows" longdesc="img_text/export_keys.html"><br><a href="img_text/export_keys.html">Description of the illustration export_keys.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJBIFJ">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-3D4B59EB-B502-4F8C-92A0-945178095E2B"><span class="italic">import_keys</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-37B83242-EF07-4D82-BFD7-ADB1070A6446"><img src="img/import_keys.gif" alt="Description of import_keys.eps follows" title="Description of import_keys.eps follows" longdesc="img_text/import_keys.html"><br><a href="img_text/import_keys.html">Description of the illustration import_keys.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBHGHA">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-DBB1EE5A-ECD8-4B8A-8B38-50F33186C432"><span class="italic">migrate_key</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C1BA77A8-0A97-4667-8BF2-1F6D16BF8D93"><img src="img/migrate_key.gif" alt="Description of migrate_key.eps follows" title="Description of migrate_key.eps follows" longdesc="img_text/migrate_key.html"><br><a href="img_text/migrate_key.html">Description of the illustration migrate_key.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEAGHG">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-4B8361FC-1199-4EE5-BDFB-E24EB58B3911"><span class="italic">reverse_migrate_key</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F214D1D3-F8ED-4718-A933-7CA2547B276E"><img src="img/reverse_migrate_key.gif" alt="Description of reverse_migrate_key.eps follows" title="Description of reverse_migrate_key.eps follows" longdesc="img_text/reverse_migrate_key.html"><br><a href="img_text/reverse_migrate_key.html">Description of the illustration reverse_migrate_key.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-EB7696E0-84AF-4B82-AF82-664830BC1BD2"><span class="italic">move_keys</span> ::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-517305B4-32B7-4722-9695-214311827438"><img src="img/move_keys.gif" alt="Description of move_keys.eps follows" title="Description of move_keys.eps follows" longdesc="img_text/move_keys.html"><br><a href="img_text/move_keys.html">Description of the illustration move_keys.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEJDAI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5EDED6A1-5D25-4DA8-B0EA-E952149A0F6E"><span class="italic">secret_management_clauses</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-B3627463-A82F-432A-8BE5-D7A68E8446BB"><img src="img/secret_management_clauses.gif" alt="Description of secret_management_clauses.eps follows" title="Description of secret_management_clauses.eps follows" longdesc="img_text/secret_management_clauses.html"><br><a href="img_text/secret_management_clauses.html">Description of the illustration secret_management_clauses.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBDBJI">add_update_secret::=</a></span>, <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBIEH">delete_secret::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBDBJI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-D28BB8DA-2A62-44E5-ABD0-8BCCDADC4343"><span class="italic">add_update_secret</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-3B971662-D93F-4F10-A1CE-8D70A50495F2"><img src="img/add_update_secret.gif" alt="Description of add_update_secret.eps follows" title="Description of add_update_secret.eps follows" longdesc="img_text/add_update_secret.html"><br><a href="img_text/add_update_secret.html">Description of the illustration add_update_secret.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBIEH">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-7F785DB9-6A78-450A-A68E-08CD2AFC19D1"><span class="italic">delete_secret</span>::=
                  </p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8BB58324-F0E9-4F22-BF14-DC8582FF8F84"><img src="img/delete_secret.gif" alt="Description of delete_secret.eps follows" title="Description of delete_secret.eps follows" longdesc="img_text/delete_secret.html"><br><a href="img_text/delete_secret.html">Description of the illustration delete_secret.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0F4FF106-6E12-4C3D-9F87-781E580F667B">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-62DF4331-1F17-4D20-B782-3EA9EE705D8C"><span class="italic">keystore_management_clauses</span></p>
                  <p>Use these clauses to perform the following keystore management operations:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Create a software keystore</p>
                     </li>
                     <li>
                        <p>Open and close a software keystore or a hardware keystore</p>
                     </li>
                     <li>
                        <p>Back up a password-protected software keystore</p>
                     </li>
                     <li>
                        <p>Change the password of a password-protected software keystore</p>
                     </li>
                     <li>
                        <p>Merge two existing software keystores into a new password-protected software keystore</p>
                     </li>
                     <li>
                        <p>Merge one existing software keystore into an existing password-protected software keystore</p>
                     </li>
                     <li>
                        <p>Isolate the keystore of a Pluggable Database (PDB) from the Container Database (CDB) so that the PDB can manage its own keystore.</p>
                     </li>
                     <li>
                        <p>Unite the keystore of a PDB with the CDB.</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-60C0E624-8B52-4528-857B-0DC159F1D528"><span class="italic">create_keystore</span></p>
                  <p>This clause lets you create the following types of software keystores: password-protected software keystores and auto-login software keystores. To issue this clause in a multitenant environment, you must be connected to the root.</p>
                  <p><span class="bold">CREATE KEYSTORE</span></p>
                  <p>Specify this clause to create a password-protected software keystore.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore_location</code></span>, specify the full path name of the software keystore directory. The keystore will be created in this directory in a file named <code class="codeph">ewallet.p12</code>. This clause is optional if the <code class="codeph">WALLET_ROOT</code> parameter has been set. Refer to <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10276" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> to learn how to determine the software keystore directory for your system.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to set the password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">CREATE [ LOCAL ] AUTO_LOGIN KEYSTORE</span></p>
                  <p>Specify this clause to create an auto-login software keystore. An auto-login software keystore is created from an existing password-protected software keystore. The auto-login keystore has a system-generated password. It is stored in a PKCS#12-based file named <code class="codeph">cwallet.sso</code> in the same directory as the password-protected software keystore.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>By default, Oracle creates an auto-login keystore, which can be opened from computers other than the computer on which the keystore resides. If you specify the <code class="codeph">LOCAL</code> keyword, then Oracle Database creates a local auto-login keystore, which can be opened only from the computer on which the keystore resides.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore_location</code></span>, specify the full path name of the directory in which the existing password-protected software keystore resides. The password-protected software keystore can be open or closed.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the existing password-protected software keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">Restriction on Creating Keystores</span></p>
                  <p>You can create at most one password-protected software keystore and one auto-login software keystore, either local or not, in any single directory.</p>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-23BB4783-6DA1-4260-9D49-F574949C2338">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10282" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on creating software keystores
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__OPEN_KEYSTORE-2C9ED408">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F6137BE3-A9FC-42A0-97D2-CF1300F0004A"><span class="italic">open_keystore</span></p>
                  <p>This clause lets you open a password-protected software keystore or a hardware keystore.</p>
                  <div class="infoboxnote" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-69716C18-E518-494E-BFB4-03DA5616E1C5">
                     <p class="notep1">Note:</p>
                     <p>You do not need to use this clause to open auto-login and local auto-login software keystores because they are opened automatically when they are requiredâ€”that is, when the master encryption key is accessed.</p>
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause is useful when opening a keystore in a PDB. It ensures that the CDB root keystore is open before opening the PDB keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">CONTAINER</code> clause applies when you are connected to a CDB.
                        </p>
                        <p>If the current container is a pluggable database (PDB), then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to open the keystore in the PDB. The keystore must be open in the root before you open it in the PDB.
                        </p>
                        <p>If the current container is the root, then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to open the keystore in the root, or specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> to open the keystore in the root and in all PDBs.
                        </p>
                        <p>If you omit this clause, then <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> is the default.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0B76CA9F-CA45-4C2C-B604-08F4D1DAFF3C">
                     <p class="notep1">See Also:</p>
                     <p><span class="italic">Oracle Database Advanced Security Guide</span> for more information on opening <a href="../asoag/configuring-transparent-data-encryption.html#ASOAG10285" target="_blank">password-based software keystores</a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10296" target="_blank">hardware keystores</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-E52DC06A-64FC-4B40-B7E7-F10337933389"><span class="italic">close_keystore</span></p>
                  <p>This clause lets you close a password-protected software keystore, an auto-login software keystore, or a hardware keystore. Closing a keystore disables all encryption and decryption operations. Any attempt to encrypt or decrypt data or access encrypted data results in an error.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To close a password-protected software keystore or a hardware keystore, specify the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>To close an auto-login keystore, do not specify the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause. Before you close an auto-login keystore, check the <code class="codeph">WALLET_TYPE</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. If it returns <code class="codeph">AUTOLOGIN</code>, then you can close the keystore. Otherwise, if you attempt to close the keystore, then an error occurs.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">CONTAINER</code> clause applies when you are connected to a CDB.
                        </p>
                        <p>If the current container is a PDB, then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to close the keystore in the PDB.
                        </p>
                        <p>If the current container is the root, then the <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> and <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> clauses have the same effect; both clauses close the keystore in the root and in all PDBs.
                        </p>
                        <p>If you omit this clause, then <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> is the default.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0EE29E4A-1B40-46B5-8F7E-A7841747FF86">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10321" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on closing keystores
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-CA07D2EF-8E8F-431C-B711-0E74267EC616"><span class="italic">backup_keystore</span></p>
                  <p>This clause lets you back up a password-protected software keystore. The keystore must be open.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>By default, Oracle Database creates a backup file with a name of the form <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.p12</code>, where <span class="italic"><code class="codeph">timestamp</code></span> is the file creation timestamp in UTC format. The optional <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause lets you specify a backup identifier which is added to the backup file name. For example, if you specify a backup identifier of <code class="codeph">'Backup1'</code>, then Oracle Database creates a backup file with a name of the form <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">_Backup1.p12</code>. 
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The optional <code class="codeph">TO</code> '<span class="italic"><code class="codeph">keystore_location</code></span>' clause lets you specify the directory in which the backup file is created. If you omit this clause, then the backup is created in the same directory as the keystore that you are backing up.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9E919638-F7BC-40AB-89B8-C33999F02AAA">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10313" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on backing up password-based software keystores
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C340E639-AF3A-40DA-8B4D-1D52E93547FC"><span class="italic">alter_keystore_password</span></p>
                  <p>This clause lets you change the password for a password-protected software keystore. The keystore must be open.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">old_keystore_password</code></span>, specify the old password for the keystore. For <span class="italic"><code class="codeph">new_keystore_password</code></span>, specify the new password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The optional <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause instructs the database to create a backup of the keystore before changing the password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5D6F1521-42E5-4596-874F-82BC62D5DB91">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10312" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on changing a password-based software keystore password
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8FE7159A-6CE0-4DC7-B0CE-08C31BE6900D"><span class="italic">merge_into_new_keystore</span></p>
                  <p>This clause lets you merge two software keystores into a new keystore. The keys and attributes in the two constituent keystores are added to the new keystore. The constituent keystores can be password-based or auto-login (including local auto-login) software keystores; they can be open or closed. The new keystore is a password-protected software keystore. It is in a closed state when the merge completes. Any or none of the keystores specified in this clause can be the keystore configured for use by the database.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore1_location</code></span>, specify the full path name of the directory in which the first keystore resides.
                        </p>
                     </li>
                     <li>
                        <p>Specify <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> <span class="italic"><code class="codeph">keystore1_password</code></span> only if the first keystore is a password-based software keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore2_location</code></span>, specify the full path name of the directory in which the second keystore resides.
                        </p>
                     </li>
                     <li>
                        <p>Specify <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> <span class="italic"><code class="codeph">keystore2_password</code></span> only if the second keystore is a password-based software keystore.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore3_location</code></span>, specify the full path name of the directory in which the new keystore is created.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore3_password</code></span>, specify the password for the new keystore.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-23E7D3D8-C402-495D-8CDA-1E3EE95283BC">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10314" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on merging software keystores
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-779C6BE2-46D6-4668-8A08-81899C7E5D6D"><span class="italic">merge_into_existing_keystore</span></p>
                  <p>This clause lets you merge a software keystore into another existing software keystore. The keys and attributes in the keystore from which you merge are added to the keystore into which you merge. The keystore from which you merge can be a password-protected or auto-login (including local auto-login) software keystore; it can be open or closed. The keystore into which you merge must be a password-based software keystore. It can be open or closed when the merge begins. However, it will be in a closed state when the merge completes. Either or neither of the keystores specified in this clause can be the keystore configured for use by the database.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore1_location</code></span>, specify the full path name of the directory in which the keystore from which you merge resides.
                        </p>
                     </li>
                     <li>
                        <p>Specify <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> <span class="italic"><code class="codeph">keystore1_password</code></span> only if the keystore from which you merge is a password-based software keystore.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore2_location</code></span>, specify the full path name of the directory in which the keystore into which you merge resides.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">keystore2_password</code></span>, specify the password for the keystore into which you merge.
                        </p>
                     </li>
                     <li>
                        <p>The optional <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause instructs the database to create a backup of the keystore into which you merge before performing the merge. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9B64296B-0EE6-4002-8BE0-7DE9C85A83CD">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10314" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on merging software keystores
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-FFADADBE-1518-4CEA-83FC-704B6449A90B"><span class="italic">isolate_keystore</span></p>
                  <p>Pluggable Databases (PDB) within a Container Database (CDB) can create and manage their own keystore. The <code class="codeph">isolate_keystore</code> clause allows a tenant to:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Manage its Transparent Data Encryption keys independently from those of the CDB.</p>
                     </li>
                     <li>
                        <p>Create a password for its independent keystore.</p>
                     </li>
                  </ul>
                  <p>Within the CDB environment you can choose how the keys of a given PDB are protected. PDBs can either protect their keys with an independent password, or use the united password of the CDB. </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. 
                        </p>
                     </li>
                     <li>
                        <p>The <span class="italic"><code class="codeph">isolated_keystore_password</code></span> refers to the independent password of the PDB keystore.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <span class="italic"><code class="codeph">united_keystore_password</code></span> refers to the password of the CDB keystore.
                        </p>
                     </li>
                     <li>
                        <p>The optional <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause instructs the database to create a backup of the keystore before changing the password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-B342EFFC-CF55-48F5-942A-328654C2B1F8">FORCE Clause with <span class="italic">isolate_keystore</span> 
                  </p>
                  <p>The <code class="codeph">FORCE</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT FORCE ISOLATE KEYSTORE</code> command is used when a clone of the PDB is using the master key being isolated. This command copies the keys from the CDB keystore into the isolated PDB keystore. For example:
                  </p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT
FORCE ISOLATE KEYSTORE
IDENTIFIED BY &lt;isolated_keystore_password&gt;
FROM ROOT KEYSTORE
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | &lt;united_keystore_password&gt;]
[WITH BACKUP [USING &lt;backup_identifier&gt;]</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-A1ACF10F-C064-4947-97FD-9BC59A66F773"><span class="italic">unite_keystore</span></p>
                  <p>The <code class="codeph">unite_keystore</code> clause allows a PDB that was independently managing its keystore to change its keystore management mode to united. In united mode <code class="codeph">CDB$ROOT</code> keystore password is used to manage PDBs within the CDB. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. 
                        </p>
                     </li>
                     <li>
                        <p>The <span class="italic"><code class="codeph">isolated_keystore_password</code></span> refers to the independent password of the PDB keystore.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <span class="italic"><code class="codeph">united_keystore_password</code></span> refers to the password of the CDB keystore.
                        </p>
                     </li>
                     <li>
                        <p>The optional <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause instructs the database to create a backup of the keystore before changing the password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <p>For example:</p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT
UNITE KEYSTORE
IDENTIFIED BY &lt;isolated_keystore_password&gt;
WITH ROOT KEYSTORE
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | &lt;united_keystore_password&gt;]
[WITH BACKUP [USING &lt;backup_identifier&gt;]</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-80A7C71F-5E93-4DA4-96C6-492D592EBEA4"><span class="italic">key_management_clauses</span></p>
                  <p>Use these clauses to perform the following key management operations:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Create and activate a master encryption key</p>
                     </li>
                     <li>
                        <p>Set the tag for an encryption key</p>
                     </li>
                     <li>
                        <p>Export encryption keys from a keystore into a file</p>
                     </li>
                     <li>
                        <p>Import encryption keys from a file into a keystore</p>
                     </li>
                     <li>
                        <p>Migrate from a password-protected software keystore to a hardware keystore</p>
                     </li>
                     <li>
                        <p>Migrate from a hardware keystore to a password-protected software keystore</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__SET_KEY-52AF4A21">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-E4E28A09-7746-4C5D-81CC-7267491C98FE"><span class="italic">set_key</span></p>
                  <p>This clause creates a new master encryption key and activates it. You can use this clause to create the first master encryption key in a keystore or to rotate (change) the master encryption key. If a master encryption key is active when you use this clause, then it is deactivated before the new master encryption key is activated. The keystore that contains the key can be a password-protected software keystore or a hardware keystore. The keystore must be open.</p>
                  <p>Specify the desired value for your TDE Master Key ID (<code class="codeph">MKID</code>) and desired value of the TDE Master Encryption Key (<code class="codeph">MK</code> ) to create your own TDE Master Encryption Key.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>In TDE encrypted databases, the TDE Master Key ID(<code class="codeph">MKID</code>) is used to keep track of which TDE Master Encryption Key is in use. The <code class="codeph">MKID:MK</code> option allows both the <code class="codeph">MKID</code> and the <code class="codeph">MK</code> to be specified. 
                        </p>
                     </li>
                     <li>
                        <p>If only the <code class="codeph">MK</code> is specified, the database generates a <code class="codeph">MKID</code> for you, so that you can keep track of the TDE Master Encryption Key having the <code class="codeph">MK</code> value that you specified.
                        </p>
                     </li>
                     <li>
                        <p>If the <code class="codeph">MKID</code> is invalid, for example if it is the wrong length, or if it is a string of zeroes, you will see the following error: <code class="codeph">ORA-46685: invalid master key identifier or master key value.</code></p>
                     </li>
                     <li>
                        <p>If the <code class="codeph">MKID</code> you specified is the same as the <code class="codeph">MKID</code> of an existing TDE Master Encryption Key  in the keystore, you will see the following error: <code class="codeph">ORA-46684: master key identifier exists  in the keystore.</code></p>
                     </li>
                     <li>
                        <p>If either the <code class="codeph">MKID</code> or the <code class="codeph">MK</code> is invalid, you will see the following error: <code class="codeph">ORA-46685: invalid master key identifier or master key value.</code></p>
                     </li>
                     <li>
                        <p>You can specify the <code class="codeph">MKID:MK</code> option for the <code class="codeph">set_key</code> clause and <code class="codeph">create_key</code> clause.
                        </p>
                     </li>
                  </ul>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>Specify the optional <code class="codeph">USING</code> <code class="codeph">TAG</code> clause to associate a tag to the new master encryption key. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE">Notes on the USING TAG Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>If you specify the <code class="codeph">USING</code> <code class="codeph">ALGORITHM</code> clause, then the database creates a master encryption key that conforms to the specified encryption algorithm. For <span class="italic"><code class="codeph">encrypt_algorithm</code></span>, you can specify <code class="codeph">AES256</code>, <code class="codeph">ARIA256</code>, <code class="codeph">GOST256</code>, or <code class="codeph">SEED128</code>. To specify this clause, the <code class="codeph">COMPATIBLE</code> initialization parameter must be set to <code class="codeph">12</code>.<code class="codeph">2</code> or higher. If you omit this clause, then the default is <code class="codeph">AES256</code>.
                        </p>
                        <p>The ARIA, SEED, and GOST algorithms are country-specific national and government standards for encryption and hashing. See <a href="../dbseg/configuring-network-data-encryption-and-integrity.html#DBSEG1047" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before the new master encryption key is created. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">CONTAINER</code> clause applies when you are connected to a CDB.
                        </p>
                        <p>If the current container is a PDB, then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to create and activate a new master encryption key in the PDB. A master encryption key must exist in the root before you create a master encryption key in the PDB.
                        </p>
                        <p>If the current container is the root, then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to create and activate a new master encryption key in the root, or specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> to create and activate new master encryption keys in the root and in all PDBs.
                        </p>
                        <p>If you omit this clause, then <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> is the default.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-A37AFA12-6D9D-452D-B42F-8B8A47B536FC">
                     <p class="notep1">See Also:</p>
                     <p><a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG9527" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on creating and activating a master encryption key
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__CREATE_KEY-52AF5596">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5462340C-2F5D-401F-B0E2-2116B9DE5583"><span class="italic">create_key</span></p>
                  <p>For details on specifying the <code class="codeph">MKID:MK</code> option, see the semantics for the <code class="codeph">set_key</code> clause. 
                  </p>
                  <p>This clause lets you create a master encryption key for later use. You can subsequently activate the key by using the <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEIBAF">use_key</a></span> clause. The keystore that contains the key can be a password-protected software keystore or a hardware keystore. The keystore must be open.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>Specify the optional <code class="codeph">USING</code> <code class="codeph">TAG</code> clause to associate a tag to the encryption key. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE">Notes on the USING TAG Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>If you specify the <code class="codeph">USING</code> <code class="codeph">ALGORITHM</code> clause, then the database creates a master encryption key that conforms to the specified encryption algorithm. For <span class="italic"><code class="codeph">encrypt_algorithm</code></span>, you can specify <code class="codeph">AES256</code>, <code class="codeph">ARIA256</code>, <code class="codeph">GOST256</code>, or <code class="codeph">SEED128</code>. To specify this clause, the <code class="codeph">COMPATIBLE</code> initialization parameter must be set to <code class="codeph">12</code>.<code class="codeph">2</code> or higher. If you omit this clause, then the default is <code class="codeph">AES256</code>.
                        </p>
                        <p>The ARIA, SEED, and GOST algorithms are country-specific national and government standards for encryption and hashing. See <a href="../dbseg/configuring-network-data-encryption-and-integrity.html#DBSEG1047" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore in which the key will be created. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before the key is created. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">CONTAINER</code> clause applies when you are connected to a CDB.
                        </p>
                        <p>If the current container is a PDB, then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to create a master encryption key in the PDB. A master encryption key must exist in the root before you create a master encryption key in the PDB
                        </p>
                        <p>If the current container is the root, then specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> to create a master encryption key in the root, or specify <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> to create master encryption keys in the root and in all PDBs.
                        </p>
                        <p>If you omit this clause, then <code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> is the default.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-91BBB94B-412F-4765-8E1D-AEDB3E2580BB">
                     <p class="notep1">See Also:</p>
                     <p><a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10414" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on creating a master encryption key for later use
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEIBAF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5A652755-8D2C-4460-B822-DE28A7F8F00B"><span class="italic">use_key</span></p>
                  <p>This clause lets you activate a master encryption key that has already been created. If a master encryption key is active when you use this clause, then it is deactivated before the new master encryption key is activated. The keystore that contains the key can be a password-based software keystore or a hardware keystore. The keystore must be open</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">key_id</code></span>, specify the identifier of the key that you want to activate. You can find the key identifier by querying the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                        </p>
                     </li>
                     <li>
                        <p>Specify the optional <code class="codeph">USING</code> <code class="codeph">TAG</code> clause to associate a tag to the encryption key. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE">Notes on the USING TAG Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore that contains the key. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before the key is activated. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-110CD1D5-B916-4704-88A2-CAF882AB47A8">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10419" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on activating a master encryption key
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-BD8CC4A3-9274-4F26-817B-A4D876E457EE"><span class="italic">set_key_tag</span></p>
                  <p>This clause lets you set the tag for the specified encryption key. The tag is an optional, user-defined descriptor for the key. If the key has no tag, then use this clause to create a tag. If the key already has a tag, then use this clause to replace the tag. You can view encryption key tags by querying the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view. The keystore must be open.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For <span class="italic"><code class="codeph">tag</code></span>, specify an alphanumeric string. Enclose <span class="italic"><code class="codeph">tag</code></span> in single quotation marks.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">key_id</code></span>, specify the identifier of the encryption key. You can find the key identifier by querying the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore that contains the key. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before you set the key tag. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-6103784E-27E1-4EE7-B2DD-276F7F45577E">
                     <p class="notep1">See Also:</p>
                     <p><a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10335" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on setting a key tag
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEACDI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-894F9B0E-AEB2-43F8-9223-17BDCDB4FD45"><span class="italic">export_keys</span></p>
                  <p>Use this clause to export one or more encryption keys from a password-protected software keystore into a file. The keystore must be open. Each encryption key is exported together with its key identifier and key attributes. The exported keys are protected in the file with a password (secret). You can subsequently import one or more of the keys into a password-protected software keystore by using the <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFGECA">import_keys</a></span> clause.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>Specify <span class="italic"><code class="codeph">secret</code></span> to set the password (secret) that protects the keys in the file. The secret is an alphanumeric string. You can optionally enclose the secret in double quotation marks. Quoted and nonquoted secrets are case sensitive.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">filename</code></span>, specify the full path name of the file to which the keys are to be exported. Enclose <span class="italic"><code class="codeph">filename</code></span> in single quotation marks.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore that contains the keys you want to export. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">WITH</code> <code class="codeph">IDENTIFIER</code> <code class="codeph">IN</code> clause to specify one or more encryption keys that you would like to export using one of the following methods:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use <span class="italic"><code class="codeph">key_id</code></span> to specify the identifier of the encryption key you would like to export. You can specify more than one <span class="italic"><code class="codeph">key_id</code></span> in a comma-separated list. You can find key identifiers by querying the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                              </p>
                           </li>
                           <li>
                              <p>Use <span class="italic"><code class="codeph">subquery</code></span> to specify a query that returns a list of key identifiers for the encryption keys you would like to export. For example, the following <span class="italic"><code class="codeph">subquery</code></span> returns the key identifiers for all encryption keys in the database whose tags begin with the string <code class="codeph">mytag</code>:
                              </p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE TAG LIKE 'mytag%'
</pre><p>Be aware that Oracle Database executes <span class="italic"><code class="codeph">subquery</code></span> within the current user's rights and not with definer's rights.
                              </p>
                           </li>
                           <li>
                              <p>If you omit the <code class="codeph">WITH</code> <code class="codeph">IDENTIFIER</code> <code class="codeph">IN</code> clause, then all encryption keys in the database are exported.
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold">Restriction on the WITH IDENTIFIER IN Clause</span></p>
                  <p>In a multitenant environment, you cannot specify <code class="codeph">WITH</code> <code class="codeph">IDENTIFIER</code> <code class="codeph">IN</code> when exporting keys from a PDB. This ensures that all of the keys in the PDB are exported, along with metadata about the active encryption key. If you subsequently clone the PDB, or unplug and plug in the PDB, then you can use the export file to import the keys into the cloned or newly plugged-in PDB and preserve information about the active encryption key.
                  </p>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8AFC9E63-12BD-421E-8107-8ECF971E73C8">
                     <p class="notep1">See Also:</p>
                     <p><a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10424" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on exporting encryption keys
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFGECA">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-CA5C5D63-0C4C-4A34-A5F5-F82171E7A685"><span class="italic">import_keys</span></p>
                  <p>Use this clause to import one or more encryption keys from a file into a password-based software keystore. The keystore must be open. Each encryption key is imported together with its key identifier and key attributes. The keys must have been previously exported to the file by using the <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEACDI">export_keys</a></span> clause. You cannot re-import keys that have already been imported into the keystore.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">secret</code></span>, specify the password (secret) that protects the keys in the file. The secret is an alphanumeric string. You can optionally enclose the secret in double quotation marks. Quoted and nonquoted secrets are case sensitive.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">filename</code></span>, specify the full path name of the file from which the keys are to be imported. Enclose <span class="italic"><code class="codeph">filename</code></span> in single quotation marks.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore into which you want to import the keys. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before the keys are imported. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5F2AB37D-F9EA-464C-B608-0E57769F520C">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10427" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on importing encryption keys
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0499C829-F8B1-466C-B213-4BCFC90FF580"><span class="italic">migrate_key</span></p>
                  <p>Use this clause to migrate from a password-protected software keystore to a hardware keystore. This clause decrypts existing table encryption keys and tablespace encryption keys with the master encryption key in the software keystore and then re-encrypts them with the newly created master encryption key in the hardware keystore.</p>
                  <div class="infoboxnote" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-D3B93698-BDC8-4F45-9349-398244660C81">
                     <p class="notep1">Note:</p>
                     <p>The use of this clause is only one step in a series of steps for migrating from a password-protected software keystore to a hardware keystore. Refer to <a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10377" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for the complete set of steps before you use this clause.
                     </p>
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">HSM_auth_string</code></span>, specify the hardware keystore password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystores are closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">software_keystore_password</code></span>., specify the password-based software keystore password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before the migration occurs. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5DAF656C-6921-4BD4-9D68-74A95C44FA8A"><span class="italic">reverse_migrate_key</span></p>
                  <p>Use this clause to migrate from a hardware keystore to a password-protected software keystore. This clause decrypts existing table encryption keys and tablespace encryption keys with the master encryption key in the hardware keystore and then re-encrypts them with the newly created master encryption key in the password-protected software keystore.</p>
                  <div class="infoboxnote" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-33DB4C7C-12A0-4202-A187-7FCC5B996572">
                     <p class="notep1">Note:</p>
                     <p>The use of this clause is only one step in a series of steps for migrating from a hardware keystore to a password-protected software keystore. Refer to <a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10327" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for the complete set of steps before you use this clause.
                     </p>
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">software_keystore_password</code></span>., specify the password-based software keystore password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystores are closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">HSM_auth_string</code></span>, specify the hardware keystore password. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-D42FE53B-0076-463D-9AA1-7ABF13C27A71"><span class="italic">move_keys</span></p>
                  <p>Use the <code class="codeph">move_keys</code> clause to move an encryption key into a new keystore. You must be a user with the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privileges to log into the database. You must query the <code class="codeph">KEY_ID</code>column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view to find the key identifier of the keystore that you want to move the keys to. 
                  </p>
                  <p><code class="codeph">keystore_location1</code> is the path to the wallet directory that will store the new keystore <code class="codeph">.p12</code> file. By default, this directory is in <code class="codeph">$ORACLE_BASE/admin/db_unique_name/wallet</code>.
                  </p>
                  <p><code class="codeph">keystore1_password</code> is the password for the new keystore.
                  </p>
                  <p><code class="codeph">keystore_password</code> is the password for the keystore from which the key is moving.
                  </p>
                  <p><code class="codeph">key_identifier</code> is the key identifier that you find from querying the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view. Enclose this setting in single quotation marks (' ').
                  </p>
                  <p><code class="codeph">subquery</code> can be used to find the exact key identifier that you want.
                  </p>
                  <p><code class="codeph">backup_identifier</code> is an optional description of the backup. Enclose <code class="codeph">backup_identifier</code> in single quotation marks (' ').
                  </p>
                  <p>For example:</p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT MOVE KEYS 
TO NEW KEYSTORE $ORACLE_BASE/admin/orcl/wallet 
IDENTIFIED BY keystore_password 
FROM FORCE KEYSTORE 
IDENTIFIED BY keystore_password 
WITH IDENTIFIER IN 
(SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE ROWNUM &lt; 2);</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-96D2A2FB-BA66-4BC0-9A69-409C20392A03"><span class="italic">secret_management_clauses</span></p>
                  <p>Use these clauses to add, update, and delete secrets in a password-protected software keystores or a hardware keystore.</p>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5A9F98AF-E79F-47F5-8F65-C5FE93E77BE8">
                     <p class="notep1">See Also:</p>
                     <p><a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10398" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on adding, updating, and deleting secrets
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-EAF01301-B4FB-476A-BE99-9F9A42035FDC"><span class="italic">add_update_secret</span></p>
                  <p>This clause lets you add a secret to a keystore or update an existing secret in a keystore. The keystore must be open.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Specify <code class="codeph">ADD</code> to add a secret to a keystore.
                        </p>
                     </li>
                     <li>
                        <p>Specify <code class="codeph">UPDATE</code> to update an existing secret in a keystore.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">secret</code></span>, specify the secret to be added or updated. The secret is an alphanumeric string. Enclose the secret in single quotation marks.
                        </p>
                     </li>
                     <li>
                        <p>For <span class="italic"><code class="codeph">client_identifier</code></span>, specify an alphanumeric string used to identify the secret. Enclose <span class="italic"><code class="codeph">client_identifier</code></span> in single quotation marks. This value is case-sensitive.
                        </p>
                     </li>
                     <li>
                        <p>Specify the optional <code class="codeph">USING</code> <code class="codeph">TAG</code> clause to associate a tag to <span class="italic"><code class="codeph">secret</code></span>. The <span class="italic"><code class="codeph">tag</code></span> is an optional, user-defined descriptor for the secret. Enclose the tag in single quotation marks. You can view secret tags by querying the <code class="codeph">SECRET_TAG</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before adding or updating the secret in a password-based software keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-2D97D8F8-7E11-4901-B1C6-1845FE140DE9"><span class="italic">delete_secret</span></p>
                  <p>This clause lets you delete a secret from a keystore. The keystore must be open.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For <span class="italic"><code class="codeph">client_identifier</code></span>, specify an alphanumeric string used to identify the secret. Enclose <span class="italic"><code class="codeph">client_identifier</code></span> in single quotation marks. You can view client identifiers by querying the <code class="codeph">CLIENT</code> column of the <code class="codeph">V$CLIENT_SECRETS</code> view.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause enables this operation even if the keystore is closed. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">Notes on the FORCE KEYSTORE Clause</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> clause to specify the password for the keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">Notes on Specifying Keystore Passwords</a>"</span> for more information.
                        </p>
                     </li>
                     <li>
                        <p>Specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, and optionally the <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause, to create a backup of the keystore before deleting the secret from a password-based software keystore. Refer to <span class="q">"<a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">Notes on the WITH BACKUP Clause</a>"</span> for more information.
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE"><span class="bold">Notes on the USING TAG Clause</span></p>
                  <p>Many <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> operations include the <code class="codeph">USING</code> <code class="codeph">TAG</code> clause, which lets you associate a tag to an encryption key. The <span class="italic"><code class="codeph">tag</code></span> is an optional, user-defined descriptor for the key. It is a character string enclosed in single quotation marks.
                  </p>
                  <p>You can view encryption key tags by querying the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                  </p>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF"><span class="bold">Notes on the FORCE KEYSTORE Clause</span></p>
                  <p>When a auto-login wallet exists, the <code class="codeph">FORCE KEYSTORE</code> clause enables a keystore operation even if the keystore is closed.. The behavior of this clause depends on whether you are connected to a non-CDB, a CDB root, or a PDB.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>When you are connected to a non-CDB:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the password-protected software or hardware keystore is closed, then the database opens the password-protected software or hardware keystore while the operation is performed and leaves it open, and then updates the auto-login keystore, if one exists, with the new information.</p>
                           </li>
                           <li>
                              <p>If the auto-login keystore is open, then the database opens the password-protected software or hardware keystore temporarily while the operation is performed and updates the auto-login keystore with the new information, without switching out the auto-login keystore.</p>
                           </li>
                           <li>
                              <p>If the password-protected software or hardware keystore is open, then the <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code> clause is not necessary and has no effect.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When you are connected to the CDB root:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To perform an operation on the CDB root keystore (<code class="codeph">CONTAINER=CURRENT</code>), the CDB root keystore must be open. Therefore, the behavior described for a non-CDB applies to the CDB root.
                              </p>
                           </li>
                           <li>
                              <p>To perform an operation on the CDB root keystore and all PDB keystores (<code class="codeph">CONTAINER=ALL</code>), the CDB root keystore and all PDB keystores must be open. Therefore, the behavior described for a non-CDB applies to the CDB root and each PDB. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When you are connected to a PDB:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To perform an operation on a PDB keystore, the CDB root keystore and the keystore for that PDB must be open. Therefore, the behavior described for a non-CDB applies to the CDB root and that PDB.</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD"><span class="bold">Notes on Specifying Keystore Passwords</span></p>
                  <p>Specify keystore passwords as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For a password-protected software keystore, specify the password as a character string. You can optionally enclose the password in double quotation marks. Quoted and nonquoted passwords are case sensitive. Keystore passwords adhere to the same rules as database user passwords. Refer to the <a href="CREATE-USER.html#GUID-F0246961-558F-480B-AC0F-14B50134621C__BABHHFHD">BY password</a> clause of <code class="codeph">CREATE</code> <code class="codeph">USER</code> for the complete details.
                        </p>
                     </li>
                     <li>
                        <p>For a hardware keystore, specify the password as a string of the form <code class="codeph">"</code><span class="italic"><code class="codeph">user_id</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">password</code></span><code class="codeph">"</code> where:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">user_id</code></span> is the user ID created for the database using the HSM management interface
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">password</code></span> is the password created for the user ID using the HSM management interface
                              </p>
                           </li>
                        </ul>
                        <p>Enclose the <span class="italic"><code class="codeph">user_id</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">password</code></span> string in double quotation marks (<code class="codeph">"</code> <code class="codeph">"</code>) and separate <span class="italic"><code class="codeph">user_id</code></span> and <span class="italic"><code class="codeph">password</code></span> with a colon (<code class="codeph">:</code>).
                        </p>
                     </li>
                     <li>
                        <p>If you specify <code class="codeph">EXTERNAL</code> <code class="codeph">STORE</code>, then the database uses the keystore password stored in the external store to perform the operation. This feature enables you to store the password in a separate location where it can be centrally managed and accessed. To use this functionality, you must first set the <code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code> initialization parameter to a location where the keystore password will be stored. Refer to <a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG-GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on configuring an external store for a keystore password.
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB"><span class="bold">Notes on the WITH BACKUP Clause</span></p>
                  <p>Many <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> operations include the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause. This clause applies only to password-protected software keystores. It indicates that the keystore must be backed up before the operation is performed. Therefore, you must either specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause when performing the operation, or issue the <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> <span class="italic"><code class="codeph">backup_clause</code></span> statement immediately <span class="italic">before</span> performing the operation. 
                  </p>
                  <p>When you specify the <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> clause, Oracle Database creates a backup file with a name of the form <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.p12</code>, where <span class="italic"><code class="codeph">timestamp</code></span> is the file creation timestamp in UTC format. The backup file is created in the same directory as the keystore you are backing up.
                  </p>
                  <p>The optional <code class="codeph">USING</code> <code class="codeph">'</code><span class="italic"><code class="codeph">backup_identifier</code></span><code class="codeph">'</code> clause lets you specify a backup identifier, which is added to the backup file name. For example, if you specify a backup identifier of <code class="codeph">'Backup1'</code>, then Oracle Database creates a backup file with a name of the form <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">_Backup1.p12</code>.
                  </p>
                  <p>The <code class="codeph">WITH</code> <code class="codeph">BACKUP</code> is mandatory for password-protected software keystores, but optional for hardware keystores.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-1A0CDE8B-82FF-4892-B03E-23D9D2C50A69">Examples</p>
                  <p><span class="bold">Creating a Keystore: Examples</span></p>
                  <p>The following statement creates a password-protected software keystore in directory <code class="codeph">/etc/ORACLE/WALLETS/orcl</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  CREATE KEYSTORE '/etc/ORACLE/WALLETS/orcl'
  IDENTIFIED BY <span class="italic">password</span>;
</pre><p>The following statement creates an auto-login software keystore from the keystore created in the previous statement:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  CREATE AUTO_LOGIN KEYSTORE FROM KEYSTORE '/etc/ORACLE/WALLETS/orcl'
  IDENTIFIED BY <span class="italic">password</span>;</pre><p><span class="bold">Opening a Keystore: Examples</span></p>
                  <p>The following statement opens a password-protected software keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY <span class="italic">password</span>;
</pre><p>If you are connected to a CDB, then the following statement opens a password-protected software keystore in the current container:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY <span class="italic">password</span>
  CONTAINER = CURRENT;
</pre><p>The following statement opens a hardware keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY "<span class="italic">user_id</span>:<span class="italic">password</span>";</pre><p>The following statement opens a keystore whose password is stored in the external store:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY EXTERNAL STORE;
</pre><p><span class="bold">Closing a Keystore: Examples</span></p>
                  <p>The following statement closes a password-protected software keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE
  IDENTIFIED BY <span class="italic">password</span>;
</pre><p>The following statement closes an auto-login software keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE;
</pre><p>The following statement closes a hardware keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE
  IDENTIFIED BY "<span class="italic">user_id</span>:<span class="italic">password</span>";</pre><p>The following statement closes a keystore whose password is stored in the external store:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE
  IDENTIFIED BY EXTERNAL STORE;</pre><p><span class="bold">Backing Up a Keystore: Example</span></p>
                  <p>The following statement creates a backup of a password-protected software keystore. The backup is stored in directory <code class="codeph">/etc/ORACLE/KEYSTORE/DB1</code> and the backup file name contains the tag <code class="codeph">hr.emp_keystore</code>.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  BACKUP KEYSTORE USING 'hr.emp_keystore'
  IDENTIFIED BY <span class="italic">password</span>
  TO '/etc/ORACLE/KEYSTORE/DB1/';</pre><p><span class="bold">Changing a Keystore Password: Example</span></p>
                  <p>The following statement changes the password for a password-protected software keystore. It also creates a backup of the keystore, with the tag <code class="codeph">pwd_change</code>, before changing the password.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  ALTER KEYSTORE PASSWORD IDENTIFIED BY <span class="italic">old_password</span>
  SET <span class="italic">new_password</span> WITH BACKUP USING 'pwd_change';</pre><p><span class="bold">Merging Two Keystores Into a New Keystore: Example</span></p>
                  <p>The following statement merges an auto-login software keystore with a password-protected software keystore to create a new password-protected software keystore at a new location:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  MERGE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1'
  AND KEYSTORE '/etc/ORACLE/KEYSTORE/DB2'
    IDENTIFIED BY <span class="italic">existing_keystore_password</span>
  INTO NEW KEYSTORE '/etc/ORACLE/KEYSTORE/DB3'
    IDENTIFIED BY <span class="italic">new_keystore_password</span>;</pre><p><span class="bold">Merging a Keystore Into an Existing Keystore: Example</span></p>
                  <p>The following statement merges an auto-login software keystore into a password-protected software keystore. It also creates a backup of the password-protected software keystore before performing the merge.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  MERGE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1'
  INTO EXISTING KEYSTORE '/etc/ORACLE/KEYSTORE/DB2'
    IDENTIFIED BY <span class="italic">existing_keystore_password</span>
  WITH BACKUP;</pre><p><span class="bold">Creating and Activating a Master Encryption Key: Examples</span></p>
                  <p>The following statement creates and activates a master encryption key in a password-protected software keystore. It encrypts the key using the <code class="codeph">SEED128</code> algorithm. It also creates a backup of the keystore before creating the new master encryption key.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEY USING ALGORITHM 'SEED128'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre><p>The following statement creates a master encryption key in a password-protected software keystore, but does not activate the key. It also creates a backup of the keystore before creating the new master encryption key.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  CREATE KEY USING TAG 'mykey1'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre><p>The following query displays the key identifier for the master encryption key that was created in the previous statement:</p><pre class="oac_no_warn" dir="ltr">SELECT TAG, KEY_ID
  FROM V$ENCRYPTION_KEYS
  WHERE TAG = 'mykey1';

TAG     KEY_ID
---     ----------------------------------------------------
mykey1  ARgEtzPxpE/Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
</pre><p>The following statement activates the master encryption key that was queried in the previous statement. It also creates a backup of the keystore before activating the new master encryption key.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  USE KEY 'ARgEtzPxpE/Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;</pre><p><span class="bold">Setting a Key Tag: Example</span></p>
                  <p>This example assumes that the keystore is closed. The following statement temporarily opens the keystore and changes the tag to <code class="codeph">mykey2</code> for the master encryption key that was activated in the previous example. It also creates a backup of the keystore before changing the tag.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET TAG 'mykey2' FOR 'ARgEtzPxpE/Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'
  FORCE KEYSTORE
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;</pre><p><span class="bold">Exporting Keys: Examples</span></p>
                  <p>The following statement exports two master encryption keys from a password-protected software keystore to file <code class="codeph">/etc/TDE/export.exp</code>. The statement encrypts the master encryption keys in the file using the secret <code class="codeph">my_secret</code>. The identifiers of the master encryption keys to be exported are provided as a comma-separated list.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET "my_secret"
  TO '/etc/TDE/export.exp'
  IDENTIFIED BY <span class="italic">password</span>
  WITH IDENTIFIER IN 'AdoxnJ0uH08cv7xkz83ovwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',
                     'AW5z3CoyKE/yv3cNT5CWCXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
</pre><p>The following statement exports master encryption keys from a password-protected software keystore to file <code class="codeph">/etc/TDE/export.exp</code>. Only the keys whose tags are <code class="codeph">mytag1</code> or <code class="codeph">mytag2</code> are exported. The master encryption keys in the file are encrypted using the secret <code class="codeph">my_secret</code>. The key identifiers are found by querying the <code class="codeph">V$ENCRYPTION_KEYS</code> view.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET "my_secret"
  TO '/etc/TDE/export.exp'
  IDENTIFIED BY <span class="italic">password</span>
  WITH IDENTIFIER IN
    (SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE TAG IN ('mytag1', 'mytag2'));
</pre><p>The following statement exports all master encryption keys of the database to file <code class="codeph">/etc/TDE/export.exp</code>. The master encryption keys in the file are encrypted using the secret <code class="codeph">my_secret</code>.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET "my_secret"
  TO '/etc/TDE/export.exp'
  IDENTIFIED BY <span class="italic">password</span>;
</pre><p>In a multitenant environment, the following statements exports all master encryption keys of the PDB <code class="codeph">salespdb</code>, along with metadata, to file <code class="codeph">/etc/TDE/salespdb.exp</code>. The master encryption keys in the file are encrypted using the secret <code class="codeph">my_secret</code>. If the PDB is subsequently cloned, or unplugged and plugged back in, then the export file created by this statement can be used to import the keys into the cloned or newly plugged-in PDB.
                  </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET CONTAINER = salespdb;
ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET "my_secret"
  TO '/etc/TDE/salespdb.exp'
  IDENTIFIED BY <span class="italic">password</span>;</pre><p><span class="bold">Importing Keys: Example</span></p>
                  <p>The following statement imports the master encryption keys, encrypted with secret <code class="codeph">my_secret</code>, from file <code class="codeph">/etc/TDE/export.exp</code> to a password-protected software keystore. It also creates a backup of the password-protected software keystore before importing the keys.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  IMPORT KEYS WITH SECRET "my_secret"
  FROM '/etc/TDE/export.exp'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;</pre><p><span class="bold">Migrating a Keystore: Example</span></p>
                  <p>The following statement migrates from a password-protected software keystore to a hardware keystore. It also creates a backup of the password-protected software keystore before performing the migration.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET ENCRYPTION KEY IDENTIFIED BY "<span class="italic">user_id</span>:<span class="italic">password</span>"
  MIGRATE USING <span class="italic">software_keystore_password</span>
  WITH BACKUP;</pre><p><span class="bold">Reverse Migrating a Keystore: Example</span></p>
                  <p>The following statement reverse migrates from a hardware keystore to a password-protected software keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  SET ENCRYPTION KEY IDENTIFIED BY <span class="italic">software_keystore_password</span>
  REVERSE MIGRATE USING "<span class="italic">user_id</span>:<span class="italic">password</span>";</pre><p><span class="bold">Adding a Secret to a Keystore: Examples</span></p>
                  <p>The following statement adds secret <code class="codeph">secret1</code>, with the tag <code class="codeph">My first secret</code>, for client <code class="codeph">client1</code> to a password-protected software keystore. It also creates a backup of the password-protected software keystore before adding the secret.
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  ADD SECRET 'secret1' FOR CLIENT 'client1'
  USING TAG 'My first secret'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre><p>The following statement adds a similar secret to a hardware keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  ADD SECRET 'secret2' FOR CLIENT 'client2'
  USING TAG 'My second secret'
  IDENTIFIED BY "<span class="italic">user_id</span>:<span class="italic">password</span>";</pre><p><span class="bold">Updating a Secret in a Keystore: Examples</span></p>
                  <p>The following statement updates the secret that was created in the previous example in a password-based software keystore. It also creates a backup of the password-protected software keystore before updating the secret.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  UPDATE SECRET 'secret1' FOR CLIENT 'client1'
  USING TAG 'New Tag 1'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre><p>The following statement updates the secret that was created in the previous example in a hardware keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  UPDATE SECRET 'secret2' FOR CLIENT 'client2'
  USING TAG 'New Tag 2'
  IDENTIFIED BY "<span class="italic">user_id</span>:<span class="italic">password</span>";</pre><p><span class="bold">Deleting a Secret from a Keystore: Examples</span></p>
                  <p>The following statement deletes the secret that was updated in the previous example from a password-protected software keystore. It also creates a backup of the password-protected software keystore before deleting the secret.</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  DELETE SECRET FOR CLIENT 'client1'
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre><p>The following statement deletes the secret that was updated in the previous example from a hardware keystore:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
  DELETE SECRET FOR CLIENT 'client2'
  IDENTIFIED BY "<span class="italic">user_id</span>:<span class="italic">password</span>";</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id='00083.data-integrity.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Maintaining Data Integrity in Database Applications</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="indexes.html" title="Previous" type="text/html">
      <link rel="next" href="plsql-for-application-developers.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="indexes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="plsql-for-application-developers.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">SQL for Application Developers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Maintaining Data Integrity in Database Applications</li>
            </ol>
            <a id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8" name="GUID-398ECF26-572D-49D4-B957-803A962A8BE8"></a><a id="ADFNS1023"></a><a id="ADFNS004"></a>
            
            <h2 id="ADFNS-GUID-398ECF26-572D-49D4-B957-803A962A8BE8" class="sect2"><span class="enumeration_chapter">12 </span>Maintaining Data Integrity in Database Applications
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>In a database application, <span class="bold">maintaining data integrity</span> means ensuring that the data in the tables that the application manipulates conform to the appropriate business rules. A <span class="bold">business rule</span> specifies a condition or relationship that must always be true or must always be false. For example, a business rule might be that no employee can have a salary over $100,000 or that every employee in the <code class="codeph">EMPLOYEES</code> table must belong to a department in the <code class="codeph">DEPARTMENTS</code> table. Business rules vary from company to company, because each company defines its own policies about salaries, employee numbers, inventory tracking, and so on.
               </p>
               <p>There are several ways to ensure data integrity, and the one to use whenever possible is the <span class="bold">integrity constraint</span> (or <span class="bold">constraint</span>).
               </p>
               <p>This chapter supplements this information:</p>
               <div class="infoboxnote" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__GUID-B6C051EE-FAA7-4B89-A44B-5706FDF281A1">
                  <p class="notep1">Note:</p>
                  <p>This chapter applies to only to constraints on tables. Constraints on views do not help maintain data integrity or have associated indexes. Instead, they enable query rewrites on queries involving views, thereby improving performance when using materialized views and other data warehousing features.</p>
               </div>
               <div class="infoboxnotealso" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__ORACLEDATABASECONCEPTSFORINFORMATIO-CA456CAE">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT021" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about data integrity and constraints
                        </p>
                     </li>
                     <li>
                        <p><a href="../admin/managing-schema-objects.html#ADMIN11537" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about managing constraints
                        </p>
                     </li>
                     <li>
                        <p><a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for the syntactic and semantic information about constraints 
                        </p>
                     </li>
                     <li>
                        <p><a href="../sqlrf/constraint.html#SQLRF52181" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about constraints on views
                        </p>
                     </li>
                     <li>
                        <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information about using constraints in data warehouses
                        </p>
                     </li>
                     <li>
                        <p><a href="sql-data-types.html#GUID-A3D8B49A-EEE1-4B76-BEC0-6FF821BBE005">How the Correct Data Type Increases Data Integrity</a> for more information about the role that data type plays in data integrity
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="section">
                  <p class="subhead1" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__GUID-C88BEE2C-D2BD-4E37-A993-C09573828915">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8">Enforcing Business Rules with Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD">Enforcing Business Rules with Both Constraints and Application Code</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E">Creating Indexes for Use with Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D">When to Use NOT NULL Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99">When to Use Default Column Values</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88">Choosing a Primary Key for a Table (PRIMARY KEY Constraint)</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7">When to Use UNIQUE Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53">Enforcing Referential Integrity with FOREIGN KEY Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA">Minimizing Space and Time Overhead for Indexes Associated with Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7">Guidelines for Indexing Foreign Keys</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1">Referential Integrity in a Distributed Database</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-8F512577-F51D-4309-B987-C364D1D71779">When to Use CHECK Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8">Examples of Defining Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD">Enabling and Disabling Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0">Modifying Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D">Renaming Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC">Dropping Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2">Managing FOREIGN KEY Constraints </a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4">Viewing Information About Constraints</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS1024"></a><a id="ADFNS262"></a><div class="sect2"><a id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8" name="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8"></a><h3 id="ADFNS-GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8" class="sect3">Enforcing Business Rules with Constraints</h3>
               <div>
                  <p>Whenever possible, enforce business rules with constraints. Constraints have the advantage of speed: Oracle Database can check that all the data in a table obeys a constraint faster than application code can do the equivalent checking.</p>
                  <p><a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">Example 12-1</a> creates a table of departments, a table of employees, a constraint to enforce the rule that all values in the department table are unique, and a constraint to enforce the rule that every employee must work for a valid department.
                  </p>
                  <div class="example" id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">
                     <p class="titleinexample">Example 12-1 Enforcing Business Rules with Constraints</p>
                     <p>Create table of departments:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE dept_tab;
CREATE TABLE dept_tab (
  deptname VARCHAR2(20),
  deptno   INTEGER
);
 </pre><p>Create table of employees:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE emp_tab;
CREATE TABLE emp_tab (
  empname VARCHAR2(80),
  empno   INTEGER,
  deptno  INTEGER
);
</pre><p>Create constraint to enforce rule that all values in department table are unique:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept_tab ADD PRIMARY KEY (deptno);
</pre><p>Create constraint to enforce rule that every employee must work for a valid department:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE emp_tab ADD FOREIGN KEY (deptno) REFERENCES dept_tab(deptno);
</pre><p>Now, whenever you insert an employee record into <code class="codeph">emp_tab</code>, Oracle Database checks that its <code class="codeph">deptno</code> value appears in <code class="codeph">dept_tab</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <p>Suppose that instead of using a constraint to enforce the rule that every employee must work for a valid department, you use a trigger that queries <code class="codeph">dept_tab</code> to check that it contains the <code class="codeph">deptno</code> value of the employee record to be inserted into <code class="codeph">emp_tab</code>. Because the query uses consistent read (CR), it might miss uncommitted changes from other transactions.
                  </p>
                  <div class="infoboxnotealso" id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__GUID-8FE26EA1-8EDF-4ADF-A3CA-BFE833BD9E1C">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntactic and semantic information about constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="../cncpt/data-integrity.html#CNCPT33334" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for the complete list of advantages of integrity constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="../cncpt/server-side-programming.html#CNCPT88945" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about using triggers to enforce business rules
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1025"></a><a id="ADFNS263"></a><div class="sect2"><a id="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD" name="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD"></a><h3 id="ADFNS-GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD" class="sect3">Enforcing Business Rules with Both Constraints and Application Code</h3>
               <div>
                  <p>Enforcing business rules with both constraints and application code is recommended when application code can determine that data values are invalid without querying tables. The application code can provide immediate feedback to the user and reduce the load on the database by preventing attempts to insert invalid data into tables.</p>
                  <p>For <a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">Example 12-2</a>, assume that <a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">Example 12-1</a> was run and then this column was added to the table <code class="codeph">emp_tab</code>:
                  </p><pre class="oac_no_warn" dir="ltr">empgender VARCHAR2(1)
</pre><p>The only valid values for <code class="codeph">empgender</code> are <code class="codeph">'M'</code> and <code class="codeph">'F'</code>. When someone tries to insert a row into <code class="codeph">emp_tab</code> or update the value of <code class="codeph">emp_tab</code>.<code class="codeph">empgender</code>, application code can determine whether the new value for <code class="codeph">emp_tab</code>.<code class="codeph">empgender</code> is valid without querying a table. If the value is invalid, the application code can notify the user instead of trying to insert the invalid value, as in <a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">Example 12-2</a>.
                  </p>
                  <div class="example" id="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">
                     <p class="titleinexample">Example 12-2 Enforcing Business Rules with Both Constraints and Application Code</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE add_employee (
  e_name   emp_tab.empname%TYPE,
  e_gender emp_tab.empgender%TYPE,
  e_number emp_tab.empno%TYPE,
  e_dept   emp_tab.deptno%TYPE
) AUTHID DEFINER IS
BEGIN
  <span class="bold">IF UPPER(e_gender) IN ('M','F') THEN</span>
    <span class="bold">INSERT INTO emp_tab VALUES (e_name, e_gender, e_number, e_dept);</span>
  <span class="bold">ELSE</span>
    <span class="bold">DBMS_OUTPUT.PUT_LINE('Gender must be M or F.');</span>
  <span class="bold">END IF;</span>
END;
/
 
BEGIN
  add_employee ('Smith', <span class="bold">'H'</span>, 356, 20);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">Gender must be M or F.</span></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS264"></a><div class="sect2"><a id="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E" name="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E"></a><h3 id="ADFNS-GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E" class="sect3">Creating Indexes for Use with Constraints</h3>
               <div>
                  <p>When a unique or primary key constraint is enabled, Oracle Database creates an index automatically, but Oracle recommends that you create these indexes explicitly. If you want to use an index with a foreign key constraint, then you must create the index explicitly.</p>
                  <p>When a constraint can use an existing index, Oracle Database does not create an index for that constraint. Note that:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A unique or primary key constraint can use either a unique index, an entire nonunique index, or the first few columns of a nonunique index.</p>
                     </li>
                     <li>
                        <p>If a unique or primary key constraint uses a nonunique index, then no other unique or primary key constraint can use that nonunique index.</p>
                     </li>
                     <li>
                        <p>The column order in the constraint and index need not match.</p>
                     </li>
                     <li>
                        <p>The object number of the index used by a unique or primary key constraint is stored in <code class="codeph">CDEF$</code>.<code class="codeph">ENABLED</code> for that constraint. No static data dictionary view or dynamic performance view shows this information.
                        </p>
                        <p>If an enabled unique or primary key constraint is using an index, you cannot drop only the index. To drop the index, you must either drop the constraint itself or disable the constraint and then drop the index.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E__GUID-10A66D65-6174-4F8C-B8A5-66553DB6A389">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11725" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about indexes associated with constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-schema-objects.html#ADMIN11546" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about disabling and dropping constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11723" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating indexes explicitly
                           </p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-5C53546D-8C54-4F38-B472-835F94030016" title="You can create composite indexes to computer arithmetic expressions.You can use the NLSSORT API for language-dependent sorting.">Using Indexes in Database Applications</a></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about creating indexes explicitly
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS266"></a><a id="ADFNS265"></a><div class="sect2"><a id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D" name="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D"></a><h3 id="ADFNS-GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D" class="sect3">When to Use NOT NULL Constraints</h3>
               <div>
                  <p>By default, a column can contain a <code class="codeph">NULL</code> value. To ensure that the column never contains a <code class="codeph">NULL</code> value, use the <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint.
                  </p>
                  <p>Use a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint in both of these situations:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A column must contain a non-<code class="codeph">NULL</code> value.
                        </p>
                        <p>For example, in the table <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code>, each employee must have an employee ID. Therefore, the column <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code>.<code class="codeph">EMPLOYEE_ID</code> has a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint, and nobody can insert a new employee record into <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code> without specifying a non-<code class="codeph">NULL</code> value for <code class="codeph">EMPLOYEE_ID</code>. You <span class="italic">can</span> insert a new employee record into <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code> without specifying a salary; therefore, the column <code class="codeph">HR</code>.<code class="codeph">EMPLOYEES</code>.<code class="codeph">SALARY</code> does <span class="italic">not</span> have a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint.
                        </p>
                     </li>
                     <li>
                        <p>You want to allow index scans of the table, or allow an operation that requires indexing all rows.</p>
                        <p>Oracle Database indexes do not store keys whose values are all <code class="codeph">NULL</code>. Therefore, for the preceding kinds of operations, at least one indexed column must have a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint.
                        </p>
                     </li>
                  </ul>
                  <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__CHDFBFDH">Example 12-3</a> uses the SQL*Plus command <code class="codeph">DESCRIBE</code> to show which columns of the <code class="codeph">DEPARTMENTS</code> table have <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints, and then shows what happens if you try to insert <code class="codeph">NULL</code> values in columns that have <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints.
                  </p>
                  <div class="example" id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__CHDFBFDH">
                     <p class="titleinexample">Example 12-3 Inserting NULL Values into Columns with NOT NULL Constraints</p><pre class="oac_no_warn" dir="ltr">DESCRIBE DEPARTMENTS;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ------------
 
 DEPARTMENT_ID                             NOT NULL NUMBER(4)
 DEPARTMENT_NAME                           NOT NULL VARCHAR2(30)
 MANAGER_ID                                         NUMBER(6)
 LOCATION_ID                                        NUMBER(4)
</pre><p>Try to insert <code class="codeph">NULL</code> into <code class="codeph">DEPARTMENT_ID</code> column:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO DEPARTMENTS (
 <span class="bold">DEPARTMENT_ID</span>, DEPARTMENT_NAME, MANAGER_ID, LOCATION_ID
)
VALUES (<span class="bold">NULL</span>, 'Sales', 200, 1700);
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">VALUES (NULL, 'Sales', 200, 1700)
        *
ERROR at line 4:
ORA-01400: cannot insert NULL into ("HR"."DEPARTMENTS"."DEPARTMENT_ID")
</pre><p>Omitting a value for a column that cannot be <code class="codeph">NULL</code> is the same as assigning it the value <code class="codeph">NULL</code>:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO DEPARTMENTS (
  DEPARTMENT_NAME, MANAGER_ID, LOCATION_ID
)
VALUES ('Sales', 200, 1700);
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO DEPARTMENTS (
*
ERROR at line 1:
ORA-01400: cannot insert NULL into ("HR"."DEPARTMENTS"."DEPARTMENT_ID")
</pre></div>
                  <!-- class="example" -->
                  <p>You can prevent the preceding error by giving <code class="codeph">DEPARTMENT_ID</code> a non-<code class="codeph">NULL</code> default value.
                  </p>
                  <p>You can combine <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints with other constraints to further restrict the values allowed in specific columns. For example, the combination of <code class="codeph">NOT</code> <code class="codeph">NULL</code> and <code class="codeph">UNIQUE</code> constraints forces the input of values in the <code class="codeph">UNIQUE</code> key, eliminating the possibility that data in a new conflicts with data in an existing row.
                  </p>
                  <div class="infoboxnotealso" id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__GUID-779D7FAC-A3D4-45CA-9088-8833F65CCFC6">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sqlrf/constraint.html#SQLRF30038" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint
                           </p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99">When to Use Default Column Values</a> for more information about the usage of default column values
                           </p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__BEIBDAJJ">UNIQUE and NOT NULL Constraints on the Foreign Key</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS267"></a><div class="sect2"><a id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99" name="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99"></a><h3 id="ADFNS-GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99" class="sect3">When to Use Default Column Values</h3>
               <div>
                  <p>When an <code class="codeph">INSERT</code> statement does not specify a value for a specific column, that column receives its default value. By default, that default value is <code class="codeph">NULL</code>. You can change the default value when you define the column while creating the table or when you alter the column using the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                  </p>
                  <div class="infoboxnote" id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99__GUID-CB68FE82-4942-4FE9-B7E7-4343BFCE20D9">
                     <p class="notep1">Note:</p>
                     <p>Giving a column a non-<code class="codeph">NULL</code> default value does not ensure that the value of the column will never have the value <code class="codeph">NULL</code>, as the <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint does.
                     </p>
                  </div>
                  <p>Use a default column value in these situations:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The column has a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint.
                        </p>
                        <p>Giving the column a non-<code class="codeph">NULL</code> default value prevents the error that would occur if someone inserted a row without specifying a value for the column.
                        </p>
                     </li>
                     <li>
                        <p>There is a most common value for the column.</p>
                        <p>For example, if most departments in the company are in New York, then set the default value of the column <code class="codeph">DEPARTMENTS</code>.<code class="codeph">LOCATION</code> to <code class="codeph">'NEW YORK'</code>.
                        </p>
                     </li>
                     <li>
                        <p>There is a non-<code class="codeph">NULL</code> value that signifies no entry.
                        </p>
                        <p>For example, if the value zero in the column <code class="codeph">EMPLOYEES</code>.<code class="codeph">SALARY</code> means that the salary has not yet been determined, then set the default value of that column to zero.
                        </p>
                        <p>A default column value that signifies no entry can simplify testing. For example, it lets you change this test:</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">IF (employees.salary IS NOT NULL) AND (employees.salary &lt; 50000)</code>
</pre><p>To this test:</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">IF employees.salary &lt; 50000</code>
</pre></li>
                     <li>
                        <p>You want to automatically record the names of users who modify a table.</p>
                        <p>For example, suppose that you allow users to insert rows into a table through a view. You give the base table a column named <code class="codeph">inserter</code> (which need not be included in the definition of the view), to store the name of the user who inserted the row. To record the user name automatically, define a default value that invokes the <code class="codeph">USER</code> function. For example:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE audit_trail (
  value1   NUMBER,
  value2   VARCHAR2(32),
  inserter VARCHAR2(30) <span class="bold"><code class="codeph">DEFAULT USER</code></span>);</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99__GUID-4E04CB40-6E3D-48AE-9C83-52D55FA94298">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01604" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">INSERT</code> statement
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01402" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement
                           </p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D">When to Use NOT NULL Constraints</a> for information about the <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS99957"></a><div class="sect2"><a id="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88" name="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88"></a><h3 id="ADFNS-GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88" class="sect3">Choosing a Primary Key for a Table (PRIMARY KEY Constraint)</h3>
               <div>
                  <p>The primary key of a table uniquely identifies each row and ensures that no duplicate rows exist (and typically, this is its only purpose). Therefore, a primary key value cannot be <code class="codeph">NULL</code>.
                  </p>
                  <p>A table can have at most one primary key, but that key can have multiple columns (that is, it can be a composite key). To designate a primary key, use the <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> constraint.
                  </p>
                  <p>Whenever practical, choose as the primary key a single column whose values are generated by a sequence.</p>
                  <p>The second-best choice for a primary key is a single column whose values are all of the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Unique</p>
                     </li>
                     <li>
                        <p>Never changed</p>
                     </li>
                     <li>
                        <p>Never <code class="codeph">NULL</code></p>
                     </li>
                     <li>
                        <p>Short and numeric (and therefore easy to type)</p>
                     </li>
                  </ul>
                  <p>Minimize your use of composite primary keys, whose values are long and cannot be generated by a sequence.</p>
                  <div class="infoboxnotealso" id="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88__GUID-07E2D26A-A822-4FA2-8F6E-0ECC777AC790">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1646" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for general information about primary key constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52197" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for complete information about primary key constraints, including restrictions
                           </p>
                        </li>
                        <li>
                           <p> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00253" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about sequences
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS270"></a><a id="ADFNS269"></a><div class="sect2"><a id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7" name="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7"></a><h3 id="ADFNS-GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7" class="sect3">When to Use UNIQUE Constraints</h3>
               <div>
                  <p>Use a <code class="codeph">UNIQUE</code> constraint (which designates a unique key) on any column or combination of columns (except the primary key) where duplicate non-<code class="codeph">NULL</code> values are not allowed. For example:
                  </p>
                  <div class="tblformal" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__GUID-A74054A1-8C71-401E-9FF2-12EB66D7AC71">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table shows four examples of unique keys and primary keys in the same table." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="75%" id="d53462e1721">Unique Key</th>
                              <th align="left" valign="bottom" width="25%" id="d53462e1724">Primary Key</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1729" headers="d53462e1721 ">
                                 <p>Employee Social Security Number</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1729 d53462e1724 ">
                                 <p>Employee number</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1736" headers="d53462e1721 ">
                                 <p>Truck license plate number</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1736 d53462e1724 ">
                                 <p>Truck number</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1743" headers="d53462e1721 ">
                                 <p>Customer phone number (country code column, area code column, and local phone number column)</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1743 d53462e1724 ">
                                 <p>Customer number</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1750" headers="d53462e1721 ">
                                 <p>Department name column and location column</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1750 d53462e1724 ">
                                 <p>Department number</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="data-integrity.html#GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__I1015083">Figure 12-1</a> shows a table with a <code class="codeph">UNIQUE</code> constraint, a row that violates the constraint, and a row that satisfies it.
                  </p>
                  <div class="figure" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__I1015083">
                     <p class="titleinfigure">Figure 12-1 Rows That Violate and Satisfy a UNIQUE Constraint</p><img src="img/adfns039.gif" alt="Description of Figure 12-1 follows" title="Description of Figure 12-1 follows" longdesc="img_text/adfns039.html"><br><a href="img_text/adfns039.html">Description of "Figure 12-1 Rows That Violate and Satisfy a UNIQUE Constraint"</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__GUID-09C6DF38-5184-4DBE-992D-EAF49C91BE04">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1642" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for general information about <code class="codeph">UNIQUE</code> constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52195" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for complete information about <code class="codeph">UNIQUE</code> constraints, including restrictions
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS272"></a><a id="ADFNS1026"></a><a id="ADFNS00602"></a><div class="sect2"><a id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53" name="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53"></a><h3 id="ADFNS-GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53" class="sect3">Enforcing Referential Integrity with FOREIGN KEY Constraints</h3>
               <div>
                  <p>When two tables share one or more columns, you use can use a <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint to enforce referential integrityâ€”that is, to ensure that the shared columns always have the same values in both tables.
                  </p>
                  <div class="infoboxnote" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-F2C9CAC7-869F-41F9-9BB4-1395E94F14F0">
                     <p class="notep1">Note:</p>
                     <p>A <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint is also called a <span class="bold">referential integrity constraint</span>, and its <code class="codeph">CONSTRAINT_TYPE</code> is <code class="codeph">R</code> in the static data dictionary views <code class="codeph">*_CONSTRAINTS</code>.
                     </p>
                  </div>
                  <p>Designate one table as the <span class="bold">referenced or parent table</span> and the other as the <span class="bold">dependent or child table</span>. In the parent table, define either a <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> or <code class="codeph">UNIQUE</code> constraint on the shared columns. In the child table, define a <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint on the shared columns. The shared columns now comprise a <span class="bold">foreign key</span>. Defining additional constraints on the foreign key affects the parent-child relationship.
                  </p>
                  <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">Figure 12-2</a> shows a foreign key defined on the department number. It guarantees that every value in this column must match a value in the primary key of the department table. This constraint prevents erroneous department numbers from getting into the employee table.
                  </p>
                  <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">Figure 12-2</a> shows parent and child tables that share one column, a row that violates the <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint, and a row that satisfies it.
                  </p>
                  <div class="figure" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">
                     <p class="titleinfigure">Figure 12-2 Rows That Violate and Satisfy a FOREIGN KEY Constraint</p><img src="img/adfns040.gif" width="610" alt="Description of Figure 12-2 follows" title="Description of Figure 12-2 follows" longdesc="img_text/adfns040.html"><br><a href="img_text/adfns040.html">Description of "Figure 12-2 Rows That Violate and Satisfy a FOREIGN KEY Constraint"</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-A67BAE8C-0AB4-432E-B4FA-37B2DE7C4E63">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="data-integrity.html#GUID-70F1D209-144D-4479-ABB8-559734B11E00">FOREIGN KEY Constraints and NULL Values</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1">Defining Relationships Between Parent and Child Tables</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185">Rules for Multiple FOREIGN KEY Constraints </a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB">Deferring Constraint Checks</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-4CFA9458-B6F5-4854-951A-FEC75F96FA70">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1649" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for general information about foreign key constraints
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52199" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for complete information about foreign key constraints, including restrictions
                           </p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1">Defining Relationships Between Parent and Child Tables</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS273"></a><div class="sect3"><a id="GUID-70F1D209-144D-4479-ABB8-559734B11E00" name="GUID-70F1D209-144D-4479-ABB8-559734B11E00"></a><h4 id="ADFNS-GUID-70F1D209-144D-4479-ABB8-559734B11E00" class="sect4">FOREIGN KEY Constraints and NULL Values</h4>
                  <div>
                     <p>Foreign keys allow key values that are all <code class="codeph">NULL</code>, even if there are no matching <code class="codeph">PRIMARY</code> or <code class="codeph">UNIQUE</code> keys.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>By default (without any <code class="codeph">NOT</code> <code class="codeph">NULL</code> or <code class="codeph">CHECK</code> clauses), the <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint enforces the <span class="bold">match</span> <span class="bold">none</span> rule for composite foreign keys in the ANSI/ISO standard.
                           </p>
                        </li>
                        <li>
                           <p>To enforce the <span class="bold">match</span> <span class="bold">full</span> rule for <code class="codeph">NULL</code> values in composite foreign keys, which requires that all components of the key be <code class="codeph">NULL</code> or all be non-<code class="codeph">NULL</code>, define a <code class="codeph">CHECK</code> constraint that allows only all <code class="codeph">NULL</code> or all non-<code class="codeph">NULL</code> values in the composite foreign key. For example, with a composite key comprised of columns <code class="codeph">A</code>, <code class="codeph">B</code>, and <code class="codeph">C</code>:
                           </p><pre class="oac_no_warn" dir="ltr">CHECK ((A IS NULL AND B IS NULL AND C IS NULL) OR
       (A IS NOT NULL AND B IS NOT NULL AND C IS NOT NULL))
</pre></li>
                        <li>
                           <p>In general, it is not possible to use declarative referential integrity to enforce the <span class="bold">match</span> <span class="bold">partial</span> rule for <code class="codeph">NULL</code> values in composite foreign keys, which requires the non-<code class="codeph">NULL</code> portions of the key to appear in the corresponding portions in the primary or unique key of a single row in the referenced table. You can often use triggers to handle this case.
                           </p>
                           <div class="infoboxnotealso" id="GUID-70F1D209-144D-4479-ABB8-559734B11E00__NOTE-13233-CA500E1F">
                              <p class="notep1">See Also:</p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about triggers
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS275"></a><a id="ADFNS276"></a><a id="ADFNS277"></a><a id="ADFNS278"></a><a id="ADFNS274"></a><div class="sect3"><a id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1" name="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1"></a><h4 id="ADFNS-GUID-526C89D0-35BF-4854-8B57-06192FC34CB1" class="sect4">Defining Relationships Between Parent and Child Tables</h4>
                  <div>
                     <p>Several relationships between parent and child tables can be determined by the other types of constraints defined on the foreign key in the child table.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-02C5A3CA-2F05-484C-B628-2FE27964DBA3">No Constraints on the Foreign Key</p>
                     </div>
                     <!-- class="section" -->
                     <p>When no other constraints are defined on the foreign key, any number of rows in the child table can reference the same parent key value. This model allows nulls in the foreign key.</p>
                     <p>This model establishes a one-to-many relationship between the parent and foreign keys that allows undetermined values (nulls) in the foreign key. An example of such a relationship is shown in <a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">Figure 12-2</a> between the <code class="codeph">employee</code> and <code class="codeph">department</code> tables. Each department (parent key) has many employees (foreign key), and some employees might not be in a department (nulls in the foreign key).
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-3FC115F4-021B-4DCE-989B-9D63A5220947">NOT NULL Constraint on the Foreign Key</p>
                     </div>
                     <!-- class="section" -->
                     <p>When nulls are not allowed in a foreign key, each row in the child table must explicitly reference a value in the parent key because nulls are not allowed in the foreign key. </p>
                     <p>Any number of rows in the child table can reference the same parent key value, so this model establishes a one-to-many relationship between the parent and foreign keys. However, each row in the child table must have a reference to a parent key value; the absence of a value (a null) in the foreign key is not allowed. The same example in the previous section illustrates such a relationship. However, in this case, employees must have a reference to a specific department.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-31DBD38C-DC6C-46B3-9D4A-48F9D14E35A3">UNIQUE Constraint on the Foreign Key</p>
                     </div>
                     <!-- class="section" -->
                     <p>When a <code class="codeph">UNIQUE</code> constraint is defined on the foreign key, only one row in the child table can reference a given parent key value. This model allows nulls in the foreign key.
                     </p>
                     <p>This model establishes a one-to-one relationship between the parent and foreign keys that allows undetermined values (nulls) in the foreign key. For example, assume that the employee table had a column named <code class="codeph">MEMBERNO</code>, referring to an employee membership number in the company insurance plan. Also, a table named <code class="codeph">INSURANCE</code> has a primary key named <code class="codeph">MEMBERNO</code>, and other columns of the table keep respective information relating to an employee insurance policy. The <code class="codeph">MEMBERNO</code> in the employee table must be both a foreign key and a unique key:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To enforce referential integrity rules between the <code class="codeph">EMP_TAB</code> and <code class="codeph">INSURANCE</code> tables (the <code class="codeph">FOREIGN KEY</code> constraint) 
                           </p>
                        </li>
                        <li>
                           <p>To guarantee that each employee has a unique membership number (the <code class="codeph">UNIQUE</code> key constraint)
                           </p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__BEIBDAJJ">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-0F1F2E73-5917-416A-BEDC-BA8F519054B6">UNIQUE and NOT NULL Constraints on the Foreign Key</p>
                     </div>
                     <!-- class="section" -->
                     <p>When both <code class="codeph">UNIQUE</code> and <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints are defined on the foreign key, only one row in the child table can reference a given parent key value, and because <code class="codeph">NULL</code> values are not allowed in the foreign key, each row in the child table must explicitly reference a value in the parent key.
                     </p>
                     <p>This model establishes a one-to-one relationship between the parent and foreign keys that does not allow undetermined values (nulls) in the foreign key. If you expand the previous example by adding a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint on the <code class="codeph">MEMBERNO</code> column of the employee table, in addition to guaranteeing that each employee has a unique membership number, you also ensure that no undetermined values (nulls) are allowed in the <code class="codeph">MEMBERNO</code> column of the employee table.
                     </p>
                  </div>
               </div><a id="ADFNS279"></a><div class="sect3"><a id="GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185" name="GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185"></a><h4 id="ADFNS-GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185" class="sect4">Rules for Multiple FOREIGN KEY Constraints </h4>
                  <div>
                     <p>Oracle Database allows a column to be referenced by multiple <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraints; there is no limit on the number of dependent keys. This situation might be present if a single column is part of two different composite foreign keys. 
                     </p>
                  </div>
               </div><a id="ADFNS281"></a><a id="ADFNS280"></a><div class="sect3"><a id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB" name="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB"></a><h4 id="ADFNS-GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB" class="sect4">Deferring Constraint Checks</h4>
                  <div>
                     <p>When Oracle Database checks a constraint, it signals an error if the constraint is not satisfied. To defer checking constraints until the end of the current transaction, use the <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> statement.
                     </p>
                     <div class="infoboxnote" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__GUID-AC2C9A69-091E-479D-A23E-978564EE8DEE">
                        <p class="notep1">Note:</p>
                        <p>You cannot use the <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> statement inside a trigger.
                        </p>
                     </div>
                     <p>When deferring constraint checks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Select appropriate data.</p>
                           <p>You might want to defer constraint checks on <code class="codeph">UNIQUE</code> and <code class="codeph">FOREIGN</code> keys if the data you are working with has any of these characteristics:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Tables are snapshots.</p>
                              </li>
                              <li>
                                 <p>Some tables contain a large amount of data being manipulated by another application, which might not return the data in the same order.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Update cascade operations on foreign keys.</p>
                        </li>
                        <li>
                           <p>Ensure that constraints are deferrable.</p>
                           <p>After identifying the appropriate tables, ensure that their <code class="codeph">FOREIGN</code>, <code class="codeph">UNIQUE</code> and <code class="codeph">PRIMARY</code> key constraints are created <code class="codeph">DEFERRABLE</code>.
                           </p>
                        </li>
                        <li>
                           <p>Within the application that manipulates the data, set all constraints deferred before you begin processing any data, as follows:</p><pre class="oac_no_warn" dir="ltr">SET CONSTRAINTS ALL DEFERRED;</pre></li>
                        <li>
                           <p>(Optional) Check for constraint violations immediately before committing the transaction.</p>
                           <p>Immediately before the <code class="codeph">COMMIT</code> statement, run the <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> <code class="codeph">ALL</code> <code class="codeph">IMMEDIATE</code> statement. If there are any problems with a constraint, this statement fails, and identifies the constraint that caused the error. If you commit while constraints are violated, the transaction rolls back and you get an error message.
                           </p>
                        </li>
                     </ul>
                     <p>In <a href="data-integrity.html#GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__BEICHCGC">Example 12-4</a>, the <code class="codeph">PRIMARY</code> and <code class="codeph">FOREIGN</code> keys of the table <code class="codeph">emp</code> are created <code class="codeph">DEFERRABLE</code> and then deferred.
                     </p>
                     <div class="example" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__BEICHCGC">
                        <p class="titleinexample">Example 12-4 Deferring Constraint Checks</p><pre class="oac_no_warn" dir="ltr">DROP TABLE dept; 
CREATE TABLE dept (
  deptno NUMBER PRIMARY KEY,
  dname  VARCHAR2 (30)
);
 
DROP TABLE emp; 
CREATE TABLE emp (
  empno  NUMBER,
  ename  VARCHAR2(30),
  deptno NUMBER,
  <span class="bold">CONSTRAINT pk_emp_empno PRIMARY KEY (empno) DEFERRABLE,</span>
  <span class="bold">CONSTRAINT fk_emp_deptno FOREIGN KEY (deptno)</span>
<span class="bold">  REFERENCES dept(deptno) DEFERRABLE</span>);
 
INSERT INTO dept (deptno, dname) VALUES (10, 'Accounting');
INSERT INTO dept (deptno, dname) VALUES (20, 'SALES');
 
INSERT INTO emp (empno, ename, deptno) VALUES (1, 'Corleone', 10);
INSERT INTO emp (empno, ename, deptno) VALUES (2, 'Costanza', 20);
COMMIT;
 
<span class="bold">SET CONSTRAINTS ALL DEFERRED;</span>
 
UPDATE dept
SET deptno = deptno + 10
WHERE deptno = 20;
 </pre><p>Query:</p><pre class="oac_no_warn" dir="ltr">SELECT * from dept
ORDER BY deptno;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">    DEPTNO DNAME
---------- ------------------------------
        10 Accounting
        30 SALES
 
2 rows selected.
 </pre><p>Update:</p><pre class="oac_no_warn" dir="ltr">UPDATE emp
SET deptno = deptno + 10
WHERE deptno = 20;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">1 row updated.
 </pre><p>Query:</p><pre class="oac_no_warn" dir="ltr">SELECT * from emp
ORDER BY deptno;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">     EMPNO ENAME                              DEPTNO
---------- ------------------------------ ----------
         1 Corleone                               10
         2 Costanza                               30
 
2 rows selected.
</pre></div>
                     <!-- class="example" -->
                     <p>The <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> applies only to the current transaction, and its setting lasts for the duration of the transaction, or until another <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> statement resets the mode. The <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> statement applies only for the current session. The defaults specified when you create a constraint remain while the constraint exists.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__GUID-E4FBD308-1ADB-449B-95A8-42C6BB633413">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01703" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> statement
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS00603"></a><div class="sect2"><a id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA" name="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA"></a><h3 id="ADFNS-GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA" class="sect3">Minimizing Space and Time Overhead for Indexes Associated with Constraints</h3>
               <div>
                  <p>When you create a <code class="codeph">UNIQUE</code> or <code class="codeph">PRIMARY</code> key, Oracle Database checks to see if an existing index enforces uniqueness for the constraint. If there is no such index, the database creates one.
                  </p>
                  <p>When Oracle Database uses a unique index to enforce a constraint, and constraints associated with the unique index are dropped or disabled, the index is dropped. To preserve the statistics associated with the index (which would take a long time to re-create), specify the <code class="codeph">KEEP</code> <code class="codeph">INDEX</code> clause on the <code class="codeph">DROP</code> <code class="codeph">CONSTRAINT</code> statement.
                  </p>
                  <p>While enabled foreign keys reference a <code class="codeph">PRIMARY</code> or <code class="codeph">UNIQUE</code> key, you cannot disable or drop the <code class="codeph">PRIMARY</code> or <code class="codeph">UNIQUE</code> key constraint or the index.
                  </p>
                  <div class="infoboxnote" id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA__GUID-975A9C57-91BD-4EC3-9803-3F77B057CB8D">
                     <p class="notep1">Note:</p>
                     <p><code class="codeph">UNIQUE</code> and <code class="codeph">PRIMARY</code> keys with deferrable constraints must all use nonunique indexes.
                     </p>
                  </div>
                  <p>To use existing indexes when creating unique and primary key constraints, include <code class="codeph">USING</code> <code class="codeph">INDEX</code> in the <code class="codeph">CONSTRAINT</code> clause.
                  </p>
                  <div class="infoboxnotealso" id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA__NOTE-136-CA5097EC">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52180" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more details and examples of integrity constraints
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS00604"></a><div class="sect2"><a id="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7" name="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7"></a><h3 id="ADFNS-GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7" class="sect3">Guidelines for Indexing Foreign Keys</h3>
               <div>
                  <p>Index foreign keys unless the matching unique or primary key is never updated or deleted.</p>
                  <div class="infoboxnotealso" id="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7__GUID-90A0F7D4-2DA4-41BD-9D04-80811BF4F63A">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1657" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about indexing foreign keys
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS00605"></a><div class="sect2"><a id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1" name="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1"></a><h3 id="ADFNS-GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1" class="sect3">Referential Integrity in a Distributed Database</h3>
               <div>
                  <p>The declaration of a referential constraint cannot specify a foreign key that references a primary or unique key of a remote table.</p>
                  <p>However, you can maintain parent/child table relationships across nodes using triggers.</p>
                  <div class="infoboxnotealso" id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1__GUID-7CB93855-BEAA-4FA2-B280-A42E948D4FAE">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about triggers that enforce referential integrity
                     </p>
                  </div>
                  <div class="infoboxnote" id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1__GUID-1320A8F9-DDF2-4231-8C09-A8937D134D1F">
                     <p class="notep1">Note:</p>
                     <p><span class="italic"> </span>If you decide to define referential integrity across the nodes of a distributed database using triggers, be aware that network failures can make both the parent table and the child table inaccessible. 
                     </p>
                     <p>For example, assume that the child table is in the <code class="codeph">SALES</code> database, and the parent table is in the <code class="codeph">HQ</code> database. 
                     </p>
                     <p>If the network connection between the two databases fails, then some data manipulation language (DML) statements against the child table (those that insert rows or update a foreign key value) cannot proceed, because the referential integrity triggers must have access to the parent table in the <code class="codeph">HQ</code> database.
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS00606"></a><div class="sect2"><a id="GUID-8F512577-F51D-4309-B987-C364D1D71779" name="GUID-8F512577-F51D-4309-B987-C364D1D71779"></a><h3 id="ADFNS-GUID-8F512577-F51D-4309-B987-C364D1D71779" class="sect3">When to Use CHECK Constraints</h3>
               <div>
                  <p>Use <code class="codeph">CHECK</code> constraints when you must enforce integrity rules based on logical expressions, such as comparisons. Never use <code class="codeph">CHECK</code> constraints when any of the other types of constraints can provide the necessary checking.
                  </p>
                  <div class="infoboxnotealso" id="GUID-8F512577-F51D-4309-B987-C364D1D71779__GUID-DBF2799C-63F9-4581-9D8B-045124655B6F">
                     <p class="notep1">See Also:</p>
                     <p><a href="data-integrity.html#GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC">Choosing Between CHECK and NOT NULL Constraints</a></p>
                  </div>
                  <p>Examples of <code class="codeph">CHECK</code> constraints include:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <code class="codeph">CHECK</code> constraint on employee salaries so that no salary value is greater than 10000.
                        </p>
                     </li>
                     <li>
                        <p>A <code class="codeph">CHECK</code> constraint on department locations so that only the locations "<code class="codeph">BOSTON</code>", "<code class="codeph">NEW</code> <code class="codeph">YORK</code>", and "<code class="codeph">DALLAS</code>" are allowed.
                        </p>
                     </li>
                     <li>
                        <p>A <code class="codeph">CHECK</code> constraint on the salary and commissions columns to prevent the commission from being larger than the salary.
                        </p>
                     </li>
                  </ul>
               </div><a id="ADFNS282"></a><div class="sect3"><a id="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142" name="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142"></a><h4 id="ADFNS-GUID-56B3A4F1-68CD-459E-98EC-A5035795D142" class="sect4">Restrictions on CHECK Constraints</h4>
                  <div>
                     <p>A <code class="codeph">CHECK</code> constraint requires that a condition be true or unknown for every row of the table. If a statement causes the condition to evaluate to false, then the statement is rolled back. The condition of a <code class="codeph">CHECK</code> constraint has these limitations:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The condition must be a Boolean expression that can be evaluated using the values in the row being inserted or updated. </p>
                        </li>
                        <li>
                           <p>The condition cannot contain subqueries or sequences. </p>
                        </li>
                        <li>
                           <p>The condition cannot include the <code class="codeph">SYSDATE</code>, <code class="codeph">UID</code>, <code class="codeph">USER</code>, or <code class="codeph">USERENV</code> SQL functions.
                           </p>
                        </li>
                        <li>
                           <p>The condition cannot contain the pseudocolumns <code class="codeph">LEVEL</code> or <code class="codeph">ROWNUM</code>.
                           </p>
                        </li>
                        <li>
                           <p>The condition cannot contain the <code class="codeph">PRIOR</code> operator.
                           </p>
                        </li>
                        <li>
                           <p>The condition cannot contain a user-defined function.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142__GUID-F49FE81A-C35E-483F-B6CC-204DE9C4749E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00251" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">LEVEL</code> pseudocolumn
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00255" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">ROWNUM</code> pseudocolumn
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF007" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">PRIOR</code> operator (used in hierarchical queries)
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS283"></a><div class="sect3"><a id="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671" name="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671"></a><h4 id="ADFNS-GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671" class="sect4">Designing CHECK Constraints</h4>
                  <div>
                     <p>When using <code class="codeph">CHECK</code> constraints, remember that a <code class="codeph">CHECK</code> constraint is violated only if the condition evaluates to false; true and unknown values (such as comparisons with nulls) do not violate a check condition. Ensure that any <code class="codeph">CHECK</code> constraint that you define is specific enough to enforce the rule.
                     </p>
                     <p>For example, consider this <code class="codeph">CHECK</code> constraint:
                     </p><pre class="oac_no_warn" dir="ltr">CHECK (Sal &gt; 0 OR Comm &gt;= 0)
</pre><p>At first glance, this rule may be interpreted as "do not allow a row in the employee table unless the employee salary is greater than zero or the employee commission is greater than or equal to zero." But if a row is inserted with a null salary, that row does not violate the <code class="codeph">CHECK</code> constraint, regardless of whether the commission value is valid, because the entire check condition is evaluated as unknown. In this case, you can prevent such violations by placing <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints on both the <code class="codeph">SAL</code> and <code class="codeph">COMM</code> columns. 
                     </p>
                     <div class="infoboxnote" id="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671__GUID-D136E229-B588-4AD7-9D9B-6042A7EF4F34">
                        <p class="notep1">Note:</p>
                        <p>If you are not sure when unknown values result in <code class="codeph">NULL</code> conditions, review the truth tables for the logical conditions in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF005" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
                     </div>
                  </div>
               </div><a id="ADFNS284"></a><div class="sect3"><a id="GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6" name="GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6"></a><h4 id="ADFNS-GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6" class="sect4">Rules for Multiple CHECK Constraints</h4>
                  <div>
                     <p>A single column can have multiple <code class="codeph">CHECK</code> constraints that reference the column in its definition. There is no limit to the number of <code class="codeph">CHECK</code> constraints that can be defined that reference a column.
                     </p>
                     <p>The order in which the constraints are evaluated is not defined, so be careful not to rely on the order or to define multiple constraints that conflict with each other.</p>
                  </div>
               </div><a id="ADFNS285"></a><div class="sect3"><a id="GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC" name="GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC"></a><h4 id="ADFNS-GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC" class="sect4">Choosing Between CHECK and NOT NULL Constraints</h4>
                  <div>
                     <p>According to the ANSI/ISO standard, a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint is an example of a <code class="codeph">CHECK</code> constraint, where the condition is:
                     </p><pre class="oac_no_warn" dir="ltr">CHECK (<span class="italic">column_name</span> IS NOT NULL)
</pre><p>Therefore, you can write <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints for a single column using either a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint or a <code class="codeph">CHECK</code> constraint. The <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint is easier to use than the <code class="codeph">CHECK</code> constraint.
                     </p>
                     <p>In the case where a composite key can allow only all <code class="codeph">NULL</code> or all non-<code class="codeph">NULL</code> values, you must use a <code class="codeph">CHECK</code> constraint. For example, this <code class="codeph">CHECK</code> constraint allows a key value in the composite key made up of columns <code class="codeph">C1</code> and <code class="codeph">C2</code> to contain either all nulls or all values:
                     </p><pre class="oac_no_warn" dir="ltr">CHECK ((C1 IS NULL AND C2 IS NULL) OR (C1 IS NOT NULL AND C2 IS NOT NULL))</pre></div>
               </div>
            </div><a id="ADFNS286"></a><a id="ADFNS287"></a><a id="ADFNS00607"></a><div class="sect2"><a id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8" name="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8"></a><h3 id="ADFNS-GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8" class="sect3">Examples of Defining Constraints</h3>
               <div>
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">Example 12-5</a> and <a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">Example 12-6</a> show how to create simple constraints during the prototype phase of your database design. In these examples, each constraint is given a name. Naming the constraints prevents the database from creating multiple copies of the same constraint, with different system-generated names, if the data definition language (DDL) statement runs multiple times.
                  </p>
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">Example 12-5</a> creates tables and their constraints at the same time, using the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement.
                  </p>
                  <div class="example" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">
                     <p class="titleinexample">Example 12-5 Defining Constraints with the CREATE TABLE Statement</p><pre class="oac_no_warn" dir="ltr">DROP TABLE DeptTab;
CREATE TABLE DeptTab (
  Deptno  NUMBER(3) <span class="bold">CONSTRAINT pk_DeptTab_Deptno PRIMARY KEY</span>,
  Dname   VARCHAR2(15),
  Loc     VARCHAR2(15),
  <span class="bold">CONSTRAINT u_DeptTab_Dname_Loc UNIQUE (Dname, Loc)</span>,
  <span class="bold">CONSTRAINT c_DeptTab_Loc</span>
    <span class="bold">CHECK (Loc IN ('NEW YORK', 'BOSTON', 'CHICAGO')))</span>;
 
DROP TABLE EmpTab;
CREATE TABLE EmpTab (
  Empno    NUMBER(5) <span class="bold">CONSTRAINT pk_EmpTab_Empno PRIMARY KEY</span>,
  Ename    VARCHAR2(15) <span class="bold">NOT NULL</span>,
  Job      VARCHAR2(10),
  Mgr      NUMBER(5) <span class="bold">CONSTRAINT r_EmpTab_Mgr REFERENCES EmpTab</span>,
  Hiredate DATE,
  Sal      NUMBER(7,2),
  Comm     NUMBER(5,2),
  Deptno   NUMBER(3) <span class="bold">NOT NULL</span>
  <span class="bold">CONSTRAINT r_EmpTab_DeptTab REFERENCES DeptTab ON DELETE CASCADE</span>);
</pre></div>
                  <!-- class="example" -->
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">Example 12-6</a> creates constraints for existing tables, using the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                  </p>
                  <p>You cannot create a validated constraint on a table if the table contains rows that violate the constraint.</p>
                  <div class="example" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">
                     <p class="titleinexample">Example 12-6 Defining Constraints with the ALTER TABLE Statement</p><pre class="oac_no_warn" dir="ltr">-- Create tables without constraints:

DROP TABLE DeptTab; 
CREATE TABLE DeptTab (
  Deptno  NUMBER(3),
  Dname   VARCHAR2(15),
  Loc     VARCHAR2(15)
);
 
DROP TABLE EmpTab; 
CREATE TABLE EmpTab (
  Empno    NUMBER(5),
  Ename    VARCHAR2(15),
  Job      VARCHAR2(10),
  Mgr      NUMBER(5),
  Hiredate DATE,
  Sal      NUMBER(7,2),
  Comm     NUMBER(5,2),
  Deptno   NUMBER(3)
);
 
<span class="bold">--Define constraints with the ALTER TABLE statement:</span>

<span class="bold">ALTER TABLE DeptTab</span>
<span class="bold">ADD CONSTRAINT pk_DeptTab_Deptno PRIMARY KEY (Deptno);</span>
 
<span class="bold">ALTER TABLE EmpTab</span>
<span class="bold">ADD CONSTRAINT fk_DeptTab_Deptno</span>
<span class="bold">FOREIGN KEY (Deptno) REFERENCES DeptTab;</span>
 
<span class="bold">ALTER TABLE EmpTab MODIFY (Ename VARCHAR2(15) NOT NULL);</span></pre></div>
                  <!-- class="example" -->
                  <div class="infoboxnotealso" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__GUID-A71D6534-18C3-488D-AAB5-6FFCA09CAA74">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating and maintaining constraints for a large production database
                     </p>
                  </div>
               </div><a id="ADFNS288"></a><div class="sect3"><a id="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE" name="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE"></a><h4 id="ADFNS-GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE" class="sect4">Privileges Needed to Define Constraints</h4>
                  <div>
                     <p>If you have the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege, then you can define constraints on the tables that you create.
                     </p>
                     <p>If you have the <code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege, then you can define constraints on any existing table.
                     </p>
                     <p>If you have the <code class="codeph">ALTER</code> object privilege for a specific table, then you can define constraints on that table.
                     </p>
                     <p><code class="codeph">UNIQUE</code> and <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> constraints require that the table owner has either the <code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code> system privilege or a quota for the tablespace that contains the associated index.
                     </p>
                     <p>You can define <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraints if the parent table or view is in your schema or you have the <code class="codeph">REFERENCES</code> privilege on the columns of the referenced key in the parent table or view.
                     </p>
                     <div class="infoboxnotealso" id="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE__NOTE-136-CA50E8EC">
                        <p class="notep1">See Also:</p><a href="data-integrity.html#GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB">Privileges Required to Create FOREIGN KEY Constraints</a></div>
                  </div>
               </div><a id="ADFNS289"></a><div class="sect3"><a id="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4" name="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4"></a><h4 id="ADFNS-GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4" class="sect4">Naming Constraints </h4>
                  <div>
                     <p>Assign names to constraints <code class="codeph">NOT</code> <code class="codeph">NULL</code>, <code class="codeph">UNIQUE</code>, <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>, <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>, and <code class="codeph">CHECK</code> using the <code class="codeph">CONSTRAINT</code> option of the constraint clause. This name must be unique among the constraints that you own. If you do not specify a constraint name, one is assigned automatically by Oracle Database.
                     </p>
                     <p>Choosing your own name makes error messages for constraint violations more understandable, and prevents the creation of duplicate constraints with different names if the SQL statements are run more than once.</p>
                     <p>See the previous examples of the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> and <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statements for examples of the <code class="codeph">CONSTRAINT</code> option of the <code class="codeph">constraint</code> clause. The name of each constraint is included with other information about the constraint in the data dictionary. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4__GUID-1C7DABF8-2805-4CF6-B755-8B5A3C31C33E">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4">Viewing Information About Constraints</a>"</span> for examples of static data dictionary views
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1027"></a><a id="ADFNS00608"></a><div class="sect2"><a id="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD" name="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD"></a><h3 id="ADFNS-GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD" class="sect3">Enabling and Disabling Constraints</h3>
               <div>
                  <p>This section explains the mechanisms and procedures for manually enabling and disabling constraints.</p>
                  <p><strong class="term">enabled constraint</strong>. When a constraint is enabled, the corresponding rule is enforced on the data values in the associated columns. The definition of the constraint is stored in the data dictionary. 
                  </p>
                  <p><strong class="term">disabled constraint</strong>. When a constraint is disabled, the corresponding rule is not enforced. The definition of the constraint is still stored in the data dictionary.
                  </p>
                  <p>An integrity constraint represents an assertion about the data in a database. This assertion is always true when the constraint is enabled. The assertion might not be true when the constraint is disabled, because data that violates the integrity constraint can be in the database.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD__GUID-764D3D99-D557-410C-8D71-1ABD65B4F122">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="data-integrity.html#GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20">Why Disable Constraints?</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948">Creating Enabled Constraints (Default)</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-32182C58-2918-431F-A1A3-F33BFE764C4D">Creating Disabled Constraints</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-63DF885E-A240-47BA-9BA3-151EF4233F15">Enabling Existing Constraints</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6">Disabling Existing Constraints</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA">Guidelines for Enabling and Disabling Key Constraints</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">Fixing Constraint Exceptions</a></p>
                     </li>
                  </ul>
               </div><a id="ADFNS290"></a><div class="sect3"><a id="GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20" name="GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20"></a><h4 id="ADFNS-GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20" class="sect4">Why Disable Constraints?</h4>
                  <div>
                     <p>During day-to-day operations, keep constraints enabled. In certain situations, temporarily disabling the constraints of a table makes sense for performance reasons. For example:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When loading large amounts of data into a table using SQL*Loader</p>
                        </li>
                        <li>
                           <p>When performing batch operations that make massive changes to a table (such as changing each employee number by adding 1000 to the existing number)</p>
                        </li>
                        <li>
                           <p>When importing or exporting one table at a time</p>
                        </li>
                     </ul>
                     <p>Temporarily turning off constraints can speed up these operations.</p>
                  </div>
               </div><a id="ADFNS292"></a><a id="ADFNS291"></a><div class="sect3"><a id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948" name="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948"></a><h4 id="ADFNS-GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948" class="sect4">Creating Enabled Constraints (Default)</h4>
                  <div>
                     <p>When you define an integrity constraint (using either <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>), Oracle Database enables the constraint by default. For code clarity, you can explicitly enable the constraint by including the <code class="codeph">ENABLE</code> clause in its definition, as in <a href="data-integrity.html#GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__BEIEHFFC">Example 12-7</a>.
                     </p>
                     <div class="example" id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__BEIEHFFC">
                        <p class="titleinexample">Example 12-7 Creating Enabled Constraints</p><pre class="oac_no_warn" dir="ltr">/* Use CREATE TABLE statement to create enabled constraint
   (ENABLE keyword is optional): */
 
DROP TABLE t1; 
CREATE TABLE t1 (Empno NUMBER(5) PRIMARY KEY <span class="bold">ENABLE</span>);
 
/* Create table without constraint
   and then use ALTER TABLE statement to add enabled constraint
   (ENABLE keyword is optional): */

DROP TABLE t2;
CREATE TABLE t2 (Empno NUMBER(5));
 
ALTER TABLE t2 ADD PRIMARY KEY (Empno) <span class="bold">ENABLE</span>;
</pre></div>
                     <!-- class="example" -->
                     <p>Include the <code class="codeph">ENABLE</code> clause when defining a constraint for a table to be populated a row at a time by individual transactions. This ensures that data is always consistent, and reduces the performance overhead of each DML statement.
                     </p>
                     <p>An <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement that tries to enable an integrity constraint fails if an existing row of the table violates the integrity constraint. The statement rolls back and the constraint definition is neither stored nor enabled.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__GUID-78173330-E758-485F-B0D2-E3027C869C94">
                        <p class="notep1">See Also:</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">Fixing Constraint Exceptions</a>, for more information about rows that violate constraints
                        </p>
                     </div>
                  </div>
               </div><a id="ADFNS294"></a><a id="ADFNS293"></a><div class="sect3"><a id="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D" name="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D"></a><h4 id="ADFNS-GUID-32182C58-2918-431F-A1A3-F33BFE764C4D" class="sect4">Creating Disabled Constraints</h4>
                  <div>
                     <p>You define and disable an integrity constraint (using either <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>), by including the <code class="codeph">DISABLE</code> clause in its definition, as in <a href="data-integrity.html#GUID-32182C58-2918-431F-A1A3-F33BFE764C4D__BEIDJABH">Example 12-8</a>.
                     </p>
                     <div class="example" id="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D__BEIDJABH">
                        <p class="titleinexample">Example 12-8 Creating Disabled Constraints</p><pre class="oac_no_warn" dir="ltr">/* Use CREATE TABLE statement to create disabled constraint */
 
DROP TABLE t1; 
CREATE TABLE t1 (Empno NUMBER(5) PRIMARY KEY <span class="bold">DISABLE</span>);
 
/* Create table without constraint
   and then use ALTER TABLE statement to add disabled constraint */
 
DROP TABLE t2; 
CREATE TABLE t2 (Empno NUMBER(5));
 
ALTER TABLE t2 ADD PRIMARY KEY (Empno) <span class="bold">DISABLE</span>;
</pre></div>
                     <!-- class="example" -->
                     <p>Include the <code class="codeph">DISABLE</code> clause when defining a constraint for a table to have large amounts of data inserted before anybody else accesses it, particularly if you must cleanse data after inserting it, or must fill empty columns with sequence numbers or parent/child relationships.
                     </p>
                     <p>An <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement that defines and disables a constraint never fails, because its rule is not enforced.
                     </p>
                  </div>
               </div><a id="ADFNS296"></a><a id="ADFNS295"></a><div class="sect3"><a id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15" name="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15"></a><h4 id="ADFNS-GUID-63DF885E-A240-47BA-9BA3-151EF4233F15" class="sect4">Enabling Existing Constraints</h4>
                  <div>
                     <p>After you have cleansed the data and filled the empty columns, you can enable constraints that were disabled during data insertion.</p>
                     <p>To enable an existing constraint, use the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement with the <code class="codeph">ENABLE</code> clause, as in <a href="data-integrity.html#GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__BEIFJEII">Example 12-9</a>.
                     </p>
                     <div class="example" id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__BEIFJEII">
                        <p class="titleinexample">Example 12-9 Enabling Existing Constraints</p><pre class="oac_no_warn" dir="ltr">-- Create table with disabled constraints:
 
DROP TABLE DeptTab;
CREATE TABLE DeptTab (
  Deptno  NUMBER(3) PRIMARY KEY DISABLE,
  Dname   VARCHAR2(15),
  Loc     VARCHAR2(15),
  CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE (Dname, Loc) DISABLE,
  CONSTRAINT c_DeptTab_Loc
  CHECK (Loc IN ('NEW YORK', 'BOSTON', 'CHICAGO')) DISABLE
);
 
<span class="bold">-- Enable constraints:</span>
 
 ALTER TABLE DeptTab
<span class="bold">ENABLE PRIMARY KEY</span>
<span class="bold">ENABLE CONSTRAINT uk_DeptTab_Dname_Loc</span>
<span class="bold">ENABLE CONSTRAINT c_DeptTab_Loc;</span>
</pre></div>
                     <!-- class="example" -->
                     <p>An <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement that attempts to enable an integrity constraint fails if any of the table rows violate the integrity constraint. The statement is rolled back and the constraint is not enabled.
                     </p>
                     <div class="infoboxnotealso" id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__GUID-2499668D-6CF2-496E-B269-D139DA7C724B">
                        <p class="notep1">See Also:</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">Fixing Constraint Exceptions</a>, for more information about rows that violate constraints
                        </p>
                     </div>
                  </div>
               </div><a id="ADFNS298"></a><a id="ADFNS297"></a><div class="sect3"><a id="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6" name="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6"></a><h4 id="ADFNS-GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6" class="sect4">Disabling Existing Constraints</h4>
                  <div>
                     <p>If you must perform a large insert or update when a table contains data, you can temporarily disable constraints to improve performance of the bulk operation.</p>
                     <p>To disable an existing constraint, use the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement with the <code class="codeph">DISABLE</code> clause, as in <a href="data-integrity.html#GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6__BEIBEAEF">Example 12-10</a>.
                     </p>
                     <div class="example" id="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6__BEIBEAEF">
                        <p class="titleinexample">Example 12-10 Disabling Existing Constraints</p><pre class="oac_no_warn" dir="ltr">-- Create table with enabled constraints:
 
DROP TABLE DeptTab; 
CREATE TABLE DeptTab (
  Deptno  NUMBER(3) PRIMARY KEY ENABLE,
  Dname   VARCHAR2(15),
  Loc     VARCHAR2(15),
  CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE (Dname, Loc) ENABLE,
  CONSTRAINT c_DeptTab_Loc
  CHECK (Loc IN ('NEW YORK', 'BOSTON', 'CHICAGO')) ENABLE
);
 
<span class="bold">-- Disable constraints:</span>
 
ALTER TABLE DeptTab
<span class="bold">DISABLE PRIMARY KEY</span>
<span class="bold">DISABLE CONSTRAINT uk_DeptTab_Dname_Loc</span>
<span class="bold">DISABLE CONSTRAINT c_DeptTab_Loc;</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS299"></a><div class="sect3"><a id="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA" name="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA"></a><h4 id="ADFNS-GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA" class="sect4">Guidelines for Enabling and Disabling Key Constraints</h4>
                  <div>
                     <p>When enabling or disabling <code class="codeph">UNIQUE</code>, <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>, and <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraints, be aware of several important issues and prerequisites. <code class="codeph">UNIQUE</code> key and <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> constraints are usually managed by the database administrator.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA__GUID-892A2B9A-F56B-497C-BD34-99C580436903">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> and <a href="data-integrity.html#GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2">Managing FOREIGN KEY Constraints </a></p>
                     </div>
                  </div>
               </div><a id="ADFNS300"></a><div class="sect3"><a id="GUID-15695420-BD41-4572-90A5-3452EEFF167F" name="GUID-15695420-BD41-4572-90A5-3452EEFF167F"></a><h4 id="ADFNS-GUID-15695420-BD41-4572-90A5-3452EEFF167F" class="sect4">Fixing Constraint Exceptions</h4>
                  <div>
                     <p>If a row of a table disobeys an integrity constraint, then this row is in violation of the constraint and is called an <strong class="term">exception</strong> to the constraint. If any exceptions exist, then the constraint cannot be enabled. The rows that violate the constraint must be updated or deleted before the constraint can be enabled.
                     </p>
                     <p>You can identify exceptions for a specific integrity constraint as you try to enable the constraint.</p>
                     <div class="infoboxnotealso" id="GUID-15695420-BD41-4572-90A5-3452EEFF167F__GUID-C7912A98-43BA-4660-98A1-5D04C94A7E3E">
                        <p class="notep1">See Also:</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">Fixing Constraint Exceptions</a>, for more information about this procedure
                        </p>
                     </div>
                     <p>When you try to create or enable a constraint, and the statement fails because integrity constraint exceptions exist, the statement is rolled back. You cannot enable the constraint until all exceptions are either updated or deleted. To determine which rows violate the integrity constraint, include the <code class="codeph">EXCEPTIONS</code> option in the <code class="codeph">ENABLE</code> clause of a <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                     </p>
                     <div class="infoboxnotealso" id="GUID-15695420-BD41-4572-90A5-3452EEFF167F__GUID-A6B8720D-6220-47FB-92FA-FCFC0CCF998B">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about responding to constraint exceptions
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS301"></a><a id="ADFNS00609"></a><div class="sect2"><a id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0" name="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0"></a><h3 id="ADFNS-GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0" class="sect3">Modifying Constraints</h3>
               <div>
                  <p>Starting with Oracle8<span class="italic">i</span>, you can modify an existing constraint with the <code class="codeph">MODIFY</code> <code class="codeph">CONSTRAINT</code> clause, as in <a href="data-integrity.html#GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__BEIJBACB">Example 12-11</a>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__GUID-B3EFD7FA-4782-4D55-8781-2C001CBE6A07">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the parameters you can modify
                     </p>
                  </div>
                  <div class="example" id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__BEIJBACB">
                     <p class="titleinexample">Example 12-11 Modifying Constraints</p><pre class="oac_no_warn" dir="ltr">/* Create &amp; then modify a CHECK constraint: */
 
DROP TABLE X1Tab;
CREATE TABLE X1Tab (
  a1 NUMBER
  CONSTRAINT c_X1Tab_a1 CHECK (a1&gt;3)
  DEFERRABLE DISABLE
);
 
ALTER TABLE X1Tab
<span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 ENABLE</span>;
 
ALTER TABLE X1Tab
<span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 RELY</span>;
 
ALTER TABLE X1Tab
<span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 INITIALLY DEFERRED</span>;
 
ALTER TABLE X1Tab
<span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 ENABLE NOVALIDATE</span>;
 
/* Create &amp; then modify a PRIMARY KEY constraint: */
 
DROP TABLE t1; 
CREATE TABLE t1 (a1 INT, b1 INT);
 
ALTER TABLE t1
ADD CONSTRAINT pk_t1_a1 PRIMARY KEY(a1) DISABLE;
 
ALTER TABLE t1
<span class="bold">MODIFY PRIMARY KEY INITIALLY IMMEDIATE</span>
<span class="bold">USING INDEX PCTFREE = 30 ENABLE NOVALIDATE</span>;
 
ALTER TABLE t1
<span class="bold">MODIFY PRIMARY KEY ENABLE NOVALIDATE</span>;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS303"></a><a id="ADFNS302"></a><div class="sect2"><a id="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D" name="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D"></a><h3 id="ADFNS-GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D" class="sect3">Renaming Constraints</h3>
               <div>
                  <p>One property of a constraint that you can modify is its name. Situations in which you would rename a constraint include:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You want to clone a table and its constraints.</p>
                        <p>Constraint names must be unique, even across multiple schemas. Therefore, the constraints in the original table cannot have the same names as those in the cloned table.</p>
                     </li>
                     <li>
                        <p>You created a constraint with a default system-generated name, and now you want to give it a name that is easy to remember, so that you can easily enable and disable it.</p>
                     </li>
                  </ul>
                  <p><a href="data-integrity.html#GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D__BEIBIHGF">Example 12-12</a> shows how to find the system-generated name of a constraint and change it.
                  </p>
                  <div class="example" id="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D__BEIBIHGF">
                     <p class="titleinexample">Example 12-12 Renaming a Constraint</p><pre class="oac_no_warn" dir="ltr">DROP TABLE T;
CREATE TABLE T (
  C1 NUMBER PRIMARY KEY,
  C2 NUMBER
);
 </pre><p>Query:</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS
WHERE TABLE_NAME = 'T'
AND CONSTRAINT_TYPE = 'P';
 </pre><p>Result (system-generated name of constraint name varies):</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME
------------------------------
<span class="bold">SYS_C0013059</span>
 
1 row selected.
 </pre><p>Rename constraint from name reported in preceding query to <code class="codeph">T_C1_PK</code>:
                     </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE T
RENAME CONSTRAINT SYS_C0013059
TO T_C1_PK;
 </pre><p>Query:</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS
WHERE TABLE_NAME = 'T'
AND CONSTRAINT_TYPE = 'P';
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME
------------------------------
T_C1_PK
 
1 row selected.</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS304"></a><a id="ADFNS00610"></a><div class="sect2"><a id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC" name="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC"></a><h3 id="ADFNS-GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC" class="sect3">Dropping Constraints</h3>
               <div>
                  <p>You can drop a constraint using the <code class="codeph">DROP</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement. Situations in which you would drop a constraint include:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The constraint enforces a rule that is no longer true.</p>
                     </li>
                     <li>
                        <p>The constraint is no longer needed.</p>
                     </li>
                  </ul>
                  <p>To drop a constraint and all other integrity constraints that depend on it, specify <code class="codeph">CASCADE</code>.
                  </p>
                  <div class="example" id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC__GUID-29E0B450-3E16-4D79-9A0C-CDCB4EA9B106">
                     <p class="titleinexample">Example 12-13 Dropping Constraints</p><pre class="oac_no_warn" dir="ltr">-- Create table with constraints:

DROP TABLE DeptTab; 
CREATE TABLE DeptTab (
  Deptno  NUMBER(3) PRIMARY KEY,
  Dname   VARCHAR2(15),
  Loc     VARCHAR2(15),
  CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE (Dname, Loc),
  CONSTRAINT c_DeptTab_Loc
  CHECK (Loc IN ('NEW YORK', 'BOSTON', 'CHICAGO'))
);
 
-- Drop constraints:
 
ALTER TABLE DeptTab
<span class="bold">DROP PRIMARY KEY</span>
<span class="bold">DROP CONSTRAINT uk_DeptTab_Dname_Loc</span>
<span class="bold">DROP CONSTRAINT c_DeptTab_Loc</span>;
</pre></div>
                  <!-- class="example" -->
                  <p>When dropping <code class="codeph">UNIQUE</code>, <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>, and <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraints, be aware of several important issues and prerequisites. <code class="codeph">UNIQUE</code> and <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> constraints are usually managed by the database administrator.
                  </p>
                  <div class="infoboxnotealso" id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC__GUID-E1A0CA84-313A-436F-B73B-A67088931762">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">DROP</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11549" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about dropping constraints.
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01806" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">CASCADE</code> <code class="codeph">CONSTRAINTS</code> clause of the <code class="codeph">DROP</code> <code class="codeph">TABLE</code> statement, which drops all referential integrity constraints that refer to primary and unique keys in the dropped table
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS00611"></a><div class="sect2"><a id="GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2" name="GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2"></a><h3 id="ADFNS-GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2" class="sect3">Managing FOREIGN KEY Constraints </h3>
               <div>
                  <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraints enforce relationships between columns in different tables. Therefore, they cannot be enabled if the constraint of the referenced primary or unique key is not present or not enabled.
                  </p>
               </div><a id="ADFNS305"></a><div class="sect3"><a id="GUID-C86E69EC-35E8-4440-8444-443085384D7F" name="GUID-C86E69EC-35E8-4440-8444-443085384D7F"></a><h4 id="ADFNS-GUID-C86E69EC-35E8-4440-8444-443085384D7F" class="sect4">Data Types and Names for Foreign Key Columns</h4>
                  <div>
                     <p>You must use the same data type for corresponding columns in the dependent and referenced tables. The column names need not match.</p>
                  </div>
               </div><a id="ADFNS306"></a><div class="sect3"><a id="GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579" name="GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579"></a><h4 id="ADFNS-GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579" class="sect4">Limit on Columns in Composite Foreign Keys</h4>
                  <div>
                     <p>Because foreign keys reference primary and unique keys of the parent table, and <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> and <code class="codeph">UNIQUE</code> key constraints are enforced using indexes, composite foreign keys are limited to 32 columns. 
                     </p>
                  </div>
               </div><a id="ADFNS307"></a><div class="sect3"><a id="GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618" name="GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618"></a><h4 id="ADFNS-GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618" class="sect4">Foreign Key References Primary Key by Default</h4>
                  <div>
                     <p>If the column list is not included in the <code class="codeph">REFERENCES</code> option when defining a <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint (single column or composite), then Oracle Database assumes that you intend to reference the primary key of the specified table. Alternatively, you can explicitly specify the column(s) to reference in the parent table within parentheses. Oracle Database automatically checks to verify that this column list references a primary or unique key of the parent table. If it does not, then an informative error is returned.
                     </p>
                  </div>
               </div><a id="ADFNS308"></a><div class="sect3"><a id="GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB" name="GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB"></a><h4 id="ADFNS-GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB" class="sect4">Privileges Required to Create FOREIGN KEY Constraints</h4>
                  <div>
                     <p>To create a <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint, the creator of the constraint must have privileged access to the parent and child tables.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><strong class="term">Parent Table</strong> The creator of the referential integrity constraint must own the parent table or have <code class="codeph">REFERENCES</code> object privileges on the columns that constitute the parent key of the parent table. 
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">Child Table</strong> The creator of the referential integrity constraint must have the ability to create tables (that is, the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege) or the ability to alter the child table (that is, the <code class="codeph">ALTER</code> object privilege for the child table or the <code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege).
                           </p>
                        </li>
                     </ul>
                     <p>In both cases, necessary privileges cannot be obtained through a role; they must be explicitly granted to the creator of the constraint.</p>
                     <p>These restrictions allow:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The owner of the child table to explicitly decide which constraints are enforced and which other users can create constraints</p>
                        </li>
                        <li>
                           <p>The owner of the parent table to explicitly decide if foreign keys can depend on the primary and unique keys in her tables</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS309"></a><div class="sect3"><a id="GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640" name="GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640"></a><h4 id="ADFNS-GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640" class="sect4">Choosing How Foreign Keys Enforce Referential Integrity</h4>
                  <div>
                     <p>Oracle Database allows different types of referential integrity actions to be enforced, as specified with the definition of a <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><strong class="term">Prevent Delete or Update of Parent Key</strong> The default setting prevents the deletion or update of a parent key if there is a row in the child table that references the key. For example:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab (
FOREIGN KEY (Deptno) REFERENCES Dept_tab);
 </pre></li>
                        <li>
                           <p><strong class="term">Delete Child Rows When Parent Key Deleted</strong> The <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code> action allows parent key data that is referenced from the child table to be deleted, but not updated. When data in the parent key is deleted, all rows in the child table that depend on the deleted parent key values are also deleted. To specify this referential action, include the <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code> option in the definition of the <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint. For example:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab (
FOREIGN KEY (Deptno) REFERENCES Dept_tab
ON DELETE CASCADE);
</pre></li>
                        <li>
                           <p><strong class="term">Set Foreign Keys to Null When Parent Key Deleted</strong> The <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">SET</code> <code class="codeph">NULL</code> action allows data that references the parent key to be deleted, but not updated. When referenced data in the parent key is deleted, all rows in the child table that depend on those parent key values have their foreign keys set to <code class="codeph">NULL</code>. To specify this referential action, include the <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">SET</code> <code class="codeph">NULL</code> option in the definition of the <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code> constraint. For example:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab (
FOREIGN KEY (Deptno) REFERENCES Dept_tab  
ON DELETE SET NULL); </pre></li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS310"></a><a id="ADFNS00613"></a><div class="sect2"><a id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4" name="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4"></a><h3 id="ADFNS-GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4" class="sect3">Viewing Information About Constraints</h3>
               <div>
                  <p>To find the names of constraints, what columns they affect, and other information to help you manage them, query the static data dictionary views <code class="codeph">*_CONSTRAINTS</code> and <code class="codeph">*_CONS_COLUMNS</code>, as in <a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__BEIHBHDA">Example 12-14</a>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-E81487D7-E2FB-4B6D-AEAE-11D4FCB1AC75">
                     <p class="notep1">See Also:</p>
                     <p> <span class="italic">Oracle Database Reference</span> for information about <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20047" target="_blank"><code class="codeph">*_CONSTRAINTS</code></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20045" target="_blank"><code class="codeph">*_CONS_COLUMNS</code></a></p>
                  </div>
                  <div class="example" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__BEIHBHDA">
                     <p class="titleinexample">Example 12-14 Viewing Information About Constraints</p><pre class="oac_no_warn" dir="ltr">DROP TABLE DeptTab;
CREATE TABLE DeptTab (
  Deptno  NUMBER(3) PRIMARY KEY,
  Dname   VARCHAR2(15),
  Loc     VARCHAR2(15),
  CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE (Dname, Loc),
  CONSTRAINT c_DeptTab_Loc
  CHECK (Loc IN ('NEW YORK', 'BOSTON', 'CHICAGO'))
);
 
DROP TABLE EmpTab; 
CREATE TABLE EmpTab (
  Empno    NUMBER(5) PRIMARY KEY,
  Ename    VARCHAR2(15) NOT NULL,
  Job      VARCHAR2(10),
  Mgr      NUMBER(5) CONSTRAINT r_EmpTab_Mgr
             REFERENCES EmpTab ON DELETE CASCADE,
  Hiredate DATE,
  Sal      NUMBER(7,2),
  Comm     NUMBER(5,2),
  Deptno   NUMBER(3) NOT NULL
  CONSTRAINT r_EmpTab_Deptno REFERENCES DeptTab
);
 
-- Format columns (optional):
 
COLUMN CONSTRAINT_NAME   FORMAT A20;
COLUMN CONSTRAINT_TYPE   FORMAT A4 HEADING 'TYPE';
COLUMN TABLE_NAME        FORMAT A10;
COLUMN R_CONSTRAINT_NAME FORMAT A17;
COLUMN SEARCH_CONDITION  FORMAT A40;
COLUMN COLUMN_NAME       FORMAT A12;
</pre><p>List accessible constraints in DeptTab and EmpTab:</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME, CONSTRAINT_TYPE, TABLE_NAME, R_CONSTRAINT_NAME
FROM USER_CONSTRAINTS
WHERE (TABLE_NAME = 'DEPTTAB' OR TABLE_NAME = 'EMPTAB')
ORDER BY CONSTRAINT_NAME;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME      TYPE TABLE_NAME R_CONSTRAINT_NAME
-------------------- ---- ---------- -----------------
C_DEPTTAB_LOC        C    DEPTTAB
R_EMPTAB_DEPTNO      R    EMPTAB     SYS_C006286
R_EMPTAB_MGR         R    EMPTAB     SYS_C006290
SYS_C006286          P    DEPTTAB
SYS_C006288          C    EMPTAB
SYS_C006289          C    EMPTAB
SYS_C006290          P    EMPTAB
UK_DEPTTAB_DNAME_LOC U    DEPTTAB
 
8 rows selected.
 </pre><p>Distinguish between <code class="codeph">NOT</code> <code class="codeph">NULL</code> and <code class="codeph">CHECK</code> constraints in <code class="codeph">DeptTab</code> and <code class="codeph">EmpTab</code>:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME, SEARCH_CONDITION
FROM USER_CONSTRAINTS
WHERE (TABLE_NAME = 'DEPTTAB' OR TABLE_NAME = 'EMPTAB')
AND CONSTRAINT_TYPE = 'C'
ORDER BY CONSTRAINT_NAME;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME      SEARCH_CONDITION
-------------------- ----------------------------------------
C_DEPTTAB_LOC        Loc IN ('NEW YORK', 'BOSTON', 'CHICAGO')
SYS_C006288          "ENAME" IS NOT NULL
SYS_C006289          "DEPTNO" IS NOT NULL
 
3 rows selected.
 </pre><p>For <code class="codeph">DeptTab</code> and <code class="codeph">EmpTab</code>, list columns that constitute constraints:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME, TABLE_NAME, COLUMN_NAME
FROM USER_CONS_COLUMNS
WHERE (TABLE_NAME = 'DEPTTAB' OR TABLE_NAME = 'EMPTAB')
ORDER BY CONSTRAINT_NAME;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME      TABLE_NAME COLUMN_NAME
-------------------- ---------- ------------
C_DEPTTAB_LOC        DEPTTAB    LOC
R_EMPTAB_DEPTNO      EMPTAB     DEPTNO
R_EMPTAB_MGR         EMPTAB     MGR
SYS_C006286          DEPTTAB    DEPTNO
SYS_C006288          EMPTAB     ENAME
SYS_C006289          EMPTAB     DEPTNO
SYS_C006290          EMPTAB     EMPNO
UK_DEPTTAB_DNAME_LOC DEPTTAB    LOC
UK_DEPTTAB_DNAME_LOC DEPTTAB    DNAME
 
9 rows selected.
</pre></div>
                  <!-- class="example" -->
                  <p>Note that:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Some constraint names are user specified (such as <code class="codeph">UK_DEPTTAB_DNAME_LOC</code>), while others are system specified (such as <code class="codeph">SYS_C006290</code>). 
                        </p>
                     </li>
                     <li>
                        <p>Each constraint type is denoted with a different character in the <code class="codeph">CONSTRAINT_TYPE</code> column. This table summarizes the characters used for each constraint type:
                        </p>
                        <div class="tblformal" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-16980D4A-4238-4CF5-BFD0-B4044854E0B3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table summarizes CONSTRAINT_TYPE column characters." width="90%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d53462e7288">Constraint Type</th>
                                    <th align="left" valign="bottom" width="77%" id="d53462e7291">Character</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7296" headers="d53462e7288 ">
                                       <p><code class="codeph">PRIMARY</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7296 d53462e7291 ">
                                       <p><code class="codeph">P</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7308" headers="d53462e7288 ">
                                       <p><code class="codeph">UNIQUE</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7308 d53462e7291 ">
                                       <p><code class="codeph">U</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7320" headers="d53462e7288 ">
                                       <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7320 d53462e7291 ">
                                       <p><code class="codeph">R</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7332" headers="d53462e7288 ">
                                       <p><code class="codeph">CHECK</code>, <code class="codeph">NOT</code> <code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7332 d53462e7291 ">
                                       <p><code class="codeph">C</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-1723DC4B-8D01-4201-89BA-6C27F8F20F67">
                           <p class="notep1">Note:</p>
                           <p>An additional constraint type is indicated by the character "<code class="codeph">V</code>" in the <code class="codeph">CONSTRAINT_TYPE</code> column. This constraint type corresponds to constraints created using the <code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code> for views.
                           </p>
                        </div>
                     </li>
                  </ul>
                  <p>These constraints are explicitly listed in the <code class="codeph">SEARCH_CONDITION</code> column:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints
                        </p>
                     </li>
                     <li>
                        <p>The conditions for user-defined <code class="codeph">CHECK</code> constraints 
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='01923.oracle-clusterware-resource-reference.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Clusterware Resource Reference</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Clusterware Administration and Deployment Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Clusterware Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00">
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95727-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="cluster-verification-utility-reference.html" title="Previous" type="text/html">
      <link rel="next" href="olsnodes-command-reference.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cluster-verification-utility-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="olsnodes-command-reference.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Clusterware Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware Resource Reference</li>
            </ol>
            <a id="GUID-9C074F34-F180-4200-A99B-72186DAB56E1" name="GUID-9C074F34-F180-4200-A99B-72186DAB56E1"></a><a id="CWADD91383"></a>
            
            <h2 id="CWADD-GUID-9C074F34-F180-4200-A99B-72186DAB56E1" class="sect2"><span class="enumeration_appendix">B </span>Oracle Clusterware Resource Reference
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This appendix is a reference for Oracle Clusterware resources. This appendix includes descriptions and usage examples of resource attributes and detailed descriptions and examples of resource attribute action scripts. This appendix includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-clusterware-resource-reference.html#GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Resource Attributes</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26">Examples of Action Scripts for Third-party Applications</a></p>
                  </li>
               </ul>
            </div><a id="CWADD91443"></a><div class="sect2"><a id="GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" name="GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D"></a><h3 id="CWADD-GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" class="sect3">Resource Attributes</h3>
               <div>
                  <p>This section lists and describes attributes used when you register applications as resources in Oracle Clusterware. Use these attributes with the <code class="codeph">crsctl add resource</code> command, as follows:
                  </p><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -type <span class="variable" translate="no">resource_type</span> -group <span class="variable" translate="no">group_name</span>
{[-attr "<span class="variable" translate="no">attribute_name</span>='<span class="variable" translate="no">attribute_value</span>', <span class="variable" translate="no">attribute_name</span>='<span class="variable" translate="no">attribute_value</span>'
, ..."] | [-file <span class="variable" translate="no">file_name</span>]}
</code></pre><p>List attribute-value pairs in a comma-delimited list after the <code class="codeph">-attr</code> flag and enclose the value of each attribute in single quotation marks (<code class="codeph">''</code>). Some resource attributes you cannot configure and are read only.
                  </p>
                  <p>Alternatively, you can create a text file that contains the attribute-value pairs. For example:</p><pre class="pre codeblock"><code>PLACEMENT=favored
HOSTING_MEMBERS=node1 node2 node3
RESTART_ATTEMPTS@CARDINALITYID(1)=0
RESTART_ATTEMPTS@CARDINALITYID(2)=0
FAILURE_THRESHOLD@CARDINALITYID(1)=2
FAILURE_THRESHOLD@CARDINALITYID(2)=4
FAILURE_INTERVAL@CARDINALITYID(1)=300
FAILURE_INTERVAL@CARDINALITYID(2)=500
CHECK_INTERVAL=2
CARDINALITY=2</code></pre><div class="infoboxnote" id="GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D__GUID-5FEC96C0-38DF-4AC2-9EFE-90992BA598A5">
                     <p class="notep1">Note:</p>
                     <p>The length limit for these attributes is 254 characters.</p>
                  </div>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-clusterware-resource-reference.html#GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.">Configurable Resource Attributes</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-resource-reference.html#GUID-A0E2752E-F36E-41B9-B859-57862B4745D5" title="List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Read-Only Resource Attributes</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-resource-reference.html#GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22">Deprecated Resource Attributes</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91385"></a><div class="sect3"><a id="GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF" name="GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF"></a><h4 id="CWADD-GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF" class="sect4">Configurable Resource Attributes</h4>
                  <div>
                     <p>This section describes the following resource attributes that you can configure when registering an application as a resource in Oracle Clusterware:</p>
                     <div class="infoboxnote" id="GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF__GUID-F4A6924C-8711-4B30-A179-2C6A8C2132D0">
                        <p class="notep1">Note:</p>
                        <p>Values for all attributes must be in lowercase. Attribute names must be in all uppercase letters.</p>
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728">ACL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D">ACTION_SCRIPT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-0867CD88-EF55-4128-BD27-0C40519B9C52">ACTION_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488">ACTIONS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286">ACTIVE_PLACEMENT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-98296B6F-5477-46B4-A8C3-D91655C6C017">AGENT_FILENAME</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-F6338E02-5405-4898-8E3F-D83896982BB8">ALERT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-889D6367-B991-4C02-9782-7A79BAC9F608">AUTO_START</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0">CARDINALITY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579" title="An integer different for each of the INSTANCE_COUNT resource instances.">CARDINALITY_ID</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21">CHECK_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA">CLEAN_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6" title="Resource group attribute that contains a list of resources marked critical for a resource group.">CRITICAL_RESOURCES</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5">DELETE_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5">DESCRIPTION</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9">ENABLED</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-EC735949-C55E-423F-AA22-179CD5B311B7">FAILURE_INTERVAL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9">FAILURE_THRESHOLD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5">INSTANCE_FAILOVER</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981">INTERMEDIATE_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3592659F-ECDB-4117-B1B4-70095179A5B7">LOAD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-74941A1B-F011-45B2-8F35-8BAE992417A2">MODIFY_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F">NAME</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-441C06D9-18E9-4CA6-9D23-17FD54602171">OFFLINE_CHECK_INTERVAL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5">ONLINE_RELOCATION_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8">RELOCATE_BY_DEPENDENCY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79">RELOCATE_KIND</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8">RESTART_ATTEMPTS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9">START_CONCURRENCY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B">START_DEPENDENCIES</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-956F4157-F793-40B8-B0E8-2193124F5F9A">START_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-4AE674F7-431D-4333-93E3-73274D3F8F11">STOP_CONCURRENCY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928">STOP_DEPENDENCIES</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE">STOP_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D">UPTIME_THRESHOLD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-D78C1390-D875-46B0-894C-288907E62D10">USER_WORKLOAD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3744BB7A-0D83-45A3-A024-957CD868435F">USE_STICKINESS</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91387"></a><a id="CWADD91386"></a><div class="sect4"><a id="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728" name="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728"></a><h5 id="CWADD-GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728" class="sect5">ACL</h5>
                     <div>
                        <p><a id="d67172e785" class="indexterm-anchor"></a><a id="d67172e789" class="indexterm-anchor"></a>Defines the owner of a resource and the access privileges granted to various operating system users and groups. The resource owner defines the operating system user of the owner and its privileges. You configure this optional attribute when you create a resource. If you do not configure this attribute, then the value is based on the identity of the process creating the resource. You can change the value of the attribute if such a change is allowed based on the existing privileges of the resource.
                        </p>
                        <div class="infoboxnote" id="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728__GUID-01DAE1BE-CF61-4690-99C0-C81703B066EE">
                           <p class="notep1">Note:</p>
                           <p>All operating system user names and user groups, including <code class="codeph">owner</code>, <code class="codeph">pgrp</code>, <code class="codeph">user</code>, and <code class="codeph">group</code>, <span class="italic">must</span> be registered on <span class="italic">all</span> servers in the cluster.
                           </p>
                        </div>
                        <p>In the string:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">owner</code>: The operating system user that owns a resource and the user under which the action script or application-specific agent runs, followed by the privileges of the owner.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pgrp</code>: The operating system group that is the primary group of the owner of a resource, followed by the privileges of members of the primary group.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">other</code>: Operating system users that are neither the owner nor member of the primary group
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">r</code>: The read option, which gives the ability to only see a resource, its state, and configuration
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">w</code>: The write option, which gives the ability to modify a resource's attributes and to delete the resource
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">x</code>: The execute option, which gives the ability to start, stop, and relocate a resource
                              </p>
                           </li>
                        </ul>
                        <p>By default, the identity of the client that creates a resource is the <code class="codeph">owner</code>. Also by default, <code class="codeph">root</code>, and the user specified in <code class="codeph">owner</code> have full privileges. You can grant required operating system users and operating system groups their privileges by adding the following lines to the <code class="codeph">ACL</code> attribute:
                        </p><pre class="oac_no_warn" dir="ltr">user:<span class="italic">user_name</span>:rwx
group:<span class="italic">group_name</span>:rwx</pre><div class="section">
                           <p class="subhead3" id="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728__GUID-94583875-8C8B-4C16-A6C5-4536F4FA125D">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACL=owner:user_1:rwx,pgrp:osdba:rwx,other::r-
</pre><p>In the preceding example, the owner of the resource is <code class="codeph">user_1</code>, whose primary group is <code class="codeph">osdba</code>. The user, <code class="codeph">user_1</code>, has all privileges, as does the <code class="codeph">osdba</code> group, while other users can only view the resource.
                        </p>
                     </div>
                  </div><a id="CWADD91508"></a><a id="CWADD91390"></a><div class="sect4"><a id="GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D" name="GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D"></a><h5 id="CWADD-GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D" class="sect5">ACTION_SCRIPT</h5>
                     <div>
                        <p><a id="d67172e1008" class="indexterm-anchor"></a><a id="d67172e1012" class="indexterm-anchor"></a>An absolute file name that includes the path and file name of an action script. The agent specified in the <code class="codeph">AGENT_FILENAME</code> attribute calls the script specified in the <code class="codeph">ACTION_SCRIPT</code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D__GUID-30B5D3E0-8B15-44DF-8CFD-0D5364DAF12A">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACTION_SCRIPT=<span class="italic">fully_qualified_path_to_action_script</span></pre></div>
                  </div><a id="CWADD92652"></a><a id="CWADD92651"></a><div class="sect4"><a id="GUID-0867CD88-EF55-4128-BD27-0C40519B9C52" name="GUID-0867CD88-EF55-4128-BD27-0C40519B9C52"></a><h5 id="CWADD-GUID-0867CD88-EF55-4128-BD27-0C40519B9C52" class="sect5">ACTION_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e1149" class="indexterm-anchor"></a><a id="d67172e1153" class="indexterm-anchor"></a>A single timeout value, in seconds, for all supported actions that Oracle Clusterware can perform on a resource.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0867CD88-EF55-4128-BD27-0C40519B9C52__GUID-7BA40240-68EE-427C-8D42-4DBCEDDB44B7">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACTION_TIMEOUT=30</pre></div>
                  </div><a id="CWADD92654"></a><a id="CWADD92653"></a><div class="sect4"><a id="GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488" name="GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488"></a><h5 id="CWADD-GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488" class="sect5">ACTIONS</h5>
                     <div>
                        <p><a id="d67172e1281" class="indexterm-anchor"></a><a id="d67172e1285" class="indexterm-anchor"></a>The <code class="codeph">ACTIONS</code> attribute declares a table of names that lists the actions that Oracle Clusterware can perform on a resource and the permissions that correspond to the actions. The <code class="codeph">ACTIONS</code> attribute contains a space-delimited list of action specifications, where each specification has the following format, where:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">actionName</code></span> is the name of the action (the maximum length is 32 US7ASCII alphanumeric, case-sensitive characters)
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">userName</code></span> is an operating system user name that is enabled to perform the action
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">groupName</code></span> is an operating system group name that is enabled to perform the action 
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">actionName</code></span> [,user:<span class="italic">userName</span> | group:<span class="italic">groupName</span>][ ...]
</pre><p>If you do not specify a <span class="italic"><code class="codeph">userName</code></span> or <span class="italic"><code class="codeph">groupName</code></span>, then Oracle Clusterware assumes that the actions are universally accessible. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488__GUID-BD35ACF0-5C06-456F-BD15-0CE086525877">Usage Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>The following example enables multiple actions: </p><pre class="oac_no_warn" dir="ltr">ACTIONS='action1 action2,user:user2 action3,group:group1'</pre></div>
                  </div><a id="CWADD91509"></a><a id="CWADD91394"></a><div class="sect4"><a id="GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286" name="GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286"></a><h5 id="CWADD-GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286" class="sect5">ACTIVE_PLACEMENT</h5>
                     <div>
                        <p><a id="d67172e1461" class="indexterm-anchor"></a><a id="d67172e1465" class="indexterm-anchor"></a>When set to <code class="codeph">1</code>, Oracle Clusterware uses this attribute to reevaluate the placement of a resource during addition or restart of a cluster server. For resources where <code class="codeph">PLACEMENT=favored</code>, Oracle Clusterware may relocate running resources if the resources run on a non-favored server when a favored one joins the cluster.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286__GUID-0CC59AB9-ED50-4790-95A6-026FA7C864A7">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACTIVE_PLACEMENT=1</pre></div>
                  </div><a id="CWADD91510"></a><a id="CWADD91392"></a><div class="sect4"><a id="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017" name="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017"></a><h5 id="CWADD-GUID-98296B6F-5477-46B4-A8C3-D91655C6C017" class="sect5">AGENT_FILENAME</h5>
                     <div>
                        <p><a id="d67172e1600" class="indexterm-anchor"></a><a id="d67172e1604" class="indexterm-anchor"></a>A fully qualified file name of an agent program that a resource type uses to manage its resources. Every resource type must have an agent program to manage its resources. Resource types use agent programs by either specifying a value for this attribute or inheriting it from their base resource type. There are two script agents included with Oracle Clusterware 12<span class="italic">c</span>: <code class="codeph">application</code> and <code class="codeph">scriptagent</code>. Oracle Clusterware uses the <code class="codeph">application</code> script agent for resources of the deprecated <code class="codeph">application</code> resource type. The default value for this attribute is <code class="codeph">scriptagent</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017__GUID-6BB724C0-036F-41EC-9845-6A774AC9C54A">
                           <p class="notep1">Note:</p>
                           <p>Once the resource is created, you can no longer modify this attribute.</p>
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017__GUID-BFA0E172-DFC7-422D-ACDB-91BB61585B08">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">AGENT_FILENAME=%Grid_home%/bin/application</pre></div>
                  </div><a id="CWADD92656"></a><a id="CWADD92655"></a><div class="sect4"><a id="GUID-F6338E02-5405-4898-8E3F-D83896982BB8" name="GUID-F6338E02-5405-4898-8E3F-D83896982BB8"></a><h5 id="CWADD-GUID-F6338E02-5405-4898-8E3F-D83896982BB8" class="sect5">ALERT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e1754" class="indexterm-anchor"></a><a id="d67172e1758" class="indexterm-anchor"></a>Use to specify additional resource attributes that are to be included in resource state alert messages. You can specify the attribute as a space-delimited list of resource attributes. These attributes must be accessible from the resource type to display in alert messages. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F6338E02-5405-4898-8E3F-D83896982BB8__GUID-913A4AEC-E963-447A-B177-B70145F99435">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ALERT_TEMPLATE="DESCRIPTION HOSTING_MEMBERS"</pre></div>
                  </div><a id="CWADD91444"></a><div class="sect4"><a id="GUID-889D6367-B991-4C02-9782-7A79BAC9F608" name="GUID-889D6367-B991-4C02-9782-7A79BAC9F608"></a><h5 id="CWADD-GUID-889D6367-B991-4C02-9782-7A79BAC9F608" class="sect5">AUTO_START</h5>
                     <div>
                        <p><a id="d67172e1885" class="indexterm-anchor"></a><a id="d67172e1889" class="indexterm-anchor"></a>Indicates whether Oracle Clusterware automatically starts a resource after a cluster server restart. Valid <code class="codeph">AUTO_START</code> values are:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">always</code>: Restarts the resource when the server restarts regardless of the state of the resource when the server stopped.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">restore</code>: Restores the resource to the same state that it was in when the server stopped. Oracle Clusterware attempts to restart the resource if the value of <code class="codeph">TARGET</code> was <code class="codeph">ONLINE</code> before the server stopped.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">never</code>: Oracle Clusterware never restarts the resource regardless of the state of the resource when the server stopped.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD91446"></a><a id="CWADD91445"></a><div class="sect4"><a id="GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0" name="GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0"></a><h5 id="CWADD-GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0" class="sect5">CARDINALITY</h5>
                     <div>
                        <p>The number of servers on which a resource or resource group can run, simultaneously. This is the upper limit for resource cardinality.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0__GUID-72BDF134-622B-422E-9390-601C67610EE0">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>CARDINALITY=1
</code></pre><p>You can also use a value such that cardinality always increases and decreases with the number of servers that are assigned to the server pool in which the resource or resource group is configured to run. The value is:</p><pre class="pre codeblock"><code>CARDINALITY=%CRS_SERVER_POOL_SIZE%
</code></pre><p>Only resources with <code class="codeph">PLACEMENT=restricted</code> and that use the <code class="codeph">SERVER_POOLS</code> attribute can use this value.
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579" name="GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579"></a><h5 id="CWADD-GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579" class="sect5">CARDINALITY_ID</h5>
                     <div>
                        <p>An integer different for each of the INSTANCE_COUNT resource instances.</p>
                        <div class="section">
                           <p>The value for this parameter varies from 1 to CARDINALITY*2. The number of resource instances can be greater than that of th value of CARDINALITY only when you use online relocation (RELOCATE_KIND=online), or if you decrease the resource instance count.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD91448"></a><a id="CWADD91447"></a><div class="sect4"><a id="GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D" name="GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D"></a><h5 id="CWADD-GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D" class="sect5">CHECK_INTERVAL</h5>
                     <div>
                        <p><a id="d67172e2330" class="indexterm-anchor"></a><a id="d67172e2334" class="indexterm-anchor"></a>The time interval, in seconds, between repeated executions of the <code class="codeph">check</code> action. Shorter intervals enable more frequent checks but also increase resource consumption if you use the script agent. Use an application-specific agent to reduce resource consumption.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D__GUID-C9B7479D-BB4C-445D-8946-C2D6BEE9BAF2">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">CHECK_INTERVAL=60</pre></div>
                  </div><a id="CWADD92417"></a><a id="CWADD92416"></a><div class="sect4"><a id="GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21" name="GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21"></a><h5 id="CWADD-GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21" class="sect5">CHECK_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e2466" class="indexterm-anchor"></a><a id="d67172e2470" class="indexterm-anchor"></a>The maximum time, in seconds, in which a check action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify this attribute or if you specify 0 seconds, then Oracle Clusterware uses the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21__GUID-1597116E-98F3-4A54-9F2F-9BABE55404C0">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">CHECK_TIMEOUT=30</pre></div>
                  </div><a id="CWADD92658"></a><a id="CWADD92657"></a><div class="sect4"><a id="GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA" name="GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA"></a><h5 id="CWADD-GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA" class="sect5">CLEAN_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e2603" class="indexterm-anchor"></a><a id="d67172e2607" class="indexterm-anchor"></a>The maximum time, in seconds, in which a clean action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify a value for this attribute or you specify <code class="codeph">0</code> seconds, then Oracle Clusterware uses the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE">STOP_TIMEOUT</a></code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA__GUID-36F0F3F9-C24D-4240-8688-9FF8015A3C8C">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">CLEAN_TIMEOUT=30</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6" name="GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6"></a><h5 id="CWADD-GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6" class="sect5">CRITICAL_RESOURCES</h5>
                     <div>
                        <p>Resource group attribute that contains a list of resources marked critical for a resource group.</p>
                        <div class="section">
                           <p>You specify a space-delimited list of critical resources in the CRITICAL_RESOURCES attribute of a resource group. Use this attribute for both local and cluster resource group types. You can add a <code class="codeph">type:</code> option followed by a resource type name to indicate that all member resources of the specified type are critical resources of the group.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6__GUID-BF206AA3-B4D7-4F14-86B8-964EFCBB1C56">
                           <p class="titleinexample">Example B-1 Usage Examples</p><pre class="pre codeblock"><code>CRITICAL_RESOURCES="r1 r2 r3"
CRITICAL_RESOURCES="appvip type:ora.export.type"
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="CWADD92660"></a><a id="CWADD92659"></a><div class="sect4"><a id="GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5" name="GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5"></a><h5 id="CWADD-GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5" class="sect5">DELETE_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e2882" class="indexterm-anchor"></a><a id="d67172e2886" class="indexterm-anchor"></a>The maximum time, in seconds, in which a delete action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify a value for this attribute or you specify <code class="codeph">0</code> seconds, then Oracle Clusterware uses the value of the <a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5__GUID-5DAE5085-BD8E-4846-911E-7F5425ED3FDB">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">DELETE_TIMEOUT=30</pre></div>
                  </div><a id="CWADD91452"></a><a id="CWADD91451"></a><div class="sect4"><a id="GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5" name="GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5"></a><h5 id="CWADD-GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5" class="sect5">DESCRIPTION</h5>
                     <div>
                        <p><a id="d67172e3021" class="indexterm-anchor"></a><a id="d67172e3025" class="indexterm-anchor"></a>Enter a description of the resource you are adding.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5__GUID-E077AAEA-E406-4FB5-89BB-C8AF6E55D1CC">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">DESCRIPTION=Apache Web server</pre></div>
                  </div><a id="CWADD91454"></a><a id="CWADD91453"></a><div class="sect4"><a id="GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9" name="GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9"></a><h5 id="CWADD-GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9" class="sect5">ENABLED</h5>
                     <div>
                        <p><a id="d67172e3153" class="indexterm-anchor"></a><a id="d67172e3157" class="indexterm-anchor"></a>Oracle Clusterware uses this attribute to manage the state of the resource. Oracle Clusterware does not attempt to manage a disabled (<code class="codeph">ENABLED=0</code>) resource either directly or because of a dependency to another resource. A disabled resource cannot be started but it can be stopped. Oracle Clusterware does not actively monitor disabled resources, meaning that Oracle Clusterware does not check their state. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9__GUID-D48707BE-AE45-4FDF-B0F6-D2C25A4B09BF">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ENABLED=1</pre></div>
                  </div><a id="CWADD91456"></a><a id="CWADD91455"></a><div class="sect4"><a id="GUID-EC735949-C55E-423F-AA22-179CD5B311B7" name="GUID-EC735949-C55E-423F-AA22-179CD5B311B7"></a><h5 id="CWADD-GUID-EC735949-C55E-423F-AA22-179CD5B311B7" class="sect5">FAILURE_INTERVAL</h5>
                     <div>
                        <p><a id="d67172e3289" class="indexterm-anchor"></a><a id="d67172e3293" class="indexterm-anchor"></a>The interval, in seconds, before which Oracle Clusterware stops a resource if the resource has exceeded the number of failures specified by the <code class="codeph">FAILURE_THRESHOLD</code> attribute. If the value is zero (<code class="codeph">0</code>), then tracking of failures is disabled.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-EC735949-C55E-423F-AA22-179CD5B311B7__GUID-07A80B2C-259B-4F3E-A2BD-F0DCC458EFF8">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">FAILURE_INTERVAL=30</pre></div>
                  </div><a id="CWADD91458"></a><a id="CWADD91457"></a><div class="sect4"><a id="GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9" name="GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9"></a><h5 id="CWADD-GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9" class="sect5">FAILURE_THRESHOLD</h5>
                     <div>
                        <p><a id="d67172e3427" class="indexterm-anchor"></a><a id="d67172e3431" class="indexterm-anchor"></a>The number of failures of a resource detected within a specified <code class="codeph">FAILURE_INTERVAL</code> for the resource before Oracle Clusterware marks the resource as unavailable and no longer monitors it. If a resource fails the specified number of times, then Oracle Clusterware stops the resource. If the value is zero (<code class="codeph">0</code>), then tracking of failures is disabled. The maximum value is <code class="codeph">20</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9__GUID-DF7F947B-4AA5-4FA3-B8E3-19E34088DC4C">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">FAILURE_THRESHOLD=3</pre></div>
                  </div><a id="CWADD91511"></a><a id="CWADD91459"></a><div class="sect4"><a id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88" name="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88"></a><h5 id="CWADD-GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88" class="sect5">HOSTING_MEMBERS</h5>
                     <div>
                        <p><a id="d67172e3568" class="indexterm-anchor"></a><a id="d67172e3572" class="indexterm-anchor"></a>A space-delimited, ordered list of cluster server names that can host a resource. This attribute is required only when using administrator management, and when the value of the <code class="codeph">PLACEMENT</code> attribute is set to <code class="codeph">favored</code> or <code class="codeph">restricted</code>. When registering applications as Oracle Clusterware resources, use the <code class="codeph">SERVER_POOLS</code> attribute, instead.
                        </p>
                        <div class="infoboxnote" id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88__GUID-3A528DEA-088B-473A-A1D0-12692FA95622">
                           <p class="notep1">Note:</p>
                           <p>For resources of <code class="codeph">application</code> type, Oracle Clusterware places servers listed in the <code class="codeph">HOSTING_MEMBERS</code> attribute in the Generic server pool.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88__GUID-987F4E82-8CBC-4597-89BF-C1F242C8C24D">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="policy-based-cluster-and-capacity-management.html#GUID-C0D8A868-2AC4-485C-B558-E60E3977BB81">Default Server Pools </a>"</span> for more information about the Generic server pool
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-3592659F-ECDB-4117-B1B4-70095179A5B7">LOAD</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>To obtain a list of candidate node names, run the <code class="codeph">olsnodes</code> command to display a list of your server names.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88__GUID-51AACD34-E490-4642-ADB1-B2465FC1C468">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">HOSTING_MEMBERS=server1 server2 server3</pre></div>
                  </div><a id="CWADD92664"></a><a id="CWADD92663"></a><div class="sect4"><a id="GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5" name="GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5"></a><h5 id="CWADD-GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5" class="sect5">INSTANCE_FAILOVER</h5>
                     <div>
                        <p><a id="d67172e3751" class="indexterm-anchor"></a><a id="d67172e3755" class="indexterm-anchor"></a>Use the <code class="codeph">INSTANCE_FAILOVER</code> attribute for resources of type <code class="codeph">CLUSTER_RESOURCE</code>. Using this attribute enables you to disallow the failover of resource instances from the servers on which they fail. This enables you to bind the resource to a particular server.
                        </p>
                        <p>Set to <code class="codeph">0</code> to disable instance failover.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5__GUID-237C407F-6A09-47E2-A0EE-D1D237B859A1">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">INSTANCE_FAILOVER=1</pre></div>
                  </div><a id="CWADD92666"></a><a id="CWADD92665"></a><div class="sect4"><a id="GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981" name="GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981"></a><h5 id="CWADD-GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981" class="sect5">INTERMEDIATE_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e3894" class="indexterm-anchor"></a><a id="d67172e3898" class="indexterm-anchor"></a>Denotes the maximum amount of time in seconds that a resource can remain in the <code class="codeph">INTERMEDIATE</code> state before the resource is declared as failed. The value of <code class="codeph">INTERMEDIATE_TIMEOUT</code> must be greater than <code class="codeph">0</code> to take effect. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981__GUID-528F713E-3439-4206-9DCB-815920B7BC6E">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">INTERMEDIATE_TIMEOUT=60</pre></div>
                  </div><a id="CWADD91461"></a><a id="CWADD91460"></a><div class="sect4"><a id="GUID-3592659F-ECDB-4117-B1B4-70095179A5B7" name="GUID-3592659F-ECDB-4117-B1B4-70095179A5B7"></a><h5 id="CWADD-GUID-3592659F-ECDB-4117-B1B4-70095179A5B7" class="sect5">LOAD</h5>
                     <div>
                        <p><a id="d67172e4035" class="indexterm-anchor"></a><a id="d67172e4039" class="indexterm-anchor"></a>Oracle Clusterware interprets the value of this attribute along with that of the <code class="codeph">PLACEMENT</code> attribute. When the value of <code class="codeph">PLACEMENT</code> is <code class="codeph">balanced</code>, the value of <code class="codeph">LOAD</code> determines where best to place a resource. A nonnegative, numeric value that quantitatively represents how much server capacity an instance of a resource consumes relative to other resources. Oracle Clusterware attempts to place resources on servers with the least total load of running resources.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3592659F-ECDB-4117-B1B4-70095179A5B7__GUID-D826DDCF-2380-4F0B-BCB8-3B3F79FB7A1B">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">LOAD=1</pre></div>
                  </div><a id="CWADD92668"></a><a id="CWADD92667"></a><div class="sect4"><a id="GUID-74941A1B-F011-45B2-8F35-8BAE992417A2" name="GUID-74941A1B-F011-45B2-8F35-8BAE992417A2"></a><h5 id="CWADD-GUID-74941A1B-F011-45B2-8F35-8BAE992417A2" class="sect5">MODIFY_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e4180" class="indexterm-anchor"></a><a id="d67172e4184" class="indexterm-anchor"></a>The maximum time, in seconds, in which a modify action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify a value for this attribute or you specify <code class="codeph">0</code> seconds, then Oracle Clusterware uses the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-74941A1B-F011-45B2-8F35-8BAE992417A2__GUID-68F56CD3-9D95-4E1D-8725-07C865DAFB9E">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">MODIFY_TIMEOUT=30</pre></div>
                  </div><a id="CWADD91463"></a><a id="CWADD91462"></a><div class="sect4"><a id="GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F" name="GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F"></a><h5 id="CWADD-GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F" class="sect5">NAME</h5>
                     <div>
                        <p><a id="d67172e4320" class="indexterm-anchor"></a><a id="d67172e4324" class="indexterm-anchor"></a>A case-sensitive alphanumeric string that names the resource. Oracle recommends a naming convention that starts with an alphanumeric prefix, such as <code class="codeph">myApache</code>, and complete the name with an identifier to describe it. A resource name can contain any platform-supported characters except the exclamation point (!) and the tilde (~). A resource name cannot begin with a period (.) nor with the string <span class="italic">ora</span>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F__GUID-C911A1D7-4FA2-49C2-957D-BD78AA633D05">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">NAME=myApache</pre></div>
                  </div><a id="CWADD91465"></a><a id="CWADD91464"></a><div class="sect4"><a id="GUID-441C06D9-18E9-4CA6-9D23-17FD54602171" name="GUID-441C06D9-18E9-4CA6-9D23-17FD54602171"></a><h5 id="CWADD-GUID-441C06D9-18E9-4CA6-9D23-17FD54602171" class="sect5">OFFLINE_CHECK_INTERVAL</h5>
                     <div>
                        <p><a id="d67172e4458" class="indexterm-anchor"></a><a id="d67172e4462" class="indexterm-anchor"></a>Controls offline monitoring of a resource. The value represents the interval (in seconds) that Oracle Clusterware monitors a resource when its state is <code class="codeph">OFFLINE</code>. Monitoring is disabled if the value is <code class="codeph">0</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-441C06D9-18E9-4CA6-9D23-17FD54602171__GUID-7AA052E5-6AA5-4520-B0C9-92C10D66209A">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">OFFLINE_CHECK_INTERVAL=30</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5" name="GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5"></a><h5 id="CWADD-GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5" class="sect5">ONLINE_RELOCATION_TIMEOUT</h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>(Optional) Describe the parameter here.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD91467"></a><a id="CWADD91466"></a><div class="sect4"><a id="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16" name="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16"></a><h5 id="CWADD-GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16" class="sect5">PLACEMENT</h5>
                     <div>
                        <p><a id="d67172e4726" class="indexterm-anchor"></a><a id="d67172e4730" class="indexterm-anchor"></a>Specifies how Oracle Clusterware selects a cluster server on which to start a resource. Valid values are <code class="codeph">balanced</code>, <code class="codeph">favored</code>, or <code class="codeph">restricted</code>.
                        </p>
                        <p>If you set the <code class="codeph">PLACEMENT</code> attribute to <code class="codeph">favored</code> or <code class="codeph">restricted</code>, then you must also assign values to the <code class="codeph">SERVER_POOLS</code> and <code class="codeph">HOSTING_MEMBERS</code> attributes. If you set the value of the <code class="codeph">PLACEMENT</code> attribute to <code class="codeph">balanced</code>, then the <code class="codeph">HOSTING_MEMBERS</code> attribute is not required.
                        </p>
                        <div class="infoboxnotealso" id="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16__GUID-B9C593A6-138B-4ECD-A3E2-C496BF3B5230">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="A resource can be started on any server, subject to the placement policies, the resource start dependencies, and the availability of the action script on that server.">Application Placement Policies</a>"</span> for more information about the <code class="codeph">PLACEMENT</code> attribute
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16__GUID-7357C1DA-B83B-4A0D-A1CA-5220E23C60DD">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">PLACEMENT=favored</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79" name="GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79"></a><h5 id="CWADD-GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79" class="sect5">RELOCATE_KIND</h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>Use to control how a resource is relocated. During an offline relocation operation, the target resource instance is stopped on the source server and subsequently started on the destination server. An online relocation operation first starts the resource instance on the destination server before stopping it on the source server. Start-only starts the resource instance on the destination server, but will not stop the resource instance on the source server. Instead, the agent stops the resource instance once the relocate is complete.</p>
                           <p>You can choose either <code class="codeph">offline/0</code>, <code class="codeph">online/1</code>, or <code class="codeph">start-only/2</code> as a value for this parameter.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79__GUID-F6D7E61F-6059-4381-9E9E-A3311514853E">Usage Examples</p><pre class="pre codeblock"><code>RELOCATE_KIND=1
RELOCATE_KIND=start-only</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD92670"></a><a id="CWADD92669"></a><div class="sect4"><a id="GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8" name="GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8"></a><h5 id="CWADD-GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8" class="sect5">RELOCATE_BY_DEPENDENCY</h5>
                     <div>
                        <p><a id="d67172e5073" class="indexterm-anchor"></a><a id="d67172e5077" class="indexterm-anchor"></a>Use to declare whether a resource will be enabled for relocation if requested to do so because of a dependency on the resource for which the relocation was requested. If 0, the resource will not be allowed to relocate because of a dependency on the resource for which relocate request was issued. The valid values are <code class="codeph">1</code> or <code class="codeph">0</code>. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8__GUID-845AC6FD-169E-42F9-908B-769FFF367A8C">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">RELOCATE_BY_DEPENDENCY=1</pre></div>
                  </div><a id="CWADD91471"></a><a id="CWADD91470"></a><div class="sect4"><a id="GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8" name="GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8"></a><h5 id="CWADD-GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8" class="sect5">RESTART_ATTEMPTS</h5>
                     <div>
                        <p><a id="d67172e5211" class="indexterm-anchor"></a><a id="d67172e5215" class="indexterm-anchor"></a>The number of times that Oracle Clusterware attempts to restart a resource on the resource's current server before attempting to relocate it. A value of <code class="codeph">1</code> indicates that Oracle Clusterware only attempts to restart the resource once on a server. A second failure causes Oracle Clusterware to attempt to relocate the resource. A value of <code class="codeph">0</code> indicates that there is no attempt to restart but Oracle Clusterware always tries to fail the resource over to another server.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8__GUID-2EF32B4E-10F5-4A2C-B633-FF19F79D6B07">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">RESTART_ATTEMPTS=2</pre></div>
                  </div><a id="CWADD91473"></a><a id="CWADD91472"></a><div class="sect4"><a id="GUID-81B142FF-266E-46CF-9202-3BA44300C5EE" name="GUID-81B142FF-266E-46CF-9202-3BA44300C5EE"></a><h5 id="CWADD-GUID-81B142FF-266E-46CF-9202-3BA44300C5EE" class="sect5">SCRIPT_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e5349" class="indexterm-anchor"></a><a id="d67172e5353" class="indexterm-anchor"></a>The maximum time (in seconds) for an action to run. Oracle Clusterware returns an error message if the action script does not complete within the time specified. The timeout applies to all actions (<code class="codeph">start</code>, <code class="codeph">stop</code>, <code class="codeph">check</code>, and <code class="codeph">clean</code>).
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-81B142FF-266E-46CF-9202-3BA44300C5EE__GUID-F4DC1437-E893-48DB-A8FC-4E9C8F65264A">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">SCRIPT_TIMEOUT=45</pre></div>
                  </div><a id="CWADD92672"></a><a id="CWADD92671"></a><div class="sect4"><a id="GUID-85112566-7B71-423B-87DF-8F5B50CAAF58" name="GUID-85112566-7B71-423B-87DF-8F5B50CAAF58"></a><h5 id="CWADD-GUID-85112566-7B71-423B-87DF-8F5B50CAAF58" class="sect5">SERVER_CATEGORY</h5>
                     <div>
                        <p><a id="d67172e5494" class="indexterm-anchor"></a><a id="d67172e5498" class="indexterm-anchor"></a>For local resources, the definition of a <code class="codeph">local_resource</code> type is extended to be category-aware. In other words, you can restrict local resources to belong to a particular server category. For cluster resources, the value for the <code class="codeph">SERVER_CATEGORY</code> attribute always functions with the value for the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> attribute. Set <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></code> to <code class="codeph">*</code> when <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> is restricted and <code class="codeph">SERVER_CATEGORY</code> is used. If you set <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> to <code class="codeph">restricted</code>, then Oracle Clusterware expects one of the following attributes to also be set: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code></p>
                           </li>
                           <li>
                              <p><code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></code></p>
                           </li>
                           <li>
                              <p><code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code></p>
                           </li>
                        </ul>
                        <p>For example, a resource, known as <code class="codeph">resource1,</code> can have a policy that sets the value of <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> to be <code class="codeph">restricted</code>, and <code class="codeph">SERVER_CATEGORY</code> is set to <code class="codeph">HubCategory</code>. In such a case, Oracle Clusterware would only enable <code class="codeph">resource1</code> to run on the servers that belong to the <code class="codeph">HubCategory</code>.
                        </p>
                        <p>If <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> is set to <code class="codeph">favored</code> and if only one of <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code>, <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></code>, or <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code> is set, then that value expresses a preference. If <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code> is populated and one of <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></code> or <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code> is set, then the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code> indicates placement preference and <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></code> or <code class="codeph">SERVER_CATEGORY</code> indicates a restriction. For example, the <code class="codeph">ora.cluster.vip</code> resource can have a policy that sets the value of <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> to <code class="codeph">favored</code>, and <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code> is set to <code class="codeph">HubCategory</code> and <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code> is set to <code class="codeph">server_name1</code>. In such a case, Oracle Clusterware restricts the placement of <code class="codeph">ora.cluster.vip</code> to the servers in the <code class="codeph">HubCategory</code> and then it prefers the server known as <code class="codeph">server_name1</code>. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-85112566-7B71-423B-87DF-8F5B50CAAF58__GUID-3279D87B-6DF1-4CEE-9FB7-A8388FE3EC9F">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">SERVER_CATEGORY=my_category</pre></div>
                  </div><a id="CWADD91512"></a><a id="CWADD91474"></a><div class="sect4"><a id="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" name="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F"></a><h5 id="CWADD-GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" class="sect5">SERVER_POOLS</h5>
                     <div>
                        <p>The SERVER_POOLS resource attribute is described.</p>
                        <p>A space-delimited list of the server pools to which a particular resource can belong. If a resource can run on any server in a cluster, then use the default value, <code class="codeph">*</code>, unless the resource is a <code class="codeph">cluster_resource</code> type, in which case, the default value for the <code class="codeph">SERVER_POOLS</code> attribute is empty. Only cluster administrators can specify <code class="codeph">*</code> as the value for this attribute.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> attribute with the <code class="codeph">SERVER_POOLS</code> attribute, as follows: If you set the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> attribute to either <code class="codeph">restricted</code> or <code class="codeph">favored</code>, then you must also provide a value for the <code class="codeph">SERVER_POOLS</code> attribute when using policy management for the resource.
                              </p>
                           </li>
                           <li>
                              <p>If the value for <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> is set to <code class="codeph">balanced</code>, then the resource only runs in the Generic and Free pools, unless <code class="codeph">SERVER_POOLS=*</code>.
                              </p>
                           </li>
                        </ul>
                        <p>This attribute creates an affinity between a resource and one or more server pools regarding placement, and depends on the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F__GUID-CC16F770-5BD5-4F78-B6AA-82959A475F96">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>SERVER_POOLS=pool1 pool2 pool3</code></pre><div class="infoboxnotealso" id="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F__GUID-442F730A-9764-4533-984E-748F1E6C2322">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="policy-based-cluster-and-capacity-management.html#GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" title="Resources managed by Oracle Clusterware are contained in logical groups of servers called server pools. This was introduced in Oracle Clusterware 11g release 2 (11.2).With policy-based management, administrators specify the server pool (excluding the Generic and Free pools) in which the servers run.You can use SRVCTL or CRSCTL to create server pools for databases and other applications, respectively.Server categorization enables you to organize servers into particular categories by using attributes such as processor types, memory, and other distinguishing system features.A cluster configuration policy is a document that contains exactly one definition for each server pool managed by the cluster configuration policy set. A cluster configuration policy set is a document that defines the names of all server pools configured for the cluster and definitions for all policies.You can configure a database so that Oracle Clusterware is aware of the CPU requirements and limits for the given database.Oracle Clusterware assigns each server a set of attributes as soon as you add a server to a cluster.Enterprise database servers can use all available memory due to too many open sessions or runaway workloads. Running out of memory can result in failed transactions or, in extreme cases, a restart of the server and the loss of a valuable resource for your applications. Oracle Database QoS Management detects memory pressure on a server in real time and redirects new sessions to other servers to prevent using all available memory on the stressed server.You define servers into named categories, and assign attributes that define servers as members of that category.">Policy-Based Cluster and Capacity Management</a> for more information about server pools 
                                 </p>
                                 <p><span class="q">"<a href="oracle-clusterware-administration.html#GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" title="Role-separated management is an approach to managing cluster resources and workloads in a coordinated fashion in order to reduce the risks of resource conflicts and shortages.">Role-Separated Management</a>"</span> for more information about cluster administrators
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92674"></a><a id="CWADD92673"></a><div class="sect4"><a id="GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9" name="GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9"></a><h5 id="CWADD-GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9" class="sect5">START_CONCURRENCY</h5>
                     <div>
                        <p><a id="d67172e6050" class="indexterm-anchor"></a><a id="d67172e6054" class="indexterm-anchor"></a>Describes the maximum number of start actions that can be concurrent at a time. A value of <code class="codeph">0</code> means â€œno limit." 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9__GUID-906B9F99-98E8-4A39-88FA-74EAD0D6B1A7">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">START_CONCURRENCY=10</pre></div>
                  </div><a id="CWADD91476"></a><a id="CWADD91475"></a><div class="sect4"><a id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B" name="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B"></a><h5 id="CWADD-GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B" class="sect5">START_DEPENDENCIES</h5>
                     <div>
                        <p><a id="d67172e6186" class="indexterm-anchor"></a><a id="d67172e6190" class="indexterm-anchor"></a>Specifies a set of relationships that Oracle Clusterware considers when starting a resource. You can specify a space-delimited list of dependencies on several resources and resource types on which a particular resource can depend.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-8BAD91C9-9F1E-4090-A80B-FAD28164BC4B">Syntax</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">START_DEPENDENCIES=<span class="italic">dependency</span>(<span class="italic">resource_set</span>) [<span class="italic">dependency</span>(<span class="italic">resource_set</span>)] [...]
</pre><p>In the preceding syntax example the variables are defined, as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">dependency</code></span>: Possible values are <code class="codeph">attraction</code>, <code class="codeph">dispersion</code>, <code class="codeph">exclusion</code>, <code class="codeph">hard</code>, <code class="codeph">pullup</code>, and <code class="codeph">weak</code>. You can specify each dependency only once, except for <code class="codeph">pullup</code>, which you can specify multiple times.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">resource_set</code></span>: A comma-delimited list of resource entitiesâ€”either individual resources or resource typesâ€”enclosed in parentheses <code class="codeph">()</code>, in the form of <code class="codeph">res1[, res2[, ...]]</code>, upon which the resource you are configuring depends.
                              </p>
                              <p>Each resource entity is defined, as follows:</p><pre class="oac_no_warn" dir="ltr">[<span class="italic">modifier</span>1:[<span class="italic">modifier</span>2:]] {<span class="italic">resource_name</span> | type:<span class="italic">resource_type</span>}
</pre><p>In the preceding syntax example, <span class="italic"><code class="codeph">resource_name</code></span> is the name of a specific resource and <code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span> is the name of a specific resource type. The resource type must be preceded by <code class="codeph">type</code> and the <code class="codeph">type</code> modifier must be the last resource entity in the list.
                              </p>
                              <p>Optionally, you can specify modifiers to further configure resource entity dependencies. You can modify each dependency by prefixing the following modifiers to the resource entity:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a id="d67172e6294" class="indexterm-anchor"></a><a id="d67172e6300" class="indexterm-anchor"></a><code class="codeph">attraction([intermediate:]{</code><span class="italic"><code class="codeph">resource_name</code></span><code class="codeph"> | </code><code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span><code class="codeph">})</code>â€”Use the <code class="codeph">attraction</code> start dependency when you want this resource to run on the same server with a particular named resource or any resource of a particular type.
                                    </p>
                                    <p>Use <code class="codeph">intermediate</code> to specify that this resource is attracted to resource entities on which it depends that are in the <code class="codeph">INTERMEDIATE</code> state. If not specified, then resources must be in the <code class="codeph">ONLINE</code> state to attract the dependent resource.
                                    </p>
                                    <p>If you specify the <code class="codeph">attraction</code> dependency on a resource type for a resource, then any resource of that particular type attracts the dependent resource.
                                    </p>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6340" class="indexterm-anchor"></a><a id="d67172e6346" class="indexterm-anchor"></a><code class="codeph">exclusion([[preempt_pre: | preempt_post:]]</code> <span class="italic"><code class="codeph">target_resource_name</code></span><code class="codeph"> | type:</code><span class="italic"><code class="codeph">target_resource_type</code></span><code class="codeph">])</code>â€”Use the <code class="codeph">exclusion</code> start dependency to keep resources with this dependency from running on the same node.
                                    </p>
                                    <p>Use the <code class="codeph">preempt_pre</code> modifier to configure the <code class="codeph">exclusion</code> dependency to stop the specified target resource or resources defined by a specific resource type before starting the source resource.
                                    </p>
                                    <p>Use the <code class="codeph">preempt_post</code> modifier to configure the <code class="codeph">exclusion</code> dependency to stop and relocate, if possible, the specified target resource or resources defined by a specific resource type after starting the source resource.
                                    </p>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6385" class="indexterm-anchor"></a><a id="d67172e6391" class="indexterm-anchor"></a><code class="codeph">dispersion[:active]([intermediate:][pool:]{</code><span class="italic"><code class="codeph">resource_name</code></span><code class="codeph"> | </code><code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span><code class="codeph">})</code>â€”Specify the <code class="codeph">dispersion</code> start dependency for a resource that you want to run on a server that is different from the named resources or resources of a particular type. Resources may still end up running on the same server, depending on availability of servers.
                                    </p>
                                    <p>Use the <code class="codeph">active</code> modifier to configure the <code class="codeph">dispersion</code> dependency so that Oracle Clusterware attempts to relocate the dependent resource to another server if it is collocated with another resource and another server comes online. Oracle Clusterware does not relocate resources to newly available servers unless you specify the <code class="codeph">active</code> modifier.
                                    </p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify that Oracle Clusterware can relocate the dependent resource if a resource is in either the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state. If not specified, then resources must be in the <code class="codeph">ONLINE</code> state for dispersion of the dependent resource to occur.
                                    </p>
                                    <p>Use the <code class="codeph">pool</code> modifier if you want a resource to be located in a different server pool than the target, rather than just a different server.
                                    </p>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6445" class="indexterm-anchor"></a><a id="d67172e6451" class="indexterm-anchor"></a><code class="codeph">hard([intermediate:][global:][uniform:]{</code><span class="italic"><code class="codeph">resource_name</code></span><code class="codeph"> | </code><code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span><code class="codeph">})</code>â€”Specify a <code class="codeph">hard</code> start dependency for a resource when you want the resource to start only when a particular resource or resource of a particular type starts.
                                    </p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify that Oracle Clusterware can start this resource if a resource on which it depends is in either the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state. If not specified, then resources <span class="italic">must</span> be in the <code class="codeph">ONLINE</code> state for Oracle Clusterware to start this resource.
                                    </p>
                                    <p>Use the <code class="codeph">global</code> modifier to specify that resources are <span class="italic">not</span> required to reside on the same server as a condition to Oracle Clusterware starting this resource. If not specified, then resources must reside on the same server for Oracle Clusterware to start this resource.
                                    </p>
                                    <p>Use the <code class="codeph">uniform</code> modifier to attempt to start all instances of resource B, but only one instance, at least must start to satisfy the dependency.
                                    </p>
                                    <p>If you specify the <code class="codeph">hard</code> dependency on a resource type for a resource, then the resource can start if any resource of that particular type is running.
                                    </p>
                                    <div class="infoboxnote" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-ABC07783-52D2-4430-AB9F-5FE873BA668D">
                                       <p class="notep1">Note:</p>
                                       <p>Oracle recommends that resources with <code class="codeph">hard</code> start dependencies also have <code class="codeph">pullup</code> start dependencies.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6519" class="indexterm-anchor"></a><a id="d67172e6525" class="indexterm-anchor"></a><code class="codeph">pullup[:always]([intermediate:][global:]{</code><span class="italic"><code class="codeph">resource_name</code></span><code class="codeph"> | </code><code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span><code class="codeph">})</code>â€”When you specify the <code class="codeph">pullup</code> start dependency for a resource, then this resource starts because of named resources starting.
                                    </p>
                                    <p>Use the <code class="codeph">always</code> modifier for <code class="codeph">pullup</code> so that Oracle Clusterware starts this resource despite the value of its <code class="codeph">TARGET</code> attribute, whether that value is <code class="codeph">ONLINE</code> or <code class="codeph">OFFLINE</code>. Otherwise, if you do not specify the <code class="codeph">always</code> modifier, then Oracle Clusterware starts this resource only if the value of the <code class="codeph">TARGET</code> attribute is <code class="codeph">ONLINE</code> for this resource.
                                    </p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify that Oracle Clusterware can start this resource if a resource on which it depends is in either the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state. If not specified, then resources must be in the <code class="codeph">ONLINE</code> state for Oracle Clusterware to start this resource.
                                    </p>
                                    <p>Use the <code class="codeph">global</code> modifier to specify that resources on which this resource depends are <span class="italic">not</span> required to reside on the same server as a condition to Oracle Clusterware starting this resource. If not specified, then resources on which this resource depends must reside on the same server for Oracle Clusterware to start this resource.
                                    </p>
                                    <p>If you specify the <code class="codeph">pullup</code> dependency on a resource type for a resource, then, when any resource of that particular type starts, Oracle Clusterware can start this resource.
                                    </p>
                                    <div class="infoboxnote" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-B20BE62B-99F0-4923-994A-15DD104722F1">
                                       <p class="notep1">Note:</p>
                                       <p>Oracle recommends that resources with <code class="codeph">hard</code> start dependencies also have <code class="codeph">pullup</code> start dependencies.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6612" class="indexterm-anchor"></a><a id="d67172e6618" class="indexterm-anchor"></a><code class="codeph">weak([concurrent:][global:][uniform:]{</code><span class="italic"><code class="codeph">resource_name</code></span><code class="codeph"> | </code><code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span><code class="codeph">})</code>â€”Specify a <code class="codeph">weak</code> start dependency for a resource when you want that resource to start despite whether named resources are running, or not. An attempt to start this resource also attempts to start any resources on which this resource depends if they are not running.
                                    </p>
                                    <p>Use the <code class="codeph">concurrent</code> modifier to specify that Oracle Clusterware can start a dependent resource while a resource on which it depends is in the process of starting. If <code class="codeph">concurrent</code> is not specified, then resources must complete startup before Oracle Clusterware can start the dependent resource.
                                    </p>
                                    <p>Use the <code class="codeph">global</code> modifier to specify that resources are <span class="italic">not</span> required to reside on the same server as a condition to Oracle Clusterware starting the dependent resource.
                                    </p>
                                    <p>Use the <code class="codeph">uniform</code> modifier to start all instances of the resource everywhere the resource can run. If you do not specify a modifier (the default), then the resource starts on the same server as the resource on which it depends.
                                    </p>
                                    <p>If you specify the <code class="codeph">weak</code> start dependency on a resource type for a resource, then the resource can start if any resource of that particular type is running.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-D08F7CCD-1CAE-4887-974B-D0626B9C8D34">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7">Start Dependencies</a>"</span> for more details about start dependencies
                           </p>
                        </div>
                     </div>
                  </div><a id="CWADD91478"></a><a id="CWADD91477"></a><div class="sect4"><a id="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A" name="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A"></a><h5 id="CWADD-GUID-956F4157-F793-40B8-B0E8-2193124F5F9A" class="sect5">START_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e6791" class="indexterm-anchor"></a><a id="d67172e6795" class="indexterm-anchor"></a>The maximum time (in seconds) in which a start action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify a value for this attribute or you specify <code class="codeph">0</code> seconds, then Oracle Clusterware uses the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code> attribute. 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A__GUID-06D8CA30-EA6C-45F4-B4FD-5820E52A9D57">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">START_TIMEOUT=30</pre><div class="infoboxnotealso" id="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A__GUID-F6AB08CA-4A41-4C6A-A39C-CFE729CFCB80">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a>"</span> for more information about this attribute
                           </p>
                        </div>
                     </div>
                  </div><a id="CWADD92676"></a><a id="CWADD92675"></a><div class="sect4"><a id="GUID-4AE674F7-431D-4333-93E3-73274D3F8F11" name="GUID-4AE674F7-431D-4333-93E3-73274D3F8F11"></a><h5 id="CWADD-GUID-4AE674F7-431D-4333-93E3-73274D3F8F11" class="sect5">STOP_CONCURRENCY</h5>
                     <div>
                        <p><a id="d67172e6938" class="indexterm-anchor"></a><a id="d67172e6942" class="indexterm-anchor"></a>Describes the maximum number of stop actions that can be concurrent at a time. A value of <code class="codeph">0</code> means â€œno limit." 
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4AE674F7-431D-4333-93E3-73274D3F8F11__GUID-A70A1049-3B28-4474-8841-26DFDDFD77EC">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">STOP_CONCURRENCY=10</pre></div>
                  </div><a id="CWADD91482"></a><a id="CWADD91481"></a><div class="sect4"><a id="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928" name="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928"></a><h5 id="CWADD-GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928" class="sect5">STOP_DEPENDENCIES</h5>
                     <div>
                        <p><a id="d67172e7074" class="indexterm-anchor"></a><a id="d67172e7078" class="indexterm-anchor"></a>Specifies a set of relationships that Oracle Clusterware considers when stopping a resource.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928__GUID-3BFCE919-6B01-4D83-8F8A-B45E9D9F2DB3">Syntax</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">STOP_DEPENDENCIES=<span class="italic">dependency</span>(<span class="italic">resource_set</span>) [<span class="italic">dependency</span>(<span class="italic">resource_set</span>)] ...
</pre><p>In the preceding syntax example the variables are defined, as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">dependency</code></span>: The only possible value is <code class="codeph">hard</code>.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">resource_set</code></span>: A comma-delimited list, in the form of <code class="codeph">res1[, res2 [,...]]</code>, of resource entitiesâ€”either individual resources or resource typesâ€”upon which the resource you are configuring depends.
                              </p>
                              <p>Each resource entity is defined, as follows:</p><pre class="oac_no_warn" dir="ltr">[<span class="italic">modifier</span>1:[<span class="italic">modifier</span>2:][<span class="italic">modifier</span>3:]] <span class="italic">resource_name</span> | type:<span class="italic">resource_type</span>
</pre><p>In the preceding syntax example, <span class="italic"><code class="codeph">resource_name</code></span> is the name of a specific resource and <code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span> is the name of a specific resource type. The resource type must be preceded by <code class="codeph">type:</code>.
                              </p>
                              <p>Optionally, you can specify modifiers to further configure resource entity dependencies. You can modify each dependency by prefixing the following modifiers to the resource entity:</p>
                              <p><a id="d67172e7158" class="indexterm-anchor"></a><a id="d67172e7164" class="indexterm-anchor"></a><code class="codeph">hard([intermediate:][global:][shutdown:]{</code><span class="italic"><code class="codeph">resource_name</code></span><code class="codeph"> | </code><code class="codeph">type:</code><span class="italic"><code class="codeph">resource_type</code></span><code class="codeph">})</code>â€”Specify a <code class="codeph">hard</code> stop dependency for a resource that you want to stop when named resources or resources of a particular resource type stop.
                              </p>
                              <p>Use <code class="codeph">intermediate</code> to specify that the dependent resource can remain in an <code class="codeph">ONLINE</code> state if a resource is in either the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state. If not specified, then Oracle Clusterware stops the dependent resource unless resources are in the <code class="codeph">ONLINE</code> state.
                              </p>
                              <p>Use <code class="codeph">global</code> to specify that the dependent resource remains in an <code class="codeph">ONLINE</code> state if a resource is in an <code class="codeph">ONLINE</code> state on any node in the cluster. If not specified, then when resources residing on the same server go offline, Oracle Clusterware stops the dependent resource.
                              </p>
                              <p>Use <code class="codeph">shutdown</code> to apply this dependency when the Oracle Clusterware stack is shut down. This is a convenient way to affect the order of stopping resources when stopping the stack, without having any affect on planned or unplanned events on the individual resources. This dependency, when used with the <code class="codeph">shutdown</code> modifier, does not go into effect if somebody stops the resource directly, but only when the stack is shut down.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928__GUID-6DF74015-DF1D-45F5-9458-929EBC27FBBB">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516">Stop Dependencies</a>"</span> for more details about stop dependencies
                           </p>
                        </div>
                     </div>
                  </div><a id="CWADD91484"></a><a id="CWADD91483"></a><div class="sect4"><a id="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE" name="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE"></a><h5 id="CWADD-GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE" class="sect5">STOP_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e7347" class="indexterm-anchor"></a><a id="d67172e7351" class="indexterm-anchor"></a>The maximum time (in seconds) in which a <code class="codeph">stop</code> or <code class="codeph">clean</code> action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify this attribute or if you specify <code class="codeph">0</code> seconds, then Oracle Clusterware uses the value of the <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE__GUID-62DE5BF4-5ED5-442B-AFD8-ECBEBAEF335E">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">STOP_TIMEOUT=30</pre><div class="infoboxnotealso" id="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE__GUID-056A4FA4-4D3B-42C6-92B6-B90646131B77">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-956F4157-F793-40B8-B0E8-2193124F5F9A">START_TIMEOUT</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD91487"></a><div class="sect4"><a id="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D" name="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D"></a><h5 id="CWADD-GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D" class="sect5">UPTIME_THRESHOLD</h5>
                     <div>
                        <p><a id="d67172e7509" class="indexterm-anchor"></a><a id="d67172e7513" class="indexterm-anchor"></a>The value for <code class="codeph">UPTIME_THRESHOLD</code> represents the length of time that a resource must be up before Oracle Clusterware considers the resource to be stable. By setting a value for the <code class="codeph">UPTIME_THRESHOLD</code> attribute, you can indicate the stability of a resource.
                        </p>
                        <p>Enter values for this attribute as a number followed by a letter that represents seconds (s), minutes (m), hours (h), days (d), or weeks (w). For example, a value of <code class="codeph">7h</code> represents an uptime threshold of seven hours.
                        </p>
                        <p>After the time period you specify for <code class="codeph">UPTIME_THRESHOLD</code> elapses, Oracle Clusterware resets the value for <code class="codeph">RESTART_COUNT</code> to <code class="codeph">0</code> at the next resource state change event, such as stop, start, relocate, or failure. Oracle Clusterware can alert you when the value for <code class="codeph">RESTART_COUNT</code> reaches the value that you set for <code class="codeph">RESTART_ATTEMPTS</code>. The counter is effectively reset the next time the resource fails or restarts. The threshold represents the amount of time that restarts are to be counted and discarded. If the resource fails after the threshold, it will still restart.
                        </p>
                        <div class="infoboxnote" id="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D__GUID-65D70AD4-59B5-4E01-8690-939350EB3A40">
                           <p class="notep1">Note:</p>
                           <p>Oracle Clusterware writes an alert to the clusterware alert log file when the value for <code class="codeph">RESTART_COUNT</code> reaches the value that you set for <code class="codeph">RESTART_ATTEMPTS</code>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D__GUID-B3509685-8DAB-4F7C-8918-6DBB2B9F473B">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8">RESTART_ATTEMPTS</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-clusterware-resource-reference.html#GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955">RESTART_COUNT</a>"</span> for more information about this attribute
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92680"></a><a id="CWADD92679"></a><div class="sect4"><a id="GUID-D78C1390-D875-46B0-894C-288907E62D10" name="GUID-D78C1390-D875-46B0-894C-288907E62D10"></a><h5 id="CWADD-GUID-D78C1390-D875-46B0-894C-288907E62D10" class="sect5">USER_WORKLOAD</h5>
                     <div>
                        <p><a id="d67172e7691" class="indexterm-anchor"></a><a id="d67172e7695" class="indexterm-anchor"></a>Use to indicate whether a resource is a workload generating resource for what-if analysis. Possible values are <code class="codeph">yes</code> or <code class="codeph">no</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D78C1390-D875-46B0-894C-288907E62D10__GUID-6D8EC1C3-1A45-4036-84FF-D8A913622AB3">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">USER_WORKLOAD=yes</pre></div>
                  </div><a id="CWADD92682"></a><a id="CWADD92681"></a><div class="sect4"><a id="GUID-3744BB7A-0D83-45A3-A024-957CD868435F" name="GUID-3744BB7A-0D83-45A3-A024-957CD868435F"></a><h5 id="CWADD-GUID-3744BB7A-0D83-45A3-A024-957CD868435F" class="sect5">USE_STICKINESS</h5>
                     <div>
                        <p><a id="d67172e7829" class="indexterm-anchor"></a><a id="d67172e7833" class="indexterm-anchor"></a>Use to indicate that a resource should run where it last ran, if possible, and to not permit load-balancing that would otherwise apply. If set to <code class="codeph">1</code>, Oracle Clusterware attempts to start the resource where it last ran. Enabling <code class="codeph">USE_STICKINESS</code> also disables load-balancing. The default value is <code class="codeph">0</code>. Possible values are <code class="codeph">0</code> and <code class="codeph">1</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3744BB7A-0D83-45A3-A024-957CD868435F__GUID-5E9F4300-3837-44E8-958F-A219ABD50DC1">Usage Example</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">USE_STICKINESS=1</pre></div>
                  </div>
               </div><a id="CWADD91488"></a><div class="sect3"><a id="GUID-A0E2752E-F36E-41B9-B859-57862B4745D5" name="GUID-A0E2752E-F36E-41B9-B859-57862B4745D5"></a><h4 id="CWADD-GUID-A0E2752E-F36E-41B9-B859-57862B4745D5" class="sect4">Read-Only Resource Attributes</h4>
                  <div>
                     <p>You can view these attributes when you run the <code class="codeph">crsctl status resource</code> command on a particular resource. Oracle Clusterware sets these attributes when you register resources.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046">ACTION_FAILURE_EVENT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170">INSTANCE_COUNT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1">INTERNAL_STATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF">LAST_SERVER</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377">LAST_STATE_CHANGE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D">PROFILE_CHANGE_EVENT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955">RESTART_COUNT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF">STATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-DEA86F42-F78A-4BD0-854E-BE4627641968">STATE_CHANGE_EVENT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F">STATE_DETAILS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376">TARGET</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7">TARGET_SERVER</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE">TYPE</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91388"></a><div class="sect4"><a id="GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046" name="GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046"></a><h5 id="CWADD-GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046" class="sect5">ACTION_FAILURE_EVENT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e8164" class="indexterm-anchor"></a><a id="d67172e8168" class="indexterm-anchor"></a>This is an internally-managed attribute for an <code class="codeph">ora.*</code> resource. You cannot edit this attribute.
                        </p>
                     </div>
                  </div><a id="CWADD92661"></a><div class="sect4"><a id="GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170" name="GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170"></a><h5 id="CWADD-GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170" class="sect5">INSTANCE_COUNT</h5>
                     <div>
                        <p><a id="d67172e8293" class="indexterm-anchor"></a><a id="d67172e8297" class="indexterm-anchor"></a>The <code class="codeph">INSTANCE_COUNT</code> attribute is an internally managed attribute that contains the number of instances that the resource currently has. 
                        </p>
                     </div>
                  </div><a id="CWADD92145"></a><div class="sect4"><a id="GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1" name="GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1"></a><h5 id="CWADD-GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1" class="sect5">INTERNAL_STATE</h5>
                     <div>
                        <p><a id="d67172e8423" class="indexterm-anchor"></a><a id="d67172e8427" class="indexterm-anchor"></a>An internally managed, read-only attribute that describes what, if any, action the policy engine is currently executing on the resource. Possible values and their meanings are as follows:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">STARTING</code>: The policy engine is currently starting the resource
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">STOPPING</code>: The policy engine is currently stopping the resource
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLEANING</code>: The policy engine is currently cleaning the resource
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">STABLE</code>: The policy engine is not currently executing any action on the resource
                              </p>
                              <p>Note, however, that the resource can still be locked as part of some other command.</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD91489"></a><div class="sect4"><a id="GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF" name="GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF"></a><h5 id="CWADD-GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF" class="sect5">LAST_SERVER</h5>
                     <div>
                        <p><a id="d67172e8572" class="indexterm-anchor"></a><a id="d67172e8576" class="indexterm-anchor"></a>For <code class="codeph">cluster_resource</code>-type resources, this is an internally managed, read-only attribute that contains the name of the server on which the last <code class="codeph">start</code> action for the resource succeeded.
                        </p>
                        <p>For <code class="codeph">local_resource</code>-type resources, this is the name of the server to which the resource instance is pinned.
                        </p>
                     </div>
                  </div><a id="CWADD92146"></a><div class="sect4"><a id="GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377" name="GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377"></a><h5 id="CWADD-GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377" class="sect5">LAST_STATE_CHANGE</h5>
                     <div>
                        <p><a id="d67172e8709" class="indexterm-anchor"></a><a id="d67172e8713" class="indexterm-anchor"></a>An internally managed, read-only attribute that describes when the policy engine registers the current state of the resource. Note that this may either be the timestamp of when state of the resource changed or when the policy engine discovered the state, as occurs when CRSD restarts.
                        </p>
                     </div>
                  </div><a id="CWADD91468"></a><div class="sect4"><a id="GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D" name="GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D"></a><h5 id="CWADD-GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D" class="sect5">PROFILE_CHANGE_EVENT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e8836" class="indexterm-anchor"></a><a id="d67172e8840" class="indexterm-anchor"></a>This is an internally-managed attribute for an <code class="codeph">ora.*</code> resource. You cannot edit this attribute.
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-5D3DB43E-E017-4461-A795-6779B3BBFC5B" name="GUID-5D3DB43E-E017-4461-A795-6779B3BBFC5B"></a><h5 id="CWADD-GUID-5D3DB43E-E017-4461-A795-6779B3BBFC5B" class="sect5">RESOURCE_LIST</h5>
                     <div>
                        <p>List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.</p>
                        <div class="section">
                           <p>Use this attribute with resource groups.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD91490"></a><div class="sect4"><a id="GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955" name="GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955"></a><h5 id="CWADD-GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955" class="sect5">RESTART_COUNT</h5>
                     <div>
                        <p><a id="d67172e9095" class="indexterm-anchor"></a><a id="d67172e9099" class="indexterm-anchor"></a>An internally-managed attribute used by the Oracle Clusterware daemon to count the number of attempts to restart a resource, starting from zero up to the value specified in the <code class="codeph">RESTART_ATTEMPTS</code> attribute. You cannot edit this attribute.
                        </p>
                     </div>
                  </div><a id="CWADD92147"></a><div class="sect4"><a id="GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF" name="GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF"></a><h5 id="CWADD-GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF" class="sect5">STATE</h5>
                     <div>
                        <p>An internally-managed attribute that reflects the current state of the resource as reported by Oracle Clusterware. The state of a resource can be one of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ONLINE</code>: The resource is online and resource monitoring is enabled (see <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></code>).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OFFLINE</code>: The resource is offline and only offline resource monitoring is enabled, if configured (see <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-441C06D9-18E9-4CA6-9D23-17FD54602171">OFFLINE_CHECK_INTERVAL</a></code>).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">INTERMEDIATE</code>: The resource is either partially online or was known to be online before and subsequent attempts to determine its state have failed; resource monitoring is enabled (see <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></code>).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNKNOWN</code>: The resource is unmanageable and its current state is unknown; manual intervention is required to resume its operation. A resource in this state is not monitored.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD91479"></a><div class="sect4"><a id="GUID-DEA86F42-F78A-4BD0-854E-BE4627641968" name="GUID-DEA86F42-F78A-4BD0-854E-BE4627641968"></a><h5 id="CWADD-GUID-DEA86F42-F78A-4BD0-854E-BE4627641968" class="sect5">STATE_CHANGE_EVENT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e9379" class="indexterm-anchor"></a><a id="d67172e9383" class="indexterm-anchor"></a>This is an internally-managed attribute for an <code class="codeph">ora.*</code> resource. You cannot edit this attribute.
                        </p>
                     </div>
                  </div><a id="CWADD91491"></a><div class="sect4"><a id="GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F" name="GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F"></a><h5 id="CWADD-GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F" class="sect5">STATE_DETAILS</h5>
                     <div>
                        <p><a id="d67172e9508" class="indexterm-anchor"></a><a id="d67172e9512" class="indexterm-anchor"></a>An internally managed, read-only attribute that contains details about the state of a resource.
                        </p>
                        <p>The four resource statesâ€”<code class="codeph">ONLINE</code>, <code class="codeph">OFFLINE</code>, <code class="codeph">UNKNOWN</code>, and <code class="codeph">INTERMEDIATE</code>â€”may map to different resource-specific values, such as mounted, unmounted, and open. Resource agent developers can use the <code class="codeph">STATE_DETAILS</code> attribute to provide a more detailed description of this mapping, resource to the resource state.
                        </p>
                        <p>Providing details is optional. If details are not provided, then Oracle Clusterware uses only the four possible resource states. Additionally, if the agent cannot provide these details (as may also happen to the value of the resource state), then Oracle Clusterware sets the value of this attribute to provide minimal details about why the resource is in its current state.</p>
                     </div>
                  </div><a id="CWADD91492"></a><div class="sect4"><a id="GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376" name="GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376"></a><h5 id="CWADD-GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376" class="sect5">TARGET</h5>
                     <div>
                        <p><a id="d67172e9654" class="indexterm-anchor"></a><a id="d67172e9658" class="indexterm-anchor"></a>An internal, read-only attribute that describes the desired state of a resource. Using the <code class="codeph">crsctl start </code><span class="italic"><code class="codeph">resource_name</code></span> or <code class="codeph">crsctl stop </code><span class="italic"><code class="codeph">resource_name</code></span> commands, however, can affect the value of this attribute.
                        </p>
                     </div>
                  </div><a id="CWADD92677"></a><div class="sect4"><a id="GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7" name="GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7"></a><h5 id="CWADD-GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7" class="sect5">TARGET_SERVER</h5>
                     <div>
                        <p><a id="d67172e9792" class="indexterm-anchor"></a><a id="d67172e9796" class="indexterm-anchor"></a>This is an internally-managed attribute that contains the name of the server where the resource is starting. This value is relevant when the resource is starting.
                        </p>
                     </div>
                  </div><a id="CWADD91485"></a><div class="sect4"><a id="GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE" name="GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE"></a><h5 id="CWADD-GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE" class="sect5">TYPE</h5>
                     <div>
                        <p><a id="d67172e9918" class="indexterm-anchor"></a><a id="d67172e9922" class="indexterm-anchor"></a>The type of resource indicated when you create a resource. This attribute is required when creating a resource and cannot be changed after the resource is created.
                        </p>
                        <div class="infoboxnotealso" id="GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE__GUID-9247619B-0559-4363-95FA-2ACE3E22E09C">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware Resource Types</a>"</span> for details of resource types
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92897"></a><div class="sect3"><a id="GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22" name="GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22"></a><h4 id="CWADD-GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22" class="sect4">Deprecated Resource Attributes</h4>
                  <div>
                     <p>The following resource attributes are deprecated in Oracle Clusterware 12<span class="italic">c</span>:
                     </p>
                  </div><a id="CWADD91449"></a><div class="sect4"><a id="GUID-AD966822-7D31-49CF-A25B-96C73F23F3DC" name="GUID-AD966822-7D31-49CF-A25B-96C73F23F3DC"></a><h5 id="CWADD-GUID-AD966822-7D31-49CF-A25B-96C73F23F3DC" class="sect5">DEGREE</h5>
                     <div>
                        <p>The number of instances of a cluster resource that can run on a single server.</p>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92006"></a><a id="CWADD91496"></a><a id="CWADD91497"></a><a id="CWADD91495"></a><div class="sect2"><a id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26" name="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26"></a><h3 id="CWADD-GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26" class="sect3">Examples of Action Scripts for Third-party Applications</h3>
               <div>
                  <p>This section includes examples of third-party applications using script agents.</p>
                  <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDJABHC">Example B-2</a> shows an action script that fails over the Apache Web server.
                  </p>
                  <div class="example" id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDJABHC">
                     <p class="titleinexample">Example B-2 Apache Action Script</p><pre class="oac_no_warn" dir="ltr">#!/bin/sh

HTTPDCONFLOCATION=/etc/httpd/conf/httpd.conf
WEBPAGECHECK=http://&lt;MyVIP&gt;:80/icons/apache_pb.gif

case $1 in
'start')
    /usr/sbin/apachectl -k start -f $HTTPDCONFLOCATION
   RET=$?
    ;;
sleep(10)
    ;;
'stop')
    /usr/sbin/apachectl -k stop
   RET=$?
    ;;
'clean')
    /usr/sbin/apachectl -k stop
   RET=$?
    ;;
'check')
    /usr/bin/wget -q --delete-after $WEBPAGECHECK
   RET=$?
    ;;
*)
   RET=0
    ;;
esac
# 0: success; 1 : error
if [ $RET -eq 0 ]; then
exit 0
else
exit 1
fi
</pre></div>
                  <!-- class="example" -->
                  <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDCDGHF">Example B-3</a> shows the <span class="bold">xclock</span> script, which is a simple action script using <code class="codeph">xclock</code> available as a default binary on all Linux and UNIX platforms.
                  </p>
                  <div class="example" id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDCDGHF">
                     <p class="titleinexample">Example B-3 xclock Action Script</p><pre class="oac_no_warn" dir="ltr">#!/bin/bash
# start/stop/check script for xclock example
# To test this change BIN_DIR to the directory where xclock is based
# and set the DISPLAY variable to a server within your network.

BIN_DIR=/usr/X11R6/bin
LOG_DIR=/tmp
BIN_NAME=xclock
DISPLAY=yourhost.domain.com:0.0
export DISPLAY
exit_code=0

if [ ! -d $BIN_DIR ]
then
        echo "start failed"
        exit 2
fi

PID1=`ps -ef | grep $BIN_NAME | grep -v grep | grep -v xclock_app | awk '{ print $2 }'`
case $1 in
'start')
        if [ "$PID1" != "" ]
        then
           status_p1="running"
        else
           if [ -x $BIN_DIR/$BIN_NAME ]
           then
             umask 002
             ${BIN_DIR}/${BIN_NAME} &amp; 2&gt;${LOG_DIR}/${BIN_NAME}.log
             status_p1="started"
           else
             echo `basename $0`": $BIN_NAME: Executable not found"
             exit_code=1
           fi
        fi

         echo "$BIN_NAME: $status_p1"
         exit $exit_code
        ;;

'stop')
        if [ "${PID1}" != "" ]
        then
           kill -9 ${PID1} &amp;&amp; echo "$BIN_NAME daemon killed"
        else
           echo "$BIN_NAME: no running Process!"
        fi
        exit $exit_code
        ;;
'check')
        if [ "$PID1" != "" ]
        then
           echo "running"
           exit 0
        else
           echo "not running"
           exit 1
        fi
        ;;*)
        echo "Usage: "`basename $0`" {start|stop|check}"
        ;;
esac
</pre></div>
                  <!-- class="example" -->
                  <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDGJFJG">Example B-4</a> shows an example of a shell script for an agent to monitor a file. When the agent is started, it creates the file (which is specified through an attribute) and when it is stopped, it deletes the file. The CHECK action consists of only checking whether the file exists. The variables with the <code class="codeph">_CRS_</code> prefix are attribute values that are provided to the script in its environment.
                  </p>
                  <div class="example" id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDGJFJG">
                     <p class="titleinexample">Example B-4 Action Script Example</p><pre class="oac_no_warn" dir="ltr">#!/bin/sh
TOUCH=/bin/touch
RM=/bin/rm
PATH_NAME=/tmp/$_CRS_NAME

#
# These messages go into the CRSD agent log file.
echo " *******   `date` ********** "
echo "Action script '$_CRS_ACTION_SCRIPT' for resource[$_CRS_NAME] called for action $1"
#

case "$1" in
  'start')
     echo "START entry point has been called.."
     echo "Creating the file: $PATH_NAME"
     $TOUCH $PATH_NAME
     exit 0
     ;;

  'stop')
     echo "STOP entry point has been called.." 
     echo "Deleting the file: $PATH_NAME"
     $RM $PATH_NAME
     exit 0
     ;;

  'check')
    echo "CHECK entry point has been called.."
    if [ -e $PATH_NAME ]; then
        echo "Check -- SUCCESS"
        exit 0
    else
        echo "Check -- FAILED"
        exit 1
    fi
    ;;

  'clean')
     echo "CLEAN entry point has been called.."
     echo "Deleting the file: $PATH_NAME"
     $RM -f $PATH_NAME
     exit 0
     ;;

esac</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='03800.in-memory-column-store-architecture.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">
      <meta name="description" content="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">
      <title>In-Memory Column Store Architecture</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database In-Memory Guide">
      <meta property="og:description" content="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database In-Memory Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00">
      <meta name="dcterms.title" content="Database In-Memory Guide">
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96137-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="intro-to-in-memory-column-store.html" title="Previous" type="text/html">
      <link rel="next" href="configuring-the-im-column-store.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="intro-to-in-memory-column-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuring-the-im-column-store.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database In-Memory Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="concepts-for-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">Oracle Database In-Memory Concepts</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">In-Memory Column Store Architecture</li>
            </ol>
            <a id="GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" name="GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224"></a>
            
            <h2 id="INMEM-GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" class="sect2"><span class="enumeration_chapter">2 </span>In-Memory Column Store Architecture
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <span class="bold">In-Memory Column Store</span> (IM column store) stores tables and partitions in memory using a <span class="bold">columnar format</span> optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.
               </p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-FF2499C5-C582-496A-B547-CFE49C84185E">Dual-Format: Column and Row</a><br>When you enable an IM column store, the SGA manages data in separate locations: the In-Memory Area and the database buffer cache. 
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1">In-Memory Storage Units</a><br>The IM column store manages both data and metadata in optimized storage units, not in traditional Oracle data blocks. 
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757">Expression Statistics Store (ESS)</a><br>The <strong class="term">Expression Statistics Store (ESS)</strong> is a repository maintained by the optimizer to store statistics about expression evaluation. The ESS resides in the SGA and persists on disk.
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2">In-Memory Process Architecture</a><br>In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310">CPU Architecture: SIMD Vector Processing</a><br>For data that is populated in the IM column store, the database uses SIMD (single instruction, multiple data) vector processing.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="concepts-for-the-im-column-store.html#GUID-5A72B48A-8427-41AE-9220-E46042BC90C4" title="This part introduces the Oracle Database In-Memory (Database In-Memory) feature set, and explains the basic architecture of the In-Memory Column Store (IM column store).">Oracle Database In-Memory Concepts</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-FF2499C5-C582-496A-B547-CFE49C84185E" name="GUID-FF2499C5-C582-496A-B547-CFE49C84185E"></a><h3 id="INMEM-GUID-FF2499C5-C582-496A-B547-CFE49C84185E" class="sect3"><span class="enumeration_section">2.1 </span>Dual-Format: Column and Row
               </h3>
               <div>
                  <p>When you enable an IM column store, the SGA manages data in separate locations: the In-Memory Area and the database buffer cache. </p>
                  <p>The IM column store encodes data in a columnar format: each column is a separate structure. The columns are stored contiguously, which optimizes them for analytic queries. The database buffer cache can modify objects that are also populated in the IM column store. However, the buffer cache stores data in the traditional row format. Data blocks store the rows contiguously, optimizing them for transactions.</p>
                  <p>The following figure illustrates the difference between row-based storage and columnar storage.</p>
                  <div class="figure" id="GUID-FF2499C5-C582-496A-B547-CFE49C84185E__GUID-D12E234B-F0E5-49BD-B891-ED7A9F4643B2">
                     <p class="titleinfigure">Figure 2-1 Columnar and Row-Based Storage</p><img src="img/inmem_3v_012.png" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/inmem_3v_012.html"><br><a href="img_text/inmem_3v_012.html">Description of "Figure 2-1 Columnar and Row-Based Storage"</a></div>
                  <!-- class="figure" -->
                  <p>This section creates the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-2D072622-139C-4617-88ED-F07D530B8E1E">Columnar Data in the In-Memory Area</a><br>The <strong class="term">In-Memory Area</strong> is an optional SGA component that contains the IM column store.
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6">Row Data in the Database Buffer Cache</a><br>The database buffer cache stores and processes data blocks in the same way whether the IM column store is enabled or disabled. Buffer I/O and buffer pools function the same.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">In-Memory Column Store Architecture</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-2D072622-139C-4617-88ED-F07D530B8E1E" name="GUID-2D072622-139C-4617-88ED-F07D530B8E1E"></a><h4 id="INMEM-GUID-2D072622-139C-4617-88ED-F07D530B8E1E" class="sect4"><span class="enumeration_section">2.1.1 </span>Columnar Data in the In-Memory Area
                  </h4>
                  <div>
                     <p>The <strong class="term">In-Memory Area</strong> is an optional SGA component that contains the IM column store.
                     </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09">Size of the In-Memory Area</a><br>The In-Memory Area is controlled by the <code class="codeph">INMEMORY_SIZE</code> initialization parameter. By default, the size of the In-Memory Area is 0, which means the IM column store is disabled.
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8">Memory Pools in the In-Memory Area</a><br>The In-Memory Area is divided into subpools for columnar data and metadata.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-FF2499C5-C582-496A-B547-CFE49C84185E" title="When you enable an IM column store, the SGA manages data in separate locations: the In-Memory Area and the database buffer cache.">Dual-Format: Column and Row</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09" name="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09"></a><h5 id="INMEM-GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09" class="sect5"><span class="enumeration_section">2.1.1.1 </span>Size of the In-Memory Area
                     </h5>
                     <div>
                        <p>The In-Memory Area is controlled by the <code class="codeph">INMEMORY_SIZE</code> initialization parameter. By default, the size of the In-Memory Area is 0, which means the IM column store is disabled.
                        </p>
                        <p>To enable the IM column store, set the In-Memory Area to at least 100 MB. The size is shown in <code class="codeph">V$SGA</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-4C7789E3-082A-4CC4-8C94-D930183EC920">The In-Memory Area and SGA_TARGET</p>
                           <p>The In-Memory Area is subtracted from the <code class="codeph">SGA_TARGET</code> initialization parameter setting. For example, if you set <code class="codeph">SGA_TARGET</code> to 10 GB, and if you set the <code class="codeph">INMEMORY_SIZE</code> to 4 GB, then 40% of the <code class="codeph">SGA_TARGET</code> setting is allocated to the In-Memory Area. The following graphic illustrates the relationship.
                           </p>
                           <div class="figure" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-E78F7C9F-2719-49C1-BC10-B8C2BF0C58ED">
                              <p class="titleinfigure">Figure 2-2 INMEMORY_SIZE and SGA_TARGET</p><img id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__IMAGE_OPT_ZLQ_JHB" src="img/inmem_3v_017.png" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" longdesc="img_text/inmem_3v_017.html"><br><a href="img_text/inmem_3v_017.html">Description of "Figure 2-2 INMEMORY_SIZE and SGA_TARGET"</a></div>
                           <!-- class="figure" -->
                           <p>Unlike the other components of the SGA, including the buffer cache and the shared pool, the In-Memory Area size is not controlled by automatic memory management. The database does not automatically shrink the In-Memory Area when the buffer cache or shared pool requires more memory, or increase the In-Memory Area when it runs out of space.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-2CB4368C-52C6-4DD3-9836-E08424919F3C">Dynamic Resizing of the In-Memory Area</p>
                           <p>Starting in <span>Oracle Database 12c</span> Release 2 (12.2), you can dynamically increase <code class="codeph">INMEMORY_SIZE</code> by using the <code class="codeph">ALTER SYSTEM</code> statement. The database allocates increased memory when the following conditions are met:
                           </p>
                           <ul style="list-style-type: disc;" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__UL_CKG_FMQ_JHB">
                              <li>
                                 <p>Free memory is available in the SGA.</p>
                              </li>
                              <li>
                                 <p>The new size for <code class="codeph">INMEMORY_SIZE</code> is at least 128 MB greater than the current setting.
                                 </p>
                                 <div class="infoboxnote" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-A27A9DCE-E50E-454B-A0A7-3D9D016A6BEE">
                                    <p class="notep1">Note:</p>
                                    <p> You cannot use <code class="codeph">ALTER SYSTEM</code> to reduce <code class="codeph">INMEMORY_SIZE</code>. 
                                    </p>
                                 </div>
                              </li>
                           </ul>
                           <p>The <code class="codeph">V$INMEMORY_AREA</code> and <code class="codeph">V$SGA</code> views immediately reflect the change. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-D2F123B0-1704-4709-877A-BB17A38711D1">The In-Memory Area in a Multitenant Environment</p>
                           <p>In a CDB, the size of the IM column store is set by the <code class="codeph">INMEMORY_SIZE</code> parameter in the CDB root. By default, the IM column store is shared among the PDBs. Consequently, a PDB can "starve" other PDBs by consuming the available memory.
                           </p>
                           <p>Within a PDB, you can limit memory consumption by using <code class="codeph">ALTER SYSTEM SET INMEMORY_SIZE</code>. For example, at the CDB level, you might set <code class="codeph">INMEMORY_SIZE</code> to <code class="codeph">20G</code>, and then configure the PDBs as follows:
                           </p>
                           <ul style="list-style-type: disc;" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__UL_VYM_TNQ_JHB">
                              <li>
                                 <p>In <code class="codeph">hrpdb</code>, set <code class="codeph">INMEMORY_SIZE</code> to <code class="codeph">0</code></p>
                              </li>
                              <li>
                                 <p>In <code class="codeph">salespdb</code>, set <code class="codeph">INMEMORY_SIZE</code> to <code class="codeph">10G</code></p>
                              </li>
                              <li>
                                 <p>In <code class="codeph">oepdb</code>, set <code class="codeph">INMEMORY_SIZE</code> to <code class="codeph">11G</code></p>
                              </li>
                           </ul>
                           <p>In the preceding example, the <code class="codeph">INMEMORY_SIZE</code> settings at the PDB level add up to <code class="codeph">21G</code>, even though <code class="codeph">INMEMORY_SIZE</code> at the CDB level is only <code class="codeph">20G</code>. Oversubscription ensures that valuable space in the IM column store is not wasted if a PDB is shut down or unplugged.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__UL_AKZ_GMQ_JHB">
                              <li>
                                 <p><span class="q">"<a href="enabling-the-im-column-store.html#GUID-48581A2D-1650-410D-8E02-1D8250CCDBED" title="When more memory is required for the IM column store, you can increase its size dynamically.">Increasing the Size of the IM Column Store Dynamically</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-memory.html#GUID-8F54391B-D42A-4FDA-9D12-E1F81FD113EA" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn more about automatic memory management
                                 </p>
                              </li>
                              <li>
                                 <p><span><cite>Oracle Database Reference</cite></span> to learn about <a href="../refrn/INMEMORY_SIZE.html#GUID-B5BEB6BF-5308-485F-920D-CBB584DDDE8F" target="_blank"><code class="codeph">INMEMORY_SIZE</code></a>, <a href="../refrn/V-INMEMORY_AREA.html#GUID-EDC517A6-FF55-4294-B348-032A3FC498EB" target="_blank"><code class="codeph">V$INMEMORY_AREA</code></a>, and <a href="../refrn/V-SGA.html#GUID-4E216A4C-5C7E-43F6-8E2C-CDE442A1CEEC" target="_blank"><code class="codeph">V$SGA</code></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-2D072622-139C-4617-88ED-F07D530B8E1E" title="The In-Memory Area is an optional SGA component that contains the IM column store.">Columnar Data in the In-Memory Area</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8" name="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8"></a><h5 id="INMEM-GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8" class="sect5"><span class="enumeration_section">2.1.1.2 </span>Memory Pools in the In-Memory Area
                     </h5>
                     <div>
                        <p>The In-Memory Area is divided into subpools for columnar data and metadata.</p>
                        <p>The In-Memory area is subdivided into the following subpools:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <a href="glossary.html#GUID-3259010C-D7F2-4AA8-95CB-ED1E3908EA0D"><span class="xrefglossterm">columnar data pool</span></a></p>
                              <p>This subpool stores the IMCUs, which contain the columnar data. The <code class="codeph">V$INMEMORY_AREA.POOL</code> column identifies this subpool as <code class="codeph">1MB POOL</code>, as shown in <a href="in-memory-column-store-architecture.html#GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-4B237F25-BD87-4A64-8A99-C35091631C85">Example 2-1</a>.
                              </p>
                           </li>
                           <li>
                              <p>The <a href="glossary.html#GUID-464A0659-4527-4730-A1A8-9D94B0A3B1DE"><span class="xrefglossterm">metadata pool</span></a></p>
                              <p>This subpool stores metadata about the objects that reside in the IM column store. The <code class="codeph">V$INMEMORY_AREA.POOL</code> column identifies this subpool as <code class="codeph">64KB POOL</code>, as shown in <a href="in-memory-column-store-architecture.html#GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-4B237F25-BD87-4A64-8A99-C35091631C85">Example 2-1</a>.
                              </p>
                           </li>
                        </ul>
                        <div class="figure" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-713DCAE4-82DD-4C0D-901F-52F9985B2257">
                           <p class="titleinfigure">Figure 2-3 Subpools in the In-Memory Area</p><img src="img/cncpt_vm_380.png" alt="Description of Figure 2-3 follows" title="Description of Figure 2-3 follows" longdesc="img_text/cncpt_vm_380.html"><br><a href="img_text/cncpt_vm_380.html">Description of "Figure 2-3 Subpools in the In-Memory Area"</a></div>
                        <!-- class="figure" -->
                        <p>The database determines the relative size of the two subpools using internal heuristics. The database allocates the majority of space in the In-Memory Area to the columnar data pool (1 MB pool).</p>
                        <div class="infoboxnote" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-E350FF1C-FFB6-4C12-80C0-15BDF108517C">
                           <p class="notep1">Note:</p>
                           <p>Oracle Database automatically determines the subpool sizes. You cannot change the space allocations.</p>
                        </div>
                        <div class="example" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-4B237F25-BD87-4A64-8A99-C35091631C85">
                           <p class="titleinexample">Example 2-1 V$INMEMORY_AREA View</p>
                           <p>This example queries the <code class="codeph">V$INMEMORY_AREA</code> view to determine the amount of available memory in each subpool (sample output included):
                           </p><pre class="pre codeblock"><code>COL POOL FORMAT a9
COL POPULATE_STATUS FORMAT a15
SSELECT POOL, TRUNC(ALLOC_BYTES/(1024*1024*1024),2) "ALLOC_GB",
        TRUNC(USED_BYTES/(1024*1024*1024),2) "USED_GB",
        POPULATE_STATUS
FROM    V$INMEMORY_AREA;

POOL      ALLOC_GB   USED_GB    POPULATE_STATUS
--------- ---------- ---------- ---------------
1MB POOL  7.99       0          DONE
64KB POOL 1.98       0          DONE</code></pre><p>The current size of the In-Memory area is visible in <code class="codeph">V$SGA</code>:
                           </p><pre class="pre codeblock"><code>SELECT NAME, VALUE/(1024*1024*1024) "SIZE_IN_GB"
FROM   V$SGA 
WHERE  NAME LIKE '%Mem%';

NAME                 SIZE_IN_GB
-------------------- ----------
In-Memory Area       10</code></pre><p>In this example, the memory allocated to the subpools is 9.97 GB, whereas the size of the In-Memory Area is 10 GB. The database uses a small percentage of memory for internal management structures.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                           <p class="notep1">See Also:</p><a href="../refrn/V-INMEMORY_AREA.html#GUID-EDC517A6-FF55-4294-B348-032A3FC498EB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">V$INMEMORY_AREA</code></div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-2D072622-139C-4617-88ED-F07D530B8E1E" title="The In-Memory Area is an optional SGA component that contains the IM column store.">Columnar Data in the In-Memory Area</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6" name="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6"></a><h4 id="INMEM-GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6" class="sect4"><span class="enumeration_section">2.1.2 </span>Row Data in the Database Buffer Cache
                  </h4>
                  <div>
                     <p>The database buffer cache stores and processes data blocks in the same way whether the IM column store is enabled or disabled. Buffer I/O and buffer pools function the same.</p>
                     <p>The IM column store enables data to be simultaneously populated in the SGA in both the traditional row format (the buffer cache) and the columnar format. The database transparently sends OLTP queries (such as primary key lookups) to the buffer cache, and analytic and reporting queries to the IM column store. When fetching data, Oracle Database can also read data from both memory areas within the same query. </p>
                     <div class="infoboxnote" id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6__GUID-8B772890-5222-4FCC-848B-C376707C3906">
                        <p class="notep1">Note:</p>
                        <p>In the execution plan, the operation <code class="codeph">TABLE ACCESS IN MEMORY FULL</code> indicates that some or all data is accessed in the IM column store.
                        </p>
                     </div>
                     <p>The dual-format architecture does not double memory requirements. The buffer cache is optimized to run with a much smaller size than the size of the database.</p>
                     <p>The following figure shows a sample IM column store. The database stores the <code class="codeph">sh.sales</code> table on disk in traditional row format. The SGA stores the data in columnar format in the IM column store, and in row format in the database buffer cache.
                     </p>
                     <div class="figure" id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6__BGBEFJBH">
                        <p class="titleinfigure">Figure 2-4 IM Column Store</p><img src="img/cncpt_vm_379.png" width="540" alt="Description of Figure 2-4 follows" title="Description of Figure 2-4 follows" longdesc="img_text/cncpt_vm_379.html"><br><a href="img_text/cncpt_vm_379.html">Description of "Figure 2-4 IM Column Store"</a></div>
                     <!-- class="figure" -->
                     <p>Every on-disk data format for permanent, heap-organized tables is supported by the IM column store. The columnar format does not affect the format of data stored in data files or in the buffer cache, nor does it affect undo data and online redo logging.</p>
                     <p>The database processes DML modifications in the same way, regardless of whether the IM column store is enabled, by updating the buffer cache, online redo log, and undo tablespace. However, the database uses an internal mechanism to track changes and ensure that the IM column store is consistent with the rest of the database. For example, if the <code class="codeph">sales</code> table is populated in the IM column store, and if an application updates a row in <code class="codeph">sales</code>, then the database automatically keeps the copy of the <code class="codeph">sales</code> table in the IM column store transactionally consistent. A query that accesses the IM column store always returns the same results for a query that accesses the buffer cache.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6__GUID-39A46614-F669-4EF9-B92D-82CC4B56AC94">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-4FF66585-E469-4631-9225-29D75594CD14" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> to learn more about the database buffer cache
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-FF2499C5-C582-496A-B547-CFE49C84185E" title="When you enable an IM column store, the SGA manages data in separate locations: the In-Memory Area and the database buffer cache.">Dual-Format: Column and Row</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" name="GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1"></a><h3 id="INMEM-GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" class="sect3"><span class="enumeration_section">2.2 </span>In-Memory Storage Units
               </h3>
               <div>
                  <p>The IM column store manages both data and metadata in optimized storage units, not in traditional Oracle data blocks. </p>
                  <p>Oracle Database maintains the storage units in the In-Memory Area. The following graphic gives an overview of the In-Memory Area and the database processes that interact with it. The remaining chapter describes the various memory components.</p>
                  <div class="figure" id="GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1__GUID-FDB37040-B670-4D1E-96D0-9357E9117F95">
                     <p class="titleinfigure">Figure 2-5 IM Column Store: Memory and Process Architecture</p><img src="img/inmem_3v_013.png" alt="Description of Figure 2-5 follows" title="Description of Figure 2-5 follows" longdesc="img_text/inmem_3v_013.html"><br><a href="img_text/inmem_3v_013.html">Description of "Figure 2-5 IM Column Store: Memory and Process Architecture"</a></div>
                  <!-- class="figure" -->
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE">In-Memory Compression Units (IMCUs)</a><br>An <strong class="term">In-Memory Compression Unit (IMCU)</strong> is a compressed, read-only storage unit that contains data for one or more columns. 
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2">Snapshot Metadata Units (SMUs)</a><br>A Snapshot Metadata Unit (SMU) contains metadata and transactional information for an associated IMCU. 
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-E1A74436-E719-4FC3-A141-41B160792E51">In-Memory Expression Units (IMEUs)</a><br>An <span class="bold">In-Memory Expression Unit</span> (IMEU) is a storage container for materialized <span class="bold">In-Memory Expressions</span> (IM expressions) and user-defined virtual columns.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">In-Memory Column Store Architecture</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" name="GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE"></a><h4 id="INMEM-GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" class="sect4"><span class="enumeration_section">2.2.1 </span>In-Memory Compression Units (IMCUs)
                  </h4>
                  <div>
                     <p>An <strong class="term">In-Memory Compression Unit (IMCU)</strong> is a compressed, read-only storage unit that contains data for one or more columns. 
                     </p>
                     <p>An IMCU is analogous to a tablespace extent. An IMCU has two parts: a set of Column Compression Units (CUs), and a header that contains metadata such as the <a href="glossary.html#GUID-B9859425-36BD-40B7-9F9D-FA52CD215B69"><span class="xrefglossterm">IM storage index</span></a>.
                     </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8">IMCUs and Schema Objects</a><br>The IM column store stores data for a single object (table, partition, materialized view) in a set of IMCUs. An IMCU stores columnar data for one and only one object.
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7">Column Compression Units (CUs)</a><br>A <span class="bold">Column Compression Unit (CU)</span> is contiguous storage for a single column in an IMCU. Every IMCU has one or more CUs. 
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-A38FF2B6-506E-412A-9FE5-1CE709556379">In-Memory Storage Indexes</a><br>Every IMCU header automatically creates and manages <span class="bold">In-Memory Storage Indexes</span> (IM storage indexes) for its CUs. An IM storage index stores the minimum and maximum for all columns within the IMCU.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" title="The IM column store manages both data and metadata in optimized storage units, not in traditional Oracle data blocks.">In-Memory Storage Units</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" name="GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8"></a><h5 id="INMEM-GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" class="sect5"><span class="enumeration_section">2.2.1.1 </span>IMCUs and Schema Objects
                     </h5>
                     <div>
                        <p>The IM column store stores data for a single object (table, partition, materialized view) in a set of IMCUs. An IMCU stores columnar data for one and only one object.</p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41">IMCUs and INMEMORY Columns</a><br>For an object specified as <code class="codeph">INMEMORY</code>, every column listed in the <code class="codeph">INMEMORY</code> clause is included in every IMCU.
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED">In-Memory Compression</a><br>The IM column store uses special compression formats optimized for access speed rather than storage reduction. The columnar format enables queries to execute directly against the compressed columns.
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F">IMCUs and Rows</a><br>Each IMCU contains all column values (including nulls) for a subset of rows in a table segment. A subset of rows is called a <span class="italic">granule</span>. 
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="An In-Memory Compression Unit (IMCU) is a compressed, read-only storage unit that contains data for one or more columns.">In-Memory Compression Units (IMCUs)</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41" name="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41"></a><h6 id="INMEM-GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41" class="sect6"><span class="enumeration_section">2.2.1.1.1 </span>IMCUs and INMEMORY Columns
                        </h6>
                        <div>
                           <p>For an object specified as <code class="codeph">INMEMORY</code>, every column listed in the <code class="codeph">INMEMORY</code> clause is included in every IMCU.
                           </p>
                           <p>For example, the <code class="codeph">sh.sales</code> table has 7 columns. The following DDL statement specifies the table as <code class="codeph">INMEMORY</code>, which means that every IMCU for <code class="codeph">sales</code> includes columnar data for these 7 columns:
                           </p><pre class="pre codeblock"><code>ALTER TABLE sh.sales INMEMORY MEMCOMPRESS FOR QUERY LOW;</code></pre><div class="section">
                              <p class="subhead3" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__GUID-6A346F9B-6E35-4064-8211-D0E68DFF685D">NO INMEMORY Columns in INMEMORY Objects</p>
                              <p>You can specify that some but not all columns in an <code class="codeph">INMEMORY</code> table have the <code class="codeph">INMEMORY</code> attribute. For example, the <code class="codeph">sh.customers</code> table has 23 columns. The following DDL statement specifies that 15 columns in <code class="codeph">sh.customers</code> have the <code class="codeph">NO INMEMORY</code> attribute, which means that the other 8 columns in the table have the <code class="codeph">INMEMORY</code> attribute:
                              </p><pre class="pre codeblock"><code>ALTER TABLE sh.customers INMEMORY 
  MEMCOMPRESS FOR QUERY LOW
  NO INMEMORY ( cust_gender, cust_year_of_birth, cust_marital_status,
                cust_postal_code, cust_city, cust_state_province,
                cust_main_phone_number, cust_income_level, cust_credit_limit,
                cust_email, cust_total, cust_total_id, cust_eff_from,
                cust_eff_to, cust_valid );</code></pre><p>The following query shows the compression levels of the columns in <code class="codeph">sh.customers</code>, indicating which columns are <code class="codeph">NO INMEMORY</code>:
                              </p><pre class="pre codeblock"><code>SET LINESIZE 200
COL TABLE_NAME FORMAT a25
COL SEG_COL_ID FORMAT 999
COL COLUMN_NAME FORMAT a25
COL INMEMORY_COMPRESSION FORMAT a11
SELECT SEGMENT_COLUMN_ID AS "SEG_COL_ID", COLUMN_NAME, INMEMORY_COMPRESSION 
FROM   V$IM_COLUMN_LEVEL WHERE TABLE_NAME = 'CUSTOMERS'
ORDER BY SEG_COL_ID;

SEG_COL_ID COLUMN_NAME               INMEMORY_CO
---------- ------------------------- -----------
         1 CUST_ID                   DEFAULT
         2 CUST_FIRST_NAME           DEFAULT
         3 CUST_LAST_NAME            DEFAULT
         4 CUST_GENDER               NO INMEMORY
         5 CUST_YEAR_OF_BIRTH        NO INMEMORY
         6 CUST_MARITAL_STATUS       NO INMEMORY
         7 CUST_STREET_ADDRESS       DEFAULT
         8 CUST_POSTAL_CODE          NO INMEMORY
         9 CUST_CITY                 NO INMEMORY
        10 CUST_CITY_ID              DEFAULT
        11 CUST_STATE_PROVINCE       NO INMEMORY
        12 CUST_STATE_PROVINCE_ID    DEFAULT
        13 COUNTRY_ID                DEFAULT
        14 CUST_MAIN_PHONE_NUMBER    NO INMEMORY
        15 CUST_INCOME_LEVEL         NO INMEMORY
        16 CUST_CREDIT_LIMIT         NO INMEMORY
        17 CUST_EMAIL                NO INMEMORY
        18 CUST_TOTAL                NO INMEMORY
        19 CUST_TOTAL_ID             NO INMEMORY
        20 CUST_SRC_ID               DEFAULT
        21 CUST_EFF_FROM             NO INMEMORY
        22 CUST_EFF_TO               NO INMEMORY
        23 CUST_VALID                NO INMEMORY</code></pre><p>The following graphic represents three tables from the <code class="codeph">sh</code> schema populated in the IM column store: <code class="codeph">customers</code>, <code class="codeph">products</code>, and <code class="codeph">sales</code>. In this example, each table has a different number of columns specified <code class="codeph">INMEMORY</code>. The IMCUs for each table include only data for the <code class="codeph">INMEMORY</code> columns.
                              </p>
                              <div class="figure" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__BGBJCAIB">
                                 <p class="titleinfigure">Figure 2-6 Columns and IMCUs</p><img id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__IMAGE_W4T_MS4_LHB" src="img/cncpt_vm_378.png" alt="Description of Figure 2-6 follows" title="Description of Figure 2-6 follows" longdesc="img_text/cncpt_vm_378.html"><br><a href="img_text/cncpt_vm_378.html">Description of "Figure 2-6 Columns and IMCUs"</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__GUID-1B5444AC-CD3B-4782-A673-BD5564033FC8">Queries That Reference NO INMEMORY Columns</p>
                              <p>When a query references a <code class="codeph">NO INMEMORY</code> column, the table scan retrieves data from the row store rather than the IMCUs in the IM column store. Row store access occurs even if all other columns referenced in the query are populated <code class="codeph">INMEMORY</code> columns.
                              </p>
                              <p>For example, assume that the <code class="codeph">customers</code> table is populated into the IM column store. The <code class="codeph">cust_id</code> and <code class="codeph">cust_last_name</code> columns are specified <code class="codeph">INMEMORY</code>, but the <code class="codeph">cust_postal_code</code> column is specified as <code class="codeph">NO INMEMORY</code>. You issue the following query:
                              </p><pre class="pre codeblock"><code>SELECT cust_id, cust_last_name, cust_postal_code 
FROM   customers 
WHERE  cust_id &lt; 5001
ORDER BY cust_id;</code></pre><p>In this case, the database accesses the row store, not the IM column store, even though <code class="codeph">cust_postal_code</code> is the only <code class="codeph">NO INMEMORY</code> column referenced in the query. The following query, which has <code class="codeph">cust_postal_code</code> in the predicate but not the <code class="codeph">SELECT</code> list, must also access the row store: 
                              </p><pre class="pre codeblock"><code>SELECT cust_id, cust_last_name 
FROM   customers 
WHERE  cust_postal_code = 77501
ORDER BY cust_id;</code></pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__GUID-78C230E9-D084-4D55-81E8-BF318D242D71">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__UL_ACJ_2V4_LHB">
                                 <li>
                                    <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617" title="For internal tables, both In-Memory virtual columns (IM virtual columns) and nonvirtual columns are eligible for IM population. For external tables, only nonvirtual columns are eligible.">About Enabling INMEMORY Columns</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://blogs.oracle.com/in-memory/what-happens-if-a-column-is-not-populated" target="_blank">https://blogs.oracle.com/in-memory/what-happens-if-a-column-is-not-populated</a> for a blog entry on accessing columns that are not populated in the IM column store
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about the <code class="codeph">ALTER TABLE</code> statement
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" title="The IM column store stores data for a single object (table, partition, materialized view) in a set of IMCUs. An IMCU stores columnar data for one and only one object.">IMCUs and Schema Objects</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED" name="GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED"></a><h6 id="INMEM-GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED" class="sect6"><span class="enumeration_section">2.2.1.1.2 </span>In-Memory Compression
                        </h6>
                        <div>
                           <p>The IM column store uses special compression formats optimized for access speed rather than storage reduction. The columnar format enables queries to execute directly against the compressed columns.</p>
                           <p>Compression enables scanning and filtering operations to process a much smaller amount of data, which optimizes query performance. Oracle Database only decompresses data when it is required for the result set.</p>
                           <p>The compression applied in the IM column store is closely related to Hybrid Columnar Compression. Both technologies process column vectors. The primary difference is that the column vectors for the IM column store are optimized for SIMD vector processing, whereas the column vectors for Hybrid Columnar Compression are optimized for disk storage.</p>
                           <p>When you enable an object for population into the IM column store, you specify the type of compression in the <code class="codeph">INMEMORY</code> clause: <code class="codeph">FOR DML</code>, <code class="codeph">FOR QUERY</code> (<code class="codeph">LOW</code> or <code class="codeph">HIGH</code>), <code class="codeph">FOR CAPACITY</code> (<code class="codeph">LOW</code> or <code class="codeph">HIGH</code>), or <code class="codeph">NONE</code>.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED__GUID-78432B01-CDB7-4B10-BE07-E5090D01273C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="Use the INMEMORY clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.">Controls for In-Memory Population</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../cncpt/tables-and-table-clusters.html#GUID-901A054B-B47F-4ADF-A57B-2074EBB85341" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> to learn more about Hybrid Columnar Compression
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" title="The IM column store stores data for a single object (table, partition, materialized view) in a set of IMCUs. An IMCU stores columnar data for one and only one object.">IMCUs and Schema Objects</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F" name="GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F"></a><h6 id="INMEM-GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F" class="sect6"><span class="enumeration_section">2.2.1.1.3 </span>IMCUs and Rows
                        </h6>
                        <div>
                           <p>Each IMCU contains all column values (including nulls) for a subset of rows in a table segment. A subset of rows is called a <span class="italic">granule</span>. 
                           </p>
                           <p>All IMCUs for a given segment contain approximately the same number of rows. Oracle Database determines the size of a granule automatically depending on data type, data format, and compression type. A higher compression level results in more rows in the IMCU.</p>
                           <p>A one-to-many mapping exists between an IMCU and a set of database blocks. As illustrated in <a href="in-memory-column-store-architecture.html#GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F__GUID-C6CBB52C-9E9C-42BB-9C91-1BD37B73254D">Example 2-2</a>, each IMCU stores the values for columns for a different set of blocks.
                           </p>
                           <p>The columns in an IMCU are not sorted. Oracle Database populates them in the order that they are read from disk.</p>
                           <p>The number of rows in an IMCU dictates the amount of space an IMCU consumes. If the target number of rows causes an IMCU to grow beyond the amount of contiguous 1 MB extents available in the 1 MB pool, then the IMCU creates additional extents (pieces) to hold the remaining column CUs. An IMCU always allocates space in 1 MB increments.</p>
                           <div class="example" id="GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F__GUID-C6CBB52C-9E9C-42BB-9C91-1BD37B73254D">
                              <p class="titleinexample">Example 2-2 IMCUs and Row Subsets</p>
                              <p>In this simplified example, only the following 4 columns of the <code class="codeph">customers</code> table have the <code class="codeph">INMEMORY</code> attribute: <code class="codeph">cust_id</code>, <code class="codeph">cust_first_name</code>, <code class="codeph">cust_last_name</code>, and <code class="codeph">cust_gender</code>. Only 5 rows exist in the table, stored in 2 data blocks. Conceptually, the first data block stores its rows as follows:
                              </p><pre class="pre codeblock"><code>82,Madeline,Li,F;37004,Abel,Embrey,M;1714,Hardy,Gentle,M</code></pre><p>The second data block stores rows as follows:</p><pre class="pre codeblock"><code>100439,Uma,Campbell,F;3047,Lucia,Downey,F</code></pre><p>Assume IMCU 1 stores the data for the first data block. In this case, the <code class="codeph">cust_id</code> column values for the 3 rows in this data block stores are stored â€œverticallyâ€ within a CU as follows:
                              </p><pre class="pre codeblock"><code>82
37004
1714</code></pre><p>IMCU 2 stores the data from the second data block. The <code class="codeph">cust_id</code> column values for these 2 rows are stored within a CU as follows:
                              </p><pre class="pre codeblock"><code>100439
3047</code></pre><p>Because the <code class="codeph">cust_id</code> value is the first value for each row in the data block, the <code class="codeph">cust_id</code> column is in the first position within the IMCU. Columns always occupy the same position, so Oracle Database can reconstruct the rows by reading the IMCUs for a segment.
                              </p>
                           </div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="Use the INMEMORY clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.">Controls for In-Memory Population</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" title="The IM column store stores data for a single object (table, partition, materialized view) in a set of IMCUs. An IMCU stores columnar data for one and only one object.">IMCUs and Schema Objects</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" name="GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7"></a><h5 id="INMEM-GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" class="sect5"><span class="enumeration_section">2.2.1.2 </span>Column Compression Units (CUs)
                     </h5>
                     <div>
                        <p>A <span class="bold">Column Compression Unit (CU)</span> is contiguous storage for a single column in an IMCU. Every IMCU has one or more CUs. 
                        </p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E">Structure of a CU</a><br>A CU is divided into a body and a header.
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB">Local Dictionary</a><br>In a CU, the local dictionary has a list of distinct values and their corresponding dictionary codes.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="An In-Memory Compression Unit (IMCU) is a compressed, read-only storage unit that contains data for one or more columns.">In-Memory Compression Units (IMCUs)</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E" name="GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E"></a><h6 id="INMEM-GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E" class="sect6"><span class="enumeration_section">2.2.1.2.1 </span>Structure of a CU
                        </h6>
                        <div>
                           <p>A CU is divided into a body and a header.</p>
                           <p>The body of every CU stores the column values for the range of rows included in the IMCU. The header contains metadata about the values stored in the CU body, for example, the minimum and maximum value within the CU. It may also contain a <a href="glossary.html#GUID-10ECFDBB-1835-4634-B1E6-5E156614B6DE"><span class="xrefglossterm">local dictionary</span></a>, which is a sorted list of the distinct values in that column and their corresponding dictionary codes.
                           </p>
                           <p>The following figure shows an IMCU with 4 CUs for the <code class="codeph">sales</code> table: <code class="codeph">prod_id</code>, <code class="codeph">cust_id</code>, <code class="codeph">time_id</code>, and <code class="codeph">channel_id</code>. Each CU stores the column values for the range of rows included in the IMCU.
                           </p>
                           <div class="figure" id="GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E__GUID-ACC3BC93-A2D6-44CF-BCF7-F5996EED03A8">
                              <p class="titleinfigure">Figure 2-7 CUs in an IMCU</p><img src="img/inmem_3v_007.png" alt="Description of Figure 2-7 follows" title="Description of Figure 2-7 follows" longdesc="img_text/inmem_3v_007.html"><br><a href="img_text/inmem_3v_007.html">Description of "Figure 2-7 CUs in an IMCU"</a></div>
                           <!-- class="figure" -->
                           <p>The CUs store values in rowid order. For this reason, the database can answer queries by â€œstitchingâ€ the rows back together. For example, an application issues the following query:</p><pre class="pre codeblock"><code>SELECT cust_id, time_id, channel_id
FROM   sales
WHERE  prod_id =5;</code></pre><p>The database begins by scanning the <code class="codeph">prod_id</code> column for entries with the value <code class="codeph">5</code>. Assume that the database finds <code class="codeph">5</code> in position two in the <code class="codeph">prod_id</code> column. The database now must find the corresponding <code class="codeph">cust_id</code>, <code class="codeph">time_id</code>, and <code class="codeph">channel_id</code> for this row. Because the CUs store data in rowid order, the database can find the corresponding <code class="codeph">cust_id</code>, <code class="codeph">time_id</code>, and <code class="codeph">channel_id</code> values in position 2 in those columns. Thus, to answer the query, the database must extract the values from position 2 in the <code class="codeph">cust_id</code>, <code class="codeph">time_id</code>, and <code class="codeph">channel_id</code> columns, and then stitch the row back together to return it to the end user.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" title="A Column Compression Unit (CU) is contiguous storage for a single column in an IMCU. Every IMCU has one or more CUs.">Column Compression Units (CUs)</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB" name="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB"></a><h6 id="INMEM-GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB" class="sect6"><span class="enumeration_section">2.2.1.2.2 </span>Local Dictionary
                        </h6>
                        <div>
                           <p>In a CU, the local dictionary has a list of distinct values and their corresponding dictionary codes.</p>
                           <p>The local dictionary stores the symbol contained in the column. The following figure illustrates how a CU stores a <code class="codeph">name</code> column in a <code class="codeph">vehicles</code> table.
                           </p>
                           <div class="figure" id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB__GUID-D5FF2EE9-ED35-4F2C-858F-356CDBD2429D">
                              <p class="titleinfigure">Figure 2-8 Local Dictionary</p><img src="img/inmem_3v_006.png" alt="Description of Figure 2-8 follows" title="Description of Figure 2-8 follows" longdesc="img_text/inmem_3v_006.html"><br><a href="img_text/inmem_3v_006.html">Description of "Figure 2-8 Local Dictionary"</a></div>
                           <!-- class="figure" -->
                           <p>In the preceding figure, the CU contains only 7 rows. Every distinct value in this CU, such as <code class="codeph">Cadillac</code> or <code class="codeph">Audi</code>, is assigned a different dictionary code, such as <code class="codeph">2</code>  for <code class="codeph">Cadillac</code> and <code class="codeph">0</code> for <code class="codeph">Audi</code>. The CU stores the dictionary code rather than the original value.
                           </p>
                           <div class="infoboxnote" id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB__GUID-BA81A5E1-BFA7-4247-891F-E3DD21F980C3">
                              <p class="notep1">Note:</p>
                              <p>When the database uses a <a href="glossary.html#GUID-D04AB5B8-A58B-4494-A54F-09CEBC113460"><span class="xrefglossterm">common dictionary</span></a> for a <a href="glossary.html#GUID-0DCA9B69-43D8-4940-9CC0-8753061F27CA"><span class="xrefglossterm">join group</span></a>, the local dictionary contains <span class="italic">references</span> to the common dictionary rather than the <span class="italic">symbols</span>. For example, rather than storing the values <code class="codeph">Audi</code>, <code class="codeph">BWM</code>, and <code class="codeph">Cadillac</code> for the <code class="codeph">vehicles.name</code> column, the local dictionary stores dictionary codes such as <code class="codeph">101</code>, <code class="codeph">220</code>, and <code class="codeph">66</code>.
                              </p>
                           </div>
                           <p>The CU header contains the minimum and maximum values for the column. In this example, the minimum value is <code class="codeph">Audi</code> and the maximum value is <code class="codeph">Cadillac</code>. The local dictionary stores the list of distinct values: <code class="codeph">Audi</code>, <code class="codeph">BMW</code>, and <code class="codeph">Cadillac</code>. Their corresponding dictionary codes (<code class="codeph">0</code>, <code class="codeph">1</code>, and <code class="codeph">2</code>) are implicit. The local dictionary for a CU in each IMCU is independent of the local dictionaries in other IMCUs.
                           </p>
                           <p>If a query filters on Audi automobiles, then the database scans this IMCU for only <code class="codeph">0</code> codes.
                           </p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="optimizing-queries-with-join-groups.html#GUID-88A573DD-99D3-48D7-8310-B46F70184793" title="A common dictionary is a table-level, instance-specific set of dictionary codes.">How a Join Group Uses a Common Dictionary</a></li>
                              </ul>
                           </div>
                           <div class="infoboxnotealso" id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB__GUID-8A82B6DF-69A5-47DF-AA1A-3825D2F78035">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="optimizing-queries-with-join-groups.html#GUID-88A573DD-99D3-48D7-8310-B46F70184793" title="A common dictionary is a table-level, instance-specific set of dictionary codes.">How a Join Group Uses a Common Dictionary</a>"</span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" title="A Column Compression Unit (CU) is contiguous storage for a single column in an IMCU. Every IMCU has one or more CUs.">Column Compression Units (CUs)</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A38FF2B6-506E-412A-9FE5-1CE709556379" name="GUID-A38FF2B6-506E-412A-9FE5-1CE709556379"></a><h5 id="INMEM-GUID-A38FF2B6-506E-412A-9FE5-1CE709556379" class="sect5"><span class="enumeration_section">2.2.1.3 </span>In-Memory Storage Indexes
                     </h5>
                     <div>
                        <p>Every IMCU header automatically creates and manages <span class="bold">In-Memory Storage Indexes</span> (IM storage indexes) for its CUs. An IM storage index stores the minimum and maximum for all columns within the IMCU.
                        </p>
                        <p>For example, <code class="codeph">sales</code> is populated in the IM column store. Every IMCU for this table has all columns. The <code class="codeph">sales.prod_id</code> column is stored in a separate CU within every IMCU. The IMCU header has the minimum and maximum values of each <code class="codeph">prod_id</code> CU (and every other CU).
                        </p>
                        <p>To eliminate unnecessary scans, the database can perform <a href="glossary.html#GUID-824EDD0E-2FF3-411E-A2B2-C7B542EADFDC"><span class="xrefglossterm">IMCU pruning</span></a> based on SQL filter predicates. The database scans only the IMCUs that satisfy the query predicate, as shown in the <code class="codeph">WHERE prod_id &gt; 14 AND prod_id &lt; 29</code> example in the following graphic.
                        </p>
                        <div class="figure" id="GUID-A38FF2B6-506E-412A-9FE5-1CE709556379__BGBGBJJB">
                           <p class="titleinfigure">Figure 2-9 Storage Index for Columnar Data</p><img src="img/inmem_3v_016.png" alt="Description of Figure 2-9 follows" title="Description of Figure 2-9 follows" longdesc="img_text/inmem_3v_016.html"><br><a href="img_text/inmem_3v_016.html">Description of "Figure 2-9 Storage Index for Columnar Data"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="An In-Memory Compression Unit (IMCU) is a compressed, read-only storage unit that contains data for one or more columns.">In-Memory Compression Units (IMCUs)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" name="GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2"></a><h4 id="INMEM-GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" class="sect4"><span class="enumeration_section">2.2.2 </span>Snapshot Metadata Units (SMUs)
                  </h4>
                  <div>
                     <p>A Snapshot Metadata Unit (SMU) contains metadata and transactional information for an associated IMCU. </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF">IMCUs and SMUs</a><br>The columnar pool of the In-Memory Area stores the actual data: IMCUs and IMEUs. The metadata pool in the In-Memory Area stores the SMUs.
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1">Transaction Journal</a><br>Every SMU contains a <span class="bold">transaction journal</span>. The database uses the transaction journal to keep the IMCU transactionally consistent.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" title="The IM column store manages both data and metadata in optimized storage units, not in traditional Oracle data blocks.">In-Memory Storage Units</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF" name="GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF"></a><h5 id="INMEM-GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF" class="sect5"><span class="enumeration_section">2.2.2.1 </span>IMCUs and SMUs
                     </h5>
                     <div>
                        <p>The columnar pool of the In-Memory Area stores the actual data: IMCUs and IMEUs. The metadata pool in the In-Memory Area stores the SMUs.</p>
                        <div class="figure" id="GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF__GUID-AC063DFD-ADC3-42BF-A971-A86F7C4812DF">
                           <p class="titleinfigure">Figure 2-10 IMCUs and SMUs</p>
                           <p>This figure shows IMCUs in the data pool, and SMUs in the metadata pool.</p><img src="img/inmem_3v_014.png" alt="Description of Figure 2-10 follows" title="Description of Figure 2-10 follows" longdesc="img_text/inmem_3v_014.html"><br><a href="img_text/inmem_3v_014.html">Description of "Figure 2-10 IMCUs and SMUs"</a></div>
                        <!-- class="figure" -->
                        <p>Every IMCU maps to a separate SMU. Thus, if the columnar data pool contains 100 IMCUs, then the metadata pool contains 100 SMUs. The SMUs store several types of metadata for their associated IMCUs, including the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Object numbers</p>
                           </li>
                           <li>
                              <p>Column numbers</p>
                           </li>
                           <li>
                              <p>Mapping information for rows</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" title="A Snapshot Metadata Unit (SMU) contains metadata and transactional information for an associated IMCU.">Snapshot Metadata Units (SMUs)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1" name="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1"></a><h5 id="INMEM-GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1" class="sect5"><span class="enumeration_section">2.2.2.2 </span>Transaction Journal
                     </h5>
                     <div>
                        <p>Every SMU contains a <span class="bold">transaction journal</span>. The database uses the transaction journal to keep the IMCU transactionally consistent.
                        </p>
                        <p>The database uses the buffer cache to process DML, just as when the IM column store is not enabled. For example, an <code class="codeph">UPDATE</code> statement might modify a row in an IMCU. In this case, the database adds the rowid for the modified row to the transaction journal and marks it stale as of the SCN of the DML statement. If a query needs to access the new version of the row, then the database obtains the row from the database buffer cache.
                        </p>
                        <div class="figure" id="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1__GUID-FA73343D-ED4F-4C7A-80B2-57DC5D14651C">
                           <p class="titleinfigure">Figure 2-11 Transaction Journal</p><img src="img/inmem_3v_020.png" alt="Description of Figure 2-11 follows" title="Description of Figure 2-11 follows" longdesc="img_text/inmem_3v_020.html"><br><a href="img_text/inmem_3v_020.html">Description of "Figure 2-11 Transaction Journal"</a></div>
                        <!-- class="figure" -->
                        <p>The database achieves read consistency by merging the contents of the column, transaction journal, and buffer cache. When the IMCU is refreshed during <a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">repopulation</span></a>, queries can access the up-to-date row directly from the IMCU.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1__GUID-78FCBDF5-0498-4504-A82C-1ED36BAA1A05">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a>"</span> for an in-depth discussion of how the IM column store maintains transactional consistency
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" title="A Snapshot Metadata Unit (SMU) contains metadata and transactional information for an associated IMCU.">Snapshot Metadata Units (SMUs)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E1A74436-E719-4FC3-A141-41B160792E51" name="GUID-E1A74436-E719-4FC3-A141-41B160792E51"></a><h4 id="INMEM-GUID-E1A74436-E719-4FC3-A141-41B160792E51" class="sect4"><span class="enumeration_section">2.2.3 </span>In-Memory Expression Units (IMEUs)
                  </h4>
                  <div>
                     <p>An <span class="bold">In-Memory Expression Unit</span> (IMEU) is a storage container for materialized <span class="bold">In-Memory Expressions</span> (IM expressions) and user-defined virtual columns.
                     </p>
                     <p>The database treats materialized expressions just like other columns in the IMCU. Conceptually, an IMEU is a logical extension of its parent IMCU. Just as an IMCU can contain multiple columns, an IMEU can contain multiple virtual columns.</p>
                     <p>Every IMEU maps to exactly one IMCU, mapping to the same row set. The IMEU contains expression results for the data contained in its associated IMCU. When the IMCU is populated, the associated IMEU is also populated.</p>
                     <p>A typical IM expression involves one or more columns, possibly with constants, and has a one-to-one mapping with the rows in the table. For example, an IMCU for an <code class="codeph">employees</code> table contains rows 1&#x2013;1000 for the column <code class="codeph">weekly_salary</code>. For the rows stored in this IMCU, the IMEU calculates the automatically detected IM expression <code class="codeph">weekly_salary*52</code>, and the user-defined virtual column <code class="codeph">quarterly_salary</code> defined as <code class="codeph">weekly_salary*12</code>. The 3rd row down in the IMCU maps to the 3rd row down in the IMEU.
                     </p>
                     <p>The IMEU is a logical extension of the IMCUs of a particular segment. By default, the IMEU inherits the <code class="codeph">INMEMORY</code> clause properties, including Oracle Real Application Clusters (Oracle RAC) properties such as <code class="codeph">DISTRIBUTE</code> and <code class="codeph">DUPLICATE</code>, from the base segment. You can selectively enable or disable virtual columns for storage in IMEUs. You can also specify compression levels for different columns.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="populating-objects-in-memory.html#GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617" title="For internal tables, both In-Memory virtual columns (IM virtual columns) and nonvirtual columns are eligible for IM population. For external tables, only nonvirtual columns are eligible.">About Enabling INMEMORY Columns</a></li>
                           <li><a href="views-related-to-im-column-store.html#GUID-2EBF8D9B-FA9E-4D67-8934-5908E6018D4E" title="This topic describes data dictionary and dynamic performance views related to the In-Memory Column Store (IM column store).">In-Memory Views</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" title="The IM column store manages both data and metadata in optimized storage units, not in traditional Oracle data blocks.">In-Memory Storage Units</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757" name="GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757"></a><h3 id="INMEM-GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757" class="sect3"><span class="enumeration_section">2.3 </span>Expression Statistics Store (ESS)
               </h3>
               <div>
                  <p>The <strong class="term">Expression Statistics Store (ESS)</strong> is a repository maintained by the optimizer to store statistics about expression evaluation. The ESS resides in the SGA and persists on disk.
                  </p>
                  <p>When an IM column store is enabled, the database leverages the ESS for its In-Memory Expressions (IM expressions) feature. However, the ESS is independent of the IM column store. The ESS is a permanent component of the database and cannot be disabled.</p>
                  <p>The database uses the ESS to determine whether an expression is â€œhotâ€ (frequently accessed), and thus a candidate for an IM expression. During a hard parse of a query, the ESS looks for active expressions in the <code class="codeph">SELECT</code> list, <code class="codeph">WHERE</code> clause, <code class="codeph">GROUP BY</code> clause, and so on.
                  </p>
                  <p>For each segment, the ESS maintains expression statistics such as the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Frequency of execution</p>
                     </li>
                     <li>
                        <p>Cost of evaluation</p>
                     </li>
                     <li>
                        <p>Timestamp evaluation</p>
                     </li>
                  </ul>
                  <p>The optimizer assigns each expression a weighted score based on cost and the number of times it was evaluated. The values are approximate rather than exact. More active expressions have higher scores. The ESS maintains an internal list of the most frequently accessed expressions.</p>
                  <p>Control the behavior of IM expressions using the <code class="codeph">DBMS_INMEMORY_ADMIN</code> package. For example, the <code class="codeph">IME_CAPTURE_EXPRESSIONS</code> procedure prompts the database to identify and gradually populate the hottest expressions in the database. The <code class="codeph">IME_POPULATE_EXPRESSIONS</code> procedure forces the database to populate the expressions immediately.
                  </p>
                  <p>ESS information is stored in the data dictionary and exposed in the <code class="codeph">DBA_EXPRESSION_STATISTICS</code> view. This view shows the metadata that the optimizer has collected in the ESS. IM expressions are exposed as system-generated virtual columns, prefixed by the string <code class="codeph">SYS_IME</code>, in the <code class="codeph">DBA_IM_EXPRESSIONS</code> view.
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757__GUID-32526C6F-6AA1-4856-A80B-A2B1ED9DB9CA">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="optimizing-in-memory-expressions.html#GUID-1B849DAF-277E-4B09-8275-367592115B06" title="By default, the DBMS_INMEMORY_ADMIN.IME_CAPTURE_EXPRESSIONS procedure identifies and populates â€œhotâ€ expressions, called In-Memory Expressions (IM expressions).">About IM Expressions</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../tgsql/query-optimizer-concepts.html#GUID-44EB8261-A7B1-4402-94ED-5152EE1C5D08" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> to learn more about ESS
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/DBA_EXPRESSION_STATISTICS.html#GUID-9617514D-FFED-4B5D-B8C7-FB08FCB9CC91" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about the <code class="codeph">DBA_EXPRESSION_STATISTICS</code> view
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-398720DF-7D8D-4418-B395-5F7C5FC85BC5" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_INMEMORY_ADMIN</code> package
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">In-Memory Column Store Architecture</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" name="GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2"></a><h3 id="INMEM-GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" class="sect3"><span class="enumeration_section">2.4 </span>In-Memory Process Architecture
               </h3>
               <div>
                  <p>In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E">In-Memory Coordinator Process (IMCO)</a><br>The In-Memory Coordinator Process (IMCO) manages many tasks for the IM column store. Its primary task is to initiate background population and repopulation of columnar data.
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3">Space Management Worker Processes (Wnnn)</a><br>Space Management Worker Processes (W<span class="italic">nnn</span>) populate or repopulate data on behalf of IMCO.
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70">In-Memory Dynamic Scans</a><br><strong class="term">In-Memory Dynamic Scans (IM dynamic scans)</strong> use lightweight threads to parallelize In-Memory table scans.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">In-Memory Column Store Architecture</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E" name="GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E"></a><h4 id="INMEM-GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E" class="sect4"><span class="enumeration_section">2.4.1 </span>In-Memory Coordinator Process (IMCO)
                  </h4>
                  <div>
                     <p>The In-Memory Coordinator Process (IMCO) manages many tasks for the IM column store. Its primary task is to initiate background population and repopulation of columnar data.</p>
                     <p>Population is a streaming mechanism, converting row data into columnar format, and then compressing it. IMCO automatically initiates population of <code class="codeph">INMEMORY</code> objects with any priority other than <code class="codeph">NONE</code>. When objects with priority <code class="codeph">NONE</code> are accessed, IMCO populates them using Space Management Worker Process (W<span class="italic">nnn</span>) processes.
                     </p>
                     <p>The IMCO background process also initiates <a href="glossary.html#GUID-6F8CD872-FBA2-4519-8204-66D3E45FA1C9"><span class="xrefglossterm">threshold-based repopulation</span></a> of IM column store objects when they meet a staleness threshold. IMCO may instigate <a href="glossary.html#GUID-34CC73ED-D322-4628-AC54-3F51065E8BCE"><span class="xrefglossterm">trickle repopulation</span></a> for any IMCU in the IM column store that has stale entries but does not meet the <a href="glossary.html#GUID-78ED27B2-6946-4302-BDD2-3F8A4F0DA42C"><span class="xrefglossterm">staleness threshold</span></a>. 
                     </p>
                     <p>Trickle repopulation occurs automatically in the background. The steps are as follows:</p>
                     <ol>
                        <li>
                           <p>IMCO wakes up.</p>
                        </li>
                        <li>
                           <p>IMCO determines whether population tasks need to be performed, including whether any stale entries exist in an IMCU.</p>
                        </li>
                        <li>
                           <p>If IMCO finds stale entries, then it triggers a Space Management Worker Process to repopulate these entries in the IMCU.</p>
                        </li>
                        <li>
                           <p>IMCO sleeps for two minutes, and then returns to Step 1.</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E__GUID-8B8A0400-F744-4034-99A4-6EAACB984D69">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-86184690-5531-405F-AA05-BB935F57B76D" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about background processes
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.">In-Memory Process Architecture</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" name="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3"></a><h4 id="INMEM-GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" class="sect4"><span class="enumeration_section">2.4.2 </span>Space Management Worker Processes (Wnnn)
                  </h4>
                  <div>
                     <p>Space Management Worker Processes (W<span class="italic">nnn</span>) populate or repopulate data on behalf of IMCO.
                     </p>
                     <p>During population, W<span class="italic">nnn</span> processes are responsible for creating IMCUs, SMUs, and IMEUs. When creating IMEUs, the worker processes perform the following tasks:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Identify virtual columns for population</p>
                        </li>
                        <li>
                           <p>Create virtual column values</p>
                        </li>
                        <li>
                           <p>Compute values for each row, transform the data into columnar format, and compress it</p>
                        </li>
                        <li>
                           <p>Register the objects with the space layer</p>
                        </li>
                        <li>
                           <p>Associate the IMEUs with their corresponding IMCUs</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3__GUID-683499D3-4356-4C9E-AC8E-CA92059FB61A">
                        <p class="notep1">Note:</p>
                        <p>During IMEU creation, parent IMCUs remain available for queries.</p>
                     </div>
                     <p>During repopulation, the W<span class="italic">nnn</span> processes create new versions of the IMCUs based on the existing IMCUs and transactions journals, while temporarily retaining the old versions. This mechanism is called <a href="glossary.html#GUID-D54C930C-1B27-40FC-9B15-25670A707365"><span class="xrefglossterm">double buffering</span></a>.
                     </p>
                     <p>The database can quickly move IM expressions in and out of the IM column store. For example, if an IMCU was created without an IMEU, then the database can add an IMEU later without forcing the IMCU to undergo the full repopulation mechanism.</p>
                     <p>The <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> initialization parameter controls the maximum number of worker processes that can be started for population. The <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_PERCENT</code> initialization parameter controls the maximum percentage of time that worker processes can perform trickle repopulation.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3__GUID-7CC05002-BC25-4942-8AEC-B6319D935B81">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" title="In-Memory population (population) occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store.">About In-Memory Population</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="The automatic refresh of columnar data after significant modifications is called repopulation.">About Repopulation of the IM Column Store</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="init-parameters-for-im-column-store.html#GUID-A67ABCAC-C6B9-499E-8AE0-BD7922B239BE" title="Several initialization parameters control the behavior of the IM column store.">In-Memory Initialization Parameters</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-86184690-5531-405F-AA05-BB935F57B76D" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about background processes
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.">In-Memory Process Architecture</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" name="GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70"></a><h4 id="INMEM-GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" class="sect4"><span class="enumeration_section">2.4.3 </span>In-Memory Dynamic Scans
                  </h4>
                  <div>
                     <p><strong class="term">In-Memory Dynamic Scans (IM dynamic scans)</strong> use lightweight threads to parallelize In-Memory table scans.
                     </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59">Purpose of IM Dynamic Scans</a><br>When additional CPU is available, IM dynamic scans accelerate In-Memory table scans that are CPU bound.
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9">How IM Dynamic Scans Work</a><br>IM Dynamic Scans attain optimal performance by reading IMCUs in parallel.
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5">Interface for IM Dynamic Scans</a><br>IM dynamic scans are transparent, which means that they require no application changes and are automatically controlled by the Resource Manager.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.">In-Memory Process Architecture</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59" name="GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59"></a><h5 id="INMEM-GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59" class="sect5"><span class="enumeration_section">2.4.3.1 </span>Purpose of IM Dynamic Scans
                     </h5>
                     <div>
                        <p>When additional CPU is available, IM dynamic scans accelerate In-Memory table scans that are CPU bound.</p>
                        <p>IM dynamic scans automatically use idle CPU resources to scan IMCUs in parallel and maximize CPU usage. When CPU resources are available, applications can get even faster analytic query results automatically. Because the scans are dynamic, they enable the use of excess CPU bandwidth without affecting existing workload.</p>
                        <p>IM dynamic scans are more flexible than traditional Oracle parallel execution, although the two are not mutually exclusive. Dynamic scans use multiple lightweight threads of execution within a process. Typically, the performance overhead for dynamic scans is low.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59__GUID-0A9319C3-8D43-45CD-AB5D-9913517D9337">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn more about Resource Manager
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="In-Memory Dynamic Scans (IM dynamic scans) use lightweight threads to parallelize In-Memory table scans.">In-Memory Dynamic Scans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" name="GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9"></a><h5 id="INMEM-GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" class="sect5"><span class="enumeration_section">2.4.3.2 </span>How IM Dynamic Scans Work
                     </h5>
                     <div>
                        <p>IM Dynamic Scans attain optimal performance by reading IMCUs in parallel.</p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-4DDD1A53-D634-4201-B46F-626DAE16A447">About Lightweight Threads</a><br>A <strong class="term">lightweight thread</strong> is an execution entity that helps to parallelize full table scans. It is â€œlightweightâ€ because it does not incur the higher memory overhead of Oracle processes.
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A">When the Database Considers IM Dynamic Scans</a><br>Lightweight threads are enabled when a CPU resource plan is enabled (for example, <code class="codeph">RESOURCE_MANAGER_PLAN=DEFAULT_PLAN</code>) and CPU utilization of the database is low.
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-0D557669-B378-4514-A0D3-FBE054AA9F57">How IM Dynamic Scans Work</a><br>Resource Manager allocates lightweight threads to parallelize the scan of IMCUs.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="In-Memory Dynamic Scans (IM dynamic scans) use lightweight threads to parallelize In-Memory table scans.">In-Memory Dynamic Scans</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447" name="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447"></a><h6 id="INMEM-GUID-4DDD1A53-D634-4201-B46F-626DAE16A447" class="sect6"><span class="enumeration_section">2.4.3.2.1 </span>About Lightweight Threads
                        </h6>
                        <div>
                           <p>A <strong class="term">lightweight thread</strong> is an execution entity that helps to parallelize full table scans. It is â€œlightweightâ€ because it does not incur the higher memory overhead of Oracle processes.
                           </p>
                           <div class="infoboxnote" id="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447__GUID-0FBCF10B-88C4-4A6F-9A7D-935799771F09">
                              <p class="notep1">Note:</p>
                              <p>A lightweight thread used by IM dynamic scans is not the same as a regular thread in the multithreaded Oracle Database model.</p>
                           </div>
                           <p>Lightweight threads share the resources of the parent foreground or PQ process, called the <a href="glossary.html#GUID-9938DE9E-21B0-4A21-B69B-A80CA6295B44"><span class="xrefglossterm">table scan process</span></a>, that coordinates the scan of a set of IMCUs. Threads maintain their own independent flow of execution. The database can parallelize scans by prioritizing threads and executing them asynchronously.
                           </p>
                           <p>For eligible queries, the process allocates a pool of threads. Resource Manager automatically determines the number of threads in the pool based on the CPU count in the database host and the current load on the system. The pool of threads remains available to the session for subsequent queries unless the idle time reaches an internal threshold, at which point the database terminates the threads.</p>
                           <p>Communication between threads occurs exclusively within a process. For this reason, contention does not occur at the database instance level.</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447__GUID-1F61E3C4-2B57-49E0-BCBD-98D05866076A">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=CNCPT-GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> to learn about the multithreaded Oracle Database model
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" title="IM Dynamic Scans attain optimal performance by reading IMCUs in parallel.">How IM Dynamic Scans Work</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A" name="GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A"></a><h6 id="INMEM-GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A" class="sect6"><span class="enumeration_section">2.4.3.2.2 </span>When the Database Considers IM Dynamic Scans
                        </h6>
                        <div>
                           <p>Lightweight threads are enabled when a CPU resource plan is enabled (for example, <code class="codeph">RESOURCE_MANAGER_PLAN=DEFAULT_PLAN</code>) and CPU utilization of the database is low.
                           </p>
                           <p>If lightweight threads are enabled, then the database considers an IM dynamic scan when an application queries an object that is currently populated in the IM column store. Typically, a serial or parallel query is a candidate for IM dynamic scans when it has the following characteristics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Accesses a high number of IMCUs or columns</p>
                              </li>
                              <li>
                                 <p>Consumes all rows in the table</p>
                              </li>
                              <li>
                                 <p>Is CPU-intensive</p>
                              </li>
                           </ul>
                           <p>Oracle Database Resource Manager (the Resource Manager), which is automatically enabled when <code class="codeph">INMEMORY_SIZE</code> is greater than <code class="codeph">0</code>, is required for IM dynamic scans. The Resource Manager decides when and how to use the lightweight threads. Lightweight threads are the lowest priority operation in the database because they are capitalizing on unused resources.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" title="IM Dynamic Scans attain optimal performance by reading IMCUs in parallel.">How IM Dynamic Scans Work</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-0D557669-B378-4514-A0D3-FBE054AA9F57" name="GUID-0D557669-B378-4514-A0D3-FBE054AA9F57"></a><h6 id="INMEM-GUID-0D557669-B378-4514-A0D3-FBE054AA9F57" class="sect6"><span class="enumeration_section">2.4.3.2.3 </span>How IM Dynamic Scans Work
                        </h6>
                        <div>
                           <p>Resource Manager allocates lightweight threads to parallelize the scan of IMCUs.</p>
                           <p>When the database determines that a query can benefit from an IM dynamic scan, it typically proceeds as follows:</p>
                           <ol>
                              <li>
                                 <p>A table scan process spawns a pool of lightweight threads.</p>
                              </li>
                              <li>
                                 <p>The table scan process creates a separate task for every IMCU that must be scanned, and then adds each task to a task queue.</p>
                              </li>
                              <li>
                                 <p>Resource Manager determines how many threads can participate in the table scan.</p>
                              </li>
                              <li>
                                 <p>Active threads pick up tasks from the task queue, with the table scan process consuming results from completed tasks.</p>
                              </li>
                           </ol>
                           <p>Depending on the database load, Resource Manager continuously adjusts the number of active lightweight threads while the query is running.&nbsp;If CPU resources are not available, then the table scan process performs the scan <span class="italic">without</span> using lightweight threads.
                           </p>
                           <p>The following graphic illustrates an IM dynamic scan of 12 IMCUs in the <code class="codeph">sales</code> table.
                           </p>
                           <div class="figure" id="GUID-0D557669-B378-4514-A0D3-FBE054AA9F57__GUID-398D201A-1CD8-4400-B08E-C200FDDD7B85">
                              <p class="titleinfigure">Figure 2-12 IM Dynamic Scan</p><img src="img/inmem_pb_001b.png" alt="Description of Figure 2-12 follows" title="Description of Figure 2-12 follows" longdesc="img_text/inmem_pb_001b.html"><br><a href="img_text/inmem_pb_001b.html">Description of "Figure 2-12 IM Dynamic Scan"</a></div>
                           <!-- class="figure" -->
                           <p>In the preceding graphic, the database host has 8 CPU cores. Based on an internal algorithm, Resource Manager assigns 4 threads to assist the table scan process. In this scenario, 4 CPU cores remain idle for other concurrent database operations to use.</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" title="IM Dynamic Scans attain optimal performance by reading IMCUs in parallel.">How IM Dynamic Scans Work</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5" name="GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5"></a><h5 id="INMEM-GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5" class="sect5"><span class="enumeration_section">2.4.3.3 </span>Interface for IM Dynamic Scans
                     </h5>
                     <div>
                        <p>IM dynamic scans are transparent, which means that they require no application changes and are automatically controlled by the Resource Manager.</p>
                        <div class="section">
                           <p>IM dynamic scans require the Resource Manager, which is automatically enabled when <code class="codeph">INMEMORY_SIZE</code> is greater than <code class="codeph">0</code>. No specific resource plan is required.
                           </p>
                           <p>Several new session statistics track the usage of IM dynamic scans. Each thread writes trace data to a separate trace file. </p>
                           <p>Execution plans are unchanged. The following figure shows a sample execution plan.</p><pre class="pre codeblock"><code>SQL&gt; SELECT MAX(l_quantity) largest_order FROM lineitem;

LARGEST_ORDER
-------------
           50

Elapsed: 00:00:03.41

Execution Plan
----------------------------------------------------------
Plan hash value: 1885658499

------------------------------------------------------------------------------------------------------
| Id  | Operation                    | Name     | Rows | Bytes |Cost(%CPU)| Time     | Pstart| Pstop |
------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |          |    1 |     3 | 116K  (4)| 00:00:05 |       |       |
|   1 |  SORT AGGREGATE              |          |    1 |     3 |          |          |       |       |
|   2 |   PARTITION RANGE ALL        |          | 600M | 1716M | 116K  (4)| 00:00:05 |     1 |    84 |
|   3 |    TABLE ACCESS INMEMORY FULL| LINEITEM | 600M | 1716M | 116K  (4)| 00:00:05 |     1 |    84 |
------------------------------------------------------------------------------------------------------

NAME                                              VALUE
-------------------------------------------------------
IM scan CUs memcompress for query low              1147
IM scan bytes in-memory                      5.1790E+10
IM scan bytes uncompressed                   7.6722E+10
IM scan CUs columns accessed                       1147
IM scan rows                                  600037902
IM scan rows projected                               29
IM scan (dynamic) rows                        600037902
IM scan (dynamic) multi-threaded scans                1
IM scan (dynamic) tasks processed by thread        1146</code></pre><p>Consider the characteristics of the plan:</p>
                           <ol>
                              <li>
                                 <p>The execution plan is unchanged. </p>
                                 <p>Note that the plan does not mention IM dynamic scans in Step 3. However, clicking the binocular icon in a SQL Monitor report would show â€œDynamic Scan Tasks on Thread.â€</p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan (dynamic) multi-threaded scans</code> is nonzero, which means that the database used an IM dynamic scan.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan CUs memcompress for query low</code> indicates that 1147 IMCUs exist in the <code class="codeph">lineitem</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan (dynamic) tasks processed by thread</code> indicates how many IMCUs were processed in parallel. 
                                 </p>
                                 <p>The number is 1146, which is less than the total number of 1147 shown in <code class="codeph">IM scan CUs memcompress for query low</code>. The database analyzed the first IMCU without parallelization to determine whether parallelization was worthwhile. Because the answer was yes, the database proceeded to scan the remaining 1146 IMCUs in parallel.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan (dynamic) rows</code> and <code class="codeph">IM scan rows are equal</code>, which means that the threads retrieved all rows for the query.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5__GUID-CDAA9B98-FEB7-406D-BDD7-F1F76628FB03">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=ADMIN-GUID-E8FABE8D-A781-49BB-B623-98F096DED239" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn more about the Resource Manager
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/statistics-descriptions-2.html#REFRN-GUID-2FBC1B7E-9123-41DD-8178-96176260A639" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for descriptions of In-Memory statistics
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="In-Memory Dynamic Scans (IM dynamic scans) use lightweight threads to parallelize In-Memory table scans.">In-Memory Dynamic Scans</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" name="GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310"></a><h3 id="INMEM-GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" class="sect3"><span class="enumeration_section">2.5 </span>CPU Architecture: SIMD Vector Processing
               </h3>
               <div>
                  <p>For data that is populated in the IM column store, the database uses SIMD (single instruction, multiple data) vector processing.</p>
                  <p>The IM column store maximizes the number of column entries that the CPU can load into the vector registers and evaluate. Instead of evaluating each entry in the column one at a time, the database evaluates a set of column values in a single CPU instruction. SIMD vector processing enables the database to scan billions of rows per second.</p>
                  <p>For example, an application issues a query to find the total number of orders in the <code class="codeph">sales</code> table that use the <code class="codeph">promo_id</code> value of <code class="codeph">9999</code>. The <code class="codeph">sales</code> table resides in the IM column store. The query begins by scanning only the <code class="codeph">sales.promo_id</code> column, as shown in the following diagram:
                  </p>
                  <div class="figure" id="GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310__GUID-20F920D6-E978-476E-A578-32B4C05F50B0">
                     <p class="titleinfigure">Figure 2-13 SIMD Vector Processing</p><img src="img/cncpt_vm_382.png" alt="Description of Figure 2-13 follows" title="Description of Figure 2-13 follows" longdesc="img_text/cncpt_vm_382.html"><br><a href="img_text/cncpt_vm_382.html">Description of "Figure 2-13 SIMD Vector Processing"</a></div>
                  <!-- class="figure" -->
                  <p>The CPU evaluates the data as follows:</p>
                  <ol>
                     <li>
                        <p>Loads the first 8 values (the number varies depending on data type and compression mode) from the <code class="codeph">promo_id</code> column into the SIMD register, and then compares them with the value <code class="codeph">9999</code> in a single instruction
                        </p>
                     </li>
                     <li>
                        <p>Discards the entries.</p>
                     </li>
                     <li>
                        <p>Loads another 8 values into the SIMD register, and then continues in this way until it has evaluated all entries.</p>
                     </li>
                  </ol>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA">SIMD and Oracle LOBs</a><br><span>Oracle Database 18c</span> provides SIMD vector support for queries involving SQL operators on specific LOB columns.
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534">SIMD and Oracle Numbers</a><br><span>For tables compressed with <code class="codeph">QUERY LOW</code>, <code class="codeph">NUMBER</code> columns are encoded using an optimized format that enables native calculations in hardware.</span></li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4">SIMD and Exadata Smart Flash Cache</a><br>Besides storing data in Hybrid Columnar Compression format, Exadata Smart Flash Cache can store data in pure columnar format.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously.">In-Memory Column Store Architecture</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA" name="GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA"></a><h4 id="INMEM-GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA" class="sect4"><span class="enumeration_section">2.5.1 </span>SIMD and Oracle LOBs
                  </h4>
                  <div>
                     <p><span>Oracle Database 18c</span> provides SIMD vector support for queries involving SQL operators on specific LOB columns.
                     </p>
                     <p>The nature of the support depends on the type of LOB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Inline LOBs</p>
                           <p>The IM column store provides contiguous storage for inline LOBs, which are LOBs less than 4 KB, within the IMCUs. Columnar storage enables faster query processing by removing the overhead of assembling LOB data from the database buffer cache.</p>
                        </li>
                        <li>
                           <p>Out-of-line LOBs</p>
                           <p>In this case, the IM column store only stores the LOB locator, which is 40 byes. Out-of-line columns do not benefit from columnar optimization.</p>
                        </li>
                     </ul>
                     <p>There is one exception to the preceding rule. An IMEU can allocate up to 32 KB of contiguous storage for JSON columns defined as a LOB data type. The IMEU stores these columns in the <a href="glossary.html#GUID-96C1EFE2-69DD-4E78-97DA-25253A51E3A5"><span class="xrefglossterm">OSON</span></a> format, which can provide faster query performance using SIMD processing.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA__GUID-30A42379-36EF-42C3-95D6-B12116C71695">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adlob/introduction-to-large-objects.html#ADLOB-GUID-1A2B0023-9EE8-48AF-AA76-171D1FC5C241" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a> to learn more about LOBs
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="For data that is populated in the IM column store, the database uses SIMD (single instruction, multiple data) vector processing.">CPU Architecture: SIMD Vector Processing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534" name="GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534"></a><h4 id="INMEM-GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534" class="sect4"><span class="enumeration_section">2.5.2 </span>SIMD and Oracle Numbers
                  </h4>
                  <div>
                     <p><span>For tables compressed with <code class="codeph">QUERY LOW</code>, <code class="codeph">NUMBER</code> columns are encoded using an optimized format that enables native calculations in hardware.</span></p>
                     <p><span>SIMD vector processing enables simple aggregations, <code class="codeph">GROUP BY</code> aggregations, and arithmetic operations to benefit significantly. The performance improvement depends on the amount of time the aggregation spends on arithmetic computation. Some aggregations may benefit by up to a factor of 9.</span></p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534__GUID-09CA3951-DE7D-427A-9CE2-8D357B64F8E5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="optimizing-in-memory-aggregation.html#GUID-4321558D-853B-41A0-9098-4A45204F21BD" title="In-Memory Optimized Arithmetic&nbsp;uses an optimized NUMBER format for fast calculations using SIMD hardware.">Optimizing In-Memory Arithmetic</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Data-Types.html#SQLRF-GUID-9401BC04-81C4-4CD5-99E7-C5E25C83F608" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="For data that is populated in the IM column store, the database uses SIMD (single instruction, multiple data) vector processing.">CPU Architecture: SIMD Vector Processing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4" name="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4"></a><h4 id="INMEM-GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4" class="sect4"><span class="enumeration_section">2.5.3 </span>SIMD and Exadata Smart Flash Cache
                  </h4>
                  <div>
                     <p>Besides storing data in Hybrid Columnar Compression format, Exadata Smart Flash Cache can store data in pure columnar format.</p>
                     <p>Exadata Smart Scan supports SIMD predicates. The advantage is that In-Memory performance extends from DRAM storage to secondary storage.</p>
                     <p>By default, Exadata Smart Flash Cache compresses data using the level <code class="codeph">MEMCOMPRESS FOR CAPACITY LOW</code>. To change the compression level or disable the columnar format altogether, use the <code class="codeph">ALTER TABLE ... NO CELLMEMORY</code> statement.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4__GUID-ECB949A8-37D3-4DF0-923D-C433D823C8FC">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="intro-to-in-memory-column-store.html#GUID-3C7A9421-141C-43F8-9CFC-D0D516E19D3B" title="Not all objects marked INMEMORY may fit in DRAM memory at the same time. If you use Oracle Exadata Storage Server Software, then Exadata Smart Flash Cache can serve as supplemental memory.">In-Memory Support for Exadata Flash Cache</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=DBMSO-GUID-D3F05A21-F1A8-48D0-AC3C-88AF3D725DCD" target="_blank"><span id="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4__DBMSO"><cite>Oracle Exadata Database Machine System Overview</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="For data that is populated in the IM column store, the database uses SIMD (single instruction, multiple data) vector processing.">CPU Architecture: SIMD Vector Processing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='13479.types-parallelism.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="There are multiple types of parallelism.">
      <meta name="description" content="There are multiple types of parallelism.">
      <title>Types of Parallelism</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="VLDB and Partitioning Guide">
      <meta property="og:description" content="There are multiple types of parallelism.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="VLDB and Partitioning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00">
      <meta name="dcterms.title" content="VLDB and Partitioning Guide">
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96199-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="about-parallel-queuing.html" title="Previous" type="text/html">
      <link rel="next" href="parameters-parallel-exec.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-parallel-queuing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="parameters-parallel-exec.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB and Partitioning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-parallel.html" property="item" typeof="WebPage"><span property="name">Using Parallel Execution</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Types of Parallelism</li>
            </ol>
            <a id="GUID-FCE748F1-0CDB-4D95-9849-6A062E653945" name="GUID-FCE748F1-0CDB-4D95-9849-6A062E653945"></a><a id="VLDBG0107"></a>
            
            <h2 id="VLDBG-GUID-FCE748F1-0CDB-4D95-9849-6A062E653945" class="sect2">Types of Parallelism</h2>
         </header>
         <div class="ind">
            <div>
               <p>There are multiple types of parallelism.</p>
               <p>This section discusses the types of parallelism in the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="types-parallelism.html#GUID-D48BFF12-4630-444F-B165-1C8E019D2656" title="You can use parallel queries and parallel subqueries in SELECT statements and execute in parallel the query portions of DDL statements and DML statements (INSERT, UPDATE, and DELETE).">About Parallel Queries</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-41774038-773B-40A5-BDCD-AB16A189C035" title="Parallelism for DDL statements is introduced in this topic.">About Parallel DDL Statements</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" title="Parallel DML operations are introduced in the topic.">About Parallel DML Operations</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" title="SQL statements can contain user-defined functions written in PL/SQL, in Java, or as external procedures in C that can appear as part of the SELECT list, SET clause, or WHERE clause.">About Parallel Execution of Functions</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" title="An Oracle Database can use parallelism in multiple types of operations.">About Other Types of Parallelism</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).">Degree of Parallelism Rules for SQL Statements</a></p>
                  </li>
               </ul>
            </div><a id="VLDBG1403"></a><div class="props_rev_3"><a id="GUID-D48BFF12-4630-444F-B165-1C8E019D2656" name="GUID-D48BFF12-4630-444F-B165-1C8E019D2656"></a><h3 id="VLDBG-GUID-D48BFF12-4630-444F-B165-1C8E019D2656" class="sect3">About Parallel Queries</h3>
               <div>
                  <p>You can use parallel queries and parallel subqueries in <code class="codeph">SELECT</code> statements and execute in parallel the query portions of DDL statements and DML statements (<code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code>).
                  </p>
                  <p>You can also query external tables in parallel.</p>
                  <p>The parallelization decision for SQL queries has two components: the decision to parallelize and the degree of parallelism (DOP). These components are determined differently for queries, DDL operations, and DML operations. To determine the DOP, Oracle Database looks at the reference objects:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Parallel query looks at each table and index, in the portion of the query to be executed in parallel, to determine which is the reference table. The basic rule is to pick the table or index with the largest DOP.</p>
                     </li>
                     <li>
                        <p>For parallel DML (<code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">DELETE</code>), the reference object that determines the DOP is the table being modified by an insert, update, or delete operation. Parallel DML also adds some limits to the DOP to prevent deadlock. If the parallel DML statement includes a subquery, the subquery's DOP is equivalent to that for the DML operation.
                        </p>
                     </li>
                     <li>
                        <p>For parallel DDL, the reference object that determines the DOP is the table, index, or partition being created, rebuilt, split, or moved. If the parallel DDL statement includes a subquery, the subquery's DOP is equivalent to the DDL operation.</p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="types-parallelism.html#GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" title="There are several parallel scan methods that are supported on index-organized tables.">Parallel Queries on Index-Organized Tables</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" title="Parallel query on a nonpartitioned index-organized table uses parallel fast full scan.">Nonpartitioned Index-Organized Tables</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" title="Both index range scan and fast full scan can be performed in parallel.">Partitioned Index-Organized Tables</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" title="Parallel queries can be performed on object type tables and tables containing object type columns.">Parallel Queries on Object Types</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="A SQL query can only be executed in parallel under certain conditions.">Rules for Parallelizing Queries</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D48BFF12-4630-444F-B165-1C8E019D2656__GUID-EC437C87-72E2-4556-A1C7-0F0657361BE6">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="parallel-exec-intro.html#GUID-1DF2B82C-DD29-4500-B0B4-F296F1AC6240" title="Each SQL statement undergoes an optimization and parallelization process when it is parsed.">Parallel Execution of SQL Statements</a> for an explanation of how the processes perform parallel queries
                           </p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-09FC59FF-9F63-453C-86D3-6D171022314A" title="The distributed transaction restrictions are discussed in this topic.">Distributed Transaction Restrictions</a> for examples of queries that reference a remote object
                           </p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="A SQL query can only be executed in parallel under certain conditions.">Rules for Parallelizing Queries</a> for information about the conditions for executing a query in parallel and the factors that determine the DOP
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="VLDBG1404"></a><div class="props_rev_3"><a id="GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" name="GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB"></a><h4 id="VLDBG-GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" class="sect4">Parallel Queries on Index-Organized Tables</h4>
                  <div>
                     <p>There are several parallel scan methods that are supported on index-organized tables.</p>
                     <p>These parallel scan methods include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Parallel fast full scan of a nonpartitioned index-organized table</p>
                        </li>
                        <li>
                           <p>Parallel fast full scan of a partitioned index-organized table</p>
                        </li>
                        <li>
                           <p>Parallel index range scan of a partitioned index-organized table</p>
                        </li>
                     </ul>
                     <p>You can use these scan methods for index-organized tables with overflow areas and for index-organized tables that contain LOBs.</p>
                  </div>
               </div><a id="VLDBG1405"></a><div class="props_rev_3"><a id="GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" name="GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0"></a><h4 id="VLDBG-GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" class="sect4">Nonpartitioned Index-Organized Tables</h4>
                  <div>
                     <p>Parallel query on a nonpartitioned index-organized table uses parallel fast full scan.</p>
                     <p>Work is allocated by dividing the index segment into a sufficiently large number of block ranges and then assigning the block ranges to parallel execution servers in a demand-driven manner. The overflow blocks corresponding to any row are accessed in a demand-driven manner only by the process, which owns that row.</p>
                  </div>
               </div><a id="VLDBG1406"></a><div class="props_rev_3"><a id="GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" name="GUID-E7921774-F550-4E85-8349-D85C40EDB6AB"></a><h4 id="VLDBG-GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" class="sect4">Partitioned Index-Organized Tables</h4>
                  <div>
                     <p>Both index range scan and fast full scan can be performed in parallel.</p>
                     <p>For parallel fast full scan, parallelization is the same as for nonpartitioned index-organized tables. Depending on the DOP, each parallel execution server gets one or more partitions, each of which contains the primary key index segment and the associated overflow segment, if any.</p>
                  </div>
               </div><a id="VLDBG1407"></a><div class="props_rev_3"><a id="GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" name="GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA"></a><h4 id="VLDBG-GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" class="sect4">Parallel Queries on Object Types</h4>
                  <div>
                     <p>Parallel queries can be performed on object type tables and tables containing object type columns. </p>
                     <p>Parallel query for object types supports all of the features that are available for sequential queries on object types, including:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Methods on object types</p>
                        </li>
                        <li>
                           <p>Attribute access of object types</p>
                        </li>
                        <li>
                           <p>Constructors to create object type instances</p>
                        </li>
                        <li>
                           <p>Object views</p>
                        </li>
                        <li>
                           <p>PL/SQL and Oracle Call Interface (OCI) queries for object types</p>
                        </li>
                     </ul>
                     <p>There are no limitations on the size of the object types for parallel queries.</p>
                     <p>The following restrictions apply to using parallel query for object types:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <code class="codeph">MAP</code> function is needed to execute queries in parallel for queries involving joins and sorts (through <code class="codeph">ORDER</code> <code class="codeph">BY</code>, <code class="codeph">GROUP</code> <code class="codeph">BY</code>, or set operations). Without a <code class="codeph">MAP</code> function, the query is automatically executed serially.
                           </p>
                        </li>
                        <li>
                           <p>Parallel DML and parallel DDL are not supported with object types, and such statements are always performed serially.</p>
                        </li>
                     </ul>
                     <p>In all cases where the query cannot execute in parallel because of any of these restrictions, the whole query executes serially without giving an error message.</p>
                  </div>
               </div><a id="VLDBG1408"></a><div class="props_rev_3"><a id="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" name="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C"></a><h4 id="VLDBG-GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" class="sect4">Rules for Parallelizing Queries</h4>
                  <div>
                     <p>A SQL query can only be executed in parallel under certain conditions.</p>
                     <p>A <code class="codeph">SELECT</code> statement can be executed in parallel only if one of the following conditions is satisfied:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The query includes a statement level or object level parallel hint specification (<code class="codeph">PARALLEL</code> or <code class="codeph">PARALLEL_INDEX</code>).
                           </p>
                        </li>
                        <li>
                           <p>The schema objects referred to in the query have a <code class="codeph">PARALLEL</code> declaration associated with them.
                           </p>
                        </li>
                        <li>
                           <p>Automatic Degree of Parallelism (Auto DOP) has been enabled.</p>
                        </li>
                        <li>
                           <p>Parallel query is forced  using the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code> statement.
                           </p>
                        </li>
                     </ul>
                     <p>In addition, the execution plan should have at least one of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A full table scan</p>
                        </li>
                        <li>
                           <p>An index range scan spanning multiple partitions</p>
                        </li>
                        <li>
                           <p>An index fast full scan</p>
                        </li>
                        <li>
                           <p>A parallel table function</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0C96782">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="Automatic Degree of Parallelism (Auto DOP) enables Oracle Database to automatically decide if a statement should execute in parallel and what DOP it should use.">Automatic Degree of Parallelism</a>for information about Auto DOP
                              </p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).">Degree of Parallelism Rules for SQL Statements</a> for information about the rules for determining the degree of parallelism (DOP)
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL statement
                              </p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
            </div><a id="VLDBG1411"></a><div class="props_rev_3"><a id="GUID-41774038-773B-40A5-BDCD-AB16A189C035" name="GUID-41774038-773B-40A5-BDCD-AB16A189C035"></a><h3 id="VLDBG-GUID-41774038-773B-40A5-BDCD-AB16A189C035" class="sect3">About Parallel DDL Statements</h3>
               <div>
                  <p>Parallelism for DDL statements is introduced in this topic.</p>
                  <p>This section about parallelism for DDL statements contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="types-parallelism.html#GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" title="You can execute DDL statements in parallel for tables and indexes that are nonpartitioned or partitioned.">DDL Statements That Can Be Parallelized</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" title="Parallel execution enables you execute the query in parallel and create operations of creating a table as a subquery from another table or set of tables.">About Using CREATE TABLE AS SELECT in Parallel</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" title="Parallel DDL is often used to create summary tables or do massive data loads that are standalone transactions, which do not always need to be recoverable.">Recoverability and Parallel DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F002024A-0EA9-4526-900E-02815077E8C9" title="Creating a table or index in parallel has space management implications.">Space Management for Parallel DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" title="When creating a table or index in parallel, each parallel execution server uses the values in the STORAGE clause of the CREATE statement to create temporary segments to store the rows.">Storage Space When Using Dictionary-Managed Tablespaces</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" title="When you create indexes and tables in parallel, each parallel execution server allocates a new extent and fills the extent with the table or index data.">Free Space and Parallel DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="DDL operations can be executed in parallel under certain conditions.">Rules for DDL Statements</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="The CREATE operation of the CREATE TABLE AS SELECT statement is parallelized based on the rules for parallelizing DDL statements.">Rules for CREATE TABLE AS SELECT</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1412"></a><div class="props_rev_3"><a id="GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" name="GUID-365F1095-6434-44E2-AE16-F2777EDC82F1"></a><h4 id="VLDBG-GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" class="sect4">DDL Statements That Can Be Parallelized</h4>
                  <div>
                     <p>You can execute DDL statements in parallel for tables and indexes that are nonpartitioned or partitioned.</p>
                     <p>The parallel DDL statements for nonpartitioned tables and indexes are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">MOVE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code></p>
                        </li>
                     </ul>
                     <p>The parallel DDL statements for partitioned tables and indexes are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> {<code class="codeph">MOVE|SPLIT|COALESCE}</code> <code class="codeph">PARTITION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> {<code class="codeph">REBUILD|SPLIT</code>} <code class="codeph">PARTITION</code></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>This statement can be executed in parallel only if the (global) index partition being split is usable.</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>All of these DDL operations can be performed in <code class="codeph">NOLOGGING</code> mode for either parallel or serial execution.
                     </p>
                     <p><code class="codeph">The CREATE</code> <code class="codeph">TABLE</code> statement for an index-organized table can be executed in parallel either with or without an <code class="codeph">AS</code> <code class="codeph">SELECT</code> clause.
                     </p>
                     <p>Parallel DDL cannot occur on tables with object columns. Parallel DDL cannot occur on nonpartitioned tables with <code class="codeph">LOB</code> columns.
                     </p>
                  </div>
               </div><a id="VLDBG1414"></a><a id="VLDBG1413"></a><div class="props_rev_3"><a id="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" name="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7"></a><h4 id="VLDBG-GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" class="sect4">About Using CREATE TABLE AS SELECT in Parallel</h4>
                  <div>
                     <p>Parallel execution enables you execute the query in parallel and create operations of creating a table as a subquery from another table or set of tables. </p>
                     <p>This parallel functionality can be extremely useful in the creation of summary or rollup tables.</p>
                     <p>Note that clustered tables cannot be created and populated in parallel.</p>
                     <p><a href="types-parallelism.html#GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7__I1006622">Figure 8-4</a> illustrates creating a summary table from a subquery in parallel.
                     </p>
                     <div class="figure" id="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7__I1006622">
                        <p class="titleinfigure">Figure 8-4 Creating a Summary Table in Parallel</p><img src="img/vldbg012.gif" width="600" alt="Description of Figure 8-4 follows" title="Description of Figure 8-4 follows" longdesc="img_text/vldbg012.html"><br><a href="img_text/vldbg012.html">Description of "Figure 8-4 Creating a Summary Table in Parallel"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="VLDBG1415"></a><div class="props_rev_3"><a id="GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" name="GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1"></a><h4 id="VLDBG-GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" class="sect4">Recoverability and Parallel DDL</h4>
                  <div>
                     <p>Parallel DDL is often used to create summary tables or do massive data loads that are standalone transactions, which do not always need to be recoverable. </p>
                     <p>By switching off Oracle Database logging, no undo or redo log is generated, so the parallel DML operation is likely to perform better, but becomes an <span class="italic">all</span> <span class="italic">or</span> <span class="italic">nothing</span> operation. In other words, if the operation fails, for whatever reason, you must redo the operation, it is not possible to restart it.
                     </p>
                     <p>If you disable logging during parallel table creation (or any other parallel DDL operation), you should back up the tablespace containing the table after the table is created to avoid loss of the table due to media failure. </p>
                     <p>Use the <code class="codeph">NOLOGGING</code> clause of the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>, <code class="codeph">CREATE</code> <code class="codeph">INDEX</code>, <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>, and <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> statements to disable undo and redo log generation.
                     </p>
                  </div>
               </div><a id="VLDBG1416"></a><div class="props_rev_3"><a id="GUID-F002024A-0EA9-4526-900E-02815077E8C9" name="GUID-F002024A-0EA9-4526-900E-02815077E8C9"></a><h4 id="VLDBG-GUID-F002024A-0EA9-4526-900E-02815077E8C9" class="sect4">Space Management for Parallel DDL</h4>
                  <div>
                     <p>Creating a table or index in parallel has space management implications.</p>
                     <p>These space management implications affect both the storage space required during a parallel operation and the free space available after a table or index has been created.</p>
                  </div>
               </div><a id="VLDBG1417"></a><div class="props_rev_3"><a id="GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" name="GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4"></a><h4 id="VLDBG-GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" class="sect4">Storage Space When Using Dictionary-Managed Tablespaces</h4>
                  <div>
                     <p>When creating a table or index in parallel, each parallel execution server uses the values in the <code class="codeph">STORAGE</code> clause of the <code class="codeph">CREATE</code> statement to create temporary segments to store the rows.
                     </p>
                     <p>A table created with a <code class="codeph">NEXT</code> setting of 4 MB and a <code class="codeph">PARALLEL</code> <code class="codeph">DEGREE</code> of 16 consumes at least 64 megabytes (MB) of storage during table creation because each parallel server process starts with an extent of 4 MB. When the parallel execution coordinator combines the segments, some segments may be trimmed, and the resulting table may be smaller than the requested 64 MB.
                     </p>
                  </div>
               </div><a id="VLDBG1419"></a><a id="VLDBG1418"></a><div class="props_rev_3"><a id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" name="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794"></a><h4 id="VLDBG-GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" class="sect4">Free Space and Parallel DDL</h4>
                  <div>
                     <p>When you create indexes and tables in parallel, each parallel execution server allocates a new extent and fills the extent with the table or index data. </p>
                     <p>For example, if you create an index with a DOP of 4, then the index has at least four extents initially. This allocation of extents is the same for rebuilding indexes in parallel and for moving, splitting, or rebuilding partitions in parallel.</p>
                     <p>Serial operations require the schema object to have at least one extent. Parallel creations require that tables or indexes have at least as many extents as there are parallel execution servers creating the schema object.</p>
                     <p>When you create a table or index in parallel, it is possible to create areas of free space. This occurs when the temporary segments used by the parallel execution servers are larger than what is needed to store the rows.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the unused space in each temporary segment is larger than the value of the <code class="codeph">MINIMUM</code> <code class="codeph">EXTENT</code> parameter set at the tablespace level, then Oracle Database trims the unused space when merging rows from all of the temporary segments into the table or index. The unused space is returned to the system free space and can be allocated for new extents, but it cannot be coalesced into a larger segment because it is not contiguous space (external fragmentation).
                           </p>
                        </li>
                        <li>
                           <p>If the unused space in each temporary segment is smaller than the value of the <code class="codeph">MINIMUM</code> <code class="codeph">EXTENT</code> parameter, then unused space cannot be trimmed when the rows in the temporary segments are merged. This unused space is not returned to the system free space; it becomes part of the table or index (internal fragmentation) and is available only for subsequent insertions or for updates that require additional space.
                           </p>
                        </li>
                     </ul>
                     <p>For example, if you specify a DOP of 3 for a <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> statement, but there is only one data file in the tablespace, then internal fragmentation may occur, as shown in <a href="types-parallelism.html#GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__I1006705">Figure 8-5</a>. The areas of free space within the internal table extents of a data file cannot be coalesced with other free space and cannot be allocated as extents.
                     </p>
                     <div class="figure" id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__I1006705">
                        <p class="titleinfigure">Figure 8-5 Unusable Free Space (Internal Fragmentation)</p><img src="img/vldbg014.gif" width="600" alt="Description of Figure 8-5 follows" title="Description of Figure 8-5 follows" longdesc="img_text/vldbg014.html"><br><a href="img_text/vldbg014.html">Description of "Figure 8-5 Unusable Free Space (Internal Fragmentation)"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__GUID-F3C2FE7B-E947-46F3-8589-F9524A562EA3">
                        <p class="notep1">See Also:</p>
                        <p><a href="../tgsql/introduction-to-sql-tuning.html#TGSQL112" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for more information about creating tables and indexes in parallel
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1420"></a><div class="props_rev_3"><a id="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" name="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400"></a><h4 id="VLDBG-GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" class="sect4">Rules for DDL Statements</h4>
                  <div>
                     <p>DDL operations can be executed in parallel under certain conditions.</p>
                     <p>DDL operations can be executed in parallel only if at least one of the following conditions is satisfied:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p></p>A <code class="codeph">PARALLEL</code> clause (declaration) is specified in the syntax. For <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>, <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> , <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code>, and <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code>, the parallel declaration is stored in the data dictionary.
                        </li>
                        <li>
                           <p>Automatic Degree of Parallelism (Auto DOP) has been enabled.</p>
                        </li>
                        <li>
                           <p>Parallel DDL is forced using the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code> statement.
                           </p>
                        </li>
                     </ul>
                     <p></p>
                     <div class="infoboxnotealso" id="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0B2B02E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="Automatic Degree of Parallelism (Auto DOP) enables Oracle Database to automatically decide if a statement should execute in parallel and what DOP it should use.">Automatic Degree of Parallelism</a> for information about Auto DOP
                              </p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).">Degree of Parallelism Rules for SQL Statements</a> for information about the rules for determining the degree of parallelism (DOP)
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1426"></a><div class="props_rev_3"><a id="GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" name="GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD"></a><h4 id="VLDBG-GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" class="sect4">Rules for CREATE TABLE AS SELECT</h4>
                  <div>
                     <p>The <code class="codeph">CREATE</code> operation of the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> statement is parallelized based on the rules for parallelizing DDL statements. 
                     </p>
                     <p>In addition, a statement level <code class="codeph">PARALLEL</code> hint specified in the <code class="codeph">SELECT</code> part of the statement can also parallelize the DDL operation. For  information about rules for parallelizing DDL statements, refer to <a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="DDL operations can be executed in parallel under certain conditions.">Rules for DDL Statements</a>.
                     </p>
                     <p>When the <code class="codeph">CREATE</code> operation of <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> is parallelized, Oracle Database also parallelizes the scan operation if possible.
                     </p>
                     <p>Even if the DDL part is not parallelized, the <code class="codeph">SELECT</code> part can be parallelized based on the rules for parallelizing queries. 
                     </p>
                     <p>Automatic Degree of Parallelism (Auto DOP) parallelizes both the DDL and the query parts of the statement.</p>
                     <p>For information about the rules for determining the degree of parallelism (DOP), refer to <a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).">Degree of Parallelism Rules for SQL Statements</a>.
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1431"></a><div class="props_rev_3"><a id="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" name="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC"></a><h3 id="VLDBG-GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" class="sect3">About Parallel DML Operations</h3>
               <div>
                  <p>Parallel DML operations are introduced in the topic.</p>
                  <p>Parallel DML (<code class="codeph">PARALLEL</code> <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">MERGE</code>) uses parallel execution mechanisms to speed up or scale up large DML operations against large database tables and indexes.
                  </p>
                  <div class="infoboxnote" id="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC__GUID-788E241A-A3DE-4037-8104-9E870FE72EE7">
                     <p class="notep1">Note:</p>
                     <p>Although DML generally includes queries, in this chapter the term DML refers only to <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">DELETE</code> operations.
                     </p>
                  </div>
                  <p>This section discusses the following parallel DML topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="types-parallelism.html#GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" title="Parallel DML is useful in a decision support system (DSS) environment where the performance and scalability of accessing large objects are important. Parallel DML complements parallel query in providing you with both querying and updating capabilities for your DSS databases.">When to Use Parallel DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" title="A DML statement can be parallelized only if you have explicitly enabled parallel DML in the session or in the SQL statement.">Enable Parallel DML Mode</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="An update, merge, or delete operation is parallelized only under certain conditions.">Rules for UPDATE, MERGE, and DELETE</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="An insert operation is executed in parallel only under certain conditions.">Rules for INSERT SELECT</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" title="To execute a DML operation in parallel, the parallel execution coordinator acquires parallel execution servers, and each parallel execution server executes a portion of the work under its own parallel process transaction.">Transaction Restrictions for Parallel DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" title="If you use rollback segments instead of Automatic Undo Management, there are some restrictions when using parallel DML.">Rollback Segments</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" title="The time required to roll back a parallel DML operation is roughly equal to the time it takes to perform the forward operation.">Recovery for Parallel DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" title="Parallel UPDATE uses the existing free space in the object, while direct-path INSERT gets new extents for the data.">Space Considerations for Parallel DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-6626C70C-876C-47A4-8C01-9B66574062D8" title="There are several restrictions that apply to parallel DM.">Restrictions on Parallel DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" title="The interactions of integrity constraints and parallel DML statements are introduced in the topic.">Data Integrity Restrictions</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" title="A DML operation is not executed in parallel if the affected tables contain enabled triggers that may get invoked as a result of the statement.">Trigger Restrictions</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-09FC59FF-9F63-453C-86D3-6D171022314A" title="The distributed transaction restrictions are discussed in this topic.">Distributed Transaction Restrictions</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" title="Several examples of distributed transaction processing are shown in this topic.">Examples of Distributed Transaction Parallelization</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" title="Set operators like UNION or UNION ALL consist of multiple queries (branches) combined to a single SQL statement.">Concurrent Execution of Union All</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1432"></a><div class="props_rev_3"><a id="GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" name="GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5"></a><h4 id="VLDBG-GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" class="sect4">When to Use Parallel DML</h4>
                  <div>
                     <p>Parallel DML is useful in a decision support system (DSS) environment where the performance and scalability of accessing large objects are important. Parallel DML complements parallel query in providing you with both querying and updating capabilities for your DSS databases.</p>
                     <p>The overhead of setting up parallelism makes parallel DML operations not feasible for short OLTP transactions. However, parallel DML operations can speed up batch jobs running in an OLTP database.</p>
                     <p>Several scenarios where parallel DML is used include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="types-parallelism.html#GUID-18B2AF09-C548-48DE-A794-86224111549F" title="In a data warehouse system, large tables must be refreshed (updated) periodically with new or modified data from the production system.">Refreshing Tables in a Data Warehouse System</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" title="In a DSS environment, many applications require complex computations that involve constructing and manipulating many large intermediate summary tables.">Creating Intermediate Summary Tables</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" title="Many DSS applications score customers periodically based on a set of criteria.">Using Scoring Tables</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" title="Historical tables describe the business transactions of an enterprise over a recent time interval.">Updating Historical Tables</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" title="Batch jobs executed in an OLTP database during off hours have a fixed time during which the jobs must complete. A good way to ensure timely job completion is to execute their operations in parallel.">Running Batch Jobs</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1433"></a><div class="props_rev_3"><a id="GUID-18B2AF09-C548-48DE-A794-86224111549F" name="GUID-18B2AF09-C548-48DE-A794-86224111549F"></a><h5 id="VLDBG-GUID-18B2AF09-C548-48DE-A794-86224111549F" class="sect5">Refreshing Tables in a Data Warehouse System</h5>
                     <div>
                        <p>In a data warehouse system, large tables must be refreshed (updated) periodically with new or modified data from the production system. </p>
                        <p>You can do this efficiently by using the <code class="codeph">MERGE</code> statement.
                        </p>
                     </div>
                  </div><a id="VLDBG1434"></a><div class="props_rev_3"><a id="GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" name="GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27"></a><h5 id="VLDBG-GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" class="sect5">Creating Intermediate Summary Tables</h5>
                     <div>
                        <p>In a DSS environment, many applications require complex computations that involve constructing and manipulating many large intermediate summary tables. </p>
                        <p>These summary tables are often temporary and frequently do not need to be logged. Parallel DML can speed up the operations against these large intermediate tables. One benefit is that you can put incremental results in the intermediate tables and perform parallel updates.</p>
                        <p>In addition, the summary tables may contain cumulative or comparative information which has to persist beyond application sessions; thus, temporary tables are not feasible. Parallel DML operations can speed up the changes to these large summary tables.</p>
                     </div>
                  </div><a id="VLDBG1435"></a><div class="props_rev_3"><a id="GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" name="GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34"></a><h5 id="VLDBG-GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" class="sect5">Using Scoring Tables</h5>
                     <div>
                        <p>Many DSS applications score customers periodically based on a set of criteria. </p>
                        <p>The scores are usually stored in large DSS tables. The score information is then used in making a decision, for example, inclusion in a mailing list.</p>
                        <p>This scoring activity queries and updates a large number of rows in the table. Parallel DML can speed up the operations against these large tables.</p>
                     </div>
                  </div><a id="VLDBG1436"></a><div class="props_rev_3"><a id="GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" name="GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58"></a><h5 id="VLDBG-GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" class="sect5">Updating Historical Tables</h5>
                     <div>
                        <p>Historical tables describe the business transactions of an enterprise over a recent time interval. </p>
                        <p>Periodically, the DBA deletes the set of oldest rows and inserts a set of new rows into the table. Parallel <code class="codeph">INSERT</code> <code class="codeph">SELECT</code> and parallel <code class="codeph">DELETE</code> operations can speed up this rollover task.
                        </p>
                        <p>Dropping a partition can also be used to delete old rows. However, the table has to be partitioned by date and with the appropriate time interval.</p>
                     </div>
                  </div><a id="VLDBG1437"></a><div class="props_rev_3"><a id="GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" name="GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3"></a><h5 id="VLDBG-GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" class="sect5">Running Batch Jobs</h5>
                     <div>
                        <p>Batch jobs executed in an OLTP database during off hours have a fixed time during which the jobs must complete. A good way to ensure timely job completion is to execute their operations in parallel. </p>
                        <p>As the workload increases, more computer resources can be added; the scaleup property of parallel operations ensures that the time constraint can be met.</p>
                     </div>
                  </div>
               </div><a id="VLDBG1438"></a><div class="props_rev_3"><a id="GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" name="GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010"></a><h4 id="VLDBG-GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" class="sect4">Enable Parallel DML Mode</h4>
                  <div>
                     <p>A DML statement can be parallelized only if you have explicitly enabled parallel DML in the session or in the SQL statement. </p>
                     <p>To enable this mode in a session, run the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE PARALLEL DML;
</pre><p>To enable parallel DML mode in a specific SQL statement, include the <code class="codeph">ENABLE_PARALLEL_DML</code> SQL hint. For example:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT /*+ ENABLE_PARALLEL_DML */ â€¦</pre><p>This mode is required because parallel DML and serial DML have different locking, transaction, and disk space requirements and parallel DML is disabled for a session by default.</p>
                     <p>When parallel DML is disabled, no DML is executed in parallel even if the <code class="codeph">PARALLEL</code> hint is used.
                     </p>
                     <p>When parallel DML is enabled in a session, all DML statements in this session are considered for parallel execution. When parallel DML is enabled in a SQL statement with the <code class="codeph">ENABLE_PARALLEL_DML</code> hint, only that specific statement is considered for parallel execution. However, even if parallel DML is enabled, the DML operation may still execute serially if there are no parallel hints or no tables with a parallel attribute or if restrictions on parallel operations are violated.
                     </p>
                     <p>The session's <code class="codeph">PARALLEL</code> <code class="codeph">DML</code> mode does not influence the parallelism of <code class="codeph">SELECT</code> statements, DDL statements, and the query portions of DML statements. If this mode is not set, the DML operation is not parallelized, but scans or join operations within the DML statement may still be parallelized.
                     </p>
                     <p>When the parallel DML mode has been enabled for a session, you can disable the mode for a specific SQL statement with the <code class="codeph">DISABLE_PARALLEL_DML</code> SQL hint.
                     </p>
                     <p>For more information, refer to <a href="types-parallelism.html#GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" title="Parallel UPDATE uses the existing free space in the object, while direct-path INSERT gets new extents for the data.">Space Considerations for Parallel DML</a> and <a href="types-parallelism.html#GUID-6626C70C-876C-47A4-8C01-9B66574062D8" title="There are several restrictions that apply to parallel DM.">Restrictions on Parallel DML</a>.
                     </p>
                  </div>
               </div><a id="VLDBG1439"></a><div class="props_rev_3"><a id="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" name="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F"></a><h4 id="VLDBG-GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" class="sect4">Rules for UPDATE, MERGE, and DELETE</h4>
                  <div>
                     <p>An update, merge, or delete operation is parallelized only under certain conditions.</p>
                     <p>An <code class="codeph">UPDATE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">DELETE</code> operation is parallelized only if at least one of the following conditions is satisfied: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The table being updated, merged, or deleted has a <code class="codeph">PARALLEL</code> declaration set by a previous <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                           </p>
                        </li>
                        <li>
                           <p>A statement level or object level <code class="codeph">PARALLEL</code> hint is specified in the DML statement.
                           </p>
                        </li>
                        <li>
                           <p>Automatic Degree of Parallelism (Auto DOP) has been enabled.</p>
                        </li>
                        <li>
                           <p>Parallel DML is forced using the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code> statement.
                           </p>
                        </li>
                     </ul>
                     <p>If the statement contains subqueries or updatable views, then they may also be executed in parallel based on the rules for parallelizing queries. The decision to parallelize the <code class="codeph">UPDATE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">DELETE</code> portion is independent of the query portion, and vice versa. Statement level <code class="codeph">PARALLEL</code> hints or Auto DOP parallelize both the DML and the query portions.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0B2B02E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="Automatic Degree of Parallelism (Auto DOP) enables Oracle Database to automatically decide if a statement should execute in parallel and what DOP it should use.">Automatic Degree of Parallelism</a> for information about Auto DOP
                              </p>
                           </li>
                           <li>
                              <p><a href="parallel-exec-tips.html#GUID-FEE610A3-F12C-47F6-9571-ADBB08096B06" title="There are certain limitations on the degree of parallelism based on the software level of Oracle Database in use.">Limitation on the Degree of Parallelism</a> for possible limitations on update, merge, or delete operations
                              </p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).">Degree of Parallelism Rules for SQL Statements</a> for information about the rules for determining the degree of parallelism (DOP)
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1444"></a><div class="props_rev_3"><a id="GUID-EB793246-B39F-444B-A2F0-7D101F016557" name="GUID-EB793246-B39F-444B-A2F0-7D101F016557"></a><h4 id="VLDBG-GUID-EB793246-B39F-444B-A2F0-7D101F016557" class="sect4">Rules for INSERT SELECT</h4>
                  <div>
                     <p>An insert operation is executed in parallel only under certain conditions.</p>
                     <p>An <code class="codeph">INSERT</code> operation is executed in parallel only if at least one of the following conditions is satisfied:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The table being inserted into (the reference object) has a <code class="codeph">PARALLEL</code> declaration set by a previous <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                           </p>
                        </li>
                        <li>
                           <p>A statement level or object level <code class="codeph">PARALLEL</code> hint is specified after the <code class="codeph">INSERT</code> in the DML statement.
                           </p>
                        </li>
                        <li>
                           <p>Automatic Degree of Parallelism (Auto DOP) has been enabled. </p>
                        </li>
                        <li>
                           <p>Parallel DML is forced using the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code> statement.
                           </p>
                        </li>
                     </ul>
                     <p>The decision to parallelize the <code class="codeph">INSERT</code> operation is independent of the <code class="codeph">SELECT</code> operation, and vice versa. The <code class="codeph">SELECT</code> operation can be parallelized based on the rules for parallelizing queries. Statement level <code class="codeph">PARALLEL</code> hints or Auto DOP parallelize both the <code class="codeph">INSERT</code> and the <code class="codeph">SELECT</code> operations.
                     </p>
                     <div class="infoboxnotealso" id="GUID-EB793246-B39F-444B-A2F0-7D101F016557__ORACLEDATABASESQLLANGUAGEREFERENCEF-F22CAB96">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="Automatic Degree of Parallelism (Auto DOP) enables Oracle Database to automatically decide if a statement should execute in parallel and what DOP it should use.">Automatic Degree of Parallelism</a> for information about Auto DOP
                              </p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).">Degree of Parallelism Rules for SQL Statements</a> for information about the rules for determining the degree of parallelism (DOP)
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL statement
                              </p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div><a id="VLDBG1448"></a><div class="props_rev_3"><a id="GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" name="GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859"></a><h4 id="VLDBG-GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" class="sect4">Transaction Restrictions for Parallel DML</h4>
                  <div>
                     <p>To execute a DML operation in parallel, the parallel execution coordinator acquires parallel execution servers, and each parallel execution server executes a portion of the work under its own parallel process transaction.</p>
                     <p></p>
                     <p>Note the following conditions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Each parallel execution server creates a different parallel process transaction.</p>
                        </li>
                        <li>
                           <p>If you use rollback segments instead of Automatic Undo Management, you may want to reduce contention on the rollback segments by limiting the number of parallel process transactions residing in the same rollback segment. Refer to <a href="../sqlrf/ROLLBACK.html#SQLRF01610" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information.
                           </p>
                        </li>
                     </ul>
                     <p>The coordinator also has its own coordinator transaction, which can have its own rollback segment. To ensure user-level transactional atomicity, the coordinator uses a two-phase commit protocol to commit the changes performed by the parallel process transactions.</p>
                     <p>A session that is enabled for parallel DML may put transactions in the session in a special mode: If any DML statement in a transaction modifies a table in parallel, no subsequent serial or parallel query or DML statement can access the same table again in that transaction. The results of parallel modifications cannot be seen during the transaction.</p>
                     <p>Serial or parallel statements that attempt to access a table that has been modified in parallel within the same transaction are rejected with an error message. </p>
                     <p>If a PL/SQL procedure or block is executed in a parallel DML-enabled session, then this rule applies to statements in the procedure or block.</p>
                  </div>
               </div><a id="VLDBG1449"></a><div class="props_rev_3"><a id="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" name="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF"></a><h4 id="VLDBG-GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" class="sect4">Rollback Segments</h4>
                  <div>
                     <p>If you use rollback segments instead of Automatic Undo Management, there are some restrictions when using parallel DML.</p>
                     <div class="infoboxnotealso" id="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF__GUID-867C5D01-292C-40EC-A677-B0B1CEF1EE4F">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/ROLLBACK.html#SQLRF01610" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about restrictions for parallel DML and rollback segments
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1450"></a><div class="props_rev_3"><a id="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" name="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912"></a><h4 id="VLDBG-GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" class="sect4">Recovery for Parallel DML</h4>
                  <div>
                     <p>The time required to roll back a parallel DML operation is roughly equal to the time it takes to perform the forward operation.</p>
                     <p>Oracle Database supports parallel rollback after transaction and process failures, and after instance and system failures. Oracle Database can parallelize both the rolling forward stage and the rolling back stage of transaction recovery.</p>
                     <div class="infoboxnotealso" id="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912__GUID-A3F3F1D0-E67D-47AB-BC43-B379F773B8FE">
                        <p class="notep1">See Also:</p>
                        <p><a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span><cite>Oracle Database Backup and Recovery Userâ€™s Guide</cite></span></a> for details about parallel rollback
                        </p>
                     </div>
                  </div><a id="VLDBG1451"></a><div class="props_rev_3"><a id="GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA" name="GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA"></a><h5 id="VLDBG-GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA" class="sect5">Transaction Recovery for User-Issued Rollback</h5>
                     <div>
                        <p>A user-issued rollback in a transaction failure due to statement error is performed in parallel by the parallel execution coordinator and the parallel execution servers. </p>
                        <p>The rollback takes approximately the same amount of time as the forward transaction.</p>
                     </div>
                  </div><a id="VLDBG1452"></a><div class="props_rev_3"><a id="GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87" name="GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87"></a><h5 id="VLDBG-GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87" class="sect5">Process Recovery</h5>
                     <div>
                        <p>Recovery from the failure of a parallel execution coordinator or parallel execution server is performed by the PMON process. </p>
                        <p>If a parallel execution server or a parallel execution coordinator fails, then PMON rolls back the work from that process and all other processes in the transaction roll back their changes.</p>
                     </div>
                  </div><a id="VLDBG1453"></a><div class="props_rev_3"><a id="GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24" name="GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24"></a><h5 id="VLDBG-GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24" class="sect5">System Recovery</h5>
                     <div>
                        <p>Recovery from a system failure requires a new startup.</p>
                        <p>Recovery is performed by the SMON process and any recovery server processes spawned by SMON. Parallel DML statements may be recovered using parallel rollback. If the initialization parameter <code class="codeph">COMPATIBLE</code> is set to 8.1.3 or greater, Fast-Start On-Demand Rollback enables terminated transactions to be recovered, on demand, one block at a time.
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1454"></a><div class="props_rev_3"><a id="GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" name="GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B"></a><h4 id="VLDBG-GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" class="sect4">Space Considerations for Parallel DML</h4>
                  <div>
                     <p>Parallel <code class="codeph">UPDATE</code> uses the existing free space in the object, while direct-path <code class="codeph">INSERT</code> gets new extents for the data.
                     </p>
                     <p>Space usage characteristics may be different in parallel than serial execution because multiple concurrent child transactions modify the object.</p>
                  </div>
               </div><a id="VLDBG1455"></a><div class="props_rev_3"><a id="GUID-6626C70C-876C-47A4-8C01-9B66574062D8" name="GUID-6626C70C-876C-47A4-8C01-9B66574062D8"></a><h4 id="VLDBG-GUID-6626C70C-876C-47A4-8C01-9B66574062D8" class="sect4">Restrictions on Parallel DML</h4>
                  <div>
                     <p>There are several restrictions that apply to parallel DM.</p>
                     <p>The following restrictions apply to parallel DML (including direct-path <code class="codeph">INSERT</code>):
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Intra-partition parallelism for <code class="codeph">UPDATE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">DELETE</code> operations require that the <code class="codeph">COMPATIBLE</code> initialization parameter be set to 9.2 or greater.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">INSERT</code> <code class="codeph">VALUES</code> statement is never executed in parallel.
                           </p>
                        </li>
                        <li>
                           <p>A transaction can contain multiple parallel DML statements that modify different tables, but after a parallel DML statement modifies a table, no subsequent serial or parallel statement (DML or query) can access the same table again in that transaction.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>This restriction also exists after a serial direct-path <code class="codeph">INSERT</code> statement: no subsequent SQL statement (DML or query) can access the modified table during that transaction.
                                 </p>
                              </li>
                              <li>
                                 <p>Queries that access the same table are allowed before a parallel DML or direct-path <code class="codeph">INSERT</code> statement, but not after.
                                 </p>
                              </li>
                              <li>
                                 <p>Any serial or parallel statements attempting to access a table that has been modified by a parallel <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, or <code class="codeph">MERGE</code>, or a direct-path <code class="codeph">INSERT</code> during the same transaction are rejected with an error message.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Parallel DML operations cannot be done on tables with triggers.</p>
                        </li>
                        <li>
                           <p>Replication functionality is not supported for parallel DML.</p>
                        </li>
                        <li>
                           <p>Parallel DML cannot occur in the presence of certain constraints: self-referential integrity, delete cascade, and deferred integrity. In addition, for direct-path <code class="codeph">INSERT</code>, there is no support for any referential integrity.
                           </p>
                        </li>
                        <li>
                           <p>Parallel DML can be done on tables with object columns provided the object columns are not accessed.</p>
                        </li>
                        <li>
                           <p>Parallel DML can be done on tables with <code class="codeph">LOB</code> columns provided the table is partitioned. However, intra-partition parallelism is not supported.
                           </p>
                           <p>For non-partitioned tables with LOB columns, parallel <code class="codeph">INSERT</code> operations are supported provided that the LOB columns are declared as SecureFiles LOBs. Parallel <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">MERGE</code> operations on such tables are not supported.
                           </p>
                        </li>
                        <li>
                           <p>A DML operation cannot be executed in parallel if it is in a distributed transaction or if the DML or the query operation is on a remote object.</p>
                        </li>
                        <li>
                           <p>Clustered tables are not supported.</p>
                        </li>
                        <li>
                           <p>Parallel <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">MERGE</code> operations are not supported for temporary tables.
                           </p>
                        </li>
                        <li>
                           <p>Parallel DML is not supported on a table with bitmap indexes if the table is not partitioned.</p>
                        </li>
                     </ul>
                     <p>Violations of these restrictions cause the statement to execute serially without warnings or error messages (except for the restriction on statements accessing the same table in a transaction, which can cause error messages).</p>
                  </div><a id="VLDBG1456"></a><div class="props_rev_3"><a id="GUID-3ADF9B57-757A-47ED-B0DE-401977671C23" name="GUID-3ADF9B57-757A-47ED-B0DE-401977671C23"></a><h5 id="VLDBG-GUID-3ADF9B57-757A-47ED-B0DE-401977671C23" class="sect5">Partitioning Key Restriction</h5>
                     <div>
                        <p>You can only update the partitioning key of a partitioned table to a new value if the update does not cause the row to move to a new partition. </p>
                        <p>The update is possible if the table is defined with the row movement clause enabled.</p>
                     </div>
                  </div><a id="VLDBG1457"></a><div class="props_rev_3"><a id="GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D" name="GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D"></a><h5 id="VLDBG-GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D" class="sect5">Function Restrictions</h5>
                     <div>
                        <p>The function restrictions for parallel DML are the same as those for parallel DDL and parallel query. </p>
                        <p>See <a href="types-parallelism.html#GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" title="SQL statements can contain user-defined functions written in PL/SQL, in Java, or as external procedures in C that can appear as part of the SELECT list, SET clause, or WHERE clause.">About Parallel Execution of Functions</a> for more information.
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1458"></a><div class="props_rev_3"><a id="GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" name="GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3"></a><h4 id="VLDBG-GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" class="sect4">Data Integrity Restrictions</h4>
                  <div>
                     <p>The interactions of integrity constraints and parallel DML statements are introduced in the topic.</p>
                     <p>This section contains following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="types-parallelism.html#GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" title="The integrity constraints for NOT NULL and CHECK are discussed in this topic.">NOT NULL and CHECK</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-8B778C98-1A66-474C-88BB-778B260FE791" title="The integrity constraints for UNIQUE and PRIMARY KEY are discussed in this topic.">UNIQUE and PRIMARY KEY</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" title="Restrictions for referential integrity occur whenever a DML operation on one table could cause a recursive DML operation on another table.">FOREIGN KEY (Referential Integrity)</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" title="The delete cascade data integrity restrictions are discussed in this topic.">Delete Cascade</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" title="DML on tables with self-referential integrity constraints is not parallelized if the referenced keys (primary keys) are involved.">Self-Referential Integrity</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" title="The deferrable integrity constraints are discussed in this topic.">Deferrable Integrity Constraints</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1459"></a><div class="props_rev_3"><a id="GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" name="GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06"></a><h5 id="VLDBG-GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" class="sect5">NOT NULL and CHECK</h5>
                     <div>
                        <p>The integrity constraints for <code class="codeph">NOT</code> <code class="codeph">NULL</code> and <code class="codeph">CHECK</code> are discussed in this topic.
                        </p>
                        <p><code class="codeph">NOT</code> <code class="codeph">NULL</code> and <code class="codeph">CHECK</code> integrity constraints are allowed. They are not a problem for parallel DML because they are enforced on the column and row level, respectively.
                        </p>
                     </div>
                  </div><a id="VLDBG1460"></a><div class="props_rev_3"><a id="GUID-8B778C98-1A66-474C-88BB-778B260FE791" name="GUID-8B778C98-1A66-474C-88BB-778B260FE791"></a><h5 id="VLDBG-GUID-8B778C98-1A66-474C-88BB-778B260FE791" class="sect5">UNIQUE and PRIMARY KEY</h5>
                     <div>
                        <p>The integrity constraints for <code class="codeph">UNIQUE</code> and <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> are discussed in this topic.
                        </p>
                        <p><code class="codeph">UNIQUE</code> and <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> integrity constraints are allowed.
                        </p>
                     </div>
                  </div><a id="VLDBG1462"></a><a id="VLDBG1461"></a><div class="props_rev_3"><a id="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" name="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F"></a><h5 id="VLDBG-GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" class="sect5">FOREIGN KEY (Referential Integrity)</h5>
                     <div>
                        <p>Restrictions for referential integrity occur whenever a DML operation on one table could cause a recursive DML operation on another table. </p>
                        <p>These restrictions also apply when, to perform an integrity check, it is necessary to see simultaneously all changes made to the object being modified.</p>
                        <p><a href="types-parallelism.html#GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F__G1016143" title="Referential Integrity Restrictions">Table 8-1</a> lists all of the operations that are possible on tables that are involved in referential integrity constraints.
                        </p>
                        <div class="tblformal" id="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F__G1016143">
                           <p class="titleintable">Table 8-1 Referential Integrity Restrictions</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Referential Integrity Restrictions" summary="Referential Integrity Restrictions" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d53328e5015">DML Statement</th>
                                    <th align="left" valign="bottom" width="25%" id="d53328e5018">Issued on Parent</th>
                                    <th align="left" valign="bottom" width="23%" id="d53328e5021">Issued on Child</th>
                                    <th align="left" valign="bottom" width="28%" id="d53328e5024">Self-Referential</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5029" headers="d53328e5015 ">
                                       <p><code class="codeph">INSERT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5029 d53328e5018 ">
                                       <p>(Not applicable) </p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5029 d53328e5021 ">
                                       <p>Not parallelized </p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5029 d53328e5024 ">
                                       <p>Not parallelized</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5043" headers="d53328e5015 ">
                                       <p><code class="codeph">MERGE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5043 d53328e5018 ">
                                       <p>(Not applicable)</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5043 d53328e5021 ">
                                       <p>Not parallelized</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5043 d53328e5024 ">
                                       <p>Not parallelized</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5057" headers="d53328e5015 ">
                                       <p><code class="codeph">UPDATE</code> No Action
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5057 d53328e5018 ">
                                       <p>Supported </p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5057 d53328e5021 ">
                                       <p>Supported</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5057 d53328e5024 ">
                                       <p>Not parallelized</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5072" headers="d53328e5015 ">
                                       <p><code class="codeph">DELETE</code> No Action
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5072 d53328e5018 ">
                                       <p>Supported</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5072 d53328e5021 ">
                                       <p>Supported</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5072 d53328e5024 ">
                                       <p>Not parallelized</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5087" headers="d53328e5015 ">
                                       <p><code class="codeph">DELETE</code> Cascade
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5087 d53328e5018 ">
                                       <p>Not parallelized</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5087 d53328e5021 ">
                                       <p>(Not applicable) </p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5087 d53328e5024 ">
                                       <p>Not parallelized</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="VLDBG1463"></a><div class="props_rev_3"><a id="GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" name="GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F"></a><h5 id="VLDBG-GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" class="sect5">Delete Cascade</h5>
                     <div>
                        <p>The delete cascade data integrity restrictions are discussed in this topic.</p>
                        <p>Deletion on tables having a foreign key with delete cascade is not parallelized because parallel execution servers attempt to delete rows from multiple partitions (parent and child tables).</p>
                     </div>
                  </div><a id="VLDBG1464"></a><div class="props_rev_3"><a id="GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" name="GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986"></a><h5 id="VLDBG-GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" class="sect5">Self-Referential Integrity</h5>
                     <div>
                        <p>DML on tables with self-referential integrity constraints is not parallelized if the referenced keys (primary keys) are involved. </p>
                        <p>For DML on all other columns, parallelism is possible.</p>
                     </div>
                  </div><a id="VLDBG1465"></a><div class="props_rev_3"><a id="GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" name="GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC"></a><h5 id="VLDBG-GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" class="sect5">Deferrable Integrity Constraints</h5>
                     <div>
                        <p>The deferrable integrity constraints are discussed in this topic.</p>
                        <p>If any deferrable constraints apply to the table being operated on, the DML operation is not executed in parallel.</p>
                     </div>
                  </div>
               </div><a id="VLDBG1466"></a><div class="props_rev_3"><a id="GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" name="GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831"></a><h4 id="VLDBG-GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" class="sect4">Trigger Restrictions</h4>
                  <div>
                     <p>A DML operation is not executed in parallel if the affected tables contain enabled triggers that may get invoked as a result of the statement. </p>
                     <p>This implies that DML statements on tables that are being replicated are not parallelized.</p>
                     <p>Relevant triggers must be disabled to parallelize DML on the table. If you enable or disable triggers, then the dependent shared cursors are invalidated.</p>
                  </div>
               </div><a id="VLDBG1467"></a><div class="props_rev_3"><a id="GUID-09FC59FF-9F63-453C-86D3-6D171022314A" name="GUID-09FC59FF-9F63-453C-86D3-6D171022314A"></a><h4 id="VLDBG-GUID-09FC59FF-9F63-453C-86D3-6D171022314A" class="sect4">Distributed Transaction Restrictions</h4>
                  <div>
                     <p>The distributed transaction restrictions are discussed in this topic.</p>
                     <p>A DML operation cannot be executed in parallel if it is in a distributed transaction or if the DML or the query operation is on a remote object.</p>
                  </div>
               </div><a id="VLDBG1468"></a><div class="props_rev_3"><a id="GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" name="GUID-F3751631-4858-43FF-ACBB-B42307A43F0D"></a><h4 id="VLDBG-GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" class="sect4">Examples of Distributed Transaction Parallelization</h4>
                  <div>
                     <p>Several examples of distributed transaction processing are shown in this topic.</p>
                     <div class="section">
                        <p>In the first example, the DML statement queries a remote object. The DML operation is executed serially without notification because it references a remote object.</p><pre class="oac_no_warn" dir="ltr">INSERT /*+ APPEND PARALLEL (t3,2) */ INTO t3 SELECT * FROM t4@dblink;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In the next example, the DML operation is applied to a remote object. The <code class="codeph">DELETE</code> operation is not parallelized because it references a remote object.
                        </p><pre class="oac_no_warn" dir="ltr">DELETE /*+ PARALLEL (t1, 2) */ FROM t1@dblink;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In the last example, the DML operation is in a distributed transaction. The <code class="codeph">DELETE</code> operation is not executed in parallel because it occurs in a distributed transaction (which is started by the <code class="codeph">SELECT</code> statement).
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM t1@dblink; 
 DELETE /*+ PARALLEL (t2,2) */ FROM t2;
 COMMIT; </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14182"></a><a id="VLDBG14131"></a><div class="props_rev_3"><a id="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" name="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433"></a><h4 id="VLDBG-GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" class="sect4">Concurrent Execution of Union All</h4>
                  <div>
                     <p>Set operators like <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> consist of multiple queries (branches) combined to a single SQL statement.
                     </p>
                     <p>Traditionally, set operators are processed in a sequential manner. Individual branches can be processed in serial or parallel, but only one branch at a time, one branch after another. While this approach satisfies many use cases, there are situations where the processing of multiple branches of a <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statement should occur concurrently. The most typical situation is when several or all branches are remote SQL statements. In this situation, concurrent processing on all participating remote systems is desired to speed up the overall processing time without increasing the workload of any participating system.
                     </p>
                     <p>The default behavior of concurrent execution for <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statements is controlled by the setting of the <code class="codeph">OPTIMIZER_FEATURES_ENABLE</code> initialization parameter. When set to <code class="codeph">12.1</code>, concurrent execution is enabled by default. Any statement where at least one branch of the statement is local and is considered being processed in parallel, the entire <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statement is also processed concurrently. The system calculates the DOP for every individual local branch of the statement and chooses the highest DOP for the execution of the entire <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statement. The system then works concurrently on as many branches as possible, using the chosen DOP both for parallelization of the branches that are processed in parallel, and as concurrent workers on serial and remote statements. 
                     </p>
                     <p>When the <code class="codeph">OPTIMIZER_FEATURES_ENABLE</code> initialization parameter is set to a value less than <code class="codeph">12.1</code>, concurrent execution of <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statements must be enabled explicitly by using the <code class="codeph">PQ_CONCURRENT_UNION</code> hint.
                     </p>
                     <p>However, unlike the sequential processing of one branch after another, the concurrent processing does not guarantee an ordered return of the results of the individual branches. If an ordered return of one branch after another is required, then you either must disable concurrent processing using the <code class="codeph">NO_PQ_CONCURRENT_UNION</code> hint or you must augment the SQL statement to uniquely identify individual branches of the statement and to sort on this specified identifier.
                     </p>
                     <p><code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statements that only consist of serial or remote branches are not processed concurrently unless specifically using the <code class="codeph">PQ_CONCURRENT_UNION</code> hint. The DOP of this SQL statement is at most the number of serial and remote inputs. 
                     </p>
                     <p>Whether or not concurrent processing of a <code class="codeph">UNION</code> or <code class="codeph">UNION</code> <code class="codeph">ALL</code> statement occurs can be easily identified with the execution plan of the SQL statements. When executed in parallel, the execution of serial and remote branches is managed with a row source identifiable as <code class="codeph">PX</code> <code class="codeph">SELECTOR</code>. Statements that are not processed concurrently show the query coordinator (<code class="codeph">QC</code>) as coordinator of serial and remote branches.
                     </p>
                     <p>In <a href="types-parallelism.html#GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433__BEIEHGJD">Example 8-4</a>, the SQL statement consists of local and remote branches. The SQL statement loads information about gold and platinum customers from the local database, and the information about customers from three major cities from remote databases. Because the local select statements occur in parallel, this processing is automatically performed in parallel. Each serial branch is executed by only one parallel execution server process. Because each parallel execution server can execute one serial branch, they are executed concurrently.
                     </p>
                     <div class="example" id="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433__BEIEHGJD">
                        <p class="titleinexample">Example 8-4 Explain Plan for UNION ALL</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXPLAIN PLAN FOR INSERT INTO all_customer 
  SELECT * FROM GOLD_customer UNION ALL 
  SELECT * FROM PLATINUM_customer UNION ALL 
  SELECT * FROM SF_customer@san_francisco UNION ALL 
  SELECT * FROM LA_customer@los_angeles UNION ALL 
  SELECT * FROM LV_customer@las_vegas;
-------------------------------------------------------------------------------
| Id | Operation              | Name          | TQ/Ins |IN-OUT | PQ Distrib|
-------------------------------------------------------------------------------
| 0 | INSERT STATEMENT         |              |        |       |           |
| 1 |  LOAD TABLE CONVENTIONAL | ALL_CUSTOMER |        |       |           |
| 2 |   PX COORDINATOR         |              |        |       |           |
| 3 |    PX SEND QC (RANDOM)   | :TQ10003     |        | P-&gt;S  | QC (RAND) |
| 4 |     UNION-ALL            |              |        | PCWP  |           |
| 5 |      PX BLOCK ITERATOR   |              |        | PCWC  |           |
| 6 |       TABLE ACCESS FULL  | GOLD_CUSTOMER|        | PCWP  |           |
| 7 |      PX BLOCK ITERATOR   |              |        | PCWC  |           |
| 8 |       TABLE ACCESS FULL  | PLATINUM_CUST|        | PCWP  |           |
| 9 |      PX SELECTOR         |              |        | PCWP  |           |
|10 |       REMOTE             | SF_CUSTOMER  |        | PCWP  |           |
|11 |      PX SELECTOR         |              |        | PCWP  |           |
|12 |       REMOTE             | LA_CUSTOMER  |        | PCWP  |           |
|13 |      PX SELECTOR         |              |        | PCWP  |           |
|14 |       REMOTE             | LV_CUSTOMER  |        | PCWP  |           |
-------------------------------------------------------------------------------
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="VLDBG1472"></a><div class="props_rev_3"><a id="GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" name="GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439"></a><h3 id="VLDBG-GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" class="sect3">About Parallel Execution of Functions</h3>
               <div>
                  <p>SQL statements can contain user-defined functions written in PL/SQL, in Java, or as external procedures in C that can appear as part of the <code class="codeph">SELECT</code> list, <code class="codeph">SET</code> clause, or <code class="codeph">WHERE</code> clause. 
                  </p>
                  <p>When the SQL statement is parallelized, these functions are executed on a per-row basis by the parallel execution server process. Any PL/SQL package variables or Java static attributes used by the function are entirely private to each individual parallel execution process and are newly initialized when each row is processed, rather than being copied from the original session. Because of this process, not all functions generate correct results if executed in parallel.</p>
                  <p>User-written table functions can appear in the statement's <code class="codeph">FROM</code> list. These functions act like source tables in that they produce row output. Table functions are initialized once during the statement at the start of each parallel execution process. All variables are entirely private to the parallel execution process.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="types-parallelism.html#GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" title="User functions can be executed in parallel in a SQL query statement, or a subquery in a DML or DDL statement.">Functions in Parallel Queries</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" title="A user function can be executed in a parallel DML or DDL statement under certain conditions.">Functions in Parallel DML and DDL Statements</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1473"></a><div class="props_rev_3"><a id="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" name="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C"></a><h4 id="VLDBG-GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" class="sect4">Functions in Parallel Queries</h4>
                  <div>
                     <p>User functions can be executed in parallel in a SQL query statement, or a subquery in a DML or DDL statement.</p>
                     <p>In a <code class="codeph">SELECT</code> statement or a subquery in a DML or DDL statement, a user-written function may be executed in parallel in any of the following cases:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If it has been declared with the <code class="codeph">PARALLEL_ENABLE</code> keyword
                           </p>
                        </li>
                        <li>
                           <p>If it is declared in a package or type and has a <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> clause that indicates all of <code class="codeph">WNDS</code>, <code class="codeph">RNPS</code>, and <code class="codeph">WNPS</code></p>
                        </li>
                        <li>
                           <p>If it is declared with <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> and the system can analyze the body of the PL/SQL code and determine that the code neither writes to the database nor reads or modifies package variables
                           </p>
                        </li>
                     </ul>
                     <p>Other parts of a query or subquery can sometimes execute in parallel even if a given function execution must remain serial.</p>
                     <div class="infoboxnotealso" id="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C__ORACLEDATABASEDEVELOPMENTGUIDEFORIN-A68A5A66">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../adfns/coding-subprograms-and-packages.html#ADFNS388" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for information about the <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> clause
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-FUNCTION.html#SQLRF01208" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1474"></a><div class="props_rev_3"><a id="GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" name="GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D"></a><h4 id="VLDBG-GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" class="sect4">Functions in Parallel DML and DDL Statements</h4>
                  <div>
                     <p>A user function can be executed in a parallel DML or DDL statement under certain conditions.</p>
                     <p>In a parallel DML or DDL statement, as in a parallel query, a user-written function may be executed in parallel in any of the following cases:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If it has been declared with the <code class="codeph">PARALLEL_ENABLE</code> keyword
                           </p>
                        </li>
                        <li>
                           <p>If it is declared in a package or type and has a <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> clause that indicates all of <code class="codeph">RNDS</code>, <code class="codeph">WNDS</code>, <code class="codeph">RNPS</code>, and <code class="codeph">WNPS</code></p>
                        </li>
                        <li>
                           <p>If it is declared with the <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement and the system can analyze the body of the PL/SQL code and determine that the code neither reads nor writes to the database or reads or modifies package variables
                           </p>
                        </li>
                     </ul>
                     <p>For a parallel DML statement, any function call that cannot be executed in parallel causes the entire DML statement to be executed serially. For an <code class="codeph">INSERT</code> <code class="codeph">SELECT</code> or <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> statement, function calls in the query portion are parallelized according to the parallel query rules described in this section. The query may be parallelized even if the remainder of the statement must execute serially, or vice versa.
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1475"></a><div class="props_rev_3"><a id="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" name="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85"></a><h3 id="VLDBG-GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" class="sect3">About Other Types of Parallelism</h3>
               <div>
                  <p>An Oracle Database can use parallelism in multiple types of operations.</p>
                  <p>In addition to parallel SQL execution, Oracle Database can use parallelism for the following types of operations:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Parallel recovery</p>
                     </li>
                     <li>
                        <p>Parallel propagation (replication)</p>
                     </li>
                     <li>
                        <p>Parallel load (external tables and the SQL*Loader utility)</p>
                     </li>
                  </ul>
                  <p>Like parallel SQL, parallel recovery, propagation, and external table loads are performed by a parallel execution coordinator and multiple parallel execution servers. Parallel load using SQL*Loader, however, uses a different mechanism.</p>
                  <p>The behavior of the parallel execution coordinator and parallel execution servers may differ, depending on what kind of operation they perform (SQL, recovery, or propagation). For example, if all parallel execution servers in the pool are occupied and the maximum number of parallel execution servers has been started:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>In parallel SQL and external table loads, the parallel execution coordinator switches to serial processing. </p>
                     </li>
                     <li>
                        <p>In parallel propagation, the parallel execution coordinator returns an error.</p>
                     </li>
                  </ul>
                  <p>For a given session, the parallel execution coordinator coordinates only one kind of operation. A parallel execution coordinator cannot coordinate, for example, parallel SQL and parallel recovery or propagation at the same time.</p>
                  <div class="infoboxnotealso" id="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85__GUID-0FA7207A-EBDA-4EBC-B548-9F60A746D8B0">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sutil/oracle-sql-loader.html#SUTIL3311" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for information about parallel load and SQL*Loader
                           </p>
                        </li>
                        <li>
                           <p><a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span><cite>Oracle Database Backup and Recovery Userâ€™s Guide</cite></span></a> for information about parallel media recovery
                           </p>
                        </li>
                        <li>
                           <p><a href="../tgdba/performance-tuning-overview.html#TGDBA025" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> for information about parallel instance recovery
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="VLDBG1477"></a><a id="VLDBG1476"></a><div class="props_rev_3"><a id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" name="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4"></a><h3 id="VLDBG-GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" class="sect3">Degree of Parallelism Rules for SQL Statements</h3>
               <div>
                  <p>The parallelization decision for SQL statements has two components: the decision to parallelize and the degree of parallelism (DOP).</p>
                  <p>These components are determined differently for queries, DDL operations, and DML operations.</p>
                  <p>The decision to parallelize is discussed in the following sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="A SQL query can only be executed in parallel under certain conditions.">Rules for Parallelizing Queries</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="DDL operations can be executed in parallel under certain conditions.">Rules for DDL Statements</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="The CREATE operation of the CREATE TABLE AS SELECT statement is parallelized based on the rules for parallelizing DDL statements.">Rules for CREATE TABLE AS SELECT</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="An update, merge, or delete operation is parallelized only under certain conditions.">Rules for UPDATE, MERGE, and DELETE</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="An insert operation is executed in parallel only under certain conditions.">Rules for INSERT SELECT</a></p>
                     </li>
                  </ul>
                  <p>The degree of parallelism for various types of SQL statements can be determined by statement or object level <code class="codeph">PARALLEL</code> hints, <code class="codeph">PARALLEL</code> clauses, <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> statements, automatic degree of parallelism (Auto DOP), or table or index <code class="codeph">PARALLEL</code> declarations. When more than one of these methods are used, the Oracle Database uses precedence rules to determine which method is used to determine the DOP. 
                  </p>
                  <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__CACCAGCH" title="Parallelization Priority Order">Table 8-2</a> shows the precedence rules for determining the degree of parallelism (DOP) for various types of SQL statements. In the table, the smaller priority number indicates that the method takes precedence over higher numbers. For example, priority (1) takes precedence over priority (2), priority (3), priority (4), and priority (5).
                  </p>
                  <div class="tblformalwide" id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__CACCAGCH">
                     <p class="titleintable">Table 8-2 Parallelization Priority Order</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Parallelization Priority Order" summary="Parallelization Priority Order" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d53328e6538">Parallel Operation</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6541">Statement Level PARALLEL Hint</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6544">Object Level PARALLEL Hint</th>
                              <th align="left" valign="bottom" width="11%" id="d53328e6547">PARALLEL Clause</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6550">ALTER SESSION</th>
                              <th align="left" valign="bottom" width="14%" id="d53328e6553">Auto DOP</th>
                              <th align="left" valign="bottom" width="14%" id="d53328e6556">Parallel Declaration</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6561" headers="d53328e6538 ">
                                 <p>Parallel query table/index scan. For more information, refer to <a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="A SQL query can only be executed in parallel under certain conditions.">Rules for Parallelizing Queries</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6541 ">
                                 <p>Priority (1) </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6544 ">
                                 <p>Priority (2)</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6561 d53328e6547 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6550 ">
                                 <p>Priority (3) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6561 d53328e6553 ">
                                 <p>Priority (4)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6561 d53328e6556 ">
                                 <p>Priority (5)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6597" headers="d53328e6538 ">
                                 <p>Parallel <code class="codeph">UPDATE</code> ,<code class="codeph">DELETE</code>, or <code class="codeph">MERGE</code>. For more information, refer to <a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="An update, merge, or delete operation is parallelized only under certain conditions.">Rules for UPDATE, MERGE, and DELETE</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6541 ">
                                 <p>Priority (1)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6544 ">
                                 <p>Priority (2)</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6597 d53328e6547 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6550 ">
                                 <p>Priority (3) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6597 d53328e6553 ">
                                 <p>Priority (4)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6597 d53328e6556 ">
                                 <p>Priority (5) of the target table</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6642" headers="d53328e6538 ">
                                 <p><code class="codeph">INSERT</code><span class="bold"> </span>operation of parallel <code class="codeph">INSERT</code>... <code class="codeph">SELECT</code> . For more information, refer to <a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="An insert operation is executed in parallel only under certain conditions.">Rules for INSERT SELECT</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6541 ">
                                 <p>Priority (1)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6544 ">
                                 <p>Priority (2)</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6642 d53328e6547 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6550 ">
                                 <p>Priority (3) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6642 d53328e6553 ">
                                 <p>Priority (4)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6642 d53328e6556 ">
                                 <p>Priority (5) of table being inserted into</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6688" headers="d53328e6538 ">
                                 <p><code class="codeph">SELECT</code><span class="bold"> </span>operation of <code class="codeph">INSERT</code> <code class="codeph">SELECT</code> when <code class="codeph">INSERT</code> is serial. For more information, refer to <a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="An insert operation is executed in parallel only under certain conditions.">Rules for INSERT SELECT</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6541 ">
                                 <p>Priority (1)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6544 ">
                                 <p>Priority (2)</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6688 d53328e6547 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6550 ">
                                 <p>Priority (3) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6688 d53328e6553 ">
                                 <p>Priority (4)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6688 d53328e6556 ">
                                 <p>Priority (5) of table being selected from</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6737" headers="d53328e6538 ">
                                 <p><code class="codeph">CREATE</code><span class="bold"> </span>operation of parallel <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> (partitioned or nonpartitioned table). For more information, refer to <a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="The CREATE operation of the CREATE TABLE AS SELECT statement is parallelized based on the rules for parallelizing DDL statements.">Rules for CREATE TABLE AS SELECT</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6541 ">
                                 <p>Priority (1)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6544 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6737 d53328e6547 ">
                                 <p>Priority (4)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6550 ">
                                 <p>Priority (2) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6737 d53328e6553 ">
                                 <p>Priority (3)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6737 d53328e6556 ">
                                 <p>N/A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6805" headers="d53328e6538 ">
                                 <p><code class="codeph">SELECT</code><span class="bold"> </span>operation of <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> when <code class="codeph">CREATE</code> is serial. For more information, refer to <a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="The CREATE operation of the CREATE TABLE AS SELECT statement is parallelized based on the rules for parallelizing DDL statements.">Rules for CREATE TABLE AS SELECT</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6541 ">
                                 <p>Priority (1)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6544 ">
                                 <p>Priority (2)</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6805 d53328e6547 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6550 ">
                                 <p>Priority (3) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6805 d53328e6553 ">
                                 <p>Priority (4)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6805 d53328e6556 ">
                                 <p>Priority (5)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6876" headers="d53328e6538 ">
                                 <p>Other DDL operations. For more information, refer to <a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="DDL operations can be executed in parallel under certain conditions.">Rules for DDL Statements</a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6541 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6544 ">
                                 <p>N/A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6876 d53328e6547 ">
                                 <p>Priority (3)</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6550 ">
                                 <p>Priority (1) <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6876 d53328e6553 ">
                                 <p>Priority (2)</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6876 d53328e6556 ">
                                 <p>N/A</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__GUID-69C88072-93F5-454F-9AB7-5D560468BC36">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sqlrf/Comments.html#SQLRF50801" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">PARALLEL</code> hint
                           </p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/parallel_clause.html#SQLRF20024" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">PARALLEL</code> clause
                           </p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL statement
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='04339.performance-and-debugging.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Performance and Debugging</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQLJ Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQLJ Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sqlj-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T08:20:03-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96458-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="translator-run-time-functionality.html" title="Previous" type="text/html">
      <link rel="next" href="appendix.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQLJ Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JSQLJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="translator-run-time-functionality.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="appendix.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQLJ Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Performance and Debugging</li>
            </ol>
            <a id="GUID-374DA5FF-73F5-40FC-BFA6-02FAB44FC375" name="GUID-374DA5FF-73F5-40FC-BFA6-02FAB44FC375"></a><a id="JSQLJ740"></a>
            
            <h2 id="JSQLJ-GUID-374DA5FF-73F5-40FC-BFA6-02FAB44FC375" class="sect2"><span class="enumeration_chapter">11 </span> Performance and Debugging
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discusses features, utilities, and tips to enhance performance of your SQLJ application and to debug your SQLJ source code at run time. The following topics are discussed:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="performance-and-debugging.html#GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C">Performance Enhancement Features</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-debugging.html#GUID-630E713D-C1AA-4ED8-8061-153B6880EB61">SQLJ Debugging Features</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-debugging.html#GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585">SQLJ Support for Oracle Performance Monitoring</a></p>
                  </li>
               </ul>
            </div><a id="JSQLJ741"></a><div class="props_rev_3"><a id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C" name="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C"></a><h3 id="JSQLJ-GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C" class="sect3">Performance Enhancement Features</h3>
               <div>
                  <p>The Oracle SQLJ implementation includes features to enhance performance by making data access more efficient. These include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-BB73F408-2751-4050-A174-F9B2AD525AD7">Row Prefetching</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A">Statement Caching</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-E764E87E-1320-4DBE-B59E-7B03150BF803">Update Batching</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50">Column Definitions</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D">Parameter Size Definitions</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-39C2B05E-C724-4617-903D-AFEFC3726565">
                     <p class="notep1">See Also:</p>
                     <p><a href="../jjdbc/data-access-and-manipulation.html#JJDBC-GUID-C4FB8486-E19B-4EF3-BC67-053EF49E6FF4" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a></p>
                  </div>
                  <p>Your application will likely benefit from the default Oracle-specific code generation. The generated code will be optimized with direct calls to Oracle Java Database Connectivity (JDBC) driver, eliminating the overhead of intermediate calls to the SQLJ run time, which in turn would call JDBC.</p>
                  <div class="infoboxnotealso" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-20E7B340-7A2E-43A6-BD2A-56544588B676">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">Oracle-Specific Code Generation (No Profiles)</a>"</span></p>
                  </div>
                  <div class="infoboxnote" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-62CCE6F3-8B47-49F1-8C4E-56872FAA16D3">
                     <p class="notep1">Note:</p>
                     <p>The Oracle SQLJ implementation does <span class="italic">not</span> support batch fetches, which is the fetching of sets of rows into arrays of values. However, you may be able to use Oracle row prefetching to obtain some of the benefits of batch fetching.
                     </p>
                  </div>
                  <p>In addition to the preceding SQLJ performance enhancements, you can use optimizer hints in the SQL operations within a SQLJ program, as you can in any Oracle SQL operations.</p>
                  <p>The Ora<a id="d66179e124" class="indexterm-anchor"></a><a id="d66179e126" class="indexterm-anchor"></a><a id="d66179e128" class="indexterm-anchor"></a><a id="d66179e130" class="indexterm-anchor"></a><a id="d66179e132" class="indexterm-anchor"></a><a id="d66179e134" class="indexterm-anchor"></a>cle SQL implementation enables you to tune your SQL statements by using "<code class="codeph">/*+</code>" or "<code class="codeph">--+</code>" comment notation to pass hints to Oracle SQL optimizer. The SQLJ translator recognizes and supports these optimizer hints, passing them at run time as part of your SQL statement.
                  </p>
                  <p>You can also define cost and selectivity information for a SQLJ stored function, as for any other stored function, using the extensibility features for SQL optimization in Oracle Database 12<span class="italic">c </span>Release 2 (12.2). During SQL execution, the optimizer invokes the cost and selectivity methods for the stored function, evaluates alternate strategies for execution, and chooses an efficient execution plan.
                  </p>
                  <div class="infoboxnotealso" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-3D110D49-2610-47DD-A416-C83821564928">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information
                     </p>
                  </div>
                  <p>Note that using Oracle performance extensions in your code requires the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use one of Oracle JDBC drivers.</p>
                     </li>
                     <li>
                        <p>Use the default Oracle-specific code generation, or customize profiles appropriately.</p>
                        <p>For ISO standard code generation, the default customizer, <code class="codeph">oracle.sqlj.runtime.util.OraCustomizer</code>, is recommended.
                        </p>
                     </li>
                     <li>
                        <p>Use Oracle SQLJ run time when your application runs.</p>
                     </li>
                  </ul>
                  <p> Oracle SQLJ run time and an Oracle JDBC driver are required by your application whenever you customize profiles with Oracle customizer, even if you do not actually use Oracle extensions in your code.</p>
               </div><a id="JSQLJ742"></a><div class="props_rev_3"><a id="GUID-BB73F408-2751-4050-A174-F9B2AD525AD7" name="GUID-BB73F408-2751-4050-A174-F9B2AD525AD7"></a><h4 id="JSQLJ-GUID-BB73F408-2751-4050-A174-F9B2AD525AD7" class="sect4">Row Prefetching</h4>
                  <div>
                     <p>Standard JDBC receives the results of a query one row at a time, with each row requiring a separate round trip to the database. Row prefetching enables you to receive the results more efficiently, in groups of multiple rows each.</p>
                     <p>Use the <code class="codeph">setFetchSize()</code> method of an <code class="codeph">ExecutionContext</code> instance to set the number of rows to be prefetched whenever you execute a <code class="codeph">SELECT</code> statement (for SQLJ statements using the particular <code class="codeph">ExecutionContext</code> instance).
                     </p>
                     <p>The <code class="codeph">getFetchSize()</code> method of an <code class="codeph">ExecutionContext</code> instance returns the current prefetch size, as an <code class="codeph">int</code> value.
                     </p>
                     <p>The following is an example of setting the prefetch size to 20 by getting the default execution context instance of the default connection context instance and calling the <code class="codeph">setFetchSize()</code> method:
                     </p><pre class="oac_no_warn" dir="ltr">DefaultContext.getDefaultContext().getExecutionContext().setFetchSize(20);
</pre><p>It is also possible to set the prefetch size directly on the underlying <code class="codeph">OracleConnection</code> object using the JDBC application programming interface (API), but in SQLJ this is discouraged.
                     </p>
                     <p>To specify the number of rows to prefetch for queries that use a given connection context instance, use the underlying JDBC connection, cast to an Oracle<code class="codeph">Connection</code> instance. Following is an example that sets the prefetch value to 20 for your default connection:
                     </p><pre class="oac_no_warn" dir="ltr">((OracleConnection)DefaultContext.getDefaultContext().getConnection()).setDefaultRowPrefetch(20);</pre><pre class="oac_no_warn" dir="ltr"></pre><p>Also, please note that the prefetch size set on the SQLJ connection context overrides the prefetch size set on the underlying JDBC connection.</p>
                     <p><span>Each additional connection context instance you use must be set separately, as desired.</span>The prefetch value needs to be setup on each individual connection context. For example, if <code class="codeph">ctx</code> is an instance of a declared connection context class, set its prefetch value as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">((Connection)ctx.getConnection()).setDefaultRowPrefetch(20);</pre><pre class="oac_no_warn" dir="ltr">ctx.getExecutionContext().setFetchSize(20);
</pre><p>There is no maximum row-prefetch value. The default is 10 in JDBC, and this is inherited by SQLJ. This value is effective in typical circumstances, although you might want to increase it if you receive a large number of rows.</p>
                  </div>
               </div><a id="JSQLJ744"></a><a id="JSQLJ745"></a><a id="JSQLJ746"></a><a id="JSQLJ747"></a><a id="JSQLJ748"></a><a id="JSQLJ749"></a><a id="JSQLJ750"></a><a id="JSQLJ743"></a><div class="props_rev_3"><a id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A" name="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A"></a><h4 id="JSQLJ-GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A" class="sect4">Statement Caching</h4>
                  <div>
                     <p>SQLJ offers a statement caching feature that improves performance by saving executable statements that are used repeatedly, such as in a loop or in a method that is called repeatedly. When a statement is cached before it is reexecuted, the code does not have to be reparsed (either on the server or on the client), the statement object does not have to be recreated, and the parameter size definitions do not have to be recalculated. Without this feature, repeated statements would have to be reparsed on the client, and perhaps in the server as well, depending on whether a statement is still available in the general server-side SQL cache when it is encountered again.</p>
                     <p>For Oracle-specific code generation, SQLJ statement caching relies on Oracle JDBC driver, using the JDBC explicit caching mechanism. This is distinct from the JDBC implicit caching mechanism, although there are interdependencies. With Oracle-specific code, statement caching is controlled through connection methods.</p>
                     <div class="infoboxnotealso" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-3EB4E6B4-DA9C-4350-8295-54BFDC464A39">
                        <p class="notep1">See Also:</p>
                        <p><a href="../jjdbc/statement-and-resultset-caching.html#JJDBC-GUID-DE966F8D-3D12-4697-A7A4-A09E0DF58CA1" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a></p>
                     </div>
                     <p>For ISO code generation, SQLJ has its own statement caching mechanism through functionality of the SQLJ run time. With ISO code, statement caching is controlled through the Oracle customizer <code class="codeph">stmtcache</code> option.
                     </p>
                     <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-81A8E895-AEC2-4D36-BF1E-90C31CB19B31">
                        <p class="notep1">Note:</p>
                        <p>For Oracle-specific code generation, explicit caching is the only statement caching mechanism that can be manipulated through SQLJ APIs. For the discussion in this document, it will be referred to as SQLJ/explicit statement caching.</p>
                     </div>
                     <p>In Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the default statement cache size is set to 5, provided the JDBC connection is being created by the connection context. If a connection context is created using an already available JDBC connection or data source, then the statement cache size will be set to that of the JDBC connection or the data source.
                     </p>
                     <div class="section" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__I1005665">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-D305621B-3E5E-4F5B-846B-4C93F934729E">Connection Context Methods for Statement Caching (Oracle-Specific Code)</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If you use Oracle-specific code generation, which is the case with the SQLJ translator default <code class="codeph">-codegen=oracle</code> setting, use connection context methods for statement caching functionality. Note that any statement cache size greater than 0 results in SQLJ/explicit statement caching being enabled. By default, it is enabled with a cache size of 5, that is, five statements.
                        </p>
                        <p>The following Oracle-specific (nonstandard) static methods have been added to the <code class="codeph">sqlj.runtime.ref.DefaultContext</code> class, and are also included in any connection context classes you declare:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">static void setDefaultStmtCacheSize(int)</code></p>
                              <p>This sets the default statement cache size for <span class="italic">all</span> connection contexts. This becomes the initial statement cache size for any subsequently created instance of <span class="italic">any</span> connection context class, not just the class upon which you call the method. The method call does not affect connection context instances that already exist. 
                              </p>
                              <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-D02D50B6-5271-452A-8FA0-07E43C4E003E">
                                 <p class="notep1">Note:</p>
                                 <p><code class="codeph">setDefaultStmtCacheSize(int)</code> affects the statement cache size only for the connections that are created using the SQLJ connection contexts. It does not affect the statement cache size for the connections that are created using JDBC connections.
                                 </p>
                                 <p>Consider the following two code snippets:</p>
                                 <p>Example 1:</p><pre class="oac_no_warn" dir="ltr">...
MyContext.setDefaultStmtCacheSize(10); 
OracleConnection conn = DriverManager.getConnection(url, user, passwd); 
myctx = new MyContext(conn); 
</pre><p>Example 2:</p><pre class="oac_no_warn" dir="ltr">...
MyContext.setDefaultStmtCacheSize(10); 
myctx = new MyContext(url, user, passwd,true);

</pre><p>In the preceding two examples, the statement cache size will be set to 10 only in the second example. In the first example, the statement cache size corresponding to this connection will not be affected because the connection is created using the <code class="codeph">getConnection</code> method of the <code class="codeph">DriverManager</code> interface from JDBC specification.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">static int getDefaultStmtCacheSize()</code></p>
                              <p>This retrieves the current default statement cache size for connection contexts.</p>
                           </li>
                        </ul>
                        <p>And the following Oracle-specific instance methods have also been added to the <code class="codeph">DefaultContext</code> class and are included in any other connection context classes:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">void setStmtCacheSize(int) throws java.sql.SQLException</code></p>
                              <p>This sets the statement cache size for the underlying connection of the particular connection context instance (overrides the default).</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-F0F1BFCE-4D45-4727-8835-B970BDDC9CFB">
                           <p class="notep1">Note:</p>
                           <p>If SQLJ/explicit caching is already disabled, then setting the size to 0 leaves it disabled. If it is already enabled, then setting the size to 0 leaves it enabled, but renders it nonfunctional.</p>
                        </div>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">int getStmtCacheSize()</code></p>
                              <p>This verifies whether SQLJ/explicit statement caching is enabled for the underlying connection of the connection context. If so, it returns the current statement cache size. It can also return either of the following integer constants:</p><pre class="oac_no_warn" dir="ltr">static int STMT_CACHE_NOT_ENABLED
static int STMT_CACHE_EXCEPTION
</pre><p>It is possible for a <code class="codeph">getStmtCacheSize()</code> call to cause a SQL exception. However, for backward compatibility, this method does not throw the exception directly. When an exception occurs, the method returns the constant <code class="codeph">STMT_CACHE_EXCEPTION</code>. In this case, you can call the <code class="codeph">getStmtCacheException()</code> method to find out what exception occurred.
                              </p>
                              <p>If you call <code class="codeph">getStmtCacheSize()</code> when SQLJ/explicit caching is disabled, then the method returns the constant <code class="codeph">STMT_CACHE_NOT_ENABLED</code>. This is distinguished from a cache size of 0. Technically, it is possible for SQLJ/explicit caching to be enabled (though useless) with a cache size of 0.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">java.sql.Exception getStmtCacheException()</code></p>
                              <p>See if there is a statement caching exception. There are two scenarios for using this method:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Call it if a <code class="codeph">getStmtCacheSize()</code> call returns <code class="codeph">STMT_CACHE_EXCEPTION</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Call it whenever you create a connection context instance with which you want to use statement caching. This is because of automatic manipulation that occurs with respect to statement cache size whenever you create a connection context instance. If you care about statement caching for the connection context instance, call <code class="codeph">getStmtCacheException()</code> after creating the instance, to verify there were no problems.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__I1005700">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-626710D2-E6D5-40D8-9899-4212999D004D">Enabling and Disabling Statement Caching (Oracle-Specific Code)</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>With Oracle-specific code, to reiterate what was stated earlier, any nonzero statement cache size results in SQLJ/explicit caching being enabled. Because the default size is 5, statement caching is enabled by default.</p>
                        <p>You cannot explicitly disable SQLJ/explicit statement caching through SQLJ APIs, although you can effectively disable it (render it nonfunctional) by setting the statement cache size to 0. In this case, the connection context <code class="codeph">getStmtCacheSize()</code> method might return 0, <span class="italic">not</span> <code class="codeph">STMT_CACHE_NOT_ENABLED</code>.
                        </p>
                        <p>You <span class="italic">can</span> explicitly disable SQLJ/explicit statement caching or JDBC implicit caching, through JDBC connection APIs. Because SQLJ/explicit caching and JDBC implicit caching use the same cache size, there might sometimes be reason to do so. The following methods are available through the <code class="codeph">OracleConnection</code> class:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">void setExplicitCachingEnabled(boolean)</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">boolean getExplicitCachingEnabled()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">void setImplicitCachingEnabled(boolean)</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">boolean getImplicitCachingEnabled()</code></p>
                           </li>
                        </ul>
                        <p>You have access to these methods if you retrieve the <code class="codeph">OracleConnection</code> instance from within a SQLJ connection context instance.
                        </p>
                        <div class="infoboxnotealso" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-79B5E5ED-8797-466E-8A48-CBB5F433BC71">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="advanced-language-features.html#GUID-340AFCEF-E421-46F9-B136-DF9CC3723310">SQLJ Connection Context and JDBC Connection Interoperability</a>"</span></p>
                        </div>
                        <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-ABEC7041-B798-41AD-B9FE-33EE3C84066E">
                           <p class="notep1">Note:</p>
                           <p>In SQLJ, JDBC implicit caching is disabled by default and remains disabled unless you explicitly enable it through the <code class="codeph">setImplicitCachingEnabled()</code> method.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-2CF05912-E06A-4997-ABAC-B0D535406903">Key Interactions Between SQLJ/Explicit Caching and JDBC Implicit Caching</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>With regard to statement caching in Oracle-specific code, this document naturally emphasizes SQLJ/explicit caching rather than JDBC implicit caching. If you do not use JDBC code in your application, SQLJ/explicit caching is the only statement caching that is relevant. However, there are situations where you might want to use both SQLJ and JDBC code in your application, and in these circumstances you might also want to use implicit caching.</p>
                        <p>SQLJ/explicit caching and JDBC implicit caching are enabled independently of each other. Furthermore, you do not have access to the implicit cache through SQLJ. However, there is a key interaction between the two, in that they share the same cache size. If, for example, the statement cache size is 5, then you can have a maximum of five statements cached for SQLJ/explicit caching and implicit caching combined.</p>
                        <p>An important point related to this is that if you choose to effectively disable SQLJ/explicit statement caching by setting the cache size to 0, then you have also effectively disabled implicit caching.</p>
                        <p>Also be aware that if SQLJ/explicit caching is disabled, changing the cache size to a value greater than 0 will enable it, but this does not affect whether implicit caching is enabled.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-9BE5E251-69D2-4230-9CF3-D32B25053D1B">JDBC Support for Statement Caching (ISO Code)</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>With ISO standard code generation, specified through the SQLJ translator <code class="codeph">-codegen=iso</code> setting, statement caching is a standard SQLJ feature that does not require any particular JDBC driver. However, using a driver that implements the <code class="codeph">sqlj.runtime.profile.ref.ClientDataSupport</code> interface enables more robust caching. Oracle Database 12<span class="italic">c </span>Release 1 (12.1) JDBC drivers implement this interface, providing the following features:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A separate cache for each database connection, instead of a single static cache for the entire application</p>
                           </li>
                           <li>
                              <p>The ability to share cached statements between multiple instances of a connection context class that share the same underlying connection</p>
                           </li>
                        </ul>
                        <p>When a single cache is used, as is the case with a generic JDBC driver that does not implement <code class="codeph">ClientDataSupport</code>, a statement executed in one connection can cause a cached statement from another connection to be flushed (if the statement cache size, the maximum number of statements that can be cached, is exceeded).
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-5C735039-390C-4F4F-81BB-484B6328812F">Oracle Customizer Option for Statement Cache Size (ISO Code)</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>With ISO standard code generation, statement caching is enabled in your application by default with a cache size of 5 (the same default size as with Oracle-specific code) when you use Oracle customizer, which is typically executed as part of Oracle SQLJ translation.</p>
                        <p>You can alter the statement cache size as desired, or effectively disable statement caching with a cache size of 0, through the Oracle customizer <code class="codeph">stmtcache</code> option. This is set as <code class="codeph">-P-Cstmtcache=</code><span class="italic"><code class="codeph">n</code></span>, where <span class="italic"><code class="codeph">n</code></span> is an integer.
                        </p>
                        <div class="infoboxnotealso" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-B7DD5DBC-BB84-47E9-BF98-D634CD2BEC1B">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="appendix.html#GUID-2EF347A8-53D3-404B-8702-A9C6E8ECFF8B">Oracle Customizer Statement Cache Size Option (stmtcache)</a>"</span></p>
                        </div>
                        <p>If you use multiple connection context classes and, therefore, have multiple profiles, you can set their statement cache sizes individually by running SQLJ (actually, the customizer) separately for each profile.</p>
                        <p>At run time, the appropriate SQLJ profile determines the statement cache size for a connection. This would be the profile that corresponds to the first connection context class instantiated for this connection. Its statement cache size setting, if any, is determined according to how you set the Oracle customizer <code class="codeph">stmtcache</code> option when you customized the profile. The run-time statement cache size for a connection is set when the first statement on that connection is executed.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-1E818457-7BC9-4DF1-A294-41E60D066193">Additional Statement Caching Behavior</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When a SQLJ connection context object is instantiated, if the statement cache size on the underlying JDBC connection is smaller than the default size for the connection context class, then the SQLJ run time will attempt to increase the JDBC statement cache size to the connection context default value. This manipulation occurs even with ISO code generation, enabling explicit statement caching in the process, although this is actually of no relevance in the ISO code case.</p>
                        <p>If, on the other hand, the actual JDBC statement cache size is larger, then the SQLJ run time will not attempt to perform a change in the cache size. The SQLJ run time checks the actual JDBC cache size against the default size set whenever it creates a SQLJ connection context instance.</p>
                        <p>It is important to note that these methods have the same effect regardless of the context class on which they are issued, because they modify or report the same underlying static field.</p>
                        <p>As an example, assume the following connection context class declarations:</p><pre class="oac_no_warn" dir="ltr">#sql context CtxtA;
#sql context CtxtB;
</pre><p>In this case, each of the following three code instructions has the effect that whenever a new SQLJ connection context instance is subsequently created, it will <span class="italic">not</span> try to enable SQLJ/explicit statement caching:
                        </p><pre class="oac_no_warn" dir="ltr">sqlj.runtime.ref.DefaultContext.setDefaultStmtCacheSize(0);
</pre><pre class="oac_no_warn" dir="ltr">CtxtA.setDefaultStmtCacheSize(0);
</pre><pre class="oac_no_warn" dir="ltr">CtxtB.setDefaultStmtCacheSize(0);
</pre><div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-4199F5FE-3D1B-4189-9C90-97B56673CA29">
                           <p class="notep1">Note:</p>
                           <p>If a SQLJ connection context instance is created on an underlying JDBC pooled connection, then SQLJ will not be able to change the JDBC statement cache size. For Oracle-specific code, you can retrieve the resulting exception through the connection context <code class="codeph">getStmtCacheException()</code> method. In this case, the desired JDBC statement cache size must be set explicitly on the underlying physical connections. For data sources, the cache size is set through vendor-specific data source attributes.
                           </p>
                        </div>
                        <p>SQLJ/explicit caching and JDBC implicit caching functionality have different semantics and behaviors. As noted earlier, SQLJ statement caching applies only to single statements used repeatedly, such as in a loop or through repeated calls to the same method. Consider the following example:</p><pre class="oac_no_warn" dir="ltr">...
#sql { <span class="italic">same SQL operaton</span> }; // occurrence #1
...
<span class="italic">Java code</span>
...
#sql { <span class="italic">same SQL operaton</span> }; // occurrence #2
...
<span class="italic">Java code</span>
...
#sql { <span class="italic">same SQL operaton</span> }; // occurrence #3
...
</pre><p>Assume the three SQL operations are identical, including white space.</p>
                        <p>SQLJ caching would consider these three occurrences of the same SQL operation to be three different statements. They will occupy three separate slots in the cache. JDBC implicit caching, however, would recognize these as identical statements, using only a single cache slot for all three. The statement would be reused for occurrence #2 and occurrence #3. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-9ABD8A04-8109-42E5-BE59-51FCD21FF2EA">Statement Caching Limitations and Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Using a statement cache, even of size 1, will improve the performance of almost any SQLJ application. Be aware of the following, however:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>There is no benefit if each statement is executed only once.</p>
                           </li>
                           <li>
                              <p>Try to avoid interleaving statements executed once with statements executed multiple times. The statements being executed only once would needlessly take up space in the statement cache, which becomes an issue when you reach the statement cache size limit. As an alternative, if you use ISO code generation you can use a separate connection context class for statements that are executed only once and disable statement caching for that connection context class.</p>
                           </li>
                           <li>
                              <p>Distinct statements with identical SQL operations are treated the same way as any distinct statements. Each is processed and cached separately. As an alternative, put the SQL operation in a method and call the method repeatedly, instead of using distinct statements.</p>
                           </li>
                           <li>
                              <p>Be careful in choosing an appropriate statement cache size. If it is too small, then the cache might fill up resulting in statements being flushed before they are reexecuted. If it is too large, then database resources or program resources may be exhausted.</p>
                           </li>
                        </ul>
                        <p>Also be aware of the following general notes regarding statement caching:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>With Oracle-specific code generation, using separate SQLJ connection context instances to have separate statement caching behavior will not work if the connection contexts share the same underlying JDBC connection instance. This is because under Oracle-specific code generation, SQLJ uses the JDBC statement cache.</p>
                           </li>
                        </ul>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For Oracle applications, the statement cache size plus the maximum number of open JDBC statements in your application, both directly and through SQLJ, should be less than the maximum number of cursors available for a session. This is because the maximum number of cursors defines the maximum number of statements that can be open simultaneously.</p>
                           </li>
                           <li>
                              <p>Using a statement cache generally does not change the execution semantics of an operation itself, although there are some scenarios where it does. For example, if you have a statement that throws an exception when its resources are released, then using a cache would mean that the exception would not be thrown until the connection is closed or the statement is flushed from the cache, which happens when the cache size is exceeded.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ752"></a><a id="JSQLJ753"></a><a id="JSQLJ754"></a><a id="JSQLJ755"></a><a id="JSQLJ756"></a><a id="JSQLJ757"></a><a id="JSQLJ758"></a><a id="JSQLJ759"></a><a id="JSQLJ760"></a><a id="JSQLJ761"></a><a id="JSQLJ762"></a><a id="JSQLJ751"></a><div class="props_rev_3"><a id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803" name="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803"></a><h4 id="JSQLJ-GUID-E764E87E-1320-4DBE-B59E-7B03150BF803" class="sect4">Update Batching</h4>
                  <div>
                     <p>Update batching, referred to as batch updates in the Sun Microsystems JDBC 2.0 specification, allows <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">INSERT</code> statements that are batchable and compatible to be collected into a batch and sent to the database for execution at once, saving round trips to the database. This feature is included in the JDBC and SQLJ specifications and is supported by the Oracle JDBC and SQLJ implementations. Update batching is typically used for an operation that is executed repeatedly within a loop.
                     </p>
                     <p>In SQLJ, update batching is tied to execution context usage. This feature is enabled or disabled in each execution context, independently of any other execution context, and each execution context instance maintains its own batch.</p>
                     <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-4A529E01-5F5A-4BE5-AB61-4871B12353EB">
                        <p class="notep1">Note:</p>
                        <p>Be aware of the following for update batching:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You must use the default Oracle-specific code generation or, for ISO code generation, customize your application with Oracle customizer.</p>
                           </li>
                           <li>
                              <p>It is highly advisable to disable auto-commit mode. This gives you control of what to commit and what to roll back in case of an error during batch execution.</p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-F1F14248-C158-463E-BA4B-3741C20617B9">Batchable and Compatible Statements</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Two criteria determine whether a statement can be added to an existing batch of statements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Is it batchable? You cannot batch some kinds of statements under any circumstances.</p>
                           </li>
                           <li>
                              <p>Is it compatible with statements in the existing batch?</p>
                           </li>
                        </ul>
                        <p>For SQLJ, the following kinds of statements are batchable:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">UPDATE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">INSERT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DELETE</code></p>
                           </li>
                        </ul>
                        <p>However <code class="codeph">UPDATE</code> and <code class="codeph">INSERT</code> statements with one or more stream host expressions are <span class="italic">not</span> batchable.
                        </p>
                        <p>In SQLJ, only multiple instances of the same statement are compatible. This can occur in either of two circumstances:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A statement is executed repeatedly in a loop.</p>
                           </li>
                           <li>
                              <p>A statement is executed in a method, and the method is called repeatedly.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-F319E347-1236-4AD9-9387-C0C5C1079F76">Enabling and Disabling Update Batching</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>SQLJ performs update batching separately for each execution context instance. Each one can have update batching enabled independently of your other execution context instances, and each maintains its own batch.</p>
                        <p>To enable or disable update batching for a particular execution context instance, use the <code class="codeph">setBatching()</code> method of that execution context instance. This method takes boolean input, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
...
</pre><p>or:</p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(false);
...
</pre><p>Update batching is disabled by default.</p>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-2C21EBA5-95C9-4E44-BF8B-D41130CAF60B">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">setBatching()</code> method does not affect an existing statement batch. Neither enabling nor disabling update batching causes an existing batch to be executed or canceled.
                           </p>
                        </div>
                        <p>Use the <code class="codeph">isBatching()</code> method of an execution context instance to determine if update batching is enabled for that execution context:
                        </p><pre class="oac_no_warn" dir="ltr">ExecutionContext ec = new ExecutionContext();
...
boolean batchingOn = ec.isBatching();
</pre><p>This does not, however, indicate whether a batch is currently pending.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1005910">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-5D1F6F28-8AAE-4E70-854E-6968FFF7D847">Explicit and Implicit Batch Execution</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can explicitly execute a pending update batch as desired, but it might also be implicitly executed under certain circumstances. </p>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-CAA4C8A0-2209-4256-A438-934AED734B56">
                           <p class="notep1">Note:</p>
                           <p>It is important to be aware of what happens when an exception occurs in the middle of a batch execution.</p>
                        </div>
                        <p>Use the <code class="codeph">executeBatch()</code> method of the execution context instance to explicitly execute an update batch. This method returns an <code class="codeph">int</code> array of update counts.
                        </p>
                        <p>Following is an example of explicitly executing a batch:</p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
...
double[] sals = ...;
String[] empnos = ...;
for (int i = 0; i &lt; empnos.length; i++)
{
   #sql [ec] { UPDATE employees SET salary = :(sals[i]) WHERE employee_id = :(empnos[i]) };
}
int[] updateCounts = ec.executeBatch();
...
</pre><div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-B7037974-B3D0-49F6-9B62-E13D3DB6219F">
                           <p class="notep1">Note:</p>
                           <p>If you invoke <code class="codeph">executeBatch()</code> when the execution context instance has no pending batch, then the method returns <code class="codeph">null</code>.
                           </p>
                        </div>
                        <p>When a pending update batch exists, it is implicitly executed in the following circumstances:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An executable statement is encountered that is not batchable. In this case the existing batch is executed first, then the nonbatchable statement is executed.</p>
                           </li>
                           <li>
                              <p>An update statement is encountered that is batchable, but is not compatible with the statements in the existing batch, in other words, is not an instance of the same statement. In this case the batch is executed, then a new batch is created, starting with the incompatible statement.</p>
                           </li>
                           <li>
                              <p>A predefined batch limit, that is, a specified number of statements, is reached.</p>
                           </li>
                        </ul>
                        <p>Following is an example. First one batch is created and executed implicitly when an unbatchable statement is encountered, then a new batch is created and executed implicitly when a batchable, but incompatible, statement is encountered:</p><pre class="oac_no_warn" dir="ltr">ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
...
/* Statements in the following loop will be placed in a batch */
double[] sals = ...;
String[] empnos = ...; 
for (int i = 0; i &lt; empnos.length; i++) 
{
   #sql [ec] { UPDATE employees SET salary = :(sals[i]) WHERE employee_id = :(empnos[i]) };
}

/* a SELECT is unbatchable so causes the batch to be executed */
double avg;
#sql [ec] { SELECT avg(salary) INTO :avg FROM employees };

/* Statements in the following loop will be placed in a new batch */
double[] comms = ...;
for (int i = 0; i &lt; empnos.length; i++) 
{
   #sql [ec] { UPDATE employees SET commission_pct = :(comms[i]) WHERE employee_id = :(empnos[i]) };
}

/* the following update is incompatible with the second batch, so causes it to be executed */
int smithdeptno = ...;
#sql [ec] { UPDATE employees SET department_no = :deptno WHERE first_name = 'Smith' };
</pre><p>To obtain the update count array for a batch executed implicitly, invoke the <code class="codeph">getBatchUpdateCounts()</code> method of the execution context instance. This returns the update counts for the last batch to be executed successfully in this execution context instance. The following code statement could be inserted after the <code class="codeph">SELECT</code> and after the last <code class="codeph">UPDATE</code>:
                        </p><pre class="oac_no_warn" dir="ltr">int[] updateCounts = ec.getBatchUpdateCounts();
</pre><div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-9B6FEFB5-D57A-4761-9053-A6AC4B3DA370">
                           <p class="notep1">Note:</p>
                           <p>If no update batch has been executed successfully for the execution context instance, then <code class="codeph">getBatchUpdateCounts()</code> returns <code class="codeph">null</code>.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006005">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-A6CA4450-1862-4346-B0FF-7E8DB241019A">Canceling a Batch</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To cancel the batch that is pending in an execution context, use the <code class="codeph">cancel()</code> method of the execution context instance. You can, for example, cancel a batch that has been executed, but not yet committed, in the event that an exception occurred during batch execution. Following is an example:
                        </p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
...
double[] sals = ...;
String[] empnos = ...;
for (int i = 0; i &lt; empnos.length; i++)
{
   #sql [ec] { UPDATE employees SET salary = :(sals[i]) WHERE employee_id = :(empnos[i]) };
   if (!check(sals[i], empnos[i])) //assume "check" is a user-supplied function
   {
      ec.cancel();
      throw new SQLException("Process canceled.");
   }
}

try 
{ 
   int[] updateCounts = ec.executeBatch();
} catch ( SQLException exception) { ec.cancel(); }
...
</pre><p>When you cancel a batch, the next batchable statement will start a new batch.</p>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-E269016C-CA32-414B-A9B7-C8AAC3EF5562">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Calling <code class="codeph">cancel()</code> will also cancel any statement currently executing.
                                 </p>
                              </li>
                              <li>
                                 <p>Canceling a batch does <span class="italic">not</span> disable update batching.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006039">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-736D0F9D-35E9-4EA9-9899-EC8A56949D36">Execution Context Update Counts</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In the Oracle Database 12<span class="italic">c </span>Release 1 (12.1) SQLJ implementation, the array of update counts returned by the <code class="codeph">executeBatch()</code> or <code class="codeph">getBatchUpdateCounts()</code> method of an execution context instance does <span class="italic">not</span> contain counts of the number of rows updated by the batched statements, but simply values indicating whether each statement was successful. So its functionality differs from that of the single update count returned by the <code class="codeph">getUpdateCount()</code> method of the execution context instance when batching is not enabled. As statements are batched, and after batch execution, the single update count returned by <code class="codeph">getUpdateCount()</code> is also affected.
                        </p>
                        <p>In a batch-enabled environment, the value available from the <code class="codeph">getUpdateCount()</code> method of the execution context instance is modified after each statement is encountered. It will be updated with one of several <code class="codeph">ExecutionContext</code> class static <code class="codeph">int</code> constant values, as follows:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">NEW_BATCH_COUNT</code>: Indicates that a new batch was created for the last statement encountered.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ADD_BATCH_COUNT</code>: Indicates that the last statement encountered was added to an existing batch.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXEC_BATCH_COUNT</code>: Indicates that the pending batch was executed, either explicitly or implicitly, after the last statement was encountered.
                              </p>
                           </li>
                        </ul>
                        <p>If you want to refer to these constants, then use the following qualified names: </p><pre class="oac_no_warn" dir="ltr">ExecutionContext.NEW_BATCH_COUNT
ExecutionContext.ADD_BATCH_COUNT
ExecutionContext.EXEC_BATCH_COUNT
</pre><p>After a batch has been executed, either explicitly or implicitly, the array of values returned by <code class="codeph">executeBatch()</code> or <code class="codeph">getBatchUpdateCounts()</code> indicates only whether the statements executed successfully. There is an array element for each batched statement. In accordance with the JDBC 2.0 specification, a value of <code class="codeph">-2</code> for an array element indicates that the corresponding statement completed successfully, but that the number of rows it affected is unknown.
                        </p>
                        <p>Checking all the array values after execution of a batch would not be meaningful. As currently implemented, the only useful test of this array would be to verify the number of statements that were in the batch prior to execution, by checking the number of elements in the array after a successful execution (essentially, after a batch execution that does not produce an exception).</p>
                        <p>Note that the update counts array is not modified as statements are batched, only as the batch is executed.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006064">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-799B803A-A09C-4F5B-9703-69A97AE24225">Setting a Batch Limit</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can specify that each update batch be executed after a predefined number of statements have been batched, before the next statement would be added. Use the <code class="codeph">setBatchLimit()</code> method of the execution context instance, inputting a positive, nonzero integer as follows:
                        </p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
ec.setBatchLimit(10);
...
double[] sals = ...;
String[] empnos = ...; 
for (int i = 0; i &lt; 20; i++) 
{
   #sql [ec] { UPDATE emp1 SET sal = :(sals[i]) WHERE empno = :(empnos[i]) };
}
</pre><p>This loop is executed 20 times, with the statements being batched and the batch being executed during the 11th time through the loop, before the 11th statement would be added to the batch. Note that the batch would not be executed a second time in the loop, however. When your application exits the loop, the last ten statements would still be in the batch and would not be executed until another statement is encountered or you execute the batch explicitly.</p>
                        <p>You can use two special static <code class="codeph">int</code> constants of the <code class="codeph">ExecutionContext</code> class as input to the <code class="codeph">setBatchLimit()</code> method:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">AUTO_BATCH</code>: Enables the SQLJ run time to determine the batch limit.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNLIMITED_BATCH</code> (default): Specifies that there is no batch limit.
                              </p>
                           </li>
                        </ul>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
ec.setBatchLimit(ExecutionContext.AUTO_BATCH);
...
</pre><p>or:</p><pre class="oac_no_warn" dir="ltr">ec.setBatchLimit(ExecutionContext.UNLIMITED_BATCH);
...
</pre><p>To check the current batch limit, use the <code class="codeph">getBatchLimit()</code> method of the execution context instance.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-858CDEA9-304B-4472-9210-2ED966190C2D">Batching Incompatible Statements</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If you want to batch a statement that is incompatible with statements in an existing batch, without implicitly executing the existing batch, then you will have to use a separate execution context instance. Following is an example:</p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec1 = new ExecutionContext();
ec1.setBatching(true);
ExecutionContext ec2 = new ExecutionContext();
ec2.setBatching(true);
...
double[] sals = ...;
String[] empnos = ...; 
for (int i = 0; i &lt; empnos.length; i++) 
{
   #sql [ec1] { UPDATE emp1 SET sal = :(sals[i]) WHERE empno = :(empnos[i]) };
   #sql [ec2] { UPDATE emp2 SET sal = :(sals[i]) WHERE empno = :(empnos[i]) };
}
int[] updateCounts1 = ec1.executeBatch();
int[] updateCounts2 = ec2.executeBatch();
...
</pre><div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-018A97CE-20B5-4156-A760-C6A268DA8F13">
                           <p class="notep1">Note:</p>
                           <p>This example assumes that the two <code class="codeph">UPDATE</code> statements are completely independent of each other. Do not batch interdependent statements in different execution contexts because you cannot completely assure the order in which they will be executed.
                           </p>
                        </div>
                        <p>An alternative is to use a single execution context and separate loops so that all the <code class="codeph">EMP1</code> updates are batched and executed prior to the <code class="codeph">EMP2</code> updates:
                        </p><pre class="oac_no_warn" dir="ltr">...
ExecutionContext ec = new ExecutionContext();
ec.setBatching(true);
...
double[] sals = ...;
String[] empnos = ...; 
for (int i = 0; i &lt; empnos.length; i++) 
{
   #sql [ec] { UPDATE emp1 SET sal = :(sals[i]) WHERE empno = :(empnos[i]) };
}
for (int i = 0; i &lt; empnos.length; i++) 
{
   #sql [ec] { UPDATE emp2 SET sal = :(sals[i]) WHERE empno = :(empnos[i]) };
}
ec.executeBatch();
...
</pre><p>This example executes the first batch implicitly and the second batch explicitly.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-507081B0-2691-4FDC-BFDA-0382143BF567">Using Implicit Execution Contexts for Update Batching</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>All the update batching examples so far have created and specified explicit execution context instances. This is not necessary, however, given that every connection context instance has an implicit execution context instance. For example, you can access the implicit execution context instance of the default connection as follows:</p><pre class="oac_no_warn" dir="ltr">DefaultContext.getDefaultContext().getExecutionContext().setBatching(true);
...
double[] sals = ...;
String[] empnos = ...; 
for (int i = 0; i &lt; empnos.length; i++) 
{
   #sql { UPDATE employees SET salary = :(sals[i]) WHERE employee_id = :(empnos[i]) };
}
// implicitly execute the batch and commit
#sql { COMMIT };
</pre><p>Or, you could execute the batch explicitly, as follows:</p><pre class="oac_no_warn" dir="ltr">DefaultContext.getDefaultContext().getExecutionContext().executeBatch();
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-23DC0E98-FFED-43CF-A525-E15722C90E8D">General Cautions Regarding Update Batching</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If you use update batching, especially if you mix statements using an unbatched execution context instance with statements using a batched execution context instance, then remember the following points:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If an unbatched statement depends on a batched statement, then be sure the batch is executed prior to the unbatched statement.</p>
                           </li>
                           <li>
                              <p>A JDBC <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> operation, that is, an auto-commit or any explicit use of the <code class="codeph">commit()</code> or <code class="codeph">rollback()</code> method of a JDBC <code class="codeph">Connection</code> instance, does not execute pending statements in a batch.
                              </p>
                              <p>It is important to note, however, that using a SQLJ <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> statement, such as follows, <span class="italic">will</span> execute pending statements in a batch:
                              </p><pre class="oac_no_warn" dir="ltr">#sql { COMMIT };
</pre><p>or:</p><pre class="oac_no_warn" dir="ltr">#sql { ROLLBACK };
</pre><p>This is another reason that you should always commit or roll back changes using <code class="codeph">#sql</code> syntax, which cleans up both SQLJ resources and JDBC resources.
                              </p>
                           </li>
                           <li>
                              <p>When a batch is implicitly executed as a result of an unbatchable or incompatible statement being encountered, the batch is executed <span class="italic">before</span> the unbatchable or incompatible statement is executed, but <span class="italic">after</span> the input parameters of that statement have been evaluated and passed to the statement.
                              </p>
                           </li>
                           <li>
                              <p>If you no longer intend to use a particular batch-enabled execution context instance, then explicitly execute or cancel its pending batch to free resources.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006173">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-9D77ED43-AAFE-43C3-9D3B-B1B1AFC35D70">Error Conditions During Batch Execution</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In the event that a statement causes an exception in the middle of a batch execution, be aware of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Batched statements following the statement that caused the exception are <span class="italic">not</span> executed.
                              </p>
                           </li>
                           <li>
                              <p>Batched statements that had already been executed prior to the exception are <span class="italic">not</span> rolled back.
                              </p>
                           </li>
                           <li>
                              <p>If the batch where the exception occurred was executed implicitly as the result of another (unbatchable or incompatible) statement being encountered, that statement is <span class="italic">not</span> executed.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-A83607A9-3148-4EE6-BD76-1EAFE11CA42D">
                           <p class="notep1">Note:</p>
                           <p>Presumably you have disabled auto-commit mode when using update batching. This gives you commit/rollback control in case of an error during batch execution.</p>
                        </div>
                        <p>When an exception occurs during batch execution under JDBC 2.0 or later, it is typically an instance of the standard <code class="codeph">java.sql.BatchUpdateException</code> class, a subclass of the <code class="codeph">java.sql.SQLException</code> class. The <code class="codeph">BatchUpdateException</code> class has a <code class="codeph">getUpdateCounts()</code> method that, for batched statements successfully executed before the exception occurred, returns an array of update counts equivalent to what would be returned by the <code class="codeph">executeBatch()</code> or <code class="codeph">getBatchUpdateCounts()</code> method of the <code class="codeph">ExecutionContext</code> class.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-A7CE4C74-ABF1-4F86-8829-AC234982E270">Recursive Call-ins and Update Batching</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Execution of SQLJ stored procedures, where one calls the other, can result in situations where the two procedures are simultaneously using the same execution context instance. The update-batching flag, set using the <code class="codeph">setBatching()</code> method of the execution context instance, would act in the same way as other execution context attributes. Regardless of which stored procedure sets it, it would affect the next executable statement in either stored procedure.
                        </p>
                        <p>For this reason, update batching is automatically disabled in the server whenever a recursive call-in occurs. The pending batch is executed, and no batching occurs in the recursively invoked procedure. To avoid this behavior, use explicit execution context instances in batch-enabled stored procedures.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ764"></a><a id="JSQLJ765"></a><a id="JSQLJ763"></a><div class="props_rev_3"><a id="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50" name="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50"></a><h4 id="JSQLJ-GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50" class="sect4">Column Definitions</h4>
                  <div>
                     <p>The Oracle SQLJ implementation reflects Oracle JDBC support for column type and size definitions. Depending on the driver implementation, which differs somewhat among the different Oracle JDBC drivers, registering column types and sizes can save a trip to the database for each query. In particular, this is true for Oracle JDBC Thin driver and use of positional iterators.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50__GUID-DCC0030F-C486-40D5-BBD9-24CFDA877839">Oracle Implementation of Column Definitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If you enable column definitions, then the Oracle SQLJ implementation takes the following steps to automatically register column types and sizes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>During customization or during translation when the default Oracle-specific code generation is used, SQLJ connects to a specified database schema to determine types and sizes of columns being retrieved. With ISO standard SQLJ code generation, the column defaults become part of the SQLJ profile. This can be accomplished during the customization step of source code translation or during separate customization of an existing profile.</p>
                           </li>
                           <li>
                              <p>When your application executes, the SQLJ run time will use the column information to register the column types and sizes with the JDBC driver, using a call to the <code class="codeph">defineColumnType()</code> method available in the Oracle JDBC statement classes.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50__GUID-8044C763-F4AC-4E23-A1D0-E1D7212B91F3">Customizer and Translator Options for Column Definitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To enable column definitions, set SQLJ options as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Enable the <code class="codeph">optcols</code> flag. For Oracle-specific code generation, use the SQLJ translator <code class="codeph">-optcols</code> option. For ISO standard code generation, use either the translator option or the Oracle customizer option (<code class="codeph">-P-Coptcols</code> on the SQLJ command line).
                              </p>
                           </li>
                           <li>
                              <p>Set the user, password, and URL for a database connection. For Oracle-specific code generation, this is through the SQLJ translator <code class="codeph">-user</code>, <code class="codeph">-password</code>, and <code class="codeph">-url</code> options. For ISO standard code generation, this can be through the translator options or you can separately use the customizer options (<code class="codeph">-P-user</code>, <code class="codeph">-P-password</code>, and <code class="codeph">-P-url</code> on the SQLJ command line). In addition, set the JDBC driver class (<code class="codeph">-P-driver</code> on the SQLJ command line) if you are not using the default <code class="codeph">OracleDriver</code> class.
                              </p>
                           </li>
                        </ul>
                        <p>For information about the customizer options, refer to the <code class="codeph">optcols</code> section under <span class="q">"<a href="appendix.html#GUID-0BBEA4C2-0474-40DE-9082-D55813F8BE02">Overview of Customizer-Specific Options</a>"</span>, and the <code class="codeph">user</code>, <code class="codeph">password</code>, <code class="codeph">url</code>, and <code class="codeph">driver</code> sections under <span class="q">"<a href="appendix.html#GUID-4E316F9C-E16F-45D4-A5ED-B77B7BCF44A6">Overview of Customizer Harness Options</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ767"></a><a id="JSQLJ768"></a><a id="JSQLJ769"></a><a id="JSQLJ766"></a><div class="props_rev_3"><a id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D" name="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D"></a><h4 id="JSQLJ-GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D" class="sect4">Parameter Size Definitions</h4>
                  <div>
                     <p>The Oracle JDBC and SQLJ implementations enable you to optimize JDBC resource allocation by defining parameter sizes (sizes of Java host variables) used as any of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Input or output parameters in stored procedure or function calls</p>
                        </li>
                        <li>
                           <p>Return values from stored function calls</p>
                        </li>
                        <li>
                           <p>Input or output parameters in SET statements </p>
                        </li>
                        <li>
                           <p>Input or output parameters in PL/SQL blocks</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-6213773C-5889-48A8-A081-850606DDEEE2">Oracle Implementation of Parameter Size Definitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle implements parameter size definitions through option settings, in combination with hints embedded in source code comments. For ISO standard SQLJ code generation, Oracle customizer options are available. For the default Oracle-specific code generation, equivalent SQLJ translator options are available.</p>
                        <p>Use options and hints as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Enable parameter size definitions through the SQLJ translator or Oracle customizer parameter definition flag.</p>
                           </li>
                           <li>
                              <p>Specify default sizes for particular data types through the SQLJ translator or Oracle customizer parameter default size option.</p>
                           </li>
                           <li>
                              <p>Override data type default sizes for particular parameters by embedding hints in source code comments, following a prescribed format.</p>
                           </li>
                        </ul>
                        <p>For any given host variable, when parameter size definitions are enabled, resources are allocated according to the source code hint if there is one. If there is no source code hint, then the default size for the corresponding data type is used if one was specified. If there is no source code hint or appropriate default size, then maximum resources are allocated according to the JDBC implementation.</p>
                        <p>When your application executes, the parameter sizes are registered through calls to the <code class="codeph">defineParameterType()</code> and <code class="codeph">registerOutParameter()</code> methods available in the Oracle JDBC statement classes.
                        </p>
                        <div class="infoboxnote" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-33D99FBA-07BA-432F-802F-8547894645B8">
                           <p class="notep1">Note:</p>
                           <p>If you do not enable the parameter definition flag, then parameter size defaults and source code hints will be ignored and maximum or default resources will be allocated according to the JDBC implementation.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-6B4EE248-90F4-4984-AB56-EC9EABE3BD2F">Customizer and Translator Options for Parameter Size Definitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use the following SQLJ options for parameter size definitions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <code class="codeph">optparams</code> flag to enable parameter size definitions. For Oracle-specific code generation, use the SQLJ translator <code class="codeph">-optparams</code> option. For ISO standard code generation, use either the translator option or the Oracle customizer option, <code class="codeph">-P-Coptparams</code> on the SQLJ command line.
                              </p>
                           </li>
                           <li>
                              <p>Use <code class="codeph">optparamdefaults</code> to set default sizes for particular data types. For Oracle-specific code generation, use the SQLJ translator <code class="codeph">-optparamdefaults=</code><span class="italic"><code class="codeph">xxxx</code></span> option. For ISO standard code generation, use either the translator option or the Oracle customizer option, <code class="codeph">-P-Coptparamdefaults=</code><span class="italic"><code class="codeph">xxxx</code></span> on the SQLJ command line.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-1D3BD376-A9A2-436C-B77B-B7548CFCD96A">Source Code Hints for Parameter Size Definitions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Embed source code hints for parameter size definitions within your SQLJ statements in the following format (you can add white space within the comment, as desired):</p><pre class="oac_no_warn" dir="ltr">/*(<span class="italic">size</span>)*/
</pre><p>The size is in bytes. Hints are ignored if the <code class="codeph">optparams</code> flag is disabled.
                        </p>
                        <p>You can override the default parameter size, without specifying a new size (leaving size allocation to the JDBC implementation), as follows:</p><pre class="oac_no_warn" dir="ltr">/*()*/
</pre><p>Here is an example:</p><pre class="oac_no_warn" dir="ltr">byte[] hash;
String name=Tyrone;
String street=2020 Meryl Street;
String city=Wichita;
String state=Kansas;
String zipcode=77777;
#sql hash = { /* (5) */ VALUES (ADDR_HASH(:name /* (20) */, :street /* () */, 
                               :city, :state, :INOUT zipcode /* (10) */ )) };
</pre><p>A hint for a result expression, such as the result expression <code class="codeph">hash</code> in the example, must be the first item appearing inside the brackets of the SQLJ statement, as shown. Hints for input and output host variables must immediately follow the variables, as shown.
                        </p>
                        <p>The example sets parameter sizes as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">hash</code>: 5 bytes
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">name</code>: 20 bytes
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">street</code>: override default, but with no setting (leave allocation up to JDBC)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">city</code>: none (use appropriate data type default, if any)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">state</code>: none (use appropriate data type default, if any)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">zipcode</code>: 10 bytes
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-C63A6FF8-4F21-4D98-89C1-34E967D7CCBC">
                           <p class="notep1">Note:</p>
                           <p>If any parameter size is altered such that its actual size exceeds its registered size at run time, then a SQL exception will be thrown.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ770"></a><div class="props_rev_3"><a id="GUID-630E713D-C1AA-4ED8-8061-153B6880EB61" name="GUID-630E713D-C1AA-4ED8-8061-153B6880EB61"></a><h3 id="JSQLJ-GUID-630E713D-C1AA-4ED8-8061-153B6880EB61" class="sect3">SQLJ Debugging Features</h3>
               <div>
                  <p>This section summarizes debugging features in the Oracle SQLJ implementation. It covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-35667B8F-391D-4B14-BE21-0C76BE642D14">SQLJ -linemap Flag for Debugging</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4">Overview of the AuditorInstaller Specialized Customizer</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-4D44802F-CF56-4C60-BFA3-F783570806F4">Overview of Developing and Debugging in Oracle10g JDeveloper</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ771"></a><div class="props_rev_3"><a id="GUID-35667B8F-391D-4B14-BE21-0C76BE642D14" name="GUID-35667B8F-391D-4B14-BE21-0C76BE642D14"></a><h4 id="JSQLJ-GUID-35667B8F-391D-4B14-BE21-0C76BE642D14" class="sect4">SQLJ -linemap Flag for Debugging</h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">-linemap</code> flag instructs SQLJ to map line numbers from a SQLJ source code file to locations in the corresponding <code class="codeph">.class</code> file. This will be the <code class="codeph">.class</code> file created during compilation of the <code class="codeph">.java</code> file generated by the SQLJ translator. As a result of this, when Java run-time errors occur, the line number reported by the Java virtual machine (JVM) is the line number in the SQLJ source code, making it much easier to debug.
                        </p>
                        <p>If you are using the Sun Microsystems <code class="codeph">jdb</code> debugger, then use the <code class="codeph">-jdblinemap</code> option instead of the <code class="codeph">-linemap</code> option. The options are equivalent, except that <code class="codeph">-jdblinemap</code> does some special processing, necessitated by the fact that <code class="codeph">jdb</code> does not support Java source files with file name extensions other than the <code class="codeph">.java</code> extension.
                        </p>
                        <div class="infoboxnote" id="GUID-35667B8F-391D-4B14-BE21-0C76BE642D14__GUID-6DA504C7-6AD4-41AC-AE9E-F9BB1FCF5FFF">
                           <p class="notep1">Note:</p>
                           <p>If you are translating in the server, then class schema objects created during server-side translation automatically reference line numbers that map to the SQLJ source code. This is equivalent to enabling the <code class="codeph">-linemap</code> option when you translate on a client. 
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ773"></a><div class="props_rev_3"><a id="GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4" name="GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4"></a><h4 id="JSQLJ-GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4" class="sect4">Overview of the AuditorInstaller Specialized Customizer</h4>
                  <div>
                     <p>For ISO code generation, SQLJ provides a special customizer, <code class="codeph">AuditorInstaller</code>. This customizer will insert sets of debugging statements, known as auditors, into profiles specified on the SQLJ command line. These profiles must already exist from previous customization. The debugging statements will execute during SQLJ run time (when someone runs your application), displaying a trace of method calls and values returned.
                     </p>
                     <p>Use the customizer harness <code class="codeph">debug</code> option, preceded by <code class="codeph">-P-</code> as with any general customization option, to insert the debugging statements.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4__GUID-5FBFE829-924C-4830-AECE-B52F4891DE33">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="appendix.html#GUID-B820810A-DDDF-4E42-A3C9-AF04F4DC7075">AuditorInstaller Customizer for Debugging</a>"</span></p>
                     </div>
                  </div>
               </div><a id="JSQLJ774"></a><div class="props_rev_3"><a id="GUID-4D44802F-CF56-4C60-BFA3-F783570806F4" name="GUID-4D44802F-CF56-4C60-BFA3-F783570806F4"></a><h4 id="JSQLJ-GUID-4D44802F-CF56-4C60-BFA3-F783570806F4" class="sect4">Overview of Developing and Debugging in Oracle10<span class="italic">g</span> JDeveloper
                  </h4>
                  <div>
                     <p>The Oracle SQLJ product is fully integrated into the Oracle10<span class="italic">g</span> JDeveloper visual programming tool. 
                     </p>
                     <p>JDeveloper also includes an integrated debugger that supports SQLJ. SQLJ statements, as with standard Java statements, can be debugged in-line as your application executes. Reported line numbers are according to the line numbers in your SQLJ source code (as opposed to in the generated Java code).</p>
                  </div>
               </div>
            </div><a id="JSQLJ775"></a><div class="props_rev_3"><a id="GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585" name="GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585"></a><h3 id="JSQLJ-GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585" class="sect3">SQLJ Support for Oracle Performance Monitoring</h3>
               <div>
                  <p>FUTURE (post-10i/10.1): SQLJ DMS monitoring stored locally as hierarchy; -sqlmonitor.dms=false setting (for storing locally instead of sending to DMS);use of SQLJ DMS APIs (to access results stored locally).</p>
                  <p>FUTURE (post-10i/10.1): SQLJ -components=append; multiple translation runs for DMS.</p>
                  <p>FUTURE: Update Oracle9iAS to Oracle10iAS when appropriate.</p>
                  <p>The following sections discuss Oracle SQLJ implementation support for Oracle Dynamic Monitoring Service (DMS):</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-5C441E4C-075B-46E3-A518-A5D6E8745764">Overview of SQLJ DMS Support</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661">Summary of SQLJ Command-Line Options for DMS</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-2AE24805-697C-4C28-9E27-1301DBD100C7">SQLJ Run-Time Commands and Properties File Settings for DMS</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-994A9604-3FD1-4A2E-9378-4606E1863B33">SQLJ DMS Sensors and Metrics</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-AB176F74-4B1D-478E-A896-99FB750805F2">SQLJ DMS Examples</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ776"></a><div class="props_rev_3"><a id="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764" name="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764"></a><h4 id="JSQLJ-GUID-5C441E4C-075B-46E3-A518-A5D6E8745764" class="sect4">Overview of SQLJ DMS Support</h4>
                  <div>
                     <p>DMS enables users to measure performance statistics for SQLJ programs. SQLJ support for DMS focuses on the overall performance per SQL statement, such as its execution time, but can also provide method-level or class-level performance information, such as with Oracle JDBC support for DMS. You can choose a client-side perspective, such as the overall performance of each <code class="codeph">#sql</code> statement, a server-side perspective, such as server-side tracing of each SQL operation, or both.
                     </p>
                     <p>Instrumenting a program, which is specified at translation time through SQLJ options, is required in order to enable DMS setup. Specifically, instrumenting is the process of inserting DMS calls into system or application code for measuring its performance.</p>
                     <p>At run time, any components that were instrumented during translation can be monitored during execution, according to instructions in a SQLJ DMS properties file. During run time, statistics are sent to DMS through DMS APIs. This requires a running DMS system in your environment. You can then access the statistics through DMS tools.</p>
                     <p>The statistics are intended to help you track and understand SQL statement performance and are reported according to the following hierarchy (from top to bottom):</p>
                     <ol>
                        <li>
                           <p>Application: The application, in this context, is defined to consist of the SQLJ and Java components specified in the SQLJ command line for translation. However, only the SQLJ components can be instrumented.</p>
                        </li>
                        <li>
                           <p>Module: A module corresponds to a Java package.</p>
                        </li>
                        <li>
                           <p>Action: An action maps to a Java class defined in a SQLJ program.</p>
                        </li>
                        <li>
                           <p>Statement: A statement is a SQL statement in a SQLJ program.</p>
                        </li>
                     </ol>
                     <p>The following DMS statistics are measured for client-side monitoring:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Elapsed time for each <code class="codeph">#sql</code> statement, including parsing and execution
                           </p>
                        </li>
                        <li>
                           <p>Get-next time, the time to execute each <code class="codeph">next()</code> call
                           </p>
                        </li>
                        <li>
                           <p>Get-XXX time, the time to extract a database column through each <code class="codeph">get</code><span class="italic"><code class="codeph">XXX</code></span><code class="codeph">()</code> call
                           </p>
                        </li>
                     </ul>
                     <p>These statistics require the DMS library to be in your classpath at both translation time and run time, so are not supported on the server, where the DMS library is not available. Server-side SQLJ code cannot be monitored in the way that client-side code can.</p>
                     <p>The following statistics are measured for server-side SQL monitoring of your SQLJ client program:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Parsing time</p>
                        </li>
                        <li>
                           <p>Execution time</p>
                        </li>
                        <li>
                           <p>Fetching time</p>
                        </li>
                     </ul>
                     <p>These statistics are available from the Oracle Database 12<span class="italic">c </span>Release 1 (12.1) trace file, through SQL tracing functionality. This is independent of DMS, but you can enable it through the SQLJ DMS properties file <code class="codeph">sqlmonitor.servertracing</code> setting.
                     </p>
                     <div class="infoboxnotealso" id="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764__GUID-877289C4-84BE-49AB-8D63-E824BF1D598A">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="performance-and-debugging.html#GUID-2AE24805-697C-4C28-9E27-1301DBD100C7">SQLJ Run-Time Commands and Properties File Settings for DMS</a>"</span></p>
                     </div>
                     <p>For a client-side SQLJ program, you can use both DMS statistics and server-side tracing. For example, from DMS you can get the total time required for a <code class="codeph">#sql</code> statement that consists of a query, then from server-side tracing you can find out how much of that time was actually spent executing the SQL query in the server.
                     </p>
                     <div class="infoboxnote" id="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764__GUID-2E4EA613-E409-4225-B644-E16F60A02F79">
                        <p class="notep1">Note:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>DMS support currently requires Oracle-specific code generation, which is enabled by default.</p>
                           </li>
                           <li>
                              <p>In Oracle Database 12<span class="italic">c </span>Release 1 (12.1), instrumented code requires Java Development Kit (JDK) 6.
                              </p>
                           </li>
                           <li>
                              <p>Only SQLJ declarations and statements are instrumented.</p>
                           </li>
                           <li>
                              <p>The DMS library is in the file <code class="codeph">dms.jar</code>, in <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/oc4j/lib</code> in Oracle Database 12<span class="italic">c </span>Release 1 (12.1) 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="JSQLJ777"></a><div class="props_rev_3"><a id="GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661" name="GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661"></a><h4 id="JSQLJ-GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661" class="sect4">Summary of SQLJ Command-Line Options for DMS</h4>
                  <div>
                     <p>FUTURE (post-10i/10.1): -components=append; multiple translation runs.</p>
                     <p>The Oracle SQLJ implementation provides following translator front-end options to support DMS:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">-instrument</code>: Enable instrumentation and designate a name for the application (the collective of the components being translated).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-components</code>: Specify the components (packages and classes) to be instrumented.
                           </p>
                        </li>
                     </ul>
                     <p>Typically you would enable instrumentation by specifying a desired application name in the <code class="codeph">-instrument</code> setting, optionally specifying a package as well. Or specify a setting of <code class="codeph">true</code> to use the default application, <code class="codeph">defaultApp</code>. For DMS instrumentation, the term application refers to all the SQLJ and Java components specified for translation in the SQLJ command line.
                     </p>
                     <p>If instrumentation is enabled, a SQLJ DMS properties file is created according to the <code class="codeph">-instrument</code> setting, starting from the current directory, and also according to any setting of the SQLJ <code class="codeph">-d</code> option. For a setting of <code class="codeph">true</code>, the properties file is named <code class="codeph">sqlmonitor.properties</code> in the current directory.
                     </p>
                     <div class="infoboxnote" id="GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661__GUID-B556D9B1-8919-421F-A5C4-58C0C5DBCE7C">
                        <p class="notep1">Note:</p>
                        <p>A setting of <code class="codeph">-instrument</code> is equivalent to <code class="codeph">-instrument=true</code>. A setting of <code class="codeph">-instrument=false</code> (the default) disables instrumentation.
                        </p>
                     </div>
                     <p>As a simple example, a setting of <code class="codeph">-instrument=myapp</code> will result in creation of the properties file <code class="codeph">myapp.properties</code>. Now consider the following example, for an application name of <code class="codeph">stock</code> and a package name of <code class="codeph">com.acme</code>:
                     </p><pre class="oac_no_warn" dir="ltr">% sqlj -instrument=com.acme/stock -d /home Stock.sqlj Trading.sqlj
</pre><p>Because of the <code class="codeph">-d</code> option, the <code class="codeph">/home/com/acme/stock.properties</code> file is created.
                     </p>
                     <p>When instrumentation is enabled through the<code class="codeph"> -instrument</code> option, use the <code class="codeph">-components</code> option to specify the subset of translated components to be instrumented for DMS monitoring, typically most or all of them to allow flexibility in what you can monitor during run time. Specify a comma-delimited list of packages (to instrument all classes in each package) or specific classes, or use the default <code class="codeph">all</code> setting to instrument all components being translated.
                     </p>
                     <p>For example, to instrument the classes <code class="codeph">Stock</code> and <code class="codeph">Trading</code>:
                     </p><pre class="oac_no_warn" dir="ltr">% sqlj ... -components=com.acme.Stock,com.acme.Trading
</pre><p>At run time, instrumented components are monitored according to what is specified in the SQLJ DMS properties file. Any components that are not instrumented during translation cannot be monitored during run time, regardless of what is specified in the properties file.</p>
                  </div>
               </div><a id="JSQLJ778"></a><div class="props_rev_3"><a id="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7" name="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7"></a><h4 id="JSQLJ-GUID-2AE24805-697C-4C28-9E27-1301DBD100C7" class="sect4">SQLJ Run-Time Commands and Properties File Settings for DMS</h4>
                  <div>
                     <p>While the SQLJ <code class="codeph">-instrument</code> option specifies whether the SQLJ translator instruments files for monitoring capability, it is the SQLJ DMS properties file that actually determines what is monitored and how, at run time.
                     </p>
                     <p>This properties file is created by SQLJ during translation, and then you can modify it as desired. Be aware that if you run SQLJ again, however, SQLJ overwrites the properties file. Any changes that you made are lost.</p>
                     <p>Settings in the SQLJ DMS properties file are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">sqlmonitor.components</code>: This is a comma-delimited list of components (packages or classes) that have been instrumented. This is set automatically by the translator to reflect the setting of the SQLJ <code class="codeph">-components</code> option.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.monitorcomp</code>: This is a comma-delimited list of components (packages or classes) to be monitored and denotes a subset of the components in the <code class="codeph">sqlmonitor.components</code> setting. The setting for <code class="codeph">sqlmonitor.monitorcomp</code> is initially determined during translation to reflect the <code class="codeph">sqlmonitor.components</code> setting, but you can then adjust it as desired. A setting of <code class="codeph">all</code> means to monitor all components listed in the <code class="codeph">sqlmonitor.components</code> setting.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.dms</code>: This boolean flag, with a default value of <code class="codeph">true</code>, specifies whether to deliver collected statistics to DMS. This requires a running Oracle Application Server 10<span class="italic">g</span> instance where you can use DMS tools. Statistics can be accessed through a Web browser or written into a file.
                           </p>
                           <div class="infoboxnote" id="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7__GUID-0539F721-4034-4FBE-9A24-80C3C9EF7C21">
                              <p class="notep1">Note:</p>
                              <p>A setting of <code class="codeph">sqlmonitor.dms=false</code> is not currently supported.
                              </p>
                           </div>
                           <p>FUTURE (post-10i/10.1): Support for sqlmonitor.dms=false. (Is DMS library still required if sqlmonitor.dms=false?)</p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.sysurl</code>: For server-side tracing, this specifies the database URL.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.sysuser</code>: For server-side tracing, this specifies the database user. This user must have <code class="codeph">sysdba</code> privileges.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.syspassword</code>: For server-side tracing, this specifies the password for the <code class="codeph">sysuser</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7__GUID-38EC633F-2F20-4B73-BC0D-AEA922DA8F1D">
                              <p class="notep1">Note:</p>
                              <p>For <code class="codeph">sysurl</code>, <code class="codeph">sysuser</code>, and <code class="codeph">syspassword</code>, default values are according to the <code class="codeph">user</code>, <code class="codeph">password</code>, and <code class="codeph">url</code> values supplied to SQLJ, either through the SQLJ command line or through the SQLJ properties file.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.servertracing</code>: Use this to enable server-side tracing, to collect performance statistics in the server, such as for SQL operations. Supported settings are <code class="codeph">true</code> or <code class="codeph">false</code> (the default).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.dumpfile</code>: If delivering statistics to DMS, then you can use this option to specify a file into which the DMS tool writes the statistics. The default is <span class="italic"><code class="codeph">application_name</code></span><code class="codeph">.mtr</code>, where <span class="italic"><code class="codeph">application_name</code></span> is according to the <code class="codeph">-instrument</code> option setting (or is <code class="codeph">defaultApp</code> by default).
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSQLJ779"></a><div class="props_rev_3"><a id="GUID-994A9604-3FD1-4A2E-9378-4606E1863B33" name="GUID-994A9604-3FD1-4A2E-9378-4606E1863B33"></a><h4 id="JSQLJ-GUID-994A9604-3FD1-4A2E-9378-4606E1863B33" class="sect4">SQLJ DMS Sensors and Metrics</h4>
                  <div>
                     <p>Sensors are used by DMS to calculate performance metrics during the execution of instrumented SQLJ programs and delivered to DMS. They are organized as a hierarchy, with each sensor having a path name. Here are typical sensor formats:</p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">sensor_name</span>
/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">sensor_name</span>
/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">sensor_name</span>
/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/<span class="italic">sensor_name</span>
</pre><p>A sensor is an instance of the <code class="codeph">oracle.dms.instrument.Sensor</code> class, which has methods for calculating and organizing performance statistics. For example, there are methods to instruct the sensor to derive additional metrics and to get the value of one of the metrics.
                     </p>
                     <p>Be aware that before the end of an instrumented application, there must be a call to the <code class="codeph">close()</code> method of the <code class="codeph">oracle.sqlj.runtime.sqlmonitor.SQLMonitor</code> class, such as in the following example (which also uses the <code class="codeph">Oracle</code> class <code class="codeph">close()</code> method to close the connection context):
                     </p><pre class="oac_no_warn" dir="ltr">try
{
   Oracle.close();
   oracle.sqlj.runtime.sqlmonitor.SQLMonitor.close();
} 
catch( Throwable e ) { ... }
</pre><p>Note the following terms:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <span class="italic"><code class="codeph">application_name</code></span> is the name of the application according to the SQLJ <code class="codeph">-instrument</code> option, or <code class="codeph">defaultApp</code> by default.
                           </p>
                        </li>
                        <li>
                           <p>If a sensor is associated with a package, then the item <span class="italic"><code class="codeph">module</code></span> is the package name. The setting <code class="codeph">*TopLevel*</code> is used if the package name is empty.
                           </p>
                        </li>
                        <li>
                           <p>If a sensor is associated with a class, then <span class="italic"><code class="codeph">class</code></span> is the class name.
                           </p>
                        </li>
                        <li>
                           <p>If a sensor is associated with a SQL statement, then <span class="italic"><code class="codeph">linenum</code></span> denotes the line number of the SQL statement in the SQLJ program being instrumented. If multiple SQL statements appear in the same line, then their starting column positions are used to distinguish them. For example, a <span class="italic"><code class="codeph">linenum</code></span> value of 8.13 indicates that 8 is the line number and 13 is the column number.
                           </p>
                        </li>
                     </ul>
                     <p>The following sensors and associated metrics are typically of particular interest:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Sensor name: <code class="codeph">ContextType</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/ContextType
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">value</code>: A string indicating the connection context type
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Sensor name: <code class="codeph">SQLString</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/SQLString
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">value</code>: A string consisting of the SQL statement
                                 </p>
                                 <p>This is the exact string that is passed to JDBC, including any transformations made from the original <code class="codeph">#sql</code> statement.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Sensor name: <code class="codeph">Execute</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/Execute
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">time</code>: The total time, in milliseconds, of all the executions of the JDBC <code class="codeph">execute()</code> method for this statement
                                 </p>
                                 <p>If the statement executes five times, for example, then <code class="codeph">time</code> would be the total time spent in the <code class="codeph">execute()</code> method for the five executions.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">completed</code>: The number of executions completed (such as 5)
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">minTime</code>: The shortest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxTime</code>: The longest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">avg</code>: The average execution time, which is <code class="codeph">time</code> divided by <code class="codeph">completed</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">active</code>: The number of threads executing the statement at the end of program execution, typically 0.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxActive</code>: The maximum number of threads that executed the statement during program execution
                                 </p>
                              </li>
                           </ul>
                           <p>To measure the execution time of a JDBC statement, the clock is started immediately before the statement is executed and stopped when a result set is obtained or the statement otherwise finishes executing, or when an exception is caught.</p>
                        </li>
                        <li>
                           <p>Sensor name: <code class="codeph">ServerExecute</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/ServerExecute
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">value</code>: The total execution time in the server, in milliseconds, for all executions of this SQL statement
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">count</code>: The number of executions completed
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">minValue</code>: The shortest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxValue</code>: The longest time of any single execution
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Sensor name: <code class="codeph">ServerFetch</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/ServerFetch
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">value</code>: The total fetch time in the server, in milliseconds, for all executions of this SQL statement
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">count</code>: The number of executions completed
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">minValue</code>: The shortest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxValue</code>: The longest time of any single execution
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Sensor name: <code class="codeph">ServerParse</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/ServerParse
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">value</code>: The total time spent parsing the SQL statement in the server, in milliseconds, for all executions of this SQL statement
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">count</code>: The number of executions completed
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">minValue</code>: The shortest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxValue</code>: The longest time of any single execution
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Sensor name: <code class="codeph">Next</code></p><pre class="oac_no_warn" dir="ltr">/SQLJ/<span class="italic">application_name</span>/<span class="italic">module</span>/<span class="italic">class</span>/<span class="italic">linenum</span>/Next
</pre><p>Metrics:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">time</code>: The total time, in milliseconds, spent in the <code class="codeph">next()</code> method of the result set iterator for all executions of this SQL statement
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">completed</code>: The number of executions completed (such as 5)
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">minTime</code>: The shortest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxTime</code>: The longest time of any single execution
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">avg</code>: The average execution time, which is <code class="codeph">time</code> divided by <code class="codeph">count</code>.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">active</code>: The number of threads executing the statement at the end of program execution, typically 0.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxActive</code>: The maximum number of threads that executed the statement during program execution
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSQLJ781"></a><a id="JSQLJ782"></a><a id="JSQLJ783"></a><a id="JSQLJ784"></a><a id="JSQLJ780"></a><div class="props_rev_3"><a id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2" name="GUID-AB176F74-4B1D-478E-A896-99FB750805F2"></a><h4 id="JSQLJ-GUID-AB176F74-4B1D-478E-A896-99FB750805F2" class="sect4">SQLJ DMS Examples</h4>
                  <div>
                     <div class="section">
                        <p>Following is a sample command line (a single wraparound line) to instrument the SQLJ program <code class="codeph">ExprDemo.sqlj</code>:
                        </p><pre class="oac_no_warn" dir="ltr">% sqlj -dir=. -instrument=a.b.c/app -components=all 
       -user=HR -url=jdbc:oracle:oci:@ ExprDemo.sqlj
Password: <span class="italic">password</span>
</pre><div class="infoboxnote" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-88E82C9D-46C6-4E2B-A977-742F2D148C9F">
                           <p class="notep1">Note:</p>
                           <p>Ensure that <code class="codeph">dms.jar</code> is in your classpath.
                           </p>
                        </div>
                        <p>This command results in generation of the following files:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">./a/b/c/ExprDemo.java</code> (due to the <code class="codeph">-dir</code> option setting and because package <code class="codeph">a.b.c</code> is declared in <code class="codeph">ExprDemo.sqlj</code>)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">./a/b/c/app.properties</code> (due to the <code class="codeph">-instrument</code> option setting)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-4433A73D-AF98-4C06-8259-5EF894333864">Sample SQLJ DMS Properties File</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The following is sample content for <code class="codeph">app.properties</code>. This assumes you edited the file after SQLJ created it, given that some of the settings here are nondefault.
                        </p><pre class="oac_no_warn" dir="ltr">sqlmonitor.components=all
sqlmonitor.monitorcomp=all
sqlmonitor.dms=true
sqlmonitor.servertracing=true
sqlmonitor.sysurl=jdbc:oracle:oci:@
sqlmonitor.sysuser=HR
sqlmonitor.syspassword=hr
sqlmonitor.dumpfile=a/b/c/app.mtr
</pre><div class="infoboxnote" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-5224214C-04D9-49FB-B7E1-1B1ABCCAC17D">
                           <p class="notep1">Note:</p>
                           <p>If you run the SQLJ translator again, then <code class="codeph">app.properties</code> is overwritten and you will lose any changes you made.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-F6F65F5E-A897-4EEF-BF8F-562B902F45D9">Sample Statistics</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The <code class="codeph">sqlmonitor.dms=true</code> setting specifies that monitoring statistics are to be delivered to DMS. Given the <code class="codeph">sqlmonitor.dumpfile</code> value, the DMS tool writes the statistics to the <code class="codeph">./a/b/c/app.mtr</code> file when you compile and run the program. 
                        </p>
                        <p>To examine statistics for a particular code sample, here is a segment of <code class="codeph">ExprDemo.sqlj</code>:
                        </p><pre class="oac_no_warn" dir="ltr">     #sql
     {
       DECLARE
         n NUMBER;
         s NUMBER;
       BEGIN
         n := 0;
         s := 0;
         WHILE n &lt; 100 LOOP
           n := n + 1;
           s := s + :IN (indx++);
         END LOOP;
         :OUT total := s;
       END;
     };
</pre><p>And here is a segment of statistics from <code class="codeph">app.mtr</code>, relating to the preceding code example and showing the execution time and server execution times:
                        </p><pre class="oac_no_warn" dir="ltr">       SQLString.value:      DECLARE         n NUMBER;        s NUMBER;
       BEGIN         n :=  0;         s := 0;       WHILE n &lt; 100 LOOP 
             n := n + 1;
             s := s +  :1 ;         
       END LOOP;          :2  := s;       END; statement SQL string
            ServerExecute.maxValue:       20.0 server_execute_time
            ServerExecute.minValue:       20.0 server_execute_time
            ServerExecute.count:  0 ops
            ServerExecute.value:  20.0 server execute time
            ServerFetch.maxValue: 0.0 server_fetch_time
            ServerFetch.minValue: 0.0 server_fetch_time
            ServerFetch.count:    0 ops
            ServerFetch.value:    0.0 server fetch time
            ServerParse.maxValue: 0.0 server_parse_time
            ServerParse.minValue: 0.0 server_parse_time
            ServerParse.count:    0 ops
            ServerParse.value:    0.0 server parse time
           193.5
            ContextType.value:    class sqlj.runtime.ref.DefaultContext
       statement connection context
            Execute.maxActive:    1 threads
            Execute.active:       0 threads
            Execute.avg:  37.0 msecs
            Execute.maxTime:      37 msecs
            Execute.minTime:      37 msecs
            Execute.completed:    1 ops
            Execute.time: 37 msecs
</pre><p>These statistics indicate that the total execution time at the JDBC client was 37 milliseconds (in one execution), while the execution time in the server was 20 milliseconds.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-8802F6C4-6A70-4BAF-BF5F-949C6C7E4662">Sample Statistics for Iterators</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ExprDemo.sqlj</code> also defines and executes an iterator type, <code class="codeph">Iter</code>, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">   #sql public static iterator Iter(String ename);

      ....

     Iter iter;
     #sql iter = { select first_name from employees};
     while (iter.next())
     {
      System.out.println(iter.ename());
     }
</pre><p>For iterators, DMS collects the execution time for the <code class="codeph">next()</code> operation. Here is a sample DMS result for the iterator type <code class="codeph">Iter</code>:
                        </p><pre class="oac_no_warn" dir="ltr">         Iter
          Next.time:    5 msecs
</pre><p>This shows that the total time spent on the <code class="codeph">next()</code> operation while iterating through the <code class="codeph">Iter</code> instance was 5 milliseconds.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-672B51D7-7549-4FFF-BEEA-8E9E80A655CC">Sample Statistics for Connection Contexts</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The <code class="codeph">#sql</code> statements in <code class="codeph">ExprDemo.sqlj</code> use the default connection context. For the <code class="codeph">DefaultContext</code> instance used throughout the program, DMS returns the following statistics:
                        </p><pre class="oac_no_warn" dir="ltr">         class_sqlj.runtime.ref.DefaultContext
         StmtCacheSize.value:  5 statement cache size
         StmtsExecuted.count:  7 ops
         StmtsCacheExecuted.count:     7 ops
</pre><p>This shows that the context has a statement cache size of five statements. Altogether, seven SQL statements are executed.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00101.regexp.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Regular Expressions in Database Applications</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="sql-data-types.html" title="Previous" type="text/html">
      <link rel="next" href="indexes.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-data-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="indexes.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">SQL for Application Developers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Regular Expressions in Database Applications</li>
            </ol>
            <a id="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2" name="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2"></a><a id="ADFNS1004"></a><a id="ADFNS1003"></a>
            
            <h2 id="ADFNS-GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2" class="sect2"><span class="enumeration_chapter">10 </span>Using Regular Expressions in Database Applications
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='regexp'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>This chapter describes regular expressions and explains how to use them in database applications.</p>
               <div class="section">
                  <p class="subhead1" id="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2__GUID-66C947DE-2E26-4F26-8048-D1659991D762">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="regexp.html#GUID-7F803232-421D-4499-9339-E383722D10E9">Overview of Regular Expressions</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B">Oracle SQL Support for Regular Expressions</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47">Oracle SQL and POSIX Regular Expression Standard</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-C21037C2-0C75-4DFE-BB02-50B331145436">Operators in Oracle SQL Regular Expressions</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC" title="When you create a table, you can enforce formats with regular expressions.The INSERT INTO SQL statement can be used to test how correct and incorrect formats work.">Using Regular Expressions in SQL Statements: Scenarios</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2__GUID-71D5960A-5119-4316-873B-41F843CA0E89">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../nlspg/linguistic-sorting-and-matching.html#NLSPG0052" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information about using SQL regular expression functions in a multilingual environment
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Oracle Regular Expressions Pocket Reference</span> by Jonathan Gennick, O'Reilly &amp; Associates
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">Mastering Regular Expressions</span> by Jeffrey E. F. Friedl, O'Reilly &amp; Associates
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADFNS1013"></a><div class="props_rev_3"><a id="GUID-7F803232-421D-4499-9339-E383722D10E9" name="GUID-7F803232-421D-4499-9339-E383722D10E9"></a><h3 id="ADFNS-GUID-7F803232-421D-4499-9339-E383722D10E9" class="sect3">Overview of Regular Expressions</h3>
               <div>
                  <p>A regular expression specifies a search pattern, using <span class="bold">metacharacters</span> (which are, or belong to, <span class="bold">operators</span>) and <span class="bold">character literals</span> (described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00218" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>).
                  </p>
                  <p>The search pattern can be complex. For example, this regular expression matches any string that begins with either <code class="codeph">f</code> or <code class="codeph">ht</code>, followed by <code class="codeph">tp</code>, optionally followed by <code class="codeph">s</code>, followed by the colon (<code class="codeph">:</code>):
                  </p><pre class="oac_no_warn" dir="ltr">(f|ht)tps?:
</pre><p>The metacharacters (which are also operators) in the preceding example are the parentheses, the pipe symbol (<code class="codeph">|</code>), and the question mark (<code class="codeph">?</code>). The character literals are <code class="codeph">f</code>, <code class="codeph">ht</code>, <code class="codeph">tp</code>, <code class="codeph">s</code>, and the colon (<code class="codeph">:</code>).
                  </p>
                  <p>Parentheses group multiple pattern elements into a single element. The pipe symbol (<code class="codeph">|</code>) indicates a choice between the elements on either side of it, <code class="codeph">f</code> and <code class="codeph">ht</code>. The question mark (<code class="codeph">?</code>) indicates that the preceding element, <code class="codeph">s</code>, is optional. Thus, the preceding regular expression matches these strings:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">http:</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">https:</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ftp:</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ftps:</code></p>
                     </li>
                  </ul>
                  <p>Regular expressions are a powerful text-processing component of the programming languages Java and PERL. For example, a PERL script can read the contents of each HTML file in a directory into a single string variable and then use a regular expression to search that string for URLs. This robust pattern-matching functionality is one reason that many application developers use PERL.</p>
               </div>
            </div><a id="ADFNS1007"></a><a id="ADFNS237"></a><a id="ADFNS9999"></a><div class="props_rev_3"><a id="GUID-F14733F3-B943-4BAD-8489-F9704986386B" name="GUID-F14733F3-B943-4BAD-8489-F9704986386B"></a><h3 id="ADFNS-GUID-F14733F3-B943-4BAD-8489-F9704986386B" class="sect3">Oracle SQL Support for Regular Expressions</h3>
               <div>
                  <p>Oracle SQL support for regular expressions lets application developers implement complex pattern-matching logic in the database, which is useful for these reasons:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>By centralizing pattern-matching logic in the database, you avoid intensive string processing of SQL results sets by middle-tier applications.</p>
                        <p>For example, life science customers often rely on PERL to do pattern analysis on bioinformatics data stored in huge databases of DNA and proteins. Previously, finding a match for a protein sequence such as <code class="codeph">[AG]</code>.<code class="codeph">{4}GK[ST]</code> was handled in the middle tier. The SQL regular expression functions move the processing logic closer to the data, thereby providing a more efficient solution.
                        </p>
                     </li>
                     <li>
                        <p>By using server-side regular expressions to enforce constraints, you avoid duplicating validation logic on multiple clients.</p>
                     </li>
                  </ul>
                  <p>Oracle SQL supports regular expressions with the pattern-matching condition and functions summarized in <a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDIAFEI" title="This table summarizes the Oracle SQL pattern-matching condition and functions. The first column gives the names of the condition and functions, which are links to their topics in SQLRF. The second column briefly describes them.">Table 10-1</a>. Each pattern matcher searches a given string for a given pattern (described with a regular expression), and each has the pattern-matching options described in <a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="This table summarizes the Perl-influenced matching operators.">Table 10-2</a>. The functions have additional options (for example, the character position at which to start searching the string for the pattern).
                  </p>
                  <div class="tblformal" id="GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDIAFEI">
                     <p class="titleintable">Table 10-1 Oracle SQL Pattern-Matching Condition and Functions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle SQL Pattern-Matching Condition and Functions" summary="This table summarizes the  Oracle SQL pattern-matching condition and functions. The first column gives the names of the condition and functions, which are links to their topics in SQLRF. The second column briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d43459e514">Name</th>
                              <th align="left" valign="bottom" width="74%" id="d43459e517">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e522" headers="d43459e514 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00501" target="_blank"><code class="codeph">REGEXP_LIKE</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e522 d43459e517 ">
                                 <p><span class="bold">Condition</span> that can appear in the <code class="codeph">WHERE</code> clause of a query, causing the query to return rows that match the given pattern.
                                 </p>
                                 <p><span class="bold">Example:</span> This <code class="codeph">WHERE</code> clause identifies employees with the first name of Steven or Stephen:
                                 </p><pre class="oac_no_warn" dir="ltr">WHERE REGEXP_LIKE((hr.employees.first_name, '^Ste(v|ph)en$')</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e546" headers="d43459e514 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20014" target="_blank"><code class="codeph">REGEXP_COUNT</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e546 d43459e517 ">
                                 <p><span class="bold">Function</span> that returns the number of times the given pattern appears in the given string.
                                 </p>
                                 <p><span class="bold">Example:</span> This function invocation returns the number of times that <code class="codeph">e</code> (but not <code class="codeph">E</code>) appears in the string <code class="codeph">'Albert Einstein'</code>, starting at character position 7:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_COUNT('Albert Einstein', 'e', 7, 'c')
</pre><p>(The returned value is 1, because the <code class="codeph">c</code> option specifies case-sensitive matching.)
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e578" headers="d43459e514 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF06300" target="_blank"><code class="codeph">REGEXP_INSTR</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e578 d43459e517 ">
                                 <p><span class="bold">Function</span> that returns an integer that indicates the starting position of the given pattern in the given string. Alternatively, the integer can indicate the position immediately following the end of the pattern.
                                 </p>
                                 <p><span class="bold">Example:</span> This function invocation returns the starting position of the first valid email address in the column <code class="codeph">hr</code>.<code class="codeph">employees</code>.<code class="codeph">email</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_INSTR(hr.employees.email, '\w+@\w+(\.\w+)+')
</pre><p>If the returned value is greater than zero, then the column contains a valid email address.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e607" headers="d43459e514 ">
                                 <p><a href="../sqlrf/REGEXP_REPLACE.html#SQLRF06302" target="_blank"><code class="codeph">REGEXP_REPLACE</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e607 d43459e517 ">
                                 <p><span class="bold">Function</span> that returns the string that results from replacing occurrences of the given pattern in the given string with a replacement string.
                                 </p>
                                 <p><span class="bold">Example:</span> This function invocation puts a space after each character in the column <code class="codeph">hr</code>.<code class="codeph">countries</code>.<code class="codeph">country_name</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_REPLACE(hr.countries.country_name, '(.)', '\1 ')</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e634" headers="d43459e514 ">
                                 <p><a href="../sqlrf/REGEXP_SUBSTR.html#SQLRF06303" target="_blank"><code class="codeph">REGEXP_SUBSTR</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e634 d43459e517 ">
                                 <p><span class="bold">Function</span> that is like <code class="codeph">REGEXP_INSTR</code> except that instead of returning the starting position of the given pattern in the given string, it returns the matching substring itself.
                                 </p>
                                 <p><span class="bold">Example:</span> This function invocation returns <code class="codeph">'Oracle'</code> because the <code class="codeph">x</code> option ignores the spaces in the pattern:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR('Oracle 2010', 'O r a c l e', 1, 1, 'x')</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="This table summarizes the Perl-influenced matching operators.">Table 10-2</a> describes the pattern-matching options that are available to each pattern matcher in <a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDIAFEI" title="This table summarizes the Oracle SQL pattern-matching condition and functions. The first column gives the names of the condition and functions, which are links to their topics in SQLRF. The second column briefly describes them.">Table 10-1</a>.
                  </p>
                  <div class="tblformalwide" id="GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC">
                     <p class="titleintable">Table 10-2 Oracle SQL Pattern-Matching Options for Condition and Functions</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle SQL Pattern-Matching Options for Condition and Functions" summary="This table summarizes the Perl-influenced matching operators." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="17%" id="d43459e682">Pattern-Matching Option</th>
                              <th align="left" valign="bottom" width="34%" id="d43459e685">Description</th>
                              <th align="left" valign="bottom" width="49%" id="d43459e688">Example</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e693" headers="d43459e682 ">
                                 <p><code class="codeph">i</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e693 d43459e685 ">
                                 <p>Specifies case-insensitive matching.</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e693 d43459e688 ">
                                 <p>This function invocation returns 3:</p><pre class="oac_no_warn" dir="ltr">REGEXP_COUNT('Albert Einstein', 'e', '<span class="bold">i</span>')</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e709" headers="d43459e682 ">
                                 <p><code class="codeph">c</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e709 d43459e685 ">
                                 <p>Specifies case-sensitive matching.</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e709 d43459e688 ">
                                 <p>This function invocation returns 2:</p><pre class="oac_no_warn" dir="ltr">REGEXP_COUNT('Albert Einstein', 'e', '<span class="bold">c</span>')</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e725" headers="d43459e682 ">
                                 <p><code class="codeph">n</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e725 d43459e685 ">
                                 <p>Allows the Dot operator (<code class="codeph">.</code>) to match the newline character, which is not the default (see <a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="This table summarizes the POSIX metacharacters supported in Oracle Database regular expressions.">Table 10-3</a>).
                                 </p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e725 d43459e688 ">
                                 <p>In this function invocation, the string and search pattern match only because the <code class="codeph">n</code> option is specified:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR('a'||CHR(10)||'d', 'a.d', 1, 1, '<span class="bold">n</span>')</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e752" headers="d43459e682 ">
                                 <p><code class="codeph">m</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e752 d43459e685 ">
                                 <p>Specifies <span class="bold">multiline mode</span>, where a newline character inside a string terminates a line. The string can contain multiple lines.
                                 </p>
                                 <p>Multiline mode affects POSIX operators Beginning-of-Line Anchor (<code class="codeph">^</code>) and End-of-Line Anchor (<code class="codeph">$</code>) (described in <a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="This table summarizes the POSIX metacharacters supported in Oracle Database regular expressions.">Table 10-3</a>) but not PERL-influenced operators <code class="codeph">\A</code>, <code class="codeph">\Z</code>, and <code class="codeph">\z</code> (described in <a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ" title="Describes the Perl-influenced extensions in Oracle regular expressions.">Table 10-5</a>).
                                 </p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e752 d43459e688 ">
                                 <p>This function invocation returns <code class="codeph">ac</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR('ab'||CHR(10)||'ac', '^a.', 1, 2, '<span class="bold">m</span>')</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e802" headers="d43459e682 ">
                                 <p><code class="codeph">x</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e802 d43459e685 ">
                                 <p>Ignores whitespace characters in the search pattern. By default, whitespace characters match themselves.</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e802 d43459e688 ">
                                 <p>This function invocation returns <code class="codeph">abcd</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR('abcd', 'a b c d', 1, 1, '<span class="bold">x</span>')</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-F14733F3-B943-4BAD-8489-F9704986386B__NOTE-134-C8CC6FBE">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF51178" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> fore more information about single row functions
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS231"></a><div class="props_rev_3"><a id="GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47" name="GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47"></a><h3 id="ADFNS-GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47" class="sect3">Oracle SQL and POSIX Regular Expression Standard</h3>
               <div>
                  <p>Oracle SQL implementation of regular expressions conforms to these standards:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>IEEE Portable Operating System Interface (POSIX) standard draft 1003.2/D11.2</p>
                        <p>Oracle SQL follows exactly the syntax and matching semantics for regular expression operators as defined in the POSIX standard for matching ASCII (English language) data.</p>
                     </li>
                     <li>
                        <p>Unicode Regular Expression Guidelines of the Unicode Consortium</p>
                     </li>
                  </ul>
                  <p>Oracle SQL extends regular expression support beyond the POSIX standard in these ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Extends the matching capabilities for multilingual data</p>
                     </li>
                     <li>
                        <p>Supports some commonly used PERL regular expression operators that are not included in the POSIX standard but do not conflict with it (for example, character class shortcuts and the nongreedy modifier (<code class="codeph">?</code>))
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47__GUID-C1A46660-EC29-4284-AEE2-BC56F7FC6965">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B">POSIX Operators in Oracle SQL Regular Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=regex_pubs_opengroup" target="_blank">POSIX Regular Expressions Specification</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A">Oracle SQL Multilingual Extensions to POSIX Standard</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C">Oracle SQL PERL-Influenced Extensions to POSIX Standard</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1014"></a><a id="ADFNS00401"></a><div class="props_rev_3"><a id="GUID-C21037C2-0C75-4DFE-BB02-50B331145436" name="GUID-C21037C2-0C75-4DFE-BB02-50B331145436"></a><h3 id="ADFNS-GUID-C21037C2-0C75-4DFE-BB02-50B331145436" class="sect3">Operators in Oracle SQL Regular Expressions</h3>
               <div>
                  <p>Oracle SQL supports a set of common operators (composed of metacharacters) used in regular expressions.</p>
                  <div class="infoboxnote" id="GUID-C21037C2-0C75-4DFE-BB02-50B331145436__GUID-FACB33AC-6115-4D36-B2F0-6AE42A99B96A">
                     <p class="notep1">Caution:</p>
                     <p>The interpretation of metacharacters differs between tools that support regular expressions. If you are porting regular expressions from another environment to Oracle Database, ensure that Oracle SQL supports their syntax and interprets them as you expect.</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C21037C2-0C75-4DFE-BB02-50B331145436__GUID-A9E88CD4-8311-40DB-8F19-5E7B520A376A">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B">POSIX Operators in Oracle SQL Regular Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A">Oracle SQL Multilingual Extensions to POSIX Standard</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C">Oracle SQL PERL-Influenced Extensions to POSIX Standard</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS232"></a><a id="ADFNS1012"></a><div class="props_rev_3"><a id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B" name="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B"></a><h4 id="ADFNS-GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B" class="sect4">POSIX Operators in Oracle SQL Regular Expressions</h4>
                  <div>
                     <p><a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="This table summarizes the POSIX metacharacters supported in Oracle Database regular expressions.">Table 10-3</a> summarizes the POSIX operators defined in the POSIX standard Extended Regular Expression (ERE) syntax. Oracle SQL follows the exact syntax and matching semantics for these operators as defined in the POSIX standard for matching ASCII (English language) data. Any differences in action between Oracle SQL and the POSIX standard are noted in the Description column.
                     </p>
                     <div class="tblformalwide" id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI">
                        <p class="titleintable">Table 10-3 POSIX Operators in Oracle SQL Regular Expressions</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="POSIX Operators in Oracle SQL Regular Expressions" summary="This table summarizes the POSIX metacharacters supported in Oracle Database regular expressions." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d43459e1249">Operator Syntax</th>
                                 <th align="left" valign="bottom" width="16%" id="d43459e1252">Names</th>
                                 <th align="left" valign="bottom" width="41%" id="d43459e1255">Description</th>
                                 <th align="left" valign="bottom" width="28%" id="d43459e1258">Examples</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1263" headers="d43459e1249 ">
                                    <p><code class="codeph">.</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1263 d43459e1252 ">
                                    <p>Any Character</p>
                                    <p>Dot</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1263 d43459e1255 ">
                                    <p>Matches any character in the database character set, including the newline character if you specify matching option <code class="codeph">n</code> (see <a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="This table summarizes the Perl-influenced matching operators.">Table 10-2</a>).
                                    </p>
                                    <p>The Linux, UNIX, and Windows platforms recognize the newline character as the linefeed character (<code class="codeph">\x0a</code>).
                                    </p>
                                    <p>The Macintosh platforms recognize the newline character as the carriage return character (<code class="codeph">\x0d</code>).
                                    </p>
                                    <p><span class="bold">Note:</span> In the POSIX standard, this operator matches any English character except NULL and the newline character.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1263 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">a.b</code></span> matches the strings <code class="codeph">abb</code>, <code class="codeph">acb</code>, and <code class="codeph">adb</code>, but does not match <code class="codeph">acc</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1317" headers="d43459e1249 ">
                                    <p><code class="codeph">+</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1317 d43459e1252 ">
                                    <p>One or More</p>
                                    <p>Plus Quantifier</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1317 d43459e1255 ">
                                    <p>Matches one or more occurrences of the preceding subexpression (greedy<a id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDJFDHH" name="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDJFDHH" href="#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDJFDHH" onclick="footdisplay(1, "A greedy operator matches as many occurrences as possible while allowing the rest of the match to succeed. To make the operator nongreedy, follow it with the nongreedy modifier (?) (see Table 10-5).")"><sup>Foot&nbsp;1</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1317 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">a+</code></span> matches the strings <code class="codeph">a</code>, <code class="codeph">aa</code>, and <code class="codeph">aaa</code>, but does not match <code class="codeph">ba</code> or <code class="codeph">ab</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1368" headers="d43459e1249 ">
                                    <p><code class="codeph">*</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1368 d43459e1252 ">
                                    <p>Zero or More</p>
                                    <p>Star Quantifier</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1368 d43459e1255 ">
                                    <p>Matches zero or more occurrences of the preceding subexpression (greedy<a id="fnsrc_d43459e1380" name="fnsrc_d43459e1380" href="#fnsrc_d43459e1380" onclick="footdisplay(1, "A greedy operator matches as many occurrences as possible while allowing the rest of the match to succeed. To make the operator nongreedy, follow it with the nongreedy modifier (?) (see Table 10-5).")"><sup>Footref&nbsp;1</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1368 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">ab*c</code></span> matches the strings <code class="codeph">ac</code>, <code class="codeph">abc</code>, and <code class="codeph">abbc</code>, but does not match <code class="codeph">abb</code> or <code class="codeph">bbc</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1407" headers="d43459e1249 ">
                                    <p><code class="codeph">?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1407 d43459e1252 ">
                                    <p>Zero or One</p>
                                    <p>Question Mark Quantifier</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1407 d43459e1255 ">
                                    <p>Matches zero or one occurrences of the preceding subexpression (greedy<a id="fnsrc_d43459e1419" name="fnsrc_d43459e1419" href="#fnsrc_d43459e1419" onclick="footdisplay(1, "A greedy operator matches as many occurrences as possible while allowing the rest of the match to succeed. To make the operator nongreedy, follow it with the nongreedy modifier (?) (see Table 10-5).")"><sup>Footref&nbsp;1</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1407 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">ab?c</code></span> matches the strings <code class="codeph">abc</code> and <code class="codeph">ac</code>, but does not match <code class="codeph">abbc</code> or <code class="codeph">adc</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1442" headers="d43459e1249 ">
                                    <p><code class="codeph">{</code><span class="italic"><code class="codeph">m</code></span><code class="codeph">}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1442 d43459e1252 ">
                                    <p>Interval</p>
                                    <p>Exact Count</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1442 d43459e1255 ">
                                    <p>Matches exactly <span class="italic"><code class="codeph">m</code></span> occurrences of the preceding subexpression.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1442 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">a{3}</code></span> matches the string <code class="codeph">aaa</code>, but does not match <code class="codeph">aa</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1477" headers="d43459e1249 ">
                                    <p><code class="codeph">{</code><span class="italic"><code class="codeph">m</code></span><code class="codeph">,}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1477 d43459e1252 ">
                                    <p>Interval</p>
                                    <p>At-Least Count</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1477 d43459e1255 ">
                                    <p>Matches at least <span class="italic"><code class="codeph">m</code></span> occurrences of the preceding subexpression (greedy<a id="fnsrc_d43459e1498" name="fnsrc_d43459e1498" href="#fnsrc_d43459e1498" onclick="footdisplay(1, "A greedy operator matches as many occurrences as possible while allowing the rest of the match to succeed. To make the operator nongreedy, follow it with the nongreedy modifier (?) (see Table 10-5).")"><sup>Footref&nbsp;1</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1477 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">a{3,}</code></span> matches the strings <code class="codeph">aaa</code> and <code class="codeph">aaaa</code>, but does not match <code class="codeph">aa</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1518" headers="d43459e1249 ">
                                    <p><code class="codeph">{</code><span class="italic"><code class="codeph">m</code></span><code class="codeph">,</code><span class="italic"><code class="codeph">n</code></span><code class="codeph">}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1518 d43459e1252 ">
                                    <p>Interval</p>
                                    <p>Between Count</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1518 d43459e1255 ">
                                    <p>Matches at least <span class="italic"><code class="codeph">m</code></span> but not more than <span class="italic"><code class="codeph">n</code></span> occurrences of the preceding subexpression (greedy<a id="fnsrc_d43459e1548" name="fnsrc_d43459e1548" href="#fnsrc_d43459e1548" onclick="footdisplay(1, "A greedy operator matches as many occurrences as possible while allowing the rest of the match to succeed. To make the operator nongreedy, follow it with the nongreedy modifier (?) (see Table 10-5).")"><sup>Footref&nbsp;1</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1518 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">a{3,5}</code></span> matches the strings <code class="codeph">aaa</code>, <code class="codeph">aaaa</code>, and <code class="codeph">aaaaa</code>, but does not match <code class="codeph">aa</code> or <code class="codeph">aaaaaa</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1575" headers="d43459e1249 ">
                                    <p><code class="codeph">[</code><span class="italic"><code class="codeph">char</code></span><code class="codeph">...]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1575 d43459e1252 ">
                                    <p>Matching Character List</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1575 d43459e1255 ">
                                    <p>Matches any single character in the list within the brackets. In the list, all operators except these are treated as literals:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Range operator: <code class="codeph">-</code></p>
                                       </li>
                                       <li>
                                          <p>POSIX character class: <code class="codeph">[: :]</code></p>
                                       </li>
                                       <li>
                                          <p>POSIX collation element: <code class="codeph">[. .]</code></p>
                                       </li>
                                       <li>
                                          <p>POSIX character equivalence class: <code class="codeph">[= =]</code></p>
                                       </li>
                                    </ul>
                                    <p>A dash (<code class="codeph">-</code>) is a literal when it occurs first or last in the list, or as an ending range point in a range expression, as in <code class="codeph">[#--]</code>. A right bracket (<code class="codeph">]</code>) is treated as a literal if it occurs first in the list.
                                    </p>
                                    <p><span class="bold">Note:</span> In the POSIX standard, a range includes all collation elements between the start and end of the range in the linguistic definition of the current locale. Thus, ranges are linguistic rather than byte value ranges; the semantics of the range expression are independent of the character set. In Oracle Database, the linguistic range is determined by the <code class="codeph">NLS_SORT</code> initialization parameter.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1575 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">[abc]</code></span> matches the first character in the strings <code class="codeph">all</code>, <code class="codeph">bill</code>, and <code class="codeph">cold</code>, but does not match any characters in <code class="codeph">doll</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1649" headers="d43459e1249 ">
                                    <p><code class="codeph">[^</code><span class="italic"><code class="codeph">char</code></span><code class="codeph">...]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1649 d43459e1252 ">
                                    <p>Nonmatching Character List</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1649 d43459e1255 ">
                                    <p>Matches any single character <span class="italic">not</span> in the list within the brackets.
                                    </p>
                                    <p>For information about operators and ranges in the character list, see the description of the Matching Character List operator.</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1649 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">[^abc]def</code></span> matches the string <code class="codeph">xdef</code>, but not <code class="codeph">adef</code>, <code class="codeph">bdef</code>, or <code class="codeph">cdef</code>.
                                    </p>
                                    <p>The expression <span class="bold"><code class="codeph">[^a-i]x</code></span> matches the string <code class="codeph">jx</code>, but does not match <code class="codeph">ax</code>, <code class="codeph">fx</code>, or <code class="codeph">ix</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1707" headers="d43459e1249 ">
                                    <p><code class="codeph">[</code><span class="italic"><code class="codeph">alt1</code></span> <code class="codeph">|</code><span class="italic"><code class="codeph">alt2</code></span><code class="codeph">]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1707 d43459e1252 ">
                                    <p>Or</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1707 d43459e1255 ">
                                    <p>Matches either alternative.</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1707 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">a|b</code></span> matches the character <code class="codeph">a</code> or <code class="codeph">b</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1742" headers="d43459e1249 ">
                                    <p><code class="codeph">(</code><span class="italic"><code class="codeph">expr</code></span><code class="codeph">)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1742 d43459e1252 ">
                                    <p>Subexpression</p>
                                    <p>Grouping</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1742 d43459e1255 ">
                                    <p>Treats the expression within the parentheses as a unit. The expression can be a string or a complex expression containing operators.</p>
                                    <p>You can refer to a subexpression in a back reference.</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1742 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">(abc)?def</code></span> matches the strings <code class="codeph">abcdef</code> and <code class="codeph">def</code>, but does not match <code class="codeph">abcdefg</code> or <code class="codeph">xdef</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1782" headers="d43459e1249 ">
                                    <p><code class="codeph">\</code><span class="italic"><code class="codeph">n</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1782 d43459e1252 ">
                                    <p>Back Reference</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1782 d43459e1255 ">
                                    <p>Matches the <span class="italic">n</span><sup>th</sup> preceding subexpression, where <span class="italic"><code class="codeph">n</code></span> is an integer from 1 through 9. A back reference counts subexpressions from left to right, starting with the opening parenthesis of each preceding subexpression. The expression is invalid if fewer than <span class="italic">n</span> subexpressions precede <code class="codeph">\</code><span class="italic"><code class="codeph">n</code></span>.
                                    </p>
                                    <p>A back reference lets you search for a repeated string without knowing what it is.</p>
                                    <p>For the <code class="codeph">REGEXP_REPLACE</code> function, Oracle SQL supports back references in both the regular expression pattern and the replacement string.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1782 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">(abc|def)xy\1</code></span> matches the strings <code class="codeph">abcxyabc</code> and <code class="codeph">defxydef</code>, but does not match <code class="codeph">abcxydef</code> or <code class="codeph">abcxy</code>.
                                    </p>
                                    <p>The expression <span class="bold"><code class="codeph">^(.*)\1$</code></span> matches a line consisting of two adjacent instances of the same string.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1846" headers="d43459e1249 ">
                                    <p><code class="codeph">\</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1846 d43459e1252 ">
                                    <p>Escape Character</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1846 d43459e1255 ">
                                    <p>Treats the subsequent character as a literal.</p>
                                    <p>A backslash (\) lets you search for a character that would otherwise be treated as a metacharacter. Use consecutive backslashes (<code class="codeph">\\</code>) to match the backslash literal itself.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1846 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">abc\+def</code></span> matches the string <code class="codeph">abc+def</code>, but does not match <code class="codeph">abcdef</code> or <code class="codeph">abccdef</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1878" headers="d43459e1249 ">
                                    <p><code class="codeph">^</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1878 d43459e1252 ">
                                    <p>Beginning-of-Line Anchor</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1878 d43459e1255 ">
                                    <p><span class="bold">Default mode:</span> Matches the beginning of a string.
                                    </p>
                                    <p><span class="bold">Multiline mode:</span><a id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDHAGGI" name="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDHAGGI" href="#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDHAGGI" onclick="footdisplay(2, "Specify multiline mode with the pattern-matching option m, described in Table 10-2.")"><sup>Foot&nbsp;2</sup></a> Matches the beginning of any line the source string.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1878 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">^def</code></span> matches the substring <code class="codeph">def</code> in the string <code class="codeph">defghi</code> but not in the string <code class="codeph">abcdef</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1922" headers="d43459e1249 ">
                                    <p><code class="codeph">$</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1922 d43459e1252 ">
                                    <p>End-of-Line Anchor</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1922 d43459e1255 ">
                                    <p><span class="bold">Default mode:</span> Matches the end of a string.
                                    </p>
                                    <p><span class="bold">Multiline mode:</span><a id="fnsrc_d43459e1937" name="fnsrc_d43459e1937" href="#fnsrc_d43459e1937" onclick="footdisplay(2, "Specify multiline mode with the pattern-matching option m, described in Table 10-2.")"><sup>Footref&nbsp;2</sup></a> Matches the end of any line the source string.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1922 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">def$</code></span> matches the substring <code class="codeph">def</code> in the string <code class="codeph">abcdef</code> but not in the string <code class="codeph">defghi</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1957" headers="d43459e1249 ">
                                    <p><code class="codeph">[:</code><span class="italic"><code class="codeph">class</code></span><code class="codeph">:]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1957 d43459e1252 ">
                                    <p>POSIX Character Class</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1957 d43459e1255 ">
                                    <p>Matches any character in the specified POSIX character class (such as uppercase characters, digits, or punctuation characters).</p>
                                    <p><span class="bold">Note:</span> In English regular expressions, range expressions often indicate a character class. For example, <code class="codeph">[a-z]</code> indicates any lowercase character. This convention is not useful in multilingual environments, where the first and last character of a given character class might not be the same in all languages.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1957 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">[:upper:]+</code></span>, which specifies one or more consecutive uppercase characters, matches the substring <code class="codeph">DEF</code> in the string <code class="codeph">abcDEFghi</code>, but does not match any substring in <code class="codeph">abcdefghi</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1996" headers="d43459e1249 ">
                                    <p><code class="codeph">[.</code><span class="italic"><code class="codeph">element</code></span><code class="codeph">.]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1996 d43459e1252 ">
                                    <p>POSIX Collating Element Operator</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1996 d43459e1255 ">
                                    <p>Specifies a collating element defined in the current locale. The <code class="codeph">NLS_SORT</code> initialization parameter determines the supported collation elements.
                                    </p>
                                    <p>This syntax lets you use a multicharacter collating element where otherwise only single-character collating elements are allowed. For example, you can ensure that the collating element <code class="codeph">ch</code>, when defined in a locale such as Traditional Spanish, is treated as one character in operations that depend on the ordering of characters.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1996 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">[.ch.]</code></span>, which specifies the collating element <code class="codeph">ch</code>, matches <code class="codeph">ch</code> in the string <code class="codeph">chabc</code>, but does not match any substring in <code class="codeph">cdefg</code>.
                                    </p>
                                    <p>The expression <span class="bold"><code class="codeph">[a-[.ch.]]</code></span> specifies the range from <code class="codeph">a</code> through <code class="codeph">ch</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e2051" headers="d43459e1249 ">
                                    <p><code class="codeph">[=</code><span class="italic"><code class="codeph">char</code></span><code class="codeph">=]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e2051 d43459e1252 ">
                                    <p>POSIX Character Equivalence Class</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e2051 d43459e1255 ">
                                    <p>Matches all characters that belong to the same POSIX character equivalence class as the specified character, in the current locale.</p>
                                    <p>This syntax must appear within a character list; that is, it must be nested within the brackets for a character list.</p>
                                    <p>Character equivalents depend on how canonical rules are defined for your database locale. For details, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NLSPG305" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e2051 d43459e1258 ">
                                    <p>The expression <span class="bold"><code class="codeph">[[=n=]]</code></span>, which specifies characters equivalent to <code class="codeph">n</code> in a Spanish locale, matches both <code class="codeph">N</code> and <code class="codeph">Ã±</code> in the string <code class="codeph">El NiÃ±o</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>A <span class="bold">greedy</span> operator matches as many occurrences as possible while allowing the rest of the match to succeed. To make the operator nongreedy, follow it with the nongreedy modifier (<code class="codeph">?</code>) (see <a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ" title="Describes the Perl-influenced extensions in Oracle regular expressions.">Table 10-5</a>).
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p>Specify multiline mode with the pattern-matching option <code class="codeph">m</code>, described in <a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="This table summarizes the Perl-influenced matching operators.">Table 10-2</a>.
                        </p>
                     <p></p>
                  </div>
               </div><a id="ADFNS234"></a><a id="ADFNS233"></a><div class="props_rev_3"><a id="GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A" name="GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A"></a><h4 id="ADFNS-GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A" class="sect4">Oracle SQL Multilingual Extensions to POSIX Standard</h4>
                  <div>
                     <p>When applied to multilingual data, Oracle SQL POSIX operators extend beyond the matching capabilities specified in the POSIX standard.</p>
                     <p><a href="regexp.html#GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A__g692318" title="This table is described in the preceding text.">Table 10-4</a> shows, for each POSIX operator, which POSIX standards define its syntax and whether Oracle SQL extends its semantics for handling multilingual data. The POSIX standards are Basic Regular Expression (BRE) and Extended Regular Expression (ERE).
                     </p>
                     <div class="tblformal" id="GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A__g692318">
                        <p class="titleintable">Table 10-4 POSIX Operators and Multilingual Operator Relationships</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="POSIX Operators and Multilingual Operator Relationships" summary="This table is described in the preceding text." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d43459e2218">Operator</th>
                                 <th align="left" valign="bottom" width="25%" id="d43459e2221">POSIX BRE Syntax</th>
                                 <th align="left" valign="bottom" width="25%" id="d43459e2224">POSIX ERE Syntax</th>
                                 <th align="left" valign="bottom" width="38%" id="d43459e2227">Multilingual Enhancement</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2232" headers="d43459e2218 ">
                                    <p><code class="codeph">\</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2232 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2232 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2232 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2246" headers="d43459e2218 ">
                                    <p><code class="codeph">*</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2246 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2246 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2246 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2260" headers="d43459e2218 ">
                                    <p><code class="codeph">+</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2260 d43459e2221 ">
                                    <p>--</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2260 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2260 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2274" headers="d43459e2218 ">
                                    <p><code class="codeph">?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2274 d43459e2221 ">
                                    <p>--</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2274 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2274 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2288" headers="d43459e2218 ">
                                    <p><code class="codeph">|</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2288 d43459e2221 ">
                                    <p>--</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2288 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2288 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2302" headers="d43459e2218 ">
                                    <p><code class="codeph">^</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2302 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2302 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2302 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2316" headers="d43459e2218 ">
                                    <p><code class="codeph">$</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2316 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2316 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2316 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2330" headers="d43459e2218 ">
                                    <p><code class="codeph">.</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2330 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2330 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2330 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2344" headers="d43459e2218 ">
                                    <p><code class="codeph">[ ]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2344 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2344 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2344 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2358" headers="d43459e2218 ">
                                    <p><code class="codeph">( )</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2358 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2358 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2358 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2372" headers="d43459e2218 ">
                                    <p><code class="codeph">{m}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2372 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2372 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2372 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2387" headers="d43459e2218 ">
                                    <p><code class="codeph">{m,}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2387 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2387 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2387 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2401" headers="d43459e2218 ">
                                    <p><code class="codeph">{m,n}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2401 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2401 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2401 d43459e2227 ">
                                    <p>--</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2415" headers="d43459e2218 ">
                                    <p><code class="codeph">\n</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2415 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2415 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2415 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2429" headers="d43459e2218 ">
                                    <p><code class="codeph">[..]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2429 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2429 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2429 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2443" headers="d43459e2218 ">
                                    <p><code class="codeph">[::]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2443 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2443 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2443 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2457" headers="d43459e2218 ">
                                    <p><code class="codeph">[==]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2457 d43459e2221 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2457 d43459e2224 ">
                                    <p>Yes</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2457 d43459e2227 ">
                                    <p>Yes</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Multilingual data might have multibyte characters. Oracle Database lets you enter multibyte characters directly (if you have a direct input method) or use functions to compose them. You cannot use the Unicode hexadecimal encoding value of the form <code class="codeph">\</code><span class="italic"><code class="codeph">xxxx</code></span>. Oracle Database evaluates the characters based on the byte values used to encode the character, not the graphical representation of the character.
                     </p>
                  </div>
               </div><a id="ADFNS236"></a><a id="ADFNS235"></a><div class="props_rev_3"><a id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C" name="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C"></a><h4 id="ADFNS-GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C" class="sect4">Oracle SQL PERL-Influenced Extensions to POSIX Standard</h4>
                  <div>
                     <p>Oracle SQL supports some commonly used PERL regular expression operators that are not included in the POSIX standard but do not conflict with it.</p>
                     <p><a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ" title="Describes the Perl-influenced extensions in Oracle regular expressions.">Table 10-5</a> summarizes the PERL-influenced operators that Oracle SQL supports.
                     </p>
                     <div class="infoboxnote" id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__GUID-03B70FAE-C0BD-4D29-8936-A9ADC28A9699">
                        <p class="notep1">Caution:</p>
                        <p>PERL character class matching is based on the locale model of the operating system, whereas Oracle SQL regular expressions are based on the language-specific data of the database. In general, you cannot expect a regular expression involving locale data to produce the same results in PERL and Oracle SQL.</p>
                     </div>
                     <div class="tblformalwide" id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ">
                        <p class="titleintable">Table 10-5 PERL-Influenced Operators in Oracle SQL Regular Expressions</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="PERL-Influenced Operators in Oracle SQL Regular Expressions" summary="Describes the Perl-influenced extensions in Oracle regular expressions." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="11%" id="d43459e2611">Operator Syntax</th>
                                 <th align="left" valign="bottom" width="40%" id="d43459e2614">Description</th>
                                 <th align="left" valign="bottom" width="49%" id="d43459e2617">Examples</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2622" headers="d43459e2611 ">
                                    <p><code class="codeph">\d</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2622 d43459e2614 ">
                                    <p>Matches a digit character.</p>
                                    <p>Equivalent to POSIX expression <code class="codeph">[[:digit:]]</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2622 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">^\(\d{3}\) \d{3}-\d{4}$</code></span> matches <code class="codeph">(650) 555-0100</code> but does not match <code class="codeph">650-555-0100</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2648" headers="d43459e2611 ">
                                    <p><code class="codeph">\D</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2648 d43459e2614 ">
                                    <p>Matches a nondigit character.</p>
                                    <p>Equivalent to POSIX expression <code class="codeph">[^[:digit:]]</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2648 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\w\d\D</code></span> matches <code class="codeph">b2b</code> and <code class="codeph">b2_</code> but does not match <code class="codeph">b22</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2677" headers="d43459e2611 ">
                                    <p><code class="codeph">\w</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2677 d43459e2614 ">
                                    <p>Matches a word character (that is, an alphanumeric or underscore (<code class="codeph">_</code>) character).
                                    </p>
                                    <p>Equivalent to POSIX expression <code class="codeph">[[:alnum:]_]</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2677 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\w+@\w+(\.\w+)+</code></span> matches the string <code class="codeph">jdoe@company.co.uk</code> but does not match <code class="codeph">jdoe@company</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2706" headers="d43459e2611 ">
                                    <p><code class="codeph">\W</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2706 d43459e2614 ">
                                    <p>Matches a nonword character.</p>
                                    <p>Equivalent to POSIX expression <code class="codeph">[^[:alnum:]_]</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2706 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\w+\W\s\w+</code></span> matches the string <code class="codeph">to: bill</code> but does not match <code class="codeph">to bill</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2732" headers="d43459e2611 ">
                                    <p><code class="codeph">\s</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2732 d43459e2614 ">
                                    <p>Matches a whitespace character.</p>
                                    <p>Equivalent to POSIX expression <code class="codeph">[[:space:]]</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2732 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\(\w\s\w\s\)</code></span> matches the string <code class="codeph">(a b )</code> but does not match <code class="codeph">(ab)</code> or <code class="codeph">(a,b.)</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2761" headers="d43459e2611 ">
                                    <p><code class="codeph">\S</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2761 d43459e2614 ">
                                    <p>Matches a nonwhitespace character.</p>
                                    <p>Equivalent to POSIX expression <code class="codeph">[^[:space:]]</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2761 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\(\w\S\w\S\)</code></span> matches the strings <code class="codeph">(abde)</code> and <code class="codeph">(a,b.)</code> but does not match <code class="codeph">(a b d e)</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2790" headers="d43459e2611 ">
                                    <p><code class="codeph">\A</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2790 d43459e2614 ">
                                    <p>Matches the beginning of a string, in either single-line or multiline mode.</p>
                                    <p>Not equivalent to POSIX operator <code class="codeph">^</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2790 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\AL</code></span> matches only the first <code class="codeph">L</code> in the string <code class="codeph">Line1\nLine2\n</code> (where <code class="codeph">\n</code> is the newline character), in either single-line or multiline mode.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2819" headers="d43459e2611 ">
                                    <p><code class="codeph">\Z</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2819 d43459e2614 ">
                                    <p>Matches the end of a string, in either single-line or multiline mode.</p>
                                    <p>Not equivalent to POSIX operator <code class="codeph">$</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2819 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\s\Z</code></span> matches the last space in the string <code class="codeph">L i n e \n</code> (where <code class="codeph">\n</code> is the newline character), in either single-line or multiline mode.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2845" headers="d43459e2611 ">
                                    <p><code class="codeph">\z</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2845 d43459e2614 ">
                                    <p>Matches the end of a string, in either single-line or multiline mode.</p>
                                    <p>Not equivalent to POSIX operator <code class="codeph">$</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2845 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\s\z</code></span> matches the newline character (<code class="codeph">\n</code>) in the string <code class="codeph">L i n e \n</code>, in either single-line or multiline mode.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2871" headers="d43459e2611 ">
                                    <p><code class="codeph">+?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2871 d43459e2614 ">
                                    <p>Matches one or more occurrences of the preceding subexpression (nongreedy<a id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDIBFIH" name="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDIBFIH" href="#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDIBFIH" onclick="footdisplay(3, "A nongreedy operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (?).")"><sup>Foot&nbsp;3</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2871 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\w+?x\w</code></span> matches <span class="bold"><code class="codeph">ab</code></span><code class="codeph">xc</code> in the string <code class="codeph">abxcxd</code> (and the greedy expression <span class="bold"><code class="codeph">\w+x\w</code></span> matches <span class="bold"><code class="codeph">abxc</code></span><code class="codeph">xd</code>).
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2916" headers="d43459e2611 ">
                                    <p><code class="codeph">*?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2916 d43459e2614 ">
                                    <p>Matches zero or more occurrences of the preceding subexpression (nongreedy<a id="fnsrc_d43459e2923" name="fnsrc_d43459e2923" href="#fnsrc_d43459e2923" onclick="footdisplay(3, "A nongreedy operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (?).")"><sup>Footref&nbsp;3</sup></a>). Matches the empty string whenever possible.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2916 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">\w*?x\w</code></span> matches <code class="codeph">xa</code> in the string <code class="codeph">xaxbxc</code> (and the greedy expression <span class="bold"><code class="codeph">\w*x\w</code></span> matches <span class="bold"><code class="codeph">xaxb</code></span><code class="codeph">xc</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2951" headers="d43459e2611 ">
                                    <p><code class="codeph">??</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2951 d43459e2614 ">
                                    <p>Matches zero or one occurrences of the preceding subexpression (nongreedy<a id="fnsrc_d43459e2958" name="fnsrc_d43459e2958" href="#fnsrc_d43459e2958" onclick="footdisplay(3, "A nongreedy operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (?).")"><sup>Footref&nbsp;3</sup></a>). Matches the empty string whenever possible.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2951 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">a??aa</code></span> matches <code class="codeph">aa</code> in the string <code class="codeph">aaaa</code> (and the greedy expression <span class="bold"><code class="codeph">a?aa</code></span> matches <span class="bold"><code class="codeph">a</code></span><code class="codeph">aa</code>).
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2985" headers="d43459e2611 ">
                                    <p><code class="codeph">{</code><span class="italic"><code class="codeph">m</code></span><code class="codeph">}?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2985 d43459e2614 ">
                                    <p>Matches exactly <code class="codeph">m</code> occurrences of the preceding subexpression (nongreedy<a id="fnsrc_d43459e3000" name="fnsrc_d43459e3000" href="#fnsrc_d43459e3000" onclick="footdisplay(3, "A nongreedy operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (?).")"><sup>Footref&nbsp;3</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2985 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">(a|aa){2}?</code></span> matches <code class="codeph">aa</code> in the string <code class="codeph">aaaa</code> (and the greedy expression <span class="bold"><code class="codeph">(a|aa){2}</code></span> matches <code class="codeph">aaaa</code>.
                                    </p>
                                    <p>Both the expression <span class="bold"><code class="codeph">b{2}?</code></span> and the greedy expression <span class="bold"><code class="codeph">b{2}</code></span> match <code class="codeph">bb</code> in the string <code class="codeph">bbbb</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e3040" headers="d43459e2611 ">
                                    <p><code class="codeph">{</code><span class="italic"><code class="codeph">m</code></span><code class="codeph">,}?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e3040 d43459e2614 ">
                                    <p>Matches at least <code class="codeph">m</code> occurrences of the preceding subexpression (nongreedy<a id="fnsrc_d43459e3055" name="fnsrc_d43459e3055" href="#fnsrc_d43459e3055" onclick="footdisplay(3, "A nongreedy operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (?).")"><sup>Footref&nbsp;3</sup></a>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e3040 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">a{2,}?</code></span> matches <code class="codeph">aa</code> in the string <code class="codeph">aaaaa</code> (and the greedy expression <span class="bold"><code class="codeph">a{2,}</code></span> matches <code class="codeph">aaaaa</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e3079" headers="d43459e2611 ">
                                    <p><code class="codeph">{</code><span class="italic"><code class="codeph">m</code></span><code class="codeph">,</code><span class="italic"><code class="codeph">n</code></span><code class="codeph">}?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e3079 d43459e2614 ">
                                    <p>Matches at least <code class="codeph">m</code> but not more than <code class="codeph">n</code> occurrences of the preceding subexpression (nongreedy<a id="fnsrc_d43459e3102" name="fnsrc_d43459e3102" href="#fnsrc_d43459e3102" onclick="footdisplay(3, "A nongreedy operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (?).")"><sup>Footref&nbsp;3</sup></a>). <code class="codeph">{0,n}?</code> matches the empty string whenever possible.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e3079 d43459e2617 ">
                                    <p>The expression <span class="bold"><code class="codeph">a{2,4}?</code></span> matches <code class="codeph">aa</code> in the string <code class="codeph">aaaaa</code> (and the greedy expression <span class="bold"><code class="codeph">a{2,4}</code></span> matches <code class="codeph">aaaa</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;3 </sup></p><p>A <span class="bold">nongreedy</span> operator matches as few occurrences as possible while allowing the rest of the match to succeed. To make the operator greedy, omit the nongreedy modifier (<code class="codeph">?</code>).
                        </p>
                     <p></p>
                  </div>
               </div>
            </div><a id="ADFNS00402"></a><div class="props_rev_3"><a id="GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC" name="GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC"></a><h3 id="ADFNS-GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC" class="sect3">Using Regular Expressions in SQL Statements: Scenarios</h3>
               <div>
                  <div class="section">
                     <p>Scenarios:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="regexp.html#GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30">Using a Constraint to Enforce a Phone Number Format</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825" title="When you create a table, you can enforce formats with regular expressions.">Example: Enforcing a Phone Number Format with Regular Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5" title="The INSERT INTO SQL statement can be used to test how correct and incorrect formats work.">Example: Inserting Phone Numbers in Correct and Incorrect Formats</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2">Using Back References to Reposition Characters</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS240"></a><a id="ADFNS239"></a><a id="ADFNS241"></a><a id="ADFNS238"></a><div class="props_rev_3"><a id="GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30" name="GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30"></a><h4 id="ADFNS-GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30" class="sect4">Using a Constraint to Enforce a Phone Number Format</h4>
                  <div>
                     <div class="section">
                        <p>Regular expressions are useful for enforcing constraintsâ€”for example, to ensure that phone numbers are entered into the database in a standard format. </p>
                        <p><a href="regexp.html#GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30__CHDEIEIC" title="This table explains the syntax elements used in the preceding example.">Table 10-6</a> explains the elements of the regular expression in <a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825" title="When you create a table, you can enforce formats with regular expressions.">Example: Enforcing a Phone Number Format with Regular Expressions</a>.
                        </p>
                        <div class="tblformal" id="GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30__CHDEIEIC">
                           <p class="titleintable">Table 10-6 Explanation of the Regular Expression Elements</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Explanation of the Regular Expression Elements" summary="This table explains the syntax elements used in the preceding example." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d43459e3387">Regular Expression Element</th>
                                    <th align="left" valign="bottom" width="75%" id="d43459e3390">Matches . . .</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3395" headers="d43459e3387 ">
                                       <p><code class="codeph">^</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3395 d43459e3390 ">
                                       <p>The beginning of the string.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3403" headers="d43459e3387 ">
                                       <p><code class="codeph">\(</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3403 d43459e3390 ">
                                       <p>A left parenthesis. The backslash (<code class="codeph">\</code>) is an escape character that indicates that the left parenthesis after it is a literal rather than a subexpression delimiter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3414" headers="d43459e3387 ">
                                       <p><code class="codeph">\d{3}</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3414 d43459e3390 ">
                                       <p>Exactly three digits.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3422" headers="d43459e3387 ">
                                       <p><code class="codeph">\)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3422 d43459e3390 ">
                                       <p>A right parenthesis. The backslash (<code class="codeph">\</code>) is an escape character that indicates that the right parenthesis after it is a literal rather than a subexpression delimiter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3433" headers="d43459e3387 ">
                                       <p>space character</p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3433 d43459e3390 ">
                                       <p>A space character.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3440" headers="d43459e3387 ">
                                       <p><code class="codeph">\d{3}</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3440 d43459e3390 ">
                                       <p>Exactly three digits.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3448" headers="d43459e3387 ">
                                       <p><code class="codeph">-</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3448 d43459e3390 ">
                                       <p>A hyphen.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3456" headers="d43459e3387 ">
                                       <p><code class="codeph">\d{4}</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3456 d43459e3390 ">
                                       <p>Exactly four digits.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3464" headers="d43459e3387 ">
                                       <p><code class="codeph">$</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3464 d43459e3390 ">
                                       <p>The end of the string.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F4872995-7A87-4254-B292-9FC55026C825" name="GUID-F4872995-7A87-4254-B292-9FC55026C825"></a><h4 id="ADFNS-GUID-F4872995-7A87-4254-B292-9FC55026C825" class="sect4">Example: Enforcing a Phone Number Format with Regular Expressions</h4>
                  <div>
                     <p>When you create a table, you can enforce formats with regular expressions.</p>
                     <p><a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825__CHDHIHII">Example 10-1</a> creates a <code class="codeph">contacts</code> table and adds a <code class="codeph">CHECK</code> constraint to the <code class="codeph">p_number</code> column to enforce this format model:
                     </p><pre class="oac_no_warn" dir="ltr">(XXX) XXX-XXXX</pre><div class="example" id="GUID-F4872995-7A87-4254-B292-9FC55026C825__CHDHIHII">
                        <p class="titleinexample">Example 10-1 Enforcing a Phone Number Format with Regular Expressions</p><pre class="oac_no_warn" dir="ltr">DROP TABLE contacts;
CREATE TABLE contacts (
  l_name    VARCHAR2(30),
  p_number  VARCHAR2(30)
  <span class="bold">CONSTRAINT c_contacts_pnf</span>
  <span class="bold">CHECK (REGEXP_LIKE (p_number, '^\(\d{3}\) \d{3}-\d{4}$'))</span>
);
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5" name="GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5"></a><h4 id="ADFNS-GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5" class="sect4">Example: Inserting Phone Numbers in Correct and Incorrect Formats</h4>
                  <div>
                     <p>The <code class="codeph">INSERT INTO</code> SQL statement can be used to test how correct and incorrect formats work.
                     </p>
                     <p><a href="regexp.html#GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5__CHDBDIFJ">Example 10-2</a> shows some statements that correctly and incorrectly insert phone numbers into the <code class="codeph">contacts</code> table.
                     </p>
                     <div class="example" id="GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5__CHDBDIFJ">
                        <p class="titleinexample">Example 10-2 Inserting Phone Numbers in Correct and Incorrect Formats</p>
                        <p>These are correct:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO contacts (p_number) VALUES('(650) 555-0100');
INSERT INTO contacts (p_number) VALUES('(215) 555-0100');
 </pre><p>These generate <code class="codeph">CHECK</code> constraint errors:
                        </p><pre class="oac_no_warn" dir="ltr">INSERT INTO contacts (p_number) VALUES('650 555-0100');
INSERT INTO contacts (p_number) VALUES('650 555 0100');
INSERT INTO contacts (p_number) VALUES('650-555-0100');
INSERT INTO contacts (p_number) VALUES('(650)555-0100');
INSERT INTO contacts (p_number) VALUES(' (650) 555-0100');</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS244"></a><a id="ADFNS243"></a><a id="ADFNS242"></a><div class="props_rev_3"><a id="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2" name="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2"></a><h4 id="ADFNS-GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2" class="sect4">Using Back References to Reposition Characters</h4>
                  <div>
                     <div class="section">
                        <p>A back reference (described in <a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="This table summarizes the POSIX metacharacters supported in Oracle Database regular expressions.">Table 10-3</a>) stores the referenced subexpression in a temporary buffer. Therefore, you can use back references to reposition characters, as in <a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">Example 10-3</a>. For an explanation of the elements of the regular expression in <a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">Example 10-3</a>, see <a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDBIJBI" title="This table describes the regular expression syntax elements used in the preceding example.">Table 10-7</a>.
                        </p>
                        <p><a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDBIJBI" title="This table describes the regular expression syntax elements used in the preceding example.">Table 10-7</a> explains the elements of the regular expression in <span><a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">Example 10-3</a></span>.
                        </p>
                        <div class="tblformal" id="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDBIJBI">
                           <p class="titleintable">Table 10-7 Explanation of the Regular Expression Elements</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Explanation of the Regular Expression Elements" summary="This table describes the regular expression syntax elements used in the preceding example." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d43459e3845">Regular Expression Element</th>
                                    <th align="left" valign="bottom" width="75%" id="d43459e3848">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3853" headers="d43459e3845 ">
                                       <p><code class="codeph">^</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3853 d43459e3848 ">
                                       <p>Matches the beginning of the string.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3861" headers="d43459e3845 ">
                                       <p><code class="codeph">$</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3861 d43459e3848 ">
                                       <p>Matches the end of the string.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3869" headers="d43459e3845 ">
                                       <p><code class="codeph">(\S+)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3869 d43459e3848 ">
                                       <p>Matches one or more nonspace characters. The parentheses are not escaped so they function as a grouping expression.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3877" headers="d43459e3845 ">
                                       <p><code class="codeph">\s</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3877 d43459e3848 ">
                                       <p>Matches a whitespace character.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3885" headers="d43459e3845 ">
                                       <p><code class="codeph">\1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3885 d43459e3848 ">
                                       <p>Substitutes the first subexpression, that is, the first group of parentheses in the matching pattern.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3893" headers="d43459e3845 ">
                                       <p><code class="codeph">\2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3893 d43459e3848 ">
                                       <p>Substitutes the second subexpression, that is, the second group of parentheses in the matching pattern.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3901" headers="d43459e3845 ">
                                       <p><code class="codeph">\3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3901 d43459e3848 ">
                                       <p>Substitutes the third subexpression, that is, the third group of parentheses in the matching pattern.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3909" headers="d43459e3845 ">
                                       <p><code class="codeph">,</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3909 d43459e3848 ">
                                       <p>Inserts a comma character.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">
                        <p class="titleinexample">Example 10-3 Using Back References to Reposition Characters</p>
                        <p>Create table and populate it with names in different formats:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE famous_people;
CREATE TABLE famous_people (names VARCHAR2(20));
INSERT INTO famous_people (names) VALUES ('John Quincy Adams');
INSERT INTO famous_people (names) VALUES ('Harry S. Truman');
INSERT INTO famous_people (names) VALUES ('John Adams');
INSERT INTO famous_people (names) VALUES (' John Quincy Adams');
INSERT INTO famous_people (names) VALUES ('John_Quincy_Adams');
</pre><p>SQL*Plus formatting command:</p><pre class="oac_no_warn" dir="ltr">COLUMN "names after regexp" FORMAT A20
</pre><p>For each name in the table whose format is "first middle last", use back references to reposition characters so that the format becomes "last, first middle":</p><pre class="oac_no_warn" dir="ltr">
SELECT names "names",
  <span class="bold">REGEXP_REPLACE(names, '^(\S+)\s(\S+)\s(\S+)$', '\3, \1 \2')</span>
    <span class="bold">AS "names after regexp"</span>
FROM famous_people
ORDER BY "names";
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">names                names after regexp
-------------------- --------------------
 John Quincy Adams    John Quincy Adams
Harry S. Truman      Truman, Harry S.
John Adams           John Adams
John Quincy Adams    Adams, John Quincy
John_Quincy_Adams    John_Quincy_Adams
 
5 rows selected.
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
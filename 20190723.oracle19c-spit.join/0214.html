<html id='06175.using-consolidated-database-replay.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Database Replay enables you to capture a workload on the production system and replay it on a test system. This can be very useful when evaluating or adopting new database technologies because these changes can be tested on a test system without affecting the production system.">
      <meta name="description" content="Database Replay enables you to capture a workload on the production system and replay it on a test system. This can be very useful when evaluating or adopting new database technologies because these changes can be tested on a test system without affecting the production system.">
      <title>Using Consolidated Database Replay</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="Database Replay enables you to capture a workload on the production system and replay it on a test system. This can be very useful when evaluating or adopting new database technologies because these changes can be tested on a test system without affecting the production system.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-workload-intelligence.html" title="Previous" type="text/html">
      <link rel="next" href="using-workload-scale-up.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-workload-intelligence.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-workload-scale-up.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name"> Database Replay </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Consolidated Database Replay </li>
            </ol>
            <a id="GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138" name="GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138"></a><a id="RATUG4080"></a>
            
            <h2 id="RATUG-GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138" class="sect2"><span class="enumeration_chapter">15 </span>Using Consolidated Database Replay 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>Database Replay enables you to capture a workload on the production system and replay it on a test system. This can be very useful when evaluating or adopting new database technologies because these changes can be tested on a test system without affecting the production system.</span> However, if the new system being tested offers significantly better performance than the existing system, then Database Replay may not accurately predict how much additional workload can be handled by the new system.
               </div>
               <p>For example, if you are consolidating multiple production systems into a single Oracle Exadata Machine, replaying a workload captured from one of the existing systems on Oracle Exadata Machine may result in much lower resource usage (such as host CPU and I/O) during replay because the new system is much more powerful. In this case, it is more useful to assess how the new system will handle the combined workloads from all existing systems, rather than that of a single workload from one system.</p>
               <p><a id="d31544e81" class="indexterm-anchor"></a>Consolidated Database Replay enables you to consolidate multiple workloads captured from one or multiple systems and replay them concurrently on a single test system. In this example, using Consolidated Database Replay will help you to assess how the database consolidation will affect the production system and if a single Oracle Exadata Machine can handle the combined workloads from the consolidated databases.
               </p>
               <p>This chapter describes how to use Consolidated Database Replay and contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="using-consolidated-database-replay.html#GUID-CA75813D-10DB-4635-B127-6747CEC0C6D8" title="Consolidated Database Replay enables you to replay multiple workloads captured from one or multiple systems concurrently.">Use Cases for Consolidated Database Replay</a></p>
                  </li>
                  <li>
                     <p><a href="using-consolidated-database-replay.html#GUID-ED30A383-7236-44C7-9DD0-A9FC4F75F686" title="This section describes the steps involved when using Consolidated Workload Replay.">Steps for Using Consolidated Database Replay</a></p>
                  </li>
                  <li>
                     <p><a href="using-consolidated-database-replay.html#GUID-BBC96414-F08A-4D57-BA72-B28C1BBEE9F2" title="This section describes how to use Consolidated Database Replay with Enterprise Manager.">Using Consolidated Database Replay with Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="using-consolidated-database-replay.html#GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5" title="This section describes how to create and replay consolidated workloads using the DBMS_WORKLOAD_REPLAY package.">Using Consolidated Database Replay with APIs</a></p>
                  </li>
                  <li>
                     <p><a href="using-consolidated-database-replay.html#GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8" title="In a query-only database replay, only the read-only queries of a workload capture are replayed. In other words, in a query-only replay, only SELECT statements are sent to the server at replay time. No DML statements are executed during a query-only replay, and the replay does not make any changes to user schemas or data.">About Query-Only Database Replay</a></p>
                  </li>
                  <li>
                     <p><a href="using-consolidated-database-replay.html#GUID-29988B63-F974-46EF-9AAD-3D04AF774337" title="This section assumes a scenario where workloads from three separate production systems running different versions of Oracle Database on various operating systems are being consolidated.">Example: Replaying a Consolidated Workload with APIs</a></p>
                  </li>
               </ul>
            </div><a id="RATUG4082"></a><div class="props_rev_3"><a id="GUID-CA75813D-10DB-4635-B127-6747CEC0C6D8" name="GUID-CA75813D-10DB-4635-B127-6747CEC0C6D8"></a><h3 id="RATUG-GUID-CA75813D-10DB-4635-B127-6747CEC0C6D8" class="sect3"><span class="enumeration_section">15.1 </span>Use Cases for Consolidated Database Replay
               </h3>
               <div>
                  <div><span>Consolidated Database Replay enables you to replay multiple workloads captured from one or multiple systems concurrently.</span> During the replay, every workload capture that is consolidated will start to replay when the consolidated replay begins.
                  </div>
                  <p>Some typical use cases for Consolidated Database Replay include:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-42958859-005D-4B93-9DD3-79807968EA9E" title="One use for Consolidated Database Replay is to assess if the system can handle the combined workload from a database consolidation.">Database Consolidation Using Pluggable Databases</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-A2836514-C2B9-4170-B76F-DA8E4B298C2B" title="Another use for Consolidated Database Replay is for stress testing or capacity planning.">Stress Testing</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-0A835930-BD73-4C32-AC02-35D2E21AF725" title="A third use for Consolidated Database Replay is for scale-up testing.">Scale-Up Testing</a></p>
                     </li>
                  </ul>
                  <p>Each of these use cases can be performed using the procedures described in this chapter. In addition, you can employ various workload scale-up techniques when using Consolidated Database Replay, as described in <a href="using-workload-scale-up.html#GUID-6EE876DA-F6E0-435A-8728-CFDA1AFD1FF0" title="This chapter describes using various workload scale-up techniques with Consolidated Database Replay.">Using Workload Scale-Up</a>.
                  </p>
               </div><a id="RATUG4199"></a><div class="props_rev_3"><a id="GUID-42958859-005D-4B93-9DD3-79807968EA9E" name="GUID-42958859-005D-4B93-9DD3-79807968EA9E"></a><h4 id="RATUG-GUID-42958859-005D-4B93-9DD3-79807968EA9E" class="sect4"><span class="enumeration_section">15.1.1 </span>Database Consolidation Using Pluggable Databases
                  </h4>
                  <div>
                     <p>One use for Consolidated Database Replay is to assess if the system can handle the combined workload from a database consolidation.</p>
                     <p>For example, assume that you want to consolidate the databases for the CRM, ERP, and SCM applications by migrating them to pluggable databases (PDBs). You can use Consolidated Database Replay to combine the captured workloads from the three applications and replay them concurrently on PDBs.</p>
                     <div class="infoboxnotealso" id="GUID-42958859-005D-4B93-9DD3-79807968EA9E__GUID-3EE5DD0E-B6F9-4E27-BEE9-D37D734EB6B2">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-29988B63-F974-46EF-9AAD-3D04AF774337" title="This section assumes a scenario where workloads from three separate production systems running different versions of Oracle Database on various operating systems are being consolidated.">Example: Replaying a Consolidated Workload with APIs</a>"</span> for an example of this use case
                        </p>
                     </div>
                  </div>
               </div><a id="RATUG4200"></a><div class="props_rev_3"><a id="GUID-A2836514-C2B9-4170-B76F-DA8E4B298C2B" name="GUID-A2836514-C2B9-4170-B76F-DA8E4B298C2B"></a><h4 id="RATUG-GUID-A2836514-C2B9-4170-B76F-DA8E4B298C2B" class="sect4"><span class="enumeration_section">15.1.2 </span>Stress Testing
                  </h4>
                  <div>
                     <p>Another use for Consolidated Database Replay is for stress testing or capacity planning.</p>
                     <p>For example, assume that you are expecting the workload for the Sales application to double during the holiday season. You can use Consolidated Database Replay to test the added stress on the system by doubling the workload and replaying the combined workload.</p>
                     <div class="infoboxnotealso" id="GUID-A2836514-C2B9-4170-B76F-DA8E4B298C2B__GUID-721FA44F-2680-47A0-ACEF-9EC7267391C2">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="using-workload-scale-up.html#GUID-A8D66BDD-5B60-4A0D-81E8-FF88D9F68A49" title="This section describes how to use time shifting with Consolidated Database Replay, and assumes a scenario where you want to use time shifting to align the peaks of workloads captured from three applications and replay them simultaneously.">Using Time Shifting</a>"</span> for an example of this use case
                        </p>
                     </div>
                  </div>
               </div><a id="RATUG4201"></a><div class="props_rev_3"><a id="GUID-0A835930-BD73-4C32-AC02-35D2E21AF725" name="GUID-0A835930-BD73-4C32-AC02-35D2E21AF725"></a><h4 id="RATUG-GUID-0A835930-BD73-4C32-AC02-35D2E21AF725" class="sect4"><span class="enumeration_section">15.1.3 </span>Scale-Up Testing
                  </h4>
                  <div>
                     <p>A third use for Consolidated Database Replay is for scale-up testing.</p>
                     <p>For example, assume that you want to test if your system can handle captured workloads from the Financials application and the Orders application concurrently. You can use Consolidated Database Replay to test the effects of the scaled-up workload on your system by combining the workloads and replaying them simultaneously.</p>
                     <div class="infoboxnotealso" id="GUID-0A835930-BD73-4C32-AC02-35D2E21AF725__GUID-2AABD94E-E630-4F44-BBD1-A817F1CD367F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-workload-scale-up.html#GUID-8564F1A9-E002-45DB-B049-6AABB3A88B82" title="This section describes how to use schema remapping with Consolidated Database Replay, and assumes a scenario where you want to use schema remapping to identify possible host bottlenecks when deploying multiple instances of an application.">Using Schema Remapping</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="using-workload-scale-up.html#GUID-756772FF-1F7E-4EB5-AFB5-152CB3DF6704" title="This section describes how to use workload folding with Consolidated Database Replay, and assumes a scenario where you want to use workload folding to triple a captured workload. The scenario demonstrates how to use workload folding for scale-up testing.">Using Workload Folding</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG4081"></a><div class="props_rev_3"><a id="GUID-ED30A383-7236-44C7-9DD0-A9FC4F75F686" name="GUID-ED30A383-7236-44C7-9DD0-A9FC4F75F686"></a><h3 id="RATUG-GUID-ED30A383-7236-44C7-9DD0-A9FC4F75F686" class="sect3"><span class="enumeration_section">15.2 </span>Steps for Using Consolidated Database Replay
               </h3>
               <div>
                  <div><span>This section describes the steps involved when using Consolidated Workload Replay.</span> It contains the following topics:
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-29DEF1D4-AA77-4BF5-938E-52EFC666D47C" title="Consolidated Database Replay does not require any special steps for capturing database workloads.">Capturing Database Workloads for Consolidated Database Replay</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667" title="Setting up the test system for Consolidated Database Replay is similar to setting up a test system for Database Replay.">Setting Up the Test System for Consolidated Database Replay</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-E8EB57F8-8977-47FA-8FD4-B2C528CE7FE4" title="Preprocessing a database workload for Consolidated Database Replay is similar to preprocessing a database workload for Database Replay.">Preprocessing Database Workloads for Consolidated Database Replay</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-BFC7713A-5BEB-4A2E-9B0F-9F43A983BC6C" title="Replaying consolidated workloads using Consolidated Database Replay is quite different from replaying a single database workload using Database Replay.">Replaying Database Workloads for Consolidated Database Replay</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" title="Reporting and analysis for Consolidated Database Replay is performed using the replay compare period report. See "" for more information.">Reporting and Analysis for Consolidated Database Replay</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG4086"></a><div class="props_rev_3"><a id="GUID-29DEF1D4-AA77-4BF5-938E-52EFC666D47C" name="GUID-29DEF1D4-AA77-4BF5-938E-52EFC666D47C"></a><h4 id="RATUG-GUID-29DEF1D4-AA77-4BF5-938E-52EFC666D47C" class="sect4"><span class="enumeration_section">15.2.1 </span>Capturing Database Workloads for Consolidated Database Replay
                  </h4>
                  <div>
                     <div><span>Consolidated Database Replay does not require any special steps for capturing database workloads.</span> The steps for capturing database workloads are exactly the same as for capturing a single workload for Database Replay, as described in <a href="capturing-a-database-workload.html#GUID-E774C161-98C0-43EF-8B78-DD74E2A2A219" title="This chapter describes how to capture a database workload on the production system.">Capturing a Database Workload</a>.
                     </div>
                     <p>This section contains the following topics for workload captures that are specific to Consolidated Database Replay:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-180A4527-003B-4441-8FE7-524A2206FB54" title="Consolidated Database Replay supports multiple workloads captured from one or multiple systems running Oracle Database 9i Release 2 (release 9.2.0.8.0) or higher on one or multiple operating systems.">Supported Types of Workload Captures</a></p>
                        </li>
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-C4DC0795-74B2-456D-AA0A-B4F7F45C81F8" title="Consolidated Database Replay enables you to transform existing workload captures into new, smaller pieces of capture subsets.">Capture Subsets</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG4087"></a><div class="props_rev_3"><a id="GUID-180A4527-003B-4441-8FE7-524A2206FB54" name="GUID-180A4527-003B-4441-8FE7-524A2206FB54"></a><h5 id="RATUG-GUID-180A4527-003B-4441-8FE7-524A2206FB54" class="sect5"><span class="enumeration_section">15.2.1.1 </span>Supported Types of Workload Captures
                     </h5>
                     <div>
                        <div><span>Consolidated Database Replay supports multiple workloads captured from one or multiple systems running Oracle Database 9<span class="italic">i</span> Release 2 (release 9.2.0.8.0) or higher on one or multiple operating systems.</span> For example, you can use workloads captured from one system running Oracle Database 9<span class="italic">i</span> Release 2 (release 9.2.0.8.0) on HP-UX and another system running Oracle Database 10<span class="italic">g</span> Release 2 (release 10.2.0.4.0) on AIX.
                        </div>
                        <div class="infoboxnote" id="GUID-180A4527-003B-4441-8FE7-524A2206FB54__GUID-3D39C9AB-52AD-4AF2-B52C-4A5131DB8D62">
                           <p class="notep1">Note:</p>
                           <p>Consolidated Database Replay is only available on Oracle Database 11<span class="italic">g</span> Release 2 (release 11.2.0.2.0) and higher.
                           </p>
                        </div>
                     </div>
                  </div><a id="RATUG4088"></a><div class="props_rev_3"><a id="GUID-C4DC0795-74B2-456D-AA0A-B4F7F45C81F8" name="GUID-C4DC0795-74B2-456D-AA0A-B4F7F45C81F8"></a><h5 id="RATUG-GUID-C4DC0795-74B2-456D-AA0A-B4F7F45C81F8" class="sect5"><span class="enumeration_section">15.2.1.2 </span>Capture Subsets
                     </h5>
                     <div>
                        <div><span>Consolidated Database Replay enables you to transform existing workload captures into new, smaller pieces of capture subsets.</span> You can then generate new workload captures from the capture subsets that can be used in different use cases, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CA75813D-10DB-4635-B127-6747CEC0C6D8" title="Consolidated Database Replay enables you to replay multiple workloads captured from one or multiple systems concurrently.">Use Cases for Consolidated Database Replay</a>"</span>.
                        </div>
                        <p>A <span class="bold">capture subset</span> is a piece of a workload capture that is defined from an existing workload capture by applying a time range. The time range is specified as an offset from the start of the workload capture. All user workloads captured within the specified time range are included in the defined capture subset.
                        </p>
                        <p>For example, assume that a workload was captured from 2 a.m. to 8 p.m. and the peak workload is identified to be from 10 a.m. to 4 p.m. You can define a capture subset to represent the peak workload by applying a time range that starts at 8 hours after the start of the workload (or 10 a.m.) and ends at 14 hours after the start of the workload (or 4 p.m.).</p>
                        <p>However, if a capture subset only contains recorded user workloads that satisfy the specified time range, user logins that occurred before the specified time range are not recorded. If these user logins are required for replay, then the capture subset may not be replayable. For example, if a user session starts at 9:30 a.m. and ends at 10:30 a.m. and the specified time range for the capture subset is 10:00 a.m. to 4:00 p.m., the replay may fail if the user login at 9:30 a.m. is not included in the workload. Similarly, the specified time range may also include incomplete user calls that are only partially recorded if a user sessions starts at 3:30 p.m. but does not complete until 4:30 p.m.</p>
                        <p>Consolidated Database Replay addresses this problem by including only incomplete user calls caused by the start time of the specified time range. To avoid including the same incomplete user calls twice if the workload capture is folded, incomplete user calls caused by the end time are <span class="italic">not</span> included by default. Therefore, a capture subset is essentially the minimal number of recorded user calls during a specified time range that are required for proper replay, including the necessary user logins, alter session statements, and incomplete user calls caused by the start time.
                        </p>
                        <div class="infoboxnotealso" id="GUID-C4DC0795-74B2-456D-AA0A-B4F7F45C81F8__GUID-43ACD249-5A94-411D-B55B-5FC6EA5BAB9A">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC" title="This section describes how to generate capture subsets from existing workload captures using the DBMS_WORKLOAD_REPLAY package.">Generating Capture Subsets Using APIs</a>"</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="RATUG4091"></a><a id="RATUG4090"></a><div class="props_rev_3"><a id="GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667" name="GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667"></a><h4 id="RATUG-GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667" class="sect4"><span class="enumeration_section">15.2.2 </span>Setting Up the Test System for Consolidated Database Replay
                  </h4>
                  <div>
                     <div><span>Setting up the test system for Consolidated Database Replay is similar to setting up a test system for Database Replay.</span> However, there are some additional considerations when setting up a replay database for Consolidated Database Replay. See <span class="q">"<a href="replaying-a-database-workload.html#GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F" title="Proper preparation of the replay system and planning of the workload replay ensures that the replay will be accurate.">Steps for Replaying a Database Workload</a>"</span> for more information about setting up a test system for Database Replay.
                     </div>
                     <p>To minimize divergence during the replay, the test system should contain the same application data and the state of the application data should be logically equivalent to that of the capture system at the start time of each workload capture. However, because a consolidated capture may contain multiple workload captures from different production systems, the test system needs to be set up for all the captures. In this case, it is recommended that the multitenant architecture be used to consolidate multiple databases, so that each database will have equivalent data to its capture system at the capture start time.</p>
                     <p>For Consolidated Database Replay, all participating workload captures must be placed under a new capture directory on the test system. You can copy all the workload captures into the new <a id="d31544e1083" class="indexterm-anchor"></a>capture directory, or create symbolic links pointing to the original workload captures. Before consolidating the workload captures, ensure that the new capture directory has enough disk space to store all participating captures.
                     </p>
                     <p><a href="using-consolidated-database-replay.html#GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667__CHDEFCDA">Figure 15-1</a> illustrates how to set up the test system and new capture directory to consolidate three workload captures.
                     </p>
                     <div class="figure" id="GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667__CHDEFCDA">
                        <p class="titleinfigure">Figure 15-1 Setting Up the Test System for Consolidated Database Replay</p><img src="img/ratug004.png" width="279" alt="Description of Figure 15-1 follows" title="Description of Figure 15-1 follows" longdesc="img_text/ratug004.html"><br><a href="img_text/ratug004.html">Description of "Figure 15-1 Setting Up the Test System for Consolidated Database Replay"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667__GUID-C9AEA61F-FC73-49D6-9614-D130925F9A09">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA" title="This section describes how to set the consolidated replay directory on the test system using the DBMS_WORKLOAD_REPLAY package.">Setting the Consolidated Replay Directory Using APIs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for information about the multitenant architecture
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RATUG4089"></a><div class="props_rev_3"><a id="GUID-E8EB57F8-8977-47FA-8FD4-B2C528CE7FE4" name="GUID-E8EB57F8-8977-47FA-8FD4-B2C528CE7FE4"></a><h4 id="RATUG-GUID-E8EB57F8-8977-47FA-8FD4-B2C528CE7FE4" class="sect4"><span class="enumeration_section">15.2.3 </span>Preprocessing Database Workloads for Consolidated Database Replay
                  </h4>
                  <div>
                     <div><span>Preprocessing a database workload for Consolidated Database Replay is similar to preprocessing a database workload for Database Replay.</span> See <span class="q">"<a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a>"</span> for information about preprocessing a database workload for Database Replay.
                     </div>
                     <p>For Consolidated Database Replay, preprocess each captured workload into its own directory. Do not combine different workload captures into one directory for preprocessing. Preprocessing of captured workloads must be performed using a database running the same version of Oracle Database as that of the test system where the workloads will be replayed.</p>
                  </div>
               </div><a id="RATUG4092"></a><div class="props_rev_3"><a id="GUID-BFC7713A-5BEB-4A2E-9B0F-9F43A983BC6C" name="GUID-BFC7713A-5BEB-4A2E-9B0F-9F43A983BC6C"></a><h4 id="RATUG-GUID-BFC7713A-5BEB-4A2E-9B0F-9F43A983BC6C" class="sect4"><span class="enumeration_section">15.2.4 </span>Replaying Database Workloads for Consolidated Database Replay
                  </h4>
                  <div>
                     <p>Replaying consolidated workloads using Consolidated Database Replay is quite different from replaying a single database workload using Database Replay.</p>
                     <p>This section contains the following topics for replaying workloads that are specific to Consolidated Database Replay:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A" title="A replay schedule adds one or multiple workload captures to a consolidated replay and specifies the order in which the captures will start during replay.">Defining Replay Schedules</a></p>
                        </li>
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-A2D6CDAF-A91D-4DA4-ADCE-038595E851A9" title="As in the case with replaying a single database workload using Database Replay, captured connection strings used to connect to the production system need to be remapped to the replay system.">Remapping Connections for Consolidated Database Replay</a></p>
                        </li>
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-48411BB5-E585-4783-B016-72DCD97074CE" title="As in the case with replaying a single database workload using Database Replay, usernames of database users and schemas used to connect to the production system can be remapped during replay. See "" for more information.">Remapping Users for Consolidated Database Replay</a></p>
                        </li>
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-C2F6DA54-9C2C-40CE-B357-F58126C0E2EE" title="As is the case with replaying a single database workload using Database Replay, replay options are defined during preparation of a replay.">Preparing for Consolidated Database Replay</a></p>
                        </li>
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-C0629657-BFE2-48AB-8BF6-E1EBBCEB79EE" title="It is recommended that each of the participating workloads be replayed individually before replaying the consolidated workload.">Replaying Individual Workloads</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG4093"></a><div class="props_rev_3"><a id="GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A" name="GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A"></a><h5 id="RATUG-GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A" class="sect5"><span class="enumeration_section">15.2.4.1 </span>Defining Replay Schedules
                     </h5>
                     <div>
                        <div><span>A <span class="bold">replay schedule</span> adds one or multiple workload captures to a consolidated replay and specifies the order in which the captures will start during replay.</span> A replay schedule must be created before a consolidated replay can be initialized. Multiple replay schedules can be defined for a consolidated replay. During replay initialization, you can select from any of the existing replay schedules.
                        </div>
                        <p>Replay schedules perform two types of operation:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="using-consolidated-database-replay.html#GUID-816A1006-2A04-4C6C-B046-8C0F26FB7C70" title="The first type of operation performed by a replay schedule is to add the participating workload captures to a replay.">Adding Workload Captures</a></p>
                           </li>
                           <li>
                              <p><a href="using-consolidated-database-replay.html#GUID-03A418A1-2FB3-43FE-AC82-C9703C3224EA" title="The second type of operation performed by a replay schedule is to add schedule orders that specify the order in which the participating workload captures will start during replay.">Adding Schedule Orders</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A__GUID-E9D32462-7C44-427F-87D6-1157183438F2">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-0C2C161B-76C7-4D14-87A1-2364EF731ECD" title="This section describes how to define replay schedules using the DBMS_WORKLOAD_REPLAY package.">Defining Replay Schedules Using APIs</a>"</span></p>
                        </div>
                     </div><a id="RATUG4094"></a><div class="props_rev_3"><a id="GUID-816A1006-2A04-4C6C-B046-8C0F26FB7C70" name="GUID-816A1006-2A04-4C6C-B046-8C0F26FB7C70"></a><h6 id="RATUG-GUID-816A1006-2A04-4C6C-B046-8C0F26FB7C70" class="sect6"><span class="enumeration_section">15.2.4.1.1 </span>Adding Workload Captures
                        </h6>
                        <div>
                           <p>The first type of operation performed by a replay schedule is to add the participating workload captures to a replay.</p>
                           <p>When a workload capture is added to a replay schedule, a unique number is returned to identify the workload capture. A workload capture can be added to a replay schedule more than once, as it will be assigned a different capture number each time it is added. The replay schedule will point to the same capture directory each time to avoid a waste of disk space by copying the capture each time it is added.</p>
                           <div class="infoboxnotealso" id="GUID-816A1006-2A04-4C6C-B046-8C0F26FB7C70__GUID-C33A7BE0-BE78-4C77-BEBC-EB5A511FFA0C">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span></p>
                           </div>
                        </div>
                     </div><a id="RATUG4095"></a><div class="props_rev_3"><a id="GUID-03A418A1-2FB3-43FE-AC82-C9703C3224EA" name="GUID-03A418A1-2FB3-43FE-AC82-C9703C3224EA"></a><h6 id="RATUG-GUID-03A418A1-2FB3-43FE-AC82-C9703C3224EA" class="sect6"><span class="enumeration_section">15.2.4.1.2 </span>Adding Schedule Orders
                        </h6>
                        <div>
                           <p>The second type of operation performed by a replay schedule is to add schedule orders that specify the order in which the participating workload captures will start during replay.</p>
                           <p>A <a id="d31544e1621" class="indexterm-anchor"></a><span class="bold">schedule order</span> defines an order between the start of two workload captures that have been added to the replay schedule. Multiple schedule orders can be added to a replay schedule. For example, assume that a replay schedule has three workload captures added. One schedule order can be added to specify that Capture 2 must wait for Capture 1 to complete before starting. Another schedule order can be added to specify that Capture 3 must wait for Capture 1 to complete before starting. In this case, both Capture 2 and Capture 3 must wait for Capture 1 to complete before starting.
                           </p>
                           <p>It is possible for a replay schedule to not contain any schedule orders. In this case, all participating workload captures in the replay schedule will start to replay simultaneously when the consolidated replay begins.</p>
                           <div class="infoboxnotealso" id="GUID-03A418A1-2FB3-43FE-AC82-C9703C3224EA__GUID-1379BFFF-3832-4AEF-A41E-DAC7254ECDA5">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73" title="This section describes how to add schedule orders to and remove schedule orders from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Schedule Orders to Replay Schedules Using APIs</a>"</span></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="RATUG4096"></a><div class="props_rev_3"><a id="GUID-A2D6CDAF-A91D-4DA4-ADCE-038595E851A9" name="GUID-A2D6CDAF-A91D-4DA4-ADCE-038595E851A9"></a><h5 id="RATUG-GUID-A2D6CDAF-A91D-4DA4-ADCE-038595E851A9" class="sect5"><span class="enumeration_section">15.2.4.2 </span>Remapping Connections for Consolidated Database Replay
                     </h5>
                     <div>
                        <div><span>As in the case with replaying a single database workload using Database Replay, captured connection strings used to connect to the production system need to be remapped to the replay system.</span> See <span class="q">"<a href="replaying-a-database-workload.html#GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B" title="During workload capture, connection strings used to connect to the production system are captured. In order for the replay to succeed, you need to remap these connection strings to the replay system. The replay clients can then connect to the replay system using the remapped connections.">Connection Remapping</a>"</span> for more information.
                        </div>
                        <p>For <a id="d31544e1731" class="indexterm-anchor"></a>Consolidated Database Replay, you need to remap captured connection strings from multiple workload captures to different connection strings during replay.
                        </p>
                        <div class="infoboxnotealso" id="GUID-A2D6CDAF-A91D-4DA4-ADCE-038595E851A9__GUID-8E052D59-1915-4BA9-B3EA-CD59DC22C6AE">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-284D7908-40EE-4570-AE78-E75AAA294327" title="This section describes how to remap connection strings for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Remapping Connection Using APIs</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="RATUG4097"></a><div class="props_rev_3"><a id="GUID-48411BB5-E585-4783-B016-72DCD97074CE" name="GUID-48411BB5-E585-4783-B016-72DCD97074CE"></a><h5 id="RATUG-GUID-48411BB5-E585-4783-B016-72DCD97074CE" class="sect5"><span class="enumeration_section">15.2.4.3 </span>Remapping Users for Consolidated Database Replay
                     </h5>
                     <div>
                        <div><span>As in the case with replaying a single database workload using Database Replay, usernames of database users and schemas used to connect to the production system can be remapped during replay. See <span class="q">"<a href="replaying-a-database-workload.html#GUID-A00C24B9-28C9-46E4-839F-A0ABDA6C4C24" title="During workload capture, the username of the database user or schema used to connect to the production system is captured. You can choose to remap the captured username to that of a new user or schema.">User Remapping</a>"</span> for more information.</span></div>
                        <p>For <a id="d31544e1835" class="indexterm-anchor"></a>Consolidated Database Replay, you can choose to remap the captured users from multiple workload captures to different users or schemas during replay.
                        </p>
                        <div class="infoboxnotealso" id="GUID-48411BB5-E585-4783-B016-72DCD97074CE__GUID-18CC0161-29E8-42BB-AC28-D211140E85C5">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915" title="This section describes how to remap users for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Remapping Users Using APIs</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="RATUG4098"></a><div class="props_rev_3"><a id="GUID-C2F6DA54-9C2C-40CE-B357-F58126C0E2EE" name="GUID-C2F6DA54-9C2C-40CE-B357-F58126C0E2EE"></a><h5 id="RATUG-GUID-C2F6DA54-9C2C-40CE-B357-F58126C0E2EE" class="sect5"><span class="enumeration_section">15.2.4.4 </span>Preparing for Consolidated Database Replay
                     </h5>
                     <div>
                        <div><span>As is the case with replaying a single database workload using Database Replay, replay options are defined during preparation of a replay.</span> See <span class="q">"<a href="replaying-a-database-workload.html#GUID-289F573A-9C83-4A29-A1D4-323705E8293D" title="After the database is restored, and connections and users are remapped, you can set the appropriate replay options.">Specifying Replay Options</a>"</span> for more information.
                        </div>
                        <p>For <a id="d31544e1940" class="indexterm-anchor"></a>Consolidated Database Replay, all participating workload captures in a consolidated replay use the same replay options during replay that are defined during replay preparation.
                        </p>
                        <div class="infoboxnotealso" id="GUID-C2F6DA54-9C2C-40CE-B357-F58126C0E2EE__GUID-3C4FAAE0-B74D-44BA-B8EF-C951BC4E3869">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68" title="This section describes how to prepare a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Preparing for Consolidated Database Replay Using APIs</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="RATUG4099"></a><div class="props_rev_3"><a id="GUID-C0629657-BFE2-48AB-8BF6-E1EBBCEB79EE" name="GUID-C0629657-BFE2-48AB-8BF6-E1EBBCEB79EE"></a><h5 id="RATUG-GUID-C0629657-BFE2-48AB-8BF6-E1EBBCEB79EE" class="sect5"><span class="enumeration_section">15.2.4.5 </span>Replaying Individual Workloads
                     </h5>
                     <div>
                        <div><span>It is recommended that each of the participating workloads be replayed individually before replaying the consolidated workload.</span> See <span class="q">"<a href="replaying-a-database-workload.html#GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B" title="After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.">Replaying a Database Workload</a>"</span> for more information.
                        </div>
                        <p>The individual replays can establish a baseline performance for each workload capture and be used to analyze the performance of the consolidated replay.</p>
                     </div>
                  </div>
               </div><a id="RATUG4202"></a><a id="RATUG4100"></a><div class="props_rev_3"><a id="GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" name="GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954"></a><h4 id="RATUG-GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" class="sect4"><span class="enumeration_section">15.2.5 </span>Reporting and Analysis for Consolidated Database Replay
                  </h4>
                  <div>
                     <div><span>Reporting and analysis for Consolidated Database Replay is performed using the replay compare period report. See <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" title="Replay compare period reports can be used for several purposes.">Using Replay Compare Period Reports</a>"</span> for more information.</span></div>
                     <p>The replay compare period report for Consolidated Database Replay identifies the Active Session History (ASH) data for each individual workload capture and compares the ASH data from the workload capture to the filtered ASH data from the consolidated replay. Use this report to compare replays of the same consolidated workload capture.</p>
                     <p>The replay compare period report for Consolidated Database Replay treats the consolidated replay as multiple Capture vs. Replay comparisons. The summary section of the report contains a table that summarizes all individual Capture vs. Replay comparisons. Review the information in this section to gain a general understanding of how the consolidated replay ran.</p>
                     <p><a href="using-consolidated-database-replay.html#GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954__CHDCBGFE">Figure 15-2</a> shows the summary section of a sample replay compare period report for Consolidated Database Replay.
                     </p>
                     <div class="figure" id="GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954__CHDCBGFE">
                        <p class="titleinfigure">Figure 15-2 Compare Period Report: Consolidated Replay</p><img src="img/dbr_rep_cons_replay.gif" width="505" alt="Description of Figure 15-2 follows" title="Description of Figure 15-2 follows" longdesc="img_text/dbr_rep_cons_replay.html"><br><a href="img_text/dbr_rep_cons_replay.html">Description of "Figure 15-2 Compare Period Report: Consolidated Replay"</a></div>
                     <!-- class="figure" -->
                     <p>The rest of the sections in the report resemble the ASH Data Comparison section of the replay compare period report and are formed by joining all Capture vs. Replay reports in the consolidated replay. For a description of this section, see <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" title="This section compares the ASH data across the two runs.">ASH Data Comparison</a>"</span>.
                     </p>
                  </div>
               </div>
            </div><a id="RATUG4137"></a><div class="props_rev_3"><a id="GUID-BBC96414-F08A-4D57-BA72-B28C1BBEE9F2" name="GUID-BBC96414-F08A-4D57-BA72-B28C1BBEE9F2"></a><h3 id="RATUG-GUID-BBC96414-F08A-4D57-BA72-B28C1BBEE9F2" class="sect3"><span class="enumeration_section">15.3 </span>Using Consolidated Database Replay with Enterprise Manager
               </h3>
               <div>
                  <p>This section describes how to use Consolidated Database Replay with Enterprise Manager.</p>
                  <p>The primary tool for replaying consolidated database workloads is Oracle Enterprise Manager. If Oracle Enterprise Manager is unavailable, you can also replay consolidated database workloads using APIs, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5" title="This section describes how to create and replay consolidated workloads using the DBMS_WORKLOAD_REPLAY package.">Using Consolidated Database Replay with APIs</a>"</span>.
                  </p>
                  <p>The process for replaying a consolidated database workload is nearly identical to that of replaying a single database workload. The differences are documented in the procedures for single replays in the following sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="preprocessing-a-database-workload.html#GUID-8012B6B9-4571-4802-9B87-CC44B3E51DF0" title="Before creating a database replay task, make sure that the capture that you want to replay has some captured user calls.">Creating a Database Replay Task</a>"</span> in <a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="preprocessing-a-database-workload.html#GUID-6C328D8F-9451-4733-AB51-595BE096DAC9" title="The final preparation for the replay involves preprocessing the workload and deploying the replay clients.">Preprocessing the Workload and Deploying the Replay Clients</a>"</span> in <a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-B97B7550-A947-45D0-A31B-636A6427DD86" title="This section describes how to replay a database workload using Enterprise Manager.">Replaying a Database Workload Using Enterprise Manager</a>"</span> in <a href="replaying-a-database-workload.html#GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B" title="After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.">Replaying a Database Workload</a></p>
                     </li>
                  </ul>
                  <p>The following list provides a summary of the differences between replaying a consolidated database workload versus replaying a single database workload:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>When creating a replay task, you need to select two or more captured workloads from the Select Captures table in the Create Task page.</p>
                     </li>
                     <li>
                        <p>The Preprocess Captured Workload: Copy Workload step of the wizard has more than one choice for the Capture Name drop-down, so you may need to enter multiple credentials for the current location of the workload directory.</p>
                     </li>
                     <li>
                        <p>The Preprocess Captured Workload: Select Directory step of the wizard does not display a Capture Summary as it does for single replays.</p>
                     </li>
                     <li>
                        <p>The Replay Workload: Copy Workload step of the wizard has more than one choice for the Capture Name drop-down, so you may need to enter multiple credentials for the current location of the workload directory.</p>
                     </li>
                     <li>
                        <p>The Replay Workload: Select Directory step of the wizard does not display a Capture Summary as it does for single replays.</p>
                     </li>
                     <li>
                        <p>The Replay Workload: Initialize Options step of the wizard does not display the Identify Source section.</p>
                     </li>
                     <li>
                        <p>The Replay Workload: Customize Options step of the wizard has more than one choice for the Capture Name drop-down in the Connection Mappings tab, so you can remap connections for each captured workload. The option to use a single connect descriptor or net service name is not available.</p>
                     </li>
                  </ul>
               </div>
            </div><a id="RATUG4102"></a><div class="props_rev_3"><a id="GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5" name="GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5"></a><h3 id="RATUG-GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5" class="sect3"><span class="enumeration_section">15.4 </span>Using Consolidated Database Replay with APIs
               </h3>
               <div>
                  <div><span>This section describes how to create and replay consolidated workloads using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> You can also create and replay consolidated workloads using Oracle Enterprise Manager, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-BBC96414-F08A-4D57-BA72-B28C1BBEE9F2" title="This section describes how to use Consolidated Database Replay with Enterprise Manager.">Using Consolidated Database Replay with Enterprise Manager</a>"</span>.
                  </div>
                  <p>Creating and replay a consolidated workload using APIs is a multi-step process that involves:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC" title="This section describes how to generate capture subsets from existing workload captures using the DBMS_WORKLOAD_REPLAY package.">Generating Capture Subsets Using APIs</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA" title="This section describes how to set the consolidated replay directory on the test system using the DBMS_WORKLOAD_REPLAY package.">Setting the Consolidated Replay Directory Using APIs</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-0C2C161B-76C7-4D14-87A1-2364EF731ECD" title="This section describes how to define replay schedules using the DBMS_WORKLOAD_REPLAY package.">Defining Replay Schedules Using APIs</a></p>
                     </li>
                     <li>
                        <p><a href="using-consolidated-database-replay.html#GUID-10610AAB-EB5C-441C-A1E3-64DEDEC6B45F" title="This section describes how to run Consolidated Database Replay using the DBMS_WORKLOAD_REPLAY package.">Running Consolidated Database Replay Using APIs</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5__GUID-582B0AC9-B098-4AB4-9317-D73A941DD678">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package
                     </p>
                  </div>
               </div><a id="RATUG4104"></a><a id="RATUG4103"></a><div class="props_rev_3"><a id="GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC" name="GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC"></a><h4 id="RATUG-GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC" class="sect4"><span class="enumeration_section">15.4.1 </span>Generating Capture Subsets Using APIs
                  </h4>
                  <div>
                     <div><span>This section describes how to generate capture subsets from existing workload captures using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about capture subsets, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-C4DC0795-74B2-456D-AA0A-B4F7F45C81F8" title="Consolidated Database Replay enables you to transform existing workload captures into new, smaller pieces of capture subsets.">Capture Subsets</a>"</span>.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC__GUID-A33C5A55-01CF-4624-BEDB-A4161822E486">To generate a capture subset from existing workload captures:</p>
                        <ol>
                           <li>
                              <p>Use the <a id="d31544e2574" class="indexterm-anchor"></a><code class="codeph">GENERATE_CAPTURE_SUBSET</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.GENERATE_CAPTURE_SUBSET (
   input_capture_dir        IN VARCHAR2,
   output_capture_dir       IN VARCHAR2,
   new_capture_name         IN VARCHAR2,
   begin_time               IN NUMBER,
   begin_include_incomplete IN BOOLEAN   DEFAULT TRUE,
   end_time                 IN NUMBER,
   end_include_incomplete   IN BOOLEAN   DEFAULT FALSE,
   parallel_level           IN NUMBER    DEFAULT NULL);
</pre></li>
                           <li>
                              <p>Set the <code class="codeph">input_capture_dir</code> parameter to the name of the directory object that points to an existing workload capture.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">output_capture_dir</code> parameter to the name of the directory object that points to an empty directory where the new workload capture will be stored.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">new_capture_name</code> parameter to the name of the new workload capture that is to be generated.
                              </p>
                           </li>
                           <li>
                              <p>Set the other parameters, which are optional, as appropriate.</p>
                              <p>For information about these parameters, see <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73989" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example shows how to create a capture subset named <code class="codeph">peak_wkld</code> at directory object <code class="codeph">peak_capdir</code> from an existing workload capture at directory object <code class="codeph">rec_dir</code>. The capture subset includes workload from 2 hours after the start of the workload capture (or 7,200 seconds) to 3 hours after the start of the workload capture (or 10,800 seconds).
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.GENERATE_CAPTURE_SUBSET ('rec_dir', 'peak_capdir',
     'peak_wkld', 7200, TRUE, 10800, FALSE, 1);</pre><div class="infoboxnotealso" id="GUID-936472E4-89E9-4FBA-8474-1E3831BFB3CC__GUID-92C841A0-762E-470B-A2FD-4244B1C407CF">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73988" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">GENERATE_CAPTURE_SUBSET</code> procedure
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG4106"></a><a id="RATUG4105"></a><div class="props_rev_3"><a id="GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA" name="GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA"></a><h4 id="RATUG-GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA" class="sect4"><span class="enumeration_section">15.4.2 </span>Setting the Consolidated Replay Directory Using APIs
                  </h4>
                  <div>
                     <div><span>This section describes how to set the consolidated replay directory on the test system using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> Set the consolidated replay directory to a directory on the test system that contains the workload captures to be consolidated and replayed. For information about setting up the test system, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-D4B92163-DB56-403B-81B2-B3E91D3EA667" title="Setting up the test system for Consolidated Database Replay is similar to setting up a test system for Database Replay.">Setting Up the Test System for Consolidated Database Replay</a>"</span>.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA__GUID-08AA053F-1F61-4480-91C6-54DC27CD74D5">To set the replay directory:</p>
                        <ol>
                           <li>
                              <p>Use the <a id="d31544e2744" class="indexterm-anchor"></a><code class="codeph">SET_CONSOLIDATED_DIRECTORY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.SET_CONSOLIDATED_DIRECTORY (
   replay_dir IN VARCHAR2);
</pre></li>
                           <li>
                              <p>Set the <code class="codeph">replay_dir</code> parameter to the name of the directory object that points to the operating system directory containing the workload captures to be used for workload consolidation.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infobox-tip" id="GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA__GUID-115AB160-02CF-4480-867C-003560AADEFF">
                           <p class="notep1">Tip:</p>
                           <p>The <code class="codeph">SET_REPLAY_DIRECTORY</code> procedure is deprecated and replaced by the <code class="codeph">SET_CONSOLIDATED_DIRECTORY</code> procedure.
                           </p>
                        </div>
                        <p>This example shows how to set the replay directory to a directory object named <code class="codeph">rep_dir</code>.
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.SET_CONSOLIDATED_DIRECTORY ('rep_dir');
</pre><p>You can also use the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package to view the current consolidated replay directory that has been set by the <code class="codeph">SET_CONSOLIDATED_DIRECTORY</code> procedure.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA__GUID-555DD23B-9C2A-4F48-8F75-02E46F4BAC1D">To view the current consolidated replay directory that has been set:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d31544e2792" class="indexterm-anchor"></a><code class="codeph">GET_REPLAY_DIRECTORY</code> function:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.GET_REPLAY_DIRECTORY RETURN VARCHAR2;
</pre><p>If no consolidated replay directory has been set, then the function returns <code class="codeph">NULL</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA__GUID-D44D28BA-6804-4D88-A07D-A40A8FDB3CA8">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73107" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">SET_REPLAY_DIRECTORY</code> procedure
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73993" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">GET_REPLAY_DIRECTORY</code> function
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG4107"></a><div class="props_rev_3"><a id="GUID-0C2C161B-76C7-4D14-87A1-2364EF731ECD" name="GUID-0C2C161B-76C7-4D14-87A1-2364EF731ECD"></a><h4 id="RATUG-GUID-0C2C161B-76C7-4D14-87A1-2364EF731ECD" class="sect4"><span class="enumeration_section">15.4.3 </span>Defining Replay Schedules Using APIs
                  </h4>
                  <div>
                     <div><span>This section describes how to define replay schedules using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about replay schedules, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A" title="A replay schedule adds one or multiple workload captures to a consolidated replay and specifies the order in which the captures will start during replay.">Defining Replay Schedules</a>"</span>.
                     </div>
                     <div class="p">
                        <p>Before defining replay schedules, ensure that the following prerequisites are met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>All workload captures are preprocessed using the <code class="codeph">PROCESS_CAPTURE</code> procedure on a system running the same database version as the replay system, as described in <a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a>.
                              </p>
                           </li>
                           <li>
                              <p>All capture directories are copied to the replay directory on the replay system</p>
                           </li>
                           <li>
                              <p>Replay directory is set using the <code class="codeph">SET_REPLAY_DIRECTORY</code> procedure, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA" title="This section describes how to set the consolidated replay directory on the test system using the DBMS_WORKLOAD_REPLAY package.">Setting the Consolidated Replay Directory Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Database state is not in replay mode</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C2C161B-76C7-4D14-87A1-2364EF731ECD__GUID-A9FEED3A-A934-4E0A-BDCF-1A66BA473135">To define replay schedules:</p>
                        <ol>
                           <li>
                              <p>Create a new replay schedule, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" title="This section describes how to create replay schedules using the DBMS_WORKLOAD_REPLAY package.">Creating Replay Schedules Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Add workload captures to the replay schedule, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Add schedule orders to the replay schedule, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73" title="This section describes how to add schedule orders to and remove schedule orders from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Schedule Orders to Replay Schedules Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Save the replay schedule, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6" title="This section describes how to save replay schedules that been defined using the DBMS_WORKLOAD_REPLAY package.">Saving Replay Schedules Using APIs</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div><a id="RATUG4109"></a><a id="RATUG4108"></a><div class="props_rev_3"><a id="GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" name="GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB"></a><h5 id="RATUG-GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" class="sect5"><span class="enumeration_section">15.4.3.1 </span>Creating Replay Schedules Using APIs
                     </h5>
                     <div>
                        <div><span>This section describes how to create replay schedules using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about replay schedules, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-B1AEA82F-60E5-43CE-BB12-C6D72232886A" title="A replay schedule adds one or multiple workload captures to a consolidated replay and specifies the order in which the captures will start during replay.">Defining Replay Schedules</a>"</span>.
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB__GUID-A5058A68-E1F9-407F-A94D-09ADD270A720">To create a replay schedule:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e3132" class="indexterm-anchor"></a><code class="codeph">BEGIN_REPLAY_SCHEDULE</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.BEGIN_REPLAY_SCHEDULE (
   schedule_name  IN VARCHAR2);
</pre></li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_name</code> parameter to the name of this replay schedule.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB__GUID-05D8F5D8-67E1-4BBC-A2E2-59797D522AE0">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">BEGIN_REPLAY_SCHEDULE</code> procedure initiates the creation of a reusable replay schedule. Only one replay schedule can be defined at a time. Calling this procedure again while a replay schedule is being defined will result in an error.
                              </p>
                           </div>
                           <p>This example shows how to create a replay schedule named <code class="codeph">peak_schedule</code>.
                           </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.BEGIN_REPLAY_SCHEDULE ('peak_schedule');
</pre><div class="infoboxnotealso" id="GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB__GUID-47E10147-6E85-4499-A23C-A83CAAB4188D">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73985" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">BEGIN_REPLAY_SCHEDULE</code> procedure
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4111"></a><a id="RATUG4110"></a><div class="props_rev_3"><a id="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" name="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE"></a><h5 id="RATUG-GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" class="sect5"><span class="enumeration_section">15.4.3.2 </span>Adding Workload Captures to Replay Schedules Using APIs
                     </h5>
                     <div>
                        <div><span>This section describes how to add workload captures to and remove workload captures from replay schedules using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about adding workload captures to replay schedules, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-816A1006-2A04-4C6C-B046-8C0F26FB7C70" title="The first type of operation performed by a replay schedule is to add the participating workload captures to a replay.">Adding Workload Captures</a>"</span>.
                        </div>
                        <div class="p">
                           <p>Before adding workload captures to a replay schedule, ensure that the following prerequisite is met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A replay schedule to which the workload captures are to be added is created.</p>
                                 <p>For information about creating a replay schedule, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" title="This section describes how to create replay schedules using the DBMS_WORKLOAD_REPLAY package.">Creating Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE__GUID-5C6BF56D-BFF5-427F-A82F-7B4CC3A917D2">To add workload captures to a replay schedule:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e3301" class="indexterm-anchor"></a><code class="codeph">ADD_CAPTURE</code> function:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.ADD_CAPTURE (
   capture_dir_name    IN VARCHAR2,
   start_delay_seconds IN NUMBER  DEFAULT 0,
   stop_replay         IN BOOLEAN DEFAULT FALSE,
   take_begin_snapshot IN BOOLEAN DEFAULT FALSE,
   take_end_snapshot   IN BOOLEAN DEFAULT FALSE,
   query_only          IN BOOLEAN DEFAULT FALSE)
RETURN NUMBER;
</pre><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.ADD_CAPTURE (
   capture_dir_name    IN VARCHAR2,
   start_delay_seconds IN NUMBER,
   stop_replay         IN VARCHAR2,
   take_begin_snapshot IN VARCHAR2 DEFAULT 'N',
   take_end_snapshot   IN VARCHAR2 DEFAULT 'N',
   query_only          IN VARCHAR2 DEFAULT 'N')
RETURN NUMBER;
</pre><p>This function returns an unique identifier that identifies the workload capture in this replay schedule.</p>
                                 <div class="infoboxnote" id="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE__GUID-53354CB5-FBFD-442D-8276-6BB72D1D1A53">
                                    <p class="notep1">See:</p>
                                    <p><span class="q">"<a href="using-consolidated-database-replay.html#GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8" title="In a query-only database replay, only the read-only queries of a workload capture are replayed. In other words, in a query-only replay, only SELECT statements are sent to the server at replay time. No DML statements are executed during a query-only replay, and the replay does not make any changes to user schemas or data.">About Query-Only Database Replay</a>"</span> for information about query-only database replays.
                                    </p>
                                 </div>
                                 <div class="infoboxnote" id="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE__GUID-B085FB32-1640-415E-9700-AC8703E5BD8E">
                                    <p class="notep1">Note:</p>
                                    <p>Query-only database replays are meant to be used and executed in test environments only.</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Do not use query-only database replays on production systems.</p>
                                       </li>
                                       <li>
                                          <p>Divergence is expected during query-only database replays.</p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">capture_dir_name</code> parameter to the name of the directory object that points to the workload capture under the top-level replay directory.
                                 </p>
                                 <p>The directory must contain a valid workload capture that is preprocessed on a system running the same database version as the replay system.</p>
                              </li>
                              <li>
                                 <p>Set the other parameters, which are optional, as appropriate.</p>
                                 <p>For information about these parameters, see <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73982" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The following example shows how to add a workload capture named <code class="codeph">peak_wkld</code> to a replay schedule by using the <code class="codeph">ADD_CAPTURE</code> function in a <code class="codeph">SELECT</code> statement.
                           </p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_WORKLOAD_REPLAY.ADD_CAPTURE ('peak_wkld')
  FROM dual;
</pre><p>You can also use the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package to remove <a id="d31544e3374" class="indexterm-anchor"></a>workload captures from a replay schedule.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE__GUID-E63D6BCD-D837-4F8C-8061-58BDD6D5D0C9">To remove workload captures from a replay schedule:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e3388" class="indexterm-anchor"></a><code class="codeph">REMOVE_CAPTURE</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.REMOVE_CAPTURE (
   schedule_capture_number IN NUMBER);
</pre></li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_capture_number</code> parameter to the unique identifier that identifies the workload capture in this replay schedule.
                                 </p>
                                 <p>The unique identifier is the same identifier that was returned by the <code class="codeph">ADD_CAPTURE</code> function when the workload capture was added to the replay schedule.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE__GUID-EEA18DF4-962E-4C25-A7DF-AA804E9CC66E">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73981" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">ADD_CAPTURE</code> function
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73998" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">REMOVE_CAPTURE</code> procedure
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4112"></a><div class="props_rev_3"><a id="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73" name="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73"></a><h5 id="RATUG-GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73" class="sect5"><span class="enumeration_section">15.4.3.3 </span>Adding Schedule Orders to Replay Schedules Using APIs
                     </h5>
                     <div>
                        <div><span>This section describes how to add schedule orders to and remove schedule orders from replay schedules using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about adding schedule orders to replay schedules, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-03A418A1-2FB3-43FE-AC82-C9703C3224EA" title="The second type of operation performed by a replay schedule is to add schedule orders that specify the order in which the participating workload captures will start during replay.">Adding Schedule Orders</a>"</span>.
                        </div>
                        <div class="p">
                           <p>Before adding schedule orders to a replay schedule, ensure that the following prerequisites are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A replay schedule to which the schedule orders are to be added is created.</p>
                                 <p>For information about creating a replay schedule, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" title="This section describes how to create replay schedules using the DBMS_WORKLOAD_REPLAY package.">Creating Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>All workload captures participating in the schedule order are added to the replay schedule.</p>
                                 <p>For information about adding workload captures to a replay schedule, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73__GUID-04FD230E-1B5F-4195-B515-83108436357A">
                              <p class="notep1">Note:</p>
                              <p>Adding schedule orders to a replay schedule is optional. If you do not add a schedule order to a replay schedule, then all workload captures added to the replay schedule will start to replay simultaneously when the consolidated replay begins.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73__GUID-EE69F9DB-1E1E-46A1-A8A0-86DD81D758D7">To add schedule orders to a replay schedule:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e3579" class="indexterm-anchor"></a><code class="codeph">ADD_SCHEDULE_ORDERING</code> function:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.ADD_SCHEDULE_ORDERING (
   schedule_capture_id IN NUMBER,
   waitfor_capture_id IN NUMBER)
RETURN NUMBER;
</pre><p>This function adds a schedule order between two workload captures that have been added to the replay schedule. If a schedule order cannot be added, it returns a nonzero error code.</p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_capture_id</code> parameter to the workload capture that you want to wait in this schedule order.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">wait_for_capture_id</code> parameter to the workload capture that you want to be completed before the other workload capture can start in this schedule order.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>You can also use the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package to remove <a id="d31544e3609" class="indexterm-anchor"></a>schedule orders from a replay schedule.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73__GUID-7143E517-B55F-4E4D-A566-EB7871324702">To remove schedule orders from a replay schedule:</p>
                           <ol>
                              <li>
                                 <p>Use the <code class="codeph">REMOVE_SCHEDULE_ORDERING</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.REMOVE_SCHEDULE ORDERING (
   schedule_capture_id IN VARCHAR2,
   wait_for_capture_id IN VARCHAR2);
</pre></li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_capture_id</code> parameter to the workload capture waiting in this schedule order.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">wait_for_capture_id</code> parameter to the workload capture that needs to be completed before the other workload capture can start in this schedule order.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73__GUID-0E63F9CC-EAE1-4A45-8145-EA6777342EA5">To view schedule orders:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <code class="codeph">DBA_WORKLOAD_SCHEDULE_ORDERING</code> view.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73__GUID-01E4C99D-5167-4500-AA93-CCB305191218">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS72130" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">ADD_SCHEDULE_ORDERING</code> function
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS74000" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">REMOVE_SCHEDULE_ORDERING</code> procedure
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/DBA_WORKLOAD_SCHEDULE_ORDERING.html#REFRN23844" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">DBA_WORKLOAD_SCHEDULE_ORDERING</code> view
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4113"></a><div class="props_rev_3"><a id="GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6" name="GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6"></a><h5 id="RATUG-GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6" class="sect5"><span class="enumeration_section">15.4.3.4 </span>Saving Replay Schedules Using APIs
                     </h5>
                     <div>
                        <p>This section describes how to save replay schedules that been defined using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.
                        </p>
                        <div class="p">
                           <p>Before saving a replay schedule, ensure that the following prerequisites are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A replay schedule that will be saved is created.</p>
                                 <p>For information about creating a replay schedule, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" title="This section describes how to create replay schedules using the DBMS_WORKLOAD_REPLAY package.">Creating Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>All workload captures participating in the schedule order are added to the replay schedule.</p>
                                 <p>For information about adding workload captures to a replay schedule, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Any schedule orders that you want to use are added to the replay schedule (this step is optional).</p>
                                 <p>For information about adding schedule orders to a replay schedule, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CB0EBAEF-AE24-4EFA-A3F1-27C2479B3A73" title="This section describes how to add schedule orders to and remove schedule orders from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Schedule Orders to Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6__GUID-84F8B405-BB69-40CE-B1F1-191D17A36854">To save a replay schedule:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d31544e3830" class="indexterm-anchor"></a><code class="codeph">END_REPLAY_SCHEDULE</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.END_REPLAY_SCHEDULE;
</pre><p>This procedure completes the creation of a replay schedule. The replay schedule is saved and associated with the replay directory. Once a replay schedule is saved, you can use it for a consolidated replay.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6__GUID-DF78CE64-0AF7-4F9E-A53B-D71022E5D08B">To view replay schedules:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <code class="codeph">DBA_WORKLOAD_REPLAY_SCHEDULES</code> view.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-40B753EE-A8E0-4C58-AF63-70B23FBF73A6__GUID-8895EC74-CFA2-4AB2-9051-90C081E635B6">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73987" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">END_REPLAY_SCHEDULE</code> procedure
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/DBA_WORKLOAD_REPLAY_SCHEDULES.html#REFRN-GUID-5C3B2723-B9F9-491A-9226-171B8DAD6553" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">DBA_WORKLOAD_REPLAY_SCHEDULES</code> view
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="RATUG4114"></a><div class="props_rev_3"><a id="GUID-10610AAB-EB5C-441C-A1E3-64DEDEC6B45F" name="GUID-10610AAB-EB5C-441C-A1E3-64DEDEC6B45F"></a><h4 id="RATUG-GUID-10610AAB-EB5C-441C-A1E3-64DEDEC6B45F" class="sect4"><span class="enumeration_section">15.4.4 </span>Running Consolidated Database Replay Using APIs
                  </h4>
                  <div>
                     <div><span>This section describes how to run Consolidated Database Replay using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about consolidated replay, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-BFC7713A-5BEB-4A2E-9B0F-9F43A983BC6C" title="Replaying consolidated workloads using Consolidated Database Replay is quite different from replaying a single database workload using Database Replay.">Replaying Database Workloads for Consolidated Database Replay</a>"</span>.
                     </div>
                     <div class="p">
                        <p>Before running Consolidated Database Replay, ensure that the following prerequisites are met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>All workload captures are preprocessed using the <code class="codeph">PROCESS_CAPTURE</code> procedure on a system running the same database version as the replay system, as described in <a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a>.
                              </p>
                           </li>
                           <li>
                              <p>All capture directories are copied to the replay directory on the replay system</p>
                           </li>
                           <li>
                              <p>Replay directory is set using the <code class="codeph">SET_REPLAY_DIRECTORY</code> procedure, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-3A5F701E-6200-45C4-BDFD-D5A4740875DA" title="This section describes how to set the consolidated replay directory on the test system using the DBMS_WORKLOAD_REPLAY package.">Setting the Consolidated Replay Directory Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Database is logically restored to the same application state as that of all the capture systems at the start time of all workload captures.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10610AAB-EB5C-441C-A1E3-64DEDEC6B45F__GUID-28E06ED6-C11C-4310-BCD4-F08CA40D7C1D">To run Consolidated Database Replay:</p>
                        <ol>
                           <li>
                              <p>Initialize the replay data, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65" title="This section describes how to initialize the replay data for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Initializing Consolidated Database Replay Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Remap connections strings, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-284D7908-40EE-4570-AE78-E75AAA294327" title="This section describes how to remap connection strings for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Remapping Connection Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Remap users, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915" title="This section describes how to remap users for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Remapping Users Using APIs</a>"</span>.
                              </p>
                              <p>Remapping users is optional.</p>
                           </li>
                           <li>
                              <p>Prepare the consolidated replay, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68" title="This section describes how to prepare a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Preparing for Consolidated Database Replay Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Set up and start the replay clients, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F" title="At this point, you need to set up and start the replay clients, which will connect to the replay system and send requests based on what has been captured in the workload.">Setting Up Replay Clients</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Start the consolidated replay, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-62E2EA2B-D34C-47A0-BDA3-83E446DCC3D1" title="This section describes how to start a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Starting Consolidated Database Replay Using APIs</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Generate reports and perform analysis, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" title="Reporting and analysis for Consolidated Database Replay is performed using the replay compare period report. See "" for more information.">Reporting and Analysis for Consolidated Database Replay</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div><a id="RATUG4116"></a><a id="RATUG4115"></a><div class="props_rev_3"><a id="GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65" name="GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65"></a><h5 id="RATUG-GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65" class="sect5"><span class="enumeration_section">15.4.4.1 </span>Initializing Consolidated Database Replay Using APIs
                     </h5>
                     <div>
                        <p>This section describes how to initialize the replay data for a consolidated replay using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.
                        </p>
                        <div class="section">
                           <p>Initializing the replay data performs the following operations:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Puts the database state in initialized mode for the replay of a consolidated workload.</p>
                              </li>
                              <li>
                                 <p>Points to the replay directory that contains all workload captures participating in the replay schedule.</p>
                              </li>
                              <li>
                                 <p>Loads the necessary metadata into tables required for replay.</p>
                                 <p>For example, captured connection strings are loaded into a table where they can be remapped for replay.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65__GUID-D8874968-8015-448B-A276-AC0CF4922D8F">To initialize Consolidated Database Replay:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e4217" class="indexterm-anchor"></a><code class="codeph">INITIALIZE_CONSOLIDATED_REPLAY</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.INITIALIZE_CONSOLIDATED_REPLAY (
   replay_name    IN VARCHAR2,
   schedule_name  IN VARCHAR2,
   plsql_mode     IN VARCHAR2 DEFAULT 'TOP_LEVEL');
</pre></li>
                              <li>
                                 <p>Set the <code class="codeph">replay_name</code> parameter to the name of the consolidated replay.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_name</code> parameter to the name of the replay schedule to use.
                                 </p>
                                 <p>The <code class="codeph">schedule_name</code> parameter is the name of the replay schedule used during its creation, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-CC592BD9-1FBE-46BA-88DD-ABB191C93EAB" title="This section describes how to create replay schedules using the DBMS_WORKLOAD_REPLAY package.">Creating Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                           </ol>
                           <p>The optional <code class="codeph">plsql_mode</code> parameter specifies the PL/SQL replay mode.
                           </p>
                           <p>These two values can be set for the <code class="codeph">plsql_mode</code> parameter:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">top_level</code>: Only top-level PL/SQL calls. This is the default value.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">extended</code>: SQL executed inside PL/SQL or top-level PL/SQL if there is no SQL recorded inside. All captures must have been done in the <code class="codeph">‘extended’</code> PL/SQL mode. Non-PL/SQL calls will be replayed in the usual manner.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The following example shows how to initialize a consolidated replay named <code class="codeph">peak_replay</code> using the replay schedule named <code class="codeph">peak_schedule</code>.
                           </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.INITIALIZE_CONSOLIDATED_REPLAY ('peak_replay',
     'peak_schedule');
</pre><div class="infoboxnotealso" id="GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65__GUID-F69A8ED8-D38D-4C88-A697-667085ABC2F2">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73994" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">INITIALIZE_CONSOLIDATED_REPLAY</code> procedure
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4117"></a><div class="props_rev_3"><a id="GUID-284D7908-40EE-4570-AE78-E75AAA294327" name="GUID-284D7908-40EE-4570-AE78-E75AAA294327"></a><h5 id="RATUG-GUID-284D7908-40EE-4570-AE78-E75AAA294327" class="sect5"><span class="enumeration_section">15.4.4.2 </span>Remapping Connection Using APIs
                     </h5>
                     <div>
                        <div><span>This section describes how to remap connection strings for a consolidated replay using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about connection remapping, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-A2D6CDAF-A91D-4DA4-ADCE-038595E851A9" title="As in the case with replaying a single database workload using Database Replay, captured connection strings used to connect to the production system need to be remapped to the replay system.">Remapping Connections for Consolidated Database Replay</a>"</span>.
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-284D7908-40EE-4570-AE78-E75AAA294327__GUID-CC13AAA9-08DC-448B-9818-C83536C25724">To remap connection strings:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e4404" class="indexterm-anchor"></a><code class="codeph">REMAP_CONNECTION</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (
   schedule_cap_id   IN NUMBER,
   connection_id     IN NUMBER,
   replay_connection IN VARCHAR2);
</pre><p>This procedure remaps the captured connection to a new connection string for all participating workload captures in the replay schedule.</p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_capture_id</code> parameter to a participating workload capture in the current replay schedule.
                                 </p>
                                 <p>The <code class="codeph">schedule_capture_id</code> parameter is the unique identifier returned when adding the workload capture to the replay schedule, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">connection_id</code> parameter to the connection to be remapped.
                                 </p>
                                 <p>The <code class="codeph">connection_id</code> parameter is generated when replay data is initialized and corresponds to a connection from the workload capture.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">replay_connection</code> parameter to the new connection string that will be used during replay.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-284D7908-40EE-4570-AE78-E75AAA294327__GUID-01C606DC-D44E-4016-B215-C5F1146A4FB6">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS69093" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">REMAP_CONNECTION</code> procedure
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4119"></a><a id="RATUG4118"></a><div class="props_rev_3"><a id="GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915" name="GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915"></a><h5 id="RATUG-GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915" class="sect5"><span class="enumeration_section">15.4.4.3 </span>Remapping Users Using APIs
                     </h5>
                     <div>
                        <div><span>This section describes how to remap users for a consolidated replay using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about remapping users, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-48411BB5-E585-4783-B016-72DCD97074CE" title="As in the case with replaying a single database workload using Database Replay, usernames of database users and schemas used to connect to the production system can be remapped during replay. See "" for more information.">Remapping Users for Consolidated Database Replay</a>"</span>.
                        </div>
                        <div class="p">
                           <p>Before remapping users, ensure that the following prerequisites are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Replay data is initialized, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65" title="This section describes how to initialize the replay data for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Initializing Consolidated Database Replay Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>The database state is not in replay mode.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915__GUID-68972639-9541-46C0-8C4F-FFC32411E689">To remap users:</p>
                           <ol>
                              <li>
                                 <p>Use the <a id="d31544e4594" class="indexterm-anchor"></a><code class="codeph">SET_USER_MAPPING</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.SET_USER_MAPPING (
   schedule_cap_id IN NUMBER,
   capture_user    IN VARCHAR2,
   replay_user     IN VARCHAR2);
</pre></li>
                              <li>
                                 <p>Set the <code class="codeph">schedule_capture_id</code> parameter to a participating workload capture in the current replay schedule.
                                 </p>
                                 <p>The <code class="codeph">schedule_capture_id</code> parameter is the unique identifier returned when adding the workload capture to the replay schedule, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">capture_user</code> parameter to the username of the user or schema captured during the time of the workload capture.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">replay_user</code> parameter to the username of a new user or schema to which the captured user is remapped during replay.
                                 </p>
                                 <p>If this parameter is set to <code class="codeph">NULL</code>, then the mapping is disabled.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This example shows how to remap the <code class="codeph">PROD</code> user used during capture to the <code class="codeph">TEST</code> user during replay for the workload capture identified as <code class="codeph">1001</code>.
                           </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.SET_USER_MAPPING (1001, 'PROD', 'TEST');
</pre><div class="infoboxnotealso" id="GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915__GUID-5B470F97-CDFE-4350-8E8D-D6D5457D2505">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS74963" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">SET_USER_MAPPING</code> procedure
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4120"></a><div class="props_rev_3"><a id="GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68" name="GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68"></a><h5 id="RATUG-GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68" class="sect5"><span class="enumeration_section">15.4.4.4 </span>Preparing for Consolidated Database Replay Using APIs
                     </h5>
                     <div>
                        <div><span>This section describes how to prepare a consolidated replay using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> For information about preparing consolidated replays, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-C2F6DA54-9C2C-40CE-B357-F58126C0E2EE" title="As is the case with replaying a single database workload using Database Replay, replay options are defined during preparation of a replay.">Preparing for Consolidated Database Replay</a>"</span>.
                        </div>
                        <div class="p">
                           <p>Before preparing a consolidated replay, ensure that the following prerequisites are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Replay data is initialized, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-7FA57ECB-BFF9-4595-AB3E-DDED8BEE3E65" title="This section describes how to initialize the replay data for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Initializing Consolidated Database Replay Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Captured connections are remapped, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-284D7908-40EE-4570-AE78-E75AAA294327" title="This section describes how to remap connection strings for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Remapping Connection Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Users are mapped, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-12BFB1A9-B0C6-4AE9-9E1B-F7237FAED915" title="This section describes how to remap users for a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Remapping Users Using APIs</a>"</span>.
                                 </p>
                                 <p>Remapping users is optional. However, if you are planning to remap users during replay, then it must be completed before preparing the consolidated replay.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Preparing a consolidated replay performs the following operations:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Specifies the replay options, such as synchronization mode, session connection rate, and session request rate.</p>
                              </li>
                              <li>
                                 <p>Puts the database state in replay mode.</p>
                              </li>
                              <li>
                                 <p>Enables the start of replay clients.</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68__GUID-FE5EE87C-72B4-41DA-A7E8-61E2562C8C0F">
                              <p class="notep1">Note:</p>
                              <p>Consolidated Database Replay only supports time based or <code class="codeph">OBJECT_ID</code>-based synchronization (<code class="codeph">synchronization</code>=<code class="codeph">TIME</code> or <code class="codeph">OBJECT_ID</code>). SCN-based synchronization is currently not supported.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68__GUID-25F965C4-613B-4246-BD1E-5A3F05B1EF8E">To prepare a consolidated replay:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d31544e4843" class="indexterm-anchor"></a><code class="codeph">PREPARE_CONSOLIDATED_REPLAY</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.PREPARE_CONSOLIDATED_REPLAY (
   synchronization         IN VARCHAR2 DEFAULT 'OBJECT_ID',
   connect_time_scale      IN NUMBER   DEFAULT 100,
   think_time_scale        IN NUMBER   DEFAULT 100,
   think_time_auto_correct IN BOOLEAN  DEFAULT TRUE,
   capture_sts             IN BOOLEAN  DEFAULT FALSE,
   sts_cap_interval        IN NUMBER   DEFAULT 300);
</pre><p>For information about these parameters and how to set them, see <span class="q">"<a href="replaying-a-database-workload.html#GUID-289F573A-9C83-4A29-A1D4-323705E8293D" title="After the database is restored, and connections and users are remapped, you can set the appropriate replay options.">Specifying Replay Options</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68__GUID-3AB11FC9-F51A-4526-87F2-6289B811322E">
                              <p class="notep1">Note:</p>
                              <p>Be sure to set <code class="codeph">synchronization</code> to <code class="codeph">false</code> when you use the <code class="codeph">PREPARE_CONSOLIDATED_REPLAY</code> procedure.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68__GUID-2C656CF4-9A96-4455-B835-17A3513F4450">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS73996" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">PREPARE_CONSOLIDATED_REPLAY</code> procedure
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG4121"></a><div class="props_rev_3"><a id="GUID-62E2EA2B-D34C-47A0-BDA3-83E446DCC3D1" name="GUID-62E2EA2B-D34C-47A0-BDA3-83E446DCC3D1"></a><h5 id="RATUG-GUID-62E2EA2B-D34C-47A0-BDA3-83E446DCC3D1" class="sect5"><span class="enumeration_section">15.4.4.5 </span>Starting Consolidated Database Replay Using APIs
                     </h5>
                     <div>
                        <p>This section describes how to start a consolidated replay using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.
                        </p>
                        <div class="p">
                           <p>Before starting a consolidated replay, ensure that the following prerequisites are met:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The consolidated replay is prepared, as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-84EE2D27-04A8-4C78-8C08-4A5FF4472B68" title="This section describes how to prepare a consolidated replay using the DBMS_WORKLOAD_REPLAY package.">Preparing for Consolidated Database Replay Using APIs</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>An adequate number of replay clients are started.</p>
                                 <p>For information about setting up and starting replay clients, see <span class="q">"<a href="replaying-a-database-workload.html#GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F" title="At this point, you need to set up and start the replay clients, which will connect to the replay system and send requests based on what has been captured in the workload.">Setting Up Replay Clients</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-62E2EA2B-D34C-47A0-BDA3-83E446DCC3D1__GUID-DF65BFF4-F297-41C5-BE1C-13C04DF55E98">To start a consolidated replay:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d31544e5009" class="indexterm-anchor"></a><code class="codeph">START_CONSOLIDATED_REPLAY</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_REPLAY.START_CONSOLIDATED_REPLAY;</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-62E2EA2B-D34C-47A0-BDA3-83E446DCC3D1__GUID-9B347C48-85D3-40C4-B94D-82D904A642CD">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS74454" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">START_CONSOLIDATED_REPLAY</code> procedure
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="RATUG4265"></a><div class="props_rev_3"><a id="GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8" name="GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8"></a><h3 id="RATUG-GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8" class="sect3"><span class="enumeration_section">15.5 </span>About Query-Only Database Replay
               </h3>
               <div>
                  <p>In a query-only database replay, only the read-only queries of a workload capture are replayed. In other words, in a query-only replay, only <code class="codeph">SELECT</code> statements are sent to the server at replay time. No DML statements are executed during a query-only replay, and the replay does not make any changes to user schemas or data.
                  </p>
                  <div class="infoboxnote" id="GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8__GUID-9E11040B-0E83-4E6B-B2D4-6E228FF9ACE8">
                     <p class="notep1">Note:</p>
                     <p>A query-only database replay can be performed with Consolidated Database Replay only.</p>
                  </div>
                  <div class="infoboxnote" id="GUID-14A9F425-0888-4CA8-90C4-9E7B476852B8__GUID-E04313E2-44BA-49E6-B069-B1E39B523120">
                     <p class="notep1">Note:</p>
                     <p>Query-only database replays are meant to be used and executed in test environments only.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Do not use query-only database replays on production systems.</p>
                        </li>
                        <li>
                           <p>Divergence is expected during query-only database replays.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG4266"></a><div class="props_rev_3"><a id="GUID-5BF0AEE7-A64C-4523-ACDE-7043AE0AAEFE" name="GUID-5BF0AEE7-A64C-4523-ACDE-7043AE0AAEFE"></a><h4 id="RATUG-GUID-5BF0AEE7-A64C-4523-ACDE-7043AE0AAEFE" class="sect4"><span class="enumeration_section">15.5.1 </span>Use Cases for Query-Only Database Replay
                  </h4>
                  <div>
                     <div><span>You can use query-only database replay to warm up the database buffer cache and to find regressions.</span> For example:
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To warm up the database buffer cache</p>
                           <p>In some cases, a workload is captured when the database buffer cache is warm (data blocks are already in the buffer cache). However, when you replay that workload on the test system, the buffer cache will not be warm, and the data blocks will need to be loaded from disk initially. This may make the replay duration longer than the capture duration, and increase the database time.</p>
                           <p>To avoid having to warm up the buffer cache, you can perform a query-only replay and then perform the read/write replay without restarting the database and without flushing the buffer cache. Note that you do not have to restart the database after a query-only replay because a query-only replay is read-only.</p>
                        </li>
                        <li>
                           <p>To find regressions</p>
                           <p>A query-only replay is a good and easy way to find regressions from the read-only part of the workload with concurrency. The read-only part includes <code class="codeph">SELECT</code> (not <code class="codeph">SELECT...FOR UPDATE</code>) statements, PL/SQL without DMLs and DDLs, LOB reads, and so on. It is typically the main part of the workload capture.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG4267"></a><div class="props_rev_3"><a id="GUID-81A86A84-E915-4A40-A9C1-B3BA4C5410E1" name="GUID-81A86A84-E915-4A40-A9C1-B3BA4C5410E1"></a><h4 id="RATUG-GUID-81A86A84-E915-4A40-A9C1-B3BA4C5410E1" class="sect4"><span class="enumeration_section">15.5.2 </span>Performing a Query-Only Database Replay
                  </h4>
                  <div>
                     <p>You can perform a query-only database replay.</p>
                     <p>To perform a query-only database replay, follow the instructions in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-F3F44EF1-5E8E-4758-BB59-602E7E07CAE5" title="This section describes how to create and replay consolidated workloads using the DBMS_WORKLOAD_REPLAY package.">Using Consolidated Database Replay with APIs</a>"</span>. When you use the <code class="codeph">ADD_CAPTURE</code> function to add workload captures to the replay schedule as described in <span class="q">"<a href="using-consolidated-database-replay.html#GUID-5D8972FE-DCB0-4CE4-A930-28E211387ECE" title="This section describes how to add workload captures to and remove workload captures from replay schedules using the DBMS_WORKLOAD_REPLAY package.">Adding Workload Captures to Replay Schedules Using APIs</a>"</span>, set the <code class="codeph">query_only</code> parameter to <code class="codeph">Y</code>.
                     </p>
                  </div>
               </div>
            </div><a id="RATUG4130"></a><a id="RATUG4122"></a><div class="props_rev_3"><a id="GUID-29988B63-F974-46EF-9AAD-3D04AF774337" name="GUID-29988B63-F974-46EF-9AAD-3D04AF774337"></a><h3 id="RATUG-GUID-29988B63-F974-46EF-9AAD-3D04AF774337" class="sect3"><span class="enumeration_section">15.6 </span>Example: Replaying a Consolidated Workload with APIs
               </h3>
               <div>
                  <p>This section assumes a scenario where workloads from three separate production systems running different versions of Oracle Database on various operating systems are being consolidated.</p>
                  <div class="section">
                     <p>This scenario uses the following assumptions:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The first workload to be consolidated is captured from the CRM system, which is running Oracle Database 10g Release 2 (release 10.2.0.4) on a Solaris server.</p>
                        </li>
                        <li>
                           <p>The second workload to be consolidated is captured from the ERP system, which is running Oracle Database 10g Release 2 (release 10.2.0.5) on a Linux server.</p>
                        </li>
                        <li>
                           <p>The third workload to be consolidated is captured from the SCM system, which is running Oracle Database 11<span class="italic">g</span> Release 2 (release 11.2.0.2) on a Solaris server.
                           </p>
                        </li>
                        <li>
                           <p>The test system is set up as a multitenant container database (CDB) running Oracle Database 12<span class="italic">c</span> Release 1 (release 12.1.0.1).
                           </p>
                        </li>
                        <li>
                           <p>The CDB contains three PDBs created from the CRM, ERP, and SCM systems.</p>
                        </li>
                        <li>
                           <p>Each PDB contained within the CDB is restored to the same application data state as the CRM, ERP, and SCM systems at the capture start time.</p>
                        </li>
                     </ul>
                     <p><a href="using-consolidated-database-replay.html#GUID-29988B63-F974-46EF-9AAD-3D04AF774337__CHDJGAIH">Figure 15-3</a> illustrates this scenario.
                     </p>
                     <div class="figure" id="GUID-29988B63-F974-46EF-9AAD-3D04AF774337__CHDJGAIH">
                        <p class="titleinfigure">Figure 15-3 Scenario for Consolidating Three Workloads</p><img src="img/ratug005.png" width="298" alt="Description of Figure 15-3 follows" title="Description of Figure 15-3 follows" longdesc="img_text/ratug005.html"><br><a href="img_text/ratug005.html">Description of "Figure 15-3 Scenario for Consolidating Three Workloads"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-29988B63-F974-46EF-9AAD-3D04AF774337__GUID-52916F2F-D49E-4071-ADD0-BBEA157DD284">To consolidate the workloads and replay the consolidated workload in this scenario:</p>
                     <ol>
                        <li>
                           <p>On the test system, preprocess the individual workload captures into separate directories:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For the CRM workload:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Create a directory object:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY crm AS '/u01/test/cap_crm';
</pre></li>
                                    <li>
                                       <p>Ensure that the captured workload from the CRM system is stored in this directory.</p>
                                    </li>
                                    <li>
                                       <p>Preprocess the workload:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.PROCESS_CAPTURE ('CRM');
</pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>For the ERP workload:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Create a directory object:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY erp AS '/u01/test/cap_erp';
</pre></li>
                                    <li>
                                       <p>Ensure that the captured workload from the ERP system is stored in this directory.</p>
                                    </li>
                                    <li>
                                       <p>Preprocess the workload:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.PROCESS_CAPTURE ('ERP');
</pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>For the SCM workload:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Create a directory object:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY scm AS '/u01/test/cap_scm';
</pre></li>
                                    <li>
                                       <p>Ensure that the captured workload from the SCM system is stored in this directory.</p>
                                    </li>
                                    <li>
                                       <p>Preprocess the workload:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.PROCESS_CAPTURE ('SCM');
</pre></li>
                                 </ol>
                              </li>
                           </ul>
                        </li>
                        <li id="GUID-29988B63-F974-46EF-9AAD-3D04AF774337__CHDCFBIC">
                           <p>Create a root directory to store the preprocessed workloads:</p><pre class="oac_no_warn" dir="ltr">mkdir '/u01/test/cons_dir';
CREATE OR REPLACE DIRECTORY cons_workload AS '/u01/test/cons_dir';
</pre></li>
                        <li>
                           <p>Copy each preprocessed workload directory into the root directory:</p><pre class="oac_no_warn" dir="ltr">cp -r /u01/test/cap_crm /u01/test/cons_dir
cp -r /u01/test/cap_erp /u01/test/cons_dir
cp -r /u01/test/cap_scm /u01/test/cons_dir
</pre></li>
                        <li>
                           <p>For each workload, create a directory object using the new operating system directory path:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY crm AS '/u01/test/cons_dir/cap_crm';
CREATE OR REPLACE DIRECTORY erp AS '/u01/test/cons_dir/cap_erp';
CREATE OR REPLACE DIRECTORY scm AS '/u01/test/cons_dir/cap_scm';
</pre></li>
                        <li>
                           <p>Set the replay directory to the root directory previously created in Step <a href="using-consolidated-database-replay.html#GUID-29988B63-F974-46EF-9AAD-3D04AF774337__CHDCFBIC">2</a>:
                           </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.SET_REPLAY_DIRECTORY ('CONS_WORKLOAD');
</pre></li>
                        <li>
                           <p>Create a replay schedule and add the workload captures:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.BEGIN_REPLAY_SCHEDULE ('CONS_SCHEDULE');
SELECT DBMS_WORKLOAD_REPLAY.ADD_CAPTURE ('CRM') FROM dual;
SELECT DBMS_WORKLOAD_REPLAY.ADD_CAPTURE ('ERP') FROM dual;
SELECT DBMS_WORKLOAD_REPLAY.ADD_CAPTURE ('SCM') FROM dual;
EXEC DBMS_WORKLOAD_REPLAY.END_REPLAY_SCHEDULE;
</pre></li>
                        <li>
                           <p>Initialize the consolidated replay:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.INITIALIZE_CONSOLIDATED_REPLAY ('CONS_REPLAY',
     'CONS_SCHEDULE');
</pre></li>
                        <li>
                           <p>Remap connections:</p>
                           <ol type="a">
                              <li>
                                 <p>Query the <code class="codeph">DBA_WORKLOAD_CONNECTION_MAP</code> view for the connection mapping information:
                                 </p><pre class="oac_no_warn" dir="ltr">SELECT schedule_cap_id, conn_id, capture_conn, replay_conn
  FROM dba_workload_connection_map;
</pre></li>
                              <li>
                                 <p>Remap the connections:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (schedule_cap_id =&gt; 1,
     conn_id =&gt; 1, replay_connection =&gt; 'CRM');
EXEC DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (schedule_cap_id =&gt; 2,
     conn_id =&gt; 1, replay_connection =&gt; 'ERP');
EXEC DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (schedule_cap_id =&gt; 3,
     conn_id =&gt; 1, replay_connection =&gt; 'SCM');
</pre><p>The <code class="codeph">replay_connection</code> parameter represents the services that are defined on the test system.
                                 </p>
                              </li>
                              <li>
                                 <p>Verify the connection remappings:</p><pre class="oac_no_warn" dir="ltr">SELECT schedule_cap_id, conn_id, capture_conn, replay_conn
  FROM dba_workload_connection_map;
</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>Prepare the consolidated replay:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.PREPARE_CONSOLIDATED_REPLAY (
     synchronization =&gt; 'OBJECT_ID');
</pre></li>
                        <li>
                           <p>Start replay clients:</p>
                           <ol type="a">
                              <li>
                                 <p>Estimate the number of replay clients that are required:</p><pre class="oac_no_warn" dir="ltr">wrc mode=calibrate replaydir=/u01/test/cons_dir/cap_crm
wrc mode=calibrate replaydir=/u01/test/cons_dir/cap_erp
wrc mode=calibrate replaydir=/u01/test/cons_dir/cap_scm
</pre></li>
                              <li>
                                 <p>Add the output to determine the number of replay clients required.</p>
                                 <p>You will need to start at least one replay client per workload capture contained in the consolidated workload.</p>
                              </li>
                              <li>
                                 <p>Start the required number of replay clients by repeating this command:</p><pre class="oac_no_warn" dir="ltr">wrc <span class="italic">username</span>/<span class="italic">password</span> mode=replay replaydir=/u01/test/cons_dir
</pre><p>The <code class="codeph">replaydir</code> parameter is set to the root directory in which the workload captures are stored.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Start the consolidated replay:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_REPLAY.START_CONSOLIDATED_REPLAY;
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-29988B63-F974-46EF-9AAD-3D04AF774337__GUID-F9378433-DF10-42F0-A2EB-3F062B2776EE">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../multi/creating-and-configuring-a-cdb.html#ADMIN13514" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about configuring a CDB
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about creating PDBs
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='04338.objects-collections-and-OPAQUE-types.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Objects, Collections, and OPAQUE Types</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQLJ Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQLJ Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sqlj-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T08:20:03-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96458-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="type-support.html" title="Previous" type="text/html">
      <link rel="next" href="advanced-language-features.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQLJ Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JSQLJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="type-support.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="advanced-language-features.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQLJ Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Objects, Collections, and OPAQUE Types</li>
            </ol>
            <a id="GUID-93B64A3E-4928-4039-BC10-D7B05E768BFF" name="GUID-93B64A3E-4928-4039-BC10-D7B05E768BFF"></a><a id="JSQLJ409"></a>
            
            <h2 id="JSQLJ-GUID-93B64A3E-4928-4039-BC10-D7B05E768BFF" class="sect2"><span class="enumeration_chapter">7 </span> Objects, Collections, and OPAQUE Types
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discusses how the Oracle SQLJ implementation supports user-defined SQL types. There is also a small section at the end regarding Oracle OPAQUE types.</p>
               <p>The chapter consists of the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-83FAE830-C137-413B-8654-5378A60A2E03">Oracle Objects and Collections</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-7B1AEDD4-C53B-47C9-973E-DD23EAA7608E">Custom Java Classes</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B">User-Defined Types</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-A8FBF9FD-A786-4C6E-B093-9B179F079810">Strongly Typed Objects and References in SQLJ Executable Statements</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-B58EDE94-BD0C-4C00-960B-4D8267F72DFD">Strongly Typed Collections in SQLJ Executable Statements</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-4A2FC8B8-81B2-4B3B-B0D4-1102A7F7F21A">Serialized Java Objects</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-14DEE7DC-EA4A-4754-BF44-D1036E1CFB55">Weakly Typed Objects_ References_ and Collections</a></p>
                  </li>
                  <li>
                     <p><a href="objects-collections-and-OPAQUE-types.html#GUID-526F6AD9-AD62-4ED0-BCAB-5C2F8ED36FE4">Oracle OPAQUE Types</a></p>
                  </li>
               </ul>
            </div><a id="JSQLJ410"></a><div class="props_rev_3"><a id="GUID-83FAE830-C137-413B-8654-5378A60A2E03" name="GUID-83FAE830-C137-413B-8654-5378A60A2E03"></a><h3 id="JSQLJ-GUID-83FAE830-C137-413B-8654-5378A60A2E03" class="sect3">Oracle Objects and Collections</h3>
               <div>
                  <p>This section provides some background conceptual information about Oracle Database 12<span class="italic">c </span>Release 2 (12.2) objects and collections.
                  </p>
                  <div class="infoboxnotealso" id="GUID-83FAE830-C137-413B-8654-5378A60A2E03__GUID-31E81DE6-4FD3-495F-8C99-47989088638D">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/Database-Objects.html#SQLRF-GUID-31BE00A7-7FF9-41CB-852A-F1416912CA9E" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>and <a href="../adfns/sql-data-types.html#ADFNS-GUID-CCC643C7-88E1-421C-87DC-4353899FFB9E" target="_blank"><span class="italic">Oracle Database Development Guide</span></a>.
                     </p>
                  </div>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-535092B2-B9CA-4978-A01E-6209609B579D">Overview of Objects and Collections</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-D0DE1809-5FA2-4558-89DC-D766822E6CA7">Oracle Object Fundamentals</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-B764C3B0-D3E8-4BE0-9A04-DC192C7FC300">Oracle Collection Fundamentals</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-BADD65E0-1975-4B2F-8F59-D3A693D31591">Object and Collection Data Types</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ412"></a><a id="JSQLJ413"></a><a id="JSQLJ411"></a><div class="props_rev_3"><a id="GUID-535092B2-B9CA-4978-A01E-6209609B579D" name="GUID-535092B2-B9CA-4978-A01E-6209609B579D"></a><h4 id="JSQLJ-GUID-535092B2-B9CA-4978-A01E-6209609B579D" class="sect4">Overview of Objects and Collections</h4>
                  <div>
                     <p>The Oracle SQLJ implementation supports user-defined SQL object types, which are composite data structures, related SQL object reference types, and user-defined SQL collection types. Oracle objects and collections are composite data structures consisting of individual data elements.</p>
                     <p>The Oracle SQLJ implementation supports either strongly typed or weakly typed Java representations of object types, reference types, and collection types to use in iterators or host expressions. Strongly typed representations use a custom Java class that maps to a particular object type, reference type, or collection type and must implement either the Java Database Connectivity (JDBC) 2.0 standard <code class="codeph">java.sql.SQLData</code> interface, for object types only, or the Oracle <code class="codeph">oracle.sql.ORAData</code> interface.
                     </p>
                     <p>The term stron<a id="d32224e172" class="indexterm-anchor"></a><a id="d32224e176" class="indexterm-anchor"></a>gly typed is used where a particular Java type is associated with a particular SQL named type or user-defined type. For example, if there is a <code class="codeph">PERSON</code> type, then a corresponding <code class="codeph">Person</code> Java class will be associated with it.
                     </p>
                     <p>Weakly typed representations use <code class="codeph">oracle.sql.STRUCT</code> for objects, <code class="codeph">oracle.sql.REF</code> for object references, or <code class="codeph">oracle.sql.ARRAY</code> for collections. Alternatively, you can use standard <code class="codeph">java.sql.Struct</code>, <code class="codeph">java.sql.Ref</code>, or <code class="codeph">java.sql.Array</code> objects in a weakly typed scenario.
                     </p>
                     <p>The term wea<a id="d32224e208" class="indexterm-anchor"></a><a id="d32224e212" class="indexterm-anchor"></a>kly typed is used where a Java type is used in a generic way and can map to multiple SQL named types. The Java class or interface has no special information particular to any SQL type. This is the case for the <code class="codeph">oracle.sql.STRUCT</code>, <code class="codeph">oracle.sql.REF</code>, and <code class="codeph">oracle.sql.ARRAY</code> types and the <code class="codeph">java.sql.Struct</code>, <code class="codeph">java.sql.Ref</code>, and <code class="codeph">java.sql.Array</code> types.
                     </p>
                     <p>Note that using Oracle extensions in your code requires the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use one of Oracle JDBC drivers.</p>
                        </li>
                        <li>
                           <p>Use default Oracle-specific code generation or, for ISO code generation, customize the profiles appropriately. For Oracle-specific generated code, no profiles are produced so customization is not applicable. Oracle JDBC application programming interfaces (APIs) are called directly through the generated Java code.</p>
                           <div class="infoboxnote" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-C9E90461-A7B3-4278-A8AD-B2FE60B33C61">
                              <p class="notep1">Note:</p>
                              <p>Oracle recommends the use of the default customizer, <code class="codeph">oracle.sqlj.runtime.util.OraCustomizer</code>.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>Use Oracle SQLJ run time when your application runs. Oracle SQLJ run time and an Oracle JDBC driver are required whenever you use Oracle customizer, even if you do not actually use Oracle extensions in your code.</p>
                        </li>
                     </ul>
                     <p>For Oracle-specific semantics-checking, you must use an appropriate checker. The default checker, <code class="codeph">oracle.sqlj.checker.OracleChecker</code>, acts as a front end and will run the appropriate checker based on your environment. This will be one of the Oracle specific checkers if you are using an Oracle JDBC driver.
                     </p>
                     <div class="infoboxnote" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-C034D024-E023-4F6E-B390-2E5FB82C96A3">
                        <p class="notep1">Note:</p>
                        <p>Oracle-specific types for Oracle objects and collections are included in the <code class="codeph">oracle.sql</code> package.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-3CF36A38-7E2C-4A91-A180-87CD56E3DA39">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="translator-command-line-and-options.html#GUID-E001FA35-824A-47A1-8973-AA5771B0DFE5">Connection Options</a>"</span> and <span class="q">"<a href="translator-command-line-and-options.html#GUID-ED7DD3DE-CA91-4085-82B2-D07EC9B15FB6">Semantics-Checking and Offline-Parsing Options</a>"</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-E505B2A1-D691-4E7A-9D48-BE09505E01FE">Custom Java Class Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This chapter primarily discusses the use of custom Java classes with user-defined types. However, classes implementing <code class="codeph">ORAData</code> can be used for other Oracle SQL types as well. A class implementing <code class="codeph">ORAData</code> can be used to perform any kind of desired processing or conversion in the course of transferring data between SQL and Java.
                              </p>
                              <div class="infoboxnotealso" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-F5985ACE-4494-448B-9928-9B5E963A902A">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="objects-collections-and-OPAQUE-types.html#GUID-1F822A17-F41C-4994-95BB-886397ACFAE3">Additional Uses for ORAData Implementations</a>"</span></p>
                              </div>
                           </li>
                           <li>
                              <p>The <code class="codeph">SQLData</code> interface is intended only for custom object classes. The <code class="codeph">ORAData</code> interface can be used for any custom Java class.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-D84FE6D8-6B4A-4ABF-9A2A-F16EF64ED31F">Terminology Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>User-defined SQL object types and user-defined SQL collection types are referred to as user-defined types (UDTs).</p>
                           </li>
                           <li>
                              <p>Custom Java classes for objects, references, and collections are referred to as custom object classes, custom reference classes, and custom collection classes, respectively.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-535092B2-B9CA-4978-A01E-6209609B579D__GUID-AC170A44-CEEC-40FA-8CB0-A0CB783A1A1D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../adobj/introduction-to-oracle-objects.html#ADOBJ-GUID-7667A5B4-22E3-465F-9F7B-7043A9525DD2" target="_blank"><span class="italic">Oracle Database Object-Relational Developer's Guide</span></a> for general information about Oracle object features and functionality
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ414"></a><div class="props_rev_3"><a id="GUID-D0DE1809-5FA2-4558-89DC-D766822E6CA7" name="GUID-D0DE1809-5FA2-4558-89DC-D766822E6CA7"></a><h4 id="JSQLJ-GUID-D0DE1809-5FA2-4558-89DC-D766822E6CA7" class="sect4">Oracle Object Fundamentals</h4>
                  <div>
                     <p>The Oracle SQL objects are composite data structures that group related data items, such as facts about each employee, into a single data unit. An object type is functionally similar to a Java class. You can populate and use any number of individual objects of a given object type, just as you can instantiate and use individual objects of a Java class.</p>
                     <p>For example, you can define an object type <code class="codeph">EMPLOYEE</code> that has the attributes <code class="codeph">name</code> of type <code class="codeph">CHAR</code>, <code class="codeph">address</code> of type <code class="codeph">CHAR</code>, <code class="codeph">phonenumber</code> of type <code class="codeph">CHAR</code>, and <code class="codeph">employeenumber</code> of type <code class="codeph">NUMBER</code>. 
                     </p>
                     <p>Oracle objects can also have methods, or stored procedures, associated with the object type. These methods can be either static methods or instance methods and can be implemented either in PL/SQL or Java. Their signatures can include any number of input, output, or input-output parameters. All this depends on how they are initially defined</p>
                  </div>
               </div><a id="JSQLJ415"></a><div class="props_rev_3"><a id="GUID-B764C3B0-D3E8-4BE0-9A04-DC192C7FC300" name="GUID-B764C3B0-D3E8-4BE0-9A04-DC192C7FC300"></a><h4 id="JSQLJ-GUID-B764C3B0-D3E8-4BE0-9A04-DC192C7FC300" class="sect4">Oracle Collection Fundamentals</h4>
                  <div>
                     <p>There are two categories of Oracle SQL collections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d32224e422" class="indexterm-anchor"></a>Variable-length arrays (VARRAY types)
                           </p>
                        </li>
                        <li>
                           <p><a id="d32224e429" class="indexterm-anchor"></a>Nested tables (TABLE types)
                           </p>
                        </li>
                     </ul>
                     <p>Both categories are one-dimensional, although the elements can be complex object types. VARRAY types are used for one-dimensional arrays, and nested table types are used for single-column tables within an outer table. A variable of any VARRAY type can be referred to as a VARRAY. A variable of any nested table type can be referred to as a nested table.</p>
                     <p>A VARRAY, as with any array, is an ordered set of data elements, with each element having an index and all elements being of the same data type. The size of a VARRAY refers to the maximum number of elements. Oracle VARRAYs, as indicated by their name, are of variable size, but the maximum size of any particular VARRAY type must be specified when the VARRAY type is declared.</p>
                     <p>A nested table is an unordered set of elements. Nested table elements within a table can themselves be queried in SQL. A nested table, as with any table, is not created with any particular number of rows. This is determined dynamically.</p>
                     <div class="infoboxnote" id="GUID-B764C3B0-D3E8-4BE0-9A04-DC192C7FC300__GUID-B67BEE30-0D52-4C1C-BD8E-7008B83D1D4E">
                        <p class="notep1">Note:</p>
                        <p>The elements in a VARRAY or the rows in a nested table can be of a user-defined object type, and VARRAY and nested table types can be used for attributes in a user-defined object type. Oracle Database 12<span class="italic">c </span>Release 2 (12.2) supports nesting of collection types. The elements of a VARRAY or rows of a nested table can be of another VARRAY or nested table type, or these elements can be of a user-defined object type that has VARRAY or nested table attributes.
                        </p>
                     </div>
                  </div>
               </div><a id="JSQLJ416"></a><div class="props_rev_3"><a id="GUID-BADD65E0-1975-4B2F-8F59-D3A693D31591" name="GUID-BADD65E0-1975-4B2F-8F59-D3A693D31591"></a><h4 id="JSQLJ-GUID-BADD65E0-1975-4B2F-8F59-D3A693D31591" class="sect4">Object and Collection Data Types</h4>
                  <div>
                     <p>In Oracle Database 12<span class="italic">c </span>Release 2 (12.2), user-defined object and collection definitions function as SQL data type definitions. You can use these data types, as with any other data type, in defining table columns, SQL object attributes, and stored procedure or function parameters. In addition, once you have defined an object type, the related object reference type can be used as any other SQL reference type.
                     </p>
                     <p>For example, consider the <code class="codeph">EMPLOYEE</code> Oracle object described in the preceding section. Once you have defined this object, it becomes an Oracle data type. You can have a table column of type <code class="codeph">EMPLOYEE</code> just as you can have a table column of type <code class="codeph">NUMBER</code>. Each row in an <code class="codeph">EMPLOYEE</code> column contains a complete <code class="codeph">EMPLOYEE</code> object. You can also have a column type of <code class="codeph">REF EMPLOYEE</code>, consisting of references to <code class="codeph">EMPLOYEE</code> objects.
                     </p>
                     <p>Similarly, you can define a variable-length array <code class="codeph">MYVARR</code> as <code class="codeph">VARRAY(10)</code> of <code class="codeph">NUMBER</code> and a nested table <code class="codeph">NTBL</code> of <code class="codeph">CHAR(20)</code>. The <code class="codeph">MYVARR</code> and <code class="codeph">NTBL</code> collection types become Oracle data types, and you can have table columns of either type. Each row of a <code class="codeph">MYVARR</code> column consists of an array of up to 10 numbers. Each row of an <code class="codeph">NTBL</code> column consists of 20 characters.
                     </p>
                  </div>
               </div>
            </div><a id="JSQLJ417"></a><div class="props_rev_3"><a id="GUID-7B1AEDD4-C53B-47C9-973E-DD23EAA7608E" name="GUID-7B1AEDD4-C53B-47C9-973E-DD23EAA7608E"></a><h3 id="JSQLJ-GUID-7B1AEDD4-C53B-47C9-973E-DD23EAA7608E" class="sect3">Custom Java Classes</h3>
               <div>
                  <p>Custom Java classes are first-class types that you can use to read from and write to user-defined SQL types transparently. The purpose of custom Java classes is to provide a way to convert data between SQL and Java and make the data accessible, particularly in supporting objects and collections or if you want to perform custom data conversions.</p>
                  <p>It is generally advisable to provide custom Java classes for all user-defined types that you use in a SQLJ application. Oracle JDBC driver will use instances of these classes in converting data, which is more convenient and less error-prone than using the weakly typed <code class="codeph">oracle.sql.STRUCT</code>, <code class="codeph">oracle.sql.REF</code>, and <code class="codeph">oracle.sql.ARRAY</code> classes.
                  </p>
                  <p>To be used in SQLJ iterators or host expressions, a custom Java class must implement either the <code class="codeph">oracle.sql.ORAData</code> and <code class="codeph">oracle.sql.ORADataFactory</code> interfaces or the standard <code class="codeph">java.sql.SQLData</code> interface. This section provides an overview of these interfaces and custom Java class functionality, covering the following topics:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F">Custom Java Class Interface Specifications</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-BCB8194D-F72A-4ABC-AFA2-A69711002B80">Custom Java Class Support for Object Methods</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D">Custom Java Class Requirements</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-700E14BF-E4F8-4A36-9092-05000452C60B">Compiling Custom Java Classes</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-9B5BACD2-3100-46FB-8B3F-A1B0557BF7F7">Reading and Writing Custom Data</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-1F822A17-F41C-4994-95BB-886397ACFAE3">Additional Uses for ORAData Implementations</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ419"></a><a id="JSQLJ421"></a><a id="JSQLJ418"></a><div class="props_rev_3"><a id="GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F" name="GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F"></a><h4 id="JSQLJ-GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F" class="sect4">Custom Java Class Interface Specifications</h4>
                  <div>
                     <div class="section">
                        <p>This section discusses specifications of the <code class="codeph">ORAData</code> and <code class="codeph">ORADataFactory</code> interfaces and the standard <code class="codeph">SQLData</code> interface. 
                        </p>
                        <p>Oracle Database 12<span class="italic">c </span>Release 2 (12.2) includes a set of APIs for Oracle-specific custom Java class functionality for user-defined types: <code class="codeph">oracle.sql.ORAData</code> and <code class="codeph">oracle.sql.ORADataFactory</code>. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F__GUID-755AD7E5-59DF-4D06-BA3B-81EED07E7AD6">ORAData and ORADataFactory Specifications</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle provides the <code class="codeph">oracle.sql.ORAData</code> interface and the related <code class="codeph">oracle.sql.ORADataFactory</code> interface to use in mapping and converting Oracle object types, reference types, and collection types to custom Java classes.
                        </p>
                        <p>Data is sent or retrieved in the form of an <code class="codeph">oracle.sql.Datum</code> object, with the underlying data being in the format of the appropriate <code class="codeph">oracle.sql.Datum</code> subclass, such as <code class="codeph">oracle.sql.STRUCT</code>. This data is still in its SQL format. The <code class="codeph">oracle.sql.Datum</code> object is just a wrapper.
                        </p>
                        <div class="infoboxnotealso" id="GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F__GUID-1198871C-6658-4BEC-AA49-199C99152250">
                           <p class="notep1">See Also:</p>
                           <p><a href="../jjdbc/Oracle-object-types.html#JJDBC-GUID-5905674A-A045-40B1-96DE-726761517D50" target="_blank"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a></p>
                        </div>
                        <p>The <code class="codeph">ORAData</code> interface specifies a <code class="codeph">toDatum()</code> method for data conversion from Java format to SQL format. This method takes as input your connection object and converts data to the appropriate <code class="codeph">oracle.sql.*</code> representation. The connection object is necessary so that the JDBC driver can perform appropriate type checking and type conversions at run time. The <code class="codeph">ORAData</code> and <code class="codeph">toDatum()</code> specification is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">interface oracle.sql.ORAData
{
   oracle.sql.Datum toDatum(java.sql.Connection c) throws SQLException;
}
</pre><p>The <code class="codeph">ORADataFactory</code> interface specifies a <code class="codeph">create()</code> method that constructs instances of your custom Java class, converting from SQL format to Java format. This method takes as input a <code class="codeph">Datum</code> object containing the data and a type code, such as <code class="codeph">OracleTypes.RAW</code>, indicating the SQL type of the underlying data. It returns an object of your custom Java class, which implements the <code class="codeph">ORAData</code> interface. This object receives its data from the <code class="codeph">Datum</code> object that was input. The <code class="codeph">ORADataFactory</code> and <code class="codeph">create()</code> specification is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">interface oracle.sql.ORADataFactory
{
   oracle.sql.ORAData create(oracle.sql.Datum d, int sqlType) 
                      throws SQLException;
}
</pre><p>To complete the relationship between the <code class="codeph">ORAData</code> and <code class="codeph">ORADataFactory</code> interfaces, you must implement a static <code class="codeph">getORADataFactory()</code> method in any custom Java class that implements the <code class="codeph">ORAData</code> interface. This method returns an object that implements the <code class="codeph">ORADataFactory</code> interface and that, therefore, can be used to create instances of your custom Java class. This returned object can itself be an instance of your custom Java class, and its <code class="codeph">create()</code> method is used by Oracle JDBC driver to produce further instances of your custom Java class, as necessary. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1819CB7-8F69-4B34-BF26-CABFA465F17F__GUID-AB441F71-EEC4-404E-8AA6-FA0399EDF7E4">SQLData Specification</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Standard JDBC 2.0 supplies the <code class="codeph">java.sql.SQLData</code> interface to use in mapping and converting structured object types to Java classes. This interface is intended for mapping structured object types only, not object references, collections or arrays, or other SQL types.
                        </p>
                        <p>The <code class="codeph">SQLData</code> interface is a JDBC 2.0 standard, specifying a <code class="codeph">readSQL()</code> method to read data into a Java object and a <code class="codeph">writeSQL()</code> method to write to the database from a Java object.
                        </p>
                        <p>For additional information about standard <code class="codeph">SQLData</code> functionality, refer to the Sun Microsystems JDBC 2.0 or later API specification.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ422"></a><div class="props_rev_3"><a id="GUID-BCB8194D-F72A-4ABC-AFA2-A69711002B80" name="GUID-BCB8194D-F72A-4ABC-AFA2-A69711002B80"></a><h4 id="JSQLJ-GUID-BCB8194D-F72A-4ABC-AFA2-A69711002B80" class="sect4">Custom Java Class Support for Object Methods</h4>
                  <div>
                     <p>Methods of Oracle objects can be invoked from custom Java class wrappers. Whether the underlying stored procedure is written in PL/SQL or is written in Java and published to SQL is invisible to the user.</p>
                     <p>A Java wrapper method used to invoke a server method requires a connection to communicate with the server. The connection object can be provided as an explicit parameter or can be associated in some other way. For example, as an attribute of your custom Java class. If the connection object used by the wrapper method is a nonstatic attribute, then the wrapper method must be an instance method of the custom Java class in order to have access to the connection.</p>
                     <p>There are also issues regarding output and input-output parameters in methods of Oracle objects. If a stored procedure, that is, a SQL object method, modifies the internal state of one of its arguments, then the actual argument passed to the stored procedure is modified. In Java this is not possible. When a JDBC output parameter is returned from a stored procedure call, it must be stored in a newly created object. The original object identity is lost.</p>
                     <p>One way to return an output or input-output parameter to the caller is to pass the parameter as an element of an array. If the parameter is input-output, then the wrapper method takes the array element as input. After processing, the wrapper assigns the output to the array element.</p>
                  </div>
               </div><a id="JSQLJ424"></a><a id="JSQLJ425"></a><a id="JSQLJ426"></a><a id="JSQLJ427"></a><a id="JSQLJ423"></a><div class="props_rev_3"><a id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D" name="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D"></a><h4 id="JSQLJ-GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D" class="sect4">Custom Java Class Requirements</h4>
                  <div>
                     <div class="section">
                        <p>Custom Java classes must satisfy certain requirements to be recognized by Oracle SQLJ translator as valid host variable types and to enable type-checking by the translator.</p>
                        <div class="infoboxnote" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-11C55F73-1AA9-4697-8B54-BDA0EA01B7A5">
                           <p class="notep1">Note:</p>
                           <p>Custom Java classes for user-defined types are often referred to in this manual as "wrapper classes".</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__I1005846">
                        <p class="subhead3" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-6F102C1C-7597-47AE-96DB-651AD0D4E593">Oracle Requirements for Classes Implementing ORAData</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle requirements for <code class="codeph">ORAData</code> implementations are primarily the same for any kind of custom Java class, but vary slightly depending on whether the class is for mapping to objects, object references, collections, or some other SQL type.
                        </p>
                        <p>These requirements are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The class implements the <code class="codeph">oracle.sql.ORAData</code> interface.
                              </p>
                           </li>
                           <li>
                              <p>The class implements the <code class="codeph">getORADataFactory()</code> method that returns an <code class="codeph">oracle.sql.ORADataFactory</code> object. The method signature is as follows:
                              </p><pre class="oac_no_warn" dir="ltr">public static oracle.sql.ORADataFactory getORADataFactory();
</pre></li>
                           <li>
                              <p>The class has a <code class="codeph">String</code> constant, <code class="codeph">_SQL_TYPECODE</code>, initialized to the <code class="codeph">oracle.jdbc.OracleTypes</code> type code of the <code class="codeph">Datum</code> subclass instance that <code class="codeph">toDatum()</code> returns. The type code is:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>For custom object classes:</p><pre class="oac_no_warn" dir="ltr">public static final int _SQL_TYPECODE = OracleTypes.STRUCT;
</pre></li>
                                 <li>
                                    <p>For custom reference classes:</p><pre class="oac_no_warn" dir="ltr">public static final int _SQL_TYPECODE = OracleTypes.REF;
</pre></li>
                                 <li>
                                    <p>For custom collection classes:</p><pre class="oac_no_warn" dir="ltr">public static final int _SQL_TYPECODE = OracleTypes.ARRAY;
</pre></li>
                              </ul>
                              <p>For other uses, some other type code might be appropriate. For example, for using a custom Java class to serialize and deserialize Java objects into or out of <code class="codeph">RAW</code> fields, a <code class="codeph">_SQL_TYPECODE</code> of <code class="codeph">OracleTypes.RAW</code> is used.
                              </p>
                              <div class="infoboxnote" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-4E064F67-09E6-4981-A253-435722E9E50E">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph">OracleTypes</code> class simply defines a type code, which is an integer constant, for each Oracle data type. For standard SQL types, the <code class="codeph">OracleTypes</code> entry is identical to the entry in the standard <code class="codeph">java.sql.Types</code> type definitions class.
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-0CCC42C7-3E76-4C14-8B6E-ED26B8E63F89">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="objects-collections-and-OPAQUE-types.html#GUID-4A2FC8B8-81B2-4B3B-B0D4-1102A7F7F21A">Serialized Java Objects</a>"</span></p>
                              </div>
                           </li>
                           <li>
                              <p>For custom Java classes with <code class="codeph">_SQL_TYPECODE</code> of <code class="codeph">STRUCT</code>, <code class="codeph">REF</code>, or <code class="codeph">ARRAY</code>, that is, for custom Java classes that represent objects, object references, or collections, the class has a constant that indicates the relevant user-defined type name. This is as follows:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Custom object classes and custom collection classes must have a <code class="codeph">String</code> constant, <code class="codeph">_SQL_NAME</code>, initialized to the SQL name you declared for the user-defined type, as follows:
                                    </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME = <span class="italic">UDT name</span>;
</pre><p>For example, the custom object class for a user-defined <code class="codeph">PERSON</code> object will have the constant:
                                    </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME = "PERSON";
</pre><p>The same can be specified along with the schema, if appropriate, as follows:</p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME = "HR.PERSON";
</pre><p>The custom collection class for a collection of <code class="codeph">PERSON</code> objects, which you have declared as <code class="codeph">PERSON_ARRAY</code>, will have the constant:
                                    </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME = "PERSON_ARRAY";
</pre></li>
                                 <li>
                                    <p>Custom reference classes must have a <code class="codeph">String</code> constant, <code class="codeph">_SQL_BASETYPE</code>, initialized to the SQL name you declared for the user-defined type being referenced, as follows:
                                    </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_BASETYPE = <span class="italic">UDT name</span>;
</pre><p>The custom reference class for <code class="codeph">PERSON</code> references will have the constant:
                                    </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_BASETYPE = "PERSON";
</pre><p>For other <code class="codeph">ORAData</code> uses, specifying a UDT name is not applicable.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>Keep in mind the following usage notes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A collection type name reflects the collection type, not the base type. For example, if you have declared a VARRAY or nested table type, <code class="codeph">PERSON_ARRAY</code>, for <code class="codeph">PERSON</code> objects, then the name of the collection type that you specify for the <code class="codeph">_SQL_NAME</code> entry is <code class="codeph">PERSON_ARRAY</code>, not <code class="codeph">PERSON</code>.
                              </p>
                           </li>
                           <li>
                              <p>When specifying the SQL type in a <code class="codeph">_SQL_NAME</code> field, if the SQL type was declared in a case-se<a id="d32224e1101" class="indexterm-anchor"></a>nsitive way (in quotes), then you must specify the SQL name exactly as it was declared, such as <code class="codeph">CaseSensitive</code> or <code class="codeph">HR.CaseSensitive</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__I1005901">
                        <p class="subhead3" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-066060FB-A06B-4EBB-9A1C-72989676D075">Requirements for Classes Implementing SQLData</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The ISO SQLJ standard outlines requirements for type map definitions for classes implementing the <code class="codeph">SQLData</code> interface. Alternatively, <code class="codeph">SQLData</code> wrapper classes can identify associated SQL object types through the <code class="codeph">public static final</code> fields.
                        </p>
                        <p>Be aware of the following important points:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Whether you use a type map or use alternative (nonstandard) <code class="codeph">public static final</code> fields to specify mappings, you must be consistent in your approach. Either use a type map that specifies all relevant mappings so that you do not require the <code class="codeph">public static final</code> fields, or do not use a type map at all and specify all mappings through the <code class="codeph">public static final</code> fields.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SQLData</code>, unlike <code class="codeph">ORAData</code>, is for mapping structured object types only. It is not for object references, collections or arrays, or any other SQL types. If you are not using <code class="codeph">ORAData</code>, then your only choices for mapping object references and collections are the weak <code class="codeph">java.sql.Ref</code> and <code class="codeph">java.sql.Array</code> types, respectively, or <code class="codeph">oracle.sql.REF</code> and <code class="codeph">oracle.sql.ARRAY</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SQLData</code> implementations require a Java Development Kit (JDK) 1.4.x or 1.5.x environment.
                              </p>
                           </li>
                           <li>
                              <p>When specifying the mapping from a SQL type to a Java type, if the SQL type was declared in a case-se<a id="d32224e1172" class="indexterm-anchor"></a>nsitive way, then you must specify the SQL name exactly as it was declared, such as <code class="codeph">CaseSensitive</code> or <code class="codeph">HR.CaseSensitive</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-43CB770B-3D70-4FF9-9429-F42104B9B158">Mapping Specified in Type Map Resource</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>First, consider the mapping representation according to the ISO SQLJ standard. Assume that <code class="codeph">Address</code>, <code class="codeph">pack.Person</code>, and <code class="codeph">pack.Manager.InnerPM</code>, where <code class="codeph">InnerPM</code> is an inner class of <code class="codeph">Manager</code>, are three wrapper classes that implement <code class="codeph">java.sql.SQLData</code>.
                        </p>
                        <p>Then, you need to consider the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You must use these classes only in statements that use explicit connection context instances of a declared connection context type. For example, assuming that this type is called <code class="codeph">SDContext</code>:
                              </p><pre class="oac_no_warn" dir="ltr">Address               a =...;
pack.Person           p =...;
pack.Manager.InnerPM pm =...;
SDContext ctx = new SDContext(url,user,pwd,false);
#sql [ctx] { ... :a ... :p ... :pm ... };
</pre></li>
                           <li>
                              <p>The connection context type must have been declared using the <code class="codeph">with</code> attribute <code class="codeph">typeMap</code> that specifies an associated class implementing <code class="codeph">java.util.PropertyResourceBundle</code>. In the preceding example, <code class="codeph">SDContext</code> may be declared as follows:
                              </p><pre class="oac_no_warn" dir="ltr">#sql public static context SDContext with (typeMap="SDMap");
</pre></li>
                           <li>
                              <p>The type map resource must provide the mapping from SQL object types to corresponding Java classes that implement the <code class="codeph">java.sql.SQLData</code> interface. This mapping is specified with entries of the following form:
                              </p><pre class="oac_no_warn" dir="ltr">class.java_class_name=STRUCT sql_type_name
</pre><p>The <code class="codeph">STRUCT</code> keyword can also be omitted. In the example, the <code class="codeph">SDMap.properties</code> resource file may contain the following entries:
                              </p><pre class="oac_no_warn" dir="ltr">class.Address=STRUCT HR.ADDRESS
class.pack.Person=PERSON
class.pack.Manager$InnerPM=STRUCT PRODUCT_MANAGER
</pre><p>Although the period (.) separates package and class name, you <span class="italic">must</span> use the dollar sign ($) to separate an inner class name.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-E739A417-D3D5-4D36-9A46-3C5EA7BE37CE">
                           <p class="notep1">Note:</p>
                           <p>If you used the default Oracle-specific code generation in this example, then any iterator that is used for a statement whose context type is <code class="codeph">SDContext</code> must also have been declared with the same associated type map, <code class="codeph">SDMap</code>, such as in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">#sql public static iterator SDIter with (typeMap="SDMap");
...
SDContext sdctx = ...
SDIter sditer;
#sql [sdctx] sditer = { SELECT ...};
</pre><p>This is to ensure that proper code is generated for the iterator class.</p>
                        </div>
                        <p>This mechanism of specifying mappings in a type map resource is more complicated than the nonstandard alternative. Also, it is not possible to associate a type map resource with the default connection context. The advantage is that all the mapping information is placed in a single location, the type map resource. This means that the type mapping in an already compiled application can be easily adjusted at a later time, for example, to accommodate new SQL types and Java wrappers in an expanding SQL-Java type hierarchy.</p>
                        <p>Be aware of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You must employ the SQLJ <code class="codeph">runtime12</code> or <code class="codeph">runtime12ee</code> library to use this feature. Type maps are represented as <code class="codeph">java.util.Map</code> objects. These are exposed in the SQLJ run-time API and, therefore, <span class="italic">cannot</span> be supported by the generic run-time library.
                              </p>
                           </li>
                           <li>
                              <p>You must use Oracle SQLJ run time and Oracle-specific code generation or profile customization if your <code class="codeph">SQLData</code> wrapper classes occur as <code class="codeph">OUT</code> or <code class="codeph">INOUT</code> parameters in SQLJ statements. This is because the SQL type of such parameters is required for <code class="codeph">registerOutParameter()</code> by Oracle JDBC driver. Also, for <code class="codeph">OUT</code> parameter type registration, the SQL type is "frozen in" by the type map in effect during translation.
                              </p>
                           </li>
                           <li>
                              <p>The SQLJ type map is independent of any JDBC type map you may be using on the underlying connection. Thus, you must be careful when you are mixing SQLJ and JDBC code if both use <code class="codeph">SQLData</code> wrappers. However, you can easily extract the type map in effect on a given SQLJ connection context:
                              </p><pre class="oac_no_warn" dir="ltr">ctx.getTypeMap();</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-FEAB3CB0-F57A-4DD3-B257-42E3D6810583">Mapping Specified in Static Field of Wrapper Class</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A class that implements <code class="codeph">SQLData</code> can satisfy the following nonstandard requirement:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The Java class declares the <code class="codeph">String</code> constant <code class="codeph">_SQL_NAME</code>, which defines the name of the SQL type that is being wrapped by the Java class. In the example, the <code class="codeph">Address</code> class would have the following field declaration:
                              </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME="HR.ADDRESS";
</pre><p>The following declaration would be in <code class="codeph">pack.Person</code>:
                              </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME="PERSON";
</pre><p>And the <code class="codeph">pack.Manager.InnerPM</code> class would have the following:
                              </p><pre class="oac_no_warn" dir="ltr">public static final String _SQL_NAME="PRODUCT_MANAGER";
</pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-240D3A7C-D69A-4599-8B9B-6E0B9312853D__GUID-30647C5B-96B2-47B1-BEDF-6A9FC67D9CD9">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If a class that implements the <code class="codeph">_SQL_NAME</code> field is used in a SQLJ statement with an explicit connection context type and associated type map, then that type map is used and the <code class="codeph">_SQL_NAME</code> field is ignored. This simplifies migration of existing SQLJ programs to the ISO SQLJ standard.
                                 </p>
                              </li>
                              <li>
                                 <p>The static SQL-Java type correspondence specified in the <code class="codeph">_SQL_NAME</code> field is independent from any JDBC type map you may be using on the underlying connection. Thus, you must be careful when you are mixing SQLJ and JDBC code if both use <code class="codeph">SQLData</code> wrappers.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ428"></a><div class="props_rev_3"><a id="GUID-700E14BF-E4F8-4A36-9092-05000452C60B" name="GUID-700E14BF-E4F8-4A36-9092-05000452C60B"></a><h4 id="JSQLJ-GUID-700E14BF-E4F8-4A36-9092-05000452C60B" class="sect4">Compiling Custom Java Classes</h4>
                  <div>
                     <div class="section">
                        <p>You can include any <code class="codeph">.java</code> files for your custom Java classes, whether <code class="codeph">ORAData</code> or <code class="codeph">SQLData</code> implementations, on the SQLJ command line together with the <code class="codeph">.sqlj</code> files for your application. However, this is not necessary if the SQLJ <code class="codeph">-checksource</code> flag is set to <code class="codeph">true</code>, which is the default, and your classpath includes the directory where the custom Java source is located.
                        </p>
                        <div class="infoboxnote" id="GUID-700E14BF-E4F8-4A36-9092-05000452C60B__GUID-D2BCD3EE-5E8D-49F0-9698-BDDA15D07FFA">
                           <p class="notep1">Note:</p>
                           <p>This discussion assumes you are creating <code class="codeph">.java</code> files for your custom objects and collections, not <code class="codeph">.sqlj</code> files. Any <code class="codeph">.sqlj</code> files must be included in the SQLJ command line.
                           </p>
                        </div>
                        <p>For example, if <code class="codeph">ObjectDemo.sqlj</code> uses the <code class="codeph">ADDRESS</code> and <code class="codeph">PERSON</code> Oracle object types and you have produced custom Java classes for these objects, then you can run SQLJ as follows.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If <code class="codeph">-checksource=true</code> and the classpath includes the custom Java source location:
                              </p><pre class="oac_no_warn" dir="ltr">% sqlj ObjectDemo.sqlj
</pre></li>
                           <li>
                              <p>If <code class="codeph">-checksource=false</code> (this is a single wraparound line):
                              </p><pre class="oac_no_warn" dir="ltr">% sqlj ObjectDemo.sqlj Address.java AddressRef.java Person.java PersonRef.java
</pre></li>
                        </ul>
                        <p>You also have the choice of using your Java compiler to compile custom <code class="codeph">.java</code> source files directly. If you do this, then you must do it prior to translating <code class="codeph">.sqlj</code> files.
                        </p>
                        <div class="infoboxnote" id="GUID-700E14BF-E4F8-4A36-9092-05000452C60B__GUID-03FD8712-CC7C-4A68-B275-EE9BB22F03B5">
                           <p class="notep1">Note:</p>
                           <p>Because <code class="codeph">ORAData</code> implementations rely on Oracle-specific features, SQLJ will report numerous portability warnings if you do not use the <code class="codeph">-warn=noportable</code> translator portability setting, which is the default.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ429"></a><div class="props_rev_3"><a id="GUID-9B5BACD2-3100-46FB-8B3F-A1B0557BF7F7" name="GUID-9B5BACD2-3100-46FB-8B3F-A1B0557BF7F7"></a><h4 id="JSQLJ-GUID-9B5BACD2-3100-46FB-8B3F-A1B0557BF7F7" class="sect4">Reading and Writing Custom Data</h4>
                  <div>
                     <div class="section">
                        <p>Through the use of custom Java class instances, the Oracle SQLJ and JDBC implementations allow you to read and write user-defined types as though they are built-in types. Exactly how this is accomplished is transparent to the user.</p>
                        <p>For the mechanics of how data is read and written, for both <code class="codeph">ORAData</code> implementations and <code class="codeph">SQLData</code> implementations, refer to the<a href="../jjdbc/Oracle-object-types.html#JJDBC-GUID-6D44496F-0CAA-4034-AF55-00B39DE4C6E3" target="_blank"><span class="italic"> Oracle Database JDBC Developer's Guide</span></a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ431"></a><a id="JSQLJ430"></a><div class="props_rev_3"><a id="GUID-1F822A17-F41C-4994-95BB-886397ACFAE3" name="GUID-1F822A17-F41C-4994-95BB-886397ACFAE3"></a><h4 id="JSQLJ-GUID-1F822A17-F41C-4994-95BB-886397ACFAE3" class="sect4">Additional Uses for ORAData Implementations</h4>
                  <div>
                     <div class="section">
                        <p>To this point, discussion of custom Java classes has been for use as one of the following.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Wrappers for SQL objects: custom object classes, for use with <code class="codeph">oracle.sql.STRUCT</code> instances
                              </p>
                           </li>
                           <li>
                              <p>Wrappers for SQL references: custom reference classes, for use with <code class="codeph">oracle.sql.REF</code> instances
                              </p>
                           </li>
                           <li>
                              <p>Wrappers for SQL collections: custom collection classes, for use with <code class="codeph">oracle.sql.ARRAY</code> instances
                              </p>
                           </li>
                        </ul>
                        <p>It might be useful, however, to provide custom Java classes to wrap other <code class="codeph">oracle.sql.*</code> types as well, for customized conversions or processing. You can accomplish this with classes that implement <code class="codeph">ORAData</code>, but not <code class="codeph">SQLData</code>, as in the following examples:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Perform encryption and decryption or validation of data.</p>
                           </li>
                           <li>
                              <p>Perform logging of values that have been read or are being written.</p>
                           </li>
                           <li>
                              <p>Parse character columns, such as character fields containing URL information, into smaller components.</p>
                           </li>
                           <li>
                              <p>Map character strings into numeric constants.</p>
                           </li>
                           <li>
                              <p>Map data into more desirable Java formats, such as mapping a <code class="codeph">DATE</code> field to <code class="codeph">java.util.Date</code> format.
                              </p>
                           </li>
                           <li>
                              <p>Customize data representation, for example, data in a table column is in feet, but you want it represented in meters after it is selected.</p>
                           </li>
                           <li>
                              <p>Serialize and deserialize Java objects, for example, into or out of <code class="codeph">RAW</code> fields.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-1F822A17-F41C-4994-95BB-886397ACFAE3__GUID-D6E68D4B-71B8-4068-BAE0-1BBBB741C629">
                           <p class="notep1">Note:</p>
                           <p>This sort of functionality is not possible through the <code class="codeph">SQLData</code> interface, as <code class="codeph">SQLData</code> implementations can wrap only structured object types.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-1F822A17-F41C-4994-95BB-886397ACFAE3__GUID-02339C2A-8772-490B-9FCC-DBD04CE1050D">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="objects-collections-and-OPAQUE-types.html#GUID-4A2FC8B8-81B2-4B3B-B0D4-1102A7F7F21A">Serialized Java Objects</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F822A17-F41C-4994-95BB-886397ACFAE3__GUID-D49D802B-B373-4078-8EB6-1EB63B54EDD0">General Use of ORAData: BetterDate.java</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example shows a class that implements the <code class="codeph">ORAData</code> interface to provide a customized representation of Java dates and can be used instead of <code class="codeph">java.sql.Date</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-1F822A17-F41C-4994-95BB-886397ACFAE3__GUID-9395F43C-FEE6-4060-A640-D4D3FC5EE3AC">
                           <p class="notep1">Note:</p>
                           <p>This is not a complete application. There is no <code class="codeph">main()</code> method.
                           </p>
                        </div><pre class="oac_no_warn" dir="ltr">import java.util.Date;
import oracle.sql.ORAData;
import oracle.sql.DATE;
import oracle.sql.ORADataFactory;
import oracle.jdbc.OracleTypes;

// a Date class customized for user's preferences:
//      - months are numbers 1..12, not 0..11
//      - years are referred to through four-digit numbers, not two.

public class BetterDate extends java.util.Date
             implements ORAData, ORADataFactory {
  public static final int _SQL_TYPECODE = OracleTypes.DATE;
  
  String[]monthNames={"JAN", "FEB", "MAR", "APR", "MAY", "JUN",
                      "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"};
  String[]toDigit={"0", "1", "2", "3", "4", "5", "6", "7", "8", "9"};

  static final BetterDate _BetterDateFactory = new BetterDate();

  public static ORADataFactory getORADataFactory() { return _BetterDateFactory;}

  // the current time...
  public BetterDate() {
    super();
  }

  public oracle.sql.Datum toDatum(java.sql.Connection conn) {
    return new DATE(toSQLDate());
  }

  public oracle.sql.ORAData create(oracle.sql.Datum dat, int intx) {
    if (dat==null) return null;
    DATE DAT = ((DATE)dat);
    java.sql.Date jsd = DAT.dateValue();
    return new BetterDate(jsd);
  }
   
  public java.sql.Date toSQLDate() {
    java.sql.Date retval;
    retval = new java.sql.Date(this.getYear()-1900, this.getMonth()-1,
             this.getDate());
    return retval;
  }
  public BetterDate(java.sql.Date d) {
    this(d.getYear()+1900, d.getMonth()+1, d.getDate());
  }
  private static int [] deconstructString(String s) {
    int [] retval = new int[3];
    int y,m,d; char temp; int offset;
    StringBuffer sb = new StringBuffer(s);
    temp=sb.charAt(1);
    // figure the day of month
    if (temp &lt; '0' || temp &gt; '9') {
      m = sb.charAt(0)-'0';
      offset=2;
    } else {
      m = (sb.charAt(0)-'0')*10 + (temp-'0');
      offset=3;
    }

    // figure the month
    temp = sb.charAt(offset+1);
    if (temp &lt; '0' || temp &gt; '9') {
      d = sb.charAt(offset)-'0';
      offset+=2;
    } else {
      d = (sb.charAt(offset)-'0')*10 + (temp-'0');
      offset+=3;
    }

    // figure the year, which is either in the format "yy" or "yyyy"
    // (the former assumes the current century)
    if (sb.length() &lt;= (offset+2)) {
      y = (((new BetterDate()).getYear())/100)*100 +
          (sb.charAt(offset)- '0') * 10 +
          (sb.charAt(offset+1)- '0');
    } else {
      y = (sb.charAt(offset)- '0') * 1000 +
          (sb.charAt(offset+1)- '0') * 100 +
          (sb.charAt(offset+2)- '0') * 10 +
          (sb.charAt(offset+3)- '0');
    }
    retval[0]=y;
    retval[1]=m;
    retval[2]=d;
//    System.out.println("Constructing date from string as: "+d+"/"+m+"/"+y);
    return retval;
  }
  private BetterDate(int [] stuff) {
    this(stuff[0], stuff[1], stuff[2]);
  }
  // takes a string in the format: "mm-dd-yyyy" or "mm/dd/yyyy" or
  // "mm-dd-yy" or "mm/dd/yy" (which assumes the current century)
  public BetterDate(String s) {
    this(BetterDate.deconstructString(s));
  }

  // years are as '1990', months from 1..12 (unlike java.util.Date!), date
  // as '1' to '31' 
  public BetterDate(int year, int months, int date) {
    super(year-1900,months-1,date);
  }
  // returns "Date: dd-mon-yyyy"
  public String toString() { 
    int yr = getYear();
    return getDate()+"-"+monthNames[getMonth()-1]+"-"+
      toDigit[(yr/1000)%10] + 
      toDigit[(yr/100)%10] + 
      toDigit[(yr/10)%10] + 
      toDigit[yr%10];
//    return "Date: " + getDate() + "-"+getMonth()+"-"+(getYear()%100);
  }
  public BetterDate addDays(int i) {
    if (i==0) return this;
    return new BetterDate(getYear(), getMonth(), getDate()+i);
  }
  public BetterDate addMonths(int i) {
    if (i==0) return this;
    int yr=getYear();
    int mon=getMonth()+i;
    int dat=getDate();
    while(mon&lt;1) { 
      --yr;mon+=12;
    }
    return new BetterDate(yr, mon,dat);
  }
  // returns year as in 1996, 2007
  public int getYear() {
    return super.getYear()+1900;
  }
  // returns month as 1..12
  public int getMonth() {
    return super.getMonth()+1;
  }
  public boolean equals(BetterDate sd) {
    return (sd.getDate() == this.getDate() &amp;&amp;
            sd.getMonth() == this.getMonth() &amp;&amp;
            sd.getYear() == this.getYear());
  }
  // subtract the two dates; return the answer in whole years
  // uses the average length of a year, which is 365 days plus
  // a leap year every 4, except 100, except 400 years =
  // = 365 97/400 = 365.2425 days = 31,556,952 seconds
  public double minusInYears(BetterDate sd) {
    // the year (as defined in the preceding text) in milliseconds
    long yearInMillis = 31556952L;
    long diff = myUTC()-sd.myUTC();
    return (((double)diff/(double)yearInMillis)/1000.0);
  }
  public long myUTC() {
    return Date.UTC(getYear()-1900, getMonth()-1, getDate(),0,0,0);
  }
  
  // returns &lt;0 if this is earlier than sd
  // returns = if this == sd
  // else returns &gt;0
  public int compare(BetterDate sd) {
    if (getYear()!=sd.getYear()) {return getYear()-sd.getYear();}
    if (getMonth()!=sd.getMonth()) {return getMonth()-sd.getMonth();}
    return getDate()-sd.getDate();
  }
}
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ433"></a><a id="JSQLJ434"></a><a id="JSQLJ432"></a><div class="props_rev_3"><a id="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B" name="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B"></a><h3 id="JSQLJ-GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B" class="sect3">User-Defined Types</h3>
               <div>
                  <div class="section">
                     <p>This section contains examples of creating and using user-defined object types and collection types in Oracle Database 12<span class="italic">c </span>Release 2 (12.2).
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B__I1006222">
                     <p class="subhead2" id="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B__GUID-0999BCAD-A95F-4507-B369-D93708A039AD">Creating Object Types</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>SQL commands to create object types are of the following form:</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE <span class="italic">typename</span> AS OBJECT
( 
  <span class="italic">attrname1    datatype1</span>,
  <span class="italic">attrname2    datatype2</span>,
  ...         ...
  <span class="italic">attrnameN    datatypeN</span>
);
</pre><p>Where <span class="italic"><code class="codeph">typename</code></span> is the desired name of your object type, <span class="italic"><code class="codeph">attrname1</code></span> through <span class="italic"><code class="codeph">attrnameN</code></span> are the desired attribute names, and <span class="italic"><code class="codeph">datatype1</code></span> through <span class="italic"><code class="codeph">datatypeN</code></span> are the attribute data types. 
                     </p>
                     <p>The remainder of this section provides an example of creating user-defined object types in Oracle Database 12<span class="italic">c </span>Release 1 (12.1). 
                     </p>
                     <p>In this example, the following items are created using SQL:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Two object types, <code class="codeph">PERSON</code> and <code class="codeph">ADDRESS</code></p>
                        </li>
                        <li>
                           <p>A typed table for <code class="codeph">PERSON</code> objects
                           </p>
                        </li>
                        <li>
                           <p>An <code class="codeph">EMPLOYEES</code> table that includes an <code class="codeph">ADDRESS</code> column and two columns of <code class="codeph">PERSON</code> references
                           </p>
                        </li>
                     </ul>
                     <p>The script for creating these items is as follows:</p><pre class="oac_no_warn" dir="ltr">/*** Using user-defined types (UDTs) in SQLJ ***/
/
/*** Create ADDRESS UDT ***/
CREATE TYPE ADDRESS AS OBJECT
( 
  street        VARCHAR(60),
  city          VARCHAR(30),
  state         CHAR(2),
  zip_code      CHAR(5)
)
/
/*** Create PERSON UDT containing an embedded ADDRESS UDT ***/
CREATE TYPE PERSON AS OBJECT
( 
  name    VARCHAR(30),
  ssn     NUMBER,
  addr    ADDRESS
)
/
/*** Create a typed table for PERSON objects ***/
CREATE TABLE persons OF PERSON
/
/*** Create a relational table with two columns that are REFs 
     to PERSON objects, as well as a column which is an Address ADT. ***/
CREATE TABLE  employees
( 
  empnumber            INTEGER PRIMARY KEY,
  person_data     REF  PERSON,
  manager         REF  PERSON,
  office_addr          ADDRESS,
  salary               NUMBER
)
/*** Insert some data--2 objects into the persons typed table ***/
INSERT INTO persons VALUES (
            PERSON('Wolfgang Amadeus Mozart', 123456,
               ADDRESS('Am Berg 100', 'Salzburg', 'AT','10424')))
/
INSERT INTO persons VALUES (
            PERSON('Ludwig van Beethoven', 234567,
               ADDRESS('Rheinallee', 'Bonn', 'DE', '69234')))
/
/** Put a row in the employees table **/
INSERT INTO employees (empnumber, office_addr, salary) VALUES (
            1001,
            ADDRESS('500 Oracle Parkway', 'Redwood Shores', 'CA', '94065'),
            50000)
/
/** Set the manager and PERSON REFs for the employee **/
UPDATE employees 
   SET manager =  
       (SELECT REF(p) FROM persons p WHERE p.name = 'Wolfgang Amadeus Mozart')
/
UPDATE employees 
   SET person_data =  
       (SELECT REF(p) FROM persons p WHERE p.name = 'Ludwig van Beethoven')
</pre><div class="infoboxnote" id="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B__GUID-8AB87128-031C-4267-9A11-6945A39C8326">
                        <p class="notep1">Note:</p>
                        <p>Use of a table alias, such as <code class="codeph">p</code> in the example, is a recommended general practice in the Oracle SQL implementation, especially in accessing tables with user-defined types. It is required syntax in some cases where object attributes are accessed. Even when not required, it helps in avoiding ambiguities. Refer to the<a href="../sqlrf/Data-Types.html#SQLRF-GUID-7CF27C66-9908-4C02-9401-06C2F2C4021C" target="_blank"><span class="italic"> Oracle Database SQL Language Reference </span></a>for more information about table aliases.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B__I1006305">
                     <p class="subhead2" id="GUID-88A459DA-AC72-4DD9-9143-BCD47CD6FF8B__GUID-C5274E1D-36DB-4983-9C7E-BA6135481AF5">Creating Collection Types</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>There are two categories of collections</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Variable-length arrays (VARRAYs)</p>
                        </li>
                        <li>
                           <p>Nested tables</p>
                        </li>
                     </ul>
                     <p>SQL commands to create VARRAY types are of the following form:</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE <span class="italic">typename</span> IS VARRAY(<span class="italic">n</span>) OF <span class="italic">datatype</span>;
</pre><p>The <span class="italic"><code class="codeph">typename</code></span> designation is the desired name of your VARRAY type, <span class="italic"><code class="codeph">n</code></span> is the desired maximum number of elements in the array, and <span class="italic"><code class="codeph">datatype</code></span> is the data type of the array elements. For example:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE myvarr IS VARRAY(10) OF INTEGER;
</pre><p>SQL commands to create nested table types are of the following form:</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE <span class="italic">typename</span> AS TABLE OF <span class="italic">datatype</span>;
</pre><p>The <span class="italic"><code class="codeph">typename</code></span> designation is the desired name of your nested table type and <span class="italic"><code class="codeph">datatype</code></span> is the data type of the table elements. This can be a user-defined type as well as a standard data type. A nested table is limited to one column, although that one column type can be a complex object with multiple attributes. The nested table, as with any database table, can have any number of rows. For example:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE person_array AS TABLE OF person;
</pre><p>This command creates a nested table where each row consists of a <code class="codeph">PERSON</code> object.
                     </p>
                     <p>The rest of this section provides an example of creating a user-defined collection type, as well as object types, in Oracle Database 12<span class="italic">c </span>Release 2 (12.2). 
                     </p>
                     <p>The following items are created and populated using SQL:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Two object types, <code class="codeph">PARTICIPANT_T</code> and <code class="codeph">MODULE_T</code></p>
                        </li>
                        <li>
                           <p>A collection type, <code class="codeph">MODULETBL_T</code>, which is a nested table of <code class="codeph">MODULE_T</code> objects
                           </p>
                        </li>
                        <li>
                           <p>A <code class="codeph">PROJECTS</code> table that includes a column of <code class="codeph">PARTICIPANT_T</code> references and a column of <code class="codeph">MODULETBL_T</code> nested tables
                           </p>
                        </li>
                        <li>
                           <p>A collection type <code class="codeph">PHONE_ARRAY</code>, which is a VARRAY of <code class="codeph">VARCHAR2(30)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">PERSON</code> and <code class="codeph">ADDRESS</code> objects (repeating the same definitions used earlier)
                           </p>
                        </li>
                        <li>
                           <p>An <code class="codeph">EMPLOYEES</code> table, which includes a <code class="codeph">PHONE_ARRAY</code> column
                           </p>
                        </li>
                     </ul>
                     <p>The script for creating these items is as follows:</p><pre class="oac_no_warn" dir="ltr">Rem This is a SQL*Plus script used to create schema to demonstrate collection 
Rem manipulation in SQLJ 

CREATE TYPE PARTICIPANT_T AS OBJECT (
  empno   NUMBER(4),
  ename   VARCHAR2(20),
  job     VARCHAR2(12),
  mgr     NUMBER(4),
  hiredate DATE,
  sal      NUMBER(7,2),
  deptno   NUMBER(2)) 
/
SHOW ERRORS 
CREATE TYPE MODULE_T  AS OBJECT (
  module_id  NUMBER(4),
  module_name VARCHAR2(20), 
  module_owner REF PARTICIPANT_T, 
  module_start_date DATE, 
  module_duration NUMBER )
/
SHOW ERRORS
CREATE TYPE MODULETBL_T AS TABLE OF MODULE_T;
/
SHOW ERRORS
CREATE TABLE projects (
  id NUMBER(4),
  name VARCHAR(30),
  owner REF PARTICIPANT_T,
  start_date DATE,
  duration NUMBER(3),
  modules  MODULETBL_T  ) NESTED TABLE modules STORE AS modules_tab;

SHOW ERRORS
CREATE TYPE PHONE_ARRAY IS VARRAY (10) OF varchar2(30)
/

/*** Create ADDRESS UDT ***/
CREATE TYPE ADDRESS AS OBJECT
( 
  street        VARCHAR(60),
  city          VARCHAR(30),
  state         CHAR(2),
  zip_code      CHAR(5)
)
/
/*** Create PERSON UDT containing an embedded ADDRESS UDT ***/
CREATE TYPE PERSON AS OBJECT
( 
  name    VARCHAR(30),
  ssn     NUMBER,
  addr    ADDRESS
)
/
CREATE TABLE  employees
( empnumber            INTEGER PRIMARY KEY,
  person_data     REF  person,
  manager         REF  person,
  office_addr          address,
  salary               NUMBER,
  phone_nums           phone_array
)
/
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="JSQLJ467"></a><div class="props_rev_3"><a id="GUID-A8FBF9FD-A786-4C6E-B093-9B179F079810" name="GUID-A8FBF9FD-A786-4C6E-B093-9B179F079810"></a><h3 id="JSQLJ-GUID-A8FBF9FD-A786-4C6E-B093-9B179F079810" class="sect3">Strongly Typed Objects and References in SQLJ Executable Statements</h3>
               <div>
                  <p>The Oracle SQLJ implementation is flexible in how it enables you to use host expressions and iterators in reading or writing object data through strongly typed objects or references.</p>
                  <p>For iterators, you can use custom object classes as iterator column types. Alternatively, you can have iterator columns that correspond to individual object attributes, similar to extent tables, using column types that appropriately map to the SQL data types of the attributes.</p>
                  <p>For host expressions, you can use host variables of your custom object class type or custom reference class type. Alternatively, you can use host variables that correspond to object attributes, using variable types that appropriately map to the SQL data types of the attributes.</p>
                  <p>The remainder of this section provides examples of how to manipulate Oracle objects using custom object classes, custom object class attributes, and custom reference classes for host variables and iterator columns in SQLJ executable statements. </p>
                  <p>The following two examples operate at the object level:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-1CE3BE78-8A06-4707-94BD-C3EE317D4D84">Selecting Objects and Object References into Iterator Columns</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-850AE641-018E-4F73-9BC0-E36A012CFD1B">Updating an Object</a></p>
                     </li>
                  </ul>
                  <p>The <a href="objects-collections-and-OPAQUE-types.html#GUID-1AAE5F9C-67D0-4800-A1F0-5BEEEC683013">Inserting an Object Created from Individual Object Attributes</a> example operates at the scalar-attribute level.
                  </p>
                  <p>The <a href="objects-collections-and-OPAQUE-types.html#GUID-BE3CBAF4-E752-4F6E-93F5-76C06A848D51">Updating an Object Reference</a> example operates through a reference.
                  </p>
               </div><a id="JSQLJ468"></a><div class="props_rev_3"><a id="GUID-1CE3BE78-8A06-4707-94BD-C3EE317D4D84" name="GUID-1CE3BE78-8A06-4707-94BD-C3EE317D4D84"></a><h4 id="JSQLJ-GUID-1CE3BE78-8A06-4707-94BD-C3EE317D4D84" class="sect4">Selecting Objects and Object References into Iterator Columns</h4>
                  <div>
                     <div class="section">
                        <p>This example uses a custom Java class and a custom reference class as iterator column types. Presume the following definition of the <code class="codeph">ADDRESS</code> Oracle object type:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE ADDRESS AS OBJECT
(  street VARCHAR(40),
   zip NUMBER );
</pre><p>And the following definition of the <code class="codeph">EMPADDRS</code> table, which includes an <code class="codeph">ADDRESS</code> column and an <code class="codeph">ADDRESS</code> reference column:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE empaddrs
(  name VARCHAR(60),
   home ADDRESS,
   loc REF ADDRESS );
</pre><p>Once you create a custom Java class, <code class="codeph">Address</code>, and custom reference class, <code class="codeph">AddressRef</code>, corresponding to the <code class="codeph">ADDRESS</code> Oracle object type, you can use <code class="codeph">Address</code> and <code class="codeph">AddressRef</code> in a named iterator as follows:
                        </p><pre class="oac_no_warn" dir="ltr">#sql iterator EmpIter (String name, Address home, AddressRef loc);

...
EmpIter ecur;
#sql ecur = { SELECT name, home, loc FROM empaddrs };
while (ecur.next()) {
   Address homeAddr = ecur.home();
   // Print out the home address.
   System.out.println ("Name: " + ecur.name() + "\n" +
                       "Home address: " + homeAddr.getStreet() + "   " +
                       homeAddr.getZip());
   // Now update the loc address zip code through the address reference.
   AddressRef homeRef = ecur.loc();
   Address location = homeRef.getValue();
   location.setZip(new BigDecimal(98765));
   homeRef.setValue(location);
   }
...
</pre><p>The <code class="codeph">ecur.home()</code> method call extracts an <code class="codeph">Address</code> object from the <code class="codeph">home</code> column of the iterator and assigns it to the <code class="codeph">homeAddr</code> local variable (for efficiency). The attributes of that object can then be accessed using standard Java dot syntax:
                        </p><pre class="oac_no_warn" dir="ltr">homeAddr.getStreet()
</pre><p>Use the <code class="codeph">getValue()</code> and <code class="codeph">setValue()</code> methods to manipulate the location address (in this case its zip code).
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ469"></a><div class="props_rev_3"><a id="GUID-850AE641-018E-4F73-9BC0-E36A012CFD1B" name="GUID-850AE641-018E-4F73-9BC0-E36A012CFD1B"></a><h4 id="JSQLJ-GUID-850AE641-018E-4F73-9BC0-E36A012CFD1B" class="sect4">Updating an Object</h4>
                  <div>
                     <div class="section">
                        <p>This example declares and sets an input host variable of the <code class="codeph">Address</code> Java type to update an <code class="codeph">ADDRESS</code> object in a column of the <code class="codeph">employees</code> table. Both before and after the update, the address is selected into an output host variable of the <code class="codeph">Address</code> type and printed for verification.
                        </p><pre class="oac_no_warn" dir="ltr">...
// Updating an object 

static void updateObject() 
{

   Address addr;
   Address new_addr;
   int empnum = 1001;

   try {
      #sql {
         SELECT office_addr
         INTO :addr
         FROM employees
         WHERE empnumber = :empnum };
      System.out.println("Current office address of employee 1001:");

      printAddressDetails(addr);

      /* Now update the street of address */

      String street ="100 Oracle Parkway";
      addr.setStreet(street);

      /* Put updated object back into the database */

      try {
         #sql {
            UPDATE employees
            SET office_addr = :addr
            WHERE empnumber = :empnum };
         System.out.println
            ("Updated employee 1001 to new address at Oracle Parkway.");

         /* Select new address to verify update */
      
         try {
            #sql {
               SELECT office_addr
               INTO :new_addr
               FROM employees
               WHERE empnumber = :empnum };
      
            System.out.println("New office address of employee 1001:");
            printAddressDetails(new_addr);

         } catch (SQLException exn) {
         System.out.println("Verification SELECT failed with "+exn); }
      
      } catch (SQLException exn) {
      System.out.println("UPDATE failed with "+exn); }

   } catch (SQLException exn) {
   System.out.println("SELECT failed with "+exn); }
}
...
</pre><p>Note the use of the <code class="codeph">setStreet()</code> accessor method of the <code class="codeph">Address</code> object.
                        </p>
                        <p>This example uses the <code class="codeph">printAddressDetails()</code> utility. The source code for this method is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">static void printAddressDetails(Address a) throws SQLException
{

  if (a == null)  {
    System.out.println("No Address available.");
    return;
   }

   String street = ((a.getStreet()==null) ? "NULL street" : a.getStreet()) ;
   String city = (a.getCity()==null) ? "NULL city" : a.getCity();
   String state = (a.getState()==null) ? "NULL state" : a.getState();
   String zip_code = (a.getZipCode()==null) ? "NULL zip" : a.getZipCode();

   System.out.println("Street: '" + street + "'");
   System.out.println("City:   '" + city   + "'");
   System.out.println("State:  '" + state  + "'");
   System.out.println("Zip:    '" + zip_code + "'" );
}
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ470"></a><div class="props_rev_3"><a id="GUID-1AAE5F9C-67D0-4800-A1F0-5BEEEC683013" name="GUID-1AAE5F9C-67D0-4800-A1F0-5BEEEC683013"></a><h4 id="JSQLJ-GUID-1AAE5F9C-67D0-4800-A1F0-5BEEEC683013" class="sect4">Inserting an Object Created from Individual Object Attributes</h4>
                  <div>
                     <div class="section">
                        <p>This example declares and sets input host variables corresponding to attributes of <code class="codeph">PERSON</code> and nested <code class="codeph">ADDRESS</code> objects, then uses these values to insert a new <code class="codeph">PERSON</code> object into the <code class="codeph">persons</code> table in the database.
                        </p><pre class="oac_no_warn" dir="ltr">...
// Inserting an object

static void insertObject() 
{
   String new_name   = "NEW PERSON";
   int    new_ssn    = 987654;
   String new_street = "NEW STREET";
   String new_city   = "NEW CITY";
   String new_state  = "NS";
   String new_zip    = "NZIP";
  /*
   * Insert a new PERSON object into the persons table
   */
   try {
      #sql {
         INSERT INTO persons
         VALUES (PERSON(:new_name, :new_ssn,
         ADDRESS(:new_street, :new_city, :new_state, :new_zip))) };

      System.out.println("Inserted PERSON object NEW PERSON."); 

   } catch (SQLException exn) { System.out.println("INSERT failed with "+exn); }
}
...
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ471"></a><div class="props_rev_3"><a id="GUID-BE3CBAF4-E752-4F6E-93F5-76C06A848D51" name="GUID-BE3CBAF4-E752-4F6E-93F5-76C06A848D51"></a><h4 id="JSQLJ-GUID-BE3CBAF4-E752-4F6E-93F5-76C06A848D51" class="sect4">Updating an Object Reference</h4>
                  <div>
                     <div class="section">
                        <p>This example selects a <code class="codeph">PERSON</code> reference from the <code class="codeph">persons</code> table and uses it to update a <code class="codeph">PERSON</code> reference in the <code class="codeph">employees</code> table. It uses simple input host variables to check attribute value criteria. The newly updated reference is then used in selecting the <code class="codeph">PERSON</code> object to which it refers, so that information can be output to the user to verify the change.
                        </p><pre class="oac_no_warn" dir="ltr">...
// Updating a REF to an object

static void updateRef()
{
   int empnum = 1001;
   String new_manager = "NEW PERSON";

   System.out.println("Updating manager REF.");
   try {
      #sql {
         UPDATE employees
         SET manager = 
            (SELECT REF(p) FROM persons p WHERE p.name = :new_manager)
         WHERE empnumber = :empnum };

      System.out.println("Updated manager of employee 1001. Selecting back");

   } catch (SQLException exn) {
   System.out.println("UPDATE REF failed with "+exn); }

   /* Select manager back to verify the update */
   Person manager;

   try { 
      #sql {
         SELECT deref(manager)
         INTO :manager
         FROM employees e
         WHERE empnumber = :empnum };

      System.out.println("Current manager of "+empnum+":");
      printPersonDetails(manager);

   } catch (SQLException exn) {
   System.out.println("SELECT REF failed with "+exn); }

}
...
</pre><div class="infoboxnote" id="GUID-BE3CBAF4-E752-4F6E-93F5-76C06A848D51__GUID-5E9841E5-65A2-4F61-8D59-A299294C1B22">
                           <p class="notep1">Note:</p>
                           <p>This example uses table alias syntax (<code class="codeph">p</code>) as discussed previously. Also, the <code class="codeph">REF</code> syntax is required in selecting a reference through the object to which it refers, and the <code class="codeph">DEREF</code> syntax is required in selecting an object through a reference. Refer to the<a href="../sqlrf/Syntax-for-Schema-Objects-and-Parts-in-SQL-Statements.html#SQLRF-GUID-08B73ED6-2ABA-4737-B8A1-F7BD0456AEDB" target="_blank"><span class="italic"> Oracle Database SQL Language Reference </span></a>for more information about table aliases, <code class="codeph">REF</code>, and <code class="codeph">DEREF</code>.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ472"></a><div class="props_rev_3"><a id="GUID-B58EDE94-BD0C-4C00-960B-4D8267F72DFD" name="GUID-B58EDE94-BD0C-4C00-960B-4D8267F72DFD"></a><h3 id="JSQLJ-GUID-B58EDE94-BD0C-4C00-960B-4D8267F72DFD" class="sect3">Strongly Typed Collections in SQLJ Executable Statements</h3>
               <div>
                  <p>As with strongly typed objects and references, the Oracle SQLJ implementation supports different scenarios for reading and writing data through strongly typed collections, using either iterators or host expressions.</p>
                  <p>From the perspective of a SQLJ developer, both categories of collections, VARRAY and nested table, are treated essentially the same, but there are some differences in implementation and performance.</p>
                  <p>The Oracle SQLJ implementation supports syntax choices so that nested tables can be accessed and manipulated either apart from or together with their outer tables. In this section, manipulation of a nested table by itself will be referred to as detail-level manipulation and manipulation of a nested table together with its outer table will be referred to as master-level manipulation.</p>
                  <p>Most of this section, after a brief discussion of some syntax, focuses on examples of manipulating nested tables, given that their use is somewhat more complicated than that of VARRAYs.</p>
                  <div class="infoboxnote" id="GUID-B58EDE94-BD0C-4C00-960B-4D8267F72DFD__GUID-D0E7C0F8-8F58-41EF-B4AE-90B046B25F07">
                     <p class="notep1">Note:</p>
                     <p>In the Oracle SQLJ implementation, VARRAY types and nested table types can be retrieved only in their entirety. This is as opposed to the Oracle SQL implementation, where nested tables can be selectively queried.</p>
                  </div>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-CB799C12-7B7B-42D0-B07B-D62D44B93ADF">Accessing Nested Tables: TABLE syntax and CURSOR syntax</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-2CDD8601-C214-4895-96D3-35585F3D5796">Inserting a Row that Includes a Nested Table</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-C646BEEE-5E17-4237-86F2-8A9C0E52E521">Selecting a Nested Table into a Host Expression</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-03072A77-33BA-4CA0-AF0C-BAFD8AAF75E8">Manipulating a Nested Table Using TABLE Syntax</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-0F4FEE06-608F-4CB9-BC5C-A0C36650A20E">Selecting Data from a Nested Table Using a Nested Iterator</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-DA6DA7F6-6743-4E59-B0A5-294FDEB204BB">Selecting a VARRAY into a Host Expression</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-03B5A7C7-CA42-4E3B-B57A-131DC6875B36">Inserting a Row that Includes a VARRAY</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ473"></a><div class="props_rev_3"><a id="GUID-CB799C12-7B7B-42D0-B07B-D62D44B93ADF" name="GUID-CB799C12-7B7B-42D0-B07B-D62D44B93ADF"></a><h4 id="JSQLJ-GUID-CB799C12-7B7B-42D0-B07B-D62D44B93ADF" class="sect4">Accessing Nested Tables: TABLE syntax and CURSOR syntax</h4>
                  <div>
                     <div class="section">
                        <p>The Oracle SQLJ implementation supports the use of nested iterators to access data in nested tables. Use the <code class="codeph">CURSOR</code> keyword in the outer <code class="codeph">SELECT</code> statement to encapsulate the inner <code class="codeph">SELECT</code> statement. This is shown in <span class="q">"<a href="objects-collections-and-OPAQUE-types.html#GUID-0F4FEE06-608F-4CB9-BC5C-A0C36650A20E">Selecting Data from a Nested Table Using a Nested Iterator</a>"</span>.
                        </p>
                        <p>Oracle also supports use of the <code class="codeph">TABLE</code> keyword to manipulate the individual rows of a nested table. This keyword informs Oracle that the column value returned by a subquery is a nested table, as opposed to a scalar value. You must prefix the <code class="codeph">TABLE</code> keyword to a subquery that returns a single column value or an expression that yields a nested table.
                        </p>
                        <p>The following example shows the use of the <code class="codeph">TABLE</code> syntax:
                        </p><pre class="oac_no_warn" dir="ltr">UPDATE TABLE(SELECT a.modules FROM projects a WHERE a.id=555) b
       SET module_owner= 
       (SELECT ref(p) FROM employees p WHERE p.ename= 'Smith') 
       WHERE b.module_name = 'Zebra';
</pre><p>When you see <code class="codeph">TABLE</code> used as it is here, realize that it is referring to a single nested table that has been selected from a column of an outer table.
                        </p>
                        <div class="infoboxnote" id="GUID-CB799C12-7B7B-42D0-B07B-D62D44B93ADF__GUID-78769A8D-4B7E-4487-ABF6-B993D472C1C9">
                           <p class="notep1">Note:</p>
                           <p>This example uses table alias syntax (<code class="codeph">a</code> for <code class="codeph">projects</code>, <code class="codeph">b</code> for the nested table, and <code class="codeph">p</code> for <code class="codeph">employees</code>) as discussed previously.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ474"></a><div class="props_rev_3"><a id="GUID-2CDD8601-C214-4895-96D3-35585F3D5796" name="GUID-2CDD8601-C214-4895-96D3-35585F3D5796"></a><h4 id="JSQLJ-GUID-2CDD8601-C214-4895-96D3-35585F3D5796" class="sect4">Inserting a Row that Includes a Nested Table</h4>
                  <div>
                     <div class="section">
                        <p>This example shows an operation that manipulates the master level (outer table) and detail level (nested tables) simultaneously and explicitly. This inserts a row in the <code class="codeph">projects</code> table, where each row includes a nested table of the <code class="codeph">MODULETBL_T</code> type, which contains rows of <code class="codeph">MODULE_T</code> objects.
                        </p>
                        <p>First, the scalar values are set (<code class="codeph">id</code>, <code class="codeph">name</code>, <code class="codeph">start_date</code>, <code class="codeph">duration</code>), then the nested table values are set. This involves an extra level of abstraction, because the nested table elements are objects with multiple attributes. In setting the nested table values, each attribute value must be set for each <code class="codeph">MODULE_T</code> object in the nested table. Finally, the <code class="codeph">owner</code> values, initially set to <code class="codeph">null</code>, are set in a separate statement.
                        </p><pre class="oac_no_warn" dir="ltr">// Insert Nested table details along with master details 

  public static void insertProject2(int id)  throws Exception 
  {
    System.out.println("Inserting Project with Nested Table details..");
    try {
      #sql { INSERT INTO Projects(id,name,owner,start_date,duration, modules) 
             VALUES ( 600, 'Ruby', null, '10-MAY-98',  300, 
             moduletbl_t(module_t(6001, 'Setup ', null, '01-JAN-98', 100),
                        module_t(6002, 'BenchMark', null, '05-FEB-98',20) ,
                        module_t(6003, 'Purchase', null, '15-MAR-98', 50),
                        module_t(6004, 'Install', null, '15-MAR-98',44),
                        module_t(6005, 'Launch', null,'12-MAY-98',34))) };
    } catch ( Exception e) {
      System.out.println("Error:insertProject2");
      e.printStackTrace();
    }

    // Assign project owner to this project 

    try {
      #sql { UPDATE Projects pr
          SET owner=(SELECT ref(pa) FROM participants pa WHERE pa.empno = 7698)
         WHERE pr.id=600 };
    } catch ( Exception e) {
      System.out.println("Error:insertProject2:update");
      e.printStackTrace();
    }
  }
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ475"></a><div class="props_rev_3"><a id="GUID-C646BEEE-5E17-4237-86F2-8A9C0E52E521" name="GUID-C646BEEE-5E17-4237-86F2-8A9C0E52E521"></a><h4 id="JSQLJ-GUID-C646BEEE-5E17-4237-86F2-8A9C0E52E521" class="sect4">Selecting a Nested Table into a Host Expression</h4>
                  <div>
                     <div class="section">
                        <p>This example presents an operation that works directly at the detail level of the nested table.</p><pre class="oac_no_warn" dir="ltr">  static ModuletblT mymodules=null;
  ...

  public static void getModules2(int projId)
  throws Exception 
  {
    System.out.println("Display modules for project " + projId );

    try {
      #sql {SELECT modules INTO :mymodules 
                           FROM projects  WHERE id=:projId };
      showArray(mymodules);
    } catch(Exception e) {
      System.out.println("Error:getModules2");
      e.printStackTrace();
    }
  }

  public static void showArray(ModuletblT a) 
  {
    try {
      if ( a == null )
        System.out.println( "The array is null" );
      else {
        System.out.println( "printing ModuleTable array object of size "
                             +a.length());
        ModuleT[] modules = a.getArray();

        for (int i=0;i&lt;modules.length; i++) {
          ModuleT module = modules[i];
          System.out.println("module "+module.getModuleId()+
                ", "+module.getModuleName()+
                ", "+module.getModuleStartDate()+
                ", "+module.getModuleDuration());
        }
      }
    }
    catch( Exception e ) {
      System.out.println("Show Array");
      e.printStackTrace();
    }
  }
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ476"></a><div class="props_rev_3"><a id="GUID-03072A77-33BA-4CA0-AF0C-BAFD8AAF75E8" name="GUID-03072A77-33BA-4CA0-AF0C-BAFD8AAF75E8"></a><h4 id="JSQLJ-GUID-03072A77-33BA-4CA0-AF0C-BAFD8AAF75E8" class="sect4">Manipulating a Nested Table Using TABLE Syntax</h4>
                  <div>
                     <div class="section">
                        <p>This example uses <code class="codeph">TABLE</code> syntax to work at the detail level to access and update nested table elements directly, based on master-level criteria.
                        </p>
                        <p>The <code class="codeph">assignModule()</code> method selects a nested table of <code class="codeph">MODULE_T</code> objects from the <code class="codeph">MODULES</code> column of the <code class="codeph">PROJECTS</code> table, then updates <code class="codeph">MODULE_NAME</code> for a particular row of the nested table. Similarly, the <code class="codeph">deleteUnownedModules()</code> method selects a nested table of <code class="codeph">MODULE_T</code> objects, then deletes any unowned modules in the nested table, where <code class="codeph">MODULE_OWNER</code> is <code class="codeph">null</code>.
                        </p>
                        <p>These methods use table alias syntax, as discussed previously. In this case, <code class="codeph">m</code> is used for the nested table, and <code class="codeph">p</code> is used for the <code class="codeph">participants</code> table.
                        </p><pre class="oac_no_warn" dir="ltr">  /* assignModule 
     Illustrates accessing the nested table using the TABLE construct 
     and updating the nested table row 
  */
  public static void assignModule(int projId, String moduleName, 
                                  String modOwner) throws Exception 
  {
    System.out.println("Update:Assign '"+moduleName+"' to '"+ modOwner+"'");

    try {
      #sql {UPDATE TABLE(SELECT modules FROM projects WHERE id=:projId) m
            SET m.module_owner=
           (SELECT ref(p) FROM participants p WHERE p.ename= :modOwner) 
            WHERE m.module_name = :moduleName };
    } catch(Exception e) {
      System.out.println("Error:insertModules");
      e.printStackTrace();
    }
  }

  /* deleteUnownedModules 
  // Demonstrates deletion of the Nested table element 
  */

  public static void deleteUnownedModules(int projId)
  throws Exception 
  {
    System.out.println("Deleting Unowned Modules for Project " + projId);
    try {
      #sql { DELETE TABLE(SELECT modules FROM projects WHERE id=:projId) m
             WHERE m.module_owner IS NULL };
    } catch(Exception e) {
      System.out.println("Error:deleteUnownedModules");
      e.printStackTrace();
    }
  }
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ477"></a><div class="props_rev_3"><a id="GUID-0F4FEE06-608F-4CB9-BC5C-A0C36650A20E" name="GUID-0F4FEE06-608F-4CB9-BC5C-A0C36650A20E"></a><h4 id="JSQLJ-GUID-0F4FEE06-608F-4CB9-BC5C-A0C36650A20E" class="sect4">Selecting Data from a Nested Table Using a Nested Iterator</h4>
                  <div>
                     <div class="section">
                        <p>SQLJ supports the use of nested iterators as a way of accessing nested tables. This requires <code class="codeph">CURSOR</code> syntax, as used in the following example. The code defines a named iterator class, <code class="codeph">ModuleIter</code>, then uses that class as the type for a <code class="codeph">modules</code> column in another named iterator class, <code class="codeph">ProjIter</code>. Inside a populated <code class="codeph">ProjIter</code> instance, each <code class="codeph">modules</code> item is a nested table rendered as a nested iterator.
                        </p>
                        <p>The <code class="codeph">CURSOR</code> syntax is part of the nested <code class="codeph">SELECT</code> statement that populates the nested iterators. Once the data has been selected, it is output to the user through the iterator accessor methods.
                        </p>
                        <p>This example uses required table alias syntax, as discussed previously. In this case, <code class="codeph">a</code> for the <code class="codeph">projects</code> table and <code class="codeph">b</code> for the nested table.
                        </p><pre class="oac_no_warn" dir="ltr">...

//  The Nested Table is accessed using the ModuleIter 
//  The ModuleIter is defined as Named Iterator 

#sql public static iterator ModuleIter(int moduleId , 
                                       String moduleName , 
                                       String moduleOwner);

// Get the Project Details using the ProjIter defined as 
// Named Iterator. Notice the use of ModuleIter:

#sql public static iterator ProjIter(int id, 
                                     String name, 
                                     String owner, 
                                     Date start_date, 
                                     ModuleIter modules);

...

public static void listAllProjects() throws SQLException
{
  System.out.println("Listing projects...");

   // Instantiate and initialize the iterators 

   ProjIter projs = null;
   ModuleIter  mods = null;
   #sql projs = {SELECT a.id, 
                        a.name, 
                        initcap(a.owner.ename) as "owner", 
                        a.start_date,
                        CURSOR (
                        SELECT b.module_id AS "moduleId",
                               b.module_name AS "moduleName",
                                 initcap(b.module_owner.ename) AS "moduleOwner"
                        FROM TABLE(a.modules) b) AS "modules"  
                 FROM projects a };
  
  // Display Project Details
  
  while (projs.next()) {
    System.out.println( "\n'" + projs.name() + "' Project Id:" 
                + projs.id() + " is owned by " +"'"+ projs.owner() +"'"
                + " start on "  
                + projs.start_date());
              
    // Notice the modules from the ProjIter are assigned to the module
    // iterator variable 

    mods = projs.modules();
    System.out.println ("Modules in this Project are : ");

    // Display Module details 

    while(mods.next()) { 
      System.out.println ("  "+ mods.moduleId() + " '"+ 
                                mods.moduleName() + "' owner is '" +
                                mods.moduleOwner()+"'" );
    }                    // end of modules 
    mods.close();
  }                      // end of projects 
  projs.close();
}
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ478"></a><div class="props_rev_3"><a id="GUID-DA6DA7F6-6743-4E59-B0A5-294FDEB204BB" name="GUID-DA6DA7F6-6743-4E59-B0A5-294FDEB204BB"></a><h4 id="JSQLJ-GUID-DA6DA7F6-6743-4E59-B0A5-294FDEB204BB" class="sect4">Selecting a VARRAY into a Host Expression</h4>
                  <div>
                     <div class="section">
                        <p>This section provides an example of selecting a VARRAY into a host expression. Presume the following SQL definitions:</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE PHONE_ARRAY IS VARRAY (10) OF varchar2(30)
/
/*** Create ADDRESS UDT ***/
CREATE TYPE ADDRESS AS OBJECT
( 
  street        VARCHAR(60),
  city          VARCHAR(30),
  state         CHAR(2),
  zip_code      CHAR(5)
)
/
/*** Create PERSON UDT containing an embedded ADDRESS UDT ***/
CREATE TYPE PERSON AS OBJECT
( 
  name    VARCHAR(30),
  ssn     NUMBER,
  addr    ADDRESS
)
/

CREATE TABLE  employees
( empnumber            INTEGER PRIMARY KEY,
  person_data     REF  person,
  manager         REF  person,
  office_addr          address,
  salary               NUMBER,
  phone_nums           phone_array
)
/
</pre><p>And presume that you created a <code class="codeph">PhoneArray</code> custom collection class to map from the <code class="codeph">PHONE_ARRAY</code> SQL type.
                        </p>
                        <p>The following method selects a row from this table, placing the data into a host variable of the <code class="codeph">PhoneArray</code> type:
                        </p><pre class="oac_no_warn" dir="ltr">private static void selectVarray() throws SQLException
{
  PhoneArray ph;
  #sql {select phone_nums into :ph from employees where empnumber=2001};
  System.out.println(
    "there are "+ph.length()+" phone numbers in the PhoneArray.  They are:");

  String [] pharr = ph.getArray();
  for (int i=0;i&lt;pharr.length;++i) 
    System.out.println(pharr[i]);
}
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ479"></a><div class="props_rev_3"><a id="GUID-03B5A7C7-CA42-4E3B-B57A-131DC6875B36" name="GUID-03B5A7C7-CA42-4E3B-B57A-131DC6875B36"></a><h4 id="JSQLJ-GUID-03B5A7C7-CA42-4E3B-B57A-131DC6875B36" class="sect4">Inserting a Row that Includes a VARRAY</h4>
                  <div>
                     <div class="section">
                        <p>This section provides an example of inserting data from a host expression into a VARRAY, using the same SQL definitions and custom collection class (<code class="codeph">PhoneArray</code>) as in the previous section.
                        </p>
                        <p>The following methods populate a <code class="codeph">PhoneArray</code> instance and use it as a host variable, inserting its data into a VARRAY in the database:
                        </p><pre class="oac_no_warn" dir="ltr">// creates a varray object of PhoneArray and inserts it into a new row
private static void insertVarray() throws SQLException
{
  PhoneArray phForInsert = consUpPhoneArray();
  // clean up from previous demo runs
  #sql {delete from employees where empnumber=2001};
  // insert the PhoneArray object
  #sql {insert into employees (empnumber, phone_nums)
        values(2001, :phForInsert)};
}

private static PhoneArray consUpPhoneArray()
{
  String [] strarr = new String[3];
  strarr[0] = "(510) 555.1111";
  strarr[1] = "(617) 555.2222";
  strarr[2] = "(650) 555.3333";
  return new PhoneArray(strarr);
}
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ480"></a><div class="props_rev_3"><a id="GUID-4A2FC8B8-81B2-4B3B-B0D4-1102A7F7F21A" name="GUID-4A2FC8B8-81B2-4B3B-B0D4-1102A7F7F21A"></a><h3 id="JSQLJ-GUID-4A2FC8B8-81B2-4B3B-B0D4-1102A7F7F21A" class="sect3">Serialized Java Objects</h3>
               <div>
                  <p>When writing and reading instances of Java objects to or from the database, it is sometimes advantageous to define a SQL object type that corresponds to your Java class and use the mechanisms of mapping custom Java classes described previously. This fully permits SQL queries on your Java objects.</p>
                  <p>In some cases, however, you may want to store Java objects "as-is" and retrieve them later, using database columns of the <code class="codeph">RAW</code> or <code class="codeph">BLOB</code> type. There are different ways to accomplish this:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can map a serializable Java class to <code class="codeph">RAW</code> or <code class="codeph">BLOB</code> columns by using a nonstandard extension to the type map facility or by adding a type code field to the serializable class, so that instances of the serializable class can be stored as <code class="codeph">RAW</code> or <code class="codeph">BLOB</code>.
                        </p>
                     </li>
                     <li>
                        <p>You can use the <code class="codeph">ORAData</code> facility to define a serializable wrapper class whose instances can be stored in <code class="codeph">RAW</code> or <code class="codeph">BLOB</code> columns.
                        </p>
                     </li>
                  </ul>
                  <p>Serializing in any of these ways works for any Oracle SQLJ run-time library.</p>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C">Serializing Java Classes to RAW and BLOB Columns</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-57A81264-D048-417F-8097-FDB9842DFAF0">SerializableDatum: an ORAData Implementation</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-13212854-72AA-451F-8F85-CD8602AAB6DB">SerializableDatum in SQLJ Applications</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-FCD7C967-355A-48CF-A2DA-2E0E13BDD3C4">SerializableDatum (Complete Class)</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ482"></a><a id="JSQLJ483"></a><a id="JSQLJ484"></a><a id="JSQLJ481"></a><div class="props_rev_3"><a id="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C" name="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C"></a><h4 id="JSQLJ-GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C" class="sect4">Serializing Java Classes to RAW and BLOB Columns</h4>
                  <div>
                     <p>If you want to store instances of Java classes directly in <code class="codeph">RAW</code> or <code class="codeph">BLOB</code> columns, then you must meet certain nonstandard requirements to specify the desired SQL-Java mapping. Note that in SQLJ statements the serializable Java objects can be transparently read and written as if they were built-in types.
                     </p>
                     <p>You have two options in specifying the SQL-Java type mapping:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Declare a type map in the connection context declaration and use this type map to specify mappings.</p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">public static final</code> field <code class="codeph">_SQL_TYPECODE</code> to specify the mapping.
                           </p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C__GUID-13105C6E-E3BC-4DDA-B83F-924EF821467F">Defining a Type Map for Serializable Classes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Consider an example where <code class="codeph">SAddress</code>, <code class="codeph">pack.SPerson</code>, and <code class="codeph">pack.Manager.InnerSPM</code>, where <code class="codeph">InnerSPM</code> is an inner class of <code class="codeph">Manager</code>, are serializable Java classes. In other words, these classes implement the <code class="codeph">java.io.Serializable</code> interface.
                        </p>
                        <p>You must use the classes only in statements that use explicit connection context instances of a declared connection context type, such as <code class="codeph">SerContext</code> in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">SAddress               a =...;
pack.SPerson           p =...;
pack.Manager.InnerSPM pm =...;
SerContext ctx = new SerContext(url,user,pwd,false);
#sql [ctx] { ... :a ... :OUT p ... :INOUT pm ... };
</pre><p>The following is required:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The connection context type must have been declared using the <code class="codeph">typeMap</code> attribute of a <code class="codeph">with</code> clause to specify an associated class implementing <code class="codeph">java.util.PropertyResourceBundle</code>. In the example, <code class="codeph">SerContext</code> may be declared as follows.
                              </p><pre class="oac_no_warn" dir="ltr">#sql public static context SerContext with (typeMap="SerMap");
</pre></li>
                           <li>
                              <p>The type map resource must provide nonstandard mappings from <code class="codeph">RAW</code> or <code class="codeph">BLOB</code> columns to the serializable Java classes. This mapping is specified with entries of the following form, depending on whether the Java class is mapped to a <code class="codeph">RAW</code> or a <code class="codeph">BLOB</code> column:
                              </p><pre class="oac_no_warn" dir="ltr">oracle-class.<span class="variable" translate="no">java_class_name</span>=JAVA_OBJECT RAW
oracle-class.<span class="variable" translate="no">java_class_name</span>=JAVA_OBJECT BLOB
</pre><p>The keyword <code class="codeph">oracle-class</code> marks this as an Oracle-specific extension. In the example, the <code class="codeph">SerMap.properties</code> resource file may contain the following entries:
                              </p><pre class="oac_no_warn" dir="ltr">oracle-class.SAddress=JAVA_OBJECT RAW
oracle-class.pack.SPerson=JAVA_OBJECT BLOB
oracle-class.packManager$InnerSPM=JAVA_OBJECT RAW
</pre><p>Although the period (.) separates package and class names, you <span class="italic">must</span> use the dollar sign ($) to separate an inner class name.
                              </p>
                           </li>
                        </ul>
                        <p>Note that this Oracle-specific extension can be placed in the same type map resource as standard <code class="codeph">SQLData</code> type map entries.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C__GUID-7F86B2A1-EBF8-4CC2-AB63-3D5F3845993F">Using Fields to Determine Mapping for Serializable Classes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>As an alternative to using a type map for a serializable class, you can use static fields in the serializable class to determine type mapping. You can add either of the following fields to a class that implements the <code class="codeph">java.io.Serializable</code> interface, such as the <code class="codeph">SAddress</code> and <code class="codeph">SPerson</code> classes from the preceding example:
                        </p><pre class="oac_no_warn" dir="ltr">public final static int _SQL_TYPECODE = oracle.jdbc.OracleTypes.RAW;
</pre><pre class="oac_no_warn" dir="ltr">public final static int _SQL_TYPECODE = oracle.jdbc.OracleTypes.BLOB;
</pre><div class="infoboxnote" id="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C__GUID-288B229B-EA5B-49BE-82EE-710F3E70AF45">
                           <p class="notep1">Note:</p>
                           <p>Using the type map facility supersedes manually adding the <code class="codeph">_SQL_TYPECODE</code> field to the class.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C__GUID-CAD8FCC7-B322-484C-9DBA-6305A3982F2F">Limitations on Serializing Java Objects</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You should be aware of the effect of serialization. If two objects, A and B, share the same object, C, then upon serialization and subsequent deserialization of A and B, each will point to its own clone of the object C. Sharing is broken.</p>
                        <p>In addition, note that for a given Java class, you can declare only one kind of serialization: either into <code class="codeph">RAW</code> or into <code class="codeph">BLOB</code>. The SQLJ translator can check only that the actual usage conforms to either <code class="codeph">RAW</code> or <code class="codeph">BLOB</code>.
                        </p>
                        <p><code class="codeph">RAW</code> columns are limited in size. You might experience run-time errors if the actual size of the serialized Java object exceeds the size of the column.
                        </p>
                        <p>Column size is much less restrictive for <code class="codeph">BLOB</code> columns. Writing a serialized Java object to a <code class="codeph">BLOB</code> column is supported by Oracle JDBC Oracle Call Interface (OCI) driver and Oracle JDBC Thin driver. Retrieving a serialized object from a <code class="codeph">BLOB</code> column is supported by all Oracle JDBC drivers since Oracle9<span class="italic">i</span>.
                        </p>
                        <p>Finally, treating serialized Java objects this way is an Oracle-specific extension and requires Oracle SQLJ run time as well as either the default Oracle-specific code generation (<code class="codeph">-codegen=oracle</code> during translation) or, for ISO standard code generation (<code class="codeph">-codegen=iso</code>), Oracle-specific profile customization. 
                        </p>
                        <p>10iProd: Note that future versions of Oracle might support SQL types that directly encapsulate Java serialized objects. These are described as JAVA_OBJECT SQL types in JDBC 2.0. At that point, you can replace each of the BLOB and RAW designations by the names of their corresponding JAVA_OBJECT SQL types, and you can drop the oracle- prefix on the entries.</p>
                        <div class="infoboxnote" id="GUID-E4E468F9-16AE-44FA-83E8-B9F40A487F3C__GUID-427AA3C2-4FF2-4001-939B-DA07D0969E16">
                           <p class="notep1">Note:</p>
                           <p>The implementation of this particular serialization mechanism does not use JDBC type maps. The map (to <code class="codeph">BLOB</code> or to <code class="codeph">RAW</code>) is hardcoded in the Oracle profile customization at translation time, or is generated directly into Java code.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ485"></a><div class="props_rev_3"><a id="GUID-57A81264-D048-417F-8097-FDB9842DFAF0" name="GUID-57A81264-D048-417F-8097-FDB9842DFAF0"></a><h4 id="JSQLJ-GUID-57A81264-D048-417F-8097-FDB9842DFAF0" class="sect4">SerializableDatum: an ORAData Implementation</h4>
                  <div>
                     <div class="section">
                        <p><span class="q">"<a href="objects-collections-and-OPAQUE-types.html#GUID-1F822A17-F41C-4994-95BB-886397ACFAE3">Additional Uses for ORAData Implementations</a>"</span> includes examples of situations where you might want to define a custom Java class that maps to some <code class="codeph">oracle.sql.*</code> type other than <code class="codeph">oracle.sql.STRUCT</code>, <code class="codeph">oracle.sql.REF</code>, or <code class="codeph">oracle.sql.ARRAY</code>.
                        </p>
                        <p>An example of such a situation is if you want to serialize and deserialize Java objects into and out of <code class="codeph">RAW</code> fields, with a custom Java class that maps to the <code class="codeph">oracle.sql.RAW</code> type. This could apply equally to <code class="codeph">BLOB</code> fields, with a custom Java class that maps to the <code class="codeph">oracle.sql.BLOB</code> type.
                        </p>
                        <p>This section presents an example of such an application, creating a class, <code class="codeph">SerializableDatum</code>, that implements the <code class="codeph">ORAData</code> interface and follows the general form of custom Java classes. The example starts with a step-by-step approach to the development of <code class="codeph">SerializableDatum</code>, followed by the complete sample code.
                        </p>
                        <div class="infoboxnote" id="GUID-57A81264-D048-417F-8097-FDB9842DFAF0__GUID-5AC9D3E6-9A06-4C30-93D6-E3E04AEE81BE">
                           <p class="notep1">Note:</p>
                           <p>This application uses classes from the <code class="codeph">java.io</code>, <code class="codeph">java.sql</code>, <code class="codeph">oracle.sql</code>, and <code class="codeph">oracle.jdbc</code> packages. The import statements are not shown here.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Begin with a skeleton of the class.</span><div><pre class="oac_no_warn" dir="ltr">public class SerializableDatum implements ORAData
{
   // <span class="italic">Client methods for constructing and accessing the Java object</span>

   public Datum toDatum(java.sql.Connection c) throws SQLException
   {
      // <span class="italic">Implementation of toDatum()</span>
   }

   public static ORADataFactory getORADataFactory()
   {
      return FACTORY;
   }

   private static final ORADataFactory FACTORY =
           // <span class="italic">Implementation of an ORADataFactory for SerializableDatum</span>

   // <span class="italic">Construction of SerializableDatum from oracle.sql.RAW</span>

   public static final int _SQL_TYPECODE = OracleTypes.RAW;
}
</pre><p><code class="codeph">SerializableDatum</code> does not implement the <code class="codeph">ORADataFactory</code> interface, but its <code class="codeph">getORADataFactory()</code> method returns a static member that implements this interface.
                              </p>
                              <p>The <code class="codeph">_SQL_TYPECODE</code> is set to <code class="codeph">OracleTypes.RAW</code> because this is the data type being read from and written to the database. The SQLJ translator needs this type code information in performing online type-checking to verify compatibility between the user-defined Java type and the SQL type.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Define client methods that perform the following:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Create a <code class="codeph">SerializableDatum</code> object.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Populate a <code class="codeph">SerializableDatum</code> object.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Retrieve data from a <code class="codeph">SerializableDatum</code> object.
                                    </p>
                                 </li>
                              </ul><pre class="oac_no_warn" dir="ltr">// Client methods for constructing and accessing a SerializableDatum

private Object m_data;
public SerializableDatum()
{
   m_data = null;
}
public void setData(Object data)
{
   m_data = data;
}
public Object getData()
{
   return m_data;
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Implement a <code class="codeph">toDatum()</code> method that serializes data from a <code class="codeph">SerializableDatum</code> object to an <code class="codeph">oracle.sql.RAW</code> object. The implementation of <code class="codeph">toDatum()</code> must return a serialized representation of the object in the <code class="codeph">m_data</code> field as an <code class="codeph">oracle.sql.RAW</code> instance.</span><div><pre class="oac_no_warn" dir="ltr">// Implementation of toDatum()

try {
   ByteArrayOutputStream os = new ByteArrayOutputStream();
   ObjectOutputStream oos = new ObjectOutputStream(os);
   oos.writeObject(m_data);
   oos.close();
   return new RAW(os.toByteArray());
} catch (Exception e) {
  throw new SQLException("SerializableDatum.toDatum: "+e.toString()); }
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Implement data conversion from an <code class="codeph">oracle.sql.RAW</code> object to a <code class="codeph">SerializableDatum</code> object. This step deserializes the data.</span><div><pre class="oac_no_warn" dir="ltr">// Constructing SerializableDatum from oracle.sql.RAW

private SerializableDatum(RAW raw) throws SQLException
{
   try {
      InputStream rawStream = new ByteArrayInputStream(raw.getBytes());
      ObjectInputStream is = new ObjectInputStream(rawStream);
      m_data = is.readObject();
      is.close();
   } catch (Exception e) {
     throw new SQLException("SerializableDatum.create: "+e.toString()); }
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Implement an <code class="codeph">ORADataFactory</code>. In this case, it is implemented as an anonymous class.</span><div><pre class="oac_no_warn" dir="ltr">// Implementation of an ORADataFactory for SerializableDatum

new ORADataFactory()
{
   public ORAData create(Datum d, int sqlCode) throws SQLException
   {
      if (sqlCode != _SQL_TYPECODE)
      {
         throw new SQLException
                   ("SerializableDatum: invalid SQL type "+sqlCode);
      }
      return (d==null) ? null : new SerializableDatum((RAW)d);
   }
};
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="JSQLJ487"></a><a id="JSQLJ488"></a><a id="JSQLJ486"></a><div class="props_rev_3"><a id="GUID-13212854-72AA-451F-8F85-CD8602AAB6DB" name="GUID-13212854-72AA-451F-8F85-CD8602AAB6DB"></a><h4 id="JSQLJ-GUID-13212854-72AA-451F-8F85-CD8602AAB6DB" class="sect4">SerializableDatum in SQLJ Applications</h4>
                  <div>
                     <p>Given the <code class="codeph">SerializableDatum</code> class created in the preceding section, this section shows how to use an instance of it in a SQLJ application, both as a host variable and as an iterator column.
                     </p>
                     <p>Presume the following table definition:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE PERSONDATA (NAME VARCHAR2(20) NOT NULL, INFO RAW(2000));</pre><div class="section">
                        <p class="subhead3" id="GUID-13212854-72AA-451F-8F85-CD8602AAB6DB__GUID-D7DFEB61-72D8-4391-BC8B-0D678CB18099">SerializableDatum as Host Variable</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The following uses a <code class="codeph">SerializableDatum</code> instance as a host variable:
                        </p><pre class="oac_no_warn" dir="ltr">...
SerializableDatum pinfo = new SerializableDatum();
pinfo.setData (
   new Object[] {"Some objects", new Integer(51), new Double(1234.27) } );
String pname = "MILLER";
#sql { INSERT INTO persondata VALUES(:pname, :pinfo) };
...
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13212854-72AA-451F-8F85-CD8602AAB6DB__GUID-7D5AB996-FA5A-460A-9DC8-90FDEB946214">SerializableDatum in Iterator Column</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Following is an example of using <code class="codeph">SerializableDatum</code> as a named iterator column:
                        </p><pre class="oac_no_warn" dir="ltr">#sql iterator PersonIter (SerializableDatum info, String name);

...
PersonIter pcur;
#sql pcur = { SELECT * FROM persondata WHERE info IS NOT NULL };
while (pcur.next())
{
   System.out.println("Name:" + pcur.name() + " Info:" + pcur.info());
}
pcur.close();
...
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ489"></a><div class="props_rev_3"><a id="GUID-FCD7C967-355A-48CF-A2DA-2E0E13BDD3C4" name="GUID-FCD7C967-355A-48CF-A2DA-2E0E13BDD3C4"></a><h4 id="JSQLJ-GUID-FCD7C967-355A-48CF-A2DA-2E0E13BDD3C4" class="sect4">SerializableDatum (Complete Class)</h4>
                  <div>
                     <p>The following is complete code for the <code class="codeph">SerializableDatum</code> class, which was developed in step-by-step fashion in the preceding sections.
                     </p><pre class="oac_no_warn" dir="ltr">import java.io.*;
import java.sql.*;
import oracle.sql.*;
import oracle.jdbc.*;

public class SerializableDatum implements ORAData
{
// Client methods for constructing and accessing a SerializableDatum

   private Object m_data;
   public SerializableDatum()
   {
      m_data = null;
   }
   public void setData(Object data)
   {
      m_data = data;
   }
   public Object getData()
   {
      return m_data;
   }

// Implementation of toDatum()

   public Datum toDatum(Connection c) throws SQLException
   {

      try {
         ByteArrayOutputStream os = new ByteArrayOutputStream();
         ObjectOutputStream oos = new ObjectOutputStream(os);
         oos.writeObject(m_data);
         oos.close();
         return new RAW(os.toByteArray());
      } catch (Exception e) {
        throw new SQLException("SerializableDatum.toDatum: "+e.toString()); }
   }

   public static ORADataFactory getORADataFactory()
   {
      return FACTORY;
   }

// Implementation of an ORADataFactory for SerializableDatum

   private static final ORADataFactory FACTORY =
   
      new ORADataFactory()
      {
         public ORAData create(Datum d, int sqlCode) throws SQLException
         {
            if (sqlCode != _SQL_TYPECODE)
            {
               throw new SQLException(
                  "SerializableDatum: invalid SQL type "+sqlCode);
            }
            return (d==null) ? null : new SerializableDatum((RAW)d);
         }
      };

// Constructing SerializableDatum from oracle.sql.RAW

   private SerializableDatum(RAW raw) throws SQLException
   {
      try {
         InputStream rawStream = new ByteArrayInputStream(raw.getBytes());
         ObjectInputStream is = new ObjectInputStream(rawStream);
         m_data = is.readObject();
         is.close();
      } catch (Exception e) {
        throw new SQLException("SerializableDatum.create: "+e.toString()); }
   }

   public static final int _SQL_TYPECODE = OracleTypes.RAW;
}
</pre></div>
               </div>
            </div><a id="JSQLJ490"></a><div class="props_rev_3"><a id="GUID-14DEE7DC-EA4A-4754-BF44-D1036E1CFB55" name="GUID-14DEE7DC-EA4A-4754-BF44-D1036E1CFB55"></a><h3 id="JSQLJ-GUID-14DEE7DC-EA4A-4754-BF44-D1036E1CFB55" class="sect3">Weakly Typed Objects, References, and Collections</h3>
               <div>
                  <p>Weakly typed objects, references, and collections are supported by SQLJ. Their use is not generally recommended, and there are some specific restrictions, but in some circumstances they can be useful. For example, you might have generic code that can use "any <code class="codeph">STRUCT</code>" or "any <code class="codeph">REF</code>".
                  </p>
                  <p>This section covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-D7354A29-368B-4DB4-A7A5-49C0C0905006">Support for Weakly Typed Objects_ References_ and Collections</a></p>
                     </li>
                     <li>
                        <p><a href="objects-collections-and-OPAQUE-types.html#GUID-4EF76552-5997-4966-970E-1947416861D3">Restrictions on Weakly Typed Objects_ References_ and Collections</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ491"></a><div class="props_rev_3"><a id="GUID-D7354A29-368B-4DB4-A7A5-49C0C0905006" name="GUID-D7354A29-368B-4DB4-A7A5-49C0C0905006"></a><h4 id="JSQLJ-GUID-D7354A29-368B-4DB4-A7A5-49C0C0905006" class="sect4">Support for Weakly Typed Objects, References, and Collections</h4>
                  <div>
                     <div class="section">
                        <p>In using Oracle objects, references, or collections in a SQLJ application, you have the option of using generic and weakly typed <code class="codeph">java.sql</code> or <code class="codeph">oracle.sql</code> instances instead of the strongly typed custom object, reference, and collection classes that implement the <code class="codeph">ORAData</code> interface or the strongly typed custom object classes that implement the <code class="codeph">SQLData</code> interface. Note that if you use <code class="codeph">SQLData</code> implementations for your custom object classes, then you will have no choice but to use weakly typed custom reference instances.
                        </p>
                        <p>The following weak types can be used for iterator columns or host expressions in the Oracle SQLJ implementation:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">java.sql.Struct</code> or <code class="codeph">oracle.sql.STRUCT</code> for objects
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">java.sql.Ref</code> or <code class="codeph">oracle.sql.REF</code> for object references
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">java.sql.Array</code> or <code class="codeph">oracle.sql.ARRAY</code> for collections
                              </p>
                           </li>
                        </ul>
                        <p>In host expressions, they are supported as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>As input host expressions</p>
                           </li>
                           <li>
                              <p>As output host expressions in an <code class="codeph">INTO</code>-list
                              </p>
                           </li>
                        </ul>
                        <p>Using these weak types is not generally recommended, however, as you would lose all the advantages of the strongly typed paradigm that SQLJ offers.</p>
                        <p>Each attribute in a <code class="codeph">STRUCT</code> object or each element in an <code class="codeph">ARRAY</code> object is stored in an <code class="codeph">oracle.sql.Datum</code> object, with the underlying data being in the form of the appropriate <code class="codeph">oracle.sql.*</code> subtype of <code class="codeph">Datum</code>, such as <code class="codeph">oracle.sql.NUMBER</code> or <code class="codeph">oracle.sql.CHAR</code>. Attributes in a <code class="codeph">STRUCT</code> object are nameless. Because of the generic nature of the <code class="codeph">STRUCT</code> and <code class="codeph">ARRAY</code> classes, SQLJ cannot perform type checking where objects or collections are written to or read from instances of these classes.
                        </p>
                        <p>It is generally recommended that you use custom Java classes for objects, references, and collections.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ492"></a><div class="props_rev_3"><a id="GUID-4EF76552-5997-4966-970E-1947416861D3" name="GUID-4EF76552-5997-4966-970E-1947416861D3"></a><h4 id="JSQLJ-GUID-4EF76552-5997-4966-970E-1947416861D3" class="sect4">Restrictions on Weakly Typed Objects, References, and Collections</h4>
                  <div>
                     <div class="section">
                        <p>A weakly typed object (<code class="codeph">Struct</code> or <code class="codeph">STRUCT</code> instance), reference (<code class="codeph">Ref</code> or <code class="codeph">REF</code> instance), or collection (<code class="codeph">Array</code> or <code class="codeph">ARRAY</code> instance) <span class="italic">cannot</span> be used in host expressions in the following circumstances:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">IN</code> parameter if null
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OUT</code> or <code class="codeph">INOUT</code> parameter in a stored procedure or function call
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OUT</code> parameter in a stored function result expression
                              </p>
                           </li>
                        </ul>
                        <p>They cannot be used in these ways, because there is no way to know the underlying SQL type name, such as <code class="codeph">Person</code>, which is required by Oracle JDBC driver to materialize an instance of a user-defined type in Java.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ493"></a><div class="props_rev_3"><a id="GUID-526F6AD9-AD62-4ED0-BCAB-5C2F8ED36FE4" name="GUID-526F6AD9-AD62-4ED0-BCAB-5C2F8ED36FE4"></a><h3 id="JSQLJ-GUID-526F6AD9-AD62-4ED0-BCAB-5C2F8ED36FE4" class="sect3">Oracle OPAQUE Types</h3>
               <div>
                  <p>Oracle OPAQUE types are abstract data types. With data implemented as simply a series of bytes, the internal representation is not exposed. Typically an OPAQUE type will be provided by Oracle, not implemented by a customer.</p>
                  <p>OPAQUE types are similar in some basic ways to object types, with similar concepts of static methods, instances, and instance methods. Typically, only the methods supplied with an OPAQUE type allow you to manipulate the state and internal byte representation. In Java, an OPAQUE type can be represented as <code class="codeph">oracle.sql.OPAQUE</code> or as a custom class implementing the <code class="codeph">oracle.sql.ORAData</code> interface. On the client-side, Java code can be implemented to manipulate the bytes, assuming the byte pattern is known.
                  </p>
                  <p>A key example of an OPAQUE type is <code class="codeph">XMLType</code>, provided with Oracle Database 12<span class="italic">c </span>Release 2 (12.2). This Oracle-provided type facilitates handling XML data natively in the database.
                  </p>
                  <p><code class="codeph">SYS.XMLType</code> offers the following features, exposed through the Java <code class="codeph">oracle.xdb.XMLType</code> class:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>It can be used as the data type of a column in a table or view. <code class="codeph">XMLType</code> can store any content but is designed to optimally store XML content. An instance of it can represent an XML document in SQL.
                        </p>
                     </li>
                     <li>
                        <p>It has a SQL API with built-in member functions that operate on XML content. For example, you can use <code class="codeph">XMLType</code> functions to create, query, extract, and index XML data stored in an Oracle Database 12<span class="italic">c </span>Release 1 (12.1) instance.
                        </p>
                     </li>
                     <li>
                        <p>It can be used in stored procedures for parameters, return values, and variables.</p>
                     </li>
                     <li>
                        <p>Its functionality is also available through APIs provided in PL/SQL, Java, and C (OCI).</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-526F6AD9-AD62-4ED0-BCAB-5C2F8ED36FE4__GUID-F648856C-579D-4A37-A61E-A85176A1790F">
                     <p class="notep1">See Also:</p>
                     <p><a href="../adxdb/XML-DB-basics.html#ADXDB-GUID-8611495B-A091-4B11-9E65-E8AD20D50D97" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='03624.PRCS-01000.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>PRCS-01000 to PRCS-01172</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Error Messages">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Error Messages">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-error-messages.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T07:32:34-07:00">
      <meta name="dcterms.title" content="Database Error Messages">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95938-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="PRCR-01000.html" title="Previous" type="text/html">
      <link rel="next" href="PRCT-01000.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ERRMG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PRCR-01000.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="PRCT-01000.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Error Messages</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> PRCS-01000 to PRCS-01172</li>
            </ol>
            <a id="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686" name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686"></a>
            
            <h2 id="ERRMG-GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686" class="sect2"><span class="enumeration_chapter">115 </span> PRCS-01000 to PRCS-01172
            </h2>
         </header>
         <div class="ind">
            <div>
               <dl>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F0C1386F-C102-4D9C-8A92-F83D2A904729">
                        <!-- --></a>
PRCS-01000: Failed to get enabled status of {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to check whether a server is enabled failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-7E605B41-7D52-49B9-9E4E-CAB22D37D2B2">
                        <!-- --></a>
PRCS-01001: Failed to enable {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to enable the specified server failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A47AED4D-3E03-4FB9-960B-1B2A3E27D4C3">
                        <!-- --></a>
PRCS-01002: Failed to disable {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to disable the specified server failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-7C6C0FCF-3151-4CD7-8656-436AD5FD0C96">
                        <!-- --></a>
PRCS-01005: Failed to create server {0} 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to create the specified server failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B53F513D-097D-46D6-82DA-4A935973225A">
                        <!-- --></a>
PRCS-01006: Failed to get server for node {0} 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get server for the specified node failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-D97715DF-E8BC-49BB-8A81-16737E637F47">
                        <!-- --></a>
PRCS-01007: Server pool {0} already exists
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified server pool already exists.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-41CF3E1F-BD63-42DF-B923-1E74E22DEFA9">
                        <!-- --></a>
PRCS-01008: Server pool {0} does not exist
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified server pool does not exist.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the srvctl command to create server pool.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-EEE490EF-7BE0-4E8B-985D-A74A87CEA047">
                        <!-- --></a>
PRCS-01009: Failed to create server pool {0} 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to create specified server pool failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A44D0882-6953-45D4-B950-8DDEC08892C9">
                        <!-- --></a>
PRCS-01010: Failed to get {0} of server pool {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get the attribute value of the specified server pool failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-EC811F33-FFE3-48A7-B680-796A362BDA57">
                        <!-- --></a>
PRCS-01011: Failed to modify server pool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the specified server pool failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F459E423-DE92-474D-94B9-A0985ACD6DA8">
                        <!-- --></a>
PRCS-01012: Failed to remove server pool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to unregister server pool. This message is followed by the reason for failure.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry after resolving the issue reported in the failure message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-2FE8F9E3-0810-43F4-AF15-6EB6F5132EC9">
                        <!-- --></a>
PRCS-01013: Failed to look up server pool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get the specified server pool failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B43B06CB-931C-415F-BD68-14DECA107650">
                        <!-- --></a>
PRCS-01014: Server {0} is already part of server pool {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add the server as a candidate for the specified server pool failed because the server is already in the pool's SERVER_NAME attribute.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
No action is needed.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-4418D88B-91B9-4DAC-A68B-60F850C33198">
                        <!-- --></a>
PRCS-01015: Server {0} is not part of server pool {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to remove the server from the SERVER_NAMES attribute of the server pool failed because the specified server is not in the pool's SERVER_NAME attribute.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Add the server to the server pool.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A8DCF726-7F2B-4B9F-8483-9BB2FD121903">
                        <!-- --></a>
PRCS-01016: Failed to resolve Single Client Access Name {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to resolve specified Single Client Access Name to a list of IP addresses failed because Single Client Access Name could not be resolved in DNS using nslookup or using other lookup methods.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check whether the specified Single Client Access Name is correct. Review the underlying error messages that provide the details of which resource failed to resolve. Check the cause and action for the individual error. If Single Client Access Name should be resolved in DNS, check the configuration of Single Client Access Name in DNS.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-3C225B12-CE0C-4FAA-80C9-6237BBF45ED5">
                        <!-- --></a>
PRCS-01017: Failed to configure Single Client Access Name {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add cluster configuration for Single Client Access Name failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provide the details of which resources failed to create. Check the cause and action for the individual resource creation failure.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-AE865F6F-A6C6-4BA9-9E5C-73874B9BBB67">
                        <!-- --></a>
PRCS-01018: Failed to add cluster configuration for Single Client Access Name listener {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to configure Single Client Access Name listener failed because endpoints were not specified correctly or other reasons.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provide the details of which resources failed to create. Check the cause and action for the individual resource creation failure. If the endpoints were not specified correctly, correct endpoints.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-DCF6ED49-5A3B-4099-BCCF-DDCAB313CA39">
                        <!-- --></a>
PRCS-01019: Failed to remove the configuration for Single Client Access Name listener {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to remove the configuration of Single Client Access Name listener failed because other resources depended on it or other reasons.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provide the details of which resources failed to remove. Stop Single Client Access Name listener resource before removing it. Can consider using force flag to remove Single Client Access Name listener resources if no other resources depend on it.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-07832A5F-9AAE-493C-BCE8-01C467D86FC6">
                        <!-- --></a>
PRCS-01020: Failed to enable Single Client Access Name resources {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to enable Single Client Access Name resources failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provide the details of which resources failed to enable. Check the cause and action for the individual resource creation failure.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-47D7C2D7-75FE-455B-BFDF-D51A50DAB4BA">
                        <!-- --></a>
PRCS-01021: Failed to disable Single Client Access Name resources {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to disable Single Client Access Name resources failed because current user did not have sufficient privileges to perform this operation or other reasons.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provide the details of which resources failed to disable. Check the cause and action for the individual resource failure. Make sure that the user has root privileges on Linux/Unix's and Administrator on Windows.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-7186534E-2290-49DE-A24E-13A06677269C">
                        <!-- --></a>
PRCS-01022: Failed to start Single Client Access Name resources {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to start Single Client Access Name resources failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provides the details of which resources failed to start.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-056D2A5E-AF2C-41C8-ADE9-F22D7463F2C9">
                        <!-- --></a>
PRCS-01023: Failed to stop Single Client Access Name resources {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to stop Single Client Access Name resources failed because Single Client Access Name listeners were not stopped/relocated or other reasons.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provides the details of which resources failed to stop. Check the cause and action for the individual resource creation failure. Stop Single Client Access Name listeners first or use force flag to stop Single Client Access Name Virtual Internet Protocol(VIP) resources if no other resources depend on them.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F77AD2A9-C929-4463-8FAC-2AB0504FD423">
                        <!-- --></a>
PRCS-01024: Failed to remove Single Client Access Name Virtual Internet Protocol(VIP) resources {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Could not remove Single Client Access Name Virtual Internet Protocol(VIP) resources because the resources are running or Single Client Access Name listeners depend on or other reasons.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provides the details of which resources failed to remove. Stop the Single Client Access Name VIPs and Single Client Access Name listeners, then remove Single Client Access Name listeners. Or use force flag to remove Single Client Access Name Virtual Internet Protocol(VIP) resources if no other resources depend on them.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-8C11CB53-DBA9-453A-80B9-18B6B4969148">
                        <!-- --></a>
PRCS-01025: Could not find any Single Client Access Name (SCAN) Virtual Internet Protocol (VIP) resources using filter {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the SCAN VIP resources failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the resource name supplied is correct. Examine the accompanying error messages for additional details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-C51CB41E-970F-414A-A6E3-00D10734B947">
                        <!-- --></a>
PRCS-01026: Could not find any Single Client Access Name (SCAN) listener resources using filter {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the SCAN listener resources failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the resource name supplied is correct. Examine the accompanying error messages for additional details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-D9268AE9-1C71-4DDC-BC8E-B67FFD40C277">
                        <!-- --></a>
PRCS-01027: Could not find any Single Client Access Name listener with ordinal number {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Could not find the Single Client Access Name listener for specified ordinal number.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the command 'srvctl config scan_listener' to check available ordinal number.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A0C7AAFE-1051-4DC7-A33C-0D89322A756D">
                        <!-- --></a>
PRCS-01028: Single Client Access Name (SCAN) listener resources already exist on network {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Single Client Access Name listeners were already created on the specified network.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the command 'srvctl modify scan_listener' to modify attributes if needed.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-C2AD7965-B1D2-4AD1-987D-61133BBE5493">
                        <!-- --></a>
PRCS-01031: Failed to modify Single Client Access Name listeners using endpoints {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify Single Client Access Name listeners failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check if the endpoints specified are valid.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-6C6D487B-829F-498F-BF84-E19A07EB0E37">
                        <!-- --></a>
PRCS-01032: No server pool was found that matches the query {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to find server pools that match the given query found no matching server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Either configure a server pool via the command 'srvctl add srvpool' or modify existing a server pool via the command 'srvctl modify srvpool' to match the query and retry the request.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-96A1AE1C-B980-4CB4-99A7-1AB9EE9969D3">
                        <!-- --></a>
PRCS-01034: Failed to modify Single Client Access Name {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to modify the configuration of Single Client Access Name because the endpoints were not specified correctly or extra Single Client Access Name VIPs could not be removed or other reasons.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the underlying error messages that provides the details of which resources failed to modify. Resolve the reported problem and retry. If to modify the endpoints, specify correct endpoints. If to update the number of Single Client Access Name VIPs, stop the Single Client Access Name listeners that depend on.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B548011A-8D66-471B-A6CF-86DF044DEBBE">
                        <!-- --></a>
PRCS-01035: Invalid number of TCP ports ({0}) for SCAN Listener
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Either no port was specified, or more than one port was specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify only one port number for TCP protocol for SCAN listener.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-593CE132-7275-4377-932B-6EA12EE1AC5E">
                        <!-- --></a>
PRCS-01037: Single Client Access Name (SCAN) Virtual Internet Protocol (VIP) resources already exist on network {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to add SCAN VIPs when SCAN VIPs were already configured. Only one SCAN per cluster network can be configured.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Remove the existing SCAN on the given network and add a new SCAN. Or, modify the SCAN to use a new SCAN name or have the existing SCAN name map to different SCAN VIPs.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-45410219-576A-4D14-BBB1-5ED97122C674">
                        <!-- --></a>
PRCS-01038: Failed to find Single Client Access Name Virtual Internet Protocol(VIP) associated with listener {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Cannot find Single Client Access Name Virtual Internet Protocol(VIP) associated with the given listener.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages to determine how to respond.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-FD0CA21C-5A7B-4EDB-80CB-3FE70C99A85E">
                        <!-- --></a>
PRCS-01039: Failed to find Single Client Access Name listener associated with the given Virtual Internet Protocol(VIP) {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Cannot find Single Client Access Name listener associated with the given Virtual Internet Protocol(VIP).

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages to determine how to respond.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-849BB2A5-4608-4BA5-A2F4-8805974BEFDC">
                        <!-- --></a>
PRCS-01040: User {0} does not have CRS administrator role
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified user did not have CRS administrator role.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Grant CRS administrator role to the user by using the command 'crsctl add crs administrator -u &lt;user_name&gt;' and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B3D82D39-3BBB-4209-9EB6-7BD302047614">
                        <!-- --></a>
PRCS-01041: Invalid builtin server pool name {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified builtin server pool name is invalid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Provide a valid builtin server pool name. It can be Generic or Free.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B555E75B-EDE0-49D0-9682-8A4373AD65D9">
                        <!-- --></a>
PRCS-01042: Server pool {0} is not hosting any database currently
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A database could not be found referencing the given server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create the database configuration using the command 'srvctl add database ... -serverpool &lt;server_pool&gt;' and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-78215FAC-75D9-4F7B-9168-6DF991A7C4CB">
                        <!-- --></a>
PRCS-01043: Server pool {0} is not hosting any database service currently
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A service could not be found referencing the given server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create the service configuration using the command 'srvctl add service ... -serverpool &lt;server_pool&gt;' and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-121CEC72-AE49-48B6-8263-94E79EAF4380">
                        <!-- --></a>
PRCS-01046: Name {0} is not valid
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Specified name was not valid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a valid string name, and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B075CAE5-AD2E-4F94-90C5-FDE5BBC419CB">
                        <!-- --></a>
PRCS-01047: Minimum size of {0} is not valid
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Specified minimum size was not valid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify minimum size to be an integer equal to or greater than zero and less than the maximum size (other than -1), and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-EE0A6204-D341-4E73-B741-75CD18FDF129">
                        <!-- --></a>
PRCS-01048: Maximum size of {0} is not valid
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Specified maximum size was not valid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify maximum size to be an integer greater than or equal to -1 and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-6876EA42-A565-47AE-8980-6AF31BC46C5C">
                        <!-- --></a>
PRCS-01049: Importance of {0} is not valid
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Specified importance was not valid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify importance value to be an integer greater than or equal to 0 and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-4B703C53-94F6-40BB-B67C-4FC38C4FA004">
                        <!-- --></a>
PRCS-01050: Could not add GNS VIP {0} because another one with name {1} already exists
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The name of the GNS VIP to be added matches one that already existed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify another name.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-9C56BDF3-5D47-458F-A0F4-B8EAC98151CC">
                        <!-- --></a>
PRCS-01051: Could not add GNS VIP using network {0} because registered another one using network {1} already exists
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The network specified for the GNS VIP to be added matches one that already existed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify another network.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-609025E4-1805-4B1F-A372-F590D4158D51">
                        <!-- --></a>
PRCS-01053: failed to resolve address for Grid Naming Service VIP {0}:\n{1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The address specified for the GNS VIP could not be resolved.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a valid address.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E27B6800-921F-45A3-8788-BB3F1ECBCDC7">
                        <!-- --></a>
PRCS-01054: Failed to configure VIP for Grid Naming Service VIP {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The creation of the GNS VIP failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error message for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-7B5E0316-E8D8-4642-8C41-8105C8226E97">
                        <!-- --></a>
PRCS-01055: Failed to modify Grid Naming Service VIP {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The modification of the GNS VIP failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error message for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-C258ABB6-7AAF-4E5E-B768-FB784DA88C40">
                        <!-- --></a>
PRCS-01056: Could not find resources for Grid Naming Service Virtual Internet Protocol(VIP) {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified GNS VIP did not exist.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a valid GNS VIP name.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-6BB43CC0-4853-489A-B48A-C872C6F117D3">
                        <!-- --></a>
PRCS-01057: INTERNAL ERROR: no attributes specified.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
No attributes to modify GNS with were passed to a method.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
This is an internal error. Please contact Oracle Customer Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-958E98C9-FEA9-45D2-ADBB-FF7B31650F36">
                        <!-- --></a>
PRCS-01058: INTERNAL ERROR: unsupported query type: "${0}"
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The type of query to be made to GNS is unrecognized.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
This is an internal error and should not be visible. Please contact Oracle Customer Support.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B4DF41F1-994D-4E40-A0F5-0B085E7A3BA1">
                        <!-- --></a>
PRCS-01059: Failed to get sub-server pools of server pool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to look up PARENT_POOLS attribute of server pools containing the given server pool name. Ensure that current user has read permissions on the given server pool and its sub-server pools.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Grant read permissions on the given server pool and its sub-server pools.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E5ECF05A-DF8E-4160-AE02-46456C2C4797">
                        <!-- --></a>
PRCS-01060: Failed to relocate servers {0} into server pool {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to relocate servers into the given server pool. This message may be accompanied by others providing additional details. A likely cause is violation of defined configuration attributes such as pool MIN_SIZE, SERVER_NAMES etc.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If the problem stems from violating configuration attributes, either modify the attributes or reformulate the request. Otherwise, contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-ED4913E9-2E8D-4FD0-9E77-31FE7D687386">
                        <!-- --></a>
PRCS-01061: Failed to find running database instances hosted by server pool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to find running database instances hosted by the servers in the given server pool. This message is accompanied by others providing additional details. A likely cause is that current user may not have permissions to query profiles of databases hosted by the given server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If lack of permissions is the cause of this failure, then use the command 'srvctl config <span class="variable" translate="no">object</span> -a' to find the current owner of entity and retry the query as that owner user. Otherwise, contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-EDF7EDFF-D72A-4880-B682-FC9959A3446D">
                        <!-- --></a>
PRCS-01062: Failed to determine whether server pool {0} has any parents or children
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to find parents or children of the given server pool. A likely cause is that current user may not have permissions to query profile of given server pool or profiles of other server pools whose PARENT_POOLS attribute contains this server pool name.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If lack of permissions is the cause of this failure, then use the command 'srvctl config serverpool <span class="variable" translate="no">serverpool</span> -a' to find the current owner of the server pool and retry the query as that owner user. Otherwise, contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-97C07CEF-C609-4B84-B8B3-973B16744418">
                        <!-- --></a>
PRCS-01063: Server pool {0} with minimum size {1}, maximum size {2}, importance {3} and server list ({4}) can not be created
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Specified server pool cannot be created because of the reason provided by an accompanying exception message.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Respond based on the accompanying exception message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-917CC20A-A15A-4ED7-AF95-A6853EB615B2">
                        <!-- --></a>
PRCS-01064: Failed to find server pools using filter {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Attempt to look up server pool entitites using given filter failed. A likely cause is that current user does not have permissions to query server pool entities

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If lack of permissions is the cause of this failure, then use the command 'srvctl config serverpool -a' to find the current owner of the server pools and retry the query as that owner user. Otherwise, contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-0C08EA7C-846E-489A-8B74-C351C22800CE">
                        <!-- --></a>
PRCS-01065: GNS server is not configured in this cluster.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A command that applies only to a GNS server cluster was rejected because this cluster has not been configured as a GNS server.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If GNS server is to run in this cluster, use the 'srvctl add gns' command to configure it.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-4340099A-F134-46F5-A61D-7DA340104509">
                        <!-- --></a>
PRCS-01066: Server group {0} with  server list ({1}) can not be created
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Specified server group cannot be created because of the reason provided by an accompanying exception message.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Respond based on the accompanying exception message.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-690D1D8F-06D7-414B-938A-EB6A56DE4492">
                        <!-- --></a>
PRCS-01067: Failed to find online database instances hosted by server pool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Failed to find online database instances hosted by the servers in the given server pool. This message is accompanied by others providing additional details. A likely cause is that current user may not have permissions to query profiles of databases hosted by the given server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
If lack of permissions is the cause of this failure, then use the command 'srvctl config <span class="variable" translate="no">object</span> -a' to find the current owner of the entity and retry the query as that owner user. Otherwise, contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-036C12A6-46E1-490E-BD48-E07E6AB13D65">
                        <!-- --></a>
PRCS-01068: Oracle Clusterware server entity for node {0} does not exist
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server entity for the specified node does not exist.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Start Oracle Clusterware on the given node and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-259E9483-936B-472B-8BDC-5ED2EAA74202">
                        <!-- --></a>
PRCS-01069: Label {0} in GNS domain name {1} does not follow RFC-1035 convention
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified portion of the GNS domain name does not follow RFC-1035 label conventions.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a domain name that follows RFC-1035 conventions. According to RFC-1035 conventions, the domain name consists of a set of labels separated by ".". A label must begin with an alphabetic character and can contain only alphanumerics and "-" (dash or minus character), end with an alphanumeric, and be no more than 63 characters long.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-D29B668C-EF48-48EA-AEFC-321A40EFECF9">
                        <!-- --></a>
PRCS-01070: Label {0} part of GNS domain name {1} is too long
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified portion of the GNS domain name does not follow RFC-1035 label conventions, as it is longer than 63 characters.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a domain name that follows RFC-1035 conventions. The domain name consists of a set of labels separated by ".". Label must begin with an alphabetic character and can contain only alphanumeric characters and "-" (dash or minus character), end with an alphanumeric and be no more than 63 characters long.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-D004A72B-306B-4CF0-A822-7C269AEB4194">
                        <!-- --></a>
PRCS-01071: An error occurred while trying to look up IP address for "{0}".
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A requested operation failed because an error occurred when it attempted to resolve the indicated fully qualified domain name (FQDN) for the GNS server.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the local node has name servers properly configured. If the domain in the FQDN is a GNS domain name, ensure that DNS has been set up to forward requests to GNS and that the GNS resource is online. Ensure that there are no firewalls between the local node and the name servers.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F86D4383-055A-4317-AAE9-42C9BA30168D">
                        <!-- --></a>
PRCS-01072: Failed to create server pool with reserved name {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Request to create the specified server pool was rejected because specified server pool name is the name of builtin server pool of Oracle Clusterware.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Supply a server pool name other than the builtin server pool name (Generic or Free) of Oracle Clusterware and retry.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-4E319F02-7A67-47A7-8B49-335414A067B8">
                        <!-- --></a>
PRCS-01073: The specified GNS logging level {0} was outside the expected range of {1} to {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The 'log_level' value in the 'srvctl start gns -loglevel &lt;log_level&gt;' command was less than the minimum limit.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the 'log_level' value is within the valid range.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A8414822-9183-49EE-ACB4-E7B32A210BF4">
                        <!-- --></a>
PRCS-01074: The specified GNS logging level {0} was outside the expected range of {1} to {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The 'log_level' value in the 'srvctl start gns -loglevel &lt;log_level&gt;' command was greater than the maximum limit.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the 'log_level' value is within the valid range.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F1555A3A-AFB6-4184-949F-371D39DD8A9B">
                        <!-- --></a>
PRCS-01075: GNS Domain name {0} ends with invalid character {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified GNS domain name ends with an invalid character and does not follow RFC-1035 label conventions.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a domain name that follows RFC-1035 conventions. According to RFC-1035 conventions, the domain name consists of a set of labels separated by ".". A label must begin with an alphabetic character and can contain only alphanumeric characters or "-" (dash or minus character), end with an alphanumeric, and be no more than 63 characters long.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-990E0607-6281-41AC-89CD-D9B2F9F7048D">
                        <!-- --></a>
PRCS-01076: Invalid Single Client Access Name {0}. The subnet {1} of SCAN VIP {2} differs from the subnet {3} of network {4}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The SCAN VIPs resolved from the specified Single Client Access Name are in a subnet that differs from the network's subnet.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the SCAN name that can be resolved to the SCAN VIPs in the same subnet of network resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-9CC50FF2-CDE2-46D6-85CD-EEB88628BA4B">
                        <!-- --></a>
PRCS-01077: The specified trace level {0} was outside the expected range of {1} to {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The trace level value was less than the minimum limit or greater than the maximum limit.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the trace level value is within the valid range.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-327DDFFD-B451-478C-94A6-0E70B91CC06E">
                        <!-- --></a>
PRCS-01078: Failed to update the invited nodes {0} for service registration with Scan Listener {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to update the invited nodes attribute failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the request after ensuring that the CRS stack is running, the SCAN listener resource has been configured, and the user has update permission on the SCAN listener resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E46E7CA2-2817-49E1-8D71-964E3D58276B">
                        <!-- --></a>
PRCS-01079: Failed to retrieve the invited nodes for service registration with Scan Listener {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the invited nodes attribute value of scan listener failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the request after ensuring that the CRS stack is running, the SCAN listener resource has been configured, and the user has update permission on the SCAN listener resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-68F96BB5-8365-471D-AE9A-3E6F21EA48FB">
                        <!-- --></a>
PRCS-01080: Failed to update the invited subnets {0} for service registration with Scan Listener {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to update the invited subnets attribute of scan listener failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the request after ensuring that the CRS stack is running, the SCAN listener resource has been configured, and the user has update permission on the SCAN listener resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-C3A2FABD-7014-48AC-90AF-2D4178C82947">
                        <!-- --></a>
PRCS-01081: Failed to retrieve the invited subnets for service registration with Scan Listener {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the invited subnets attribute of scan listener failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the request after ensuring that the CRS stack is running, the SCAN listener resource has been configured, and the user has update permission on the SCAN listener resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-0866ECD7-EC86-48D1-AD47-4752E9CCFD7C">
                        <!-- --></a>
PRCS-01082: Invalid built-in server category name {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified category name was invalid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Provide a valid category name. It can be ora.hub.category or ora.leaf.category.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-4D037DBA-6954-4747-BEB0-6597413811FD">
                        <!-- --></a>
PRCS-01083: There is no server category {0} registered in CRS
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server category did not exist.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Add the server category using the command 'crsctl add category &lt;category_name&gt;' or use the command 'crsctl status category' to get a list of server categories already registered in CRS.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E65C8890-D0EE-4DA1-81C5-F3FCBFF6E213">
                        <!-- --></a>
PRCS-01084: Failed to find server categories using filter {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to look up server category entitites using the given filter failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
See the accompanying error messages for further details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-27C4E702-20C7-4A29-8AA3-D325ABD3A585">
                        <!-- --></a>
PRCS-01085: Server category {0} already exists
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A server category that already exists was specified.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-05208D12-7E31-44E6-9F7E-B6103E54BE46">
                        <!-- --></a>
PRCS-01086: Failed to create category {0} 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to create the specified server category failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F6CA8C7B-897C-4532-9E35-0F7DCDE6FA78">
                        <!-- --></a>
PRCS-01087: SCAN name "{0}" does not resolve to an IPv4 or IPv6 address
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The SCAN name did not resolve to an IP address (either IPv4 or IPv6).

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the SCAN name resolves to an IP address.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-783BB51A-3A9A-4215-BB61-B748BA14F062">
                        <!-- --></a>
PRCS-01088: SCAN name "{0}" resolves to a different number of IPv4 ({1}) and IPv6 ({2}) addresses
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The number of IPv4 and IPv6 addresses that the SCAN name resolved to were not equal.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the SCAN name resolves to an equal number of IPv4 and IPv6 addresses.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-2AF05DBB-CB61-421F-B621-E9E4D477A2BD">
                        <!-- --></a>
PRCS-01089: Domain must be supplied because network "{0}" has type "{1}".
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add GNS on a non-static network was rejected because a domain was not supplied.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that a domain is forwarded from DNS, and supply the domain using the command 'srvctl add gns -vip <span class="variable" translate="no">address</span> -domain <span class="variable" translate="no">domain</span>'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-BA0D9F90-DDB2-4E1F-9CAD-C67272E39D6B">
                        <!-- --></a>
PRCS-01090: Failed to retrieve the sub-domain configured for GNS
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the sub-domain attribute of the specified Grid Naming Service (GNS) failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the request after ensuring that the CRS stack is running, the GNS resource has been configured, and the user has read permission on the GNS resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-CFB5BF36-0C63-43A9-A51A-BBC616CE0D15">
                        <!-- --></a>
PRCS-01091: The scan name "{0}" resolves to {1} addresses such as "{2}", while network {3} has only {4} subnet
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The given scan name resolved to a type of addresses that the network did not have.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Either modify the network via the command 'srvctl modify network -subnet' to include the missing type or make sure that the scan name resolves only to the addresses of the same type as the network.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-26C3F14E-68FE-4FA8-840D-EAC080B0B8D0">
                        <!-- --></a>
PRCS-01092: Failed to get the value for the attribute {0} of server category {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get the attribute value of the specified server category failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-58E595B1-0C6A-48AC-A9DF-C77326285CE8">
                        <!-- --></a>
PRCS-01093: Server pool {0} does not have a server category defined
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server pool did not have the server category defined as required for policy-managed databases in a an Oracle Flex Cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool using the command 'srvctl modify srvpool -serverpool <span class="variable" translate="no">serverpool</span> -category <span class="variable" translate="no">category</span> -servers ""'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-DB49C5F8-BB1E-4945-B799-F193D1EA4914">
                        <!-- --></a>
PRCS-01094: Server category {0} of server pool {1} has the following non-hub active CSS role: {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server category of the server pool did not have ACTIVE_CSS_ROLE=HUB as required for policy-managed databases in a Flex Cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool to use a server category that has the hub active CSS role or modify the server category to use ACTIVE_CSS_ROLE=HUB.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-119629A3-BC27-4CBA-893B-FC12D2F83F01">
                        <!-- --></a>
PRCS-01095: Conflicting specification of 'servers' and 'category' arguments for the serverpool {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Both 'servers' and 'category' arguments were specified on the command.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the request with either 'servers' or 'category' argument.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-06A320C2-7DD4-41B9-A365-DD1E5930E3E0">
                        <!-- --></a>
PRCS-01096: The serverpool {0} already contains the server names
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The command 'srvctl modify srvpool' specified 'category' option, but the server pool already has a server names attribute.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Remove the server names attribute by issuing the command 'srvctl modify srvpool -serverpool &lt;pool_name&gt; -servers ""'

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-6693CAB3-F4E9-4401-A6CC-3B57A988BD4F">
                        <!-- --></a>
PRCS-01097: The serverpool {0} already contains the server category
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
A 'srvctl modify srvpool' command specified 'servers' but the server pool already has a server category attribute.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Remove the server category attribute by issuing the command 'srvctl modify srvpool -serverpool &lt;pool_name&gt; -category ""'

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-17D9DBCB-B7AC-4AB3-BF22-E2B67ACB9DEE">
                        <!-- --></a>
PRCS-01098: Active CSS role of the server category {0} of PQ server pool {1} is not set
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server category of the server pool did not specify ACTIVE_CSS_ROLE.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the PQ server pool to use a server category that has a valid active CSS role or modify the server category to set ACTIVE_CSS_ROLE.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-BD50087F-D6C1-4FC5-B592-48B6011BBC03">
                        <!-- --></a>
PRCS-01099: Nodes {0} of the server pool {1} do not have HUB active CSS roles
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server pool did not have nodes with ACTIVE_CSS_ROLE=HUB as required for policy-managed databases in a Flex Cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool to use nodes that have HUB active CSS roles.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-190E5E82-077B-4D6F-9E88-F6CB3F08AD21">
                        <!-- --></a>
PRCS-01100: Nodes {0} of the PQ server pool {1} do not have LEAF active CSS roles
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server pool did not have nodes with ACTIVE_CSS_ROLE=LEAF as required for policy-managed databases in a Flex Cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool to use nodes that have LEAF active CSS roles.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-918B313A-DE11-4DCE-86B6-C004B2F317F5">
                        <!-- --></a>
PRCS-01101: Unable to create GNS resource because it already exists.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to add the GNS resource but the resource already exists.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Either remove the GNS resource and then add it, or avoid adding an already existing resource.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E2E7001B-4F6C-4F72-83B6-B3D4DE14B12D">
                        <!-- --></a>
PRCS-01102: Could not find any Single Client Access Name (SCAN) Virtual Internet Protocol (VIP) resources using filter {0} on network {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the SCAN VIP resources on the indicated network failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the resource name supplied is correct. Examine the accompanying error messages for additional details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-3F164242-2303-4E8E-8663-01372556F226">
                        <!-- --></a>
PRCS-01103: Could not find any Single Client Access Name (SCAN) listener resources using filter {0} on network {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the SCAN listener resources on the indicated network failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the resource name supplied is correct. Examine the accompanying error messages for additional details.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A85EE771-0ED9-4BB7-9843-14B5AE34EB76">
                        <!-- --></a>
PRCS-01104: Could not find the Single Client Access Name (SCAN) listener with ordinal number {0} on network {1}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to find the SCAN listener for the specified ordinal number and network failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the command 'srvctl config scan_listener -netnum' to check the available ordinal numbers on the given network.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-5DC07319-DEF6-4FF3-9D44-48DD13FFF0D5">
                        <!-- --></a>
PRCS-01105: Server category {0} of Parallel Query server pool {1} has the following non-leaf active CSS role: {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server category of the server pool did not have ACTIVE_CSS_ROLE=LEAF as required for the parallel query helper service of the policy-managed databases in a Flex Cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the Parallel Query server pool to use a server category that has the leaf active CSS role or modify the server category to use ACTIVE_CSS_ROLE=LEAF.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-130D4C72-52C7-4341-9B80-5637D0920BC5">
                        <!-- --></a>
PRCS-01106: Nodes {0} of the Parallel Query server pool {1} do not have the leaf active CSS role
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The server pool did not have nodes with ACTIVE_CSS_ROLE=LEAF as required for policy-managed databases in a Flex Cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool to use nodes that have the leaf active CSS role.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-8855D27C-3504-4101-8550-2F8A888EC4EE">
                        <!-- --></a>
PRCS-01107: Cannot add resource on network {0}, which is configured as leaf.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a resource using a network configured as 'leaf' was made.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Add the resource on a network not configured as 'leaf'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-10975027-EE50-45CF-9694-B30ADE888E93">
                        <!-- --></a>
PRCS-01108: Cannot modify resource to use network {0}, which is configured as leaf.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify a resource using a network configured as 'leaf' was made.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Provide a network not configured as 'leaf'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-6F0CAD5C-1DE9-43D4-AB47-734B49D7A0BF">
                        <!-- --></a>
PRCS-01110: Single Client Access Name (SCAN) {0} does not resolve to {1} addresses although it should resolve to both IPv4 and IPv6 addresses
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the SCAN name while the network type was 'BOTH' was rejected because the specified SCAN name did not resolve to both IPv4 and IPv6 addresses required by the network.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Make sure that the specified SCAN name resolves to both IPv4 and IPv6 addresses.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-51738010-C3F9-403A-A674-FB28130ECE08">
                        <!-- --></a>
PRCS-01111: Could not modify GNS VIP because registered type and IP address type are different
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The IP address type specified for the GNS VIP to be added differed from the registered network type.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify an IP address of the type that is registered.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-1E2B4F07-876C-472E-BAFB-50757C6A7CB6">
                        <!-- --></a>
PRCS-01112: Server {0} is not assigned to any server pool.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The given server was not yet recognized by Oracle Clusterware and therefore was not active in any server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check the state of the server using the command 'crsctl status server <span class="variable" translate="no">server</span> -f'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-551BFE64-2969-4842-A117-9BFC95FE103E">
                        <!-- --></a>
PRCS-01113: The Single Client Access Name (SCAN) VIP address "{0}" does not belong to network {1} which has only an {2} subnet.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The network modification failed because the type of the specified SCAN VIP address was incompatible with the subnet of the specified network.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Either modify the network via the command 'srvctl modify network -subnet' to include the missing type or make sure that the SCAN VIP is an address of the same type as the network.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F369C3FE-9071-440E-BF1A-5EF13480ED2C">
                        <!-- --></a>
PRCS-01115: An attempt to retrieve the Rapid Home Provisioning Server host name and port number failed with the following error:\n{0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
While looking up Rapid Home Provisioning Server (RHPS) connection details in Grid Naming Service (GNS), an attempt to retrieve the host name and port number failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error message. Make sure that both the GNS and the Rapid Home Provisioning Server are running on the RHPS cluster.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-7CEC5234-04A1-49F4-A92D-6706037A8597">
                        <!-- --></a>
PRCS-01116: no SRV record for service {0} found in the Grid Naming Service (GNS)
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
This is an internal error.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-9E5FE802-7F0A-4B11-B822-D9F1DA5BCB46">
                        <!-- --></a>
PRCS-01117: invalid format for SRV record {0} returned from the Grid Naming Service (GNS)
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
This is an internal error.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Contact Oracle Support Services.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-8048B732-C27C-4443-9A62-72E846C50C21">
                        <!-- --></a>
PRCS-01118: The supplied GNS VIP name "{0}" resolves to multiple IP addresses "{1}".
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
Install prerequisite checking determined that the indicated GNS VIP name entered was resolved to the multiple IP addresses shown.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Repeat the install interview supplying a GNS VIP name that resolves to exactly one address, or a numeric GNS VIP address. Alternatively, modify the name service address mapping to associate only one address with the name and rerun the prerequisite check.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A3C5C121-CA72-4812-BC3A-FC6FAED6D0F7">
                        <!-- --></a>
PRCS-01119: illegal attempt to modify the Grid Naming Service instance role to client
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the Grid Naming Service (GNS) role to client was made.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Valid GNS roles are PRIMARY and SECONDARY. Specify one of them and reissue the command.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-25350DC8-2647-49F5-B98D-1C9EA17F119C">
                        <!-- --></a>
PRCS-01120: The supplied GNS VIP name "{0}" resolves to multiple addresses "{1}" of types IPv4 or IPv6.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
More than one IP address of either type IPv4 or type IPv6 were found when resolving the specified Grid Naming Service (GNS) VIP name.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Supply a GNS VIP name that resolves to exactly two addresses, one of type IPv4 and one of type IPv6.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-5A793E8D-461E-4089-A723-1EF23F183BDF">
                        <!-- --></a>
PRCS-01121: The supplied GNS VIP name "{0}" resolves to multiple addresses "{1}" of type IPv4.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
More than one IP address of type IPv4 was found when resolving the specified Grid Naming Service (GNS) VIP name.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Supply a GNS VIP name that resolves to exactly one IPv4 address, or supply a numeric GNS VIP address.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-3E643CC7-1A60-4DFF-9754-60E3B88AF5EF">
                        <!-- --></a>
PRCS-01122: The supplied GNS VIP name "{0}" resolves to multiple addresses "{1}" of type IPv6.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
More than one IP address of type IPv6 was found when resolving the specified Grid Naming Service (GNS) VIP name.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Supply a GNS VIP name that resolves to exactly one IPv6 address, or supply a numeric GNS VIP address.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-5E7F644E-272B-446D-A97D-D8677BD25AD2">
                        <!-- --></a>
PRCS-01123: failed to get the extended cluster configuration information
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get the extended cluster configuration information failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details and retry the command, making sure that the CRS stack is running.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E98C0A80-199C-48B2-9886-AB707D2AF948">
                        <!-- --></a>
PRCS-01124: failed to get Oracle Clusterware sites
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get Oracle Clusterware sites failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details and retry the command, making sure that the CRS stack is running.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-27B11847-285C-4F9D-B2D1-C91222A2AA8A">
                        <!-- --></a>
PRCS-01125: failed to get Oracle Clusterware site for node {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve Oracle Clusterware site for specified node failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages for details and retry the command, making sure that the CRS stack is running.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-6FB894B5-B6AB-484D-9BC6-6A37247CC503">
                        <!-- --></a>
PRCS-01126: SCAN {0} has no static IPv4 addresses configured for Single Client Access Name (SCAN) Virtual IPs (VIP).
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the network type of the indicated SCAN to 'static' was rejected because the SCAN did not have SCAN VIPs configured with static IPv4 addresses.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the command 'srvctl modify scan' to configure the indicated SCAN with SCAN VIPs whose addresses resolve to static IPv4 addresses.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E3D675CC-3714-43F8-8C80-C129160DB63E">
                        <!-- --></a>
PRCS-01127: SCAN {0} has no static IPv6 addresses configured for Single Client Access Name (SCAN) Virtual IPs (VIP).
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the network type of the indicated SCAN to 'static' was rejected because the SCAN did not have SCAN VIPs configured with static IPv6 addresses.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the command 'srvctl modify scan' to configure the indicated SCAN with SCAN VIPs whose addresses resolve to static IPv6 addresses.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-0BC416E6-F3FA-403F-85B2-BCB38A5DBD6A">
                        <!-- --></a>
PRCS-01128: SCAN {0} does not have static IP addresses of both types IPv4 and IPv6 configured for Single Client Access Name (SCAN) Virtual IPs (VIP).
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the network type of the indicated SCAN to 'static' was rejected because the SCAN did not have SCAN VIPs configured with static addresses of each of the types IPv4 and IPv6.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Use the command 'srvctl modify scan' to configure the indicated SCAN with SCAN VIPs whose addresses resolve to static IPv4 and IPv6 addresses.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B3D2E4FB-50D6-492B-B188-86B4408E15B3">
                        <!-- --></a>
PRCS-01129: nodes {0} of the reader farm server pool {1} do not have LEAF active CSS roles
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add or modify a service was rejected because the specified server pool did not have nodes with ACTIVE_CSS_ROLE=LEAF as required for the policy-managed databases using reader farm services.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool to use nodes that have LEAF active Oracle Cluster Synchronization Services (CSS) roles using 'srvctl modify serverpool -category' and retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-8D7B87B8-2A7B-47D3-A288-7E39AF312879">
                        <!-- --></a>
PRCS-01130: failed to add reader farm service because network {0} is not extended to work on Leaf Nodes
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a reader farm service was rejected because the provided network was not extended to Leaf Nodes.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a network that is extended to work on Leaf Nodes, or run 'srvctl modify network -extendtoleaf' and repeat the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-FBA20FF8-8A9D-4ABE-BF4E-762437921C7F">
                        <!-- --></a>
PRCS-01131: unable to convert a reader farm service to another service type
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify a reader farm service configuration was rejected because service type conversion is not supported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create a new service of the required service type.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-C7DF0423-9D82-4BD8-A571-1CF384F7D2D2">
                        <!-- --></a>
PRCS-01132: Database {0} is configured to use parallel query services.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a reader farm service configuration was rejected because the specified database was already configured to use parallel query services.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a different database or remove the parallel query services using  the command 'srvctl remove service' and add the reader farm service using the command 'srvctl add service'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-3DD3582D-B2A2-4913-BDE3-51E918C9080C">
                        <!-- --></a>
PRCS-01133: Database {0} is configured to use reader farm services.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a parallel query service configuration was rejected because the specified database was already configured to use reader farm services.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a different database or remove the reader farm services using the command 'srvctl remove service' and add the parallel query service using the command 'srvctl add service'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-8AE085A6-21D9-4B3E-BECF-5E8EEF52488C">
                        <!-- --></a>
PRCS-01134: Server category {0} of server pool {1} has the following non-LEAF CSS role: {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add or modify a reader farm service was rejected because the server category of the specified server pool did not have ACTIVE_CSS_ROLE=LEAF as required for reader farm services.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Modify the server pool to use a server category that has the LEAF active CSS role or modify the server category to use ACTIVE_CSS_ROLE=LEAF and retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-54009608-BE1D-45AF-9D43-C127D2D78ECD">
                        <!-- --></a>
PRCS-01135: unable to convert non-reader farm service {0} to reader farm service type
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify a non-reader farm service configuration was rejected because service type conversion is not supported.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create a new reader farm service using the command 'srvctl add service -rfpool'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A05370D4-F35C-4D45-B1EC-C7324B7BAA04">
                        <!-- --></a>
PRCS-01136: unable to set the candidate server list for a server pool to a list of servers with mixed CSS roles.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to set the candidate server list for a server pool was rejected because the specified servers were not all Hub Nodes or all Leaf Nodes.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation specifying a list of servers that all have ACTIVE_CSS_ROLE set to 'hub' or that all have ACTIVE_CSS_ROLE set to 'leaf'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-597A3502-CC37-4E21-81C1-41B0B6C1E50C">
                        <!-- --></a>
PRCS-01137: The release specified must be 12.1.0.2 or later.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to export the Grid Naming Service (GNS) credentials with the -version option failed because the specified release was earlier than 12.1.0.2

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Reissue the command, specifying release 12.1.0.2 or later.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-1D706941-6AE7-4F92-AE1C-B7159A684CBE">
                        <!-- --></a>
PRCS-01138: invalid VIP addresses "{0}" because the specified IP addresses are reachable
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The specified command was rejected because the Virtual Internet Protocol (VIP) address was reachable.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Configure VIPs to use IP addresses that are not active on any host system and cannot be reached using 'ping'.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-1F259E2A-2367-4912-B9ED-09CD01F5EE41">
                        <!-- --></a>
PRCS-01139: failed to add reader farm service
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a reader farm service was rejected because the hub service was either not provided or was invalid.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify a hub service that exists and services the pluggable database to which the reader farm service can connect.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-51C07BDD-AAF0-4257-BEA0-AD046082738F">
                        <!-- --></a>
PRCS-01140: invalid GNS VIP address {0} because the specified IP address is not in the subnet {1} of the network resource {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The subnet of the Grid Naming Service Virtual Internet Protocol (GNS VIP) did not match the subnet of the network resource.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry SRVCTL command with a combination of GNS VIP address and network whose subnet matches.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-902D08DD-0F3C-41D2-B8C5-6652617F33F0">
                        <!-- --></a>
PRCS-01141: invalid GNS VIP address {0} because the specified IP address is not of type {1} of the network resource {2}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
The IP address type specified for the GNS VIP to be added differed from the registered network type.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Specify an IP address of the type that is registered.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-1CB4178F-1427-4988-AFCC-01A1687B8EC3">
                        <!-- --></a>
PRCS-01142: Unable to create CDP resource because it already exists.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add the Cross-cluster Dependency Proxies (CDP) resource was rejected because the resource already existed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
None

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-73D3D07D-8E6B-4AAA-8D22-6EA1FF730C25">
                        <!-- --></a>
PRCS-01143: failure to configure Cross-cluster Dependency Proxies resource
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a cluster configuration for a Cross-cluster Dependency Proxies (CDP) resource failed. The accompanying messages provide detailed failure information.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Review the accompanying error messages that provide the details of which resources failed to be created. Check the Cause and Action for the individual resource creation failures.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-AD938020-A004-4796-B7F4-17889FF77BC3">
                        <!-- --></a>
PRCS-01144: Error executing the config script for CDP. Details: {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An error occurred while executing the configuration script for the Cross-cluster Dependency Proxies (CDP) resource. Specific failure data is displayed following the message.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying messages, resolve the identified problems, and then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-CE8B7BB6-BA49-4F91-8AD8-AECEBF52A3DF">
                        <!-- --></a>
PRCS-01145: Single Client Access Name (SCAN) listener resources not found for client cluster {0}.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the SCAN listener resources for the indicated client failed. The accompanying error messages provide detailed failure information.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages, resolve the indicated issues,and then retry the operation, ensuring that the supplied cluster name is correct.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-149A6188-E9A8-4A4B-9F21-5DFBFBF565EF">
                        <!-- --></a>
PRCS-01146: Single Client Access Name (SCAN) listener resources already exist for client cluster {0}.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to create Single Client Access Name (SCAN) listeners was rejected because resources were already created for the specified client cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying a different client cluster name.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-23057149-56B5-477B-80BA-D94C5FB3E4CB">
                        <!-- --></a>
PRCS-01147: unable to find any Oracle Notification Service (ONS) resources for client cluster {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the ONS resources for the indicated client failed. The accompanying error messages provide detailed failure information.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying error messages, resolve the indicated issues, and then retry the operation, ensuring that the supplied resource name is correct.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-207B3F33-C732-4CAC-A3CA-2942D3BB5E80">
                        <!-- --></a>
PRCS-01148: An ONS resource already exists for client cluster {0}.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to create an Oracle Notification Service (ONS) resource was rejected because a resource already existed for the indicated client cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying a different cluster name.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-297BE6E2-DA29-4B43-86E5-9D0C252FC471">
                        <!-- --></a>
PRCS-01149: unable to find resource for ONS {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to query resources failed because the indicated Oracle Notification Service (ONS) resource did not exist.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying a valid ONS name.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-4779AD61-FD3F-4835-986C-4DADCDB21865">
                        <!-- --></a>
PRCS-01150: The ONS resource already exists.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to create a resource was rejected because the Oracle Notification Service (ONS) resource already existed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
None

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-96459DD5-8618-4FCA-97CE-E4175F1ACB1F">
                        <!-- --></a>
PRCS-01151: The specified ONS resource is not configured for a client cluster.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to export client data for an Oracle Notification Service (ONS) resource was rejected because the specified ONS resource was not configured to serve a client cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying an ONS resource that is configured to serve a client cluster.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-F1CD035E-CC4A-4658-8E47-C412511C8AC7">
                        <!-- --></a>
PRCS-01152: The invited nodes cannot be modified for a SCAN listener on a client cluster.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the invited nodes for a SCAN listener was rejected because the resource was configured for a client cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying a SCAN listener on a server cluster.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-FE7327EE-00CE-4D67-8A41-EE69C48F05F2">
                        <!-- --></a>
PRCS-01153: The invited subnet cannot be modified for a SCAN listener on a client cluster.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the invited subnet for a SCAN listener was rejected because the resource was configured for a client cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying a SCAN listener on a server cluster.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-3090D831-51F8-4180-8222-B696E6512A62">
                        <!-- --></a>
PRCS-01154: The specified SCAN listener resource is not configured for a client cluster.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to export client data for a SCAN listener resource was rejected because the specified SCAN listener resource was not configured to serve a client cluster.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, specifying a SCAN listener resource that serves a client cluster.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-FCA8C2C6-104D-4F01-AD90-E20ADDA82237">
                        <!-- --></a>
PRCS-01155: missing properties {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to get XML properties from the indicated data file failed because the required XML property attributes did not exist.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, supplying a valid client data file.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-DACAA5A5-6D36-4D43-BEE2-95BEBBBDD3EA">
                        <!-- --></a>
PRCS-01156: Service {0} is already configured in server pool {1}.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify the reader farm service pool for the specified server pool failed because the service is already part of the server pool.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
No action is needed.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-9AB4C729-8AF2-49AC-8E75-321849864C06">
                        <!-- --></a>
PRCS-01157: The CDP resource does not exist.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the Cross-cluster Dependency Proxies (CDP) resource failed because the resource could not be found.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create the CDP resource using the command 'srvctl add cdp', then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-75116319-EA9A-431A-A071-AEE145C797E4">
                        <!-- --></a>
PRCS-01158: The TFA resource does not exist.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the Trace File Analyzer (TFA) failed because the resource could not be found.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create the TFA resource using the command 'srvctl add tfa', then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A2802BE8-4FC5-4AF7-94CE-FBA2B66B3E15">
                        <!-- --></a>
PRCS-01159: Unable to create the TFA resource because it already exists.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add the Trace File Analyzer (TFA) resource was rejected because the resource already existed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
None

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-A7EE4B7F-CFB0-4489-B5C8-3D0E9737783E">
                        <!-- --></a>
PRCS-01160: The CDP proxy resource does not exist.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to retrieve the Cross-cluster Dependency Proxies (CDP) proxy resource but the CDP proxy resource was not found.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Create the CDP proxy resource using the command 'srvctl add cdpproxy', then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-5D1324CF-A9BC-4246-AA77-DE161E99D171">
                        <!-- --></a>
PRCS-01161: Unable to create CDP proxy resource because it already exists.
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to add the Cross-cluster Dependency Proxies (CDP) proxy resource but the resource already existed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
None

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-2CC24F6F-6A15-4C9E-8855-878039EA5843">
                        <!-- --></a>
PRCS-01162: Cannot create CDP proxy using unsupported type "{0}".
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt was made to add the Cross-cluster Dependency Proxies (CDP) proxy resource using an unknown, or unsupported, proxy type.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Retry the operation, supplying a valid supported proxy type.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-B3749404-AE43-4B21-8DBE-B4C4371E68A0">
                        <!-- --></a>
PRCS-01163: failed to remove the CDP resource {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to remove the Cross-cluster Dependency Proxies (CDP) resource failed because the resource was running or other resources depended on it.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Check status for the identified CDP resource and stop the CDP resource before removing it. The force flag could be used to remove the CDP resource if CDP proxies depend on it.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-CB234486-47B1-48B8-BB49-118CAE6FCB00">
                        <!-- --></a>
PRCS-01164: could not modify CDP resources because the following CDP resources were running: {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to modify one or more Cross-cluster Dependency Proxies (CDP) resources was rejected because the indicated resources were running.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the indicated CDP resources are stopped and then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-2BE5A620-85B4-4C89-9152-9AE38E7614A5">
                        <!-- --></a>
PRCS-01165: cluster {0} not registered with GNS
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve information about the indicated cluster from the Grid Naming Service (GNS) found that the cluster was not registered.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the indicated cluster name is registered with GNS, and then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-2CA45278-AB73-4827-833C-3714B5222C45">
                        <!-- --></a>
PRCS-01166: cluster GUID {0} not registered with GNS
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve information about the indicated cluster from the Grid Naming Service (GNS) found that the cluster was not registered.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the indicated cluster GUID is registered with GNS, and then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-3594E700-42C1-40E8-A0FA-FABE5BD5BEF5">
                        <!-- --></a>
PRCS-01167: no clusters registered with GNS
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to retrieve the list of registered clusters from the Grid Naming Service (GNS) detected that no clusters were registered.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that there is at least one cluster registered with GNS, and then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-9007369A-64F8-4A8E-9703-27D842A4BF69">
                        <!-- --></a>
PRCS-01168: The cluster name "{0}" stored in the client data file is not the same as the configured cluster name "{1}".
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to configure a Single Client Access Name (SCAN) resource on a client cluster was rejected because the client data file contained information for a different cluster name.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the client data file was exported for this cluster name and retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-197CD4C7-A99C-4C7A-82AA-AED9F3898339">
                        <!-- --></a>
PRCS-01169: invalid invited subnets value {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to change the invited subnets value was rejected because the invited subnets value was specified using incorrect syntax.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the invited subnets value is using either Classless Inter-Domain Routing (CIDR) syntax (e.g. 192.196.16.0/24) or wild cards (e.g. 192.196.16.*).

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-13C5D5E3-2FE9-4C77-AD6A-5FFCAEE1A872">
                        <!-- --></a>
PRCS-01170: invalid node names value {0}
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to add a Single Client Access Name (SCAN) was rejected because the node names value contained invalid active nodes.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Ensure that the node names are active and unique, then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-C74D7288-F484-4591-96AF-DD5B8F3578D1">
                        <!-- --></a>
PRCS-01171: failed to delete category {0} 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to delete the specified server category failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying messages, resolve the identified problems, and then retry the operation.

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-F8AA9823-5160-49ED-8EC9-06B03AC3A686__GUID-E9CD3AD9-1C6B-4AE3-AC0F-A19CC5E26B81">
                        <!-- --></a>
PRCS-01172: failed to update category {0} 
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">Cause:</span>
An attempt to update the specified server category failed.

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">Action:</span>
Examine the accompanying messages, resolve the identified problems, and then retry the operation.

                     </p>
                     
                  </dd>
               </dl>
            </div>
         </div>
      </article>
   </body>
</html><html id='06334.RECOVER.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>RECOVER</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="rman-commands-recover-to-validate.html" title="Previous" type="text/html">
      <link rel="next" href="REGISTER-DATABASE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rman-commands-recover-to-validate.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="REGISTER-DATABASE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN Commands: RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">RECOVER</li>
            </ol>
            <a id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95" name="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95"></a><a id="RCMRF90237"></a><a id="RCMRF90238"></a><a id="RCMRF90613"></a><a id="RCMRF90239"></a><a id="RCMRF90614"></a><a id="RCMRF90240"></a><a id="RCMRF90241"></a><a id="RCMRF90242"></a><a id="RCMRF90615"></a><a id="RCMRF90244"></a><a id="RCMRF90245"></a><a id="RCMRF90616"></a><a id="RCMRF90247"></a><a id="RCMRF90248"></a><a id="RCMRF90249"></a><a id="RCMRF90617"></a><a id="RCMRF90251"></a><a id="RCMRF90252"></a><a id="RCMRF90618"></a><a id="RCMRF90253"></a><a id="RCMRF90254"></a><a id="RCMRF90255"></a><a id="RCMRF90256"></a><a id="RCMRF90257"></a><a id="RCMRF90258"></a><a id="RCMRF90259"></a><a id="RCMRF90619"></a><a id="RCMRF90620"></a><a id="RCMRF90621"></a><a id="RCMRF140"></a>
            
            <h2 id="RCMRF-GUID-CA98040F-9865-4F4F-BAF2-91C518612E95" class="sect2"><span class="enumeration_section">3.1 </span>RECOVER
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-E2EEEAE0-06B3-4D2E-8A83-1A9DD49AF7C2">Purpose</p>
                  <p><a id="d69128e179" class="indexterm-anchor"></a><a id="d69128e181" class="indexterm-anchor"></a><a id="d69128e185" class="indexterm-anchor"></a><a id="d69128e189" class="indexterm-anchor"></a><a id="d69128e193" class="indexterm-anchor"></a>Use the <code class="codeph">RECOVER</code> command to perform one of the following distinct tasks:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Perform complete recovery of the whole database or one or more restored data files </p>
                     </li>
                     <li>
                        <p>Perform point-in-time recovery of a database (DBPITR), pluggable database (PDB), tablespace (TSPITR), table, or table partition</p>
                     </li>
                     <li>
                        <p>Apply incremental backups to a data file image copy (<span class="italic">not</span> a restored data file) to roll it forward in time
                        </p>
                     </li>
                     <li>
                        <p>Recover a corrupt data block or set of data blocks within a data file</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-CABC3DC6-1EE1-421F-BACB-D2E12B7000AF">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/rman-complete-database-recovery.html#BRADV8005" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to recover data files
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-54DB059A-FF1D-4027-931F-CFBE966ECB50">Prerequisites</p>
                  <p>All redo or incremental changes required for the recovery must exist on disk or in SBT. If RMAN needs to restore incremental backups or archived redo log files during recovery, then you must either have automatic channels configured or manually allocate channels of the same type that created these backups.</p>
                  <p><a id="d69128e230" class="indexterm-anchor"></a>If you perform media recovery on an encrypted database or tablespace, then the Oracle keystore must be open when performing media recovery. See <a href="../admin/managing-tablespaces.html#ADMIN12327" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn about encrypted tablespaces.
                  </p>
                  <p></p>
                  <p>To perform recovery in a destination CDB using preplugin backups, the root must be open and you must connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                  </p>
                  <p></p>
                  <p>In a CDB that uses shared undo, to perform point-in-time recovery of one or more PDBs, backups of the root and the seed database of the CDB that contains the listed PDBs must be available.</p>
                  <p>To perform TSPITR of tablespaces in a PDB, backups of the root and the seed database (<code class="codeph">PDB$SEED</code>) of the CDB that contains the  PDBs must be available.
                  </p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBDFJFG"><span class="bold">Prerequisites Specific to RECOVER BLOCK</span></p>
                  <p>The following prerequisites apply to <code class="codeph">RECOVER BLOCK</code>:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d69128e268" class="indexterm-anchor"></a><a id="d69128e270" class="indexterm-anchor"></a><a id="d69128e274" class="indexterm-anchor"></a>The target database must run in <code class="codeph">ARCHIVELOG</code> mode and be open or mounted with a current control file.
                        </p>
                     </li>
                     <li>
                        <p>RMAN can only recover blocks marked media corrupt. The <a id="d69128e285" class="indexterm-anchor"></a><a id="d69128e287" class="indexterm-anchor"></a><code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view indicates which blocks in a file were marked corrupt since the most recent <code class="codeph">BACKUP</code> or <code class="codeph">BACKUP ... VALIDATE</code> command was run against the file.
                        </p>
                     </li>
                     <li>
                        <p><a id="d69128e302" class="indexterm-anchor"></a>The backups of the data files containing the corrupt blocks must be full backups and not proxy backups. If only proxy backups exist, then you can restore them to a nondefault location on disk, in which case RMAN considers them data file copies. You can then use the data file copies for block media recovery.
                        </p>
                     </li>
                     <li>
                        <p>RMAN can use only archived redo log files for recovery. Block media recovery cannot survive a missing or inaccessible log, although it can sometimes survive missing or inaccessible records (see <a href="../bradv/rman-block-media-recovery.html#BRADV118" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>).
                        </p>
                     </li>
                     <li>
                        <p>For RMAN to be able to search the flashback logs for good copies of corrupt blocks, Flashback Database must be enabled on the target database.</p>
                     </li>
                     <li>
                        <p>For RMAN to be able to search a standby database for good copies of corrupt blocks, the target database must be associated with a physical standby database in a Data Guard environment. In addition, the physical standby database must be open read-only in managed recovery.</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-0795BA20-1B1D-457C-9356-41EA26EB01DE">
                     <p class="notep1">Note:</p>
                     <p>An active Data Guard license is required for this operation.</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDJBACD">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-4A9DDA45-6C70-4EFA-A1B0-597F0CD3D347">Usage Notes</p>
                  <p>By default, RMAN performs complete recovery. For point-in-time recovery, the best practice is to enter a <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code> command before both the <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> and <code class="codeph">RECOVER</code> commands in a <code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> command so that the <code class="codeph">UNTIL</code> time applies to both commands. If you run <code class="codeph">SET UNTIL</code> after restoring the database, then you may not be able to recover the database to the target time because the restored files may have timestamps later than the target time.
                  </p>
                  <div class="infoboxnote" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-2BB576D3-8963-4E72-9060-A02160E5639E">
                     <p class="notep1">Note:</p>
                     <p>You must open the database with the <code class="codeph">RESETLOGS</code> option after incomplete recovery or recovery with a backup control file.
                     </p>
                  </div>
                  <p><span class="bold">Incremental Backups and Archived Redo Log Files</span></p>
                  <p><a id="d69128e366" class="indexterm-anchor"></a>Except for <code class="codeph">RECOVER BLOCK</code>, RMAN can use both incremental backups and archived redo log files for recovery. RMAN uses the following search order:
                  </p>
                  <ol>
                     <li>
                        <p>Incremental backup sets on disk or tape</p>
                     </li>
                     <li>
                        <p>Archived redo log files on disk</p>
                     </li>
                     <li>
                        <p>Archived redo log backups on disk</p>
                     </li>
                     <li>
                        <p>Archived redo log backup sets on tape</p>
                     </li>
                  </ol>
                  <p>When RMAN chooses a destination to restore archived redo log files, it uses the following order of precedence:</p>
                  <ol>
                     <li>
                        <p><code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ARCHIVELOG DESTINATION</code></p>
                     </li>
                     <li>
                        <p>The <a id="d69128e402" class="indexterm-anchor"></a><code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter whose value is set to <code class="codeph">LOCATION=USE_DB_RECOVERY_FILE_DEST</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
                     </li>
                  </ol>
                  <p>RMAN can apply incremental backups to data files that were not restored from an incremental backup. If overlapping levels of incremental backup exist, then RMAN automatically chooses the level covering the longest period of time.</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF"><span class="bold">Recovery Using Storage Snapshots</span><a id="d69128e421" class="indexterm-anchor"></a><a id="d69128e425" class="indexterm-anchor"></a></p>
                  <p>Storage Snapshot Optimization enables you to use third-party technologies to take storage snapshots without putting the database or associated data files in <code class="codeph">BACKUP</code> mode. When recovering the database using a storage snapshot, specify the <code class="codeph">SNAPSHOT TIME</code> option.
                  </p>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-D74FCC5A-A06C-42D6-A992-32DE427071AC">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/user-managed-flashback-dbpitr.html#BRADV727" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about specifying the snapshot time
                     </p>
                  </div>
                  <p>To be usable in recovery operations, the snapshots must conform to the following requirements. Ask your vendor for a guarantee of compliance.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The database is crash consistent during the snapshot.</p>
                     </li>
                     <li>
                        <p>The snapshot preserves write order for each file.</p>
                     </li>
                     <li>
                        <p>The snapshot technology stores the time at which the snapshot is completed.</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-534F440E-B7A4-4B28-B13A-146304135AA7">
                     <p class="notep1">Caution:</p>
                     <p>Take care that the database snapshots are usable. Oracle Database does not use a snapshot for recovery if structural changes were made during the snapshot. Some SQL operations can make database structural changes and should not be used during a snapshot. A few examples of such operations include the <code class="codeph">OFFLINE</code>, <code class="codeph">ONLINE</code>, <code class="codeph">READONLY</code>, <code class="codeph">DROP</code>, <code class="codeph">RENAME</code>, <code class="codeph">SHRINK</code>, and <code class="codeph">ADD</code> clauses.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-0E8A6B09-3A17-4A69-B93A-D8DC78ACCF18">
                     <p class="notep1">See Also:</p>
                     <p><code class="codeph">ALTER DATABASE</code> and <code class="codeph">ALTER TABLESPACE</code> commands in <a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about clauses that make database structural changes
                     </p>
                  </div>
                  <p><span class="bold">Recovery Through RESETLOGS</span></p>
                  <p>You must <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> data files before you can recover them. RMAN can recover through <code class="codeph">RESETLOGS</code> operations transparently if the data files to be recovered are from a parent incarnation. If required, the <code class="codeph">RECOVER</code> command can also restore and apply archived redo log files and incremental backups from previous database incarnations, even if those logs were generated in previous releases of Oracle Database.
                  </p>
                  <p>When recovering through an <code class="codeph">OPEN RESETLOGS</code>, ensure that you have all logs needed for recovery. In a previous database incarnation, you must have the logs from the time of the backup until the SCN that is 1 less than the <code class="codeph">RESETLOGS SCN</code>. The incarnation table must have a complete history of <code class="codeph">RESETLOGS</code> operations from the creation time of the database backup. If the complete metadata is not found in <code class="codeph">V$DATABASE_INCARNATION</code>, then you can re-create this metadata by using <code class="codeph"><a href="CATALOG.html#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code> for the archived redo log files from the missing incarnations.
                  </p>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F1C84C0F-5BF0-45A0-866C-0D7EFD208082">
                     <p class="notep1">See Also:</p>
                     <p><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> command for explanation of the default location for restoring archived redo log files. RMAN automatically specifies the <code class="codeph">MAXSIZE</code> option when staging logs in the fast recovery area.
                     </p>
                  </div>
                  <p><span class="bold">Recovery of CDBs and PDBs</span><a id="d69128e543" class="indexterm-anchor"></a><a id="d69128e547" class="indexterm-anchor"></a><a id="d69128e551" class="indexterm-anchor"></a><a id="d69128e555" class="indexterm-anchor"></a></p>
                  <p>RMAN enables you to recover a whole multitenant container database (CDB), the root, one or more PDBs, and tablespaces in a root or PDB. You can perform complete recovery or point-in-time recovery for PDBs and CDBs. However, you cannot recover the root to a specified point in time.</p>
                  <p>The process of recovering CDBs and PDBs is similar to that of non-CDBs. The difference is in the process of connecting to the CDB or PDB and in the commands used. To recover the whole CDB, the root, or multiple PDBs, you connect to the root. To recover a particular PDB, connect to that PDB. To recover PDBs, you use the <code class="codeph">RECOVER PLUGGABLE DATABASE</code> command. To recover a whole CDB, use the <code class="codeph">RECOVER DATABASE</code> command and to recover the root, use the <code class="codeph">RECOVER DATABASE ROOT</code> command.
                  </p>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-57812173-E962-49EE-A77D-A3CD12866D9D">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a>"</span> for information about connecting to CDBs and PDBs
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-6F472BF4-CDDF-477F-B334-85ECFE12C039">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/rman-complete-database-recovery.html#BRADV-GUID-1F744C63-2D4C-4F65-8773-1340A85993ED" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about performing recovery of CDBs PDBs
                     </p>
                  </div>
                  <p>In a Data Guard environment, you may need to restore the entire CDB after the point-in-time recovery of a primary database, for the standby database to follow the primary database.</p>
                  <p><span class="bold">Recovery of Sparse Databases</span></p>
                  <p>RMAN also enables you to perform point-in-time recovery for multitenant and non-CDB sparse databases when the <code class="codeph">COMPATIBLE</code> initialization parameter is set to 12.2 or higher. For complete recovery, RMAN recovers data files by applying archived redo log files and online redo logs. Therefore, the <code class="codeph">FROM SPARSE</code> and <code class="codeph">FROM NONSPARSE</code> clauses are not applicable to complete recovery. For point-in-time recovery, RMAN first restores data files and then recovers them, and therefore, the <code class="codeph">FROM SPARSE</code> and <code class="codeph">FROM NONSPARSE</code> clauses are applicable to PITR. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-556716D3-A8C9-403C-9D20-05D91101C2B4">Syntax</p>
                  <p><a id="d69128e614" class="indexterm-anchor"></a><a id="d69128e618" class="indexterm-anchor"></a><span class="bold"><span class="italic">recover</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-626816AA-492D-40F4-823E-F18B2E559D2B"><img src="img/recover.gif" alt="Description of recover.eps follows" title="Description of recover.eps follows" longdesc="img_text/recover.html"><br><a href="img_text/recover.html">Description of the illustration recover.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject::=</a></span>, <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList::=</a></span>)
                  </p>
                  <p><a id="d69128e644" class="indexterm-anchor"></a><a id="d69128e648" class="indexterm-anchor"></a><span class="bold"><span class="italic">recoverSpec</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-95C09C81-4D2A-469A-92D9-5406587262FB"><img src="img/recoverspec.gif" alt="Description of recoverspec.eps follows" title="Description of recoverspec.eps follows" longdesc="img_text/recoverspec.html"><br><a href="img_text/recoverspec.html">Description of the illustration recoverspec.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject::=</a></span>, <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB">blockObject::=</a></span>, <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList::=</a></span>)
                  </p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE"><a id="d69128e674" class="indexterm-anchor"></a><a id="d69128e678" class="indexterm-anchor"></a><span class="bold"><span class="italic">recoverObject</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-8DCC3752-98AF-42A1-9424-BB3AA7E55921"><img src="img/recoverobject.gif" alt="Description of recoverobject.eps follows" title="Description of recoverobject.eps follows" longdesc="img_text/recoverobject.html"><br><a href="img_text/recoverobject.html">Description of the illustration recoverobject.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEGJI">dbObject</a></span>, <span class="italic"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD">untilClause::=</a></span>)
                  </p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHCII"><a id="d69128e700" class="indexterm-anchor"></a><span class="bold"><span class="italic">dbObject</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A5F60A2C-39AF-436E-8DED-C75012D2568B"><img src="img/dbobject.gif" alt="Description of dbobject.eps follows" title="Description of dbobject.eps follows" longdesc="img_text/dbobject.html"><br><a href="img_text/dbobject.html">Description of the illustration dbobject.eps</a></div>
                  <!-- class="figure" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB"><a id="d69128e713" class="indexterm-anchor"></a><a id="d69128e717" class="indexterm-anchor"></a><span class="bold"><span class="italic">blockObject</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-67388E93-D8D6-47B6-BDA5-0AED88D2E424"><img src="img/blockobject.gif" alt="Description of blockobject.eps follows" title="Description of blockobject.eps follows" longdesc="img_text/blockobject.html"><br><a href="img_text/blockobject.html">Description of the illustration blockobject.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec::=</a></span>)
                  </p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB"><a id="d69128e735" class="indexterm-anchor"></a><a id="d69128e739" class="indexterm-anchor"></a><span class="bold"><span class="italic">recoverOptionList</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-5918B74D-F768-40DF-A974-DF6569C81C7E"><img src="img/recoveroptionlist.gif" alt="Description of recoveroptionlist.eps follows" title="Description of recoveroptionlist.eps follows" longdesc="img_text/recoveroptionlist.html"><br><a href="img_text/recoveroptionlist.html">Description of the illustration recoveroptionlist.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFADCCJE">remapTableList::=</a></span>, <span class="italic"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec::=</a></span>)
                  </p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFADCCJE"><span class="bold"><span class="italic">remapTableList</span>::=</span></p>
                  <div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F3F8F791-01F9-4786-988A-59C86673D5FF"><img src="img/remaptablelist.gif" alt="Description of remaptablelist.eps follows" title="Description of remaptablelist.eps follows" longdesc="img_text/remaptablelist.html"><br><a href="img_text/remaptablelist.html">Description of the illustration remaptablelist.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-10B79C7C-F269-4531-9B9E-1DE4E1E743BD">Semantics</p>
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHDECB"><span class="bold"><span class="italic">recover</span></span></p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-BAD26656-02EE-4DAC-8BA0-8CBFF972BBF7">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes RECOVER command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e783">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e786">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e791" headers="d69128e783 ">
                                 <p><code class="codeph">DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e791 d69128e786 ">
                                 <p>Allocates automatic channels for the specified device type only. For example, if you configure automatic disk and tape channels, and if you issue <code class="codeph">RECOVER DEVICE TYPE DISK</code>, then RMAN allocates only disk channels.
                                 </p>
                                 <p>You configure a device type with the <code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">DEVICE TYPE</code> command (except for <code class="codeph">DISK</code>, which is preconfigured) before specifying the <code class="codeph">DEVICE TYPE</code> option.
                                 </p>
                                 <p><span class="bold">Note:</span> You cannot manually allocate channels and then run <code class="codeph">RECOVER DEVICE TYPE</code>.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e840" headers="d69128e783 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDBIFBF">recoverSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e840 d69128e786 ">
                                 <p>Specifies the type of object being recovered.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDBIFBF"><span class="bold"><span class="italic">recoverSpec</span></span></p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-5CA85DE2-B4F2-4844-9C6E-32A85D645F06">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes RECOVER command recoverSpec parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e861">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e864">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e869" headers="d69128e861 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBIGJEH">recoverObject</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e869 d69128e864 ">
                                 <p>Specifies the type of object being recovered.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e879" headers="d69128e861 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDCAGGA">blockObject</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e879 d69128e864 ">
                                 <p>Specifies the blocks to be recovered with block media recovery.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e889" headers="d69128e861 ">
                                 <p><span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383">recoverOptionList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e889 d69128e864 ">
                                 <p>Specifies recovery options.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBIGJEH"><span class="bold"><span class="italic">recoverObject</span></span></p>
                  <p>This subclause specifies which files to recover. Refer to <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject::=</a></span> for the syntax diagram.
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F4C3820B-534E-4F16-BF3C-768698D33D91">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes RECOVER command recoverObject parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e916">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e919">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e924" headers="d69128e916 ">
                                 <p><code class="codeph">COPY&nbsp;OF</code> <span class="italic"><code class="codeph"><a href="dbObject.html#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">dbObject</a></code></span>   
                                 </p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e924 d69128e919 ">
                                 <p>Applies incremental backups to the specified image copy to roll it forward to any time equal to or before the most recent incremental backup of the file. The existing image copy is overwritten and remains in a fuzzy state during the recovery. RMAN makes an autobackup after recovering the image copy.</p>
                                 <p>This command updates a data file copy and is <span class="italic">not</span> a media recovery of a current database file. This command is meant to be used with the <code class="codeph">BACKUP ... FOR RECOVER OF COPY</code> syntax to implement a strategy using incrementally updated backups.
                                 </p>
                                 <p>The following requirements must be met:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>At least one copy of each data file that you are recovering must exist.</p>
                                    </li>
                                    <li>
                                       <p>Incremental backups taken after the image copy that you are recovering must exist.</p>
                                    </li>
                                 </ul>
                                 <p>RMAN selects one suitable copy if there are multiple possible copies to which the incremental backups can be applied to carry out the operation.</p>
                                 <p><span class="bold">Note:</span> RMAN issues a warning (not an error) if it cannot recover to the specified time because no incremental backups are available.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e962" headers="d69128e916 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;WITH TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e962 d69128e919 ">
                                 <p>Specifies a tag name to identify the image copy to be rolled forward.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e974" headers="d69128e916 ">
                                 <p><code class="codeph">DATAFILECOPY</code> <code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e974 d69128e919 ">
                                 <p>Applies incremental backups to the specified data file image copy (see <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDFCFJI">Example 3-4</a>). Refer to description of <code class="codeph">RECOVER COPY OF</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e995" headers="d69128e916 ">
                                 <p><span class="italic"><code class="codeph"><a href="dbObject.html#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">dbObject</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e995 d69128e919 ">
                                 <p>Specifies the data blocks that require recovery.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1006" headers="d69128e916 ">
                                 <p><code class="codeph">STANDBY DATABASE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1006 d69128e919 ">
                                 <p></p>
                                 <p>Applies incremental backups, rolls forward, and then restarts the physical standby database. The primary database using which the standby database must be refreshed is specified using the <code class="codeph">FROM SERVICE</code> clause.
                                 </p>
                                 <p>Connect to the physical standby database as target and specify the net service name of the physical standby database in the <code class="codeph">FROM SERVICE</code> clause. 
                                 </p>
                                 <p><span class="bold">Note:</span> The only clauses that can be used with <code class="codeph">STANDBY DATABASE</code> are <code class="codeph">PFILE</code> and <code class="codeph">FROM SERVICE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1036" headers="d69128e916 ">
                                 <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG"><code class="codeph">FOREIGN DATAFILECOPY </code><code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1036 d69128e919 ">
                                 <p>Specifies the names of the foreign data file copies that need to be made consistent by applying an incremental backup. These foreign data file copies were created during an inconsistent cross-platform backup by using either the <code class="codeph">CONVERT</code> or <code class="codeph">BACKUP</code> command with the <code class="codeph">ALLOW INCONSISTENT</code> clause.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1060" headers="d69128e916 ">
                                 <p>  <code class="codeph">FROM BACKUPSET</code> <code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1060 d69128e919 ">
                                 <p>Specifies the name of the backup set containing the cross-platform incremental backup that must be applied to the foreign data file copies specified using the <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG">FOREIGN DATAFILECOPY 'filename'</a> clause.
                                 </p>
                                 <p>The following conditions must be satisfied for a cross-platform incremental backup to be applied:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The start SCN of each data file in the cross-platform incremental backup must be less than the current checkpoint SCN of the foreign data file copy.</p>
                                    </li>
                                    <li>
                                       <p>The foreign data file copy must not be modified.</p>
                                       <p>For example, it should not have been plugged in to the target database, changed to read-write mode, and then changed back to read-only mode. This changes the database ID and file number in the foreign data file copy header.</p>
                                    </li>
                                 </ul>
                                 <p>If these conditions are not met, an error occurs and the cross-platform incremental backup is not applied to the foreign data file copies.</p>
                                 <p></p>
                                 <p><span class="bold">Note:</span> You cannot apply an incremental backup consisting of multiple backup sets to a set of foreign data files.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1098" headers="d69128e916 ">
                                 <p><code class="codeph">TABLE</code> <span class="italic"><code class="codeph">schema.table</code></span><code class="codeph">[:</code><span class="italic"><code class="codeph">partition</code></span><code class="codeph">]</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1098 d69128e919 ">
                                 <p>Specifies the tables or table partitions that must be recovered. The target database must be in read-write mode.</p>
                                 <p></p>
                                 <p>Before performing the recovery, RMAN checks if there is sufficient space on the target host to store files for the auxiliary instance that is used during recovery. If sufficient space does not exist, then RMAN displays an error message and exits.</p>
                                 <p>You can assign new names for recovered tables or table partitions in the target database by using the <code class="codeph">REMAP TABLE</code> option.
                                 </p>
                                 <p>When the recovered tables are imported into the target database, if a table with the same name exists in the target database, an error message is displayed indicating that the <code class="codeph">REMAP TABLE</code> clause must be used to rename the tables.
                                 </p>
                                 <p>When you recover only certain partitions from a partitioned table, each partition is imported into the target database as separate table. If <code class="codeph">REMAP TABLE</code> is not used to rename recovered objects, RMAN names each table by using a concatenation of the table name and partition name. The table names of the recovered objects are in the format <span class="italic"><code class="codeph">tablename_partitionname</code></span>. If a table with this name exists in the target database, RMAN appends _1 to the generated table name. If a table with this name too exists, RMAN appends _2 to the table name, and so on.
                                 </p>
                                 <p>See <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEEDH">Example 3-8</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1142" headers="d69128e916 ">
                                 <p><code class="codeph"> OF PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1142 d69128e919 ">
                                 <p>In a CDB, the name of a <a id="d69128e1153" class="indexterm-anchor"></a><a id="d69128e1157" class="indexterm-anchor"></a>PDB in which the table or table partition that must be recovered resides. To recover tables or table partitions in a PDB, you must connect to the root as described in <span class="q">"<a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>"</span>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1167" headers="d69128e916 ">
                                 <p><code class="codeph">SKIP</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1167 d69128e919 ">
                                 <p>Takes the data files in the specified tablespaces offline before starting media recovery. These files are left offline after the media recovery is complete.</p>
                                 <p>This option is useful for avoiding recovery of tablespaces containing only temporary data or for postponing recovery of some tablespaces. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1177" headers="d69128e916 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;FOREVER</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1177 d69128e919 ">
                                 <p>Takes the data files offline with the <code class="codeph">DROP</code> option (see <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">Example 3-3</a>). Use <code class="codeph">SKIP FOREVER TABLESPACE</code> when you intend to drop the specified tablespaces after opening the database with the <code class="codeph">RESETLOGS</code> option.
                                 </p>
                                 <p><span class="bold">Note:</span> If you perform incomplete recovery, then <code class="codeph">SKIP</code> requires the <code class="codeph">FOREVER</code> option.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1207" headers="d69128e916 "><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1207 d69128e919 ">
                                 <p>Specifies the name of the tablespace to take offline.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1218" headers="d69128e916 ">
                                 <p><code class="codeph">TABLESPACE </code><span class="italic"><code class="codeph">pdb_name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1218 d69128e919 ">
                                 <p>The name of a tablespace in a PDB.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1234" headers="d69128e916 ">
                                 <p><code class="codeph">SNAPSHOT TIME</code> <code class="codeph">'</code><span class="italic"><code class="codeph">date_string</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1234 d69128e919 ">
                                 <p>Specifies time-based recovery from a snapshot backup that was created using Storage Snapshot Optimization. date_string is the time at which the snapshot was completed and is specified in RMAN <code class="codeph">TIME</code> format (defined by <code class="codeph">NLS_DATE_FORMAT</code> environment variable).
                                 </p>
                                 <p>You can combine <code class="codeph">SNAPSHOT TIME</code> with <code class="codeph">UNTIL TIME</code> or <code class="codeph">UNTIL SCN</code> to do a database point-in-time recovery (DBPITR). However, you can only do a DBPITR to a time or an SCN greater than specified snapshot completion time. 
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="q">"<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF">Recovery Using Storage Snapshots</a>"</span> for information about the requirements of the snapshot system and how to specify the snapshot time.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1275" headers="d69128e916 "><a id="d69128e1276" class="indexterm-anchor"></a><a id="d69128e1280" class="indexterm-anchor"></a><code class="codeph">TO&nbsp;RESTORE&nbsp;POINT</code> <span class="italic"><code class="codeph">restore_point_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1275 d69128e919 ">
                                 <p>Specifies a restore point for termination of the <code class="codeph">RECOVER</code> command, with the SCN at which the restore point was created as the upper, inclusive limit. Because the limit is inclusive, RMAN selects only files that it can use to recover up to <span class="italic">and including</span> the SCN corresponding to the restore point.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1300" headers="d69128e916 ">
                                 <p><span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1300 d69128e919 ">
                                 <p>Specifies a past time, SCN, or log sequence number for termination of the <code class="codeph">RECOVER</code> command. 
                                 </p>
                                 <p>When used with one or more tablespaces, the clause indicates a tablespace point-in-time recovery (TSPITR) operation for the named tablespaces. Do not use this clause with <code class="codeph">RECOVER DATAFILE</code> or for <code class="codeph">RECOVER DATABASE</code> (see <span class="q">"<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDJBACD">Usage Notes</a>"</span>). After database point-in-time recovery (DBPITR), you must open the database with the <code class="codeph">RESETLOGS</code> option.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1338" headers="d69128e916 ">
                                 <p><code class="codeph">UNTIL AVAILABLE REDO</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1338 d69128e919 ">Finds the last available archived redo log and online redo logs, and recovers the database to the point where a log is missing.
                                 <p>You can use this option only while performing recovery for a whole database. You cannot recover a data file, tablespace, or PDB using the <code class="codeph">UNTIL AVAILABLE REDO</code> option.
                                 </p>
                                 <p>To perform point-in-time recovery for a PDB, you must specify the SCN for recovery.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEGJI"><span class="bold"><span class="italic">dbObject</span></span></p>
                  <p>This subclause specifies whether to recover the database or a subset of the database. Refer to <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHCII">dbObject::=</a></span> for the syntax diagram.
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-C00879F3-38C3-4D79-ADBD-DB07E23AA9C9">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes dbObject subclause parameters of RECOVER command" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e1369">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e1372">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1377" headers="d69128e1369 "><code class="codeph">APPLICATION ROOT DATABASE</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1377 d69128e1372 ">
                                 <p></p>
                                 <p>Specifies all data files in the application root. </p>
                                 <p>Connect to the CDB root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. Or, connect to application root as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1399" headers="d69128e1369 ">
                                 <p><code class="codeph">DATABASE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1399 d69128e1372 ">
                                 <p>Specifies the entire database (see <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">Example 3-3</a>). For CDBs, it specifies the entire CDB.
                                 </p>
                                 <p>In a CDB, recovers the entire CDB. You connect to the root to back up the whole CDB as described in <span class="q">"<a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>"</span>.
                                 </p>
                                 <p></p>
                                 <p>In an application container, recovers the entire application container to the specified point in time. This includes the application root and all application PDBs that belong to this application root. You connect to the application root as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                                 <p>By default, the <code class="codeph">RECOVER DATABASE</code> command does not recover files that are offline normal at the point in time to which the files are being recovered. RMAN omits offline normal files with no further checking.
                                 </p>
                                 <p>When recovering after the loss of control files, RMAN automatically updates the control file to point to the actual location of the data files on disk (see <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDEAEGH">Example 3-5</a>).
                                 </p>
                                 <p>If RMAN encounters redo for adding a data file, then RMAN automatically creates a new data file unless the tablespace containing the added data file is skipped during recovery. This situation can arise when a backup control file is restored before recovery and the backup control file does not contain a record of the recently-added data file.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1435" headers="d69128e1369 ">
                                 <p><code class="codeph">DATABASE ROOT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1435 d69128e1372 ">
                                 <p>Specifies only <a id="d69128e1442" class="indexterm-anchor"></a><a id="d69128e1446" class="indexterm-anchor"></a>the root in a CDB. Connect to the root as described in <span class="q">"<a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>"</span>.
                                 </p>
                                 <p></p>
                                 <p>In an application container, recovers online data files belonging to the application root and all the application PDBs. Connect to the application root as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1465" headers="d69128e1369 ">
                                 <p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1465 d69128e1372 ">
                                 <p>Specifies one or more <a id="d69128e1477" class="indexterm-anchor"></a><a id="d69128e1481" class="indexterm-anchor"></a>PDBs in a CDB. No other PDBs are affected; they can remain open and operational. Use a comma-delimited list to specify multiple PDBs. To use this clause, you must connect to the root.
                                 </p>
                                 <p>Performing complete recovery does not require you to connect to the root. You connect to the root to perform any of the following operations for PDBs: point-in-time recovery, table recovery, TSPITR, or duplication. To connect to the root or a PDB, see <span class="q">"<a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>."</span>.
                                 </p>
                                 <p></p>
                                 <p>In an application container, connect to the CDB root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege and specify the name of the application root in <code class="codeph"><span class="codeinlineitalic">pdb_name</span></code> to recover the application root and all application PDBs. 
                                 </p>
                                 <p>To recover an application PDB, connect to the application root as an application common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACK</code> privilege. To recover multiple application PDBs, specify a common-separated list of application PDB names.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1515" headers="d69128e1369 ">
                                 <p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></span></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1515 d69128e1372 ">
                                 <p>Specifies a list of one or more data files by either file name or absolute data file number. </p>
                                 <p>The target database must be mounted or open. If the database is open, then the data files to be recovered must be offline.</p>
                                 <p>If you are not using a recovery catalog, then the file name must be the name of the data file as recorded in the control file. If you are using a recovery catalog, then the file name of the data file must be the most recent name recorded in the catalog, even if the name in the control file has been updated more recently. For example, assume that a data file was renamed in the control file, but the instance fails before you resynchronize the catalog. Specify the old name of the data file in the <code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> command because this is the name recorded in the catalog.
                                 </p>
                                 <p><span class="bold">Note:</span> You cannot arbitrarily recover individual data files to different points in time, although you can recover the whole database to a single point in time or recover wholly contained tablespaces to a point in time different from the rest of the database (TSPITR). For more information on TSPITR, see the procedure described in <a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1557" headers="d69128e1369 "><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1557 d69128e1372 ">
                                 <p>Specifies a list of one or more tablespaces. The target database must be mounted or open. If the database is open, then the tablespaces to be recovered must be offline.</p>
                                 <p>When connected to the root in a <a id="d69128e1569" class="indexterm-anchor"></a><a id="d69128e1575" class="indexterm-anchor"></a>CDB, specifies the tablespaces in the root. Specifies the names of tablespaces in a PDB when connected to a PDB.
                                 </p>
                                 <p>In a CDB, specifies the name of a tablespace in the root when connected to the root, and specifies the name of a tablespace in a PDB when connected to a PDB.</p>
                                 <p><span class="bold">Note:</span> If the RMAN encounters redo for adding a data file, then RMAN automatically creates a new data file. This situation can arise when a backup control file is restored before recovery and the backup control file does not contain a record of the recently-added data file.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1587" headers="d69128e1369 ">
                                 <p><code class="codeph">TABLESPACE </code><span class="italic"><code class="codeph">pdb-name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1587 d69128e1372 ">
                                 <p>The name of the tablespace in a PDB. Multiple PDBs can have tablespaces with the same name. A qualifier before the name uniquely identifies the tablespace. This syntax is needed only when connected to the root. When connected directly to a PDB, use <code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span>. <span class="italic"><code class="codeph">pdb-name</code></span> is the name of a PDB.
                                 </p>
                                 <p>See the previous description for <code class="codeph">TABLESPACE</code> for general information.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDCAGGA"><span class="bold"><span class="italic">blockObject</span></span></p>
                  <p>This subclause specifies the data blocks that require recovery. Refer to <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB">blockObject::=</a></span> for the syntax diagram. Refer to <span class="q">"<a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBDFJFG">Prerequisites Specific to RECOVER BLOCK</a>"</span> for prerequisites specific to block media recovery.
                  </p>
                  <p>You can either use <code class="codeph">RECOVER CORRUPTION LIST</code> to recover all blocks reported in the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view, or specify the data file number and block number or the tablespace and data block address (DBA). RMAN can only perform complete recovery of individual blocks.
                  </p>
                  <p>By default, if Flashback Database is enabled, then RMAN searches the flashback logs for good copies of corrupt blocks. By default, if the target database exists in a Data Guard environment, then <code class="codeph">RECOVER BLOCK</code> command can automatically retrieve blocks from a physical standby database to a primary database and vice-versa.
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-FEA4B081-D317-4180-81E6-9054E16ACA7B">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes RECOVER command blockObject parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e1654">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e1657">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1662" headers="d69128e1654 ">
                                 <p><a id="d69128e1664" class="indexterm-anchor"></a><a id="d69128e1666" class="indexterm-anchor"></a><code class="codeph">CORRUPTION&nbsp;LIST</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1662 d69128e1657 ">
                                 <p>Recovers all physically corrupt blocks listed in the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view. Block media recovery may not be able to repair all listed logically corrupt blocks. In these cases, alternate recovery methods, such as tablespace point-in-time recovery, or dropping and recreating the affected objects, may repair the corruption.
                                 </p>
                                 <p>The <a id="d69128e1680" class="indexterm-anchor"></a><a id="d69128e1682" class="indexterm-anchor"></a><code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view displays blocks marked corrupt by Oracle Database components such as RMAN commands, <code class="codeph">ANALYZE</code>, SQL queries, and so on. In short, any process that encounters an <a id="d69128e1692" class="indexterm-anchor"></a><a id="d69128e1694" class="indexterm-anchor"></a><code class="codeph">ORA-1578</code> error records the block corruption in this view. The following types of corruption result in rows added to this view:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Physical corruption (sometimes called media corruption). The database does not recognize the block at all: the checksum is invalid, the block contains all zeros, or the header and footer of the block do not match.</p>
                                    </li>
                                    <li>
                                       <p>Logical corruption. The block has a valid checksum, the header and footer match, and so forth, but the contents are logically inconsistent.</p>
                                    </li>
                                 </ul>
                                 <p>The view does not record corruptions that can be detected by validating relationships between blocks and segments, but cannot be detected by a check of an individual block.</p>
                                 <p><span class="bold">Note:</span> Any RMAN command that fixes or detects that a block is repaired updates <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>. For example, RMAN updates the repository at the end of successful block media recovery. If a <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>, <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>, or <code class="codeph"><a href="VALIDATE.html#GUID-ECE57997-40CE-4029-A434-320441D2AD1E">VALIDATE</a></code> command detects that a block is no longer corrupted, then it removes the repaired block from the view.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1733" headers="d69128e1654 ">
                                 <p><code class="codeph">DATAFILE&nbsp;</code><span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span>       
                                 </p>
                                 <p><code class="codeph">   BLOCK</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TO</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1733 d69128e1657 ">
                                 <p>Recovers an individual data block or set of data blocks within a data file. It can copy blocks from either a standby or a primary database. The <code class="codeph">TO</code> range is inclusive, so that <code class="codeph">BLOCK 10 TO BLOCK 20</code> includes both block 10 and block 20.
                                 </p>
                                 <p>Block media recovery is useful when the data loss or corruption applies to a small number of blocks rather than to an entire data file. Typically, block corruption is reported in error messages in trace files or by the <code class="codeph"><a href="ADVISE-FAILURE.html#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C">ADVISE FAILURE</a></code> command. Block-level data loss usually results from:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>I/O errors causing minor data loss</p>
                                    </li>
                                    <li>
                                       <p>Memory corruptions that get written to disk</p>
                                    </li>
                                 </ul>
                                 <p>If you do not specify an option from <span class="italic"><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383">recoverOptionList</a></code></span>, and if Flashback Database is enabled on the database, then <code class="codeph">RECOVER BLOCK</code> first searches the flashback logs and then the backups for a good version of the block to restore.
                                 </p>
                                 <p>Blocks marked media corrupt are not accessible until recovery completes.</p>
                                 <p><span class="bold">Note:</span> You can only perform complete recovery of individual blocks. In other words, you cannot stop recovery before all redo has been applied to the block.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1806" headers="d69128e1654 "><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DBA</code> <span class="italic"><code class="codeph">integer</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1806 d69128e1657 ">
                                 <p>Specifies the tablespace name or number containing the corrupt blocks and the data block address (DBA) of the corrupt block. You can only perform block media recovery on corrupt blocks.</p>
                                 <p><span class="bold">Note:</span> The data file header block (block 1) cannot be recovered.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1828" headers="d69128e1654 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DBA</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1828 d69128e1657 ">
                                 <p>The name of the tablespace in a PDB. Multiple PDBs can have tablespaces with the same name. A qualifier before the name uniquely identifies the tablespace. <span class="italic"><code class="codeph">pdb-name</code></span> is the name of a PDB.
                                 </p>
                                 <p>See the previous description of <code class="codeph">TABLESPACE</code> for general information.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383"><span class="bold"><span class="italic">recoverOptionList</span></span></p>
                  <p>This subclause specifies various recovery options. Refer to <span class="italic"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList::=</a></span> for the syntax diagram.
                  </p>
                  <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-B6882697-4195-4B85-8FB3-E38351AF4A86">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes RECOVER command recoverOptionList parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d69128e1878">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d69128e1881">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1886" headers="d69128e1878 ">
                                 <p><code class="codeph">ALLOW</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">CORRUPTION</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1886 d69128e1881 ">
                                 <p>Specifies the number of corrupt blocks that can be tolerated while allowing recovery to proceed. You can set this parameter in case of redo log corruption.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1901" headers="d69128e1878 ">
                                 <p><code class="codeph">ARCHIVELOG&nbsp;TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1901 d69128e1881 ">
                                 <p>Specifies the tag for an archived log backup to be used during recovery. Tag names are not case sensitive and display in all uppercase. If the tagged backup does not contain all the necessary archived redo log files for recovery, then RMAN uses logs or incremental backups as needed from whatever is available. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1913" headers="d69128e1878 "><code class="codeph">AUXILIARY&nbsp;DESTINATION</code> <code class="codeph">'</code><span class="italic"><code class="codeph">location</code></span><code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e1913 d69128e1881 ">
                                 <p>Specifies a location where auxiliary set data files, control files, and online redo logs are created during TSPITR if another location for an individual file is not explicitly specified.</p>
                                 <p>If you do not specify <code class="codeph">AUXILIARY DESTINATION</code> for a TSPITR, then you must specify the naming of individual auxiliary set data files, control files, and online redo logs before executing <code class="codeph">RECOVER TABLESPACE</code> with the <code class="codeph">UNTIL</code> clause. Otherwise, TSPITR fails.
                                 </p>
                                 <p>While performing point-in-time recovery of PDBs, if no auxiliary destination is specified, then the fast recovery area is used as the auxiliary destination. When an auxiliary destination is not specified and a fast recovery area is not configured, the recovery of the PDB fails.</p>
                                 <p><span class="bold">See also:</span> The chapter on TSPITR in <a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more details about the auxiliary destination
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1950" headers="d69128e1878 ">
                                 <p><code class="codeph">CHECK&nbsp;LOGICAL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1950 d69128e1881 ">
                                 <p>Tests data and index blocks that pass physical corruption checks for logical corruption, for example, corruption of a row piece or index entry. If RMAN finds logical corruption, then it logs the block in the <code class="codeph">alert.log</code> and server session trace file.
                                 </p>
                                 <p>The <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code> setting represents the total number of physical and logical corruptions permitted on a file. By default, <code class="codeph">MAXCORRUPT</code> is <code class="codeph">0</code>, so that if any corrupt blocks exist, media recovery fails. If recovery including corrupt blocks is permissible, then set <code class="codeph">MAXCORRUPT</code> to the smallest number of corrupt blocks that causes media recovery to fail. For example, to tolerate one corrupt block, set <code class="codeph">MAXCORRUPT</code> to 1.
                                 </p>
                                 <p>If the total number of physical and logical corruptions detected for a file is less than its <code class="codeph">MAXCORRUPT</code> setting, then the RMAN command completes and the database populates <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> with corrupt block ranges. Otherwise, the command terminates without populating <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e1995" headers="d69128e1878 ">
                                 <p><code class="codeph">DATAPUMP DESTINATION</code> <code class="codeph">'</code><span class="italic"><code class="codeph">datapump_destination</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e1995 d69128e1881 ">
                                 <p>Specifies the location of the Data Pump export dump file that contains the tables or table partitions that are recovered from an RMAN backup.</p>
                                 <p>If you do not specify a Data Pump destination, RMAN creates the export dump file in the destination indicated by <code class="codeph">AUXILARY DESTINATION</code>. If no auxiliary destination is specified, RMAN creates the dump file in a default operating system-specific location. On Linux, the default location is <code class="codeph">$ORACLE_HOME/dbs</code>. On Windows the default location is <code class="codeph">%ORACLE_HOME\database</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2022" headers="d69128e1878 ">
                                 <p><code class="codeph">DELETE&nbsp;ARCHIVELOG</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2022 d69128e1881 ">
                                 <p>Deletes archived redo log files restored from backups or copies that are no longer needed. RMAN does not delete archived redo log files that were on disk before the <code class="codeph">RESTORE</code> command started. If you do not specify <code class="codeph">MAXSIZE</code>, then RMAN deletes restored archived redo log files as they are applied.
                                 </p>
                                 <p><span class="bold">Note:</span> If archived redo log files are restored to the fast recovery area, then the <code class="codeph">DELETE ARCHIVELOG</code> option is enabled by default.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2043" headers="d69128e1878 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;MAXSIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2043 d69128e1881 ">
                                 <p>Does not use more than <span class="italic"><code class="codeph">sizeSpec</code></span> amount of disk space for restored archived redo log files. If recovery requires the restore of a log larger than the <code class="codeph">MAXSIZE</code> value, then RMAN reports an error indicating that you must increase the <code class="codeph">MAXSIZE</code> value. If <code class="codeph">MAXSIZE</code> is smaller than the backup set containing the logs, then RMAN must read the backup set more than once to extract the logs. In this situation, RMAN issues a warning to increase <code class="codeph">MAXSIZE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2071" headers="d69128e1878 ">
                                 <p><code class="codeph">DUMP FILE</code> <code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2071 d69128e1881 ">
                                 <p>Specifies the name of the Data Pump export dump file that contains the recovered tables or table partitions. If you do not specify a name for the dump file, RMAN assigns a default name based on the operating system of the target database. The default name is <code class="codeph">tspitr_</code><span class="italic"><code class="codeph">SID-of-clone_n.dmp</code></span> where <span class="italic"><code class="codeph">SID-of-clone</code></span> is the Oracle SID of the auxiliary database used by RMAN for recovery and <span class="italic"><code class="codeph">n</code></span> is a randomly-generated number. The dump file is created in the location specified by <code class="codeph">DATAPUMP DESTINATION</code>.
                                 </p>
                                 <p>If <code class="codeph">DATAPUMP DESTINATION</code> contains a file with the name specified in <code class="codeph">DUMP FILE</code>, the recovery process fails.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHIFDB">DATAPUMP DESTINATION</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2118" headers="d69128e1878 ">
                                 <p><code class="codeph">EXCLUDE&nbsp;FLASHBACK&nbsp;LOG</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2118 d69128e1881 ">
                                 <p>Does not search the flashback logs for blocks to restore. By default, RMAN searches the flashback logs if Flashback Database is enabled.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2126" headers="d69128e1878 ">
                                 <p><code class="codeph">EXCLUDE&nbsp;STANDBY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2126 d69128e1881 ">
                                 <p>Does not search a physical standby database for blocks to restore. By default, in a Data Guard environment RMAN searches the blocks from a physical standby database.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2134" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM&nbsp;BACKUPSET</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2134 d69128e1881 ">
                                 <p>Specifies that only backup sets are restored. This clause is supported only while performing block media recovery. The <code class="codeph">RECOVER ... BLOCK</code> command is used to perform block media recovery.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2146" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM&nbsp;DATAFILECOPY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2146 d69128e1881 ">
                                 <p>Restores only data file image copies.</p>
                                 <p>This clause is supported only while performing block media recovery. The <code class="codeph">RECOVER ... </code><code class="codeph">BLOCK</code> command is used to perform block media recovery.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2161" headers="d69128e1878 "><code class="codeph">FROM SPARSE</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2161 d69128e1881 ">
                                 <p></p>
                                 <p>Recovers data files from archive logs and redo logs after restoring data files from the selected sparse backup. RMAN first restores data files from sparse backups and then recovers the data files.</p>
                                 <p>To perform recovery with the <code class="codeph">FROM SPARSE</code> clause, the <code class="codeph">COMPATIBLE</code> initialization parameter of the sparse database being restored must be 12.2 or higher.
                                 </p>
                                 <p><span class="bold">Note:</span> This clause can be used only when performing point-in-time recovery.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2181" headers="d69128e1878 "><code class="codeph">FROM NONSPARSE</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2181 d69128e1881 ">
                                 <p></p>
                                 <p>Performs traditional complete recovery for the specified non-sparse database. Data files are first restored from non-sparse backups and then recovered. To perform point-in-time recovery with the <code class="codeph">FROM NONSPARSE</code> clause, the <code class="codeph">COMPATIBLE</code> initialization parameter of the sparse database being restored must be set to 12.2 or higher. Data files are restored from non-sparse backups first and then recovered.
                                 </p>
                                 <p><span class="bold">Note:</span> This clause can be used only when performing point-in-time recovery.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2199" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM PLATFORM</code> <code class="codeph">'</code><span class="italic"><code class="codeph">platform</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2199 d69128e1881 ">
                                 <p>Specifies the name of the source platform on which the cross-platform backup was created. The platform name specified must match the platform identifier stored in the cross-platform backup header.</p>
                                 <p>This clause is required when conversion is performed on the destination database. If conversion is performed on the source database (by using the <code class="codeph">TO PLATFORM</code> clause in the <code class="codeph">BACKUP</code> command), then this clause is optional. When this clause is omitted, you can still recover a cross-platform backup by specifying the <code class="codeph">FOREIGN DATAFILECOPY</code> clause with the <code class="codeph">FROM BACKUPSET</code> clause.
                                 </p>
                                 <p></p>
                                 <p>To perform cross-platform tablespace transport by connecting over the network to a remote database, use the <code class="codeph">FROM PLATFORM</code> clause with the <code class="codeph">FROM SERVICE</code> clause. RMAN then creates the required backup sets on the source database, transfers them to the destination database, and then restores them on the destination.
                                 </p>
                                 <p>See <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG">FOREIGN DATAFILECOPY 'filename'</a>.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../bradv/rman-transporting-data-across-platforms.html#BRADV-GUID-65AADCB6-CC9A-4229-9AB8-805C37E4471F" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more information about source and destination platform conversion.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2253" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM PREPLUGIN</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2253 d69128e1881 ">
                                 <p>Uses preplugin incremental backups and preplugin archive redo log backups to recover a PDB. The PDB may be a source non-CDB or a PDB that was plugged in to the current CDB.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2261" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM SERVICE</code> <span class="italic"><code class="codeph">service_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2261 d69128e1881 ">
                                 <p>Recovers data files using backup sets that are transferred, over the network, from a remote database. <span class="italic"><code class="codeph">service_name</code></span> specifies the service name of the remote database.
                                 </p>
                                 <p>See <span class="q">"<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CFAFGIJJ">Restoring Data Files and Control Files Using Files from a Remote Host</a>"</span>.
                                 </p>
                                 <p></p>
                                 <p>To perform cross-platform tablespace transport by connecting over the network to a remote database, use the <code class="codeph">FROM PLATFORM</code> clause with the <code class="codeph">FROM SERVICE</code> clause. RMAN connects to the source database, creates the required backups, transfers them to the destination, and then restores the backups on the destination.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2292" headers="d69128e1878 "><code class="codeph">NONLOGGED BLOCK</code></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2292 d69128e1881 ">
                                 <p>Extends the recovery to nonlogged blocks which are listed in the <code class="codeph">V$NONLOGGED_BLOCK</code> view. RMAN first performs a validation to determine the nonlogged block ranges and then uses these ranges to perform recovery of the objects specified in the <span class="italic">dbObject</span> clause. In Oracle Database 11.2 and earlier releases, information about nonlogged blocks was available in the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view.
                                 </p>
                                 <p>When run on a physical standby database, <code class="codeph">RECOVER</code> fetches data blocks from the primary database. When run on a primary database, data blocks are fetched from the most appropriate standby database. In this case, the primary database must be mounted.
                                 </p>
                                 <p>You must stop standby recovery before issuing a <code class="codeph">RECOVER</code> command with this option. 
                                 </p>
                                 <p>If the target database does not use Automatic Memory Management and the <code class="codeph">SGA_TARGET</code> parameter is not set, then you must specify a value for the <code class="codeph">DATA_TRANSFER_CACHE_SIZE</code> initialization parameter. 
                                 </p>
                                 <p></p>
                                 <p><span class="bold">See Also:</span> <a href="../sbydb/creating-oracle-data-guard-physical-standby.html#GUID-AE2B1237-57A1-4745-A04C-4246A831A963" target="_blank"><span><span><cite>Oracle Data Guard Concepts and Administration</cite></span></span></a></p>
                                 <p><span class="bold">See Also:</span> <a href="../admin/managing-memory.html#ADMIN-GUID-0E201F66-D280-472A-AD80-20AB8F7E9C01" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></p>
                                 <p><span class="bold">See Also:</span> <a href="../refrn/DATA_TRANSFER_CACHE_SIZE.html#REFRN-GUID-322093B7-1673-490D-8A1A-5F461D7897DD" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2355" headers="d69128e1878 ">
                                 <p><code class="codeph">FROM TAG</code> <code class="codeph">'</code><span class="italic"><code class="codeph">tag_name</code></span><code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2355 d69128e1881 ">
                                 <p>Specifies the tag for an incremental backup to be used during recovery. If the tagged backup does not contain all the necessary incrementals for recovery, then RMAN uses logs or incremental backups as needed from whatever is available. Tag names are not case sensitive and display in all uppercase.</p>
                                 <p><span class="bold">See Also:</span> <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> to learn how a tag can be applied to an individual copy of a duplexed backup set, and to learn about the default file name format for backup tags
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2380" headers="d69128e1878 ">
                                 <p><code class="codeph">NOPARALLEL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2380 d69128e1881 ">
                                 <p>Does not perform media recovery in parallel. Parallel execution is the default for <code class="codeph">RECOVER</code> (see the description of the <code class="codeph">RECOVER ... PARALLEL</code> option).
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2394" headers="d69128e1878 ">
                                 <p><code class="codeph">NOREDO</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2394 d69128e1881 ">
                                 <p>Suppresses the application of redo logs during recovery. Only incremental backups are applied.</p>
                                 <p>One use of this option is to use incremental backups to update full backups of <code class="codeph">NOARCHIVELOG</code> databases (see <a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDHFBFI">Example 3-6</a>). The <code class="codeph">NOREDO</code> options is required if redo logs are not available. If you do not specify <code class="codeph">NOREDO</code> when recovering a <code class="codeph">NOARCHIVELOG</code> database, then RMAN ends recovery and issues an error.
                                 </p>
                                 <p><span class="bold">Note:</span> Incremental backups of <code class="codeph">NOARCHIVELOG</code> databases can only be taken after a consistent shutdown.
                                 </p>
                                 <p>Another use is to update standby or duplicate databases. Incremental backups created with the <code class="codeph">BACKUP INCREMENTAL FROM SCN</code> command can be applied at a standby or duplicate database. The standby database procedure is described in <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span>.</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2435" headers="d69128e1878 ">
                                 <p><code class="codeph">NOTABLEIMPORT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2435 d69128e1881 ">
                                 <p>Specifies that RMAN must not import recovered tables or table partitions into the target database.</p>
                                 <p>The recovered objects are stored in an Data Pump export dump file that is specified using <code class="codeph">DUMP FILE</code> and <code class="codeph" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHIFDB">DATAPUMP DESTINATION</code>. If these clauses are omitted, the export dump file is created in a default location.
                                 </p>
                                 <p>When required, you need to explicitly import the tables or table partitions contained in the export dump file into the target database. Use the Data Pump import utility to import the recovered objects.</p>
                                 <p><span class="bold">Note:</span> You cannot use <code class="codeph">NOTABLEIMPORT</code> with the <code class="codeph">REMAP TABLE</code> or <code class="codeph">REMAP TABLESPACE</code> clauses.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2467" headers="d69128e1878 ">
                                 <p><code class="codeph">PARALLEL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2467 d69128e1881 ">
                                 <p>Specifies parallel recovery (default). </p>
                                 <p>By default, the database uses parallel media recovery to improve performance of the roll forward phase of media recovery. To override the default behavior of performing parallel recovery, use the <code class="codeph">RECOVER</code> with the <code class="codeph">NOPARALLEL</code> option, or <code class="codeph">RECOVER PARALLEL 0</code>. 
                                 </p>
                                 <p>In parallel media recovery, the database uses a "division of labor" approach to allocate different processes to different data blocks while rolling forward, thereby making the operation more efficient. The number of processes is derived from the <a id="d69128e2487" class="indexterm-anchor"></a><a id="d69128e2489" class="indexterm-anchor"></a><code class="codeph">CPU_COUNT</code> initialization parameter, which by default equals the number of CPUs on the system. For example, if parallel recovery is performed on a system where <code class="codeph">CPU_COUNT</code> is 4, and only one data file is recovered, then four spawned processes read blocks from the data file and apply redo.
                                 </p>
                                 <p>Typically, recovery is I/O-bound on reads from and writes to data blocks. Parallelism at the block level may only help recovery performance if it increases total I/Os, for example, by bypassing operating system restrictions on asynchronous I/Os. Systems with efficient asynchronous I/O see little benefit from parallel media recovery.</p>
                                 <p><span class="bold">Note:</span> The <a id="d69128e2505" class="indexterm-anchor"></a><a id="d69128e2507" class="indexterm-anchor"></a><code class="codeph">RECOVERY_PARALLELISM</code> initialization parameter controls instance or crash recovery only. Media recovery is not affected by the value used for <code class="codeph">RECOVERY_PARALLELISM</code>.
                                 </p>
                                 <p><span class="bold">See Also:</span> The description of the <code class="codeph">PARALLEL</code> clause in the discussion of <code class="codeph">CREATE TABLE</code> in <a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2532" headers="d69128e1878 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2532 d69128e1881 ">
                                 <p>Specifies the <span class="italic"><code class="codeph">integer</code></span> degree of parallelism. 
                                 </p>
                                 <p>Each parallel thread may use one or two parallel execution servers. Optional. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2549" headers="d69128e1878 ">
                                 <p><code class="codeph">FILE_NAME_CONVERT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2549 d69128e1881 ">
                                 <p></p>
                                 <p>Specifies how database file names on the source CDB map to the corresponding files on the destination CDB during cross-platform transport of a PDB to a destination CDB.</p>
                                 <p>Specify the pairs of strings used to convert the file names. You can use as many pairs of source and destination replacement strings as required. For example, you can set the string pattern to a value such as:</p><pre class="pre codeblock"><code>FILE_NAME_CONVERT = ('str1','str2','str3', 'str4' ...)</code></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2562" headers="d69128e1878 ">
                                 <p><code class="codeph">REMAP TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2562 d69128e1881 ">
                                 <p></p>
                                 <p>Renames recovered tables or table partitions in the target database. </p>
                                 <p>The recovered tables or table partitions can be mapped to a target database schema that is different from the one in which they originally existed. While recovering tables or table partitions into a different schema, you can either rename the objects or retain the original object names. You can import all the specified objects into the same target schema or into different target schemas.</p>
                                 <p>A single <code class="codeph">RECOVER</code> command can contain tables and table partitions belonging to different source schemas.
                                 </p>
                                 <p>When you recover a partitioned table, if you remap only some partitions in the table, then all the table partitions are imported as separate tables. Named constraints and indexes are not imported when you use the <code class="codeph">REMAP TABLE</code> option.
                                 </p>
                                 <p><span class="bold"><span class="italic">Note:</span></span> You cannot remap a table or partition that is not listed in the <code class="codeph">TABLE</code> clause of the <code class="codeph">RECOVER</code> command.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2594" headers="d69128e1878 ">
                                 <p><code class="codeph">REMAP TABLESPACE</code> <span class="italic"><code class="codeph">source_tablespace_name:target_tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2594 d69128e1881 ">
                                 <p>Imports the recovered tables or table partitions into a tablespace that is different from the one to which they belonged in the source database.</p>
                                 <p><code class="codeph">source_tablespace_name</code> refers to the name of the tablespace in which the tables or partitions resided in the source database and <code class="codeph">target_tablespace_name</code> refers to the name of the tablespace into which the tables or table partitions must be imported.
                                 </p>
                                 <p>Named constraints and indexes are not imported when you use the REMAP option.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2615" headers="d69128e1878 ">
                                 <p><code class="codeph">SECTION SIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2615 d69128e1881 ">
                                 <p>Parallelizes the validation by dividing each file into the specified section size. </p>
                                 <p>See <span class="q">"<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJCAHI">SECTION&nbsp;SIZE sizeSpec</a>"</span>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2633" headers="d69128e1878 ">
                                 <p><code class="codeph">SKIP OFFLINE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2633 d69128e1881 ">
                                 <p></p>
                                 <p>Skips offline data files during recovery.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2642" headers="d69128e1878 ">
                                 <p><code class="codeph">SKIP&nbsp;READONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2642 d69128e1881 ">
                                 <p>Omits read-only files from the recovery.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2650" headers="d69128e1878 ">
                                 <p><code class="codeph">TEST</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2650 d69128e1881 ">
                                 <p>Initiates a trial recovery. </p>
                                 <p>A trial recovery is useful if a normal recovery procedure has encountered a problem. It enables the database to look ahead into the redo stream to detect possible problems. The trial recovery applies redo in a way similar to normal recovery, but it does not write changes to disk and it rolls back its changes at the end of the trial recovery.</p>
                                 <p><span class="bold">Note:</span> You can use this clause only if you have restored a backup taken since the last <code class="codeph">RESETLOGS</code> operation. Otherwise, the database returns an error. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2667" headers="d69128e1878 "><code class="codeph">UNDO&nbsp;TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d69128e2667 d69128e1881 ">
                                 <p>Specifies a list of tablespaces with undo segments at the target time. Only for use with <code class="codeph">RECOVER TABLESPACE</code>.
                                 </p>
                                 <p>During TSPITR, RMAN needs information about which tablespaces had undo segments at the TSPITR target time. This information is usually available in the recovery catalog, if one is used. </p>
                                 <p>If there is no recovery catalog, or if the information is not found in the recovery catalog, then RMAN proceeds if the set of tablespaces with undo segments at the target time equals the set of tablespaces with undo segments now. If this assumption is not correct, then TSPITR fails with an error. In such a case, you can use <code class="codeph">UNDO TABLESPACE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2688" headers="d69128e1878 ">
                                 <p><code class="codeph">USING [COMPRESSED] BACKUPSET</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2688 d69128e1881 ">
                                 <p>Specifies that the files being recovered must be transferred from the remote database as compressed backup sets, if <code class="codeph">USING COMPRESSED BACKUPSET</code> is used. By default, RMAN transfers files as backup sets. Therefore, even if you do not use the <code class="codeph">USING BACKUPSET</code> clause, the files are transferred as backup sets. The compression algorithm from the RMAN configuration is used to perform compression. You can use a different compression algorithm by running the <code class="codeph">SET COMPRESSION ALGORITHM</code> before your <code class="codeph">RECOVER</code> command.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2709" headers="d69128e1878 ">
                                 <p><code class="codeph">USING</code> <code class="codeph"><span class="codeinlineitalic">‘filename’</span></code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2709 d69128e1881 ">
                                 <p></p>
                                 <p>Performs cross-platform transport of a PDB into a different destination CDB. The XML file that contains the metadata required to plug the PDB into the destination CDB is specified using <code class="codeph"><span class="codeinlineitalic">filename</span></code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d69128e2726" headers="d69128e1878 ">
                                 <p><code class="codeph">VALIDATE&nbsp;HEADER</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d69128e2726 d69128e1881 ">
                                 <p>Reports and validates—but does not restore—the backups that RMAN could use to restore files needed for the recovery.</p>
                                 <p>When you run <code class="codeph">RECOVER</code> with <code class="codeph">VALIDATE HEADER</code>, RMAN performs the same functions as when you specify the <code class="codeph">RESTORE ...</code> <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code> option. However, in addition to listing the files needed for restore and recovery, RMAN validates the backup file headers to determine whether the files on disk or in the media management catalog correspond to the metadata in the RMAN repository.
                                 </p>
                                 <p><span class="bold">See Also:</span> The description of the <code class="codeph">RESTORE ...</code> <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code> option
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAGEBEI">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-9CC03609-50AD-4DA6-9E59-0415AC566B12"><span class="italic">remapTableList</span></p>
                  <p>This subclause specifies the tables or table partitions that must be recovered.</p>
                  <p></p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-170D876A-CABB-4A02-BC24-C35E8DE2C371">
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Element descriptions for RECOVER remapTableList" width="100%" frame="hsides" border="1" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="29%" id="d69128e2774">Syntax Element</th>
                           <th align="left" valign="bottom" width="71%" id="d69128e2777">Description</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2782" headers="d69128e2774 ">
                              <p><code class="codeph">old_schema</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2782 d69128e2777 ">
                              <p>Name of the schema that contains the tables or table partitions that are being recovered.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2790" headers="d69128e2774 ">
                              <p><code class="codeph">old_tablename</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2790 d69128e2777 ">
                              <p>Name of the table that must be recovered.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2798" headers="d69128e2774 ">
                              <p><code class="codeph">partition</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2798 d69128e2777 ">
                              <p>Name of the table partition that must be recovered.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2806" headers="d69128e2774 ">
                              <p><code class="codeph">new_schema</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2806 d69128e2777 ">
                              <p>Name of the schema into which the tables and table partitions must be recovered.</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="29%" id="d69128e2814" headers="d69128e2774 ">
                              <p><code class="codeph">new_tablename</code></p>
                           </td>
                           <td align="left" valign="top" width="71%" headers="d69128e2814 d69128e2777 ">
                              <p>Name of the recovered table or table partitions in the target database.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A9CFEB9A-926F-4D11-AF9D-39ACD242006C">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-BA087714-AD22-48A1-AA29-8D55298AFE99">
                  <p class="titleinexample">Example 3-1 Recovering a Tablespace in an Open Database</p>
                  <p><a id="d69128e2828" class="indexterm-anchor"></a><a id="d69128e2830" class="indexterm-anchor"></a>Assume that the disk containing the data files for tablespace <code class="codeph">users</code> becomes unavailable because of a hardware error, but is repaired after a few minutes. This example takes tablespace <code class="codeph">users</code> offline, uses automatic channels to restore the data files to their default location and recover them (deleting the logs that it restored from tape), then brings the tablespace back online.
                  </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE users OFFLINE IMMEDIATE;
RESTORE TABLESPACE users;
RECOVER TABLESPACE users DELETE ARCHIVELOG MAXSIZE 2M;
ALTER TABLESPACE users ONLINE;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A03F2C8D-C33B-4E77-8D25-F5DCE6646BB6">
                  <p class="titleinexample">Example 3-2 Recovering Data Files Restored to New Locations</p>
                  <p><a id="d69128e2845" class="indexterm-anchor"></a>This example uses the preconfigured disk channel and manually allocates one media management channel to use data file copies on disk and backups on tape, and restores a data file in tablespace <code class="codeph">USERS</code> to a different location.
                  </p><pre class="oac_no_warn" dir="ltr">RUN
{  
  ALLOCATE CHANNEL ch1 DEVICE TYPE sbt;  
  ALTER TABLESPACE users OFFLINE IMMEDIATE;  
  SET NEWNAME FOR DATAFILE '/disk1/oradata/prod/users01.dbf' 
    TO '/disk2/users01.dbf';
  RESTORE TABLESPACE users;
  SWITCH DATAFILE ALL;
  RECOVER TABLESPACE users;
  ALTER TABLESPACE users ONLINE;
}</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">
                  <p class="titleinexample">Example 3-3 Performing DBPITR with a Backup Control File and Recovery Catalog</p>
                  <p><a id="d69128e2859" class="indexterm-anchor"></a>Assume that all data files, all control files, and archived redo log 58 were lost due to a disk failure. Also assume that you do not have incremental backups. You must recover the database with available archived redo log files. You do not need to restore tablespace <code class="codeph">TOOLS</code> because it has been read-only since before the most recent backup. After connecting RMAN to the target database and recovery catalog, issue the following commands:
                  </p><pre class="oac_no_warn" dir="ltr">STARTUP FORCE NOMOUNT;
RUN
{  
  SET UNTIL SEQUENCE 40 THREAD 1;  # Recover database until log sequence 40 
  RESTORE CONTROLFILE;
  ALTER DATABASE MOUNT;
  RESTORE DATABASE SKIP TABLESPACE tools;
  RECOVER DATABASE SKIP TABLESPACE tools;
}
ALTER DATABASE OPEN RESETLOGS;
</pre><p>RMAN automatically skips the restore and recovery of data file <code class="codeph">8</code>, which is the data file in the read-only tablespace. The following portion of sample output indicates the skip:
                  </p><pre class="oac_no_warn" dir="ltr">using channel ORA_DISK_1
allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=104 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
 
skipping datafile 8; already restored to file /disk1/oradata/prod/tools01.dbf
channel ORA_DISK_1: starting datafile backup set restore
.
.
.
Finished restore at 19-FEB-13 

Starting recover at 19-FEB-13
using channel ORA_DISK_1
using channel ORA_SBT_TAPE_1
datafile 8 not processed because file is read-only</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDFCFJI">
                  <p class="titleinexample">Example 3-4 Incrementally Updating Backups </p>
                  <p><a id="d69128e2881" class="indexterm-anchor"></a><a id="d69128e2885" class="indexterm-anchor"></a>By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. This example enables you to recover to any SCN within the previous week, but enables you to avoid having to apply more than one day of redo.
                  </p>
                  <p>Assume you run the following script daily. On first execution, the script creates an image copy backup of the database on disk with the specified tag. On the second through the seventh executions, the script creates a level 1 differential backup of the database. On the eighth and all subsequent executions, RMAN applies the level 1 incremental to the data file copy made 7 days ago and then makes a new level 1 backup with the changes from the previous day.</p><pre class="oac_no_warn" dir="ltr">RUN
{
  RECOVER COPY OF DATABASE 
    WITH TAG 'incr_update' 
    UNTIL TIME 'SYSDATE - 7';
  BACKUP
    INCREMENTAL LEVEL 1 
    FOR RECOVER OF COPY WITH TAG 'incr_update'
    DATABASE;
}</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDEAEGH">
                  <p class="titleinexample">Example 3-5 Recovery from Loss of a Control File on a Standby Database</p>
                  <p><a id="d69128e2898" class="indexterm-anchor"></a>Assume that the standby database <code class="codeph">dgprod3</code> control files are lost because of a media failure. The primary and standby database share SBT storage. A backup of the primary database control file exists on tape.
                  </p>
                  <p>You start the RMAN client and connect to <code class="codeph">dgprod3</code> as <code class="codeph">TARGET</code> and connect to the recovery catalog. The following RMAN commands restore a control file that is usable by the standby database, update the file names to existing files on disk, and recover the standby database:
                  </p><pre class="oac_no_warn" dir="ltr">RESTORE CONTROLFILE;
ALTER DATABASE MOUNT;
RECOVER DATABASE;
</pre><p>You can then start redo apply on the standby database.</p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDHFBFI">
                  <p class="titleinexample">Example 3-6 Recovering a NOARCHIVELOG Database</p>
                  <p><a id="d69128e2922" class="indexterm-anchor"></a><a id="d69128e2926" class="indexterm-anchor"></a><a id="d69128e2930" class="indexterm-anchor"></a>You can perform limited recovery of changes to a database running in <code class="codeph">NOARCHIVELOG</code> mode by applying incremental backups. The incremental backups must be consistent, like all backups of a database run in <code class="codeph">NOARCHIVELOG</code> mode, so you cannot back up the database when it is open.
                  </p>
                  <p>Assume that you run database <code class="codeph">prod</code> in <code class="codeph">NOARCHIVELOG</code> mode with a recovery catalog. You shut down the database consistently and make a level 0 backup of database <code class="codeph">prod</code> to tape on Sunday afternoon. You shut down the database consistently and make a level 1 differential incremental backup to tape at 3:00 a.m. on Wednesday and Friday.
                  </p>
                  <p>On Saturday, a media failure destroys half of the data files and all the online redo logs. Because the online logs are lost, you must specify the <code class="codeph">NOREDO</code> option in the <code class="codeph">RECOVER</code> command. Otherwise, RMAN searches for the redo logs after applying the Friday incremental backup and issues an error message when it does not find them.
                  </p>
                  <p>After connecting RMAN to <code class="codeph">prod</code> and the catalog database, recover as follows:
                  </p><pre class="oac_no_warn" dir="ltr">STARTUP FORCE NOMOUNT;
RESTORE CONTROLFILE;      # restore control file from consistent backup
ALTER DATABASE MOUNT;
RESTORE DATABASE;         # restore data files from consistent backup
RECOVER DATABASE NOREDO;  # specify NOREDO because online redo logs are lost
ALTER DATABASE OPEN RESETLOGS;
</pre><p>The recovered database reflects only changes up through the time of the Friday incremental backup. Because there are no archived redo log files, there is no way to recover changes made after the incremental backup.</p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A154A3CC-90CE-4DE1-AF19-54D705893DA6">
                  <p class="titleinexample">Example 3-7 Recovering All Block Corruption in the Database</p>
                  <p>This example runs a backup validation to populate the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view, then recovers any corrupt blocks recorded in the view. Sample output is included for both commands.
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">VALIDATE DATABASE;</span>
 
Starting validate at 19-FEB-13
using channel ORA_DISK_1
channel ORA_DISK_1: starting validation of datafile
channel ORA_DISK_1: specifying datafile(s) for validation
.
.
.
List of Datafiles
=================
File Status Marked Corrupt Empty Blocks Blocks Examined High SCN
---- ------ -------------- ------------ --------------- ----------
1    FAILED 0              4070         57600           555975
  File Name: /disk1/oradata/prod/system01.dbf
  Block Type Blocks Failing Blocks Processed
  ---------- -------------- ----------------
  Data       1              41550
  Index      0              7677
  Other      0              4303
.
.
.
RMAN&gt; <span class="bold">RECOVER CORRUPTION LIST;</span>
 
Starting recover at 19-FEB-13
using channel ORA_DISK_1
allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=104 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
searching flashback logs for block images until SCN 547548
finished flashback log search, restored 1 blocks
 
starting media recovery
media recovery complete, elapsed time: 00:00:03
 
Finished recover at 19-FEB-13</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEEDH">
                  <p class="titleinexample">Example 3-8 Recovering Tables Partitions from a Backup</p>
                  <p>This example recovers the partitions <code class="codeph">sales_2009</code> and <code class="codeph">sales_2010</code> from the table <code class="codeph">SALES</code> to the time when the SCN of the target database was 34582. In the source database, the tables are owned by the schema <code class="codeph">SH</code>. While importing these partitions into the target database, the partitions are created as tables named <code class="codeph">historic_sales_2009</code> and <code class="codeph">historic_sales_2010</code>.
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SH.SALES:SALES_2009, SH.SALES:SALES_2010
     UNTIL SCN 34582
     AUXILIARY DESTINATION '/tmp/oracle/recover'
     REMAP TABLE 'SH'.'SALES':'SALES_2009':'HISTORIC_SALES_2009', 'SH'.'SALES':'SALES_2010':'HISTORIC_SALES_2010';
</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-9C3F590D-6BC1-481C-BA17-C6F8B8432D2E">
                  <p class="titleinexample">Example 3-9 Recovering Tables to a Specified Log Sequence and Renaming the Tables</p>
                  <p>This example uses an auxiliary instance to recover the table <code class="codeph">EMP</code> from the <code class="codeph">SCOTT</code> schema to the time when the log sequence number of the database was 5466. After the <code class="codeph">EMP</code> table is recovered, it is imported into the target database using the name <code class="codeph">MY_EMP</code>.
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SCOTT.EMP
     UNTIL SEQUENCE 5466
     AUXILARY DESTINATION '/tmp/recover'
     REMAP TABLE 'SCOTT'.'EMP':'MY_EMP';
</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-12B467A8-372A-4797-AE0D-123DA9C862C0">
                  <p class="titleinexample">Example 3-10 Recovering Tables to a Specified Time and Into a Different Tablespace</p>
                  <p>This example recovers tables <code class="codeph">EMP</code> and <code class="codeph">DEPT</code> to the point in time specified by the <code class="codeph">UNTIL TIME</code> clause. The tables were originally part of the <code class="codeph">EXAMPLE_TBS</code> tablespace. However, after the recovery operation, they are mapped to the tablespace <code class="codeph">MY_TBS</code> in the target database.
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SCOTT.EMP, SCOTT.DEPT
      UNTIL TIME "TO_CHAR('12/23/2012 12:00:00','mm/dd/yyyy hh24:mi:ss')"
      AUXILIARY DESTINATION '/tmp/oracle/recover'
      REMAP TABLESPACE 'EXAMPLE_TBS':'MY_TBS';
</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-73587392-C1F7-40A7-AD3A-7C196B9CBF45">
                  <p class="titleinexample">Example 3-11 <span class="bold">Recovering Multiple Tables Into a Different Schema</span></p>
                  <p>This example recovers the tables <code class="codeph">HR.EMPLOYEES</code> and <code class="codeph">SH.CHANNELS</code> tables until the specified SCN. The recovered <code class="codeph">EMPLOYEES</code> table is mapped to the EXAMPLES schema and the recovered CHANNELS table is mapped to the <code class="codeph">TEST</code> schema. These schemas are already created in the target database. The <code class="codeph">CHANNELS</code> table was stored in the <code class="codeph">SALES_TBS</code> tablespace. After the table is recovered, it is mapped to the <code class="codeph">NEW_SALES_TBS</code> tablespace. An auxiliary destination is used to store the temporary database files created as part of the table recovery process.
                  </p>
                  <p>To recover this table, you must have a backup of the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, undo, <code class="codeph">HR</code>, and <code class="codeph">SH</code> tablespaces. The database must be in <code class="codeph">ARCHIVELOG</code> mode when the backup was created.
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE hr.employees, sh.channels
UNTIL SCN 3456
REMAP TABLE hr.employees:examples.employees, sh.channels:test.channels
REMAP TABLESPACE 'SALES_TBS':'NEW_SALES_TBS'
AUXILIARY DESTINATION '/tmp/auxdest';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-E695DDEA-1C67-4E90-84AE-DAE2E787757D">
                  <p class="titleinexample">Example 3-12 <span class="bold">Recovering Table Partitions into a Different Schema</span></p>
                  <p>This example recovers the partitions<code class="codeph">SALES_H1_1997</code> and <code class="codeph">SALES_H2_1997</code> in the <code class="codeph">SH</code> schema to a previous point in time that is specified using an SCN. The partitions are renamed as <code class="codeph">historic_sales_h1_1997</code> and <code class="codeph">historic_sales_h2_1997</code> respectively. The recovered partitions must be imported into the schema <code class="codeph">new_sh</code>, which exists in the target database.
                  </p>
                  <p><code class="codeph">COMPATIBLE</code> must be set to 11.1.0 or higher because partitions are being recovered. A backup of the <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, <code class="codeph">UNDO</code>, and <code class="codeph">SH</code> tablespaces at the specified recovery SCN exists. The database must be in <code class="codeph">ARCHIVELOG</code> mode when the backup was created.
                  </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE sh.sales:sales_h1_1997, sh.sales:sales_h2_1997 
UNTIL SCN 810234878
REMAP TABLE sh.sales:sales_h1_1997:sh.historic_sales_h1_1997, sh.sales:sales_h2_1997:sh.historic_sales_h2_1997
AUXILIARY DESTINATION '/tmp/auxdest/';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-4E82B26B-4CFA-449E-A75C-E45070D9DA23">
                  <p class="titleinexample">Example 3-13 <span class="bold">Recovering a Cross-platform Backup of a PDB Into a Destination CDB</span></p>
                  <p></p>
                  <p>This example restores a cross-platform consistent incremental level 1 backup of the PDB <code class="codeph">pdb2</code> on a destination database. The destination CDB and the source CDB are on different platforms, but use the same endian format.
                  </p>
                  <p>The <code class="codeph">USING</code> clause specifies the name of the XML file that contains metadata required to plug the PDB into a destination CDB. The <code class="codeph">FOREIGN DATAFILECOPY</code> clause lists all the data files that were created when this PDB’s data files were restored. Recovery needs to be performed for all these data files.  The <code class="codeph">FILE_NAME_CONVERT</code> clause specifies how file names on the source CDB must be renamed in the destination CDB
                  </p><pre class="pre codeblock"><code>RECOVER 
FROM PLATFORM 'Linux x86 64-bit’
USING '/u02/backup_restore/metadata_pdb2.xml’
FILE_NAME_CONVERT = ('/u01/oradata','/u02/oradata/cdb')
FOREIGN DATAFILECOPY '/u02/oradata/pdb1.dbf’,’/u02/oradata/pdb1_tmp.dbf’
FROM BACKUPSET '/u02/backup_restore/bkup_level1_pdb1.bck’;
</code></pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html><html id='06253.CONFIGURE.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CONFIGURE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CHANGE.html" title="Previous" type="text/html">
      <link rel="next" href="CONNECT.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CHANGE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CONNECT.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name"> RMAN Commands: @ (at sign) to QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CONFIGURE</li>
            </ol>
            <a id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A" name="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A"></a><a id="RCMRF90071"></a><a id="RCMRF90072"></a><a id="RCMRF90073"></a><a id="RCMRF90074"></a><a id="RCMRF90075"></a><a id="RCMRF90076"></a><a id="RCMRF90077"></a><a id="RCMRF90079"></a><a id="RCMRF90080"></a><a id="RCMRF90081"></a><a id="RCMRF90082"></a><a id="RCMRF90083"></a><a id="RCMRF90084"></a><a id="RCMRF90085"></a><a id="RCMRF90086"></a><a id="RCMRF90087"></a><a id="RCMRF90088"></a><a id="RCMRF90089"></a><a id="RCMRF90090"></a><a id="RCMRF90091"></a><a id="RCMRF90092"></a><a id="RCMRF90093"></a><a id="RCMRF90094"></a><a id="RCMRF90095"></a><a id="RCMRF90514"></a><a id="RCMRF113"></a>
            
            <h2 id="RCMRF-GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A" class="sect2"><span class="enumeration_section">2.9 </span>CONFIGURE
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-4F9C3B03-597E-433A-9E15-F60D033EA560">Purpose</p>
                  <p>Use the <code class="codeph">CONFIGURE</code> command to create or change a persistent configuration affecting RMAN backup, restore, duplication, and maintenance jobs on a particular database. A configuration is in effect for any RMAN session on this database until the configuration is explicitly cleared or changed. You can use the <code class="codeph"><a href="SHOW.html#GUID-6C2AF43B-FADD-41AF-9408-852A69538E2F">SHOW</a></code> command to display the configurations for one or more databases.
                  </p>
                  <div class="infoboxnotealso" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-38280D82-4E07-485F-897F-90942607C590">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/configuring-rman-client-basic.html#BRADV8002" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide </span></a>to learn how to configure the RMAN environment
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-781A68AD-6969-425D-8163-3A9CB259AE25">Additional Topics</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDCACAG">Prerequisites</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFHDB">Usage Notes</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDBHBBA">Syntax</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDJDIEA">Semantics</a></p>
                     </li>
                     <li>
                        <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDCBH">Examples</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDCACAG">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-4238CD57-8FB0-4777-8997-46BE9E4E282F">Prerequisites</p>
                  <p>Execute this command only at the RMAN prompt.</p>
                  <p>Unless you specify the <code class="codeph">FOR DB_UNIQUE_NAME</code> clause, an RMAN connection to a target database is required. The target database must be mounted or open.
                  </p>
                  <p>In CDBs, you must connect to the root to create or change configuration settings. You cannot configure settings when connected to a PDB.</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFHDB">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-6B29A62A-8AE9-4A8F-A3CE-35C5432FB1A1">Usage Notes</p>
                  <p>The <code class="codeph">CONFIGURE</code> command always stores a configuration for a target database in the target database control file. If you use RMAN with a recovery catalog, then RMAN also stores persistent configuration settings for each registered database in the catalog.
                  </p>
                  <p><span class="bold">Default RMAN Configuration Settings</span></p>
                  <p><a id="d28529e243" class="indexterm-anchor"></a>The RMAN <code class="codeph">CONFIGURE</code> settings have defaults. You can return to the default for any <code class="codeph">CONFIGURE</code> command by rerunning the command with the <code class="codeph">CLEAR</code> option, but you cannot clear individual parameters in this way. For example, the following command is valid:
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE sbt CLEAR
</pre><p>However, the following command is invalid: </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE sbt MAXPIECESIZE 5M CLEAR</pre><p><span class="bold">RMAN Configuration in a Data Guard Environment</span></p>
                  <p><a id="d28529e267" class="indexterm-anchor"></a><a id="d28529e271" class="indexterm-anchor"></a>In a Data Guard environment, Oracle recommends that you always use RMAN with a recovery catalog. You can use the <code class="codeph">CONFIGURE</code> command to create persistent RMAN configurations for any individual primary or standby database in the Data Guard environment, except settings for backup retention policy, tablespace exclusion, and auxiliary names. Thus, the primary and standby databases can have different channel configurations, control file autobackup locations, and so on.
                  </p>
                  <p>You can use the <code class="codeph">FOR DB_UNIQUE_NAME</code> clause to configure a database to which RMAN is not connected as <code class="codeph">TARGET</code>. You can use <code class="codeph">CONFIGURE DB_UNIQUE_NAME</code> to make a new physical standby database known to the recovery catalog and implicitly register it.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDBHBBA">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-612E56B4-3537-43F8-9DF3-6E4D3E46E38C">Syntax</p>
                  <p><a id="d28529e294" class="indexterm-anchor"></a><a id="d28529e298" class="indexterm-anchor"></a><span class="bold"><span class="italic">configure</span>::=</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-B9A6D832-3EFA-4451-80BF-3D32CC249577"><img src="img/configure.gif" alt="Description of configure.eps follows" title="Description of configure.eps follows" longdesc="img_text/configure.html"><br><a href="img_text/configure.html">Description of the illustration configure.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec::=</a></span>, <span class="italic"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIHIEG">backupConf::=</a></span>, <span class="italic"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHEECI">cfauConf::=</a></span>, <span class="italic"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHIHDH">deviceConf::=</a></span>, <span class="italic"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE__BABBBGBC">forDbUniqueNameOption::=</a></span>)
                  </p>
                  <p><a id="d28529e332" class="indexterm-anchor"></a><a id="d28529e336" class="indexterm-anchor"></a><span class="bold"><span class="italic">delalConf</span>::=</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-EA67CAB9-FE67-48BC-9984-29E1D47B6A33"><img src="img/delalconf.gif" alt="Description of delalconf.eps follows" title="Description of delalconf.eps follows" longdesc="img_text/delalconf.html"><br><a href="img_text/delalconf.html">Description of the illustration delalconf.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>)
                  </p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIHIEG"><a id="d28529e354" class="indexterm-anchor"></a><a id="d28529e358" class="indexterm-anchor"></a><span class="bold"><span class="italic">backupConf</span>::=</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-BD3D52F8-766C-4DFC-8AD9-A0FEBD0E768E"><img src="img/backupconf.gif" alt="Description of backupconf.eps follows" title="Description of backupconf.eps follows" longdesc="img_text/backupconf.html"><br><a href="img_text/backupconf.html">Description of the illustration backupconf.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec::=</a></span>)
                  </p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHEECI"><a id="d28529e380" class="indexterm-anchor"></a><a id="d28529e384" class="indexterm-anchor"></a><span class="bold"><span class="italic">cfauConf</span>::=</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-758799D0-DFCC-4EE1-8EAA-8696EBC1C0F5"><img src="img/cfauconf.gif" alt="Description of cfauconf.eps follows" title="Description of cfauconf.eps follows" longdesc="img_text/cfauconf.html"><br><a href="img_text/cfauconf.html">Description of the illustration cfauconf.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABHCHAG">formatSpec::=</a></span>)
                  </p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHIHDH"><a id="d28529e407" class="indexterm-anchor"></a><a id="d28529e411" class="indexterm-anchor"></a><span class="bold"><span class="italic">deviceConf</span>::=</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-88A4112F-F9CE-4635-9CA6-C210659551AB"><img src="img/deviceconf.gif" alt="Description of deviceconf.eps follows" title="Description of deviceconf.eps follows" longdesc="img_text/deviceconf.html"><br><a href="img_text/deviceconf.html">Description of the illustration deviceconf.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__BABFFJCH">allocOperandList::=</a></span>)
                  </p>
                  <p><a id="d28529e433" class="indexterm-anchor"></a><a id="d28529e437" class="indexterm-anchor"></a><span class="bold"><span class="italic">forDbUniqueNameOption</span>::=</span></p>
                  <div class="figure" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-ADB071A8-5C0E-4C1B-9A81-2125D82040C9"><img src="img/fordbuniquenameoption.gif" alt="Description of fordbuniquenameoption.eps follows" title="Description of fordbuniquenameoption.eps follows" longdesc="img_text/fordbuniquenameoption.html"><br><a href="img_text/fordbuniquenameoption.html">Description of the illustration fordbuniquenameoption.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDJDIEA">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-3E4B26DF-0300-4F9E-87D5-84D9D2394E00">Semantics</p>
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017464"><a id="d28529e452" class="indexterm-anchor"></a><a id="d28529e456" class="indexterm-anchor"></a><span class="bold"><span class="italic">configure</span></span> 
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-98D50301-81B1-4410-8E2E-88A1A12733FE">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes CONFIGURE command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e472">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e475">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e480" headers="d28529e472 "><code class="codeph">DB_UNIQUE_NAME</code> <span class="italic"><code class="codeph">db_unique_name</code> <code class="codeph">CONNECT IDENTIFIER</code></span> <code class="codeph">'</code><span class="italic"><code class="codeph">connect_string</code></span><code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e480 d28529e475 ">
                                 <p>Specifies the net service name for the physical standby database specified by <code class="codeph">DB_UNIQUE_NAME</code>. The <code class="codeph">CONNECT IDENTIFIER</code> string must not include the database user name and password.
                                 </p>
                                 <p>RMAN must also be connected to the primary database as <code class="codeph">TARGET</code>. RMAN must be connected to a recovery catalog.
                                 </p>
                                 <p>When you run the <code class="codeph"><a href="RESYNC-CATALOG.html#GUID-DF91BD12-A00D-49CC-99C5-E8EDD0094CCE">RESYNC CATALOG</a></code> <code class="codeph">FROM DB_UNIQUE_NAME</code> command, databases in a Data Guard environment use the net service name to connect with the <span class="italic"><code class="codeph">db_unique_name</code></span> database. For example, assume that a standby database has the unique name <code class="codeph">standby1</code> and the net service name <code class="codeph">sby1</code>. You connect RMAN as <code class="codeph">TARGET</code> to the primary database and execute <code class="codeph">CONFIGURE DB_UNIQUE_NAME 'standby1' CONNECT IDENTIFIER 'sby1'</code>. Every primary and standby database in the environment uses the net service name <code class="codeph">sby1</code> when it needs to make an Oracle Net connection to <code class="codeph">standby1</code>.
                                 </p>
                                 <p><span class="bold">Note:</span> When the target database needs to connect to other standby or primary databases, it connects as the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> user by using the existing Data Guard authentication mechanisms.
                                 </p>
                                 <p>Suppose that you recently connected RMAN as <code class="codeph">TARGET</code> to the primary database and used <code class="codeph">CONFIGURE ... FOR DB_UNIQUE_NAME standby_new</code> to configure backup settings for standby database <code class="codeph">standby_new</code>. However, you have not yet connected RMAN as <code class="codeph">TARGET</code> to <code class="codeph">standby_new</code>. In this case, you can execute <code class="codeph">RESYNC CATALOG FROM DB_UNIQUE_NAME standby_new</code>. The primary database uses the connect identifier to make an Oracle Net connection to the standby database. When you later connect RMAN to the standby database, RMAN pushes the configuration from the recovery catalog to the mounted control file.
                                 </p>
                                 <p><span class="bold">Note:</span> If the database specified by <code class="codeph">CONFIGURE DB_UNIQUE_NAME</code> is not registered in the recovery catalog, then RMAN implicitly registers it.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e584" headers="d28529e472 ">
                                 <p><code class="codeph">CLEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e584 d28529e475 ">
                                 <p>Returns a parameter to its default setting. See the Usage Notes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e592" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIFEEE">delalConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e592 d28529e475 ">
                                 <p>Configures an archived redo log deletion policy.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e602" headers="d28529e472 "><code class="codeph">AUXNAME&nbsp;FOR&nbsp;DATAFILE</code> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a> </code></span><code class="codeph">CLEAR | TO </code><code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e602 d28529e475 ">
                                 <p>Configures the auxiliary file name for the specified target data file to <code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code> (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHHHDF">Example 2-54</a>). Specify <code class="codeph">CLEAR</code> to unspecify the auxiliary file name.
                                 </p>
                                 <p>If you are performing TSPITR or using <code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code>, then you can set <code class="codeph">AUXNAME</code> to preconfigure the file names for use on the auxiliary database without manually specifying the auxiliary file names during the procedure. You cannot use <code class="codeph">CONFIGURE AUXNAME</code> for recovery set, you must use <code class="codeph">SET NEWNAME</code>.
                                 </p>
                                 <p>For example, use this command during TSPITR if the data files are on raw disk and you must restore auxiliary data files to raw disk for performance reasons. Typically, you set the <code class="codeph">AUXNAME</code> parameter in TSPITR for the data files of the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces and the tablespaces containing rollback or undo segments. Do not overlay files which are in use by the production database and can be discarded after TSPITR completes. In essence, the <code class="codeph">AUXNAME</code> of a data file is the location where TSPITR can create a temporary copy of it.
                                 </p>
                                 <p>When renaming files with the <code class="codeph">DUPLICATE</code> command, <code class="codeph">CONFIGURE</code><span class="bold"> </span><code class="codeph">AUXNAME</code> is an alternative to <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>. The difference is that after you set the <code class="codeph">AUXNAME</code> the first time, you do not need to reset the file name when you issue another <code class="codeph">DUPLICATE</code> command: the <code class="codeph">AUXNAME</code> setting remains in effect until you issue <code class="codeph">CONFIGURE AUXNAME ... CLEAR</code>. In contrast, you must reissue the <code class="codeph">SET NEWNAME</code> command every time you execute the <code class="codeph">DUPLICATE</code> command.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn how to perform RMAN TSPITR, and <a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn how to duplicate a database with RMAN
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e723" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017487">backupConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e723 d28529e475 ">
                                 <p>Configures default backup options such as duplexing, optimization, excluding tablespaces, backup set sizes, and retention policies.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e733" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017491">cfauConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e733 d28529e475 ">
                                 <p>Configures control file autobackup settings.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e743" headers="d28529e472 "><code class="codeph">COMPRESSION&nbsp;ALGORITHM</code> <code class="codeph">'</code><span class="italic"><code class="codeph">algorithm_name</code></span><code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e743 d28529e475 ">
                                 <p>Specifies the algorithm that RMAN uses to create compressed backup sets.</p>
                                 <p>The default compression algorithm setting is <code class="codeph">BASIC</code> and does not require the Advanced Compression Option. 
                                 </p>
                                 <p>If, however, you have enabled the Advanced Compression Option, you can choose from the following compression levels:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">HIGH - </code><a id="d28529e769" class="indexterm-anchor"></a>Best suited for backups over slower networks where the limiting factor is network speed
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">MEDIUM -</code><a id="d28529e778" class="indexterm-anchor"></a>Recommended for most environments. Good combination of compression ratios and speed 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LOW</code> -<a id="d28529e788" class="indexterm-anchor"></a> Least impact on backup throughput and suited for environments where CPU resources are the limiting factor.
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">Note: </span>The compression ratio generally increases from LOW to HIGH, with a trade-off of potentially consuming more CPU resources.
                                 </p>
                                 <p>Since the performance of the various compression levels depends on the nature of the data in the database, network configuration, system resources and the type of computer system and its capabilities, Oracle cannot document universally applicable performance statistics. The decision about which level is best must factor in on how balanced your system is regarding bandwidth into the CPU and the actual speed of the CPU. It is highly recommended that you run tests with the different compression levels on the data in your environment. Choosing a compression level based on your environment, network traffic characteristics (workload) and data set is the only way to ensure that the backup set compression level can satisfy your organization's performance requirements and any applicable service level agreements.</p>
                                 <p><span class="bold">Note:</span> The <a id="d28529e803" class="indexterm-anchor"></a><a id="d28529e805" class="indexterm-anchor"></a><code class="codeph">V$RMAN_COMPRESSION_ALGORITHM</code> view describes the supported algorithms.
                                 </p>
                                 <p><span class="bold">See Also</span>: <span class="italic">Oracle Database Reference</span> entry for <code class="codeph">V$RMAN_COMPRESSION_ALGORITHM</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e823" headers="d28529e472 ">
                                 <p>   <code class="codeph">   OPTIMIZE FOR LOAD</code>  
                                 </p>
                                 <p> <code class="codeph">    {TRUE|FALSE}</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e823 d28529e475 ">
                                 <p>Specifies whether Oracle Database performs pre-compression block processing when compressed backups have been requested. <code class="codeph">TRUE</code> is the default and <code class="codeph">FALSE</code> enables pre-compression processing. The default behavior is not to perform pre-compression block processing. Such processing can consume extra CPU resources, and is not needed for blocks that contain all originally loaded data, and have never been the subject of single-row inserts and deletes. Specifying <code class="codeph">FALSE</code> uses additional CPU resources to perform pre-compression block processing which consists of internal block cleanups and defragmentation that can result in improved levels of binary compression.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic">Oracle Database Backup and Recovery User's Guide </span>to learn more about this option.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e853" headers="d28529e472 ">
                                 <p>   <code class="codeph"> AS OF RELEASE  </code>  
                                 </p>
                                 <p><span class="italic">    'version'</span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e853 d28529e475 ">
                                 <p>Specifies the release version. The version number uses the release number format and may use as many as 5 numbers to fully qualify the release. For example, 10.2.0.3.0 and 11.2 are acceptable values. This option ensures compression algorithm stability across future releases.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e866" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1019177">deviceConf</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e866 d28529e475 ">
                                 <p>Configures default backup settings for devices, such as the default backup device, channel configurations for devices, default backup types for each device, and parallelism.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e876" headers="d28529e472 ">
                                 <p><code class="codeph">ENCRYPTION</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e876 d28529e475 ">
                                 <p>Specifies transparent-mode encryption settings for the database or tablespaces.</p>
                                 <p>This configuration applies unless overridden with the <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION</code> command. Options specified for an individual tablespace take precedence over options specified for the whole database.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="q">"<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHIGD">Encryption of Backup Sets</a>"</span> to learn about the different modes of backup encryption, and <a href="../asoag/introduction-to-transparent-data-encryption.html#ASOAG10139" target="_blank"><span class="italic">Oracle Database Advanced Security Guide</span></a> to learn about transparent data encryption
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e908" headers="d28529e472 "><code class="codeph">&nbsp;&nbsp;&nbsp;ALGORITHM</code> <code class="codeph">'</code><span class="italic"><code class="codeph">algorithm_name</code></span><code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e908 d28529e475 ">
                                 <p><a id="d28529e921" class="indexterm-anchor"></a>Specifies the default algorithm to use for encryption when writing backup sets. Possible values are listed in <a id="d28529e924" class="indexterm-anchor"></a><a id="d28529e926" class="indexterm-anchor"></a><a id="d28529e930" class="indexterm-anchor"></a><a id="d28529e934" class="indexterm-anchor"></a><code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code>. The <code class="codeph">CLEAR</code> option resets the database to the default value.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e945" headers="d28529e472 "><code class="codeph">&nbsp;&nbsp;&nbsp;FOR&nbsp;DATABASE</code> <code class="codeph">[ON&nbsp;|&nbsp;OFF&nbsp;|&nbsp;CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e945 d28529e475 ">
                                 <p><a id="d28529e953" class="indexterm-anchor"></a><a id="d28529e957" class="indexterm-anchor"></a><a id="d28529e959" class="indexterm-anchor"></a>Specifies whether to enable transparent encryption for the entire database. The options are as follows:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">ON</code> enables encryption for all database files.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OFF</code> turns off encryption for all database files.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CLEAR</code> restores the default setting of <code class="codeph">OFF</code>.
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">Note:</span> You must use the <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION IDENTIFIED BY</code> command to enable password encryption.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e996" headers="d28529e472 "><code class="codeph">&nbsp;&nbsp;&nbsp;FOR&nbsp;TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">[ON&nbsp;|&nbsp;OFF&nbsp;|&nbsp;CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e996 d28529e475 ">
                                 <p><a id="d28529e1008" class="indexterm-anchor"></a>Specifies whether to enable transparent encryption for one or more tablespaces. Configured settings for a tablespace always override configuration set at the database level. The options are as follows:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">ON</code> enables encryption for the specified tablespace unless <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION OFF FOR ALL TABLESPACES</code> is used.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OFF</code> disables encryption for the specified tablespace unless <code class="codeph">SET ENCRYPTION ON FOR ALL TABLESPACES</code> is used.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CLEAR</code> means that encryption for the specified tablespace is determined by the current default for the whole database.
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">Note:</span> You must use the <code class="codeph">SET ENCRYPTION IDENTIFIED BY</code> command to enable password encryption.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1048" headers="d28529e472 "><code class="codeph">FOR TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name:tablespace_name</code></span> <code class="codeph">[ON | OFF | CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1048 d28529e475 ">
                                 <p>The name of the tablespace in a CDB. Multiple databases can have tablespaces with the same name. A qualifier before the name uniquely identifies the tablespace. <span class="italic"><code class="codeph">pdb-name</code></span> is the name of a PDB.
                                 </p>
                                 <p>See the previous description of <code class="codeph">FOR TABLESPACE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1071" headers="d28529e472 ">
                                 <p><code class="codeph">RMAN OUTPUT TO KEEP FOR </code><span class="italic"><code class="codeph">integer</code></span><code class="codeph"> DAYS</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1071 d28529e475 ">
                                 <p>Configures RMAN output logging to the number of days specified by <span class="italic"><code class="codeph">integer</code></span>. Information regarding the output of RMAN commands is stored in two views, <code class="codeph">RC_RMAN_OUTPUT</code> and <code class="codeph">V$RMAN_OUTPUT</code>. When you configure output logging to <span class="italic"><code class="codeph">integer</code></span> days, any logging entry that is older than <span class="italic"><code class="codeph">integer</code></span> days is deleted from both the <code class="codeph">RC_RMAN_OUTPUT</code> and <code class="codeph">V$RMAN_OUTPUT</code> views.
                                 </p>
                                 <p>For example, assume that the existing output logging configuration is set to 20 days. You use the <code class="codeph">CONFIGURE</code> command to change output logging to 10 days. Any logging entries that are older than 10 days are deleted from <code class="codeph">RC_RMAN_OUTPUT</code> and <code class="codeph">V$_RMAN_OUTPUT</code>.
                                 </p>
                                 <p>To disable RMAN output logging, set <span class="italic"><code class="codeph">integer</code></span> to zero, as shown in the following example.
                                 </p><pre class="oac_no_warn" dir="ltr">CONFIGURE RMAN OUTPUT TO KEEP FOR 0 DAYS; 
</pre><p>When you disable output logging, no logging information is stored in the <code class="codeph">RC_RMAN_OUTPUT</code> and <code class="codeph">V$RMAN_OUTPUT</code> views. Existing logging entries in <code class="codeph">RC_RMAN_OUTPUT</code> are deleted.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1139" headers="d28529e472 ">
                                 <p>      <code class="codeph">CLEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1139 d28529e475 ">
                                 <p>Clears the existing RMAN output logging configuration and resets it to 7 days, which is the default.</p>
                                 <p>RMAN stores output logging information in the <code class="codeph">RC_RMAN_OUTPUT</code> and <code class="codeph">V$RMAN_OUTPUT</code> views. When you clear the output logging configuration, any logging entry that is older than 7 days (the default value) is deleted from the <code class="codeph">RC_RMAN_OUTPUT</code> view. Entries older than 7 days in the <code class="codeph">V$RMAN_RMAN_OUTPUT</code> view are not deleted immediately. They are deleted only when the maximum number of rows permitted for this view is exceeded.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1162" headers="d28529e472 "><code class="codeph">SNAPSHOT&nbsp;CONTROLFILE</code> <code class="codeph">NAME&nbsp;TO '</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1162 d28529e475 ">
                                 <p><a id="d28529e1175" class="indexterm-anchor"></a>Configures the snapshot control file name and location to <code class="codeph">'</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">'</code>. If you run <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE NAME CLEAR</code>, then RMAN sets the snapshot control file name to its default.
                                 </p>
                                 <p>The default value for the snapshot control file name is platform-specific and dependent on Oracle home. For example, the default on some UNIX systems is <code class="codeph">?/dbs/snapcf_@.f</code>. If you clear the control file name, and if you change Oracle home, then the default location of the snapshot control file changes as well.
                                 </p>
                                 <p>The snapshot control file name is valid for this database only. Assume that you configure the snapshot control file name to a nondefault value on the primary database. If you use <code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> to create a standby database, then the snapshot control file location on the standby database is set to the default value. If desired, you can then configure the snapshot location on the standby database to a nondefault value.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../bradv/configuring-rman-client-advanced.html#BRADV141" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about snapshot control files
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1213" headers="d28529e472 ">
                                 <p><span class="italic"><code class="codeph"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE">forDbUniqueNameOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1213 d28529e475 ">
                                 <p><a id="d28529e1222" class="indexterm-anchor"></a><a id="d28529e1226" class="indexterm-anchor"></a>Creates an RMAN configuration in the recovery catalog for the database in a Data Guard environment specified by <code class="codeph">DB_UNIQUE_NAME</code>. You can specify a single database with <span class="italic"><code class="codeph">db_unique_name</code></span> or use <code class="codeph">ALL</code> for all databases in the recovery catalog that share the DBID of the target database (or DBID specified by the <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code> command).
                                 </p>
                                 <p>A recovery catalog is required when performing operations in a Data Guard environment. RMAN must be connected as <code class="codeph">TARGET</code> to a mounted or open database (which can be a primary or standby database), <span class="italic">or</span> you must identify the target database with the <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code> command. Thus, you can use this clause to create a persistent configuration for a standby database <span class="italic">without</span> connecting as <code class="codeph">TARGET</code> to the standby or primary database. For example, you can create a configuration for a standby database before its creation so that the configuration applies after the database is created (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDEIDFD">Example 2-56</a>).
                                 </p>
                                 <p>When you specify <code class="codeph">FOR DB_UNIQUE_NAME</code>, RMAN directly updates the configuration metadata in the recovery catalog. When RMAN connects as <code class="codeph">TARGET</code> to a database whose configurations were changed with <code class="codeph">FOR DB_UNIQUE_NAME</code>, RMAN updates the mounted control file with the configuration metadata from the recovery catalog.
                                 </p>
                                 <p><span class="bold">Note:</span> It is possible to run <code class="codeph">CONFIGURE</code> locally on a standby database and then run <code class="codeph">CONFIGURE FOR DB_UNIQUE_NAME</code> for the same database while RMAN is not connected to this database as <code class="codeph">TARGET</code>. In this case, the configuration in the recovery catalog overrides the configuration in the control file for the specific database.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDIFEEE"><span class="bold"><span class="italic">delalConf</span></span> 
                  </p>
                  <p><a id="d28529e1305" class="indexterm-anchor"></a>This subclause manages persistent configurations for archived redo log deletion policy.
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-79CFB88F-8245-40EA-9BA2-72115130030C">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes CONFIGURE command delalConf parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e1318">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e1321">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1326" headers="d28529e1318 ">
                                 <p><code class="codeph" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1326 d28529e1321 ">
                                 <p>Determines when archived redo log files are eligible for deletion. </p>
                                 <p>The archived log deletion policy applies to all log archiving destinations, including the fast recovery area. The policy does not apply to archived redo log files in backup sets.</p>
                                 <p>Only archived redo log files in the fast recovery area are automatically deleted by the database. You can execute the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">... DELETE INPUT</code>, <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">ARCHIVELOG</code>, or <code class="codeph">DELETE OBSOLETE</code> commands to delete logs manually from log archiving destinations, including the recovery area. If <code class="codeph">FORCE</code> is not specified on the deletion commands, then these deletion commands obey the archived log deletion policy. If <code class="codeph">FORCE</code> is specified, then the deletion commands ignore the archived log deletion policy.
                                 </p>
                                 <p>In the recovery area, the database retains logs eligible for deletion if possible. The database deletes the oldest logs first when disk space is required. When the recovery area is under disk pressure, the database may delete archived redo log files that are reclaimable according to the fast recovery area rules.</p>
                                 <p><span class="bold">Note:</span> The deletion policy does not apply to foreign archived redo log files, which are logs received by a logical standby database for a <a id="d28529e1369" class="indexterm-anchor"></a>LogMiner session. These logs are transferred from a primary database, but unlike ordinary archived redo log files they have a different DBID. Foreign archived redo log files cannot be backed up or restored on a logical standby database.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1373" headers="d28529e1318 "><code class="codeph">&nbsp;TO&nbsp;APPLIED&nbsp;ON</code> <code class="codeph">[ALL]&nbsp;STANDBY</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1373 d28529e1321 ">
                                 <p>Archived redo log files are eligible for deletion if <span class="italic">both</span> of the following conditions are met:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The archived redo log files have been applied to the required standby databases.</p>
                                    </li>
                                    <li>
                                       <p>The logs are not needed by the <code class="codeph">BACKED UP ... TIMES TO DEVICE TYPE</code> deletion policy. If the <code class="codeph">BACKED UP</code> policy is not set, then this condition is always met.
                                       </p>
                                    </li>
                                 </ul>
                                 <p></p>
                                 <p>When valid standby remote databases exist, this policy is applicable to primary databases, standby databases, and <code class="codeph">FAR SYNC</code> standby databases.
                                 </p>
                                 <p>For primary databases, the archived redo log files are eligible for deletion after they are applied on the standby. If no valid standby database exists, then RMAN uses <code class="codeph">TO NONE</code> as the policy. For standby databases, the archived redo log files are eligible for deletion after they are applied on the standby database and on any cascading standby databases. 
                                 </p>
                                 <p>Which remote destinations are considered depends on the following criteria:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>If you do not specify <code class="codeph">ALL</code>, then archived redo log files are eligible for deletion after being applied to all mandatory remote destinations.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you specify <code class="codeph">ALL</code>, then archived redo log files are eligible after being applied or consumed on all remote destinations, whether mandatory or not. 
                                       </p>
                                       <p>For example, standby database <code class="codeph">sby1</code> may be the only remote destination receiving logs, but other remote destinations may apply logs by referring to the same location on <code class="codeph">sby1</code>. With <code class="codeph">ALL</code>, <code class="codeph">sby1</code> marks the log on the primary database as consumed as soon as it is not required at <code class="codeph">sby1</code>, but does not permit deletion of this log until it is applied or consumed by all other dependent remote destinations referring to the same location.
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">Note:</span> It is invalid to specify the <code class="codeph">TO APPLIED</code> clause in combination with either <code class="codeph">NONE</code> or the <code class="codeph">TO SHIPPED</code> clause.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for details
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1464" headers="d28529e1318 "><code class="codeph">&nbsp;&nbsp;&nbsp;BACKED&nbsp;UP&nbsp;</code><span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES&nbsp;TO&nbsp;DEVICE</code> <code class="codeph">TYPE&nbsp;</code><span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1464 d28529e1321 ">
                                 <p>Archived redo log files are eligible for deletion if <span class="italic">both</span> of the following conditions are met:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The specified number of archived log backups exist on the specified device type.</p>
                                    </li>
                                    <li>
                                       <p>The logs are not needed by the <code class="codeph">TO SHIPPED TO ... STANDBY</code> or <code class="codeph">TO APPLIED ON ... STANDBY</code> deletion policy. If the <code class="codeph">TO SHIPPED TO</code> policy is not set, then this condition is always met.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>If you configure the deletion policy with this clause, then a <code class="codeph">BACKUP ARCHIVELOG</code> command copies the logs unless <span class="italic"><code class="codeph">integer</code></span> backups exist on the specified device type. If <span class="italic"><code class="codeph">integer</code></span> backups of the logs exist, then the <code class="codeph">BACKUP ARCHIVELOG</code> command skips the logs. In this way, the archived log deletion policy functions as a default <code class="codeph">NOT BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> clause on the <code class="codeph">BACKUP ARCHIVELOG</code> command. You can override this deletion policy by specifying <code class="codeph">FORCE</code> option on the <code class="codeph">BACKUP</code> command.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1549" headers="d28529e1318 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;TO&nbsp;NONE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e1549 d28529e1321 ">
                                 <p>Disables the archived log deletion policy. This is the default setting.</p>
                                 <p>Archived redo log files can be located inside or outside of the fast recovery area. Logs in any location can be deleted by manual commands. Only logs in the fast recovery area can be deleted automatically by the database.</p>
                                 <p></p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>When remote destinations are configured for the target database, archived redo log files, whether in the fast recovery area or outside of it, are eligible for deletion if have been transferred to the required remote destinations specified by <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>When no remote destinations are configured, archived redo log files in the fast recovery area are eligible for deletion if they have been backed up at least once to disk or SBT <span class="italic">or</span> the logs are obsolete according to the backup retention policy.
                                       </p>
                                       <p>The backup retention policy considers logs obsolete <span class="italic">only if</span> the logs are not needed by a guaranteed restore point <span class="italic">and</span> the logs are not needed by Flashback Database. Archived redo log files are needed by Flashback Database if the logs were created later than <code class="codeph">SYSDATE-'DB_FLASHBACK_RETENTION_TARGET'</code>.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example, suppose that archived redo log files have been transferred to required remote destinations. The logs are obsolete according to the recovery window retention policy, but have not been backed up. In this case, the logs are eligible for deletion. Alternatively, suppose that the logs are obsolete and have been backed up to SBT, but have <span class="italic">not</span> been transferred to required remote destinations. In this case, the logs are not eligible for deletion.
                                 </p>
                                 <p>If the deletion policy is set to <code class="codeph">NONE</code>, and if you execute a deletion command for archived redo log files outside the fast recovery area, then RMAN obeys only the conditions specified on the deletion command.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1597" headers="d28529e1318 "><code class="codeph"> TO&nbsp;SHIPPED&nbsp;TO</code> <code class="codeph">&nbsp;[ALL]&nbsp;STANDBY</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1597 d28529e1321 ">
                                 <p>Archived redo log files are eligible for deletion if <span class="italic">both</span> of the following conditions are met:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The archived redo log files have been transferred to the required remote destinations.</p>
                                    </li>
                                    <li>
                                       <p>The logs are not needed by the <code class="codeph">BACKED UP ... TIMES TO DEVICE TYPE</code> deletion policy. If the <code class="codeph">BACKED UP</code> deletion policy is not set, then this condition is always met.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>When valid standby remote databases exist, this policy is applicable to primary databases, standby databases, and <code class="codeph">FAR SYNC</code> standby databases.
                                 </p>
                                 <p></p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>For primary databases:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>If valid standby configurations exist, then the archived redo log files are eligible for deletion after they are shipped to the standby. </p>
                                          </li>
                                          <li>
                                             <p>If no valid standby database exists, then RMAN uses <code class="codeph">TO NONE</code> as the default policy. 
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>For standby databases:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>If valid cascading standby configurations exist, then the archived redo log files are eligible for deletion after they are shipped to the cascading standby database.</p>
                                          </li>
                                          <li>
                                             <p>If no valid cascading standby configurations exist, then RMAN uses <code class="codeph">TO NONE</code> as the default policy.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>Which remote destinations are considered depends on the following criteria:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>If you do not specify <code class="codeph">ALL</code>, then the archived redo log files are eligible for deletion after transfer to mandatory remote destinations only.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you specify <code class="codeph">ALL</code>, then the logs are eligible for deletion after transfer to all remote destinations, whether mandatory or not.
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">Note:</span> It is invalid to specify the <code class="codeph">TO SHIPPED</code> clause in combination with <code class="codeph">NONE</code> or the <code class="codeph">TO APPLIED</code> clause.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for details
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017487"><span class="bold"><span class="italic">backupConf</span></span></p>
                  <p>This subclause manages persistent configurations relating to the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command. One configuration is backup optimization. If you enable backup optimization, then RMAN does not back up a file to a device type if the identical file is already backed up on the device type.
                  </p>
                  <p><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761" title="Describes criteria for skipping backups because the files are identical">Table 2-3</a> explains the criteria used by backup optimization to determine whether a file is identical and can potentially be skipped. The table also explains the algorithm that RMAN uses when backup optimization is enabled and it needs to determine whether to skip the backup of an identical file. If RMAN does not skip a backup, then it makes the backup exactly as specified.
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761">
                     <p class="titleintable">Table 2-3 Backup Optimization Algorithm</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Backup Optimization Algorithm" summary="Describes criteria for skipping backups because the files are identical" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="14%" id="d28529e1720">File Type</th>
                              <th align="left" valign="bottom" width="29%" id="d28529e1723">Criteria for an Identical File</th>
                              <th align="left" valign="bottom" width="57%" id="d28529e1726">Backup Algorithm When Backup Optimization Is Enabled</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d28529e1731" headers="d28529e1720 ">
                                 <p>Data file</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d28529e1731 d28529e1723 ">
                                 <p>The data file must have the same DBID, checkpoint SCN, creation SCN, and <code class="codeph">RESETLOGS</code> SCN and time as a data file already in a backup. The data file must be offline-normal, read-only, or closed normally.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d28529e1731 d28529e1726 ">
                                 <p>If a recovery window-based retention policy is enabled, then whether RMAN skips a data file depends on the backup media. </p>
                                 <p>For backups to tape, if the most recent backup is older than the recovery window, then RMAN takes another backup of a data file even if a backup of an identical data file exists. In this way, tapes can be recycled after they expire. </p>
                                 <p>For backups to disk, RMAN skips the backup if an identical data file is available on disk, even if that backup is older than the beginning of the recovery window. The window-based retention policy causes RMAN to retain the old backup if it is needed.</p>
                                 <p><a id="d28529e1748" class="indexterm-anchor"></a>If a retention policy is enabled with <code class="codeph">CONFIGURE</code> <code class="codeph">RETENTION</code> <code class="codeph">POLICY</code> <code class="codeph">TO</code> <code class="codeph">REDUNDANCY</code> <span class="italic"><code class="codeph">r</code></span>, then RMAN skips backups only if at least <span class="italic">n</span> backups of an identical file exist on the specified device, where <span class="italic"><code class="codeph">n</code></span>=<span class="italic"><code class="codeph">r</code></span>+1.
                                 </p>
                                 <p>If no retention policy is enabled, then RMAN skips a backup only if at least <span class="italic">n</span> backups of an identical file exist on the specified device. RMAN searches for values of <span class="italic">n</span> in this order of precedence (that is, values higher on the list override values lower on the list):
                                 </p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">BACKUP ... COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET BACKUP COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE ... TO</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><span class="italic">n</span>=1
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d28529e1823" headers="d28529e1720 ">
                                 <p>Archived redo log</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d28529e1823 d28529e1723 ">
                                 <p>The archived redo log must have the same thread, sequence number, and <code class="codeph">RESETLOGS</code> SCN and time as an archived log already in a backup.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d28529e1823 d28529e1726 ">
                                 <p>RMAN skips a backup only if at least <span class="italic">n</span> backups of an identical file exist on the specified device. RMAN searches for values of <span class="italic">n</span> in this order of precedence (that is, values higher on the list override values lower on the list):
                                 </p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">BACKUP ... COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET BACKUP COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE ... TO</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><span class="italic">n</span>=1
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="14%" id="d28529e1872" headers="d28529e1720 ">
                                 <p>Backup set</p>
                              </td>
                              <td align="left" valign="top" width="29%" headers="d28529e1872 d28529e1723 ">
                                 <p>The backup set must have the same record ID and stamp as an existing backup set.</p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d28529e1872 d28529e1726 ">
                                 <p>RMAN skips a backup only if at least <span class="italic">n</span> backups of an identical file exist on the specified device. By default, <span class="italic">n</span><code class="codeph">=1</code>. RMAN searches for other values of <span class="italic">n</span> in this order of precedence (that is, values higher on the list override values lower on the list):
                                 </p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">BACKUP ... COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET BACKUP COPIES</code> <span class="italic"><code class="codeph">n</code></span></p>
                                    </li>
                                    <li>
                                       <p><span class="italic">n</span>=1
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-5E779EDD-1DCA-47D0-AC1F-6573AF950107">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes CONFIGURE command backupConf parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e1922">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e1925">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e1930" headers="d28529e1922 "><code class="codeph">{ARCHIVELOG&nbsp;|&nbsp;DATAFILE}</code> <code class="codeph">BACKUP&nbsp;COPIES FOR&nbsp;DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span><code class="codeph"> TO </code><span class="italic"><code class="codeph">integer</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e1930 d28529e1925 ">
                                 <p><a id="d28529e1949" class="indexterm-anchor"></a><a id="d28529e1953" class="indexterm-anchor"></a><a id="d28529e1957" class="indexterm-anchor"></a><a id="d28529e1961" class="indexterm-anchor"></a>Specifies the number of copies of each backup set for <code class="codeph">DATAFILE</code> (both data files and control files) or <code class="codeph">ARCHIVELOG</code> files on the specified device type (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFJJE">Example 2-51</a>). You can create from <code class="codeph">1</code> (default) to <code class="codeph">4</code> copies. 
                                 </p>
                                 <p>RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices. Also, if <code class="codeph">COPIES</code> is greater than 1, then the <a id="d28529e1986" class="indexterm-anchor"></a><a id="d28529e1988" class="indexterm-anchor"></a><a id="d28529e1992" class="indexterm-anchor"></a><code class="codeph">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be enabled on the target database.
                                 </p>
                                 <p>Control file autobackups are never duplexed. Also, duplexing is not permitted in the fast recovery area.</p>
                                 <p>If duplexing is specified in the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command or in a <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> command, then the <code class="codeph">CONFIGURE</code> setting is overridden.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2021" headers="d28529e1922 "><code class="codeph">BACKUP&nbsp;OPTIMIZATION</code> <code class="codeph">[ON&nbsp;|&nbsp;OFF&nbsp;|&nbsp;CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2021 d28529e1925 ">
                                 <p>Toggles backup optimization <code class="codeph">ON</code> or <code class="codeph">OFF</code> (default). Specify <code class="codeph">CLEAR</code> to return optimization to its default value of <code class="codeph">OFF</code>. 
                                 </p>
                                 <p>Backup optimization is enabled when all of the following conditions are met:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The <code class="codeph">CONFIGURE</code> <code class="codeph">BACKUP</code> <code class="codeph">OPTIMIZATION</code> <code class="codeph">ON</code> command has been run.
                                       </p>
                                    </li>
                                    <li>
                                       <p>You run <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DATABASE</code>, <code class="codeph">BACKUP ARCHIVELOG</code> with the <code class="codeph">ALL</code> or <code class="codeph">LIKE</code> options, <code class="codeph">BACKUP BACKUPSET ALL</code>, <code class="codeph">BACKUP RECOVERY AREA</code>, <code class="codeph">BACKUP RECOVERY FILES</code>, or <code class="codeph">BACKUP DATAFILECOPY</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The RMAN job uses a channel of only one device type.</p>
                                    </li>
                                 </ul>
                                 <p>Optimization prevents RMAN from backing up a file to a device type if the identical file is already backed up on the device type. RMAN does not signal an error if backup optimization causes all files to be skipped during a backup. The backup retention policy affects which files backup optimization skips. </p>
                                 <p><a id="d28529e2099" class="indexterm-anchor"></a><a id="d28529e2101" class="indexterm-anchor"></a>For two files to be identical, their content must meet the requirements described in <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761" title="Describes criteria for skipping backups because the files are identical">Table 2-3</a>. When you create backup pieces on disk or on media managed by Oracle Secure Backup, optimization excludes undo data from the backup when the data does not belong to an active transaction.
                                 </p>
                                 <p><span class="bold">Note:</span> <code class="codeph">BACKUP ... DELETE INPUT</code> deletes all specified archived redo log whether or not optimization would skip these files during a backup.
                                 </p>
                                 <p><span class="bold">Note:</span> <a id="d28529e2122" class="indexterm-anchor"></a><a id="d28529e2124" class="indexterm-anchor"></a>You can override backup optimization with the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFFBB">FORCE</a></code> option of the <code class="codeph">BACKUP</code> command.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../bradv/configuring-rman-client-basic.html#BRADV113" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for a description of how RMAN determines that it can skip the backup of a file
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2146" headers="d28529e1922 "><code class="codeph">EXCLUDE&nbsp;FOR&nbsp;TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">[CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2146 d28529e1925 ">
                                 <p>Excludes the specified tablespace from <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DATABASE</code> and <code class="codeph">RESTORE DATABASE</code> commands (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDFAA">Example 2-53</a>). You cannot exclude the <code class="codeph">SYSTEM</code> tablespace. 
                                 </p>
                                 <p>The <code class="codeph">BACKUP</code> command default does not exclude tablespaces. You must declare the option to use it. The exclusion is stored as an attribute of the tablespace and not to the individual data files. In this manner, the exclusion applies not only to the present set of data files but also to any files that are added to this tablespace in the future. If you run <code class="codeph">CONFIGURE ... CLEAR</code> on a tablespace after excluding it, then it returns to the default configuration of nonexclusion.
                                 </p>
                                 <p>You can still back up an excluded tablespace by explicitly specifying it in a <code class="codeph">BACKUP</code> command or by specifying the <code class="codeph">NOEXCLUDE</code> option on a <code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code> command. Similarly, you can restore an excluded tablespace by specifying it in the <code class="codeph">RESTORE TABLESPACE</code> command.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2201" headers="d28529e1922 "><code class="codeph">EXCLUDE&nbsp;FOR&nbsp;TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name:tablespace_name</code></span> <code class="codeph">[CLEAR]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2201 d28529e1925 ">
                                 <p>The name of the tablespace in a PDB. Multiple PDBs can have tablespaces with the same name. A qualifier before the name uniquely identifies the tablespace. <span class="italic"><code class="codeph">pdb-name</code></span> is the name of a PDB.
                                 </p>
                                 <p>See the previous description of <code class="codeph">EXCLUDE FOR TABLESPACE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2224" headers="d28529e1922 ">
                                 <p><code class="codeph">MAXSETSIZE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2224 d28529e1925 ">
                                 <p>Specifies the maximum size of each backup set created on a channel. Use the <code class="codeph">CLEAR</code> option to return <code class="codeph">MAXSETSIZE</code> to the default value of <code class="codeph">UNLIMITED</code>.
                                 </p>
                                 <p><span class="bold">Note: </span>This option is ignored by <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">AS</code> <code class="codeph">COPY</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2256" headers="d28529e1922 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;TO</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2256 d28529e1925 ">
                                 <p>Specifies the maximum size of each backup set as <span class="italic"><code class="codeph">integer</code></span> gigabytes, kilobytes, or megabytes.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2272" headers="d28529e1922 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;TO&nbsp;UNLIMITED</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2272 d28529e1925 ">
                                 <p>Specifies no size limit for backup sets.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2280" headers="d28529e1922 ">
                                 <p><code class="codeph" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__BGBDJIHJ">RETENTION&nbsp;POLICY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2280 d28529e1925 ">
                                 <p>Specifies a persistent, ongoing policy for backup sets and copies that RMAN marks as obsolete, that is, not needed and eligible for deletion. </p>
                                 <p>As time passes, RMAN marks backup sets and copies as obsolete according to the criteria specified in the retention policy. RMAN automatically deletes obsolete backup sets and copies in the fast recovery area when space is needed. RMAN does not automatically delete obsolete files outside the fast recovery area: you must manually execute <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">OBSOLETE</code> to remove them.
                                 </p>
                                 <p>For backups, the basic unit of the retention policy is a backup set (not a backup piece) or image copy. For example, <code class="codeph">BACKUP AS BACKUPSET COPIES 4 TABLESPACE users</code> creates a single backup set that is duplexed into four identical backup pieces. The retention policy considers this as <span class="italic">one</span> backup, not four separate backups.
                                 </p>
                                 <p><span class="bold">Note:</span> Use the <code class="codeph">CLEAR</code> option to return <code class="codeph">RETENTION POLICY</code> to its default of <code class="codeph">REDUNDANCY 1</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2319" headers="d28529e1922 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;TO&nbsp;NONE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2319 d28529e1925 ">
                                 <p>Disables the retention policy feature. RMAN does not consider any backup sets or copies as obsolete.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2327" headers="d28529e1922 "><code class="codeph">&nbsp;&nbsp;&nbsp;TO&nbsp;RECOVERY&nbsp;WINDOW&nbsp;OF</code> <span class="italic"><code class="codeph">integer</code></span><code class="codeph">&nbsp;DAYS</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2327 d28529e1925 ">
                                 <p>Specifies a time window in which RMAN can recover the database. </p>
                                 <p>The window stretches from the current time (<code class="codeph">SYSDATE</code>) to the point of recoverability, which is the earliest date to which you want to recover. The point of recoverability is <code class="codeph">SYSDATE</code> - <span class="italic"><code class="codeph">integer</code></span> days in the past. Use this setting to restore or recover dropped tablespaces or data files.
                                 </p>
                                 <p><span class="bold">Note:</span> The <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY WINDOW</code> options are mutually exclusive. Only one type of retention policy can be in effect at any time.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2362" headers="d28529e1922 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;TO&nbsp;REDUNDANCY</code>&nbsp;<span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2362 d28529e1925 ">
                                 <p>Retains <span class="italic"><code class="codeph">integer</code></span> full or level 0 backups of each data file and control file. The default retention policy setting is <code class="codeph">REDUNDANCY 1</code>. This setting considers only the current set of data files.
                                 </p>
                                 <p>If more than <span class="italic"><code class="codeph">integer</code></span> full or level 0 backups of a data file or control file exist, then RMAN marks these extra files as obsolete. RMAN then determines the oldest of the retained backups and marks all archived redo log files and log backups older than this backup as obsolete. The <code class="codeph">DELETE OBSOLETE</code> command removes obsolete data file backups (full or incremental), control file backups, and archived log backups or image copies.
                                 </p>
                                 <p>The following scenario illustrates how redundancy works in an incremental backup strategy. Assume that the redundancy level is 1. You run a level 0 database backup at noon Monday, a level 1 cumulative backup at noon on Tuesday and Wednesday, and a level 0 backup at noon on Thursday. Immediately after each daily backup you run a <code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">OBSOLETE</code>. The Wednesday <code class="codeph">DELETE</code> command does not remove the Tuesday level 1 backup because this backup is not redundant: the Tuesday level 1 backup could be used to recover the Monday level 0 backup to a time between noon on Tuesday and noon on Wednesday. However, the <code class="codeph">DELETE</code> command on Thursday removes the previous level 0 and level 1 backups.
                                 </p>
                                 <p><span class="bold">Note:</span> The <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY WINDOW</code> options are mutually exclusive. Only one type of retention policy can be in effect at any time.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1017491"><span class="bold"><span class="italic">cfauConf</span></span></p>
                  <p>This subclause creates persistent configurations relating to control file autobackups.</p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-C55486B3-E675-484C-8261-AA71845F050E">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes CONFIGURE command cfauConf parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e2430">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e2433">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2438" headers="d28529e2430 ">
                                 <p><code class="codeph" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2438 d28529e2433 ">
                                 <p>Controls the control file autobackup feature.</p>
                                 <p>By default, <a id="d28529e2447" class="indexterm-anchor"></a><a id="d28529e2453" class="indexterm-anchor"></a>control file autobackup is turned on for CDBs and standalone databases with the <code class="codeph">COMPATIBLE</code> initialization parameter set to 12.2 or higher.
                                 </p>
                                 <p><span class="bold">Note:</span> Oracle recommends that you enable the control file autobackup feature.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2466" headers="d28529e2430 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;ON</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2466 d28529e2433 ">
                                 <p>Performs a control file autobackup in the following circumstances:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>After every <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> or <code class="codeph"><a href="CREATE-CATALOG.html#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC">CREATE CATALOG</a></code> command issued at the RMAN prompt.
                                       </p>
                                    </li>
                                    <li>
                                       <p><a id="d28529e2489" class="indexterm-anchor"></a><a id="d28529e2493" class="indexterm-anchor"></a><a id="d28529e2495" class="indexterm-anchor"></a>Whenever a <code class="codeph">BACKUP</code> command within a <code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block is followed by a command that is not <code class="codeph">BACKUP</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>At the end of every <code class="codeph">RUN</code> block if the last command in the block was <code class="codeph">BACKUP</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>After structural changes for databases in <code class="codeph">ARCHIVELOG</code> mode. The autobackup after structural changes does not occur for databases in <code class="codeph">NOARCHIVELOG</code> mode.
                                       </p>
                                       <p>Structural changes include adding tablespaces, altering the state of a tablespace or data file (for example, bringing it online), adding a new online redo log, renaming a file, adding a new redo thread, enabling or disabling Flashback Database, and so on. This type of autobackup, unlike autobackups that occur in the preceding circumstances, is only to disk. You can run <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FOR DEVICE TYPE DISK</code> to set a nondefault disk location.
                                       </p>
                                       <p>Starting with Oracle 11<span class="italic">g</span> Release 2, RMAN creates a single autobackup file encompassing all of the structural changes that have occurred within a few minutes of each other rather than creating a new backup of the controlfile on each structural change to the database.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The first channel allocated during the backup or copy job creates the autobackup and places it into its own backup set; for post-structural autobackups, the default disk channel makes the backup. RMAN writes the control file and server parameter file to the same backup piece. After the control file autobackup completes, the database writes a message containing the complete path of the backup piece and the device type to the alert log.</p>
                                 <p>The default location for the autobackup on disk is the fast recovery area (if configured) or a platform-specific location (if not configured). RMAN automatically backs up the current control file using the default format of <a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABBCDDA">%F</a>. You can change the location and file name format with the <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code> and <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">CONTROLFILE AUTOBACKUP FORMAT</code> commands.
                                 </p>
                                 <p>You cannot configure RMAN to write the autobackup to multiple locations. To create multiple control file backups, you can make the last command in your backup job a <code class="codeph">BACKUP CURRENT CONTROLFILE FORMAT</code> command, which backs up the control file to the specified <code class="codeph">FORMAT</code> location and then executes an autobackup.
                                 </p>
                                 <p><span class="bold">Note:</span> The <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">CONTROLFILE AUTOBACKUP FORMAT</code> command, which you can specify either within a <code class="codeph">RUN</code> block or at the RMAN prompt, overrides the configured autobackup format in the session only. The order of precedence is:
                                 </p>
                                 <ol>
                                    <li>
                                       <p><code class="codeph">SET</code> within a <code class="codeph">RUN</code> block
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SET</code> at <code class="codeph">RMAN</code> prompt
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code></p>
                                    </li>
                                 </ol>
                                 <p>You can configure the autobackup format even when<code class="codeph"> CONFIGURE CONTROLFILE AUTOBACKUP</code> is set to <code class="codeph">OFF</code>, but RMAN does not generate autobackups in this case. For RMAN to make autobackups, you must set <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code> to <code class="codeph">ON</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2614" headers="d28529e2430 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2614 d28529e2433 ">
                                 <p>Disables the autobackup feature (default). </p>
                                 <p>Any <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command that includes data file <code class="codeph">1</code> automatically includes the current control file and server parameter file in the backup set. Otherwise, RMAN does not include these files.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2632" headers="d28529e2430 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;CLEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e2632 d28529e2433 ">
                                 <p>Returns this configuration to its default setting of <code class="codeph">OFF</code>. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2643" headers="d28529e2430 "><code class="codeph">&nbsp;&nbsp;&nbsp;FORMAT&nbsp;FOR</code> <code class="codeph">&nbsp;DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span> <code class="codeph">&nbsp;TO</code><span class="italic"><code class="codeph">&nbsp;<a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2643 d28529e2433 ">
                                 <p><a id="d28529e2666" class="indexterm-anchor"></a>Configures the default location and file name format for the control file autobackup on the specified device type (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDFCFBB">Example 2-55</a>). 
                                 </p>
                                 <p>By default, the format is <a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABBCDDA">%F</a> for all devices. Any default format string specified with <code class="codeph">CONFIGURE</code> must include the <code class="codeph">%F</code> substitution variable. Use of any other substitution variable is an error. Specify <code class="codeph">CLEAR</code> to return the format to the default <code class="codeph">%F</code>.
                                 </p>
                                 <p><a id="d28529e2689" class="indexterm-anchor"></a>If a fast recovery area is enabled, and if the format is the default <code class="codeph">'%F'</code>, then RMAN creates the autobackup in the recovery area in a directory named <code class="codeph">autobackup</code>. Otherwise, the default autobackup location is an operating system-specific location (<code class="codeph">?/dbs</code> on UNIX, Linux, and Windows).
                                 </p>
                                 <p>The string <code class="codeph"># default</code> in the output of the <code class="codeph">SHOW</code> command indicates when RMAN is using the default format. If you manually configure the disk format to <code class="codeph">'%F'</code>, then RMAN creates the autobackups in the operating system-specific default location even though the recovery area is enabled. To change the format back to its default so that RMAN creates the autobackups in the recovery area, run <code class="codeph">CONFIGURE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK CLEAR</code>. 
                                 </p>
                                 <p>The <span class="italic"><code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> can specify an <a id="d28529e2725" class="indexterm-anchor"></a>Automatic Storage Management disk group. The following example configures a channel for an ASM disk group:
                                 </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP FOR DEVICE TYPE DISK TO '+dgroup1';</pre><p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> for the semantics of the <code class="codeph">%F</code> substitution variable
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1019177"><span class="bold"><span class="italic">deviceConf</span></span></p>
                  <p>This subclause creates persistent configurations relating to channels and devices.</p>
                  <p><span class="bold">Names for Configured Channels</span></p>
                  <p><a id="d28529e2755" class="indexterm-anchor"></a>RMAN determines the names for configured channels. RMAN uses the following convention: <code class="codeph">ORA_</code><span class="italic"><code class="codeph">devicetype</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">n</code></span>, where <span class="italic"><code class="codeph">devicetype</code></span> refers to the user device type (such as <code class="codeph">DISK</code> or <code class="codeph">sbt_tape</code>) and <span class="italic"><code class="codeph">n</code></span> refers to the channel number. Channel names beginning with the <code class="codeph">ORA_</code> prefix are reserved by RMAN for its own use. You cannot manually allocate a channel with a name that begins with <code class="codeph">ORA_</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-BEB78C24-B06C-4FA2-9FAB-C02C6241D772">
                     <p class="notep1">Note:</p>
                     <p>The <code class="codeph">sbt</code> and <code class="codeph">sbt_tape</code> device types are synonymous, but RMAN output always displays <code class="codeph">sbt_tape</code> whether the input is <code class="codeph">sbt</code> or <code class="codeph">sbt_tape</code>.
                     </p>
                  </div>
                  <p>RMAN names the first <code class="codeph">DISK</code> channel <code class="codeph">ORA_DISK_1</code>, the second <code class="codeph">ORA_DISK_2</code>, and so on. RMAN names the first <code class="codeph">sbt</code> channel <code class="codeph">ORA_SBT_TAPE_1</code>, the second <code class="codeph">ORA_SBT_TAPE_2</code>, and so on. When you parallelize channels, RMAN always allocates channels in numeric order, starting with 1 and ending with the parallelism setting (<code class="codeph">CONFIGURE DEVICE TYPE ... PARALLELISM</code> <span class="italic"><code class="codeph">n</code></span>).
                  </p>
                  <p>To run <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> or jobs on specific configured channels, use the system-generated channel names. If you specify channel numbers in the <code class="codeph">CONFIGURE&nbsp;CHANNEL</code> command (see the <span class="italic"><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__I1019177">deviceConf</a></code></span> clause), then RMAN uses the same numbers in the system-generated channel names.
                  </p>
                  <p>Automatic channel allocation also applies to maintenance commands. If RMAN allocates an automatic maintenance channel, then it uses the same naming convention as any other automatically allocated channel. </p>
                  <p><span class="bold">Configured Channels in an Oracle RAC Environment</span></p>
                  <p>When using RMAN in an Oracle RAC environment, Oracle recommends that you specify a <code class="codeph">TARGET</code> connect string that establishes sessions on various instances in the cluster, depending on their load and availability.
                  </p>
                  <p>Oracle does not recommend using the <code class="codeph">CONNECT</code> option to configure individual channels to connect to specific Oracle RAC instances, because they make your RMAN script dependent on the particular instances named in the channel configuration. If just one of those instances is unavailable, then your backup script fails to run. Using a load-balancing connect string makes your RMAN scripts both easier to code and more resilient to individual instance failures.
                  </p>
                  <p>If you decide to use the <code class="codeph">CONNECT</code> option to direct RMAN channels to specific nodes, then Oracle strongly recommends that you not use passwords in your channel configuration. If the password for the user with <code class="codeph">SYSACKUP</code> privilege for every instance is the same as the password in the <code class="codeph">TARGET</code> connection, you only need to configure your channels with <code class="codeph">CONNECT "@</code><span class="italic"><code class="codeph">nodename</code></span><code class="codeph">"</code>. RMAN connects to that channel with the user ID and password from the <code class="codeph">TARGET</code> connection.
                  </p>
                  <div class="tblformalwide" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-2C72BC97-C9F3-4967-80B2-813D2447F8E3">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes CONFIGURE command deviceConf parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d28529e2900">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d28529e2903">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e2908" headers="d28529e2900 "><code class="codeph">[AUXILIARY] CHANNEL [</code> <span class="italic"><code class="codeph">integer</code></span><code class="codeph">]</code> <code class="codeph">DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e2908 d28529e2903 ">
                                 <p>Specifies the standard or <code class="codeph">AUXILIARY</code> channel that you are configuring or clearing, and the device type of the channel. 
                                 </p>
                                 <p><span class="bold">Note:</span> Channels allocated with <code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">ALLOCATE CHANNEL</a></code> within a <code class="codeph">RUN</code> command override configured automatic channels.
                                 </p>
                                 <p>Either configure a generic channel or specify a channel number, where <span class="italic"><code class="codeph">integer</code></span> is less than <code class="codeph">255</code>. See <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDFAA">Example 2-53</a> for an illustration of numbered channels.
                                 </p>
                                 <p><a id="d28529e2956" class="indexterm-anchor"></a><a id="d28529e2958" class="indexterm-anchor"></a>If <code class="codeph">AUXILIARY</code> is specified, then this configuration is used only for channels allocated at the auxiliary instance. Specify configuration information for auxiliary channels if they require different parameters from the channels allocated at the target instance. If no auxiliary device configuration is specified, then RMAN configures any auxiliary channels using the target database device configuration.
                                 </p>
                                 <p>You must specify at least one channel option. For example, you cannot issue a command such as <code class="codeph">CONFIGURE CHANNEL 2 DEVICE TYPE DISK</code>, but you can issue a command such as <code class="codeph">CONFIGURE CHANNEL 2 DEVICE TYPE DISK MAXPIECESIZE 2500K</code>.
                                 </p>
                                 <p>For generic channels of a specified device type, a new command erases previous settings for this device type. Assume that you run these commands:</p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE sbt MAXPIECESIZE 1G;
CONFIGURE CHANNEL DEVICE TYPE sbt FORMAT 'bkup_%U';
</pre><p>The second command erases the <code class="codeph">MAXPIECESIZE</code> setting of the first command. 
                                 </p>
                                 <p><span class="bold">Note:</span> RMAN does not simultaneously allocate automatic channels for multiple device types in the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command.
                                 </p>
                                 <p><span class="bold">See Also:</span> <a href="../bradv/configuring-rman-client-advanced.html#BRADV134" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide </span></a>to learn how configure automatic channels specified by channel number
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3000" headers="d28529e2900 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><code class="codeph"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e3000 d28529e2903 ">
                                 <p>Specifies control options for the configured channel.</p>
                                 <p>If you configure channels by using the nondefault <code class="codeph">CONNECT</code> or <code class="codeph">PARMS</code> options to create backups or copies, then you must either use the same configured channels or manually allocate channels with the same options to restore or cross-check these backups.
                                 </p>
                                 <p>The <code class="codeph">FORMAT</code> parameter can specify an Automatic Storage Management disk group. The following example configures a channel for an ASM disk group:
                                 </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT '+dgroup1';</pre><p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3037" headers="d28529e2900 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;CLEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e3037 d28529e2903 ">
                                 <p>Clears the specified channel. For example, <code class="codeph">CONFIGURE CHANNEL 1 DEVICE TYPE DISK CLEAR</code> returns only channel 1 to its default, whereas <code class="codeph">CONFIGURE CHANNEL DEVICE TYPE DISK CLEAR</code> returns the generic disk channel to its default. You cannot specify any other channel options (for example, <code class="codeph">PARMS</code>) when you specify <code class="codeph">CLEAR</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3057" headers="d28529e2900 "><code class="codeph">DEFAULT&nbsp;DEVICE&nbsp;TYPE&nbsp;TO</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3057 d28529e2903 ">
                                 <p>Specifies the default device type for automatic channels. By default, <code class="codeph">DISK</code> is the default device type. <code class="codeph">CLEAR</code> returns the default device type to <code class="codeph">DISK</code>.
                                 </p>
                                 <p>By default, the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command only allocates channels of the default device type. For example, if you configure automatic channels for <code class="codeph">DISK</code> and <code class="codeph">sbt</code> and set the default device type to <code class="codeph">sbt</code>, then RMAN only allocates tape channels when you run the <code class="codeph">BACKUP DATABASE</code> command. You can override this behavior either by manually allocating channels in a <code class="codeph">RUN</code> command, or by specifying <code class="codeph">DEVICE TYPE</code> on the <code class="codeph">BACKUP</code> command itself (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFJJE">Example 2-51</a>).
                                 </p>
                                 <p>The <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> command allocates automatic channels of all configured device types, regardless of the default device type. The <code class="codeph">RESTORE</code> command obeys the <code class="codeph">PARALLELISM</code> setting for each configured device type.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3123" headers="d28529e2900 "><code class="codeph">DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3123 d28529e2903 ">
                                 <p>Specifies the device type (disk or sbt) to which to apply the settings specified in this <code class="codeph">CONFIGURE</code> command. The <code class="codeph">CLEAR</code> option resets backup type and parallelism settings for this device to their defaults.
                                 </p>
                                 <p>If you run the <code class="codeph">CONFIGURE DEVICE TYPE</code> command to configure default settings for a device type and do not run <code class="codeph">CONFIGURE CHANNEL</code> for this device type, then RMAN allocates all channels without other channel control options. Assume that you configure the <code class="codeph">sbt</code> device and run a backup as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">CONFIGURE DEVICE TYPE sbt PARALLELISM 1;
BACKUP DEVICE TYPE sbt DATABASE;</pre><p>In effect, RMAN does the following when executing this backup:</p><pre class="oac_no_warn" dir="ltr">RUN 
{
  ALLOCATE CHANNEL ORA_SBT_TAPE_1 DEVICE TYPE sbt;
  BACKUP DATABASE;
}</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3159" headers="d28529e2900 "><code class="codeph">&nbsp;&nbsp;&nbsp;BACKUP&nbsp;TYPE&nbsp;TO</code> <code class="codeph">[[COMPRESSED]</code> <code class="codeph">BACKUPSET&nbsp;|&nbsp;COPY]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3159 d28529e2903 ">
                                 <p>Configures the default backup type for disk or tape backups. For SBT devices the <code class="codeph">COPY</code> option is not supported. The default for disk is <code class="codeph">BACKUPSET</code>.
                                 </p>
                                 <p>If <code class="codeph">BACKUP TYPE</code> is set to <code class="codeph">BACKUPSET</code>, then the <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command always produces backup sets regardless of which media the backup is created on. With the <code class="codeph">COMPRESSED</code> option, the backup sets produced use binary compression.
                                 </p>
                                 <p>The default location for disk backups is the fast recovery area, if one is configured; otherwise, RMAN stores backups in a platform-specific location. The default format for backup file names is <code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3200" headers="d28529e2900 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;PARALLELISM</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d28529e3200 d28529e2903 ">
                                 <p>Configures the number of automatic channels of the specified device type allocated for RMAN jobs. By default, <code class="codeph">PARALLELISM</code> is set to <code class="codeph">1</code>.
                                 </p>
                                 <p><span class="bold">Note:</span> The <code class="codeph">CONFIGURE ... PARALLELISM</code> parameter specifies channel parallelism, that is, the number of channels that RMAN allocates during backup and restore operations. The <code class="codeph">RECOVERY_PARALLELISM</code> initialization parameter specifies the number of processes used in instance recovery.
                                 </p>
                                 <p>Suppose you set <code class="codeph">PARALLELISM</code> for disk backups to <code class="codeph">2</code> (see <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHAFGH">Example 2-52</a>). If you set the default device type as disk, then RMAN allocates two disk channels when you run <code class="codeph">BACKUP DATABASE</code> at the RMAN prompt. RMAN always allocates the number of channels set by <code class="codeph">PARALLELISM</code>, although it may use only a subset of these channels.
                                 </p>
                                 <p><span class="bold">Note:</span> If you configure <span class="italic"><code class="codeph">n</code></span> manually numbered channels, then the <code class="codeph">PARALLELISM</code> setting can be greater than or less than <span class="italic"><code class="codeph">n</code></span>. For example, you can manually number 10 automatic channels and configure <code class="codeph">PARALLELISM</code> to <code class="codeph">2</code> or <code class="codeph">12</code>.
                                 </p>
                                 <p>To change the parallelism for a device type to <span class="italic"><code class="codeph">n</code></span>, run a new <code class="codeph">CONFIGURE DEVICE TYPE ... PARALLELISM</code> <span class="italic"><code class="codeph">n</code></span> command. For example, you can change configure <code class="codeph">PARALLELISM</code> to <code class="codeph">3</code> for <code class="codeph">sbt</code> and then change it to <code class="codeph">2</code> as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">CONFIGURE DEVICE TYPE sbt PARALLELISM 3;
CONFIGURE DEVICE TYPE sbt PARALLELISM 2;</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d28529e3297" headers="d28529e2900 "><code class="codeph">SPARSE [ON|OFF]</code></td>
                              <td align="left" valign="top" width="71%" headers="d28529e3297 d28529e2903 ">Configures the device type of the database as sparse or non-sparse before performing backup and recovery on sparse datafiles. This setting can only be used if the <code class="codeph">COMPATIBLE</code> initialization parameter for the database is set to 12.2 or higher.
                                 <p>If the <code class="codeph">SPARSE</code> setting is set to <code class="codeph">ON</code>, then the <code class="codeph">BACKUP</code> command creates sparse backups and the <code class="codeph">RESTORE</code> command performs restore operations from sparse backups. If the <code class="codeph">SPARSE</code> setting for the device is set to <code class="codeph">OFF</code>, then RMAN continues to perform database backup and restore operations as before.
                                 </p>
                                 <p>If <code class="codeph">COMPATIBLE</code> is set to 12.2 or higher for the database, then <code class="codeph">ON</code> is the default setting. This setting overrides the default sparseness mode of the database.
                                 </p>
                                 <p>See <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> for more information on sparse databases
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDCBH">
                  <p class="subhead1" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-6316B87B-E743-47B5-9D45-93AE0AB4D908">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-DAA9FDB0-1FF7-4368-B901-853525704C73">
                  <p class="titleinexample">Example 2-50 Configuring Device and Backup Options</p>
                  <p>This example configures channels of device type <code class="codeph">DISK</code> and <code class="codeph">sbt</code> and sets the default device type as <code class="codeph">sbt</code>. The example also enables backup optimization and configures a recovery windows of two weeks.
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT '/disk1/backups/%U';
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_DEVICE_1=tape1)';
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE BACKUP OPTIMIZATION ON;
CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 14 DAYS;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHFJJE">
                  <p class="titleinexample">Example 2-51 Overriding the Default Device Type</p>
                  <p><a id="d28529e3362" class="indexterm-anchor"></a><a id="d28529e3366" class="indexterm-anchor"></a>This example configures duplexing to <code class="codeph">2</code> for <code class="codeph">DISK</code> backups of data files and control files (control file autobackups on disk are a special case and are never duplexed), then configures <code class="codeph">sbt</code> as the default device.
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 2;
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_DEVICE_1=tape1)';
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
</pre><p>The first <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> command backs up the archived redo log files on the default <code class="codeph">sbt</code> channel. The second <code class="codeph">BACKUP</code> command backs up the database to disk locations. Because duplexing is enabled for disk backups, two copies of each output backup set are created.
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP ARCHIVELOG ALL;
BACKUP DEVICE TYPE DISK 
  DATABASE
  FORMAT '/disk1/db_backup_%U','/disk2/db_backup_%U';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHAFGH">
                  <p class="titleinexample">Example 2-52 Configuring Automatic Channels Across File Systems</p>
                  <p>This example configures automatic disk channels across two file systems:</p><pre class="oac_no_warn" dir="ltr">CONFIGURE DEVICE TYPE DISK PARALLELISM 2;
CONFIGURE CHANNEL 1 DEVICE TYPE DISK FORMAT '/disk1/%U';
CONFIGURE CHANNEL 2 DEVICE TYPE DISK FORMAT '/disk2/%U';</pre><p>Because <code class="codeph">PARALLELISM</code> is set to <code class="codeph">2</code>, the following command divides the output data between two file systems:
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP DEVICE TYPE DISK
  DATABASE PLUS ARCHIVELOG;
</pre><p>The following <code class="codeph">LIST</code> command shows how the data file backup was parallelized:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST BACKUPSET 2031, 2032;
 
List of Backup Sets
===================
 
BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
2031    Full    401.99M    DISK        00:00:57     19-JAN-13
        BP Key: 2038   Status: AVAILABLE  Compressed: NO  Tag: TAG20130119T100532
        Piece Name: /disk1/24i7ssnc_1_1
  List of Datafiles in backup set 2031
  File LV Type Ckp SCN    Ckp Time  Name
  ---- -- ---- ---------- --------- ----
  1       Full 973497     19-JAN-13 /disk3/oracle/dbs/t_db1.f
  5       Full 973497     19-JAN-13 /disk3/oracle/dbs/tbs_112.f
 
BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
2032    Full    133.29M    DISK        00:00:57     19-JAN-13
        BP Key: 2039   Status: AVAILABLE  Compressed: NO  Tag: TAG20130119T100532
        Piece Name: /disk2/25i7ssnc_1_1
  List of Datafiles in backup set 2032
  File LV Type Ckp SCN    Ckp Time  Name
  ---- -- ---- ---------- --------- ----
  2       Full 973501     19-JAN-13 /disk3/oracle/dbs/t_ax1.f
  3       Full 973501     19-JAN-13 /disk3/oracle/dbs/t_undo1.f
  4       Full 973501     19-JAN-13 /disk3/oracle/dbs/tbs_111.f</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDDFAA">
                  <p class="titleinexample">Example 2-53 Configuring Automatic Channels in an Oracle Real Application Clusters (Oracle RAC) Configuration</p>
                  <p><a id="d28529e3423" class="indexterm-anchor"></a><a id="d28529e3427" class="indexterm-anchor"></a>This example assumes an Oracle RAC database with two nodes. Oracle Secure Backup is the media manager. Tape drive <code class="codeph">tape1</code> is directly attached to <code class="codeph">node1</code>, while tape drive <code class="codeph">tape2</code> is directly attached to <code class="codeph">node2</code>. The example configures an automatic SBT channel for each cluster node.
                  </p>
                  <p>This example illustrates channel connections to Oracle RAC instances <code class="codeph">node1</code> and <code class="codeph">node2</code>. For both channel connections, RMAN uses the same user name and password that were entered for the target database connection. 
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE DEVICE TYPE sbt PARALLELISM 2;
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE CHANNEL 1 DEVICE TYPE sbt CONNECT '@node1'
  PARMS 'ENV=(OB_DEVICE=tape1)';
CONFIGURE CHANNEL 2 DEVICE TYPE sbt CONNECT '@node2'
  PARMS 'ENV=(OB_DEVICE=tape2)';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHHHDF">
                  <p class="titleinexample">Example 2-54 Configuring Auxiliary File Names</p>
                  <p>This example uses <code class="codeph">CONFIGURE AUXNAME</code> to specify new file names for the data files. The <code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> command duplicates a database to a remote host with a different directory structure.
                  </p><pre class="oac_no_warn" dir="ltr"># set auxiliary names for the data files 
CONFIGURE AUXNAME FOR DATAFILE 1 TO '/oracle/auxfiles/aux_1.f'; 
CONFIGURE AUXNAME FOR DATAFILE 2 TO '/oracle/auxfiles/aux_2.f'; 
CONFIGURE AUXNAME FOR DATAFILE 3 TO '/oracle/auxfiles/aux_3.f'; 
CONFIGURE AUXNAME FOR DATAFILE 4 TO '/oracle/auxfiles/aux_4.f'; 

RUN
{  
  ALLOCATE AUXILIARY CHANNEL dupdb1 TYPE DISK;
  DUPLICATE TARGET DATABASE TO dupdb 
  LOGFILE
    GROUP 1 ('?/dbs/dupdb_log_1_1.f', 
             '?/dbs/dupdb_log_1_2.f') SIZE 4M,
    GROUP 2 ('?/dbs/dupdb_log_2_1.f', 
             '?/dbs/dupdb_log_2_2.f') SIZE 4M REUSE; 
}
# Unspecify the auxiliary names for the data files so that they are not 
# overwritten by mistake:
CONFIGURE AUXNAME FOR DATAFILE 1 CLEAR; 
CONFIGURE AUXNAME FOR DATAFILE 2 CLEAR; 
CONFIGURE AUXNAME FOR DATAFILE 3 CLEAR; 
CONFIGURE AUXNAME FOR DATAFILE 4 CLEAR;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDFCFBB">
                  <p class="titleinexample">Example 2-55 Specifying the Default Format for Control File Autobackup</p>
                  <p>The following example enables the autobackup feature and configures the default autobackup format for the <code class="codeph">DISK</code> and <code class="codeph">sbt</code> devices:
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP ON; 
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/disk2/%F';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE sbt TO 'cf_auto_%F';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDEIDFD">
                  <p class="titleinexample">Example 2-56 Creating Configurations for Standby Databases</p>
                  <p>Assume that primary database <code class="codeph">prod</code> is associated with two standby databases with the <code class="codeph">DB_UNIQUE_NAME</code> names <code class="codeph">dgprod3</code> and <code class="codeph">dgprod4</code>. Assume that you start RMAN and connect to <code class="codeph">prod</code> as <code class="codeph">TARGET</code> and connect to a recovery catalog. The following commands configure the default device type for databases <code class="codeph">dgprod3</code> and <code class="codeph">dgprod4</code>.
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE DEFAULT DEVICE TYPE TO sbt
  FOR DB_UNIQUE_NAME dgprod3;
CONFIGURE DEVICE TYPE sbt PARALLELISM 2
  FOR DB_UNIQUE_NAME dgprod3;
CONFIGURE DEFAULT DEVICE TYPE TO DISK
  FOR DB_UNIQUE_NAME dgprod4;
</pre><p>The control files of the two standby databases are updated with the configuration only after the reverse resynchronization from the recovery catalog to the control file, which occurs the first time that the user connects to <code class="codeph">dgprod3</code> and <code class="codeph">dgprod4</code>.
                  </p>
                  <p>The following <code class="codeph"><a href="SHOW.html#GUID-6C2AF43B-FADD-41AF-9408-852A69538E2F">SHOW</a></code> command displays the persistent device type configurations for the database whose unique name is <code class="codeph">dgprod3</code>:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; SHOW DEVICE TYPE FOR DB_UNIQUE_NAME dgprod3;
RMAN configuration parameters for database with db_unique_name DGPROD3 are:

CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 2 BACKUP TYPE TO BACKUPSET;
CONFIGURE DEVICE TYPE DISK PARALLELISM 1 BACKUP TYPE TO BACKUPSET; # default
</pre><p>The following <code class="codeph">SHOW</code> command displays the persistent configurations for all databases known to the recovery catalog whose DBID is 3257174182 (the value specified by the preceding <code class="codeph">SET DBID</code> command):
                  </p><pre class="oac_no_warn" dir="ltr">SHOW ALL FOR DB_UNIQUE_NAME ALL;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-684A4786-0167-4995-821E-B7E7B1789FA1">
                  <p class="titleinexample">Example 2-57 Optimizing Backups</p>
                  <p>This scenario illustrates the backup optimization behavior described in <a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__G1028761" title="Describes criteria for skipping backups because the files are identical">Table 2-3</a>. Assume that backup optimization is disabled. At 9 a.m., you back up three copies of all existing archived redo log files to tape. The <code class="codeph">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be <code class="codeph">true</code> when duplexing backups to tape.
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP DEVICE TYPE sbt COPIES 3 ARCHIVELOG ALL;
</pre><p>At 11 a.m., you enable backup optimization:</p><pre class="oac_no_warn" dir="ltr">CONFIGURE BACKUP OPTIMIZATION ON;
</pre><p>At noon, you run the following archived redo log backup:</p><pre class="oac_no_warn" dir="ltr">BACKUP DEVICE TYPE sbt COPIES 2 ARCHIVELOG ALL;
</pre><pre class="oac_no_warn" dir="ltr">Starting backup at 19-JAN-13
current log archived
using channel ORA_SBT_TAPE_1
skipping archived log file /d1/db1r_605ab325_1_34_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_35_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_36_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_37_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_38_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_39_612112605.arc; already backed up 3 time(s)
channel ORA_SBT_TAPE_1: starting archived log backup set
channel ORA_SBT_TAPE_1: specifying archived log(s) in backup set
input archived log thread=1 sequence=40 RECID=170 STAMP=612270506
channel ORA_SBT_TAPE_1: starting piece 1 at 19-JAN-13
channel ORA_SBT_TAPE_1: finished piece 1 at 19-JAN-13 with 2 copies and tag TAG20130119T110827
piece handle=2hi7t0db_1_1 comment=API Version 2.0,MMS Version 10.1.0.0
piece handle=2hi7t0db_1_2 comment=API Version 2.0,MMS Version 10.1.0.0
</pre><p>In this case, the <code class="codeph">BACKUP</code> <code class="codeph">...</code> <code class="codeph">COPIES</code> setting overrides the <code class="codeph">CONFIGURE</code> <code class="codeph">...</code> <code class="codeph">COPIES</code> setting, so RMAN sets <span class="italic"><code class="codeph">n</code></span><code class="codeph">=2</code>. RMAN skips the backup of a log only if at least two copies of the log exist on the <code class="codeph">sbt</code> device. Because three copies of each log exist on <code class="codeph">sbt</code> of all the logs generated on or before 9 a.m., RMAN skips the backups of these logs. However, RMAN backs up two copies of all logs generated after 9 a.m. because these logs have not yet been backed up to tape.
                  </p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-18E85E48-0512-48C9-B05B-FA4D64436A1B">
                  <p class="titleinexample">Example 2-58 Configuring a Default Compression Algorithm</p>
                  <p>This example assumes that you have a license for the Advanced Compression Option (ACO) of the database.</p>
                  <p>If you want to make the <code class="codeph">MEDIUM </code>compression algorithm the default compression algorithm for all compressed backups, issue the following:
                  </p><pre class="oac_no_warn" dir="ltr">CONFIGURE COMPRESSION ALGORITHM 'MEDIUM';
</pre><p>From this point on, you can use the <code class="codeph">MEDIUM </code>compression algorithm by issuing the following command:
                  </p><pre class="oac_no_warn" dir="ltr">BACKUP AS COMPRESSED BACKUPSET DATABASE;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__GUID-65CCC5D3-CEA4-4A42-A627-783D9DE85584">
                  <p class="titleinexample">Example 2-59 Configuring Sparse Backups</p>
                  <p>This example creates a persistent configuration that, by default, creates sparse backups to disk and in the backup set format. </p><code class="codeph">CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO BACKUPSET SPARSE ON; </code></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html><html id='00928.developing-appc-client-app-sna-only.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Developing Client Application (SNA Only)</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="F18239-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-tip-oracle-database-gateway-appc.html" title="Previous" type="text/html">
      <link rel="next" href="implement-appc-commit-confirm-sna-only.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User's Guide">
    <meta name="dcterms.isVersionOf" content="APPUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-tip-oracle-database-gateway-appc.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="implement-appc-commit-confirm-sna-only.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Developing Client Application (SNA Only)</li>
            </ol>
            <a id="GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788" name="GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788"></a><a id="APPUG400"></a>
            
            <h2 id="APPUG-GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788" class="sect2"><span class="enumeration_chapter">4 </span> Developing Client Application (SNA Only)
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The following sections discuss how you will call a TIP and control a remote host transaction. It also provides you with the steps for preparing and executing a gateway transaction. The following assumptions are made:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>a remote host transaction (RHT) has already been written</p>
                  </li>
                  <li>
                     <p>a TIP corresponding to the RHT has already been defined using the steps described in <a href="creating-tip-oracle-database-gateway-appc.html#GUID-78D4439E-7DD6-45DF-842E-35007FCC572B">Creating a TIP</a></p>
                     <div class="infoboxnote" id="GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788__GUID-868E1727-1517-4BC4-865D-38F73C533907">
                        <p class="notep1">Note:</p>
                        <p>If your gateway uses the TCP/IP support for IMS Connect, refer to <a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC"> Client Application Development (TCP/IP Only)</a> for information about calling a TIP and controlling a remote host transaction.
                        </p>
                     </div>
                  </li>
               </ul>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-4AF92748-25E4-4262-88D7-742CE302709D">Overview of Client Application </a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-234C85C7-BC32-4B2F-9580-9151360B3DD7">Preparing the Client Application</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-BFE11091-D32F-4B66-B48F-5569EB5FAD6E">Understanding the Remote Host Transaction Requirements</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-30316801-BD91-4799-BAB2-B145F27CD624">Customized TIPs for Each Remote Host Transaction</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E">Client Application Requirements</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-B264D759-308E-46B3-B303-7E651B4AF83C">Ensuring TIP and Remote Transaction Program Correspondence</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-1C0A2278-D220-4DDB-888C-F691D057BB78">Calling the TIP from the Client Application</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-62418ADB-1A9B-4DCC-A2D5-70940D7ECBFC">Exchanging Data</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-19815A38-8520-41D5-9418-2DB46AFDB9AA">Executing the Application</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-E02BE2D4-97BA-407C-B1D6-4503D79561D7">APPC Conversation Sharing</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-2F5FD89A-06E6-47DF-84CD-525B6515B25F">Application Development with Multi-Byte Character Set Support</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-B118F27C-0B26-4429-8B70-3CC5B01C6A93">Modifying a Terminal-Oriented Transaction to Use APPC</a></p>
                  </li>
                  <li>
                     <p><a href="developing-appc-client-app-sna-only.html#GUID-8E530425-F978-4095-8A39-B8FD8BE2A47A">Privileges Needed to Use TIPs</a></p>
                  </li>
               </ul>
            </div><a id="APPUG1299"></a><a id="APPUG970"></a><div class="props_rev_3"><a id="GUID-4AF92748-25E4-4262-88D7-742CE302709D" name="GUID-4AF92748-25E4-4262-88D7-742CE302709D"></a><h3 id="APPUG-GUID-4AF92748-25E4-4262-88D7-742CE302709D" class="sect3">Overview of Client Application </h3>
               <div>
                  <p>The Procedural Gateway Administration Utility (<a id="d17239e161" class="indexterm-anchor"></a>PGAU) generates a complete TIP using definitions you provide. The client application can then call the TIP to access the remote host transaction. <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a>, discusses the use of PGAU in detail.
                  </p>
                  <p>This overview explains what you must do in order to call a TIP and control a remote host transaction.</p>
                  <p>The gateway receives PL/SQL calls from the <a id="d17239e172" class="indexterm-anchor"></a>Oracle database and issues APPC calls to communicate with a remote transaction program. The following three application programs make this possible:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>an APPC-enabled remote host transaction program</p>
                     </li>
                     <li>
                        <p>a <a id="d17239e182" class="indexterm-anchor"></a>Transaction Interface Package, or TIP. A TIP is a P<a id="d17239e185" class="indexterm-anchor"></a>L/SQL package that handles communication between the client and the gateway and performs datatype conversions between COBOL and PL/SQL.
                        </p>
                        <p>PGAU generates the <a id="d17239e192" class="indexterm-anchor"></a><a id="d17239e196" class="indexterm-anchor"></a>TIP specification for you. In the shipped samples, the PGAU-generated package is called <code class="codeph">pgadb2i.pkb</code>. This generated TIP includes at least three function calls that map to the remote transaction program:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">pgadb2i_init</code> initializes the conversation with the remote transaction program
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pgadb2i_main</code> exchanges application data with the remote transaction program
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pgadb2i_term</code> terminates the conversation with the remote transaction program
                              </p>
                           </li>
                        </ul>
                        <p>Refer to <a href="tip-internals-oracle-database-gateway-appc.html#GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17"> Tip Internals</a> for more information about TIPs, if you are writing your own TIP or debugging.
                        </p>
                     </li>
                     <li>
                        <p>a client application that calls the TIP.</p>
                        <p>The client application calls the three TIP functions with input and output arguments. In the example, the client application passes <code class="codeph">empno</code>, an employee number to the remote transaction and the remote transaction sends back <code class="codeph">emprec</code> an employee record.
                        </p>
                     </li>
                  </ul>
                  <p><a href="developing-appc-client-app-sna-only.html#GUID-4AF92748-25E4-4262-88D7-742CE302709D__CHDDBIFA" title="This 3 column table describes demonstrates the logic flow between the PL/SQL driver, the TIP, and the gateway using the example CICS-DB2 transaction">Table 4-1</a> demonstrates the logic flow between the PL/SQL driver, the TIP, and the gateway using the example CICS-DB2 transaction. 
                  </p>
                  <div class="tblformal" id="GUID-4AF92748-25E4-4262-88D7-742CE302709D__CHDDBIFA">
                     <p class="titleintable">Table 4-1 Logic Flow of CICS-DB2 Example</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Logic Flow of CICS-DB2 Example" summary="This 3 column table describes demonstrates the logic flow between the PL/SQL driver, the TIP, and the gateway using the example CICS-DB2 transaction" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d17239e252">Client Application</th>
                              <th align="left" valign="bottom" width="30%" id="d17239e255">Oracle TIP</th>
                              <th align="left" valign="bottom" width="46%" id="d17239e258">Procedures Established Between the Gateway and the Remote Transaction (mainframe)</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d17239e263" headers="d17239e252 ">
                                 <p><code class="codeph">calls tip_init</code></p>
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d17239e263 d17239e255 ">
                                 <p>Calls <code class="codeph">PGAINIT</code></p>
                              </td>
                              <td align="left" valign="top" width="46%" headers="d17239e263 d17239e258 ">
                                 <p>Gateway sets up control blocks and issues APPC <code class="codeph">ALLOCATE</code>. Mainframe program initiates.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d17239e280" headers="d17239e252 ">
                                 <p><code class="codeph">calls tip_main</code></p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d17239e280 d17239e255 ">
                                 <p>Calls <code class="codeph">PGAXFER</code> to send <code class="codeph">empno</code> and receive <code class="codeph">emprec</code></p>
                              </td>
                              <td align="left" valign="top" width="46%" headers="d17239e280 d17239e258 ">
                                 <p>Gateway issues APPC <code class="codeph">SEND</code> to the mainframe. Mainframe <code class="codeph">RECEIVE</code> completes. Mainframe performs application logic and issues APPC <code class="codeph">SEND</code> back to gateway. The gateway- issues APPC <code class="codeph">RECEIVE</code>; receive completes. Mainframe issues APPC <code class="codeph">TERM</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d17239e314" headers="d17239e252 ">
                                 <p><code class="codeph">calls tip_term</code></p>
                              </td>
                              <td align="left" valign="top" width="30%" headers="d17239e314 d17239e255 ">
                                 <p>Call <code class="codeph">PGATERM</code></p>
                              </td>
                              <td align="left" valign="top" width="46%" headers="d17239e314 d17239e258 ">
                                 <p>Gateway cleans up control blocks.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>A client application which utilizes the gateway to exchange data with a remote host transaction performs some tasks for itself and instructs the TIP to perform other tasks on its behalf. The client application designer must consequently know the behavior of the remote transaction and how the TIP facilitates the exchange.</p>
                  <p>The following sections provide an overview of remote host transaction behavior, how this behavior is controlled by the client application and how TIP function calls and data declarations support the client application to control the remote host transaction. These sections also provide background information about what the TIP does for the client application and how the TIP calls exchange data with the remote host transaction.</p>
               </div>
            </div><a id="APPUG971"></a><div class="props_rev_3"><a id="GUID-234C85C7-BC32-4B2F-9580-9151360B3DD7" name="GUID-234C85C7-BC32-4B2F-9580-9151360B3DD7"></a><h3 id="APPUG-GUID-234C85C7-BC32-4B2F-9580-9151360B3DD7" class="sect3">Preparing the Client Application</h3>
               <div>
                  <div class="section">
                     <p>To prepare the client application for execution you must understand the remote host transaction requirements and then perform these steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Move relevant <a id="d17239e373" class="indexterm-anchor"></a>COBOL records layout (copybooks) to the gateway system for input to PGAU.</span></li>
                     <li><span>Describe the remote host transaction data and calls to the <a id="d17239e379" class="indexterm-anchor"></a>PG Data Dictionary     (PG DD) with <code class="codeph">DEFINE DATA</code>, <code class="codeph">DEFINE CALL</code>, and <code class="codeph">DEFINE TRANSACTION</code> statements.</span></li>
                     <li><span>Generate the TIP in the Oracle database, using <code class="codeph">GENERATE</code>.</span></li>
                     <li><span>Create the client application that calls the TIP public functions.</span></li>
                     <li><span>Grant privileges on the newly created package.</span></li>
                  </ol>
               </div>
            </div><a id="APPUG972"></a><div class="props_rev_3"><a id="GUID-BFE11091-D32F-4B66-B48F-5569EB5FAD6E" name="GUID-BFE11091-D32F-4B66-B48F-5569EB5FAD6E"></a><h3 id="APPUG-GUID-BFE11091-D32F-4B66-B48F-5569EB5FAD6E" class="sect3">Understanding the Remote Host Transaction Requirements</h3>
               <div>
                  <p>Browse through the remote host transaction program (RTP) to determine: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>the PL/SQL parameters required on the various client application to TIP calls</p>
                     </li>
                     <li>
                        <p>the order in which the calls are made</p>
                     </li>
                  </ul>
                  <p>Identify the remote host transaction program (RTP) facilities to be called and the data to be exchanged on each call. You will then define the following, and store them in the PG&nbsp;DD:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DEFINE DATA</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">DEFINE CALL</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">DEFINE TRANSACTION</code></p>
                     </li>
                  </ul>
                  <p>Refer to <a href="creating-tip-oracle-database-gateway-appc.html#GUID-78D4439E-7DD6-45DF-842E-35007FCC572B"> Creating a TIP</a> for specific definition steps and for the actual creation and generation of a TIP.
                  </p>
               </div><a id="APPUG973"></a><div class="props_rev_3"><a id="GUID-72D8DB06-5E1C-499E-8C3F-95D5304DB401" name="GUID-72D8DB06-5E1C-499E-8C3F-95D5304DB401"></a><h4 id="APPUG-GUID-72D8DB06-5E1C-499E-8C3F-95D5304DB401" class="sect4">TIP Content and Purpose</h4>
                  <div>
                     <p>The content of a PGAU-generated TIP reflects the calls available to the remote host transaction and the data that has been exchanged. Understanding this content helps when designing and debugging client applications that call the TIP.</p>
                     <p>A TIP is a <a id="d17239e522" class="indexterm-anchor"></a>PL/SQL package, and accordingly has <a id="d17239e527" class="indexterm-anchor"></a><a id="d17239e531" class="indexterm-anchor"></a>two sections:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A Package Specification containing:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Public function prototypes and parameters, and</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>A Package Body containing:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Private functions and internal control variables</p>
                              </li>
                              <li>
                                 <p>Public functions</p>
                              </li>
                              <li>
                                 <p>Package initialization following the last public function.</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>The purpose of the TIP is to provide a PL/SQL callable public function for every allowed remote transaction program interaction. A <a id="d17239e561" class="indexterm-anchor"></a>remote transaction program interaction is a logically related group of data exchanges through one or more <a id="d17239e566" class="indexterm-anchor"></a><a id="d17239e568" class="indexterm-anchor"></a><code class="codeph">PGAXFER</code> RPC calls. This is conceptually similar to a screen or menu interaction in which several fields are filled in, the enter key is pressed, and several fields are returned to the user. Carrying the analogy further:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>the user might be likened to the TIP or client application</p>
                        </li>
                        <li>
                           <p>fields to be filled in are <code class="codeph">IN</code> parameters on the TIP function call
                           </p>
                        </li>
                        <li>
                           <p>fields returned are <code class="codeph">OUT</code> parameters on the TIP function call
                           </p>
                        </li>
                        <li>
                           <p>screen or menu is the group of <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameters combined
                           </p>
                        </li>
                        <li>
                           <p>a pressed enter key is likened to the <code class="codeph">PGAXFER</code> remote procedural call (RPC)
                           </p>
                        </li>
                     </ul>
                     <p>The actual grouping of parameters that constitute a transaction call is defined by the user. The gateway places no restrictions on how a remote transaction program might correspond to a collection of TIP function calls, each call having many <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameters.
                     </p>
                     <p>PGA users typically have one TIP per remote transaction program. How the TIP function calls are grouped and what data parameters are exchanged on each call depends on the size, complexity and behavior of the remote transaction program.</p>
                     <p>Refer to Oracle's <a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for a discussion of how <a id="d17239e623" class="indexterm-anchor"></a>PL/SQL packages work. The following discussion covers the logic that must be performed within a TIP. Refer to the sample TIP and driver supplied in the                       <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS </code>directory for Microsoft Windows or  <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code> directory for UNIX based systems, in files<a id="d17239e632" class="indexterm-anchor"></a><a id="d17239e634" class="indexterm-anchor"></a> <code class="codeph">pgadb2i.pkh</code>, <a id="d17239e643" class="indexterm-anchor"></a><a id="d17239e645" class="indexterm-anchor"></a><code class="codeph">pgadb2i.pkb</code>, and<a id="d17239e652" class="indexterm-anchor"></a> <code class="codeph">pgadb2id.sql</code>.
                     </p>
                  </div>
               </div><a id="APPUG974"></a><div class="props_rev_3"><a id="GUID-FD67739C-7249-466A-A492-0E43195A6D3B" name="GUID-FD67739C-7249-466A-A492-0E43195A6D3B"></a><h4 id="APPUG-GUID-FD67739C-7249-466A-A492-0E43195A6D3B" class="sect4">Remote Host Transaction Types</h4>
                  <div>
                     <p>From a database gateway application perspective, there are three main types of remote host transactions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>one-shot</p>
                        </li>
                        <li>
                           <p>persistent</p>
                        </li>
                        <li>
                           <p>multi-conversational</p>
                        </li>
                     </ul>
                  </div><a id="APPUG975"></a><div class="props_rev_3"><a id="GUID-58F456FB-9B18-4D4A-ABA9-D97863A69B2E" name="GUID-58F456FB-9B18-4D4A-ABA9-D97863A69B2E"></a><h5 id="APPUG-GUID-58F456FB-9B18-4D4A-ABA9-D97863A69B2E" class="sect5">One-Shot Transactions</h5>
                     <div>
                        <p><a id="d17239e747" class="indexterm-anchor"></a>A simple remote transaction program which receives one employee number and returns the employee record could have a TIP which provides one call, passing the employee number as an <code class="codeph">IN</code> parameter and returning the employee record as an <code class="codeph">OUT</code> parameter. An additional two function calls must be provided by this and every TIP:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>a remote transaction program init function call</p>
                           </li>
                           <li>
                              <p>a remote transaction program terminate function call</p>
                           </li>
                        </ul>
                        <p>The most simple TIP has three public functions, such as <code class="codeph">tip_init</code>, <code class="codeph">tip_main</code>, and           <code class="codeph">tip_term</code>.
                        </p>
                        <p>The client application calls <code class="codeph">tip_init</code>, <code class="codeph">tip_main</code>, and <code class="codeph">tip_term</code> in succession. The corresponding activity at the remote site is remote transaction program start, data exchange, and remote transaction program end.
                        </p>
                        <p>The remote transaction program might even terminate itself before receiving a terminate signal from the gateway. This sequence is usual and is handled normally by gateway logic. This kind of remote transaction program is termed one-shot.</p>
                     </div>
                  </div><a id="APPUG976"></a><div class="props_rev_3"><a id="GUID-6F97F428-51DD-4A44-A5E3-EFD7A07A1AAD" name="GUID-6F97F428-51DD-4A44-A5E3-EFD7A07A1AAD"></a><h5 id="APPUG-GUID-6F97F428-51DD-4A44-A5E3-EFD7A07A1AAD" class="sect5">Persistent Transactions</h5>
                     <div>
                        <p><a id="d17239e826" class="indexterm-anchor"></a>A more complex remote transaction program has two modes of behavior: an <code class="codeph">INQUIRY</code> or reporting mode, and an <code class="codeph">UPDATE</code> mode. These modes can have two TIP data transfer function calls: one for <code class="codeph">INQUIRY</code> and one for <code class="codeph">UPDATE</code>. Such a TIP might have five public functions. For example:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d17239e844" class="indexterm-anchor"></a><code class="codeph">tip_init</code></p>
                              <p>This initializes communications with the remote transaction program.</p>
                           </li>
                           <li>
                              <p><a id="d17239e856" class="indexterm-anchor"></a><code class="codeph">tip_mode</code></p>
                              <p>This accepts a mode selection parameter and puts the transaction program into either inquiry or update mode.</p>
                           </li>
                           <li>
                              <p><a id="d17239e868" class="indexterm-anchor"></a><code class="codeph">tip_inqr</code> 
                              </p>
                              <p>This returns an employee record for a given employee number.</p>
                           </li>
                           <li>
                              <p>t<a id="d17239e882" class="indexterm-anchor"></a><code class="codeph">ip_updt</code></p>
                              <p>This accepts an employee record for a given employee number.</p>
                           </li>
                           <li>
                              <p><a id="d17239e894" class="indexterm-anchor"></a><code class="codeph">tip_term</code></p>
                              <p>This terminates communications with the remote transaction program.</p>
                           </li>
                        </ul>
                        <p>The client application calls <code class="codeph">tip_init</code> and then <code class="codeph">tip_mode</code> to place the remote transaction program in inquiry mode which then scans employee records, searching for some combination of attributes (known to the client application and end-user).   Some parameter on an inquiry call is then set to signal a change to update mode and the client application calls <code class="codeph">tip_updt</code> to update some record. The client application finally calls <code class="codeph">tip_term</code> to terminate the remote transaction program.
                        </p>
                        <p>The corresponding activity at the <a id="d17239e920" class="indexterm-anchor"></a>remote site is:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>remote transaction program start</p>
                           </li>
                           <li>
                              <p>mode selection exchange</p>
                           </li>
                           <li>
                              <p>loop reading records</p>
                           </li>
                           <li>
                              <p>switch to update mode</p>
                           </li>
                           <li>
                              <p>update one record</p>
                           </li>
                           <li>
                              <p>remote transaction program end</p>
                           </li>
                        </ul>
                        <p>Such a remote transaction program is called persistent because it interacts until it is signalled to terminate.</p>
                        <p>The remote transaction program can be written to permit a return to inquiry mode and repeat the entire process indefinitely.</p>
                     </div>
                  </div><a id="APPUG977"></a><div class="props_rev_3"><a id="GUID-EB18C5AF-6577-4702-9893-250023FB106B" name="GUID-EB18C5AF-6577-4702-9893-250023FB106B"></a><h5 id="APPUG-GUID-EB18C5AF-6577-4702-9893-250023FB106B" class="sect5">Multi-Conversational Transactions</h5>
                     <div>
                        <p><a id="d17239e988" class="indexterm-anchor"></a>A client application might need to get information from one transaction, <code class="codeph">tran_A</code>, and subsequently write or lookup information from another, <code class="codeph">tran_B</code>. This is possible with a properly written client application and TIPs for <code class="codeph">tran_A</code> and <code class="codeph">tran_B</code>. In fact, any number of transactions might be concurrently controlled by a single client application. All transactions could be read-only, with the client application retrieving data from each and consolidating it into a local Oracle database or displaying it in an Oracle Form. 
                        </p>
                        <p>Alternatively, a transaction could be capable of operating in different modes or performing different services depending on what input selections were supplied by the client application. For example, one instance of <code class="codeph">tran_C</code> can perform one service while a second instance of <code class="codeph">tran_C</code> performs a second service. Each instance of          <code class="codeph">tran_C</code> would have its own unique conversation with the client application and each instance could have its own behavior (one-shot or persistent) depending on the nature of the service being performed.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="APPUG1300"></a><a id="APPUG978"></a><div class="props_rev_3"><a id="GUID-30316801-BD91-4799-BAB2-B145F27CD624" name="GUID-30316801-BD91-4799-BAB2-B145F27CD624"></a><h3 id="APPUG-GUID-30316801-BD91-4799-BAB2-B145F27CD624" class="sect3">Customized TIPs for Each Remote Host Transaction</h3>
               <div>
                  <p>Each remote host system might have hundreds of <a id="d17239e1057" class="indexterm-anchor"></a>remote transaction programs (RTPs) which a user might want to call. Each remote transaction program is different, passes different data, and performs different functions. The interface between the user and each remote transaction program must consequently be specialized and customized to the user's requirements for each remote transaction program. The Transaction Interface Package provides this customized interface.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-30316801-BD91-4799-BAB2-B145F27CD624__GUID-BA1A1ECC-D0C8-4B68-9E3D-596D66EC921F">Example</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Assume that the remote site has a transaction program which manages employee information in an employee database or other file system. The remote transaction program's name, in the remote host, is <code class="codeph">EMPT</code> for Employee Tracking. <code class="codeph">EMPT</code> provides both inquiry and update facilities, and different Oracle users are required to access and use these <code class="codeph">EMPT</code> facilities.
                     </p>
                     <p>Some users might be restricted to inquiry-only use of <code class="codeph">EMPT</code>, while others might have update requirements. In support of the Oracle users' client applications, at least three possible TIPs could exist:
                     </p>
                     <ol>
                        <li>
                           <p><code class="codeph">EMP_MGMT</code> to provide access to all facilities of the <code class="codeph">EMPT</code> remote transaction program.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">EMP_UPDT</code> to access only the update functions of the <code class="codeph">EMPT</code> remote transaction program.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">EMP_INQR</code> to access only the lookup functions of the <code class="codeph">EMPT</code> remote transaction program.
                           </p>
                        </li>
                     </ol>
                     <p>End-user access to these TIPs is controlled by Oracle privileges. Additional security might be imposed on the end-user by the remote host.</p>
                     <p>Each TIP also has encoded within it the name of the remote transaction program (<code class="codeph">EMPT</code>) and network information sufficient to establish an APPC conversation with <code class="codeph">EMPT</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG1301"></a><a id="APPUG1302"></a><a id="APPUG1303"></a><a id="APPUG979"></a><div class="props_rev_3"><a id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E" name="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E"></a><h3 id="APPUG-GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E" class="sect3">Client Application Requirements</h3>
               <div>
                  <p>Using the TIP, the client application must correspond with and control the <a id="d17239e1181" class="indexterm-anchor"></a>remote host transaction. This involves:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>client application initialization</p>
                     </li>
                     <li>
                        <p>user input and output</p>
                     </li>
                     <li id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__I1008983">
                        <p>remote host transaction initialization using the TIP initialization functions (with and without overrides)</p>
                     </li>
                     <li id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__I1008989">
                        <p>remote host transaction control and data exchange using the TIP user functions</p>
                     </li>
                     <li id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__I1008993">
                        <p>remote host transaction termination using the TIP termination function</p>
                        <p>The preceding three steps vary, based on the requirements of the remote host transaction.</p>
                     </li>
                     <li>
                        <p>exception handling</p>
                     </li>
                     <li>
                        <p>client application termination</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__GUID-7AAE85C6-85B8-48CE-96F8-5ABD3024CCFD"> One-shot remote host transaction client applications must:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Declare RHT/TIP datatypes to be exchanged. <a id="d17239e1218" class="indexterm-anchor"></a>All client applications must declare variables to be exchanged with the RHTs using TIPs. <a id="d17239e1225" class="indexterm-anchor"></a>PL/SQL datatypes for such variables have already been defined in the TIP corresponding to each RHT and the client application need only reference the TIP datatype in its declaration. Refer also to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6">Declaring TIP Variables</a>"</span> for more information. Also refer to the TIP content documentation file for the specific TIP/RHT for more information about the exact usage of these variables.
                           </p>
                        </li>
                        <li>
                           <p>Initialize the RHT using the TIP initialization function<a id="d17239e1238" class="indexterm-anchor"></a>. The TIP directs the gateway server to initialize a conversation with the desired RHT, specifying either default RHT identifying parameters (supplied when the RHT was defined in the PG DD and encoded within the TIP when it was generated) or override RHT identifying parameters supplied by the user or client application when the TIP initialization function is called. Refer to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-41ABD528-5797-468E-A436-B6B3434ADF34">Initializing the Conversation</a>"</span> and <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-125BF246-33A2-46AF-87E8-7344F3B4F573">Overriding TIP Initializations</a>"</span> for more details. 
                           </p>
                        </li>
                        <li>
                           <p>Exchange data with the RHT using the TIP user function (one call).<a id="d17239e1258" class="indexterm-anchor"></a> As previously discussed, a one-shot remote host transaction only accommodates a single data exchange and upon completion of that exchange, the RHT terminates on its own. The client application consequently needs only to execute a single call to the user-defined TIP function to cause the data exchange. 
                           </p>
                           <p>Refer to the TIP content documentation file in                                                  <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS\</code> on Microsoft Windows or <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS/</code> on UNIX based systems, for the specific TIP/RHT for the exact syntax of this call.
                           </p>
                           <p>The client application should initialize values into <code class="codeph">IN</code> or <code class="codeph">IN OUT</code> parameter values before calling the TIP function call. These are the same variables that were declared above, when you declared the RHT/TIP datatypes to be exchanged.
                           </p>
                           <p>All TIP function calls return a <code class="codeph">0</code> return code value and all returned user gateway data values are exchanged in the function parameters. Any exception conditions are raised as required and can be intercepted in an exception handler.
                           </p>
                           <p>Upon return from the TIP function call, the client application can analyze and operate on the <code class="codeph">IN OUT</code> or <code class="codeph">OUT</code> parameter values. These are the same variables that were declared above, when you declared the RHT/TIP datatypes to be exchanged.
                           </p>
                           <p>Refer to <a href="data-type-conversion-oracle-database-gateway-appc.html#GUID-FEB0C201-9C07-4932-A328-B048B582B18A"> Datatype Conversions</a> for details about how TIPs convert the various types and formats of remote host data.
                           </p>
                        </li>
                        <li>
                           <p>Terminate the RHT using the TIP termination function<a id="d17239e1303" class="indexterm-anchor"></a>. Regardless of the type of RHT being accessed, the TIP terminate function should be called to clean up and terminate the conversation with the RHT. Conversations with one-shot RHTs can be terminated from the gateway server before the RHT terminates. The TIP must perform its cleanup as well. Cleanup is only performed at the termination request of the client application.
                           </p>
                           <p>The client application can request a normal or an aborted termination.</p>
                           <p>Refer to <a id="d17239e1314" class="indexterm-anchor"></a><a id="d17239e1316" class="indexterm-anchor"></a><span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-3CDB9504-3937-4909-A6FE-3B63FC25BF75">Terminating the Conversation</a>"</span> for more information.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__GUID-A1A87711-9449-496D-88E7-B271382F6BBD">Persistent remote host transaction client applications must:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Declare RHT/TIP datatypes to be exchanged. <a id="d17239e1333" class="indexterm-anchor"></a>All client applications must declare variables to be exchanged with the RHTs using TIPs. <a id="d17239e1340" class="indexterm-anchor"></a>PL/SQL datatypes for such variables have already been defined in the TIP corresponding to each RHT; the client application need only reference the TIP datatype in its declaration. Refer to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6">Declaring TIP Variables</a>"</span> for more information. Refer also to the TIP content documentation file for the specific TIP/RHT for more information about the exact usage of these variables.
                           </p>
                        </li>
                        <li>
                           <p>Initialize the RHT using the TIP initialization function. <a id="d17239e1353" class="indexterm-anchor"></a>The TIP directs the gateway server to initialize a conversation with the desired RHT, specifying either default RHT identifying parameters (supplied when the RHT was defined in the PG DD and encoded within the TIP when it was generated) or override RHT identifying parameters supplied by the user or client application when the TIP initialization function is called. Refer to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-41ABD528-5797-468E-A436-B6B3434ADF34">Initializing the Conversation</a>"</span> and <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-125BF246-33A2-46AF-87E8-7344F3B4F573">Overriding TIP Initializations</a>"</span> for more details. 
                           </p>
                        </li>
                        <li>
                           <p>Repetitively exchange data with RHT using the TIP user function(s).<a id="d17239e1373" class="indexterm-anchor"></a> Remote host transactions that provide or require ongoing or repetitive control sequences should be controlled by the client application in the same manner that the RHT would be operated by an interactive user or other control program. The intercession of the TIP and gateway server does not alter the RHT behavior; instead, it extends control of that behavior to the client application using the various function calls defined in the TIP.
                           </p>
                           <p>A persistent RHT can be controlled with one or more TIP function calls. The RHT might be designed, for example, to loop and return output for every input until the conversation is explicitly terminated. Or it could have been designed to accept as input a count or list of operations to perform and return the results in multiple exchanges for which the TIP function has only <code class="codeph">OUT</code> parameters.
                           </p>
                           <p>A persistent RHT can also be interactive, each output being specified by a previous input selection and ending only when the conversation has been explicitly terminated by the client application.</p>
                           <p>The TIP function calls available to the client applications and their specific syntax is documented in the TIP Content documentation file for the specific TIP/RHT.</p>
                           <p>The manner in which the RHT interprets the TIP <code class="codeph">IN</code> parameters and returns TIP <code class="codeph">OUT</code> parameters must be determined from the RHT or explained by the RHT programmer. The TIP provides the function calls and the exchanged parameter datatypes to facilitate the client application's control of the RHT and imposes no limitations or preconditions on the sequence of operations the RHT is directed to perform. The TIP provides the client application with the calls and data parameters the RHT was defined to accept in the PG DD.
                           </p>
                        </li>
                        <li>
                           <p>Terminate the RHT using the TIP termination function<a id="d17239e1400" class="indexterm-anchor"></a>. Regardless of the type of RHT being accessed, the TIP terminate function should be called to clean up and terminate the conversation with the RHT. Conversations with persistent RHTs can be terminated from the gateway server before the RHT terminates, or the RHT might have already terminated. The TIP must perform its cleanup as well and this cleanup is only performed at the termination request of the client application.
                           </p>
                           <p>The client application can request a normal or an aborted termination.</p>
                           <p>Refer to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-3CDB9504-3937-4909-A6FE-3B63FC25BF75">Terminating the Conversation</a>"</span> for more information.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__GUID-593ABAAC-F841-4C3F-9E40-C787577267B5">Multi-conversational remote host transaction client applications must:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Declare RHT/TIP datatypes to be exchanged.<a id="d17239e1424" class="indexterm-anchor"></a> All client applications must declare variables to be exchanged with the RHTs using TIPs. <a id="d17239e1431" class="indexterm-anchor"></a>PL/SQL datatypes for such variables have already been defined in the TIP corresponding to each RHT, and the client application need only reference the TIP datatype in its declaration. Refer to <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6">Declaring TIP Variables</a>"</span> for more information. Also refer to the TIP content documentation file for the specific TIP/RHT for more information about the exact usage of these variables.
                           </p>
                        </li>
                        <li>
                           <p>Initialize each RHT involved, using the TIP initializing function<a id="d17239e1444" class="indexterm-anchor"></a>. A specific customized TIP exists for each RHT as defined in the PG DD. Client applications that control multiple RHTs are multi-conversational and must start each RHT and its associated conversation. This is done by calling each TIP initialization function as before; but multiple TIPs are initialized.
                           </p>
                           <p>If a single RHT is designed to perform multiple services for one or more callers and if the client application is designed to use this RHT, the TIP corresponding to that RHT can be initialized multiple times by the client application.</p>
                           <p>The client application subsequently distinguishes from active RHTs under its control using:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>TIP schema <code class="codeph">tipname.callname</code> when multiple TIP/RHTs are being controlled. By encoding the same TIP schema name on TIP user calls, the client application specifies to which RHT the call is being made.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">tranuse</code> <code class="codeph">IN OUT</code> parameter value when multiple instances of the same TIP/RHT are being controlled. This is the value returned on the TIP initialization function call and subsequently passed as an <code class="codeph">IN</code> parameter on the user-defined TIP function calls. The returned <code class="codeph">tranuse</code> value corresponds to that conversation connected to a given instance of an RHT. By supplying the same <code class="codeph">tranuse</code> value on TIP user calls, the client application specifies to which RHT instance the given RHT call is being made.
                                 </p>
                              </li>
                           </ul>
                           <p>Client application logic must keep track of which RHTs have been started and which TIPs and <code class="codeph">tranuse</code> values correspond to started RHTs.
                           </p>
                        </li>
                        <li>
                           <p>Exchange data with each RHT, using the TIP user function(s), either once or repetitively<a id="d17239e1487" class="indexterm-anchor"></a> if the RHT is one-shot or persistent. Client application logic must sequence the RHTs though their allowed steps in accordance with proper RHT operation, as does a user operating the RHTs interactively.
                           </p>
                           <p>Client application logic must also perform any cross-RHT result analysis or data transfer that might be required. All TIPs execute in isolation from each other.</p>
                           <p>Output from one RHT intended as input to another RHT must be received in the client application as an <code class="codeph">IN</code> or <code class="codeph">IN OUT</code> parameter from the first RHT and sent as an <code class="codeph">IN</code> or <code class="codeph">IN OUT</code> parameter from the client application to the second RHT. All TIP-to-RHT function calls must be performed by the client application and data parameters exchanged must have been declared as variables by the client application. The TIPs provide both the required datatype definitions and the RHT function calls for the client application.
                           </p>
                           <p>Refer to the TIP content documentation file for each specific TIP/RHT for the exact syntax of the TIP function calls and definitions of the parameter datatypes exchanged.</p>
                        </li>
                        <li>
                           <p>Terminate each initialized RHT<a id="d17239e1515" class="indexterm-anchor"></a>, using the TIP termination function. To terminate an RHT, its corresponding TIP termination function must be called to terminate the RHT and its conversation and to initiate TIP cleanup. The RHT to be terminated is specified by its TIP schema name (the same schema as for its data exchange function calls) and the <code class="codeph">tranuse</code> value when multiple instances of the same RHT are being terminated.
                           </p>
                           <p>RHTs and their corresponding TIPs can be terminated in any sequence desired by the client application and do not have to be terminated in the same order in which they are initialized.</p>
                           <div class="infoboxnote" id="GUID-A3323A41-AEDA-48EA-90D2-4C150D708D8E__GUID-0685857D-C793-43B8-8CEC-C04933C85D14">
                              <p class="notep1">Note:</p>
                              <p>The specific syntax of the various TIP data exchange variables function calls is the same as was previously defined in the PG DD for the particular RHT and can be researched by examining the TIP content documentation file<a id="d17239e1530" class="indexterm-anchor"></a><a id="d17239e1532" class="indexterm-anchor"></a> (<code class="codeph">tipname.doc</code>) or the TIP specification file produced when the TIP was generated. If a TIP has not yet been generated for the RHT being accessed, refer to <a href="creating-tip-oracle-database-gateway-appc.html#GUID-78D4439E-7DD6-45DF-842E-35007FCC572B"> Creating a TIP</a>, and <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-2EE274FF-C15C-4E8A-9245-ACE1F41D147E">DATA Correspondence</a>"</span>, <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-5CB6DA00-C709-43E5-B3D1-3937D097E48F">CALL Correspondence</a>"</span>, and <span class="q">"<a href="developing-appc-client-app-sna-only.html#GUID-21400950-327F-4A8B-831D-3F34333C3264">TRANSACTION Correspondence</a>"</span> for more information. It is preferable to define and generate the TIP first, however, so that the client application reference documentation is available to you when needed.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG980"></a><div class="props_rev_3"><a id="GUID-B264D759-308E-46B3-B303-7E651B4AF83C" name="GUID-B264D759-308E-46B3-B303-7E651B4AF83C"></a><h3 id="APPUG-GUID-B264D759-308E-46B3-B303-7E651B4AF83C" class="sect3">Ensuring TIP and Remote Transaction Program Correspondence</h3>
               <div>
                  <p>A remote host transaction program and its related TIP with client application must correspond on <a id="d17239e1605" class="indexterm-anchor"></a>two key requirements:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Parameter datatype conversion, which results from the way in which transaction <code class="codeph">DATA</code> is defined. Refer to <a href="data-type-conversion-oracle-database-gateway-appc.html#GUID-FEB0C201-9C07-4932-A328-B048B582B18A"> Datatype Conversions</a> for a discussion of how PGAU-generated TIPs convert data based on the data definitions.
                        </p>
                     </li>
                     <li>
                        <p>APPC send/receive synchronization, which results from the way in which transaction <code class="codeph">CALL</code>s are defined
                        </p>
                     </li>
                  </ul>
                  <p>These <code class="codeph">DATA</code> and <code class="codeph">CALL</code> definitions are then included by reference in a <code class="codeph">TRANSACTION</code> definition.
                  </p>
               </div><a id="APPUG981"></a><div class="props_rev_3"><a id="GUID-2EE274FF-C15C-4E8A-9245-ACE1F41D147E" name="GUID-2EE274FF-C15C-4E8A-9245-ACE1F41D147E"></a><h4 id="APPUG-GUID-2EE274FF-C15C-4E8A-9245-ACE1F41D147E" class="sect4">DATA Correspondence</h4>
                  <div>
                     <p>Using data definitions programmed in the language of the remote host transaction, the <a id="d17239e1684" class="indexterm-anchor"></a><a id="d17239e1688" class="indexterm-anchor"></a>PGAU <code class="codeph">DEFINE DATA</code> command stores in the <a id="d17239e1694" class="indexterm-anchor"></a>PG DD the information needed for <a id="d17239e1699" class="indexterm-anchor"></a><a id="d17239e1701" class="indexterm-anchor"></a>PGAU <code class="codeph">GENERATE</code> to create the TIP function logic to perform:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>all data conversion from PL/SQL <code class="codeph">IN</code> parameters supplied by the receiving remote host transaction
                           </p>
                        </li>
                        <li>
                           <p>all buffering into the format expected by the receiving remote host transaction</p>
                        </li>
                        <li>
                           <p>all data unbuffering from the format supplied by the sending remote host transaction</p>
                        </li>
                        <li>
                           <p>all data conversion to PL/SQL <code class="codeph">OUT</code> parameters supplied by the sending remote host transaction
                           </p>
                        </li>
                     </ul>
                     <p>PGAU determines the information needed to generate the conversion and buffering logic from the data definitions included in the remote host transaction program. PGAU <code class="codeph">DEFINE DATA</code> reads this information from files, such as COBOL copy books, or in-stream from scripts and saves it in the PG DD for repeated use. The gateway Administrator needs to transfer these definition files from the remote host to the Oracle host where PGAU runs. 
                     </p>
                     <p>From the data definitions stored in the PG DD, PGAU <code class="codeph">GENERATE</code> determines the remote host datatype and matches it to an appropriate <a id="d17239e1739" class="indexterm-anchor"></a>PL/SQL datatype. It also determines data lengths and offsets within records and buffers and generates the needed PL/SQL logic into the TIP. Refer to the PGAU <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-A39AE344-8E2F-49EE-9791-6BAF4ECF4F6B">DEFINE DATA</a>"</span> statement  in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> and <span class="q">"<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-F0ACAA50-16F8-4C5C-83FE-C0D280981772">Sample PGAU DEFINE DATA Statements</a>"</span> in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a> for more information. 
                     </p>
                     <p>All data that are referenced as parameters by subsequent calls must first be defined using PGAU <code class="codeph">DEFINE DATA</code>. Simple data items, such as single numbers or character strings, and complex multi-field data aggregates, such as records or structures, can be defined. PGAU automatically generates equivalent PL/SQL variables and records of fields or tables for the client application to reference in its calls to the generated TIP.
                     </p>
                     <p>As discussed, a parameter might be a simple data item, such as an employee number, or a complex item, such as an employee record. PGAU <code class="codeph">DEFINE DATA</code> automatically extracts the datatype information it needs from the input program data definition files.
                     </p>
                     <p>In this example, <code class="codeph">empno</code> and <code class="codeph">emprec</code> are the arguments to be exchanged. 
                     </p><pre class="oac_no_warn" dir="ltr">pgadb2i_main(trannum,empno,emprec)
</pre><p>A PGAU <code class="codeph">DEFINE DATA</code> statement must therefore be issued for each of these parameters:
                     </p><pre class="oac_no_warn" dir="ltr">DEFINE DATA EMPNO
       PLSDNAME (EMPNO)
       USAGE (PASS)
       LANGUAGE (IBMVSCOBOLII)
       (
       01 EMP-NO PIC X(6).
       ); 

DEFINE DATA EMPREC
       PLSDNAME (DCLEMP)
       USAGE (PASS)
       LANGUAGE (IBMVSCOBOLII)
       INFILE("emp.cob");
</pre><p>Note that a definition is not required for the <code class="codeph">trannum</code> argument. This is the APPC conversation identifier and does not require a definition in PGAU.
                     </p>
                  </div>
               </div><a id="APPUG982"></a><div class="props_rev_3"><a id="GUID-5CB6DA00-C709-43E5-B3D1-3937D097E48F" name="GUID-5CB6DA00-C709-43E5-B3D1-3937D097E48F"></a><h4 id="APPUG-GUID-5CB6DA00-C709-43E5-B3D1-3937D097E48F" class="sect4">CALL Correspondence</h4>
                  <div>
                     <p>The requirement to synchronize <a id="d17239e1847" class="indexterm-anchor"></a>APPC <code class="codeph">SEND</code>s and <code class="codeph">RECEIVE</code>s means that when the remote transaction program expects data parameters to be input, it issues APPC <code class="codeph">RECEIVE</code>s to read the data parameters. Accordingly, the TIP must cause the gateway to issue APPC <code class="codeph">SEND</code>s to write the data parameters to the remote transaction program. The TIP must also cause the gateway to issue APPC <code class="codeph">RECEIVE</code>s when the remote transaction program issues APPC <code class="codeph">SEND</code>s.
                     </p>
                     <p>The PGAU <code class="codeph">DEFINE CALL</code> statement specifies how the generated TIP is to be called by the client application and which data parameters are to be exchanged with the remote host transaction for that call. Each PGAU <code class="codeph">DEFINE CALL</code> statement might specify the name of the TIP function, one or more data parameters, and the <code class="codeph">IN/OUT</code> mode of each data parameter. Data parameters must have been previously defined with PGAU <code class="codeph">DEFINE DATA</code> statements. Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-01EEB1ED-7AB6-4BFA-AF6F-A9D36A44C0B1">DEFINE CALL</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> and <span class="q">"<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-336981E2-C7F9-47C1-8B18-330187556305">Sample PGAU DEFINE CALL Statements</a>"</span> in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a> for more information. 
                     </p>
                     <p>PGAU <code class="codeph">DEFINE CALL</code> processing stores the specified information in the PG DD for later use by PGAU <code class="codeph">GENERATE</code>. PGAU <code class="codeph">GENERATE</code> then creates the following in the TIP package specification:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>declarations of public PL/SQL functions for each <code class="codeph">CALL</code> defined with PL/SQL parameters for each <code class="codeph">DATA</code> definition specified on the <code class="codeph">CALL</code></p>
                        </li>
                        <li>
                           <p>declarations of the public PL/SQL data parameters</p>
                        </li>
                     </ul>
                     <p>The client application calls the TIP public function as a PL/SQL function call, using the function name and parameter list specified in the PGAU <code class="codeph">DEFINE CALL</code> statement. The client application might also declare, by reference, private variables of the same datatype as the TIP public data parameters to facilitate data passing and handling within the client application, thus sharing the declarations created by PGAU <code class="codeph">GENERATE</code>.
                     </p>
                     <p>In this example, the following PGAU <code class="codeph">DEFINE CALL</code> statement must be issued to define the TIP public function:
                     </p><pre class="oac_no_warn" dir="ltr">DEFINE CALL DB2IMAIN
       PKGCALL (pgadb2i_main)
       PARMS ((empno IN),(emprec OUT));</pre></div><a id="APPUG983"></a><div class="props_rev_3"><a id="GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D" name="GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D"></a><h5 id="APPUG-GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D" class="sect5">Flexible Call Sequence</h5>
                     <div>
                        <p><a id="d17239e1984" class="indexterm-anchor"></a><a id="d17239e1988" class="indexterm-anchor"></a>The number of data parameters exchanged between the TIP and the gateway on each call can vary at the user's discretion, as long as the remote transaction program's <code class="codeph">SEND/RECEIVE</code> requests are satisfied. For example, the remote transaction program data exchange sequence might be:
                        </p><pre class="oac_no_warn" dir="ltr">APPC SEND    5 fields  (field1-field5)
APPC RECEIVE 1 fields  (field6)
APPC SEND    1 field   (field7)
APPC RECEIVE 3 fields  (field8 - field10)
</pre><p>The resulting TIP/application call sequence could be:</p><pre class="oac_no_warn" dir="ltr">tip_call1(parm1 OUT,  &lt;-- APPC SEND field1 from remote TP
         parm2 OUT,  &lt;-- APPC SEND field2 from remote TP
         parm3 OUT); &lt;-- APPC SEND field3 from remote TP

tip_call2(parm4 OUT,  &lt;-- APPC SEND field4 from remote TP
         parm5 OUT); &lt;-- APPC SEND field5 from remote TP
tip_call3(parm6 IN OUT); --&gt; APPC RECEIVE field6 in remote TP
                         &lt;-- APPC SEND field7 from remote TP

tip_call4(parm8 IN,   --&gt; APPC RECEIVE field8 into remote TP
          parm9 IN,   --&gt; APPC RECEIVE field9 into remote TP
          parm10 IN); --&gt; APPC RECEIVE field10 into remote TP
</pre><p>To define these four public functions to the TIP, four PGAU <code class="codeph">DEFINE CALL</code> statements must be issued, each specifying its unique public function name (<code class="codeph">tip_callx</code>) and the data parameter list to be exchanged. Once a data item is defined using <code class="codeph">DEFINE DATA</code>, it can be referenced in multiple calls in any mode (<code class="codeph">IN</code>, <code class="codeph">OUT</code>, or<code class="codeph"> IN OUT</code>). For example, <code class="codeph">parm5</code> could be used a second time in place of <code class="codeph">parm6</code>. This implies the same data is being exchanged in both instances, received into the TIP and application on <code class="codeph">        tip_call2</code> and returned, possibly updated, to the remote host in <code class="codeph">tip_call4</code>.
                        </p>
                        <p>Notice also that the remote transaction program's first five written fields are read by two separate TIP function calls, <code class="codeph">tip_call1</code> and <code class="codeph">tip_call2</code>. This could also have been equivalently accomplished with five TIP function calls of one <code class="codeph">OUT</code> parameter each or a single TIP function call with five <code class="codeph">OUT</code> parameters. Then the remote transaction program's first read field (<code class="codeph">field6</code>) and subsequent written field (<code class="codeph">field7</code>) correspond to a single TIP function call (<code class="codeph">tip_call3</code>) with a single <code class="codeph">IN OUT </code>parameter (<code class="codeph">parm6</code>).
                        </p>
                        <p>This use of a single <code class="codeph">IN OUT</code> parameter implies that the remote transaction program's datatype for <code class="codeph">field6</code> and <code class="codeph">field7</code> are both the same and correspond to the conversion performed for the datatype of <code class="codeph">parm6</code>. If <code class="codeph">field6</code> and <code class="codeph">field7</code> were of different datatypes, then they have to correspond to different PL/SQL parameters (for example, <code class="codeph">parm6</code> <code class="codeph">IN</code> and <code class="codeph">parm7</code> <code class="codeph">OUT</code>). They could still be exchanged as two parameters on a single TIP call or one parameter each on two TIP calls, however.
                        </p>
                        <p>Lastly, the remote transaction program's remaining three <code class="codeph">RECEIVE</code> fields are supplied by <code class="codeph">tip_call4</code> parameters 8-10. They also could have been done with three TIP calls passing one parameter each or two TIP calls passing one parameter on one call and two parameters on the other, in either order. This flexibility permits the user to define the correspondence between the remote transaction program's operation and the TIP function calls in whatever manner best suits the user.
                        </p>
                     </div>
                  </div><a id="APPUG984"></a><div class="props_rev_3"><a id="GUID-14708CCA-BE3B-4571-9F1D-CA2158D51816" name="GUID-14708CCA-BE3B-4571-9F1D-CA2158D51816"></a><h5 id="APPUG-GUID-14708CCA-BE3B-4571-9F1D-CA2158D51816" class="sect5">Call Correspondence Order Restrictions</h5>
                     <div>
                        <p><a id="d17239e2145" class="indexterm-anchor"></a>Each TIP public function first sends all <code class="codeph">IN</code> parameters, before it receives any <code class="codeph">OUT</code> parameters. Thus, a remote transaction program expecting to send one field and then receive one field must correspond to separate TIP calls. 
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">tip_callO( parmO OUT); &lt;-- APPC SEND outfield from remote TP
</pre><p><code class="codeph">PGAXFER</code> RPC checks first for parameters to send, but finds none and proceeds to receive parameters:
                        </p><pre class="oac_no_warn" dir="ltr">tip_callI( parmI IN);  --&gt; APPC RECEIVE infield to remote TP
</pre><p><code class="codeph">PGAXFER</code> RPC processes parameters to send and then checks for parameters to receive, but finds none and completes; therefore, a single TIP public function with an <code class="codeph">OUT</code> parameter followed by an <code class="codeph">IN</code> parameter does not work, because the <code class="codeph">IN</code> parameter is processed first--regardless of its position in the parameter list.
                        </p>
                     </div>
                  </div>
               </div><a id="APPUG985"></a><div class="props_rev_3"><a id="GUID-21400950-327F-4A8B-831D-3F34333C3264" name="GUID-21400950-327F-4A8B-831D-3F34333C3264"></a><h4 id="APPUG-GUID-21400950-327F-4A8B-831D-3F34333C3264" class="sect4">TRANSACTION Correspondence</h4>
                  <div>
                     <p>The <a id="d17239e2234" class="indexterm-anchor"></a>remote host transaction is defined with the PGAU<code class="codeph"> DEFINE TRANSACTION</code> statement with additional references to prior definitions of <code class="codeph">CALL</code>s that the transaction supports.
                     </p>
                     <p>You specify the <a id="d17239e2247" class="indexterm-anchor"></a>remote host transaction attributes, such as:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>transaction ID or name</p>
                        </li>
                        <li>
                           <p>network address or location</p>
                        </li>
                        <li>
                           <p>system type (such as IBM370)</p>
                        </li>
                        <li>
                           <p>Oracle National Language of the remote host</p>
                           <div class="infoboxnote" id="GUID-21400950-327F-4A8B-831D-3F34333C3264__GUID-51349B34-B64C-4BB1-9549-15EC0CACC394">
                              <p class="notep1">Note:</p>
                              <p>The <a id="d17239e2268" class="indexterm-anchor"></a>PL/SQL package name is specified when the transaction is defined; this is the name by which the TIP is referenced and which the public function calls to be included within the TIP. Each public function must have been previously defined with a PGAU <code class="codeph">DEFINE CALL</code> statement, which has been stored in the PG DD.   If you do not specify a package name (TIP name) in the <code class="codeph">GENERATE</code> statement, the transaction name you specified will become the package name by default. In that case, the transaction name (<span class="italic"><code class="codeph">tname) </code></span>must be unique and must be in valid PL/SQL syntax within the database containing the PL/SQL packages. 
                              </p>
                              <p>For more information, refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-EC8B6848-0566-45CD-BA08-78F15ED0EEB4">DEFINE TRANSACTION</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> and <span class="q">"<a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-C8F9DE40-9DE6-4F49-A765-BFFDEC3065F9">Sample PGAU DEFINE TRANSACTION Statement</a>"</span> in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a>.
                              </p>
                           </div>
                        </li>
                     </ul>
                     <p>In this example, the following <code class="codeph">DEFINE TRANSACTION</code> statements are used to define a remote CICS transaction called <code class="codeph">DB2I</code>:
                     </p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION DB2I
   CALL (   DB2IMAIN,
            DB2IDIAG   )
   SIDEPROFILE(CICSPROD)
   TPNAME(DB2I)
   LOGMODE(ORAPLU62)
   SYNCLEVEL(0)
   NLS_LANGUAGE("AMERICAN_AMERICA.WE8EBCDIC37C");</pre></div>
               </div>
            </div><a id="APPUG986"></a><div class="props_rev_3"><a id="GUID-1C0A2278-D220-4DDB-888C-F691D057BB78" name="GUID-1C0A2278-D220-4DDB-888C-F691D057BB78"></a><h3 id="APPUG-GUID-1C0A2278-D220-4DDB-888C-F691D057BB78" class="sect3">Calling the TIP from the Client Application</h3>
               <div>
                  <p>Once a TIP is created, a client application must be written to interface with the TIP. A client application that calls the TIP functions must include five logical sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>declaring TIP variables</p>
                     </li>
                     <li>
                        <p>initializing the conversation</p>
                     </li>
                     <li>
                        <p>exchanging data </p>
                     </li>
                     <li>
                        <p>terminating the conversation</p>
                     </li>
                     <li>
                        <p>error handling</p>
                     </li>
                  </ul>
               </div><a id="APPUG1304"></a><a id="APPUG1305"></a><a id="APPUG987"></a><div class="props_rev_3"><a id="GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6" name="GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6"></a><h4 id="APPUG-GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6" class="sect4">Declaring TIP Variables</h4>
                  <div>
                     <p>The user declarations section of the <code class="codeph">tipname.doc</code> file documents the required declarations.
                     </p>
                     <p>When passing <a id="d17239e2425" class="indexterm-anchor"></a>PL/SQL parameters on calls to TIP functions, the client application must use the exact same PL/SQL datatypes for TIP function arguments as are defined by the TIP in its specification section. Assume, for example, the following is in the TIP specification, or <code class="codeph">tipname.doc:</code></p><pre class="oac_no_warn" dir="ltr">FUNCTION <span class="italic">tip_call1</span>    <span class="italic">tranuse</span>,   IN      BINARY_INTEGER, 
                      <span class="italic">tip_var1   io_mode pls_type1,</span> 
                      <span class="italic">tip_record io_mode tran_rectype)</span> 
RETURN INTEGER;

TYPE  <span class="italic">tran_rectype</span> is RECORD
      <span class="italic">(rec_field1 pls_type1</span>,
      ...
      <span class="italic">rec_fieldN pls_typeN)</span>;
</pre><p><a href="developing-appc-client-app-sna-only.html#GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6__G1013935" title="This 2 column table provides a description of the function declaration.">Table 4-2</a> provides a description of the function declarations: 
                     </p>
                     <div class="tblformal" id="GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6__G1013935">
                        <p class="titleintable">Table 4-2 Function Declarations</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Function Declarations" summary="This 2 column table provides a description of the function declaration." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d17239e2472">Item</th>
                                 <th align="left" valign="bottom" width="69%" id="d17239e2475">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2480" headers="d17239e2472 ">
                                    <p><span class="italic"><code class="codeph">tip_call1</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2480 d17239e2475 ">
                                    <p>The TIP function name as defined in the package specification.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2490" headers="d17239e2472 ">
                                    <p><span class="italic"><code class="codeph">tranuse</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2490 d17239e2475 ">
                                    <p>The remote transaction instance parameter returned from the TIP init function identifying the conversation on which this TIP call is to exchange data.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2499" headers="d17239e2472 ">
                                    <p><span class="italic"><code class="codeph">tran_rectype</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2499 d17239e2475 ">
                                    <p>The PL/SQL record datatype declared in the <code class="codeph">tipname</code><span class="italic"> </span>TIP specification. This is the same value as in the                            TYPE<span class="italic"> </span><span class="italic"><code class="codeph">tran_rectype</code></span><code class="codeph"> is RECORD</code> statement.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2522" headers="d17239e2472 ">
                                    <p><span class="italic"><code class="codeph">pls_typeN</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2522 d17239e2475 ">
                                    <p>Is a PL/SQL atomic datatype.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2531" headers="d17239e2472 ">
                                    <p><span class="italic"><code class="codeph">rec_fieldN</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2531 d17239e2475 ">
                                    <p>Is a PL/SQL record field corresponding to a remote transaction program record field.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>In the client application PL/SQL atomic datatypes should be defined as the exact same datatype of their corresponding arguments in the TIP function definition. The following should be coded in the client application before the <code class="codeph">BEGIN</code> command:
                     </p><pre class="oac_no_warn" dir="ltr"><span class="italic">appl_var  pls_type1</span>;    /* declare appl variable for ....  */
</pre><p>TIP datatypes need not be redefined. They must be declared <code class="codeph">locally</code> within the client application, appearing in the client application before the <code class="codeph">BEGIN</code>:
                     </p><pre class="oac_no_warn" dir="ltr"><span class="italic">appl_record tipname.tran_rectype;</span>  /* declare appl record */
</pre><p><a href="developing-appc-client-app-sna-only.html#GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6__G1013965" title="This 2 column table describes the command line arguments.">Table 4-3</a> describes the command line arguments:
                     </p>
                     <div class="tblformal" id="GUID-26AFD2F9-2126-418D-9B71-B01D2A06E7E6__G1013965">
                        <p class="titleintable">Table 4-3 Command Line Arguments </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Command Line Arguments " summary="This 2 column table describes the command line arguments." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d17239e2576">Item</th>
                                 <th align="left" valign="bottom" width="69%" id="d17239e2579">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2584" headers="d17239e2576 ">
                                    <p><span class="italic"><code class="codeph">tip_call1</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2584 d17239e2579 ">
                                    <p>The TIP function name as defined in the package specification.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2594" headers="d17239e2576 ">
                                    <p><span class="italic"><code class="codeph">tranuse</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2594 d17239e2579 ">
                                    <p>The remote transaction instance parameter returned from the TIP init function identifying the conversation on which this TIP call is to exchange data.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e2603" headers="d17239e2576 ">
                                    <p><span class="italic"><code class="codeph">tran_rectype</code></span> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e2603 d17239e2579 ">
                                    <p>The PL/SQL record datatype declared in the <code class="codeph">tipname</code><span class="italic"> </span>TIP specification. This is the same value as in the <code class="codeph">TYPE</code><span class="italic">                    </span><span class="italic"><code class="codeph">tran_rectype</code></span><code class="codeph"> is RECORD</code> statement.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Refer to the <span class="italic"><code class="codeph">tipname</code></span><code class="codeph">.doc</code> content file for a complete description of the user declarations you can reference.
                     </p>
                     <p>The client application calls the TIP public function as if it were any local PL/SQL function:</p><pre class="oac_no_warn" dir="ltr">rc = tip_call1( tranuse,
                appl_var,
                appl_record);
</pre><p>In the CICS-DB2 inquiry example, the PL/SQL driver <code class="codeph">pgadb2id.sql</code>, which is<span class="bold"> </span>located in <code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS</code> directory for Microsoft Windows and <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code> directory for UNIX based systems, is the client application and includes the following declaration:
                     </p><pre class="oac_no_warn" dir="ltr">...
...
CREATE or REPLACE PROCEDURE db2idriv(empno IN CHAR) IS
tranuse INTEGER :=0               /* transaction usage number     */
DCLEMP PGADB2I.DCLEMP_typ;        /* DB2 EMP row definition       */
DB2 PGADB2I.DB2_typ;              /* DB2 diagnostic information   */
rc INTEGER :=0                    /* PGA RPC return codes         */
line VARCHAR2(132);               /* work buffer for output       */
term INTEGER :=0;                 /* 1 if pgadb2i_term called     */
...
...</pre></div>
               </div><a id="APPUG988"></a><div class="props_rev_3"><a id="GUID-41ABD528-5797-468E-A436-B6B3434ADF34" name="GUID-41ABD528-5797-468E-A436-B6B3434ADF34"></a><h4 id="APPUG-GUID-41ABD528-5797-468E-A436-B6B3434ADF34" class="sect4">Initializing the Conversation</h4>
                  <div>
                     <p>The call to <a id="d17239e2688" class="indexterm-anchor"></a>initialize the conversation serves several purposes:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To cause the PL/SQL package, the TIP, to be loaded and to perform the initialization logic programmed in the TIP initialization section. </p>
                        </li>
                        <li>
                           <p>To cause the TIP init function to call the <code class="codeph">PGAINIT</code> remote procedural call (RPC), which in turn establishes communication with the remote transaction program (RTP), and returns a transaction instance number to the application.
                           </p>
                        </li>
                     </ul>
                     <p>Optionally, calls to initialize the conversation can be used to:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Override default RHT/OLTP identification, network address attributes, and conversation security user&nbsp;ID and password.</p>
                        </li>
                        <li>
                           <p>Specify what diagnostic <a id="d17239e2712" class="indexterm-anchor"></a>traces the TIP is to produce. Refer to <a href="troubleshooting-oracle-database-gateway-appc.html#GUID-6A2105DD-D6F0-4368-BE63-F8A85D5C959F"> Troubleshooting</a> for more information about diagnostic traces.
                           </p>
                        </li>
                     </ul>
                     <p>PGAU-generated TIPs provide four different initialization functions that client applications can call. These are overloaded functions which all have the same name, but vary in the types of parameters passed. </p>
                     <p>Three initialization parameters are passed:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The transaction instance number for RHT conversation identification. The <code class="codeph">tranuse</code> parameter is required on all TIP initializations.
                           </p>
                        </li>
                        <li>
                           <p>TIP diagnostic flags for TIP runtime diagnostic controls. The <code class="codeph">tipdiag</code> parameter is optional. Refer to <a href="troubleshooting-oracle-database-gateway-appc.html#GUID-6A2105DD-D6F0-4368-BE63-F8A85D5C959F"> Troubleshooting</a> for a discussion of TIP diagnostics.
                           </p>
                        </li>
                        <li>
                           <p>TIP default overrides for overriding OLTP and network attributes. The <code class="codeph">override</code> parameter is optional.
                           </p>
                        </li>
                     </ul>
                     <p>The following four functions are shown as they might appear in the TIP Content documentation file. Examples of client application use are provided later.</p><pre class="oac_no_warn" dir="ltr">TYPE override_Typ IS RECORD (
        tranname  VARCHAR2(255),  /* Transaction Program     */
        transync  BINARY_INTEGER, /* RESERVED                */
        trannls   VARCHAR2(50),   /* RESERVED                */
        oltpname  VARCHAR2(255),  /* Logical Unit            */
        oltpmode  VARCHAR2(255),  /* LOG Mode Entry          */
        netaddr   VARCHAR2(255),  /* Side Profile            */
        oltpuser  VARCHAR2(8),    /* userid for OLTP access  */
        oltppass  VARCHAR2(8));   /* password for OLTP access*/

FUNCTION pgadb2i_init(                /* init standard */
           tranuse IN OUT BINARY_INTEGER)
           RETURN INTEGER;

FUNCTION pgadb2i_init(                /* init override */
           tranuse IN OUT BINARY_INTEGER,
           override IN override_Typ)
           RETURN INTEGER;

FUNCTION pgadb2i_init(               /* init diagnostic */
           tranuse IN OUT BNARY_INTEGER,
           tipdiag IN CHAR)
           RETURN INTEGER;

FUNCTION pgadb2i_init(                /* init over-diag */
           tranuse IN OUT BINARY_INTEGER,
           override IN override_Typ,
           tipdiag IN CHAR)
           RETURN INTEGER;
</pre></div><a id="APPUG989"></a><div class="props_rev_3"><a id="GUID-29DC252A-A067-4092-87B8-80AB1AC6AC04" name="GUID-29DC252A-A067-4092-87B8-80AB1AC6AC04"></a><h5 id="APPUG-GUID-29DC252A-A067-4092-87B8-80AB1AC6AC04" class="sect5">Transaction Instance Parameter</h5>
                     <div>
                        <p>This transaction instance number (shown in examples as <code class="codeph">tranuse</code>) must be passed to subsequent TIP exchange and terminate functions. It identifies to the gateway on which APPC conversation--and therefore which iteration of a remote transaction program--the data is to be transmitted or communication terminated.
                        </p>
                        <p>A single client application might control multiple instances of the same remote transaction program or multiple different remote transaction programs, all concurrently. The transaction instance number is the TIP‘s mechanism for routing the client application call through the gateway to the intended remote transaction program.</p>
                        <p>It is the responsibility of the client application to save the transaction instance number of each active transaction and pass the correct one to each TIP function called for that transaction.</p>
                        <p>The client application calls the TIP initialization function as if it were any local PL/SQL function. For example:</p><pre class="oac_no_warn" dir="ltr">...
...
tranuse INTEGER := 0;/* transaction usage number*/
...
...
BEGIN
 rc := pgadb2i.pgadb2i_init(tranuse);
...
...</pre></div>
                  </div><a id="APPUG990"></a><div class="props_rev_3"><a id="GUID-125BF246-33A2-46AF-87E8-7344F3B4F573" name="GUID-125BF246-33A2-46AF-87E8-7344F3B4F573"></a><h5 id="APPUG-GUID-125BF246-33A2-46AF-87E8-7344F3B4F573" class="sect5">Overriding TIP Initializations</h5>
                     <div>
                        <p>Note that in the preceding example the client application did not specify any remote transaction program name, network connection, or security information. The TIP has such information internally coded as defaults and the client application simply calls the appropriate TIP for the chosen remote transaction program. The client application can, however, optionally override some TIP defaults and supply security information. </p>
                        <p>You do not need to change any client applications that do not require overrides.</p>
                        <p>When the remote host transaction was defined in the PG DD, the <code class="codeph">DEFINE TRANSACTION</code> statement specified certain default OLTP and network identification attributes which can be overridden:<a id="d17239e2852" class="indexterm-anchor"></a><a id="d17239e2856" class="indexterm-anchor"></a><a id="d17239e2860" class="indexterm-anchor"></a><a id="d17239e2864" class="indexterm-anchor"></a></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">TPname</code></span></p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">LUname</code></span></p>
                           </li>
                           <li>
                              <p><code class="codeph">LOGMODE</code></p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">Side Profile</code></span></p>
                           </li>
                        </ul>
                        <p>Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-EC8B6848-0566-45CD-BA08-78F15ED0EEB4">DEFINE TRANSACTION</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information about the <code class="codeph">DEFINE TRANSACTION </code>statement.
                        </p>
                        <p>These PG DD-defined transaction attributes are generated into TIPs as defaults and can be overridden at <a id="d17239e2904" class="indexterm-anchor"></a>TIP initialization time. This facilitates the use of one TIP, which can be used with a test transaction or system, and can later be used with a production transaction or system, without having to regenerate the TIP.
                        </p>
                        <p>The <code class="codeph">override_Typ</code> record datatype describes the various transaction attributes that can be overridden by the client application. The following o<a id="d17239e2914" class="indexterm-anchor"></a><a id="d17239e2916" class="indexterm-anchor"></a>verrides are currently supported:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">tranname</code> can be set to override the value that was specified by the <code class="codeph">TPNAME</code> parameter of the <code class="codeph">DEFINE TRANSACTION </code>statement
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oltpname</code> can be set to override the value that was specified by the <code class="codeph">LUNAME</code> parameter of the <code class="codeph">DEFINE TRANSACTION</code> statement
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oltpmode</code> can be set to override the value that was specified by the <code class="codeph">LOGMODE</code> parameter of the <code class="codeph">DEFINE TRANSACTION</code> statement
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">netaddr</code> can be set to override the value that was specified by the <code class="codeph">SIDEPROFILE</code> parameter of the <code class="codeph">DEFINE TRANSACTION</code> statement
                              </p>
                           </li>
                        </ul>
                        <p>In addition to the transaction attributes defined in the <a id="d17239e2968" class="indexterm-anchor"></a>PG DD, there are two security-related parameters, conversation security user&nbsp;ID and conversation security password, that can be overridden at TIP initialization time. The values for these parameters normally come from either the database link used to access the gateway or the Oracle database session. There are cases when the Oracle database user&nbsp;ID is not sufficient for accessing the OLTP system. The user&nbsp;ID and password overrides provide a way to specify those parameters to the OLTP system. 
                        </p>
                        <p>The following overrides are currently supported:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oltpuser</code> can be set to override the user&nbsp;ID used to initialize the conversation with the OLTP
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oltppass</code> can be set to override the password used to initialize the conversation with the OLTP
                              </p>
                           </li>
                        </ul>
                        <p>The security overrides have an effect only if <code class="codeph">PGA_SECURITY_TYPE=PROGRAM</code> is specified in the gateway initialization file, and the OLTP system is configured to accept a user&nbsp;ID and password on incoming conversation requests.
                        </p>
                        <p>The <code class="codeph">transync</code> (APPC <code class="codeph">SYNCLEVEL</code>) and <code class="codeph">trannls</code> (Globalization Support character set) are defined in the override record datatype, but are reserved for future use. The RHT <code class="codeph">SYNCLEVEL</code> and Globalization Support name cannot be overridden.
                        </p>
                        <p>The client application might override the default attributes at TIP initialization for the following reasons:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>to start a different version of the RHT (such as production instead of test)</p>
                           </li>
                           <li>
                              <p>to change the location of the OLTP containing the RHT (if the OLTP was moved due to migration or a switch to backup configuration)</p>
                           </li>
                        </ul>
                        <p>Client applications requiring overrides can use any combination of override and initialization parameters and might alter the combination at any time without regenerating the TIP or affecting applications that do not override parameters.</p>
                        <p>To override the TIP defaults, an additional client application record variable must be declared as <code class="codeph">override_Typ</code> datatype, values must be assigned to the override subfields, and the override record variable must be passed on the TIP initialization call from the client application.
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">   ...
   ...
   my_overrides pgadb2i.override_Typ;   -- declaration
   ...
   ...
   my_overrides.oltpname := 'CICSPROD'; -- swap to production CICS
   my_overrides.tranname := 'TNEW';     -- new transaction name

BEGIN
   rc := pgadb2i.pgadb2i_init(tranuse,my_overrides); -- init
   ...
   ...
</pre><p>Within the TIP, override attributes are checked for syntax problems and passed to the gateway server.</p>
                     </div>
                  </div><a id="APPUG991"></a><div class="props_rev_3"><a id="GUID-01314972-B6A2-403B-BFD0-81F5BA60F3E2" name="GUID-01314972-B6A2-403B-BFD0-81F5BA60F3E2"></a><h5 id="APPUG-GUID-01314972-B6A2-403B-BFD0-81F5BA60F3E2" class="sect5">Security Considerations</h5>
                     <div>
                        <p>The <a id="d17239e3061" class="indexterm-anchor"></a><a id="d17239e3065" class="indexterm-anchor"></a>security requirements of the default and overridden OLTPs must be the same because the same gateway server is used in either conversation, as dictated by the database link names in the PGA RPC calls. The gateway server startup security mode is set at gateway server initialization time and passed unchanged to the OLTP at TIP or conversation initialization time.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="APPUG992"></a><div class="props_rev_3"><a id="GUID-62418ADB-1A9B-4DCC-A2D5-70940D7ECBFC" name="GUID-62418ADB-1A9B-4DCC-A2D5-70940D7ECBFC"></a><h3 id="APPUG-GUID-62418ADB-1A9B-4DCC-A2D5-70940D7ECBFC" class="sect3">Exchanging Data</h3>
               <div>
                  <div class="section">
                     <p>The client application should pass the transaction instance number, returned from a previous <code class="codeph">tip_init</code> call, to identify which remote transaction program is affected and to identify any client application data parameters to be exchanged with the remote transaction program.
                     </p>
                     <p>In this CICS-DB2 inquiry example, we pass an employee number and receive an employee record back:</p><pre class="oac_no_warn" dir="ltr">rc = pgadb2i.pgadb2i_main(tranuse, /* transfer data         */
                           empno,   /* employee number       */
                           DCLEMP); /* return employee record*/</pre></div>
                  <!-- class="section" -->
               </div><a id="APPUG993"></a><div class="props_rev_3"><a id="GUID-3CDB9504-3937-4909-A6FE-3B63FC25BF75" name="GUID-3CDB9504-3937-4909-A6FE-3B63FC25BF75"></a><h4 id="APPUG-GUID-3CDB9504-3937-4909-A6FE-3B63FC25BF75" class="sect4">Terminating the Conversation</h4>
                  <div>
                     <p>The client application calls the TIP termination function as if it were any local PL/SQL function. For example:</p><pre class="oac_no_warn" dir="ltr">...
...
term := 1;    /* indicate term called* */
 rc := pgadb2i.pgadb2i_term(tranuse,0); /* terminate normally  */
...
...
</pre><p>After a transaction instance number has been passed on a TIP terminate call to terminate the transaction, or after the remote transaction program has abended, that particular transaction instance number may be forgotten. </p>
                  </div>
               </div><a id="APPUG994"></a><div class="props_rev_3"><a id="GUID-4A799962-BFF3-47FD-AB6D-C99474E157D8" name="GUID-4A799962-BFF3-47FD-AB6D-C99474E157D8"></a><h4 id="APPUG-GUID-4A799962-BFF3-47FD-AB6D-C99474E157D8" class="sect4">Error Handling</h4>
                  <div>
                     <p>The client application should include an exception handler that can clean up any active APPC conversations before the client application terminates. The sample client application provided in <code class="codeph">pgadb2id.sql</code> contains an example of exception handling. 
                     </p>
                     <p>Gateway exceptions are reported in the range PGA-20900 to PGA-20999. When an exception occurs, the TIP termination function should be called for any active conversations that have been started by prior calls to the TIP initialization function. </p>
                     <p>For example:</p><pre class="oac_no_warn" dir="ltr">EXCEPTION
 WHEN OTHERS THEN
  IF term = 0 THEN         /* terminate function not called yet */
   rc := pgadb2i.pgadb2i_term(tranuse,1); /*terminate abnormally*/
  END IF;
 RAISE;
...
...
</pre><p>The remote transaction should also include provisions for error handling and debugging, such as writing debugging information to the CICS temporary storage queue area. Refer to the <a href="../lnpls/plsql-error-handling.html#LNPLS00701" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for a discussion of how to intercept and handle Oracle exceptions.
                     </p>
                  </div>
               </div><a id="APPUG995"></a><div class="props_rev_3"><a id="GUID-4FFF7E49-C061-4A57-A575-3EF98E2A1E50" name="GUID-4FFF7E49-C061-4A57-A575-3EF98E2A1E50"></a><h4 id="APPUG-GUID-4FFF7E49-C061-4A57-A575-3EF98E2A1E50" class="sect4">Granting Execute Authority</h4>
                  <div>
                     <div class="section">
                        <p>The TIP is a standard <a id="d17239e3264" class="indexterm-anchor"></a>PL/SQL package and execute authority must be granted to users who call the TIP from their client application. In this example, we grant execute on the <code class="codeph">PGADB2I</code> package to user <code class="codeph">SCOTT</code>:
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON PGADB2I TO SCOTT
</pre><p>Refer to the <a href="../admin/getting-started-with-database-administration.html#ADMIN11062" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for further information.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPUG996"></a><div class="props_rev_3"><a id="GUID-19815A38-8520-41D5-9418-2DB46AFDB9AA" name="GUID-19815A38-8520-41D5-9418-2DB46AFDB9AA"></a><h3 id="APPUG-GUID-19815A38-8520-41D5-9418-2DB46AFDB9AA" class="sect3">Executing the Application</h3>
               <div>
                  <div class="section">
                     <p>Before executing the client application, ensure that a connection to the host is established and that the receiving partner is available. In this example we use PL/SQL driver <code class="codeph">DB2IDRIV</code> to execute the CICS-DB2 inquiry. To execute this client application, enter from SQL*Plus:
                     </p><pre class="oac_no_warn" dir="ltr">set serveroutput on
execute DB2IDRIV(<span class="italic">'nnnnnn'</span><span class="italic"><code class="codeph">)</code></span>;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG997"></a><div class="props_rev_3"><a id="GUID-E02BE2D4-97BA-407C-B1D6-4503D79561D7" name="GUID-E02BE2D4-97BA-407C-B1D6-4503D79561D7"></a><h3 id="APPUG-GUID-E02BE2D4-97BA-407C-B1D6-4503D79561D7" class="sect3">APPC Conversation Sharing</h3>
               <div>
                  <p>Multiple TIPs can share the same APPC conversation with one or more <a id="d17239e3375" class="indexterm-anchor"></a>Remote Host Transactions (RHTs) which are also sharing that same conversation. Two benefits derive from this feature:<a id="d17239e3380" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Existing RHTs which rely upon passing control of a conversation are supported by Oracle Database Gateway for APPC.</p>
                     </li>
                     <li>
                        <p>TIPs otherwise too large for PL/SQL compilation can be separated into multiple smaller TIPs, each with fewer user-defined functions, providing the client application with the same set of function calls and data definitions without any change to the RHT. </p>
                     </li>
                  </ul>
               </div><a id="APPUG998"></a><div class="props_rev_3"><a id="GUID-7C9B4EAB-3D8C-4DF0-8E32-F45845336F1A" name="GUID-7C9B4EAB-3D8C-4DF0-8E32-F45845336F1A"></a><h4 id="APPUG-GUID-7C9B4EAB-3D8C-4DF0-8E32-F45845336F1A" class="sect4">APPC Conversation Sharing Concepts</h4>
                  <div>
                     <p>Mainframe OLTPs, such as IMS, allow transactions to share a single APPC conversation by passing it when the transaction calls another transaction. RHTs are defined to PGAU as single transactions with calls, inputs and outputs for which PGAU generates a single TIP with initialization, transfer and termination functions corresponding to that specific RHT.</p>
                     <p>Logic generated into every TIP allows that TIP either:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>to initiate a new conversation when its init function is called, or</p>
                        </li>
                        <li>
                           <p>to transfer data on an existing conversation when its user-defined functions are called, or</p>
                        </li>
                        <li>
                           <p>to terminate an existing conversation when its "term" function is called.</p>
                        </li>
                     </ul>
                     <p>An APPC conversation is treated as a resource shared and managed by multiple TIPs. There is no requirement for any TIP to be the sole user of an APPC conversation. </p>
                     <p>Any <a id="d17239e3447" class="indexterm-anchor"></a>TIP generated at 3.4.0 or later can perform any of the following combinations of service: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>initiate</p>
                        </li>
                        <li>
                           <p>initiate and transfer</p>
                        </li>
                        <li>
                           <p>initiate, transfer, and terminate (standard operation)</p>
                        </li>
                        <li>
                           <p>transfer</p>
                        </li>
                        <li>
                           <p>transfer and terminate</p>
                        </li>
                        <li>
                           <p>terminate</p>
                        </li>
                        <li>
                           <p>initiate and terminate (assumes other TIPs perform transfer)</p>
                        </li>
                     </ul>
                     <p>A single APPC conversation can be shared in the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>from one TIP to multiple RHTs</p>
                        </li>
                        <li>
                           <p>from multiple TIPs to one RHT</p>
                        </li>
                        <li>
                           <p>from multiple TIPs to multiple RHTs</p>
                        </li>
                     </ul>
                     <p>Without APPC conversation sharing, a single TIP must be defined which contains all functions and data for all RHTs which a client application might need to call. Creating TIPs with a superset of RHTs often causes such TIPs to be too large for PL/SQL to compile. </p>
                     <p>Conversely, with APPC conversation sharing, each RHT (or even each RHT data exchange for those RHTs which perform multiple, different data exchange operations) can be defined in a single TIP which is smaller and less likely to exceed PL/SQL compilation limits.</p>
                  </div>
               </div><a id="APPUG999"></a><div class="props_rev_3"><a id="GUID-D7BCC8CE-C9A1-479E-B53E-53EFCFEB44F8" name="GUID-D7BCC8CE-C9A1-479E-B53E-53EFCFEB44F8"></a><h4 id="APPUG-GUID-D7BCC8CE-C9A1-479E-B53E-53EFCFEB44F8" class="sect4">APPC Conversation Sharing Usage</h4>
                  <div>
                     <p>APPC conversation sharing is automatically available in every TIP generated at 3.4.0 or later. No TIPs generated before 3.4.0 can participate in APPC conversation sharing. TIPs generated before 3.4.0 must be regenerated using PGAU 3.4.0. or later to participate in APPC conversation sharing. PGAU is upward compatible and regeneration should be transparent, provided only the regenerated TIP body (<span class="italic"><code class="codeph">tipname</code></span><code class="codeph">.pkb</code>) is recompiled. If the TIP specification is also recompiled, the client application needs recompilation as well. Refer to <a href="tip-internals-oracle-database-gateway-appc.html#GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17"> Tip Internals</a> for more detailed information.
                     </p>
                     <p>Definition and generation of TIPs is accomplished as previously discussed in Chapters 1, 2, and 3. No additional options or parameters need be specified. </p>
                     <p><a id="d17239e3541" class="indexterm-anchor"></a>Run-time use of APPC conversation sharing is under the control of the client application. It is accomplished simply by calling the init function of one of the TIPs that share a conversation and passing the <code class="codeph">tranuse</code> value returned to the other TIP functions as each is called in its desired order. Any TIP init function can be used, provided that all TIPs were defined with the same <code class="codeph">DEFINE TRANSACTION TPNAME</code> or <code class="codeph">SIDEPROFILE</code> value. The <code class="codeph">TPNAME</code> or <code class="codeph">SIDEPROFILE</code> value specifies which RHT to initialize. 
                     </p>
                     <p>When the init function of an APPC conversation sharing-capable TIP is called to initialize a conversation, the <code class="codeph">tranuse</code> value returned indicates conversation sharing is enabled. By passing that same <code class="codeph">tranuse</code> value when calling functions in other TIPs, those other TIPs perform their transfers on the same conversation already initialized, provided that all TIPs involved were generated at Version 3.4.0 or later. 
                     </p>
                  </div>
               </div><a id="APPUG1000"></a><div class="props_rev_3"><a id="GUID-5B01C80D-5FC0-45B8-B17B-D1BDBD882BD7" name="GUID-5B01C80D-5FC0-45B8-B17B-D1BDBD882BD7"></a><h4 id="APPUG-GUID-5B01C80D-5FC0-45B8-B17B-D1BDBD882BD7" class="sect4">APPC Conversation Sharing TIP Compatibility</h4>
                  <div>
                     <p>TIPs generated at 3.4.0 or later of the <a id="d17239e3612" class="indexterm-anchor"></a>database gateway use and expect different values for <code class="codeph">tranuse</code> than do pre-3.4.0 TIPs. If a pre-3.4.0 TIP is used to initialize a conversation and its <code class="codeph">tranuse</code> value is passed to a 3.4.0 or later generated TIP, the following exception is raised: 
                     </p><pre class="oac_no_warn" dir="ltr">ORA-20704 PGA_TIP: tranuse value cannot be shared
</pre><p>Pre-3.4.0 generated TIPs do not detect the different <code class="codeph">tranuse</code> value for shared conversations, however, and this can result in unpredictable errors.
                     </p>
                     <div class="infoboxnote" id="GUID-5B01C80D-5FC0-45B8-B17B-D1BDBD882BD7__GUID-83D84FD1-D319-4532-A54A-E4A07FD62E59">
                        <p class="notep1">Note:</p>
                        <p>All TIPs called in a shared conversation must have been generated at 3.4.0 or later.</p>
                        <p>No TIPs generated before 3.4.0 can participate in APPC conversation sharing.</p>
                     </div>
                     <p>The <code class="codeph">tranuse</code> values are incompatible between pre-3.4.0 and 3.4.0 or later releases. This should not pose a problem for you for the following reason: before 3.4.0, all RHT functions defined in a TIP had to be called through that TIPs functions, and the init function of that same TIP had to be called first to initialize the conversation. The <code class="codeph">tranuse</code> value was only valid for the TIP which initialized it. Thus, unless you make programming changes, it is not possible for an existing application to accidentally mix <code class="codeph">tranuse</code> values.
                     </p>
                     <p>Pre-3.4.0 TIPs and client applications can continue to be used without change and old client applications can call new 3.4.0 or later TIPs without change. This is made possible when an old TIP body is regenerated and compiled; the TIP now becomes capable of APPC conversation sharing, even though the old client application has not changed.</p>
                     <p>None of the functions of a pre-3.4.0 TIP can share an APPC conversation. However, once a TIP is regenerated at 3.4.0 or later, any of its functions can share APPC conversations.</p>
                  </div>
               </div><a id="APPUG1306"></a><a id="APPUG1001"></a><div class="props_rev_3"><a id="GUID-CA0E1792-1F88-4DA0-BFCC-D4F40F7B5673" name="GUID-CA0E1792-1F88-4DA0-BFCC-D4F40F7B5673"></a><h4 id="APPUG-GUID-CA0E1792-1F88-4DA0-BFCC-D4F40F7B5673" class="sect4">APPC Conversation Sharing for TIPs That Are Too Large </h4>
                  <div>
                     <p><a id="d17239e3692" class="indexterm-anchor"></a>You can use conversation sharing to circumvent a TIP that is too large to compile. This is identified by '<code class="codeph">PLS-00123 - package too large to compile</code>', or some other problem symptom such as PL/SQL compilation hanging. In this case you must choose which function calls to remove from the former TIP and define into new TIPs.
                     </p>
                     <p>Specifically, you must decide which <a id="d17239e3704" class="indexterm-anchor"></a><a id="d17239e3708" class="indexterm-anchor"></a>PGAU<code class="codeph"> DEFINE CALL</code> statements and their related <a id="d17239e3714" class="indexterm-anchor"></a><a id="d17239e3716" class="indexterm-anchor"></a><code class="codeph">DEFINE DATA</code> statements should be moved from the old PGAU control file (<code class="codeph">.ctl</code>) into one or more new PGAU control files. In addition, you must decide which P<a id="d17239e3727" class="indexterm-anchor"></a><a id="d17239e3731" class="indexterm-anchor"></a>GAU <code class="codeph">DEFINE TRANSACTION</code> statements should be included in each new PGAU control file defining each new TIP.
                     </p>
                     <p>You must consider several PGAU statements; refer to <a href="developing-appc-client-app-sna-only.html#GUID-CA0E1792-1F88-4DA0-BFCC-D4F40F7B5673__G1013981" title="This 2 column table lists the PGAU statements and their descriptions">Table 4-4</a> for a list of the PGAU statements and their descriptions:
                     </p>
                     <div class="tblformal" id="GUID-CA0E1792-1F88-4DA0-BFCC-D4F40F7B5673__G1013981">
                        <p class="titleintable">Table 4-4 PGAU Statements</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="PGAU Statements" summary="This 2 column table lists the PGAU statements and their descriptions" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d17239e3754">Statement</th>
                                 <th align="left" valign="bottom" width="69%" id="d17239e3757">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e3762" headers="d17239e3754 ">
                                    <p><code class="codeph">DEFINE DATA</code> statements
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e3762 d17239e3757 ">
                                    <p>Must be unique. They can be shared by all affected PGAU control files, provided they are defined to the Procedural Gateway Data Dictionary (PG DD) before being referenced by <code class="codeph">DEFINE CALL</code> statements. No changes are needed to these statements.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e3774" headers="d17239e3754 ">
                                    <p><code class="codeph">DEFINE CALL</code> statements
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e3774 d17239e3757 ">
                                    <p>Must be unique. They need only be referenced by the new <code class="codeph">DEFINE TRANSACTION</code> statement of the TIP in which they are included, provided they are defined to the PG DD before being referenced by a <code class="codeph">DEFINE TRANSACTION</code> statement. The <code class="codeph">DEFINE CALL</code> statements can optionally be moved to the new PGAU control file of the TIP in which they are included.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d17239e3792" headers="d17239e3754 ">
                                    <p><code class="codeph">DEFINE TRANSACTION</code> statements
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d17239e3792 d17239e3757 ">
                                    <p>Specified for each new TIP desired and will reference those call definitions moved from the former large TIP to the new small TIPs. No transaction attributes will change. This allows any new TIP to perform the same initialization or termination with the same RHT as the former large TIP. The old <code class="codeph">DEFINE TRANSACTION</code> statement (of the former large TIP) should now exclude any call definitions which are being moved to new small TIPs. 
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="APPUG1307"></a><a id="APPUG1308"></a><a id="APPUG1309"></a><a id="APPUG1002"></a><div class="props_rev_3"><a id="GUID-7194BAD8-2440-48AE-BF6C-3A9BEB8CCF8F" name="GUID-7194BAD8-2440-48AE-BF6C-3A9BEB8CCF8F"></a><h4 id="APPUG-GUID-7194BAD8-2440-48AE-BF6C-3A9BEB8CCF8F" class="sect4">APPC Conversation Sharing Example</h4>
                  <div>
                     <p>Assume the existence of RHTs <code class="codeph">A</code>, <code class="codeph">B</code> and <code class="codeph">C</code>, and that RHT <code class="codeph">A</code> performs a menu selection and calls RHT <code class="codeph">B</code> for a query function or RHT <code class="codeph">C</code> for an update followed by a select function.
                     </p>
                     <p>You could define the following <code class="codeph">DATA</code> and <code class="codeph">CALL</code>s:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DEFINE DATA</code> <span class="italic"><code class="codeph">choice ...</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE DATA</code> <span class="italic"><code class="codeph">input  ...</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE DATA</code> <span class="italic"><code class="codeph">answer ...</code></span></p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE DATA</code> <span class="italic"><code class="codeph">record ... </code></span></p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE CALL menu_A callname(pick)  parms(choice in);</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE CALL query_B callname(query) parms((input in), (answer out));</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE CALL update_C callname(update) parms(record in);</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFINE CALL select_C callname(select) parms(record out);</code></p>
                        </li>
                     </ul>
                     <p>The following example TIPs could be defined:</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7194BAD8-2440-48AE-BF6C-3A9BEB8CCF8F__GUID-5B4B8ECC-AC78-4EF8-BABB-EF572686AACE">Example 1</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example does not use APPC conversation sharing, but is a valid TIP definition created before release 3.4.0, combining the functions of RHTs <code class="codeph">A</code>, <code class="codeph">B</code> and <code class="codeph">C</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION rhtABC calls(menu_A, 
                                query_B, 
                                update_C, 
                                select_C) 
                          tpname(RHTA);   </pre><p>This TIP includes all data definitions and calls, and might be too large to compile. This TIP does not use APPC conversation sharing as there is only the one TIP, <code class="codeph">rhtABC</code>. The RHTs do, however, perform their normal sharing of the conversation at the remote host. If the TIP was small enough to compile, the client application calls TIP functions as follows: 
                        </p><pre class="oac_no_warn" dir="ltr">rc := rhtABC.rhtABC_init(tranuse); 
rc := rhtABC.pick(tranuse, choice); 
rc := rhtABC.query(tranuse, input, answer); 
rc := rhtABC.update(tranuse, record); 
rc := rhtABC.select(tranuse, record); 
rc := rhtABC.rhtABC_term(tranuse); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7194BAD8-2440-48AE-BF6C-3A9BEB8CCF8F__GUID-DD54E1E7-B689-4945-8135-44BB7EBEDE53">Example 2</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example demonstrates defining a set of TIPs with APPC conversation sharing, separating the functions of RHTs <code class="codeph">A</code>, <code class="codeph">B</code> and <code class="codeph">C</code> into three TIPs: 
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION rhtA calls(menu_A)   tpname(RHTA); 
DEFINE TRANSACTION rhtB calls(query_B)  tpname(RHTA); 
DEFINE TRANSACTION rhtC calls(update_C, 
                              select_C) tpname(RHTA); 
</pre><p>Each TIP includes only the call and data it requires, and each TIP automatically performs APPC conversation sharing. The client application calls these functions as follows:</p><pre class="oac_no_warn" dir="ltr">rc := rhtA.rhtA_init(tranuse); 
rc := rhtA.pick(tranuse, choice); 
rc := rhtB.query(tranuse, input, answer); 
rc := rhtC.update(tranuse, record); 
rc := rhtC.select(tranuse, record); 
rc := rhtB.rhtB_term(tranuse); 
</pre><p>The only client application difference between the two examples is in the schema qualifier on each of the TIP calls. This is because the function being called is in a different TIP which has a different package name in the database.</p>
                        <p>Only new <code class="codeph">DEFINE TRANSACTION</code> statements were needed to make use of APPC conversation sharing. The <code class="codeph">CALL</code> and <code class="codeph">DATA</code> definitions were used as-is. This means the old TIP <code class="codeph">rhtABC</code> is still defined as it was and might still be too large to compile.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7194BAD8-2440-48AE-BF6C-3A9BEB8CCF8F__GUID-ED341DA9-8EA1-466F-822A-7D99BC723ABC">Example 3</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If you performed Sample 2 but you still believe that the TIP may be too large to compile, try this:</p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION rhtABC calls(menu_A)   tpname(RHTA); 
DEFINE TRANSACTION rhtB   calls(query_B)  tpname(RHTA); 
DEFINE TRANSACTION rhtCU  calls(update_C) tpname(RHTA); 
DEFINE TRANSACTION rhtCS  calls(select_C) tpname(RHTA); 
</pre><p>TIP <code class="codeph">rhtABC</code> has had three functions removed so it is now smaller and more likely to compile. TIP <code class="codeph">rhtB</code> has one function and TIP <code class="codeph">rhtC</code> has been separated into two TIPs even though the corresponding host functions remain in a single RHT. 
                        </p>
                        <p>The client application calls these functions as follows: </p><pre class="oac_no_warn" dir="ltr">rc := rhtB.rhtB_init(tranuse); 
rc := rhtABC.pick(tranuse, choice); 
rc := rhtB.query(tranuse, input); 
rc := rhtCU.update(tranuse, record); 
rc := rhtCS.select(tranuse, record); 
rc := rhtABC.rhtABC_term(tranuse); 
</pre><p>A different TIP is used for initialization, illustrating that all TIPs contain the init and term functions, and because the <code class="codeph">DEFINE TRANSACTION </code>statements all specified the same <code class="codeph">tpname(RHTA)</code>, the same remote host transaction is always called for initialization.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPUG1003"></a><div class="props_rev_3"><a id="GUID-B04E6B1E-4AA9-4CD2-8976-A19B782D99C1" name="GUID-B04E6B1E-4AA9-4CD2-8976-A19B782D99C1"></a><h4 id="APPUG-GUID-B04E6B1E-4AA9-4CD2-8976-A19B782D99C1" class="sect4">APPC Conversation Sharing Overrides and Diagnostics</h4>
                  <div>
                     <p><a id="d17239e4060" class="indexterm-anchor"></a>TIP default override parameters are processed in the TIP init function which was called to perform initialization. Once the APPC conversation is established, no further sharing of overriding parameters is necessary. You need do nothing more than pass the overrides to the TIP init function.
                     </p>
                     <p><a id="d17239e4066" class="indexterm-anchor"></a>TIP diagnostic parameters are shared among all TIPs sharing a given conversation. In effect, requesting diagnostics of the TIP performing initialization causes the same diagnostics to be requested of all TIPs sharing the conversation. Requesting diagnostics from only one TIP of several sharing a conversation is not possible. The application designer or user need only pass the TIP runtime trace controls to the TIP init function. 
                     </p>
                  </div>
               </div>
            </div><a id="APPUG1004"></a><div class="props_rev_3"><a id="GUID-2F5FD89A-06E6-47DF-84CD-525B6515B25F" name="GUID-2F5FD89A-06E6-47DF-84CD-525B6515B25F"></a><h3 id="APPUG-GUID-2F5FD89A-06E6-47DF-84CD-525B6515B25F" class="sect3">Application Development with Multi-Byte Character Set Support</h3>
               <div>
                  <p><a id="d17239e4114" class="indexterm-anchor"></a>COBOL presently only supports <a id="d17239e4119" class="indexterm-anchor"></a>double byte character sets (<a id="d17239e4124" class="indexterm-anchor"></a>DBCS) for <a id="d17239e4129" class="indexterm-anchor"></a><code class="codeph">PIC G</code> datatypes. 
                  </p>
                  <p>PGAU processes COBOLII <code class="codeph">PIC G</code> datatypes as PL/SQL <code class="codeph">VARCHAR2</code> variables and generates TIPs which automatically convert the data according to the                       Oracle <code class="codeph">NLS_LANGUAGE</code>s specified for the remote host data and the local Oracle data.
                  </p>
                  <p>These Oracle <code class="codeph">NLS_LANGUAGE</code>s can be specified as defaults for all <code class="codeph">PIC G </code>data exchanged by the TIP with the remote transaction (see <code class="codeph">DEFINE TRANSACTION</code> <code class="codeph">... </code><code class="codeph">REMOTE_MBCS</code> or <code class="codeph">LOCAL_MBCS</code>). The Oracle <code class="codeph">NLS_LANGUAGE</code>s for any individual <code class="codeph">PIC G</code> data item can be further overridden (see <code class="codeph">REDEFINE DATA</code> <code class="codeph">... </code><code class="codeph">REMOTE</code> or <code class="codeph">LOCAL_LANGUAGE</code>). 
                  </p>
                  <p>DBCS data can be encoded in any combination of supported DBCS character sets. For example, a remote host application which allows different codepages for each field of data in a record is supported by the Oracle Database Gateway <a id="d17239e4186" class="indexterm-anchor"></a>MBCS<a id="d17239e4189" class="indexterm-anchor"></a> support. 
                  </p>
                  <p>Use of <code class="codeph">REDEFINE DATA ... REMOTE_LANGUAGE</code> or <code class="codeph">LOCAL_LANGUAGE</code> on <code class="codeph">PIC X</code> items is also supported. Thus a TIP can perform DBCS or MBCS conversions for specified <code class="codeph">PIC X</code> data fields, in addition to SBCS conversions by default for the remaining <code class="codeph">PIC X</code> data fields. Default SBCS conversion is according to the <code class="codeph">DEFINE TRANSACTION...  NLS_LANGUAGE</code> and local Oracle default <code class="codeph">LANGUAGE</code> environment values. 
                  </p>
                  <p>When PGAU is generating a TIP, the <code class="codeph">PIC G</code> datatypes are converted to PL/SQL <code class="codeph">VARCHAR2</code> datatypes. After conversion by the TIP, received <code class="codeph">'PIC G' VARCHAR2</code> datatypes can have a length less then the maximum due to deletion of shift-out and shift-in meta characters, and sent <code class="codeph">'PIC G' </code>RAWs will have the shift-out and shift-in characters inserted as required by the remote host character set specified. 
                  </p>
                  <p>This is different from the conversions performed for <code class="codeph">PIC X</code> data which is always a known fixed-length and hence <code class="codeph">CHAR</code> datatypes are used in TIPs for <code class="codeph">PIC X</code> data fields. However, even when the <code class="codeph">PIC X</code> field contains DBCS or MBCS data, a <code class="codeph">CHAR</code> variable is still used and padded with blanks if needed.
                  </p>
                  <p>Some remote host applications bracket a<code class="codeph"> PIC G</code> field with <code class="codeph">PIC X</code> bytes used for shift-out, shift-in meta-character insertion. Such a COBOL definition might look like:   
                  </p><pre class="oac_no_warn" dir="ltr">01 MY_RECORD. 
   05 SO PIC X. 
   05 MY_SBCS_DATA PIC G(52). 
   05 SI PIC X. 
</pre><p>This is not processed correctly by PGAU, because all three fields are defined, and consequently treated, as separate data items when conversion is performed.</p>
                  <p>To be properly processed, the definition input to PGAU should be: </p><pre class="oac_no_warn" dir="ltr">01 MY_RECORD. 
   05 MY_MBCS_DATA PIC G(51).
</pre><p>The PGAU <code class="codeph">REDEFINE DATA</code> statement can redefine the 3-field definition to the 1-field definition by specifying <code class="codeph">USAGE(SKIP)</code> on fields <code class="codeph">SO</code> and <code class="codeph">SI</code>, and <code class="codeph">'05 MY_MBCS_DATA PIC G(51).'</code> to redefine <code class="codeph">MY_MBCS_DATA</code>. The three <code class="codeph">REDEFINE</code> statements can be placed in the PGAU input control file, and thus the remote host definition need not be altered. 
                  </p>
               </div>
            </div><a id="APPUG1005"></a><div class="props_rev_3"><a id="GUID-B118F27C-0B26-4429-8B70-3CC5B01C6A93" name="GUID-B118F27C-0B26-4429-8B70-3CC5B01C6A93"></a><h3 id="APPUG-GUID-B118F27C-0B26-4429-8B70-3CC5B01C6A93" class="sect3">Modifying a Terminal-Oriented Transaction to Use APPC</h3>
               <div>
                  <p><a id="d17239e4322" class="indexterm-anchor"></a><a id="d17239e4326" class="indexterm-anchor"></a>The remote transaction program must include mapped APPC verbs to initiate, communicate, and terminate the APPC conversation. However, when the remote transaction program is terminal-oriented, the following options are available:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can separate the terminal logic from the application and I/O logic. Once this separation is achieved, a small front end remote transaction program can be written to interface between the gateway calls and the transaction application logic. For example, in CICS the CICS <code class="codeph">LINK</code> is used to implement this technique.
                        </p>
                     </li>
                     <li>
                        <p>You can modify your existing program so that APPC calls are embedded. In the example, <code class="codeph">PGADB2I</code>, we use CICS and its associated mapped APPC verbs as follows: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>EXEC CICS <code class="codeph">ASSIGN</code> accepts the conversation initiated by the gateway.
                              </p>
                           </li>
                           <li>
                              <p>EXEC CICS <code class="codeph">RECEIVE</code> receives the arguments.
                              </p>
                           </li>
                           <li>
                              <p>EXEC CICS <code class="codeph">SEND</code> ends the results.
                              </p>
                           </li>
                           <li>
                              <p>EXEC CICS <code class="codeph">RETURN</code> terminates the conversation.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>If you do not want to modify your terminal-oriented transaction, you can insert an APPC-capable interface, such as IBM Corporation's FEPI for CICS Transaction Server for z/OS, between the terminal-oriented program and the gateway.</p>
                     </li>
                     <li>
                        <p>With IMS/TM, existing unmodified IMS transactions can be accessed with the gateway using the implicit APPC facility. With implicit APPC, the standard DLI GU, GN, and ISRT calls using the I/O PCB are automatically converted to appropriate APPC send or receive calls when the IMS transaction is invoked through APPC.<a id="d17239e4375" class="indexterm-anchor"></a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="APPUG1006"></a><div class="props_rev_3"><a id="GUID-8E530425-F978-4095-8A39-B8FD8BE2A47A" name="GUID-8E530425-F978-4095-8A39-B8FD8BE2A47A"></a><h3 id="APPUG-GUID-8E530425-F978-4095-8A39-B8FD8BE2A47A" class="sect3">Privileges Needed to Use TIPs</h3>
               <div>
                  <p>Execute privileges must be explicitly granted to callers of TIPs or procedures. This privilege cannot be granted through a role.</p>
                  <p>Any TIP user wanting to trace a TIP must be granted execute privileges on the rtrace and ptrace procedures. Refer to the "Configuring PGAU" section in the chapter appropriate for your communications protocol in the installation guides for more information. </p>
                  <p>For example, on Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus pgaadmin\<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on pgaadmin.purge_trace to <span class="italic">tip_user_userid</span>;
SQL&gt; grant execute on pgaadmin.read_trace to <span class="italic">tip_user_userid;</span> 
</pre><p>On UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus pgaadmin/<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on pgaadmin.purge_trace to <span class="italic">tip_user_userid</span>;
SQL&gt; grant execute on pgaadmin.read_trace to <span class="italic">tip_user_userid;</span> 
</pre><p>After a TIP has been developed, the TIP user must be granted execute privileges on the TIP by the TIP owner. The TIP owner is usually <code class="codeph">PGAADMIN</code>, but can be another user who has been granted either the <code class="codeph">PGDDDEF</code> or <code class="codeph">PGDDGEN</code> roles. 
                  </p>
                  <p>For example, on Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus tip_owner\<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on tipname to <span class="italic">tip_user_userid</span>;
</pre><p>On UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus tip_owner/<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on tipname to <span class="italic">tip_user_userid</span>;
</pre><p>where<span class="italic"><code class="codeph"> database_specification_string</code></span>  is the <a id="d17239e4493" class="indexterm-anchor"></a>Oracle Net identifier for the Oracle database where the gateway <code class="codeph">UTL_RAW</code> and <code class="codeph">UTL_PG</code> components were installed. This is the same Oracle database where the TIPs are executed and where grants on the TIPs are performed from the TIP owner user&nbsp;ID.
                  </p>
                  <p>A SQL script for performing these grants is provided in the                                        <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code> directory on Microsoft Windows and in the <code class="codeph">$ORACLE_HOME/dg4appc/admin</code> directory on UNIX based system. The<a id="d17239e4510" class="indexterm-anchor"></a><a id="d17239e4512" class="indexterm-anchor"></a> <code class="codeph">pgddausr.sql</code> script performs the grants for private access to the packages by a single TIP user. If private grants are to be used, the <code class="codeph">pgddausr.sql</code> script must be run once for each TIP user's user&nbsp;ID. 
                  </p>
                  <p>To run these scripts, use SQL*Plus to connect to the Oracle database as user <code class="codeph">PGAADMIN</code>. From SQL*Plus, run the <code class="codeph">pgddausr.sql</code> script from the                                    <code class="codeph">%ORACLE_HOME%\dg4appc\admin</code> directory on Microsoft Windows or       <code class="codeph">$ORACLE_HOME/dg4appc/admin</code> directory on UNIX based system. The script performs the necessary grants as previously described. You are prompted for the required user&nbsp;IDs, passwords, and database specification strings. If you are using private grants, repeat this step for each user&nbsp;ID requiring access to the packages.
                  </p>
                  <p>No script has been provided to perform public grants. To do this, issue the following commands:</p>
                  <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus tip_owner\<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on tipname to PUBLIC;  
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus tip_owner/<span class="italic">pw@database_specification_string</span> 
SQL&gt; grant execute on tipname to PUBLIC;  
</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
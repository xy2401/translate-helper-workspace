<html id='04998.host-arrays.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Host Arrays</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96467-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="embedded-PL-SQL.html" title="Previous" type="text/html">
      <link rel="next" href="handling-run-time-errors.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNPCC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="embedded-PL-SQL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="handling-run-time-errors.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-and-concepts.html" property="item" typeof="WebPage"><span property="name"> Introduction and Concepts </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Host Arrays</li>
            </ol>
            <a id="GUID-6B57FBAE-0303-41B9-9056-5C20384442B7" name="GUID-6B57FBAE-0303-41B9-9056-5C20384442B7"></a>
            
            <h2 id="LNPCC-GUID-6B57FBAE-0303-41B9-9056-5C20384442B7" class="sect2"><span class="enumeration_chapter">8 </span> Host Arrays
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d40176e6" class="indexterm-anchor"></a>This chapter looks at using arrays to simplify coding and improve program performance. You will learn how to manipulate Oracle data using arrays, how to operate on all the elements of an array with a single SQL statement, and how to limit the number of array elements processed. The chapter contains the following topics: 
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="host-arrays.html#GUID-686DE5C3-8BB0-4C69-9810-47D56F4919AF">Why Use Arrays? </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-C0A64DDB-0282-46F6-ABAB-13047958B085">About Declaring Host Arrays </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-D103007D-E544-4516-A1CB-826978F67C2B">About Using Arrays in SQL Statements </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-55DA6D6C-60A9-4F6B-ADF6-18C08B872147">About Selecting into Arrays</a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-2D0C9C7F-368A-4157-9F5C-8141072D9EB2">About Inserting with Arrays </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-755F6669-A311-454A-A561-93FA79BF6BDD">About Updating with Arrays </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-DE60CE32-DF13-4969-A83D-C338C0A866BD">About Deleting with Arrays </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-A5ABD676-CF67-4EFF-82A4-82D94A653DD0">About Using the FOR Clause </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-D831124D-EB14-4CF6-9EE6-D76AFA331FE3">About Using the WHERE Clause </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-861203A7-309A-4A33-A6B8-89B10B36E0C4">Arrays of Structs</a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E">About Mimicking CURRENT OF </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-989279AF-E176-41C7-A2D0-84685367DA54">About Using sqlca.sqlerrd[2] </a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408">About Using Additional Array Insert/Select Syntax</a></p>
                  </li>
                  <li>
                     <p><a href="host-arrays.html#GUID-DBC05FB2-D78C-4FF2-83F8-9D382F0F3786">About Using Implicit Buffered Insert</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC3434"></a><div class="props_rev_3"><a id="GUID-686DE5C3-8BB0-4C69-9810-47D56F4919AF" name="GUID-686DE5C3-8BB0-4C69-9810-47D56F4919AF"></a><h3 id="LNPCC-GUID-686DE5C3-8BB0-4C69-9810-47D56F4919AF" class="sect3"><span class="enumeration_section">8.1 </span>Why Use Arrays? 
               </h3>
               <div>
                  <p>Arrays reduce programming time and result in improved performance.<a id="d40176e94" class="indexterm-anchor"></a> 
                  </p>
                  <p>With arrays, you manipulate an entire array with a single SQL statement. Thus, Oracle communication overhead is reduced markedly, especially in a networked environment. A major portion of runtime is spent on network round trips between the client program and the server database. Arrays reduce the round trips.</p>
                  <p>For example, suppose you want to insert information about 300 employees into the EMP table. Without arrays your program must do 300 individual INSERTs—one for each employee. With arrays, only one INSERT needs to be done. </p>
               </div>
            </div><a id="LNPCC3435"></a><div class="props_rev_3"><a id="GUID-C0A64DDB-0282-46F6-ABAB-13047958B085" name="GUID-C0A64DDB-0282-46F6-ABAB-13047958B085"></a><h3 id="LNPCC-GUID-C0A64DDB-0282-46F6-ABAB-13047958B085" class="sect3"><span class="enumeration_section">8.2 </span>About Declaring Host Arrays 
               </h3>
               <div>
                  <p>The following example declares three host arrays, each with a maximum of 50 elements:<a id="d40176e114" class="indexterm-anchor"></a><a id="d40176e118" class="indexterm-anchor"></a><a id="d40176e122" class="indexterm-anchor"></a><a id="d40176e126" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">char  emp_name[50][10]; 
int   emp_number[50]; 
float salary[50]; 
</pre><p>Arrays of VARCHARs are also allowed. The following declaration is a valid host language declaration: <a id="d40176e135" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">VARCHAR v_array[10][30];</pre></div><a id="LNPCC3436"></a><div class="props_rev_3"><a id="GUID-FC842FBE-6DA7-4A0C-B99C-4BE958AEA531" name="GUID-FC842FBE-6DA7-4A0C-B99C-4BE958AEA531"></a><h4 id="LNPCC-GUID-FC842FBE-6DA7-4A0C-B99C-4BE958AEA531" class="sect4"><span class="enumeration_section">8.2.1 </span>Restrictions (Declaring Host Arrays)
                  </h4>
                  <div>
                     <p>You cannot declare host arrays of pointers, except for object types. <a id="d40176e152" class="indexterm-anchor"></a></p>
                     <p>Except for character arrays (strings), host arrays that might be referenced in a SQL statement are limited to one dimension. So, the two-dimensional array declared in the following example is <span class="italic">invalid</span>:<a id="d40176e161" class="indexterm-anchor"></a><a id="d40176e165" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">int hi_lo_scores[25][25];   /* not allowed */ </pre></div>
               </div><a id="LNPCC3437"></a><div class="props_rev_3"><a id="GUID-115E5EFA-AEA2-4028-8FAB-F6A220F30E8A" name="GUID-115E5EFA-AEA2-4028-8FAB-F6A220F30E8A"></a><h4 id="LNPCC-GUID-115E5EFA-AEA2-4028-8FAB-F6A220F30E8A" class="sect4"><span class="enumeration_section">8.2.2 </span>Maximum Size of Arrays
                  </h4>
                  <div>
                     <p>The maximum number of array elements in a SQL statement that is accessible in one fetch is 32K (or possibly greater, depending on the platform and the available memory). If you try to access a number that exceeds the maximum, you get a "parameter out of range" runtime error. If the statement is an anonymous PL/SQL block, the number of array elements accessible is limited to 32512 divided by the size of the datatype.</p>
                  </div>
               </div>
            </div><a id="LNPCC3438"></a><div class="props_rev_3"><a id="GUID-D103007D-E544-4516-A1CB-826978F67C2B" name="GUID-D103007D-E544-4516-A1CB-826978F67C2B"></a><h3 id="LNPCC-GUID-D103007D-E544-4516-A1CB-826978F67C2B" class="sect3"><span class="enumeration_section">8.3 </span>About Using Arrays in SQL Statements 
               </h3>
               <div>
                  <p>You can use host arrays as input variables in the INSERT, UPDATE, and DELETE statements and as output variables in the INTO clause of SELECT and FETCH statements. <a id="d40176e195" class="indexterm-anchor"></a> <a id="d40176e200" class="indexterm-anchor"></a> 
                  </p>
                  <p>The embedded SQL syntax used for host arrays and simple host variables is nearly the same. One difference is the optional FOR clause, which lets you control array processing. Also, there are restrictions on mixing host arrays and simple host variables in a SQL statement. </p>
                  <p>The following sections illustrate the use of host arrays in data manipulation statements. </p>
               </div><a id="LNPCC3439"></a><div class="props_rev_3"><a id="GUID-9F81B600-4AB8-4A67-9CC9-347BBA9B5E54" name="GUID-9F81B600-4AB8-4A67-9CC9-347BBA9B5E54"></a><h4 id="LNPCC-GUID-9F81B600-4AB8-4A67-9CC9-347BBA9B5E54" class="sect4"><span class="enumeration_section">8.3.1 </span>About Referencing Host Arrays 
                  </h4>
                  <div>
                     <p>If you use multiple host arrays in a single SQL statement, their number of elements should be the same. Otherwise, an "array size mismatch" warning message is issued at precompile time. If you ignore this warning, the precompiler uses the <span class="italic">smallest</span> number of elements for the SQL operation.<a id="d40176e223" class="indexterm-anchor"></a> 
                     </p>
                     <p>In this example, only 25 rows are <a id="d40176e230" class="indexterm-anchor"></a><a id="d40176e234" class="indexterm-anchor"></a>Inserted<a id="d40176e239" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">int    emp_number[50]; 
char   emp_name[50][10]; 
int    dept_number[25]; 
/* Populate host arrays here. */ 

EXEC SQL INSERT INTO emp (empno, ename, deptno) 
    VALUES (:emp_number, :emp_name, :dept_number);
 </pre><p>It is possible to subscript host arrays in SQL statements, and use them in a loop to INSERT or fetch data. For example, you could INSERT every fifth element in an array using a loop such as: </p><pre class="oac_no_warn" dir="ltr">for (i = 0; i &lt; 50; i += 5) 
    EXEC SQL INSERT INTO emp (empno, deptno) 
        VALUES (:emp_number[i], :dept_number[i]);
</pre><p>However, if the array elements that you need to process are contiguous, you should not process host arrays in a loop. Simply use the non-scripted array names in your SQL statement. Oracle treats a SQL statement containing host arrays of element number <span class="italic">n</span> like the same statement executed <span class="italic">n</span> times with <span class="italic">n</span> different scalar variables.
                     </p>
                  </div>
               </div><a id="LNPCC3440"></a><div class="props_rev_3"><a id="GUID-16D5559F-DE3C-4F7B-8A65-42A5AE4008CF" name="GUID-16D5559F-DE3C-4F7B-8A65-42A5AE4008CF"></a><h4 id="LNPCC-GUID-16D5559F-DE3C-4F7B-8A65-42A5AE4008CF" class="sect4"><span class="enumeration_section">8.3.2 </span>About Using Indicator Arrays
                  </h4>
                  <div>
                     <p>You can use indicator arrays to assign NULLs to input host arrays, and to detect NULL or truncated values (character columns only) in output host arrays. The following example shows how to INSERT with indicator arrays:<a id="d40176e276" class="indexterm-anchor"></a><a id="d40176e280" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">int    emp_number[50]; 
int    dept_number[50]; 
float  commission[50]; 
short  comm_ind[50];       /* indicator array */ 

/* Populate the host and indicator arrays.  To insert a null 
   into the comm column, assign -1 to the appropriate 
   element in the indicator array. */ 
    EXEC SQL INSERT INTO emp (empno, deptno, comm) 
        VALUES (:emp_number, :dept_number, 
        :commission INDICATOR :comm_ind); </pre></div>
               </div><a id="LNPCC3441"></a><div class="props_rev_3"><a id="GUID-15264290-896F-4D4A-90DF-ABABECD6A337" name="GUID-15264290-896F-4D4A-90DF-ABABECD6A337"></a><h4 id="LNPCC-GUID-15264290-896F-4D4A-90DF-ABABECD6A337" class="sect4"><span class="enumeration_section">8.3.3 </span>Oracle Restrictions (for Host Arrays)
                  </h4>
                  <div>
                     <p>Mixing scalar host variables with host arrays in the VALUES, SET, INTO, or WHERE clause is <span class="italic">not</span> allowed. If any of the host variables is an array, all must be arrays.<a id="d40176e302" class="indexterm-anchor"></a><a id="d40176e306" class="indexterm-anchor"></a> 
                     </p>
                     <p>You cannot use host arrays with the <a id="d40176e313" class="indexterm-anchor"></a><a id="d40176e315" class="indexterm-anchor"></a>CURRENT OF clause in an UPDATE or DELETE statement. 
                     </p>
                  </div>
               </div><a id="LNPCC3442"></a><div class="props_rev_3"><a id="GUID-BC49BCAA-B08F-44E2-A1BC-060F24582456" name="GUID-BC49BCAA-B08F-44E2-A1BC-060F24582456"></a><h4 id="LNPCC-GUID-BC49BCAA-B08F-44E2-A1BC-060F24582456" class="sect4"><span class="enumeration_section">8.3.4 </span>ANSI Restriction and Requirements
                  </h4>
                  <div>
                     <p>The array interface is an Oracle extension to the ANSI/ISO embedded SQL standard. However, when you precompile with MODE=ANSI, array SELECTs and FETCHes are still allowed. The use of arrays can be flagged using the FIPS flagger precompiler option, if desired. <a id="d40176e331" class="indexterm-anchor"></a></p>
                     <p>When doing array SELECTs and FETCHes, always use indicator arrays. That way, you can test for NULLs in the associated output host array.</p>
                     <p>If <code class="codeph">DBMS=V7</code> or <code class="codeph">DBMS=v8</code> and you <code class="codeph">SELECT</code> or <code class="codeph">FETCH</code> a <code class="codeph">NULL</code> column value into a host array that is not associated with an indicator array, then Oracle stops processing, sets  <code class="codeph">sqlerrd[2]</code> to the number of rows processed, and returns an error message. When <code class="codeph">DBMS=V7</code> or <code class="codeph">DBMS=v8</code>, Oracle does not consider truncation to be an error. 
                     </p>
                     <p>Also, if your <code class="codeph">SELECT</code> or <code class="codeph">FETCH</code> results in any warning such as <code class="codeph">ORA-24347</code> due to usage of <code class="codeph">NULL</code>, and if any column does not have an indicator array, Oracle stops processing.
                     </p>
                     <div class="infoboxnote" id="GUID-BC49BCAA-B08F-44E2-A1BC-060F24582456__GUID-86603649-D6F9-4CDC-A732-433F7EE87304">
                        <p class="notep1">Note:</p>
                        <p></p>
                        <p>Use indicator variables for all the columns in the <code class="codeph">SELECT</code> or <code class="codeph">FETCH</code>. If all columns do not have indicators, then the precompiler option <code class="codeph">unsafe_null=yes</code> can be used as an alternative.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3443"></a><div class="props_rev_3"><a id="GUID-55DA6D6C-60A9-4F6B-ADF6-18C08B872147" name="GUID-55DA6D6C-60A9-4F6B-ADF6-18C08B872147"></a><h3 id="LNPCC-GUID-55DA6D6C-60A9-4F6B-ADF6-18C08B872147" class="sect3"><span class="enumeration_section">8.4 </span>About Selecting into Arrays
               </h3>
               <div>
                  <p>You can use host arrays as output variables in the SELECT statement. If you know the maximum number of rows the SELECT will return, simply declare the host arrays with that number of elements. In the following example, you select directly into three host arrays. Knowing the SELECT will return no more than 50 rows, you declare the arrays with 50 elements: <a id="d40176e402" class="indexterm-anchor"></a> <a id="d40176e407" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">char   emp_name[50][20]; 
int    emp_number[50]; 
float  salary[50]; 
 
EXEC SQL SELECT ENAME, EMPNO, SAL 
    INTO :emp_name, :emp_number, :salary 
    FROM EMP 
    WHERE SAL &gt; 1000; 
</pre><p>In the preceding example, the SELECT statement returns up to 50 rows. If there are fewer than 50 eligible rows or you want to retrieve only 50 rows, this method will suffice. However, if there are more than 50 eligible rows, you cannot retrieve all of them this way. If you reexecute the SELECT statement, it just returns the first 50 rows again, even if more are eligible. You must either declare a larger array or declare a cursor for use with the FETCH statement. </p>
                  <p>If a SELECT INTO statement returns more rows than the number of elements you declared, Oracle issues an error message unless you specify SELECT_ERROR=NO. </p>
                  <div class="infoboxnotealso" id="GUID-55DA6D6C-60A9-4F6B-ADF6-18C08B872147__GUID-88CD57E2-44B7-44BF-9C60-3BAF4FA0E274">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="precompiler-options.html#GUID-FC726DCD-2AAE-4A4B-A293-C8C23382A9B5">Precompiler Options </a>"</span> for more information about the SELECT_ERROR option.
                     </p>
                  </div>
               </div><a id="LNPCC3444"></a><div class="props_rev_3"><a id="GUID-997A0050-15EB-4D71-A957-AAB790331092" name="GUID-997A0050-15EB-4D71-A957-AAB790331092"></a><h4 id="LNPCC-GUID-997A0050-15EB-4D71-A957-AAB790331092" class="sect4"><span class="enumeration_section">8.4.1 </span>Cursor Fetches
                  </h4>
                  <div>
                     <p>If you do not know the maximum number of rows a SELECT will return, you can declare and open a cursor, then fetch from it in "batches." </p>
                     <p>Batch fetches within a loop let you retrieve a large number of rows with ease. Each FETCH returns the next batch of rows from the current active set. In the following example, you fetch in 20-row batches:  <a id="d40176e438" class="indexterm-anchor"></a><a id="d40176e442" class="indexterm-anchor"></a><a id="d40176e446" class="indexterm-anchor"></a><a id="d40176e450" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr"> 
int   emp_number[20]; 
float salary[20]; 
 
EXEC SQL DECLARE emp_cursor CURSOR FOR 
    SELECT empno, sal FROM emp; 
 
EXEC SQL OPEN emp_cursor; 
 
EXEC SQL WHENEVER NOT FOUND do break; 
for (;;) 
{ 
    EXEC SQL FETCH emp_cursor 
        INTO :emp_number, :salary; 
    /* process batch of rows */ 
    ... 
} 
...
</pre><p>Do not forget to check how many rows were actually returned in the last fetch, and process them. </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="host-arrays.html#GUID-3B7E72E4-6E4F-40BD-BA5E-A38345362B6D">Number of Rows Fetched</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3445"></a><div class="props_rev_3"><a id="GUID-989279AF-E176-41C7-A2D0-84685367DA54" name="GUID-989279AF-E176-41C7-A2D0-84685367DA54"></a><h4 id="LNPCC-GUID-989279AF-E176-41C7-A2D0-84685367DA54" class="sect4"><span class="enumeration_section">8.4.2 </span>About Using sqlca.sqlerrd[2] 
                  </h4>
                  <div>
                     <p>For INSERT, UPDATE, DELETE, and SELECT INTO statements, <code class="codeph">sqlca.sqlerrd[2]</code> records the number of rows processed. For FETCH statements, it records the cumulative sum of rows processed.<a id="d40176e482" class="indexterm-anchor"></a> 
                     </p>
                     <p>When using host arrays with FETCH, to find the number of rows returned by the most recent iteration, subtract the current value of <code class="codeph">sqlca.sqlerrd[2]</code> from its previous value (stored in another variable). In the following example, you determine the number of rows returned by the most recent fetch: 
                     </p><pre class="oac_no_warn" dir="ltr">int  emp_number[100]; 
char emp_name[100][20]; 
 
int rows_to_fetch, rows_before, rows_this_time; 
EXEC SQL DECLARE emp_cursor CURSOR FOR 
    SELECT empno, ename 
    FROM emp 
    WHERE deptno = 30; 
EXEC SQL OPEN emp_cursor; 
EXEC SQL WHENEVER NOT FOUND CONTINUE; 
/* initialize loop variables */ 
rows_to_fetch = 20;   /* number of rows in each "batch" */ 
rows_before = 0;      /* previous value of sqlerrd[2]  */ 
rows_this_time = 20; 
 
while (rows_this_time == rows_to_fetch) 
{ 
    EXEC SQL FOR :rows_to_fetch 
    FETCH emp_cursor 
        INTO :emp_number, :emp_name; 
    rows_this_time = sqlca.sqlerrd[2] - rows_before; 
    rows_before = sqlca.sqlerrd[2]; 
} 
... 
</pre><p><code class="codeph">sqlca.sqlerrd[2]</code> is also useful when an error occurs during an array operation. Processing stops at the row that caused the error, so <code class="codeph">sqlerrd[2]</code> gives the number of rows processed successfully. 
                     </p>
                  </div>
               </div><a id="LNPCC3446"></a><div class="props_rev_3"><a id="GUID-3B7E72E4-6E4F-40BD-BA5E-A38345362B6D" name="GUID-3B7E72E4-6E4F-40BD-BA5E-A38345362B6D"></a><h4 id="LNPCC-GUID-3B7E72E4-6E4F-40BD-BA5E-A38345362B6D" class="sect4"><span class="enumeration_section">8.4.3 </span>Number of Rows Fetched 
                  </h4>
                  <div>
                     <p>Each FETCH returns, at most, the total number of rows in the array. Fewer rows are returned in the following cases:<a id="d40176e513" class="indexterm-anchor"></a> 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The end of the active set is reached. The "no data found" Oracle error code is returned to SQLCODE in the SQLCA. For example, this happens if you fetch into an array of number of elements 100 but only 20 rows are returned. </p>
                        </li>
                        <li>
                           <p>Fewer than a full batch of rows remain to be fetched. For example, this happens if you fetch 70 rows into an array of 20 number elements because after the third FETCH, only 10 rows remain to be fetched. </p>
                        </li>
                        <li>
                           <p>An error is detected while processing a row. The FETCH fails and the applicable Oracle error code is returned to SQLCODE. </p>
                        </li>
                     </ul>
                     <p>The cumulative number of rows returned can be found in the third element of <span class="italic">sqlerrd</span> in the SQLCA, called <code class="codeph">sqlerrd[2]</code> in this guide. This applies to each open cursor. In the following example, notice how the status of each cursor is maintained separately:<a id="d40176e536" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN cursor1; 
EXEC SQL OPEN cursor2; 
EXEC SQL FETCH cursor1 INTO :array_of_20; 
/* now running total in sqlerrd[2] is 20 */ 
EXEC SQL FETCH cursor2 INTO :array_of_30; 
/* now running total in sqlerrd[2] is 30, not 50 */ 
EXEC SQL FETCH cursor1 INTO :array_of_20; 
/* now running total in sqlerrd[2] is 40 (20 + 20) */ 
EXEC SQL FETCH cursor2 INTO :array_of_30; 
/* now running total in sqlerrd[2] is 60 (30 + 30) */</pre></div>
               </div><a id="LNPCC3447"></a><div class="props_rev_3"><a id="GUID-91517D50-1ACB-4191-9198-05D0F8EE3111" name="GUID-91517D50-1ACB-4191-9198-05D0F8EE3111"></a><h4 id="LNPCC-GUID-91517D50-1ACB-4191-9198-05D0F8EE3111" class="sect4"><span class="enumeration_section">8.4.4 </span>Scrollable Cursor Fetches
                  </h4>
                  <div>
                     <p>You can also use host arrays with scrollable cursors. With scrollable cursors <code class="codeph">sqlca.sqlerrd[2]</code> represents the maximum (absolute) row number processed. Since an application can arbitrarily position the fetches in scrollable mode, it need not be the total number of rows processed. 
                     </p>
                     <p>While using host arrays with the FETCH statement in scrollable mode, you cannot subtract the current value of <code class="codeph">sqlca.sqlerrd[2]</code> from its previous value to find the number of rows returned by the most recent iteration. The application program determines the total number of rows in the result set by executing a FETCH LAST. The value of <code class="codeph">sqlca.sqlerrd[2]</code> provides the total number of rows in the result set.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="host-arrays.html#GUID-F4032B0F-2816-4A08-8622-3C8E7725981D">Sample Program: Host Arrays Using Scrollable Cursor</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3448"></a><div class="props_rev_3"><a id="GUID-3C1174EC-48B7-4A24-9FA3-E837D432C069" name="GUID-3C1174EC-48B7-4A24-9FA3-E837D432C069"></a><h4 id="LNPCC-GUID-3C1174EC-48B7-4A24-9FA3-E837D432C069" class="sect4"><span class="enumeration_section">8.4.5 </span>Sample Program 3: Host Arrays 
                  </h4>
                  <div>
                     <div class="section">
                        <p>The demonstration program in this section shows how you can use host arrays when writing a query in Pro*C/C++. Pay particular attention to the use of the "rows processed count" in the SQLCA (<code class="codeph">sqlca.sqlerrd[2]</code>). This program is available on-line in the file <code class="codeph">sample3.pc</code> in your <code class="codeph">demo</code> directory. 
                        </p><pre class="oac_no_warn" dir="ltr">/*
 *  sample3.pc
 *  Host Arrays
 *
 *  This program connects to ORACLE, declares and opens a cursor,
 *  fetches in batches using arrays, and prints the results using
 *  the function print_rows().
 */

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

#include &lt;sqlca.h&gt;

#define NAME_LENGTH   20
#define ARRAY_LENGTH   5
/* Another way to connect. */
char *username = "SCOTT";
char *password = "TIGER";

/* Declare a host structure tag. */
struct
{
    int    emp_number[ARRAY_LENGTH];
    char   emp_name[ARRAY_LENGTH][NAME_LENGTH];
    float  salary[ARRAY_LENGTH];
} emp_rec;

/* Declare this program's functions. */
void print_rows();              /* produces program output */
void sql_error();          /* handles unrecoverable errors */


main()
{
    int  num_ret;               /* number of rows returned */
  
/* Connect to ORACLE. */
    EXEC SQL WHENEVER SQLERROR DO sql_error("Connect error:");

    EXEC SQL CONNECT :username IDENTIFIED BY :password;
    printf("\nConnected to ORACLE as user: %s\n", username);


    EXEC SQL WHENEVER SQLERROR DO sql_error("Oracle error:");
/* Declare a cursor for the FETCH. */
    EXEC SQL DECLARE c1 CURSOR FOR
        SELECT empno, ename, sal FROM emp;

    EXEC SQL OPEN c1;

/* Initialize the number of rows. */
    num_ret = 0;

/* Array fetch loop - ends when NOT FOUND becomes true. */
    EXEC SQL WHENEVER NOT FOUND DO break;

    for (;;)
    {
        EXEC SQL FETCH c1 INTO :emp_rec;

/* Print however many rows were returned. */
        print_rows(sqlca.sqlerrd[2] - num_ret);
        num_ret = sqlca.sqlerrd[2];        /* Reset the number. */
    }
/* Print remaining rows from last fetch, if any. */
    if ((sqlca.sqlerrd[2] - num_ret) &gt; 0)
        print_rows(sqlca.sqlerrd[2] - num_ret);

    EXEC SQL CLOSE c1;
    printf("\nAu revoir.\n\n\n");

/* Disconnect from the database. */
    EXEC SQL COMMIT WORK RELEASE;
    exit(0);
}


void
print_rows(n)
int n;
{
    int i;

    printf("\nNumber   Employee         Salary");
    printf("\n------   --------         ------\n");

    for (i = 0; i &lt; n; i++)
        printf("%-9d%-15.15s%9.2f\n", emp_rec.emp_number[i],
               emp_rec.emp_name[i], emp_rec.salary[i]);

}


void
sql_error(msg)
char *msg;
{
    EXEC SQL WHENEVER SQLERROR CONTINUE;

    printf("\n%s", msg);
    printf("\n% .70s \n", sqlca.sqlerrm.sqlerrmc);

    EXEC SQL ROLLBACK WORK RELEASE;
    exit(1);
}</pre><div class="infoboxnotealso" id="GUID-3C1174EC-48B7-4A24-9FA3-E837D432C069__GUID-E15D2ED0-8789-4F65-9545-9C8E5B00E9DC">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="handling-run-time-errors.html#GUID-1ADFD2EB-B332-4362-9A85-F56FEDD4F72A"> Handling Runtime Errors</a>"</span> for more information about SQLCA
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC3449"></a><div class="props_rev_3"><a id="GUID-F4032B0F-2816-4A08-8622-3C8E7725981D" name="GUID-F4032B0F-2816-4A08-8622-3C8E7725981D"></a><h4 id="LNPCC-GUID-F4032B0F-2816-4A08-8622-3C8E7725981D" class="sect4"><span class="enumeration_section">8.4.6 </span>Sample Program: Host Arrays Using Scrollable Cursor
                  </h4>
                  <div>
                     <div class="section">
                        <p>This program describes how to use host arrays with scrollable cursors. This program is available on-line in the file <code class="codeph">scdemo2.pc</code> in your demo directory.
                        </p>
                        <div class="infoboxnote" id="GUID-F4032B0F-2816-4A08-8622-3C8E7725981D__GUID-A676AAD6-7951-4AC5-A8FE-1EFCEBF1F3C4">
                           <p class="notep1">Note:</p>
                           <p>Note that we do a FETCH LAST to determine the number of rows in the result set.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCC3450"></a><div class="props_rev_3"><a id="GUID-51BADED9-7080-4C2D-AA39-3177C01E34CA" name="GUID-51BADED9-7080-4C2D-AA39-3177C01E34CA"></a><h5 id="LNPCC-GUID-51BADED9-7080-4C2D-AA39-3177C01E34CA" class="sect5"><span class="enumeration_section">8.4.6.1 </span>scdemo2.pc 
                     </h5>
                     <div><pre class="oac_no_warn" dir="ltr">/*
 *  A Sample program to demonstrate the use of scrollable 
 *  cursors with host arrays.
 * 
 *  This program uses the hr/hr schema.Make sure
 *  that this schema exists before executing this program
 */


#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sqlca.h&gt;

#define ARRAY_LENGTH   4

/* user and passwd */
char *username = "hr";
char *password = "hr";

/* Declare a host structure tag. */
struct emp_rec_array
{
    int    emp_number;
    char   emp_name[20];
    float  salary;
} emp_rec[ARRAY_LENGTH];


/* Print the result of the query */

void print_rows()
{
    int i;

    for (i=0; i&lt;ARRAY_LENGTH; i++)
        printf("%d    %s  %8.2f\n", emp_rec[i].emp_number,
             emp_rec[i].emp_name, emp_rec[i].salary);

}

/*  Oracle error handler */

void sql_error(char *msg)
{
    EXEC SQL WHENEVER SQLERROR CONTINUE;

    printf("\n%s", msg);
    printf("\n% .70s \n", sqlca.sqlerrm.sqlerrmc);

    EXEC SQL ROLLBACK WORK RELEASE;
    exit(EXIT_FAILURE);
}

void main()
{
    int noOfRows; /* Number of rows in the result set */

    /* Error handler */
    EXEC SQL WHENEVER SQLERROR DO sql_error("Connect error:");

    /* Connect to the data base */
    EXEC SQL CONNECT :username IDENTIFIED BY :password;

    /* Error handle */
    EXEC SQL WHENEVER SQLERROR DO sql_error("Oracle error:");

    /* declare the cursor in scrollable mode */
    EXEC SQL DECLARE c1 SCROLL CURSOR FOR
        SELECT employee_id, first_name, salary FROM employees;

    EXEC SQL OPEN c1;

    EXEC SQL WHENEVER SQLERROR DO sql_error("Fetch Error:");

    /* This is a dummy fetch to find out the number of rows
       in the result set */
    EXEC SQL FETCH LAST c1 INTO :emp_rec;

    /* The number of rows in the result set is given by 
       the value of sqlca.sqlerrd[2] */

    noOfRows = sqlca. sqlerrd[2];
    printf("Total number of rows in the result set %d:\n", 
             noOfRows);

    /* Fetch the first ARRAY_LENGTH number of rows */
    EXEC SQL FETCH FIRST c1 INTO :emp_rec;
    printf("******************** DEFAULT : \n");
    print_rows();

    /* Fetch the next set of ARRAY_LENGTH rows */
    EXEC SQL FETCH NEXT c1 INTO :emp_rec;
    printf("******************** NEXT  : \n");
    print_rows();

    /* Fetch a set of ARRAY_LENGTH rows from the 3rd row onwards */
    EXEC SQL FETCH ABSOLUTE 3 c1 INTO :emp_rec;
    printf("******************** ABSOLUTE 3 : \n");
    print_rows();

    /* Fetch the current ARRAY_LENGTH set of rows */
    EXEC SQL FETCH CURRENT c1 INTO :emp_rec;
    printf("******************** CURRENT : \n");
    print_rows();

    /* Fetch a set of ARRAY_LENGTH rows from the 2nd offset
       from the current cursor position */
    EXEC SQL FETCH RELATIVE 2 c1 INTO :emp_rec;
    printf("******************** RELATIVE 2 : \n");
    print_rows();

    /* Again Fetch the first ARRAY_LENGTH number of rows */
    EXEC SQL FETCH ABSOLUTE 0 c1 INTO :emp_rec;
    printf("******************** ABSOLUTE 0 : \n");
    print_rows();

    /* close the cursor */
    EXEC SQL CLOSE c1;

/* Disconnect from the database. */
    EXEC SQL COMMIT WORK RELEASE;
    exit(EXIT_SUCCESS);
}</pre></div>
                  </div>
               </div><a id="LNPCC3452"></a><a id="LNPCC3451"></a><div class="props_rev_3"><a id="GUID-9490A1C8-DEEE-4719-B24E-7B8472C83763" name="GUID-9490A1C8-DEEE-4719-B24E-7B8472C83763"></a><h4 id="LNPCC-GUID-9490A1C8-DEEE-4719-B24E-7B8472C83763" class="sect4"><span class="enumeration_section">8.4.7 </span>Host Array Restrictions
                  </h4>
                  <div>
                     <p>Using host arrays in the WHERE clause of a SELECT statement is <span class="italic">not</span> allowed except in a subquery. For an example, see <span class="q">"<a href="host-arrays.html#GUID-D831124D-EB14-4CF6-9EE6-D76AFA331FE3">About Using the WHERE Clause </a>"</span>.
                     </p>
                     <p>Also, you cannot mix simple host variables with host arrays in the INTO clause of a SELECT or FETCH statement. If any of the host variables is an array, all must be arrays. <a id="d40176e662" class="indexterm-anchor"></a> <a id="d40176e667" class="indexterm-anchor"></a> 
                     </p>
                     <p><a href="host-arrays.html#GUID-9490A1C8-DEEE-4719-B24E-7B8472C83763__g14498" title="Valid Arrays for SELECT INTO">Table 8-1</a> shows which uses of host arrays are valid in a SELECT INTO statement:
                     </p>
                     <div class="tblformal" id="GUID-9490A1C8-DEEE-4719-B24E-7B8472C83763__g14498">
                        <p class="titleintable">Table 8-1 Valid Host Arrays for SELECT INTO</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Valid Host Arrays for SELECT INTO" summary="Valid Arrays for SELECT INTO" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="40%" id="d40176e689">INTO Clause</th>
                                 <th align="left" valign="bottom" width="30%" id="d40176e692">WHERE Clause</th>
                                 <th align="left" valign="bottom" width="30%" id="d40176e695">Valid?</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d40176e700" headers="d40176e689 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e700 d40176e692 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e700 d40176e695 ">
                                    <p>no</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d40176e710" headers="d40176e689 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e710 d40176e692 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e710 d40176e695 ">
                                    <p>yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d40176e720" headers="d40176e689 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e720 d40176e692 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e720 d40176e695 ">
                                    <p>yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d40176e730" headers="d40176e689 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e730 d40176e692 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d40176e730 d40176e695 ">
                                    <p>no</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNPCC3453"></a><div class="props_rev_3"><a id="GUID-C191A98E-A963-42A1-9716-4CC6BF86BF4A" name="GUID-C191A98E-A963-42A1-9716-4CC6BF86BF4A"></a><h4 id="LNPCC-GUID-C191A98E-A963-42A1-9716-4CC6BF86BF4A" class="sect4"><span class="enumeration_section">8.4.8 </span>About Fetching NULLs 
                  </h4>
                  <div>
                     <p>When doing array SELECTs and FETCHes, always use indicator arrays. That way, you can test for NULLs in the associated output host array. </p>
                     <p>When DBMS = V7 or DBMS=v8, if you SELECT or FETCH a NULL column value into a host array that is not associated with an indicator array, Oracle stops processing, sets <code class="codeph">sqlerrd[2]</code> to the number of rows processed, and issues an error message.
                     </p>
                     <p>Also, if your SELECT or FETCH results in any warning such as <span class="italic">ORA-24347</span> due to usage of NULL, and if any column does not have an indicator array, Oracle stops processing. Use indicator variables in all the columns in the SELECT or FETCH.If all columns do not have indicators, the precompiler option <code class="codeph">unsafe_null=yes</code> could be used as an alternative. 
                     </p>
                  </div>
               </div><a id="LNPCC3454"></a><div class="props_rev_3"><a id="GUID-445825E9-169D-47EC-AE44-8A5A0395A2B0" name="GUID-445825E9-169D-47EC-AE44-8A5A0395A2B0"></a><h4 id="LNPCC-GUID-445825E9-169D-47EC-AE44-8A5A0395A2B0" class="sect4"><span class="enumeration_section">8.4.9 </span>About Fetching Truncated Values 
                  </h4>
                  <div>
                     <p>When DBMS=V7, truncation results in a warning message, but Oracle continues processing. </p>
                     <p>Again, when doing array SELECTs and FETCHes, always use indicator arrays. That way, if Oracle assigns one or more truncated column values to an output host array, you can find the original lengths of the column values in the associated indicator array. </p>
                  </div>
               </div>
            </div><a id="LNPCC3455"></a><div class="props_rev_3"><a id="GUID-2D0C9C7F-368A-4157-9F5C-8141072D9EB2" name="GUID-2D0C9C7F-368A-4157-9F5C-8141072D9EB2"></a><h3 id="LNPCC-GUID-2D0C9C7F-368A-4157-9F5C-8141072D9EB2" class="sect3"><span class="enumeration_section">8.5 </span>About Inserting with Arrays 
               </h3>
               <div>
                  <p>You can use host arrays as input variables in an INSERT statement. Just make sure your program populates the arrays with data before executing the INSERT statement. </p>
                  <p>If some elements in the arrays are irrelevant, you can use the FOR clause to control the number of rows inserted. <a id="d40176e790" class="indexterm-anchor"></a><a id="d40176e794" class="indexterm-anchor"></a> 
                  </p>
                  <p>An example of inserting with host arrays follows: </p><pre class="oac_no_warn" dir="ltr">char   emp_name[50][20]; 
int    emp_number[50]; 
float  salary[50]; 
/* populate the host arrays */ 
... 
EXEC SQL INSERT INTO EMP (ENAME, EMPNO, SAL) 
    VALUES (:emp_name, :emp_number, :salary); 
</pre><p>The cumulative number of rows inserted can be found in the rows-processed count, <code class="codeph">sqlca.sqlerrd[2]</code>. 
                  </p>
                  <p>In the following example, the INSERT is done one row at a time. This is much less efficient than the previous example, since a call to the server must be made for each row inserted.</p><pre class="oac_no_warn" dir="ltr">for (i = 0; i &lt; array_size; i++) 
    EXEC SQL INSERT INTO emp (ename, empno, sal) 
        VALUES (:emp_name[i], :emp_number[i], :salary[i]); 
</pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="host-arrays.html#GUID-A5ABD676-CF67-4EFF-82A4-82D94A653DD0">About Using the FOR Clause</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC3456"></a><div class="props_rev_3"><a id="GUID-A1DBD925-B34D-44DC-8BDE-6E5CEA7C7871" name="GUID-A1DBD925-B34D-44DC-8BDE-6E5CEA7C7871"></a><h4 id="LNPCC-GUID-A1DBD925-B34D-44DC-8BDE-6E5CEA7C7871" class="sect4"><span class="enumeration_section">8.5.1 </span>About Inserting with Arrays Restrictions
                  </h4>
                  <div>
                     <p>You cannot use an array of pointers in the VALUES clause of an INSERT statement; all array elements must be data items.<a id="d40176e832" class="indexterm-anchor"></a><a id="d40176e836" class="indexterm-anchor"></a> 
                     </p>
                     <p>Mixing scalar host variables with host arrays in the VALUES clause of an INSERT statement is <span class="italic">not</span> allowed. If any of the host variables is an array, all must be arrays. 
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC3457"></a><div class="props_rev_3"><a id="GUID-755F6669-A311-454A-A561-93FA79BF6BDD" name="GUID-755F6669-A311-454A-A561-93FA79BF6BDD"></a><h3 id="LNPCC-GUID-755F6669-A311-454A-A561-93FA79BF6BDD" class="sect3"><span class="enumeration_section">8.6 </span>About Updating with Arrays 
               </h3>
               <div>
                  <p>You can also use host arrays as input variables in an UPDATE statement, as the following example shows:<a id="d40176e858" class="indexterm-anchor"></a><a id="d40176e862" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">int   emp_number[50]; 
float salary[50]; 
/* populate the host arrays */ 
EXEC SQL UPDATE emp SET sal = :salary 
    WHERE EMPNO = :emp_number; 
</pre><p>The cumulative number of rows updated can be found in <code class="codeph">sqlerrd[2]</code>. This number does <span class="italic">not</span> include rows processed by an update cascade. 
                  </p>
                  <p>If some elements in the arrays are irrelevant, you can use the embedded SQL FOR clause to limit the number of rows updated. </p>
                  <p>The last example showed a typical update using a unique key (EMP_NUMBER). Each array element qualified just one row for updating. In the following example, each array element qualifies multiple rows: </p><pre class="oac_no_warn" dir="ltr">char  job_title [10][20]; 
float commission[10]; 
 
... 
 
EXEC SQL UPDATE emp SET comm = :commission 
    WHERE job = :job_title;</pre></div><a id="LNPCC3459"></a><a id="LNPCC3458"></a><div class="props_rev_3"><a id="GUID-3FAAF107-D43F-4C9C-8365-6F4891CD3D30" name="GUID-3FAAF107-D43F-4C9C-8365-6F4891CD3D30"></a><h4 id="LNPCC-GUID-3FAAF107-D43F-4C9C-8365-6F4891CD3D30" class="sect4"><span class="enumeration_section">8.6.1 </span>About Updating with Arrays Restrictions
                  </h4>
                  <div>
                     <p>Mixing simple host variables with host arrays in the SET or WHERE clause of an UPDATE statement is <span class="italic">not</span> recommended. If any of the host variables is an array, all should be arrays.<a id="d40176e898" class="indexterm-anchor"></a><a id="d40176e902" class="indexterm-anchor"></a> Furthermore, if you use a host array in the SET clause, use one of equal number of elements in the WHERE clause.
                     </p>
                     <p>You cannot use host arrays with the CURRENT OF clause in an UPDATE statement. </p>
                     <p><a href="host-arrays.html#GUID-3FAAF107-D43F-4C9C-8365-6F4891CD3D30__G14454" title="Host Arrays Valid in an UPDATE">Table 8-2</a> shows which uses of host arrays are valid in an UPDATE statement:
                     </p>
                     <div class="tblformal" id="GUID-3FAAF107-D43F-4C9C-8365-6F4891CD3D30__G14454">
                        <p class="titleintable">Table 8-2 Host Arrays Valid in an UPDATE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Host Arrays Valid in an UPDATE" summary="Host Arrays Valid in an UPDATE" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d40176e926">SET Clause</th>
                                 <th align="left" valign="bottom" width="40%" id="d40176e929">WHERE Clause</th>
                                 <th align="left" valign="bottom" width="31%" id="d40176e932">Valid?</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d40176e937" headers="d40176e926 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d40176e937 d40176e929 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d40176e937 d40176e932 ">
                                    <p>yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d40176e947" headers="d40176e926 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d40176e947 d40176e929 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d40176e947 d40176e932 ">
                                    <p>yes</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d40176e957" headers="d40176e926 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d40176e957 d40176e929 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d40176e957 d40176e932 ">
                                    <p>no</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d40176e967" headers="d40176e926 ">
                                    <p>scalar</p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d40176e967 d40176e929 ">
                                    <p>array</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d40176e967 d40176e932 ">
                                    <p>no</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="host-arrays.html#GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E">About Mimicking CURRENT OF</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3460"></a><div class="props_rev_3"><a id="GUID-DE60CE32-DF13-4969-A83D-C338C0A866BD" name="GUID-DE60CE32-DF13-4969-A83D-C338C0A866BD"></a><h3 id="LNPCC-GUID-DE60CE32-DF13-4969-A83D-C338C0A866BD" class="sect3"><span class="enumeration_section">8.7 </span>About Deleting with Arrays 
               </h3>
               <div>
                  <p>You can also use host arrays as input variables in a DELETE statement. It is like executing the DELETE statement repeatedly using successive elements of the host array in the WHERE clause. Thus, each execution might delete zero, one, or more rows from the table.<a id="d40176e992" class="indexterm-anchor"></a><a id="d40176e996" class="indexterm-anchor"></a> 
                  </p>
                  <p>An example of deleting with host arrays follows: </p><pre class="oac_no_warn" dir="ltr">... 
int emp_number[50]; 
 
/* populate the host array */ 
... 
EXEC SQL DELETE FROM emp 
    WHERE empno = :emp_number; 
</pre><p>The cumulative number of rows deleted can be found in <code class="codeph">sqlerrd[2]</code>. The number does <span class="italic">not</span> include rows processed by a delete cascade. 
                  </p>
                  <p>The last example showed a typical delete using a unique key (EMP_NUMBER). Each array element qualified just one row for deletion. In the following example, each array element qualifies multiple rows: </p><pre class="oac_no_warn" dir="ltr">... 
char job_title[10][20]; 
 
/* populate the host array  */ 
... 
EXEC SQL DELETE FROM emp 
    WHERE job = :job_title;
...</pre></div><a id="LNPCC3461"></a><div class="props_rev_3"><a id="GUID-98A91B07-113F-4CB5-8788-741AD1216C9D" name="GUID-98A91B07-113F-4CB5-8788-741AD1216C9D"></a><h4 id="LNPCC-GUID-98A91B07-113F-4CB5-8788-741AD1216C9D" class="sect4"><span class="enumeration_section">8.7.1 </span>About Deleting with Arrays Restrictions
                  </h4>
                  <div>
                     <p>Mixing simple host variables with host arrays in the WHERE clause of a DELETE statement is <span class="italic">not</span> allowed. If any of the host variables is an array, all must be arrays.<a id="d40176e1031" class="indexterm-anchor"></a><a id="d40176e1035" class="indexterm-anchor"></a> 
                     </p>
                     <p>You cannot use host arrays with the CURRENT OF clause in a DELETE statement. </p>
                     <div class="infoboxnotealso" id="GUID-98A91B07-113F-4CB5-8788-741AD1216C9D__GUID-3D2555DA-0D5D-4350-A8AD-AD33E70815A5">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="host-arrays.html#GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E">About Mimicking CURRENT OF </a>"</span> for an alternative.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3462"></a><div class="props_rev_3"><a id="GUID-A5ABD676-CF67-4EFF-82A4-82D94A653DD0" name="GUID-A5ABD676-CF67-4EFF-82A4-82D94A653DD0"></a><h3 id="LNPCC-GUID-A5ABD676-CF67-4EFF-82A4-82D94A653DD0" class="sect3"><span class="enumeration_section">8.8 </span>About Using the FOR Clause 
               </h3>
               <div>
                  <p>You can use the optional embedded SQL FOR clause to set the number of array elements processed by any of the following SQL statements: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>DELETE </p>
                     </li>
                     <li>
                        <p>EXECUTE </p>
                     </li>
                     <li>
                        <p>FETCH </p>
                     </li>
                     <li>
                        <p>INSERT </p>
                     </li>
                     <li>
                        <p>OPEN </p>
                     </li>
                     <li>
                        <p>UPDATE </p>
                     </li>
                  </ul>
                  <p>The FOR clause is especially useful in UPDATE, INSERT, and DELETE statements. With these statements you might not want to use the entire array. The FOR clause lets you limit the elements used to just the number you need, as the following example shows:<a id="d40176e1081" class="indexterm-anchor"></a><a id="d40176e1085" class="indexterm-anchor"></a><a id="d40176e1089" class="indexterm-anchor"></a><a id="d40176e1093" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">char  emp_name[100][20]; 
float salary[100]; 
int   rows_to_insert; 
 
/* populate the host arrays */ 
rows_to_insert = 25;             /* set FOR-clause variable */ 
EXEC SQL FOR :rows_to_insert   /* will process only 25 rows */ 
    INSERT INTO emp (ename, sal) 
    VALUES (:emp_name, :salary); 
</pre><p>The FOR clause can use an integer host variable to count array elements, or an integer literal. A complex C expression that resolves to an integer <span class="italic">cannot</span> be used. For example, the following statement that uses an integer expression is illegal:  <a id="d40176e1105" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">EXEC SQL FOR :rows_to_insert + 5                 /* illegal */ 
    INSERT INTO emp (ename, empno, sal) 
        VALUES (:emp_name, :emp_number, :salary); 
</pre><p>The FOR clause variable specifies the number of array elements to be processed. Make sure the number does not exceed the smallest array dimension. Internally, the value is treated as an unsigned quantity. An attempt to pass a negative value through the use of a signed host variable will result in unpredictable behavior.<a id="d40176e1114" class="indexterm-anchor"></a> 
                  </p>
               </div><a id="LNPCC3463"></a><div class="props_rev_3"><a id="GUID-C2BA19D2-9E1E-40E3-9872-282E97B2F84E" name="GUID-C2BA19D2-9E1E-40E3-9872-282E97B2F84E"></a><h4 id="LNPCC-GUID-C2BA19D2-9E1E-40E3-9872-282E97B2F84E" class="sect4"><span class="enumeration_section">8.8.1 </span>FOR Clause Restrictions
                  </h4>
                  <div>
                     <p>Two restrictions keep FOR clause semantics clear: you cannot use the FOR clause in a SELECT statement or with the CURRENT OF clause.<a id="d40176e1130" class="indexterm-anchor"></a><a id="d40176e1134" class="indexterm-anchor"></a> 
                     </p>
                  </div><a id="LNPCC3464"></a><div class="props_rev_3"><a id="GUID-7DAD881F-CBE7-4ED9-B281-15A57DFEF5FD" name="GUID-7DAD881F-CBE7-4ED9-B281-15A57DFEF5FD"></a><h5 id="LNPCC-GUID-7DAD881F-CBE7-4ED9-B281-15A57DFEF5FD" class="sect5"><span class="enumeration_section">8.8.1.1 </span>In a SELECT Statement 
                     </h5>
                     <div>
                        <p>If you use the FOR clause in a SELECT statement, you get an error message. </p>
                        <p>The FOR clause is not allowed in SELECT statements because its meaning is unclear. Does it mean "execute this SELECT statement <span class="italic">n</span> times"? Or, does it mean "execute this SELECT statement once, but return <span class="italic">n</span> rows"? The problem in the former case is that each execution might return multiple rows. In the latter case, it is better to declare a cursor and use the FOR clause in a FETCH statement, as follows: 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL FOR :limit FETCH emp_cursor INTO ... </pre></div>
                  </div><a id="LNPCC3465"></a><div class="props_rev_3"><a id="GUID-C7CC420A-49B0-4D2D-BAD6-655793C50864" name="GUID-C7CC420A-49B0-4D2D-BAD6-655793C50864"></a><h5 id="LNPCC-GUID-C7CC420A-49B0-4D2D-BAD6-655793C50864" class="sect5"><span class="enumeration_section">8.8.1.2 </span>With the CURRENT OF Clause 
                     </h5>
                     <div>
                        <p>You can use the CURRENT OF clause in an UPDATE or DELETE statement to refer to the latest row returned by a FETCH statement, as the following example shows: </p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR FOR 
    SELECT ename, sal FROM emp WHERE empno = :emp_number; 
... 
EXEC SQL OPEN emp_cursor; 
... 
EXEC SQL FETCH emp_cursor INTO :emp_name, :salary; 
... 
EXEC SQL UPDATE emp SET sal = :new_salary 
WHERE CURRENT OF emp_cursor; 
</pre><p>However, you cannot use the FOR clause with the CURRENT OF clause. The following statements are invalid because the only logical value of <span class="italic">limit</span> is 1 (you can only update or delete the current row once): 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL FOR :limit UPDATE emp SET sal = :new_salary 
WHERE CURRENT OF emp_cursor; 
... 
EXEC SQL FOR :limit DELETE FROM emp 
WHERE CURRENT OF emp_cursor; </pre></div>
                  </div>
               </div>
            </div><a id="LNPCC3466"></a><div class="props_rev_3"><a id="GUID-D831124D-EB14-4CF6-9EE6-D76AFA331FE3" name="GUID-D831124D-EB14-4CF6-9EE6-D76AFA331FE3"></a><h3 id="LNPCC-GUID-D831124D-EB14-4CF6-9EE6-D76AFA331FE3" class="sect3"><span class="enumeration_section">8.9 </span>About Using the WHERE Clause 
               </h3>
               <div>
                  <p>Oracle treats a SQL statement containing host arrays of number of elements <span class="italic">n</span> like the same SQL statement executed <span class="italic">n</span> times with <span class="italic">n</span> different scalar variables (the individual array elements). The precompiler issues an error message only when such treatment would be ambiguous.<a id="d40176e1201" class="indexterm-anchor"></a><a id="d40176e1205" class="indexterm-anchor"></a> 
                  </p>
                  <p>For example, assuming the declarations </p><pre class="oac_no_warn" dir="ltr">int  mgr_number[50]; 
char job_title[50][20]; 
</pre><p>it would be ambiguous if the statement </p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT mgr INTO :mgr_number FROM emp 
WHERE job = :job_title; </pre><p>were treated like the imaginary statement </p><pre class="oac_no_warn" dir="ltr">for (i = 0; i &lt; 50; i++) 
    SELECT mgr INTO :mgr_number[i] FROM emp 
        WHERE job = :job_title[i]; 
</pre><p>because multiple rows might meet the WHERE-clause search condition, but only one output variable is available to receive data. Therefore, an error message is issued. </p>
                  <p>On the other hand, it would not be ambiguous if the statement </p><pre class="oac_no_warn" dir="ltr">EXEC SQL UPDATE emp SET mgr = :mgr_number 
    WHERE empno IN (SELECT empno FROM emp 
        WHERE job = :job_title); 
</pre><p>were treated like the imaginary statement </p><pre class="oac_no_warn" dir="ltr">for (i = 0; i &lt; 50; i++) 
    UPDATE emp SET mgr = :mgr_number[i] 
        WHERE empno IN (SELECT empno FROM emp 
            WHERE job = :job_title[i]); 
</pre><p>because there is a <span class="italic">mgr_number</span> in the SET clause for each row matching <span class="italic">job_title</span> in the WHERE clause, even if each <span class="italic">job_title</span> matches multiple rows. All rows matching each <span class="italic">job_title</span> can be SET to the same <span class="italic">mgr_number</span>. Therefore, no error message is issued. 
                  </p>
               </div>
            </div><a id="LNPCC3467"></a><div class="props_rev_3"><a id="GUID-861203A7-309A-4A33-A6B8-89B10B36E0C4" name="GUID-861203A7-309A-4A33-A6B8-89B10B36E0C4"></a><h3 id="LNPCC-GUID-861203A7-309A-4A33-A6B8-89B10B36E0C4" class="sect3"><span class="enumeration_section">8.10 </span>Arrays of Structs
               </h3>
               <div>
                  <p>Using arrays of scalars, you can perform multirow operations involving a single column only. Using structs of scalars allows users to perform single row operations involving multiple columns.</p>
                  <p>In order to perform multirow operations involving multiple columns, however, you previously needed to allocate several parallel arrays of scalars either separately or encapsulated within a single struct. In many cases, it is easier to reorganize this data structure more conveniently as a single array of structs instead.</p>
                  <p>Pro*C/C++ supports the use of <span class="italic">arrays of structs</span> which enable an application programmer to perform multirow, multicolumn operations using an array of C structs. With this enhancement, Pro*C/C++ can handle simple arrays of structs of scalars as bind variables in embedded SQL statements for easier processing of user data. This makes programming more intuitive, and allows users greater flexibility in organizing their data.
                  </p>
                  <p>In addition to supporting arrays of structs as bind variables, Pro*C/C++ also supports arrays of indicator structs when used in conjunction with an array of structs declaration.</p>
                  <div class="infoboxnote" id="GUID-861203A7-309A-4A33-A6B8-89B10B36E0C4__GUID-CC043255-DB83-4863-B7A7-E649FE177B4D">
                     <p class="notep1">Note:</p>
                     <p>Binding structs to PL/SQL records and binding arrays of structs to PL/SQL tables of records are <span class="italic">not</span> part of this new functionality. Arrays of structs may also not be used within an embedded PL/SQL block. 
                     </p>
                  </div>
                  <p>Since arrays of structs are intended to be used when performing multirow operations involving multiple columns, it is generally anticipated that they will be used in the following ways.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>As output bind variables in SELECT statements or FETCH statements.</p>
                     </li>
                     <li>
                        <p>As input bind variables in the VALUES clause of an INSERT statement.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="host-arrays.html#GUID-99B8AD7A-71BB-47B7-BBC3-9B83DB2592A3">Restrictions on Arrays of Structs</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC3468"></a><div class="props_rev_3"><a id="GUID-64CB66FD-BA68-4A38-A524-A01D18810B2C" name="GUID-64CB66FD-BA68-4A38-A524-A01D18810B2C"></a><h4 id="LNPCC-GUID-64CB66FD-BA68-4A38-A524-A01D18810B2C" class="sect4"><span class="enumeration_section">8.10.1 </span>Arrays of Structs Usage
                  </h4>
                  <div>
                     <p>The notion of an array of structs is not new to C programmers. It does, however, present a conceptual difference for data storage when it is compared to a struct of parallel arrays.</p>
                     <p>In a struct of parallel arrays, the data for the individual columns is stored contiguously. In an array of structs, on the other hand, the column data is <span class="italic"><span class="bold">interleaved</span></span>, whereby each occurrence of a column in the array is separated by the space required by the other columns in the struct. This space is known as a <span class="italic"><span class="bold">stride</span></span>.
                     </p>
                  </div>
               </div><a id="LNPCC3469"></a><div class="props_rev_3"><a id="GUID-99B8AD7A-71BB-47B7-BBC3-9B83DB2592A3" name="GUID-99B8AD7A-71BB-47B7-BBC3-9B83DB2592A3"></a><h4 id="LNPCC-GUID-99B8AD7A-71BB-47B7-BBC3-9B83DB2592A3" class="sect4"><span class="enumeration_section">8.10.2 </span>Restrictions on Arrays of Structs
                  </h4>
                  <div>
                     <p>The following restrictions apply to the use of arrays of structs in Pro*C/C++:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Arrays of structs (just as with ordinary structs) are not permitted inside an embedded PL/SQL block.</p>
                        </li>
                        <li>
                           <p>Use of arrays of structs in WHERE or FROM clauses is prohibited.</p>
                        </li>
                        <li>
                           <p>Arrays of structs are not permitted with Oracle Dynamic SQL Method 4. They are permitted with ANSI Dynamic SQL. </p>
                        </li>
                        <li>
                           <p>Arrays of structs are not permitted in the SET clause of an UPDATE statement.</p>
                        </li>
                     </ul>
                     <p>The syntax for declaring an array of structs does not change. There are, however, a few things to keep in mind when using an array of structs.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="ANSI-dynamic-SQL.html#GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF">ANSI Dynamic SQL</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3470"></a><div class="props_rev_3"><a id="GUID-3F92A9DA-C1D7-4B19-BCF3-D5770879632A" name="GUID-3F92A9DA-C1D7-4B19-BCF3-D5770879632A"></a><h4 id="LNPCC-GUID-3F92A9DA-C1D7-4B19-BCF3-D5770879632A" class="sect4"><span class="enumeration_section">8.10.3 </span>About Declaring an Array of Structs
                  </h4>
                  <div>
                     <p>When declaring an array of structs which will be used in a Pro*C/C++ application, the programmer must keep in mind the following important points:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The struct must have a structure tag. For example, in the following code segment</p>
                        </li>
                     </ul><pre class="oac_no_warn" dir="ltr">    struct person {
       char name[15];
       int  age;
    } people[10];
</pre><p>the <code class="codeph">person</code> variable is the structure tag. This is so the precompiler can use the name of the struct to compute the size of the stride.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The members of the struct must not be arrays. The only exception to this rule is for character types such as <span class="bold">char</span> or <span class="bold">VARCHAR</span> since array syntax is used when declaring variables of these types.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">char</span> and <span class="bold">VARCHAR</span> members may not be two-dimensional.
                           </p>
                        </li>
                        <li>
                           <p>Nested structs are not permitted as members of an array of structs. This is not a new restriction, since nested structs have not been supported by previous releases of Pro*C/C++.</p>
                        </li>
                        <li>
                           <p>The size of just the struct may not exceed the maximum value that a signed 4-byte quantity may represent. This is typically two gigabytes.</p>
                        </li>
                     </ul>
                     <p>Given these restrictions regarding the use of arrays of structs, the following declaration is legal in Pro*C/C++</p><pre class="oac_no_warn" dir="ltr">struct department {
   int deptno;
   char dname[15];
   char loc[14];
} dept[4];
</pre><p>while the following declaration is illegal.</p><pre class="oac_no_warn" dir="ltr">struct {              /* the struct is missing a structure tag */
  int empno[15];      /* struct members may not be arrays */
  char ename[15][10]; /* character types may not be 2-dimensional */
  struct nested {
    int salary;   /* nested struct not permitted in array of structs */
  } sal_struct;
} bad[15];
</pre><p>It is also important to note that you cannot apply datatype equivalencing to either the array of structs itself or to any of the individual fields within the struct. For example, assuming <code class="codeph">empno</code> is not declared as an array in the earlier illegal struct, the following is illegal:
                     </p><pre class="oac_no_warn" dir="ltr">exec sql var bad[3].empno is integer(4);
</pre><p>The precompiler has no way to keep track of individual structure elements within the array of structs. One could do the following, on the other hand, to achieve the desired effect.</p><pre class="oac_no_warn" dir="ltr">typedef int myint;
exec sql type myint is integer(4);

struct equiv {
  myint empno; /* now legally considered an integer(4) datatype */
   ...
} ok[15];
</pre><p>This should come as no surprise since equivalencing individual array items has not been supported by previous releases of Pro*C/C++. For example, the following scalar array declarations illustrate what is legal and what is not.</p><pre class="oac_no_warn" dir="ltr">int empno[15];
exec sql var empno[3] is integer(4); /* illegal */

myint empno[15]; /* legal */
</pre><p>In summary, you may not equivalence any individual array item.</p>
                  </div>
               </div><a id="LNPCC3471"></a><div class="props_rev_3"><a id="GUID-D8D11569-BF8A-4158-8304-9CFC9CA54ED5" name="GUID-D8D11569-BF8A-4158-8304-9CFC9CA54ED5"></a><h4 id="LNPCC-GUID-D8D11569-BF8A-4158-8304-9CFC9CA54ED5" class="sect4"><span class="enumeration_section">8.10.4 </span>Variables Guidelines
                  </h4>
                  <div>
                     <p>Indicator variables for an array of structs declaration work in much the same way as a normal struct declaration. An indicator array of structs declaration must abide by the rules for an array of structs as follows: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The number of fields in the indicator struct must be less than or equal to the number of fields in the corresponding array of structs.</p>
                        </li>
                        <li>
                           <p>The order of the fields must match the order of the corresponding members of the array of structs.</p>
                        </li>
                        <li>
                           <p>The datatype for all elements in the indicator struct must be <span class="bold">short</span>.
                           </p>
                        </li>
                        <li>
                           <p>The size of the indicator array must be at least the same size as the host variable declaration. It may be larger, but it may not be smaller.</p>
                        </li>
                     </ul>
                     <p>These rules generally reflect the rules for using structs as implemented in prior releases of Pro*C/C++. The array restriction is also the same as that previously used for arrays of scalars.</p>
                     <p>Given these rules, assume the following struct declaration:</p><pre class="oac_no_warn" dir="ltr">struct department {
   int deptno;
   char dname[15];
   char loc[14];
} dept[4];
</pre><p>The following is a legal indicator variable struct declaration:</p><pre class="oac_no_warn" dir="ltr">struct department_ind {
   short deptno_ind;
   short dname_ind;
   short loc_ind;
} dept_ind[4];
</pre><p>while the following is illegal as an indicator variable</p><pre class="oac_no_warn" dir="ltr">struct{               /* missing indicator structure tag */
  int deptno_ind;     /* indicator variable not of type short */
  short dname_ind[15];/* array element forbidden in indicator struct */
  short loc_ind[14];  /* array element forbidden in indicator struct */
} bad_ind[2];     /* indicator array size is smaller than host array */</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="ANSI-dynamic-SQL.html#GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF">ANSI Dynamic SQL</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3472"></a><div class="props_rev_3"><a id="GUID-71BD1B05-AD40-4D68-8FCE-D3E4647E9815" name="GUID-71BD1B05-AD40-4D68-8FCE-D3E4647E9815"></a><h4 id="LNPCC-GUID-71BD1B05-AD40-4D68-8FCE-D3E4647E9815" class="sect4"><span class="enumeration_section">8.10.5 </span>About Declaring a Pointer to an Array of Structs
                  </h4>
                  <div>
                     <p>In some cases, it may be desirable to declare a pointer to an array of structs. This allows pointers to arrays of structs to be passed to other functions or used directly in an embedded SQL statement.</p>
                     <div class="infoboxnote" id="GUID-71BD1B05-AD40-4D68-8FCE-D3E4647E9815__GUID-BC2A29C3-615F-4650-8B6B-78CAF7706140">
                        <p class="notep1">Note:</p>
                        <p>The length of the array referenced by a pointer to an array of structs cannot be known during precompilation. For this reason, an explicit FOR clause must be used when a bind variable whose type is a pointer to an array of structs is used in any embedded SQL statement.</p>
                     </div>
                     <p>Remember that FOR clauses may not be used in an embedded SQL SELECT statement. Therefore, to retrieve data into a pointer to an array of structs, an explicit cursor and FETCH statement must be used with the FOR clause.</p>
                  </div>
               </div><a id="LNPCC3473"></a><div class="props_rev_3"><a id="GUID-18500D5D-0FEE-4739-8F3A-53DAF23B80F1" name="GUID-18500D5D-0FEE-4739-8F3A-53DAF23B80F1"></a><h4 id="LNPCC-GUID-18500D5D-0FEE-4739-8F3A-53DAF23B80F1" class="sect4"><span class="enumeration_section">8.10.6 </span>Examples
                  </h4>
                  <div>
                     <p>The following examples demonstrate different uses of the array of structs functionality in Pro*C/C++.</p>
                  </div><a id="LNPCC3474"></a><div class="props_rev_3"><a id="GUID-55129E5B-5D92-43DB-8ED6-380F6A5049AF" name="GUID-55129E5B-5D92-43DB-8ED6-380F6A5049AF"></a><h5 id="LNPCC-GUID-55129E5B-5D92-43DB-8ED6-380F6A5049AF" class="sect5"><span class="enumeration_section">8.10.6.1 </span>Example 1: A Simple Array of Structs of Scalars
                     </h5>
                     <div>
                        <div class="section">
                           <p>Given the following structure declaration,</p><pre class="oac_no_warn" dir="ltr">struct department {
   int deptno;
   char dname[15];
   char loc[14];
} my_dept[4];
</pre><p>a user could then select the <code class="codeph">dept</code> data into <code class="codeph">my_dept</code> as follows:
                           </p><pre class="oac_no_warn" dir="ltr">exec sql select * into :my_dept from dept;
</pre><p>or the user could populate <code class="codeph">my_dept</code> first and then bulk insert it into the <code class="codeph">dept</code> table:
                           </p><pre class="oac_no_warn" dir="ltr">exec sql insert into dept values (:my_dept);</pre><p>To use an indicator variable, a parallel indicator array of structs could be declared.</p><pre class="oac_no_warn" dir="ltr">struct deptartment_ind {
   short deptno_ind;
   short dname_ind;
   short loc_ind;
} my_dept_ind[4];
</pre><p>Data is then be selected using the same query except for the addition of the indicator variable:</p><pre class="oac_no_warn" dir="ltr">exec sql select * into :my_dept indicator :my_dept_ind from dept;
</pre><p>Similarly, the indicator could be used when inserting the data as well:</p><pre class="oac_no_warn" dir="ltr">exec sql insert into dept values (:my_dept indicator :my_dept_ind);</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC3475"></a><div class="props_rev_3"><a id="GUID-43E99F57-5FC9-4CB1-966A-1235F6BCC9D9" name="GUID-43E99F57-5FC9-4CB1-966A-1235F6BCC9D9"></a><h5 id="LNPCC-GUID-43E99F57-5FC9-4CB1-966A-1235F6BCC9D9" class="sect5"><span class="enumeration_section">8.10.6.2 </span>Example 2: Using Mixed Scalar Arrays with An Array of Structs
                     </h5>
                     <div>
                        <div class="section">
                           <p>As in prior releases of Pro*C/C++, when using multiple arrays for bulk handling of user data, the size of the arrays must be the same. If they are not, the smallest array size is chosen leaving the remaining portions of the arrays unaffected.</p>
                           <p>Given the following declarations,</p><pre class="oac_no_warn" dir="ltr">struct employee {
   int empno;
   char ename[11];
} emp[14];

float sal[14];
float comm[14];
</pre><p>it is possible to select multiple rows for all columns in one simple query:</p><pre class="oac_no_warn" dir="ltr">exec sql select empno, ename, sal, comm into :emp, :sal, :comm from emp;
</pre><p>We also want to know whether the column values for the commissions are NULL or not. A single indicator array could be used given the following declaration:</p><pre class="oac_no_warn" dir="ltr">short comm_ind[14];
...
exec sql select empno, ename, sal, comm
   into :emp, :sal, :comm indicator :comm_ind from emp;
</pre><p>You cannot declare a single indicator array of structs that encapsulate all indicator information from the query. Therefore:</p><pre class="oac_no_warn" dir="ltr">struct employee_ind {   /* example of illegal usage */
   short empno_ind;
   short ename_ind;
   short sal_ind;
   short comm_ind;
} illegal_ind[15];

exec sql select empno, ename, sal, comm
   into :emp, :sal, :comm indicator :illegal_ind from emp;
</pre><p>is illegal (as well as undesirable). The earlier statement associates the indicator array with the <code class="codeph">comm</code> column only, not the entire SELECT...INTO list.
                           </p>
                           <p>Assuming the array of structs and the <code class="codeph">sal</code>, <code class="codeph">comm</code> and <code class="codeph">comm_ind</code> arrays were populated with the desired data, insertion is straightforward:
                           </p><pre class="oac_no_warn" dir="ltr">exec sql insert into emp (empno, ename, sal, comm)
   values (:emp, :sal, :comm indicator :comm_ind);</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC3476"></a><div class="props_rev_3"><a id="GUID-84333DFB-2B03-4309-A7AD-FEE1CA9D0C99" name="GUID-84333DFB-2B03-4309-A7AD-FEE1CA9D0C99"></a><h5 id="LNPCC-GUID-84333DFB-2B03-4309-A7AD-FEE1CA9D0C99" class="sect5"><span class="enumeration_section">8.10.6.3 </span>Example 3: Using Multiple Arrays of Structs with a Cursor
                     </h5>
                     <div>
                        <p>For this example, we make the following declarations:</p><pre class="oac_no_warn" dir="ltr">struct employee {
   int empno;
   char ename[11];
   char job[10];
} emp[14];

struct compensation {
   int sal;
   int comm;
} wage[14];

struct compensation_ind {
   short sal_ind;
   short comm_ind;
} wage_ind[14];
</pre><p>Our program could then make use of these arrays of structs as follows:</p><pre class="oac_no_warn" dir="ltr">exec sql declare c cursor for 
   select empno, ename, job, sal, comm from emp;

exec sql open c;

exec sql whenever not found do break;
while(1)
{
  exec sql fetch c into :emp, :wage indicator :wage_ind;
  ... process batch rows returned by the fetch ...
}

printf("%d rows selected.\n", sqlca.sqlerrd[2]);

exec sql close c;</pre></div><a id="LNPCC3477"></a><div class="props_rev_3"><a id="GUID-9151E87D-704E-43E3-9C5D-2916FA41E9F1" name="GUID-9151E87D-704E-43E3-9C5D-2916FA41E9F1"></a><h6 id="LNPCC-GUID-9151E87D-704E-43E3-9C5D-2916FA41E9F1" class="sect6"><span class="enumeration_section">8.10.6.3.1 </span>About Using the FOR clause
                        </h6>
                        <div>
                           <p>Alternatively, we could have used the FOR clause to instruct the fetch on how many rows to retrieve. Recall that the FOR clause is prohibited when using the SELECT statement, but not the INSERT or FETCH statements.</p>
                           <p>We add the following to our original declarations</p><pre class="oac_no_warn" dir="ltr">int limit = 10;</pre><p>and code our example accordingly.</p><pre class="oac_no_warn" dir="ltr">   exec sql for :limit
      fetch c into :emp, :wage indicator :wage_ind;
</pre></div>
                     </div>
                  </div><a id="LNPCC3478"></a><div class="props_rev_3"><a id="GUID-8925E236-45DE-4F20-AF5E-4B8C214DE152" name="GUID-8925E236-45DE-4F20-AF5E-4B8C214DE152"></a><h5 id="LNPCC-GUID-8925E236-45DE-4F20-AF5E-4B8C214DE152" class="sect5"><span class="enumeration_section">8.10.6.4 </span>Example 4: Individual Array and Struct Member Referencing
                     </h5>
                     <div>
                        <p>Prior releases of Pro*C/C++ allowed array references to single structures in an array of structs. The following is therefore legal since the bind expression resolves to a simple struct of scalars.</p><pre class="oac_no_warn" dir="ltr">exec sql select * into :dept[3] from emp;
</pre><p>Users can reference an individual scalar member of a specific struct in an array of structs as the following example shows.</p><pre class="oac_no_warn" dir="ltr">exec sql select dname into :dept[3].dname from dept where ...;
</pre><p>Naturally, this requires that the query be a single row query so only one row is selected into the variable represented by this bind expression.</p>
                     </div>
                  </div><a id="LNPCC3479"></a><div class="props_rev_3"><a id="GUID-AA226E1A-9923-4AF3-9D05-C8FB28A5453E" name="GUID-AA226E1A-9923-4AF3-9D05-C8FB28A5453E"></a><h5 id="LNPCC-GUID-AA226E1A-9923-4AF3-9D05-C8FB28A5453E" class="sect5"><span class="enumeration_section">8.10.6.5 </span>Example 5: Using Indicator Variables, a Special Case
                     </h5>
                     <div>
                        <p>Prior releases of Pro*C/C++ required that an indicator struct have the same number of fields as its associated bind struct. This restriction has been relaxed when using structs in general. By following the previously mentioned guidelines for indicator arrays of structs it is possible to construct the following example.</p><pre class="oac_no_warn" dir="ltr">struct employee {
    float comm;
    float sal;
    int empno;
    char ename[10];
} emp[14];

struct employee_ind {
    short comm;
} emp_ind[14];

exec sql select comm, sal, empno, ename 
   into :emp indicator :emp_ind from emp;
</pre><p>The mapping of indicator variables to bind values is one-to-one. They map in associative sequential order starting with the first field.</p>
                        <p>Be aware, however, that if any of the other fields has a fetched value of NULL and no indicator is provided, the following error is raised:</p><pre class="oac_no_warn" dir="ltr">ORA-1405: fetched column value is NULL
</pre><p>As an example, such is the case if <code class="codeph">sal</code> was nullable because there is no indicator for <code class="codeph">sal</code>.
                        </p>
                        <p>Suppose we change the array of structs as follows,</p><pre class="oac_no_warn" dir="ltr">struct employee {
   int empno;
   char ename[10];
   float sal;
   float comm;
} emp[15];
</pre><p>but still used the same indicator array of structs. </p>
                        <p>Because the indicators map in associative sequential order, the <code class="codeph">comm</code> indicator maps to the <code class="codeph">empno</code> field leaving the <code class="codeph">comm</code> bind variable without an indicator once again leading to the ORA-1405 error.
                        </p>
                        <p>To avoid the ORA-1405 when using indicator structs that have fewer fields than their associative bind variable structs, the nullable attributes should appear first and in sequential order.</p>
                        <p>We could easily change this into a single-row fetch involving multiple columns by using non-array structs and expect it to work as though the indicator struct was declared as follows.</p><pre class="oac_no_warn" dir="ltr">struct employee_ind {
   short comm;
   short sal;
   short empno;
   short ename;
} emp_ind;
</pre><p>Because Pro*C/C++ no longer requires that the indicator struct have the same number of fields as its associated value struct, the earlier example is now legal in Pro*C/C++ whereas previously it was not.</p>
                        <p>Our indicator struct could now look like the following simple struct.</p><pre class="oac_no_warn" dir="ltr">struct employee_ind {
   short comm;
} emp_ind;
</pre><p>Using the non-array <code class="codeph">emp</code> and <code class="codeph">emp_ind</code> structs we are able to perform a single row fetch as follows.
                        </p><pre class="oac_no_warn" dir="ltr">exec sql fetch comm, sal, empno, ename
   into :emp indicator :emp_ind from emp;
</pre><p>Note once again how the <code class="codeph">comm</code> indicator maps to the <code class="codeph">comm</code> bind variable in this case as well.
                        </p>
                     </div>
                  </div><a id="LNPCC3480"></a><div class="props_rev_3"><a id="GUID-3985C508-15E5-4574-A6F1-C06BE2D4BDF5" name="GUID-3985C508-15E5-4574-A6F1-C06BE2D4BDF5"></a><h5 id="LNPCC-GUID-3985C508-15E5-4574-A6F1-C06BE2D4BDF5" class="sect5"><span class="enumeration_section">8.10.6.6 </span>Example 6: Using a Pointer to an Array of Structs
                     </h5>
                     <div>
                        <p>This example demonstrates how to use a pointer to an array of structs. </p>
                        <p>Given the following type declaration:</p><pre class="oac_no_warn" dir="ltr">typedef struct dept {
   int deptno;
   char dname[15];
   char loc[14];
} dept;
</pre><p>we can perform a variety of things, manipulating a pointer to an array of structs of that type. For example, we can pass pointers to arrays of structs to other functions.</p><pre class="oac_no_warn" dir="ltr">void insert_data(d, n)
   dept *d;
   int n;
{
    exec sql for :n insert into dept values (:d);
}

void fetch_data(d, n)
   dept *d;
   int n;
{
   exec sql declare c cursor for select deptno, dname, loc from dept;
   exec sql open c;
   exec sql for :n fetch c into :d;
   exec sql close c;
}
</pre><p>Such functions are invoked by passing the address of the array of structs as these examples indicate.</p><pre class="oac_no_warn" dir="ltr">dept d[4];
dept *dptr = &amp;d[0];
const int n = 4;

fetch_data(dptr, n);
insert_data(d, n); /* We are treating '&amp;d[0]' as being equal to 'd' */
</pre><p>Or we can simply use such pointers to arrays of structs directly in some embedded SQL statement.</p><pre class="oac_no_warn" dir="ltr">exec sql for :n insert into dept values (:dptr);
</pre><p>The most important thing to remember is the use of the FOR clause.</p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3481"></a><div class="props_rev_3"><a id="GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E" name="GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E"></a><h3 id="LNPCC-GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E" class="sect3"><span class="enumeration_section">8.11 </span>About Mimicking CURRENT OF 
               </h3>
               <div>
                  <p>You use the CURRENT OF <span class="italic">cursor</span> clause in a DELETE or UPDATE statement to refer to the latest row FETCHed from the cursor. However, you cannot use CURRENT OF with host arrays. Instead, select the ROWID of each row, then use that value to identify the current row during the update or delete.
                  </p>
                  <p>For example:<a id="d40176e1780" class="indexterm-anchor"></a><a id="d40176e1786" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">char  emp_name[20][10]; 
char  job_title[20][10]; 
char  old_title[20][10]; 
char  row_id[20][19]; 
... 
EXEC SQL DECLARE emp_cursor CURSOR FOR 
SELECT ename, job, rowid FROM emp FOR UPDATE; 
... 
EXEC SQL OPEN emp_cursor; 
EXEC SQL WHENEVER NOT FOUND do break; 
for (;;) 
{ 
    EXEC SQL FETCH emp_cursor 
        INTO :emp_name, :job_title, :row_id; 
    ... 
    EXEC SQL DELETE FROM emp 
        WHERE job = :old_title AND rowid = :row_id; 
    EXEC SQL COMMIT WORK; 
} 
</pre><p></p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="embedded-SQL.html#GUID-CB61E704-AA77-4F5F-BF67-A3E4F58C63C6">The CURRENT OF Clause</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC3484"></a><a id="LNPCC3485"></a><a id="LNPCC3486"></a><a id="LNPCC3482"></a><div class="props_rev_3"><a id="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408" name="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408"></a><h3 id="LNPCC-GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408" class="sect3"><span class="enumeration_section">8.12 </span>About Using Additional Array Insert/Select Syntax
               </h3>
               <div>
                  <p>The Oracle precompiler also supports the DB2 insert and fetch syntax for the host tables. The supported additional array insert and fetch syntax are shown in the following figures, respectively. </p>
                  <div class="figure" id="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408__GUID-0C4CB3AC-E244-4C9C-9433-9DE1F5DE5BB5">
                     <p class="titleinfigure">Figure 8-1 Additional Insert Syntax</p><img src="img/insert2.png" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows" longdesc="img_text/insert2.html"><br><a href="img_text/insert2.html">Description of "Figure 8-1 Additional Insert Syntax"</a></div>
                  <!-- class="figure" -->
                  <div class="figure" id="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408__GUID-2085F504-60BB-4ED4-A488-C94E3329CBE9">
                     <p class="titleinfigure">Figure 8-2 Additional Fetch Syntax</p><img src="img/fetch2.png" alt="Description of Figure 8-2 follows" title="Description of Figure 8-2 follows" longdesc="img_text/fetch2.html"><br><a href="img_text/fetch2.html">Description of "Figure 8-2 Additional Fetch Syntax"</a></div>
                  <!-- class="figure" -->
                  <p>The optional ROWSET and ROWSET STARTING AT clauses are used in the fetch-orientation (FIRST, PRIOR, NEXT, LAST, CURRENT, RELATIVE and ABSOLUTE). Consider the following examples:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>FIRST ROWSET</p>
                     </li>
                     <li>
                        <p>PRIOR ROWSET</p>
                     </li>
                     <li>
                        <p>NEXT ROWSET</p>
                     </li>
                     <li>
                        <p>LAST ROWSET</p>
                     </li>
                     <li>
                        <p>CURRENT ROWSET</p>
                     </li>
                     <li>
                        <p>ROWSET STARTING AT RELATIVEn</p>
                     </li>
                     <li>
                        <p>ROWSET STARTING AT ABSOLUTEn</p>
                     </li>
                  </ul>
                  <p>Examples of the DB2 array insert/fetch syntax and their comparison with the corresponding Oracle precompiler syntax are shown in <a href="host-arrays.html#GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408__BABHDBHI" title="DB2 vs. Oracle Precompiler syntax">Table 8-3</a>:
                  </p>
                  <div class="tblformal" id="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408__BABHDBHI">
                     <p class="titleintable">Table 8-3 DB2 Array Syntax vs. Oracle Precompiler Syntax</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DB2 Array Syntax vs. Oracle Precompiler Syntax" summary="DB2 vs. Oracle Precompiler syntax" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="47%" id="d40176e1869">DB2 Array Syntax</th>
                              <th align="left" valign="bottom" width="53%" id="d40176e1872">Oracle Precompiler Syntax</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d40176e1877" headers="d40176e1869 "><pre class="oac_no_warn" dir="ltr">EXEC SQL
  INSERT INTO dsn8810.act 
  (actno, actkwd, actdesc) 
  VALUES (:hva1, :hva2, :hva3)
  FOR :NUM_ROWS ROWS;</pre></td>
                              <td align="left" valign="top" width="53%" headers="d40176e1877 d40176e1872 "><pre class="oac_no_warn" dir="ltr">EXEC SQL FOR :num_rows
  INSERT INTO dsn8810.act
  (actno, actkwd, actdesc)
  VALUES (:hva1, :hva2, :hva3);</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d40176e1884" headers="d40176e1869 "><pre class="oac_no_warn" dir="ltr">EXEC SQL
  FETCH NEXT ROWSET FROM c1 
  FOR 20 ROWS 
  INTO :hva_empno, :hva_lastname,
       :hva_salary;</pre></td>
                              <td align="left" valign="top" width="53%" headers="d40176e1884 d40176e1872 "><pre class="oac_no_warn" dir="ltr">EXEC SQL
   FOR :twenty
   FETCH c1 
   INTO :hva_empno, :hva_lastname,
        :hva_salary;</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>In DB2 syntax, a row-set positioned cursor should be first declared before retrieving row sets of data. To enable a cursor to fetch row sets, the 'WITH ROWSET POSITIONING' clause has to be used in the DECLARE CURSOR statement, which is not required and relevant in the Oracle precompiler syntax, as shown in the following table.</p>
                  <div class="tblformal" id="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408__GUID-92D03384-5B5C-452F-A456-18FECA776FEC">
                     <table cellpadding="4" cellspacing="0" class="Formal" title summary="table for difference between DB2 and Oracle precompiler syntax" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="43%" id="d40176e1900">DB2 Array Syntax</th>
                              <th align="left" valign="bottom" width="57%" id="d40176e1903">Oracle Precompiler Syntax</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d40176e1908" headers="d40176e1900 "><pre class="oac_no_warn" dir="ltr">EXEC SQL
 DECLARE c1 CURSOR
  WITH ROWSET POSITIONING FOR
  SELECT empno, lastname, salary
      FROM dsn8810.emp;</pre></td>
                              <td align="left" valign="top" width="57%" headers="d40176e1908 d40176e1903 "><pre class="oac_no_warn" dir="ltr">EXEC SQL
   DECLARE c1 CURSOR FOR
   SELECT empno, lastname, salary
        FROM dsn8810.emp;</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>This DB2 array syntax support can be enabled with the precompiler option <code class="codeph">db2_array</code>, whose default option is <code class="codeph">no</code>. The DB2 array syntax support cannot be used together with the Oracle precompiler syntax; only one of the syntax, only on of the syntax, either Oracle precompiler or DB2 syntax, is supported at a time.
                  </p>
                  <div class="example" id="GUID-D71CE5C4-383A-4B6A-994A-2E3C321EA408__GUID-CCF37220-D9B8-406F-A60C-999622BEEABF">
                     <p class="titleinexample">Example 8-1 Inserting and Fetching Rows by Using the DB2 Array Syntax</p>
                     <p>This program inserts INSCNT rows into the EMP table by using the DB2 array insert syntax, and then fetches the inserted rows by using the DB2 array fetch syntax.</p><pre class="oac_no_warn" dir="ltr">/* 
 * db2arrdemo.pc 
 */
 
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sqlda.h&gt;
#include &lt;sqlcpr.h&gt;
#include &lt;sqlca.h&gt;
 
/* Number of rows to be inserted in one shot */
#define INSCNT 100
/* Number of rows to be fetched in one shot */
#define FETCHCNT 20
 
/* Define a host structure
   for inserting data into the table 
   and for fetching data from the table */
struct emprec
{
  int     empno;
  varchar ename[10];
  varchar job[9];
  int mgr;
  char hiredate[10];
  float sal;
  float comm;
  int deptno;
};
typedef struct emprec empdata;
 
/* Function prototypes */
void sql_error(char *);
void insertdata();
void fetchdata();
void printempdata(empdata *);
 
void main()
{
 
  exec sql begin declare section;
    char *uid = "scott/tiger";
  exec sql end declare section;
 
  exec sql whenever sqlerror do sql_error("ORACLE error--\n");
  exec sql connect :uid;
 
  printf("Inserting %d rows into EMP table using DB2 array insert syntax.\n",
         INSCNT);
  insertdata();
  printf("\nFetching data using DB2 array fetch syntax.\n");
  fetchdata();
 
  exec sql rollback work release;
  exit(EXIT_SUCCESS);
}
 
/* Inserting data into the table using DB2 array insert syntax*/
void insertdata() 
{
  int i, cnt;
  char *str;
  empdata emp_in[INSCNT];
 
  /* To store temporary strings */
  str = (char *)malloc (25 * sizeof(char));
 
  /* Fill the array elements to insert */ 
  for (i = 0; i &lt; INSCNT; i++)
  {
    emp_in[i].empno = i+1;
    sprintf(str, "EMP_%03d", i+1);
    strcpy (emp_in[i].ename.arr, str);
    emp_in[i].ename.len = strlen (emp_in[i].ename.arr);
    sprintf(str, "JOB_%03d", i+1);
    strcpy (emp_in[i].job.arr, str);
    emp_in[i].job.len = strlen (emp_in[i].job.arr);
    emp_in[i].mgr = i+1001;
    sprintf(str, "%02d-MAY-06", (i%30)+1);
    strcpy (emp_in[i].hiredate, str);
    emp_in[i].sal = (i+1) * 10;
    emp_in[i].comm = (i+1) * 0.1;
    emp_in[i].deptno = 10;
  }
 
  free (str);
 
  /* Inserting data using DB2 array insert syntax */
  exec sql insert into emp values (:emp_in) FOR :INSCNT rows;
 
  exec sql select count(*) into :cnt from emp where ename like 'EMP_%';
  printf ("Number of rows successfully inserted into emp table: %d\n", cnt);
}
 
/* Fetches data from the table using DB2 array fetch syntax*/
void fetchdata()
{
  empdata emp_out[FETCHCNT];
 
  /* Declares scrollable cursor to fetch data */
  exec sql declare c1 scroll cursor with rowset positioning for
         select empno, ename, job, mgr, hiredate, sal, comm, deptno
         from emp where ename like 'EMP_%' order by empno;
  
  exec sql open c1;
 
  exec sql whenever not found do break;
  while(1)
  {
    /* Fetches data using DB2 array fetch syntax */
    exec sql fetch next rowset from c1 for :FETCHCNT rows into :emp_out;
    printempdata(emp_out);
  }
  exec sql whenever not found do sql_error("ORACLE ERROR");
 
  exec sql close c1;
}
 
/* Prints the fetched employee data */
void printempdata(empdata *emp_out)
{
  int i;
  for (i=0; i&lt;FETCHCNT; i++)
  {
    emp_out[i].ename.arr[emp_out[i].ename.len] = '\0';
    emp_out[i].job.arr[emp_out[i].job.len] = '\0';
    printf("Empno=%d, Ename=%s, Job=%s, Mgr=%d, Hiredate=%s, Sal=%6.2f,\n"
           "Comm=%5.2f, Deptno=%d\n", emp_out[i].empno, emp_out[i].ename.arr,
 emp_out[i].job.arr, emp_out[i].mgr, emp_out[i].hiredate,
 emp_out[i].sal, emp_out[i].comm, emp_out[i].deptno);
  }
}
 
/* Error handling function. */
void sql_error(char *msg)
{
  exec sql whenever sqlerror continue;
 
  printf("\n%s\n", msg);
  printf("%.70s\n", sqlca.sqlerrm.sqlerrmc); 
  exec sql rollback release;
 
  exit(EXIT_FAILURE);
}</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNPCC3488"></a><a id="LNPCC3487"></a><div class="props_rev_3"><a id="GUID-DBC05FB2-D78C-4FF2-83F8-9D382F0F3786" name="GUID-DBC05FB2-D78C-4FF2-83F8-9D382F0F3786"></a><h3 id="LNPCC-GUID-DBC05FB2-D78C-4FF2-83F8-9D382F0F3786" class="sect3"><span class="enumeration_section">8.13 </span>About Using Implicit Buffered Insert
               </h3>
               <div>
                  <p>For improved performance, Pro*C/C++ application developers can reference host arrays in their embedded SQL statements.  This provides a means to execute an array of SQL statements with a single round-trip to the database.  Despite the significant performance improvements afforded by array execution, some developers choose not to use this capability because it is not ANSI standard.  For example, an application written to exploit array execution in Oracle cannot be precompiled using IBM's precompiler.</p>
                  <p>One workaround is to use buffered INSERT statements, which enable you to gain performance benefits while retaining ANSI standard embedded SQL syntax.</p>
                  <p>The command line option "max_row_insert" controls the number of rows to be buffered before executing the INSERT statement. By default it is zero and the feature is disabled. To enable this feature, specify any number greater than zero.</p>
                  <p>If insert bufering is enabled, precompiler runtime will flag the corresponding cursor and:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Allocate or re-allocate extra memory to hold bind values (first execute only).</p>
                     </li>
                     <li>
                        <p>Copy bind values from program host variables to internal runtime bind structures.</p>
                     </li>
                     <li>
                        <p>Increment the rows buffered count.</p>
                     </li>
                     <li>
                        <p>Flush the buffered INSERT statements if MAX_INSERT_ROWS have been buffered.</p>
                     </li>
                     <li>
                        <p>If MAX_INSERT_ROWS has not been hit, then return after copying the values to the internal bind buffers without flushing.</p>
                     </li>
                  </ul>
                  <p>If a new embedded SQL statement is executed and results in a flush of the buffered insert statements:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Flush the buffers.</p>
                     </li>
                     <li>
                        <p>Continue with the call that prompted the flush.</p>
                     </li>
                  </ul>
                  <p>The application is informed of the error through the standard precompiler error mechanisms such as the sqlca in Pro*C.</p>
                  <p>The "implicit_svpt" option controls whether an implicit savepoint is taken prior to the start of a new batched insert.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If yes, a savepoint is taken prior to the start of a new batch of rows.  If an error occurs on the insert, an implicit "rollback to savepoint" is executed.</p>
                     </li>
                     <li>
                        <p>If no, there is no implicit savepoint taken.  If an error occurs on the buffered insert, then it is reported back to the application, but no rollback is executed. Errors are reported asynchronously for buffer inserts. Errors for inserted rows are not reported when the INSERT statement is executed in the application.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Some errors for inserted rows are reported later, when the first statement other than the INSERT is executed. This may include DELETE, UPDATE, INSERT (into different tables), COMMIT, and ROLLBACK. Any statement that closes the buffered insert statement can report an error. In such cases, the statement that reports the error is not executed. You need to first handle the error and also reexecute the statement on which the buffered insert error is reported. Otherwise, you may rollback the transaction and reexecute it.</p>
                              <p>For example, consider using a COMMIT statement to close a buffered insert loop. COMMIT can report an error because of a duplicate key from an earlier insert. In this scenario, the commit is not executed. You should first handle the error and then reexecute COMMIT. Otherwise, you can rollback the transaction and reexecute it.</p>
                           </li>
                           <li>
                              <p>Some errors are reported on the insert itself, and may reflect an error of a previously inserted row. In such cases, no further inserts are executed. You need to handle the errors of the previously inserted row and continue inserting the current insert, which is a long process. Instead, you may rollback and reexecute the transaction.</p>
                              <p>For example, consider that the limit of internal buffer is 10 rows and the application is inserting 15 rows in a loop. Suppose there is an error on the 8th row.  The error is reported when the 11th row insert happens and the insert is no more executed further.</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p>The following are some of the possible errors that you might face during buffered insert:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>ORA-00001: duplicate key in index</p>
                     </li>
                     <li>
                        <p>ORA-01400: mandatory (not null) column is missing or Null during insert</p>
                     </li>
                     <li>
                        <p>ORA-01401: inserted value too large for column</p>
                     </li>
                     <li>
                        <p>ORA-01438: value larger than specified precision allows for this column</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-DBC05FB2-D78C-4FF2-83F8-9D382F0F3786__GUID-F968B692-F649-4EC6-B492-A813A14BFEBD">
                     <p class="titleinexample">Example 8-2 Inserting Buffered Rows into a Table</p>
                     <p>This program inserts LOOPCNT number of rows into the EMP table. At loop counter=5, this program attempts to insert an invalid empno. Without the max_row_insert option, the program inserts all rows except the invalid row. When the max_row_insert option is set to LOOPCNT, only the first four rows are inserted.</p>
                     <p>Using the max_row_insert option, when the erroneous statement is removed, the program performs the same way an array insert program would.</p><pre class="oac_no_warn" dir="ltr">/* 
 * bufinsdemo.pc 
 */
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sqlda.h&gt;
#include &lt;sqlcpr.h&gt;
#include &lt;sqlca.h&gt;

/* Number of rows to be inserted into the table */
#define LOOPCNT 100

/* Define a host structure
   for inserting data into the table 
   and for fetching data from the table */
struct emprec
{
  int empno;
  varchar ename[10];
  varchar job[9];
  int mgr;
  char hiredate[10];
  float sal;
  float comm;
  int deptno;
};
typedef struct emprec buffinstyp;

/* Function prototypes */
void sql_error();
void insertdata();
void fetchdata();
void printempdata(buffinstyp);

void main()
{

  exec sql begin declare section;
    char *uid = "scott/tiger";
  exec sql end declare section;

  exec sql whenever sqlerror do sql_error();
  exec sql connect :uid;

  printf("\nInserting %d rows into EMP table.\n", LOOPCNT);
  insertdata();
  printf("\nFetching inserted data from EMP table.\n");
  fetchdata();

  exec sql delete from emp where empno &lt; 1000;

  exec sql commit work release;
  exit(EXIT_SUCCESS);
}

/* Inserting data into the table */
void insertdata() 
{
  int i, cnt;
  char *str;
  buffinstyp emp_in;

  /* To store temporary strings */
  str = (char *)malloc (25 * sizeof(char));

  /*
   * When max_row_insert option is set to LOOPCNT and when the errorneous
   * statement is removed, all the rows will be inserted into the database in
   * one stretch and hence maximum performance gain will be achieved.
 */
  for (i = 1; i &lt;= LOOPCNT; i++)
  {
    if (i != 5)
      emp_in.empno = i;
    else
    /* Errorneous statement. In emp table, empno is defined as number(4). */
      emp_in.empno = 10000;

    sprintf(str, "EMP_%03d", i);
    strcpy (emp_in.ename.arr, str);
    emp_in.ename.len = strlen (emp_in.ename.arr);
    sprintf(str, "JOB_%03d", i);
    strcpy (emp_in.job.arr, str);
    emp_in.job.len = strlen (emp_in.job.arr);
    emp_in.mgr = i+1001;
    sprintf(str, "%02d-MAY-06", (i%30));
    strcpy (emp_in.hiredate, str);
    emp_in.sal = (i) * 10;
    emp_in.comm = (i) * 0.1;
    emp_in.deptno = 10;

    exec sql insert into emp values (:emp_in);
  }

  free (str);

  exec sql commit;

  exec sql select count(*) into :cnt from emp where ename like 'EMP_%';
  printf ("Number of rows successfully inserted into emp table: %d\n", cnt);
}

/* Fetches data from the table*/
void fetchdata()
{
  buffinstyp emp_out;

  /* Declares cursor to fetch only the rows that are inserted */
  exec sql declare c1 cursor for
         select empno, ename, job, mgr, hiredate, sal, comm, deptno
         from emp where ename like 'EMP_%' order by empno;
  
  exec sql open c1;

  exec sql whenever not found do break;
  while(1)
  {
    /* Fetches single row at each call */
    exec sql fetch c1 into :emp_out;
    printempdata(emp_out);
  }
  exec sql whenever not found do sql_error();

  exec sql close c1;
}

/* Prints the fetched employee data */
void printempdata(buffinstyp emp_out)
{
  emp_out.ename.arr[emp_out.ename.len] = '\0';
  emp_out.job.arr[emp_out.job.len] = '\0';
  printf("Empno=%d, Ename=%s, Job=%s, Mgr=%d, Hiredate=%s, Sal=%6.2f,\n"
         "Comm=%5.2f, Deptno=%d\n", emp_out.empno, emp_out.ename.arr,
 emp_out.job.arr, emp_out.mgr, emp_out.hiredate, emp_out.sal,
 emp_out.comm, emp_out.deptno);
}

/* Error handling function. */
void sql_error()
{
   printf("Error %s\n", sqlca.sqlerrm.sqlerrmc);
   printf(" Rows Processed: %d\n", sqlca.sqlerrd[2]);
   printf(" Rows Rolled Back: %d\n", sqlca.sqlerrd[0]);
}</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNPCC3489"></a><div class="props_rev_3"><a id="GUID-A1C3ABC6-1446-4D0A-A4A7-045CDC6DAEF5" name="GUID-A1C3ABC6-1446-4D0A-A4A7-045CDC6DAEF5"></a><h3 id="LNPCC-GUID-A1C3ABC6-1446-4D0A-A4A7-045CDC6DAEF5" class="sect3"><span class="enumeration_section">8.14 </span>Scrollable Cursors
               </h3>
               <div>
                  <p>A scrollable cursor is a work area where Oracle executes SQL statements and stores information that is processed during execution.When a cursor is executed, the results of the query are placed into a a set of rows called the result set. The result set can be fetched either sequentially or non-sequentially. Non-sequential result sets are called scrollable cursors. A scrollable cursor enables users to access the rows of a database result set in a forward, backward, and random manner. This enables the program to fetch any row in the result set.</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='04994.embedded-PL-SQL.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Embedded PL/SQL</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96467-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="embedded-SQL.html" title="Previous" type="text/html">
      <link rel="next" href="host-arrays.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNPCC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="embedded-SQL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="host-arrays.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-and-concepts.html" property="item" typeof="WebPage"><span property="name"> Introduction and Concepts </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">		Embedded PL/SQL</li>
            </ol>
            <a id="GUID-BCE83EB3-88D8-4EA1-853F-D5B66D426654" name="GUID-BCE83EB3-88D8-4EA1-853F-D5B66D426654"></a><a id="LNPCC3397"></a>
            
            <h2 id="LNPCC-GUID-BCE83EB3-88D8-4EA1-853F-D5B66D426654" class="sect2"><span class="enumeration_chapter">7 </span>		Embedded PL/SQL
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter shows you how to improve performance by embedding PL/SQL transaction processing blocks in your program. This chapter contains the following topics: </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-F181104F-663F-4D4E-9BB8-9F0E9B93C82A">Advantages of PL/SQL </a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-5BEE764D-014F-4677-AB9B-78A2DDCB39FB">Embedded PL/SQL Blocks </a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-5E215CB6-82C4-4BA5-8D12-636BE005227E">Host Variables</a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-BC7145CA-5296-4287-B7E4-0D2A52CE2B70">Indicator Variables </a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2">Host Arrays</a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-117968E7-E597-4448-AC5D-581BF1361E2C">Cursor Usage in Embedded PL/SQL</a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-65965251-9158-442D-A69B-D52A33B35E22">Stored PL/SQL and Java Subprograms </a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-2191B843-36C4-4936-B0F5-97AB0AB8CDEA">External Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="embedded-PL-SQL.html#GUID-A147B827-C733-47AD-944F-BEA87FC7CAD3">About Using Dynamic SQL </a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="embedded-PL-SQL.html#GUID-BCE83EB3-88D8-4EA1-853F-D5B66D426654">Embedded PL/SQL</a></li>
                  </ul>
               </div>
            </div>
            <a id="LNPCC3398"></a><div class="props_rev_3"><a id="GUID-F181104F-663F-4D4E-9BB8-9F0E9B93C82A" name="GUID-F181104F-663F-4D4E-9BB8-9F0E9B93C82A"></a><h3 id="LNPCC-GUID-F181104F-663F-4D4E-9BB8-9F0E9B93C82A" class="sect3"><span class="enumeration_section">7.1 </span>Advantages of PL/SQL 
               </h3>
               <div>
                  <p>This section looks at some of the features and benefits offered by PL/SQL, such as:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-06339EB1-7966-4F9D-8593-4DD7F53D2BDB">Better Performance </a></p>
                     </li>
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-02AD4583-9307-4B4B-B67E-385274CD5A1B">Integration with Oracle </a></p>
                     </li>
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-B5D728FA-C238-4F28-AF1C-06920ED39036">Cursor FOR Loops </a></p>
                     </li>
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-CE9D6002-9C8D-430F-A518-54C7C3DAD322">Procedures and Functions </a></p>
                     </li>
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-D5C9AB9A-C065-4B82-AD99-E29908B93170">Packages </a></p>
                     </li>
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-00730E73-71A2-4FB0-960E-97C2FADF9C20">PL/SQL Tables </a></p>
                     </li>
                     <li>
                        <p><a href="embedded-PL-SQL.html#GUID-C2B7D923-800B-4361-88DC-06FA50488F85">User-Defined Records </a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../lnpls/index.html" target="_blank"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="LNPCC3399"></a><div class="props_rev_3"><a id="GUID-06339EB1-7966-4F9D-8593-4DD7F53D2BDB" name="GUID-06339EB1-7966-4F9D-8593-4DD7F53D2BDB"></a><h4 id="LNPCC-GUID-06339EB1-7966-4F9D-8593-4DD7F53D2BDB" class="sect4"><span class="enumeration_section">7.1.1 </span>Better Performance 
                  </h4>
                  <div>
                     <p>PL/SQL can help you reduce overhead, improve performance, and increase productivity. For example, without PL/SQL, Oracle must process SQL statements one at a time. Each SQL statement results in another call to the Server and higher overhead. However, with PL/SQL, you can send an entire block of SQL statements to the Server. This minimizes communication between your application and Oracle.<a id="d33328e129" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC3400"></a><div class="props_rev_3"><a id="GUID-02AD4583-9307-4B4B-B67E-385274CD5A1B" name="GUID-02AD4583-9307-4B4B-B67E-385274CD5A1B"></a><h4 id="LNPCC-GUID-02AD4583-9307-4B4B-B67E-385274CD5A1B" class="sect4"><span class="enumeration_section">7.1.2 </span>Integration with Oracle 
                  </h4>
                  <div>
                     <p>PL/SQL is tightly integrated with the Oracle Server. For example, most PL/SQL datatypes are native to the Oracle data dictionary. Furthermore, you can use the %TYPE attribute to base variable declarations on column definitions stored in the data dictionary, as the following example shows:<a id="d33328e146" class="indexterm-anchor"></a><a id="d33328e150" class="indexterm-anchor"></a><a id="d33328e154" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">job_title  emp.job%TYPE; 
</pre><p>That way, you need not know the exact datatype of the column. Furthermore, if a column definition changes, the variable declaration changes accordingly and automatically. This provides data independence, reduces maintenance costs, and allows programs to adapt as the database changes. </p>
                  </div>
               </div><a id="LNPCC3401"></a><div class="props_rev_3"><a id="GUID-B5D728FA-C238-4F28-AF1C-06920ED39036" name="GUID-B5D728FA-C238-4F28-AF1C-06920ED39036"></a><h4 id="LNPCC-GUID-B5D728FA-C238-4F28-AF1C-06920ED39036" class="sect4"><span class="enumeration_section">7.1.3 </span>Cursor FOR Loops 
                  </h4>
                  <div>
                     <p>With PL/SQL, you need not use the DECLARE, OPEN, FETCH, and CLOSE statements to define and manipulate a cursor. Instead, you can use a cursor FOR loop, which implicitly declares its loop index as a record, opens the cursor associated with a given query, repeatedly fetches data from the cursor into the record, then closes the cursor. An example follows:<a id="d33328e174" class="indexterm-anchor"></a><a id="d33328e178" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE 
... 
BEGIN 
   FOR emprec IN (SELECT empno, sal, comm FROM emp) LOOP 
   IF emprec.comm / emprec.sal &gt; 0.25 THEN ... 
   ... 
END LOOP; 
END; 
</pre><p>Notice that you use dot notation to reference components in the record. </p>
                  </div>
               </div><a id="LNPCC3402"></a><div class="props_rev_3"><a id="GUID-CE9D6002-9C8D-430F-A518-54C7C3DAD322" name="GUID-CE9D6002-9C8D-430F-A518-54C7C3DAD322"></a><h4 id="LNPCC-GUID-CE9D6002-9C8D-430F-A518-54C7C3DAD322" class="sect4"><span class="enumeration_section">7.1.4 </span>Procedures and Functions 
                  </h4>
                  <div>
                     <p>PL/SQL has two types of subprograms called <span class="italic">procedures</span> and <span class="italic">functions</span>, which aid application development by letting you isolate operations. Generally, you use a procedure to perform an action and a function to compute a value.<a id="d33328e204" class="indexterm-anchor"></a><a id="d33328e208" class="indexterm-anchor"></a> 
                     </p>
                     <p>Procedures and functions provide <span class="italic">extensibility</span>. That is, they let you tailor the PL/SQL language to suit your needs. For example, if you need a procedure that creates a new department, just write your own as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">PROCEDURE create_dept 
  (new_dname  IN CHAR(14), 
   new_loc    IN CHAR(13), 
   new_deptno OUT NUMBER(2)) IS 
BEGIN 
   SELECT deptno_seq.NEXTVAL INTO new_deptno FROM dual; 
   INSERT INTO dept VALUES (new_deptno, new_dname, new_loc); 
END create_dept; 
</pre><p>When called, this procedure accepts a new department name and location, selects the next value in a department-number database sequence, inserts the new number, name, and location into the <span class="italic">dept</span> table, then returns the new number to the caller. 
                     </p>
                     <p>You use <span class="italic">parameter modes</span> to define the behavior of formal parameters. There are three parameter modes: IN (the default), OUT, and IN OUT. An IN parameter lets you pass values to the subprogram being called. An OUT parameter lets you return values to the caller of a subprogram. An IN OUT parameter lets you pass initial values to the subprogram being called and return updated values to the caller.<a id="d33328e230" class="indexterm-anchor"></a><a id="d33328e232" class="indexterm-anchor"></a><a id="d33328e234" class="indexterm-anchor"></a><a id="d33328e236" class="indexterm-anchor"></a><a id="d33328e238" class="indexterm-anchor"></a> 
                     </p>
                     <p>The datatype of each actual parameter must be convertible to the datatype of its corresponding formal parameter. <a href="embedded-PL-SQL.html#GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2__CHDDCCFE" title="Legal Datatype Conversions">Table 7-1</a> shows the legal conversions between datatypes. 
                     </p>
                  </div>
               </div><a id="LNPCC3403"></a><div class="props_rev_3"><a id="GUID-D5C9AB9A-C065-4B82-AD99-E29908B93170" name="GUID-D5C9AB9A-C065-4B82-AD99-E29908B93170"></a><h4 id="LNPCC-GUID-D5C9AB9A-C065-4B82-AD99-E29908B93170" class="sect4"><span class="enumeration_section">7.1.5 </span>Packages 
                  </h4>
                  <div>
                     <p>PL/SQL lets you bundle logically related types, program objects, and subprograms into a <span class="italic">package</span>. With the Procedural Database Extension, packages can be compiled and stored in an Oracle database, where their contents can be shared by many applications.<a id="d33328e263" class="indexterm-anchor"></a><a id="d33328e267" class="indexterm-anchor"></a><a id="d33328e271" class="indexterm-anchor"></a> 
                     </p>
                     <p>Packages usually have two parts: a specification and a body. The <span class="italic">specification</span> is the interface to your applications; it declares the types, constants, variables, exceptions, cursors, and subprograms available for use. The <span class="italic">body</span> defines cursors and subprograms; it implements the specification. In the following example, you "package" two employment procedures: 
                     </p><pre class="oac_no_warn" dir="ltr">PACKAGE emp_actions IS  -- package specification 
  PROCEDURE hire_employee (empno NUMBER, ename CHAR, ...); 
 
  PROCEDURE fire_employee (emp_id NUMBER); 
END emp_actions; 
 
PACKAGE BODY emp_actions IS  -- package body 
  PROCEDURE hire_employee (empno NUMBER, ename CHAR, ...) IS 
  BEGIN 
    INSERT INTO emp VALUES (empno, ename, ...); 
  END hire_employee; 
 
  PROCEDURE fire_employee (emp_id NUMBER) IS 
  BEGIN 
    DELETE FROM emp WHERE empno = emp_id; 
  END fire_employee; 
END emp_actions; 
</pre><p>Only the declarations in the package specification are visible and accessible to applications. Implementation details in the package body are hidden and inaccessible. </p>
                  </div>
               </div><a id="LNPCC3404"></a><div class="props_rev_3"><a id="GUID-00730E73-71A2-4FB0-960E-97C2FADF9C20" name="GUID-00730E73-71A2-4FB0-960E-97C2FADF9C20"></a><h4 id="LNPCC-GUID-00730E73-71A2-4FB0-960E-97C2FADF9C20" class="sect4"><span class="enumeration_section">7.1.6 </span>PL/SQL Tables 
                  </h4>
                  <div>
                     <p>PL/SQL provides a composite datatype named TABLE. Objects of type TABLE are called <span class="italic">PL/SQL tables</span>, which are modeled as (but not the same as) database tables. PL/SQL tables have only one column and use a primary key to give you array-like access to rows. The column can belong to any scalar type (such as CHAR, DATE, or NUMBER), but the primary key must belong to type BINARY_INTEGER, PLS_INTEGER or VARCHAR2.<a id="d33328e300" class="indexterm-anchor"></a><a id="d33328e304" class="indexterm-anchor"></a></p>
                     <p>You can declare PL/SQL table types in the declarative part of any block, procedure, function, or package. In the following example, you declare a TABLE type called <span class="italic">NumTabTyp</span>: 
                     </p><pre class="oac_no_warn" dir="ltr">... 
DECLARE 
   TYPE NumTabTyp IS TABLE OF NUMBER 
      INDEX BY BINARY_INTEGER; 
... 
BEGIN 
   ... 
END; 
... 
</pre><p>Once you define type <span class="italic">NumTabTyp</span>, you can declare PL/SQL tables of that type, as the next example shows: 
                     </p><pre class="oac_no_warn" dir="ltr">num_tab  NumTabTyp; 
</pre><p>The identifier <span class="italic">num_tab</span> represents an entire PL/SQL table. 
                     </p>
                     <p>You reference rows in a PL/SQL table using array-like syntax to specify the primary key value. For example, you reference the ninth row in the PL/SQL table named <span class="italic">num_tab</span> as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">num_tab(9) ... </pre></div>
               </div><a id="LNPCC3405"></a><div class="props_rev_3"><a id="GUID-C2B7D923-800B-4361-88DC-06FA50488F85" name="GUID-C2B7D923-800B-4361-88DC-06FA50488F85"></a><h4 id="LNPCC-GUID-C2B7D923-800B-4361-88DC-06FA50488F85" class="sect4"><span class="enumeration_section">7.1.7 </span>User-Defined Records 
                  </h4>
                  <div>
                     <p>You can use the %ROWTYPE attribute to declare a record that represents a row in a table or a row fetched by a cursor. However, you cannot specify the datatypes of components in the record or define components of your own. The composite datatype RECORD lifts those restrictions.<a id="d33328e345" class="indexterm-anchor"></a><a id="d33328e347" class="indexterm-anchor"></a><a id="d33328e349" class="indexterm-anchor"></a><a id="d33328e353" class="indexterm-anchor"></a> 
                     </p>
                     <p>Objects of type RECORD are called <span class="italic">records</span>. Unlike PL/SQL tables, records have uniquely named components, which can belong to different datatypes. For example, suppose you have different kinds of data about an employee such as name, salary, hire date, and so on. This data is dissimilar in type but logically related. A record that contains such components as the name, salary, and hire date of an employee would let you treat the data as a logical unit. 
                     </p>
                     <p>You can declare record types and objects in the declarative part of any block, procedure, function, or package. In the following example, you declare a RECORD type called <span class="italic">DeptRecTyp</span>: 
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE 
TYPE DeptRecTyp IS RECORD 
    (deptno  NUMBER(4) NOT NULL, -- default is NULL allowed 
    dname   CHAR(9), 
    loc     CHAR(14)); 
</pre><p>Notice that the component declarations are like variable declarations. Each component has a unique name and specific datatype. You can add the NOT NULL option to any component declaration and so prevent the assigning of NULLs to that component. </p>
                     <p>Once you define type <span class="italic">DeptRecTyp</span>, you can declare records of that type, as the next example shows: 
                     </p><pre class="oac_no_warn" dir="ltr">dept_rec  DeptRecTyp; 
</pre><p>The identifier <span class="italic">dept_rec</span> represents an entire record. 
                     </p>
                     <p>You use dot notation to reference individual components in a record. For example, you reference the <span class="italic">dname</span> component in the <span class="italic">dept_rec</span> record as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">dept_rec.dname ... </pre></div>
               </div>
            </div><a id="LNPCC3406"></a><div class="props_rev_3"><a id="GUID-5BEE764D-014F-4677-AB9B-78A2DDCB39FB" name="GUID-5BEE764D-014F-4677-AB9B-78A2DDCB39FB"></a><h3 id="LNPCC-GUID-5BEE764D-014F-4677-AB9B-78A2DDCB39FB" class="sect3"><span class="enumeration_section">7.2 </span>Embedded PL/SQL Blocks 
               </h3>
               <div>
                  <p>The Pro*C/C++ Precompiler treats a PL/SQL block like a single embedded SQL statement. So, you can place a PL/SQL block anywhere in a program that you can place a SQL statement.<a id="d33328e406" class="indexterm-anchor"></a><a id="d33328e410" class="indexterm-anchor"></a> 
                  </p>
                  <p>To embed a PL/SQL block in your Pro*C/C++ program, simply bracket the PL/SQL block with the keywords EXEC SQL EXECUTE and END-EXEC as follows: </p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE
DECLARE
... 
BEGIN 
   ... 
END; 
END-EXEC; 
</pre><p>The keyword END-EXEC must be followed by a semicolon.<a id="d33328e421" class="indexterm-anchor"></a> 
                  </p>
                  <p>After writing your program, you precompile the source file in the usual way. </p>
                  <p>When the program contains embedded PL/SQL, you must use the SQLCHECK=SEMANTICS command-line option, since the PL/SQL must be parsed by the Oracle Server. SQLCHECK=SEMANTICS requires the USERID option also, to connect to a server. </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="precompiler-options.html#GUID-1FB02C5F-DCC0-453C-A6AB-246421712F74">About Using the Precompiler Options</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC3407"></a><div class="props_rev_3"><a id="GUID-5E215CB6-82C4-4BA5-8D12-636BE005227E" name="GUID-5E215CB6-82C4-4BA5-8D12-636BE005227E"></a><h3 id="LNPCC-GUID-5E215CB6-82C4-4BA5-8D12-636BE005227E" class="sect3"><span class="enumeration_section">7.3 </span>Host Variables
               </h3>
               <div>
                  <p>Host variables are the key to communication between a host language and a PL/SQL block. Host variables can be shared with PL/SQL, meaning that PL/SQL can set and reference host variables.</p>
                  <p>For example, you can prompt a user for information and use host variables to pass that information to a PL/SQL block. Then, PL/SQL can access the database and use host variables to pass the results back to your host program.<a id="d33328e452" class="indexterm-anchor"></a></p>
                  <p>Inside a PL/SQL block, host variables are treated as global to the entire block and can be used anywhere a PL/SQL variable is allowed. Like host variables in a SQL statement, host variables in a PL/SQL block must be prefixed with a colon. The colon sets host variables apart from PL/SQL variables and database objects.</p>
                  <div class="infoboxnote" id="GUID-5E215CB6-82C4-4BA5-8D12-636BE005227E__GUID-6482F7B7-91A4-419B-86E8-F84FAB0613E3">
                     <p class="notep1">Note:</p>
                     <p>To use VARCHAR, CHARZ, or STRING types as output host variables in PL/SQL blocks, you must initialize the length <span class="italic">before</span> entering the block. Set the length to the declared (maximum) length of the VARCHAR, CHARZ, or STRING.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="datatypes-and-host-variables.html#GUID-44E37B7E-C78E-4F3E-87D5-19152BDCE1B8">Pointer Variables</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC3408"></a><div class="props_rev_3"><a id="GUID-DB613125-638D-4254-9EA1-E81158B6D5DD" name="GUID-DB613125-638D-4254-9EA1-E81158B6D5DD"></a><h4 id="LNPCC-GUID-DB613125-638D-4254-9EA1-E81158B6D5DD" class="sect4"><span class="enumeration_section">7.3.1 </span>Example: Using Host Variables with PL/SQL
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following example illustrates the use of host variables with PL/SQL. The program prompts the user for an employee number, then displays the job title, hire date, and salary of that employee.<a id="d33328e485" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">char username[100], password[20]; 
char job_title[20], hire_date[9], temp[32]; 
int emp_number; 
float salary; 
 
#include &lt;sqlca.h&gt; 
 
printf("Username? \n"); 
gets(username); 
printf("Password? \n"); 
gets(password); 
 
EXEC SQL WHENEVER SQLERROR GOTO sql_error; 
 
EXEC SQL CONNECT :username IDENTIFIED BY :password; 
printf("Connected to Oracle\n"); 
for (;;) 
{
   printf("Employee Number (0 to end)? "); 
   gets(temp);
   emp_number = atoi(temp); 
 
   if (emp_number == 0) 
   { 
      EXEC SQL COMMIT WORK RELEASE; 
      printf("Exiting program\n"); 
      break; 
   } 
/*-------------- begin PL/SQL block -----------------*/ 
   EXEC SQL EXECUTE 
   BEGIN 
      SELECT job, hiredate, sal 
         INTO :job_title, :hire_date, :salary 
         FROM emp 
         WHERE empno = :emp_number; 
   END; 
   END-EXEC; 
/*-------------- end PL/SQL block -----------------*/ 
 
   printf("Number  Job Title  Hire Date  Salary\n"); 
   printf("------------------------------------\n"); 
   printf("%6d  %8.8s  %9.9s  %6.2f\n", 
   emp_number, job_title, hire_date, salary); 
} 
... 
exit(0); 
 
sql_error: 
EXEC SQL WHENEVER SQLERROR CONTINUE; 
EXEC SQL ROLLBACK WORK RELEASE; 
printf("Processing error\n"); 
exit(1); 
</pre><p>Notice that the host variable <span class="italic">emp_number</span> is set before the PL/SQL block is entered, and the host variables <span class="italic">job_title</span>, <span class="italic">hire_date</span>, and <span class="italic">salary</span> are set inside the block. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC3409"></a><div class="props_rev_3"><a id="GUID-46B51FA3-E1B5-4D42-A51D-E50E9DEA4339" name="GUID-46B51FA3-E1B5-4D42-A51D-E50E9DEA4339"></a><h4 id="LNPCC-GUID-46B51FA3-E1B5-4D42-A51D-E50E9DEA4339" class="sect4"><span class="enumeration_section">7.3.2 </span>Complex Example 
                  </h4>
                  <div>
                     <div class="section">
                        <p>In the example later, you prompt the user for a bank account number, transaction type, and transaction amount, then debit or credit the account. If the account does not exist, you raise an exception. When the transaction is complete, you display its status.<a id="d33328e518" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt;
#include &lt;sqlca.h&gt;

char username[20];
char password[20];
char status[80]; 
char temp[32];
int  acct_num; 
double trans_amt; 
void sql_error();



main()
{
   char trans_type;

   strcpy(password, "TIGER");
   strcpy(username, "SCOTT");

   EXEC SQL WHENEVER SQLERROR DO sql_error(); 
   EXEC SQL CONNECT :username IDENTIFIED BY :password; 
   printf("Connected to Oracle\n"); 

   for (;;) 
   { 
      printf("Account Number (0 to end)? "); 
      gets(temp);
      acct_num = atoi(temp); 

      if(acct_num == 0) 
      { 
         EXEC SQL COMMIT WORK RELEASE; 
         printf("Exiting program\n"); 
         break; 
      } 
 
      printf("Transaction Type - D)ebit or C)redit? "); 
      gets(temp);
      trans_type = temp[0];
 
      printf("Transaction Amount? "); 
      gets(temp);
      trans_amt = atof(temp); 

/*----------------- begin PL/SQL block -------------------*/ 
      EXEC SQL EXECUTE 
      DECLARE 
         old_bal      NUMBER(9,2); 
         err_msg      CHAR(70); 
         nonexistent  EXCEPTION; 

      BEGIN 
         :trans_type := UPPER(:trans_type); 
         IF :trans_type = 'C' THEN       -- credit the account 
            UPDATE accts SET bal = bal + :trans_amt 
            WHERE acctid = :acct_num; 
            IF SQL%ROWCOUNT = 0 THEN    -- no rows affected 
               RAISE nonexistent; 
            ELSE 
               :status := 'Credit applied'; 
            END IF; 
         ELSIF :trans_type = 'D' THEN    -- debit the account 
            SELECT bal INTO old_bal FROM accts 
               WHERE acctid = :acct_num; 
            IF old_bal &gt;= :trans_amt THEN   -- enough funds 
               UPDATE accts SET bal = bal - :trans_amt 
                  WHERE acctid = :acct_num; 
               :status := 'Debit applied'; 
            ELSE 
               :status := 'Insufficient funds'; 
            END IF; 
         ELSE 
            :status := 'Invalid type: ' || :trans_type; 
         END IF; 
         COMMIT; 
      EXCEPTION 
         WHEN NO_DATA_FOUND OR nonexistent THEN 
            :status := 'Nonexistent account'; 
         WHEN OTHERS THEN 
            err_msg := SUBSTR(SQLERRM, 1, 70); 
            :status := 'Error: ' || err_msg; 
      END; 
      END-EXEC; 
/*----------------- end PL/SQL block ----------------------- */
 
      printf("\nStatus: %s\n", status); 
   } 
   exit(0); 
}


void
sql_error() 
{ 
    EXEC SQL WHENEVER SQLERROR CONTINUE; 
    EXEC SQL ROLLBACK WORK RELEASE; 
    printf("Processing error\n"); 
    exit(1); 
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC3410"></a><div class="props_rev_3"><a id="GUID-41DF2AB2-FCB7-4C3D-B394-26D09F376697" name="GUID-41DF2AB2-FCB7-4C3D-B394-26D09F376697"></a><h4 id="LNPCC-GUID-41DF2AB2-FCB7-4C3D-B394-26D09F376697" class="sect4"><span class="enumeration_section">7.3.3 </span>VARCHAR Pseudotype 
                  </h4>
                  <div>
                     <p>You can use the VARCHAR datatype to declare variable-length character strings. If the VARCHAR is an input host variable, you must tell Oracle what length to expect. Therefore, set the length component to the actual length of the value stored in the string component. </p>
                     <p>If the VARCHAR is an output host variable, Oracle automatically sets the length component. However, to use a VARCHAR (as well as CHARZ and STRING) output host variable in your PL/SQL block, you must initialize the length component <span class="italic">before</span> entering the block. So, set the length component to the declared (maximum) length of the VARCHAR, as shown here:<a id="d33328e541" class="indexterm-anchor"></a><a id="d33328e545" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">int     emp_number; 
varchar emp_name[10]; 
float   salary; 
... 
emp_name.len = 10;   /* initialize length component */ 
 
EXEC SQL EXECUTE 
  BEGIN 
    SELECT ename, sal INTO :emp_name, :salary 
        FROM emp 
        WHERE empno = :emp_number; 
    ... 
  END; 
END-EXEC; 
... 
</pre></div>
               </div><a id="LNPCC3411"></a><div class="props_rev_3"><a id="GUID-5B101D5D-041A-42BA-8EC7-BDED4155BEA7" name="GUID-5B101D5D-041A-42BA-8EC7-BDED4155BEA7"></a><h4 id="LNPCC-GUID-5B101D5D-041A-42BA-8EC7-BDED4155BEA7" class="sect4"><span class="enumeration_section">7.3.4 </span>Restriction
                  </h4>
                  <div>
                     <p>Do not use C pointer or array syntax in PL/SQL blocks. The PL/SQL compiler does not understand C host-variable expressions and is, therefore, unable to parse them. For example, the following is <span class="italic">invalid</span>:
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE
    BEGIN
        :x[5].name := 'SCOTT';
        ...
    END;
END-EXEC;
</pre><p>To avoid syntax errors, use a place-holder (a temporary variable), to hold the address of the structure field to populate structures as shown in the following <span class="italic">valid</span> example:
                     </p><pre class="oac_no_warn" dir="ltr">name = x[5].name ;
EXEC SQL EXECUTE
    BEGIN
        :name := ...;
        ...
    END;
END-EXEC;</pre></div>
               </div>
            </div><a id="LNPCC3412"></a><div class="props_rev_3"><a id="GUID-BC7145CA-5296-4287-B7E4-0D2A52CE2B70" name="GUID-BC7145CA-5296-4287-B7E4-0D2A52CE2B70"></a><h3 id="LNPCC-GUID-BC7145CA-5296-4287-B7E4-0D2A52CE2B70" class="sect3"><span class="enumeration_section">7.4 </span>Indicator Variables 
               </h3>
               <div>
                  <p>PL/SQL does not need indicator variables because it can manipulate NULLs. For example, within PL/SQL, you can use the IS NULL operator to test for NULLs, as follows:<a id="d33328e585" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">IF variable IS NULL THEN ... 
</pre><p>And, you can use the assignment operator (:=) to assign NULLs, as follows: </p><pre class="oac_no_warn" dir="ltr">variable := NULL; 
</pre><p>However, a host language such as C needs indicator variables because it cannot manipulate NULLs. Embedded PL/SQL meets this need by letting you use indicator variables to </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Accept NULLs input from a host program </p>
                     </li>
                     <li>
                        <p>Output NULLs or truncated values to a host program </p>
                     </li>
                  </ul>
                  <p>When used in a PL/SQL block, indicator variables are subject to the following rules: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You cannot refer to an indicator variable by itself; it must be appended to its associated host variable. </p>
                     </li>
                     <li>
                        <p>If you refer to a host variable with its indicator variable, you must always refer to it that way in the same block. </p>
                     </li>
                  </ul>
                  <p>In the following example, the indicator variable <span class="italic">ind_comm</span> appears with its host variable <span class="italic">commission</span> in the SELECT statement, so it must appear that way in the IF statement: 
                  </p><pre class="oac_no_warn" dir="ltr">... 
EXEC SQL EXECUTE 
BEGIN 
    SELECT ename, comm 
        INTO :emp_name, :commission :ind_comm 
        FROM emp 
        WHERE empno = :emp_number; 
    IF :commission :ind_comm IS NULL THEN ... 
    ... 
END; 
END-EXEC; 
</pre><p>Notice that PL/SQL treats <span class="italic">:commission :ind_comm</span> like any other simple variable. Though you cannot refer directly to an indicator variable inside a PL/SQL block, PL/SQL checks the value of the indicator variable when entering the block and sets the value correctly when exiting the block. 
                  </p>
               </div><a id="LNPCC3413"></a><div class="props_rev_3"><a id="GUID-1A79CE80-DA07-456B-BE0E-435E8FB087AA" name="GUID-1A79CE80-DA07-456B-BE0E-435E8FB087AA"></a><h4 id="LNPCC-GUID-1A79CE80-DA07-456B-BE0E-435E8FB087AA" class="sect4"><span class="enumeration_section">7.4.1 </span>NULLs Handling
                  </h4>
                  <div>
                     <p>When entering a block, if an indicator variable has a value of -1, PL/SQL automatically assigns a NULL to the host variable. When exiting the block, if a host variable is NULL, PL/SQL automatically assigns a value of -1 to the indicator variable. In the next example, if <span class="italic">ind_sal</span> had a value of -1 before the PL/SQL block was entered, the <span class="italic">salary_missing</span> exception is raised. An <span class="italic">exception</span> is a named error condition.<a id="d33328e649" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">... 
EXEC SQL EXECUTE 
BEGIN 
    IF :salary :ind_sal IS NULL THEN 
    RAISE salary_missing; 
END IF; 
... 
END; 
END-EXEC; 
...</pre></div>
               </div><a id="LNPCC3414"></a><div class="props_rev_3"><a id="GUID-67B13CF9-7E1D-4635-8026-BB2A91A792D8" name="GUID-67B13CF9-7E1D-4635-8026-BB2A91A792D8"></a><h4 id="LNPCC-GUID-67B13CF9-7E1D-4635-8026-BB2A91A792D8" class="sect4"><span class="enumeration_section">7.4.2 </span>Truncated Values 
                  </h4>
                  <div>
                     <p>PL/SQL does not raise an exception when a truncated string value is assigned to a host variable. However, if you use an indicator variable, PL/SQL sets it to the original length of the string. In the following example, the host program will be able to tell, by checking the value of <span class="italic">ind_name</span>, if a truncated value was assigned to <span class="italic">emp_name</span>:<a id="d33328e673" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">... 
EXEC SQL EXECUTE 
DECLARE 
... 
new_name  CHAR(10); 
BEGIN 
    ... 
    :emp_name:ind_name := new_name; 
    ... 
END; 
END-EXEC; </pre></div>
               </div>
            </div><a id="LNPCC3416"></a><a id="LNPCC3433"></a><a id="LNPCC3415"></a><div class="props_rev_3"><a id="GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2" name="GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2"></a><h3 id="LNPCC-GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2" class="sect3"><span class="enumeration_section">7.5 </span>Host Arrays
               </h3>
               <div>
                  <p>You can pass input host arrays and indicator arrays to a PL/SQL block. They can be indexed by a PL/SQL variable of type BINARY_INTEGER or PLS_INTEGER; VARCHAR2 key types are not permitted. Normally, the entire host array is passed to PL/SQL, but you can use the ARRAYLEN statement (discussed later) to specify a smaller array dimension. </p>
                  <p>Furthermore, you can use a procedure call to assign all the values in a host array to rows in a PL/SQL table. Given that the array subscript range is <span class="italic">m</span> .. <span class="italic">n</span>, the corresponding PL/SQL table index range is always 1 ..<span class="italic"> n</span> -<span class="italic"> m</span> + 1. For example, if the array subscript range is 5 .. 10, the corresponding PL/SQL table index range is 1 .. (10 - 5 + 1) or 1 .. 6. 
                  </p>
                  <p>In the following example, you pass an array named <span class="italic">salary</span> to a PL/SQL block, which uses the array in a function call. The function is named <span class="italic">median</span> because it finds the middle value in a series of numbers. Its formal parameters include a PL/SQL table named <span class="italic">num_tab</span>. The function call assigns all the values in the actual parameter <span class="italic">salary</span> to rows in the formal parameter <span class="italic">num_tab</span>. 
                  </p><pre class="oac_no_warn" dir="ltr">... 
float salary[100]; 
 
/* populate the host array */ 
 
EXEC SQL EXECUTE 
  DECLARE 
    TYPE NumTabTyp IS TABLE OF REAL 
        INDEX BY BINARY_INTEGER; 
    median_salary  REAL; 
    n  BINARY_INTEGER; 
... 
  FUNCTION median (num_tab NumTabTyp, n INTEGER) 
    RETURN REAL IS 
  BEGIN 
    -- compute median 
  END; 
  BEGIN 
    n := 100; 
    median_salary := median(:salary, n); 
    ... 
  END; 
END-EXEC; 
... 
</pre><div class="infoboxnote" id="GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2__GUID-AE98BE81-D407-4837-ACF5-8087FBB3E840">
                     <p class="notep1">Note:</p>
                     <p>In dynamic SQL Method 4, you cannot bind a host array to a PL/SQL procedure with a parameter of type "table." </p>
                  </div>
                  <p>You can also use a procedure call to assign all row values in a PL/SQL table to corresponding elements in a host array. </p>
                  <p><a href="embedded-PL-SQL.html#GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2__CHDDCCFE" title="Legal Datatype Conversions">Table 7-1</a> shows the legal conversions between row values in a PL/SQL table and elements in a host array. For example, a host array of type LONG is compatible with a PL/SQL table of type VARCHAR2, LONG, RAW, or LONG RAW. Notably, it is not compatible with a PL/SQL table of type CHAR.
                  </p>
                  <div class="tblformal" id="GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2__CHDDCCFE">
                     <p class="titleintable">Table 7-1 Legal Datatype Conversions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Legal Datatype Conversions" summary="Legal Datatype Conversions" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="15%" id="d33328e755">PL/SQL Table-&gt;Host Array</th>
                              <th align="left" valign="bottom" width="10%" id="d33328e762">CHAR</th>
                              <th align="left" valign="bottom" width="10%" id="d33328e766">DATE</th>
                              <th align="left" valign="bottom" width="10%" id="d33328e770">LONG</th>
                              <th align="left" valign="bottom" width="11%" id="d33328e774">LONG RAW</th>
                              <th align="left" valign="bottom" width="11%" id="d33328e778">NUMBER</th>
                              <th align="left" valign="bottom" width="8%" id="d33328e782">RAW</th>
                              <th align="left" valign="bottom" width="11%" id="d33328e786">ROWID</th>
                              <th align="left" valign="bottom" width="13%" id="d33328e790">VARCHAR2</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e796" headers="d33328e755 ">
                                 <p>CHARF</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e796 d33328e762 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e796 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e796 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e796 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e796 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e796 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e796 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e796 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e824" headers="d33328e755 ">
                                 <p>CHARZ</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e824 d33328e762 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e824 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e824 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e824 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e824 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e824 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e824 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e824 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e852" headers="d33328e755 ">
                                 <p>DATE</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e852 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e852 d33328e766 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e852 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e852 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e852 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e852 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e852 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e852 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e880" headers="d33328e755 ">
                                 <p>DECIMAL</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e880 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e880 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e880 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e880 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e880 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e880 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e880 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e880 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e908" headers="d33328e755 ">
                                 <p>DISPLAY</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e908 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e908 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e908 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e908 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e908 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e908 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e908 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e908 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e936" headers="d33328e755 ">
                                 <p>FLOAT</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e936 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e936 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e936 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e936 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e936 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e936 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e936 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e936 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e964" headers="d33328e755 ">
                                 <p>INTEGER</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e964 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e964 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e964 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e964 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e964 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e964 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e964 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e964 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e992" headers="d33328e755 ">
                                 <p>LONG</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e992 d33328e762 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e992 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e992 d33328e770 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e992 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e992 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e992 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e992 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e992 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1020" headers="d33328e755 ">
                                 <p>LONG VARCHAR</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1020 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1020 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1020 d33328e770 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1020 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1020 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1020 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1020 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1020 d33328e790 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1048" headers="d33328e755 ">
                                 <p>LONG VARRAW</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1048 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1048 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1048 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1048 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1048 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1048 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1048 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1048 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1076" headers="d33328e755 ">
                                 <p>NUMBER</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1076 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1076 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1076 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1076 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1076 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1076 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1076 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1076 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1105" headers="d33328e755 ">
                                 <p>RAW</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1105 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1105 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1105 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1105 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1105 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1105 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1105 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1105 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1133" headers="d33328e755 ">
                                 <p>ROWID</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1133 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1133 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1133 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1133 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1133 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1133 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1133 d33328e786 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1133 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1161" headers="d33328e755 ">
                                 <p>STRING</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1161 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1161 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1161 d33328e770 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1161 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1161 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1161 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1161 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1161 d33328e790 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1189" headers="d33328e755 ">
                                 <p>UNSIGNED</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1189 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1189 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1189 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1189 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1189 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1189 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1189 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1189 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1217" headers="d33328e755 ">
                                 <p>VARCHAR</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1217 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1217 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1217 d33328e770 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1217 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1217 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1217 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1217 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1217 d33328e790 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1245" headers="d33328e755 ">
                                 <p>VARCHAR2</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1245 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1245 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1245 d33328e770 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1245 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1245 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1245 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1245 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1245 d33328e790 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1273" headers="d33328e755 ">
                                 <p>VARNUM</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1273 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1273 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1273 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1273 d33328e774 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1273 d33328e778 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1273 d33328e782 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1273 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1273 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d33328e1301" headers="d33328e755 ">
                                 <p>VARRAW</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1301 d33328e762 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1301 d33328e766 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d33328e1301 d33328e770 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1301 d33328e774 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1301 d33328e778 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d33328e1301 d33328e782 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d33328e1301 d33328e786 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d33328e1301 d33328e790 ">
                                 <p>-</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnote" id="GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2__GUID-C4253D89-9342-423A-9969-49A5BAB10AB6">
                     <p class="notep1">Note:</p>
                     <p>The Pro*C/C++ Precompiler does not check your usage of host arrays. For instance, no index range-checking is done.</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="Oracle-dynamic-SQL.html#GUID-AFD0B0E4-4B76-4AA9-AA4D-1027A620634E">Using Method 4</a></li>
                        <li><a href="embedded-PL-SQL.html#GUID-65965251-9158-442D-A69B-D52A33B35E22">Stored PL/SQL and Java Subprograms</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC3417"></a><div class="props_rev_3"><a id="GUID-F20E0407-E9BF-4160-8E75-7CE21CCF5C64" name="GUID-F20E0407-E9BF-4160-8E75-7CE21CCF5C64"></a><h4 id="LNPCC-GUID-F20E0407-E9BF-4160-8E75-7CE21CCF5C64" class="sect4"><span class="enumeration_section">7.5.1 </span>ARRAYLEN Statement 
                  </h4>
                  <div>
                     <p>Suppose you must pass an input host array to a PL/SQL block for processing. By default, when binding such a host array, the Pro*C/C++ Precompiler uses its declared dimension. However, you might not want to process the entire array. In that case, you can use the ARRAYLEN statement to specify a smaller array dimension. ARRAYLEN associates the host array with a host variable, which stores the smaller dimension. The statement syntax is<a id="d33328e1357" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL ARRAYLEN host_array (dimension) [EXECUTE]; 
</pre><p>where <span class="italic">dimension</span> is a 4-byte integer host variable, <span class="italic">not</span> a literal or expression. 
                     </p>
                     <p>EXECUTE is an optional keyword.</p>
                     <p>The ARRAYLEN statement must appear along with, but somewhere after, the declarations of <span class="italic">host_array</span> and <span class="italic">dimension</span>. You cannot specify an offset into the host array. However, you might be able to use C features for that purpose. The following example uses ARRAYLEN to override the default dimension of a C host array named <span class="italic">bonus</span>: 
                     </p><pre class="oac_no_warn" dir="ltr">float bonus[100]; 
int dimension; 
EXEC SQL ARRAYLEN bonus (dimension); 
/* populate the host array */ 
... 
dimension = 25;  /* set smaller array dimension */ 
EXEC SQL EXECUTE 
DECLARE 
    TYPE NumTabTyp IS TABLE OF REAL 
    INDEX BY BINARY_INTEGER; 
    median_bonus  REAL; 
    FUNCTION median (num_tab NumTabTyp, n INTEGER) 
        RETURN REAL IS 
  BEGIN 
    -- compute median 
  END; 
  BEGIN 
    median_bonus := median(:bonus, :dimension); 
    ... 
  END; 
END-EXEC; 
</pre><p>Only 25 array elements are passed to the PL/SQL block because ARRAYLEN reduces the array from 100 to 25 elements. As a result, when the PL/SQL block is sent to Oracle for execution, a much smaller host array is sent along. This saves time and, in a networked environment, reduces network traffic. </p>
                  </div>
               </div><a id="LNPCC3418"></a><div class="props_rev_3"><a id="GUID-71BE5189-C875-4180-8B39-A16887CD27C2" name="GUID-71BE5189-C875-4180-8B39-A16887CD27C2"></a><h4 id="LNPCC-GUID-71BE5189-C875-4180-8B39-A16887CD27C2" class="sect4"><span class="enumeration_section">7.5.2 </span>Optional Keyword EXECUTE
                  </h4>
                  <div>
                     <p>Host arrays used in a dynamic SQL method 2 EXEC SQL EXECUTE statement may have two different interpretations based on the presence or absence of the optional keyword EXECUTE. </p>
                     <p>By default (if the EXECUTE keyword is absent on an ARRAYLEN statement): </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The host array is considered when determining the number of times a   PL/SQL block will be executed. (The minimum array dimension is used.) </p>
                        </li>
                        <li>
                           <p>The host array must not be bound to a PL/SQL index table. </p>
                        </li>
                     </ul>
                     <p> If the keyword EXECUTE is present: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The host array must be bound to an index table. </p>
                        </li>
                        <li>
                           <p>The PL/SQL block will be executed one time. </p>
                        </li>
                        <li>
                           <p>All host variables specified in the EXEC SQL EXECUTE statement must either</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Be specified in an ARRAYLEN ... EXECUTE statement</p>
                              </li>
                              <li>
                                 <p>Be scalar. </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p> For example, given the following PL/SQL procedure: </p><pre class="oac_no_warn" dir="ltr">   CREATE OR REPLACE PACKAGE pkg AS 
          TYPE tab IS TABLE OF NUMBER(5) INDEX BY BINARY_INTEGER; 
          PROCEDURE proc1 (parm1 tab, parm2 NUMBER, parm3 tab); 
   END; 
 </pre><p>The following Pro*C/C++ function demonstrates how host arrays can be used to determine how many times a given PL/SQL block is executed. In this case, the PL/SQL block will be executed 3 times resulting in 3 new rows in the <code class="codeph">emp</code> table. 
                     </p><pre class="oac_no_warn" dir="ltr">func1() 
{ 
  int empno_arr[5] = {1111, 2222, 3333, 4444, 5555}; 
  char *ename_arr[3] = {"MICKEY", "MINNIE", "GOOFY"}; 
  char *stmt1 = "BEGIN INSERT INTO emp(empno, ename) VALUES :b1, :b2; END;"; 
  
  EXEC SQL PREPARE s1 FROM :stmt1; 
  EXEC SQL EXECUTE s1 USING :empno_arr, :ename_arr; 
}  
 </pre><p>The following Pro*C/C++ function demonstrates how to bind a host array to a PL/SQL index table through dynamic method 2. Note the presence of the ARRAYLEN...EXECUTE statement for all host arrays specified in the EXEC SQL EXECUTE statement. </p><pre class="oac_no_warn" dir="ltr">func2() 
{ 
  int ii = 2; 
  int int_tab[3] = {1,2,3}; 
  int dim = 3; 
  EXEC SQL ARRAYLEN int_tab (dim) EXECUTE;  
 
  char *stmt2 = "begin pkg.proc1(:v1, :v2, :v3); end; "; 
 
  EXEC SQL PREPARE s2 FROM :stmt2; 
  EXEC SQL EXECUTE s2 USING :int_tab, :ii, :int_tab;  
} 
 </pre><p>However the following Pro*C/C++ function will result in a precompile-time warning because there is no ARRAYLEN...EXECUTE statement for <code class="codeph">int_arr</code>. 
                     </p><pre class="oac_no_warn" dir="ltr">func3() 
{ 
  int int_arr[3]; 
  int int_tab[3] = {1,2,3}; 
  int dim = 3; 
  EXEC SQL ARRAYLEN int_tab (dim) EXECUTE;  
 
  char *stmt3 = "begin pkg.proc1(:v1, :v2, :v3); end; "; 
 
  EXEC SQL PREPARE s3 FROM :stmt3; 
  EXEC SQL EXECUTE s3 USING :int_tab, :int_arr, :int_tab;  
} 
</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="Oracle-dynamic-SQL.html#GUID-7B34257D-1DB8-4D5D-968B-4DA73F0683F2">Using Method 2</a></li>
                           <li><a href="host-arrays.html#GUID-6B57FBAE-0303-41B9-9056-5C20384442B7">Host Arrays</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="LNPCC3419"></a><div class="props_rev_3"><a id="GUID-117968E7-E597-4448-AC5D-581BF1361E2C" name="GUID-117968E7-E597-4448-AC5D-581BF1361E2C"></a><h3 id="LNPCC-GUID-117968E7-E597-4448-AC5D-581BF1361E2C" class="sect3"><span class="enumeration_section">7.6 </span>Cursor Usage in Embedded PL/SQL
               </h3>
               <div>
                  <p>The maximum number of cursors your program can use simultaneously is determined by the database initialization parameter OPEN_CURSORS. While executing an embedded PL/SQL block, one cursor. the parent cursor, is associated with the entire block and one cursor, the child cursor, is associated with each SQL statement in the embedded PL/SQL block. Both parent and child cursors count toward the <code class="codeph">OPEN_CURSORS</code> limit. 
                  </p>
                  <p>The following calculation shows how to determine the maximum number of cursors used. The sum of the cursors used must not exceed <code class="codeph">OPEN_CURSORS</code>.
                  </p><pre class="oac_no_warn" dir="ltr">   SQL statement cursors
   PL/SQL parent cursors
   PL/SQL child cursors
+  6 cursors for overhead
--------------------------
   Sum of cursors in use
</pre><p>If your program exceeds the limit imposed by <code class="codeph">OPEN_CURSORS</code>, Oracle gives you an error.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="performance-tuning.html#GUID-989DD868-1723-48B9-B153-0233ED8BA776">Embedded PL/SQL Considerations</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC3420"></a><div class="props_rev_3"><a id="GUID-65965251-9158-442D-A69B-D52A33B35E22" name="GUID-65965251-9158-442D-A69B-D52A33B35E22"></a><h3 id="LNPCC-GUID-65965251-9158-442D-A69B-D52A33B35E22" class="sect3"><span class="enumeration_section">7.7 </span>Stored PL/SQL and Java Subprograms 
               </h3>
               <div>
                  <p>Unlike anonymous blocks, PL/SQL subprograms (procedures and functions) and Java methods can be compiled separately, stored in an Oracle database, and invoked.</p>
                  <p>A subprogram explicitly created using an Oracle tool such as SQL*Plus is called a <span class="italic">stored</span> subprogram. Once compiled and stored in the data dictionary, it is a database object, which can be re-executed without being recompiled.<a id="d33328e1520" class="indexterm-anchor"></a></p>
                  <p>When a subprogram within a PL/SQL block or stored procedure is sent to Oracle by your application, it is called an <span class="italic">inline</span> subprogram. Oracle compiles the inline subprogram and caches it in the System Global Area (SGA) but does not store the source or object code in the data dictionary.<a id="d33328e1529" class="indexterm-anchor"></a></p>
                  <p>Subprograms defined within a package are considered part of the package, and thus are called <span class="italic">packaged</span> subprograms. Stored subprograms not defined within a package are called <span class="italic">standalone </span>subprograms.<a id="d33328e1539" class="indexterm-anchor"></a> 
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../jjdev/Java-applications-in-database.html#JJDEV-GUID-E7EEC053-2CAC-4A5D-8C90-EBFD047D32F7" target="_blank"><span class="italic">Java Applications on Oracle Database</span></a></li>
                     </ul>
                  </div>
               </div><a id="LNPCC3421"></a><div class="props_rev_3"><a id="GUID-90FFC7F7-C299-48BF-BFB1-A7850F46D486" name="GUID-90FFC7F7-C299-48BF-BFB1-A7850F46D486"></a><h4 id="LNPCC-GUID-90FFC7F7-C299-48BF-BFB1-A7850F46D486" class="sect4"><span class="enumeration_section">7.7.1 </span>About Creating Stored Subprograms 
                  </h4>
                  <div>
                     <p>You can embed the SQL statements CREATE FUNCTION, CREATE PROCEDURE, and CREATE PACKAGE in a host program, as the following example shows:<a id="d33328e1561" class="indexterm-anchor"></a><a id="d33328e1565" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL CREATE 
FUNCTION sal_ok (salary REAL, title CHAR) 
RETURN BOOLEAN AS 
min_sal  REAL; 
max_sal  REAL; 
  BEGIN 
    SELECT losal, hisal INTO min_sal, max_sal 
        FROM sals 
        WHERE job = title; 
    RETURN (salary &gt;= min_sal) AND 
           (salary &lt;= max_sal); 
  END sal_ok; 
END-EXEC; 
</pre><p>Notice that the embedded CREATE {FUNCTION | PROCEDURE | PACKAGE} statement is a hybrid. Like all other embedded CREATE statements, it begins with the keywords EXEC SQL (not EXEC SQL EXECUTE). But, unlike other embedded CREATE statements, it ends with the PL/SQL terminator END-EXEC. </p>
                     <p>In the example later, you create a package that contains a procedure named <span class="italic">get_employees</span>, which fetches a batch of rows from the EMP table. The batch size is determined by the caller of the procedure, which might be another stored subprogram or a client application.
                     </p>
                     <p>The procedure declares three PL/SQL tables as OUT formal parameters, then fetches a batch of employee data into the PL/SQL tables. The matching actual parameters are host arrays. When the procedure finishes, it automatically assigns all row values in the PL/SQL tables to corresponding elements in the host arrays. </p><pre class="oac_no_warn" dir="ltr">EXEC SQL CREATE OR REPLACE PACKAGE emp_actions AS 
    TYPE CharArrayTyp IS TABLE OF VARCHAR2(10) 
        INDEX BY BINARY_INTEGER; 
    TYPE NumArrayTyp IS TABLE OF FLOAT 
        INDEX BY BINARY_INTEGER; 
  PROCEDURE get_employees( 
    dept_number IN     INTEGER, 
    batch_size  IN     INTEGER, 
    found       IN OUT INTEGER, 
    done_fetch  OUT    INTEGER, 
    emp_name    OUT    CharArrayTyp, 
    job_title   OUT    CharArrayTyp, 
    salary      OUT    NumArrayTyp); 
  END emp_actions; 
END-EXEC;
EXEC SQL CREATE OR REPLACE PACKAGE BODY emp_actions AS 
 
    CURSOR get_emp (dept_number IN INTEGER) IS 
        SELECT ename, job, sal FROM emp 
            WHERE deptno = dept_number; 
 
  PROCEDURE get_employees( 
    dept_number IN     INTEGER, 
    batch_size  IN     INTEGER, 
    found       IN OUT INTEGER, 
    done_fetch  OUT    INTEGER, 
    emp_name    OUT    CharArrayTyp, 
    job_title   OUT    CharArrayTyp, 
    salary      OUT    NumArrayTyp) IS 
 
  BEGIN 
    IF NOT get_emp%ISOPEN THEN 
        OPEN get_emp(dept_number); 
    END IF; 
    done_fetch := 0; 
    found := 0; 
    FOR i IN 1..batch_size LOOP 
        FETCH get_emp INTO emp_name(i), 
        job_title(i), salary(i); 
        IF get_emp%NOTFOUND THEN 
            CLOSE get_emp; 
            done_fetch := 1; 
            EXIT; 
        ELSE 
            found := found + 1; 
        END IF; 
    END LOOP; 
  END get_employees; 
END emp_actions; 
END-EXEC; 
</pre><p>You specify the REPLACE clause in the CREATE statement to redefine an existing package without having to drop the package, re-create it, and re-grant privileges on it. For the full syntax of the CREATE statement see <a href="../sqlrf/SQL-Statements-COMMIT-to-CREATE-JAVA.html#SQLRF-GUID-A087EE75-DE65-4AA6-A479-280413DB74C8" target="_blank">SQL Statements: COMMIT to CREATE JAVA</a>. 
                     </p>
                     <p>If an embedded CREATE {FUNCTION | PROCEDURE | PACKAGE} statement fails, Oracle generates a warning, not an error. </p>
                  </div>
               </div><a id="LNPCC3422"></a><div class="props_rev_3"><a id="GUID-F20A70DA-AF53-41CB-82CA-D2DA5B77E4A5" name="GUID-F20A70DA-AF53-41CB-82CA-D2DA5B77E4A5"></a><h4 id="LNPCC-GUID-F20A70DA-AF53-41CB-82CA-D2DA5B77E4A5" class="sect4"><span class="enumeration_section">7.7.2 </span>About Calling a Stored PL/SQL or Java Subprogram
                  </h4>
                  <div>
                     <div class="section">
                        <p>To call a stored subprogram from your host program, you can use either an anonymous PL/SQL block, or the CALL embedded SQL statement.</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCC3423"></a><div class="props_rev_3"><a id="GUID-50FAE0D7-E6EB-48FE-9440-A88FA27E8C34" name="GUID-50FAE0D7-E6EB-48FE-9440-A88FA27E8C34"></a><h5 id="LNPCC-GUID-50FAE0D7-E6EB-48FE-9440-A88FA27E8C34" class="sect5"><span class="enumeration_section">7.7.2.1 </span>Anonymous PL/SQL Block
                     </h5>
                     <div>
                        <p>In the following example, you call a standalone procedure named <span class="italic">raise_salary</span>:<a id="d33328e1617" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE 
  BEGIN 
    raise_salary(:emp_id, :increase); 
  END; 
END-EXEC; 
</pre><p>Notice that stored subprograms can take parameters. In this example, the actual parameters <span class="italic">emp_id</span> and <span class="italic">increase</span> are C host variables. 
                        </p>
                        <p>In the next example, the procedure <span class="italic">raise_salary</span> is stored in a package named <span class="italic">emp_actions</span>, so you must use dot notation to fully qualify the procedure call: 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE 
BEGIN 
    emp_actions.raise_salary(:emp_id, :increase); 
END; 
END-EXEC; 
</pre><p>An actual IN parameter can be a literal, scalar host variable, host array, PL/SQL constant or variable, PL/SQL table, PL/SQL user-defined record, procedure call, or expression. However, an actual OUT parameter cannot be a literal, procedure call, or expression. </p>
                        <p>You must use precompiler option SQLCHECK=SEMANTICS with an embedded PL/SQL block.</p>
                        <p>In the following example, three of the formal parameters are PL/SQL tables, and the corresponding actual parameters are host arrays. The program calls the stored procedure <span class="italic">get_employees</span> repeatedly, displaying each batch of employee data, until no more data is found. This program is available on-line in the <code class="codeph">demo</code> directory, in the file <code class="codeph">sample9.pc</code>. A SQL script to create the CALLDEMO stored package is available in the file <code class="codeph">calldemo.sql</code>.<a id="d33328e1660" class="indexterm-anchor"></a><a id="d33328e1664" class="indexterm-anchor"></a><a id="d33328e1669" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">/*************************************************************
Sample Program 9:  Calling a stored procedure

This program connects to ORACLE using the SCOTT/TIGER
account.  The program declares several host arrays, then
calls a PL/SQL stored procedure (GET_EMPLOYEES in the
CALLDEMO package) that fills the table OUT parameters.  The
PL/SQL procedure returns up to ASIZE values.

Sample9 keeps calling GET_EMPLOYEES, getting ASIZE arrays
each time, and printing the values, until all rows have been
retrieved.  GET_EMPLOYEES sets the done_flag to indicate "no
more data."
*************************************************************/
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

EXEC SQL INCLUDE sqlca.h;


typedef char asciz[20];
typedef char vc2_arr[11];

EXEC SQL BEGIN DECLARE SECTION;
/* User-defined type for null-terminated strings */
EXEC SQL TYPE asciz  IS STRING(20) REFERENCE;

/* User-defined type for a VARCHAR array element. */
EXEC SQL TYPE vc2_arr IS VARCHAR2(11) REFERENCE;

asciz     username;
asciz     password;
int       dept_no;              /* which department to query? */
vc2_arr   emp_name[10];            /* array of returned names */
vc2_arr   job[10];
float     salary[10];
int       done_flag;
int       array_size;
int       num_ret;                 /* number of rows returned */
EXEC SQL END DECLARE SECTION;

long      SQLCODE;



void print_rows();            /* produces program output      */
void sql_error();             /* handles unrecoverable errors */



main()
{
   int   i;
   char  temp_buf[32];

/* Connect to ORACLE. */
   EXEC SQL WHENEVER SQLERROR DO sql_error();
   strcpy(username, "scott");
   strcpy(password, "tiger");
   EXEC SQL CONNECT :username IDENTIFIED BY :password;
   printf("\nConnected to ORACLE as user: %s\n\n", username);
   printf("Enter department number: ");
   gets(temp_buf);
   dept_no = atoi(temp_buf);/* Print column headers. */
   printf("\n\n");
   printf("%-10.10s%-10.10s%s\n", "Employee", "Job", "Salary");
   printf("%-10.10s%-10.10s%s\n", "--------", "---", "------");

/* Set the array size. */
   array_size = 10;

   done_flag = 0;
   num_ret = 0;

/*  Array fetch loop.
 *  The loop continues until the OUT parameter done_flag is set.
 *  Pass in the department number, and the array size--
 *  get names, jobs, and salaries back.
 */
   for (;;)
   {
      EXEC SQL EXECUTE 
         BEGIN calldemo.get_employees
            (:dept_no, :array_size, :num_ret, :done_flag,
             :emp_name, :job, :salary);
         END;
      END-EXEC;

      print_rows(num_ret);

      if (done_flag)
         break;
   }

/* Disconnect from the database. */
   EXEC SQL COMMIT WORK RELEASE;
   exit(0);
}
void
print_rows(n)
int n;
{
   int i;

    if (n == 0)
    {
        printf("No rows retrieved.\n");
        return;
    }

    for (i = 0; i &lt; n; i++)
        printf("%10.10s%10.10s%6.2f\n",
               emp_name[i], job[i], salary[i]);
}

/* Handle errors. Exit on any error. */
void
sql_error()
{
   char msg[512];
   int buf_len, msg_len;


   EXEC SQL WHENEVER SQLERROR CONTINUE;

   buf_len = sizeof(msg);
   sqlglm(msg, &amp;buf_len, &amp;msg_len);

   printf("\nORACLE error detected:");
   printf("\n%.*s \n", msg_len, msg);

   EXEC SQL ROLLBACK WORK RELEASE;
   exit(1);
}
</pre><p>Remember, the datatype of each actual parameter must be convertible to the datatype of its corresponding formal parameter. Also, before a stored procedure is exited, all OUT formal parameters must be assigned values. Otherwise, the values of corresponding actual parameters are indeterminate. </p>
                        <p>SQLCHECK=SEMANTICS is required when using an anonymous PL/SQL block.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="embedded-PL-SQL.html#GUID-90FFC7F7-C299-48BF-BFB1-A7850F46D486">About Creating Stored Subprograms</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="LNPCC3424"></a><div class="props_rev_3"><a id="GUID-563E1A04-F241-4617-AA62-AC3E75377A00" name="GUID-563E1A04-F241-4617-AA62-AC3E75377A00"></a><h5 id="LNPCC-GUID-563E1A04-F241-4617-AA62-AC3E75377A00" class="sect5"><span class="enumeration_section">7.7.2.2 </span>Remote Access 
                     </h5>
                     <div>
                        <p>PL/SQL lets you access remote databases using <span class="italic">database links</span>. Typically, database links are established by your DBA and stored in the Oracle data dictionary. A database link tells Oracle where the remote database is located, the path to it, and what Oracle username and password to use. In the following example, you use the database link <span class="italic">dallas</span> to call the <span class="italic">raise_salary</span> procedure: 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE 
BEGIN 
    raise_salary@dallas(:emp_id, :increase); 
END; 
END-EXEC; 
</pre><p>You can create synonyms to provide location transparency for remote subprograms, as the following example shows: </p><pre class="oac_no_warn" dir="ltr">CREATE PUBLIC SYNONYM raise_salary 
FOR raise_salary@dallas; </pre></div>
                  </div><a id="LNPCC3425"></a><div class="props_rev_3"><a id="GUID-034F0DCE-9061-4DAA-9941-6E2E543C0F34" name="GUID-034F0DCE-9061-4DAA-9941-6E2E543C0F34"></a><h5 id="LNPCC-GUID-034F0DCE-9061-4DAA-9941-6E2E543C0F34" class="sect5"><span class="enumeration_section">7.7.2.3 </span>The CALL Statement
                     </h5>
                     <div>
                        <p>The concepts presented earlier for the embedded PL/SQL block also hold true for the CALL statement. The CALL embedded SQL statement has the form:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL 
   CALL [schema.] [package.]stored_proc[@db_link](arg1, ...) 
   [INTO :ret_var [[INDICATOR]:ret_ind]] ;
</pre><p>where</p>
                        <p>schema</p>
                        <p>the schema containing the procedure</p>
                        <p>package</p>
                        <p>the package containing the procedure</p>
                        <p>stored_proc</p>
                        <p> is the Java or PL/SQL stored procedure to be called</p>
                        <p>db_link</p>
                        <p>is the optional remote database link</p>
                        <p>arg1...</p>
                        <p>is the list of arguments (variables, literals, or expressions) passed, </p>
                        <p>ret_var</p>
                        <p> is the optional host variable which receives the result</p>
                        <p>ind_var</p>
                        <p>the optional indicator variable for ret_var. </p>
                        <p>You can use either SQLCHECK=SYNTAX, or SEMANTICS with the CALL statement.</p>
                     </div>
                  </div><a id="LNPCC3426"></a><div class="props_rev_3"><a id="GUID-E828F0DF-6DFF-489D-953C-078654DFECEF" name="GUID-E828F0DF-6DFF-489D-953C-078654DFECEF"></a><h5 id="LNPCC-GUID-E828F0DF-6DFF-489D-953C-078654DFECEF" class="sect5"><span class="enumeration_section">7.7.2.4 </span>CALL Example
                     </h5>
                     <div>
                        <p>If you have created a PL/SQL function <code class="codeph">fact</code> (stored in the package <code class="codeph">mathpkg</code>) that takes an integer as input and returns its factorial in an integer:
                        </p><pre class="oac_no_warn" dir="ltr">     EXEC SQL CREATE OR REPLACE PACKAGE BODY mathpkg as 
       function fact(n IN INTEGER) RETURN INTEGER AS
         BEGIN
           IF (n &lt;= 0) then return 1;
           ELSE return n * fact(n - 1);
           END IF;
         END fact;
       END mathpkge;
     END-EXEC.
</pre><p>then to use<code class="codeph"> fact</code> in a Pro*C/C++ application using the CALL statement:
                        </p><pre class="oac_no_warn" dir="ltr"> ...
int num, fact;
...
EXEC SQL CALL mathpkge.fact(:num) INTO :fact ;
...
</pre><div class="infoboxnotealso" id="GUID-E828F0DF-6DFF-489D-953C-078654DFECEF__GUID-CFAAEAA5-3C2C-45BA-A279-95753BFEC767">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="embedded-SQL-statements-and-directives.html#GUID-F28B8E6F-1CF5-49D1-86F4-13CD01475BB1">CALL (Executable Embedded SQL)</a>"</span> for more information about the CALL statement.
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../adfns/index.html" target="_blank"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a>, for a complete explanation of passing arguments and other issues.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNPCC3427"></a><div class="props_rev_3"><a id="GUID-57F71170-7A70-4938-9F1F-F3B6DFEA88A3" name="GUID-57F71170-7A70-4938-9F1F-F3B6DFEA88A3"></a><h4 id="LNPCC-GUID-57F71170-7A70-4938-9F1F-F3B6DFEA88A3" class="sect4"><span class="enumeration_section">7.7.3 </span>About Getting Information about Stored Subprograms
                  </h4>
                  <div>
                     <div class="infoboxnote" id="GUID-57F71170-7A70-4938-9F1F-F3B6DFEA88A3__GUID-02B7881D-07F3-463B-91C2-8C19964E34E6">
                        <p class="notep1">Note:</p>
                        <p>The Logon Data Area (LDA) is <span class="italic">no longer supported</span> in Oracle. The ability to embed OCI Release 7 calls in your Pro*C/C++ program will be phased out by the next major Oracle release.
                        </p>
                     </div>
                     <p><a href="datatypes-and-host-variables.html#GUID-18395E0D-263A-49BF-9DAB-DA0C8775B9FC"> Datatypes and Host Variables</a> described how to embed OCI calls in your host program. After calling the library routine SQLLDA to set up the LDA, use the OCI call <span class="italic">odessp</span> to get useful information about a stored subprogram. When you call <span class="italic">odessp</span>, you must pass it a valid LDA and the name of the subprogram. For packaged subprograms, you must also pass the name of the package. <span class="italic">odessp</span> returns information about each subprogram parameter such as its datatype, size, position, and so on. 
                     </p>
                     <p>You can also use the DESCRIBE_PROCEDURE stored procedure, in the DBMS_DESCRIBE package. </p>
                  </div>
               </div>
            </div><a id="LNPCC3428"></a><div class="props_rev_3"><a id="GUID-2191B843-36C4-4936-B0F5-97AB0AB8CDEA" name="GUID-2191B843-36C4-4936-B0F5-97AB0AB8CDEA"></a><h3 id="LNPCC-GUID-2191B843-36C4-4936-B0F5-97AB0AB8CDEA" class="sect3"><span class="enumeration_section">7.8 </span>External Procedures
               </h3>
               <div>
                  <p>PL/SQL can call C functions which are external procedures. External procedures (also known as external procedures) are stored in dynamic link libraries (DLL) or, for example, in <span class="italic">.so </span>libraries under Solaris.
                  </p>
                  <p>If the external procedure executes on the server-side, it can call back into the server to execute SQL and PL/SQL in the same transaction. External procedures on the server execute faster than on the client and can interface the database server with external systems and data sources. </p>
                  <p>In order to execute a server-side external C function, the REGISTER CONNECT embedded SQL statement must be used inside that function. The syntax of the statement is:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL REGISTER CONNECT USING :epctx [RETURNING :host_context] ;
</pre><p>where <code class="codeph">epctx</code> is the external procedure context (of type pointer to <code class="codeph">OCIExtProcContext</code>). <code class="codeph">epctx</code> is passed to the procedure by PL/SQL.
                  </p>
                  <p><code class="codeph">host_context</code> is a runtime context returned by the external procedure. Currently, it is the default (global) context.
                  </p>
                  <p>The REGISTER CONNECT statement will return the set of OCI handles (OCIEnv, OCISvcCtx, and OCIError) that are associated with the current Oracle connection and transaction. These handles are then used to define the Pro*C/C++ default unnamed connection for the global SQLLIB runtime context. The REGISTER CONNECT statement is therefore used <span class="italic">instead</span> of a CONNECT statement. 
                  </p>
                  <p>Subsequent embedded SQL statements will use this set of OCI handles. They execute against the global SQLLIB runtime context and the unnamed connection, even those that are in separately precompiled units. Uncommitted changes are not seen. In the future, a (nondefault) runtime context can be returned in the optional RETURNING clause.</p>
                  <p>There cannot already be any active default connection for the global runtime context. A runtime error is returned if you try to use REGISTER CONNECT when a connection already exists.</p>
                  <p>In real-world cases, the external procedure should be one that you can reuse from many different applications. </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../lnoci/index.html" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="LNPCC3429"></a><div class="props_rev_3"><a id="GUID-1FC8608C-A8FD-4801-BC99-0AEC2DA1470C" name="GUID-1FC8608C-A8FD-4801-BC99-0AEC2DA1470C"></a><h4 id="LNPCC-GUID-1FC8608C-A8FD-4801-BC99-0AEC2DA1470C" class="sect4"><span class="enumeration_section">7.8.1 </span>Restrictions on External Procedures
                  </h4>
                  <div>
                     <p>Follow these rules for external procedures:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>External procedures can only be in C. C++ external procedures are not supported.</p>
                        </li>
                        <li>
                           <p>When you are connected to the external procedure context, any additional connection is not permitted and results in a runtime error.</p>
                        </li>
                        <li>
                           <p>Multithreaded external procedures are not supported. Executing an EXEC SQL ENABLE THREADS statement is not permitted and will return a runtime error. Pro*C/C++ does support multithreading in an application not using the external procedure method we are describing.</p>
                        </li>
                        <li>
                           <p>You cannot use DDL statements. They result in runtime errors.</p>
                        </li>
                        <li>
                           <p>You cannot use transaction control statements, such as EXEC SQL COMMIT, and EXEC SQL ROLLBACK.</p>
                        </li>
                        <li>
                           <p>You cannot use object navigation statements such as EXEC SQL OBJECT ... .</p>
                        </li>
                        <li>
                           <p>You cannot use polling EXEC SQL LOB statements.</p>
                        </li>
                        <li>
                           <p>You cannot use EXEC TOOLS statements. They will result in runtime errors.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC3430"></a><div class="props_rev_3"><a id="GUID-3AA95FAE-B30C-4AB8-8AD8-EA6D6DC69828" name="GUID-3AA95FAE-B30C-4AB8-8AD8-EA6D6DC69828"></a><h4 id="LNPCC-GUID-3AA95FAE-B30C-4AB8-8AD8-EA6D6DC69828" class="sect4"><span class="enumeration_section">7.8.2 </span>About Creating the External Procedure
                  </h4>
                  <div>
                     <p>Here is a simple example to create the external procedure <code class="codeph">extp1</code>.
                     </p>
                     <p>To store an external C procedure, compile and link the code to a library such as a DLL. </p>
                     <p>Reference to NT removed user comment 9561</p>
                     <p>Then use the following SQL command once to register the external procedure <code class="codeph">extp1</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE extp1
AS EXTERNAL NAME "extp1"
LIBRARY mylib
WITH CONTEXT
PARAMETERS(CONTEXT) ;
</pre><p>Where<span class="italic"> mylib</span> is the name of the library storing procedure <span class="italic">extp1</span>. WITH CONTEXT means to implicitly call this procedure with argument of type<code class="codeph"> OCIExtProcContext*</code>. The context is omitted in your call, but is passed to the procedure anyway. The keyword CONTEXT appears in the CREATE statement, however, as a place marker.
                     </p>
                     <p>This context parameter is the one referenced in the EXEC SQL REGISTER CONNECT statement inside <code class="codeph">extp1</code>.
                     </p>
                     <p>The external procedure is called from SQL*Plus this way:</p><pre class="oac_no_warn" dir="ltr">SQL&gt;
BEGIN
  INSERT INTO emp VALUES(9999,'JOHNSON','SALESMAN',7782, sysdate, 1200,150,10);
  extp1;
END;
</pre><p><a id="d33328e2009" class="indexterm-anchor"></a>Here is the listing of <code class="codeph">extp1.pc</code>:
                     </p><pre class="oac_no_warn" dir="ltr">void extp1 (epctx)
OCIExtProcContext *epctx;
{
char name[15];
        EXEC SQL REGISTER CONNECT USING :epctx;
        EXEC SQL WHENEVER SQLERROR goto err;
        EXEC SQL SELECT ename INTO :name FROM emp WHERE empno = 9999;
        return;
err: SQLExtProcError(SQL_SINGLE_RCTX,sqlca.sqlerrm.sqlerrmc,sqlca.sqlerrm.sqlerrml);
        return;
}</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../lnpls/plsql-subprograms.html#LNPLS-GUID-96B5DE2B-D809-4296-9CDE-B317B81895F8" target="_blank"><span class="italic">External Subprograms</span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCC3431"></a><div class="props_rev_3"><a id="GUID-A7A53E22-3218-4261-8FAF-C369BDAEB2EF" name="GUID-A7A53E22-3218-4261-8FAF-C369BDAEB2EF"></a><h4 id="LNPCC-GUID-A7A53E22-3218-4261-8FAF-C369BDAEB2EF" class="sect4"><span class="enumeration_section">7.8.3 </span>SQLExtProcError()
                  </h4>
                  <div>
                     <p>The SQLLIB function <code class="codeph">SQLExtProcError()</code> provides the ability to return control to PL/SQL when an error occurs in an external C procedure. The function and its arguments are:
                     </p>
                     <p>SQLExtProcError (ctx, msg, msglen)</p>
                     <p>where:</p>
                     <p>ctx (IN)   sql_context *</p>
                     <p>This is the target SQLLIB runtime context of the REGISTER CONNECT statement, which has to be executed before this function is invoked. Only the global runtime context is supported now. </p>
                     <p>msg (OUT)   char *</p>
                     <p>The text of the error message.</p>
                     <p>msglen (OUT)   size_t</p>
                     <p>The length in bytes of the message.</p>
                     <p>SQLLIB calls the OCI service function OCIExtProcRaiseExcpWithMsg when this function is executed. </p>
                     <p>The message is from the structure <code class="codeph">sqlerrm</code> in the SQLCA. 
                     </p>
                     <p>Here is an example showing use of <code class="codeph">SQLExtProcError()</code>:
                     </p><pre class="oac_no_warn" dir="ltr">void extp1 (epctx)
OCIExtProcContext *epctx;
{
   char name[15];
   EXEC SQL REGISTER CONNECT USING :epctx;
   EXEC SQL WHENEVER SQLERROR goto err;
   EXEC SQL SELECT ename INTO :name FROM emp WHERE smpno = 9999;
   return;
 err:
   SQLExtProcError (SQL_SINGLE_RCTX, sqlca.sqlerrm.sqlerrmc,
      sqlca.sqlerrm.sqlerrml);
   printf("\n%*s\n", sqlca.sqlerrm.sqlerrml, sqlca.sqlerrm.sqlerrmc);
   return;
}</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="handling-run-time-errors.html#GUID-08A1E4F0-7B6F-4166-BB8C-E9F23F6C355E">SQLCA Structure</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="LNPCC3432"></a><div class="props_rev_3"><a id="GUID-A147B827-C733-47AD-944F-BEA87FC7CAD3" name="GUID-A147B827-C733-47AD-944F-BEA87FC7CAD3"></a><h3 id="LNPCC-GUID-A147B827-C733-47AD-944F-BEA87FC7CAD3" class="sect3"><span class="enumeration_section">7.9 </span>About Using Dynamic SQL 
               </h3>
               <div>
                  <p>Recall that the precompiler treats an entire PL/SQL block like a single SQL statement. Therefore, you can store a PL/SQL block in a string host variable. Then, if the block contains no host variables, you can use dynamic SQL Method 1 to EXECUTE the PL/SQL string. Or, if the block contains a known number of host variables, you can use dynamic SQL Method 2 to PREPARE and EXECUTE the PL/SQL string. If the block contains an unknown number of host variables, you must use dynamic SQL Method 4. </p>
                  <div class="infoboxnote" id="GUID-A147B827-C733-47AD-944F-BEA87FC7CAD3__GUID-CCBA43F3-B71D-4C2E-B2E5-7D266E17B50C">
                     <p class="notep1">Note:</p>
                     <p>In dynamic SQL Method 4, you cannot bind a host array to a PL/SQL procedure with a parameter of type "table." </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="ANSI-dynamic-SQL.html#GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF">ANSI Dynamic SQL</a></li>
                        <li><a href="Oracle-dynamic-SQL.html#GUID-3B9E253A-F03D-431D-A77E-84C02C43F494">Oracle Dynamic SQL</a></li>
                        <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-B516B7C8-1859-4A54-B15D-DF0C3D3C474D">Oracle Dynamic SQL: Method 4</a></li>
                        <li><a href="Oracle-dynamic-SQL.html#GUID-AFD0B0E4-4B76-4AA9-AA4D-1027A620634E">Using Method 4</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id='04883.precompiler-concepts.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Precompiler Concepts</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="cobol-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T02:40:40-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96466-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introduction.html" title="Previous" type="text/html">
      <link rel="next" href="database-concepts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*COBOL Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNPCB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="database-concepts.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-and-concepts.html" property="item" typeof="WebPage"><span property="name"> Introduction and Concepts </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Precompiler Concepts</li>
            </ol>
            <a id="GUID-40982C2F-0B4A-4E5D-AEC0-A2D2CA68F61D" name="GUID-40982C2F-0B4A-4E5D-AEC0-A2D2CA68F61D"></a><a id="LNPCB002"></a>
            
            <h2 id="LNPCB-GUID-40982C2F-0B4A-4E5D-AEC0-A2D2CA68F61D" class="sect2"><span class="enumeration_chapter">2 </span> Precompiler Concepts
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how embedded SQL programs do their work. It presents definitions of important words, explanations of basic concepts, and key rules. </p>
               <p>Topics covered are:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-C3A40993-6580-401F-AD24-CBFEEF283FF8">Key Concepts of Embedded SQL Programming </a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-B4B12E18-2BD0-49A3-917C-0C9567236BC3">Programming Guidelines</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-C01E658A-1EAE-4497-82DB-347217694E78">The Declare Section</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-A0BFB23E-4234-409F-906A-3185E866F7BC">Nested Programs</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-945BCD1F-E820-4AF1-BCAD-1C09DEBA2BB0">Conditional Precompilations</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-5BBB2EA7-C46D-4D4F-B9BB-77668B2D9153">Separate Precompilations </a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-E1191EB4-BD6B-4EB7-B20E-51C92F86AEDC">Compiling and Linking </a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-1BA76AA5-1C9E-45FA-88BE-B6A5BF0DA5BA">Sample DEPT and EMP Tables</a></p>
                  </li>
                  <li>
                     <p><a href="precompiler-concepts.html#GUID-6BDE80F2-4970-4D3B-9AE5-CCA82ADE333D">Sample EMP Program: SAMPLE1.PCO </a></p>
                  </li>
               </ul>
            </div><a id="LNPCB126"></a><div class="props_rev_3"><a id="GUID-C3A40993-6580-401F-AD24-CBFEEF283FF8" name="GUID-C3A40993-6580-401F-AD24-CBFEEF283FF8"></a><h3 id="LNPCB-GUID-C3A40993-6580-401F-AD24-CBFEEF283FF8" class="sect3"><span class="enumeration_section">2.1 </span>Key Concepts of Embedded SQL Programming 
               </h3>
               <div>
                  <p>This section lays the conceptual foundation on which later chapters build. <a id="d7799e94" class="indexterm-anchor"></a></p>
               </div><a id="LNPCB128"></a><a id="LNPCB127"></a><div class="props_rev_3"><a id="GUID-E7AE6605-2B20-49C4-90C6-173567C42869" name="GUID-E7AE6605-2B20-49C4-90C6-173567C42869"></a><h4 id="LNPCB-GUID-E7AE6605-2B20-49C4-90C6-173567C42869" class="sect4"><span class="enumeration_section">2.1.1 </span>Steps in Developing an Embedded SQL Application 
                  </h4>
                  <div>
                     <p>Precompiling results in a source file that can be compiled normally. Although precompiling adds a step to the traditional development process, that step is well worth taking because it lets you write very flexible applications. </p>
                     <p><a href="precompiler-concepts.html#GUID-E7AE6605-2B20-49C4-90C6-173567C42869__I6767">Figure 2-1</a> walks you through the embedded SQL application development process:
                     </p>
                     <div class="figure" id="GUID-E7AE6605-2B20-49C4-90C6-173567C42869__I6767">
                        <p class="titleinfigure">Figure 2-1  Application Development Process</p><img src="img/pco81050.gif" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/pco81050.html"><br><a href="img_text/pco81050.html">Description of "Figure 2-1  Application Development Process"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="LNPCB129"></a><div class="props_rev_3"><a id="GUID-1623C2A5-FBDE-4C41-99F3-221BBA802013" name="GUID-1623C2A5-FBDE-4C41-99F3-221BBA802013"></a><h4 id="LNPCB-GUID-1623C2A5-FBDE-4C41-99F3-221BBA802013" class="sect4"><span class="enumeration_section">2.1.2 </span>Embedded SQL Statements
                  </h4>
                  <div>
                     <p>The term <span class="italic">embedded SQL</span> refers to SQL statements placed within an application program. Because the application program houses the SQL statements, it is called a <span class="italic">host program</span>, and the language in which it is written is called the <span class="italic">host language</span>. For example, with Pro*COBOL you can embed SQL statements in a COBOL host program.<a id="d7799e168" class="indexterm-anchor"></a><a id="d7799e170" class="indexterm-anchor"></a> 
                     </p>
                     <p>To manipulate and query Oracle data, you use the INSERT, UPDATE, DELETE, and SELECT statements. INSERT adds rows of data to database tables, UPDATE modifies rows, DELETE removes unwanted rows, and SELECT retrieves rows that meet your search criteria.</p>
                     <p>Only SQL statements—not SQL*Plus statements—are valid in an application program. (SQL*Plus has additional statements for setting environment parameters, editing, and report formatting.)</p>
                  </div><a id="LNPCB131"></a><a id="LNPCB130"></a><div class="props_rev_3"><a id="GUID-316C1C40-749B-4185-BEE1-AB55C10A4331" name="GUID-316C1C40-749B-4185-BEE1-AB55C10A4331"></a><h5 id="LNPCB-GUID-316C1C40-749B-4185-BEE1-AB55C10A4331" class="sect5"><span class="enumeration_section">2.1.2.1 </span>Executable versus Declarative Statements
                     </h5>
                     <div>
                        <p>Embedded SQL includes all the interactive SQL statements plus others that allow you to transfer data between Oracle and a host program. There are two types of embedded SQL statements: <span class="italic">executable statements</span> and <span class="italic">directives</span>.
                        </p>
                        <p>Executable SQL statements generate calls to the database. They include almost all queries, Data Manipulation Language (DML), data definition language (DDL), and  Data Control Language (DCL) statements.</p>
                        <p><span class="italic">Directives</span>, on the other hand, do not result in calls to SQLLIB and do not operate on Oracle data. 
                        </p>
                        <p><a id="d7799e215" class="indexterm-anchor"></a><a id="d7799e219" class="indexterm-anchor"></a>You use directives to declare Oracle objects, communications areas, and SQL variables. They can be placed wherever COBOL declarations can be placed.<a id="d7799e224" class="indexterm-anchor"></a> 
                        </p>
                        <p><a href="precompiler-concepts.html#GUID-316C1C40-749B-4185-BEE1-AB55C10A4331__G14502" title="This table lists directives and their purposes">Table 2-1</a> groups some examples of embedded SQL statements (not a complete list.)
                        </p>
                        <div class="tblformal" id="GUID-316C1C40-749B-4185-BEE1-AB55C10A4331__G14502">
                           <p class="titleintable">Table 2-1 Embedded SQL Statements — Directives</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Embedded SQL Statements — Directives" summary="This table lists directives and their purposes" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d7799e243">STATEMENT</th>
                                    <th align="left" valign="bottom" width="69%" id="d7799e247">PURPOSE</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d7799e253" headers="d7799e243 ">
                                       <p>ARRAYLEN*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d7799e253 d7799e247 ">
                                       <p>To use host tables with PL/SQL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d7799e260" headers="d7799e243 ">
                                       <p>BEGIN DECLARE SECTION*</p>
                                       <p>END DECLARE SECTION*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d7799e260 d7799e247 ">
                                       <p>To declare host variables</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d7799e269" headers="d7799e243 ">
                                       <p>DECLARE*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d7799e269 d7799e247 ">
                                       <p>To name Oracle objects</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d7799e276" headers="d7799e243 ">
                                       <p>INCLUDE*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d7799e276 d7799e247 ">
                                       <p>To copy in files</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d7799e283" headers="d7799e243 ">
                                       <p>VAR*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d7799e283 d7799e247 ">
                                       <p>To equivalence variables</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d7799e290" headers="d7799e243 ">
                                       <p>WHENEVER*</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d7799e290 d7799e247 ">
                                       <p>To handle runtime errors</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="tblformal" id="GUID-316C1C40-749B-4185-BEE1-AB55C10A4331__EMBEDDEDSQLSTATEMENTSEXECUTABLESQL-040CB223">
                           <p class="titleintable">Table 2-2 Embedded SQL Statements — Executable SQL</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Embedded SQL Statements — Executable SQL" summary="This table lists executable SQL statements and their purposes" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d7799e306">STATEMENT</th>
                                    <th align="left" valign="bottom" width="20%" id="d7799e309">PURPOSE</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d7799e314" headers="d7799e306 ">
                                       <p>ALLOCATE*</p>
                                       <p>ALTER</p>
                                       <p>CONNECT*</p>
                                       <p>CREATE</p>
                                       <p>DROP</p>
                                       <p>GRANT</p>
                                       <p>NOAUDIT</p>
                                       <p>RENAME</p>
                                       <p>REVOKE</p>
                                       <p>TRUNCATE</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d7799e314 d7799e309 ">
                                       <p>To define and control Oracle data</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d7799e339" headers="d7799e306 ">
                                       <p>CLOSE*</p>
                                       <p>DELETE</p>
                                       <p>EXPLAIN PLAN</p>
                                       <p>FETCH*</p>
                                       <p>INSERT</p>
                                       <p>LOCK TABLE</p>
                                       <p>OPEN*</p>
                                       <p>SELECT</p>
                                       <p>UPDATE</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d7799e339 d7799e309 ">
                                       <p>To query and manipulate Oracle data</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d7799e362" headers="d7799e306 ">
                                       <p>COMMIT</p>
                                       <p>ROLLBACK</p>
                                       <p>SAVEPOINT</p>
                                       <p>SET TRANSACTION</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d7799e362 d7799e309 ">
                                       <p>To process transactions</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d7799e375" headers="d7799e306 ">
                                       <p>DESCRIBE*</p>
                                       <p>EXECUTE*</p>
                                       <p>PREPARE*</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d7799e375 d7799e309 ">
                                       <p>To use dynamic SQL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d7799e386" headers="d7799e306 ">
                                       <p>ALTER SESSION</p>
                                       <p>SET ROLE</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d7799e386 d7799e309 ">
                                       <p>To control sessions</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>* Has no interactive counterpart</p>
                        <div class="infoboxnotealso" id="GUID-316C1C40-749B-4185-BEE1-AB55C10A4331__GUID-285354C6-E895-4238-A0CC-563F33B25C43">
                           <p class="notep1">See Also:</p><a href="embedded-SQL-statements-and-precompiler-directives.html#GUID-F5251483-48EC-4B39-8E14-68F65480B16B">Embedded SQL Statements and Precompiler Directives</a> contains a presentation of the most important statements and directives.
                        </div>
                     </div>
                  </div>
               </div><a id="LNPCB135"></a><div class="props_rev_3"><a id="GUID-6084A626-F5CE-4862-90CA-A7603E1E18CE" name="GUID-6084A626-F5CE-4862-90CA-A7603E1E18CE"></a><h4 id="LNPCB-GUID-6084A626-F5CE-4862-90CA-A7603E1E18CE" class="sect4"><span class="enumeration_section">2.1.3 </span>Embedded SQL Syntax 
                  </h4>
                  <div>
                     <p>In your application program, you can freely intermix SQL statements with host-language statements and use host-language variables in SQL statements. The only special requirement for building SQL statements into your host program is that you begin them with the words EXEC SQL and end them with the token END-EXEC. Pro*COBOL translates all executable EXEC SQL statements into calls to the runtime library SQLLIB.<a id="d7799e426" class="indexterm-anchor"></a><a id="d7799e430" class="indexterm-anchor"></a><a id="d7799e434" class="indexterm-anchor"></a><a id="d7799e436" class="indexterm-anchor"></a> 
                     </p>
                     <p>Most embedded SQL statements differ from their interactive counterparts only through the addition of a new clause or the use of program variables. Compare the following interactive and embedded ROLLBACK statements:<a id="d7799e441" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">ROLLBACK WORK;           -- interactive

* embedded
     EXEC SQL
         ROLLBACK WORK
     END-EXEC.
</pre><p>A period or any other terminator can follow a SQL statement. Either of the following is allowed:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL ... END-EXEC,
     EXEC SQL ... END-EXEC.</pre></div>
               </div><a id="LNPCB136"></a><div class="props_rev_3"><a id="GUID-D0456446-014D-4569-AD48-BCCB0E54169A" name="GUID-D0456446-014D-4569-AD48-BCCB0E54169A"></a><h4 id="LNPCB-GUID-D0456446-014D-4569-AD48-BCCB0E54169A" class="sect4"><span class="enumeration_section">2.1.4 </span>Static Versus Dynamic SQL Statements 
                  </h4>
                  <div>
                     <p>Most application programs are designed to process <span class="italic">static</span> SQL<span class="italic"> </span>statements and fixed transactions. In this case, you know the makeup of each SQL statement and transaction before run time. That is, you know which SQL commands will be issued, which database tables might be changed, which columns will be updated, and so on.<a id="d7799e482" class="indexterm-anchor"></a><a id="d7799e486" class="indexterm-anchor"></a> 
                     </p>
                     <p>However, some applications are required to accept and process any valid SQL statement at run time. In this case you might not know until run time all the SQL commands, database tables, and columns involved. </p>
                     <p><span class="italic">Dynamic </span>SQL is an advanced programming technique that lets your program accept or build SQL statements at run time and take explicit control over datatype conversion.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="embedded-SQL.html#GUID-D41B0E04-08A5-4BDF-82DF-B39841C0B7BC">Embedded SQL</a></li>
                           <li><a href="Oracle-dynamic-SQL.html#GUID-C325218F-3DFF-4551-A5EB-483ADB24E324">Oracle Dynamic SQL</a></li>
                           <li><a href="ANSI-dynamic-SQL.html#GUID-D6E9ACBE-EFF4-42F6-A855-B510004F4164">ANSI Dynamic SQL</a></li>
                           <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-C6256169-5928-466C-B7C7-960D20705EED">Oracle Dynamic SQL: Method 4</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCB137"></a><div class="props_rev_3"><a id="GUID-743ED7AF-E1FB-4570-9309-448E462C511A" name="GUID-743ED7AF-E1FB-4570-9309-448E462C511A"></a><h4 id="LNPCB-GUID-743ED7AF-E1FB-4570-9309-448E462C511A" class="sect4"><span class="enumeration_section">2.1.5 </span>Embedded PL/SQL Blocks 
                  </h4>
                  <div>
                     <p>Pro*COBOL treats a PL/SQL block like a single embedded SQL statement, so you can place a PL/SQL block anywhere in an application program that you can place a SQL statement. To embed PL/SQL in your host program, you simply declare the variables to be shared with PL/SQL and bracket the PL/SQL block with the keywords EXEC SQL EXECUTE and END-EXEC.<a id="d7799e538" class="indexterm-anchor"></a></p>
                     <p>From embedded PL/SQL blocks, you can manipulate Oracle data flexibly and safely because PL/SQL supports all SQL data manipulation and transaction processing commands.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="embedded-PLSQL.html#GUID-7E17F1C4-BAF4-42A8-8D5C-9A5F3477C91F">Embedded PL/SQL</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCB138"></a><div class="props_rev_3"><a id="GUID-98A38C5B-AAA9-4A2C-898A-1547711EC35A" name="GUID-98A38C5B-AAA9-4A2C-898A-1547711EC35A"></a><h4 id="LNPCB-GUID-98A38C5B-AAA9-4A2C-898A-1547711EC35A" class="sect4"><span class="enumeration_section">2.1.6 </span>Host Variables and Indicator Variables 
                  </h4>
                  <div>
                     <p>A <span class="italic">host variable</span> is a scalar or table variable or group item declared in the COBOL language and shared with Oracle, meaning that both your program and Oracle can reference its value. Host variables are the key to communication between Oracle and your program. <a id="d7799e579" class="indexterm-anchor"></a></p>
                     <p>You use <span class="italic">input</span> host variables to pass data to the database. You use <span class="italic">output</span> host variables to pass data and status information from the database to your program.<a id="d7799e591" class="indexterm-anchor"></a></p>
                     <p>Host variables can be used anywhere an expression can be used. In SQL statements, host variables must be prefixed with a colon ':' to set them apart from database schema names.<a id="d7799e597" class="indexterm-anchor"></a><a id="d7799e601" class="indexterm-anchor"></a> 
                     </p>
                     <p>You can associate any host variable with an optional indicator variable. An <span class="italic">indicator variable</span> is an integer variable that indicates the value or condition of its host variable. A <span class="italic">NULL</span> is a missing, an unknown, or an inapplicable value. You use indicator variables to assign NULLs to input host variables and to detect NULLs in output variables or truncated values in output character host variables. <a id="d7799e614" class="indexterm-anchor"></a></p>
                     <p>A host variable must <span class="italic">not</span> be: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>prefixed with a colon in COBOL statements </p>
                        </li>
                        <li>
                           <p>used in data definition (DDL) statements such as ALTER and CREATE</p>
                        </li>
                     </ul>
                     <p>In SQL statements, an indicator variable must be prefixed with a colon and appended to its associated host variable (to improve readability, you can precede the indicator variable with the optional keyword INDICATOR).</p>
                     <p>Every program variable used in a SQL statement must be declared according to the rules of the COBOL language. Normal rules of scope apply. COBOL variable names can be any length, but only the first 30 characters are significant for Pro*COBOL<a id="d7799e634" class="indexterm-anchor"></a><a id="d7799e638" class="indexterm-anchor"></a><a id="d7799e642" class="indexterm-anchor"></a><a id="d7799e646" class="indexterm-anchor"></a><a id="d7799e650" class="indexterm-anchor"></a><a id="d7799e654" class="indexterm-anchor"></a>. Any valid COBOL identifier can be used as a host variable identifier, including those beginning with digits.
                     </p>
                     <p>The external datatype of a host variable and the internal datatype of its source or target database column need not be the same, but they must be compatible. </p>
                     <div class="infoboxnotealso" id="GUID-98A38C5B-AAA9-4A2C-898A-1547711EC35A__GUID-6EAF10E2-2520-4604-B436-CA97C82FDCD5">
                        <p class="notep1">See Also:</p><a href="datatypes-and-host-variables.html#GUID-E35BBCF1-FA1C-4DA4-A522-C17CF57E910F">Datatype Conversion</a> for list of compatible datatypes between which Oracle converts automatically when necessary.
                     </div>
                  </div>
               </div><a id="LNPCB139"></a><div class="props_rev_3"><a id="GUID-ABCF7484-1FBC-4DF1-8BEA-559C5482E6AE" name="GUID-ABCF7484-1FBC-4DF1-8BEA-559C5482E6AE"></a><h4 id="LNPCB-GUID-ABCF7484-1FBC-4DF1-8BEA-559C5482E6AE" class="sect4"><span class="enumeration_section">2.1.7 </span>Oracle Datatypes 
                  </h4>
                  <div>
                     <p>Typically, a host program inputs data to the database, and the database outputs data to the program. Oracle inserts input data into database tables and selects output data into program host variables. To store a data item, Oracle must know its <span class="italic">datatype</span>, which specifies a storage format and valid range of values.
                     </p>
                     <p>Oracle recognizes two kinds of datatypes: <span class="italic">internal</span> and <span class="italic">external</span>. Internal datatypes specify how Oracle stores data in database columns. Oracle also uses internal datatypes to represent database pseudo-columns, which return specific data items but are not actual columns in a table.<a id="d7799e701" class="indexterm-anchor"></a><a id="d7799e705" class="indexterm-anchor"></a></p>
                     <p>External datatypes specify how data is stored in host variables. When your host program inputs data to Oracle, it does any conversion between the external datatype of the input host variable and the internal datatype of the database column. When Oracle outputs data to your host program, if necessary, Oracle converts between the internal datatype of the database column and the external datatype of the output host variable.<a id="d7799e711" class="indexterm-anchor"></a></p>
                     <div class="infoboxnote" id="GUID-ABCF7484-1FBC-4DF1-8BEA-559C5482E6AE__GUID-BE943CDB-1BE9-4883-9364-B297DC64000B">
                        <p class="notep1">Note:</p>
                        <p>You can override default datatype conversions by using dynamic SQL Method 4 or datatype equivalencing. For information about datatype equivalencing, see <span class="q">"<a href="datatypes-and-host-variables.html#GUID-646C583F-AFD5-4F6D-8627-8BB344F8B721">Explicit Control Over DATE String Format</a>"</span>.
                        </p>
                     </div>
                  </div>
               </div><a id="LNPCB140"></a><div class="props_rev_3"><a id="GUID-9F0E8243-B2BE-4A69-BA56-5F5D1A68CBD1" name="GUID-9F0E8243-B2BE-4A69-BA56-5F5D1A68CBD1"></a><h4 id="LNPCB-GUID-9F0E8243-B2BE-4A69-BA56-5F5D1A68CBD1" class="sect4"><span class="enumeration_section">2.1.8 </span>Tables
                  </h4>
                  <div>
                     <p>Pro*COBOL lets you define table host variables (called <span class="italic">host tables</span>) and operate on them with a single SQL statement. Using the SELECT, FETCH, DELETE, INSERT, and UPDATE statements, you can query and manipulate large volumes of data with ease.<a id="d7799e750" class="indexterm-anchor"></a></p>
                     <div class="infoboxnotealso" id="GUID-9F0E8243-B2BE-4A69-BA56-5F5D1A68CBD1__GUID-37FC9185-3F74-4734-8ECD-ABD81F1842B8">
                        <p class="notep1">See Also:</p><a href="host-tables.html#GUID-B4A3765E-BBA7-4D71-860D-1058CD2D23C6">Host Tables</a> for a complete discussion of host tables.
                     </div>
                  </div>
               </div><a id="LNPCB141"></a><div class="props_rev_3"><a id="GUID-767065E6-7AD4-45F5-AE4C-7D5E50564303" name="GUID-767065E6-7AD4-45F5-AE4C-7D5E50564303"></a><h4 id="LNPCB-GUID-767065E6-7AD4-45F5-AE4C-7D5E50564303" class="sect4"><span class="enumeration_section">2.1.9 </span>Errors and Warnings 
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you execute an embedded SQL statement, it either succeeds or fails, and might result in an error or warning. You need a way to handle these results. Pro*COBOL provides the following error handling mechanisms:<a id="d7799e785" class="indexterm-anchor"></a></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>SQLCODE status variable</p>
                           </li>
                           <li>
                              <p>SQLSTATE status variable</p>
                           </li>
                           <li>
                              <p>SQL Communications Area (SQLCA) </p>
                           </li>
                           <li>
                              <p>WHENEVER statement </p>
                           </li>
                           <li>
                              <p>Oracle Communications Area (ORACA)</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCB142"></a><div class="props_rev_3"><a id="GUID-943C0AF2-1874-459B-A511-470B6D1B86E5" name="GUID-943C0AF2-1874-459B-A511-470B6D1B86E5"></a><h5 id="LNPCB-GUID-943C0AF2-1874-459B-A511-470B6D1B86E5" class="sect5"><span class="enumeration_section">2.1.9.1 </span>SQLCODE/SQLSTATE Status Variables
                     </h5>
                     <div>
                        <p>After executing a SQL statement, the Oracle Server returns a status code to a variable named SQLCODE or SQLSTATE. The status code indicates whether the SQL statement executed successfully or caused an error or warning condition.</p>
                     </div>
                  </div><a id="LNPCB144"></a><a id="LNPCB143"></a><div class="props_rev_3"><a id="GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B" name="GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B"></a><h5 id="LNPCB-GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B" class="sect5"><span class="enumeration_section">2.1.9.2 </span>SQLCA Status Variable
                     </h5>
                     <div>
                        <p>The SQLCA is a data structure that defines program variables used by Oracle to pass runtime status information to the program. With the SQLCA, you can take different actions based on feedback from Oracle about work just attempted. For example, you can check to see if a DELETE statement succeeded and, if so, how many rows were deleted.<a id="d7799e854" class="indexterm-anchor"></a> 
                        </p>
                        <p>The SQLCA provides for diagnostic checking and event handling. At runtime, the SQLCA holds status information passed to your program by Oracle. After executing a SQL statement, Oracle sets SQLCA variables to indicate the outcome, as illustrated in <a href="precompiler-concepts.html#GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B__I6729">Figure 2-2</a>. 
                        </p>
                        <div class="figure" id="GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B__I6729">
                           <p class="titleinfigure">Figure 2-2  Updating the SQLCA</p><img src="img/pco81051.gif" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" longdesc="img_text/pco81051.html"><br><a href="img_text/pco81051.html">Description of "Figure 2-2  Updating the SQLCA"</a></div>
                        <!-- class="figure" -->
                        <p>You can check to see if an INSERT, UPDATE, or DELETE statement succeeded and if it did, how many rows were affected. Or, if the statement failed, you can get more information about what happened.<a id="d7799e870" class="indexterm-anchor"></a><a id="d7799e872" class="indexterm-anchor"></a></p>
                        <p>When MODE={ANSI13 | ORACLE}, you must declare the SQLCA by hard-coding it or by copying it into your program with the INCLUDE statement.</p>
                        <div class="infoboxnotealso" id="GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B__GUID-A3BC2422-6F60-44C4-9604-CB4F1A1D1F61">
                           <p class="notep1">See Also:</p><span class="q">"<a href="error-handling-and-diagnostics.html#GUID-07B14FDA-015C-4922-963E-6D4CBEDB9743">Using the SQL Communications Area</a>"</span> for more information about how to declare and use the SQLCA.
                        </div>
                     </div>
                  </div><a id="LNPCB145"></a><div class="props_rev_3"><a id="GUID-603301A3-66B3-43DE-A23E-1F5F82024371" name="GUID-603301A3-66B3-43DE-A23E-1F5F82024371"></a><h5 id="LNPCB-GUID-603301A3-66B3-43DE-A23E-1F5F82024371" class="sect5"><span class="enumeration_section">2.1.9.3 </span>WHENEVER Statement
                     </h5>
                     <div>
                        <p>With the WHENEVER statement, you can specify actions to be taken automatically when Oracle detects an error or warning condition. These actions include continuing with the next statement, calling a subprogram, branching to a labeled statement, performing a paragraph, or stopping.<a id="d7799e909" class="indexterm-anchor"></a> 
                        </p>
                     </div>
                  </div><a id="LNPCB146"></a><div class="props_rev_3"><a id="GUID-8A6BFBD2-BBC5-4040-9356-00A5F0765982" name="GUID-8A6BFBD2-BBC5-4040-9356-00A5F0765982"></a><h5 id="LNPCB-GUID-8A6BFBD2-BBC5-4040-9356-00A5F0765982" class="sect5"><span class="enumeration_section">2.1.9.4 </span>ORACA
                     </h5>
                     <div>
                        <div class="section">
                           <p>When more information is needed about runtime errors than the SQLCA provides, you can use the ORACA. The ORACA is a data structure that handles Oracle communication. It contains cursor statistics, information about the current SQL statement, option settings, and system statistics. </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCB147"></a><div class="props_rev_3"><a id="GUID-7A159038-7A6F-4C11-8F21-31B702004524" name="GUID-7A159038-7A6F-4C11-8F21-31B702004524"></a><h5 id="LNPCB-GUID-7A159038-7A6F-4C11-8F21-31B702004524" class="sect5"><span class="enumeration_section">2.1.9.5 </span>Precompiler Options and Error Handling
                     </h5>
                     <div>
                        <div class="section">
                           <p>Oracle returns the success or failure of SQL statements in status variables, SQLSTATE and SQLCODE. With precompiler option MODE=ORACLE, you use SQLCODE, declared by including SQLCA. With MODE=ANSI, either SQLSTATE or SQLCODE must be declared, but SQLCA is not necessary.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="error-handling-and-diagnostics.html#GUID-AE77299F-16B6-4896-817B-ACC5F7B68A2E">Error Handling and Diagnostics</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNPCB148"></a><div class="props_rev_3"><a id="GUID-1AC4695C-44DD-4121-AB9C-8394014ACDD7" name="GUID-1AC4695C-44DD-4121-AB9C-8394014ACDD7"></a><h4 id="LNPCB-GUID-1AC4695C-44DD-4121-AB9C-8394014ACDD7" class="sect4"><span class="enumeration_section">2.1.10 </span>SQL99 Syntax Support
                  </h4>
                  <div>
                     <p>The SQL standard enables the portability of SQL applications across all conforming software products. Oracle features are compliant with the ANSI/ISO SQL99 standard, including ANSI compliant joins. Pro*Cobol supports all SQL99 features that are supported by Oracle database, which means that the SQL99 syntax for the SELECT, INSERT, DELETE, and UPDATE statements and the body of the cursor in a DECLARE CURSOR statement are supported.</p>
                  </div>
               </div>
            </div><a id="LNPCB149"></a><div class="props_rev_3"><a id="GUID-B4B12E18-2BD0-49A3-917C-0C9567236BC3" name="GUID-B4B12E18-2BD0-49A3-917C-0C9567236BC3"></a><h3 id="LNPCB-GUID-B4B12E18-2BD0-49A3-917C-0C9567236BC3" class="sect3"><span class="enumeration_section">2.2 </span>Programming Guidelines
               </h3>
               <div>
                  <div class="section">
                     <p>This section deals with embedded SQL syntax, coding conventions, and Pro*COBOL-specific features and restrictions. Topics are arranged alphabetically for quick reference.<a id="d7799e1018" class="indexterm-anchor"></a><a id="d7799e1020" class="indexterm-anchor"></a> 
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPCB150"></a><div class="props_rev_3"><a id="GUID-97346464-5A87-4195-8EDF-AA1734B48C74" name="GUID-97346464-5A87-4195-8EDF-AA1734B48C74"></a><h4 id="LNPCB-GUID-97346464-5A87-4195-8EDF-AA1734B48C74" class="sect4"><span class="enumeration_section">2.2.1 </span>Abbreviations
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can use the standard COBOL abbreviations, such as PIC for PICTURE IS and COMP for USAGE IS COMPUTATIONAL.<a id="d7799e1048" class="indexterm-anchor"></a><a id="d7799e1050" class="indexterm-anchor"></a><a id="d7799e1054" class="indexterm-anchor"></a> 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB151"></a><div class="props_rev_3"><a id="GUID-DC5C86E0-96BA-4664-98C8-6B8295CA36E8" name="GUID-DC5C86E0-96BA-4664-98C8-6B8295CA36E8"></a><h4 id="LNPCB-GUID-DC5C86E0-96BA-4664-98C8-6B8295CA36E8" class="sect4"><span class="enumeration_section">2.2.2 </span>Case-Insensitivity
                  </h4>
                  <div>
                     <div class="section">
                        <p>Pro*COBOL precompiler options and values as well as all EXEC SQL statements, inline commands, and COBOL statements are case-insensitive. The precompiler accepts both upper- and lower-case tokens.<a id="d7799e1084" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB152"></a><div class="props_rev_3"><a id="GUID-2D8BF1E8-B4C9-43BA-AFDD-59627FEE1EA9" name="GUID-2D8BF1E8-B4C9-43BA-AFDD-59627FEE1EA9"></a><h4 id="LNPCB-GUID-2D8BF1E8-B4C9-43BA-AFDD-59627FEE1EA9" class="sect4"><span class="enumeration_section">2.2.3 </span>COBOL Versions Supported
                  </h4>
                  <div>
                     <div class="section">
                        <p>­­<a id="d7799e1116" class="indexterm-anchor"></a>Pro*COBOL supports the standard implementation of COBOL for your operating system (usually COBOL-85 or COBOL-74). Some platforms may support both COBOL implementations. For more information, see your Oracle system-specific documentation.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB153"></a><div class="props_rev_3"><a id="GUID-776F3ADD-4D66-466E-8471-31B8CBE695D1" name="GUID-776F3ADD-4D66-466E-8471-31B8CBE695D1"></a><h4 id="LNPCB-GUID-776F3ADD-4D66-466E-8471-31B8CBE695D1" class="sect4"><span class="enumeration_section">2.2.4 </span>Coding Areas
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d7799e1143" class="indexterm-anchor"></a><a id="d7799e1147" class="indexterm-anchor"></a><a id="d7799e1151" class="indexterm-anchor"></a><a id="d7799e1155" class="indexterm-anchor"></a>The precompiler option FORMAT, specifies the format of your source code. If you specify FORMAT=ANSI (the default), you are conforming as much as possible to the ANSI standard. In this format, columns 1 through 6 can contain an optional sequence number, and column 7 (indicator area) can indicate comments or continuation lines. 
                        </p>
                        <p>Division headers, section headers, paragraph names, FD and 01 statements begin in columns 8 through 11 (area A). Other statements, including EXEC SQL and EXEC ORACLE statements, must be placed in area B (columns 12 through 72). These guidelines for source code format can be overridden by your compiler's rules.</p>
                        <p>If you specify FORMAT=TERMINAL, COBOL statements can begin in column 1 (the left-most column), or column 1 can be the indicator area. This format is also subject to the rules of your compiler.</p>
                        <p>You can specify FORMAT=VARIABLE to allow Flexible B Area Length. </p>
                        <p>Consult your COBOL compiler documentation for your own platform to determine the actual acceptable formats for COBOL statements.</p>
                        <div class="infoboxnote" id="GUID-776F3ADD-4D66-466E-8471-31B8CBE695D1__GUID-01FF5274-B5BE-47D2-B222-32614BCBE3A9">
                           <p class="notep1">Note:</p>
                           <p>In this manual, COBOL code examples use the FORMAT=TERMINAL setting. The online sample programs in the demo directory use FORMAT=ANSI.<a id="d7799e1171" class="indexterm-anchor"></a> 
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB154"></a><div class="props_rev_3"><a id="GUID-06A84E6B-9D1B-49C5-B636-910502F57F87" name="GUID-06A84E6B-9D1B-49C5-B636-910502F57F87"></a><h4 id="LNPCB-GUID-06A84E6B-9D1B-49C5-B636-910502F57F87" class="sect4"><span class="enumeration_section">2.2.5 </span>Commas
                  </h4>
                  <div>
                     <div class="section">
                        <p>In SQL, you must use commas to separate list items, as the following example shows: </p><pre class="oac_no_warn" dir="ltr">     EXEC SQL SELECT ENAME, JOB, SAL
         INTO :EMP-NAME, :JOB-TITLE, :SALARY
         FROM EMP
         WHERE EMPNO = :EMP-NUMBER
     END-EXEC.
</pre><p>In COBOL, you can use commas or blanks to separate list items. For example, the following two statements are equivalent:</p><pre class="oac_no_warn" dir="ltr">     ADD AMT1, AMT2, AMT3 TO TOTAL-AMT. 
     ADD AMT1 AMT2 AMT3 TO TOTAL-AMT.  </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB155"></a><div class="props_rev_3"><a id="GUID-EA15DD4C-58E9-4EC5-B731-776DEE876C60" name="GUID-EA15DD4C-58E9-4EC5-B731-776DEE876C60"></a><h4 id="LNPCB-GUID-EA15DD4C-58E9-4EC5-B731-776DEE876C60" class="sect4"><span class="enumeration_section">2.2.6 </span>Comments
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can place COBOL comment lines within SQL statements. COBOL comment lines start with an asterisk (*) in the indicator area. </p>
                        <p>You can also place ANSI SQL-style comments starting with "- - " within SQL statements at the end of a line (but not after the last line of the SQL statement).</p>
                        <p>COBOL comments continue for the rest of the line after these two characters: "*&gt;".</p>
                        <p>You can place C-style comments (/* ... */) in SQL statements. </p>
                        <p>The following example shows all four styles of comments:<a id="d7799e1247" class="indexterm-anchor"></a><a id="d7799e1251" class="indexterm-anchor"></a><a id="d7799e1255" class="indexterm-anchor"></a><a id="d7799e1259" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     MOVE 12 TO DEPT-NUMBER. *&gt; This is the software development group.
     EXEC SQL SELECT ENAME, SAL 
*    assign column values to output host variables 
         INTO :EMP-NAME, :SALARY    -- output host variables 
     /*  column values assigned to output host variables */ 
         FROM EMP 
         WHERE DEPTNO = :DEPT-NUMBER 
     END-EXEC.    -- illegal Comment
</pre><p>You cannot nest comments or place them on the last line of a SQL statement after the terminator END-EXEC. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB156"></a><div class="props_rev_3"><a id="GUID-11119814-CA9F-49C9-BC5F-221F62EE38CA" name="GUID-11119814-CA9F-49C9-BC5F-221F62EE38CA"></a><h4 id="LNPCB-GUID-11119814-CA9F-49C9-BC5F-221F62EE38CA" class="sect4"><span class="enumeration_section">2.2.7 </span>Continuation Lines
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can continue SQL statements from one line to the next, according to the rules of COBOL, as this example shows:<a id="d7799e1296" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     EXEC SQL SELECT ENAME, SAL INTO :EMP-NAME, :SALARY FROM EMP 
         WHERE DEPTNO = :DEPT-NUMBER 
     END-EXEC. 
</pre><p>No continuation indicator is needed. </p>
                        <p>To continue a string literal from one line to the next, code the literal through column 72. On the next line, code a hyphen (-) in column 7, a quote in column 12 or beyond, and then the rest of the literal. An example follows:<a id="d7799e1306" class="indexterm-anchor"></a><a id="d7799e1310" class="indexterm-anchor"></a><a id="d7799e1314" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr"> WORKING STORAGE SECTION. 
     ... 
     EXEC SQL BEGIN DECLARE SECTION END-EXEC. 
         ... 
 01  UPDATE-STATEMENT  PIC X(80) VALUE "UPDATE EMP SET BON 
-               "US = 500 WHERE DEPTNO = 20". 
     EXEC SQL END DECLARE SECTION END-EXEC.  </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB157"></a><div class="props_rev_3"><a id="GUID-0499C071-C2AD-4FD0-8CAA-C0D952E52F4E" name="GUID-0499C071-C2AD-4FD0-8CAA-C0D952E52F4E"></a><h4 id="LNPCB-GUID-0499C071-C2AD-4FD0-8CAA-C0D952E52F4E" class="sect4"><span class="enumeration_section">2.2.8 </span>Copy Statements
                  </h4>
                  <div>
                     <div class="section">
                        <p>Copy statements are not parsed by Pro*COBOL. Therefore, files included with the COPY command should not contain definitions of Host variables or contain embedded SQL statements. Instead, use the INCLUDE precompiler statement which is documented in <span class="q">"<a href="precompiler-concepts.html#GUID-807D6563-4B0B-42C9-9B5D-6C0EC4056473">Using the INCLUDE Statement</a>"</span>. Be careful when using INCLUDE and also using DECLARE_SECTION=YES. Group items should be either placed all inside or all outside of a Declare Section.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB158"></a><div class="props_rev_3"><a id="GUID-E7244C75-5EAE-49BF-8FBD-ADE9E70BA1A2" name="GUID-E7244C75-5EAE-49BF-8FBD-ADE9E70BA1A2"></a><h4 id="LNPCB-GUID-E7244C75-5EAE-49BF-8FBD-ADE9E70BA1A2" class="sect4"><span class="enumeration_section">2.2.9 </span>Decimal-Point is Comma
                  </h4>
                  <div>
                     <div class="section">
                        <p>Pro*COBOL supports the DECIMAL-POINT IS COMMA clause in the ENVIRONMENT DIVISION. If the DECIMAL-POINT IS COMMA clause appears in the source file, then the comma will be allowed as the symbol beginning the decimal part of any numeric literals in the VALUE clauses.</p>
                        <p>        For example, the following is allowed:</p><pre class="oac_no_warn" dir="ltr">            IDENTIFICATION DIVISION.
            PROGRAM-ID.  FOO
            ENVIRONMENT DIVISION.
            CONFIGURATION   SECTION.
            SPECIAL-NAMES.
                DECIMAL-POINT IS COMMA.                *&gt;  &lt;-- **
            DATA DIVISION.
            WORKING-STORAGE SECTION.
        ...
            01  WDATA1          PIC      S9V999 VALUE  +,567. *&gt;  &lt;--- **
            01  WDATA2          PIC      S9V999 VALUE  -,234. *&gt;  &lt;--- **
        ...</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB159"></a><div class="props_rev_3"><a id="GUID-5DE2D7EE-D138-4B47-A332-D5F9653992CC" name="GUID-5DE2D7EE-D138-4B47-A332-D5F9653992CC"></a><h4 id="LNPCB-GUID-5DE2D7EE-D138-4B47-A332-D5F9653992CC" class="sect4"><span class="enumeration_section">2.2.10 </span>Delimiters
                  </h4>
                  <div>
                     <div class="section">
                        <p>The LITDELIM option specifies the delimiters for COBOL string constants and literals. If you specify LITDELIM=APOST, Pro*COBOL uses apostrophes when generating COBOL code. If you specify LITDELIM=QUOTE (default), quotation marks are used, as in <a id="d7799e1405" class="indexterm-anchor"></a><a id="d7799e1409" class="indexterm-anchor"></a><a id="d7799e1411" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     CALL "SQLROL" USING SQL-TMP0. 
</pre><p>In SQL statements, you must use quotation marks to delimit identifiers containing special or lowercase characters, as in </p><pre class="oac_no_warn" dir="ltr">     EXEC SQL CREATE TABLE "Emp2" END-EXEC.
 </pre><p>However, you must use apostrophes to delimit string constants, as in </p><pre class="oac_no_warn" dir="ltr">     EXEC SQL SELECT ENAME FROM EMP WHERE JOB = 'CLERK' END-EXEC.
 </pre><p>Regardless of which delimiter is used in the Pro*COBOL source file, Pro*COBOL generates the delimiter specified by the LITDELIM value.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB160"></a><div class="props_rev_3"><a id="GUID-74C30E48-2B20-4D61-8556-9EB97C31E368" name="GUID-74C30E48-2B20-4D61-8556-9EB97C31E368"></a><h4 id="LNPCB-GUID-74C30E48-2B20-4D61-8556-9EB97C31E368" class="sect4"><span class="enumeration_section">2.2.11 </span>Division Headers that are Optional
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following division headers are optional:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>IDENTIFICATION DIVISION</p>
                           </li>
                           <li>
                              <p>ENVIRONMENT DIVISION</p>
                           </li>
                           <li>
                              <p>DATA DIVISION</p>
                           </li>
                        </ul>
                        <p>Note that the PROCEDURE DIVISION header is not optional. The following source can be precompiled:</p><pre class="oac_no_warn" dir="ltr">*IDENTIFICATION DIVISION header is optional
 PROGRAM-ID.     HELLO.
*ENVIRONMENT DIVISION header is optional
 CONFIGURATION SECTION.
*DATA DIVISION header is optional
 WORKING-STORAGE SECTION.
 PROCEDURE       DIVISION.
     DISPLAY "Hello World!".
     STOP RUN.</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB161"></a><div class="props_rev_3"><a id="GUID-D84FC56A-6E8D-49B8-9E65-A250DE4F4765" name="GUID-D84FC56A-6E8D-49B8-9E65-A250DE4F4765"></a><h4 id="LNPCB-GUID-D84FC56A-6E8D-49B8-9E65-A250DE4F4765" class="sect4"><span class="enumeration_section">2.2.12 </span>Embedded SQL Syntax
                  </h4>
                  <div>
                     <div class="section">
                        <p>To use a SQL statement in your Pro*COBOL program, precede the SQL statement with the EXEC SQL clause, and end the statement with the END-EXEC keyword.<a id="d7799e1496" class="indexterm-anchor"></a><a id="d7799e1500" class="indexterm-anchor"></a><a id="d7799e1504" class="indexterm-anchor"></a><a id="d7799e1508" class="indexterm-anchor"></a> 
                        </p>
                        <div class="infoboxnotealso" id="GUID-D84FC56A-6E8D-49B8-9E65-A250DE4F4765__GUID-C6D923C0-7F18-4E98-8676-D31D4F149D45">
                           <p class="notep1">See Also:</p><a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span>.</a> for more information about Embedded SQL syntax.
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB162"></a><div class="props_rev_3"><a id="GUID-7DA7195E-2162-4215-BE01-8601BEFF127D" name="GUID-7DA7195E-2162-4215-BE01-8601BEFF127D"></a><h4 id="LNPCB-GUID-7DA7195E-2162-4215-BE01-8601BEFF127D" class="sect4"><span class="enumeration_section">2.2.13 </span>Figurative Constants
                  </h4>
                  <div>
                     <div class="section">
                        <p>Figurative constants, such as HIGH-VALUE, ZERO, and SPACE, cannot be used in SQL statements. For example, the following is <span class="italic">invalid</span>:<a id="d7799e1546" class="indexterm-anchor"></a><a id="d7799e1550" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     EXEC SQL DELETE FROM EMP WHERE COMM = ZERO END-EXEC.
 </pre><p>Instead, use the following:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL DELETE FROM EMP WHERE COMM = 0 END-EXEC. </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB163"></a><div class="props_rev_3"><a id="GUID-AE3C8B21-AB62-454C-8749-17A31CE875F4" name="GUID-AE3C8B21-AB62-454C-8749-17A31CE875F4"></a><h4 id="LNPCB-GUID-AE3C8B21-AB62-454C-8749-17A31CE875F4" class="sect4"><span class="enumeration_section">2.2.14 </span>File Length
                  </h4>
                  <div>
                     <div class="section">
                        <p>Pro*COBOL cannot process arbitrarily long source files. Some of the variables used internally limit the size of the generated file. There is no absolute limit to the number of lines allowed, but the following aspects of the source file are contributing factors to the file-size constraint:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Complexity of the embedded SQL statements (for example, the number of bind and define variables)</p>
                           </li>
                           <li>
                              <p>Whether a database name is used (for example, connecting to a database with an AT clause)</p>
                           </li>
                           <li>
                              <p>Number of embedded SQL statements</p>
                           </li>
                        </ul>
                        <p>To prevent problems related to this limitation, use multiple program units to sufficiently reduce the size of the source files.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB164"></a><div class="props_rev_3"><a id="GUID-2A1A2FFF-D5B6-4F9D-8372-511762601432" name="GUID-2A1A2FFF-D5B6-4F9D-8372-511762601432"></a><h4 id="LNPCB-GUID-2A1A2FFF-D5B6-4F9D-8372-511762601432" class="sect4"><span class="enumeration_section">2.2.15 </span>FILLER is Allowed
                  </h4>
                  <div>
                     <div class="section">
                        <p>The word FILLER is allowed in host variable declarations. The word FILLER is used to specify an elementary item of a group that cannot be referred to explicitly. The following declaration is valid:</p><pre class="oac_no_warn" dir="ltr"> 01  STOCK. 
     05  DIVIDEND     PIC X(5).
     05  FILLER       PIC X.
     05  PRICE        PIC X(6).</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB165"></a><div class="props_rev_3"><a id="GUID-DBE02C96-20C8-46E7-9C85-B3A4E6276865" name="GUID-DBE02C96-20C8-46E7-9C85-B3A4E6276865"></a><h4 id="LNPCB-GUID-DBE02C96-20C8-46E7-9C85-B3A4E6276865" class="sect4"><span class="enumeration_section">2.2.16 </span>Host Variable Names
                  </h4>
                  <div>
                     <div class="section">
                        <p>Any valid standard COBOL identifier can be used as a host variable. Variable names can be any length, but only the first 30 characters are significant. The maximum number of significant characters recognized by COBOL compilers is 30. <a id="d7799e1654" class="indexterm-anchor"></a><a id="d7799e1658" class="indexterm-anchor"></a><a id="d7799e1662" class="indexterm-anchor"></a></p>
                        <p>For portability, you may wish to restrict the length of host variable names to 18 or fewer characters (the length mandated by the SQL standard).</p>
                        <div class="infoboxnotealso" id="GUID-DBE02C96-20C8-46E7-9C85-B3A4E6276865__GUID-D5B758B4-E645-4A95-8259-92CE85A1BF2E">
                           <p class="notep1">See Also:</p><a href="reserved-words-keywords-and-namespaces.html#GUID-A408EC88-567F-4D54-8359-ABCFF421CDD7"> Reserved Words_ Keywords_ and Namespaces </a> for a list of words that have restrictions on their use in applications.
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB166"></a><div class="props_rev_3"><a id="GUID-167590B9-9985-4779-AFCF-B29D24D858BC" name="GUID-167590B9-9985-4779-AFCF-B29D24D858BC"></a><h4 id="LNPCB-GUID-167590B9-9985-4779-AFCF-B29D24D858BC" class="sect4"><span class="enumeration_section">2.2.17 </span>Hyphenated Names
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can use hyphenated host-variable names in static SQL statements but <span class="italic">not</span> in dynamic SQL. For example, the following usage is <span class="italic">invalid</span>:<a id="d7799e1706" class="indexterm-anchor"></a><a id="d7799e1710" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     MOVE "DELETE FROM EMP WHERE EMPNO = :EMP-NUMBER" TO SQLSTMT. 
     EXEC SQL PREPARE STMT1 FROM SQLSTMT END-EXEC. </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB167"></a><div class="props_rev_3"><a id="GUID-0B6A0DF7-A963-480F-B112-913658099FC7" name="GUID-0B6A0DF7-A963-480F-B112-913658099FC7"></a><h4 id="LNPCB-GUID-0B6A0DF7-A963-480F-B112-913658099FC7" class="sect4"><span class="enumeration_section">2.2.18 </span>Level Numbers
                  </h4>
                  <div>
                     <div class="section">
                        <p>When declaring host variables, you can use level numbers 01 through 49, and 77. Pro*COBOL does not allow variables containing the VARYING clause or pseudo-type variables (these datatypes are prefixed with "SQL- ") to be declared level 49 or 77.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB168"></a><div class="props_rev_3"><a id="GUID-5F903960-5E5F-4739-8564-303E130B7518" name="GUID-5F903960-5E5F-4739-8564-303E130B7518"></a><h4 id="LNPCB-GUID-5F903960-5E5F-4739-8564-303E130B7518" class="sect4"><span class="enumeration_section">2.2.19 </span>MAXLITERAL Default
                  </h4>
                  <div>
                     <div class="section">
                        <p>With the MAXLITERAL option, you can specify the maximum length of string literals generated by Pro*COBOL, so that compiler limits are not exceeded. For Pro*COBOL, the default value is 256, but you might have to specify a lower value. On IBM-proprietary S370 operating systems it is 120. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB169"></a><div class="props_rev_3"><a id="GUID-8907EFD0-95AB-4A63-9D30-35EEA9B6D784" name="GUID-8907EFD0-95AB-4A63-9D30-35EEA9B6D784"></a><h4 id="LNPCB-GUID-8907EFD0-95AB-4A63-9D30-35EEA9B6D784" class="sect4"><span class="enumeration_section">2.2.20 </span>Multibyte Datatypes
                  </h4>
                  <div>
                     <div class="section">
                        <p>ANSI standard National Character Set datatypes are supported for handling multibyte character data. The PIC N or PIC G clause, if supported by your compiler, defines variables that store fixed-length NCHAR strings. You can store variable-length, multibyte National Character Set strings using COBOL group items consisting of a length field and a string field.<a id="d7799e1792" class="indexterm-anchor"></a></p>
                        <p>The environmental variable NLS_NCHAR is available to specify a client-side Globalization Support National Character Set. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-B7D9C340-75B1-4B84-B44E-F4CB1748262E">VARCHAR Variables</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCB170"></a><div class="props_rev_3"><a id="GUID-C4DCD14E-B24F-4FEC-93DA-FC63693C77ED" name="GUID-C4DCD14E-B24F-4FEC-93DA-FC63693C77ED"></a><h4 id="LNPCB-GUID-C4DCD14E-B24F-4FEC-93DA-FC63693C77ED" class="sect4"><span class="enumeration_section">2.2.21 </span>NULLs in SQL
                  </h4>
                  <div>
                     <div class="section">
                        <p>In SQL, a NULL represents a missing, unknown, or inapplicable column value; it equates neither to zero nor to a blank. Use the NVL function to convert NULLs to non-NULL values, use the IS [NOT] NULL comparison operator to search for NULLs, and use indicator variables to insert and test for NULLs.<a id="d7799e1835" class="indexterm-anchor"></a><a id="d7799e1839" class="indexterm-anchor"></a><a id="d7799e1843" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB171"></a><div class="props_rev_3"><a id="GUID-4FD7119F-1980-40C6-BFDE-8CDA1E6FB965" name="GUID-4FD7119F-1980-40C6-BFDE-8CDA1E6FB965"></a><h4 id="LNPCB-GUID-4FD7119F-1980-40C6-BFDE-8CDA1E6FB965" class="sect4"><span class="enumeration_section">2.2.22 </span>Paragraph and Section Names
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can associate standard COBOL paragraph and section names with SQL statements, as shown in the following example: <a id="d7799e1872" class="indexterm-anchor"></a><a id="d7799e1876" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr"> LOAD-DATA. 
     EXEC SQL 
         INSERT INTO EMP (EMPNO, ENAME, DEPTNO) 
             VALUES (:EMP-NUMBER, :EMP-NAME, :DEPT-NUMBER) 
     END-EXEC. 
</pre><p>Also, you can reference paragraph and section names in a WHENEVER ... DO or WHENEVER ... GOTO statement, as the next example shows: </p><pre class="oac_no_warn" dir="ltr"> PROCEDURE DIVISION. 
 MAIN. 
     EXEC SQL WHENEVER SQLERROR DO PERFORM SQL-ERROR END-EXEC. 
     ... 
 SQL-ERROR SECTION. 
     ... </pre><p>You must begin all paragraph names in area A.<a id="d7799e1888" class="indexterm-anchor"></a><a id="d7799e1892" class="indexterm-anchor"></a> 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB172"></a><div class="props_rev_3"><a id="GUID-E22934D1-3B04-48E0-892E-87FA54396F3D" name="GUID-E22934D1-3B04-48E0-892E-87FA54396F3D"></a><h4 id="LNPCB-GUID-E22934D1-3B04-48E0-892E-87FA54396F3D" class="sect4"><span class="enumeration_section">2.2.23 </span>REDEFINES Clause
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can use the COBOL REDEFINES clause to redefine group or elementary items. For example, the following declarations are valid:<a id="d7799e1922" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     EXEC SQL BEGIN DECLARE SECTION END-EXEC. 
 01  REC-ID   PIC X(4). 
 01  REC-NUM  REDEFINES  REC-ID  PIC S9(4) COMP. 
     EXEC SQL END DECLARE SECTION END-EXEC.
</pre><p>And:<a id="d7799e1930" class="indexterm-anchor"></a><a id="d7799e1934" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     EXEC SQL BEGIN DECLARE SECTION END-EXEC. 
  01  STOCK. 
       05  DIVIDEND     PIC X(5). 
       05  PRICE        PIC X(6). 
   01  BOND  REDEFINES  STOCK. 
       05  COUPON-RATE  PIC X(4). 
       05  PRICE        PIC X(7). 
     EXEC SQL END DECLARE SECTION END-EXEC.
</pre><p>Pro*COBOL issues no warning or error if a single INTO clause uses items from both a group item host variable and from its re-definition.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB174"></a><a id="LNPCB173"></a><div class="props_rev_3"><a id="GUID-63C7C12C-A978-448C-89F7-809A89B96F37" name="GUID-63C7C12C-A978-448C-89F7-809A89B96F37"></a><h4 id="LNPCB-GUID-63C7C12C-A978-448C-89F7-809A89B96F37" class="sect4"><span class="enumeration_section">2.2.24 </span>Relational Operators
                  </h4>
                  <div>
                     <div class="section">
                        <p>COBOL relational operators differ from their SQL equivalents, as shown in <a href="precompiler-concepts.html#GUID-63C7C12C-A978-448C-89F7-809A89B96F37__I13966">Relational Operators</a>. Furthermore, COBOL enables the use of words instead of symbols, whereas SQL does not.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-63C7C12C-A978-448C-89F7-809A89B96F37__GUID-B2BDCFB5-8771-4650-91BA-F541ED830079">
                        <p class="titleintable">Table 2-3 <span class="italic" id="GUID-63C7C12C-A978-448C-89F7-809A89B96F37__I13966"><span class="bold">Relational Operators</span></span></p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Relational Operators" summary="q" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d7799e1984">SQL Operators</th>
                                 <th align="left" valign="bottom" width="69%" id="d7799e1987">COBOL Operators</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7799e1992" headers="d7799e1984 ">
                                    <p>=</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d7799e1992 d7799e1987 ">
                                    <p>=, EQUAL TO</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7799e1999" headers="d7799e1984 ">
                                    <p>&lt; &gt;, !=, ^=</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d7799e1999 d7799e1987 ">
                                    <p>NOT=, NOT EQUAL TO</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7799e2006" headers="d7799e1984 ">
                                    <p>&gt;</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d7799e2006 d7799e1987 ">
                                    <p>&gt;, GREATER THAN</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7799e2013" headers="d7799e1984 ">
                                    <p>&lt;</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d7799e2013 d7799e1987 ">
                                    <p>&lt;, LESS THAN</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7799e2020" headers="d7799e1984 ">
                                    <p>&gt;=</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d7799e2020 d7799e1987 ">
                                    <p>&gt;=, GREATER THAN OR EQUAL TO</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d7799e2027" headers="d7799e1984 ">
                                    <p>&lt;=</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d7799e2027 d7799e1987 ">
                                    <p>&lt;=, LESS THAN OR EQUAL TO</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNPCB175"></a><div class="props_rev_3"><a id="GUID-3CDA0540-50E8-4A06-B270-52EA056F5235" name="GUID-3CDA0540-50E8-4A06-B270-52EA056F5235"></a><h4 id="LNPCB-GUID-3CDA0540-50E8-4A06-B270-52EA056F5235" class="sect4"><span class="enumeration_section">2.2.25 </span>Sentence Terminator
                  </h4>
                  <div>
                     <div class="section">
                        <p>A COBOL <span class="italic">sentence</span> includes one or more COBOL or SQL statements, or both of them, and ends with a period. In conditional sentences, only the last statement must end with a period, as the following example shows.<a id="d7799e2071" class="indexterm-anchor"></a><a id="d7799e2075" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">     IF EMP-NUMBER = ZERO 
         MOVE FALSE TO VALID-DATA 
         PERFORM GET-EMP-NUM UNTIL VALID-DATA = TRUE 
     ELSE 
         EXEC SQL DELETE FROM EMP 
             WHERE EMPNO = :EMP-NUMBER 
         END-EXEC
         ADD 1 TO DELETE-TOTAL.
     END-IF. 
</pre><p>SQL statements may be ended by a comma, a period, or another COBOL statement.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB176"></a><div class="props_rev_3"><a id="GUID-C01E658A-1EAE-4497-82DB-347217694E78" name="GUID-C01E658A-1EAE-4497-82DB-347217694E78"></a><h3 id="LNPCB-GUID-C01E658A-1EAE-4497-82DB-347217694E78" class="sect3"><span class="enumeration_section">2.3 </span>The Declare Section
               </h3>
               <div>
                  <p>Passing data between the database server and your application program requires host variables and error handling. This section shows you how to meet these requirements.</p>
               </div><a id="LNPCB177"></a><div class="props_rev_3"><a id="GUID-FD2C19FC-BFF2-4643-9D8B-D6E7567D4161" name="GUID-FD2C19FC-BFF2-4643-9D8B-D6E7567D4161"></a><h4 id="LNPCB-GUID-FD2C19FC-BFF2-4643-9D8B-D6E7567D4161" class="sect4"><span class="enumeration_section">2.3.1 </span>Contents of a Declare Section
                  </h4>
                  <div>
                     <div class="section">
                        <p>A Declare Section begins with the statement<a id="d7799e2132" class="indexterm-anchor"></a><a id="d7799e2136" class="indexterm-anchor"></a><a id="d7799e2140" class="indexterm-anchor"></a>:
                        </p><pre class="oac_no_warn" dir="ltr">     EXEC SQL BEGIN DECLARE SECTION END-EXEC.
</pre><p>and ends with the statement:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL END DECLARE SECTION END-EXEC.
</pre><p>Between these two statements only the following are allowed:<a id="d7799e2153" class="indexterm-anchor"></a><a id="d7799e2157" class="indexterm-anchor"></a></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Host-variable and indicator-variable declarations </p>
                           </li>
                           <li>
                              <p>Non-host COBOL variables</p>
                           </li>
                           <li>
                              <p>EXEC SQL DECLARE statements</p>
                           </li>
                           <li>
                              <p>EXEC SQL INCLUDE statements </p>
                           </li>
                           <li>
                              <p>EXEC SQL VAR statements </p>
                           </li>
                           <li>
                              <p>EXEC ORACLE statements</p>
                           </li>
                           <li>
                              <p>COBOL comments</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCB178"></a><div class="props_rev_3"><a id="GUID-C72ABB28-EFD4-4D2D-9A86-9EAC44A4F4FB" name="GUID-C72ABB28-EFD4-4D2D-9A86-9EAC44A4F4FB"></a><h5 id="LNPCB-GUID-C72ABB28-EFD4-4D2D-9A86-9EAC44A4F4FB" class="sect5"><span class="enumeration_section">2.3.1.1 </span>An Example
                     </h5>
                     <div>
                        <div class="section">
                           <p>In the following example, you declare four host variables for use later in your program.  <a id="d7799e2208" class="indexterm-anchor"></a> 
                           </p><pre class="oac_no_warn" dir="ltr"> WORKING-STORAGE SECTION.
   ...
     EXEC SQL BEGIN DECLARE SECTION END-EXEC. 
         ...
 01  EMP-NUMBER     PIC 9(4)  COMP VALUE ZERO.
 01  EMP-NAME       PIC X(10) VARYING.
 01  SALARY         PIC S9(5)V99 COMP-3 VALUE ZERO.
 01  COMMISSION     PIC S9(5)V99 COMP-3 VALUE ZERO.
     EXEC SQL END DECLARE SECTION END-EXEC.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNPCB179"></a><div class="props_rev_3"><a id="GUID-F8F34F95-35BE-4A4C-9B0A-BF83786FDABE" name="GUID-F8F34F95-35BE-4A4C-9B0A-BF83786FDABE"></a><h4 id="LNPCB-GUID-F8F34F95-35BE-4A4C-9B0A-BF83786FDABE" class="sect4"><span class="enumeration_section">2.3.2 </span>Precompiler Option DECLARE_SECTION
                  </h4>
                  <div>
                     <div class="section">
                        <p>The Declare Section is optional. For backward compatibility with releases prior to 8.0, for which it was required, Pro*COBOL provides a command-line precompiler option for explicit control over whether only declarations in the Declare Section are allowed as host variables. This option is:</p>
                        <p>DECLARE_SECTION={YES | NO} (default is NO)</p>
                        <p>You must use the DECLARE_SECTION option on the command line or in a configuration file. </p>
                        <p>When MODE=ORACLE and DECLARE_SECTION=YES, only variables declared inside the Declare Section are allowed as host variables. When MODE=ANSI then DECLARE_SECTION is implicitly set to YES.</p>
                        <p>If DECLARE_SECTION is set to YES, then you must declare all program variables used in SQL statements inside the Declare Section. If DECLARE_SECTION is set to NO, then it is optional to use a Declare Section. In this case, declarations of host variables and indicator variables can be made either inside or outside a Declare Section. This optional behavior is a change from Release 8.0 and earlier releases.</p>
                        <p>Multiple Declare Sections are allowed for each precompiled unit. Furthermore, a host program can contain several independently precompiled units.<a id="d7799e2256" class="indexterm-anchor"></a></p>
                        <div class="infoboxnotealso" id="GUID-F8F34F95-35BE-4A4C-9B0A-BF83786FDABE__GUID-5688F9A4-25D3-4F3F-B4FD-7FAD330A0259">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="precompiler-options.html#GUID-B8F5D2F9-D077-4CC0-B8A5-0B4CB1D6425D">Macro and Micro Options</a>"</span> for more information about macro and micro options.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="precompiler-options.html#GUID-A4AB5DC2-8F05-47BD-8299-3A50DE9C6A5E">DECLARE_SECTION</a>"</span> for more details of the option.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB180"></a><div class="props_rev_3"><a id="GUID-807D6563-4B0B-42C9-9B5D-6C0EC4056473" name="GUID-807D6563-4B0B-42C9-9B5D-6C0EC4056473"></a><h4 id="LNPCB-GUID-807D6563-4B0B-42C9-9B5D-6C0EC4056473" class="sect4"><span class="enumeration_section">2.3.3 </span>Using the INCLUDE Statement
                  </h4>
                  <div>
                     <p>The INCLUDE statement lets you copy files into your host program, as the following example shows: </p><pre class="oac_no_warn" dir="ltr">*    Copy in the SQL Communications Area (SQLCA) 
     EXEC SQL INCLUDE SQLCA END-EXEC. 
*    Copy in the Oracle Communications Area (ORACA) 
     EXEC SQL INCLUDE ORACA END-EXEC. 
</pre><p>You can INCLUDE any file. When you precompile your Pro*COBOL program, each EXEC SQL INCLUDE statement is replaced by a copy of the file named in the statement.<a id="d7799e2305" class="indexterm-anchor"></a></p>
                  </div><a id="LNPCB181"></a><div class="props_rev_3"><a id="GUID-7A97367A-7480-44F6-9BB9-FF1E010BB27D" name="GUID-7A97367A-7480-44F6-9BB9-FF1E010BB27D"></a><h5 id="LNPCB-GUID-7A97367A-7480-44F6-9BB9-FF1E010BB27D" class="sect5"><span class="enumeration_section">2.3.3.1 </span>Filename Extensions
                     </h5>
                     <div>
                        <div class="section">
                           <p>If your system uses file extensions but you do not specify one, Pro*COBOL assumes the default extension for source files (usually COB). For more information, see your Oracle system-specific documentation.<a id="d7799e2334" class="indexterm-anchor"></a> 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCB182"></a><div class="props_rev_3"><a id="GUID-29FE45D4-3676-45B1-8866-AE6F3A20AA12" name="GUID-29FE45D4-3676-45B1-8866-AE6F3A20AA12"></a><h5 id="LNPCB-GUID-29FE45D4-3676-45B1-8866-AE6F3A20AA12" class="sect5"><span class="enumeration_section">2.3.3.2 </span>Search Paths
                     </h5>
                     <div>
                        <p>If your system uses directories, you can set a search path for included files using the INCLUDE option, as follows:</p><pre class="oac_no_warn" dir="ltr">INCLUDE=<span class="italic">path</span> 
</pre><p>where <span class="italic">path</span> defaults to the current directory.
                        </p>
                        <p>Pro*COBOL first searches the current directory, then the directory specified by the INCLUDE option, and finally the directory for standard INCLUDE files. You need not specify a path for standard files such as the SQLCA and ORACA. However, a path is required for nonstandard files unless they are stored in the current directory.<a id="d7799e2375" class="indexterm-anchor"></a></p>
                        <p>You can also specify multiple paths on the command line, as follows: </p><pre class="oac_no_warn" dir="ltr">... INCLUDE=&lt;path1&gt; INCLUDE=&lt;path2&gt; ... 
</pre><p>When multiple paths are specified, Pro*COBOL searches the current directory first, then the <span class="italic">path1</span> directory, then the <span class="italic">path2</span> directory, and so on. The directory containing standard INCLUDE files is searched last. The path syntax is system specific. For more information, see your Oracle system-specific documentation.
                        </p>
                        <p>Remember that Pro*COBOL searches for a file in the current directory first even if you specify a search path. If the file you want to INCLUDE is in another directory, make sure no file with the same name is in the current directory or any other directory that precedes it in the search path. If your operating system is case sensitive, be sure to specify the same upper/lowercase filename under which the file is stored.<a id="d7799e2393" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB183"></a><div class="props_rev_3"><a id="GUID-A0BFB23E-4234-409F-906A-3185E866F7BC" name="GUID-A0BFB23E-4234-409F-906A-3185E866F7BC"></a><h3 id="LNPCB-GUID-A0BFB23E-4234-409F-906A-3185E866F7BC" class="sect3"><span class="enumeration_section">2.4 </span>Nested Programs
               </h3>
               <div>
                  <p>Nesting programs in COBOL means that you place one program inside another. The contained programs may reference some of the resources of the programs that contain them. The names within the higher-level program and the nested program can be the same, and describe different data items without conflict, because the names are known only within the programs. However, names described in the Configuration Section of the higher-level program can be referenced in the nested program.</p>
                  <p>Some compilers do not support the GLOBAL clause. Pro*COBOL supports nested programs by generating code that contains GLOBAL clauses. To avoid generating GLOBAL clauses unconditionally, specify the precompiler option NESTED=NO. NESTED (=YES or NO) defaults to YES and can be used in configuration files, or on the command line, but not inline (EXEC ORACLE statement). </p>
                  <p>The higher-level program can contain several nested programs. Likewise, nested programs can have programs nested within them. You must place the nested program directly before the END PROGRAM header of the program in which it is nested.</p>
                  <p>You can call a nested program only by a program in which it is either directly or indirectly nested. If you want a nested program to be called by any program, even one on a different branch of the nested tree structure, you code the COMMON clause in the PROGRAM-ID paragraph of the nested program. You can code COMMON only for nested programs:</p><pre class="oac_no_warn" dir="ltr"> PROGRAM-ID.  &lt;nested-program-name&gt; COMMON.
</pre><p>You can code the GLOBAL phrase for File Definitions and level 01 data items (any subordinate items automatically become global). This enables them to be referenced in all subprograms directly or indirectly contained within them. You code GLOBAL on the higher-level program. If the nested program defines the same name as one declared GLOBAL in a higher-level program, COBOL uses the declaration within the nested program. If the data item contains a REDEFINES clause, GLOBAL must follow it.</p><pre class="oac_no_warn" dir="ltr"> FD file-name GLOBAL ...
 01 data-name1 GLOBAL ...
 01 data-name2 REDEFINES data-name3 GLOBAL ...</pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="precompiler-options.html#GUID-8FA5E1B2-2B76-4BBF-BA9B-CF31814BB2D0">NESTED</a></li>
                     </ul>
                  </div>
               </div><a id="LNPCB184"></a><div class="props_rev_3"><a id="GUID-1F3428EE-D50F-4399-AE8D-0AB6E887DDEB" name="GUID-1F3428EE-D50F-4399-AE8D-0AB6E887DDEB"></a><h4 id="LNPCB-GUID-1F3428EE-D50F-4399-AE8D-0AB6E887DDEB" class="sect4"><span class="enumeration_section">2.4.1 </span>Support for Nested Programs
                  </h4>
                  <div>
                     <p>Pro*COBOL enables you to store nested programs with embedded SQL within a single source file. All 01 level items, which are marked as global in a containing program and are valid host variables at the containing program level, are usable as valid host variables in any programs directly or indirectly contained by the containing program. Consider the following example:</p><pre class="oac_no_warn" dir="ltr"> IDENTIFICATION DIVISION.
 PROGRAM-ID. MAINPROG.
 ENVIRONMENT DIVISION.
 DATA DIVISION.
 WORKING-STORAGE SECTION.

     EXEC SQL BEGIN DECLARE SECTION END-EXEC.
 01 REC1  GLOBAL.
           05    VAR1   PIC X(10).
           05    VAR2   PIC X(10).
 01 VAR1  PIC X(10) GLOBAL.
     EXEC SQL END DECLARE SECTION END-EXEC.

 PROCEDURE DIVISION.
     ...
     &lt;main program statements&gt;
     ...
 IDENTIFICATION DIVISION.
    PROGRAM-ID. NESTEDPROG.
 ENVIRONMENT DIVISION.
 DATA DIVISION.
 WORKING-STORAGE SECTION.

 01 VAR1   PIC S9(4).

 PROCEDURE DIVISION.
     ...
     EXEC SQL SELECT X, Y INTO :REC1 FROM ... END-EXEC.

     EXEC SQL SELECT X INTO :VAR1 FROM ... END-EXEC.

     EXEC SQL SELECT X INTO :REC1.VAR1 FROM ... END-EXEC.
     ...
 END PROGRAM NESTEDPROG.
 END PROGRAM MAINPROG.
</pre><p>The main program declares the host variable REC1 as global, and thus the nested program can use REC1 in the first select statement without having to declare it. Since VAR1 is declared as a global variable and also as a local variable in the nested program, the second select statement will use the VAR1 declared as S9(4), overriding the global declaration. In the third select statement, the global VAR1 of REC1 declared as PIC X(10) is used. </p>
                     <p>The previous paragraph describes the results when DECLARE_SECTION=NO is used. When DECLARE_SECTION=YES, Pro*COBOL will not recognize host variables <span class="italic">unless</span> they are declared inside a Declare Section. If the preceding program is precompiled with DECLARE_SECTION=YES, then the second select statement would result in an ambiguous host variable error. The first and third select statements would function the same. 
                     </p>
                     <p>Note: Recursive nested programs are not supported</p>
                  </div><a id="LNPCB185"></a><div class="props_rev_3"><a id="GUID-40835174-7D42-4B75-96ED-DD6A041E0C88" name="GUID-40835174-7D42-4B75-96ED-DD6A041E0C88"></a><h5 id="LNPCB-GUID-40835174-7D42-4B75-96ED-DD6A041E0C88" class="sect5"><span class="enumeration_section">2.4.1.1 </span>Declaring the SQLCA
                     </h5>
                     <div>
                        <p>For information on declaring the SQLCA for nested programs, the included SQLCA definition provided will be declared as global, so the declaration of SQLCA is only required in the higher-level program. The SQLCA can change each time a new SQL statement is executed. The SQLCA provided can always be modified to remove the global specification if you want to declare additional SQLCA areas in the nested programs. This also applies to SQLDA and ORACA.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="precompiler-concepts.html#GUID-BFA36F8F-0F82-45E3-8558-1CA695A3DA7B">SQLCA Status Variable</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNPCB186"></a><div class="props_rev_3"><a id="GUID-0F2385E0-D11F-470C-8CEF-A4AB50D33D33" name="GUID-0F2385E0-D11F-470C-8CEF-A4AB50D33D33"></a><h5 id="LNPCB-GUID-0F2385E0-D11F-470C-8CEF-A4AB50D33D33" class="sect5"><span class="enumeration_section">2.4.1.2 </span>Nested Program Example
                     </h5>
                     <div>
                        <p>See SAMPLE13.PCO in the demo directory<a id="d7799e2532" class="indexterm-anchor"></a>.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB187"></a><div class="props_rev_3"><a id="GUID-945BCD1F-E820-4AF1-BCAD-1C09DEBA2BB0" name="GUID-945BCD1F-E820-4AF1-BCAD-1C09DEBA2BB0"></a><h3 id="LNPCB-GUID-945BCD1F-E820-4AF1-BCAD-1C09DEBA2BB0" class="sect3"><span class="enumeration_section">2.5 </span>Conditional Precompilations
               </h3>
               <div>
                  <p>Conditional precompilation includes (or excludes) sections of code in your host program based on certain conditions. For example, you might want to include one section of code when precompiling under UNIX and another section when precompiling under VMS. Conditional precompilation lets you write programs that can run in different environments.<a id="d7799e2561" class="indexterm-anchor"></a><a id="d7799e2565" class="indexterm-anchor"></a></p>
                  <p>Conditional sections of code are marked by statements that define the environment and actions to take. You can code host-language statements as well as EXEC SQL statements in these sections. The following statements let you exercise conditional control over precompilation:<a id="d7799e2569" class="indexterm-anchor"></a><a id="d7799e2571" class="indexterm-anchor"></a><a id="d7799e2573" class="indexterm-anchor"></a><a id="d7799e2575" class="indexterm-anchor"></a><a id="d7799e2577" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">*   -- define a symbol
     EXEC ORACLE DEFINE symbol END-EXEC.
*    -- if symbol is defined
     EXEC ORACLE IFDEF symbol  END-EXEC.
*   -- if symbol is not defined
     EXEC ORACLE IFNDEF symbol END-EXEC.
*            -- otherwise  
     EXEC ORACLE ELSE END-EXEC.
*           -- end this control block 
     EXEC ORACLE ENDIF END-EXEC.
</pre><p>A conditional statement must be terminated with<code class="codeph"> END-EXEC</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-945BCD1F-E820-4AF1-BCAD-1C09DEBA2BB0__GUID-7BCA471F-CE66-466A-BB6B-5B253873EC90">
                     <p class="notep1">Note:</p>
                     <p>The conditional compilation feature of your compiler may not be supported by Pro*COBOL.</p>
                  </div>
               </div><a id="LNPCB188"></a><div class="props_rev_3"><a id="GUID-E5A46D9E-7A69-4D12-8185-2E2E3A5474A9" name="GUID-E5A46D9E-7A69-4D12-8185-2E2E3A5474A9"></a><h4 id="LNPCB-GUID-E5A46D9E-7A69-4D12-8185-2E2E3A5474A9" class="sect4"><span class="enumeration_section">2.5.1 </span>An Example
                  </h4>
                  <div>
                     <div class="section">
                        <p>In the following example, the SELECT statement is precompiled only when the symbol <span class="italic">SITE2</span> is defined:<a id="d7799e2617" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     EXEC ORACLE IFDEF SITE2 END-EXEC.
     EXEC SQL SELECT DNAME 
        INTO :DEPT-NAME 
        FROM DEPT 
        WHERE DEPTNO = :DEPT-NUMBER
     EXEC ORACLE ENDIF END-EXEC.
</pre><p>Blocks of conditions can be nested as shown in the following example: </p><pre class="oac_no_warn" dir="ltr">     EXEC ORACLE IFDEF OUTER END-EXEC. 
     EXEC ORACLE IFDEF INNER END-EXEC. 
     ... 
     EXEC ORACLE ENDIF END-EXEC. 
     EXEC ORACLE ENDIF END-EXEC. 
</pre><p>You can "Comment out" host-language or embedded SQL code by placing it between IFDEF and ENDIF and <span class="italic">not</span> defining the symbol.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB189"></a><div class="props_rev_3"><a id="GUID-1252DB09-4F2B-4717-8591-CA2BEA1C49B5" name="GUID-1252DB09-4F2B-4717-8591-CA2BEA1C49B5"></a><h4 id="LNPCB-GUID-1252DB09-4F2B-4717-8591-CA2BEA1C49B5" class="sect4"><span class="enumeration_section">2.5.2 </span>Defining Symbols
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can define a symbol in two ways. Either include the statement<a id="d7799e2657" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">     EXEC ORACLE DEFINE symbol END-EXEC.
</pre><p>in your host program or define the symbol on the command line using the syntax </p><pre class="oac_no_warn" dir="ltr">... INAME=filename ... DEFINE=symbol 
</pre><p>where <span class="italic">symbol</span> is not case-sensitive. 
                        </p>
                        <p>Some port-specific symbols are predefined for you when Pro*COBOL is installed on your system. For example, predefined operating system symbols include CMS, MVS, UNIX, and VMS. </p>
                        <div class="infoboxnote" id="GUID-1252DB09-4F2B-4717-8591-CA2BEA1C49B5__GUID-A1F9FCF9-D2D5-4031-B1F1-71AF37E85CA6">
                           <p class="notep1">Note:</p>
                           <p>A DEFINE SYMBOL name beginning with a number, or that includes a dash, causes an unrecoverable error during precompilation. You can use underscores, and you can use numbers other than at the beginning of a DEFINE SYMBOL name.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB190"></a><div class="props_rev_3"><a id="GUID-5BBB2EA7-C46D-4D4F-B9BB-77668B2D9153" name="GUID-5BBB2EA7-C46D-4D4F-B9BB-77668B2D9153"></a><h3 id="LNPCB-GUID-5BBB2EA7-C46D-4D4F-B9BB-77668B2D9153" class="sect3"><span class="enumeration_section">2.6 </span>Separate Precompilations 
               </h3>
               <div>
                  <p>You can precompile several COBOL program modules separately and then link them into one executable program. This supports modular programming, which is required when the functional components of a program are written and debugged by different programmers. The individual program modules need not be written in the same language.<a id="d7799e2702" class="indexterm-anchor"></a></p>
               </div><a id="LNPCB191"></a><div class="props_rev_3"><a id="GUID-1812416E-8E90-45F4-A219-13175B8E66E5" name="GUID-1812416E-8E90-45F4-A219-13175B8E66E5"></a><h4 id="LNPCB-GUID-1812416E-8E90-45F4-A219-13175B8E66E5" class="sect4"><span class="enumeration_section">2.6.1 </span>Guidelines
                  </h4>
                  <div>
                     <p>The following guidelines will help you avoid some common problems.<a id="d7799e2730" class="indexterm-anchor"></a><a id="d7799e2734" class="indexterm-anchor"></a></p>
                  </div><a id="LNPCB192"></a><div class="props_rev_3"><a id="GUID-B8F861D7-F6A1-4112-BB9A-A795E43F7EA6" name="GUID-B8F861D7-F6A1-4112-BB9A-A795E43F7EA6"></a><h5 id="LNPCB-GUID-B8F861D7-F6A1-4112-BB9A-A795E43F7EA6" class="sect5"><span class="enumeration_section">2.6.1.1 </span>Referencing Cursors
                     </h5>
                     <div>
                        <p>Cursor names are SQL identifiers, whose scope is the precompilation unit. Hence, cursor operations cannot span precompilation units (files). That is, you cannot declare a cursor in one file and open or fetch from it in another file, so when doing a separate precompilation, make sure all definitions and references to a given cursor are in one file.<a id="d7799e2762" class="indexterm-anchor"></a><a id="d7799e2766" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="LNPCB193"></a><div class="props_rev_3"><a id="GUID-E63C977F-973B-4285-8D5C-82C6EA62F34B" name="GUID-E63C977F-973B-4285-8D5C-82C6EA62F34B"></a><h5 id="LNPCB-GUID-E63C977F-973B-4285-8D5C-82C6EA62F34B" class="sect5"><span class="enumeration_section">2.6.1.2 </span>Specifying MAXOPENCURSORS
                     </h5>
                     <div>
                        <div class="section">
                           <p>When you precompile the program module that connects to Oracle, specify a value for MAXOPENCURSORS that is high enough for any of the program modules. If you use it for another program module, MAXOPENCURSORS is ignored. Only the value in effect for the connect is used at run time.<a id="d7799e2795" class="indexterm-anchor"></a><a id="d7799e2799" class="indexterm-anchor"></a></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCB194"></a><div class="props_rev_3"><a id="GUID-9BB4F454-0D93-4721-B5EC-708373A1915D" name="GUID-9BB4F454-0D93-4721-B5EC-708373A1915D"></a><h5 id="LNPCB-GUID-9BB4F454-0D93-4721-B5EC-708373A1915D" class="sect5"><span class="enumeration_section">2.6.1.3 </span>Using a Single SQLCA
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d7799e2828" class="indexterm-anchor"></a><a id="d7799e2832" class="indexterm-anchor"></a>If you want to use just one memory area for the SQLCA, the process for doing so depends on which version of Pro*COBOL you are using.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div><a id="LNPCB195"></a><div class="props_rev_3"><a id="GUID-F85437B3-C029-4711-8999-33530662242D" name="GUID-F85437B3-C029-4711-8999-33530662242D"></a><h6 id="LNPCB-GUID-F85437B3-C029-4711-8999-33530662242D" class="sect6"><span class="enumeration_section">2.6.1.3.1 </span>Version 1.8 and Lower
                        </h6>
                        <div>
                           <div class="section">
                              <p>You must declare the SQLCA globally. You can do this by modifying the SQLCA.COB file, changing the line</p><pre class="oac_no_warn" dir="ltr"> 01  SQLCA.
</pre><p>to</p><pre class="oac_no_warn" dir="ltr"> 01  SQLCA EXTERNAL.
</pre><p>Alternatively, you can include a hard-coded definition for SQLCA, copied from SQLCA.cob and make the aforementioned change. Note that you still have to include a definition of SQLCA in each precompiled unit.</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="LNPCB196"></a><div class="props_rev_3"><a id="GUID-AC037535-1828-4372-9148-EFE2FBBA1501" name="GUID-AC037535-1828-4372-9148-EFE2FBBA1501"></a><h6 id="LNPCB-GUID-AC037535-1828-4372-9148-EFE2FBBA1501" class="sect6"><span class="enumeration_section">2.6.1.3.2 </span>Version 2 and Later
                        </h6>
                        <div>
                           <div class="section">
                              <p>In later versions of Pro*COBOL, the SQLCA is not copied from the file system.  It is generated by the precompiler.  If you need to share the SQLCA structure in these versions, instead of this statement:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INCLUDE SQLCA END-EXEC
</pre><p>you should use the following code:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INCLUDE SQLCA.ANX END-EXEC
</pre><p>This causes the precompiler to generate the SQLCA structure with the EXTERNAL keyword added automatically.</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="LNPCB197"></a><div class="props_rev_3"><a id="GUID-12E6B06A-96DB-4B89-894A-086D4E7A8462" name="GUID-12E6B06A-96DB-4B89-894A-086D4E7A8462"></a><h5 id="LNPCB-GUID-12E6B06A-96DB-4B89-894A-086D4E7A8462" class="sect5"><span class="enumeration_section">2.6.1.4 </span>Using a Single DATE_FORMAT
                     </h5>
                     <div>
                        <p>You must use the same format string for DATE in each program module.</p>
                     </div>
                  </div>
               </div><a id="LNPCB198"></a><div class="props_rev_3"><a id="GUID-7A74C512-A874-46DE-957E-6D92E748B4E9" name="GUID-7A74C512-A874-46DE-957E-6D92E748B4E9"></a><h4 id="LNPCB-GUID-7A74C512-A874-46DE-957E-6D92E748B4E9" class="sect4"><span class="enumeration_section">2.6.2 </span>Restrictions
                  </h4>
                  <div>
                     <p>All references to an explicit cursor must be in the same program file. You cannot perform operations on a cursor that was declared in a different module. See Chapter 4 for more information about cursors.<a id="d7799e2951" class="indexterm-anchor"></a></p>
                     <p>Also, any program file that contains SQL statements must have a SQLCA that is in the scope of the local SQL statements.</p>
                  </div>
               </div>
            </div><a id="LNPCB199"></a><div class="props_rev_3"><a id="GUID-E1191EB4-BD6B-4EB7-B20E-51C92F86AEDC" name="GUID-E1191EB4-BD6B-4EB7-B20E-51C92F86AEDC"></a><h3 id="LNPCB-GUID-E1191EB4-BD6B-4EB7-B20E-51C92F86AEDC" class="sect3"><span class="enumeration_section">2.7 </span>Compiling and Linking 
               </h3>
               <div>
                  <p>To get an executable program, you must compile the source file(s) produced by Pro*COBOL, then link the resulting object module with any modules needed from SQLLIB and system-specific Oracle libraries.<a id="d7799e2981" class="indexterm-anchor"></a><a id="d7799e2983" class="indexterm-anchor"></a> 
                  </p>
                  <p>The linker resolves symbolic references in the object modules. If these references conflict, the link fails. Such conflicts can happen when you try to link third party software into a precompiled program. Not all third-party software is compatible with Oracle, so you might have problems. Check with Oracle Support Services to see if the software is supported.</p>
                  <p>Compiling and linking are system-dependent. For example, on some systems, you must turn off compiler optimization when compiling a host language program. For instructions, see your system-specific Oracle manual.</p>
               </div>
            </div><a id="LNPCB200"></a><div class="props_rev_3"><a id="GUID-1BA76AA5-1C9E-45FA-88BE-B6A5BF0DA5BA" name="GUID-1BA76AA5-1C9E-45FA-88BE-B6A5BF0DA5BA"></a><h3 id="LNPCB-GUID-1BA76AA5-1C9E-45FA-88BE-B6A5BF0DA5BA" class="sect3"><span class="enumeration_section">2.8 </span>Sample DEPT and EMP Tables
               </h3>
               <div>
                  <p>Most of the complete program examples in this guide use two sample database tables: DEPT and EMP. If they do not exist in your demo directory, create them before running the sample programs. Their definitions follow: <a id="d7799e3014" class="indexterm-anchor"></a><a id="d7799e3018" class="indexterm-anchor"></a><a id="d7799e3022" class="indexterm-anchor"></a><a id="d7799e3024" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">CREATE TABLE DEPT (DEPTNO NUMBER(2), DNAME VARCHAR2(14), LOC VARCHAR2(13));

CREATE TABLE EMP (EMPNO NUMBER(4) primary key, ENAME VARCHAR2(10), JOB VARCHAR2(9), MGR NUMBER(4), HIREDATE DATE, SAL NUMBER(7,2), COMM NUMBER(7,2), DEPTNO NUMBER(2));</pre></div><a id="LNPCB201"></a><div class="props_rev_3"><a id="GUID-8E8843F1-852C-40E9-8F96-C0BFDA8BABD2" name="GUID-8E8843F1-852C-40E9-8F96-C0BFDA8BABD2"></a><h4 id="LNPCB-GUID-8E8843F1-852C-40E9-8F96-C0BFDA8BABD2" class="sect4"><span class="enumeration_section">2.8.1 </span>Sample DEPT and EMP Data
                  </h4>
                  <div>
                     <p>Respectively, the DEPT and EMP tables contain the following rows of data:</p><pre class="oac_no_warn" dir="ltr">DEPTNO  DNAME      LOC
------- ---------- ---------
10      ACCOUNTING NEW YORK
20      RESEARCH   DALLAS
30      SALES      CHICAGO
40      OPERATIONS BOSTON

EMPNO ENAME   JOB          MGR  HIREDATE    SAL   COMM  DEPTNO
----- ------- --------- ------ --------- ------ ------ -------
 7369 SMITH   CLERK       7902 17-DEC-80    800             20
 7499 ALLEN   SALESMAN    7698 20-FEB-81   1600    300      30
 7521 WARD    SALESMAN    7698 22-FEB-81   1250    500      30
 7566 JONES   MANAGER     7839 02-APR-81   2975             20
 7654 MARTIN  SALESMAN    7698 28-SEP-81   1250   1400      30
 7698 BLAKE   MANAGER     7839 01-MAY-81   2850             30
 7782 CLARK   MANAGER     7839 09-JUN-81   2450             10
 7788 SCOTT   ANALYST     7566 19-APR-87   3000             20
 7839 KING    PRESIDENT        17-NOV-81   5000             10
 7844 TURNER  SALESMAN    7698 08-SEP-81   1500             30
 7876 ADAMS   CLERK       7788 23-MAY-87   1100             20
 7900 JAMES   CLERK       7698 03-DEC-81    950             30
 7902 FORD    ANALYST     7566 03-DEC-81   3000             20
 7934 MILLER  CLERK       7782 23-JAN-82   1300             10</pre></div>
               </div>
            </div><a id="LNPCB202"></a><div class="props_rev_3"><a id="GUID-6BDE80F2-4970-4D3B-9AE5-CCA82ADE333D" name="GUID-6BDE80F2-4970-4D3B-9AE5-CCA82ADE333D"></a><h3 id="LNPCB-GUID-6BDE80F2-4970-4D3B-9AE5-CCA82ADE333D" class="sect3"><span class="enumeration_section">2.9 </span>Sample EMP Program: SAMPLE1.PCO 
               </h3>
               <div>
                  <p>A good way to get acquainted with embedded SQL is to look at a program example. This program is SAMPLE1.PCO in the<code class="codeph"> demo </code>directory.
                  </p>
                  <p>The program logs on to the database, prompts the user for an employee number, queries the database table EMP for the employee's name, salary, and commission. The selected results are stored in host variables EMP-NAME, SALARY, and COMMISSION. The program uses the host indicator variable, COMM-IND to detect NULL values in column COMMISSION.</p>
                  <p>The paragraph DISPLAY-INFO then displays the result. </p>
                  <p>Bug 	7225844 - Following para - substituted EMP-NAME for EMP-NUMBER</p>
                  <p>The COBOL variables USERNAME, PASSWD, and EMP-NAME are declared using the VARYING clause, which enables you to use a variable-length string external Oracle datatype called VARCHAR.</p>
                  <p>The SQLCA Communications Area is included to handle errors. If an error occurs, paragraph SQL-ERROR is performed.</p>
                  <p>The BEGIN DECLARE SECTION and END DECLARE SECTION statements used are optional, unless you set the precompiler option DECLARE_SECTION to YES, or option MODE to ANSI.</p>
                  <p>The WHENEVER statement is used to handle errors.</p>
                  <p>The program ends when the user enters a zero employee number<a id="d7799e3104" class="indexterm-anchor"></a>.
                  </p>
                  <div class="infoboxnote" id="GUID-6BDE80F2-4970-4D3B-9AE5-CCA82ADE333D__GUID-C2DFA7D5-EA8F-4EAF-912C-7AE2EA4AA981">
                     <p class="notep1">Note:</p>
                     <p>For simplicity in demonstrating this feature, this example does not perform the password management techniques that a deployed system normally uses. In a production environment, follow the Oracle Database password management guidelines, and disable any sample accounts. See <a href="../dbseg/managing-security-for-application-developers.html#DBSEG50053" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for password management guidelines and other security recommendations.
                     </p>
                  </div><pre class="oac_no_warn" dir="ltr">* This program logs on to ORACLE, prompts the user for an employee number, 
* queries the database for the employee's name, salary, and commission, then
* displays the result. The program terminates when the user enters a 0.              *
       ID DIVISION.

       PROGRAM-ID. QUERY.
       ENVIRONMENT DIVISION.
       DATA DIVISION.
       WORKING-STORAGE SECTION.

           EXEC SQL BEGIN DECLARE SECTION END-EXEC.
       01  USERNAME          PIC X(10) VARYING.
       01  PASSWD            PIC X(10) VARYING.
       01  EMP-REC-VARS.
           05  EMP-NAME      PIC X(10) VARYING.
           05  EMP-NUMBER    PIC S9(4) COMP VALUE ZERO.
           05  SALARY        PIC S9(5)V99 COMP-3 VALUE ZERO.
           05  COMMISSION    PIC S9(5)V99 COMP-3 VALUE ZERO.
           05  COMM-IND      PIC S9(4) COMP VALUE ZERO.
           EXEC SQL END DECLARE SECTION END-EXEC.

           EXEC SQL INCLUDE SQLCA END-EXEC.

       01  DISPLAY-VARIABLES.
           05  D-EMP-NAME    PIC X(10).
           05  D-SALARY      PIC Z(4)9.99.
           05  D-COMMISSION  PIC Z(4)9.99.
           05  D-EMP-NUMBER  PIC 9(4).

       01 D-TOTAL-QUERIED   PIC 9(4) VALUE ZERO.
        
       PROCEDURE DIVISION.
       BEGIN-PGM.
           EXEC SQL WHENEVER SQLERROR
              DO PERFORM SQL-ERROR END-EXEC.

           PERFORM LOGON.

       QUERY-LOOP.
           DISPLAY " ".
           DISPLAY "ENTER EMP NUMBER (0 TO QUIT): "
               WITH NO ADVANCING.

           ACCEPT D-EMP-NUMBER.

           MOVE D-EMP-NUMBER TO EMP-NUMBER.
           IF (EMP-NUMBER = 0)
               PERFORM SIGN-OFF.
           MOVE SPACES TO EMP-NAME-ARR.
           EXEC SQL WHENEVER NOT FOUND GOTO NO-EMP END-EXEC.
           EXEC SQL SELECT ENAME, SAL, NVL(COMM, 0)
               INTO :EMP-NAME, :SALARY, :COMMISSION:COMM-IND
               FROM EMP
               WHERE EMPNO = :EMP-NUMBER
           END-EXEC.
           PERFORM DISPLAY-INFO.
           ADD 1 TO D-TOTAL-QUERIED.
           GO TO QUERY-LOOP.

       NO-EMP.
           DISPLAY "NOT A VALID EMPLOYEE NUMBER - TRY AGAIN.".
           GO TO QUERY-LOOP.

       LOGON.
           MOVE "SCOTT" TO USERNAME-ARR.
           MOVE 5 TO USERNAME-LEN.
           MOVE "TIGER" TO PASSWD-ARR.
           MOVE 5 TO PASSWD-LEN.
           EXEC SQL
               CONNECT :USERNAME IDENTIFIED BY :PASSWD
           END-EXEC.
           DISPLAY " ".
           DISPLAY "CONNECTED TO ORACLE AS USER: ", USERNAME-ARR.
        
       DISPLAY-INFO.
           DISPLAY " ".
           DISPLAY "EMPLOYEE    SALARY    COMMISSION".
           DISPLAY "--------    ------    ----------". 
           MOVE EMP-NAME-ARR TO D-EMP-NAME.
           MOVE SALARY TO D-SALARY.
           IF COMM-IND = -1
               DISPLAY D-EMP-NAME, D-SALARY, "          NULL"
           ELSE
               MOVE COMMISSION TO D-COMMISSION
               DISPLAY D-EMP-NAME, D-SALARY, "      ", D-COMMISSION
           END-IF.

       SIGN-OFF.
           DISPLAY " ".
           DISPLAY "TOTAL NUMBER QUERIED WAS ",
               D-TOTAL-QUERIED, ".".
           DISPLAY " ".
           DISPLAY "HAVE A GOOD DAY.".
           DISPLAY " ".
           EXEC SQL COMMIT WORK RELEASE END-EXEC.
           STOP RUN.

       SQL-ERROR.
           EXEC SQL WHENEVER SQLERROR CONTINUE END-EXEC.
           DISPLAY " ".
           DISPLAY "ORACLE ERROR DETECTED:".
           DISPLAY " ".
           DISPLAY SQLERRMC.
           EXEC SQL ROLLBACK WORK RELEASE END-EXEC.
           STOP RUN.
</pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="error-handling-and-diagnostics.html#GUID-07B14FDA-015C-4922-963E-6D4CBEDB9743">Using the SQL Communications Area</a></li>
                        <li><a href="precompiler-options.html#GUID-976DED3A-3840-48A5-B5A8-35FB91BF2A0D">MODE</a></li>
                        <li><a href="error-handling-and-diagnostics.html#GUID-A947AF06-314B-46B3-9940-A3002EC04039">WHENEVER Directive</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='13259.SDO_NFE-reference.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">
      <meta name="description" content="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">
      <title>SDO_NFE Package Subprograms</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Topology Data Model and Network Data Model Graph Developer's Guide">
      <meta property="og:description" content="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Topology Data Model and Network Data Model Graph Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-topology-data-model-and-network-data-model-graph-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T12:24:53-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94802-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="SDO_NET-reference.html" title="Previous" type="text/html">
      <link rel="next" href="book-index.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Topology Data Model and Network Data Model Graph Developer's Guide">
    <meta name="dcterms.isVersionOf" content="TOPOL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SDO_NET-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="book-index.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Topology Data Model and Network Data Model Graph Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="network-data-model.html" property="item" typeof="WebPage"><span property="name"> Network Data Model</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> SDO_NFE Package Subprograms</li>
            </ol>
            <a id="GUID-3839A614-3E16-4EC3-B449-68B105AF9136" name="GUID-3839A614-3E16-4EC3-B449-68B105AF9136"></a>
            
            <h2 id="TOPOL-GUID-3839A614-3E16-4EC3-B449-68B105AF9136" class="sect2"><span class="enumeration_chapter">7 </span> SDO_NFE Package Subprograms
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.</p>
               <p><a id="d64691e22" class="indexterm-anchor"></a><a id="d64691e26" class="indexterm-anchor"></a>To use these subprograms, you must understand the conceptual information in <a href="network-data-model-graph-overview.html#GUID-D34F1A0C-4D9B-4185-B965-43B218D3F382" title="This chapter explains the concepts and operations related to the network data model for representing capabilities or objects that are modeled as nodes and links (vertices and edges) in a graph."> Network Data Model Graph Overview</a>, and especially <a href="network-data-model-graph-overview.html#GUID-ADC9EC6C-A95C-4FEA-93E9-6BE8D79C1403" title="Network feature editing (NFE) lets you create and manage an NFE model. An NFE model extends the feature modeling capabilities by enabling you to visualize and manipulate features using Java Swing components and a PL/SQL API.">Feature Modeling Using Network Feature Editing (NFE)</a>.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670">SDO_NFE.APPLY_RULE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE">SDO_NFE.CLASSIFY_LINES_BY_SIDE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43">SDO_NFE.CREATE_MODEL_SEQUENCE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-DC7C187A-25F1-4E80-ADBF-33125A654307">SDO_NFE.CREATE_MODEL_STRUCTURE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83">SDO_NFE.CREATE_MODEL_UNDERLYING_NET</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42">SDO_NFE.CREATE_MODEL_WORKSPACE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1">SDO_NFE.DELETE_ALL_FT_LAYERS</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595">SDO_NFE.DELETE_ALL_WORKSPACES</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-D0F828D8-819E-4616-A6DD-91C586E809B5">SDO_NFE.DELETE_MODEL_STRUCTURE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32">SDO_NFE.DELETE_MODEL_WORKSPACE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739">SDO_NFE.DROP_MODEL_SEQUENCE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-260EC3EE-8582-41FD-A52D-10797DB9C943">SDO_NFE.DROP_MODEL_UNDERLYING_NETWORK</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3">SDO_NFE.GET_CONNECTION_POINT_GEOM</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78">SDO_NFE.GET_INTERACTION_GROUPS</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-B969999E-63A7-4741-A2A6-B53260B7AD72">SDO_NFE.GET_LINES_MATCH_LP_RULE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A">SDO_NFE.GET_LL_CONN_INTERSECTIONS</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB">SDO_NFE.GET_LP_CONN_INTERSECTIONS</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4">SDO_NFE.GET_MODEL_SEQUENCE_NAME</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC">SDO_NFE.GET_MODEL_TABLE_NAME</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B">SDO_NFE.GET_MODEL_UNDERLYING_NETWORK</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1">SDO_NFE.GET_NEXT_SEQUENCE_VALUE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2">SDO_NFE.GET_POINTS_MATCH_LP_RULE</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A">SDO_NFE.IMPORT_NETWORK</a><br></li>
                  <li class="ulchildlink"><a href="SDO_NFE-reference.html#GUID-0C792CC6-11A7-4434-9B85-18124880E37B">SDO_NFE.SET_MODEL_UNDERLYING_NETWORK</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="network-data-model.html#GUID-090C37E3-4092-40A6-8E29-D84DF16765BA" title="This part covers the network data model graph feature of Oracle Spatial and Graph.">Network Data Model</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670" name="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670"></a><h3 id="TOPOL-GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670" class="sect3"><span class="enumeration_section">7.1 </span>SDO_NFE.APPLY_RULE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.APPLY_RULE(
     model_id  IN NUMBER,
     rule_type IN VARCHAR2,
     rule_id   IN NUMBER);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Applies a connectivity rule over all the features contained in a specified NFE model. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-9041E46E-F554-4159-AE4B-1A0FF90EC64A">
                              <!-- --></a>rule_type
                        </dt>
                        <dd>
                           <p>Type of connectivity rule to apply: <code class="codeph">RULE_TYPE_LINE</code> or <code class="codeph">RULE_TYPE_POINT</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-B639566D-A209-40C3-B884-5CBFB13D5753">
                              <!-- --></a>rule_id
                        </dt>
                        <dd>
                           <p>ID of the connectivity rule.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The specified rule must be registered in the specified model. You can register a connectivity rule in the model tables or through the Java API.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2A513DB4-E182-43CC-9B55-0EC6699D0670__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example applies a line-line rule to any interacting lines in an NFE model that meet the connectivity rule identified by the rule ID 1.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id  NUMBER := 1;
  rule_type VARCHAR2(1) := sdo_nfe.RULE_TYPE_LINE_LINE;
  rule_id   NUMBER := 1;
BEGIN
  sdo_nfe.apply_rule( model_id, rule_type, rule_id );
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE" name="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE"></a><h3 id="TOPOL-GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE" class="sect3"><span class="enumeration_section">7.2 </span>SDO_NFE.CLASSIFY_LINES_BY_SIDE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.CLASSIFY_LINES_BY_SIDE(
     model_id    IN NUMBER,
     ll_rule_id  IN NUMBER,
     lines       IN NUMBER,
     lhs_indexes OUT DBMS_SQL,NUMBER_TABLE,
     rhs_indexes OUT DBMS_SQL,NUMBER_TABLE);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Given a set of line features that match a connectivity Line-Line rule, this procedure classifies which lines lie on the left hand side of the rule and which ones on the right hand side.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-9041E46E-F554-4159-AE4B-1A0FF90EC64A">
                              <!-- --></a>ll_rule_id
                        </dt>
                        <dd>
                           <p>Connectivity Line-Line rule identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-08A649F4-EA26-4EA8-98A6-0A92280810AF">
                              <!-- --></a>lines
                        </dt>
                        <dd>
                           <p>Set of line features that meet the rule..</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-7F84E2FD-61C6-4FDD-9373-6DCB6927C917">
                              <!-- --></a>lhs_indexes
                        </dt>
                        <dd>
                           <p>Associative array where the indexes of the lines lying on the left hand side of the rule will be stored (in the form (index, index)).</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-B639566D-A209-40C3-B884-5CBFB13D5753">
                              <!-- --></a>rhs_indexes
                        </dt>
                        <dd>
                           <p>Associative array where the indexes of the lines lying on the right hand side of the rule will be stored.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The specified rule must be registered in the specified model. You can register a connectivity rule in the model tables or through the Java API.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example first gets all the interacting groups that meet the rule with ID 1 and then classifies the lines by side. Left hand side lines are output in lhs_indexes while rhs_indexes contain the rule’s right hand side lines.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id    NUMBER := 1;
  ll_rule_id  NUMBER := 1;
  lines       SDO_INTERACT_LINE_FEAT_ARRAY;
  lhs_indexes dbms_sql.NUMBER_TABLE;  
  rhs_indexes dbms_sql.NUMBER_TABLE;
  inter_grps  SDO_INTERACTION_ARRAY;
BEGIN

  -- Get the groups of interacting features that meet the L-L Rule
  inter_grps := sdo_nfe.get_interaction_groups( model_id, sdo_nfe.RULE_TYPE_LINE_LINE, ll_rule_id );

  FOR i IN 1..inter_grps.count loop
    lines := inter_grps(i).lines;

    -- For each group, classify the lines by rule side.
    sdo_nfe.classify_lines_by_side( model_id, ll_rule_id, lines, lhs_indexes, rhs_indexes );
  END loop;

END;
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43" name="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43"></a><h3 id="TOPOL-GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43" class="sect3"><span class="enumeration_section">7.3 </span>SDO_NFE.CREATE_MODEL_SEQUENCE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.CREATE_MODEL_SEQUENCE(
     model_id      IN NUMBER,
     owner_name    IN VARCHAR2,
     aequence_name IN VARCHAR2);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Creates and registers a sequence for a model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-9041E46E-F554-4159-AE4B-1A0FF90EC64A">
                              <!-- --></a>owner_name
                        </dt>
                        <dd>
                           <p>Sequence's related table.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-B639566D-A209-40C3-B884-5CBFB13D5753">
                              <!-- --></a>aequence_name
                        </dt>
                        <dd>
                           <p>Name of the sequence to be created.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>All the sequences for the base tables are created by the <a href="SDO_NFE-reference.html#GUID-DC7C187A-25F1-4E80-ADBF-33125A654307">SDO_NFE.CREATE_MODEL_STRUCTURE</a> function, but you may need to create other sequences (such as for features).
                     </p>
                     <p>The NFE model and the sequence’s related table must exist.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example creates a sequence for the NFE model identified by the ID 1 and a table named FEATURES.</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.CREATE_MODEL_SEQUENCE(’1’,’features’,’features_seq’)</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307" name="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307"></a><h3 id="TOPOL-GUID-DC7C187A-25F1-4E80-ADBF-33125A654307" class="sect3"><span class="enumeration_section">7.4 </span>SDO_NFE.CREATE_MODEL_STRUCTURE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.CREATE_MODEL_STRUCTURE(
     model_name    IN VARCHAR2,
     edition_mode  IN NUMBER,
     versionable   IN VARCHAR2
) RETURN NUMBER;
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Creates the tables and metadata for an NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_name
                        </dt>
                        <dd>
                           <p>Name to be given to the lNFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-9041E46E-F554-4159-AE4B-1A0FF90EC64A">
                              <!-- --></a>edition_mode
                        </dt>
                        <dd>
                           <p>Edition mode. Must be <code class="codeph">SDO_NFE.FROM_SCRATCH</code> or <code class="codeph">SDO_NFE.OVER_EXIST_NETWORK</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-B639566D-A209-40C3-B884-5CBFB13D5753">
                              <!-- --></a>versionable
                        </dt>
                        <dd>
                           <p>The string value <code class="codeph">Y</code> if the model will be versionable, otherwise <code class="codeph">N</code>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function returns the new model's ID value.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DC7C187A-25F1-4E80-ADBF-33125A654307__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example creates a versionable model named <code class="codeph">MODEL01</code> with the <code class="codeph">SDO_NFE.FROM_SCRATCH</code> edition mode.
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id      NUMBER;
  model_name    VARCHAR2(50) := 'MODEL01';
  edition_mode  NUMBER       := SDO_NFE.FROM_SCRATCH;
  versionable   VARCHAR2(1)  := 'Y';
BEGIN
  model_id := SDO_NFE.create_model_structure( model_name, edition_mode, versionable );
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83" name="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83"></a><h3 id="TOPOL-GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83" class="sect3"><span class="enumeration_section">7.5 </span>SDO_NFE.CREATE_MODEL_UNDERLYING_NET
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.CREATE_MODEL_UNDERLYING_NET(
     model_id             IN NUMBER,
     network_name         IN VARCHAR2,
     num_hierarchy_levels IN NUMBER,
     is_directed          IN BOOLDEAN,
     node_with_costs      IN BOOLEAN);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Creates a spatial network and associates it to the specified NFE Model. It also creates sequences for its nodes, links, and paths, and registers them in the model's metadata.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-9041E46E-F554-4159-AE4B-1A0FF90EC64A">
                              <!-- --></a>network_name 
                        </dt>
                        <dd>
                           <p>Name of the network to be created.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-71F3A836-99A4-4CDC-8939-19039353E501">
                              <!-- --></a>num_hierarchy_levels
                        </dt>
                        <dd>
                           <p>Number of hierarchical levels for the network.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-2500ECA9-0BF6-4BF9-94E6-AACF9513AE5C">
                              <!-- --></a>is_directed
                        </dt>
                        <dd>
                           <p><code class="codeph">TRUE</code> if the network is directed.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-B639566D-A209-40C3-B884-5CBFB13D5753">
                              <!-- --></a>node_with_costs
                        </dt>
                        <dd>
                           <p><code class="codeph">TRUE</code> if the network’s nodes contain cost values.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>An NFE model with the specified ID must exist. The geometry metadata must be registered for the newly created network’s nodes and links tables.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example creates an underlying network for an NFE model and registers the geometry metadata for the network’s links and nodes tables.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id      	 NUMBER	:= 1;
  network_name          VARCHAR2(50) := 'MODEL01';
  num_hierarchy_levels  NUMBER := 1;
  is_directed           VARCHAR2(10) := 'TRUE';
  node_with_costs       VARCHAR2(10) := 'TRUE';
BEGIN
-- create underlying network
  SDO_NFE.create_model_underlying_net( model_id, network_name, num_hierarchy_levels, is_directed, node_with_costs );
-- register links and nodes tables geom metadata
  SDO_NET.insert_geom_metadata(network_name, SDO_DIM_ARRAY(SDO_DIM_ELEMENT('LONGITUDE', -180, 180, 0.5), SDO_DIM_ELEMENT('LATITUDE', -90, 90, 0.5)), 8307);
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42" name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42"></a><h3 id="TOPOL-GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42" class="sect3"><span class="enumeration_section">7.6 </span>SDO_NFE.CREATE_MODEL_WORKSPACE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.CREATE_MODEL_WORKSPACE(
     model_id              IN NUMBER,
     parent_workspace_name IN VARCHAR2,
     workspace_name        IN VARCHAR2,
     is_mbr    IN VARCHAR2,
     is_locked IN VARCHAR2,
     lower_x   IN NUMBER,
     lower_y   IN NUMBER,
     upper_x   IN NUMBER,
     upper_y   IN NUMBER);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Creates a new workspace and relates it to an NFE model. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-2EA60F65-5009-4CD3-9B40-CB603D0CCE05">
                              <!-- --></a>parent_workspace_name
                        </dt>
                        <dd>
                           <p>Name of the parent workspace.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-9041E46E-F554-4159-AE4B-1A0FF90EC64A">
                              <!-- --></a>workspace_name
                        </dt>
                        <dd>
                           <p>Name of the workspace.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-13CEEFF2-8B1B-4B7B-BF69-F7467C9C5909">
                              <!-- --></a>is_mbr
                        </dt>
                        <dd>
                           <p>The string <code class="codeph">TRUE</code> if the workspace is created for a minimum bounding rectangle (MBR) rectangular area of the model.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-7B48BE16-5E6C-4F72-ACC9-31F7F426CF22">
                              <!-- --></a>is_locked
                        </dt>
                        <dd>
                           <p>The string <code class="codeph">TRUE</code> if the workspace is locked.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-AED9778B-DD12-431A-992E-B6B373ABC283">
                              <!-- --></a>lower_x
                        </dt>
                        <dd>
                           <p>The lower x ordinate of the workspace MBR.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-0BE6CDC7-CCE3-4C9D-B346-549FB000515D">
                              <!-- --></a>lower_y
                        </dt>
                        <dd>
                           <p>The lower y ordinate of the workspace MBR.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-D2A9056C-8C7F-436D-981F-F2A81D8402E9">
                              <!-- --></a>upper_x
                        </dt>
                        <dd>
                           <p>The upper x ordinate of the workspace MBR.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-B639566D-A209-40C3-B884-5CBFB13D5753">
                              <!-- --></a>upper_y
                        </dt>
                        <dd>
                           <p>The upper y ordinate of the workspace MBR.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The NFE model must have been created with the <code class="codeph">versionable</code> option enabled.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D68977D6-C1D0-4287-8F4E-3E074D01DF42__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example creates a workspace for an NFE model.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id        NUMBER := 1;
  parent_ws_name  VARCHAR2(30) := 'LIVE';
  workspace_name  VARCHAR2(30) := 'PROJECT_V1';
  is_mbr          VARCHAR2(1) := 'Y';
  is_locked       VARCHAR2(1) := 'N';
  lower_x NUMBER := -15.575;
  lower_y       NUMBER :=  15.575;
  upper_x NUMBER := -12.825;
  upper_y NUMBER :=  28.975;
BEGIN
  SDO_NFE.create_model_workspace(model_id, parent_ws_name, workspace_name, is_mbr, is_locked, lower_x, lower_y, upper_x, upper_y);
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1" name="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1"></a><h3 id="TOPOL-GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1" class="sect3"><span class="enumeration_section">7.7 </span>SDO_NFE.DELETE_ALL_FT_LAYERS
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.DELETE_ALL_FT_LAYERS(
     model_id  IN NUMBER);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Drops all content in a specified NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This procedure is mainly used before deleting a model and its structure from the database.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example deletes all content from the model with the ID value 1.</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.DELETE_ALL_FT_LAYERS(1);</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595" name="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595"></a><h3 id="TOPOL-GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595" class="sect3"><span class="enumeration_section">7.8 </span>SDO_NFE.DELETE_ALL_WORKSPACES
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.DELETE_ALL_WORKSPACES(
     model_id  IN NUMBER);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Dropa all the workspaces related to the specified NFE model, along with their relationship to the model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This procedure is mainly used before deleting a model and its structure from the database.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example deletes all workspaces related to the model with ID value 1.</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.DELETE_ALL_WORKSPACES(1);</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5" name="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5"></a><h3 id="TOPOL-GUID-D0F828D8-819E-4616-A6DD-91C586E809B5" class="sect3"><span class="enumeration_section">7.9 </span>SDO_NFE.DELETE_MODEL_STRUCTURE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.DELETE_MODEL_STRUCTURE(
     model_id  IN NUMBER);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Drops all tables in a specified NFE model, and deletes the metadata records for the model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>Before using this procedure, you may need to do the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Delete model’s workspaces by executing the <a href="SDO_NFE-reference.html#GUID-85CAFF90-9833-4EB2-9CBD-349783FDB595">SDO_NFE.DELETE_ALL_WORKSPACES</a> procedure.
                           </p>
                        </li>
                        <li>
                           <p>Delete the model’s feature layers by executing the <a href="SDO_NFE-reference.html#GUID-A1CD2E4B-30FB-46E6-B94A-5FC1423075B1">SDO_NFE.DELETE_ALL_FT_LAYERS</a> procedure.
                           </p>
                        </li>
                        <li>
                           <p>If f the model’s edition mode is <code class="codeph">SDO_NFE.FROM_SCRATCH</code>, delete the underlying network.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D0F828D8-819E-4616-A6DD-91C586E809B5__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example the structure of the model with the ID value 1.</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.DELETE_MODEL_STRUCTURE(1);</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32" name="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32"></a><h3 id="TOPOL-GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32" class="sect3"><span class="enumeration_section">7.10 </span>SDO_NFE.DELETE_MODEL_WORKSPACE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.DELETE_MODEL_WORKSPACE(
     model_id       IN NUMBER,
     workspace_name IN VARCHAR2);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Drops a workspace along with its relationship with the specified NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-CB27054E-3A6D-4689-95D7-460B1367E0CF">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>workspace_name
                        </dt>
                        <dd>
                           <p>Name of the workspace.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p><code class="codeph">workspace_name</code> must be the name of an existing workspace under the specified NFE model. All branches of the workspace are removed.
                     </p>
                     <p>The relationship with the model is deleted from xxx_SDO_NFE_MODEL_WORKSPACE views.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FEC2D124-5DCB-41B4-9A6A-5E37ADB3DF32__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example deletes the workspace named <code class="codeph">PROJECT_V4</code> from the NFE model with the ID 1
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.DELETE_MODEL_WORKSPACE(1, 'PROJECT_V4');</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739" name="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739"></a><h3 id="TOPOL-GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739" class="sect3"><span class="enumeration_section">7.11 </span>SDO_NFE.DROP_MODEL_SEQUENCE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.DROP_MODEL_SEQUENCE(
     model_id  IN NUMBER,
     seq_name  IN VARCHAR2);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Drops a sequence along with its relationship with the specified NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-CB27054E-3A6D-4689-95D7-460B1367E0CF">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>ID of the NFE model.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>seq_name
                        </dt>
                        <dd>
                           <p>Name of the sequence.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The relationship of the sequence with the model is deleted from the table registered in SEQUENCE_REG_TAB from the xxx_SDO_NFE_MODEL_METADATA views.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B9D5FD6B-13FE-4624-B51E-8E60EADCB739__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example deletes the sequence named <code class="codeph">PIPES_FTLAY_ID_SEQ</code> from the NFE model with the ID 1.
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.DROP_MODEL_SEQUENCE(1, 'PIPES_FTLAY_ID_SEQ');</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943" name="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943"></a><h3 id="TOPOL-GUID-260EC3EE-8582-41FD-A52D-10797DB9C943" class="sect3"><span class="enumeration_section">7.12 </span>SDO_NFE.DROP_MODEL_UNDERLYING_NETWORK
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.DROP_MODEL_UNDERLYING_NETWORK
     network_name  IN VARCHAR2);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Drops a network and removes its relationship with any NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>network_name
                        </dt>
                        <dd>
                           <p>Name of the network.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The network must be bound to at least one NFE model..</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-260EC3EE-8582-41FD-A52D-10797DB9C943__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example drops the network named <code class="codeph">PIPES</code> and removes its relationship with any existing NFE model.
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.DROP_MODEL_UNDERLYING_NETWORK('PIPES');</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3" name="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3"></a><h3 id="TOPOL-GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3" class="sect3"><span class="enumeration_section">7.13 </span>SDO_NFE.GET_CONNECTION_POINT_GEOM
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_CONNECTION_POINT_GEOM(
     conn_intersection  IN SDO_INTERACTION
     ) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Given a group of interacting features (lines and/or points), calculates and returns the geometry of the point that must connect them.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>conn_intersection
                        </dt>
                        <dd>
                           <p>Interaction group of features. Set of line and/or point features that interact at a common spatial point. (The SDO_INTERACTION type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function is mainly used over a validated group of features that must be connected because of the requirement of a connectivity rule (see <a href="network-data-model-graph-overview.html#GUID-F473BF70-6DCB-4169-AE4D-A7B8B5382EFB">NFE Rules</a>). To get this group of features, use <a href="SDO_NFE-reference.html#GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB">SDO_NFE.GET_LP_CONN_INTERSECTIONS</a> for Line-Point Rules or <a href="SDO_NFE-reference.html#GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A">SDO_NFE.GET_LL_CONN_INTERSECTIONS</a> for Line-Line Rules.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C559241E-2991-461F-92D7-5D2E7AA8CBC3__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the connection point geometry for each interacting group that meets the given line-point rule.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id        NUMBER := 1;
  lp_rule_id      NUMBER := 1;
  inter_grps          SDO_INTERACTION_ARRAY;
  conn_point_geom     SDO_GEOMETRY;
BEGIN
  -- Get the groups of interacting features that meet the L-P Rule in the model
 inter_grps := sdo_nfe.get_interaction_groups( model_id, sdo_nfe.RULE_TYPE_LINE_POINT, lp_rule_id ); 
  -- Iterate through the interacting groups
 FOR i IN 1..inter_grps.count loop
  -- Get the connection point geometry for each interacting group
   conn_point_geom := sdo_nfe.get_connection_point_geom( inter_groups(i));
 END loop;
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78" name="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78"></a><h3 id="TOPOL-GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78" class="sect3"><span class="enumeration_section">7.14 </span>SDO_NFE.GET_INTERACTION_GROUPS
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_INTERACTION_GROUPS(
     model_id   IN SDO_NUMBER,
     rule_type  IN VARCHAR2,
     rule_id    IN NUMBER
     ) RETURN SDO_INTERACTION_ARRAY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Returns an array of groups of all features that are interacting at spatial points where the specified connectivity rule is being met.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>rule_type
                        </dt>
                        <dd>Connectivity rule type. Possible values: <code class="codeph">SDO_NFE.RULE_TYPE_LINE_LINE</code> or <code class="codeph">SDO_NFE.RULE_TYPE_LINE_POINT</code>.
                        </dd>
                        <dt class="dlterm"><a name="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-6C426787-AEA9-45B3-A4D1-DDCF541346B0">
                              <!-- --></a>rule_id
                        </dt>
                        <dd>Rule identifier. Must be a value from the LINE_LINE_RULE or LINE_POINT_RULE table.</dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function returns an object of type SDO_INTERACTION_ARRAY, which is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.
                     </p>
                     <p>Each group of the interacting features returned by this function is composed of all the line and point features that interact at a specific spatial point where the specified rule is being met. </p>
                     <p>By returning the whole group of all interacting features at specific points, this function can help you if you want to create a customized way of connecting features depending on which other features (meeting the rule or not) are taking part in a specified interaction point. (See the discussion of rule decision handlers under <a href="network-data-model-graph-overview.html#GUID-F473BF70-6DCB-4169-AE4D-A7B8B5382EFB">NFE Rules</a>.)
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the interacting groups which met the given line-point rule.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id        NUMBER := 1;
  lp_rule_id      NUMBER := 1;
  inter_grps          SDO_INTERACTION_ARRAY;
BEGIN
 inter_grps := sdo_nfe.get_interaction_groups( model_id, 
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72" name="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72"></a><h3 id="TOPOL-GUID-B969999E-63A7-4741-A2A6-B53260B7AD72" class="sect3"><span class="enumeration_section">7.15 </span>SDO_NFE.GET_LINES_MATCH_LP_RULE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_LINES_MATCH_LP_RULE(
     model_id    IN SDO_NUMBER,
     lp_rule_id  IN NUMBER,
     lines       IN SDO_INTERACT_LINE_FEAT_ARRAY,
     ) RETURN DBMS_SQL.NUMBER_TABLE;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Given an set of line features, calculates the group of them that match a connectivity line-point rule. Returns a DBMS_SQL.NUMBER_TABLE object with the indexes of the lines in the input array that match the line-point rule.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>lp_rule_id
                        </dt>
                        <dd>Connectivity line-point rule identifier. Must exist in the LINE_POINT_RULE table.</dd>
                        <dt class="dlterm"><a name="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-6C426787-AEA9-45B3-A4D1-DDCF541346B0">
                              <!-- --></a>lines
                        </dt>
                        <dd>Array of line features where the search will take place. (The SDO_INTERACT_LINE_FEAT_ARRAY type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function is mainly used after the <a href="SDO_NFE-reference.html#GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78">SDO_NFE.GET_INTERACTION_GROUPS</a> function, which returned a group of mixed line features where some line features matched a specific connectivity rule and some did not.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B969999E-63A7-4741-A2A6-B53260B7AD72__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example finds the lines that meet a connectivity line-point rule from interacting groups.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id    NUMBER := 1;
  lp_rule_id  NUMBER := 1;
  lines       SDO_INTERACT_LINE_FEAT_ARRAY;
  match_lines dbms_sql.NUMBER_TABLE;
  inter_grps  SDO_INTERACTION_ARRAY;
BEGIN
  -- find interaction groups
  inter_grps := sdo_nfe.get_interaction_groups( model_id, sdo_nfe.RULE_TYPE_LINE_LINE, 1 );

  FOR i IN 1..inter_grps.count loop
    lines := inter_grps(i).lines;
    match_lines := sdo_nfe.get_lines_match_lp_rule( model_id, lp_rule_id, lines );
  END loop;

END;
/</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A" name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A"></a><h3 id="TOPOL-GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A" class="sect3"><span class="enumeration_section">7.16 </span>SDO_NFE.GET_LL_CONN_INTERSECTIONS
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_LL_CONN_INTERSECTIONS(
     model_id               IN SDO_NUMBER,
     ll_rule_id             IN NUMBER,
     interaction_grp        IN OUT SDO_INTERACTION,
     rule_lhs_lines_indexes IN DBMS_SQL.NUMBER_TABLE,
     rule_rhs_lines_indexes IN DBMS_SQL.NUMBER_TABLE,
     rule_points_indexes    IN DBMS_SQL.NUMBER_TABLE,
     ) RETURN SDO_INTERACTION_ARRAY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Given a group of interacting features (lines and points) this function calculates subgroups of these features that can be connected according to the connectivity line-line rule specified, and returns the set of connectable features groups.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>ll_rule_id
                        </dt>
                        <dd>Connectivity line-line rule identifier.. Must exist in the LINE_LINE_RULE table.</dd>
                        <dt class="dlterm"><a name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-6C426787-AEA9-45B3-A4D1-DDCF541346B0">
                              <!-- --></a>interaction_grp
                        </dt>
                        <dd>Group of interacting features. (The SDO_INTERACTION type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                        </dd>
                        <dt class="dlterm"><a name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-EC85E513-86ED-4AC4-A711-91F6AF3532CF">
                              <!-- --></a>rule_lhs_lines_indexes
                        </dt>
                        <dd>Among the line features in the interacting group, indexes of the lines that match the left hand side of the line-line rule.</dd>
                        <dt class="dlterm"><a name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-BDEFFE9B-8D18-40C0-B4D5-5AF0B62CC3AE">
                              <!-- --></a>rule_rhs_lines_indexes
                        </dt>
                        <dd>Among the line features in the interacting group, indexes of the lines that match the right hand side of the line-line rule.</dd>
                        <dt class="dlterm"><a name="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-23308EC3-191E-4768-9851-F92C27301686">
                              <!-- --></a>rule_points_indexes
                        </dt>
                        <dd>Among the point features in the interacting group, indexes of the points that match the point feature specification in the line-line rule. These points are the ones to be considered in the conformation of connectable groups. </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function returns an SDO_INTERACTION_ARRAY object. (The SDO_INTERACTION_ARRAY type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                     </p>
                     <p>The indexes of LHS and RHS lines can be obtained with the <a href="SDO_NFE-reference.html#GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE">SDO_NFE.CLASSIFY_LINES_BY_SIDE</a> procedure. The indexes of the points can be obtained with the <a href="SDO_NFE-reference.html#GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2">SDO_NFE.GET_POINTS_MATCH_LP_RULE</a> function. 
                     </p>
                     <p>This function is registered by default in the <a href="network-data-model-graph-overview.html#GUID-19DD0793-146A-47E2-97C9-8FF8867A29A2" title="The rule decision handlers table contains information about the names of the Java class and/or PL/SQL procedures to be executed as decision handlers when a connectivity rule (line-line or line-point) is executed.">Rule Decision Handlers Table</a> when a line-line rule is created in a model (using the Java API). However, this function can be replaced by any other user function that calculates the group of connectable features in a customized way. See the information about Rule Decision Handlers under <a href="network-data-model-graph-overview.html#GUID-F473BF70-6DCB-4169-AE4D-A7B8B5382EFB">NFE Rules</a> for information about customizing connections (rule decision handlers).
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D4B82E71-D6C2-48C0-9B94-1AFD7522E22A__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the set of connectable feature groups for each interacting group that match a given line-line rule.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id    NUMBER := 1;
  ll_rule_id  NUMBER := 1;
  rule_lhs_lines_indexes  dbms_sql.NUMBER_TABLE;
  rule_rhs_lines_indexes  dbms_sql.NUMBER_TABLE;
  rule_points_indexes     dbms_sql.NUMBER_TABLE;
  conn_interacs           SDO_INTERACTION_ARRAY;
  inter_grps              SDO_INTERACTION_ARRAY;
BEGIN 
-- Get the groups of interacting features that meet the L-L Rule in the model
  inter_grps := sdo_nfe.get_interaction_groups( model_id, sdo_nfe.RULE_TYPE_LINE_LINE, ll_rule_id );
  FOR i IN 1..inter_grps.count loop
    -- Classify the line features by side in the L-L rule (LHS, RHS).
    sdo_nfe.classify_lines_by_side( model_id, ll_rule_id, inter_grps(i).lines, rule_lhs_lines_indexes, rule_rhs_lines_indexes );
    -- Get the specific point features that match the L-L rule.
    rule_points_indexes := sdo_nfe.get_points_match_lp_rule( model_id,  1, inter_grps(i).points );
    -- Get the group of features that can be connected according the L-L rule.
    conn_interacs := sdo_nfe.get_ll_conn_intersections( model_id, ll_rule_id, inter_grps(i), rule_lhs_lines_indexes, rule_rhs_lines_indexes, rule_points_indexes);
  END loop;
END; 
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB" name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB"></a><h3 id="TOPOL-GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB" class="sect3"><span class="enumeration_section">7.17 </span>SDO_NFE.GET_LP_CONN_INTERSECTIONS
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_LP_CONN_INTERSECTIONS(
     model_id               IN SDO_NUMBER,
     lp_rule_id             IN NUMBER,
     interaction_grp        IN OUT SDO_INTERACTION,
     rule_lhs_lines_indexes IN DBMS_SQL.NUMBER_TABLE,
     rule_rhs_lines_indexes IN DBMS_SQL.NUMBER_TABLE,
     rule_points_indexes    IN DBMS_SQL.NUMBER_TABLE,
     ) RETURN SDO_INTERACTION_ARRAY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Given a group of interacting features (lines and points) this function calculates subgroups of these features that can be connected according to the connectivity line-point rule specified, and returns the set of connectable features groups.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>lp_rule_id
                        </dt>
                        <dd>Connectivity line-point rule identifier.. Must exist in the LINE_POINT_RULE table.</dd>
                        <dt class="dlterm"><a name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-6C426787-AEA9-45B3-A4D1-DDCF541346B0">
                              <!-- --></a>interaction_grp
                        </dt>
                        <dd>Group of interacting features. (The SDO_INTERACTION type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                        </dd>
                        <dt class="dlterm"><a name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-EC85E513-86ED-4AC4-A711-91F6AF3532CF">
                              <!-- --></a>rule_lhs_lines_indexes
                        </dt>
                        <dd>Among the line features in the interacting group, indexes of the lines that match the left hand side of the line-point rule.</dd>
                        <dt class="dlterm"><a name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-BDEFFE9B-8D18-40C0-B4D5-5AF0B62CC3AE">
                              <!-- --></a>rule_rhs_lines_indexes
                        </dt>
                        <dd>Among the line features in the interacting group, indexes of the lines that match the right hand side of the line-point rule.</dd>
                        <dt class="dlterm"><a name="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-23308EC3-191E-4768-9851-F92C27301686">
                              <!-- --></a>rule_points_indexes
                        </dt>
                        <dd>Among the point features in the interacting group, indexes of the points that match the point feature specification in the line-point rule. These points are the ones to be considered in the conformation of connectable groups. </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function returns an SDO_INTERACTION_ARRAY object. (The SDO_INTERACTION_ARRAY type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                     </p>
                     <p>The indexes of LHS and RHS lines can be obtained with the <a href="SDO_NFE-reference.html#GUID-6BE8BF53-A98E-430F-AE86-01BA8991A3AE">SDO_NFE.CLASSIFY_LINES_BY_SIDE</a> procedure. The indexes of the points can be obtained with the <a href="SDO_NFE-reference.html#GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2">SDO_NFE.GET_POINTS_MATCH_LP_RULE</a> function. 
                     </p>
                     <p>This function is registered by default in the <a href="network-data-model-graph-overview.html#GUID-19DD0793-146A-47E2-97C9-8FF8867A29A2" title="The rule decision handlers table contains information about the names of the Java class and/or PL/SQL procedures to be executed as decision handlers when a connectivity rule (line-line or line-point) is executed.">Rule Decision Handlers Table</a> when a line-point rule is created in a model (using the Java API). However, this function can be replaced by any other user function that calculates the group of connectable features in a customized way. See the information about Rule Decision Handlers under <a href="network-data-model-graph-overview.html#GUID-F473BF70-6DCB-4169-AE4D-A7B8B5382EFB">NFE Rules</a> for information about customizing connections (rule decision handlers).
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-36E3EEF6-B073-4225-A9B8-1A443D38DAFB__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the group of feature that can be connected according to a given line-point rule for each interacting group.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id        NUMBER := 1;
  lp_rule_id      NUMBER := 1;
  rule_lines_indexes  dbms_sql.NUMBER_TABLE;
  rule_points_indexes dbms_sql.NUMBER_TABLE;
  conn_interacs       SDO_INTERACTION_ARRAY;
  inter_grps          SDO_INTERACTION_ARRAY;
BEGIN
  -- Get the groups of interacting features that meet the L-P Rule in the model
  inter_grps := sdo_nfe.get_interaction_groups( model_id, sdo_nfe.RULE_TYPE_LINE_POINT, lp_rule_id );

  -- For each group:
  FOR i IN 1..inter_grps.count loop
    -- Get the specific line features that match the L-P rule.
    rule_lines_indexes  := sdo_nfe.get_lines_match_lp_rule( model_id, lp_rule_id, inter_grps(i).lines );

    -- Get the specific point features that match the L-P rule.
    rule_points_indexes := sdo_nfe.get_points_match_lp_rule( model_id,  lp_rule_id, inter_grps(i).points );

    -- Get the group of features that can be connected according the L-P rule.
    conn_interacs := sdo_nfe.get_lp_conn_intersections( model_id, lp_rule_id, inter_grps(i), rule_lines_indexes, rule_points_indexes ); 
  END loop;
END;
/ 
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4" name="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4"></a><h3 id="TOPOL-GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4" class="sect3"><span class="enumeration_section">7.18 </span>SDO_NFE.GET_MODEL_SEQUENCE_NAME
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_MODEL_SEQUENCE_NAME(
     model_id  IN SDO_NUMBER,
     tab_name  IN VARCHAR2
     ) RETURN VARCHAR2;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Returns the sequence name for the specified model’s table.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>NFE model identifier.</dd>
                        <dt class="dlterm"><a name="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>tab_name
                        </dt>
                        <dd>Table name for the model.</dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The table name must exist in the TABLE_REG_TAB table, and the name of its sequence must exist in the SEQUENCE_REG_TAB table. When a new model is created using <a href="SDO_NFE-reference.html#GUID-DC7C187A-25F1-4E80-ADBF-33125A654307">SDO_NFE.CREATE_MODEL_STRUCTURE</a>, all the model’s tables and sequences are automatically registered in the appropriate views and tables. When <a href="SDO_NFE-reference.html#GUID-2C77945F-3AE4-4477-8E2C-75DF7211CB43">SDO_NFE.CREATE_MODEL_SEQUENCE</a>is executed, a sequence for the model’s table is registered.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBA0A97C-043E-43E2-A4AE-547B6BF5E5B4__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the sequence name defined for the table that holds the feature classes of the NFE model whose ID is 1.</p><pre class="oac_no_warn" dir="ltr">SELECT SDO_NFE.GET_MODEL_SEQUENCE_NAME(1, sdo_nfe.get_model_table_name(1, SDO_NFE.FT_CLASS));</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC" name="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC"></a><h3 id="TOPOL-GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC" class="sect3"><span class="enumeration_section">7.19 </span>SDO_NFE.GET_MODEL_TABLE_NAME
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_MODEL_TABLE_NAME(
     model_id    IN SDO_NUMBER,
     table_type  IN VARCHAR2
     ) RETURN VARCHAR2;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Returns the name of the table of a specified type for an NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>NFE model identifier.</dd>
                        <dt class="dlterm"><a name="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>table_type
                        </dt>
                        <dd>Type of table whose name is to be returned. For example, the value for the feature classes table is <code class="codeph">SDO_NFE.FT_CLASS</code>.
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The table name must exist in the TABLE_REG_TAB table, and the name of its sequence must exist in the SEQUENCE_REG_TAB table. When a new model is created using <a href="SDO_NFE-reference.html#GUID-DC7C187A-25F1-4E80-ADBF-33125A654307">SDO_NFE.CREATE_MODEL_STRUCTURE</a>, the names of all of the model’s tables and sequences are automatically registered in the appropriate views and tables.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8BB7170D-31C2-4207-9FB6-684C3C75F8FC__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the name of the table that holds the feature classes in the NFE model with the ID 1.</p><pre class="oac_no_warn" dir="ltr">SELECT SDO_NFE.GET_MODEL_TABLE_NAME(1, SDO_NFE.FT_CLASS);</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B" name="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B"></a><h3 id="TOPOL-GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B" class="sect3"><span class="enumeration_section">7.20 </span>SDO_NFE.GET_MODEL_UNDERLYING_NETWORK
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_MODEL_UNDERLYING_NETWORK(
     model_id    IN SDO_NUMBER
     ) RETURN VARCHAR2;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Returns the name of the network that is associated with an NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>A network is associated with an NFE model during the creation process, either when using the <a href="SDO_NFE-reference.html#GUID-AF7A7031-4BC0-4552-81FD-0CBEE68E3D83">SDO_NFE.CREATE_MODEL_UNDERLYING_NET</a> for models in the SDO_NFE.FROM_SCRATCH mode, or using <a href="SDO_NFE-reference.html#GUID-0C792CC6-11A7-4434-9B85-18124880E37B">SDO_NFE.SET_MODEL_UNDERLYING_NETWORK</a> for models in the SDO_NFE.OVER_EXIST_NETWORK mode.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the underlying network associated with an existing NFE model.</p><pre class="oac_no_warn" dir="ltr">SELECT SDO_NFE.get_model_underlying_network(1) FROM DUAL;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1" name="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1"></a><h3 id="TOPOL-GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1" class="sect3"><span class="enumeration_section">7.21 </span>SDO_NFE.GET_NEXT_SEQUENCE_VALUE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_NEXT_SEQUENCE_VALUE(
     sequence_name        IN VARCHAR2,
     seq_value_increment  IN NUMBER
     ) RETURN NUMBER;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Returns the value resulting from adding the value of the second parameter to the current value of the specified sequence.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>sequence_name
                        </dt>
                        <dd>Name of the sequence.</dd>
                        <dt class="dlterm"><a name="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>seq_value_increment
                        </dt>
                        <dd>Integer value to be added to the current value of <code class="codeph">sequence_name</code>. (If the specified value is negative, it is subtracted from the current value.)
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function does not change the INCREMENT BY value of the specified sequence or the current value of that sequence.</p>
                     <p>This function can be used to manage a block of consecutive sequence numbers.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F3499C2-B246-41E5-B1E4-8F51CC6F7CB1__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example returns the value that would result from adding 10 to the current value of a sequence named MY_SEQ.</p><pre class="oac_no_warn" dir="ltr">SELECT SDO_NFE.GET_NEXT_SEQUENCE_VALUE('my_seq', 10) FROM DUAL;</pre><p>If the current value of MY_SEQ is 100, this example returns the value 110 (100 + 10).</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2" name="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2"></a><h3 id="TOPOL-GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2" class="sect3"><span class="enumeration_section">7.22 </span>SDO_NFE.GET_POINTS_MATCH_LP_RULE
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.GET_POINTS_MATCH_LP_RULE(
     model_id    IN SDO_NUMBER,
     lp_rule_id  IN NUMBER,
     points      IN SDO_INTERACT_POINT_FEAT_ARRAY,
     ) RETURN DBMS_SQL.NUMBER_TABLE;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Given an set of point features, this function calculates the group of them that match a connectivity line-point rule. Returns a DBMS_SQL.NUMBER_TABLE object with the indexes of the points in the input array that match the line-point rule.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>lp_rule_id
                        </dt>
                        <dd>Connectivity line-point rule identifier. Must exist in the LINE_POINT_RULE table.</dd>
                        <dt class="dlterm"><a name="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-6C426787-AEA9-45B3-A4D1-DDCF541346B0">
                              <!-- --></a>points
                        </dt>
                        <dd>Array of point features where the search will take place. (The SDO_INTERACT_POINT_FEAT_ARRAY type is described in <a href="network-data-model-graph-overview.html#GUID-CE45084C-810E-431D-95CE-F7BDBF500C39">Data Types Used for NFE Connectivity Rules</a>.)
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>This function is mainly used after the <a href="SDO_NFE-reference.html#GUID-D42EBC7A-5846-40C3-9CA5-CB57420C5B78">SDO_NFE.GET_INTERACTION_GROUPS</a> function, which returned a group of mixed line features where some line features matched a specific connectivity rule and some did not.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A1D43879-584C-4BA6-8D26-EEB91AFD6EE2__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example gets the specific point features that match a line-point rule.</p><pre class="oac_no_warn" dir="ltr">DECLARE
  model_id        NUMBER := 1;
  lp_rule_id      NUMBER := 1;
  rule_points_indexes dbms_sql.NUMBER_TABLE;
  inter_grps          SDO_INTERACTION_ARRAY;
BEGIN
  -- Get the groups of interacting features that meet the L-P Rule in the model
  inter_grps := sdo_nfe.get_interaction_groups( model_id, sdo_nfe.RULE_TYPE_LINE_POINT, lp_rule_id );

  -- For each group:
  FOR i IN 1..inter_grps.count loop
    -- Get the specific point features that match the L-P rule.
    rule_points_indexes := sdo_nfe.get_points_match_lp_rule( model_id,  lp_rule_id, inter_grps(i).points );
  END loop;
END;
/
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A" name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A"></a><h3 id="TOPOL-GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A" class="sect3"><span class="enumeration_section">7.23 </span>SDO_NFE.IMPORT_NETWORK
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.IMPORT_NETWORK(
     model_id          IN NUMBER,
     model_id          IN NUMBER, 
     network_from      IN VARCHAR2,
     line_ft_layer_id  IN NUMBER, 
     line_ft_class_id  IN NUMBER, 
     point_ft_layer_id IN NUMBER, 
     point_ft_class_id IN NUMBER);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Copies the network elements from an existing network to the underlying network of an NFE model (created in the SDO_NFE.FROM_SCRATCH mode), translating every link in line features from the line feature class (<span class="italic">line_ft_class_id</span>), and every node in point features from the point feature class (<span class="italic">point_ft_class_id</span>)..
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>NFE model identifier.</dd>
                        <dt class="dlterm"><a name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-C129E55A-71B8-43F2-8924-93D5BD1E067B">
                              <!-- --></a>network_from
                        </dt>
                        <dd>Name of the network to be imported.</dd>
                        <dt class="dlterm"><a name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-39AB1612-495C-47E3-BE60-0C5E7A796B3B">
                              <!-- --></a>line_ft_layer_id
                        </dt>
                        <dd>Feature layer ID for the newly created line features (created from the link elements).</dd>
                        <dt class="dlterm"><a name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-A7933277-EE7A-41A9-B125-DA852676E7F6">
                              <!-- --></a>line_ft_class_id
                        </dt>
                        <dd>Feature class ID for the newly created line features.</dd>
                        <dt class="dlterm"><a name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-1F08A5F0-66FD-49F5-8E30-296AE156BF0C">
                              <!-- --></a>point_ft_layer_id
                        </dt>
                        <dd>Feature layer ID for the newly created point features (created from the node elements).</dd>
                        <dt class="dlterm"><a name="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-6C426787-AEA9-45B3-A4D1-DDCF541346B0">
                              <!-- --></a>point_ft_class_id
                        </dt>
                        <dd>Feature class ID for the newly created point features.</dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>The feature classes for the line and point features must already exist in the NFE model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3897E271-BCBE-4E7C-A17E-EDD73766290A__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example imports a network named <code class="codeph">NET01</code> to a model identified by the ID 1. Lines and point features will be created for every link and node using the feature layers 10 and 11 and the feature classes 5 and 6.
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_NFE.import_network(1, ‘NET01’, 10, 5, 11, 6);</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-0C792CC6-11A7-4434-9B85-18124880E37B" name="GUID-0C792CC6-11A7-4434-9B85-18124880E37B"></a><h3 id="TOPOL-GUID-0C792CC6-11A7-4434-9B85-18124880E37B" class="sect3"><span class="enumeration_section">7.24 </span>SDO_NFE.SET_MODEL_UNDERLYING_NETWORK
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-4030836E-F658-4122-AC3F-38587B1FD56E">Format</p><pre class="oac_no_warn" dir="ltr">SDO_NFE.SET_MODEL_UNDERLYING_NETWORK(
     model_id     IN SDO_NUMBER
     network_name IN VARCHAR2);
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-799B2C9C-5F1B-416E-B8EE-DB618B8D3C2B">Description</p>
                     <p>Associates a network as the underlying network of an NFE model. (The model must have been created in the SDO_NFE.OVER_EXIST_NETWORK mode.)</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-97F0D5EE-F1F3-47E5-BF7E-EBEFCF8B1D93">Parameters</p>
                     <dl class="0.76* 3.24*">
                        <dt class="dlterm"><a name="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-997CC9BE-D871-4838-8C1A-9566DB754C7E">
                              <!-- --></a>model_id
                        </dt>
                        <dd>
                           <p>NFE model identifier.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-2494A28B-AB53-4AE1-BF19-813CFC427AC1">
                              <!-- --></a>network_name
                        </dt>
                        <dd>Name of the network to be associated with the model.</dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-CEEB314B-F4C5-4925-93C5-B2983D227F2C">Usage Notes</p>
                     <p>See also the <a href="SDO_NFE-reference.html#GUID-FE8C662E-FD2F-468E-AC19-CA1B75A02A9B">SDO_NFE.GET_MODEL_UNDERLYING_NETWORK</a> function.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0C792CC6-11A7-4434-9B85-18124880E37B__GUID-97FF0F35-C69B-42AF-A424-7375CC217BEA">Examples</p>
                     <p>The following example ....</p><pre class="oac_no_warn" dir="ltr">EXECUTE ... ;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="SDO_NFE-reference.html#GUID-3839A614-3E16-4EC3-B449-68B105AF9136" title="The MDSYS.SDO_NFE package contains subprograms (functions and procedures) for performing network feature editing.">SDO_NFE Package Subprograms</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id='01108.DBMS_SQLPA.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer.">
      <meta name="description" content="The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer.">
      <title>DBMS_SQLPA</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_SQLDIAG.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_SQLQ.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SQLDIAG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_SQLQ.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_SQLPA</li>
            </ol>
            <a id="GUID-9AAF3672-1CF3-4354-AF41-5BA50BA295F8" name="GUID-9AAF3672-1CF3-4354-AF41-5BA50BA295F8"></a><a id="ARPLS229"></a><a id="ARPLS229"></a>
            
            <h2 id="ARPLS-GUID-9AAF3672-1CF3-4354-AF41-5BA50BA295F8" class="sect2"><span class="enumeration_chapter">160 </span> DBMS_SQLPA
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer. </p>
               <p>The chapter contains the following topics: </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_SQLPA.html#GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E" title="The DBMS_SQLPA package provides a capacity to help users predict the impact of system environment changes on the performance of a SQL workload. The interface lets users build and then compare two different versions of the workload performance, analyze the differences between the two versions, and unmask the SQL statements that might be impacted by the changes.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLPA.html#GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB" title="This package is available to PUBLIC and performs its own security checking. All analysis task interfaces (XXX_ANALYSIS_TASK) require privilege ADVISOR.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLPA.html#GUID-69B40030-0C63-4666-B139-F2028AA1DC80" title="This table lists the DBMS_SQLPA subprograms and briefly describes them.">Summary of DBMS_SQLPA Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS68346"></a><a id="ARPLS68346"></a><div class="props_rev_3"><a id="GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E" name="GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E"></a><h3 id="ARPLS-GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E" class="sect3"><span class="enumeration_section">160.1 </span>DBMS_SQLPA Overview
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_SQLPA</code> package provides a capacity to help users predict the impact of system environment changes on the performance of a SQL workload. The interface lets users build and then compare two different versions of the workload performance, analyze the differences between the two versions, and unmask the SQL statements that might be impacted by the changes. 
                  </p>
                  <div class="section">
                     <p>The package provides a task-oriented interface to implement the SQL Performance Analyzer. For example</p>
                     <ol>
                        <li>
                           <p>You use the <a href="DBMS_SQLPA.html#GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" title="These functions create an advisor task to process and analyze one or more SQL statements.">CREATE_ANALYSIS_TASK Functions</a> to create an analysis task for a single statement or a group of SQL statements.s
                           </p>
                        </li>
                        <li>
                           <p>The <a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="This function and procedure executes a previously created analysis task, the function version returning the new execution name.">EXECUTE_ANALYSIS_TASK Function &amp; Procedure</a> executes a previously created analysis task.
                           </p>
                        </li>
                        <li>
                           <p>The <a href="DBMS_SQLPA.html#GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" title="This procedure displays the results of an analysis task.">REPORT_ANALYSIS_TASK Function</a> displays the results of an analysis task.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS68347"></a><a id="ARPLS68347"></a><div class="props_rev_3"><a id="GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB" name="GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB"></a><h3 id="ARPLS-GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB" class="sect3"><span class="enumeration_section">160.2 </span>DBMS_SQLPA Security Model
               </h3>
               <div>
                  <p>This package is available to <code class="codeph">PUBLIC</code> and performs its own security checking. All analysis task interfaces (<code class="codeph">XXX_ANALYSIS_TASK</code>) require privilege <code class="codeph">ADVISOR</code>.
                  </p>
               </div>
            </div><a id="ARPLS68348"></a><a id="ARPLS68349"></a><a id="ARPLS68349"></a><a id="ARPLS68348"></a><div class="props_rev_3"><a id="GUID-69B40030-0C63-4666-B139-F2028AA1DC80" name="GUID-69B40030-0C63-4666-B139-F2028AA1DC80"></a><h3 id="ARPLS-GUID-69B40030-0C63-4666-B139-F2028AA1DC80" class="sect3"><span class="enumeration_section">160.3 </span>Summary of DBMS_SQLPA Subprograms
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">DBMS_SQLPA</code> subprograms and briefly describes them.
                  </p>
                  <div class="tblformal" id="GUID-69B40030-0C63-4666-B139-F2028AA1DC80__GUID-83A07D8B-E294-489E-AA42-8E4170417739">
                     <p class="titleintable">Table 160-1 DBMS_SQLPA Package Subprograms </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SQLPA Package Subprograms " summary="This table lists the DBMS_SQLPA subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="43%" id="d911026e450">Subprogram</th>
                              <th align="left" valign="bottom" width="57%" id="d911026e453">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e458" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94" title="This procedure cancels the currently executing analysis task. All intermediate result data is removed from the task.">CANCEL_ANALYSIS_TASK Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e458 d911026e453 ">
                                 <p>Cancels the currently executing task analysis of one or more SQL statements</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e470" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" title="These functions create an advisor task to process and analyze one or more SQL statements.">CREATE_ANALYSIS_TASK Functions</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e470 d911026e453 ">
                                 <p>Creates an advisor task to process and analyze one or more SQL statements</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e482" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE" title="This procedure drops a SQL analysis task.The task and all its result data are deleted.">DROP_ANALYSIS_TASK Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e482 d911026e453 ">
                                 <p>Drops a SQL analysis task</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e494" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="This function and procedure executes a previously created analysis task, the function version returning the new execution name.">EXECUTE_ANALYSIS_TASK Function &amp; Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e494 d911026e453 ">
                                 <p>Executes a previously created analysis task</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e506" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63" title="This procedure interrupts the currently executing analysis task. All intermediate result data will not be removed from the task.">INTERRUPT_ANALYSIS_TASK Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e506 d911026e453 ">
                                 <p>Interrupts the currently executing analysis task</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e518" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" title="This procedure displays the results of an analysis task.">REPORT_ANALYSIS_TASK Function</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e518 d911026e453 ">
                                 <p>Displays the results of an analysis task</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e530" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-AAC78840-3899-479E-BA89-D5688A118244" title="This procedure is called on an analysis task that is not currently executing to prepare it for re-execution.">RESET_ANALYSIS_TASK Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e530 d911026e453 ">
                                 <p>Resets the currently executing analysis task to its initial state</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e542" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878" title="This procedure resumes a previously interrupted or FAILED (with a fatal error) task execution.">RESUME_ANALYSIS_TASK Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e542 d911026e453 ">
                                 <p>Resumes a previously interrupted analysis task that was created to process a SQL tuning set. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e557" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-24792620-7642-48DA-9154-37D10AE58AC2" title="This procedure sets the SQL analysis task parameter value.">SET_ANALYSIS_TASK_PARAMETER Procedures</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e557 d911026e453 ">
                                 <p>Sets the SQL analysis task parameter value</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e569" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" title="This procedure sets the SQL analysis task parameter default value.">SET_ANALYSIS_DEFAULT_PARAMETER Procedures</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e569 d911026e453 ">
                                 <p>Sets the SQL analysis task parameter default value</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS68350"></a><a id="ARPLS68351"></a><a id="ARPLS68351"></a><a id="ARPLS68350"></a><div class="props_rev_3"><a id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94" name="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94"></a><h4 id="ARPLS-GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94" class="sect4"><span class="enumeration_section">160.3.1 </span>CANCEL_ANALYSIS_TASK Procedure
                  </h4>
                  <div>
                     <p>This procedure cancels the currently executing analysis task. All intermediate result data is removed from the task.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-C0CFCF29-0C47-48E8-AA7B-29BCCEF8901F">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CANCEL_ANALYSIS_TASK(
 task_name         IN VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-6C5B722E-7E0C-47A9-867F-E778BE13F644">Parameters</p>
                        <div class="tblformal" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-F28D40BC-6241-46B5-9436-1316B467F119">
                           <p class="titleintable">Table 160-2 CANCEL_ANALYSIS_TASK Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CANCEL_ANALYSIS_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLPA.CANCEL_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e690">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e693">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e698" headers="d911026e690 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e698 d911026e693 ">
                                       <p>Name of the task to cancel</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-90E53C72-1215-4B52-AF3A-426C1C03C323">Examples</p>
                        <p>Canceling a task when there is a need to stop it executing and it is not required to view any already-completed results:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.CANCEL_ANALYSIS_TASK(:my_task);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68352"></a><a id="ARPLS68353"></a><a id="ARPLS68353"></a><a id="ARPLS68352"></a><div class="props_rev_3"><a id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" name="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655"></a><h4 id="ARPLS-GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" class="sect4"><span class="enumeration_section">160.3.2 </span>CREATE_ANALYSIS_TASK Functions
                  </h4>
                  <div>
                     <p>These functions create an advisor task to process and analyze one or more SQL statements. </p>
                     <div class="section">
                        <p>You can use different forms of this function to: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create an analysis task for a single statement given its text.</p>
                           </li>
                           <li>
                              <p>Create an analysis task for a single statement from the cursor cache given its identifier. </p>
                           </li>
                           <li>
                              <p>Create an analysis task for a single statement from the workload repository given a range of snapshot identifiers. </p>
                           </li>
                           <li>
                              <p>Create an analysis task for a SQL tuning set.</p>
                           </li>
                        </ul>
                        <p>In all cases, the function creates an advisor task and sets its parameters. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-DB6FE5E3-E778-4DAB-B11D-E6B6340D232E">Syntax</p>
                        <p>SQL text format. This form of the function is called to prepare the analysis of a single statement given its text.</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK(
  sql_text         IN CLOB,
  bind_list        IN sql_binds := NULL,
  parsing_schema   IN VARCHAR2  := NULL,
  task_name        IN VARCHAR2  := NULL,
  description      IN VARCHAR2  := NULL)
RETURN VARCHAR2;
</pre><p>SQL ID format. This form of the function is called to prepare the analysis of a single statement from the cursor cache given its identifier. </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK(
  sql_id           IN VARCHAR2,
  plan_hash_value  IN NUMBER    := NULL,
  task_name        IN VARCHAR2  := NULL,
  con_name         IN VARCHAR2     DEFAULT,
  description      IN VARCHAR2  := NULL)
RETURN VARCHAR2;
</pre><p>Workload Repository format. This form of the function is called to prepare the analysis of a single statement from the workload repository given a range of snapshot identifiers.</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK(
  dbid             IN NUMBER       DEFAULT,
  begin_snap       IN NUMBER,
  end_snap         IN NUMBER,
  sql_id           IN VARCHAR2,
  plan_hash_value  IN NUMBER    := NULL,
  task_name        IN VARCHAR2  := NULL,
  description      IN VARCHAR2  := NULL)
  con_name         IN VARCHAR2     DEFAULT,
RETURN VARCHAR2;
</pre><p>SQLSET format. This form of the function is called to prepare the analysis of a SQL tuning set.</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK(
  sqlset_name       IN VARCHAR2,
  basic_filter      IN VARCHAR2 :=  NULL,
  con_name          IN VARCHAR2     DEFAULT,
  order_by          IN VARCHAR2 :=  NULL,
  top_sql           IN VARCHAR2 :=  NULL,
  task_name         IN VARCHAR2 :=  NULL,
  description       IN VARCHAR2 :=  NULL
  sqlset_owner      IN VARCHAR2 :=  NULL)
RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-1C402A38-AC69-4FE8-A84D-AFCA99A9726A">Parameters</p>
                        <div class="tblformal" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-A9C192F9-7D02-4C56-B101-020A3C4391A1">
                           <p class="titleintable">Table 160-3 <span class="italic"><span class="bold">CREATE_ANALYSIS_TASK Function Parameters </span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_ANALYSIS_TASK Function Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.CREATE_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e857">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e860">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e865" headers="d911026e857 ">
                                       <p><code class="codeph">sql_text</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e865 d911026e860 ">
                                       <p>Text of a SQL statement</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e873" headers="d911026e857 ">
                                       <p><code class="codeph">bind_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e873 d911026e860 ">
                                       <p>A set of bind values</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e881" headers="d911026e857 ">
                                       <p><code class="codeph">parsing_schema</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e881 d911026e860 ">
                                       <p>Name of the schema where the statement can be compiled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e889" headers="d911026e857 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e889 d911026e860 ">
                                       <p>Optional analysis task name</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e897" headers="d911026e857 ">
                                       <p><code class="codeph">dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e897 d911026e860 ">
                                       <p>The <code class="codeph">DBID</code> for imported or <code class="codeph">PDB-level AWR</code> data. If <code class="codeph">NULL</code>, then the current database <code class="codeph">DBID</code> is used
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e917" headers="d911026e857 ">
                                       <p><code class="codeph">con_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e917 d911026e860 ">
                                       <p>Container for the SPA task. The semantics depend on the function format:</p>
                                       <p>For the SQL ID format, this parameter specifies the container from which the database fetches the SQL statement for using with SPA. SPA will analyze the statement in this container. If null, then the database uses the current PDB for SPA analysis.</p>
                                       <p>For the AWR format, this parameter specifies the container from whose AWR data the database fetches the SQL statement for using with SPA. SPA will analyze the statement in this container. If null, then the database uses the current PDB for SPA analysis.</p>
                                       <p>The following statements are true of all function formats:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>In a non-CDB, this parameter is ignored.</p>
                                          </li>
                                          <li>
                                             <p>In a PDB, this parameter must be null or match the container name of the PDB. Otherwise, error occurs.</p>
                                          </li>
                                          <li>
                                             <p>In a CDB root, this parameter must be null or match the container name of a container in this CDB. Otherwise, error occurs.</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e941" headers="d911026e857 ">
                                       <p><code class="codeph">description</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e941 d911026e860 ">
                                       <p>Description of the SQL analysis task to a maximum of 256 characters</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e949" headers="d911026e857 ">
                                       <p><code class="codeph">sql_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e949 d911026e860 ">
                                       <p>Identifier of a SQL statement</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e957" headers="d911026e857 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e957 d911026e860 ">
                                       <p>Hash value of the SQL execution plan</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e965" headers="d911026e857 ">
                                       <p><code class="codeph">begin_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e965 d911026e860 ">
                                       <p>Begin snapshot identifier</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e973" headers="d911026e857 ">
                                       <p><code class="codeph">end_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e973 d911026e860 ">
                                       <p>End snapshot identifier</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e982" headers="d911026e857 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e982 d911026e860 ">
                                       <p>SQL tuning set name</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e990" headers="d911026e857 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e990 d911026e860 ">
                                       <p>SQL predicate to filter the SQL from the SQL tuning set</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e998" headers="d911026e857 ">
                                       <p><code class="codeph">order_by</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e998 d911026e860 ">
                                       <p>Order-by clause on the selected SQL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1006" headers="d911026e857 ">
                                       <p><code class="codeph">top_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1006 d911026e860 ">
                                       <p>Top N SQL after filtering and ranking</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1014" headers="d911026e857 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1014 d911026e860 ">
                                       <p>The owner of the SQL tuning set, or <code class="codeph">NULL</code> for the current schema owner
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-FBE8A5BB-C9C6-4841-A96C-2997D01918C8">Return Values</p>
                        <p>A SQL analysis task name that is unique by user (two different users can give the same name to their advisor tasks).</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-0B436275-F8E3-499F-82C7-FA7A998490ED">Examples</p><pre class="oac_no_warn" dir="ltr">variable stmt_task VARCHAR2(64);
variable sts_task  VARCHAR2(64);
 
-- Sql text format
EXEC :stmt_task := DBMS_SQLPA.CREATE_ANALYSIS_TASK(
     sql_text =&gt; 'select quantity_sold from sales s, times t where s.time_id = t.time_id and s.time_id = TO_DATE(''24-NOV-00'')');
 
-- Sql id format (cursor cache)
EXEC :stmt_task := DBMS_SQLPA.CREATE_ANALYSIS_TASK(
    sql_id       =&gt; 'ay1m3ssvtrh24');
 
-- Workload repository format
exec :stmt_task := DBMS_SQLPA.CREATE_ANALYSIS_TASK(
    begin_snap  =&gt; 1, 
    end_snap    =&gt; 2, 
    sql_id      =&gt; 'ay1m3ssvtrh24');
 
-- Sql tuning set format (first we need to load an STS, then analyze it)
EXEC :sts_task := DBMS_SQLPA.CREATE_ANALYSIS_TASK( -
  sqlset_name    =&gt;   'my_workload', -
  order_by       =&gt;   'BUFFER_GETS', -
  description    =&gt;   'process workload ordered by buffer gets'); </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68354"></a><a id="ARPLS68355"></a><a id="ARPLS68355"></a><a id="ARPLS68354"></a><div class="props_rev_3"><a id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE" name="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE"></a><h4 id="ARPLS-GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE" class="sect4"><span class="enumeration_section">160.3.3 </span>DROP_ANALYSIS_TASK Procedure
                  </h4>
                  <div>
                     <p>This procedure drops a SQL analysis task.The task and all its result data are deleted.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE__GUID-049750D2-B9A4-447A-989D-4F593428B540">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.DROP_ANALYSIS_TASK(
 task_name         IN VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE__GUID-79930DD2-A607-489A-8CEB-FDBFFDE198EC">Parameters</p>
                        <div class="tblformal" id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE__GUID-98722473-9441-4DBC-A308-D23AC3EB74D0">
                           <p class="titleintable">Table 160-4 DROP_ANALYSIS_TASK Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_ANALYSIS_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLPA.DROP_TUNING_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1144">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1147">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1152" headers="d911026e1144 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1152 d911026e1147 ">
                                       <p>The name of the analysis task to drop</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68356"></a><a id="ARPLS68357"></a><a id="ARPLS68358"></a><a id="ARPLS68359"></a><a id="ARPLS68360"></a><a id="ARPLS68361"></a><a id="ARPLS68362"></a><a id="ARPLS68357"></a><a id="ARPLS68358"></a><a id="ARPLS68359"></a><a id="ARPLS68360"></a><a id="ARPLS68361"></a><a id="ARPLS68362"></a><a id="ARPLS68356"></a><div class="props_rev_3"><a id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" name="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058"></a><h4 id="ARPLS-GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" class="sect4"><span class="enumeration_section">160.3.4 </span>EXECUTE_ANALYSIS_TASK Function &amp; Procedure
                  </h4>
                  <div>
                     <p>This function and procedure executes a previously created analysis task, the function version returning the new execution name.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-C3899DEC-3C8D-4114-B9BE-675ED16B8F45">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(
   task_name         IN VARCHAR2,
   execution_type    IN VARCHAR2               := 'test execute',
   execution_name    IN VARCHAR2               := NULL,
   execution_params  IN dbms_advisor.argList   := NULL,
   execution_desc    IN VARCHAR2               := NULL)
 RETURN VARCHAR2;
</pre><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(
   task_name         IN VARCHAR2,
   execution_type    IN VARCHAR2               := 'test execute',
   execution_name    IN VARCHAR2               := NULL,
   execution_params  IN dbms_advisor.argList   := NULL,
   execution_desc    IN VARCHAR2               := NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-09A451B3-AE9E-4B2C-ABB6-606DBB38A2BB">Parameters</p>
                        <div class="tblformal" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-230162A8-05B9-49F2-AB3E-23E335EDA6F7">
                           <p class="titleintable">Table 160-5 EXECUTE_ANALYSIS_TASK Function &amp; Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXECUTE_ANALYSIS_TASK Function &amp; Procedure Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.EXECUTE_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1282">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1285">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1290" headers="d911026e1282 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1290 d911026e1285 ">
                                       <p>Identifier of the task to execute</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1298" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1298 d911026e1285 ">
                                       <p>Type of the action to perform by the function. If <code class="codeph">NULL</code> it will default to the value of the <code class="codeph">DEFAULT_EXECUTION_TYPE</code> parameter. Possible values are: 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">[TEST]</code> <code class="codeph">EXECUTE</code> - test-execute every SQL statement and collect its execution plans and execution statistics. The resulting plans and statistics will be stored in the advisor framework. This is default. 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> - generate explain plan for every statement in the SQL workload. This is similar to the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> command. The resulting plans will be stored in the advisor framework in association with the task. 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMPARE</code> <code class="codeph">[PERFORMANCE]</code> - analyze and compare two versions of SQL performance data. The performance data is generated by test-executing or generating explain plan of the SQL statements. Use this option when two executions of type <code class="codeph">EXPLAIN_PLAN</code> or <code class="codeph">TEST_EXECUTE</code> already exist in the task
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CONVERT SQLSET</code> - used to read the statistics captured in a SQL Tuning Set and model them as a task execution. This can be used when you wish to avoid executing the SQL statements because valid data for the experiment already exists in the SQL Tuning Set.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1354" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1354 d911026e1285 ">
                                       <p>A name to qualify and identify an execution. If not specified, it will be generated by the advisor and returned by function.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1362" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_params</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1362 d911026e1285 ">
                                       <p>List of parameters (name, value) for the specified execution. The execution parameters have effect only on the execution for which they are specified. They will override the values for the parameters stored in the task (set through the <a href="DBMS_SQLPA.html#GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" title="This procedure sets the SQL analysis task parameter default value.">SET_ANALYSIS_DEFAULT_PARAMETER Procedures</a>).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1377" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_desc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1377 d911026e1285 ">
                                       <p>A 256-length string describing the execution</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-FE18B944-E4C6-4C75-B5B7-F78DE1254D4F">Usage Notes</p>
                        <p>SQL performance analyzer task can be executed multiples times without having to reset it. For example, when a task is created to perform a change impact analysis on a SQL workload, the created task has to be executed before making any change in the system environment to build a version of the workload that will be used as a reference for performance analysis. Once the change has been made, a second execution is required to build the post-change version of the workload. Finally, the task has to be executed a third time to let the advisor analyze and compare the performance of the workload in both versions.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-7CFE7E17-473D-4BBF-A164-8A5D63ED08EF">Examples</p>
                        <p>1. Create a task with a purpose of change impact analysis</p><pre class="oac_no_warn" dir="ltr">EXEC :tname := DBMS_SQLPA.CREATE_ANALYSIS_TASK(
    sqlset_name     =&gt; 'my_sts');</pre><p>2. Make baseline or the before change execution</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(
    task_name       =&gt; :tname,
    execution_type  =&gt; 'test execute', 
    execution_name  =&gt; 'before_change');</pre><p>3. Make change</p><pre class="oac_no_warn" dir="ltr">...</pre><p>4. Make the after change version of the workload performance</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(
   task_name          =&gt; :tname, -
   execution_type     =&gt; 'test execute',
   execution_name     =&gt; 'after_change')</pre><p>5. Compare the two versions of the workload</p>
                        <p>By default we always compare the results of the two last executions. The SQL Performance Analyzer uses the <code class="codeph">elapsed_time</code> as a default metric for comparison. Here we are changing it to <code class="codeph">buffer_gets</code> instead.
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER(
   :tname,'comparison_metric', 'buffer_gets');
EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(
   task_name         =&gt; :tname, -
   execution_type    =&gt; 'compare performance', - 
   execution_name    =&gt; 'after_change');
</pre><p>Use the following call if you would like to explicitly specify the two executions to compare as well as the comparison metric to use.</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(
   task_name        =&gt; :tname, -
   execution_type   =&gt; 'compare performance', 
   execution_params =&gt; dbms_advisor.arglist(
      'execution_name1', 
      'before_change', 
      'execution_name2', 
      'after_change',
      'comparison_metric', 
      'buffer_gets'));</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68363"></a><a id="ARPLS68364"></a><a id="ARPLS68364"></a><a id="ARPLS68363"></a><div class="props_rev_3"><a id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63" name="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63"></a><h4 id="ARPLS-GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63" class="sect4"><span class="enumeration_section">160.3.5 </span>INTERRUPT_ANALYSIS_TASK Procedure
                  </h4>
                  <div>
                     <p>This procedure interrupts the currently executing analysis task. All intermediate result data will not be removed from the task. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-F2621991-F87B-457B-81FB-D9CF7E28FE01">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK(
   task_name         IN VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-69242DFE-EBBC-447B-A321-AE1D77C29F0F">Parameters</p>
                        <div class="tblformal" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-2E416B00-C10A-41AF-A1A4-4A15F03C40C7">
                           <p class="titleintable">Table 160-6 INTERRUPT_ANALYSIS_TASK Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="INTERRUPT_ANALYSIS_TASK Procedure Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1536">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1539">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1544" headers="d911026e1536 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1544 d911026e1539 ">
                                       <p>Identifier of the analysis task to interrupt</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-0E2AA1EC-DFF1-4F2D-9029-45796DDBD001">Examples</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK(:my_task);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68365"></a><a id="ARPLS68366"></a><a id="ARPLS68366"></a><a id="ARPLS68365"></a><div class="props_rev_3"><a id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" name="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B"></a><h4 id="ARPLS-GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" class="sect4"><span class="enumeration_section">160.3.6 </span>REPORT_ANALYSIS_TASK Function
                  </h4>
                  <div>
                     <p>This procedure displays the results of an analysis task.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-855FA38B-CB63-462B-809E-F18996BD8DCC">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.REPORT_ANALYSIS_TASK(
   task_name       IN   VARCHAR2,
   type            IN   VARCHAR2   := 'TEXT',
   level           IN   VARCHAR2   := 'TYPICAL',
   section         IN   VARCHAR2   := 'SUMMARY',
   object_id       IN   NUMBER     := NULL,
   top_sql         IN   NUMBER     := 100,
   execution_name  IN   VARCHAR2   := NULL,
   task_owner      IN   VARCHAR2   := NULL,
   order_by        IN   VARCHAR2   := NULL)
RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-6B965F29-D226-4D73-91E8-44FEA041DAFE">Parameters</p>
                        <div class="tblformal" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-3BF7830F-2A69-4F29-8B9D-3D78DCDFDC61">
                           <p class="titleintable">Table 160-7 REPORT_ANALYSIS_TASK Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_ANALYSIS_TASK Function Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.REPORT_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1666">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1669">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1674" headers="d911026e1666 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1674 d911026e1669 ">
                                       <p>Name of the task to report</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1682" headers="d911026e1666 ">
                                       <p><code class="codeph">type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1682 d911026e1669 ">
                                       <p>Type of the report to produce. Possible values are <code class="codeph">TEXT</code> (default), <code class="codeph">HTML</code>, <code class="codeph">XML</code> and <code class="codeph">ACTIVE</code> (see Usage Notes). 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1702" headers="d911026e1666 ">
                                       <p><code class="codeph">level</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1702 d911026e1669 ">
                                       <p>Level of detail in the report:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ALL</code> - details of all SQL
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> - currently the same as typical
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CHANGED</code> - only SQL with changed performance
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CHANGED_PLANS</code> - only SQL with plan changes
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code> - SQL with errors only
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">IMPROVED</code> - only improved SQL
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REGRESSED</code> - only regressed SQL
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TIMEOUT</code> - only SQL which timed-out during execution
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> (default) - show information about every statement analyzed, including changing and errors
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNCHANGED</code> - only SQL with unchanged performance
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNCHANGED_PLANS</code> - only SQL with unchanged plans
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNSUPPORTED</code> - only SQL not supported by SPAs
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1772" headers="d911026e1666 ">
                                       <p><code class="codeph">section</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1772 d911026e1669 ">
                                       <p>Optionally limit the report to a single section (<code class="codeph">ALL</code> for all sections):
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">SUMMARY</code> (default) - workload summary only
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - summary and details on SQL
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1794" headers="d911026e1666 ">
                                       <p><code class="codeph">object_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1794 d911026e1669 ">
                                       <p>Identifier of the advisor framework object that represents a given SQL in a tuning set (STS)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1802" headers="d911026e1666 ">
                                       <p><code class="codeph">top_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1802 d911026e1669 ">
                                       <p>Number of SQL statements in a STS for which the report is generated</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1810" headers="d911026e1666 ">
                                       <p><code class="codeph">execution_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1810 d911026e1669 ">
                                       <p>Name of the task execution to use. If <code class="codeph">NULL</code>, the report will be generated for the last task execution.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1821" headers="d911026e1666 ">
                                       <p><code class="codeph">task_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1821 d911026e1669 ">
                                       <p>Owner of the relevant analysis task. Defaults to the current schema owner.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1829" headers="d911026e1666 ">
                                       <p><code class="codeph">order_by</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1829 d911026e1669 ">
                                       <p>How to sort SQL statements in the report (summary and body). Possible values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">CHANGE_DIFF</code> - sort SQL statements by change difference in SQL performance in terms of the comparison Metric
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NULL</code> (default) - order SQL statement by impact on workload
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_IMPACT</code> - order SQL statement by change impact on SQL
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">WORKLOAD_IMPACT</code> - same as <code class="codeph">NULL</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">METRIC_DELTA</code> - same as <code class="codeph">CHANGE_DIFF</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-A86FA6C0-D33F-47B0-85F2-9E42412B9D09">Return Values</p>
                        <p>A <code class="codeph">CLOB</code> containing the desired report.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-5656B555-4504-4225-80F0-34F2B8C74886">Usage Notes</p>
                        <p><code class="codeph">ACTIVE</code> reports have a rich, interactive user interface similar to Enterprise Manager while not requiring any EM installation. The report file built is in <code class="codeph">HTML</code> format so it can be interpreted by most modern browsers. The code powering the active report is downloaded transparently by the web browser when the report is first viewed, hence viewing it requires outside connectivity.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-735CB16F-CF2A-444E-822E-C352AFDB184C">Examples</p><pre class="oac_no_warn" dir="ltr">-- Get the whole report for the single statement case.
SELECT DBMS_SQLPA.REPORT_ANALYSIS_TASK(:stmt_task) from dual;
 
-- Show me the summary for the sts case.
SELECT DBMS_SQLPA.REPORT_ANALYSIS_TASK(:sts_task, 'TEXT', 'TYPICAL', 'SUMMARY')
FROM DUAL;
 
-- Show me the findings for the statement I'm interested in.
SELECT DBMS_SQLPA.REPORT_ANALYSIS_TASK(:sts_task, 'TEXT', 'TYPICAL', 'ALL', 5) from dual;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68367"></a><a id="ARPLS68368"></a><a id="ARPLS68368"></a><a id="ARPLS68367"></a><div class="props_rev_3"><a id="GUID-AAC78840-3899-479E-BA89-D5688A118244" name="GUID-AAC78840-3899-479E-BA89-D5688A118244"></a><h4 id="ARPLS-GUID-AAC78840-3899-479E-BA89-D5688A118244" class="sect4"><span class="enumeration_section">160.3.7 </span>RESET_ANALYSIS_TASK Procedure
                  </h4>
                  <div>
                     <p>This procedure is called on an analysis task that is not currently executing to prepare it for re-execution. </p>
                     <div class="section">
                        <p>All intermediate result data will be deleted.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-797F1B97-87DA-458C-AC83-D2D55547210A">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.RESET_ANALYSIS_TASK(
 task_name         IN VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-91B7BE5A-A98F-4BA4-9671-59D45105FD57">Parameters</p>
                        <div class="tblformal" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-4487F3DB-8C14-439F-9C29-96C89D1BFC34">
                           <p class="titleintable">Table 160-8 RESET_ANALYSIS_TASK Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RESET_ANALYSIS_TASK Procedure Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.RESET_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2002">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2005">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2010" headers="d911026e2002 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2010 d911026e2005 ">
                                       <p>Identifier of the analysis task to reset</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-0D8BCA69-7C69-43B3-A3F8-5D872836A162">Examples</p><pre class="oac_no_warn" dir="ltr">-- reset and re-execute a task
EXEC DBMS_SQLPA.RESET_ANALYSIS_TASK(:sts_task);
 
-- re-execute the task
EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(:sts_task);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68369"></a><a id="ARPLS68370"></a><a id="ARPLS68370"></a><a id="ARPLS68369"></a><div class="props_rev_3"><a id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878" name="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878"></a><h4 id="ARPLS-GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878" class="sect4"><span class="enumeration_section">160.3.8 </span>RESUME_ANALYSIS_TASK Procedure
                  </h4>
                  <div>
                     <p>This procedure resumes a previously interrupted or <code class="codeph">FAILED</code> (with a fatal error) task execution. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-23222FEB-6143-4252-AC3E-1943D0230CE4">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.RESUME_ANALYSIS_TASK(
 task_name         IN VARCHAR2,
 basic_filter      IN VARCHAR2 := NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-C4459150-D4F7-4B2C-A7B3-8C1FBD48F658">Parameters</p>
                        <div class="tblformal" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-FEF1B95E-2319-44B9-9E8B-5A3DE8DF3408">
                           <p class="titleintable">Table 160-9 RESUME_ANALYSIS_TASK Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RESUME_ANALYSIS_TASK Procedure Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.RESUME_ANALYSIS_TASK subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2136">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2139">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2144" headers="d911026e2136 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2144 d911026e2139 ">
                                       <p>Identifier of the analysis task to resume</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2152" headers="d911026e2136 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2152 d911026e2139 ">
                                       <p>A SQL predicate to filter the SQL from the SQL tuning set. Note that this filter will be applied in conjunction with the basic filter (parameter <code class="codeph">basic_filter</code>) that was specified when calling the <a href="DBMS_SQLPA.html#GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" title="These functions create an advisor task to process and analyze one or more SQL statements.">CREATE_ANALYSIS_TASK Functions</a>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-24F0A25B-8FF6-4805-968D-6EA3756A60FC">Usage Notes</p>
                        <p>Resuming a single SQL analysis task (a task that was created to analyze a single SQL statement as compared to a SQL Tuning Set) is not supported.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-BA88BF06-388D-4CB3-91D1-0E804C0011C7">Examples</p><pre class="oac_no_warn" dir="ltr">-- Interrupt the task
EXEC DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK(:conc_task);
 
-- Once a task is interrupted, we can elect to reset it, resume it, or check
-- out its results and then decide.  For this example we will just resume.
 
EXEC DBMS_SQLPA.RESUME_ANALYSIS_TASK(:conc_task);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68371"></a><a id="ARPLS68372"></a><a id="ARPLS68372"></a><a id="ARPLS68371"></a><div class="props_rev_3"><a id="GUID-24792620-7642-48DA-9154-37D10AE58AC2" name="GUID-24792620-7642-48DA-9154-37D10AE58AC2"></a><h4 id="ARPLS-GUID-24792620-7642-48DA-9154-37D10AE58AC2" class="sect4"><span class="enumeration_section">160.3.9 </span>SET_ANALYSIS_TASK_PARAMETER Procedures
                  </h4>
                  <div>
                     <p>This procedure sets the SQL analysis task parameter value.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-A39BF69B-F174-4D7E-B9DB-DB03BDE799F3">Syntax</p>
                        <p>This form of the procedure updates the value of a SQL analysis parameter of type <code class="codeph">VARCHAR2</code>. 
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER(
  task_name         IN VARCHAR2,
  parameter         IN VARCHAR2,
  value             IN VARCHAR2,
  test_execute_dop  IN NUMBER DEFAULT 0,
  compare_resultset IN BOOLEAN DEFAULT TRUE);
</pre><p>This form of the procedure updates the value of a SQL analysis parameter of type <code class="codeph">NUMBER</code>. 
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER(
  task_name         IN VARCHAR2,
  parameter         IN VARCHAR2,
  value             IN NUMBER
  test_execute_dop  IN NUMBER DEFAULT 0,
  compare_resultset IN BOOLEAN DEFAULT TRUE);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-B51B8919-A176-4E3E-BAB6-437858EB82A2">Parameters</p>
                        <div class="tblformal" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-7E219FE3-09A6-4EBE-835E-BC43BCC71FE8">
                           <p class="titleintable">Table 160-10 SET_ANALYSIS_TASK_PARAMETER Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_ANALYSIS_TASK_PARAMETER Procedure Parameters " summary="This table describes the parameters used by the DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2301">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2304">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2309" headers="d911026e2301 ">
                                       <p><code class="codeph">task_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2309 d911026e2304 ">
                                       <p>Identifier of the task to execute</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2317" headers="d911026e2301 ">
                                       <p><code class="codeph">parameter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2317 d911026e2304 ">
                                       <p>Name of the parameter to set. The possible analysis parameters that can be set by this procedure are:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">APPLY_CAPTURED_COMPILENV</code>: indicates whether the advisor could use the compilation environment captured with the SQL statements. The default is 0 (that is, <code class="codeph">NO</code>). 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC_FILTER</code>: basic filter for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CELL_SIMULATION_ENABLED</code>: for more details, see the helper script <code class="codeph">tcellsim.sql</code> in the <code class="codeph">ADMIN</code> directory. 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMPARISON_METRIC</code>: specify an expression of execution statistics to use in performance comparison (Example: <code class="codeph">buffer_gets</code>, <code class="codeph">cpu_time</code> + <code class="codeph">buffer_gets</code> * 10)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DATABASE_LINK</code>: can be set to the global name of a <code class="codeph">PUBLIC</code> database link. When it is set, SQL Performance Analyzer will use the database link for all <code class="codeph">TEST EXECUTE</code> and <code class="codeph">EXPLAIN PLAN</code> operations by sending the SQL statements to the remote database to be processed remotely. The analysis results will still be stored on the local database.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DAYS_TO_EXPIRE</code>: number of days until the task is deleted
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DEFAULT_EXECUTION_TYPE</code>: the task will default to this type of execution when none is specified by the <a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="This function and procedure executes a previously created analysis task, the function version returning the new execution name.">EXECUTE_ANALYSIS_TASK Function &amp; Procedure</a>.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2395" headers="d911026e2301 ">
                                       <p><code class="codeph">parameter</code> (contd.)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2395 d911026e2304 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">DISABLE_MULTI_EXEC</code>: SQL statements are executed multiple times and runtime statistics are then averaged. Set this parameter to <code class="codeph">TRUE</code> to disable this capability. In this case, each SQL in the SQL tuning set is executed only once. 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTE_TRIGGERS</code>: Set this parameter to <code class="codeph">TRUE</code> to execute all statement-level triggers in the FULLDML mode. If the parameter is set to <code class="codeph">FALSE</code>, then the triggers will not be executed even in FULLDML mode of test execution. Any changes incurred due to potential execution of triggers are always rolled back by SPA. The default value of this parameter is <code class="codeph">FALSE</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_DAYS_TO_EXPIRE</code>: number of days until the tasks's executions will be deleted (without deleting the task) 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTE_FULLDML</code>: <code class="codeph">TRUE</code> to execute DML statement fully, including acquiring row locks and modifying rows; <code class="codeph">FALSE</code> (default) to execute only the query part of the DML without modifying data. When <code class="codeph">TRUE</code>, SQL Performance Analyzer will issue a rollback following DML execution to prevent persistent changes from being made by the DML.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME1</code>: name of the first task execution to analyze
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME2</code>: name of the second task execution to analyze
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LOCAL_TIME_LIMIT</code>: per-statement time out (seconds)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">METRIC_DELTA_THRESHOLD</code>: threshold of the difference between the SQL performance metric before and after the change. The default value is zero.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NUM_ROWS_TO_FETCH</code>: specifies the number of rows to be fetched for an SQL query. You can use one of the following values:
                                             </p>
                                             <ul style="list-style-type: disc;">
                                                <li>
                                                   <p><code class="codeph">ALL_ROWS</code>: Fetches all the rows for an SQL query
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">AVERAGE</code>: Number of result rows is calculated as the ratio of total rows processed and total executions for each SQL in the STS
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">AUTO</code>: Number of result rows is determined using the value of <code class="codeph">optimizer_mode</code> parameter of the optimizer environment captured in the STS. If the value of <code class="codeph">optimizer_mode</code> is <code class="codeph">ALL_ROWS</code>, then all result rows will be fetched. If its value is <code class="codeph">FIRST_ROWS_n</code>, then <code class="codeph">n</code> result rows will be fetched by the SPA.
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">A valid number</code>: Fetches the exact number of rows specified by in the SQL query
                                                   </p>
                                                </li>
                                             </ul>
                                             <p>The default value is <code class="codeph">ALL_ROWS</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PLAN_FILTER</code>: plan filter for SQL tuning set (see <code class="codeph">SELECT_SQLSET</code> for possible values)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PLAN_LINES_COMPARISON</code>: 
                                             </p>
                                             <p>- <code class="codeph">ALWAYS</code> --line by line comparison of plans in all scenarios.- <code class="codeph">AUTO</code> -Line by Line comparison of plans only if <code class="codeph">phv2</code> is not available and <code class="codeph">phv1</code> is different- <code class="codeph">NONE</code> (default) - line by line comparison of plans only if <code class="codeph">phv</code> is unknown
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE1</code>: first ranking measure for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE2</code>: second possible ranking measure for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE3</code>: third possible ranking measure for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REPLACE_SYSDATE_WITH</code>: Returns a fixed date for all calls to <code class="codeph">SYSDATE</code> within the SPA task execution. You can use one of the following values:
                                             </p>
                                             <ul style="list-style-type: disc;">
                                                <li>
                                                   <p><code class="codeph">CURRENT_SYSDATE</code>: <code class="codeph">SYSDATE</code> calls return the current date.
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQLSET_SYSDATE</code>: <code class="codeph">SYSDATE</code> calls return the value of the column <code class="codeph">LAST_EXEC_START_TIME</code> in the STS
                                                   </p>
                                                </li>
                                             </ul>
                                             <p>The default value is <code class="codeph">CURRENT_SYSDATE</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RESUME_FILTER</code>: a extra filter for SQL tuning sets besides <code class="codeph">BASIC_FILTER</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_IMPACT_THRESHOLD</code>: threshold of a change impact on a SQL statement. Same as the previous parameter, but at the level of the SQL statement.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_LIMIT</code>: maximum number of SQL statements to process
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_PERCENTAGE</code>: percentage filter of SQL tuning set statements
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQLSET_NAME</code>: name of the SQL tuning set to associate to the specified task or task execution. This parameter is mainly using in comparing two SQL tuning sets using SPA.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQLSET_OWNER</code>: owner of the SQL tuning set specified using task parameter <code class="codeph">SQLSET_NAME</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TIME_LIMIT</code>: global time out (seconds)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2633" headers="d911026e2301 ">
                                       <p><code class="codeph">parameter</code> (contd.)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2633 d911026e2304 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">WORKLOAD_IMPACT_THRESHOLD</code>: threshold of a SQL statement impact on a workload. Statements which workload change impact is below the absolute value of this threshold will be ignored and not considered for improvement or regression.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CON_DBID_MAPPING</code>: provide a mapping of multitenant container database (CDB) IDs. When it is set, SQL Performance Analyzer uses the new CDB ID when it finds a match for the old CDB ID and executes the SQL in that container. 
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2651" headers="d911026e2301 ">
                                       <p><code class="codeph">value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2651 d911026e2304 ">
                                       <p>New value of the specified parameter</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2659" headers="d911026e2301 ">
                                       <p><code class="codeph">test_execute_dop</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2659 d911026e2304 ">
                                       <p>Specifies the requested level of concurrency with which a SPA task should be executed. </p>
                                       <p>Values <code class="codeph">0</code> or <code class="codeph">1</code> indicate that the SPA task will run with no additional processes as it used to run in releases prior to <code class="codeph">Oracle Database 18c Release</code>. A value of <code class="codeph">n</code> (higher than 1) means that <code class="codeph">n</code> background SPA processes are being requested to concurrently process the input workload.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2684" headers="d911026e2301 ">
                                       <p><code class="codeph">compare_resultset</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2684 d911026e2304 ">
                                       <p>Directs SPA to detect if the result-sets between the two trials being compared are different. If differences are seen in the result-sets of any SQL statement between the two trials being compared, the SPA comparison report will indicate this for every such SQL statement.</p>
                                       <div class="p">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>If set to <code class="codeph">TRUE</code> the result set comparison will be performed
                                                </p>
                                             </li>
                                             <li>
                                                <p>If set to <code class="codeph">FALSE</code> result set comparison will not be performed.
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-C947C93F-BD56-45FD-9F55-068523284B66">Usage Notes</p>
                        <p>The actual number of processes granted might be equal to or lower than the number requested using the <code class="codeph">test_execute_dop</code> parameter. This parameter applies only to <code class="codeph">test-execute</code> or <code class="codeph">explain plan type</code> of trials that process a SQL Tuning set.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-8E149226-3121-427F-B062-B5796A1BD613">Examples</p>
                        <p>To request two concurrent processes to execute the SPA task:</p><pre class="pre codeblock"><code>    dbms_sqlpa.set_analysis_task_parameter(:tname,'TEST_EXECUTE_DOP',2)</code></pre><p>To enable result-set validation</p><pre class="pre codeblock"><code>   exec dbms_sqlpa.set_analysis_task_parameter(:atname,'COMPARE_RESULTSET','TRUE')</code></pre><p>To disable result-set validation:</p><pre class="pre codeblock"><code>    exec dbms_sqlpa.set_analysis_task_parameter(:atname,'COMPARE_RESULTSET','FALSE')</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68373"></a><a id="ARPLS68374"></a><a id="ARPLS68374"></a><a id="ARPLS68373"></a><div class="props_rev_3"><a id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" name="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8"></a><h4 id="ARPLS-GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" class="sect4"><span class="enumeration_section">160.3.10 </span>SET_ANALYSIS_DEFAULT_PARAMETER Procedures
                  </h4>
                  <div>
                     <p>This procedure sets the SQL analysis task parameter default value.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8__GUID-BF94953D-4727-4934-BF45-8984C176834A">Syntax</p>
                        <p>This form of the procedure updates the default value of an analyzer parameter of type <code class="codeph">VARCHAR2</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_DEFAULT_PARAMETER(
   parameter    IN  VARCHAR2,
   value        IN  VARCHAR2);
</pre><p>This form of the procedure updates the <code class="codeph">default</code> value of an analyzer parameter of type <code class="codeph">NUMBER</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_DEFAULT_PARAMETER(
   parameter    IN  VARCHAR2,
   value        IN  NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8__GUID-DFA56151-71B6-41B3-A4C6-EEF6CEC2666F">Parameters</p>
                        <div class="tblformal" id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8__GUID-4E604043-CCB2-46AF-8524-F5A81CBE7AF7">
                           <p class="titleintable">Table 160-11 SET_ANALYSIS_DEFAULT_PARAMETER Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_ANALYSIS_DEFAULT_PARAMETER Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLPA.SET_ANALYSIS_DEFAULT_PARAMETER subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2859">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2862">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2867" headers="d911026e2859 ">
                                       <p><code class="codeph">parameter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2867 d911026e2862 ">
                                       <p>Name of the parameter to set. The possible analysis parameters that can be set by this procedure are:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">APPLY_CAPTURED_COMPILENV</code>: indicates whether the advisor could use the compilation environment captured with the SQL statements. The default is 0 (that is, <code class="codeph">NO</code>). 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC_FILTER</code>: basic filter for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMPARISON_METRIC</code>: specify an expression of execution statistics to use in performance comparison (Example: <code class="codeph">buffer_gets</code>, <code class="codeph">cpu_time</code> + <code class="codeph">buffer_gets</code> * 10)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DATABASE_LINK</code>: can be set to the global name of a <code class="codeph">PUBLIC</code> database link. When it is set, SQL Performance Analyzer will use the database link for all <code class="codeph">TEST EXECUTE</code> and <code class="codeph">EXPLAIN PLAN</code> operations by sending the SQL statements to the remote database to be processed remotely. The analysis results will still be stored on the local database.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DAYS_TO_EXPIRE</code>: number of days until the task is deleted
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DEFAULT_EXECUTION_TYPE</code>: the task will default to this type of execution when none is specified by the <a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="This function and procedure executes a previously created analysis task, the function version returning the new execution name.">EXECUTE_ANALYSIS_TASK Function &amp; Procedure</a>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTE_FULLDML</code>: <code class="codeph">TRUE</code> to execute DML statement fully, including acquiring row locks and modifying rows; <code class="codeph">FALSE</code> (default) to execute only the query part of the DML without modifying data. When <code class="codeph">TRUE</code>, SQL Performance Analyzer will issue a rollback following DML execution to prevent persistent changes from being made by the DML.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_DAYS_TO_EXPIRE</code>: number of days until the tasks's executions will be deleted (without deleting the task) 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME1</code>: name of the first task execution to analyze
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME2</code>: name of the second task execution to analyze
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LOCAL_TIME_LIMIT</code>: per-statement time out (seconds)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2968" headers="d911026e2859 ">
                                       <p><code class="codeph">parameter</code> (contd.)
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2968 d911026e2862 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">PLAN_FILTER</code>: plan filter for SQL tuning set (see <code class="codeph">SELECT_SQLSET</code> for possible values)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE1</code>: first ranking measure for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE2</code>: second possible ranking measure for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE3</code>: third possible ranking measure for SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RESUME_FILTER</code>: a extra filter for SQL tuning sets besides <code class="codeph">BASIC_FILTER</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_IMPACT_THRESHOLD</code>: threshold of a change impact on a SQL statement. Same as the previous parameter, but at the level of the SQL statement.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_LIMIT</code>: maximum number of SQL statements to process
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_PERCENTAGE</code>: percentage filter of SQL tuning set statements
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TIME_LIMIT</code>: global time out (seconds)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">WORKLOAD_IMPACT_THRESHOLD</code>: threshold of a SQL statement impact on a workload. Statements which workload change impact is below the absolute value of this threshold will be ignored and not considered for improvement or regression.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e3031" headers="d911026e2859 ">
                                       <p><code class="codeph">value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e3031 d911026e2862 ">
                                       <p>New value of the specified parameter</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='01523.configuring-rman-client-advanced.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Configuring the RMAN Environment: Advanced Topics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-rman-client-basic.html" title="Previous" type="text/html">
      <link rel="next" href="using-flasback-database-restore-points.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-rman-client-basic.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-flasback-database-restore-points.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-starting-configuring-rman.html" property="item" typeof="WebPage"><span property="name"> Starting and Configuring RMAN and Flashback Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Configuring the RMAN Environment: Advanced Topics</li>
            </ol>
            <a id="GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" name="GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A"></a><a id="BRADV006"></a>
            
            <h2 id="BRADV-GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" class="sect2"><span class="enumeration_chapter">6 </span> Configuring the RMAN Environment: Advanced Topics
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to perform setup and configuration tasks. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3" title="The CONFIGURE CHANNEL command is used to configure RMAN channel options.">Configuring Advanced Channel Options</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-AC052271-068A-4E4B-8001-525D417DE865" title="Backup options enable you to control aspects such as backup size, backup compression, and backup encryption.">Configuring Advanced Backup Options</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-9C633A44-5533-467E-9108-14BC088A1F82" title="You may want to set the names of data files in the auxiliary instance when performing operations such as data file tablespace point-in-time recovery (TSPITR) or data transfer with RMAN. You set these names before starting the TSPITR or database duplication.">Configuring Auxiliary Instance Data File Names</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-B7B61600-6DED-413D-B134-1DAE79627A01" title="When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.">Configuring the Snapshot Control File Location</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE" title="RMAN cannot connect to a target database through a shared server dispatcher. RMAN requires a dedicated server process.">Configuring RMAN for Use with a Shared Server</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0" title="A data block lost write occurs when an I/O subsystem acknowledges the completion of the block write, but the write did not occur in the persistent storage. On a subsequent block read, the I/O subsystem returns the stale version of the data block, which might be used to update other blocks of the database, thereby corrupting it.">Enabling Lost Write Detection</a></p>
                  </li>
               </ul>
            </div><a id="BRADV134"></a><div class="props_rev_3"><a id="GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3" name="GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3"></a><h3 id="BRADV-GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3" class="sect3"><span class="enumeration_section">6.1 </span>Configuring Advanced Channel Options
               </h3>
               <div>
                  <p>The <code class="codeph">CONFIGURE CHANNEL</code> command is used to configure RMAN channel options.
                  </p>
                  <p>This section contains the following topics about advanced channel option:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-42F31F53-07AF-4A81-9387-849D17F90C9A" title="Whether you allocate channels manually or use automatic channel allocation, you can use channel commands and options to control behavior.">About Channel Control Options</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366" title="In addition to configuring parameters that apply to all channels of a particular type, you can also use the CONFIGURE command to configure parameters that apply to one specific channel.">Configuring Specific Channel Parameters</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3__GUID-1B604FFD-B09E-4195-B889-E47D89A4D9F1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-architecture.html#GUID-282FD0B6-8593-4775-9965-DB47534D349C" title="An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.">About RMAN Channels</a> for a conceptual overview of configured and allocated channels
                           </p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-basic.html#GUID-911248BA-A742-426C-9B90-51214CFAF36B" title="An RMAN channel is a connection to a database server session. RMAN uses channels to perform most tasks.">Configuring Channels</a> the basics for configuring channels
                           </p>
                        </li>
                        <li>
                           <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV578"></a><a id="BRADV89456"></a><div class="props_rev_3"><a id="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A" name="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A"></a><h4 id="BRADV-GUID-42F31F53-07AF-4A81-9387-849D17F90C9A" class="sect4"><span class="enumeration_section">6.1.1 </span>About Channel Control Options
                  </h4>
                  <div>
                     <p>Whether you allocate channels manually or use automatic channel allocation, you can use channel commands and options to control behavior. </p>
                     <p><a href="configuring-rman-client-advanced.html#GUID-42F31F53-07AF-4A81-9387-849D17F90C9A__CHDHFEBJ" title="Summarizes channel control options">Table 6-1</a> summarizes the ways in which you can control channel behavior. Unless noted, all channel parameters are supported in both <code class="codeph">CONFIGURE CHANNEL</code> and <code class="codeph">ALLOCATE CHANNEL</code> commands.
                     </p>
                     <div class="tblformal" id="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A__CHDHFEBJ">
                        <p class="titleintable">Table 6-1 Channel Control Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Channel Control Options" summary="Summarizes channel control options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d30457e375">Type of Channel Control</th>
                                 <th align="left" valign="bottom" width="69%" id="d30457e378">Commands</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e383" headers="d30457e375 ">
                                    <p>Limit I/O bandwidth consumption</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e383 d30457e378 ">
                                    <p>Use the <code class="codeph">RATE</code> channel parameter to act as a throttling mechanism for backups.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e393" headers="d30457e375 ">
                                    <p>Limit backup sets and pieces</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e393 d30457e378 ">
                                    <p>Use the <code class="codeph">MAXPIECESIZE</code> channel parameter to set limits on the size of backup pieces. You can also use the <code class="codeph">MAXSETSIZE</code> parameter on the <code class="codeph">BACKUP</code> and <code class="codeph">CONFIGURE</code> commands to set a limit for the size of backup sets.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e412" headers="d30457e375 ">
                                    <p>Vendor-specific instructions</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e412 d30457e378 ">
                                    <p>Use the <code class="codeph">PARMS</code> channel parameter to specify vendor-specific information for a <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a>. You can also use the <code class="codeph">SEND</code> command to send vendor-specific commands to a media manager.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e428" headers="d30457e375 ">
                                    <p>Channel parallel backup and restore operations</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e428 d30457e378 ">
                                    <p>Use <code class="codeph">CONFIGURE DEVICE TYPE ... PARALLELISM</code> for persistent channel parallelism or multiple <code class="codeph">ALLOCATE CHANNEL</code> commands for job-level parallelism.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e441" headers="d30457e375 ">
                                    <p>Connection settings for database instances</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e441 d30457e378 ">
                                    <p>Specify which instance performs an operation with the <code class="codeph">CONNECT</code> channel parameter.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A__GUID-55E2EF58-DBDA-4DC7-8C0E-4F7AD8C454B4">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../rcmrf/ALLOCATE-CHANNEL.html#RCMRF102" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89457"></a><div class="props_rev_3"><a id="GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366" name="GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366"></a><h4 id="BRADV-GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366" class="sect4"><span class="enumeration_section">6.1.2 </span>Configuring Specific Channel Parameters
                  </h4>
                  <div>
                     <p>In addition to configuring parameters that apply to all channels of a particular type, you can also use the <code class="codeph">CONFIGURE</code> command to configure parameters that apply to one specific channel. 
                     </p>
                     <div class="section">
                        <p>Configure specific channels by number when it is necessary to control the parameters set for each channel separately. This technique is necessary in the following situations:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When running an Oracle Real Application Clusters (Oracle RAC) database in which individual nodes do not have access to the full set of backups. Each channel must be configured with a node-specific connect string so that all backups are accessible by at least one channel.</p>
                           </li>
                           <li>
                              <p>When using a media manager that requires different <code class="codeph">PARMS</code> settings on each channel.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To configure specific channel parameters:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Run the <code class="codeph">CONFIGURE CHANNEL</code> <span class="italic"><code class="codeph">n</code></span> command (where <span class="italic"><code class="codeph">n</code></span> is a positive integer less than 255) to configure a specific channel. 
                              </p>
                              <p>When manually numbering channels, you must specify one or more channel options (for example, <code class="codeph">MAXPIECESIZE</code> or <a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><code class="codeph">FORMAT</code></a>) for each channel. When you use that specific numbered channel in a backup, the configured settings for that channel are used instead of the configured generic channel settings.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366__GUID-3EBDC58F-B3B5-4BC5-B488-7B7BA9A46895">
                           <p class="notep1">See Also:</p>
                           <p><a href="../racad/configuring-recovery-manager-and-archiving.html#RACAD320" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> to learn about RMAN backups in an Oracle RAC environment
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="BRADV183"></a><a id="BRADV89458"></a><div class="props_rev_3"><a id="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958" name="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958"></a><h5 id="BRADV-GUID-45919A66-85EE-4197-BD54-FE6D15DE6958" class="sect5"><span class="enumeration_section">6.1.2.1 </span>Configuring Specific Channels: Examples
                     </h5>
                     <div>
                        <div class="example" id="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958__GUID-7E4C837D-D338-4B45-BB84-98F3480F4B74">
                           <p class="titleinexample">Example 6-1 Configuring Channel Parallelism for Disk Devices</p>
                           <p>This example sends disk backups to two different disks. Configure disk channels as follows:</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO disk;        # backup goes to disk
CONFIGURE DEVICE TYPE disk PARALLELISM 2;     # two channels used in parallel
CONFIGURE CHANNEL 1 DEVICE TYPE DISK FORMAT '/disk1/%U' # 1st channel to disk1 
CONFIGURE CHANNEL 2 DEVICE TYPE DISK FORMAT '/disk2/%U' # 2nd channel to disk2
BACKUP DATABASE; # backup - first channel goes to disk1 and second to disk2
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958__CHDFCEGA">
                           <p class="titleinexample">Example 6-2 Configuring Channel Parallelism for Tape Devices</p>
                           <p>This example configures channels to create parallel database backups. You have two tape drives and want each drive to use tapes from a different tape media family. The backup data is divided between the two tape devices. Each configured channel backs up approximately half the total data.</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO sbt;    # backup goes to sbt
CONFIGURE DEVICE TYPE sbt PARALLELISM 2; # two sbt channels allocated by default
# Configure channel 1 to pool named first_pool
CONFIGURE CHANNEL 1 DEVICE TYPE sbt 
  PARMS 'ENV=(OB_MEDIA_FAMILY=first_pool)'; 
# configure channel 2 to pool named second_pool
CONFIGURE CHANNEL 2 DEVICE TYPE sbt 
  PARMS 'ENV=(OB_MEDIA_FAMILY=second_pool)'; 
BACKUP DATABASE; # first stream goes to 'first_pool' and second to 'second_pool'
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV89459"></a><div class="props_rev_3"><a id="GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154" name="GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154"></a><h5 id="BRADV-GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154" class="sect5"><span class="enumeration_section">6.1.2.2 </span>Relationship Between CONFIGURE CHANNEL and Parallelism Setting
                     </h5>
                     <div>
                        <p>The <code class="codeph">PARALLELISM</code> setting is not constrained by the number of specifically configured channels. 
                        </p>
                        <p>For example, if you back up to 20 different tape devices, then you can configure 20 different SBT channels, each with a manually assigned number (from 1 to 20) and each with a different set of channel options. In such a situation, you can set <code class="codeph">PARALLELISM</code> to any value up to the number of devices, in this instance 20.
                        </p>
                        <p>RMAN always numbers parallel channels starting with <code class="codeph">1</code> and ending with the <code class="codeph">PARALLELISM</code> setting. For example, if the default device is SBT and parallelism is set to 3, then RMAN names the channels as follows:
                        </p><pre class="pre codeblock"><code>ORA_SBT_TAPE_1
ORA_SBT_TAPE_2
ORA_SBT_TAPE_3
</code></pre><p>RMAN always uses the name <code class="codeph">ORA_SBT_TAPE_</code><span class="italic">n</span> even if you configure <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code> (not the synonymous <code class="codeph">sbt_tape</code>). RMAN always allocates the number of channels specified in <code class="codeph">PARALLELISM</code>, using specifically configured channels if you have configured them and generic channels if you have not. If you configure specific channels with numbers higher than the parallelism setting, then this setting prevents RMAN from using them.
                        </p>
                        <div class="infoboxnotealso" id="GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154__GUID-38745B78-0E3B-4418-A239-18EC55845E33">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-architecture.html#GUID-282FD0B6-8593-4775-9965-DB47534D349C" title="An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.">About RMAN Channels</a> to learn about channels
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89460"></a><div class="props_rev_3"><a id="GUID-AC052271-068A-4E4B-8001-525D417DE865" name="GUID-AC052271-068A-4E4B-8001-525D417DE865"></a><h3 id="BRADV-GUID-AC052271-068A-4E4B-8001-525D417DE865" class="sect3"><span class="enumeration_section">6.2 </span>Configuring Advanced Backup Options
               </h3>
               <div>
                  <p>Backup options enable you to control aspects such as backup size, backup compression, and backup encryption.</p>
                  <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-AD92E09D-0788-4AB5-8792-5F969C8D237A" title="RMAN provides sensible defaults for most parameters required to perform basic backup and recovery. You can modify the value of default parameters or override these values for a particular session.">About Configuring the Environment for RMAN Backups</a>"</span> explains the basics for configuring RMAN to make backups. This section explains more advanced configuration options. This section contains the following topics:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" title="The CONFIGURE MAXSETSIZE command limits the size of backup sets created on a channel. This CONFIGURE setting applies to any channel, whether manually allocated or configured, when the BACKUP command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.">Configuring the Maximum Size of Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" title="Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the MAXPIECESIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Configuring the Maximum Size of Backup Pieces</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" title="Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.">Configuring Backup Duplexing</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078" title="Sometimes you may want to omit a specified tablespace from part of the regular backup schedule. Use the CONFIGURE command to configure tablespace exclusion.">Configuring Tablespaces for Exclusion from Whole Database Backups</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" title="RMAN supports precompression processing and binary compression of backup sets. The CONFIGURE COMPRESSION ALGORITHM command enables you to configure compression options.">Configuring Compression Options</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" title="For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.">Configuring Backup Encryption</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV137"></a><div class="props_rev_3"><a id="GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" name="GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A"></a><h4 id="BRADV-GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" class="sect4"><span class="enumeration_section">6.2.1 </span>Configuring the Maximum Size of Backup Sets
                  </h4>
                  <div>
                     <p>The <code class="codeph">CONFIGURE MAXSETSIZE</code> command limits the size of backup sets created on a channel. This <code class="codeph">CONFIGURE</code> setting applies to any channel, whether manually allocated or configured, when the <code class="codeph">BACKUP</code> command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.
                     </p>
                     <div class="section">
                        <p>In tape backups, it is possible for a <a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">multiplexed backup set</span></a> to span multiple tapes, which means that blocks from each data file in the backup set are written to multiple tapes. If one tape of a multivolume backup set fails, then you lose the data on all the tapes rather than just one. If a backup is not a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>, then a backup set always includes a whole data file rather than a partial data file. You can use <code class="codeph">MAXSETSIZE</code> to specify that each backup set fits on one tape rather than spanning multiple tapes.
                        </p>
                        <p>The value set by the <code class="codeph">CONFIGURE MAXSETSIZE</code> command is a default for the given channel. You can override the configured <code class="codeph">MAXSETSIZE</code> value by specifying a <code class="codeph">MAXSETSIZE</code> option for an individual <code class="codeph">BACKUP</code> command.
                        </p>
                        <p>Assume that you issue the following commands at the RMAN prompt:</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_MEDIA_FAMILY=first_pool)'; 
CONFIGURE MAXSETSIZE TO 7500K;
BACKUP TABLESPACE users;
BACKUP TABLESPACE tools MAXSETSIZE 5G;
</code></pre><p>The results are as follows:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The backup of the <code class="codeph">users</code> tablespace uses the configured <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> channel and the configured default <code class="codeph">MAXSETSIZE</code> setting of <code class="codeph">7500K</code>.
                              </p>
                           </li>
                           <li>
                              <p>The backup of the <code class="codeph">tools</code> tablespace uses the <code class="codeph">MAXSETSIZE</code> setting of <code class="codeph">5G</code> specified in the <code class="codeph">BACKUP</code> command.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A__GUID-904019A7-E3C3-4411-A4A1-9C578F9CA731">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="backing-up-database-advanced.html#GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119" title="Backup piece size is an issue in those situations where it exceeds the maximum file size of the file system or media management software. Use the MAXSETSIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Limiting the Size of Backup Sets with BACKUP ... MAXSETSIZE</a></p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89461"></a><div class="props_rev_3"><a id="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" name="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33"></a><h4 id="BRADV-GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" class="sect4"><span class="enumeration_section">6.2.2 </span>Configuring the Maximum Size of Backup Pieces
                  </h4>
                  <div>
                     <p>Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the <code class="codeph">MAXPIECESIZE</code> parameter of the <code class="codeph">CONFIGURE</code> <code class="codeph">CHANNEL</code> or <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> command to limit the size of backup pieces.
                     </p>
                     <div class="section">
                        <p>For example, to limit the backup piece size to 2 gigabytes or less, you can configure the automatic <code class="codeph">DISK</code> channel as follows and then run <code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code>:
                        </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK MAXPIECESIZE 2G;
BACKUP DATABASE;</pre><div class="infoboxnote" id="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33__GUID-2A536D8D-18F6-4FC5-9C50-440F54755CAA">
                           <p class="notep1">Note:</p>
                           <p>In version 2.0 of the media management API, media management vendors can specify the maximum size of a backup piece that can be written to their media manager. RMAN respects this limit regardless of the settings that you configure for <code class="codeph">MAXPIECESIZE</code>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33__GUID-CC7629E9-40D9-4931-A07D-A59EB0412F9D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">CONFIGURE CHANNEL ... MAXPIECESIZE</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV139"></a><div class="props_rev_3"><a id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" name="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B"></a><h4 id="BRADV-GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" class="sect4"><span class="enumeration_section">6.2.3 </span>Configuring Backup Duplexing
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CONFIGURE ... BACKUP COPIES</code> command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.
                     </p>
                     <div class="section">
                        <p>RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices. The <code class="codeph">CONFIGURE</code> settings for duplexing only affect backups of data files, control files, and archived logs into backup sets, and do not affect image copies.
                        </p>
                        <div class="infoboxnote" id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B__GUID-412DEA7F-0BEA-48AD-B474-5D98BD527CB3">
                           <p class="notep1">Note:</p>
                           <p>A <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a> is <span class="italic">never</span> duplexed.
                           </p>
                        </div>
                        <p>By default, <code class="codeph">CONFIGURE</code> <code class="codeph">...</code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> is set to <code class="codeph">1</code> for each device type.
                        </p>
                        <p>The following examples show possible duplexing configurations:</p><pre class="pre codeblock"><code># Makes 2 disk copies of each data file and control file backup set
# (autobackups excluded)
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 2;
# Makes 3 copies of every archived redo log backup to tape
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE sbt TO 3;
</code></pre><p>To return a <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> configuration to its default value, run the same <code class="codeph">CONFIGURE</code> command with the <code class="codeph">CLEAR</code> option, as in the following example:
                        </p><pre class="pre codeblock"><code>CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE sbt CLEAR;</code></pre><div class="infoboxnote" id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B__GUID-159A0982-84C5-47A6-88FC-64F3164DA28B">
                           <p class="notep1">Note:</p>
                           <p>If you do not want to create a persistent copies configuration, then you can specify copies with the <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> and the <a href="../rcmrf/SET.html#RCMRF153" target="_blank"><code class="codeph">SET BACKUP COPIES</code></a> commands.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B__GUID-3EDB47F1-2AB9-42B7-8EA2-503CF6CCE585">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="rman-backup-concepts.html#GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" title="RMAN enables you to make multiple, identical copies of backups.">About Multiple Copies of RMAN Backups</a> for an overview of duplexed backups
                                 </p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database-advanced.html#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" title="RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.">Duplexing Backup Sets</a> to learn how to create duplexed backups
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> syntax
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/SET.html#RCMRF153" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">SET</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV140"></a><div class="props_rev_3"><a id="GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078" name="GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078"></a><h4 id="BRADV-GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078" class="sect4"><span class="enumeration_section">6.2.4 </span>Configuring Tablespaces for Exclusion from Whole Database Backups
                  </h4>
                  <div>
                     <p>Sometimes you may want to omit a specified tablespace from part of the regular backup schedule. Use the <code class="codeph">CONFIGURE</code> command to configure tablespace exclusion.
                     </p>
                     <div class="p">
                        <p>Here are some possible scenarios to consider:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A tablespace is easy to rebuild, so it is more cost-effective to rebuild it than back it up every day. </p>
                           </li>
                           <li>
                              <p>A tablespace contains temporary or test data that you do not need to back up.</p>
                           </li>
                           <li>
                              <p>A tablespace does not change often and therefore should be backed up on a different schedule from other backups.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can run <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><code class="codeph">CONFIGURE EXCLUDE FOR TABLESPACE</code></a> to exclude the specified tablespace from the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP DATABASE</code></a> command. The exclusion condition applies to any data files that you add to this tablespace in the future.
                        </p>
                        <p>For example, you can exclude testing tablespaces <code class="codeph">cwmlite</code> and <code class="codeph">example</code> from whole database backups as follows:
                        </p><pre class="pre codeblock"><code>CONFIGURE EXCLUDE FOR TABLESPACE cwmlite;
CONFIGURE EXCLUDE FOR TABLESPACE example;
</code></pre><p>If you run the following command, then RMAN backs up all tablespaces in the database except <code class="codeph">cwmlite</code> and <code class="codeph">example</code>:
                        </p><pre class="pre codeblock"><code>BACKUP DATABASE;
</code></pre><p>You can still back up the configured tablespaces by explicitly specifying them in a <code class="codeph">BACKUP</code> command or by specifying the <code class="codeph">NOEXCLUDE</code> option on a <code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code> command. For example, you can enter one of the following commands:
                        </p><pre class="pre codeblock"><code>BACKUP DATABASE NOEXCLUDE; #backs up database, including cwmlite and example
BACKUP TABLESPACE cwmlite, example;  # backs up only cwmlite and example
</code></pre><p>You can disable the exclusion feature for <code class="codeph">cwmlite</code> and <code class="codeph">example</code> as follows:
                        </p><pre class="pre codeblock"><code>CONFIGURE EXCLUDE FOR TABLESPACE cwmlite CLEAR;
CONFIGURE EXCLUDE FOR TABLESPACE example CLEAR;
</code></pre><p>RMAN includes these tablespaces in future whole database backups.</p>
                        <div class="infoboxnotealso" id="GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078__GUID-5AB38908-B940-4228-B8B5-94F4788302F5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> and <code class="codeph">CONFIGURE</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89466"></a><div class="props_rev_3"><a id="GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" name="GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A"></a><h4 id="BRADV-GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" class="sect4"><span class="enumeration_section">6.2.5 </span>Configuring Compression Options
                  </h4>
                  <div>
                     <p>RMAN supports precompression processing and binary compression of backup sets. The <code class="codeph">CONFIGURE COMPRESSION ALGORITHM</code> command enables you to configure compression options.
                     </p>
                     <p>This following topics contain additional information about compression:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-1715CC25-E958-4AA1-B362-1818468DC290" title="Better backup compression ratios are achieved by consolidating the free space in each data block, and setting that free space to binary zeroes. This precompression processing stage has the most benefit for data blocks that have been the subject of many deletes and inserts operations. Conversely, it has no effect on data blocks that are still in their initial loaded state.">About RMAN Precompression Block Processing</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-1E61757C-0A4D-4407-BF8E-7D048B216278" title="Oracle Database provides two categories of compression algorithms: a default compression algorithm and a group of compression algorithms available with the Oracle Advanced Compression option.">About RMAN Supported Compression Levels</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV184"></a><div class="props_rev_3"><a id="GUID-1715CC25-E958-4AA1-B362-1818468DC290" name="GUID-1715CC25-E958-4AA1-B362-1818468DC290"></a><h5 id="BRADV-GUID-1715CC25-E958-4AA1-B362-1818468DC290" class="sect5"><span class="enumeration_section">6.2.5.1 </span>About RMAN Precompression Block Processing
                     </h5>
                     <div>
                        <p>Better backup compression ratios are achieved by consolidating the free space in each data block, and setting that free space to binary zeroes. This precompression processing stage has the most benefit for data blocks that have been the subject of many deletes and inserts operations. Conversely, it has no effect on data blocks that are still in their initial loaded state.</p>
                        <p>The <code class="codeph">OPTIMIZE FOR LOAD</code> option controls precompression processing. By specifying the default, <code class="codeph">OPTIMIZE FOR LOAD TRUE</code>, you ensure that RMAN optimizes CPU usage and avoids precompression block processing. By specifying <code class="codeph">OPTIMIZE FOR LOAD FALSE</code>, RMAN uses additional CPU resources to perform precompression block processing.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1715CC25-E958-4AA1-B362-1818468DC290__GUID-27579522-1054-419B-A250-4823EB94E2B6">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> and <code class="codeph">SET</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="BRADV834"></a><div class="props_rev_3"><a id="GUID-1E61757C-0A4D-4407-BF8E-7D048B216278" name="GUID-1E61757C-0A4D-4407-BF8E-7D048B216278"></a><h5 id="BRADV-GUID-1E61757C-0A4D-4407-BF8E-7D048B216278" class="sect5"><span class="enumeration_section">6.2.5.2 </span>About RMAN Supported Compression Levels
                     </h5>
                     <div>
                        <p>Oracle Database provides two categories of compression algorithms: a default compression algorithm and a group of compression algorithms available with the Oracle Advanced Compression option.</p>
                        <p>The default algorithm is a standard feature of Oracle Database while the Oracle Advanced Compression option is a separately purchased option.</p>
                        <div class="infoboxnotealso" id="GUID-1E61757C-0A4D-4407-BF8E-7D048B216278__GUID-13296A82-18A2-4CB8-AD09-957A18486D82">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6" title="Use the CONFIGURE command to configure the default compression algorithm, which does not require the Oracle Advanced Compression option.">About RMAN Default Compression</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45">About Oracle Advanced Compression Option</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="BRADV186"></a><a id="BRADV185"></a><div class="props_rev_3"><a id="GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6" name="GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6"></a><h6 id="BRADV-GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6" class="sect6"><span class="enumeration_section">6.2.5.2.1 </span>About RMAN Default Compression
                        </h6>
                        <div>
                           <p>Use the CONFIGURE command to configure the default compression algorithm, which does not require the Oracle Advanced Compression option.</p>
                           <div class="example" id="GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6__GUID-6A01D728-D528-4E28-A6DD-83B818DB1BDA">
                              <p class="titleinexample">Example 6-3 Configuring Basic Compression for Backup</p>
                              <p>The following example configures basic compression for RMAN backups..</p><pre class="pre codeblock"><code>CONFIGURE COMPRESSION ALGORITHM 'BASIC';</code></pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="BRADV187"></a><div class="props_rev_3"><a id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45" name="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45"></a><h6 id="BRADV-GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45" class="sect6"><span class="enumeration_section">6.2.5.2.2 </span>About Oracle Advanced Compression Option
                        </h6>
                        <div>
                           <p>If you have enabled the Oracle Advanced Compression option, you can choose from the compression levels listed in the following table.</p>
                           <div class="tblformal" id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45__GUID-547DA1BE-7E85-4A76-AA8E-FE99000E07B2">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="List of compression values" width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="40%" id="d30457e2208">Compression Level</th>
                                       <th align="left" valign="bottom" width="60%" id="d30457e2211">Performance Benefits and Trade-Offs</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d30457e2216" headers="d30457e2208 ">
                                          <p><code class="codeph">HIGH</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d30457e2216 d30457e2211 ">
                                          <p>Best suited for backups over slower networks where the limiting factor is network speed.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d30457e2224" headers="d30457e2208 ">
                                          <p><code class="codeph">MEDIUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d30457e2224 d30457e2211 ">
                                          <p>Recommended for most environments. Good combination of compression ratios and speed.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d30457e2232" headers="d30457e2208 ">
                                          <p><code class="codeph">LOW</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d30457e2232 d30457e2211 ">
                                          <p>Least effect on backup throughput.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>The compression ratio generally increases from low to high, with a trade-off of potentially consuming more CPU resources.</p>
                           <p>Because the performance of the various compression levels depends on the nature of the data in the database, network configuration, system resources and the type of computer system and its capabilities, Oracle cannot document universally applicable performance statistics. Which level is best for your environment depends on how balanced your system is regarding bandwidth into the CPU and the actual speed of the CPU. It is highly recommended that you run tests with the different compression levels on the data in your environment. Choosing a compression level based on your environment, network traffic characteristics (workload), and data set is the only way to ensure that the backup set compression level can satisfy your organization's performance requirements and applicable service level agreements.</p>
                           <div class="infoboxnote" id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45__GUID-6CFDEBFC-604D-47EB-A82D-B5FECDDEAE91">
                              <p class="notep1">Note:</p>
                              <p>Restoring a compressed backup is performed inline, and does not require decompression.</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45__GUID-C14595EF-0F14-4A6C-9920-EA024E372473">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBLIC-GUID-60BD93ED-D100-4F84-94DC-3AAB2D466E34" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for more information about the Oracle Advanced Compression option.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If you are backing up to tape and your tape device performs its own compression, then do not use both RMAN backup set compression and the media manager vendor's compression. See the discussion of tuning RMAN's tape backup performance in <a href="tuning-rman-performance.html#GUID-33D81037-2310-4021-8039-1A2C579AAA5A" title="The purpose of RMAN tuning is to identify the bottlenecks for a given job and use RMAN commands, initialization parameters, or adjustments to physical media to improve performance.Multiple factors can affect the performance when an RMAN channel is reading data from disk.During a backup, an RMAN channel reads the blocks from the input files into I/O disk buffers. The database files on the disk subsystem can be managed by either Automatic Storage Management (ASM) or an alternative volume manager or file system. The considerations for backup tuning change depending on whether you manage database files with ASM.When a channel reads from or writes to disk, the I/O is either synchronous I/O or asynchronous I/O. On operating systems that do not support native asynchronous I/O, the database can simulate it with special I/O slave processes. These processes are dedicated to performing I/O on behalf of another process. You can use the RATE parameter to set an upper limit for bytes read so that RMAN does not consume excessive disk bandwidth and degrade online performance. Essentially, RATE serves as a backup throttle. In the copy phase, a channel copies blocks from the input buffers to the output buffers and performs additional processing.When backing up to SBT, RMAN gives the media management software a stream of bytes and associates a unique name with this stream. All details of how and where that stream is stored are handled entirely by the media manager. Thus, a backup to tape involves the interaction of both RMAN and the media manager.The RMAN-specific factors affecting the SBT write phase are analogous to the factors affecting disk reads. In both cases, the buffer allocation, slave processes, and synchronous or asynchronous I/O affect performance. Multiple factors affect the speed of the backup to tape.If the tape device is remote, then the media manager must transfer data over the network. The tape native transfer rate is the speed of writing to a tape without compression. This speed represents the upper limit of the backup rate. The level of tape compression is very important for backup performance. If the tape has good compression, then the sustained backup rate is faster. Tape streaming during write operations has a major effect on tape backup performance. The physical tape block size can affect backup performance. The principal factor affecting the write phase for disk is the buffer size. Typically, you begin the tuning process by using V$ views to determine where RMAN backup and restore operations are encountering problems.You can monitor the progress of backups and restore jobs by querying the view V$SESSION_LONGOPS. RMAN uses two types of rows in V$SESSION_LONGOPS: detail rows and aggregate rows.You can use the V$BACKUP_SYNC_IO and V$BACKUP_ASYNC_IO views to determine the source of backup or restore bottlenecks and to see detailed progress of backup jobs.Query the V$BACKUP_SYNC_IO view to identify bottlenecks with synchronoous I/O.Query the V$BACKUP_ASYNC_IO to identify bottlenecks with asynchronous I/O.Many factors can affect backup performance. Often, finding the solution to a slow backup is a process of trial and error. The RATE parameter on a channel is intended to reduce, rather than increase, backup throughput so that more disk bandwidth is available for other database operations. If the backup is not streaming to tape, then confirm that the RATE parameter is not set.Some operating systems support native asynchronous I/O. If and only if your disk does not support asynchronous I/O, then set DBWR_IO_SLAVES. Any nonzero value for DBWR_IO_SLAVES causes a fixed number of disk I/O slaves to be used for backup and restore, which simulates asynchronous I/O.Set the LARGE_POOL_SIZE initialization parameter if the database reports an error in the alert log stating that it does not have enough memory and that it cannot start I/O slaves.You can perform several tasks to identify and remedy bottlenecks that affect backup performance. One reliable way to determine whether the output device or input disk I/O is the bottleneck in a given backup job is to compare the time required to run backup tasks with the time required to run BACKUP VALIDATE of the same tasks. BACKUP VALIDATE of a backup performs the same disk reads as a real backup but performs no I/O to an output device.Tuning the read phase can help to improve RMAN performance.If the read phase is performing well, then the copy or write phases are probably the bottleneck. In particular, if RMAN is sending data blocks to the tape drive fast enough to support streaming, but the tape is not streaming, then the SBT write phase is the bottleneck.">Tuning RMAN Performance</a>.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="BRADV89467"></a><div class="props_rev_3"><a id="GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" name="GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E"></a><h4 id="BRADV-GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" class="sect4"><span class="enumeration_section">6.2.6 </span>Configuring Backup Encryption
                  </h4>
                  <div>
                     <p>For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC" title="The V$RMAN_ENCRYPTION_ALGORITHMS view contains a list of encryption algorithms supported by RMAN. If no encryption algorithm is specified, then the default encryption algorithm is 128-bit Advanced Encryption Standard (AES).">About Backup Encryption</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" title="You can use the CONFIGURE command to persistently configure transparent encryption of backups.">Configuring RMAN Backup Encryption Modes</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864" title="You can use the CONFIGURE command to persistently configure the default algorithm to use for encryption when writing backup sets.">Configuring the Backup Encryption Algorithm</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV89468"></a><div class="props_rev_3"><a id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC" name="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC"></a><h5 id="BRADV-GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC" class="sect5"><span class="enumeration_section">6.2.6.1 </span>About Backup Encryption
                     </h5>
                     <div>
                        <p>The <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code> view contains a list of encryption algorithms supported by RMAN. If no encryption algorithm is specified, then the default encryption algorithm is 128-bit Advanced Encryption Standard (AES).
                        </p>
                        <p>RMAN encryption requires the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10019" target="_blank"><code class="codeph">COMPATIBLE</code></a> initialization parameter at a target database to be at least 10.2.0.
                        </p>
                        <p>The <a href="glossary.html#GUID-8879C26C-4DF5-4040-BC7A-37CF7C482C56"><span class="xrefglossterm">Oracle Secure Backup</span></a> <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a> is the only supported interface for making encrypted RMAN backups directly to tape. RMAN issues an <code class="codeph">ORA-19919</code> error if you attempt to create encrypted RMAN backups using a media manager other than Oracle Secure Backup.
                        </p>
                        <p>When you use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> <code class="codeph">BACKUPSET</code> command with encrypted backup sets, the backup sets are backed up in encrypted form. Because <code class="codeph">BACKUP BACKUPSET</code> copies an already-encrypted backup set to disk or tape, no decryption key is needed during <code class="codeph">BACKUP BACKUPSET</code>. The data is never decrypted during any part of the operation. The <code class="codeph">BACKUP BACKUPSET</code> command can neither encrypt nor decrypt backup sets.
                        </p>
                        <p>Encrypted backups are decrypted automatically during restore and recovery, if the required decryption keys are available. Each backup set gets a separate key. The key is stored in encrypted form in the backup piece. The backup is decrypted with keys obtained by a user-supplied password or the Oracle software keystore. </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC__GUID-0D13CE7B-061B-46E6-AA7D-3AF6EFA51CBB">RMAN Encryption Modes</p>
                           <p>RMAN offers the following encryption modes:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Transparent encryption</p>
                                 <p>This is the default mode and uses the Oracle software keystore. A keystore is a password-protected container used to store a Transparent Data Encryption (TDE) key. In previous releases, this container was referred to as a wallet.</p>
                              </li>
                              <li>
                                 <p>Password encryption</p>
                                 <p>This mode uses only password protection. You must provide a password when creating and restoring encrypted backups.</p>
                              </li>
                              <li>
                                 <p>Dual mode encryption</p>
                                 <p>This mode requires either the keystore or a password.</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC__GUID-DFB3F9BF-87A5-4E6A-ABB6-2711A7BB9432">
                              <p class="notep1">Note:</p>
                              <p>Keystore-based encryption is more secure than password-based encryption because no passwords are involved. Use password-based encryption only when it is absolutely necessary because your backups must be transportable.</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC__GUID-9C3073D0-226D-4529-85EB-C8BEE2FF1315">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="configuring-rman-client-advanced.html#GUID-00CCDDB4-E999-4956-AF30-15E7D622908B" title="Transparent encryption can create and restore encrypted backups with no DBA intervention, if the required Oracle key management infrastructure is available.">Transparent Encryption of Backups</a></p>
                                 </li>
                                 <li>
                                    <p><a href="configuring-rman-client-advanced.html#GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36" title="Password encryption requires that the DBA provide a password when creating and restoring encrypted backups. Restoring a password-encrypted backup requires the same password that was used to create the backup.">Password Encryption of Backups</a></p>
                                 </li>
                                 <li>
                                    <p><a href="configuring-rman-client-advanced.html#GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8" title="Dual-mode encrypted backups can be restored either transparently or by specifying a password.">Dual Mode Encryption of Backups</a></p>
                                 </li>
                                 <li>
                                    <p><a href="../asoag/asopart1.html#ASOAG600" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> for details about configuring the Oracle keystore
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="BRADV89469"></a><div class="props_rev_3"><a id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B" name="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B"></a><h6 id="BRADV-GUID-00CCDDB4-E999-4956-AF30-15E7D622908B" class="sect6"><span class="enumeration_section">6.2.6.1.1 </span>Transparent Encryption of Backups
                        </h6>
                        <div>
                           <p>Transparent encryption can create and restore encrypted backups with no DBA intervention, if the required Oracle key management infrastructure is available. </p>
                           <p>Transparent encryption is best suited for day-to-day backup operations, where backups are restored to the same database from which they were created. Transparent encryption is the default for RMAN encryption.</p>
                           <p>When you use transparent encryption, you must first configure an Oracle software keystore for each database. Transparent backup encryption supports both the auto-login software keystore and password-based software keystore. When you use the auto-login software keystore, encrypted backup operations can be performed at any time, because the auto-login keystore is always open. When you use the password-based software keystore, the keystore must be opened before you can perform backup encryption.</p>
                           <div class="infoboxnote" id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B__GUID-604DB61F-B710-4E6C-A560-A2135C536A70">
                              <p class="notep1">Caution:</p>
                              <p>If you use an auto-login keystore, do not back it up along with your encrypted backup data, because users can read the encrypted backups if they obtain both the backups and the autologin keystore. It is safe to back up the Oracle keystore because that form of the keystore cannot be used without the keystore password.</p>
                           </div>
                           <p>After the Oracle keystore is configured, encrypted backups can be created and restored with no further DBA intervention. If some columns in the database are encrypted with Transparent Data Encryption (TDE) column encryption, and if those columns are backed up using backup encryption, then those columns are encrypted a second time during the backup. When the backup sets are decrypted during a restore operation, the encrypted columns are returned to their original encrypted form.</p>
                           <p>Because the Oracle key management infrastructure archives all previous master keys in the Oracle keystore, changing or resetting the current database master key does not affect your ability to restore encrypted backups performed with an older master key. You can reset the database master key at any time. RMAN can restore all encrypted backups that were ever created by this database.</p>
                           <div class="infoboxnote" id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B__GUID-37439C97-6B49-461B-9D69-6A5A2722218D">
                              <p class="notep1">Caution:</p>
                              <p>If you lose your Oracle keystore, then you are unable to restore any transparently encrypted backups.</p>
                           </div>
                           <div class="infoboxnote" id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B__GUID-0FCA219B-5A49-4235-9D60-402C107B3BBA">
                              <p class="notep1">Note:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ASOAG600" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> for information about configuring an Oracle software keystore
                              </p>
                           </div>
                        </div>
                     </div><a id="BRADV89470"></a><div class="props_rev_3"><a id="GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36" name="GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36"></a><h6 id="BRADV-GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36" class="sect6"><span class="enumeration_section">6.2.6.1.2 </span>Password Encryption of Backups
                        </h6>
                        <div>
                           <p>Password encryption requires that the DBA provide a password when creating and restoring encrypted backups. Restoring a password-encrypted backup requires the same password that was used to create the backup.</p>
                           <p>Password encryption is useful for backups that are restored at remote locations, but which must remain secure in transit. Password encryption cannot be persistently configured. You do not need to configure an Oracle keystore if password encryption is used exclusively.</p>
                           <div class="infoboxnote" id="GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36__GUID-7D76607A-D4F7-49FC-9ACA-3A595CC669BC">
                              <p class="notep1">Caution:</p>
                              <p>If you forget or lose the password that you used to encrypt a password-encrypted backup, then you are unable to restore the backup.</p>
                           </div>
                           <p>To use password encryption, use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF153" target="_blank"><code class="codeph">SET</code></a> <code class="codeph">ENCRYPTION ON IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span><code class="codeph"> ONLY</code> command in your RMAN scripts.
                           </p>
                        </div>
                     </div><a id="BRADV89471"></a><div class="props_rev_3"><a id="GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8" name="GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8"></a><h6 id="BRADV-GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8" class="sect6"><span class="enumeration_section">6.2.6.1.3 </span>Dual Mode Encryption of Backups
                        </h6>
                        <div>
                           <p>Dual-mode encrypted backups can be restored either transparently or by specifying a password. </p>
                           <p>Dual-mode encrypted backups are useful when you create backups that are normally restored on-site using the Oracle keystore, but which occasionally must be restored offsite, where the Oracle keystore is not available. </p>
                           <p>When restoring a dual-mode encrypted backup, you can use either the Oracle keystore or a password for decryption.</p>
                           <div class="infoboxnote" id="GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8__GUID-CE254F20-989F-4BEF-81F6-25EBC150E798">
                              <p class="notep1">Caution:</p>
                              <p>If you forget or lose the password that you used to encrypt a dual-mode encrypted backup and you also lose your Oracle keystore, then you are unable to restore the backup.</p>
                           </div>
                           <p>To create dual-mode encrypted backup sets, specify the <code class="codeph">SET ENCRYPTION ON IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span> command in your RMAN scripts.
                           </p>
                        </div>
                     </div>
                  </div><a id="BRADV579"></a><a id="BRADV89472"></a><div class="props_rev_3"><a id="GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" name="GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73"></a><h5 id="BRADV-GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" class="sect5"><span class="enumeration_section">6.2.6.2 </span>Configuring RMAN Backup Encryption Modes
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">CONFIGURE</code> command to persistently configure transparent encryption of backups. 
                        </p>
                        <div class="section">
                           <p>You can use the command to specify the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Whether to use transparent encryptions for backups of all database files</p>
                              </li>
                              <li>
                                 <p>Whether to use transparent encryptions for backups of specific tablespaces</p>
                              </li>
                              <li>
                                 <p>Which algorithm to use for encrypting backups</p>
                              </li>
                           </ul>
                           <p>You can also use the <code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> command to perform the following actions:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Override the encryption settings specified by the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><code class="codeph">CONFIGURE</code></a> <code class="codeph">ENCRYPTION</code> command. For example, you can use <code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> <code class="codeph">OFF</code> to create an unencrypted backup, even though a database is configured for encrypted backups.
                                 </p>
                              </li>
                              <li>
                                 <p>Set a password for backup encryption, persisting until the RMAN client exits. Because of the sensitive nature of passwords, RMAN does not permit configuration of passwords that persist across RMAN sessions.</p>
                              </li>
                           </ul>
                           <p>Using or not using persistent configuration settings controls whether archived redo log backups are encrypted. Backup sets containing archived redo log files are encrypted if any of the following are true:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> <code class="codeph">ON</code> is in effect when the archive log backup is being created.
                                 </p>
                              </li>
                              <li>
                                 <p>Encryption is configured for backups of the whole database or at least one tablespace.</p>
                              </li>
                           </ul>
                           <p>This behavior ensures that the redo associated with any encrypted backup of a data file is also encrypted.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73__GUID-5BD7E370-C0BC-4ED1-952C-469333C563E3">To configure the environment so that all RMAN backups are encrypted:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Set up the Oracle keystore as explained in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ASOAG600" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a>.</span></li>
                           <li class="stepexpand"><span>Issue the following RMAN command:</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE ENCRYPTION FOR DATABASE ON;
</pre><p>At this stage, all RMAN backup sets created by this database use transparent encryption by default.</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>You can explicitly override the persistent encryption configuration for an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> with the following command:
                           </p><pre class="oac_no_warn" dir="ltr">SET ENCRYPTION ON;
</pre><p>The encryption setting remains in effect until you issue the <code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> <code class="codeph">OFF</code> command during an RMAN session, or change the persistent setting again with the following command:
                           </p><pre class="oac_no_warn" dir="ltr">CONFIGURE ENCRYPTION FOR DATABASE OFF;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV580"></a><a id="BRADV90077"></a><div class="props_rev_3"><a id="GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864" name="GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864"></a><h5 id="BRADV-GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864" class="sect5"><span class="enumeration_section">6.2.6.3 </span>Configuring the Backup Encryption Algorithm
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">CONFIGURE</code> command to persistently configure the default algorithm to use for encryption when writing backup sets.
                        </p>
                        <div class="section">
                           <p>Possible values are listed in <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code>. The default algorithm is AES 128-bit.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864__GUID-4250D7C9-075E-416D-B0CA-95B5BA79912A">To configure the default backup encryption algorithm:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used).</span></li>
                           <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                           <li class="stepexpand"><span>Execute the <code class="codeph">CONFIGURE ENCRYPTION ALGORITHM</code> command, specifying a valid value from <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS.ALGORITHM_NAME</code>.</span><div>
                                 <p>The following example configures the algorithm to AES 256-bit encryption:</p><pre class="pre codeblock"><code>CONFIGURE ENCRYPTION ALGORITHM TO 'AES256';</code></pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV14011"></a><div class="props_rev_3"><a id="GUID-9C633A44-5533-467E-9108-14BC088A1F82" name="GUID-9C633A44-5533-467E-9108-14BC088A1F82"></a><h3 id="BRADV-GUID-9C633A44-5533-467E-9108-14BC088A1F82" class="sect3"><span class="enumeration_section">6.3 </span>Configuring Auxiliary Instance Data File Names
               </h3>
               <div>
                  <p>You may want to set the names of data files in the auxiliary instance when performing operations such as data file tablespace point-in-time recovery (TSPITR) or data transfer with RMAN. You set these names before starting the TSPITR or database duplication.</p>
                  <div class="section">
                     <p>The command is as follows, where <span class="italic"><code class="codeph">datafileSpec</code></span> identifies some data file by its original name or data file number, and <span class="italic"><code class="codeph">filename</code></span> is the new path for the specified file:
                     </p><pre class="pre codeblock"><code>CONFIGURE AUXNAME FOR <span class="italic">datafileSpec</span> TO '<span class="italic"><code class="codeph">filename</code></span>';
</code></pre><p>For example, you might configure a new auxiliary name for data file <code class="codeph">2</code> as follows:
                     </p><pre class="pre codeblock"><code>CONFIGURE AUXNAME FOR DATAFILE 2 TO '/newdisk/datafiles/df2.df';</code></pre><p>As with other settings, the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><code class="codeph">CONFIGURE</code></a> command setting persists across RMAN sessions until cleared with <code class="codeph">CONFIGURE </code><code class="codeph">...</code> <code class="codeph">CLEAR</code>, as shown in the following example:
                     </p><pre class="pre codeblock"><code>CONFIGURE AUXNAME FOR DATAFILE 2 CLEAR;</code></pre><p>If you are performing TSPITR or running the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF126" target="_blank"><code class="codeph">DUPLICATE</code></a> command, then by using <code class="codeph">CONFIGURE AUXNAME</code> you can preconfigure the file names for use on the auxiliary database without manually specifying the auxiliary file names during the procedure.
                     </p>
                     <p>When renaming files with the <code class="codeph">DUPLICATE</code> command, <code class="codeph">CONFIGURE AUXNAME</code> is an alternative to <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF153" target="_blank"><code class="codeph">SET NEWNAME</code></a> command. The difference is that after you set the <code class="codeph">AUXNAME</code> the first time, you do not need to reset the file name when you issue another <code class="codeph">DUPLICATE</code> command; the <code class="codeph">AUXNAME</code> setting remains in effect until you issue <code class="codeph">CONFIGURE AUXNAME</code> <code class="codeph">...</code> <code class="codeph">CLEAR</code>. In contrast, you must reissue the <code class="codeph">SET NEWNAME</code> command every time you rename files.
                     </p>
                     <div class="infoboxnotealso" id="GUID-9C633A44-5533-467E-9108-14BC088A1F82__GUID-E9229148-E15A-47D9-8CDC-3DF7E7D723A5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performing-rman-tspitr.html#GUID-CAACDB53-7C3A-45B4-8249-C5D855D47571" title="To use RMAN tablespace point-in-time recovery (TSPITR) effectively, it is helpful to understand what types of problems it can resolve, its components, what RMAN does during TSPITR, and the various limitations and restrictions on when and how it can be run. This section explains the basic concepts, preparatory tasks, and modes of running RMAN TSPITR.Recovery Manager (RMAN) TSPITR enables quick recovery of one or more tablespaces in a database to an earlier time without affecting the rest of the tablespaces and objects in the database.Understand the concepts of RMAN TSPITR such as the terminology and modes used.This section defines some common entities that are used by RMAN TSPITR.There are several modes of running RMAN TSPITR. The difference between the various modes of operation corresponds to how much automation versus customization you require in your environment. Select tablespaces from the recovery set, an auxiliary destination, and a target time before you perform fully automated RMAN TSPITR (default).Some database problems cannot be resolved with TSPITR because of certain restrictions and limitations.There are some limitations to consider when performing TSPITR.Be aware of certain precautions when not using a recovery catalog during TSPITR.Certain steps must be completed when preparing to perform TSPITR.It is extremely important that you choose the right target time or SCN for your TSPITR. Note that after you bring a tablespace online after TSPITR, you cannot use any backup from a time earlier than the moment you brought the tablespace online. Initially, your recovery set includes the data files for the tablespaces that you intend to recover. However, if objects in the tablespaces that you need have relationships (such as constraints) to objects in other tablespaces, then you must account for these relationships before you can perform TSPITRRMAN TSPITR requires that the tablespace that is being recovered be self-contained and that no SYS-owned objects reside in the tablespace. When you perform RMAN TSPITR on a tablespace, objects created after the target recovery time are lost. You can preserve such objects after they are identified by exporting them before TSPITR with the Data Pump Export utility and reimporting them afterward with Data Pump Import.In the default mode, RMAN bases as much of the configuration for TSPITR as possible on the target database. You can customize some aspects of RMAN TSPITR while still mostly following the procedure for performing fully automated RMAN TSPITR.You may not want the recovery set data files restored and recovered in their original locations. The SET NEWNAME command enables you to specify a new destination. When you specify a new destination for the recovery set, RMAN does not remove the original data files of the tablespaces.Unlike recovery set data files, which are usually stored in their original locations, auxiliary set data files must not overwrite the corresponding original files in the target database. If you do not specify an auxiliary set file location that is different from its original location, then TSPITR fails. The failure occurs when RMAN attempts to overwrite the corresponding file in the original database and discovers the file in use.Auxiliary set data files can have Oracle Managed Files (OMF) in the target and can use Automatic Storage Management (ASM) or non-ASM storage. TSPITR performs name conversion differently when the DB_FILE_NAME_CONVERT initialization parameter is set and the OMF files are in ASM or non-ASM storage. You can use DB_FILE_NAME_CONVERT and LOG_FILE_NAME_CONVERT initialization parameters for the auxiliary database to specify the conversion of the disk group. RMAN uses the pattern to convert the ASM disk group name and generates a valid OMF file name in the converted disk group. Multiple methods are available to rename OMF (non-ASM) file names for the auxiliary database.To specify a new name for an auxiliary set data file, you can enclose RECOVER TABLESPACE in a RUN command and use a SET NEWNAME command within the RUN block to rename the file. When you do not want to use an auxiliary destination for all of your auxiliary set data files, but you also do not want to name every file individually, you can include a DB_FILE_NAME_CONVERT initialization parameter in the initialization parameter file used by the auxiliary database.Temp files are considered part of the auxiliary set for your database. When the auxiliary database is instantiated, RMAN recreates the temporary tablespaces of the target database and generates their names with the regular rules for the auxiliary data file names. TSPITR performance can be enhanced by redirecting RMAN to use existing image copies of the recovery set and auxiliary set data files. In this case, RMAN does not need to restore the data files from backup.The SET NEWNAME command enables you to specify the location of the image copies when performing TSPITR using image copies.The CONFIGURE AUXNAME command sets a persistent alternative location for an auxiliary set data file image copy, whereas the SET NEWNAME command sets an alternative location for the duration of a RUN command.This procedure uses CONFIGURE AUXNAME when performing TSPITR using image copies.The automatic auxiliary database uses a set of default initialization parameters. You can add other parameters, if required.If you use an initialization parameter file, then you can use the CONTROL_FILES initialization parameter to specify your own location for the control file of your auxiliary databaseTo perform recovery on the auxiliary and recovery sets after restoring them at the auxiliary database, RMAN may need to restore archived logs. When an auxiliary destination is being used, the archived logs are restored to that location.If you specify the LOG_FILE_NAME_CONVERT initialization parameter in your auxiliary database parameter file and the parameter successfully converts the names of the online redo logs of the target, then this parameter determines the online redo log location. Although Oracle recommends that you let RMAN manage all aspects of the auxiliary database, there may be times when you must create and manage your own auxiliary database. If you select this mode, you are responsible for setting up, starting, stopping and cleaning up the auxiliary database used in TSPITR.Creating an Oracle instance suitable for use as an auxiliary database requires you to perform a set of steps.There are multiple ways to create a password file for the auxiliary database.Use a text editor to create an initialization parameter file for the auxiliary database on the target database host. The auxiliary database must have a valid net service name. Before proceeding, use SQL*Plus to ensure that you can establish a SYSBACKUP or SYSDBA connection to the auxiliary database.Keep in mind certain guidelines when performing TSPITR with your own auxiliary instance.The default behavior for channels when you use your own auxiliary database for TSPITR can be overridden.You may want to use SET NEWNAME commands to refer to existing image copies of auxiliary set files to improve TSPITR performance, or to assign new names to the recovery set files for after TSPITR. Plan these commands, if necessary, and add them to the sequence of commands that you run for TSPITR.Complete the prerequisites and then follow the steps in this section to perform TSPITR with your own auxiliary database.Before beginning RMAN TSPITR, you must start the auxiliary database. Because the auxiliary database does not yet have a control file, you can only start the instance in NOMOUNT mode. Start RMAN and connect to the target database and the manually created auxiliary database.Use the RECOVER TABLESPACE command to perform TSPITR with your own auxiliary instance.This procedure uses the RECOVER TABLESPACE... UNTIL command to perform TSPITR.A variety of problems can cause RMAN TSPITR to fail. The problem must be identified and fixed.Name conflicts can occur between files in the target database, file names assigned by the SET NEWNAME or CONFIGURE AUXNAME commands, and file names generated by the effect of the DB_FILE_NAME_CONVERT parameter.During TSPITR, RMAN needs information about which tablespaces had undo segments at the TSPITR target time. This information is usually available in the recovery catalog, if one is used. If you are managing your own auxiliary database and TSPITR fails, do not attempt to rerun TSPITR without resolving the errors.">Performing RMAN Tablespace Point-in-Time Recovery (TSPITR)</a> for more details on using <code class="codeph">CONFIGURE AUXNAME</code> for TSPITR
                              </p>
                           </li>
                           <li>
                              <p><a href="rman-duplicating-databases.html#GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" title="This chapter describes how to use the DUPLICATE command to create an independently functioning database copy.">Duplicating Databases</a> for more details on using <code class="codeph">CONFIGURE AUXNAME</code> in performing database duplication
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV141"></a><div class="props_rev_3"><a id="GUID-B7B61600-6DED-413D-B134-1DAE79627A01" name="GUID-B7B61600-6DED-413D-B134-1DAE79627A01"></a><h3 id="BRADV-GUID-B7B61600-6DED-413D-B134-1DAE79627A01" class="sect3"><span class="enumeration_section">6.4 </span>Configuring the Snapshot Control File Location
               </h3>
               <div>
                  <p>When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.</p>
                  <p>The default location for the snapshot control file is platform-specific and depends on the Oracle home of each target database. For example, the default file name on some Linux platforms is <code class="codeph">$ORACLE_HOME/dbs/snapcf_@.f</code>. If a <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a> is configured for a target database, then the default location for the snapshot control file is <span class="italic">not</span> the fast recovery area.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E" title="You can see the current snapshot location by running the SHOW command.">Viewing the Configured Location of the Snapshot Control File</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39" title="Use the CONFIGURE SNAPSHOT CONTROLFILE NAME TO 'filepath' command to change the name and path of the snapshot control file. Subsequent snapshot control files that RMAN creates use the specified name and path.">Setting the Location of the Snapshot Control File</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89474"></a><div class="props_rev_3"><a id="GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E" name="GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E"></a><h4 id="BRADV-GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E" class="sect4"><span class="enumeration_section">6.4.1 </span>Viewing the Configured Location of the Snapshot Control File
                  </h4>
                  <div>
                     <p>You can see the current snapshot location by running the <code class="codeph">SHOW</code> command. 
                     </p>
                     <div class="section">
                        <p>This example shows a snapshot location that is determined by the default rule:</p><pre class="pre codeblock"><code>RMAN&gt; SHOW SNAPSHOT CONTROLFILE NAME;
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/oracle/dbs/snapcf_trgt.f'; # default
</code></pre><p>This example shows a snapshot control file that has a nondefault file name:</p><pre class="pre codeblock"><code>RMAN&gt; SHOW SNAPSHOT CONTROLFILE NAME;
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/oracle/oradata/trgt/snap_trgt.ctl';</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89475"></a><div class="props_rev_3"><a id="GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39" name="GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39"></a><h4 id="BRADV-GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39" class="sect4"><span class="enumeration_section">6.4.2 </span>Setting the Location of the Snapshot Control File
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE NAME TO '</code><span class="italic"><code class="codeph">filepath</code></span><code class="codeph">'</code> command to change the name and path of the snapshot control file. Subsequent snapshot control files that RMAN creates use the specified name and path.
                     </p>
                     <div class="section">
                        <p>In an Oracle Real Application Clusters (Oracle RAC) environment, the snapshot control file location must be on shared storage—that is, storage that is accessible to all Oracle RAC instances.</p>
                        <p>For example, start RMAN, connect to the target database, and then enter:</p><pre class="pre codeblock"><code>CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/oracle/oradata/trgt/snap_trgt.ctl';
</code></pre><p>You can also set the snapshot control file name to a <a href="glossary.html#GUID-D6545038-B176-4D0E-9B4B-E4187A063984"><span class="xrefglossterm">raw device</span></a>.
                        </p>
                        <p>To reset the snapshot control file location to the default, run the <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE NAME CLEAR</code> command.
                        </p>
                        <div class="infoboxnotealso" id="GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39__GUID-B19AEA8A-A449-40C3-A0E3-1B2C5E0B3FAC">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="managing-recovery-catalog.html#GUID-87642B50-AF67-482E-A93D-291B8D2EED92" title="When RMAN performs a resynchronization, it compares the recovery catalog to either the current or backup control file of the target database and updates the catalog with metadata that is missing or changed.">Resynchronizing the Recovery Catalog</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RACAD320" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for details about handling snapshot control files in Oracle RAC configurations
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV190"></a><a id="BRADV142"></a><div class="props_rev_3"><a id="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE" name="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE"></a><h3 id="BRADV-GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE" class="sect3"><span class="enumeration_section">6.5 </span>Configuring RMAN for Use with a Shared Server
               </h3>
               <div>
                  <p>RMAN cannot connect to a target database through a shared server dispatcher. RMAN requires a dedicated server process. </p>
                  <div class="section">
                     <p>If your target database is configured for a shared server, then you must modify your Oracle Net configuration to provide dedicated server processes for RMAN connections.</p>
                     <p>To ensure that RMAN does not connect to a dispatcher when a target database is configured for a shared server, the net service name used by RMAN must include <code class="codeph">(SERVER=DEDICATED)</code> in the <code class="codeph">CONNECT_DATA</code> attribute of the connect string. 
                     </p>
                     <p>Oracle Net configuration varies greatly from system to system. The following procedure illustrates only one method. This scenario assumes that the following service name in <code class="codeph">tnsnames.ora</code> file connects to a target database using the shared server architecture, where <code class="codeph">inst1</code> is a value of the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10194" target="_blank"><code class="codeph">SERVICE_NAMES</code></a> initialization parameter:
                     </p><pre class="pre codeblock"><code>inst1_shs =
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=tcp)(HOST=inst1_host)(port=1521))
    (CONNECT_DATA=(SERVICE_NAME=inst1)(SERVER=shared))
  ) </code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE__GUID-E536EFA9-9E91-40E2-9052-5516BEE07822">To use RMAN with a shared server:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create a net service name in the <code class="codeph">tnsnames.ora</code> file that connects to the nonshared SID. For example, enter:</span><div><pre class="pre codeblock"><code>inst1_ded =
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=tcp)(HOST=inst1_host)(port=1521))
    (CONNECT_DATA=(SERVICE_NAME=inst1)(SERVER=dedicated))
  )
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Start SQL*Plus and then connect using both the shared server and dedicated server service names to confirm the mode of each session. </span><div>
                           <p>For example, connect with <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege to <code class="codeph">inst1_ded</code> and then execute the following <code class="codeph">SELECT</code> statement (sample output included):
                           </p><pre class="pre codeblock"><code>SQL&gt; SELECT SERVER 
  2  FROM   V$SESSION 
  3  WHERE  SID = (SELECT DISTINCT SID FROM V$MYSTAT);

SERVER   
---------
DEDICATED
1 row selected.
</code></pre><p>To connect to a shared server session, connect with <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege to <code class="codeph">inst1_shs</code> and then execute the following <code class="codeph">SELECT</code> statement (sample output included):
                           </p><pre class="pre codeblock"><code>SQL&gt; SELECT SERVER 
  2  FROM   V$SESSION 
  3  WHERE  SID = (SELECT DISTINCT SID FROM V$MYSTAT);

SERVER   
---------
SHARED 
1 row selected.
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Start RMAN and connect to the target database using the dedicated service name. Optionally, connect to a recovery catalog. </span><div>
                           <div class="infoboxnotealso" id="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE__GUID-61A96258-EE48-4955-9739-C0421D000A02">
                              <p class="notep1">See Also:</p>
                              <p>Your platform-specific Oracle documentation and the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=NETRF005" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a> for a complete description of Oracle Net connect string syntax
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="BRADV89476"></a><div class="props_rev_3"><a id="GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0" name="GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0"></a><h3 id="BRADV-GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0" class="sect3"><span class="enumeration_section">6.6 </span>Enabling Lost Write Detection
               </h3>
               <div>
                  <p>A data block lost write occurs when an I/O subsystem acknowledges the completion of the block write, but the write did not occur in the persistent storage. On a subsequent block read, the I/O subsystem returns the stale version of the data block, which might be used to update other blocks of the database, thereby corrupting it.</p>
                  <p>You can set the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10268" target="_blank"><code class="codeph">DB_LOST_WRITE_PROTECT</code></a> initialization parameter to <code class="codeph">TYPICAL</code> or <code class="codeph">FULL</code> so that a database records buffer cache block reads in the redo log. The default setting is <code class="codeph">NONE</code>. When the parameter is set to <code class="codeph">TYPICAL</code>, the instance logs buffer cache reads for read/write tablespaces in the redo log, but not read-only tablespaces. When set to <code class="codeph">FULL</code>, the instance also records reads for read-only tablespaces. The performance overhead for <code class="codeph">TYPICAL</code> mode is approximately 5 to 10% and potentially higher for <code class="codeph">FULL</code> mode.
                  </p>
                  <p>Lost write detection is most effective when used with Data Guard. In this case, you set <code class="codeph">DB_LOST_WRITE_PROTECT</code> in both primary and standby databases. When a standby database applies redo during managed recovery, it reads the corresponding blocks and compares the SCNs with the SCNs in the redo log. If the block SCN on the primary database is lower than on the standby database, then it detects a lost write on the primary database and throws an external error (<code class="codeph">ORA-752</code>). If the SCN is higher, it detects a lost write on the standby database and throws an internal error (<code class="codeph">ORA-600 [3020]</code>). In either case, the standby database writes the reason for the failure in the alert log and trace file.
                  </p>
                  <p>To repair a lost write on a primary database, you must initiate failover to the standby database. To repair a lost write on a standby database, you must re-create the entire standby database or restore a backup of only the affected files.</p>
                  <p>Enabling lost write detection is also useful when you are not using Data Guard. In this case, you can encounter a lost write in two ways: during normal database operation or during media recovery. In the first case, there is no direct way to detect the error. Indirect symptoms such as inconsistent tables cannot be unambiguously traced to the lost write. If you retained a backup made <span class="italic">before</span> the suspected lost write, however, then you can restore this backup to an alternative location and recover it. To diagnose the problem, recover the database or tablespace to the SCN of the stale block read, which then generates the lost write error (<code class="codeph">ORA-752</code>).
                  </p>
                  <p>If a lost write error is encountered during media recovery, the only response is to open the database with the <code class="codeph">RESETLOGS</code> option. The database is in a consistent state, but all data after the <code class="codeph">RESETLOGS</code> SCN is lost. If you recover a backup made after database creation, you have no guarantee that other stale blocks have not corrupted the database. This possibility exists because the restored backup may have been made after an earlier lost write. To guarantee that no lost writes have corrupted the database, you must perform media recovery from database creation, which is not a practical strategy for most database environments.
                  </p>
                  <div class="infoboxnotealso" id="GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0__GUID-81D36D44-3763-4BBC-A650-8C162F526B28">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=SBYDB00930" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to use a standby database for lost write detection and repair
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10268" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the <code class="codeph">DB_LOST_WRITE_PROTECT</code> initialization parameter
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E" name="GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E"></a><h3 id="BRADV-GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E" class="sect3"><span class="enumeration_section">6.7 </span>Enabling Shadow Lost Write Protection
               </h3>
               <div>
                  <p>Shadow lost write protection provides fast detection and immediate response to a data block lost rewrite thereby minimizing data loss and database repair time. A standby database is not mandatory for using shadow lost write protection.</p>
                  <div class="section">
                     <p></p>
                     <p>A data block lost write occurs when an I/O subsystem acknowledges the completion of a block write, but the write did not occur in the storage. Subsequent block reads will return the stale version of the data block, which may be used to update other data blocks, thus corrupting data. Shadow lost write protection uses shadow tablespaces to store only SCNs for the tracked data files. When a tracked data block is read from disk, shadow lost write protection detects lost writes by comparing the SCN for the block in the shadow tablespace with the SCN of the most recent write in the block being read.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">
                     <p>Shadow lost write protection can be enabled at the database level, PDB level, tablespace level, or data file level. The database compatibility level must be 18.0.0 or higher.</p>
                     <p>To use shadow lost write protection:</p>
                  </div>
                  <!-- class="section" -->
                  <ul>
                     <li><span>Create one or more shadow tablespaces for shadow lost write protection using the <code class="codeph">CREATE BIGFILE TABLESPACE</code> command with the <code class="codeph">LOST WRITE PROTECTION</code> clause.</span></li>
                     <li><span>Enable shadow lost write protection at the required level (database, PDB, tablespace, or data file). Use the <code class="codeph">ALTER</code> command with the <code class="codeph">ENABLE LOST WRITE PROTECTION</code> clause to enable shadow lost write protection.</span></li>
                  </ul>
                  <div class="section">
                     <p>When shadow lost write protection is enabled, RMAN checks the blocks being read for lost writes. If any lost writes are found, an error is displayed and the backup operation is aborted.</p>
                     <div class="infoboxnote" id="GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E__GUID-8E738ACF-CD4B-447C-BC53-A1481937E169">
                        <p class="notep1">Note:</p>Shadow lost write protection is not related to lost write protection that is configured using the <code class="codeph">DB_LOST_WRITE_PROTECT</code> initialization parameter.
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../admin/managing-tablespaces.html#ADMIN-GUID-23154DE0-B2AA-4D73-BBCA-73ED5786FF2B" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='01400.overview-oracle-database-qos-management.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">
      <meta name="description" content="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">
      <title>Overview of Oracle Database QoS Management</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User’s Guide">
      <meta property="og:description" content="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96320-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="benefits-using-qos-management.html" title="Previous" type="text/html">
      <link rel="next" href="what-does-qos-management-manage.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide">
    <meta name="dcterms.isVersionOf" content="ATNMS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="benefits-using-qos-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="what-does-qos-management-manage.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-qos-management.html" property="item" typeof="WebPage"><span property="name">Monitoring and Managing Database Workload Performance</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-oracle-database-qos-management.html" property="item" typeof="WebPage"><span property="name">Introduction to Oracle Database QoS Management</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Overview of Oracle Database QoS Management</li>
            </ol>
            <a id="GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" name="GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2"></a>
            
            <h2 id="ATNMS-GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" class="sect2"><span class="enumeration_section">6.3 </span>Overview of Oracle Database QoS Management
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E">How Does Oracle Database QoS Management Work?</a><br>With Oracle Database, you can use services to manage the workload on your system by starting services on groups of servers that are dedicated to particular workloads.
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD">Overview of Policy Sets</a><br>A Policy Set enables you to specify your resources, Performance Classes (workloads), and one or more Performance Policies that specify the Performance Objective for each Performance Class.
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8">Overview of Server Pools</a><br>With the introduction of server pools to logically divide a cluster, you can achieve the benefit of physical consolidation and resource agility while maintaining workload isolation.
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43">How Server Pools Are Used by Oracle Database QoS Management</a><br>You should create one or more server pools depending on the workloads that need to be managed. 
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F">Overview of Performance Classes</a><br>A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster.
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4">Overview of Performance Policies and Performance Objectives</a><br>To manage the various Performance Objectives, you define one or more Performance Policies.
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C">How Oracle Database QoS Management Collects and Analyzes Performance Data</a><br>The Oracle Database QoS Management Server retrieves metrics data from Oracle Real Application Clusters (Oracle RAC) and Oracle RAC One Node databases in the cluster.
                  </li>
                  <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87">Overview of Recommendations</a><br>Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="introduction-oracle-database-qos-management.html#GUID-8CB70EEB-3E9E-4417-ACA3-90A99CC83962" title="This chapter provides an overview of Oracle Database Quality of Service Management (Oracle Database QoS Management).">Introduction to Oracle Database QoS Management</a></p>
                  </div>
               </div>
            </div>
            <a id="APQOS115"></a><div class="props_rev_3"><a id="GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E" name="GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E"></a><h3 id="ATNMS-GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E" class="sect3"><span class="enumeration_section">6.3.1 </span>How Does Oracle Database QoS Management Work?
               </h3>
               <div>
                  <p>With Oracle Database, you can use services to manage the workload on your system by starting services on groups of servers that are dedicated to particular workloads.</p>
                  <p>At the database tier, for example, you could dedicate one group of servers to online transaction processing (OLTP), dedicate another group of servers to application testing, and dedicate a third group of servers for internal applications. The system administrator can allocate resources to specific workloads by manually changing the number of servers on which a database service is allowed to run. </p>
                  <p>Using groups of servers in this way isolates the workloads from each other to prevent demand surges, failures, and other problems in one workload from affecting the other workloads. However, in this type of deployment, you must separately provision the servers to each group to satisfy the peak demand of each workload because resources are not shared.</p>
                  <p>Oracle Database QoS Management performs the following actions:</p>
                  <ol>
                     <li>
                        <p>Uses a policy created by the QoS administrator to do the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Assign each work request to a <a href="glossary.html#GUID-9170758C-1211-4A7B-B8A0-0E80316F5D2B"><span class="xrefglossterm">Performance Class</span></a> by using the attributes of the incoming work requests (such as the database service to which the application connects).
                              </p>
                           </li>
                           <li>
                              <p>Determine the target response times (<a href="glossary.html#GUID-01F7E040-A79E-4934-80EF-DBD8A9D6F24B"><span class="xrefglossterm">Performance Objectives</span></a>) for each Performance Class.
                              </p>
                           </li>
                           <li>
                              <p>Determine which Performance Classes are the most critical to your business</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Monitors the resource usage and resource wait times for all the Performance Classes.</p>
                     </li>
                     <li>
                        <p>Analyzes the average response time for a Performance Class against the Performance Objective in effect for that Performance Class</p>
                     </li>
                     <li>
                        <p>Produces recommendations for reallocating resources to improve the performance of a Performance Class that is exceeding its target response time, and provides an analysis of the predicted impact to performance levels for each Performance Class if that recommendation is implemented.</p>
                     </li>
                     <li>
                        <p>Implements the actions listed in the recommendation when directed to by the Oracle Database QoS Management administrator, then evaluates the system to verify that each Performance Class is meeting its Performance Objective after the resources have been reallocated.</p>
                     </li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26">Oracle Database QoS Management and Server Pools</a><br>You can use server pools to create groups of servers within a cluster to provide workload isolation.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-8047A7B0-E167-4691-857D-12C05E417AB7">Oracle Database QoS Management and Instance Caging</a><br>When multiple database instances share a single server, they must share its CPU, memory, and I/O bandwidth.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3">Oracle Database QoS Management and Services</a><br>Oracle Database QoS Management uses database services to monitor and manage  client and application workloads.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="APQOS357"></a><div class="props_rev_3"><a id="GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26" name="GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26"></a><h4 id="ATNMS-GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26" class="sect4"><span class="enumeration_section">6.3.1.1 </span>Oracle Database QoS Management and Server Pools
                  </h4>
                  <div>
                     <p>You can use server pools to create groups of servers within a cluster to provide workload isolation.</p>
                     <p>A server can only belong to one server pool at any time. You can create an Oracle Database in a single server pool, or across multiple server pools. Oracle Database QoS Management can make recommendations to move a server from one server pool to another based on the measured and projected demand. Oracle Database QoS Management can also relocate servers to satisfy the Performance Objectives currently in effect.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD92105" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E" title="With Oracle Database, you can use services to manage the workload on your system by starting services on groups of servers that are dedicated to particular workloads.">How Does Oracle Database QoS Management Work?</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="APQOS359"></a><a id="APQOS358"></a><div class="props_rev_3"><a id="GUID-8047A7B0-E167-4691-857D-12C05E417AB7" name="GUID-8047A7B0-E167-4691-857D-12C05E417AB7"></a><h4 id="ATNMS-GUID-8047A7B0-E167-4691-857D-12C05E417AB7" class="sect4"><span class="enumeration_section">6.3.1.2 </span>Oracle Database QoS Management and Instance Caging
                  </h4>
                  <div>
                     <p>When multiple database instances share a single server, they must share its CPU, memory, and I/O bandwidth.</p>
                     <p>Instance Caging limits the amount of CPU an Oracle database instance consumes by using the Oracle Database Resource Manager and the <code class="codeph">CPU_COUNT</code> database initialization parameter. When using Oracle Database QoS Management, the sum of the values for <code class="codeph">CPU_COUNT</code> for all instances of the server must be less than or equal to the total number of physical CPUs. Also, each CPU partition, or <span class="bold">slice</span>, must be uniform in thickness (number of CPUs) for each instance of a database within a server pool. These requirements help to ensure predictable and isolated performance of each database.
                     </p>
                     <div class="figure" id="GUID-8047A7B0-E167-4691-857D-12C05E417AB7__GUID-0EF6AEF0-52E6-4B6E-88AF-82381132E8A4">
                        <p class="titleinfigure">Figure 6-1 Instance Caging and CPU Slices</p><img src="img/apqos008.png" alt="Description of Figure 6-1 follows" title="Description of Figure 6-1 follows" longdesc="img_text/apqos008.html"><br><a href="img_text/apqos008.html">Description of "Figure 6-1 Instance Caging and CPU Slices"</a></div>
                     <!-- class="figure" -->
                     <p>When you implement instance caging, Oracle Database QoS Management can provide recommendations to reallocate CPU resources from one slice to another slice within the same server pool. If you choose to implement the recommendation to modify the instance caging settings, then Oracle Database QoS Management modifies the <code class="codeph">CPU_COUNT</code> parameter uniformly for all the database instances running on servers in the server pool.
                     </p>
                     <p>Modifying the <code class="codeph">CPU_COUNT</code> parameter and configuring Oracle Database QoS Management so that a Resource Plan is activated enables the Instance Caging feature. When you use Instance Caging to constrain CPU usage for an instance, that instance could become CPU-bound. This is when the Resource Manager begins to do its work, allocating CPU shares among the various database sessions according to the active resource plan. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E" title="With Oracle Database, you can use services to manage the workload on your system by starting services on groups of servers that are dedicated to particular workloads.">How Does Oracle Database QoS Management Work?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS360"></a><div class="props_rev_3"><a id="GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3" name="GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3"></a><h4 id="ATNMS-GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3" class="sect4"><span class="enumeration_section">6.3.1.3 </span>Oracle Database QoS Management and Services
                  </h4>
                  <div>
                     <p>Oracle Database QoS Management uses database services to monitor and manage  client and application workloads.</p>
                     <p>In an Oracle RAC cluster, Oracle Database QoS Management monitors the server pools and nodes on which the database services are offered. A service can run in only one server pool. If the database spans multiple server pools, then you must create multiple services to access the instances in all server pools.</p>
                     <p>In the case of Administrator-Managed databases, all instances run in the Generic server pool and services run on specific instances, but still within a single pool.</p>
                     <p> Workload is monitored for clients and applications that connect to the database using database services that are managed by Oracle Clusterware. The connections must use Java Database Connectivity (JDBC) (thick or thin), or Oracle Call Interface (OCI). Connections should use services with its run-time goal for the load balancing advisory set to <code class="codeph">SERVICE_TIME</code>, and the connection load balancing goal set to <code class="codeph">LONG</code>. For example:
                     </p><pre class="pre codeblock"><code>srvctl modify service -db <span class="variable" translate="no">db_name</span> -service <span class="variable" translate="no">service_name</span> -rlbgoal SERVICE_TIME 
-clbgoal LONG -cardinality UNIFORM</code></pre><p>You must define the cardinality of database services as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the server pool that the service runs in has a maximum size greater than 1 (or UNLIMITED), then set the cardinality of the service to <code class="codeph">UNIFORM</code>.
                           </p>
                        </li>
                        <li>
                           <p>If the server pool that the service runs in has a maximum size of 1, then set the cardinality of the service to <code class="codeph">SINGLETON</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/workload-management-with-dynamic-database-services.html#RACAD076" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E" title="With Oracle Database, you can use services to manage the workload on your system by starting services on groups of servers that are dedicated to particular workloads.">How Does Oracle Database QoS Management Work?</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="APQOS315"></a><a id="APQOS314"></a><div class="props_rev_3"><a id="GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD" name="GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD"></a><h3 id="ATNMS-GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD" class="sect3"><span class="enumeration_section">6.3.2 </span>Overview of Policy Sets
               </h3>
               <div>
                  <p>A Policy Set enables you to specify your resources, Performance Classes (workloads), and one or more Performance Policies that specify the Performance Objective for each Performance Class.</p>
                  <p>The central concept in Oracle Database QoS Management is the <a href="glossary.html#GUID-2D3BCFE5-121C-4126-863C-053B6BECB7B9"><span class="xrefglossterm">Policy Set</span></a>. A Policy Set enables you to specify your resources, Performance Classes (workloads), and one or more Performance Policies that specify the Performance Objective for each Performance Class. A Policy Set can also specify constraints for resource availability. Oracle Database QoS Management Performance Policies manage the availability of resources system wide for each Performance Class so that the system is able to satisfy the Performance Objectives you set in the Performance Policy.
                  </p>
                  <p>When you use Oracle Enterprise Manager to create a new Default Policy for your system, Oracle Database QoS Management provides default classification rules and associated Performance Class names. For example, when you create the initial Policy Set, Oracle Database QoS Management discovers all database services in a cluster, and creates a Performance Class for each service. The Performance Class is named by appending <code class="codeph">_pc</code> to the service name. For example, if the name of a service is <code class="codeph">sales</code>, then the name assigned to the Performance Class for that service is <code class="codeph">sales_pc</code>.
                  </p>
                  <p>Only one Performance Policy in the Policy Set can be active at any time. You can activate Performance policies to respond to particular requirements by using calendar schedules, maintenance windows, events, and so on. </p>
                  <p>When you create a Policy Set, you specify which server pools in the cluster should be managed by Oracle Database QoS Management. You also define Performance Classes (used to categorize workloads with similar performance requirements). You then create a Performance Policy to specify which Performance Classes have the highest priority and the Performance Objectives of each Performance Class. To satisfy the Performance Objectives, Oracle Database QoS Management makes recommendations for reallocating resources when needed, and predicts what effect the recommended actions will have on the ability of each Performance Class to meet its Performance Objective. </p>
                  <p>For example, you could create a policy to manage your application workloads during business hours. The applications used by customers to buy products or services are of the highest priority to your business during this time. You also give high priority to order fulfillment and billing applications. Human resource and enterprise resource planning (ERP) applications are of a lower priority during this time. If your online sales applications experience a surge in demand, then Oracle Database QoS Management might recommend that more resources be allocated to the sales applications and taken away from applications of lesser importance. The recommendation also includes a prediction of the change in performance (positive or negative) for each Performance Class.</p>
                  <p>A Policy Set, as shown in <a href="overview-oracle-database-qos-management.html#GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD__CHDHHCEI">Figure 6-2</a>, consists of the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The server pools that are being managed by Oracle Database QoS Management</p>
                     </li>
                     <li>
                        <p>Performance Classes, which are groups of work requests with similar performance objectives</p>
                     </li>
                     <li>
                        <p>Performance policies, which describe how resources should be allocated to the Performance Classes by using:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="glossary.html#GUID-01F7E040-A79E-4934-80EF-DBD8A9D6F24B"><span class="xrefglossterm">Performance Objectives</span></a></p>
                           </li>
                           <li>
                              <p><a href="glossary.html#GUID-6203C43A-9092-4EA1-B30F-DC59028390B1"><span class="xrefglossterm">Performance Class ranks</span></a></p>
                           </li>
                           <li>
                              <p><a href="glossary.html#GUID-3413500E-0636-4512-A864-E55D564FA9A7"><span class="xrefglossterm">server pool directive overrides</span></a></p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD__CHDHHCEI">
                     <p class="titleinfigure">Figure 6-2 Elements of an Oracle Database QoS Management Policy Set</p><br><div class="imagecenter"><img class="imagecenter" src="img/apqos005.png" alt="Description of Figure 6-2 follows" title="Description of Figure 6-2 follows" longdesc="img_text/apqos005.html"><br><a href="img_text/apqos005.html">Description of "Figure 6-2 Elements of an Oracle Database QoS Management Policy Set"</a></div><br></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="overview-oracle-database-qos-management.html#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a></li>
                        <li><a href="overview-oracle-database-qos-management.html#GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7" title="Classification occurs wherever new work enters the system.">Applying Classifiers to Work Requests</a></li>
                        <li><a href="configuring-qos-management-manage-db-workloads.html#GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280">Create an Initial Policy Set</a></li>
                        <li><a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></li>
                        <li><a href="administering-policy-set.html#GUID-B461C1AD-F467-4F5E-BE7E-AE7C8D8E87C3" title="Whether you are configuring the Oracle Database QoS Management system for the first time, or want to create a new Policy Set, you use the Create Policy Set wizard to create your Policy Set.">Administering the Policy Set</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="APQOS316"></a><a id="APQOS361"></a><a id="APQOS117"></a><div class="props_rev_3"><a id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8" name="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8"></a><h3 id="ATNMS-GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8" class="sect3"><span class="enumeration_section">6.3.3 </span>Overview of Server Pools
               </h3>
               <div>
                  <p>With the introduction of server pools to logically divide a cluster, you can achieve the benefit of physical consolidation and resource agility while maintaining workload isolation.</p>
                  <p>When deciding how many clusters to create for your business, you need to compare the possible cost savings through consolidation of servers with the risk that the consolidated workloads will interfere with each other in some significant way. With the introduction of server pools to logically divide a cluster, you can achieve the benefit of physical consolidation and resource agility while maintaining workload isolation.</p>
                  <p>As the administrator, you can define the workloads that can run in various server pools, as shown in <a href="overview-oracle-database-qos-management.html#GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__BABDAFHF">Figure 6-3</a>. Applications that connect to your Oracle RAC database use a service that runs only on the servers currently allocated to that server pool. For example, in <a href="overview-oracle-database-qos-management.html#GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__BABDAFHF">Figure 6-3</a>, connections and applications that use the OS service access only the servers in the HR server pool, so that work done by those connections does not interfere with the applications using the Sales service. Oracle Database QoS Management can assist you with managing the resource allocations within each of those groups to meet your service levels, and can redistribute resources automatically to meet changes in your business requirements.
                  </p>
                  <div class="figure" id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__BABDAFHF">
                     <p class="titleinfigure">Figure 6-3 Diagram of Server Pools, Oracle Databases, and Database Services</p><img src="img/apqos003.png" alt="Description of Figure 6-3 follows" title="Description of Figure 6-3 follows" longdesc="img_text/apqos003.html"><br><a href="img_text/apqos003.html">Description of "Figure 6-3 Diagram of Server Pools, Oracle Databases, and Database Services"</a></div>
                  <!-- class="figure" -->
                  <p>With server pools, you can now create groups of servers that can be managed as a single entity. Databases can be created to run in these server pools. If each server runs only a single instance of a database, then if the database needs more resources, an additional server can be allocated to the server pool. If multiple database instances run on a single server, then they must compete for the shared resources of that server, such as memory and CPU. If one of the database instances is experiencing a much higher workload than the other instances, then that database instance can significantly degrade the performance of the other instances running on the same server. </p>
                  <p>You can use Instance Caging to limit the amount of CPU an Oracle Database instance consumes. By setting the <code class="codeph">CPU_COUNT</code> parameter to limit the maximum number of CPUs an instance can use, you partition the CPUs among the database instances on a server, thus preventing them from using excessive amounts of CPU resources. The <code class="codeph">CPU_COUNT</code> setting must be the same for each instance of a database within a server pool. Oracle Database QoS Management can monitor the CPU usage among all the database instances in the server pool, and recommend changes to the current settings if needed.
                  </p>
                  <div class="figure" id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__GUID-11ED9A94-E915-41ED-AFCB-1D9E3DF02D3D">
                     <p class="titleinfigure">Figure 6-4 Server Pools and CPU Slices</p><img src="img/apqos009.png" alt="Description of Figure 6-4 follows" title="Description of Figure 6-4 follows" longdesc="img_text/apqos009.html"><br><a href="img_text/apqos009.html">Description of "Figure 6-4 Server Pools and CPU Slices"</a></div>
                  <!-- class="figure" -->
                  <p>Instead of using a single server pool, Oracle recommends that you manage services by creating multiple server pools, and relocate services between them. Using this configuration provides the following benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Different types of workloads require different configurations, and have different tuning goals. For example, a customer using your OLTP applications to purchase goods or services expects the shipping and payment information screens to respond quickly. If your applications take too long to process the order, then the customer can lose interest, and your company might lose a sale. By contrast, an employee using an internal HR application is motivated to continue using HR screens, even if they do not respond quickly. If your HR applications take longer than expected to process an online task, the employee is unlikely to quit.</p>
                     </li>
                     <li>
                        <p>Applications can have various resource requirements throughout the day, week, or month to meet your business objectives. You can use server pools to divide the resources among the application workloads. To meet the Performance Objectives of a given time period, you could use server pool directive overrides in a Performance Policy to change the default attributes (such as Max or Min) for a server pool.</p>
                        <p>For example, if your company has an online tax filing application, then the application must prepare and file the tax statements for your customers before the government-specified deadline. In the timeframe immediately preceding a filing deadline, applications related to tax statement preparation and filing require more resources than they do at other times of the year. To ensure you meet this service requirement, you can create a Performance Policy named QuarterlyFilings to override the standard server pool directive, and specify that when QuarterlyFilings is active, the server pool used by the tax preparation applications should have a minimum of four servers instead of two to handle the additional workload. When the QuarterlyFilings Performance Policy is not in effect, your default Performance Policy is in effect, and the minimum number of servers in that server pool is two.</p>
                     </li>
                     <li>
                        <p>Because Oracle Database QoS Management regulates the number of servers that support a workload, application users experience a consistent level of performance, even in the presence of changing demand levels. This prevents performance expectations of your customers from being reset when workload levels change from low to high demand.</p>
                        <p>For example, assume your company sells a new consumer product that is in high demand, and your company advertises that they have large quantities of that product for sale at a reduced price. As a result, many new customers create orders for this product, and your OLTP applications must process a rapidly increasing number of transactions (a demand surge occurs). New customers do not know what to expect with regards to the OLTP application performance. However, existing customers can react negatively if their online shopping experience is impacted by the flood of new customers. Also, if your OLTP application cannot process all the incoming orders, then some of the new customers might quit the application and place their order with a different company, or visit a retail store instead.</p>
                        <p>Oracle Database QoS Management helps you to manage the reallocation of available resources to meet the demand surge without sacrificing the quality of service of your other applications.</p>
                     </li>
                     <li>
                        <p>Some workloads do not scale well but still benefit from the high availability of a cluster environment. Deploying these workloads in a fixed-size server pool offers both performance manageability and high availability.</p>
                        <p>For example, if you run an ERP application in a server pool with a fixed size of one server, then the maximum size of the server pool and the minimum size of the server pool are both set to one. If the server in that server pool fails, then Oracle Clusterware automatically allocates a new server to the server pool to maintain the minimum size of one server. Any instances and services located on the failed server are restarted on the new server, so the applications using these instances and services remains available.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__GUID-DBED03E3-20F7-41E9-BED3-0FAA986D3289">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD92105" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a> for more information about server pools
                           </p>
                        </li>
                        <li>
                           <p><a href="../racad/introduction-to-oracle-rac.html#RACAD8889" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for more information about policy-managed Oracle RAC databases
                           </p>
                        </li>
                        <li>
                           <p><a href="../cncpt/topics-for-database-administrators-and-developers.html#CNCPT1453" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for a description of an OLTP system
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="APQOS269"></a><div class="props_rev_3"><a id="GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43" name="GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43"></a><h3 id="ATNMS-GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43" class="sect3"><span class="enumeration_section">6.3.4 </span>How Server Pools Are Used by Oracle Database QoS Management
               </h3>
               <div>
                  <p>You should create one or more server pools depending on the workloads that need to be managed. </p>
                  <p>When you first install Oracle Grid Infrastructure for a cluster, a default server pool (the <span class="bold">Free pool</span>) is created. All servers are initially placed in this server pool. When you create a new server pool, the servers that you assign to that server pool are automatically moved out of the Free pool and placed in the newly created server pool. At this point, you can install a database to run in that server pool, and create database services that are managed by Oracle Clusterware for applications to connect to that database. 
                  </p>
                  <p>For an Oracle RAC database to take advantage of the flexibility of server pools, the database must be created using the policy-managed deployment option, which places the database in one or more server pools. </p>
                  <p>In Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2), Oracle Database Quality of Service (QoS) Management supported administrator-managed Oracle RAC and Oracle RAC One Node databases in Measure-Only and Monitor modes. Starting with Oracle Database 12<span class="italic">c</span> release 2 (12.2.0.1), you can use Oracle Database QoS Management in Management mode with Oracle RAC and Oracle RAC One Node databases that are policy-managed or administrator-managed.
                  </p>
                  <div class="infoboxnote" id="GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43__GUID-76E29369-171F-4219-A1DB-C8089F301C28">
                     <p class="notep1">Caution:</p>
                     <p>If you use candidate server lists (<code class="codeph">server_names</code> attribute) or categories when creating server pools, then the ability for Oracle Database Quality of Service (QoS) Management to expand the server pool will be limited by those restrictions as non-eligible servers cannot be used.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../rilin/using-server-pools-with-oracle-rac.html#RILIN1063" target="_blank"><span><cite>Oracle Real Application Clusters Installation Guide for Linux and UNIX</cite></span></a></li>
                        <li><a href="../racad/administering-database-instances-and-cluster-databases.html#RACAD8211" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="APQOS317"></a><div class="props_rev_3"><a id="GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" name="GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F"></a><h3 id="ATNMS-GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" class="sect3"><span class="enumeration_section">6.3.5 </span>Overview of Performance Classes
               </h3>
               <div>
                  <p>A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster.</p>
                  <p>Oracle Database QoS Management uses a set of classification rules defined in the Policy Set to categorize work requests into a Performance Class. The fundamental classifier used to assign work requests to Performance Classes is the name of the service that is used to connect to the database. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE">Performance Class Tags</a><br>The classification of work requests applies a user-defined name tag that identifies the Performance Class to which the work request belongs.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7">Applying Classifiers to Work Requests</a><br>Classification occurs wherever new work enters the system.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-9D59A65B-A912-4D46-8889-EBF9868309AA">Using Additional Filters for Classifying Work Requests</a><br>A single application can support work requests of many types, with a range of performance characteristics.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC">Deciding to Create New Performance Classes</a><br>Over time, your workload and performance goals can change.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="APQOS318"></a><div class="props_rev_3"><a id="GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE" name="GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE"></a><h4 id="ATNMS-GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE" class="sect4"><span class="enumeration_section">6.3.5.1 </span>Performance Class Tags
                  </h4>
                  <div>
                     <p>The classification of work requests applies a user-defined name tag that identifies the Performance Class to which the work request belongs.</p>
                     <p>All work requests that are grouped into a particular Performance Class have the same <a href="glossary.html#GUID-C5412B8A-7CB1-4801-AD0D-E8451A3B8E9D"><span class="xrefglossterm">performance objectives</span></a>. In effect, the (<a href="glossary.html#GUID-657A3F9B-BCA2-4BE3-B725-213D0337E743"><span class="xrefglossterm">tag</span></a>) connects the work request to the Performance Objective for the associated Performance Class. Oracle Database QoS Management assigns tags to each work request so that every component of the system can take measurements, and provide data to Oracle Database QoS Management for evaluation against the applicable Performance Objectives.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" title="A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster.">Overview of Performance Classes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS319"></a><div class="props_rev_3"><a id="GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7" name="GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7"></a><h4 id="ATNMS-GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7" class="sect4"><span class="enumeration_section">6.3.5.2 </span>Applying Classifiers to Work Requests
                  </h4>
                  <div>
                     <p>Classification occurs wherever new work enters the system.</p>
                     <p>When a work request arrives at a server, the work request is checked for a tag. If the work request has a tag, then the server concludes that this work request has already been classified, and the tag is not changed. If the work request does not include a tag, then the <a href="glossary.html#GUID-FC682538-F072-4209-AAFE-064BFAB386FE"><span class="xrefglossterm">classifiers</span></a> are checked, and a tag for the matching Performance Class is attached to the work request.
                     </p>
                     <p>To illustrate how work requests are classified, consider an application that connects to an Oracle RAC database. The application uses the database service <code class="codeph">sales</code>. The Oracle Database QoS Management administrator specified during the initial configuration of Oracle Database QoS Management that the <code class="codeph">sales_pc</code> Performance Class should contain work requests that use the <code class="codeph">sales</code> service. When a connection request is received by the database, Oracle Database QoS Management checks for a tag. If a tag is not found, then Oracle Database QoS Management compares the information in the connection request with the classifiers specified for each Performance Class, in the order specified in the Performance Policy. If the connection request being classified is using the <code class="codeph">sales</code> service, then when the classifiers in the <code class="codeph">sales_pc</code> Performance Class are compared to the connection request information, a match is found, and the database work request is assigned a tag for the <code class="codeph">sales_pc</code> Performance Class.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" title="A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster.">Overview of Performance Classes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS320"></a><div class="props_rev_3"><a id="GUID-9D59A65B-A912-4D46-8889-EBF9868309AA" name="GUID-9D59A65B-A912-4D46-8889-EBF9868309AA"></a><h4 id="ATNMS-GUID-9D59A65B-A912-4D46-8889-EBF9868309AA" class="sect4"><span class="enumeration_section">6.3.5.3 </span>Using Additional Filters for Classifying Work Requests
                  </h4>
                  <div>
                     <p>A single application can support work requests of many types, with a range of performance characteristics.</p>
                     <p>By extending and refining the default classification rules, the Oracle Database QoS Management administrator can write multiple Performance Objectives for a single application. For example, the administrator may decide that a web-based application should have separate Performance Objectives for work requests related to logging in, browsing, searching, and purchasing.</p>
                     <p>Oracle Database QoS Management supports user-defined combinations of connection parameters to map Performance Classes to the actual workloads running in the database. These connection parameters belong to two general classes, and can be combined to create fine-grained Boolean expressions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Configuration Parameters:</span> The supported configuration parameters are <code class="codeph">SERVICE_NAME</code> and <code class="codeph">USERNAME</code>. Each classifier in a Performance Class must specify the name of a database service. Additional granularity can be achieved by identifying the name of the user that is making the database connection from either a client or the middle tier. The advantage of using these classifiers is that they do not require application code changes to associate different workloads with separate Performance Classes.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Application Parameters:</span> The supported application parameters are <code class="codeph">MODULE</code>, <code class="codeph">ACTION</code>, and <code class="codeph">PROGRAM</code>. These are optional parameters. The values for <code class="codeph">MODULE</code> and <code class="codeph">ACTION</code> must be set within the application. Depending on the type of application, you can set these parameters as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>OCI: Use <code class="codeph">OCI_ATTR_MODULE</code> and <code class="codeph">OCI_ATTR_ACTION</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Oracle Data Provider for .NET (ODP.NET): Specify the <code class="codeph">ModuleName</code> and <code class="codeph">ActionName</code> properties on the <code class="codeph">OracleConnection</code> object.
                                 </p>
                              </li>
                              <li>
                                 <p>JDBC: Set <code class="codeph">MODULE</code> and <code class="codeph">ACTION</code> in <code class="codeph">SYS_CONTEXT</code>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>The <code class="codeph">PROGRAM</code> parameter is set or derived differently for each database driver and platform. Consult the appropriate Oracle Database developer's guide for further details and examples.
                     </p>
                     <p>To manage the workload for an application, the application code makes database connections using a particular service. To provide more precise control over the workload generated by various parts of the application, you can create additional Performance Classes, and use classifiers that include <code class="codeph">PROGRAM</code>, <code class="codeph">MODULE</code>, or <code class="codeph">ACTION</code> in addition to the service or user name. For example, you could specify that all connections to your cluster that use the <code class="codeph">sales</code> service belong to the <code class="codeph">sales_pc</code> Performance Class, but connections that use the <code class="codeph">sales</code> service and have a user name of <code class="codeph">APPADMIN</code> belong to <code class="codeph">sales_admin</code> Performance Class.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../lnoci/handle-and-descriptor-attributes.html#LNOCI-GUID-FB263210-118E-4DB3-A840-1769EF0CB977" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/atnms&amp;id=ODPNT805" target="_blank"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a></li>
                           <li><a href="../jjdbc/JDBC-DMS-Metrics.html#JJDBC28899" target="_blank"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" title="A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster.">Overview of Performance Classes</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="APQOS321"></a><div class="props_rev_3"><a id="GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC" name="GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC"></a><h4 id="ATNMS-GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC" class="sect4"><span class="enumeration_section">6.3.5.4 </span>Deciding to Create New Performance Classes
                  </h4>
                  <div>
                     <p>Over time, your workload and performance goals can change.</p>
                     <p>The Performance Classes in use at a particular data center are expected to change over time. For example, you might need to modify the Performance Objectives for one part of your application. In this case you would create a new Performance Class with additional classifiers to identify the target work requests, and update your Performance Policy to add a new Performance Objective for this Performance Class. In other words, you replace a single Performance Objective with one or more finer-grained Performance Objectives, and divide the work requests for one Performance Class into multiple Performance Classes. </p>
                     <p>Application developers can suggest which Performance Classes to use. Specifically, an application developer can suggest ways to identify different application workloads, and you can use these suggestions to create classifiers for Performance Classes so that each type of work request is managed separately. </p>
                     <p>You can create additional Performance Classes to specify acceptable response times for different application workloads. For example, a Performance Objective might indicate that a work request performing the <code class="codeph">checkout</code> action for the <code class="codeph">sales_pc_checkout</code> Performance Class should not take more than one millisecond to complete, and a work request performing the <code class="codeph">browse</code> action for the <code class="codeph">sales_pc_browse</code> Performance Class can take 100 milliseconds second to complete.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-performance-classes.html#GUID-29ADED46-F0D4-45A0-906D-85621AE36602" title="Each policy set contains one or more performance classes. Each performance class defines a type of workload on your servers.">Managing Performance Classes</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" title="A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster.">Overview of Performance Classes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="APQOS119"></a><div class="props_rev_3"><a id="GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" name="GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4"></a><h3 id="ATNMS-GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" class="sect3"><span class="enumeration_section">6.3.6 </span>Overview of Performance Policies and Performance Objectives
               </h3>
               <div>
                  <p>To manage the various Performance Objectives, you define one or more Performance Policies.</p>
                  <p>A <a href="glossary.html#GUID-8D5353A6-D732-4ADD-AD1E-F29DDD36E047"><span class="xrefglossterm">Performance Policy</span></a> is a collection of Performance Objectives, and a measure of how critical they are to your business. For example, you could define a Performance Policy for normal business hours, another for weekday nonbusiness hours, one for weekend operations, and another to be used during processing for the quarter-end financial closing. At any given time, a single Performance Policy is in effect as specified by the Oracle Database QoS Management administrator. Within each Performance Policy, the criticalness, or ranking, of the Performance Objectives can be different, enabling you to give more priority to certain workloads during specific time periods.
                  </p>
                  <p>A Performance Policy has a collection of Performance Objectives in effect at the same time; there is one or more Performance Objectives for each application or workload that runs on the cluster. Some workloads and their Performance Objectives are more critical to the business than others. Some Performance Objectives can be more critical at certain times, and less critical at other times. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A">Overview of Performance Objectives</a><br>You create Performance Objectives for each Performance Class to specify the target performance level for all work requests that are assigned to each Performance Class. 
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86">Overview of Server Pool Directive Overrides</a><br>A server pool directive override sets the availability properties of Min, Max, and Importance for a server pool when the Performance Policy is in effect. 
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8">Overview of Performance Class Ranks</a><br>Specifying a rank for Performance Classes helps to prioritize work.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C">Oracle Database QoS Management Policy Workload Criticality Determines Database Startup Order</a><br>If a user-created Oracle Database QoS Management policy is active, then the ranked order of the performance classes determines the order in which the associated Oracle RAC databases start or request real-time LMS process slots.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="APQOS322"></a><div class="props_rev_3"><a id="GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A" name="GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A"></a><h4 id="ATNMS-GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A" class="sect4"><span class="enumeration_section">6.3.6.1 </span>Overview of Performance Objectives
                  </h4>
                  <div>
                     <p>You create Performance Objectives for each Performance Class to specify the target performance level for all work requests that are assigned to each Performance Class. </p>
                     <p><a href="glossary.html#GUID-01F7E040-A79E-4934-80EF-DBD8A9D6F24B"><span class="xrefglossterm">Performance Objectives</span></a> specify both the business requirement (the target performance level) and the work to which that Performance Objective applies (the Performance Class). For example, a Performance Objective could specify that work requests in the <code class="codeph">hr_pc</code> Performance Class should have an average response time of less than 0.2 seconds.
                     </p>
                     <p>Performance Objectives are specified with Performance Policies. Each Performance Policy includes a Performance Objective for each and every Performance Class, unless the Performance Class is marked Measure-Only. In this release, Oracle Database QoS Management supports only one type of Performance Objective, <a href="glossary.html#GUID-622303AA-B794-46E0-9429-6BE523075C46"><span class="xrefglossterm">average response time</span></a>.
                     </p>
                     <p>The response time for a workload is based upon database client requests. Response time measures the time from when the cluster receives the request over the network to the time the request leaves the cluster. Response time does not include the time required to send the information over the network to or from the client. The response time for all database client requests in a Performance Class is averaged and presented as average response time, measured in seconds for a database request.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-performance-policies.html#GUID-D5A91407-FDF1-4AB7-818E-FCB1158B27C0" title="Use Oracle Enterprise Manager Cloud Control to create a Performance Policy.">Creating a Performance Policy and Specifying Performance Objectives</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS324"></a><a id="APQOS323"></a><div class="props_rev_3"><a id="GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86" name="GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86"></a><h4 id="ATNMS-GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86" class="sect4"><span class="enumeration_section">6.3.6.2 </span>Overview of Server Pool Directive Overrides
                  </h4>
                  <div>
                     <p>A server pool directive override sets the availability properties of Min, Max, and Importance for a server pool when the Performance Policy is in effect. </p>
                     <p>A Performance Policy can include a set of <a href="glossary.html#GUID-3413500E-0636-4512-A864-E55D564FA9A7"><span class="xrefglossterm">server pool directive overrides</span></a>. Server pool directive overrides serve as constraints on the allocation changes that Oracle Database QoS Management recommends, because the server pool directive overrides are honored during the activation period of the Performance Policy. For example, Oracle Database QoS Management never recommends moving a server out of a server pool if doing so results in the server pool having less than its specified minimum number of servers.
                     </p>
                     <p>You could create Performance Policies for your system to manage workload based on the time of year or time of day, as shown in <a href="overview-oracle-database-qos-management.html#GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__CHDBHIII">Figure 6-5</a>. Under normal conditions, these Performance Policies keep your database workload running at a steady rate. If the workload requests for a database increase suddenly, then a particular server pool might require additional resources beyond what is specified by the Performance Policy. 
                     </p>
                     <div class="figure" id="GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__CHDBHIII">
                        <p class="titleinfigure">Figure 6-5 Baseline Resource Management by Performance Policy</p><img src="img/apqos004.gif" alt="Description of Figure 6-5 follows" title="Description of Figure 6-5 follows" longdesc="img_text/apqos004.html"><br><a href="img_text/apqos004.html">Description of "Figure 6-5 Baseline Resource Management by Performance Policy"</a></div>
                     <!-- class="figure" -->
                     <p>For example, assume your business takes orders over the telephone, and creates orders using a sales application. Your telephone sales department is only open during regular business hours, but customers can also place orders themselves over the Internet. During the day, more orders are placed so the sales applications need more resources to handle the workload. This configuration is managed by creating the Business Hours Performance Policy, and specifying that the Back Office server pool can have a maximum of two servers, enabling Oracle Database QoS Management to move servers to the Online server pool, as needed. After the telephone sales department closes, the workload for the sales applications decreases. To manage this configuration you create the After Hours Performance Policy and specify that the Back Office server pool can have a maximum of four servers, enabling your internal applications to acquire the additional resources that they need to complete their workloads before the next business day.</p>
                     <p>In this scenario, the Business Hours and After Hours Performance Policies can contain server pool directive overrides. When a Performance Policy contains a server pool directive override, the current settings of Max, Min, and Importance for the specified server pool are overridden while that Performance Policy is in effect. This enables additional servers to be placed in the Sales server pool to give the online sales applications the resources they need and to limit the resources used by the Back Office server pool, so that its workload does not interfere with the Sales workload.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-performance-policies.html#GUID-52905BAD-1B74-4D64-9685-C4A72DD1E758" title="A server pool directive override gives you the ability to enforce different settings for server pool sizes, or change the importance of server pools.">Setting Server Pool Directive Overrides</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS325"></a><div class="props_rev_3"><a id="GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8" name="GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8"></a><h4 id="ATNMS-GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8" class="sect4"><span class="enumeration_section">6.3.6.3 </span>Overview of Performance Class Ranks
                  </h4>
                  <div>
                     <p>Specifying a rank for Performance Classes helps to prioritize work.</p>
                     <p>Within a Performance Policy, you can assign a level of business criticalness (a <span class="italic">rank</span>) to each Performance Class to give priority to meeting the Performance Objectives for a more critical Performance Class over a less critical one. When there are not enough resources available to meet all the Performance Objectives for all Performance Classes at the same time, the Performance Objectives for the more critical Performance Classes must be met at the expense of the less critical Performance Objectives. The Performance Policy specifies the <span class="italic">business criticalness</span> of each Performance Class, which can be Highest, High, Medium, Low, or Lowest.
                     </p>
                     <div class="infoboxnote" id="GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8__GUID-729D7A17-00F4-4177-9730-31D361DC6FEF">
                        <p class="notep1">Note:</p>
                        <p>Priority access to resources, based on rank, does not apply to single-instance Oracle RAC databases or Oracle RAC One Node.</p>
                     </div>
                     <p>For example, using the Performance Policies illustrated in <a href="overview-oracle-database-qos-management.html#GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__CHDBHIII">Figure 6-5</a>, when the Business Hours Performance Policy is in effect, the sales applications, which access the Online server pool, have the highest rank. If there are not enough resources available to meet the Performance Objectives of all the Performance Classes, then the applications that use the Online server pool will get priority access to any available resources, even if the applications using the Back Office server pool are not meeting their Performance Objectives.
                     </p>
                     <p>You can have multiple Performance Classes at the same rank. If Oracle Database QoS Management detects more than one Performance Class not meeting its Performance Objective and the Performance Classes are assigned the same rank in the active Performance Policy, then Oracle Database QoS Management recommends a change to give the Performance Class closest to meeting its Performance Objective more resources. After implementing the recommended action, when the Performance Class is no longer below its target performance level, Oracle Database QoS Management performs a new evaluation of the system performance.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-performance-classes.html#GUID-29ADED46-F0D4-45A0-906D-85621AE36602" title="Each policy set contains one or more performance classes. Each performance class defines a type of workload on your servers.">Managing Performance Classes</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS382"></a><div class="props_rev_3"><a id="GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C" name="GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C"></a><h4 id="ATNMS-GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C" class="sect4"><span class="enumeration_section">6.3.6.4 </span>Oracle Database QoS Management Policy Workload Criticality Determines Database Startup Order
                  </h4>
                  <div>
                     <p>If a user-created Oracle Database QoS Management policy is active, then the ranked order of the performance classes determines the order in which the associated Oracle RAC databases start or request real-time LMS process slots.</p>
                     <p>Using the performance class rankings ensures that mission critical databases running in a consolidated environment have their LMS processes run in real-time, thus eliminating a resource bottleneck within inter-node communication. Because the Oracle Database QoS Management policy specifies the rank of each workload, using the value of Max(Ranks) for each database provides a consistent expression of the expressed business criticality of each database.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="APQOS326"></a><a id="APQOS270"></a><div class="props_rev_3"><a id="GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C" name="GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C"></a><h3 id="ATNMS-GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C" class="sect3"><span class="enumeration_section">6.3.7 </span>How Oracle Database QoS Management Collects and Analyzes Performance Data
               </h3>
               <div>
                  <p>The Oracle Database QoS Management Server retrieves metrics data from Oracle Real Application Clusters (Oracle RAC) and Oracle RAC One Node databases in the cluster.</p>
                  <p>The data are correlated by Performance Class every five seconds. The data include many metrics such as database request arrival rate, CPU use, CPU wait time, I/O use, I/O wait time, Global Cache use and Global Cache wait times. Information about the current topology of the cluster and the health of the servers is added to the data. The Policy and Performance Management engine of Oracle Database QoS Management (illustrated in <a href="overview-oracle-database-qos-management.html#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">Figure 6-6</a>) analyzes the data to determine the overall performance profile of the system for the current Performance Objectives established by the active Performance Policy.
                  </p>
                  <p>The performance evaluation occurs once a minute, and results in a recommendation if any Performance Class does not meet its objectives. The recommendation specifies which resource is the <a href="glossary.html#GUID-440F0A8F-5CCB-4A14-B67E-39A20954F6F7"><span class="xrefglossterm">bottleneck</span></a>. Specific corrective actions are included in the recommendation, if possible. The recommendation also includes a listing of the projected impact on all Performance Classes in the system if you decide to implement the recommended action. 
                  </p>
                  <p><a href="overview-oracle-database-qos-management.html#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">Figure 6-6</a> diagrams the collection of data from various data sources and shows how that information is used by Oracle Enterprise Manager. In this figure, CHM refers to Oracle Cluster Health Monitor and Server Manager (SRVM) is a component of Oracle Clusterware.
                  </p>
                  <div class="figure" id="GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">
                     <p class="titleinfigure">Figure 6-6 Diagram of Oracle Database QoS Management Server Architecture</p><img src="img/apqos002.png" alt="Description of Figure 6-6 follows" title="Description of Figure 6-6 follows" longdesc="img_text/apqos002.html"><br><a href="img_text/apqos002.html">Description of "Figure 6-6 Diagram of Oracle Database QoS Management Server Architecture"</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="using-qos-management-dashboard.html#GUID-09D9F38A-CCDB-4F50-9855-393B9754CDAB">Interpreting the Performance Overview Graphs</a></li>
                        <li><a href="reviewing-performance-metrics.html#GUID-0BDF2F2D-56FE-45B4-AADC-130A497C9599" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="APQOS271"></a><div class="props_rev_3"><a id="GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" name="GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87"></a><h3 id="ATNMS-GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" class="sect3"><span class="enumeration_section">6.3.8 </span>Overview of Recommendations
               </h3>
               <div>
                  <p>Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.</p>
                  <p>If your business experiences periodic demand surges or must support an <a href="glossary.html#GUID-C3654AAB-1F8F-4870-9EE7-7C42C4423565"><span class="xrefglossterm">open workload</span></a>, then to retain performance levels for your applications you can design your system to satisfy the peak workload. Creating a system capable of handling the peak workload typically means acquiring additional hardware to be available when needed and sit idle when not needed. Instead of having servers remain idle except when a demand surge occurs, you could decide to use those servers to run other application workloads. However, if the servers are busy running other applications when a demand surge hits, then your system might not be able to satisfy the peak workload and your main business applications do not perform as expected.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1">How Oracle Database QoS Management Generates Recommendations</a><br>If a performance objective is not being met, then Oracle Database QoS Management evaluates several possible solutions and presents the most effective solutions as Recommendations.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-C71D1179-9631-4859-B393-5D0ADCF0F513">Types of Recommendations</a><br>If Performance Objectives are not being met for a Performance Class, then Oracle Database Quality of Service Management issues recommendations to rebalance the use of resources to alleviate bottlenecks. 
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD">Choosing the Best Recommendation</a><br>Oracle Database Quality of Service Management can offer multiple recommendations for improving workload performance.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57">Contents of a Recommendation</a><br>Each recommendation is comprised of several pieces of information.
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15">Overview of Implementing Recommendations</a><br>Oracle Database QoS Management does not implement the recommendations automatically. 
                     </li>
                     <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA">Example: How Recommendations Are Generated</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C3692906-7594-42DB-96D7-DF9F50EA2FE2" title="This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.">Overview of Oracle Database QoS Management</a></p>
                     </div>
                  </div>
               </div>
               <a id="APQOS327"></a><div class="props_rev_3"><a id="GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1" name="GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1"></a><h4 id="ATNMS-GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1" class="sect4"><span class="enumeration_section">6.3.8.1 </span>How Oracle Database QoS Management Generates Recommendations
                  </h4>
                  <div>
                     <p>If a performance objective is not being met, then Oracle Database QoS Management evaluates several possible solutions and presents the most effective solutions as Recommendations.</p>
                     <p>When you use Oracle Database QoS Management, your system is continuously monitored in an iterative process to see if the Performance Objectives in the active Performance Policy are being met. Performance data are sent to Oracle Enterprise Manager for display in the Oracle Database QoS Management Dashboard (the Dashboard) and Performance History pages.</p>
                     <p>When one or more Performance Objectives are not being met, after evaluating the performance of your system, Oracle Database QoS Management seeks to improve the performance of a single Performance Objective: usually the highest ranked Performance Objective that is currently not being satisfied. If all Performance Objectives are satisfied with capacity to spare for both the current and projected workload, then Oracle Database QoS Management signals "No action required: all Performance Objectives are being met."</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-qos-management-dashboard.html#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a></li>
                           <li><a href="using-qos-management-dashboard.html#GUID-45691387-364A-41F4-9FDD-463FB50158B7" title="The Oracle Database QoS Management Dashboard (the Dashboard) provides an easy to use interface for managing the Oracle Database QoS Management system.">Using the Oracle Database QoS Management Dashboard</a></li>
                           <li><a href="reviewing-performance-metrics.html#GUID-0BDF2F2D-56FE-45B4-AADC-130A497C9599" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS328"></a><div class="props_rev_3"><a id="GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" name="GUID-C71D1179-9631-4859-B393-5D0ADCF0F513"></a><h4 id="ATNMS-GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" class="sect4"><span class="enumeration_section">6.3.8.2 </span>Types of Recommendations
                  </h4>
                  <div>
                     <p>If Performance Objectives are not being met for a Performance Class, then Oracle Database Quality of Service Management issues recommendations to rebalance the use of resources to alleviate bottlenecks. </p>
                     <p>Oracle Database QoS Management evaluates several possible solutions and then chooses the solution that:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Offers the best overall system improvement</p>
                        </li>
                        <li>
                           <p>Causes the least system disruption</p>
                        </li>
                        <li>
                           <p>Helps the highest ranked violating performance class</p>
                        </li>
                     </ul>
                     <p>The types of recommendations that Oracle Database QoS Management can make are:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1">Promoting and Demoting Consumer Groups</a><br>If Performance Objectives are not being met for a Performance Class, and the Performance Class accesses the same database as other Performance Classes, then Oracle Database QoS Management can recommend consumer group mapping changes.
                        </li>
                        <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B">Modifying the CPU Count</a><br>If you have multiple database instances running on servers in a server pool, Oracle Database QoS Management can recommend that CPU resources used by a database instance in one slice on the server be donated to a slice that needs more CPU resources.
                        </li>
                        <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-38083EC8-119E-4233-87DF-84496B008F2B">Moving Servers Between Server Pools</a><br>Another recommended action that Oracle Database QoS Management can display is to move a server from one server pool to another to provide additional resources to meet the Performance Objectives for a Performance Class.
                        </li>
                        <li class="ulchildlink"><a href="overview-oracle-database-qos-management.html#GUID-2F14A82B-73CF-483F-945C-5A008A91B961">Modifying CPU Shares Assigned to Pluggable Databases</a><br>Oracle Database Quality of Service (QoS) Management manages  the CPU resources used across pluggable databases (PDBs) in a multitenant database.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="APQOS362"></a><div class="props_rev_3"><a id="GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1" name="GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1"></a><h5 id="ATNMS-GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1" class="sect5"><span class="enumeration_section">6.3.8.2.1 </span>Promoting and Demoting Consumer Groups
                     </h5>
                     <div>
                        <p>If Performance Objectives are not being met for a Performance Class, and the Performance Class accesses the same database as other Performance Classes, then Oracle Database QoS Management can recommend consumer group mapping changes.</p>
                        <p>Changing the consumer group mappings gives more access to the CPU resource to the Performance Class that is not meeting is Performance Objective. Oracle Database QoS Management issues consumer group mapping recommendations only for Performance Classes that are competing for resources in the same database and server pool.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" title="If Performance Objectives are not being met for a Performance Class, then Oracle Database Quality of Service Management issues recommendations to rebalance the use of resources to alleviate bottlenecks.">Types of Recommendations</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="APQOS363"></a><div class="props_rev_3"><a id="GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B" name="GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B"></a><h5 id="ATNMS-GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B" class="sect5"><span class="enumeration_section">6.3.8.2.2 </span>Modifying the CPU Count
                     </h5>
                     <div>
                        <p>If you have multiple database instances running on servers in a server pool, Oracle Database QoS Management can recommend that CPU resources used by a database instance in one slice on the server be donated to a slice that needs more CPU resources.</p>
                        <p></p>
                        <p>If there is a Performance Class that is not meeting its Performance Objective, and there is another slice on the system that has available headroom, or the Performance Classes that use that slice are of a lower rank, then Oracle Database QoS Management can recommend moving a CPU from the idle slice to the overloaded slice. If this recommendation is implemented, then the <code class="codeph">CPU_COUNT</code> parameter is adjusted downwards for the idle instance and upwards for the overworked instance on all servers in the server pool.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" title="If Performance Objectives are not being met for a Performance Class, then Oracle Database Quality of Service Management issues recommendations to rebalance the use of resources to alleviate bottlenecks.">Types of Recommendations</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="APQOS364"></a><div class="props_rev_3"><a id="GUID-38083EC8-119E-4233-87DF-84496B008F2B" name="GUID-38083EC8-119E-4233-87DF-84496B008F2B"></a><h5 id="ATNMS-GUID-38083EC8-119E-4233-87DF-84496B008F2B" class="sect5"><span class="enumeration_section">6.3.8.2.3 </span>Moving Servers Between Server Pools
                     </h5>
                     <div>
                        <p>Another recommended action that Oracle Database QoS Management can display is to move a server from one server pool to another to provide additional resources to meet the Performance Objectives for a Performance Class.</p>
                        <p> If all the server pools in the cluster are at their specified minimum size, or if the server pool needing the resource is at its maximum size, then Oracle Database QoS Management can no longer recommend removing servers from server pools. In this situation the Dashboard displays "No recommended action at this time."</p>
                        <div class="infoboxnote" id="GUID-38083EC8-119E-4233-87DF-84496B008F2B__GUID-A0537C91-0B64-498A-BB28-536B291650A3">
                           <p class="notep1">Note:</p>This type of recommendation is not available for administrator-managed databases.
                        </div>
                        <p>The minimum size of a server pool is the number of servers that that server pool is required to have. If you add the values for the server pool minimum attribute for each server pool in your cluster, then the difference between this sum and the total number of servers in the cluster represents shared servers that can move between server pools (or <span class="italic">float</span>) to meet changes in demand. For example, if your cluster has 10 servers and two server pools, and each server pool has a minimum size of four, then your system has two servers that can be moved between server pools. These servers can be moved if the target server pool has not reached its maximum size. Oracle Database QoS Management always honors the Min and Max size constraints set in a policy when making Move Server recommendations.
                        </p>
                        <p>If you set the minimum size of a server pool to zero and your system experiences a demand surge, then Oracle Database QoS Management can recommend moving all the servers out of that server pool so that the server pool is at its minimum size. This results in the Performance Classes that use that server pool being completely starved of resources, and essentially being shut down. A server pool with a minimum size of zero should only host applications that are of low business criticalness and Performance Classes that are assigned a low rank in the Performance Policy.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" title="If Performance Objectives are not being met for a Performance Class, then Oracle Database Quality of Service Management issues recommendations to rebalance the use of resources to alleviate bottlenecks.">Types of Recommendations</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-2F14A82B-73CF-483F-945C-5A008A91B961" name="GUID-2F14A82B-73CF-483F-945C-5A008A91B961"></a><h5 id="ATNMS-GUID-2F14A82B-73CF-483F-945C-5A008A91B961" class="sect5"><span class="enumeration_section">6.3.8.2.4 </span>Modifying CPU Shares Assigned to Pluggable Databases
                     </h5>
                     <div>
                        <p>Oracle Database Quality of Service (QoS) Management manages  the CPU resources used across pluggable databases (PDBs) in a multitenant database.</p>
                        <p>Each pluggable database is managed  independently. If Performance Objectives are not being met for a Performance Class that utilizes a pluggable database, then Oracle Database QoS Management can recommend that the CPU shares assigned to the pluggable database be increased. The assignment of CPU shares is implemented through Database Resource Manager consumer group mappings in the resource plan.  When a CDB is managed, each PDB has its shares increased to 50 from 1. They are then reallocated as needed from there. </p>
                        <p>The Resource Manager plan for CDBs manages resources at two levels:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Assigning CPU shares among all the PDBs</p>
                           </li>
                           <li>
                              <p>Prioritizing CPU access between Consumer Groups within each PDB</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" title="If Performance Objectives are not being met for a Performance Class, then Oracle Database Quality of Service Management issues recommendations to rebalance the use of resources to alleviate bottlenecks.">Types of Recommendations</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="APQOS329"></a><div class="props_rev_3"><a id="GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD" name="GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD"></a><h4 id="ATNMS-GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD" class="sect4"><span class="enumeration_section">6.3.8.3 </span>Choosing the Best Recommendation
                  </h4>
                  <div>
                     <p>Oracle Database Quality of Service Management can offer multiple recommendations for improving workload performance.</p>
                     <p>When trying to relieve a resource bottleneck for a particular Performance Class, Oracle Database QoS Management recommends adding more of the resource (such as CPU time) for that Performance Class or making the resource available more quickly to work requests in the Performance Class. The recommendations take the form of promoting the target Performance Class to a higher Consumer Group, demoting competing Performance Classes within the resource plan, adjusting CPU resources shared between different slices in a server pool, or moving servers between server pools.</p>
                     <p>Implementing a recommended action makes the resource less available to other Performance Classes. When generating recommendations, Oracle Database QoS Management evaluates the impact to system performance as a whole. If a possible recommendation for changing the allocation of resources provides a small improvement in the response time of one Performance Class, but results in a large decrease in the response time of another Performance Class, then Oracle Database QoS Management reports that the performance gain is too small, and the change is not recommended. </p>
                     <p>Oracle Database QoS Management can issue recommendations that involve a negative impact to the performance of a Performance Class if:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The negative impact on the Performance Class from which the resource is taken is projected not to cause a Performance Objective violation and a positive impact is projected for the Performance Class that gets better access to resources</p>
                        </li>
                        <li>
                           <p>The Performance Class from which the resource is taken is lower ranked, and thus less critical to your business, than the Performance Class being helped</p>
                        </li>
                     </ul>
                     <p>If the resource bottleneck can be resolved in multiple ways, then Oracle Database QoS Management recommends an action that is projected to improve the performance of the highest ranked Performance Class that is violating its objective. You can also view the alternative recommendations generated by Oracle Database QoS Management and see whether the action was recommended for implementation. For example, one possible solution to resolving a bottleneck on the CPU resource is to demote the Consumer Group associated with the Performance Class that is using the CPU the most. By limiting access to the CPU for the work requests in this Performance Class, the work requests in the other Performances Classes for that database get a larger share of the CPU time. However, Oracle Database QoS Management might decide not to recommend this action because the gain in response time for the target Performance Class is too small.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-qos-management-dashboard.html#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a></li>
                           <li><a href="using-qos-management-dashboard.html#GUID-F67C544D-5666-47FC-BADD-DCC400C9DA1D">Viewing Recommendation Details</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS331"></a><a id="APQOS330"></a><div class="props_rev_3"><a id="GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57" name="GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57"></a><h4 id="ATNMS-GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57" class="sect4"><span class="enumeration_section">6.3.8.4 </span>Contents of a Recommendation
                  </h4>
                  <div>
                     <p>Each recommendation is comprised of several pieces of information.</p>
                     <p>The analysis data for a recommendation include the projected change in response time for each Performance Class, the projected change in the <a href="glossary.html#GUID-0C57D5A7-7249-423F-A852-3E7F9BCCB006"><span class="xrefglossterm">Performance Satisfaction Metric</span></a> (PSM) for each Performance Class, and the reason this action is chosen among other alternative actions, as shown in <a href="overview-oracle-database-qos-management.html#GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57__CHDBEHCD">Figure 6-7</a>. In this example, if you implement the recommended action, then Oracle Database QoS Management predicts that the <code class="codeph">sales cart</code> Performance Class, which has the highest ranking, will have an improvement in response time from 0.00510 seconds for database requests to 0.00426 seconds, which equates to an 11.6% gain in its PSM. The other Performance Classes are not affected by the change because they use a different server pool.
                     </p>
                     <div class="figure" id="GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57__CHDBEHCD">
                        <p class="titleinfigure">Figure 6-7 Example of the Analysis for a Recommended Action</p><img src="img/apqos_recmnd_detail2a_02.gif" height="384" width="563" alt="Description of Figure 6-7 follows" title="Description of Figure 6-7 follows" longdesc="img_text/apqos_recmnd_detail2a_02.html"><br><a href="img_text/apqos_recmnd_detail2a_02.html">Description of "Figure 6-7 Example of the Analysis for a Recommended Action"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="overview-metrics.html#GUID-5A2EB75D-0ED3-44E8-9404-9604C38ACE4D" title="A useful metric for analyzing workload performance is a common and consistent numeric measure of how work requests in a Performance Class are doing against the current Performance Objective for that Performance Class.">Performance Satisfaction Metrics</a></li>
                           <li><a href="overview-metrics.html#GUID-80C195E4-A4AE-41C2-9BD1-75DBF427F19D" title="Oracle Database QoS Management uses the metrics it collects to identify performance bottlenecks.">Using Metrics to Identify Performance Issues</a></li>
                           <li><a href="using-qos-management-dashboard.html#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS332"></a><div class="props_rev_3"><a id="GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15" name="GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15"></a><h4 id="ATNMS-GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15" class="sect4"><span class="enumeration_section">6.3.8.5 </span>Overview of Implementing Recommendations
                  </h4>
                  <div>
                     <p>Oracle Database QoS Management does not implement the recommendations automatically. </p>
                     <p>The recommended actions are performed only after the QoS Administrator clicks the <span class="uicontrol bold">Implement</span> button. After the Oracle Database QoS Management administrator implements a recommendation, the system performance is reevaluated for the specified settling time before any new recommendations are made. You can also configure Enterprise Manager to generate alerts based upon the duration that a Performance Class has not been meeting its objective. 
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="using-qos-management-dashboard.html#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a></li>
                           <li><a href="using-qos-management-dashboard.html#GUID-45691387-364A-41F4-9FDD-463FB50158B7" title="The Oracle Database QoS Management Dashboard (the Dashboard) provides an easy to use interface for managing the Oracle Database QoS Management system.">Using the Oracle Database QoS Management Dashboard</a></li>
                           <li><a href="reviewing-performance-metrics.html#GUID-0BDF2F2D-56FE-45B4-AADC-130A497C9599" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS333"></a><div class="props_rev_3"><a id="GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA" name="GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA"></a><h4 id="ATNMS-GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA" class="sect4"><span class="enumeration_section">6.3.8.6 </span>Example: How Recommendations Are Generated
                  </h4>
                  <div>
                     <p>Consider a system that has two servers in an Online server pool, and two servers in a Back Office server pool. The Online server pool hosts two workloads: the <code class="codeph">sales_pc</code> Performance Class and the <code class="codeph">sales_cart</code> Performance Class. The minimum size of the Online server pool is two. The Back Office server pool hosts two internal applications: a human resources (HR) application and an enterprise resource planning (ERP) application. The Back Office server pool has a minimum size of one. The <code class="codeph">sales_cart</code> Performance Class has the highest rank and the <code class="codeph">erp_pc</code> Performance Class has the lowest rank. The <code class="codeph">sales_pc</code> Performance Class is ranked higher than the <code class="codeph">hr_pc</code> Performance Class.
                     </p>
                     <p>In this scenario, if the <code class="codeph">sales_pc</code> workload surges, causing contention for resources and causing the <code class="codeph">sales_cart</code> Performance Class to violate its Performance Objective, then this could lead to a service-level agreement (SLA) violation for the OLTP application. Oracle Database QoS Management issues a recommendation to increase access to the CPU for the <code class="codeph">sales_cart</code> Performance Class at the expense of the <code class="codeph">sales_pc</code> workload, because the <code class="codeph">sales_cart</code> Performance Class is of a higher rank; a higher rank indicates that satisfying the Performance Objective for the <code class="codeph">sales_cart</code> Performance Class is more important than satisfying the Performance Objective for the <code class="codeph">sales_pc</code> Performance Class.
                     </p>
                     <p>If, after you implement the recommendation, the sales_cart and <code class="codeph">sales_pc</code> Performance Classes are still not satisfying their Performance Objectives, then Oracle Database QoS Management issues a recommendation to increase the number of servers in the Online server pool by moving a server from the Back Office server pool, or a server pool that hosts less critical workloads or workloads with more headroom. In this scenario, a server can be moved from the Back Office server pool, because the Back Office server pool is currently above its minimum size of one. If the Back Office server pool had a minimum size of two, then Oracle Database QoS Management would have to find an available server in a different server pool; Oracle Database QoS Management does not recommend to move a server from a server pool if doing so will cause a server pool to drop below its minimum size.
                     </p>
                     <p>If you implement the recommended action, and your applications use Cluster Managed Services and Client Run-time Load Balancing, then the application users should not see a service disruption due to this reallocation. The services are shut down transactionally on the server being moved. After the server has been added to the stressed server pool, all database instances and their offered services are started on the reallocated server. At this point, sessions start to gradually switch to using the new server in the server pool, relieving the bottleneck.</p>
                     <p>Using the same scenario, if the <code class="codeph">sales_pc</code> Performance Class and <code class="codeph">hr_pc</code> Performance Class both require additional servers to meet their Performance Objectives, then Oracle Database QoS Management first issues recommendations to improve the performance of the <code class="codeph">sales_pc</code> Performance Class, because the <code class="codeph">sales_pc</code> Performance Class is ranked higher than the <code class="codeph">hr_pc</code> Performance Class. When the <code class="codeph">sales_pc</code> Performance Class is satisfying its Performance Objectives, then Oracle Database QoS Management makes recommendations to improve the performance of the <code class="codeph">hr_pc</code> Performance Class.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00813.using-XML-schema-processor-for-Java.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.">
      <meta name="description" content="Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.">
      <title>Using the XML Schema Processor for Java</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96292-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-xquery-API-for-Java-to-access-XML-DB.html" title="Previous" type="text/html">
      <link rel="next" href="using-JAXB-class-generator.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide">
    <meta name="dcterms.isVersionOf" content="ADXDK">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-xquery-API-for-Java-to-access-XML-DB.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-JAXB-class-generator.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-Java.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for Java</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using the XML Schema Processor for Java</li>
            </ol>
            <a id="GUID-F41C7DA2-A3DF-463B-A08C-24E8F0621450" name="GUID-F41C7DA2-A3DF-463B-A08C-24E8F0621450"></a><a id="ADXDK993"></a><a id="ADXDK5000"></a>
            
            <h2 id="ADXDK-GUID-F41C7DA2-A3DF-463B-A08C-24E8F0621450" class="sect2"><span class="enumeration_chapter">17 </span>Using the XML Schema Processor for Java
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.</p>
               <div class="section"> </div>
               <!-- class="section" -->
            </div><a id="ADXDK994"></a><a id="ADXDK19254"></a><div class="props_rev_3"><a id="GUID-AEB7C697-2E71-4AC1-8DFB-EB6531552A50" name="GUID-AEB7C697-2E71-4AC1-8DFB-EB6531552A50"></a><h3 id="ADXDK-GUID-AEB7C697-2E71-4AC1-8DFB-EB6531552A50" class="sect3">Introduction to XML Validation</h3>
               <div>
                  <p>Topics cover the different techniques for XML validation.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19255"></a><div class="props_rev_3"><a id="GUID-D28C9F71-7B8B-4508-808B-C6A96F1DDE4A" name="GUID-D28C9F71-7B8B-4508-808B-C6A96F1DDE4A"></a><h4 id="ADXDK-GUID-D28C9F71-7B8B-4508-808B-C6A96F1DDE4A" class="sect4">Prerequisites for Using the XML Schema Processor for Java</h4>
                  <div>
                     <p>Prerequisites for using the XML schema processor are covered.</p>
                     <p>This section assumes that you have working knowledge of these technologies:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="glossary.html#GUID-F2AC11F4-F0D2-4EFB-B28B-8114CC0D7C38"><span class="xrefglossterm">document type definition (DTD)</span></a>. An XML document type definition (DTD) defines the legal structure of an XML document.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-B1E6F2C9-39D7-42D5-817B-6210231ABF97" title="The XML Schema language, also called XML Schema, is a W3C recommendation for the use of simple data types and complex structures within an XML document. It addresses areas currently lacking in DTDs, including the definition and validation of data types."><span class="xrefglossterm">XML Schema language</span></a>. XML Schema defines the legal structure of an XML document.
                           </p>
                        </li>
                     </ul>
                     <p>To learn more about these technologies, consult the XML resources in <a href="preface.html#GUID-2CD1F6B6-C8EC-42E3-97F2-589AABF9AFFB" title="Oracle resources that are related to this document are listed.">Related Documents</a>.
                     </p>
                  </div>
               </div><a id="ADXDK19256"></a><div class="props_rev_3"><a id="GUID-2CE6171F-CBF0-439A-AC05-84C27B4F0D72" name="GUID-2CE6171F-CBF0-439A-AC05-84C27B4F0D72"></a><h4 id="ADXDK-GUID-2CE6171F-CBF0-439A-AC05-84C27B4F0D72" class="sect4">Standards and Specifications for  the XML Schema Processor for Java</h4>
                  <div>
                     <p>XML Schema is a World Wide Web Consortium (W3C) standard.</p>
                     <p>The Oracle XML Schema processor supports the W3C XML Schema specifications:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xschema0_primer" target="_blank"><span class="italic">XML Schema Part 0: Primer</span></a> 
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xschema1_struct" target="_blank"><span class="italic">XML Schema Part 1: Structures</span></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xschema2_types" target="_blank"><span class="italic">XML Schema Part 2: Datatypes</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="XDK-standards.html#GUID-795A483B-12AC-4F6D-A606-6BE9DA963F0F" title="A description is given of the Oracle XML Developer's Kit (XDK) standards.">Oracle XML Developer's Kit Standards</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="ADXDK19257"></a><div class="props_rev_3"><a id="GUID-C8292C78-3BDC-4D6E-A97A-B820220A10FA" name="GUID-C8292C78-3BDC-4D6E-A97A-B820220A10FA"></a><h4 id="ADXDK-GUID-C8292C78-3BDC-4D6E-A97A-B820220A10FA" class="sect4">XML Validation with DTDs</h4>
                  <div>
                     <p>Document type definition (DTDs) were originally developed for SGML. XML DTDs are a subset of those available in SGML and provide a mechanism for declaring constraints on XML markup. XML DTDs enable the specification of:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Which elements can be in your XML documents.</p>
                        </li>
                        <li>
                           <p>The content model of an XML element, that is, whether the element contains only data or has a set of subelements that defines its structure. DTDs can define whether a subelement is optional or mandatory and whether it can occur only once or multiple times.</p>
                        </li>
                        <li>
                           <p>Attributes of XML elements. DTDs can also specify whether attributes are optional or mandatory.</p>
                        </li>
                        <li>
                           <p>Entities that are legal in your XML documents.</p>
                        </li>
                     </ul>
                     <p>An XML DTD is not itself written in XML, but is a context-independent grammar for defining the structure of an XML document. You can declare a DTD in an XML document itself or in a separate file from the XML document.</p>
                     <p>Validation is the process by which you verify an XML document against its associated DTD, ensuring that the structure, use of elements, and use of attributes are consistent with the definitions in the DTD. Thus, applications that handle XML documents can assume that the data matches the definition.</p>
                     <p>Using XDK, you can write an application that includes a validating XML parser; that is, a program that parses and validates XML documents against a DTD. Depending on its implementation, a validating parser may:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Either stop processing when it encounters an error, or continue.</p>
                        </li>
                        <li>
                           <p>Either report warnings and errors as they occur or in summary form at the end of processing.</p>
                        </li>
                        <li>
                           <p>Enable or disable validation mode</p>
                           <p>Most processors can enable or disable validation mode, but they must still process entity definitions and other constructs of DTDs.</p>
                        </li>
                     </ul>
                  </div><a id="ADXDK19259"></a><a id="ADXDK19260"></a><a id="ADXDK19258"></a><div class="props_rev_3"><a id="GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D" name="GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D"></a><h5 id="ADXDK-GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D" class="sect5">DTD Samples in XDK</h5>
                     <div>
                        <p>An example DTD is shown, together with an example XML document that conforms to that DTD.</p>
                        <p><a href="using-XML-schema-processor-for-Java.html#GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D__CIHDHBEE">Example 17-1</a> shows the contents of a DTD named <code class="codeph">family.dtd</code>, which is located in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/common/</code>. The <code class="codeph">&lt;ELEMENT&gt;</code> tags specify the legal nomenclature and structure of elements in the document, whereas the <code class="codeph">&lt;ATTLIST&gt;</code> tags specify the legal attributes of elements.
                        </p>
                        <p><a href="using-XML-schema-processor-for-Java.html#GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D__CIHCDDBD">Example 17-2</a> shows the contents of an XML document named <code class="codeph">family.xml</code>, which is also located in <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/common/</code>. The <code class="codeph">&lt;!DOCTYPE&gt;</code> element in <code class="codeph">family.xml</code> specifies that this XML document conforms to the external DTD named <code class="codeph">family.dtd</code>.
                        </p>
                        <div class="example" id="GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D__CIHDHBEE">
                           <p class="titleinexample">Example 17-1 family.dtd</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!ELEMENT family (member*)&gt;
&lt;!ATTLIST family lastname CDATA #REQUIRED&gt;
&lt;!ELEMENT member (#PCDATA)&gt;
&lt;!ATTLIST member memberid ID #REQUIRED&gt;
&lt;!ATTLIST member dad IDREF #IMPLIED&gt;
&lt;!ATTLIST member mom IDREF #IMPLIED&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-BD98BC10-64C1-435A-903D-9D80D69D1C1D__CIHCDDBD">
                           <p class="titleinexample">Example 17-2 family.xml</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="no"?&gt;
&lt;!DOCTYPE family SYSTEM "family.dtd"&gt;
&lt;family lastname="Smith"&gt;
&lt;member memberid="m1"&gt;Sarah&lt;/member&gt;
&lt;member memberid="m2"&gt;Bob&lt;/member&gt;
&lt;member memberid="m3" mom="m1" dad="m2"&gt;Joanne&lt;/member&gt;
&lt;member memberid="m4" mom="m1" dad="m2"&gt;Jim&lt;/member&gt;
&lt;/family&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK19261"></a><div class="props_rev_3"><a id="GUID-674379DA-81FD-43CD-9C8B-998B70A11103" name="GUID-674379DA-81FD-43CD-9C8B-998B70A11103"></a><h4 id="ADXDK-GUID-674379DA-81FD-43CD-9C8B-998B70A11103" class="sect4">XML Validation with XML Schemas</h4>
                  <div>
                     <p>Concepts involving validation using XML schemas are introduced.</p>
                     <p>The <a href="glossary.html#GUID-B1E6F2C9-39D7-42D5-817B-6210231ABF97" title="The XML Schema language, also called XML Schema, is a W3C recommendation for the use of simple data types and complex structures within an XML document. It addresses areas currently lacking in DTDs, including the definition and validation of data types."><span class="xrefglossterm">XML Schema language</span></a>, also known as <a href="glossary.html#GUID-8FD3F1F2-EA9C-4AED-955B-FE1570ABECDE" title="Equivalent to XML Schema language."><span class="xrefglossterm">XML Schema Definition</span></a>, was created by the W3C to use XML syntax to describe the content and the structure of XML documents. An <a href="glossary.html#GUID-085CAB85-F0BC-4D3B-A282-21E17B0BC9B3" title="A document written in the XML Schema language."><span class="xrefglossterm">XML schema</span></a> is an XML document written in the XML Schema language. An XML schema document contains rules describing the structure of an input XML document, called an <a href="glossary.html#GUID-C0B7CAC1-AB51-490D-AA39-ED961BB623CD" title="An XML document validated against an XML schema. If the instance document conforms to the rules of the schema, it is said to be valid."><span class="xrefglossterm">instance document</span></a>. An instance document is valid if and only if it conforms to the rules of the XML schema.
                     </p>
                     <p>The XML Schema language defines such things as:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Which elements and attributes are legal in the instance document</p>
                        </li>
                        <li>
                           <p>Which elements can be children of other elements</p>
                        </li>
                        <li>
                           <p>The order and number of child elements</p>
                        </li>
                        <li>
                           <p>Data types for elements and attributes</p>
                        </li>
                        <li>
                           <p>Default and fixed values for elements and attributes</p>
                        </li>
                     </ul>
                     <p>A validating XML parser tries to determine whether an instance document conforms to the rules of its associated XML schema. Using XDK you can write a validating parser that performs this schema validation. Depending on its implementation, a validating parser may:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Either stop processing when it encounters an error, or continue.</p>
                        </li>
                        <li>
                           <p>Either report warnings and errors as they occur or in summary form at the end of processing.</p>
                        </li>
                     </ul>
                     <p>The processor must consider entity definitions and other constructs that are defined in a DTD that is included by the instance document. The XML Schema language does not define what must occurs when an instance document includes both an XML schema and a DTD. Thus, the behavior of the application in such cases depends on the implementation.</p>
                  </div><a id="ADXDK19263"></a><a id="ADXDK19264"></a><a id="ADXDK19262"></a><div class="props_rev_3"><a id="GUID-E2B411D7-FE12-4E41-B9D8-201FF4D473F3" name="GUID-E2B411D7-FE12-4E41-B9D8-201FF4D473F3"></a><h5 id="ADXDK-GUID-E2B411D7-FE12-4E41-B9D8-201FF4D473F3" class="sect5">XML Schema Samples in XDK</h5>
                     <div>
                        <p>A sample XML document is shown which contains a purchase report that describes parts that have been ordered in different regions. This document is located at <code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/report.xml</code>. An XML schema document, <code class="codeph">report.xsd</code>, which you can use to validate <code class="codeph">report.xml</code>, is also shown. 
                        </p>
                        <p>Among other things, the XML schema defines the names of the elements that are legal in the instance document and the type of data that the elements can contain.</p>
                        <div class="example" id="GUID-E2B411D7-FE12-4E41-B9D8-201FF4D473F3__BABHGCFC">
                           <p class="titleinexample">Example 17-3 report.xml</p><pre class="pre codeblock"><code>&lt;purchaseReport
  xmlns="http://www.example.com/Report"
  xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.example.com/Report  report.xsd"
  period="P3M" periodEnding="1999-12-31"&gt;
 &lt;regions&gt;
  &lt;zip code="95819"&gt;
   &lt;part number="872-AA" quantity="1"/&gt;
   &lt;part number="926-AA" quantity="1"/&gt;
   &lt;part number="833-AA" quantity="1"/&gt;
   &lt;part number="455-BX" quantity="1"/&gt;
  &lt;/zip&gt;
  &lt;zip code="63143"&gt;
   &lt;part number="455-BX" quantity="4"/&gt;
  &lt;/zip&gt;
 &lt;/regions&gt;
 &lt;parts&gt;
  &lt;part number="872-AA"&gt;Lawnmower&lt;/part&gt;
  &lt;part number="926-AA"&gt;Baby Monitor&lt;/part&gt;
  &lt;part number="833-AA"&gt;Lapis Necklace&lt;/part&gt;
  &lt;part number="455-BX"&gt;Sturdy Shelves&lt;/part&gt;
 &lt;/parts&gt;
&lt;/purchaseReport&gt;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-E2B411D7-FE12-4E41-B9D8-201FF4D473F3__BABFDAEI">
                           <p class="titleinexample">Example 17-4 report.xsd</p><pre class="pre codeblock"><code>&lt;schema targetNamespace="http://www.example.com/Report"
        xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:r="http://www.example.com/Report"
        elementFormDefault="qualified"&gt;
 &lt;annotation&gt;
  &lt;documentation xml:lang="en"&gt;
   Report schema for Example.com
   Copyright 2000 Example.com. All rights reserved.
  &lt;/documentation&gt;
 &lt;/annotation&gt;
 &lt;element name="purchaseReport"&gt;
  &lt;complexType&gt;
   &lt;sequence&gt;
    &lt;element name="regions" type="r:RegionsType"&gt;
     &lt;keyref name="dummy2" refer="r:pNumKey"&gt;
      &lt;selector xpath="r:zip/r:part"/&gt;
      &lt;field xpath="@number"/&gt;
     &lt;/keyref&gt;
    &lt;/element&gt;
    &lt;element name="parts" type="r:PartsType"/&gt;
   &lt;/sequence&gt;
   &lt;attribute name="period"       type="duration"/&gt;
   &lt;attribute name="periodEnding" type="date"/&gt;
  &lt;/complexType&gt;
  &lt;unique name="dummy1"&gt;
   &lt;selector xpath="r:regions/r:zip"/&gt;
   &lt;field xpath="@code"/&gt;
  &lt;/unique&gt;
  &lt;key name="pNumKey"&gt;
   &lt;selector xpath="r:parts/r:part"/&gt;
   &lt;field xpath="@number"/&gt;
  &lt;/key&gt;
 &lt;/element&gt;
 &lt;complexType name="RegionsType"&gt;
  &lt;sequence&gt;
   &lt;element name="zip" maxOccurs="unbounded"&gt;
    &lt;complexType&gt;
     &lt;sequence&gt;
      &lt;element name="part" maxOccurs="unbounded"&gt;
       &lt;complexType&gt;
        &lt;complexContent&gt;
         &lt;restriction base="anyType"&gt;
          &lt;attribute name="number"   type="r:SKU"/&gt;
          &lt;attribute name="quantity" type="positiveInteger"/&gt;
         &lt;/restriction&gt;
        &lt;/complexContent&gt;
       &lt;/complexType&gt;
      &lt;/element&gt;
     &lt;/sequence&gt;
     &lt;attribute name="code" type="positiveInteger"/&gt;
    &lt;/complexType&gt;
   &lt;/element&gt;
  &lt;/sequence&gt;
 &lt;/complexType&gt;
 &lt;simpleType name="SKU"&gt;
  &lt;restriction base="string"&gt;
   &lt;pattern value="\d{3}-[A-Z]{2}"/&gt;
  &lt;/restriction&gt;
 &lt;/simpleType&gt;
 &lt;complexType name="PartsType"&gt;
  &lt;sequence&gt;
   &lt;element name="part" maxOccurs="unbounded"&gt;
    &lt;complexType&gt;
     &lt;simpleContent&gt;
      &lt;extension base="string"&gt;
       &lt;attribute name="number" type="r:SKU"/&gt;
      &lt;/extension&gt;
     &lt;/simpleContent&gt;
    &lt;/complexType&gt;
   &lt;/element&gt;
  &lt;/sequence&gt;
 &lt;/complexType&gt;
&lt;/schema&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK19266"></a><a id="ADXDK19265"></a><div class="props_rev_3"><a id="GUID-1794D1E8-94A0-41EB-B8A5-E7927FAC4BE9" name="GUID-1794D1E8-94A0-41EB-B8A5-E7927FAC4BE9"></a><h4 id="ADXDK-GUID-1794D1E8-94A0-41EB-B8A5-E7927FAC4BE9" class="sect4">Differences Between XML Schemas and DTDs</h4>
                  <div>
                     <p>The XML Schema language includes most of the capabilities of the DTD specification. An XML schema serves a similar purpose to a DTD, but is more flexible in specifying document constraints. </p>
                     <p><a href="using-XML-schema-processor-for-Java.html#GUID-1794D1E8-94A0-41EB-B8A5-E7927FAC4BE9__CIHDIBAB" title="This table compares the features of the XML Schema language and DTDs">Table 17-1</a> compares some features between the two validation mechanisms.
                     </p>
                     <div class="tblformal" id="GUID-1794D1E8-94A0-41EB-B8A5-E7927FAC4BE9__CIHDIBAB">
                        <p class="titleintable">Table 17-1 Feature Comparison Between XML Schema and DTD</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Feature Comparison Between XML Schema and DTD" summary="This table compares the features of the XML Schema language and DTDs" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="37%" id="d63446e943">Feature</th>
                                 <th align="left" valign="bottom" width="22%" id="d63446e946">XML Schema</th>
                                 <th align="left" valign="bottom" width="41%" id="d63446e949">DTD</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e954" headers="d63446e943 ">
                                    <p>Element nesting</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e954 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e954 d63446e949 ">
                                    <p>X</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e964" headers="d63446e943 ">
                                    <p>Element occurrence constraints</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e964 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e964 d63446e949 ">
                                    <p>X</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e974" headers="d63446e943 ">
                                    <p>Permitted attributes</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e974 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e974 d63446e949 ">
                                    <p>X</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e984" headers="d63446e943 ">
                                    <p>Attribute types and default values</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e984 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e984 d63446e949 ">
                                    <p>X</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e994" headers="d63446e943 ">
                                    <p>Written in XML</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e994 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e994 d63446e949 ">
                                    <p></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e1003" headers="d63446e943 ">
                                    <p>Namespace support</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e1003 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e1003 d63446e949 ">
                                    <p></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e1012" headers="d63446e943 ">
                                    <p>Built-In data types</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e1012 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e1012 d63446e949 ">
                                    <p></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e1021" headers="d63446e943 ">
                                    <p>User-Defined data types</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e1021 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e1021 d63446e949 ">
                                    <p></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e1030" headers="d63446e943 ">
                                    <p>Include/Import</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e1030 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e1030 d63446e949 ">
                                    <p></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d63446e1039" headers="d63446e943 ">
                                    <p>Refinement (inheritance)</p>
                                 </td>
                                 <td align="left" valign="top" width="22%" headers="d63446e1039 d63446e946 ">
                                    <p>X</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d63446e1039 d63446e949 ">
                                    <p></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>These reasons are probably the most persuasive for choosing XML schema validation over DTD validation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The XML Schema language enables you to define rules for the <span class="italic">content</span> of elements and attributes. You achieve control over content by using data types. With XML Schema data types you can more easily perform actions such as: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Declare which elements are to contain which types of data, for example, positive integers in one element and years in another</p>
                              </li>
                              <li>
                                 <p>Process data obtained from a database</p>
                              </li>
                              <li>
                                 <p>Define restrictions on data, for example, a number between 10 and 20</p>
                              </li>
                              <li>
                                 <p>Define data formats, for example, dates in the form MM-DD-YYYY</p>
                              </li>
                              <li>
                                 <p>Convert data between different data types, for example, strings to dates</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Unlike DTD grammar, documents written in the XML Schema language are themselves written in XML. Thus, you can perform these actions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use your XML parser to parse your XML schema</p>
                              </li>
                              <li>
                                 <p>Process your XML schema with the XML Document Object Model (DOM)</p>
                              </li>
                              <li>
                                 <p>Transform your XML document with Extensible Stylesheet Language Transformation (XSLT)</p>
                              </li>
                              <li>
                                 <p>Reuse your XML schemas in other XML schemas</p>
                              </li>
                              <li>
                                 <p>Extend your XML schema by adding elements and attributes</p>
                              </li>
                              <li>
                                 <p>Reference multiple XML schemas from the same document</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADXDK19267"></a><div class="props_rev_3"><a id="GUID-D9E0C12D-122D-4183-A4AB-8BE7F476ABF8" name="GUID-D9E0C12D-122D-4183-A4AB-8BE7F476ABF8"></a><h3 id="ADXDK-GUID-D9E0C12D-122D-4183-A4AB-8BE7F476ABF8" class="sect3">Using the XML Schema Processor: Overview</h3>
               <div>
                  <p>The Oracle XML Schema processor is a SAX-based XML schema validator that you can use to validate instance documents against an XML schema. The processor supports both language example (LAX) and strict validation.</p>
                  <p>You can use the processor in these ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Enable it in the XML parser</p>
                     </li>
                     <li>
                        <p>Use it with a DOM tree to validate whole or part of an XML document</p>
                     </li>
                     <li>
                        <p>Use it as a component in a processing pipeline (like a content handler)</p>
                     </li>
                  </ul>
                  <p>You can configure the schema processor in different ways depending on your requirements. For example, you can:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use a fixed XML schema or automatically build a schema based on the <code class="codeph">schemaLocation</code> attributes in an instance document.
                        </p>
                     </li>
                     <li>
                        <p>Set <code class="codeph">XMLError</code> and <code class="codeph">entityResolver</code> to gain better control over the validation process.
                        </p>
                     </li>
                     <li>
                        <p>Determine how much of an instance document is to be validated. You can use any of the validation modes specified in <a href="XML-parsing-for-Java.html#GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7__G1043218" title="This table shows the setValidationMode() flags that you can use in the XDK parser. Name of Mode, Mode Value in Java, and Description are the columns.">Table 12-1</a>. You can also designate a type of element as the root of validation.
                        </p>
                     </li>
                  </ul>
               </div><a id="ADXDK19269"></a><a id="ADXDK19270"></a><a id="ADXDK19268"></a><div class="props_rev_3"><a id="GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6" name="GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6"></a><h4 id="ADXDK-GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6" class="sect4">Using the XML Schema Processor for Java: Basic Process</h4>
                  <div>
                     <p>XDK packages that are important for applications that process XML schemas are described.</p>
                     <p>These are the important packages for applications that process XML schemas:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">oracle.xml.parser.v2</code>, which provides APIs for XML parsing
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">oracle.xml.parser.schema</code>, which provides APIs for XML Schema processing
                           </p>
                        </li>
                     </ul>
                     <p>The most important classes in the <code class="codeph">oracle.xml.parser.schema</code> package are described in <a href="using-XML-schema-processor-for-Java.html#GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6__CHDHIJJE" title="This table describes the oracle.xml.parser.schema classes.">Table 17-2</a>. These form the core of most XML schema applications.
                     </p>
                     <div class="tblformalwide" id="GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6__CHDHIJJE">
                        <p class="titleintable">Table 17-2 oracle.xml.parser.schema Classes</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="oracle.xml.parser.schema Classes" summary="This table describes the oracle.xml.parser.schema classes." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d63446e1325">Class/Interface</th>
                                 <th align="left" valign="bottom" width="29%" id="d63446e1328">Description</th>
                                 <th align="left" valign="bottom" width="49%" id="d63446e1331">Methods</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d63446e1336" headers="d63446e1325 ">
                                    <p><code class="codeph">XMLSchema</code> class
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d63446e1336 d63446e1328 ">
                                    <p>Represents XML Schema component model. An <code class="codeph">XMLSchema</code> object is a set of <code class="codeph">XMLSchemaNodes</code> that belong to different target namespaces. The <code class="codeph">XSDValidator</code> class uses <code class="codeph">XMLSchema</code> for schema validation or metadata.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d63446e1336 d63446e1331 ">
                                    <p>The principal methods are:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">get</code> methods such as <code class="codeph">getElement()</code> and <code class="codeph">getSchemaTargetNS()</code> get information about the XML schema
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">printSchema()</code> prints information about the XML schema
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d63446e1377" headers="d63446e1325 ">
                                    <p><code class="codeph">XMLSchemaNode</code> class
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d63446e1377 d63446e1328 ">
                                    <p>Represents schema components in a target namespace, including type definitions, element and attribute delcarations, and group and attribute group definitions.</p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d63446e1377 d63446e1331 ">
                                    <p>The principal methods are <code class="codeph">get</code> methods such as <code class="codeph">getElementSet()</code> and <code class="codeph">getAttributeDeclarations()</code> get components of the XML schema.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d63446e1398" headers="d63446e1325 ">
                                    <p><code class="codeph">XSDBuilder</code> class
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d63446e1398 d63446e1328 ">
                                    <p>Builds an <code class="codeph">XMLSchema</code> object from an XML schema document. The <code class="codeph">XMLSchema</code> object is a set of objects (Infoset items) corresponding to top-level schema declarations and definitions. The schema document is XML parsed and converted to a DOM tree.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d63446e1398 d63446e1331 ">
                                    <p>The principal methods are:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">build()</code> creates an <code class="codeph">XMLSchema</code> object.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">getObject()</code> returns the <code class="codeph">XMLSchema</code> object.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">setEntityResolver()</code> sets an <code class="codeph">EntityResolver</code> for resolving imports and includes.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d63446e1441" headers="d63446e1325 ">
                                    <p><code class="codeph">XSDValidator</code> class
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d63446e1441 d63446e1328 ">
                                    <p>Validates an instance XML document against an XML schema. When registered,  an <code class="codeph">XSDValidator</code> object is inserted as a pipeline node between <code class="codeph">XMLParser</code> and <code class="codeph">XMLDocument</code> events handlers.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d63446e1441 d63446e1331 ">
                                    <p>The principal methods are:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">get</code> methods such as <code class="codeph">getCurrentMode()</code> and <code class="codeph">getElementDeclaration()</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">set</code> methods such as <code class="codeph">setXMLProperty()</code> and <code class="codeph">setDocumentLocator()</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">startDocument()</code> receives notification of the beginning of the document.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">startElement()</code> receives notification of the beginning of the element.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="using-XML-schema-processor-for-Java.html#GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6__I1012436">Figure 17-1</a> depicts the basic process of validating an instance document with the XML Schema processor for Java.
                     </p>
                     <div class="figure" id="GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6__I1012436">
                        <p class="titleinfigure">Figure 17-1 XML Schema Processor for Java</p><img src="img/adxdk105.gif" width="419" alt="Description of Figure 17-1 follows" title="Description of Figure 17-1 follows" longdesc="img_text/adxdk105.html"><br><a href="img_text/adxdk105.html">Description of "Figure 17-1 XML Schema Processor for Java"</a></div>
                     <!-- class="figure" -->
                     <p>The XML Schema processor performs these major tasks:</p>
                     <ol>
                        <li>
                           <p>A builder (<code class="codeph">XSDBuilder</code> object) assembles the XML schema from an input XML schema document. Although instance documents and schemas need not exist specifically as files on the operating system, they are commonly referred to as files. They may exist as streams of bytes, fields in a database record, or collections of XML Infoset "Information Items."
                           </p>
                           <p>This task involves parsing the schema document into an object. The builder creates the schema object explicitly or implicitly:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>In explicit mode, you pass in an XML schema when you invoke the processor. <a href="using-XML-schema-processor-for-Java.html#GUID-EAAAB139-E5FE-434E-A310-2E13099B1FF8" title="$ORACLE_HOME/xdk/demo/java/schema/XSDSetSchema.java shows how to validate an XML schema explicitly. The validation mode is explicit because you use the XSDBuilder class to specify the schema to use for validation: the schema is not specified in the instance document as in implicit validation.">Validating Against Externally Referenced XML Schemas</a> explains how to build the schema object in explicit mode.
                                 </p>
                              </li>
                              <li>
                                 <p>In implicit mode, you do not pass in an XML schema when you invoke the processor because the schema is internally referenced by the instance document. <a href="using-XML-schema-processor-for-Java.html#GUID-5B182AA2-84E3-416A-837A-6563B2F948D5" title="$ORACLE_HOME/xdk/demo/java/schema/XSDSample.java shows how to validate against an implicit XML Schema. The validation mode is implicit because the XML schema is referenced in the instance document itself.">Validating Against Internally Referenced XML Schemas</a> explains how to create the schema object in implicit mode.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>The XML schema validator uses the schema object to validate the instance document. This task has these steps:</p>
                           <ol type="a">
                              <li>
                                 <p>A Simple API for XML (SAX) parser parses the instance document into SAX events, which it passes to the validator.</p>
                              </li>
                              <li>
                                 <p>The validator receives SAX events as input and validates them against the schema object, sending an error message if it finds invalid XML components.</p>
                                 <p><a href="XML-parsing-for-Java.html#GUID-2DA498AD-B22B-4C66-AE90-5EB37EB105E7" title="To parse an XML document, invoke the parse() method. Typically, you invoke initialization and termination methods in association with the parse() method.">Validation in the XML Parser</a> describes the validation modes that you can use when validating the instance document. If you do not explicitly set a schema for validation with the <code class="codeph">XSDBuilder</code> class, then the instance document must have the correct <code class="codeph">xsi:schemaLocation</code> attribute pointing to the schema file. Otherwise, the program does not perform the validation. If the processor encounters errors, it generates error messages.
                                 </p>
                              </li>
                              <li>
                                 <p>The validator sends input SAX events, default values, or post-schema validation information to a DOM builder or application.</p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-66EB1648-53B0-4026-8139-EC9EED8A16E6__GUID-79CE7578-8DAB-49AF-88FC-70B09FD34EF9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a> to learn about the <code class="codeph">XSDBuilder</code>, <code class="codeph">DOMParser</code>, and <code class="codeph">SAXParser</code> classes
                              </p>
                           </li>
                           <li>
                              <p><a href="using-XML-schema-processor-for-Java.html#GUID-F41C7DA2-A3DF-463B-A08C-24E8F0621450" title="Topics here cover how to use the Extensible Markup Language (XML) schema processor for Java.">Using the XML Schema Processor for Java</a> to learn about the XDK SAX and DOM parsers
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADXDK19272"></a><a id="ADXDK19271"></a><div class="props_rev_3"><a id="GUID-1794B57C-BD9A-4322-B136-B07B950EC479" name="GUID-1794B57C-BD9A-4322-B136-B07B950EC479"></a><h4 id="ADXDK-GUID-1794B57C-BD9A-4322-B136-B07B950EC479" class="sect4">Running the XML Schema Processor Demo Programs</h4>
                  <div>
                     <p>Demo programs for the XML Schema processor for Java are included in <code class="codeph">$ORACLE_HOME/xdk/demo/java/schema</code>. 
                     </p>
                     <div class="section">
                        <p><a href="using-XML-schema-processor-for-Java.html#GUID-1794B57C-BD9A-4322-B136-B07B950EC479__CIHIEEDI" title="This table describes the XML files and programs that you can use to test the XML Schema processor. File and Description are the Columns.">Table 17-3</a> describes the XML files and programs that you can use to test the XML Schema processor.
                        </p>
                        <div class="tblformalwide" id="GUID-1794B57C-BD9A-4322-B136-B07B950EC479__CIHIEEDI">
                           <p class="titleintable">Table 17-3 XML Schema Sample Files </p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="XML Schema Sample Files " summary="This table describes the XML files and programs that you can use to test the XML Schema processor. File and Description are the Columns." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d63446e1704">File</th>
                                    <th align="left" valign="bottom" width="81%" id="d63446e1707">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1712" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">cat.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1712 d63446e1707 ">
                                       <p>A sample XML schema used by the <code class="codeph">XSDSetSchema.java</code> program to validate <code class="codeph">catalogue.xml</code>. The <code class="codeph">cat.xsd</code> schema specifies the structure of a catalogue of books.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1728" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">catalogue.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1728 d63446e1707 ">
                                       <p>A sample instance document that the <code class="codeph">XSDSetSchema.java</code> program uses to validate against the <code class="codeph">cat.xsd</code> schema.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1741" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">catalogue_e.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1741 d63446e1707 ">
                                       <p>A sample instance document used by the <code class="codeph">XSDSample.java</code> program. When the program tries to validate this document against the <code class="codeph">cat.xsd</code> schema, it generates schema errors.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1754" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">DTD2Schema.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1754 d63446e1707 ">
                                       <p>This sample program converts a DTD (first argument) into an XML Schema and uses it to validate an XML file (second argument).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1761" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">embeded_xsql.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1761 d63446e1707 ">
                                       <p>The XML schema used by <code class="codeph">XSDLax.java.</code> The schema defines the structure of an XSQL page.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1771" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">embeded_xsql.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1771 d63446e1707 ">
                                       <p>The instance document used by <code class="codeph">XSDLax.java</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1781" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">juicer1.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1781 d63446e1707 ">
                                       <p>A sample XML document for use with <code class="codeph">xsdproperty.java</code>. The XML schema that defines this document is <code class="codeph">juicer1.xsd</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1794" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">juicer1.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1794 d63446e1707 ">
                                       <p>A sample XML schema for use with <code class="codeph">xsdproperty.java</code>. This XML schema defines <code class="codeph">juicer1.xml</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1807" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">juicer2.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1807 d63446e1707 ">
                                       <p>A sample XML document for use with <code class="codeph">xsdproperty.java</code>. The XML schema that defines this document is <code class="codeph">juicer2.xsd</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1820" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">juicer2.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1820 d63446e1707 ">
                                       <p>A sample XML document for use with <code class="codeph">xsdproperty.java</code>. This XML schema defines <code class="codeph">juicer2.xml</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1833" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">report.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1833 d63446e1707 ">
                                       <p>The sample XML file that <code class="codeph">XSDSetSchema.java</code> uses to validate against the XML schema <code class="codeph">report.xsd</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1847" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">report.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1847 d63446e1707 ">
                                       <p>A sample XML schema used by the <code class="codeph">XSDSetSchema.java</code> program to validate the contents of <code class="codeph">report.xml</code>. The <code class="codeph">report.xsd</code> schema specifies the structure of a purchase order.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1863" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">report_e.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1863 d63446e1707 ">
                                       <p>When the program validates this sample XML file using <code class="codeph">XSDSample.java</code>, it generates XML Schema errors.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1873" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsddom.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1873 d63446e1707 ">
                                       <p>This program shows how to validate an instance document by get a DOM representation of the document and using an <code class="codeph">XSDValidator</code> object to validate it.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1883" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsdent.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1883 d63446e1707 ">
                                       <p>This program validates an XML document by redirecting the referenced schema in the <code class="codeph">SchemaLocation</code> attribute to a local version. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1893" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsdent.xml</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1893 d63446e1707 ">
                                       <p>This XML document describes a book. The file is used as an input to <code class="codeph">xsdent.java</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1903" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsdent.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1903 d63446e1707 ">
                                       <p>This XML schema document defines the rules for <code class="codeph">xsdent.xml</code>. The schema document contains a <code class="codeph">schemaLocation</code> attribute set to <code class="codeph">xsdent-1.xsd</code>. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1919" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsdent-1.xsd</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1919 d63446e1707 ">
                                       <p>The XML schema document referenced by the <code class="codeph">schemaLocation</code> attribute in <code class="codeph">xsdent.xsd</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1932" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsdproperty.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1932 d63446e1707 ">
                                       <p>This demo shows how to configure the XML Schema processor to validate an XML document based on a complex type or element declaration.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1939" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">xsdsax.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1939 d63446e1707 ">
                                       <p>This demo shows how to validate an XML document received as a SAX stream.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1946" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">XSDLax.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1946 d63446e1707 ">
                                       <p>This demo is the same as <code class="codeph">XSDSetSchema.java</code> but sets the <code class="codeph">SCHEMA_LAX_VALIDATION</code> flag for LAX validation.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1959" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">XSDSample.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1959 d63446e1707 ">
                                       <p>This program is a sample driver that you can use to process XML instance documents.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d63446e1967" headers="d63446e1704 "><pre class="oac_no_warn" dir="ltr">XSDSetSchema.java</pre></td>
                                    <td align="left" valign="top" width="81%" headers="d63446e1967 d63446e1707 ">
                                       <p>This program is a sample driver to process XML instance documents by overriding the <code class="codeph">schemaLocation</code>. The program uses the XML Schema specification from <code class="codeph">cat.xsd</code> to validate the contents of <code class="codeph">catalogue.xml</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Documentation for how to compile and run the sample programs is located in the <code class="codeph">README</code> in the same directory. The basic steps are:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Change into the <code class="codeph">$ORACLE_HOME/xdk/demo/java/schema</code> directory (UNIX) or <code class="codeph">%ORACLE_HOME%\xdk\demo\java\schema</code> directory (Windows).</span></li>
                        <li class="stepexpand"><span>Run <code class="codeph">make</code> (UNIX) or <code class="codeph">Make.bat</code> (Windows) at the command line. </span></li>
                        <li class="stepexpand"><span>Add <code class="codeph">xmlparserv2.jar</code>, <code class="codeph">xschema.jar</code>, and the current directory to the <code class="codeph">CLASSPATH</code>. These JAR files are located in <code class="codeph">$ORACLE_HOME/lib</code> (UNIX) and <code class="codeph">%ORACLE_HOME%\lib</code> (Windows). For example, you can set the <code class="codeph">CLASSPATH</code> with the <code class="codeph">tcsh</code> shell on UNIX:</span><div><pre class="oac_no_warn" dir="ltr">setenv CLASSPATH
 "$CLASSPATH":$ORACLE_HOME/lib/xmlparserv2.jar:$ORACLE_HOME/lib/schema.jar:.</pre><div class="infoboxnote" id="GUID-1794B57C-BD9A-4322-B136-B07B950EC479__GUID-FF593407-5EB2-4FAC-93BA-E6344D752FF5">
                                 <p class="notep1">Note:</p>
                                 <p>The XML Schema processor requires JDK version 1.2 or later, and it is usable on any operating system with Java 1.2 support.</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the sample programs with the XML files that are included in the directory:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>These examples use <code class="codeph">report.xsd</code> to validate the contents of <code class="codeph">report.xml</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">java XSDSample report.xml
java XSDSetSchema report.xsd report.xml
</pre></li>
                                 <li>
                                    <p>This example validates an instance document in Lax mode:</p><pre class="oac_no_warn" dir="ltr">java XSDLax embeded_xsql.xsd embeded_xsql.xml
</pre></li>
                                 <li>
                                    <p>These examples use <code class="codeph">cat.xsd</code> to validate the contents of <code class="codeph">catalogue.xml</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">java XSDSample catalogue.xml
java XSDSetSchema cat.xsd catalogue.xml
</pre></li>
                                 <li>
                                    <p>These examples generates error messages:</p><pre class="oac_no_warn" dir="ltr">java XSDSample catalogue_e.xml
java XSDSample report_e.xml
</pre></li>
                                 <li>
                                    <p>This example uses the <code class="codeph">schemaLocation</code> attribute in <code class="codeph">xsdent.xsd</code> to redirect the XML schema to <code class="codeph">xsdent-1.xsd</code> for validation:
                                    </p><pre class="oac_no_warn" dir="ltr">java xsdent xsdent.xml xsdent.xsd
</pre></li>
                                 <li>
                                    <p>This example generates a SAX stream from <code class="codeph">report.xml</code> and validates it against the XML schema defined in <code class="codeph">report.xsd</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">java xsdsax report.xsd report.xml
</pre></li>
                                 <li>
                                    <p>This example creates a DOM representation of <code class="codeph">report.xml</code> and validates it against the XML schema defined in <code class="codeph">report.xsd</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">java xsddom report.xsd report.xml
</pre></li>
                                 <li>
                                    <p>These examples configure validation starting with an element declaration or complex type definition:</p><pre class="oac_no_warn" dir="ltr">java xsdproperty juicer1.xml juicer1.xsd http://www.juicers.org \
juicersType false &gt; juicersType.out
                                                                                       
java xsdproperty juicer2.xml juicer2.xsd http://www.juicers.org \ 
Juicers true &gt; juicers_e.out
</pre></li>
                                 <li>
                                    <p>This example converts a DTD (<code class="codeph">dtd2schema.dtd</code>) into an XML schema and uses it to validate an instance document (<code class="codeph">dtd2schema.xml</code>):
                                    </p><pre class="oac_no_warn" dir="ltr">java DTD2Schema dtd2schema.dtd dtd2schema.xml</pre></li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19273"></a><div class="props_rev_3"><a id="GUID-47B783B4-29F5-4AE7-AD61-96207DC548D0" name="GUID-47B783B4-29F5-4AE7-AD61-96207DC548D0"></a><h4 id="ADXDK-GUID-47B783B4-29F5-4AE7-AD61-96207DC548D0" class="sect4">Using the XML Schema Processor Command-Line Utility</h4>
                  <div>
                     <p>You can use the XML parser command-line utility (<code class="codeph">oraxml</code>) to validate instance documents against XML schemas and DTDs.
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-47B783B4-29F5-4AE7-AD61-96207DC548D0__GUID-C586B6FC-60E7-4CCF-AC3B-E18751B87AAF">
                           <p class="notep1">See Also:</p>
                           <p><a href="XML-parsing-for-Java.html#GUID-204C527C-DED2-4FBA-861E-3378370529ED" title="The oraxml utility, which is located in $ORACLE_HOME/bin (UNIX) or %ORACLE_HOME%\bin (Windows), is a command-line interface that parses XML documents. It checks for both well-formedness and validity.">Using the Java XML Parser Command-Line Utility (oraxml)</a> for information about how to run <code class="codeph">oraxml</code> . 
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19275"></a><a id="ADXDK19274"></a><div class="props_rev_3"><a id="GUID-223D5EB3-013F-4DA7-97A3-090847AA2C2C" name="GUID-223D5EB3-013F-4DA7-97A3-090847AA2C2C"></a><h5 id="ADXDK-GUID-223D5EB3-013F-4DA7-97A3-090847AA2C2C" class="sect5">Using oraxml to Validate Against a Schema</h5>
                     <div>
                        <p>An example shows how you can validate document <code class="codeph">report.xml</code> against the XML schema <code class="codeph">report.xsd</code> by invoking <code class="codeph">oraxml</code> on the command line.
                        </p>
                        <div class="example" id="GUID-223D5EB3-013F-4DA7-97A3-090847AA2C2C__CIHGACIE">
                           <p class="titleinexample">Example 17-5 Using oraxml to Validate Against a Schema</p>
                           <p>Invoke this command in directory <code class="codeph">$ORACLE_HOME/xdk/demo/java/schema</code>:
                           </p><pre class="pre codeblock"><code>oraxml -schema -enc report.xml
</code></pre><p>The expected output is:</p><pre class="pre codeblock"><code>The encoding of the input file: UTF-8
The input XML file is parsed without errors using Schema validation mode.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19277"></a><a id="ADXDK19276"></a><div class="props_rev_3"><a id="GUID-0B1E253D-80F0-4B66-A9B5-F86AAFF2BBEA" name="GUID-0B1E253D-80F0-4B66-A9B5-F86AAFF2BBEA"></a><h5 id="ADXDK-GUID-0B1E253D-80F0-4B66-A9B5-F86AAFF2BBEA" class="sect5">Using oraxml to Validate Against a DTD</h5>
                     <div>
                        <p>An example shows how you can validate document <code class="codeph">family.xml</code> against the DTD <code class="codeph">family.dtd</code> by invoking <code class="codeph">oraxml</code> on the command line.
                        </p>
                        <div class="example" id="GUID-0B1E253D-80F0-4B66-A9B5-F86AAFF2BBEA__CIHJDDBC">
                           <p class="titleinexample">Example 17-6 Using oraxml to Validate Against a DTD</p>
                           <p>Invoke this command in directory <code class="codeph">$ORACLE_HOME/xdk/demo/java/parser/common</code>:
                           </p><pre class="pre codeblock"><code>oraxml -dtd -enc family.xml
</code></pre><p>The expected output is:</p><pre class="pre codeblock"><code>The encoding of the input file: UTF-8
 The input XML file is parsed without errors using DTD validation mode.</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADXDK995"></a><a id="ADXDK19278"></a><div class="props_rev_3"><a id="GUID-61216843-3968-49AB-8323-5774A7ABA2D7" name="GUID-61216843-3968-49AB-8323-5774A7ABA2D7"></a><h3 id="ADXDK-GUID-61216843-3968-49AB-8323-5774A7ABA2D7" class="sect3">Validating XML with XML Schemas</h3>
               <div>
                  <p>Topics cover various ways to validate XML documents using XML schemas.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19279"></a><div class="props_rev_3"><a id="GUID-5B182AA2-84E3-416A-837A-6563B2F948D5" name="GUID-5B182AA2-84E3-416A-837A-6563B2F948D5"></a><h4 id="ADXDK-GUID-5B182AA2-84E3-416A-837A-6563B2F948D5" class="sect4">Validating Against Internally Referenced XML Schemas</h4>
                  <div>
                     <p><code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/XSDSample.java</code> shows how to validate against an implicit XML Schema. The validation mode is implicit because the XML schema is referenced in the instance document itself.
                     </p>
                     <div class="section">
                        <p>Follow the steps in this section to write programs that use the <code class="codeph">setValidationMode()</code> method of the <code class="codeph">oracle.xml.parser.v2.</code><code class="codeph">DOMParser</code> class:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a DOM parser to use for the validation of an instance document. this code fragment from <code class="codeph">XSDSample.java</code> shows how to create the <code class="codeph">DOMParser</code> object:</span><div><pre class="oac_no_warn" dir="ltr">public class XSDSample
{
   public static void main(String[] args) throws Exception
   {
      if (args.length != 1)
      {
         System.out.println("Usage: java XSDSample &lt;filename&gt;");
         return;
      }
      process (args[0]);
   }

   public static void process (String xmlURI) throws Exception
   {
      DOMParser dp  = new DOMParser();
      URL       url = createURL(xmlURI);
      ...
   }
...
}
</pre><p><code class="codeph">createURL()</code> is a helper method that constructs a URL from a file name passed to the program as an argument.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Set the validation mode for the validating DOM parser with the <code class="codeph">DOMParser.setValidationMode()</code> method. For example, <code class="codeph">XSDSample.java</code> shows how to specify XML schema validation:</span><div><pre class="oac_no_warn" dir="ltr">dp.setValidationMode(XMLParser.SCHEMA_VALIDATION);
dp.setPreserveWhitespace(true);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the output error stream with the <code class="codeph">DOMParser.setErrorStream()</code> method. For example, <code class="codeph">XSDSample.java</code> sets the error stream for the DOM parser object:</span><div><pre class="oac_no_warn" dir="ltr">dp.setErrorStream (System.out);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Validate the instance document with the <code class="codeph">DOMParser.parse()</code> method. You do not have to create an XML schema object explicitly because the schema is internally referenced by the instance document. For example, <code class="codeph">XSDSample.java</code> validates the instance document:</span><div><pre class="oac_no_warn" dir="ltr">try
{
  System.out.println("Parsing "+xmlURI);
  dp.parse(url);
  System.out.println("The input file &lt;"+xmlURI+"&gt; parsed without errors");
}
catch (XMLParseException pe)
{
  System.out.println("Parser Exception: " + pe.getMessage());
}
catch (Exception e)
{
  System.out.println("NonParserException: " + e.getMessage());
}</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19280"></a><div class="props_rev_3"><a id="GUID-EAAAB139-E5FE-434E-A310-2E13099B1FF8" name="GUID-EAAAB139-E5FE-434E-A310-2E13099B1FF8"></a><h4 id="ADXDK-GUID-EAAAB139-E5FE-434E-A310-2E13099B1FF8" class="sect4">Validating Against Externally Referenced XML Schemas</h4>
                  <div>
                     <p><code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/XSDSetSchema.java</code> shows how to validate an XML schema explicitly. The validation mode is explicit because you use the <code class="codeph">XSDBuilder</code> class to specify the schema to use for validation: the schema is not specified in the instance document as in implicit validation.
                     </p>
                     <div class="section">
                        <p></p>
                        <p>Follow the basic steps in this section to write Java programs that use the <code class="codeph">build()</code> method of the <code class="codeph">oracle.xml.parser.schema.XSDBuilder</code> class:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Build an XML schema object from the XML schema document with the <code class="codeph">XSDBuilder.build()</code> method. This code fragment from <code class="codeph">XSDSetSchema.java</code> shows how to create the object:</span><div><pre class="oac_no_warn" dir="ltr">public class XSDSetSchema
{
   public static void main(String[] args) throws Exception
   {
      if (args.length != 2)
      {
         System.out.println("Usage: java XSDSample &lt;schema_file&gt; &lt;xml_file&gt;");
         return;
      }
 
      XSDBuilder builder = new XSDBuilder();
      URL    url =  createURL(args[0]);
 
      // Build XML Schema Object
      XMLSchema schemadoc = (XMLSchema)builder.build(url);
      process(args[1], schemadoc);
   }
. . .
</pre><p>The <code class="codeph">createURL()</code> method is a helper method that constructs a URL from the schema document file name specified on the command line.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a DOM parser to use for validation of the instance document. This code from <code class="codeph">XSDSetSchema.java</code> shows how to pass the instance document file name and XML schema object to the <code class="codeph">process()</code> method:</span><div><pre class="oac_no_warn" dir="ltr">public static void process(String xmlURI, XMLSchema schemadoc)throws Exception{
   DOMParser dp  = new DOMParser();
   URL       url = createURL (xmlURI);
   . . .
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Specify the schema object to use for validation with the <code class="codeph">DOMParser.setXMLSchema()</code> method. This step is not necessary in implicit validation mode because the instance document already references the schema. For example, <code class="codeph">XSDSetSchema.java</code> specifies the schema:</span><div><pre class="oac_no_warn" dir="ltr">dp.setXMLSchema(schemadoc);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the validation mode for the DOM parser object with the <code class="codeph">DOMParser.setValidationMode()</code> method. For example, <code class="codeph">XSDSample.java</code> shows how to specify XML schema validation:</span><div><pre class="oac_no_warn" dir="ltr">dp.setValidationMode(XMLParser.SCHEMA_VALIDATION);
dp.setPreserveWhitespace(true);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the output error stream for the parser with the <code class="codeph">DOMParser.setErrorStream()</code> method. For example, <code class="codeph">XSDSetSchema.java</code> sets it:</span><div><pre class="oac_no_warn" dir="ltr">dp.setErrorStream (System.out);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Validate the instance document against the XML schema with the <code class="codeph">DOMParser.parse()</code> method. For example, <code class="codeph">XSDSetSchema.java</code> includes this code:</span><div><pre class="oac_no_warn" dir="ltr">try
{
   System.out.println("Parsing "+xmlURI);
   dp.parse (url);
   System.out.println("The input file &lt;"+xmlURI+"&gt; parsed without errors");
}
catch (XMLParseException pe)
{
   System.out.println("Parser Exception: " + pe.getMessage());
}
catch (Exception e)
{
   System.out.println ("NonParserException: " + e.getMessage());
}</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19281"></a><div class="props_rev_3"><a id="GUID-AFB85EDC-550E-41D9-8754-9F916E44301E" name="GUID-AFB85EDC-550E-41D9-8754-9F916E44301E"></a><h4 id="ADXDK-GUID-AFB85EDC-550E-41D9-8754-9F916E44301E" class="sect4">Validating a Subsection of an XML Document</h4>
                  <div>
                     <p>In LAX mode, you can validate parts of an XML document without validating all of it. LAX parsing validates elements in a document that are declared in an associated XML schema. The processor does not consider the instance document invalid if it contains no elements declared in the schema.</p>
                     <div class="section">
                        <p></p>
                        <p>By using LAX mode, you can define the schema only for the part of the XML to be validated. The <code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/XSDLax.java</code> program shows how to use LAX validation. The program follows the basic steps described in <a href="using-XML-schema-processor-for-Java.html#GUID-EAAAB139-E5FE-434E-A310-2E13099B1FF8" title="$ORACLE_HOME/xdk/demo/java/schema/XSDSetSchema.java shows how to validate an XML schema explicitly. The validation mode is explicit because you use the XSDBuilder class to specify the schema to use for validation: the schema is not specified in the instance document as in implicit validation.">Validating Against Externally Referenced XML Schemas</a>:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Build an XML schema object from the user-specified XML schema document.</span></li>
                        <li><span>Create a DOM parser to use for validation of the instance document.</span></li>
                        <li><span>Specify the XML schema to use for validation.</span></li>
                        <li><span>Set the validation mode for the DOM parser object.</span></li>
                        <li><span>Set the output error stream for the parser.</span></li>
                        <li><span>Validate the instance document against the XML schema by invoking <code class="codeph">DOMParser.parse()</code>.</span></li>
                     </ol>
                     <div class="section">
                        <p>To enable LAX validation, the program sets the validation mode in the parser to <code class="codeph">SCHEMA_LAX_VALIDATION</code> rather than to <code class="codeph">SCHEMA_VALIDATION</code>. This code fragment from <code class="codeph">XSDLax.java</code> shows this technique:
                        </p><pre class="oac_no_warn" dir="ltr">dp.setXMLSchema(schemadoc);
dp.setValidationMode(XMLParser.SCHEMA_LAX_VALIDATION);
dp.setPreserveWhitespace (true);
. . .
</pre><p>You can test LAX validation by running the sample program:</p><pre class="oac_no_warn" dir="ltr">java XSDLax embeded_xsql.xsd embeded_xsql.xml</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADXDK19282"></a><div class="props_rev_3"><a id="GUID-C1C29EFC-2A5F-4D5E-8A45-E8E1A47720A3" name="GUID-C1C29EFC-2A5F-4D5E-8A45-E8E1A47720A3"></a><h4 id="ADXDK-GUID-C1C29EFC-2A5F-4D5E-8A45-E8E1A47720A3" class="sect4">Validating XML from a SAX Stream</h4>
                  <div>
                     <p><code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/xsdsax.java</code> shows how to validate an XML document received as a SAX stream. You instantiate an <code class="codeph">XSDValidator</code> and register it with the SAX parser as the content handler.
                     </p>
                     <div class="section">
                        <p>Follow the steps in this section to write programs that validate XML from a SAX stream:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Build an XML schema object from the user-specified XML schema document by invoking the <code class="codeph">XSDBuilder.build()</code> method. This code fragment shows how to create the object:</span><div><pre class="oac_no_warn" dir="ltr">XSDBuilder builder = new XSDBuilder();
URL    url =  XMLUtil.createURL(args[0]);

// Build XML Schema Object
XMLSchema schemadoc = (XMLSchema)builder.build(url);      
process(args[1], schemadoc);
. . .
</pre><p><code class="codeph">createURL()</code> is a helper method that constructs a URL from the file name specified on the command line.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a SAX parser (<code class="codeph">SAXParser</code> object) to use for validation of the instance document. This code fragment from <code class="codeph">saxxsd.java</code> passes the handles to the XML document and schema document to the <code class="codeph">process()</code> method:</span><div><pre class="oac_no_warn" dir="ltr">process(args[1], schemadoc);...public static void process(String xmlURI, XMLSchema schemadoc)
throws Exception 
{
    SAXParser dp  = new SAXParser();
...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Configure the SAX parser. This code fragment sets the validation mode for the SAX parser object with the <code class="codeph">XSDBuilder.setValidationMode()</code> method:</span><div><pre class="oac_no_warn" dir="ltr">dp.setPreserveWhitespace (true);
dp.setValidationMode(XMLParser.NONVALIDATING);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create and configure a validator (<code class="codeph">XSDValidator</code> object). This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">XMLError err;... err = new XMLError();
...
XSDValidator validator = new XSDValidator();
...
validator.setError(err);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Specify the XML schema to use for validation by invoking the <code class="codeph">XSDBuilder.setXMLProperty()</code> method. The first argument is the name of the property, which is <code class="codeph">fixedSchema</code>, and the second is the reference to the XML schema object. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">validator.setXMLProperty(XSDNode.FIXED_SCHEMA, schemadoc);
...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Register the validator as the SAX content handler for the parser. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">dp.setContentHandler(validator);
...
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Validate the instance document against the XML schema by invoking the <code class="codeph">SAXParser.parse()</code> method. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">dp.parse (url);</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19283"></a><div class="props_rev_3"><a id="GUID-38EF516D-CB44-4857-9EEF-17ECE082068E" name="GUID-38EF516D-CB44-4857-9EEF-17ECE082068E"></a><h4 id="ADXDK-GUID-38EF516D-CB44-4857-9EEF-17ECE082068E" class="sect4">Validating XML from a DOM</h4>
                  <div>
                     <p><code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/xsddom.java</code> shows how to validate an instance document by get a DOM representation of the document and using an <code class="codeph">XSDValidator</code> object to validate it.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">xsddom.java</code> program follows these steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Build an XML schema object from the user-specified XML schema document by invoking the <code class="codeph">XSDBuilder.build()</code> method. This code fragment shows how to create the object:</span><div><pre class="oac_no_warn" dir="ltr">XSDBuilder builder = new XSDBuilder();
URL    url =  XMLUtil.createURL(args[0]);

XMLSchema schemadoc = (XMLSchema)builder.build(url);      
process(args[1], schemadoc);
</pre><p><code class="codeph">createURL()</code> is a helper method that constructs a URL from the file name specified on the command line.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a DOM parser (<code class="codeph">DOMParser</code> object) to use for validation of the instance document. This code fragment from <code class="codeph">domxsd.java</code> passes the handles to the XML document and schema document to the <code class="codeph">process()</code> method:</span><div><pre class="oac_no_warn" dir="ltr">process(args[1], schemadoc);...public static void process(String xmlURI, XMLSchema schemadoc)
throws Exception 
{
    DOMParser dp  = new DOMParser();
    . . .
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Configure the DOM parser. This code fragment sets the validation mode for the parser object with the <code class="codeph">DOMParser.setValidationMode()</code> method:</span><div><pre class="oac_no_warn" dir="ltr">dp.setPreserveWhitespace (true);
dp.setValidationMode(XMLParser.NONVALIDATING);
dp.setErrorStream (System.out);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Parse the instance document. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">dp.parse (url);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Get the DOM representation of the input document. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">XMLDocument doc = dp.getDocument();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create and configure a validator (<code class="codeph">XSDValidator</code> object). This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">XMLError err;... err = new XMLError();
...
XSDValidator validator = new XSDValidator();
...
validator.setError(err);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Specify the schema object to use for validation by invoking the <code class="codeph">XSDBuilder.setXMLProperty()</code> method. The first argument is the name of the property, which in this example is <code class="codeph">fixedSchema</code>, and the second is the reference to the schema object. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">validator.setXMLProperty(XSDNode.FIXED_SCHEMA, schemadoc);
. . .
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Get the root element (<code class="codeph">XMLElement</code>) of the DOM tree and validate. This code fragment shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">XMLElement root = (XMLElement)doc.getDocumentElement();
XMLElement copy = (XMLElement)root.validateContent(validator, true);
copy.print(System.out);</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19284"></a><div class="props_rev_3"><a id="GUID-49EE75AF-E9AE-48A7-A331-7707A12A947C" name="GUID-49EE75AF-E9AE-48A7-A331-7707A12A947C"></a><h4 id="ADXDK-GUID-49EE75AF-E9AE-48A7-A331-7707A12A947C" class="sect4">Validating XML from Designed Types and Elements</h4>
                  <div>
                     <p><code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/xsdproperty.java</code> shows how to configure the XML Schema processor to validate an XML document based on a complex type or element declaration.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">xsdproperty.java</code> program follows these steps:
                        </p>
                        <ol>
                           <li>
                              <p>Create <code class="codeph">String</code> objects for the instance document name, XML schema name, root node namespace, root node local name, and specification of element or complex type ("true" means the root node is an element declaration). This code fragment shows this technique:
                              </p><pre class="oac_no_warn" dir="ltr">String xmlfile = args[0];
String xsdfile =  args[1];
...
String ns = args[2]; //namespace for the root node
String nm = args[3]; //root node's local name
String el = args[4]; //true if root node is element declaration, 
                     // otherwise, the root node is a complex type
</pre></li>
                           <li>
                              <p>Create an XSD builder and use it to create the schema object. This code fragment shows this technique:</p><pre class="oac_no_warn" dir="ltr">XSDBuilder builder = new XSDBuilder();
URL    url =  XMLUtil.createURL(xsdfile);       
XMLSchema  schema;
...
schema = (XMLSchema) builder.build(url);
</pre></li>
                           <li>
                              <p>Get the node. Invoke different methods depending on whether the node is an element declaration or a complex type:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the node is an element declaration, pass the local name and namespace to the <code class="codeph">getElement()</code> method of the schema object. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>If the node is an element declaration, pass the namespace, local name, and root complex type to the <code class="codeph">getType()</code> method of the schema object.
                                    </p>
                                 </li>
                              </ul>
                              <p><code class="codeph">xsdproperty.java</code> uses this control structure:
                              </p><pre class="oac_no_warn" dir="ltr">QxName qname = new QxName(ns, nm);
...
XSDNode nd;
...
if (el.equals("true"))
{
  nd = schema.getElement(ns, nm);
  /* process ... */
}
else
{
  nd = schema.getType(ns, nm, XSDNode.TYPE);
  /* process ... */
}
</pre></li>
                           <li>
                              <p>After getting the node, create a new parser and set the schema to the parser to enable schema validation. This code fragment shows this technique:</p><pre class="oac_no_warn" dir="ltr">DOMParser dp  = new DOMParser();
URL       url = XMLUtil.createURL (xmlURI);
</pre></li>
                           <li>
                              <p>Set properties on the parser and then parse the URL. Invoke the <code class="codeph">schemaValidatorProperty()</code> method:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>Set the root element or type property on the parser to a fully qualified name.</p>
                                    <p>For a top-level element declaration, set the property name to <code class="codeph">XSDNode.ROOT_ELEMENT</code> and the value to a <code class="codeph">QName</code>, as showd by the <code class="codeph">process1()</code> method. 
                                    </p>
                                    <p>For a top-level type definition, set the property name to <code class="codeph">XSDNode.ROOT_TYPE</code> and the value to a <code class="codeph">QName</code>, as showd by the <code class="codeph">process2()</code> method.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the root node property on the parser to an element or complex type node.</p>
                                    <p>For an element node, set the property name to <code class="codeph">XSDNode.ROOT_NODE</code> and the value to an <code class="codeph">XSDElement</code> node, as showd by the <code class="codeph">process3()</code> method.
                                    </p>
                                    <p>For a type node, set the property name to <code class="codeph">XSDNode.ROOT_NODE</code> and the value to an <code class="codeph">XSDComplexType</code> node, as showd by the <code class="codeph">process3()</code> method.
                                    </p>
                                 </li>
                              </ol>
                              <p>This code fragment shows the sequence of method invocation:</p><pre class="oac_no_warn" dir="ltr">if (el.equals("true"))
{
   nd = schema.getElement(ns, nm);
   process1(xmlfile, schema, qname);
   process3(xmlfile, schema, nd);
}
else
{
   nd = schema.getType(ns, nm, XSDNode.TYPE);
   process2(xmlfile, schema, qname);
   process3(xmlfile, schema, nd);
}
</pre><p>The processing methods are implemented:</p><pre class="oac_no_warn" dir="ltr">  static void process1(String xmlURI, XMLSchema schema, QxName qname)
      throws Exception
  {
    /* create parser... */
    dp.setXMLSchema(schema);
    dp.setSchemaValidatorProperty(XSDNode.ROOT_ELEMENT, qname);
    dp.setPreserveWhitespace (true);
    dp.setErrorStream (System.out);
    dp.parse (url);
    ...
  }
                                                                                             
  static void process2(String xmlURI, XMLSchema schema, QxName qname)
      throws Exception
  {
      /* create parser... */                                                                                        
    dp.setXMLSchema(schema);
    dp.setSchemaValidatorProperty(XSDNode.ROOT_TYPE, qname);
    dp.setPreserveWhitespace (true);
    dp.setErrorStream (System.out);
    dp.parse (url);
    ...
  }
                                                                                             
  static void process3(String xmlURI, XMLSchema schema, XSDNode node)
      throws Exception
  {
      /* create parser... */
                                                                                              
    dp.setXMLSchema(schema);
    dp.setSchemaValidatorProperty(XSDNode.ROOT_NODE, node);
    dp.setPreserveWhitespace (true);
    dp.setErrorStream (System.out);
    dp.parse (url);
    ...
  }</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADXDK996"></a><a id="ADXDK19286"></a><div class="props_rev_3"><a id="GUID-654F9D12-EC32-464B-9465-06ECB9213829" name="GUID-654F9D12-EC32-464B-9465-06ECB9213829"></a><h3 id="ADXDK-GUID-654F9D12-EC32-464B-9465-06ECB9213829" class="sect3">Tips and Techniques for Programming with XML Schemas</h3>
               <div>
                  <p>Topics include overriding schema location and converting a DTD to an XML schema.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19287"></a><div class="props_rev_3"><a id="GUID-FB1780C6-0CD0-4393-AEDD-0294701BEE9D" name="GUID-FB1780C6-0CD0-4393-AEDD-0294701BEE9D"></a><h4 id="ADXDK-GUID-FB1780C6-0CD0-4393-AEDD-0294701BEE9D" class="sect4">Overriding the Schema Location with an Entity Resolver</h4>
                  <div>
                     <p>When <code class="codeph">XSDBuilder</code> builds a schema, it might need to include or import other schemas that are specified as URLs in a <code class="codeph">schemaLocation</code> attribute. In some situations, you might want to override the schema locations specified in <code class="codeph">&lt;import&gt;</code> and supply the builder with the required schema documents.
                     </p>
                     <div class="section">
                        <p>The <code class="codeph">xsdent.java</code> demo described in <a href="using-XML-schema-processor-for-Java.html#GUID-1794B57C-BD9A-4322-B136-B07B950EC479__CIHIEEDI" title="This table describes the XML files and programs that you can use to test the XML Schema processor. File and Description are the Columns.">Table 17-3</a> shows a case where a schema specified as <code class="codeph">schemaLocation</code> needs to be imported. The document element in <code class="codeph">xsdent.xml</code> file contains this attribute:
                        </p><pre class="oac_no_warn" dir="ltr">xsi:schemaLocation =  "http://www.example.com/BookCatalogue
                       xsdent.xsd"&gt;
</pre><p>The <code class="codeph">xsdent.xsd</code> document contains these elements:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
               targetNamespace="http://www.example.com/BookCatalogue"
               xmlns:catd = "http://www.example.com/Digest"
               xmlns:cat  = "http://www.example.com/BookCatalogue"
               elementFormDefault="qualified"&gt;
&lt;import namespace = "http://www.example.com/Digest"
        schemaLocation = "xsdent-1.xsd" /&gt;
</pre><p>As an example of wanting to override schema locations specified in <code class="codeph">&lt;import&gt;</code> and supplying the builder with the required schema documents, suppose that you have downloaded the schemas documents from external web sites and stored them in a database. In such a situation, you can set an entity resolver in the <code class="codeph">XSDBuilder</code>. <code class="codeph">XSDBuilder</code> passes the schema location to the resolver, which returns an <code class="codeph">InputStream</code>, <code class="codeph">Reader</code>, or <code class="codeph">URL</code> as an <code class="codeph">InputSource</code>. The builder can read the schema documents from the <code class="codeph">InputSource</code>.
                        </p>
                        <p>The <code class="codeph">xsdent.java</code> program shows how you can override the schema location with an entity resolver. You must implement the <code class="codeph">EntityResolver</code> interface, instantiate the entity resolver, and set it in the XML schema builder. In the demo code, <code class="codeph">sampleEntityResolver1</code> returns <code class="codeph">InputSource</code> as an <code class="codeph">InputStream</code> whereas <code class="codeph">sampleEntityResolver2</code> returns <code class="codeph">InputSource</code> as a <code class="codeph">URL</code>.
                        </p>
                        <p>Follow these basic steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a new XML schema builder:</span><div><pre class="oac_no_warn" dir="ltr">XSDBuilder builder = new XSDBuilder(); 
   </pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the builder to your entity resolver. An entity resolver is a class that implements the <code class="codeph">EntityResolver</code> interface. The purpose of the resolver is to enable the XML reader to intercept any external entities before including them. This code fragment creates an entity resolver and sets it in the builder:</span><div><pre class="oac_no_warn" dir="ltr">builder.setEntityResolver(new sampleEntityResolver1());
</pre><p>The <code class="codeph">sampleEntityResolver1</code> class implements the <code class="codeph">resolveEntity()</code> method. You can use this method to redirect external system identifiers to local URIs. The source code is:
                              </p><pre class="oac_no_warn" dir="ltr">class sampleEntityResolver1 implements EntityResolver
{
   public InputSource resolveEntity (String targetNS,  String systemId)
   throws SAXException, IOException
   {
      // perform any validation check if needed based on targetNS &amp; systemId 
      InputSource mySource = null;
      URL u = XMLUtil.createURL(systemId); 
      // Create input source with InputStream as input
      mySource = new InputSource(u.openStream());
      mySource.setSystemId(systemId);
      return mySource;
   }
}
</pre><p>The <code class="codeph">sampleEntityResolver1</code> class initializes the <code class="codeph">InputSource</code> with a stream.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Build the XML schema object. This code shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">schemadoc = builder.build(url);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Validate the instance document against the XML schema. The program executes this statement:</span><div><pre class="oac_no_warn" dir="ltr">process(xmlfile, schemadoc);
</pre><p>The <code class="codeph">process()</code> method creates a DOM parser, configures it, and invokes the <code class="codeph">parse()</code> method. The method is implemented:
                              </p><pre class="oac_no_warn" dir="ltr">public static void process(String xmlURI, Object schemadoc)
    throws Exception
{
  DOMParser dp  = new DOMParser();
  URL       url = XMLUtil.createURL (xmlURI);
 
  dp.setXMLSchema(schemadoc);
  dp.setValidationMode(XMLParser.SCHEMA_VALIDATION);
  dp.setPreserveWhitespace (true);
  dp.setErrorStream (System.out);
  try {
     dp.parse (url);
     ...
}</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADXDK19288"></a><div class="props_rev_3"><a id="GUID-BC0B8A74-265E-4EBF-B012-923DA614F744" name="GUID-BC0B8A74-265E-4EBF-B012-923DA614F744"></a><h4 id="ADXDK-GUID-BC0B8A74-265E-4EBF-B012-923DA614F744" class="sect4">Converting DTDs to XML Schemas</h4>
                  <div>
                     <p>Because of the power and flexibility of the XML Schema language, you may want to convert your existing DTDs to XML schema documents. You can use XDK to perform this transformation.</p>
                     <div class="section">
                        <p>The <code class="codeph">$ORACLE_HOME/xdk/demo/java/schema/DTD2Schema.java</code> program shows how to convert a DTD. You can test the program:
                        </p><pre class="oac_no_warn" dir="ltr">java DTD2Schema dtd2schema.dtd dtd2schema.xml
</pre><p>Follow these basic steps to convert a DTD to an XML schema document:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Parse the DTD with the <code class="codeph">DOMParser.parseDTD()</code> method. This code fragment from <code class="codeph">DTD2Schema.java</code> shows how to create the DTD object:</span><div><pre class="oac_no_warn" dir="ltr">XSDBuilder builder = new XSDBuilder(); 
URL dtdURL = createURL(args[0]);
DTD dtd = getDTD(dtdURL, "abc");
   </pre><p>The <code class="codeph">getDTD()</code> method is implemented:
                              </p><pre class="oac_no_warn" dir="ltr">private static DTD getDTD(URL dtdURL, String rootName)
   throws Exception
{
   DOMParser parser = new DOMParser();
   DTD dtd;
   parser.setValidationMode(true);
   parser.setErrorStream(System.out);
   parser.showWarnings(true);
   parser.parseDTD(dtdURL, rootName);
   dtd = (DTD)parser.getDoctype();
   return dtd;
}
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Convert the DTD to an XML schema DOM tree with the <code class="codeph">DTD.convertDTD2Sdhema()</code> method. This code fragment from <code class="codeph">DTD2Schema.java</code> shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">XMLDocument dtddoc = dtd.convertDTD2Schema();
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Write the XML schema DOM tree to an output stream with the <code class="codeph">XMLDocument.print()</code> method. This code fragment from <code class="codeph">DTD2Schema.java</code> shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">FileOutputStream fos = new FileOutputStream("dtd2schema.xsd.out");
dtddoc.print(fos);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create an XML schema object from the schema DOM tree with the <code class="codeph">XSDBuilder.build()</code> method. This code fragment from <code class="codeph">DTD2Schema.java</code> shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">XMLSchema schemadoc = (XMLSchema)builder.build(dtddoc, null);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Validate an instance document against the XML schema with the <code class="codeph">DOMParser.parse()</code> method. This code fragment from <code class="codeph">DTD2Schema.java</code> shows this technique:</span><div><pre class="oac_no_warn" dir="ltr">validate(args[1], schemadoc);
</pre><p>The <code class="codeph">validate()</code> method is implemented:
                              </p><pre class="oac_no_warn" dir="ltr">DOMParser dp  = new DOMParser();
URL       url = createURL (xmlURI); 
dp.setXMLSchema(schemadoc);
dp.setValidationMode(XMLParser.SCHEMA_VALIDATION);
dp.setPreserveWhitespace (true);
dp.setErrorStream (System.out);
try
{
   System.out.println("Parsing "+xmlURI);
   dp.parse (url);
   System.out.println("The input file &lt;"+xmlURI+"&gt; parsed without errors");
}
...</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html id='09641.managing-oracle-data-guard-physical-standby-databases.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter discusses the various ways that physical and snapshot standby databases need to be managed.">
      <meta name="description" content="This chapter discusses the various ways that physical and snapshot standby databases need to be managed.">
      <title>Managing Physical and Snapshot Standby Databases</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="This chapter discusses the various ways that physical and snapshot standby databases need to be managed.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96244-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-oracle-data-guard-role-transitions.html" title="Previous" type="text/html">
      <link rel="next" href="managing-oracle-data-guard-logical-standby-databases.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="SBYDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-data-guard-role-transitions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-oracle-data-guard-logical-standby-databases.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">  Concepts and Administration </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Physical and Snapshot Standby Databases</li>
            </ol>
            <a id="GUID-B140C38B-DE01-4252-8422-7154018DDFEC" name="GUID-B140C38B-DE01-4252-8422-7154018DDFEC"></a><a id="SBYDB00700"></a>
            
            <h2 id="SBYDB-GUID-B140C38B-DE01-4252-8422-7154018DDFEC" class="sect2"><span class="enumeration_chapter">10 </span> Managing Physical and Snapshot Standby Databases
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discusses the various ways that physical and snapshot standby databases need to be managed.</p>
               <p>See the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D7026A24-78EF-4C0D-84E5-41D767516565" title="This section describes how to start up and shut down a physical standby database.">Starting Up and Shutting Down a Physical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" title="A physical standby database can be opened for read-only access and used to offload queries from a primary database.">Opening a Physical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-62007456-DD41-431D-B0E7-56C99FEB2277" title="Most structural changes made to a primary database are automatically propagated through redo data to a physical standby database, but there are some changes that require manual intervention.">Primary Database Changes That Require Manual Intervention at a Physical Standby</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" title="Oracle Data Guard allows recovery on a physical standby database to continue after the primary database has been opened with the RESETLOGS option.">Recovering Through the OPEN RESETLOGS Statement</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486" title="This table summarizes common primary database management actions and where to find information related to these actions.">Monitoring Primary, Physical Standby, and Snapshot Standby Databases</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF" title="Restore points that are created on a primary database are automatically replicated to the standby database. The restore points created on the standby database are called replicated restore points. Irrespective of whether a restore point on the primary database is a guaranteed restore point or a normal restore point, the corresponding replicated restore point is always a normal restore point.">Replicating Restore Points from Primary to Standby</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D" title="Oracle white papers are available that describe how to optimize Redo Apply and media recovery performance.">Tuning Redo Apply</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A" title="In an Active Data Guard environment, SQL Tuning Advisor can tune a standby workload on a primary database.">Tuning Databases in an Active Data Guard Environment with SQL Tuning Advisor</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D" title="The Oracle Diagnostic Pack can be used with an Oracle Active Data Guard standby database that is open in read-only mode.">Using Oracle Diagnostic Pack to Tune Oracle Active Data Guard Standbys</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" title="A snapshot standby database is a fully updatable standby database. It receives and archives redo data from a primary database, but does not apply it.">Managing a Snapshot Standby Database</a></p>
                  </li>
               </ul>
               <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DGBKR001" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> to learn how the Oracle Data Guard broker simplifies the management of physical and snapshot standby databases.
               </p>
            </div><a id="SBYDB00705"></a><div class="props_rev_3"><a id="GUID-D7026A24-78EF-4C0D-84E5-41D767516565" name="GUID-D7026A24-78EF-4C0D-84E5-41D767516565"></a><h3 id="SBYDB-GUID-D7026A24-78EF-4C0D-84E5-41D767516565" class="sect3"><span class="enumeration_section">10.1 </span>Starting Up and Shutting Down a Physical Standby Database
               </h3>
               <div>
                  <p>This section describes how to start up and shut down a physical standby database.</p>
                  <p></p>
               </div><a id="SBYDB4776"></a><div class="props_rev_3"><a id="GUID-76930886-6460-45AE-86CA-84DCB41E5BE5" name="GUID-76930886-6460-45AE-86CA-84DCB41E5BE5"></a><h4 id="SBYDB-GUID-76930886-6460-45AE-86CA-84DCB41E5BE5" class="sect4"><span class="enumeration_section">10.1.1 </span>Starting Up a Physical Standby Database
                  </h4>
                  <div>
                     <p>Use the SQL*Plus <code class="codeph">STARTUP</code> command to start a physical standby database.
                     </p>
                     <div class="section">
                        <p> The SQL*Plus <code class="codeph">STARTUP</code> command starts, mounts, and opens a physical standby database in read-only mode when it is invoked without any arguments.
                        </p>
                        <p>After it has been mounted or opened, a physical standby database can receive redo data from the primary database.</p>
                        <p>See <a href="oracle-data-guard-redo-apply-services.html#GUID-2B839172-947E-48A4-9FFD-33CC6907809F" title="When performing Redo Apply, a physical standby database can use the real-time apply feature to apply redo directly from the standby redo log files as they are being written by the remote file server (RFS) process.">Applying Redo Data to Physical Standby Databases</a> for information about Redo Apply and <a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" title="A physical standby database can be opened for read-only access and used to offload queries from a primary database.">Opening a Physical Standby Database </a> for information about opening a physical standby database in read-only mode.
                        </p>
                        <div class="infoboxnote" id="GUID-76930886-6460-45AE-86CA-84DCB41E5BE5__GUID-E95C72E7-083B-4FA4-8FE5-E6C437931071">
                           <p class="notep1">Note:</p>
                           <p>When Redo Apply is started on a physical standby database that has not yet received redo data from the primary database, an <code class="codeph">ORA-01112</code> message may be returned. This indicates that Redo Apply is unable to determine the starting sequence number for media recovery. If this occurs, manually retrieve an archived redo log file from the primary database and register it on the standby database, or wait for redo transport to begin before starting Redo Apply.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4777"></a><div class="props_rev_3"><a id="GUID-B51873F4-F50C-4757-9DF9-D43635BFAD7F" name="GUID-B51873F4-F50C-4757-9DF9-D43635BFAD7F"></a><h4 id="SBYDB-GUID-B51873F4-F50C-4757-9DF9-D43635BFAD7F" class="sect4"><span class="enumeration_section">10.1.2 </span>Shutting Down a Physical Standby Database
                  </h4>
                  <div>
                     <p>Use the SQL*Plus <code class="codeph">SHUTDOWN</code> command to stop Redo Apply and shut down a physical standby database.
                     </p>
                     <div class="section">
                        <p>Control is not returned to the session that initiates a database shutdown until shutdown is complete. </p>
                        <p>If the primary database is up and running, defer the standby destination on the primary database and perform a log switch before shutting down the physical standby database. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB00706"></a><div class="props_rev_3"><a id="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" name="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4"></a><h3 id="SBYDB-GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" class="sect3"><span class="enumeration_section">10.2 </span>Opening a Physical Standby Database
               </h3>
               <div>
                  <p>A physical standby database can be opened for read-only access and used to offload queries from a primary database.</p>
                  <div class="infoboxnote" id="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4__GUID-E5C2C62C-70A8-4E75-A692-8E904A25EB63">
                     <p class="notep1">Note:</p>
                     <p>A physical standby database that is opened in read-only mode is subject to the same restrictions as any other Oracle database opened in read-only mode. For more information, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11154" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a>.
                     </p>
                  </div>
                  <p>If a license for the Oracle Active Data Guard<a id="d21041e550" class="indexterm-anchor"></a> option has been purchased, Redo Apply can be active while the physical standby database is open, thus allowing queries to return results that are identical to what would be returned from the primary database. This capability is known as the real-time query<a id="d21041e555" class="indexterm-anchor"></a> feature.<a id="d21041e558" class="indexterm-anchor"></a> See <a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" title="The COMPATIBLE database initialization parameter must be set to 11.0 or higher to use the real-time query feature of the Oracle Active Data Guard option.">Real-time query</a> for more details.
                  </p>
                  <p>If a license for the Oracle Active Data Guard option has not been purchased, a physical standby database cannot be open while Redo Apply is active, so the following rules must be observed when opening a physical standby database instance or starting Redo Apply:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Redo Apply must be stopped before any physical standby database instance is opened.</p>
                     </li>
                     <li>
                        <p>If one or more physical standby instances are open, those instances must be stopped or restarted in a mounted state before starting Redo Apply.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4__GUID-9E51DA30-348A-4DF3-ACB6-03447C2541ED">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DBLIC-GUID-AB56CEE3-955E-4E56-8B44-6075E889C283" target="_blank"><span class="italic">Oracle Database Licensing Information</span></a> for more information about Oracle Active Data Guard
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="SBYDB5039"></a><a id="SBYDB00707"></a><div class="props_rev_3"><a id="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" name="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677"></a><h4 id="SBYDB-GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" class="sect4"><span class="enumeration_section">10.2.1 </span>Real-time Query
                  </h4>
                  <div>
                     <p>The <code class="codeph">COMPATIBLE</code> database initialization parameter must be set to 11.0 or higher to use the real-time query feature of the Oracle Active Data Guard option.
                     </p>
                     <div class="section">
                        <p>A physical standby database instance cannot be opened if Redo Apply is active on a mounted instance of that database. Use the following SQL statements to stop Redo Apply, open a standby instance read-only, and restart Redo Apply:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;
SQL&gt; ALTER DATABASE OPEN;
SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE DISCONNECT;</pre><div class="infoboxnote" id="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677__GUID-D6192E36-A702-488C-9501-E869F2DEEA6E">
                           <p class="notep1">Note:</p>
                           <p>If Redo Apply is active on an open instance, additional instances can be opened without having to stop Redo Apply.</p>
                        </div>
                        <p>Redo Apply cannot be started on a mounted physical standby instance if any instance of that database is open. The instance must be opened before starting Redo Apply on it.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677__GUID-D2019BDB-8414-471D-88BB-506786F06C6D">Example: Querying V$DATABASE to Check the Standby's Open Mode</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example shows how the value of the <code class="codeph">V$DATABASE.OPEN_MODE</code> column changes when a physical standby is open in real-time query mode.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start up and open a physical standby instance, and perform the following SQL query to show that the database is open in read-only mode:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT open_mode FROM V$DATABASE;
 
OPEN_MODE
--------------------
READ ONLY
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Issue the following SQL statement to start Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE DISCONNECT;
 
Database altered.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Now that the standby is in real-time query mode (the standby is open in read-only mode and Redo Apply is active), the <code class="codeph">V$DATABASE.OPEN_MODE</code> column changes to indicate the following:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT open_mode FROM V$DATABASE;
 
OPEN_MODE
--------------------
READ ONLY WITH APPLY</pre></div>
                        </li>
                     </ol>
                  </div><a id="SBYDB4778"></a><div class="props_rev_3"><a id="GUID-C225DCBC-E9FB-4E86-9D19-A5D20C3A8AA5" name="GUID-C225DCBC-E9FB-4E86-9D19-A5D20C3A8AA5"></a><h5 id="SBYDB-GUID-C225DCBC-E9FB-4E86-9D19-A5D20C3A8AA5" class="sect5"><span class="enumeration_section">10.2.1.1 </span>Monitoring Apply Lag in a Real-time Query Environment
                     </h5>
                     <div>
                        <p>If you are using real-time query to offload queries from a primary database to a physical standby database, you can monitor the apply lag to ensure that it is within acceptable limits.</p>
                        <div class="section">
                           <p>The current apply lag is the difference, in elapsed time, between when the last applied change became visible on the standby and when that same change was first visible on the primary. This metric is computed to the nearest second.</p>
                           <p>To obtain the apply lag, query the <code class="codeph">V$DATAGUARD_STATS</code> view. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT name, value, datum_time, time_computed FROM V$DATAGUARD_STATS -
&gt; WHERE name like 'apply lag';
     
    NAME         VALUE            DATUM_TIME              TIME_COMPUTED
    ---------    -------------    -------------------     -------------------
    apply lag    +00 00:00:00     05/27/2009 08:54:16     05/27/2009 08:54:17
</pre><p>The <code class="codeph">apply</code> <code class="codeph">lag</code> metric is computed using data that is periodically received from the primary database. The <code class="codeph">DATUM_TIME</code> column contains a timestamp of when this data was last received by the standby database. The <code class="codeph">TIME_COMPUTED</code> column contains a timestamp taken when the <code class="codeph">apply</code> <code class="codeph">lag</code> metric was calculated. The difference between the values in these columns should be less than 30 seconds. If the difference is larger than this, the <code class="codeph">apply</code> <code class="codeph">lag</code> metric may not be accurate.
                           </p>
                           <p>To obtain a histogram that shows the history of apply lag values since the standby instance was last started, query the <code class="codeph">V$STANDBY_EVENT_HISTOGRAM</code> view. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM V$STANDBY_EVENT_HISTOGRAM WHERE NAME = 'apply lag' - 
&gt; AND COUNT &gt; 0;

NAME             TIME       UNIT         COUNT        LAST_TIME_UPDATED
---------     ---------   --------    -----------    ------------------------
apply lag         0        seconds        79681          06/18/2009 10:05:00
apply lag         1        seconds         1006          06/18/2009 10:03:56
apply lag         2        seconds           96          06/18/2009 09:51:06
apply lag         3        seconds            4          06/18/2009 04:12:32
apply lag         4        seconds            1          06/17/2009 11:43:51
apply lag         5        seconds            1          06/17/2009 11:43:52

6 rows selected
</pre><p>To evaluate the apply lag over a time period, take a snapshot of <code class="codeph">V$STANDBY_EVENT_HISTOGRAM</code> at the beginning of the time period and compare that snapshot with one taken at the end of the time period.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4779"></a><div class="props_rev_3"><a id="GUID-622B6596-54F7-4736-8A8B-0C5E308AC3F5" name="GUID-622B6596-54F7-4736-8A8B-0C5E308AC3F5"></a><h5 id="SBYDB-GUID-622B6596-54F7-4736-8A8B-0C5E308AC3F5" class="sect5"><span class="enumeration_section">10.2.1.2 </span>Configuring Apply Lag Tolerance in a Real-time Query Environment
                     </h5>
                     <div>
                        <p>The <code class="codeph">STANDBY_MAX_DATA_DELAY</code> session parameter can be used to specify a session-specific apply lag tolerance, measured in seconds, for queries issued by non-administrative users to a physical standby database that is in real-time query mode.
                        </p>
                        <p>This capability allows queries to be safely offloaded from the primary database to a physical standby database, because it is possible to detect if the standby database has become unacceptably stale.</p>
                        <p>If <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to the default value of <code class="codeph">NONE</code>, than queries issued to a physical standby database are executed regardless of the apply lag on that database.
                        </p>
                        <p>If <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to a nonzero value, then queries issued to a physical standby database are executed only if the apply lag is less than or equal to <code class="codeph">STANDBY_MAX_DATA_DELAY</code>. Otherwise, an <code class="codeph">ORA-3172</code> error is returned to alert the client that the apply lag is too large.
                        </p>
                        <p>If <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to 0, a query issued to a physical standby database is guaranteed to return the exact same result as if the query were issued on the primary database, unless the standby database is lagging behind the primary database, in which case an <code class="codeph">ORA-3172</code> error is returned.
                        </p>
                        <p>Use the <code class="codeph">ALTER SESSION</code> SQL statement to set <code class="codeph">STANDBY_MAX_DATA_DELAY</code>. For example:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SESSION SET STANDBY_MAX_DATA_DELAY=2</pre></div>
                  </div><a id="SBYDB4780"></a><div class="props_rev_3"><a id="GUID-194B1448-84FB-4357-A6AD-72A77701F918" name="GUID-194B1448-84FB-4357-A6AD-72A77701F918"></a><h5 id="SBYDB-GUID-194B1448-84FB-4357-A6AD-72A77701F918" class="sect5"><span class="enumeration_section">10.2.1.3 </span>Forcing Redo Apply Synchronization in a Real-time Query Environment
                     </h5>
                     <div>
                        <p>To  ensure that all redo data received from the primary database has been applied to a physical standby database, you can use a SQL <code class="codeph">ALTER SESSION</code> statement.
                        </p>
                        <div class="section">
                           <p>Issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SESSION SYNC WITH PRIMARY;
</pre><p>This statement blocks until all redo data received by the standby database at the time that this command is issued has been applied to the physical standby database. An <code class="codeph">ORA-3173</code> error is returned immediately, and synchronization does not occur, if the redo transport status at the standby database is not <code class="codeph">SYNCHRONIZED</code> or if Redo Apply is not active.
                           </p>
                           <p>To ensure that Redo Apply synchronization occurs in specific cases, use the <code class="codeph">SYS_CONTEXT('USERENV','DATABASE_ROLE')</code> function to create a standby-only trigger (enabled on the primary but that only takes certain actions if it is running on a standby). For example, you could create the following trigger that would execute the <code class="codeph">ALTER SESSION SYNC WITH PRIMARY</code> statement for a specific user connection at logon:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TRIGGER adg_logon_sync_trigger
 AFTER LOGON ON user.schema
  begin
    if (SYS_CONTEXT('USERENV', 'DATABASE_ROLE')  IN ('PHYSICAL STANDBY')) then
      execute immediate 'alter session sync with primary';
    end if;
  end;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4781"></a><div class="props_rev_3"><a id="GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE" name="GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE"></a><h5 id="SBYDB-GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE" class="sect5"><span class="enumeration_section">10.2.1.4 </span>Real-time Query Restrictions
                     </h5>
                     <div>
                        <p>This list discusses restrictions related to real-time query mode.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The apply lag control and Redo Apply synchronization mechanisms described above require that the client be connected and issuing queries to a physical standby database that is in real-time query mode.</p>
                           </li>
                           <li>
                              <p>The following additional restrictions apply if <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to 0 or if the <code class="codeph">ALTER SESSION SYNC WITH PRIMARY</code> SQL statement is used:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The standby database must receive redo data via the SYNC transport.</p>
                                 </li>
                                 <li>
                                    <p>The redo transport status at the standby database must be SYNCHRONIZED and the primary database must be running in either maximum protection mode or maximum availability mode.</p>
                                 </li>
                                 <li>
                                    <p>Real-time apply must be enabled.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Oracle Active Data Guard achieves high performance of real-time queries in an Oracle RAC environment through the use of cache fusion. This allows the Oracle Data Guard apply instance and queries to work out of cache and not be slowed down by disk I/O limitations. A consequence of this is that an unexpected failure of the apply instance leaves buffers in inconsistent states across all the open Oracle RAC instances. To ensure data consistency and integrity, Oracle Data Guard closes all the other open instances in the Oracle RAC configuration, and brings them to a mounted state. You must manually reopen the instances - at which time the data is automatically made consistent, followed by restarting redo apply on one of the instances. In an Oracle Data Guard broker configuration, the instances are automatically reopened and redo apply is automatically restarted on one of the instances.</p>
                              <div class="infoboxnotealso" id="GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE__GUID-D6506452-9378-4275-B7D3-F3F93BD6D220">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="../dgbkr/managing-oracle-data-guard-broker-configuration-members.html#DGBKR260" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> for more information about how the broker handles apply instance failures
                                       </p>
                                    </li>
                                    <li>
                                       <p>The My Oracle Support note 1357597.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for additional information about apply instance failures in an Oracle Active Data Guard Oracle RAC standby
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </div><a id="SBYDB5255"></a><a id="SBYDB5256"></a><a id="SBYDB5257"></a><a id="SBYDB4782"></a><div class="props_rev_3"><a id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932" name="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932"></a><h5 id="SBYDB-GUID-67B644A3-161B-4A83-A0B2-923BF51AD932" class="sect5"><span class="enumeration_section">10.2.1.5 </span>Automatic Block Media Recovery
                     </h5>
                     <div>
                        <p>If corrupt data blocks are encountered when a database is accessed, they can be automatically replaced with uncorrupted copies of those blocks.</p>
                        <p>This requires the following conditions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The physical standby database must be operating in real-time query mode, which requires an Oracle Active Data Guard license.</p>
                           </li>
                           <li>
                              <p>The physical standby database must be running real-time apply.</p>
                           </li>
                        </ul>
                        <p>Automatic block media recovery works in two directions depending on whether the corrupted blocks are encountered on the primary or on the standby. </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932__GUID-7F4A0316-2277-4EAC-943A-960BB5FF84E2">Corrupted Blocks On the Primary</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>If corrupt data blocks are encountered at a primary database, then the primary automatically searches for good copies of those blocks on a standby and, if they are found, has them shipped back to the primary. </p>
                           <p>The primary requires a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> to the standby only (a physical standby, a cascading physical standby, or a far sync instance). The primary does not require a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> to any terminal destinations; it is able to automatically ascertain their service names.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932__GUID-6EEE6907-6330-46D4-98F4-08A75BD88516">Corrupted Blocks On a Standby</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>If corrupt data blocks are encountered at a standby, then the standby automatically initiates communication with the primary and requests uncorrupted copies of those blocks. For the primary to be able to ship the uncorrupted blocks to the standby, the following database initialization parameters must be configured on the standby. This is true even if the primary does not directly service the standby (for example, in cascading configurations).</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">LOG_ARCHIVE_CONFIG</code> parameter is configured with a <code class="codeph">DG_CONFIG</code> list and a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter is configured for the primary database.
                                 </p>
                                 <p><span class="bold">or</span></p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FAL_SERVER</code> parameter is configured and its value contains an Oracle Net service name for the primary database.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932__GUID-CE4B5D92-2CEF-499F-B348-FEE58E79C148">Additional Automatic Block Media Repair Considerations</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Automatic repair is supported with any Oracle Data Guard protection mode. However, the effectiveness of repairing a corrupt block at the primary using the non-corrupt version of the block from the standby depends on how closely the standby apply is synchronized with the redo generated by the primary.</p>
                              </li>
                              <li>
                                 <p>When an automatic block repair has been performed, a message is written to the database alert log.</p>
                              </li>
                              <li>
                                 <p>If automatic block repair is not possible, an <code class="codeph">ORA-1578</code> error is returned.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4783"></a><div class="props_rev_3"><a id="GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3" name="GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3"></a><h5 id="SBYDB-GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3" class="sect5"><span class="enumeration_section">10.2.1.6 </span>Manual Block Media Recovery
                     </h5>
                     <div>
                        <p>The RMAN <code class="codeph">RECOVER BLOCK</code> command is used to manually repair a corrupted data block.
                        </p>
                        <p> This command searches several locations for an uncorrupted copy of the data block. By default, one of the locations is any available physical standby database operating in real-time query mode. The <code class="codeph">EXCLUDE STANDBY</code> option of the RMAN <code class="codeph">RECOVER BLOCK</code> command can be used to exclude physical standby databases as a source for replacement blocks.
                        </p>
                        <div class="infoboxnotealso" id="GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3__GUID-090667F6-3ABD-4DAE-8931-CF344DD71EDB">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF140" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about the RMAN <code class="codeph">RECOVER BLOCK</code> command
                           </p>
                        </div>
                     </div>
                  </div><a id="SBYDB5463"></a><a id="SBYDB5130"></a><div class="props_rev_3"><a id="GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225" name="GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225"></a><h5 id="SBYDB-GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225" class="sect5"><span class="enumeration_section">10.2.1.7 </span>Tuning Queries on a Physical Standby Database
                     </h5>
                     <div>
                        <p>Queries on a physical standby database can be tuned for optimal performance.</p>
                        <p>For details about tuning queries, see the <span class="italic">Active Data Guard Best Practices </span>white paper available on the Oracle Maximum Availability Architecture (MAA) home page at:
                        </p>
                        <p><a href="http://www.oracle.com/goto/maa" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225__GUID-53657E7D-DAAE-4E23-BC98-BC89657BE300">Force Full Database Caching Mode</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The use of force full database caching mode can potentially improve performance because queries are executed faster. </p>
                           <p>The enabling and disabling of force full database caching mode<a id="d21041e1549" class="indexterm-anchor"></a><a id="d21041e1553" class="indexterm-anchor"></a> is not recorded in redo, so the status of in-memory caching is not necessarily the same on all members of a Data Guard configuration. 
                           </p>
                           <p>For more information about the Force Full Database In-Memory Caching feature, including guidelines on how and when to enable and disable it, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=TGDBA95384" target="_blank"><span class="italic">Oracle Database Performance Tuning Guide</span></a>. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB5446"></a><div class="props_rev_3"><a id="GUID-40A7D7C1-72B8-4397-B61B-446028102E2D" name="GUID-40A7D7C1-72B8-4397-B61B-446028102E2D"></a><h5 id="SBYDB-GUID-40A7D7C1-72B8-4397-B61B-446028102E2D" class="sect5"><span class="enumeration_section">10.2.1.8 </span>Adding Temp Files to a Physical Standby
                     </h5>
                     <div>
                        <p>If you are using a standby to offload queries from the primary database, then the standby must be configured with the minimum of one temp tablespace with at least one temporary data file.</p>
                        <div class="section">
                           <p>If the nature of the workload requires more temp table space than is automatically created when the standby is first created, then you may need to manually add additional space.</p>
                           <p>To add temporary files to the physical standby database, perform the following tasks:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Identify the tablespaces that contain temporary files. Do this by entering the following command on the standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT TABLESPACE_NAME FROM DBA_TABLESPACES
2&gt; WHERE CONTENTS = 'TEMPORARY';
 
TABLESPACE_NAME
--------------------------------
TEMP1
TEMP2
</pre></div>
                           </li>
                           <li class="stepexpand"><span>For each tablespace identified in the previous query, add a new temporary file to the standby database. The following example adds a new temporary file called <code class="codeph">TEMP1</code> with size and reuse characteristics that match the primary database temporary files:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE TEMP1 ADD TEMPFILE
2&gt; '/arch1/boston/temp01.dbf'
3&gt; SIZE 40M REUSE;
</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B1C66720-3EA6-45A3-986E-6E510381EC79" name="GUID-B1C66720-3EA6-45A3-986E-6E510381EC79"></a><h4 id="SBYDB-GUID-B1C66720-3EA6-45A3-986E-6E510381EC79" class="sect4"><span class="enumeration_section">10.2.2 </span>Using SQL and PL/SQL on Active Data Guard Standbys
                  </h4>
                  <p>Starting with Oracle Database Release 19c, you can perform SQL and PL/SQL operations in Active Data Guard standby databases.</p>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628" title="You can run DML operations on Active Data Guard standby databases. This enables you to run read-mostly applications, which occasionally execute DMLs, on the standby database.">Performing DML Operations on Active Data Guard Standby Databases</a></li>
                           <li><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9" title="PL/SQL blocks that you run on Active Data Guard standby databases can be redirected to and run on the primary database, if they do not contain bind variables.">Running Top-level PL/SQL Operations on Active Data Guard Standby Databases</a></li>
                           <li><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C" title="PL/SQL objects that are run on standby instances can be recompiled, if they are invalid.">Automatic Recompliation of Modified PL/SQL Objects</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628" name="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628"></a><h5 id="SBYDB-GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628" class="sect5"><span class="enumeration_section">10.2.2.1 </span>Performing DML Operations on Active Data Guard Standby Databases
                     </h5>
                     <div>
                        <p>You can run DML operations on Active Data Guard standby databases. This enables you to run read-mostly applications, which occasionally execute DMLs, on the standby database.</p>
                        <div class="section">
                           <p></p>
                           <p>DML operations on a standby can be transparently redirected to and run on the primary database. This includes DML statements that are part of PL/SQL blocks. The Active Data Guard session waits until the corresponding changes are shipped to and applied to the Active Data Guard standby. Read consistency is maintained during the DML operation and the standby database on which the DML is run can view its uncommitted changes. However, all the other standby database instances can view these changes only after the transaction is committed.</p>
                           <div class="infoboxnote" id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__GUID-D1283418-DE83-43DC-982E-6CF146559B32">
                              <p class="notep1">Note:</p>
                              <p>Avoid running too may DML operations on Active Data Guard standby databases. Because the operations are actually performed on the primary, too many DMLs may impact the performance of the primary.</p>
                           </div>
                           <p>Automatic redirection of DML operations to the primary can be configured at the system level or the session level. The session level setting overrides the system level setting. </p>
                           <p>To configure automatic redirection of DML operations for all standby sessions in an Active Data Guard environment:</p>
                           <ul style="list-style-type: disc;" id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__UL_A3D_RPG_QFB">
                              <li>Set the <code class="codeph">ADG_REDIRECT_DML</code> initialization parameter to <code class="codeph">TRUE</code>.
                              </li>
                           </ul>
                           <p>To configure automatic redirection of DML operations for the current session, use the following command:</p>
                        </div>
                        <!-- class="section" -->
                        <ul id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__STEPS-UNORDERED_LLN_HLG_QFB">
                           <li><span><code class="codeph">ALTER SESSION ENABLE ADG_REDIRECT_DML;</code></span></li>
                        </ul>
                        <div class="example" id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__GUID-BB2CBC75-84E5-4D7F-A7BF-00BB61BC4CA8">
                           <p class="titleinexample">Example 10-1 Performing DML Operations on a Physical Standby Database </p>
                           <p>The physical standby database in an Active Data Guard setup contains a table named <code class="codeph">employees</code>. You can insert rows into this table by running DML on a physical standby database in the Active Data Guard environment.
                           </p>
                           <p>On the standby database, enable DML redirection for the current session:</p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION ENABLE ADG_REDIRECT_DML;</code></pre><p>Add a row to the <code class="codeph">employees</code> table using the following command:
                           </p><pre class="pre codeblock"><code>SQL&gt; INSERT INTO employees VALUES (.......);</code></pre><p>At this point, the changed data is visible only to the standby database on which the command was run. After the insert operation is committed on the primary database, the changes are shipped back and applied to all the standby databases.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9" name="GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9"></a><h5 id="SBYDB-GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9" class="sect5"><span class="enumeration_section">10.2.2.2 </span>Running Top-level PL/SQL Operations on Active Data Guard Standby Databases
                     </h5>
                     <div>
                        <p>PL/SQL blocks that you run on Active Data Guard standby databases can be redirected to and run on the primary database, if they do not contain bind variables. </p>
                        <div class="section">
                           <p></p>
                           <p>To redirect PL/SQL operations that are run on a standby to the primary, configure automatic redirection using the following command on the standby database:</p>
                        </div>
                        <!-- class="section" -->
                        <ul id="GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9__STEPS-UNORDERED_DK5_23G_QFB">
                           <li><span><code class="codeph">ALTER SESSION ENABLE ADG_REDIRECT_PLSQL;</code></span></li>
                        </ul>
                        <div class="section">
                           <p>You can configure automatic redirection for PL/SQL operations only at the session level.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C" name="GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C"></a><h5 id="SBYDB-GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C" class="sect5"><span class="enumeration_section">10.2.2.3 </span>Automatic Recompliation of Modified PL/SQL Objects
                     </h5>
                     <div>
                        <p>PL/SQL objects that are run on standby instances can be recompiled, if they are invalid.</p>
                        <p></p>
                        <p>PL/SQL objects become invalid when their dependent objects are modified or dropped. Starting with Oracle Database Release 19c, invalidated PL/SQL objects run on a standby database can be automatically recomplied by setting the <code class="codeph">ADG_REDIRECT_DML</code> initialization parameter to <code class="codeph">TRUE</code>. The DDL corresponding to these PL/SQL objects is redirected to and executed on the primary database. The standby session waits until the operation is completed.
                        </p>
                        <div class="example" id="GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C__GUID-00B02E09-1008-4DE2-8C06-CEC3E8E4B831">
                           <p class="titleinexample">Example 10-2 Automatically Recompiling Modified PL/SQL Objects</p>
                           <p>On the primary database in an Active DataGuard environment, a procedure named <code class="codeph">insert_empl</code> is created. This procedure is used to update the <code class="codeph">employees</code> table.
                           </p><pre class="pre codeblock"><code>CREATE OR REPLACE PROCEDURE update_sal (emp_id IN NUMBER,sal IN NUMBER)
AS BEGIN
   UPDATE employees SET salary=sal WHERE employee_id=emp_id);
END;</code></pre><p>The structure of the <code class="codeph">employees</code> table is subsequently modified using an <code class="codeph">ALTER TABLE</code> command. This invalidates the <code class="codeph">update_sal</code> procedure. 
                           </p>
                           <p>On a standby database in the Active DataGuard environment, you want to use the <code class="codeph">update_sal</code> procedure to update the salary of an employee. Run the following commands on the physical standby:
                           </p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION ENABLE ADG_REDIRECT_DML;
SQL&gt; exec update_sal(105,6000);</code></pre><p>The user running these commands has been granted permission to execute the <code class="codeph">update_sal</code> procedure.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A182664E-59F7-4C96-953F-406D0FB6573D" name="GUID-A182664E-59F7-4C96-953F-406D0FB6573D"></a><h4 id="SBYDB-GUID-A182664E-59F7-4C96-953F-406D0FB6573D" class="sect4"><span class="enumeration_section">10.2.3 </span>Using Temporary Tables on Active Data Guard Instances
                  </h4>
                  <div>
                     <p> You can create both global temporary tables and private temporary tables on an Active Data Guard instance.</p>
                     <p>A temporary table holds data that exists only for the duration of a transaction or session. Data in a temporary table is private to the session. Each session can only see and modify its own data.</p>
                     <div class="infoboxnotealso" id="GUID-A182664E-59F7-4C96-953F-406D0FB6573D__GUID-BE3A3838-AF27-4C53-8B3E-6EBA5EE9F382">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT-GUID-23B23DCF-7482-4585-9C63-AC073C5DE224" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for descriptions of global temporary tables, private temporary tables, and the differences between them
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="SBYDB5426"></a><a id="SBYDB5163"></a><div class="props_rev_3"><a id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8" name="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8"></a><h5 id="SBYDB-GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8" class="sect5"><span class="enumeration_section">10.2.3.1 </span>Global Temporary Tables on Active Data Guard Instances
                     </h5>
                     <div>
                        <p>DML and DDL operations are allowed on temporary tables on Oracle Active Data Guard instances.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-58E7CC53-3BAE-45BC-B72B-2B4D119DB96B">DML Operations</p>
                           <p>When a global temporary table is changed by a DML operation, the change itself does not generate redo because it is only a temporary table. But the undo generated for the change does in turn generate redo. Redo generation on a read-only database (such as an Active Data Guard standby) is not allowed.  However, DML operations on global temporary tables are allowed on Oracle Active Data Guard standbys because the temporary undo feature allows the undo for changes to a global temporary table to be stored in the temporary tablespace as opposed to the undo tablespace. And undo stored in the temporary tablespace does not generate redo.</p>
                           <p>This feature benefits Oracle Data Guard in the following ways:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Read-mostly reporting applications that use global temporary tables for storing temporary data can be offloaded to an Oracle Active Data Guard instance.</p>
                              </li>
                              <li>
                                 <p>When temporary undo is enabled on the primary database, undo for changes to a global temporary table are not logged in the redo and thus, the primary database generates less redo. Therefore, the amount of redo that Oracle Data Guard must ship to the standby is also reduced, thereby reducing network bandwidth consumption and storage consumption.</p>
                              </li>
                           </ul>
                           <p>To enable temporary undo on the primary database, use the <code class="codeph">TEMP_UNDO_ENABLED</code> initialization parameter. On an Oracle Active Data Guard standby, temporary undo is always enabled by default so the <code class="codeph">TEMP_UNDO_ENABLED</code> parameter has no effect.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-D2F33C5A-30B5-4B21-9836-A0203FC2A238">Restrictions</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The temporary undo feature requires that the database initialization parameter <code class="codeph">COMPATIBLE</code> be set to 12.0.0 or higher.
                                 </p>
                              </li>
                              <li>
                                 <p>The temporary undo feature on Oracle Active Data Guard instances does not support temporary  <code class="codeph">BLOB</code>s or temporary <code class="codeph">CLOB</code>s.
                                 </p>
                              </li>
                              <li>
                                 <p>Distributed transactions on an Oracle Active Data Guard instance are not permitted if they involve changes to local objects. For example, you cannot commit a transaction that modifies a global temporary table on the Oracle Active Data Guard instance and also updates a remote table on another database using a database link. You must commit or roll back any outstanding DML operations to global temporary tables on the Active Data Guard instance before issuing a remote DML operation, or vice versa. This also includes implicit writes to global temporary tables made by operations such as <code class="codeph">EXPLAIN PLAN</code> statements. 
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-C350D6EB-2ABB-4570-B776-39050B90966A">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN13740" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about temporary undo
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10326" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">TEMP_UNDO_ENABLED</code> initialization parameter
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-9FE9963A-4B8C-4ECA-9B85-11F6BA1BB3E4">DDL Operations</p>
                           <p>Global temporary tables can be created on, and dropped from, Active Data Guard standby databases. The DDL for these operations is transparently redirected to the primary database. The Active Data Guard session then waits until the corresponding changes are shipped and applied to the Active Data Guard standby. The following is an example of creating a global temporary table:</p><pre class="pre codeblock"><code>SQL&gt; CREATE GLOBAL TEMPORARY TABLE tab2(c1 number, c2 varchar(10)) ON COMMIT PRESERVE ROWS;  

Table created. 
SQL&gt;</code></pre><div class="infoboxnote" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-1B188DD7-8D61-40CE-871C-C02E58A7442E">
                              <p class="notep1">Note:</p>
                              <p>For the DDL redirection to succeed, managed standby recovery at the Active Data Guard standby database must be started with the real-time apply option and the Active Data Guard standby database must be in sync with the primary database.</p>
                           </div>
                           <div class="infoboxnote" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-00B568A5-6D36-4154-813B-761B500997A7">
                              <p class="notep1">Note:</p>
                              <p>Data definition language (DDL) operations on global temporary tables (for example, <code class="codeph">CREATE</code> and <code class="codeph">DROP</code>) can still be issued from the primary database. DDL changes are visible on the standby when it catches up with the primary database.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39" name="GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39"></a><h5 id="SBYDB-GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39" class="sect5"><span class="enumeration_section">10.2.3.2 </span>Private Temporary Tables on Active Data Guard Instances
                     </h5>
                     <div>
                        <p>You can create private temporary tables on Oracle Active Data Guard instances even though they are read-only.</p>
                        <p>The reason private temporary tables can be created in read-only databases is that their metadata is stored in memory, rather than on disk. The lifetime of a private temporary table is only during the session which created it and it gets dropped automatically when the session ends. This functionality allows reporting applications to run on Active Data Guard standby databases.</p>
                        <div class="infoboxnote" id="GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39__GUID-DB6EECEA-F094-4A91-9F0B-122F7477CFD7">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li><a href="../admin/managing-tables.html#ADMIN-GUID-9B373086-0760-4B18-9688-BACFF07EC74B" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for information about creating private temporary tables
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA" name="GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA"></a><h4 id="SBYDB-GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA" class="sect4"><span class="enumeration_section">10.2.4 </span>IM Column Store in an Active Data Guard Environment
                  </h4>
                  <div>
                     <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), the Oracle Database In-Memory column store (IM column store) is supported on a standby database in an Active Data Guard (ADG) environment.
                     </p>
                     <p>A reporting workload executing on an Active Data Guard standby database can use the IM column store. Using the IM column store improves the execution performance of the workload because it can take full advantage of accessing data in a compressed columnar format, in memory. Additionally, it is possible to populate a completely different set of data in the IM column store on the primary and standby databases, effectively doubling the size of the IM column store available to the application. To enable IM column store support with multi-instance redo apply, set the initialization parameter <code class="codeph">enable_imc_with_mira</code> to TRUE.
                     </p>
                     <p>Note the following restrictions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>In-Memory Expressions are captured based only on the queries executed on the primary database. </p>
                        </li>
                        <li>
                           <p>In-Memory Information Lifecycle Management (ILM) polices based on access criteria are triggered based only on access recorded on the primary database.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA__GUID-B2C9D607-EEEC-40A1-8461-1B4C7377BC16">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>In-Memory FastStart is not supported on a standby database in an ADG environment.</p>
                           </li>
                           <li>
                              <p>In-Memory Join-Groups are not supported on a standby&nbsp;database in an ADG environment.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=INMEM-GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222" target="_blank"><span><cite>Oracle Database In-Memory Guide</cite></span></a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN-GUID-124E6841-C552-4DA8-96D4-83CE16B6B6AB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A" name="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A"></a><h4 id="SBYDB-GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A" class="sect4"><span class="enumeration_section">10.2.5 </span>In-Memory External Tables in an Active Data Guard Environment
                  </h4>
                  <div>
                     <p>Oracle Active Data Guard supports In-Memory external tables.</p>
                     <p></p>
                     <p>In-Memory external tables, both on a primary and standby database, are loaded in parallel. Queries that are run in an Active Data Guard environment use the In-Memory external table segments with parallel query. Using <code class="codeph">INMEMORY</code> or <code class="codeph">NO INMEMORY</code> results in the In-Memory external table segment on an active standby database being released.
                     </p>
                     <div class="infoboxnote" id="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A__GUID-35086871-B4F6-4831-924D-29C80EF5577E">
                        <p class="notep1">Note:</p>
                        <p> Using the <code class="codeph">FOR SERVICE</code> subclause of the <code class="codeph">INMEMORY...DISTRIBUTE</code> clause when populating an <code class="codeph">INMEMORY</code> object in the IM column store is not supported for the primary database, standby database, or both.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A__GUID-2434019F-8802-4495-BB82-21AAF3BC9321">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=INMEM-GUID-37E2E218-33A2-490E-891D-B627906DE16B#GUID-37E2E218-33A2-490E-891D-B627906DE16B" target="_blank"><span><cite>Oracle Database In-Memory Guide</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="SBYDB5427"></a><a id="SBYDB5166"></a><a id="SBYDB5164"></a><div class="props_rev_3"><a id="GUID-DFDC929C-7446-413B-A25B-7F11284D900F" name="GUID-DFDC929C-7446-413B-A25B-7F11284D900F"></a><h4 id="SBYDB-GUID-DFDC929C-7446-413B-A25B-7F11284D900F" class="sect4"><span class="enumeration_section">10.2.6 </span>Using Sequences in Oracle Active Data Guard
                  </h4>
                  <div>
                     <p>In an Oracle Active Data Guard environment, sequences created by the primary database with the default <code class="codeph">CACHE</code> and <code class="codeph">NOORDER</code> options can be accessed from standby databases as well.
                     </p>
                     <div class="section">
                        <p> When a standby database accesses such a sequence for the first time, it requests that the primary database allocate a range of sequence numbers. The range is based on the cache size and other sequence properties specified when the sequence was created. Then the primary database allocates those sequence numbers to the requesting standby database by adjusting the corresponding sequence entry in the data dictionary. When the standby has used all the numbers in the range, it requests another range of numbers.</p>
                        <p>The primary database ensures that each range request from a standby database gets a range of sequence numbers that do not overlap with the ones previously allocated for both the primary and standby databases. This generates a unique stream of sequence numbers across the entire Oracle Data Guard configuration.</p>
                        <p>Because the standby's requests for a range of sequences involve a round-trip to the primary, be sure to specify a large enough value for the <code class="codeph">CACHE</code> keyword when you create a sequence to be used on an Oracle Active Data Guard standby. Otherwise, performance could suffer.
                        </p>
                        <p>Also, be sure the terminal standby has a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter defined that points back to the primary.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DFDC929C-7446-413B-A25B-7F11284D900F__GUID-0950CBDF-EA36-442A-B27E-DA085114D354">Example: Assigning a Range of Sequence Values In a Multi-standby Configuration</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example shows how a range of sequence values can be assigned to a database when it references <code class="codeph">NEXTVAL</code> on the sequence either for the first time or after it uses up all of the previously assigned sequence values. In this example, there are two standby databases. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>On the primary database, issue the following SQL statements to create a global temporary table named <code class="codeph">gtt</code>, and a sequence named <code class="codeph">g</code> with a cache size of 10:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE GLOBAL TEMPORARY TABLE gtt (a int);
 
Table created. 
 
SQL&gt; CREATE SEQUENCE g CACHE 10;
 
Sequence created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>On the first standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
 
SQL&gt; SELECT * FROM gtt;
 
         A
----------
         1
         2
</pre><p>Because the sequence cache size was set to 10 (in Step 1) and because this is the first time the sequence was accessed, the results of the <code class="codeph">SELECT</code> statement show that the first standby database is assigned sequence numbers 1 to 10.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the primary database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT g.NEXTVAL FROM dual;
 
   NEXTVAL
----------
        11
 
SQL&gt; SELECT g.NEXTVAL FROM dual;
 
   NEXTVAL
----------
        12
</pre><p>The results of the <code class="codeph">SELECT</code> statements show that the primary database is assigned the next range of sequence values, 11-20.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the second standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
  
SQL&gt; SELECT * FROM gtt;
 
         A
----------
        21
        22
</pre><p>The results of the <code class="codeph">SELECT</code> statement show that the second standby is assigned the next range of sequence values, 21-30.
                              </p>
                              <div class="infoboxnote" id="GUID-DFDC929C-7446-413B-A25B-7F11284D900F__GUID-F133EE4A-28A9-4E00-9A1C-293F1396C0EA">
                                 <p class="notep1">Note:</p>Sequences created with the <code class="codeph">ORDER</code> or <code class="codeph">NOCACHE</code> options cannot be accessed on an Oracle Active Data Guard standby.
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div><a id="SBYDB5169"></a><a id="SBYDB5428"></a><a id="SBYDB5168"></a><div class="props_rev_3"><a id="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1" name="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1"></a><h5 id="SBYDB-GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1" class="sect5"><span class="enumeration_section">10.2.6.1 </span>Session Sequences
                     </h5>
                     <div>
                        <p>A session sequence is a special type of sequence that is specifically designed to be used with global temporary tables that have session visibility. </p>
                        <div class="section">
                           <p>Unlike the existing regular sequences (referred to as "global" sequences for the sake of comparison), a session sequence returns a unique range of sequence numbers only within a session, but not across sessions. Another difference is that session sequences are not persistent. If a session goes away, so does the state of the session sequences that were accessed during the session.</p>
                           <p>Session sequences support most of the sequence properties that are specified when the sequence is defined. However, the <code class="codeph">CACHE</code>/<code class="codeph">NOCACHE</code> and <code class="codeph">ORDER</code>/<code class="codeph">NOORDER</code> options are not relevant to session sequences and are ignored.
                           </p>
                           <p>Session sequences must be created by a read/write database but can be accessed on any read/write or read-only databases (either a regular database temporarily open read-only or a standby database). </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1__GUID-95A4E004-A2E4-4452-A5A2-93184EC5D6D6">Creating and Altering Session Sequences</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>To create a session sequence, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE SEQUENCE  SESSION;
</pre><p>To alter an existing session sequence to be a regular ("global") sequence, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SEQUENCE  GLOBAL;
</pre><p>To alter a regular sequence to be a session sequence, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SEQUENCE  SESSION;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1__GUID-DC57A256-8345-470C-A435-06792CE0C803">Example: Using Session Sequences</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This example shows how session sequence values are unique to each database session.</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>On the primary database, issue the following SQL statements to create a global temporary table named <code class="codeph">gtt</code> and a session sequence named <code class="codeph">s</code>:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE GLOBAL TEMPORARY TABLE gtt (a int);
 
Table created.
 
SQL&gt; CREATE SEQUENCE s SESSION;
 
Sequence created.
</pre></div>
                           </li>
                           <li class="stepexpand"><span>On the standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
 
SQL&gt; SELECT * FROM gtt;
 
         A
----------
         1
         2
</pre></div>
                           </li>
                           <li class="stepexpand"><span>From another session of the same standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
 
SQL&gt; SELECT * FROM gtt;
 
         A
----------
         1
         2
</pre><p>The results of the <code class="codeph">SELECT</code> statement show that the sequence values assigned are the same as those assigned for the first session in the previous step. This is because sequence values are unique to each database session.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB5040"></a><a id="SBYDB4784"></a><div class="props_rev_3"><a id="GUID-62007456-DD41-431D-B0E7-56C99FEB2277" name="GUID-62007456-DD41-431D-B0E7-56C99FEB2277"></a><h3 id="SBYDB-GUID-62007456-DD41-431D-B0E7-56C99FEB2277" class="sect3"><span class="enumeration_section">10.3 </span>Primary Database Changes That Require Manual Intervention at a Physical Standby
               </h3>
               <div>
                  <p>Most structural changes made to a primary database are automatically propagated through redo data to a physical standby database, but there are some changes that require manual intervention.</p>
                  <div class="section">
                     <p>The following table lists primary database structural and configuration changes that require manual intervention at a physical standby database.</p>
                     <div class="tblformalwide" id="GUID-62007456-DD41-431D-B0E7-56C99FEB2277__G1041883">
                        <p class="titleintable">Table 10-1 Primary Database Changes That Require Manual Intervention at a Physical Standby</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Primary Database Changes That Require Manual Intervention at a Physical Standby" summary="When you change the primary database, it often requires that you take a similar action on the standby database. This 2 column table lists the administrative tasks that require you perform some action on the standby database." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d21041e3051">Primary Database Change</th>
                                 <th align="left" valign="bottom" width="53%" id="d21041e3054">Action Required on Physical Standby Database</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3059" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540" title="The STANDBY_FILE_MANAGEMENT database initialization parameter controls whether the addition of a data file to the primary database is automatically propagated to a physical standby databases.">Adding a Data File or Creating a Tablespace</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3059 d21041e3054 ">
                                    <p>No action is required if the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database initialization parameter is set to <code class="codeph">AUTO</code>. If this parameter is set to <code class="codeph">MANUAL</code>, the new data file must be copied to the physical standby database.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3083" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D" title="When a tablespace is dropped or a data file is deleted from a primary database, the corresponding data file(s) must be deleted from the physical standby database.">Dropping Tablespaces and Deleting Data Files</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3083 d21041e3054 ">
                                    <p>Delete data file from primary and physical standby database after the redo data containing the <code class="codeph">DROP</code> or <code class="codeph">DELETE</code> command is applied to the physical standby.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3101" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0" title="You can use the Oracle transportable tablespaces feature to move a subset of an Oracle database and plug it in to another Oracle database, essentially moving tablespaces between the databases.">Using Transportable Tablespaces with a Physical Standby Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3101 d21041e3054 ">
                                    <p>Move tablespace between the primary and the physical standby database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3113" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0" title="When you rename one or more data files in the primary database, the change is not propagated to the standby database. It must be done manually.">Renaming a Data File in the Primary Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3113 d21041e3054 ">
                                    <p>Rename the data file on the physical standby database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3125" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-64E46731-490D-4228-AC87-A07CDE3C75FE" title="The configuration of the redo log and standby redo log on a physical standby database should be reevaluated and adjusted as necessary after adding or dropping a log file group on the primary database.">Add or Drop a Redo Log File Group</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3125 d21041e3054 ">
                                    <p>Evaluate the configuration of the redo log and standby redo log on the physical standby database and adjust as necessary.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3137" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7" title="When you perform a DML or DDL operation using the NOLOGGING or UNRECOVERABLE clause, blocks on the standby may be marked as invalid (also known as nonlogged blocks).">NOLOGGING or Unrecoverable Operations</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3137 d21041e3054 ">
                                    <p>Use the RMAN command<code class="codeph"> RECOVER ... NONLOGGED BLOCK</code> to replace the invalid blocks on the standby with the changed blocks from the primary.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3158" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B" title="If the REMOTE_LOGIN_PASSWORDFILE database initialization parameter is set to SHARED or EXCLUSIVE, then the password file on a physical standby database is automatically replaced with a fresh copy from the primary database.">Refresh the Password File</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3158 d21041e3054 ">
                                    <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), password file changes done on the primary database are automatically propagated to standby databases. The only exception to this is far sync instances. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. After the password file is up-to-date at the far sync instance, the redo containing the password update at the primary is automatically propagated to any standby databases that are set up to receive redo from that far sync instance. The password file is updated on the standby when the redo is applied.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3182" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-B9B956BC-885F-49AF-A4FF-E900998109ED" title="The database encryption wallet on a physical standby database must be replaced with a fresh copy of the database encryption wallet from the primary database whenever the TDE master encryption key is reset on the primary database.">Reset the TDE Master Encryption Key</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3182 d21041e3054 ">
                                    <p>Replace the database encryption wallet on the physical standby database with a fresh copy of the database encryption wallet from the primary database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3194" headers="d21041e3051 ">
                                    <p><a href="oracle-initialization-parameters-used-by-oracle-data-guard.html#GUID-A1CF9B00-F0F5-4F3B-A0E0-9D6ABF775EC9" title="This is an alphabetical listing of the initialization parameters you set for a Data Guard environment. It indicates if the parameter is set for the primary role or the standby role, and also provides tips for setting each parameter."> Initialization Parameters</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3194 d21041e3054 ">
                                    <p>Evaluate whether a corresponding change must be made to the initialization parameters on the physical standby database.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div><a id="SBYDB4785"></a><div class="props_rev_3"><a id="GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540" name="GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540"></a><h4 id="SBYDB-GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540" class="sect4"><span class="enumeration_section">10.3.1 </span>Adding a Data File or Creating a Tablespace
                  </h4>
                  <div>
                     <p>The <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database initialization parameter controls whether the addition of a data file to the primary database is automatically propagated to a physical standby databases.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database parameter on the physical standby database is set to <code class="codeph">AUTO</code>, any new data files created on the primary database are automatically created on the physical standby database.
                              </p>
                           </li>
                           <li>
                              <p>If the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database parameter on the physical standby database is set to <code class="codeph">MANUAL</code>, a new data file must be manually copied from the primary database to the physical standby databases after it is added to the primary database.
                              </p>
                              <div class="infoboxnote" id="GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540__GUID-DB48701A-D02D-411B-ADE6-12D6B95010D8">
                                 <p class="notep1">Note:</p>
                                 <p>On a physical standby for which the Oracle Active Data Guard option has been enabled, you cannot use the manual copy method. Instead, you must execute the following SQL statement on the standby to create an empty data file:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE CREATE DATAFILE [filename | filenumber] - 
AS [NEW | <span class="italic">new_filename</span>];</pre><p>You must specify which one to rename: the <code class="codeph">filename</code> or the <code class="codeph">filenumber</code>.
                                 </p>
                                 <p>Also specify either the new filename or <code class="codeph">NEW</code>. The <code class="codeph">NEW</code> keyword lets Oracle automatically choose a name, if Oracle Managed Files (OMF) is enabled.
                                 </p>
                              </div>
                           </li>
                        </ul>
                        <p>If an existing data file from another database is copied to a primary database, it must also be copied to the standby database and the standby control file must be re-created, regardless of the setting of <code class="codeph">STANDBY_FILE_MANAGEMENT</code> parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4788"></a><div class="props_rev_3"><a id="GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D" name="GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D"></a><h4 id="SBYDB-GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D" class="sect4"><span class="enumeration_section">10.3.2 </span>Dropping Tablespaces and Deleting Data Files
                  </h4>
                  <div>
                     <p>When a tablespace is dropped or a data file is deleted from a primary database, the corresponding data file(s) must be deleted from the physical standby database.</p>
                     <div class="section">
                        <p>The following example shows how to drop a tablespace:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DROP TABLESPACE tbs_4;
SQL&gt; ALTER SYSTEM SWITCH LOGFILE;
</pre><p>To verify that deleted data files are no longer part of the database, query the <code class="codeph">V$DATAFILE</code> view.
                        </p>
                        <p>Delete the corresponding data file on the standby system after the redo data that contains the previous changes is applied to the standby database. For example:</p><pre class="oac_no_warn" dir="ltr">% rm /disk1/oracle/oradata/payroll/s2tbs_4.dbf
</pre><p>On the primary database, after ensuring the standby database applied the redo information for the dropped tablespace, you can remove the data file for the tablespace. For example:</p><pre class="oac_no_warn" dir="ltr">% rm /disk1/oracle/oradata/payroll/tbs_4.dbf
</pre></div>
                     <!-- class="section" -->
                  </div><a id="SBYDB4789"></a><div class="props_rev_3"><a id="GUID-10EE6961-A52F-4101-A911-B8692636CC37" name="GUID-10EE6961-A52F-4101-A911-B8692636CC37"></a><h5 id="SBYDB-GUID-10EE6961-A52F-4101-A911-B8692636CC37" class="sect5"><span class="enumeration_section">10.3.2.1 </span>Using DROP TABLESPACE INCLUDING CONTENTS AND DATAFILES
                     </h5>
                     <div>
                        <p>You can issue the SQL <code class="codeph">DROP TABLESPACE INCLUDING CONTENTS AND DATAFILES</code> statement on the primary database to delete the data files on both the primary and standby databases.
                        </p>
                        <div class="section">
                           <p> To use this statement, the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter must be set to <code class="codeph">AUTO</code>. For example, to drop the tablespace at the primary site:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; DROP TABLESPACE tbs_4 INCLUDING CONTENTS AND DATAFILES;
SQL&gt; ALTER SYSTEM SWITCH LOGFILE;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="SBYDB4790"></a><div class="props_rev_3"><a id="GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0" name="GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0"></a><h4 id="SBYDB-GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0" class="sect4"><span class="enumeration_section">10.3.3 </span>Using Transportable Tablespaces with a Physical Standby Database
                  </h4>
                  <div>
                     <p>You can use the Oracle transportable tablespaces feature to move a subset of an Oracle database and plug it in to another Oracle database, essentially moving tablespaces between the databases.</p>
                     <div class="section">
                        <p>To move or copy a set of tablespaces into a primary database when a physical standby is being used, perform the following steps:</p>
                        <ol>
                           <li>
                              <p>Generate a transportable tablespace set that consists of data files for the set of tablespaces being transported and an export file containing structural information for the set of tablespaces.</p>
                           </li>
                           <li>
                              <p>Transport the tablespace set:</p>
                              <ol type="a">
                                 <li>
                                    <p>Copy the data files and the export file to the primary database.</p>
                                 </li>
                                 <li>
                                    <p>Copy the data files to the standby database.</p>
                                 </li>
                              </ol>
                              <p>The data files must have the same path name on the primary and standby databases unless the <code class="codeph">DB_FILE_NAME_CONVERT</code> database initialization parameter has been configured. If <code class="codeph">DB_FILE_NAME_CONVERT</code> has <span class="italic">not</span> been configured and the path names of the data files are not the same on the primary and standby databases, issue the <code class="codeph">ALTER DATABASE RENAME FILE</code> statement to rename the data files. Do this after Redo Apply has failed to apply the redo generated by plugging the tablespace into the primary database. The <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter must be set to <code class="codeph">MANUAL</code> before renaming the data files, and then reset to the previous value after renaming the data files.
                              </p>
                           </li>
                           <li>
                              <p>Plug in the tablespace.</p>
                              <p>Invoke the <a id="d21041e3667" class="indexterm-anchor"></a>Data Pump utility to plug the set of tablespaces into the primary database. Redo data is generated and applied at the standby site to plug the tablespace into the standby database.
                              </p>
                           </li>
                        </ol>
                        <p>For more information about transportable tablespaces, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11394" target="_blank"><span class="italic">Oracle Database Administrator's Guide.</span></a></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4791"></a><div class="props_rev_3"><a id="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0" name="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0"></a><h4 id="SBYDB-GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0" class="sect4"><span class="enumeration_section">10.3.4 </span>Renaming a Data File in the Primary Database
                  </h4>
                  <div>
                     <p>When you rename one or more data files in the primary database, the change is not propagated to the standby database. It must be done manually.</p>
                     <div class="section">
                        <p>To rename the same data files on the standby database, you must manually make the equivalent modifications on the standby database because the modifications are not performed automatically, even if the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter is set to <code class="codeph">AUTO</code>.
                        </p>
                        <p>The following steps describe how to rename a data file in the primary database and manually propagate the changes to the standby database.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>To <a id="d21041e3777" class="indexterm-anchor"></a><a id="d21041e3779" class="indexterm-anchor"></a><a id="d21041e3785" class="indexterm-anchor"></a>rename the data file in the primary database, take the tablespace offline:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE tbs_4 OFFLINE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Exit from the SQL prompt and issue an operating system command, such as the following UNIX <code class="codeph">mv</code> command, to rename the data file on the primary system:</span><div><pre class="oac_no_warn" dir="ltr">% mv /disk1/oracle/oradata/payroll/tbs_4.dbf 
/disk1/oracle/oradata/payroll/tbs_x.dbf
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rename the data file in the primary database and bring the tablespace back online:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE tbs_4 RENAME DATAFILE -
&gt; '/disk1/oracle/oradata/payroll/tbs_4.dbf' -
&gt;  TO '/disk1/oracle/oradata/payroll/tbs_x.dbf';

SQL&gt; ALTER TABLESPACE tbs_4 ONLINE;
</pre><div class="infoboxnote" id="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0__GUID-26370FC4-39E3-48F0-B680-D2AC913C2739">
                                 <p class="notep1">Note:</p>
                                 <p>An alternative to these first three steps is to use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">MOVE</code> <code class="codeph">DATAFILE</code> command to rename a datafile. This command lets you rename a datafile while allowing read/write access to the datafile. Adequate storage area is a prerequisite for moving a datafile because during the execution of the <code class="codeph">MOVE</code> <code class="codeph">DATAFILE</code> command, the database maintains both the original and the renamed datafiles as two separate files. See <a href="getting-started-with-oracle-data-guard.html#GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" title="You can move the location of an online data file from one physical file to another physical file while the database is actively accessing the file.">Moving the Location of Online Data Files</a> for more information.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the standby database and stop Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Shut down the standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rename the data file at the standby site using an operating system command, such as the UNIX <code class="codeph">mv</code> command:</span><div><pre class="oac_no_warn" dir="ltr">% mv /disk1/oracle/oradata/payroll/tbs_4.dbf /disk1/oracle/oradata/payroll/tbs_x.dbf
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start and mount the standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rename the data file in the standby control file. To rename a data file, you must set the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database initialization parameter to <code class="codeph">MANUAL</code>. You can then reset the parameter to its previous value after renaming the data file.</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RENAME FILE '/disk1/oracle/oradata/payroll/tbs_4.dbf' -
&gt; TO '/disk1/oracle/oradata/payroll/tbs_x.dbf';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>On the standby database, restart Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE -
&gt; DISCONNECT FROM SESSION;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>If you do not rename the corresponding data file at the standby system, and then try to refresh the standby database control file, the standby database attempts to use the renamed data file, but will not find it. Error messages similar to the following are written to the alert log:</p><pre class="oac_no_warn" dir="ltr">ORA-00283: recovery session canceled due to errors
ORA-01157: cannot identify/lock datafile 4 - see DBWR trace file
ORA-01110: datafile 4: '/Disk1/oracle/oradata/payroll/tbs_x.dbf'</pre><div class="infoboxnote" id="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0__GUID-A068D73D-D9CD-4007-A233-AA593CD21798">
                           <p class="notep1">Note:</p>
                           <p>An alternative to steps 4-9 is to use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">MOVE</code> <code class="codeph">DATAFILE</code> command to rename a datafile at the standby. See <a href="getting-started-with-oracle-data-guard.html#GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" title="You can move the location of an online data file from one physical file to another physical file while the database is actively accessing the file.">Moving the Location of Online Data Files</a> for more information.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4792"></a><div class="props_rev_3"><a id="GUID-64E46731-490D-4228-AC87-A07CDE3C75FE" name="GUID-64E46731-490D-4228-AC87-A07CDE3C75FE"></a><h4 id="SBYDB-GUID-64E46731-490D-4228-AC87-A07CDE3C75FE" class="sect4"><span class="enumeration_section">10.3.5 </span>Add or Drop a Redo Log File Group
                  </h4>
                  <div>
                     <p>The configuration of the redo log and standby redo log on a physical standby database should be reevaluated and adjusted as necessary after adding or dropping a log file group on the primary database.</p>
                     <div class="section">
                        <p>Take the following steps to add or drop a log file group or standby log file group on a physical standby database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Stop Redo Apply.</span></li>
                        <li class="stepexpand"><span>If the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter is set to <code class="codeph">AUTO</code>, change the value to <code class="codeph">MANUAL</code>.</span></li>
                        <li class="stepexpand"><span>Add or drop a log file group.</span><div>
                              <div class="infoboxnote" id="GUID-64E46731-490D-4228-AC87-A07CDE3C75FE__GUID-E53A3CB4-2637-495D-9674-BDC1B6BC6259">
                                 <p class="notep1">Note:</p>
                                 <p>An online logfile group must always be manually cleared before it can be dropped from a physical standby database. For example:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE CLEAR LOGFILE GROUP 3;
</pre><p>An online logfile group that has a status of <code class="codeph">CURRENT</code> or <code class="codeph">CLEARING_CURRENT</code> cannot be dropped from a physical standby database. An online logfile group that has this status can be dropped after a role transition.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restore the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter and the Redo Apply options to their original states.</span></li>
                        <li class="stepexpand"><span>Restart Redo Apply. </span></li>
                     </ol>
                     <div class="section">
                        <p>In Oracle RAC environments, keep the following in mind:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When an online redo log group is added to a primary database, you must manually add an online redo log group to the standby database. It is not done automatically.</p>
                           </li>
                           <li>
                              <p>When a new redo thread is added to a primary database, a new redo thread is automatically added to the standby. By default, the new thread is configured with 2 log groups of 100 MB each. This cannot be changed or overridden.</p>
                           </li>
                           <li>
                              <p>When a new log group is added to an existing redo thread, a new log group is not automatically added to its existing thread.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB00206"></a><div class="props_rev_3"><a id="GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7" name="GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7"></a><h4 id="SBYDB-GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7" class="sect4"><span class="enumeration_section">10.3.6 </span>NOLOGGING or Unrecoverable Operations
                  </h4>
                  <div>
                     <p>When you perform a DML or DDL operation using the <code class="codeph">NOLOGGING</code> or <code class="codeph">UNRECOVERABLE</code> clause, blocks on the standby may be marked as invalid (also known as nonlogged blocks).
                     </p>
                     <p> See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN-GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6" target="_blank">Precedence of FORCE LOGGING Settings</a> for details about when an operation is actually performed in a nonlogged fashion. 
                     </p>
                     <p>See <a href="examples-of-using-oracle-data-guard.html#GUID-BD9E85AB-D812-4659-9C85-26CDFF115A8A" title="Some SQL statements allow you to specify a NOLOGGING clause so that the operation is not logged in the online redo log file.">Recovering After the NOLOGGING Clause Is Specified</a> for information about recovering after the <code class="codeph">NOLOGGING</code> clause is used.
                     </p>
                     <p>See the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11096" target="_blank"><span class="italic">Oracle Database Administrator's Guide.</span></a> for information about specifying <code class="codeph">FORCE LOGGING</code> mode.
                     </p>
                  </div>
               </div><a id="SBYDB4793"></a><div class="props_rev_3"><a id="GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B" name="GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B"></a><h4 id="SBYDB-GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B" class="sect4"><span class="enumeration_section">10.3.7 </span>Refresh the Password File
                  </h4>
                  <div>
                     <p>If the <code class="codeph">REMOTE_LOGIN_PASSWORDFILE</code> database initialization parameter is set to <code class="codeph">SHARED</code> or <code class="codeph">EXCLUSIVE</code>, then the password file on a physical standby database is automatically replaced with a fresh copy from the primary database.
                     </p>
                     <p>The file is replaced after administrative privileges are granted or revoked, or the password of a user with administrative privileges is changed. The only exception to this is far sync instances. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. When a password file is manually updated at a far sync instance, the redo containing the same password changes from the primary database is automatically propagated to any standby databases that are set up to receive redo from that far sync instance. The password file is updated on the standby when the redo is applied.</p>
                  </div>
               </div><a id="SBYDB4794"></a><div class="props_rev_3"><a id="GUID-B9B956BC-885F-49AF-A4FF-E900998109ED" name="GUID-B9B956BC-885F-49AF-A4FF-E900998109ED"></a><h4 id="SBYDB-GUID-B9B956BC-885F-49AF-A4FF-E900998109ED" class="sect4"><span class="enumeration_section">10.3.8 </span>Reset the TDE Master Encryption Key
                  </h4>
                  <div>
                     <p>The database encryption wallet on a physical standby database must be replaced with a fresh copy of the database encryption wallet from the primary database whenever the TDE master encryption key is reset on the primary database.</p>
                     <p>Failure to refresh the database encryption wallet on the physical standby database prevents access to encrypted columns on the physical standby database that are modified after the master encryption key is reset on the primary database.</p>
                     <p>For online tablespaces and databases, as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can encrypt, decrypt, and re-key both new and existing tablespaces, and existing databases within an Oracle Data Guard environment. 
                     </p>
                     <p>For offline tablespaces and databases, as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can encrypt and decrypt both new and existing tablespaces, and existing databases within an Oracle Data Guard environment.
                     </p>
                     <p>In online conversion, the encryption, decryption, or re-keying on the standby is automatic after it is performed on the primary. An online encryption, decryption, or re-keying cannot be performed directly on a standby database.</p>
                     <p>In an offline conversion, the encryption or decryption must be performed manually on both the primary and standby. An offline conversion affects the data files on the particular primary or standby database only. Both the primary and physical standby should be kept at the same state. You can minimize downtime by encrypting (or decrypting) the tablespaces on the standby first, switching over to the primary, and then encrypting (or decrypting) the tablespaces on the primary.</p>
                     <div class="infoboxnotealso" id="GUID-B9B956BC-885F-49AF-A4FF-E900998109ED__GUID-57CF9A15-CE74-449E-905D-5B351939FAA0">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ASOAG-GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB4795"></a><div class="props_rev_3"><a id="GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" name="GUID-02218512-31A6-461E-96B4-0B9997DCFC4A"></a><h3 id="SBYDB-GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" class="sect3"><span class="enumeration_section">10.4 </span>Recovering Through the OPEN RESETLOGS Statement
               </h3>
               <div>
                  <p>Oracle Data Guard allows recovery on a physical standby database to continue after the primary database has been opened with the <code class="codeph">RESETLOGS</code> option.
                  </p>
                  <p>When an <code class="codeph">ALTER DATABASE OPEN RESETLOGS</code> statement is issued on the primary database, the incarnation of the database changes, creating a new branch of redo data.
                  </p>
                  <p>When a physical standby database receives a new branch of redo data, Redo Apply automatically takes the new branch of redo data. For physical standby databases, no manual intervention is required if the standby database did not apply redo data past the new resetlogs SCN (past the start of the new branch of redo data). The following table describes how to resynchronize the standby database with the primary database branch.</p>
                  <div class="tblformalwide" id="GUID-02218512-31A6-461E-96B4-0B9997DCFC4A__GUID-27F52F1F-0D19-408D-AB18-716276A768A9">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This 3 column table describes how to resynchronize the standby database with the primary database branch. Each row of the table provides a solution that is dependent upon how much redo data the standby database has applied and whether or not Flashback Database is enabled." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d21041e4514">If the standby database.  .  .    </th>
                              <th align="left" valign="bottom" width="32%" id="d21041e4517">Then.  .  .    </th>
                              <th align="left" valign="bottom" width="34%" id="d21041e4520">Perform these steps.  .  .    </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4525" headers="d21041e4514 ">
                                 <p>Has not applied redo data past the new resetlogs SCN (past the start of the new branch of redo data) and the new redo branch from <code class="codeph">OPEN RESETLOGS</code> has been registered at the standby
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4525 d21041e4517 ">
                                 <p>Redo Apply automatically takes the new branch of redo.</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4525 d21041e4520 ">
                                 <p>No manual intervention is necessary. The managed redo process (MRP) automatically resynchronizes the standby database with the new branch of redo data.</p>
                                 <p>Note: To check whether the new redo branch has been registered at the standby, perform the following query at the primary and standby and verify that the results match:</p><pre class="oac_no_warn" dir="ltr">SELECT resetlogs_id, resetlogs_change# FROM V$DATABASE_INCARNATION WHERE status='CURRENT'</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4542" headers="d21041e4514 ">
                                 <p>Has applied redo data past the new resetlogs SCN (past the start of the new branch of redo data) and Flashback Database is enabled on the standby database</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4542 d21041e4517 ">
                                 <p>The standby database is recovered <span class="italic">in the future </span>of the new branch of redo data. 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4542 d21041e4520 ">
                                 <ol>
                                    <li>
                                       <p>Follow the procedure in <a href="examples-of-using-oracle-data-guard.html#GUID-09129494-CD98-44B6-821F-A4C2CB5AEE08" title="These steps describe how to avoid re-creating a physical standby database after you issue the OPEN RESETLOGS statement on the primary database.">Flashing Back a Physical Standby Database to a Specific Point-in-Time</a> to flash back a physical standby database.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Restart Redo Apply to continue application of redo data onto new reset logs branch. </p>
                                    </li>
                                 </ol>
                                 <p>The managed redo process (MRP) automatically resynchronizes the standby database with the new branch.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4572" headers="d21041e4514 ">
                                 <p>Has applied redo data past the new resetlogs SCN (past the start of the new branch of redo data) and Flashback Database is not enabled on the standby database</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4572 d21041e4517 ">
                                 <p>The primary database has diverged from the standby on the indicated primary database branch.</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4572 d21041e4520 ">
                                 <p>Re-create the physical standby database following the procedures in <a href="creating-oracle-data-guard-physical-standby.html#GUID-B511FB6E-E3E7-436D-94B5-071C37550170" title="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration."> Creating a Physical Standby Database </a>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4589" headers="d21041e4514 ">
                                 <p>Is missing intervening archived redo log files from the new branch of redo data</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4589 d21041e4517 ">
                                 <p>The MRP cannot continue until the missing log files are retrieved. </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4589 d21041e4520 ">
                                 <p>Locate and register missing archived redo log files from each branch. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4599" headers="d21041e4514 ">
                                 <p>Is missing archived redo log files from the end of the previous branch of redo data.</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4599 d21041e4517 ">
                                 <p>The MRP cannot continue until the missing log files are retrieved. </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4599 d21041e4520 ">
                                 <p>Locate and register missing archived redo log files from the previous branch.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV89752" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about database incarnations, recovering through an <code class="codeph">OPEN RESETLOGS</code> operation, and Flashback Database.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-252097AC-3070-43B6-88D8-919AE27F97AD" name="GUID-252097AC-3070-43B6-88D8-919AE27F97AD"></a><h3 id="SBYDB-GUID-252097AC-3070-43B6-88D8-919AE27F97AD" class="sect3"><span class="enumeration_section">10.5 </span>Automatic Flashback of a Mounted Standby After a Primary RESETLOGS Operation
               </h3>
               <div>
                  <p>A standby database that is in a mounted state can automatically follow the primary database after a <code class="codeph">RESETLOGS</code> operation on the primary. This simplifies standby management after a <code class="codeph">RESETLOGS</code> operation on the primary.
                  </p>
                  <p></p>
                  <p>When flashback or point-in-time recovery is performed either on a primary database or a PDB in the primary database, the primary database or PDB is moved to a previous point in time and the primary is then opened with the <code class="codeph">RESETLOGS</code> option. A new incarnation of the primary or the PDB in the primary is created. For the standby to automatically follow the primary, the MRP performs the following actions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>detects the new incarnation</p>
                     </li>
                     <li>
                        <p>flashes back the standby or the PDB on the standby to the same point in time as that of the primary or the PDB on the primary</p>
                     </li>
                     <li>
                        <p>restarts the standby recovery and moves the standby to the new branch of redo</p>
                     </li>
                  </ul>
                  <p>The flashback operation will succeed only when the standby database has sufficient flashback data.</p>
                  <p>If you do not want the standby to automatically follow the primary, either keep the standby database in <code class="codeph">OPEN</code> mode or stop the MRP process on the standby.
                  </p>
                  <p>If the standby database is open in read only mode, the corresponding error messages are recorded in the alert log. When you restart the MRP after closing the physical standby, the recovery process automatically flashes back the standby database and continues to apply the new branch of redo.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="examples-of-using-oracle-data-guard.html#GUID-8D948A24-A3B7-4E4F-917A-00B047CF3CAF" title="After you perform a PDB PITR or PDB Flashback on a primary, you can either restore the PDB or flashback the PDB on the standby to let the standby follow the primary.">Actions Needed On a Standby After a PDB PITR or PDB Flashback On a Primary</a></li>
                        <li><a href="examples-of-using-oracle-data-guard.html#GUID-09129494-CD98-44B6-821F-A4C2CB5AEE08" title="These steps describe how to avoid re-creating a physical standby database after you issue the OPEN RESETLOGS statement on the primary database.">Flashing Back a Physical Standby Database to a Specific Point-in-Time</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB5041"></a><a id="SBYDB00710"></a><div class="props_rev_3"><a id="GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486" name="GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486"></a><h3 id="SBYDB-GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486" class="sect3"><span class="enumeration_section">10.6 </span>Monitoring Primary, Physical Standby, and Snapshot Standby Databases
               </h3>
               <div>
                  <p>This table summarizes common primary database management actions and where to find information related to these actions.</p>
                  <div class="tblformalwide" id="GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486__G1041815">
                     <p class="titleintable">Table 10-2 Sources of Information About Common Primary Database Management Actions </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Sources of Information About Common Primary Database Management Actions " summary="This 3 column table summarizes the common events that occur on the primary database and pointers to the files and view where you can monitor these events on the primary and standby sites." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d21041e4835">Primary Database Action</th>
                              <th align="left" valign="bottom" width="32%" id="d21041e4838">Primary Site Information</th>
                              <th align="left" valign="bottom" width="33%" id="d21041e4841">Standby Site Information</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4846" headers="d21041e4835 ">
                                 <p>Enable or disable a redo thread</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4846 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$THREAD</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4846 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4862" headers="d21041e4835 ">
                                 <p>Display database role, protection mode, protection level, switchover status, fast-start failover<a id="d21041e4865" class="indexterm-anchor"></a><a id="d21041e4869" class="indexterm-anchor"></a><a id="d21041e4873" class="indexterm-anchor"></a><a id="d21041e4877" class="indexterm-anchor"></a><a id="d21041e4881" class="indexterm-anchor"></a> information, and so forth
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4862 d21041e4838 ">
                                 <p><code class="codeph">V$DATABASE</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4862 d21041e4841 ">
                                 <p><code class="codeph">V$DATABASE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4895" headers="d21041e4835 ">
                                 <p>Add or drop a redo log file group</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4895 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$LOG</code> 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">STATUS</code> column of <code class="codeph">V$LOGFILE</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4895 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4919" headers="d21041e4835 ">
                                 <p><code class="codeph">CREATE CONTROLFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4919 d21041e4838 ">
                                 <p>Alert log</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4919 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4930" headers="d21041e4835 ">
                                 <p>Monitor Redo Apply</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4930 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVE_DEST_STATUS</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4930 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVED_LOG</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$LOG_HISTORY</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$MANAGED_STANDBY</code></p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4960" headers="d21041e4835 ">
                                 <p><a id="d21041e4962" class="indexterm-anchor"></a><a id="d21041e4966" class="indexterm-anchor"></a><a id="d21041e4970" class="indexterm-anchor"></a>Change tablespace status
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4960 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$RECOVER_FILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBA_TABLESPACES</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4960 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$RECOVER_FILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBA_TABLESPACES</code></p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4997" headers="d21041e4835 ">
                                 <p><a id="d21041e4999" class="indexterm-anchor"></a>Add or drop a data file or tablespace
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4997 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">DBA_DATA_FILES</code> 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4997 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5024" headers="d21041e4835 ">
                                 <p>Rename a data file</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5024 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5024 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5046" headers="d21041e4835 ">
                                 <p>Unlogged or unrecoverable operations</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5046 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$DATABASE</code> 
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5046 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5064" headers="d21041e4835 ">
                                 <p>Monitor redo transport</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5064 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$ARCHIVE_DEST_STATUS</code> 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVED_LOG</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVE_DEST</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5064 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$ARCHIVED_LOG</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5095" headers="d21041e4835 ">
                                 <p>Issue <code class="codeph">OPEN RESETLOGS</code> or <code class="codeph">CLEAR UNARCHIVED LOGFILES</code> statements
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5095 d21041e4838 ">
                                 <p>Alert log</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5095 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5112" headers="d21041e4835 ">
                                 <p>Change initialization parameter</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5112 d21041e4838 ">
                                 <p>Alert log</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5112 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="SBYDB00555"></a><div class="props_rev_3"><a id="GUID-567E9883-B1BE-431D-86E9-872BAB6A899F" name="GUID-567E9883-B1BE-431D-86E9-872BAB6A899F"></a><h4 id="SBYDB-GUID-567E9883-B1BE-431D-86E9-872BAB6A899F" class="sect4"><span class="enumeration_section">10.6.1 </span>Using Views to Monitor Primary, Physical, and Snapshot Standby Databases
                  </h4>
                  <div>
                     <p>You can use dynamic performance views to monitor primary, physical standby, and snapshot standby databases.</p>
                     <p></p>
                     <p>The following dynamic performance views are discussed:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D" title="You can use the V$DATABASE view to display information about data protection, switchover status, and fast-start failover status.">V$DATABASE</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6" title="You can use the V$MANAGED_STANDBY view to query Redo Apply and redo transport status on a physical standby database.">V$MANAGED_STANDBY</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8" title="You can use the V$ARCHIVED_LOG view to query information about archived redo log files that have been received by a physical or snapshot standby database from a primary database.">V$ARCHIVED_LOG</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A" title="You can use the V$LOG_HISTORY view to query archived log history information.">V$LOG_HISTORY</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28" title="You can use the V$DATAGUARD_STATUS view to display messages generated by Oracle Data Guard events that caused a message to be written to the alert log or to a server process trace file.">V$DATAGUARD_STATUS</a> 
                           </p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-0DA8663E-65C4-47EB-8D47-4712F8201646" title="You can query the V$ARCHIVE_DEST view to show the status of each redo transport destination, and for redo transport destinations that are standby databases, the SCN of the last primary database redo applied at that standby database.">V$ARCHIVE_DEST</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-567E9883-B1BE-431D-86E9-872BAB6A899F__GUID-3E3D74E6-09CE-4E23-A3F6-E79BD9A8CB73">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN003" target="_blank"><span class="italic">Oracle Database Reference</span></a> for complete reference information about views
                        </p>
                     </div>
                  </div><a id="SBYDB4796"></a><div class="props_rev_3"><a id="GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D" name="GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D"></a><h5 id="SBYDB-GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D" class="sect5"><span class="enumeration_section">10.6.1.1 </span>V$DATABASE
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$DATABASE</code> view to display information about data protection, switchover status, and fast-start failover status.
                        </p>
                        <div class="section">
                           <p>The following query displays the data protection mode, data protection level, database role, and switchover status for a primary, physical standby or snapshot standby database:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT PROTECTION_MODE, PROTECTION_LEVEL, &#x2013;
&gt; DATABASE_ROLE ROLE, SWITCHOVER_STATUS &#x2013;
&gt; FROM V$DATABASE;
</pre><p>The following query displays fast-start failover status:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT FS_FAILOVER_STATUS "FSFO STATUS", -
&gt; FS_FAILOVER_CURRENT_TARGET TARGET, -
&gt; FS_FAILOVER_THRESHOLD THRESHOLD, -
&gt; FS_FAILOVER_OBSERVER_PRESENT "OBSERVER PRESENT" &#x2013;
&gt; FROM V$DATABASE;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-3B82374E-5646-4029-8AD3-94BAE5FCB17D" name="GUID-3B82374E-5646-4029-8AD3-94BAE5FCB17D"></a><h5 id="SBYDB-GUID-3B82374E-5646-4029-8AD3-94BAE5FCB17D" class="sect5"><span class="enumeration_section">10.6.1.2 </span>V$DATAGUARD_PROCESS
                     </h5>
                     <div>
                        <p>The <code class="codeph">V$DATAGUARD_PROCESS</code> view displays one row for each Oracle Data Guard process that is currently running.
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">V$DATAGUARD_PROCESS</code> view replaces the <code class="codeph">V$MANAGED_STANDBY</code> view which is deprecated as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) and may be desupported in a future release.
                           </p>
                           <p>The following is an example query of this view:</p><pre class="pre codeblock"><code>SQL&gt; SELECT ROLE, THREAD#, SEQUENCE#, ACTION FROM V$DATAGUARD_PROCESS;


ROLE                        THREAD#  SEQUENCE# ACTION
------------------------ ---------- ---------- ------------
RFS ping                          1          9 IDLE
recovery apply slave              0          0 IDLE
recovery apply slave              0          0 IDLE
managed recovery                  0          0 IDLE
recovery logmerger                1          9 APPLYING_LOG
RFS archive                       0          0 IDLE
RFS async                         1          9 IDLE</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4797"></a><div class="props_rev_3"><a id="GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6" name="GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6"></a><h5 id="SBYDB-GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6" class="sect5"><span class="enumeration_section">10.6.1.3 </span>V$MANAGED_STANDBY
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$MANAGED_STANDBY</code> view to query Redo Apply and redo transport status on a physical standby database.
                        </p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6__GUID-B0B998B8-1652-41E3-A45D-8694F2AE5279">
                              <p class="notep1">Note:</p>This view is deprecated as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) and may be desupported in a future release. The <code class="codeph">V$DATAGUARD_PROCESS</code> view should be used instead.
                           </div>
                           <p>The following is a sample query of the <code class="codeph">V$MANAGED_STANDBY</code> view:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT PROCESS, STATUS, THREAD#, SEQUENCE#,-
&gt; BLOCK#, BLOCKS FROM V$MANAGED_STANDBY;
 
PROCESS STATUS       THREAD#    SEQUENCE#  BLOCK#     BLOCKS
------- ------------ ---------- ---------- ---------- ----------
RFS     ATTACHED     1          947        72         72
MRP0    APPLYING_LOG 1          946        10         72
</pre><p>The sample output shows that a remote file server (RFS) process completed archiving a redo log file with a sequence number of 947 and that Redo Apply is actively applying an archived redo log file with a sequence number of 946. Redo Apply is currently recovering block number 10 of the 72-block archived redo log file.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4798"></a><div class="props_rev_3"><a id="GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8" name="GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8"></a><h5 id="SBYDB-GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8" class="sect5"><span class="enumeration_section">10.6.1.4 </span>V$ARCHIVED_LOG
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$ARCHIVED_LOG</code> view to query information about archived redo log files that have been received by a physical or snapshot standby database from a primary database.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT THREAD#, SEQUENCE#, FIRST_CHANGE#, -
&gt; NEXT_CHANGE# FROM V$ARCHIVED_LOG;
 
THREAD#    SEQUENCE#  FIRST_CHANGE# NEXT_CHANGE#
---------- ---------- ------------- ------------
1          945        74651         74739
1          946        74739         74772
1          947        74772         74795
</pre><p>The sample output shows that three archived redo log files have been received from the primary database.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4799"></a><div class="props_rev_3"><a id="GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A" name="GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A"></a><h5 id="SBYDB-GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A" class="sect5"><span class="enumeration_section">10.6.1.5 </span>V$LOG_HISTORY
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$LOG_HISTORY</code> view to query archived log history information.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT THREAD#, SEQUENCE#, FIRST_CHANGE#, -
&gt; NEXT_CHANGE# FROM V$LOG_HISTORY;
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4800"></a><div class="props_rev_3"><a id="GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28" name="GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28"></a><h5 id="SBYDB-GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28" class="sect5"><span class="enumeration_section">10.6.1.6 </span>V$DATAGUARD_STATUS
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$DATAGUARD_STATUS</code> view to display messages generated by Oracle Data Guard events that caused a message to be written to the alert log or to a server process trace file.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query : </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT MESSAGE FROM V$DATAGUARD_STATUS;
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB5131"></a><div class="props_rev_3"><a id="GUID-0DA8663E-65C4-47EB-8D47-4712F8201646" name="GUID-0DA8663E-65C4-47EB-8D47-4712F8201646"></a><h5 id="SBYDB-GUID-0DA8663E-65C4-47EB-8D47-4712F8201646" class="sect5"><span class="enumeration_section">10.6.1.7 </span>V$ARCHIVE_DEST
                     </h5>
                     <div>
                        <p>You can query the <code class="codeph">V$ARCHIVE_DEST</code> view to show the status of each redo transport destination, and for redo transport destinations that are standby databases, the SCN of the last primary database redo applied at that standby database.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT DEST_ID, STATUS, APPLIED_SCN FROM V$ARCHIVE_DEST WHERE TARGET='STANDBY';
   
DEST_ID    STATUS    APPLIED_SCN
---------- --------- -----------
2          VALID     439054
3          VALID     439054 </pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF" name="GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF"></a><h3 id="SBYDB-GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF" class="sect3"><span class="enumeration_section">10.7 </span>Replicating Restore Points from Primary to Standby
               </h3>
               <div>
                  <p>Restore points that are created on a primary database are automatically replicated to the standby database. The restore points created on the standby database are called <span class="italic">replicated restore points</span>. Irrespective of whether a restore point on the primary database is a guaranteed restore point or a normal restore point, the corresponding replicated restore point is always a normal restore point.
                  </p>
                  <div class="section">
                     <p></p>
                     <p>Oracle Database automatically replicates restore points from a primary database to the standby database when the following conditions are met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">COMPATIBLE</code> initialization parameter for both the primary database and the standby database is set to 19.0.0 or higher 
                           </p>
                        </li>
                        <li>
                           <p>primary database is open </p>
                           <p>A restore point that is created on a primary database when the primary is in mount mode is not replicated. This restriction is because the restore point information is replicated though the redo. </p>
                        </li>
                     </ul>
                     <p>The naming convention for a replicated restore point uses the name of the restore point on the primary database suffixed with <code class="codeph">_PRIMARY</code>. If a replicated restore point with the same name exists on the standby database, then a replicated restore point is not created. For example, when you create a restore point named <code class="codeph">PRE_MYTBS</code> on the primary database, the replicated restore point is named <code class="codeph">PRE_MYTBS_PRIMARY</code>. When you delete a restore point on the primary, the corresponding replicated restore point on the standby is also deleted.
                     </p>
                     <p>The managed redo process (MRP) manages the creation and maintenance of replicated restore points. If restore points are created on the primary database when MRP is not running, then these restore points are replicated to the standby database after MRP is started.</p>
                     <p>To determine if a restore point is automatically replicated, query the <code class="codeph">V$RESTORE_POINT</code> view. 
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB00580"></a><div class="props_rev_3"><a id="GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D" name="GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D"></a><h3 id="SBYDB-GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D" class="sect3"><span class="enumeration_section">10.8 </span>Tuning Redo Apply
               </h3>
               <div>
                  <p>Oracle white papers are available that describe how to optimize Redo Apply and media recovery performance.</p>
                  <div class="section">
                     <p>In particular, see <span class="italic">Active Data Guard 11g Best Practices (includes best practices for Redo Apply</span>) . This paper is available on the Oracle Maximum Availability Architecture (MAA) home page at:
                     </p>
                     <p><a href="http://www.oracle.com/goto/maa" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
                     <div class="infoboxnotealso" id="GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D__GUID-2E8E7259-7176-41AE-BE0D-634D21CF95F9">
                        <p class="notep1">See Also:</p>
                        <p>My Oracle Support note 454848.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for information about the installation and use of the Standby Statspack, which can be used to collect Redo Apply performance data from a physical standby database
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A" name="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A"></a><h3 id="SBYDB-GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A" class="sect3"><span class="enumeration_section">10.9 </span>Tuning Databases in an Active Data Guard Environment with SQL Tuning Advisor
               </h3>
               <div>
                  <p>In an Active Data Guard environment, SQL Tuning Advisor can tune a standby workload on a primary database. </p>
                  <p>Using database links, you can issue SQL Tuning Advisor statements on one database, but execute the statements on a different database.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A__GUID-4B558346-AB4D-443C-BDC3-CA745378A8CE">Tuning a Standby Database Workload on a Primary Database</p>
                     <p>In some cases, a standby database can assume a reporting role in addition to its data protection role. The standby database can have its own workload of queries, some of which may require tuning. In this scenario, you tune a standby database workload by issuing every tuning statement on the standby database, but SQL Tuning Advisor performs its analysis on the primary database by using a standby-to-primary database link.</p>
                     <p>The following are the tasks that must be performed to tune a standby database workload on a primary database. The tasks must be performed at the standby database in the order given, using the <code class="codeph">DBMS_SQLTUNE</code> PL/SQL package:
                     </p>
                     <ol>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code> statement to fetch the data from the primary database needed to create a task. Because the standby is a read-only database, the data about the task is written remotely to the primary database. A database link parameter is required in this step to write to the primary. (A database link parameter is optional in subsequent steps, because it is tied to the task created in this step.)
                           </p>
                        </li>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.EXECUTE_TUNING_TASK</code> statement. Initially, the data required to execute a task is fetched from the remote primary database. The tuning analysis process to find the possible recommendations is executed. Because the standby is a read-only database, when the results are available they are stored remotely at the primary.
                           </p>
                        </li>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.REPORT_TUNING_TASK</code> statement. The data needed to construct a report is stored remotely at the primary database. The data is fetched remotely from the primary and constructed locally at the standby.
                           </p>
                        </li>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.ACCEPT_SQL_PROFILE</code> statement. The profile data is written to the remote primary database because the standby is read-only.
                           </p>
                        </li>
                        <li>
                           <p>The SQL Profiles are made available at the standby using Redo Apply.</p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A__ORACLEDATABASEPLSQLPACKAGESANDTYPES-306A7537">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS-GUID-421606DC-588B-4BCD-8ED8-192F8B93C070" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">DBMS_SQLTUNE</code> package
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=TGSQL-GUID-642877C5-40BE-4736-8302-17F849933038" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a>for more information about local and remote SQL tuning
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D" name="GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D"></a><h3 id="SBYDB-GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D" class="sect3"><span class="enumeration_section">10.10 </span>Using Oracle Diagnostic Pack to Tune Oracle Active Data Guard Standbys
               </h3>
               <div>
                  <p>The Oracle Diagnostic Pack can be used with an Oracle Active Data Guard standby database that is open in read-only mode.</p>
                  <p>This enables you to capture performance data to the Automatic Workload Repository (AWR) for an Oracle Active Data Guard standby and to run Automatic Database Diagnostic Monitor (ADDM) analysis on the AWR data. For details about how to perform these operations, see <a href="../tgdba/gathering-database-statistics.html#TGDBA-GUID-309C107F-DC42-4119-9904-9504E9748B84" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a>.
                  </p>
               </div>
            </div><a id="SBYDB4801"></a><div class="props_rev_3"><a id="GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" name="GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A"></a><h3 id="SBYDB-GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" class="sect3"><span class="enumeration_section">10.11 </span>Managing a Snapshot Standby Database
               </h3>
               <div>
                  <p>A snapshot standby database is a fully updatable standby database. It receives and archives redo data from a primary database, but does not apply it.</p>
                  <p>Redo data received from the primary database is applied when a snapshot standby database is converted back into a physical standby database, after discarding all local updates to the snapshot standby database.</p>
                  <p>A snapshot standby database typically diverges from its primary database over time because redo data from the primary database is not applied as it is received. Local updates to the snapshot standby database cause additional divergence. The data in the primary database is fully protected however, because a snapshot standby can be converted back into a physical standby database at any time, and the redo data received from the primary is then applied.</p>
                  <p>A snapshot standby database provides disaster recovery and data protection benefits that are similar to those of a physical standby database. Snapshot standby databases are best used in scenarios where the benefit of having a temporary, updatable snapshot of the primary database justifies increased time to recover from primary database failures.</p>
               </div><a id="SBYDB00708"></a><div class="props_rev_3"><a id="GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7" name="GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7"></a><h4 id="SBYDB-GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7" class="sect4"><span class="enumeration_section">10.11.1 </span>Converting a Physical Standby Database into a Snapshot Standby Database
                  </h4>
                  <div>
                     <p>These steps describe how to convert a physical standby database into a snapshot standby database.</p>
                     <ol>
                        <li class="stepexpand"><span>Stop Redo Apply, if it is active.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted, but not open.</span></li>
                        <li class="stepexpand"><span>Ensure that a fast recovery area has been configured. It is not necessary for flashback database to be enabled.</span></li>
                        <li class="stepexpand"><span>Issue the following SQL statement to perform the conversion:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE CONVERT TO SNAPSHOT STANDBY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the snapshot standby in read/write mode by issuing the following SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE OPEN READ WRITE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7__GUID-FF284DA9-3522-4C06-B43A-BC3DAEC9D610">
                           <p class="notep1">Note:</p>
                           <p>A physical standby database that is managed by the Oracle Data Guard broker can be converted into a snapshot standby database using either DGMGRL or Oracle Enterprise Manager Cloud Control. See <a href="../dgbkr/examples-using-data-guard-broker-DGMGRL-utility.html#DGBKR3432" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> for more details.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4802"></a><div class="props_rev_3"><a id="GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE" name="GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE"></a><h4 id="SBYDB-GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE" class="sect4"><span class="enumeration_section">10.11.2 </span>Using a Snapshot Standby Database
                  </h4>
                  <div>
                     <p>A snapshot standby database can be opened in read-write mode and is fully updatable.</p>
                     <p>A snapshot standby database has the following characteristics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A snapshot standby database cannot be the target of a switchover or failover. A snapshot standby database must first be converted back into a physical standby database before performing a role transition to it.</p>
                        </li>
                        <li>
                           <p>A snapshot standby database cannot be the only standby database in a Maximum Protection Oracle Data Guard configuration.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE__GUID-F3C6A814-7DDC-483D-A89D-D14D70BC5C37">
                        <p class="notep1">Note:</p>
                        <p>Flashback Database is used to convert a snapshot standby database back into a physical standby database. Any operation that cannot be reversed using Flashback Database technology prevents a snapshot standby from being converted back to a physical standby.</p>
                        <p>For information about some of the limitations of Flashback Database, see <a href="../bradv/using-flasback-database-restore-points.html#BRADV543" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.
                        </p>
                     </div>
                  </div>
               </div><a id="SBYDB4803"></a><div class="props_rev_3"><a id="GUID-36B87563-A971-43B4-8320-52BBA27EE749" name="GUID-36B87563-A971-43B4-8320-52BBA27EE749"></a><h4 id="SBYDB-GUID-36B87563-A971-43B4-8320-52BBA27EE749" class="sect4"><span class="enumeration_section">10.11.3 </span>Converting a Snapshot Standby Database into a Physical Standby Database
                  </h4>
                  <div>
                     <p>These steps describe how to convert a snapshot standby database into a physical standby database.</p>
                     <ol>
                        <li class="stepexpand"><span>On an Oracle Real Applications Cluster (Oracle RAC) database, shut down all but one instance.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted, but not open.</span></li>
                        <li class="stepexpand"><span>Issue the following SQL statement to perform the conversion:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE CONVERT TO PHYSICAL STANDBY;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Redo data received while the database was a snapshot standby database is automatically applied when Redo Apply is started.</p>
                        <div class="infoboxnote" id="GUID-36B87563-A971-43B4-8320-52BBA27EE749__GUID-5BA3A087-383B-437B-8A12-B8FE1DD9CAE1">
                           <p class="notep1">Note:</p>
                           <p>A snapshot standby database must be opened at least once in read-write mode before it can be converted into a physical standby database.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='12674.oracle-data-pump-overview.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">
      <meta name="description" content="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">
      <title>Overview of Oracle Data Pump</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Utilities ">
      <meta property="og:description" content="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Utilities">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-utilities.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T19:07:17-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96081-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-data-pump.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-data-pump-export-utility.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Utilities">
    <meta name="dcterms.isVersionOf" content="SUTIL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-pump.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-data-pump-export-utility.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Utilities </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-pump.html" property="item" typeof="WebPage"><span property="name"> Oracle Data Pump</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Overview of Oracle Data Pump</li>
            </ol>
            <a id="GUID-17FAE261-0972-4220-A2E4-44D479F519D4" name="GUID-17FAE261-0972-4220-A2E4-44D479F519D4"></a><a id="SUTIL100"></a>
            
            <h2 id="SUTIL-GUID-17FAE261-0972-4220-A2E4-44D479F519D4" class="sect2"><span class="enumeration_chapter">1 </span> Overview of Oracle Data Pump
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.</p>
               <p>An understanding of the following topics can help you to successfully use Oracle Data Pump to its fullest advantage:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-47B26B0B-3C95-4182-ACDF-2EEDD577FC9E">Oracle Data Pump Components</a><br>Oracle Data Pump is made up of three distinct components: Command-line clients, <code class="codeph">expdp</code> and <code class="codeph">impdp</code>; the <code class="codeph">DBMS_DATAPUMP</code> PL/SQL package (also known as the Data Pump API); and the <code class="codeph">DBMS_METADATA</code> PL/SQL package (also known as the Metadata API).
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0">How Does Data Pump Move Data?</a><br>There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB">Using Oracle Data Pump With CDBs</a><br>Oracle Data Pump can migrate all, or portions of, a database from a non-CDB into a PDB, between PDBs within the same or different CDBs, and from a PDB into a non-CDB.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-8B6975D3-3BEC-4584-B416-280125EEC57E">Required Roles for Data Pump Export and Import Operations</a><br>Many Data Pump Export and Import operations require the user to have the <code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code> role, or the <code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code> role, or both.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6">What Happens During Execution of an Oracle Data Pump Job?</a><br>Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-E365D74E-12CD-495C-BA23-5A55F679C7E7">Monitoring Job Status</a><br>The Oracle Data Pump Export and Import client utilities can attach to a job in either logging mode or interactive-command mode.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-A4C5E6C1-28DE-45AF-B90C-B7FEEFF62069">Monitoring the Progress of Executing Jobs</a><br>To monitor table data transfers, you can use the <code class="codeph">V$SESSION_LONGOPS</code> dynamic performance view to monitor Oracle Data Pump jobs.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B">File Allocation</a><br>Oracle Data Pump manages several different types of files. You can use commands in interactive mode to modify how OracleData Pump allocates and handles these files.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-BAA3B679-A758-4D55-9820-432D9EB83C68">Exporting and Importing Between Different Oracle Database Releases</a><br>You can use Oracle Data Pump to migrate all or any portion of an Oracle Database between different releases of the database software.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-9030BC32-193B-4455-8DBB-4271DD44FA7A">SecureFiles LOB Considerations</a><br>When you use Oracle Data Pump Export to export SecureFiles LOBs, the export behavior depends on several things, including the Export <code class="codeph">VERSION</code> parameter value, whether ContentType is present, and whether the LOB is archived and data is cached.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-34D0DEE7-3530-42DC-BE01-C2588CC73CE5">Oracle Data Pump Exit Codes</a><br>You can review Oracle Data Pump export and import operation results in a log file, and in a process exit code.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-4443B80B-0446-4010-B8CA-2524659516BC">Auditing Data Pump Jobs</a><br>To monitor and record specific user database actions, perform auditing on Data Pump jobs with unified auditing.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E">How Does Data Pump Handle Timestamp Data?</a><br>This section describes factors that can affect successful completion of export and import jobs that involve the timestamp data types <code class="codeph">TIMESTAMP WITH TIMEZONE</code> and <code class="codeph">TIMESTAMP WITH LOCAL TIMEZONE</code>.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-72F01BF0-61F5-4775-8C7B-4E227F244866">Character Set and Globalization Support Considerations</a><br>Globalization support behavior of Data Pump Export and Import.
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-B1A6BBA2-0269-48CC-8A0E-8E3955A231C0">Oracle Data Pump Behavior with Data-Bound Collation</a><br>Oracle Data Pump supports data-bound collation (DBC).
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-data-pump.html#GUID-501A9908-BCC5-434C-8853-9A6096766B5A">Oracle Data Pump</a></p>
                  </div>
               </div>
            </div>
            <a id="SUTIL801"></a><div class="props_rev_3"><a id="GUID-47B26B0B-3C95-4182-ACDF-2EEDD577FC9E" name="GUID-47B26B0B-3C95-4182-ACDF-2EEDD577FC9E"></a><h3 id="SUTIL-GUID-47B26B0B-3C95-4182-ACDF-2EEDD577FC9E" class="sect3"><span class="enumeration_section">1.1 </span>Oracle Data Pump Components
               </h3>
               <div>
                  <p>Oracle Data Pump is made up of three distinct components: Command-line clients, <code class="codeph">expdp</code> and <code class="codeph">impdp</code>; the <code class="codeph">DBMS_DATAPUMP</code> PL/SQL package (also known as the Data Pump API); and the <code class="codeph">DBMS_METADATA</code> PL/SQL package (also known as the Metadata API).
                  </p>
                  <p>The Oracle Data Pump clients, <code class="codeph">expdp</code> and <code class="codeph">impdp</code>, start the Oracle Data Pump Export utility and Oracle Data Pump Import utility, respectively.
                  </p>
                  <p>The <code class="codeph">expdp</code> and <code class="codeph">impdp</code> clients use the procedures provided in the <code class="codeph">DBMS_DATAPUMP</code> PL/SQL package to execute export and import commands, using the parameters entered at the command line. These parameters enable the exporting and importing of data and metadata for a complete database or for subsets of a database.
                  </p>
                  <p>When metadata is moved, Data Pump uses functionality provided by the <code class="codeph">DBMS_METADATA</code> PL/SQL package. The <code class="codeph">DBMS_METADATA</code> package provides a centralized facility for the extraction, manipulation, and re-creation of dictionary metadata.
                  </p>
                  <p>The <code class="codeph">DBMS_DATAPUMP</code> and <code class="codeph">DBMS_METADATA</code> PL/SQL packages can be used independently of the Data Pump clients.
                  </p>
                  <div class="infoboxnote" id="GUID-47B26B0B-3C95-4182-ACDF-2EEDD577FC9E__GUID-F0F71B60-F143-4EE4-B5BF-40FD1CD1A594">
                     <p class="notep1">Note:</p>
                     <p>All Oracle Data Pump Export and Import processing, including the reading and writing of dump files, is done on the system (server) selected by the specified database connect string. <span class="bold">This means that for unprivileged users, the database administrator (DBA) must create directory objects for the Data Pump files that are read and written on that server file system.</span> (For security reasons, DBAs must ensure that only approved users are allowed access to directory objects.) For privileged users, a default directory object is available. 
                     </p>
                  </div>
                  <p>Starting with Oracle Database 18c, you can include the unified audit trail in either full or partial export and import operations using Oracle Data Pump. There is no change to the user interface. When you perform the export or import operations of a database, the unified audit trail is automatically included in the Oracle Data Pump dump files. See <cite>Oracle Database PL/SQL Packages and Types Reference</cite> for a description of the <code class="codeph">DBMS_DATAPUMP</code> and the <code class="codeph">DBMS_METADATA</code> packages. See <cite>Oracle Database Security Guide</cite> for information about exporting and importing the unified audit trail using Oracle Data Pump.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-data-pump-overview.html#GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5" title="Data Pump is server-based rather than client-based. Dump files, log files, and SQL files are accessed relative to server-based directory paths.">Understanding Dump, Log, and SQL File Default Locations</a></li>
                        <li><a href="../arpls/DBMS_DATAPUMP.html#ARPLS356" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                        <li><a href="../dbseg/administering-the-audit-trail.html#DBSEG-GUID-8140CCBF-77EE-4F86-A055-B9F9AB8B4573" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="SUTIL802"></a><div class="props_rev_3"><a id="GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" name="GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0"></a><h3 id="SUTIL-GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" class="sect3"><span class="enumeration_section">1.2 </span>How Does Data Pump Move Data?
               </h3>
               <div>
                  <p>There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.</p>
                  <div class="infoboxnote" id="GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0__GUID-B77A4D96-BC67-431E-9C68-09DF5865A7C4">
                     <p class="notep1">Note:</p>
                     <p>Data Pump does not load tables with disabled unique indexes. To load data into the table, the indexes must be either dropped or reenabled.</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-06B2DF71-2A66-498F-B659-1EF5859B1648">Using Data File Copying to Move Data</a><br>The fastest method of moving data is to copy the database data files to the target database without interpreting or altering the data. With this method, Data Pump Export is used to unload only structural information (metadata) into the dump file.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-F5790243-15A3-4932-9258-1A466985964D">Using Direct Path to Move Data</a><br>After data file copying, direct path is the fastest method of moving data. In this method, the SQL layer of the database is bypassed and rows are moved to and from the dump file with only minimal interpretation.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-EDB0DFE2-A20A-4FF6-B584-1D31583054AB">Using External Tables to Move Data</a><br>If you do not select data file copying, and the data cannot be moved using direct path, you can use the external tables mechanism.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-C746E643-C199-4746-AD16-13334734778F">Using Conventional Path to Move Data</a><br>Where there are conflicting table attributes, Oracle Data Pump uses conventional path to move data.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1">Using Network Link Import to Move Data</a><br>When the Import <code class="codeph">NETWORK_LINK</code> parameter is used to specify a network link for an import operation, the direct path method is used by default. Review supported database link types.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL803"></a><div class="props_rev_3"><a id="GUID-06B2DF71-2A66-498F-B659-1EF5859B1648" name="GUID-06B2DF71-2A66-498F-B659-1EF5859B1648"></a><h4 id="SUTIL-GUID-06B2DF71-2A66-498F-B659-1EF5859B1648" class="sect4"><span class="enumeration_section">1.2.1 </span>Using Data File Copying to Move Data
                  </h4>
                  <div>
                     <p>The fastest method of moving data is to copy the database data files to the target database without interpreting or altering the data. With this method, Data Pump Export is used to unload only structural information (metadata) into the dump file.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">TRANSPORT_TABLESPACES</code> parameter is used to specify a transportable tablespace export. Only metadata for the specified tablespaces is exported.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">TRANSPORTABLE=ALWAYS</code> parameter is supplied on a table mode export (specified with the <code class="codeph">TABLES</code> parameter) or a full mode export (specified with the <code class="codeph">FULL</code> parameter) or a full mode network import (specified with the <code class="codeph">FULL</code> and <code class="codeph">NETWORK_LINK</code> parameters). 
                           </p>
                        </li>
                     </ul>
                     <p>When an export operation uses data file copying, the corresponding import job always also uses data file copying. During the ensuing import operation, both the data files and the export dump file must be loaded. </p>
                     <div class="infoboxnote" id="GUID-06B2DF71-2A66-498F-B659-1EF5859B1648__GUID-79DBB18B-5A11-4880-85B9-AA9894400F69">
                        <p class="notep1">Note:</p>
                        <p>During transportable imports tablespaces are temporarily made read/write and then set back to read-only.The temporary setting change was introduced with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2) to improve performance. However, be aware that this behavior also causes the SCNs of the import job data files to change. Changing the SCNs for data files can cause issues during future transportable imports of those files.
                        </p>
                        <p>For example, if a transportable tablespace import fails at any point after the tablespaces have been made read/write (even if they are now read-only again), then the data files become corrupt. <span class="italic">They cannot be recovered.</span></p>
                        <p>Because transportable jobs are not restartable, you must restart the failed job from the beginning. You must delete the corrupt datafiles, and copy fresh versions to the target destination.</p>
                        <p>When transportable jobs are performed, it is best practice to keep a copy of the data files on the source system until the import job has successfully completed on the target system. If the import job fails for some reason, then keeping copies ensures that you can have uncorrupted copies of the data files.</p>
                     </div>
                     <p>When data is moved by using data file copying, there are some limitations regarding character set compatibility between the source and target databases.</p>
                     <p>If the source platform and the target platform are of different endianness, then you must convert the data being transported so that it is in the format of the target platform. You can use the <code class="codeph">DBMS_FILE_TRANSFER</code> PL/SQL package or the <code class="codeph">RMAN</code> <code class="codeph">CONVERT</code> command to convert the data.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-06B2DF71-2A66-498F-B659-1EF5859B1648__GUID-55F4DEF3-2F9E-4FB5-B565-39500D43E464">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for information about the RMAN <code class="codeph">CONVERT</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&amp;id=ADMIN10140" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for a description and example (including how to convert the data) of transporting tablespaces between databases
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" title="There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.">How Does Data Pump Move Data?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL2878"></a><a id="SUTIL2879"></a><a id="SUTIL804"></a><div class="props_rev_3"><a id="GUID-F5790243-15A3-4932-9258-1A466985964D" name="GUID-F5790243-15A3-4932-9258-1A466985964D"></a><h4 id="SUTIL-GUID-F5790243-15A3-4932-9258-1A466985964D" class="sect4"><span class="enumeration_section">1.2.2 </span>Using Direct Path to Move Data
                  </h4>
                  <div>
                     <p>After data file copying, direct path is the fastest method of moving data. In this method, the SQL layer of the database is bypassed and rows are moved to and from the dump file with only minimal interpretation.</p>
                     <p>Data Pump automatically uses the direct path method for loading and unloading data unless the structure of a table does not allow it. For example, if a table contains a column of type <code class="codeph">BFILE</code>, then direct path cannot be used to load that table and external tables is used instead.
                     </p>
                     <p>The following sections describe situations in which direct path cannot be used for loading and unloading.</p>
                     <div class="section" id="GUID-F5790243-15A3-4932-9258-1A466985964D__CJAJJJBH">
                        <p class="subhead3" id="GUID-F5790243-15A3-4932-9258-1A466985964D__GUID-828E0A7A-B1DE-4F6B-8074-9B3DEE67D4B7">Situations in Which Direct Path Load Is Not Used</p>
                        <p>If any of the following conditions exist for a table, then Data Pump uses external tables to load the data for that table, instead of direct path:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A domain index that is not a <code class="codeph">CONTEXT</code> type index exists for a LOB column.
                              </p>
                           </li>
                           <li>
                              <p>A global index on multipartition tables exists during a single-partition load. This case includes object tables that are partitioned.</p>
                           </li>
                           <li>
                              <p>A table is in a cluster.</p>
                           </li>
                           <li>
                              <p>There is an active trigger on a preexisting table.</p>
                           </li>
                           <li>
                              <p>Fine-grained access control is enabled in insert mode on a preexisting table.</p>
                           </li>
                           <li>
                              <p>A table contains <code class="codeph">BFILE</code> columns or columns of opaque types.
                              </p>
                           </li>
                           <li>
                              <p>A referential integrity constraint is present on a preexisting table.</p>
                           </li>
                           <li>
                              <p>A table contains <code class="codeph">VARRAY</code> columns with an embedded opaque type.
                              </p>
                           </li>
                           <li>
                              <p>The table has encrypted columns.</p>
                           </li>
                           <li>
                              <p>The table into which data is being imported is a preexisting table and at least one of the following conditions exists:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>There is an active trigger</p>
                                 </li>
                                 <li>
                                    <p>The table is partitioned</p>
                                 </li>
                                 <li>
                                    <p>Fine-grained access control is in insert mode</p>
                                 </li>
                                 <li>
                                    <p>A referential integrity constraint exists</p>
                                 </li>
                                 <li>
                                    <p>A unique index exists</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Supplemental logging is enabled, and the table has at least one LOB column.</p>
                           </li>
                           <li>
                              <p>The Data Pump command for the specified table used the <code class="codeph">QUERY</code>, <code class="codeph">SAMPLE</code>, or <code class="codeph">REMAP_DATA</code> parameter. 
                              </p>
                           </li>
                           <li>
                              <p>A table contains a column (including a <code class="codeph">VARRAY</code> column) with a <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data type, and the version of the time zone data file is different between the export and import systems. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-F5790243-15A3-4932-9258-1A466985964D__CJAEGFIF">
                        <p class="subhead3" id="GUID-F5790243-15A3-4932-9258-1A466985964D__GUID-5936D5A5-9682-49E5-AD0F-76447AB4F3CC">Situations in Which Direct Path Unload Is Not Used</p>
                        <p>If any of the following conditions exist for a table, then Data Pump uses external tables rather than direct path to unload the data:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Fine-grained access control for <code class="codeph">SELECT</code> is enabled.
                              </p>
                           </li>
                           <li>
                              <p>The table is a queue table.</p>
                           </li>
                           <li>
                              <p>The table contains one or more columns of type <code class="codeph">BFILE</code> or opaque, or an object type containing opaque columns.
                              </p>
                           </li>
                           <li>
                              <p>The table contains encrypted columns.</p>
                           </li>
                           <li>
                              <p>The table contains a column of an evolved type that needs upgrading.</p>
                           </li>
                           <li>
                              <p>The Data Pump command for the specified table used the <code class="codeph">QUERY</code>, <code class="codeph">SAMPLE</code>, or <code class="codeph">REMAP_DATA</code> parameter.
                              </p>
                           </li>
                           <li>
                              <p>Before the unload operation, the table was altered to contain a column that is NOT NULL, and also has a default value specified.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" title="There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.">How Does Data Pump Move Data?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL805"></a><div class="props_rev_3"><a id="GUID-EDB0DFE2-A20A-4FF6-B584-1D31583054AB" name="GUID-EDB0DFE2-A20A-4FF6-B584-1D31583054AB"></a><h4 id="SUTIL-GUID-EDB0DFE2-A20A-4FF6-B584-1D31583054AB" class="sect4"><span class="enumeration_section">1.2.3 </span>Using External Tables to Move Data
                  </h4>
                  <div>
                     <p>If you do not select data file copying, and the data cannot be moved using direct path, you can use the external tables mechanism.</p>
                     <p>The external tables mechanism creates an external table that maps to the dump file data for the database table. The SQL engine is then used to move the data. If possible, use the <code class="codeph">APPEND</code> hint on import to speed the copying of the data into the database. The representation of data for direct path data and external table data is the same in a dump file. Because they are the same, Oracle Data Pump can use the direct path mechanism at export time, but use external tables when the data is imported into the target database. Similarly, Oracle Data Pump can use external tables for the export, but use direct path for the import.
                     </p>
                     <p>In particular, Oracle Data Pump can use external tables in the following situations:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Loading and unloading very large tables and partitions in situations where it is advantageous to use parallel SQL capabilities</p>
                        </li>
                        <li>
                           <p>Loading tables with global or domain indexes defined on them, including partitioned object tables</p>
                        </li>
                        <li>
                           <p>Loading tables with active triggers or clustered tables</p>
                        </li>
                        <li>
                           <p>Loading and unloading tables with encrypted columns</p>
                        </li>
                        <li>
                           <p>Loading tables with fine-grained access control enabled for inserts</p>
                        </li>
                        <li>
                           <p>Loading a table not created by the import operation (the table exists before the import starts)</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-EDB0DFE2-A20A-4FF6-B584-1D31583054AB__GUID-A53E13CA-BB76-4558-8618-B6CC3A49F7A0">
                        <p class="notep1">Note:</p>
                        <p>When Oracle Data Pump uses external tables as the data access mechanism, it uses the <code class="codeph">ORACLE_DATAPUMP</code> access driver. However, be aware that the files that Data Pump creates when it uses external tables are not compatible with files created when you manually create an external table using the SQL <code class="codeph">CREATE TABLE ... ORGANIZATION EXTERNAL</code> statement.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle_datapump-access-driver.html#GUID-084DC623-9656-499C-885B-D8180C07704B" title="The ORACLE_DATAPUMP access driver provides a set of access parameters that are unique to external tables of the type ORACLE_DATAPUMP.">The ORACLE_DATAPUMP Access Driver</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-EDB0DFE2-A20A-4FF6-B584-1D31583054AB__GUID-55AC5DAD-8AF7-4DC7-9AB9-60B967F73049">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&amp;id=SQLRF50901" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about using the <code class="codeph">APPEND</code> hint
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" title="There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.">How Does Data Pump Move Data?</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="SUTIL2880"></a><div class="props_rev_3"><a id="GUID-C746E643-C199-4746-AD16-13334734778F" name="GUID-C746E643-C199-4746-AD16-13334734778F"></a><h4 id="SUTIL-GUID-C746E643-C199-4746-AD16-13334734778F" class="sect4"><span class="enumeration_section">1.2.4 </span>Using Conventional Path to Move Data
                  </h4>
                  <div>
                     <p>Where there are conflicting table attributes, Oracle Data Pump uses conventional path to move data.</p>
                     <p>In situations where there are conflicting table attributes, Oracle Data Pump is not able to load data into a table using either direct path or external tables. In such cases, conventional path is used, which can affect performance.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" title="There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.">How Does Data Pump Move Data?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL2881"></a><a id="SUTIL2882"></a><a id="SUTIL806"></a><div class="props_rev_3"><a id="GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1" name="GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1"></a><h4 id="SUTIL-GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1" class="sect4"><span class="enumeration_section">1.2.5 </span>Using Network Link Import to Move Data
                  </h4>
                  <div>
                     <p>When the Import <code class="codeph">NETWORK_LINK</code> parameter is used to specify a network link for an import operation, the direct path method is used by default. Review supported database link types.
                     </p>
                     <p>If direct path cannot be used (for example, because one of the columns is a <code class="codeph">BFILE</code>), then SQL is used to move the data using an <code class="codeph">INSERT SELECT</code> statement. (Before Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), the default was to use the <code class="codeph">INSERT SELECT</code> statement.) The <code class="codeph">SELECT</code> clause retrieves the data from the remote database over the network link. The <code class="codeph">INSERT</code> clause uses SQL to insert the data into the target database. There are no dump files involved.
                     </p>
                     <p>When the Export <code class="codeph">NETWORK_LINK</code> parameter is used to specify a network link for an export operation, the data from the remote database is written to dump files on the target database. (Note that to export from a read-only database, the <code class="codeph">NETWORK_LINK</code> parameter is required.)
                     </p>
                     <p>Because the link can identify a remotely networked database, the terms database link and network link are used interchangeably.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1__GUID-EB393636-DC5C-492B-879E-7FD63D84292F">Supported Link Types</p>
                        <p>The following types of database links are supported for use with Data Pump Export and Import:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Public fixed user</p>
                           </li>
                           <li>
                              <p>Public connected user</p>
                           </li>
                           <li>
                              <p>Public shared user (only when used by link owner)</p>
                           </li>
                           <li>
                              <p>Private shared user (only when used by link owner)</p>
                           </li>
                           <li>
                              <p>Private fixed user (only when used by link owner)</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1__GUID-8181A476-E862-44D4-8DEE-EE496E7C411E">Unsupported Link Types</p>
                        <p>The following types of database links are not supported for use with Data Pump Export and Import:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Private connected user</p>
                           </li>
                           <li>
                              <p>Current user</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3E1D4B46-E856-4ABE-ACC5-977A898BB0F1__GUID-143DC5B2-FD38-4980-BC29-6CE34E65D953">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The Export <a href="oracle-data-pump-export-utility.html#GUID-23E58D59-A477-4A87-BD0E-C82447581D0A" title="The Data Pump Export command-line utility NETWORK_LINK parameter enables an export from a (source) database identified by a valid database link. The data from the source database instance is written to a dump file set on the connected database instance.">NETWORK_LINK</a> parameter for information about performing exports over a database link
                              </p>
                           </li>
                           <li>
                              <p>The Import <a href="datapump-import-utility.html#GUID-0871E56B-07EB-43B3-91DA-D1F457CF6182" title="The Data Pump Import command-line mode NETWORK_LINK parameter enables an import from a (source) database identified by a valid database link/">NETWORK_LINK</a> parameter for information about performing imports over a database link
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-a-distributed-database.html#ADMIN12150" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for information about creating database links and the different types of links
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-3F418F02-5FE2-455A-B5AD-C1910DB3B5E0" title="There are several Oracle Data Pump methods that you can use to move data in and out of databases. You can select the method that best fits your use case.">How Does Data Pump Move Data?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL4334"></a><div class="props_rev_3"><a id="GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB" name="GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB"></a><h3 id="SUTIL-GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB" class="sect3"><span class="enumeration_section">1.3 </span>Using Oracle Data Pump With CDBs
               </h3>
               <div>
                  <p>Oracle Data Pump can migrate all, or portions of, a database from a non-CDB into a PDB, between PDBs within the same or different CDBs, and from a PDB into a non-CDB.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-BD76463C-0867-477E-983F-4329610EC458">About Using Data Pump in a Multitenant Environment</a><br>In general, using Data Pump with PDBs is identical to using Data Pump with a non-CDB. 
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71">Using Data Pump to Move Data Into a CDB</a><br>After you create an empty PDB, you can use an Oracle Data Pump full-mode export and import operation to move data into the PDB.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-C1578FB6-216F-473E-A6D5-18453D4F9021">Using Data Pump to Move PDBs Within Or Between CDBs</a><br>Data Pump export and import operations on PDBs are identical to those on non-CDBs, with the exception of how common users are handled.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-BD76463C-0867-477E-983F-4329610EC458" name="GUID-BD76463C-0867-477E-983F-4329610EC458"></a><h4 id="SUTIL-GUID-BD76463C-0867-477E-983F-4329610EC458" class="sect4"><span class="enumeration_section">1.3.1 </span>About Using Data Pump in a Multitenant Environment
                  </h4>
                  <div>
                     <p>In general, using Data Pump with PDBs is identical to using Data Pump with a non-CDB. </p>
                     <p>A multitenant container database (CDB) is an Oracle database that includes zero, one, or many user-created pluggable databases (PDBs). A PDB is a portable set of schemas, schema objects, and nonschema objects that appear to an Oracle Net client as a non-CDB. A non-CDB is an Oracle database that is not a CDB.</p>
                     <p>You can use Data Pump to migrate all or some of a database in the following scenarios:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>From a non-CDB into a PDB</p>
                        </li>
                        <li>
                           <p>Between PDBs within the same or different CDBs</p>
                        </li>
                        <li>
                           <p>From a PDB into a non-CDB</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-BD76463C-0867-477E-983F-4329610EC458__GUID-140B9CD4-E02E-4A16-9410-B036E8310254">
                        <p class="notep1">Note:</p>
                        <p>Data Pump does not support any CDB-wide operations. If you are connected to the root or seed database of a CDB, then Data Pump issues the following warning:</p><pre class="pre codeblock"><code>ORA-39357: Warning: Oracle Data Pump operations are not typically needed when connected to the root or seed of a container database.</code></pre></div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB" title="Oracle Data Pump can migrate all, or portions of, a database from a non-CDB into a PDB, between PDBs within the same or different CDBs, and from a PDB into a non-CDB.">Using Oracle Data Pump With CDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL4335"></a><div class="props_rev_3"><a id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" name="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71"></a><h4 id="SUTIL-GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" class="sect4"><span class="enumeration_section">1.3.2 </span>Using Data Pump to Move Data Into a CDB
                  </h4>
                  <div>
                     <p>After you create an empty PDB, you can use an Oracle Data Pump full-mode export and import operation to move data into the PDB.</p>
                     <p>You can import data with or without the transportable option. If you use the transportable option on a full mode export or import, then it is referred to as a full transportable export/import. </p>
                     <p>When the transportable option is used, export and import use both transportable tablespace data movement and conventional data movement; the latter for those tables that reside in non-transportable tablespaces such as <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code>. Using the transportable option can reduce the export time and especially, the import time, because table data does not need to be unloaded and reloaded and index structures in user tablespaces do not need to be recreated.
                     </p>
                     <p>Note the following requirements when using Data Pump to move data into a CDB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To administer a multitenant environment, you must have the <code class="codeph">CDB_DBA</code> role.
                           </p>
                        </li>
                        <li>
                           <p>Full database exports from Oracle Database 11.2.0.2 and earlier can be imported into Oracle Database 12c (CDB or non-CDB). However, Oracle recommends that you first upgrade the source database to Oracle Database 11g release 2 (11.2.0.3 or later), so that information about registered options and components is included in the export.</p>
                        </li>
                        <li>
                           <p>When migrating Oracle Database 11g release 2 (11.2.0.3 or later) to a CDB (or to a non-CDB) using either full database export or full transportable database export, you must set the Data Pump Export parameter <code class="codeph">VERSION=12</code> in order to generate a dump file that is ready for import into Oracle Database 12c. If you do not set <code class="codeph">VERSION=12</code>, then the export file that is generated does not contain complete information about registered database options and components. 
                           </p>
                        </li>
                        <li>
                           <p>Network-based full transportable imports require use of the <code class="codeph">FULL=YES</code>, <code class="codeph">TRANSPORTABLE=ALWAYS</code>, and <code class="codeph">TRANSPORT_DATAFILES=<span class="variable" translate="no">datafile_name</span></code> parameters. When the source database is Oracle Database 11g release 11.2.0.3 or later, but earlier than Oracle Database 12c Release 1 (12.1), the <code class="codeph">VERSION=12</code> parameter is also required.
                           </p>
                        </li>
                        <li>
                           <p>File-based full transportable imports only require use of the <code class="codeph">TRANSPORT_DATAFILES=<span class="variable" translate="no">datafile_name</span></code> parameter. Data Pump Import infers the presence of the <code class="codeph">TRANSPORTABLE=ALWAYS</code> and <code class="codeph">FULL=YES</code> parameters.
                           </p>
                        </li>
                        <li>
                           <p>As of Oracle Database 12c release 2 (12.2), in a multitenant container database (CDB) environment, the default Data Pump directory object, <code class="codeph">DATA_PUMP_DIR</code>, is defined as a unique path for each PDB in the CDB. This unique path is defined whether the <code class="codeph">PATH_PREFIX</code> clause of the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is defined or is not defined for relative paths. 
                           </p>
                        </li>
                        <li>
                           <p>Starting in Oracle Database 19c, the <code class="codeph">credential</code> parameter of <code class="codeph">impdp</code> specifies the name of the credential object that contains the user name and password required to access an object store bucket. You can also specify a default credential using the PDB property named <code class="codeph">DEFAULT_CREDENTIAL</code>. When you run <code class="codeph">impdb</code> with then default credential, you prefix the dump file name with <code class="codeph">DEFAULT_CREDENTIAL:</code> and you do not specify the <code class="codeph">credential</code> parameter. 
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-13F8CE65-B6F4-4A75-AB27-5F6268C39C84">
                        <p class="titleinexample">Example 1-1 Importing a Table into a PDB</p>
                        <p>To specify a particular PDB for the export/import operation, supply a connect identifier in the connect string when you start Data Pump. For example, to import data to a PDB named <code class="codeph">pdb1</code>, you could enter the following on the Data Pump command line:
                        </p><pre class="pre codeblock"><code>impdp hr@pdb1 DIRECTORY=dpump_dir1 DUMPFILE=hr.dmp TABLES=employees
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-30BBDAEB-AC3A-4672-BC72-09052CFBFB35">
                        <p class="titleinexample">Example 1-2 Specifying a Credential When Importing Data</p>
                        <p>This example assumes that you created a credential named <code class="codeph">HR_CRED</code> using <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> as follows: 
                        </p><pre class="pre codeblock"><code>BEGIN
  DBMS_CLOUD.CREATE_CREDENTIAL(
    credential_name =&gt; 'HR_CRED',
    username =&gt; 'atpc_user@oracle.com',
    password =&gt; '<span class="italic">password</span>'
  );
END;
/</code></pre><p>The following command specifies credential <code class="codeph">HR_CRED</code>, and specifies the a file stored in an object store. The URL of the file is <code class="codeph">https://example.com/ostore/dnfs/myt.dmp</code>.
                        </p><pre class="pre codeblock"><code>impdp hr@pdb1 \
      table_exists_action=replace \
      credential=HR_CRED \
      parallel=16 \
      dumpfile=https://example.com/ostore/dnfs/myt.dmp</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-73EF3BB4-46CA-44E4-B67C-1DD09FC48DA3">
                        <p class="titleinexample">Example 1-3 Importing Data Using a Default Credential</p>
                        <ol id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__OL_D5V_NX3_QFB">
                           <li>
                              <p>You create a credential named <code class="codeph">HR_CRED</code> using <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> as follows: 
                              </p><pre class="pre codeblock"><code>BEGIN
  DBMS_CLOUD.CREATE_CREDENTIAL(
    credential_name =&gt; 'HR_CRED',
    username =&gt; 'atpc_user@oracle.com',
    password =&gt; '<span class="italic">password</span>'
  );
END;
/</code></pre></li>
                           <li>
                              <p>You set the PDB property <code class="codeph">DEFAULT_CREDENTIAL</code> as follows:
                              </p><pre class="pre codeblock"><code>ALTER DATABASE PROPERTY SET DEFAULT_CREDENTIAL = 'ADMIN.HR_CRED'</code></pre></li>
                           <li>
                              <p>The following command specifies the default credential as a prefix to the dump file location <code class="codeph">https://example.com/ostore/dnfs/myt.dmp</code>:
                              </p><pre class="pre codeblock"><code>impdp hr@pdb1 \
      table_exists_action=replace \
      parallel=16 \
      dumpfile=default_credential:https://example.com/ostore/dnfs/myt.dmp</code></pre><p>Note that the <code class="codeph">credential</code> parameter is not specified.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__GUID-3144C863-B387-49F4-AEDF-010D15E4D2B1">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71__UL_BYJ_FW3_QFB">
                           <li>
                              <p><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG-GUID-6AD89576-526F-4D6B-A539-ADF4B840819F" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> to learn how to configure SSL authentication, which is necessary for object store access
                              </p>
                           </li>
                           <li>
                              <p><a href="datapump-import-utility.html#SUTIL-GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about using Data Pump Import to load files to the object store
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB" title="Oracle Data Pump can migrate all, or portions of, a database from a non-CDB into a PDB, between PDBs within the same or different CDBs, and from a PDB into a non-CDB.">Using Oracle Data Pump With CDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL4336"></a><div class="props_rev_3"><a id="GUID-C1578FB6-216F-473E-A6D5-18453D4F9021" name="GUID-C1578FB6-216F-473E-A6D5-18453D4F9021"></a><h4 id="SUTIL-GUID-C1578FB6-216F-473E-A6D5-18453D4F9021" class="sect4"><span class="enumeration_section">1.3.3 </span>Using Data Pump to Move PDBs Within Or Between CDBs
                  </h4>
                  <div>
                     <p>Data Pump export and import operations on PDBs are identical to those on non-CDBs, with the exception of how common users are handled.</p>
                     <div class="section">
                        <p>If you have created a common user in a CDB, then a full database or privileged schema export of that user from within any PDB in the CDB results in a standard <code class="codeph">CREATE USER C##common name</code> DDL statement being performed upon import. The statement will fail because of the common user prefix <code class="codeph">C##</code> on the user name. The following error message will be returned:
                        </p><pre class="pre codeblock"><code>ORA-65094:invalid local user or role name
</code></pre><p>In the PDB being exported, if you have created local objects in that user's schema and you want to import them, then either make sure a common user of the same name already exists in the target CDB instance or use the Data Pump Import <code class="codeph">REMAP_SCHEMA</code> parameter on the <code class="codeph">impdp</code> command, as follows:
                        </p><pre class="pre codeblock"><code>REMAP_SCHEMA=C##<span class="variable" translate="no">common name:local user name</span>
</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-data-pump-export-utility.html#GUID-079769D8-40F4-432F-88AD-E7264D7A2E2D" title="You can use Data Pump to carry out a full database export by using the FULL parameter.">Full Mode</a></li>
                           <li><a href="datapump-import-utility.html#GUID-E27D2DC9-A6D8-4F0B-AB72-6BF526B3AA18" title="A full import is specified using the FULL parameter.">Full Import Mode</a></li>
                           <li><a href="oracle-original-export-utility.html#GUID-1EAD5074-652B-46AB-9F4B-B9902E3F2BDE" title="Describes factors to consider when using Export across a network.">Network Considerations</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-45B17B65-20F2-4128-9A39-B1B0F5E323BB" title="Oracle Data Pump can migrate all, or portions of, a database from a non-CDB into a PDB, between PDBs within the same or different CDBs, and from a PDB into a non-CDB.">Using Oracle Data Pump With CDBs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL807"></a><div class="props_rev_3"><a id="GUID-8B6975D3-3BEC-4584-B416-280125EEC57E" name="GUID-8B6975D3-3BEC-4584-B416-280125EEC57E"></a><h3 id="SUTIL-GUID-8B6975D3-3BEC-4584-B416-280125EEC57E" class="sect3"><span class="enumeration_section">1.4 </span>Required Roles for Data Pump Export and Import Operations
               </h3>
               <div>
                  <p>Many Data Pump Export and Import operations require the user to have the <code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code> role, or the <code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code> role, or both.
                  </p>
                  <p>These roles are automatically defined for Oracle databases when you run the standard scripts that are part of database creation. (Note that although the names of these roles contain the word FULL, these roles actually apply to any privileged operations in any export or import mode, not only Full mode.)</p>
                  <p>The <code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code> role affects only export operations. The <code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code> role affects import operations and operations that use the Import <code class="codeph">SQLFILE</code> parameter. These roles allow users performing exports and imports to do the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Perform the operation outside the scope of their schema</p>
                     </li>
                     <li>
                        <p>Monitor jobs that were initiated by another user</p>
                     </li>
                     <li>
                        <p>Export objects (such as tablespace definitions) and import objects (such as directory definitions) that unprivileged users cannot reference</p>
                     </li>
                  </ul>
                  <p>These are powerful roles. Database administrators should use caution when granting these roles to users.</p>
                  <p>Although the <code class="codeph">SYS</code> schema does not have either of these roles assigned to it, all security checks performed by Data Pump that require these roles also grant access to the <code class="codeph">SYS</code> schema.
                  </p>
                  <div class="infoboxnote" id="GUID-8B6975D3-3BEC-4584-B416-280125EEC57E__GUID-51ABDCC3-9DC6-44B6-882E-7344F314E00D">
                     <p class="notep1">Note:</p>
                     <p>If you receive an <code class="codeph">ORA-39181: Only Partial Data Exported Due to Fine Grain Access Control</code> error message, then see the My Oracle Support note 422480.1 for information about security during an export of table data with fine-grained access control policies enabled.:
                     </p>
                     <p><a href="https://support.oracle.com/rs?type=doc&amp;id=422480.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=422480.1</a></p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-8B6975D3-3BEC-4584-B416-280125EEC57E__GUID-75AB188A-BC01-4230-9879-B9F91687A311">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG4414" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for more information about predefined roles in an Oracle Database installation
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL808"></a><div class="props_rev_3"><a id="GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" name="GUID-6BDC1CC8-8596-402D-B016-602985B97AB6"></a><h3 id="SUTIL-GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" class="sect3"><span class="enumeration_section">1.5 </span>What Happens During Execution of an Oracle Data Pump Job?
               </h3>
               <p>Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-E4F373D6-0D0C-4FBD-AEC1-FDC91F46BD28">Coordination of a Job</a><br>A master process is created to coordinate every Data Pump Export and Data Pump Import job.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-B9A676E5-B3CB-417B-BC97-65FE33448C2F">Tracking Progress Within a Job</a><br>While the data and metadata are being transferred, a master table is used to track the progress within a job.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-DB178A4E-36D4-4ECF-932A-6DE26FE2C2EF">Filtering Data and Metadata During a Job</a><br>You can use the <code class="codeph">EXCLUDE</code> and <code class="codeph">INCLUDE</code> parameters to filter the types of objects that are exported and imported.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-15CF2160-0F2C-49D4-9FCC-8B60BD111331">Transforming Metadata During a Job</a><br>Transformations on the metadata can be done using the Data Pump Import parameters <code class="codeph">REMAP_DATAFILE</code>, <code class="codeph">REMAP_SCHEMA</code>, <code class="codeph">REMAP_TABLE,REMAP_TABLESPACE</code>, <code class="codeph">TRANSFORM,</code> and <code class="codeph">PARTITION_OPTIONS</code>.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-AE83786E-EFC9-4552-BF79-AC72CE063EB6">Maximizing Job Performance</a><br>Data Pump can employ multiple worker processes, running in parallel, to increase job performance.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-31DA185F-92E9-49F7-8431-B10354199C5A">Loading and Unloading of Data</a><br>The worker processes unload and load metadata and table data. For export, all metadata and data are unloaded in parallel, with the exception of jobs that use transportable tablespace. For import, objects must be created in the correct dependency order. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL809"></a><div class="props_rev_3"><a id="GUID-E4F373D6-0D0C-4FBD-AEC1-FDC91F46BD28" name="GUID-E4F373D6-0D0C-4FBD-AEC1-FDC91F46BD28"></a><h4 id="SUTIL-GUID-E4F373D6-0D0C-4FBD-AEC1-FDC91F46BD28" class="sect4"><span class="enumeration_section">1.5.1 </span>Coordination of a Job
                  </h4>
                  <div>
                     <p>A master process is created to coordinate every Data Pump Export and Data Pump Import job.</p>
                     <p>The master process controls the entire job, including communicating with the clients, creating and controlling a pool of worker processes, and performing logging operations.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" title="Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.">What Happens During Execution of an Oracle Data Pump Job?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL810"></a><div class="props_rev_3"><a id="GUID-B9A676E5-B3CB-417B-BC97-65FE33448C2F" name="GUID-B9A676E5-B3CB-417B-BC97-65FE33448C2F"></a><h4 id="SUTIL-GUID-B9A676E5-B3CB-417B-BC97-65FE33448C2F" class="sect4"><span class="enumeration_section">1.5.2 </span>Tracking Progress Within a Job
                  </h4>
                  <div>
                     <p>While the data and metadata are being transferred, a master table is used to track the progress within a job.</p>
                     <p>The master table is implemented as a user table within the database. The specific function of the master table for export and import jobs is as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For export jobs, the master table records the location of database objects within a dump file set. Export builds and maintains the master table for the duration of the job. At the end of an export job, the content of the master table is written to a file in the dump file set. </p>
                        </li>
                        <li>
                           <p>For import jobs, the master table is loaded from the dump file set and is used to control the sequence of operations for locating objects that need to be imported into the target database. </p>
                        </li>
                     </ul>
                     <p>The master table is created in the schema of the current user performing the export or import operation. Therefore, that user must have the <code class="codeph">CREATE TABLE</code> system privilege and a sufficient tablespace quota for creation of the master table. The name of the master table is the same as the name of the job that created it. Therefore, you cannot explicitly give a Data Pump job the same name as a preexisting table or view. 
                     </p>
                     <p>For all operations, the information in the master table is used to restart a job. (Note that transportable jobs are not restartable.)</p>
                     <p>The master table is either retained or dropped, depending on the circumstances, as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Upon successful job completion, the master table is dropped. You can override this by setting the Data Pump <code class="codeph">KEEP_MASTER=YES</code> parameter for the job. 
                           </p>
                        </li>
                        <li>
                           <p>The master table is automatically retained for jobs that do not complete successfully.</p>
                        </li>
                        <li>
                           <p>If a job is stopped using the <code class="codeph">STOP_JOB</code> interactive command, then the master table is retained for use in restarting the job.
                           </p>
                        </li>
                        <li>
                           <p>If a job is killed using the <code class="codeph">KILL_JOB</code> interactive command, then the master table is dropped and the job cannot be restarted.
                           </p>
                        </li>
                        <li>
                           <p>If a job terminates unexpectedly, then the master table is retained. You can delete it if you do not intend to restart the job.</p>
                        </li>
                        <li>
                           <p>If a job stops before it starts running (that is, before any database objects have been copied), then the master table is dropped.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B9A676E5-B3CB-417B-BC97-65FE33448C2F__GUID-D903556B-4797-4296-B374-182932E81663">
                        <p class="notep1">See Also:</p>
                        <p><a href="oracle-data-pump-export-utility.html#GUID-C146E99F-CBAB-43B4-A802-A8D5AD5898AE" title="The Data Pump Export command-line utility JOB_NAME parameter identifies the export job in subsequent actions, such as when using ATTACH to attach to a job, or to identify a job using DBA_DATAPUMP_JOBS or USER_DATAPUMP_JOBS views.">JOB_NAME</a> for more information about how job names are formed
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" title="Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.">What Happens During Execution of an Oracle Data Pump Job?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL811"></a><div class="props_rev_3"><a id="GUID-DB178A4E-36D4-4ECF-932A-6DE26FE2C2EF" name="GUID-DB178A4E-36D4-4ECF-932A-6DE26FE2C2EF"></a><h4 id="SUTIL-GUID-DB178A4E-36D4-4ECF-932A-6DE26FE2C2EF" class="sect4"><span class="enumeration_section">1.5.3 </span>Filtering Data and Metadata During a Job
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">EXCLUDE</code> and <code class="codeph">INCLUDE</code> parameters to filter the types of objects that are exported and imported.
                     </p>
                     <p>Within the master table, specific objects are assigned attributes such as name or owning schema. Objects also belong to a class of objects (such as <code class="codeph">TABLE</code>, <code class="codeph">INDEX,</code> or <code class="codeph">DIRECTORY</code>). The class of an object is called its object type. You can use the <code class="codeph">EXCLUDE</code> and <code class="codeph">INCLUDE</code> parameters to restrict the types of objects that are exported and imported. The objects can be based upon the name of the object or the name of the schema that owns the object. You can also specify data-specific filters to restrict the rows that are exported and imported.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DB178A4E-36D4-4ECF-932A-6DE26FE2C2EF__GUID-64C90897-556D-466A-AA03-C040A8D9340F">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="oracle-data-pump-export-utility.html#GUID-1F85C939-E439-4436-BFEF-6DC7E167C912" title="Data Pump Export provides data and metadata filtering capability. This capability helps you limit the type of information that is exported.">Filtering During Export Operations</a></p>
                           </li>
                           <li>
                              <p><a href="datapump-import-utility.html#GUID-107CA775-350C-4CCE-9601-E1E810589B40" title="Data Pump Import provides data and metadata filtering capability, which can help you limit the type of information that is imported..">Filtering During Import Operations</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" title="Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.">What Happens During Execution of an Oracle Data Pump Job?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL812"></a><div class="props_rev_3"><a id="GUID-15CF2160-0F2C-49D4-9FCC-8B60BD111331" name="GUID-15CF2160-0F2C-49D4-9FCC-8B60BD111331"></a><h4 id="SUTIL-GUID-15CF2160-0F2C-49D4-9FCC-8B60BD111331" class="sect4"><span class="enumeration_section">1.5.4 </span>Transforming Metadata During a Job
                  </h4>
                  <div>
                     <p>Transformations on the metadata can be done using the Data Pump Import parameters <code class="codeph">REMAP_DATAFILE</code>, <code class="codeph">REMAP_SCHEMA</code>, <code class="codeph">REMAP_TABLE,REMAP_TABLESPACE</code>, <code class="codeph">TRANSFORM,</code> and <code class="codeph">PARTITION_OPTIONS</code>.
                     </p>
                     <p>When you are moving data from one database to another, it is often useful to perform transformations on the metadata for remapping storage between tablespaces or redefining the owner of a particular set of objects.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" title="Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.">What Happens During Execution of an Oracle Data Pump Job?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL813"></a><div class="props_rev_3"><a id="GUID-AE83786E-EFC9-4552-BF79-AC72CE063EB6" name="GUID-AE83786E-EFC9-4552-BF79-AC72CE063EB6"></a><h4 id="SUTIL-GUID-AE83786E-EFC9-4552-BF79-AC72CE063EB6" class="sect4"><span class="enumeration_section">1.5.5 </span>Maximizing Job Performance
                  </h4>
                  <div>
                     <p>Data Pump can employ multiple worker processes, running in parallel, to increase job performance.</p>
                     <p>Use the <code class="codeph">PARALLEL</code> parameter to set a degree of parallelism that takes maximum advantage of current conditions. For example, to limit the effect of a job on a production system, the database administrator (DBA) might want to restrict the parallelism. The degree of parallelism can be reset at any time during a job. For example, <code class="codeph">PARALLEL</code> could be set to 2 during production hours to restrict a particular job to only two degrees of parallelism, and during nonproduction hours it could be reset to 8. The parallelism setting is enforced by the master process, which allocates work to be executed to worker processes that perform the data and metadata processing within an operation. These worker processes operate in parallel. For recommendations on setting the degree of parallelism, see the Export PARALLEL and Import PARALLEL parameter descriptions.
                     </p>
                     <div class="infoboxnote" id="GUID-AE83786E-EFC9-4552-BF79-AC72CE063EB6__GUID-75136923-D9BA-4537-871A-CE2DD6CBC98F">
                        <p class="notep1">Note:</p>
                        <p>The ability to adjust the degree of parallelism is available only in the Enterprise Edition of Oracle Database.</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AE83786E-EFC9-4552-BF79-AC72CE063EB6__GUID-A1A74F5D-703D-4D0E-B093-E37DBDC419BA">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="oracle-data-pump-export-utility.html#GUID-55E6AC71-5CDE-410E-AB02-798AEC54F411__CIHGACIA">Using PARALLEL During An Export In An Oracle RAC Environment</a></p>
                           </li>
                           <li>
                              <p><a href="datapump-import-utility.html#GUID-3081A258-0C23-40B0-8487-9C7A0D248E23__CIHFEFCD">Using PARALLEL During An Import In An Oracle RAC Environment</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" title="Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.">What Happens During Execution of an Oracle Data Pump Job?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL814"></a><div class="props_rev_3"><a id="GUID-31DA185F-92E9-49F7-8431-B10354199C5A" name="GUID-31DA185F-92E9-49F7-8431-B10354199C5A"></a><h4 id="SUTIL-GUID-31DA185F-92E9-49F7-8431-B10354199C5A" class="sect4"><span class="enumeration_section">1.5.6 </span>Loading and Unloading of Data
                  </h4>
                  <div>
                     <p>The worker processes unload and load metadata and table data. For export, all metadata and data are unloaded in parallel, with the exception of jobs that use transportable tablespace. For import, objects must be created in the correct dependency order. </p>
                     <p>If there are enough objects of the same type to make use of multiple workers, then the objects will be imported by multiple worker processes. Some metadata objects have interdependencies which require one worker process to create them serially to satisfy those dependencies. Worker processes are created as needed until the number of worker processes equals the value supplied for the <code class="codeph">PARALLEL</code> command-line parameter. The number of active worker processes can be reset throughout the life of a job. Worker processes can be started on different nodes in an Oracle Real Application Clusters (Oracle RAC) environment.
                     </p>
                     <div class="infoboxnote" id="GUID-31DA185F-92E9-49F7-8431-B10354199C5A__GUID-4DF1D2B5-224A-4302-A8D3-50A4A8043CF7">
                        <p class="notep1">Note:</p>
                        <p>The value of <code class="codeph">PARALLEL</code> is restricted to 1 in the Standard Edition of Oracle Database.
                        </p>
                     </div>
                     <p>When a worker process is assigned the task of loading or unloading a very large table or partition, it may choose to use the external tables access method to make maximum use of parallel execution. In such a case, the worker process becomes a parallel execution coordinator. The actual loading and unloading work is divided among some number of parallel I/O execution processes (sometimes called slaves) allocated from a pool of available processes in an Oracle RAC environment.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-data-pump-export-utility.html#GUID-55E6AC71-5CDE-410E-AB02-798AEC54F411">PARALLEL</a></li>
                           <li><a href="datapump-import-utility.html#GUID-3081A258-0C23-40B0-8487-9C7A0D248E23">PARALLEL</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-6BDC1CC8-8596-402D-B016-602985B97AB6" title="Oracle Data Pump jobs use a master table, a master process, and worker processes to perform the work and keep track of progress.">What Happens During Execution of an Oracle Data Pump Job?</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="SUTIL815"></a><div class="props_rev_3"><a id="GUID-E365D74E-12CD-495C-BA23-5A55F679C7E7" name="GUID-E365D74E-12CD-495C-BA23-5A55F679C7E7"></a><h3 id="SUTIL-GUID-E365D74E-12CD-495C-BA23-5A55F679C7E7" class="sect3"><span class="enumeration_section">1.6 </span>Monitoring Job Status
               </h3>
               <div>
                  <p>The Oracle Data Pump Export and Import client utilities can attach to a job in either logging mode or interactive-command mode.</p>
                  <p>In logging mode, real-time detailed status about the job is automatically displayed during job execution. The information displayed can include the job and parameter descriptions, an estimate of the amount of data to be processed, a description of the current operation or item being processed, files used during the job, any errors encountered, and the final job state (Stopped or Completed).</p>
                  <p>In interactive-command mode, job status can be displayed on request. The information displayed can include the job description and state, a description of the current operation or item being processed, files being written, and a cumulative status.</p>
                  <p>You can also have a log file written during the execution of a job. The log file summarizes the progress of the job, lists any errors encountered during execution of the job, and records the completion status of the job.</p>
                  <p>As an alternative to determine job status or other information about Oracle Data Pump jobs, you can query the <code class="codeph">DBA_DATAPUMP_JOBS</code>, <code class="codeph">USER_DATAPUMP_JOBS</code>, or <code class="codeph">DBA_DATAPUMP_SESSIONS</code> views. Refer to <cite>Oracle Database Reference</cite> for more information. 
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../refrn/DBA_DATAPUMP_JOBS.html#REFRN23338" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="SUTIL816"></a><div class="props_rev_3"><a id="GUID-A4C5E6C1-28DE-45AF-B90C-B7FEEFF62069" name="GUID-A4C5E6C1-28DE-45AF-B90C-B7FEEFF62069"></a><h3 id="SUTIL-GUID-A4C5E6C1-28DE-45AF-B90C-B7FEEFF62069" class="sect3"><span class="enumeration_section">1.7 </span>Monitoring the Progress of Executing Jobs
               </h3>
               <div>
                  <p>To monitor table data transfers, you can use the <code class="codeph">V$SESSION_LONGOPS</code> dynamic performance view to monitor Oracle Data Pump jobs.
                  </p>
                  <p>Oracle Data Pump operations that transfer table data (export and import) maintain an entry in the <code class="codeph">V$SESSION_LONGOPS</code> dynamic performance view indicating the job progress (in megabytes of table data transferred). The entry contains the estimated transfer size and is periodically updated to reflect the actual amount of data transferred.
                  </p>
                  <p>Use of the <code class="codeph">COMPRESSION</code>, <code class="codeph">ENCRYPTION</code>, <code class="codeph">ENCRYPTION_ALGORITHM</code>, <code class="codeph">ENCRYPTION_MODE</code>, <code class="codeph">ENCRYPTION_PASSWORD</code>, <code class="codeph">QUERY</code>, and <code class="codeph">REMAP_DATA</code> parameters are not reflected in the determination of estimate values.
                  </p>
                  <p>The usefulness of the estimate value for export operations depends on the type of estimation requested when the operation was initiated, and it is updated as required if exceeded by the actual transfer amount. The estimate value for import operations is exact.</p>
                  <p>The <code class="codeph">V$SESSION_LONGOPS</code> columns that are relevant to a Data Pump job are as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">USERNAME</code>: Job owner
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">OPNAME</code>: Job name
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TARGET_DESC</code>: Job operation
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">SOFAR</code>: Megabytes transferred thus far during the job
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TOTALWORK</code> Estimated number of megabytes in the job
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UNITS</code>: Megabytes (MB)
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">MESSAGE</code>: A formatted status message that uses the following format: 
                        </p><pre class="pre codeblock"><code>'<span class="variable" translate="no">job_name</span>: <span class="variable" translate="no">operation_name</span> : <span class="variable" translate="no">nnn</span> out of <span class="variable" translate="no">mmm</span> MB done'</code></pre></li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL817"></a><div class="props_rev_3"><a id="GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B" name="GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B"></a><h3 id="SUTIL-GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B" class="sect3"><span class="enumeration_section">1.8 </span>File Allocation
               </h3>
               <div>
                  <p>Oracle Data Pump manages several different types of files. You can use commands in interactive mode to modify how OracleData Pump allocates and handles these files.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-29E88FEC-5F68-4841-B1B2-D4CD8B2880EE">Understanding File Allocation in Data Pump</a><br>Understanding how Data Pump allocates and handles files will help you to use Export and Import to their fullest advantage.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-8C1CD0EA-F6F8-4627-867E-956ABCB984F0">Specifying Files and Adding Additional Dump Files</a><br>For export operations, you can specify dump files at the time the job is defined, and also at a later time during the operation.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-02A2E765-03BA-4097-B3A3-67B006C749AC">Default Locations for Dump, Log, and SQL Files</a><br>Review these topics to understand the Oracle Data Pump default file locations, and to understand how these locations are affected when you are using Oracle RAC, Oracle Automatic Storage Management, and multitenant architecture.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-6F532CA9-CE90-47D6-84ED-AD10F1E18056">Using Substitution Variables</a><br>Instead of, or in addition to, listing specific file names, you can use the <code class="codeph">DUMPFILE</code> parameter during export operations to specify multiple dump files, by using a substitution variable in the file name. This is called a dump file template.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-29E88FEC-5F68-4841-B1B2-D4CD8B2880EE" name="GUID-29E88FEC-5F68-4841-B1B2-D4CD8B2880EE"></a><h4 id="SUTIL-GUID-29E88FEC-5F68-4841-B1B2-D4CD8B2880EE" class="sect4"><span class="enumeration_section">1.8.1 </span>Understanding File Allocation in Data Pump
                  </h4>
                  <div>
                     <p>Understanding how Data Pump allocates and handles files will help you to use Export and Import to their fullest advantage.</p>
                     <p>Data Pump jobs manage the following types of files:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Dump files to contain the data and metadata that is being moved.</p>
                        </li>
                        <li>
                           <p>Log files to record the messages associated with an operation.</p>
                        </li>
                        <li>
                           <p>SQL files to record the output of a SQLFILE operation. A SQLFILE operation is started using the Data Pump Import <code class="codeph">SQLFILE</code> parameter and results in all the SQL DDL that Import would be executing based on other parameters, being written to a SQL file.
                           </p>
                        </li>
                        <li>
                           <p>Files specified by the <code class="codeph">DATA_FILES</code> parameter during a transportable import.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-29E88FEC-5F68-4841-B1B2-D4CD8B2880EE__GUID-4FD8114C-E2B6-4B7A-B39E-A59B26BD5E28">
                        <p class="notep1">Note:</p>
                        <p>If your Data Pump job generates errors related to Network File Storage (NFS), then consult the installation guide for your platform to determine the correct NFS mount settings.</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B" title="Oracle Data Pump manages several different types of files. You can use commands in interactive mode to modify how OracleData Pump allocates and handles these files.">File Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL818"></a><div class="props_rev_3"><a id="GUID-8C1CD0EA-F6F8-4627-867E-956ABCB984F0" name="GUID-8C1CD0EA-F6F8-4627-867E-956ABCB984F0"></a><h4 id="SUTIL-GUID-8C1CD0EA-F6F8-4627-867E-956ABCB984F0" class="sect4"><span class="enumeration_section">1.8.2 </span>Specifying Files and Adding Additional Dump Files
                  </h4>
                  <div>
                     <p>For export operations, you can specify dump files at the time the job is defined, and also at a later time during the operation.</p>
                     <p>If you discover that space is running low during an export operation, then you can add additional dump files by using the Data Pump Export <code class="codeph">ADD_FILE</code> command in interactive mode. 
                     </p>
                     <p>For import operations, all dump files must be specified at the time the job is defined. </p>
                     <p>Log files and SQL files overwrite previously existing files. For dump files, you can use the Export <code class="codeph">REUSE_DUMPFILES</code> parameter to specify whether to overwrite a preexisting dump file.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B" title="Oracle Data Pump manages several different types of files. You can use commands in interactive mode to modify how OracleData Pump allocates and handles these files.">File Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-02A2E765-03BA-4097-B3A3-67B006C749AC" name="GUID-02A2E765-03BA-4097-B3A3-67B006C749AC"></a><h4 id="SUTIL-GUID-02A2E765-03BA-4097-B3A3-67B006C749AC" class="sect4"><span class="enumeration_section">1.8.3 </span>Default Locations for Dump, Log, and SQL Files
                  </h4>
                  <div>
                     <p>Review these topics to understand the Oracle Data Pump default file locations, and to understand how these locations are affected when you are using Oracle RAC, Oracle Automatic Storage Management, and multitenant architecture.</p>
                     <p></p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5">Understanding Dump, Log, and SQL File Default Locations</a><br>Data Pump is server-based rather than client-based. Dump files, log files, and SQL files are accessed relative to server-based directory paths.
                        </li>
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-8E63A90B-8E72-4E94-B2F4-41CF0603293E">Understanding How to Use Oracle Data Pump with Oracle RAC</a><br>Using Oracle Data Pump in an Oracle Real Application Clusters (Oracle RAC) environment requires you to perform a few checks to make sure that you are making cluster member nodes available. 
                        </li>
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-1A269231-3365-4A3B-B838-649AAC2766CB">Using Directory Objects When Oracle Automatic Storage Management Is Enabled</a><br>You can use Data Pump Export or Import with Oracle Automatic Storage Management (Oracle ASM) enabled. You must define the directory object used for the dump file so that the Oracle ASM disk group name is used, instead of an operating system directory path.
                        </li>
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-BB478188-0F26-44E3-99E6-C161ED5A2473">The DATA_PUMP_DIR Directory Object and Pluggable Databases</a><br>The default Data Pump directory object, <code class="codeph">DATA_PUMP_DIR</code>, is defined as a unique path for each PDB in the CDB.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B" title="Oracle Data Pump manages several different types of files. You can use commands in interactive mode to modify how OracleData Pump allocates and handles these files.">File Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="SUTIL819"></a><div class="props_rev_3"><a id="GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5" name="GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5"></a><h5 id="SUTIL-GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5" class="sect5"><span class="enumeration_section">1.8.3.1 </span>Understanding Dump, Log, and SQL File Default Locations
                     </h5>
                     <div>
                        <p>Data Pump is server-based rather than client-based. Dump files, log files, and SQL files are accessed relative to server-based directory paths.</p>
                        <p>Data Pump requires that directory paths be specified as directory objects. A directory object maps a name to a directory path on the file system. DBAs must ensure that only approved users are allowed access to the directory object associated with the directory path.</p>
                        <p>The following example shows a SQL statement that creates a directory object named <code class="codeph">dpump_dir1</code> that is mapped to a directory located at <code class="codeph">/usr/apps/datafiles.</code></p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DIRECTORY dpump_dir1 AS '/usr/apps/datafiles';
</pre><p>The reason that a directory object is required is to ensure data security and integrity. For example:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you were allowed to specify a directory path location for an input file, then you might be able to read data that the server has access to, but to which you should not. </p>
                           </li>
                           <li>
                              <p>If you were allowed to specify a directory path location for an output file, then the server might overwrite a file that you might not normally have privileges to delete.</p>
                           </li>
                        </ul>
                        <p>On UNIX and Windows operating systems, a default directory object, <code class="codeph">DATA_PUMP_DIR</code>, is created at database creation or whenever the database dictionary is upgraded. By default, it is available only to privileged users. (The user <code class="codeph">SYSTEM</code> has read and write access to the <code class="codeph">DATA_PUMP_DIR</code> directory, by default.) The definition of the <code class="codeph">DATA_PUMP_DIR</code> directory may be changed by Oracle during upgrades or when patches are applied.
                        </p>
                        <p>If you are not a privileged user, then before you can run Data Pump Export or Data Pump Import, a directory object must be created by a database administrator (DBA) or by any user with the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">DIRECTORY</code> privilege.
                        </p>
                        <p>After a directory is created, the user creating the directory object must grant <code class="codeph">READ</code> or <code class="codeph">WRITE</code> permission on the directory to other users. For example, to allow the Oracle database to read and write files on behalf of user <code class="codeph">hr</code> in the directory named by <code class="codeph">dpump_dir1</code>, the DBA must execute the following command:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT READ, WRITE ON DIRECTORY dpump_dir1 TO hr;
</pre><p>Note that <code class="codeph">READ</code> or <code class="codeph">WRITE</code> permission to a directory object only means that the Oracle database can read or write files in the corresponding directory on your behalf. You are not given direct access to those files outside of the Oracle database unless you have the appropriate operating system privileges. Similarly, the Oracle database requires permission from the operating system to read and write files in the directories.
                        </p>
                        <p>Data Pump Export and Import use the following order of precedence to determine a file's location:</p>
                        <ol>
                           <li>
                              <p>If a directory object is specified as part of the file specification, then the location specified by that directory object is used. (The directory object must be separated from the file name by a colon.)</p>
                           </li>
                           <li>
                              <p>If a directory object is not specified as part of the file specification, then the directory object named by the <code class="codeph">DIRECTORY</code> parameter is used.
                              </p>
                           </li>
                           <li>
                              <p>If a directory object is not specified as part of the file specification, and if no directory object is named by the <code class="codeph">DIRECTORY</code> parameter, then the value of the environment variable, <code class="codeph">DATA_PUMP_DIR</code>, is used. This environment variable is defined using operating system commands on the client system where the Data Pump Export and Import utilities are run. The value assigned to this client-based environment variable must be the name of a server-based directory object, which must first be created on the server system by a DBA. For example, the following SQL statement creates a directory object on the server system. The name of the directory object is <code class="codeph">DUMP_FILES1</code>, and it is located at<code class="codeph"> '/usr/apps/dumpfiles1'</code>. 
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DIRECTORY DUMP_FILES1 AS '/usr/apps/dumpfiles1';
</pre><p>Then, a user on a UNIX-based client system using <code class="codeph">csh</code> can assign the value <code class="codeph">DUMP_FILES1</code> to the environment variable <code class="codeph">DATA_PUMP_DIR</code>. The <code class="codeph">DIRECTORY</code> parameter can then be omitted from the command line. The dump file <code class="codeph">employees.dmp</code>, and the log file<code class="codeph"> export.log</code>, are written to<code class="codeph"> '/usr/apps/dumpfiles1'</code>.   
                              </p><pre class="oac_no_warn" dir="ltr">%setenv DATA_PUMP_DIR DUMP_FILES1
%expdp hr TABLES=employees DUMPFILE=employees.dmp
</pre></li>
                           <li>
                              <p>If none of the previous three conditions yields a directory object and you are a privileged user, then Data Pump attempts to use the value of the default server-based directory object, <code class="codeph">DATA_PUMP_DIR</code>. This directory object is automatically created at database creation or when the database dictionary is upgraded. You can use the following SQL query to see the path definition for <code class="codeph">DATA_PUMP_DIR</code>:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT directory_name, directory_path FROM dba_directories
2 WHERE directory_name='DATA_PUMP_DIR';
</pre><p>If you are not a privileged user, then access to the <code class="codeph">DATA_PUMP_DIR</code> directory object must have previously been granted to you by a DBA. 
                              </p>
                              <p>Do not confuse the default <code class="codeph">DATA_PUMP_DIR</code> directory object with the client-based environment variable of the same name.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-02A2E765-03BA-4097-B3A3-67B006C749AC" title="Review these topics to understand the Oracle Data Pump default file locations, and to understand how these locations are affected when you are using Oracle RAC, Oracle Automatic Storage Management, and multitenant architecture.">Default Locations for Dump, Log, and SQL Files</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="SUTIL3755"></a><div class="props_rev_3"><a id="GUID-8E63A90B-8E72-4E94-B2F4-41CF0603293E" name="GUID-8E63A90B-8E72-4E94-B2F4-41CF0603293E"></a><h5 id="SUTIL-GUID-8E63A90B-8E72-4E94-B2F4-41CF0603293E" class="sect5"><span class="enumeration_section">1.8.3.2 </span>Understanding How to Use Oracle Data Pump with Oracle RAC
                     </h5>
                     <div>
                        <p>Using Oracle Data Pump in an Oracle Real Application Clusters (Oracle RAC) environment requires you to perform a few checks to make sure that you are making cluster member nodes available. </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To use Data Pump or external tables in an Oracle RAC configuration, you must ensure that the directory object path is on a cluster-wide file system.</p>
                              <p>The directory object must point to shared physical storage that is visible to, and accessible from, all instances where Data Pump and/or external tables processes can run.</p>
                           </li>
                           <li>
                              <p>The default Data Pump behavior is that worker processes can run on any instance in an Oracle RAC configuration. Therefore, workers on those Oracle RAC instances must have physical access to the location defined by the directory object, such as shared storage media. If the configuration does not have shared storage for this purpose, but you still require parallelism, then you can use the <code class="codeph">CLUSTER=NO</code> parameter to constrain all worker processes to the instance where the Data Pump job was started.
                              </p>
                           </li>
                           <li>
                              <p>Under certain circumstances, Data Pump uses parallel query slaves to load or unload data. In an Oracle RAC environment, Data Pump does not control where these slaves run. Therefore, these slaves can run on other cluster member nodes in the cluster, regardless of which instance is specified for <code class="codeph">CLUSTER</code> and <code class="codeph">SERVICE_NAME</code> for the Data Pump job. Controls for parallel query operations are independent of Data Pump. When parallel query slaves run on other instances as part of a Data Pump job, they also require access to the physical storage of the dump file set.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-02A2E765-03BA-4097-B3A3-67B006C749AC" title="Review these topics to understand the Oracle Data Pump default file locations, and to understand how these locations are affected when you are using Oracle RAC, Oracle Automatic Storage Management, and multitenant architecture.">Default Locations for Dump, Log, and SQL Files</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="SUTIL820"></a><div class="props_rev_3"><a id="GUID-1A269231-3365-4A3B-B838-649AAC2766CB" name="GUID-1A269231-3365-4A3B-B838-649AAC2766CB"></a><h5 id="SUTIL-GUID-1A269231-3365-4A3B-B838-649AAC2766CB" class="sect5"><span class="enumeration_section">1.8.3.3 </span>Using Directory Objects When Oracle Automatic Storage Management Is Enabled
                     </h5>
                     <div>
                        <p>You can use Data Pump Export or Import with Oracle Automatic Storage Management (Oracle ASM) enabled. You must define the directory object used for the dump file so that the Oracle ASM disk group name is used, instead of an operating system directory path.</p>
                        <div class="section">
                           <p>For log file, use a separate directory object that points to an operating system directory path. </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1A269231-3365-4A3B-B838-649AAC2766CB__GUID-AEC0C77B-9277-446A-A2F7-AF942E0B3BAE">
                           <p>For example, you can create a directory object for the Oracle ASM dump file using this procedure. </p><pre class="pre codeblock"><code>SQL&gt; CREATE or REPLACE DIRECTORY dpump_dir as '+DATAFILES/';
</code></pre><p>After you create the directory object, you then create a separate directory object for the log file:</p><pre class="pre codeblock"><code>SQL&gt; CREATE or REPLACE DIRECTORY dpump_log as '/homedir/user1/';
</code></pre><p>To enable user <code class="codeph">hr</code> to have access to these directory objects, you assign the necessary privileges for that user:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT READ, WRITE ON DIRECTORY dpump_dir TO hr;
SQL&gt; GRANT READ, WRITE ON DIRECTORY dpump_log TO hr;
</pre><p>Finally, you then can use use the following Data Pump Export command:</p><pre class="pre codeblock"><code>&gt; expdp hr DIRECTORY=dpump_dir DUMPFILE=hr.dmp LOGFILE=dpump_log:hr.log</code></pre><p>Before the command executes, you are prompted for the password.</p>
                           <div class="infoboxnote" id="GUID-1A269231-3365-4A3B-B838-649AAC2766CB__GUID-8DF266E3-743D-4012-B2D4-42EA45D19979">
                              <p class="notep1">Note:</p>
                              <p>If you simply want to copy Data Pump dump files between ASM and disk directories, you can use the <code class="codeph">DBMS_FILE_TRANSFER</code> PL/SQL package.
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                              <li><a href="../arpls/DBMS_FILE_TRANSFER.html#ARPLS095" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-02A2E765-03BA-4097-B3A3-67B006C749AC" title="Review these topics to understand the Oracle Data Pump default file locations, and to understand how these locations are affected when you are using Oracle RAC, Oracle Automatic Storage Management, and multitenant architecture.">Default Locations for Dump, Log, and SQL Files</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="SUTIL4337"></a><div class="props_rev_3"><a id="GUID-BB478188-0F26-44E3-99E6-C161ED5A2473" name="GUID-BB478188-0F26-44E3-99E6-C161ED5A2473"></a><h5 id="SUTIL-GUID-BB478188-0F26-44E3-99E6-C161ED5A2473" class="sect5"><span class="enumeration_section">1.8.3.4 </span>The DATA_PUMP_DIR Directory Object and Pluggable Databases
                     </h5>
                     <div>
                        <p>The default Data Pump directory object, <code class="codeph">DATA_PUMP_DIR</code>, is defined as a unique path for each PDB in the CDB.
                        </p>
                        <p>As of Oracle Database 12<code class="codeph">c</code> release 2 (12.2), in a multitenant container database (CDB) environment, the default Data Pump directory object, <code class="codeph">DATA_PUMP_DIR</code>, is defined as a unique path for each PDB in the CDB, whether or not the <code class="codeph">PATH_PREFIX</code> clause of the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is defined for relative paths. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-02A2E765-03BA-4097-B3A3-67B006C749AC" title="Review these topics to understand the Oracle Data Pump default file locations, and to understand how these locations are affected when you are using Oracle RAC, Oracle Automatic Storage Management, and multitenant architecture.">Default Locations for Dump, Log, and SQL Files</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="SUTIL822"></a><div class="props_rev_3"><a id="GUID-6F532CA9-CE90-47D6-84ED-AD10F1E18056" name="GUID-6F532CA9-CE90-47D6-84ED-AD10F1E18056"></a><h4 id="SUTIL-GUID-6F532CA9-CE90-47D6-84ED-AD10F1E18056" class="sect4"><span class="enumeration_section">1.8.4 </span>Using Substitution Variables
                  </h4>
                  <div>
                     <p>Instead of, or in addition to, listing specific file names, you can use the <code class="codeph">DUMPFILE</code> parameter during export operations to specify multiple dump files, by using a substitution variable in the file name. This is called a dump file template.
                     </p>
                     <div class="infoboxnote" id="GUID-6F532CA9-CE90-47D6-84ED-AD10F1E18056__GUID-80197391-6DE8-4FF7-90F0-C472D3D11095">
                        <p class="notep1">Note:</p>This section uses %U to explain how Data Pump uses substitution variables. For information about other available substitution variables, see the Data Pump Export <a href="oracle-data-pump-export-utility.html#GUID-A6300021-419F-4C1D-AFF1-38FE1123326B" title="The Data Pump Export command-line utility DUMPFILE parameter specifies the names, and optionally, the directory objects of dump files for an export job.">DUMPFILE</a> parameter and the Data Pump Import <a href="datapump-import-utility.html#GUID-DE156692-2955-4D5B-A327-C421F9E45FEB" title="The Data Pump Import command-line mode DUMPFILE parameter specifies the names, and optionally, the directory objects of the dump file set that Export created.">DUMPFILE</a> parameter.
                     </div>
                     <p>New dump files are created as they are needed. For example, if you are using the substitution variable %U, then new dump files are created as needed beginning with <code class="codeph">01</code> for <code class="codeph">%U</code>, then using <code class="codeph">02</code>, <code class="codeph">03</code>, and so on. Enough dump files are created to allow all processes specified by the current setting of the <code class="codeph">PARALLEL</code> parameter to be active. If one of the dump files becomes full because its size has reached the maximum size specified by the <code class="codeph">FILESIZE</code> parameter, then it is closed and a new dump file (with a new generated name) is created to take its place. 
                     </p>
                     <p>If multiple dump file templates are provided, they are used to generate dump files in a round-robin fashion. For example, if <code class="codeph">expa%U</code>, <code class="codeph">expb%U,</code> and <code class="codeph">expc%U</code> were all specified for a job having a parallelism of 6, then the initial dump files created would be <code class="codeph">expa01</code>.<code class="codeph">dmp</code>, <code class="codeph">expb01</code>.<code class="codeph">dmp</code>, <code class="codeph">expc01</code>.<code class="codeph">dmp</code>, <code class="codeph">expa02</code>.<code class="codeph">dmp</code>, <code class="codeph">expb02</code>.<code class="codeph">dmp</code>, and <code class="codeph">expc02</code>.<code class="codeph">dmp</code>.
                     </p>
                     <p>For import and SQLFILE operations, if dump file specifications <code class="codeph">expa%U</code>, <code class="codeph">expb%U,</code> and <code class="codeph">expc%U</code> are specified, then the operation begins by attempting to open the dump files <code class="codeph">expa01</code>.<code class="codeph">dmp</code>, <code class="codeph">expb01</code>.<code class="codeph">dmp</code>, and <code class="codeph">expc01</code>.<code class="codeph">dmp</code>. It is possible for the master table to span multiple dump files, so until all pieces of the master table are found, dump files continue to be opened by incrementing the substitution variable and looking up the new file names (for example, <code class="codeph">expa02</code>.<code class="codeph">dmp</code>, <code class="codeph">expb02</code>.<code class="codeph">dmp</code>, and <code class="codeph">expc02</code>.<code class="codeph">dmp</code>). If a dump file does not exist, then the operation stops incrementing the substitution variable for the dump file specification that was in error. For example, if <code class="codeph">expb01</code>.<code class="codeph">dmp</code> and <code class="codeph">expb02</code>.<code class="codeph">dmp</code> are found but <code class="codeph">expb03</code>.<code class="codeph">dmp</code> is not found, then no more files are searched for using the <code class="codeph">expb%U</code> specification. Once the entire master table is found, it is used to determine whether all dump files in the dump file set have been located.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-FE7E746D-A343-463E-A4E2-A6AD1349FE4B" title="Oracle Data Pump manages several different types of files. You can use commands in interactive mode to modify how OracleData Pump allocates and handles these files.">File Allocation</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL110"></a><div class="props_rev_3"><a id="GUID-BAA3B679-A758-4D55-9820-432D9EB83C68" name="GUID-BAA3B679-A758-4D55-9820-432D9EB83C68"></a><h3 id="SUTIL-GUID-BAA3B679-A758-4D55-9820-432D9EB83C68" class="sect3"><span class="enumeration_section">1.9 </span>Exporting and Importing Between Different Oracle Database Releases
               </h3>
               <div>
                  <p>You can use Oracle Data Pump to migrate all or any portion of an Oracle Database between different releases of the database software.</p>
                  <p>Typically, you use the Oracle Data Pump Export <code class="codeph">VERSION</code> parameter to migrate between database releases.Using <code class="codeph">VERSION</code> generates an Oracle Data Pump dump file set that is compatible with the specified version.
                  </p>
                  <p>The default value for <code class="codeph">VERSION</code> is <code class="codeph">COMPATIBLE</code>. This value indicates that exported database object definitions are compatible with the release specified for the <code class="codeph">COMPATIBLE</code> initialization parameter.
                  </p>
                  <p>In an upgrade situation, when the target release of an Oracle Data Pump-based migration is higher than the source, you typically do not have to specify the <code class="codeph">VERSION</code> parameter. When the target release is higher then the source, all objects in the source database are compatible with the higher target release. However,  an exception is when an entire Oracle Database 11g (Release 11.2.0.3 or higher) is exported in preparation for importing into Oracle Database 12c Release 1 (12.1.0.1) or later. In this case, to include a complete set of Oracle Database internal component metadata, explicitly specify <code class="codeph">VERSION=12</code> with <code class="codeph">FULL=YES</code>.
                  </p>
                  <p>In a downgrade situation, when the target release of an Oracle Data Pump-based migration is lower than the source, set the <code class="codeph">VERSION</code> parameter value to be the same version as the target. An exception is when the target release version is the same as the value of the <code class="codeph">COMPATIBLE</code> initialization parameter on the source system. In that case, you do not need to specify <code class="codeph">VERSION</code>. In general, however, Oracle Data Pump import cannot read dump file sets created by an Oracle Database release that is newer than the current release,  unless you explicitly specify the <code class="codeph">VERSION</code> parameter.
                  </p>
                  <p>Keep the following information in mind when you are exporting and importing between different database releases:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>On an Oracle Data Pump export, if you specify a database version that is older than the current database version, then a dump file set is created that you can import into that older version of the database. For example, if you are running Oracle Database 12c Release 1 (12.1.0.2), and you specify <code class="codeph">VERSION=11.2</code> on an export, then the dump file set that is created can be imported into an Oracle Database 11g (Release 11.2)  database.
                        </p>
                        <div class="infoboxnote" id="GUID-BAA3B679-A758-4D55-9820-432D9EB83C68__GUID-CEF899D4-95B6-4A14-8992-944B04D1CFA8">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Database privileges that are valid only in Oracle Database 12c Release 1 (12.1.0.2) and later (for example, the <code class="codeph">READ</code> privilege on tables, views, materialized views, and synonyms) cannot be imported into Oracle Database 12c Release 1 (12.1.0.1) or earlier. If an attempt is made to do so, then Import reports it as an error, and continues the import operation.
                                 </p>
                              </li>
                              <li>
                                 <p> When you export to a release earlier than Oracle Database 12c Release 2 (12.2.0.1), Oracle Data Pump does not filter out object names longer than 30 bytes. The objects are exported. At import time, if you attempt to create an object with a name longer than 30 bytes, then an error is returned. </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>If you specify an Oracle Database release that is older than the current Oracle Database release, then certain features and data types can be unavailable. For example, specifying <code class="codeph">VERSION=10.1</code> causes an error if data compression is also specified for the job, because compression was not supported in Oracle Database 10g release 1 (10.1). Another example: If a user-defined type or Oracle-supplied type in the source Oracle Database release is a later version than the type in the target Oracle Database release, then that type is not loaded, because it does not match any version of the type in the target database. 
                        </p>
                     </li>
                     <li>
                        <p>Oracle Data Pump Import can always read Oracle Data Pump dump file sets created by older Oracle Database releases.</p>
                     </li>
                     <li>
                        <p>When operating across a network link, Oracle Data Pump requires that the source and target Oracle Database releases differ by no more than two versions. </p>
                        <p>For example, if one database is Oracle Database 12c, then the other Oracle Database release must be 12c, 11g, or 10g. Oracle Data Pump checks only the major version number (for example, 10g,11g, 12c), not specific Oracle Database release numbers (for example, 12.2, 12.1, 11.1, 11.2, 10.1, or 10.2).</p>
                     </li>
                     <li>
                        <p>Importing Oracle Database 11g dump files that contain table statistics into Oracle Database 12c Release 1 (12.1) or later Oracle Database releases can result in an Oracle ORA-39346 error. This error occurs because Oracle Database 11g dump files contain table statistics as metadata. Oracle Database 12c Release 1 (12.1) and later releases require table statistics to be presented as table data. The workaround is to ignore the error during the import operation. After the import operation completes, regather table statistics. </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-data-pump-export-utility.html#GUID-2877B4DB-0082-438F-AC9B-18D1686F5DDC">VERSION</a></li>
                        <li><a href="datapump-import-utility.html#GUID-A5B19146-2CAA-47E7-8AE5-57A05E3347F6">VERSION</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-BAA3B679-A758-4D55-9820-432D9EB83C68__GUID-DFB580D8-F11A-43A4-BCE7-74AFC99CE772">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG992" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information about the <code class="codeph">READ</code> and <code class="codeph">READ ANY TABLE</code> privileges
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="SUTIL2883"></a><div class="props_rev_3"><a id="GUID-9030BC32-193B-4455-8DBB-4271DD44FA7A" name="GUID-9030BC32-193B-4455-8DBB-4271DD44FA7A"></a><h3 id="SUTIL-GUID-9030BC32-193B-4455-8DBB-4271DD44FA7A" class="sect3"><span class="enumeration_section">1.10 </span>SecureFiles LOB Considerations
               </h3>
               <div>
                  <p>When you use Oracle Data Pump Export to export SecureFiles LOBs, the export behavior depends on several things, including the Export <code class="codeph">VERSION</code> parameter value, whether ContentType is present, and whether the LOB is archived and data is cached.
                  </p>
                  <p></p>
                  <p>The following scenarios cover different combinations of these variables:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If a table contains SecureFiles LOBs with ContentType and the Export <code class="codeph">VERSION</code> parameter is set to a value earlier than <code class="codeph">11.2.0.0.0</code>, then the ContentType is not exported.
                        </p>
                     </li>
                     <li>
                        <p>If a table contains SecureFiles LOBs with ContentType and the Export <code class="codeph">VERSION</code> parameter is set to a value of <code class="codeph">11.2.0.0.0</code> or later, then the ContentType is exported and restored on a subsequent import.
                        </p>
                     </li>
                     <li>
                        <p>If a table contains a SecureFiles LOB that is currently archived and the data is cached, and the Export <code class="codeph">VERSION</code> parameter is set to a value earlier than <code class="codeph">11.2.0.0.0</code>, then the SecureFiles LOB data is exported and the archive metadata is dropped. In this scenario, if <code class="codeph">VERSION</code> is set to <code class="codeph">11.1</code> or later, then the SecureFiles LOB becomes a vanilla SecureFiles LOB. But if <code class="codeph">VERSION</code> is set to a value earlier than <code class="codeph">11.1</code>, then the SecureFiles LOB becomes a BasicFiles LOB.
                        </p>
                     </li>
                     <li>
                        <p>If a table contains a SecureFiles LOB that is currently archived but the data is not cached, and the Export <code class="codeph">VERSION</code> parameter is set to a value earlier than <code class="codeph">11.2.0.0.0</code>, then an ORA-45001 error is returned.
                        </p>
                     </li>
                     <li>
                        <p>If a table contains a SecureFiles LOB that is currently archived and the data is cached, and the Export <code class="codeph">VERSION</code> parameter is set to a value of <code class="codeph">11.2.0.0.0</code> or later, then both the cached data and the archive metadata is exported.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-9030BC32-193B-4455-8DBB-4271DD44FA7A__GUID-327BEFAE-B5E2-437C-B9AF-01911E9AE56D">
                     <p class="notep1">See Also:</p>
                     <p><a href="../adlob/using-oracle-LOBs-storage.html#ADLOB4444" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a> for more information about SecureFiles
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL3835"></a><a id="SUTIL3834"></a><div class="props_rev_3"><a id="GUID-34D0DEE7-3530-42DC-BE01-C2588CC73CE5" name="GUID-34D0DEE7-3530-42DC-BE01-C2588CC73CE5"></a><h3 id="SUTIL-GUID-34D0DEE7-3530-42DC-BE01-C2588CC73CE5" class="sect3"><span class="enumeration_section">1.11 </span>Oracle Data Pump Exit Codes
               </h3>
               <div>
                  <p>You can review Oracle Data Pump export and import operation results in a log file, and in a process exit code.</p>
                  <div class="section">
                     <p>Oracle Data Pump provides the results of export and import operations immediately upon completion. In addition to recording the results in a log file, Oracle Data Pump can also report the outcome in a process exit code. Use the Oracle Data Pump exit code to check the outcome of an Oracle Data Pump job from the command line or a script:</p>
                     <div class="tblformalwide" id="GUID-34D0DEE7-3530-42DC-BE01-C2588CC73CE5__BABICAEC">
                        <p class="titleintable">Table 1-1 Data Pump Exit Codes </p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Data Pump Exit Codes " summary="Data Pump Exit Codes for Linux, Unix, and Windows" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d10392e3670">Exit Code</th>
                                 <th align="left" valign="bottom" width="71%" id="d10392e3673">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10392e3678" headers="d10392e3670 ">
                                    <p><code class="codeph">EX_SUCC 0</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10392e3678 d10392e3673 ">
                                    <p>The export or import job completed successfully. No errors are displayed to the output device or recorded in the log file, if there is one.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10392e3686" headers="d10392e3670 ">
                                    <p><code class="codeph">EX_SUCC_ERR 5</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10392e3686 d10392e3673 ">
                                    <p>The export or import job completed successfully, but there were errors encountered during the job. The errors are displayed to the output device and recorded in the log file, if there is one.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d10392e3694" headers="d10392e3670 ">
                                    <p><code class="codeph">EX_FAIL 1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d10392e3694 d10392e3673 ">
                                    <p>The export or import job encountered one or more fatal errors, including the following:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Errors on the command line or in command syntax</p>
                                       </li>
                                       <li>
                                          <p>Oracle database errors from which export or import cannot recover</p>
                                       </li>
                                       <li>
                                          <p>Operating system errors (such as malloc)</p>
                                       </li>
                                       <li>
                                          <p>Invalid parameter values that prevent the job from starting (for example, an invalid directory object specified in the <code class="codeph">DIRECTORY</code> parameter)
                                          </p>
                                       </li>
                                    </ul>
                                    <p>A fatal error is displayed to the output device but may not be recorded in the log file. Whether it is recorded in the log file can depend on several factors, including:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Was a log file specified at the start of the job?</p>
                                       </li>
                                       <li>
                                          <p>Did the processing of the job proceed far enough for a log file to be opened?</p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL4280"></a><div class="props_rev_3"><a id="GUID-4443B80B-0446-4010-B8CA-2524659516BC" name="GUID-4443B80B-0446-4010-B8CA-2524659516BC"></a><h3 id="SUTIL-GUID-4443B80B-0446-4010-B8CA-2524659516BC" class="sect3"><span class="enumeration_section">1.12 </span>Auditing Data Pump Jobs
               </h3>
               <div>
                  <p>To monitor and record specific user database actions, perform auditing on Data Pump jobs with unified auditing.</p>
                  <div class="section">
                     <p>You can perform auditing on Data Pump jobs to monitor and record specific user database actions. Data Pump uses unified auditing, in which all audit records are centralized in one place.</p>
                     <p>To set up unified auditing, you create a unified audit policy or alter an existing policy. An audit policy is a named group of audit settings that enable you to audit a particular aspect of user behavior in the database. To create the policy, use the SQL <code class="codeph">CREATE AUDIT POLICY</code> statement.
                     </p>
                     <p>After creating the audit policy, use the <code class="codeph">AUDIT</code> and <code class="codeph">NOAUDIT</code> SQL statements to, respectively, enable and disable the policy.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4443B80B-0446-4010-B8CA-2524659516BC__GUID-9E9A3DDD-CFA5-4F37-A0BA-B204B344120B">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../sqlrf/CREATE-AUDIT-POLICY-Unified-Auditing.html#SQLRF56055" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the SQL <code class="codeph">CREATE AUDIT POLICY,ALTER AUDIT POLICY, AUDIT,</code> and <code class="codeph">NOAUDIT</code> statements
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&amp;id=DBSEG006" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for more information about using auditing in an Oracle database
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL4292"></a><div class="props_rev_3"><a id="GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E" name="GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E"></a><h3 id="SUTIL-GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E" class="sect3"><span class="enumeration_section">1.13 </span>How Does Data Pump Handle Timestamp Data?
               </h3>
               <div>
                  <p>This section describes factors that can affect successful completion of export and import jobs that involve the timestamp data types <code class="codeph">TIMESTAMP WITH TIMEZONE</code> and <code class="codeph">TIMESTAMP WITH LOCAL TIMEZONE</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E__GUID-65C5A862-FA8A-4237-9D33-07B06BEAD85D">
                     <p class="notep1">Note:</p>
                     <p>The information in this section applies only to Oracle Data Pump running on Oracle Database 12<span class="italic">c</span> and later.
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89">TIMESTAMP WITH TIMEZONE Restrictions</a><br>Export and import jobs that have <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data are restricted.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-D8443A5E-BF6D-4329-AF11-8E5899356C64">TIMESTAMP WITH LOCAL TIME ZONE Restrictions</a><br>Moving tables using a transportable mode is restricted.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89" name="GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89"></a><h4 id="SUTIL-GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89" class="sect4"><span class="enumeration_section">1.13.1 </span>TIMESTAMP WITH TIMEZONE Restrictions
                  </h4>
                  <div>
                     <p>Export and import jobs that have <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data are restricted.
                     </p>
                     <p></p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-02A6F03E-7754-41B5-A579-93A6E171A61C">Understanding TIMESTAMP WITH TIME ZONE Restrictions</a><br>Carrying out export and import jobs that have <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data requires understanding information about your time zone file data and Oracle Database release.
                        </li>
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1">Data Pump Support for TIMESTAMP WITH TIME ZONE Data</a><br>Data Pump supports <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data during different export and import modes like non-transportable mode, transportable tablespace and transportable table mode, and full transportable mode.
                        </li>
                        <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-4DABDB38-BEAA-471B-9026-F91CD22FD5C4">Time Zone File Versions on the Source and Target</a><br>Successful job completion can depend on whether the source and target time zone file versions match.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E" title="This section describes factors that can affect successful completion of export and import jobs that involve the timestamp data types TIMESTAMP WITH TIMEZONE and TIMESTAMP WITH LOCAL TIMEZONE.">How Does Data Pump Handle Timestamp Data?</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="SUTIL4320"></a><div class="props_rev_3"><a id="GUID-02A6F03E-7754-41B5-A579-93A6E171A61C" name="GUID-02A6F03E-7754-41B5-A579-93A6E171A61C"></a><h5 id="SUTIL-GUID-02A6F03E-7754-41B5-A579-93A6E171A61C" class="sect5"><span class="enumeration_section">1.13.1.1 </span>Understanding TIMESTAMP WITH TIME ZONE Restrictions
                     </h5>
                     <div>
                        <p>Carrying out export and import jobs that have <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data requires understanding information about your time zone file data and Oracle Database release.
                        </p>
                        <div class="section">
                           <p>Successful job completion can depend on the following factors:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The version of the Oracle Database time zone files on the source and target databases.</p>
                              </li>
                              <li>
                                 <p>The export/import mode and whether the Data Pump version being used supports <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data. (Data Pump 11.2.0.1 and later provide support for <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data.)
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-02A6F03E-7754-41B5-A579-93A6E171A61C__GUID-BFCD545C-EDE5-4280-9C2B-4B3A0638781F">
                           <p>To identify the time zone file version of a database, you can execute the following SQL statement:</p><pre class="pre codeblock"><code>SQL&gt; SELECT VERSION FROM V$TIMEZONE_FILE;</code></pre></div>
                        <!-- class="example" -->
                        <div class="section">See <cite>Oracle Database Globalization Support Guide</cite> for more information about time zone files. 
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../nlspg/datetime-data-types-and-time-zone-support.html#NLSPG258" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89" title="Export and import jobs that have TIMESTAMP WITH TIME ZONE data are restricted.">TIMESTAMP WITH TIMEZONE Restrictions</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="SUTIL4323"></a><a id="SUTIL4324"></a><a id="SUTIL4325"></a><a id="SUTIL4322"></a><div class="props_rev_3"><a id="GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1" name="GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1"></a><h5 id="SUTIL-GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1" class="sect5"><span class="enumeration_section">1.13.1.2 </span>Data Pump Support for TIMESTAMP WITH TIME ZONE Data
                     </h5>
                     <div>
                        <p>Data Pump supports <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data during different export and import modes like non-transportable mode, transportable tablespace and transportable table mode, and full transportable mode.
                        </p>
                        <p>This section describes Data Pump support for <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data during different export and import modes when versions of the Oracle Database time zone file are different on the source and target databases.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1__GUID-B6D7D52C-5A63-4479-B732-8433BC8B155B">Non-transportable Modes</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If the dump file is created with a Data Pump version that supports <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data (11.2.0.1 or later), then the time zone file version of the export system is recorded in the dump file. Data Pump uses that information to determine whether data conversion is necessary. If the target database knows about the source time zone version, but is actually using a later version, then the data is converted to the later version. <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data cannot be downgraded, so if you attempt to import to a target that is using an earlier version of the time zone file than the source used, the import fails.
                                 </p>
                              </li>
                              <li>
                                 <p>If the dump file is created with a Data Pump version prior to Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.1), then <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data is not supported, so no conversion is done and corruption may occur.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1__GUID-306AD66A-A9D1-4035-ABBD-336770ADE243">Transportable Tablespace and Transportable Table Modes</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>In transportable tablespace and transportable table modes, if the source and target have different time zone file versions, then tables with <code class="codeph">TIMESTAMP WITH TIME ZONE</code> columns are not created. A warning is displayed at the beginning of the job showing the source and target database time zone file versions. A message is also displayed for each table not created. This is true even if the Data Pump version used to create the dump file supports <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data. (Release 11.2.0.1 and later support <code class="codeph">TIMESTAMP WITH TIMEZONE</code> data.)
                                 </p>
                              </li>
                              <li>
                                 <p>If the source is earlier than Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.1), then the time zone file version must be the same on the source and target database for all transportable jobs regardless of whether the transportable set uses <code class="codeph">TIMESTAMP WITH TIME ZONE</code> columns.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1__GUID-4E60A499-6C75-4F94-9CA0-13B1FF70243A">Full Transportable Mode</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Full transportable exports and imports are supported when the source database is at least Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3) and the target is Oracle Database 12c release 1 (12.1) or later.
                           </p>
                           <p>Data Pump 11.2.0.1 and later provide support for <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data. Therefore, in full transportable operations, tables with <code class="codeph">TIMESTAMP WITH TIME ZONE</code> columns are created. If the source and target database have different time zone file versions, then <code class="codeph">TIMESTAMP WITH TIME ZONE</code> columns from the source are converted to the time zone file version of the target.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EF3AF1D8-716B-4C3E-931D-52937A5175F1__GUID-91544DBB-B246-4082-9F94-304D109C167D">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/transporting-data.html#ADMIN10140" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about transportable tablespaces
                                 </p>
                              </li>
                              <li>
                                 <p><a href="oracle-data-pump-export-utility.html#GUID-079769D8-40F4-432F-88AD-E7264D7A2E2D__BEHFFGJG">Using the Transportable Option During Full Mode Exports</a> for more information about full transportable exports
                                 </p>
                              </li>
                              <li>
                                 <p><a href="datapump-import-utility.html#GUID-E27D2DC9-A6D8-4F0B-AB72-6BF526B3AA18__BEHFEGFI">Using the Transportable Option During Full Mode Imports</a> for more information about full transportable imports
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89" title="Export and import jobs that have TIMESTAMP WITH TIME ZONE data are restricted.">TIMESTAMP WITH TIMEZONE Restrictions</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="SUTIL4321"></a><div class="props_rev_3"><a id="GUID-4DABDB38-BEAA-471B-9026-F91CD22FD5C4" name="GUID-4DABDB38-BEAA-471B-9026-F91CD22FD5C4"></a><h5 id="SUTIL-GUID-4DABDB38-BEAA-471B-9026-F91CD22FD5C4" class="sect5"><span class="enumeration_section">1.13.1.3 </span>Time Zone File Versions on the Source and Target
                     </h5>
                     <div>
                        <p>Successful job completion can depend on whether the source and target time zone file versions match.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the Oracle Database time zone file version is the same on the source and target databases, then conversion of <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data is not necessary. The export/import job should complete successfully.
                              </p>
                              <p>The exception to this is a transportable tablespace or transportable table export performed using a Data Pump release earlier than 11.2.0.1. In that case, tables in the dump file that have <code class="codeph">TIMESTAMP WITH TIME ZONE</code> columns are not created on import even though the time zone file version is the same on the source and target.
                              </p>
                           </li>
                           <li>
                              <p>If the source time zone file version is not available on the target database, then the job fails. The version of the time zone file on the source may not be available on the target because the source may have had its time zone file updated to a later version but the target has not. For example, if the export is done on Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.2) with a time zone file version of 17, and the import is done on 11.2.0.2 with only a time zone file of 16 available, then the job fails.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-9B6C92EE-860E-43DD-9728-735B17B9DA89" title="Export and import jobs that have TIMESTAMP WITH TIME ZONE data are restricted.">TIMESTAMP WITH TIMEZONE Restrictions</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="SUTIL4326"></a><div class="props_rev_3"><a id="GUID-D8443A5E-BF6D-4329-AF11-8E5899356C64" name="GUID-D8443A5E-BF6D-4329-AF11-8E5899356C64"></a><h4 id="SUTIL-GUID-D8443A5E-BF6D-4329-AF11-8E5899356C64" class="sect4"><span class="enumeration_section">1.13.2 </span>TIMESTAMP WITH LOCAL TIME ZONE Restrictions
                  </h4>
                  <div>
                     <p>Moving tables using a transportable mode is restricted.</p>
                     <p>If a table is moved using a transportable mode (transportable table, transportable tablespace, or full transportable), and the following conditions exist, then a warning is issued and the table is not created:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The source and target databases have different database time zones.</p>
                        </li>
                        <li>
                           <p>The table contains <code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code> data types.
                           </p>
                        </li>
                     </ul>
                     <p>To successfully move a table that was not created because of these conditions, use a non-transportable export and import mode.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-7EE60BAB-0D3D-46EB-8E11-4FDDA68EF14E" title="This section describes factors that can affect successful completion of export and import jobs that involve the timestamp data types TIMESTAMP WITH TIMEZONE and TIMESTAMP WITH LOCAL TIMEZONE.">How Does Data Pump Handle Timestamp Data?</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL4307"></a><div class="props_rev_3"><a id="GUID-72F01BF0-61F5-4775-8C7B-4E227F244866" name="GUID-72F01BF0-61F5-4775-8C7B-4E227F244866"></a><h3 id="SUTIL-GUID-72F01BF0-61F5-4775-8C7B-4E227F244866" class="sect3"><span class="enumeration_section">1.14 </span>Character Set and Globalization Support Considerations
               </h3>
               <div>
                  <p>Globalization support behavior of Data Pump Export and Import.</p>
                  <p>These sections describe the globalization support behavior of Data Pump Export and Import with respect to character set conversion of user data and data definition language (DDL).</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-7B94D834-313B-4BA7-80F2-A29C1870DF27">Data Definition Language (DDL)</a><br>The Export utility writes dump files using the database character set of the export system.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-A786A4B1-A913-4765-81F9-C877A6566F9C">Single-Byte Character Sets and Export and Import</a><br>Ensure that the export database and the import database use the same character set.
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-overview.html#GUID-5F23F5CF-82F0-4254-B865-20ED68F4AE31">Multibyte Character Sets and Export and Import</a><br>During character set conversion, any characters in the export file that have no equivalent in the import database character set are replaced with a default character. The import database character set defines the default character.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL4310"></a><div class="props_rev_3"><a id="GUID-7B94D834-313B-4BA7-80F2-A29C1870DF27" name="GUID-7B94D834-313B-4BA7-80F2-A29C1870DF27"></a><h4 id="SUTIL-GUID-7B94D834-313B-4BA7-80F2-A29C1870DF27" class="sect4"><span class="enumeration_section">1.14.1 </span>Data Definition Language (DDL)
                  </h4>
                  <div>
                     <p>The Export utility writes dump files using the database character set of the export system.</p>
                     <p>When the dump file is imported, a character set conversion is required for DDL only if the database character set of the  import system is different from the database character set of the export system.</p>
                     <p>To minimize data loss due to character set conversions, ensure that the import database character set is a superset of the export database character set.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-72F01BF0-61F5-4775-8C7B-4E227F244866" title="Globalization support behavior of Data Pump Export and Import.">Character Set and Globalization Support Considerations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL4311"></a><div class="props_rev_3"><a id="GUID-A786A4B1-A913-4765-81F9-C877A6566F9C" name="GUID-A786A4B1-A913-4765-81F9-C877A6566F9C"></a><h4 id="SUTIL-GUID-A786A4B1-A913-4765-81F9-C877A6566F9C" class="sect4"><span class="enumeration_section">1.14.2 </span>Single-Byte Character Sets and Export and Import
                  </h4>
                  <div>
                     <p>Ensure that the export database and the import database use the same character set.</p>
                     <p>If the system on which the import occurs uses a 7-bit character set, and you import an 8-bit character set dump file, then some 8-bit characters may be converted to 7-bit equivalents. An indication that this has happened is when accented characters lose the accent mark.</p>
                     <p>To avoid this unwanted conversion, ensure that the export database and the import database use the same character set.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-72F01BF0-61F5-4775-8C7B-4E227F244866" title="Globalization support behavior of Data Pump Export and Import.">Character Set and Globalization Support Considerations</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL4312"></a><div class="props_rev_3"><a id="GUID-5F23F5CF-82F0-4254-B865-20ED68F4AE31" name="GUID-5F23F5CF-82F0-4254-B865-20ED68F4AE31"></a><h4 id="SUTIL-GUID-5F23F5CF-82F0-4254-B865-20ED68F4AE31" class="sect4"><span class="enumeration_section">1.14.3 </span>Multibyte Character Sets and Export and Import 
                  </h4>
                  <div>
                     <p>During character set conversion, any characters in the export file that have no equivalent in the import database character set are replaced with a default character. The import database character set defines the default character.</p>
                     <p>If the import system has to use replacement characters while converting DDL, then a warning message is displayed and the system attempts to load the converted DDL.</p>
                     <p>If the import system has to use replacement characters while converting user data, then the default behavior is to load the converted data. However, it is possible to instruct the import system to reject rows of user data that were converted using replacement characters. See the Import <code class="codeph">DATA OPTIONS</code> parameter  for details.
                     </p>
                     <p>To guarantee 100% conversion, the import database character set must be a superset (or equivalent) of the character set used to generate the export file.</p>
                     <div class="infoboxnote" id="GUID-5F23F5CF-82F0-4254-B865-20ED68F4AE31__GUID-47BCA3F7-50F1-444B-BEDE-CFABB6000811">
                        <p class="notep1">Caution:</p>
                        <p>When the database character set of the export system differs from that of the import system, the import system displays informational messages at the start of the job that show what the database character set is. </p>
                        <p>When the import database character set is not a superset of the character set used to generate the export file, the import system displays a warning that possible data loss may occur due to character set conversions.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="datapump-import-utility.html#GUID-5FFA128D-B7F5-41D0-A72C-EB2CE384765D">DATA_OPTIONS</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-72F01BF0-61F5-4775-8C7B-4E227F244866" title="Globalization support behavior of Data Pump Export and Import.">Character Set and Globalization Support Considerations</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B1A6BBA2-0269-48CC-8A0E-8E3955A231C0" name="GUID-B1A6BBA2-0269-48CC-8A0E-8E3955A231C0"></a><h3 id="SUTIL-GUID-B1A6BBA2-0269-48CC-8A0E-8E3955A231C0" class="sect3"><span class="enumeration_section">1.15 </span>Oracle Data Pump Behavior with Data-Bound Collation
               </h3>
               <div>
                  <p>Oracle Data Pump supports data-bound collation (DBC).</p>
                  <div class="p">Data Pump Export always includes all available collation metadata into the created dump file. This includes:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Current default collations of exported users' schemas</p>
                        </li>
                        <li>
                           <p>Current default collations of exported tables, views, materialized views and PL/SQL units (including user-defined types)</p>
                        </li>
                        <li>
                           <p>Declared collations of all table and cluster character data type columns</p>
                        </li>
                     </ul>
                  </div>
                  <p>When importing a dump file exported from an Oracle Database 12<span class="italic">c</span> Release 2 (12.2) database, Data Pump Import's behavior depends on the effective value of the Data Pump <code class="codeph">VERSION</code> parameter at the time of import and on whether the data-bound collation (DBC) feature is enabled in the target database. The effective value of the <code class="codeph">VERSION</code> parameter is determined by how it is specified. The parameter may be specified as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">VERSION=<span class="codeinlineitalic">n</span></code>, which means the effective value is the specific version number <code class="codeph"><span class="codeinlineitalic">n</span></code>, for example, <code class="codeph">VERSION=12.2</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">VERSION=LATEST</code>, which means the effective value is the currently running database version
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">VERSION=COMPATIBLE</code>, which means the effective value is the same as the value of the database initialization parameter <code class="codeph">COMPATIBLE</code>. This is also true if no value is specified for <code class="codeph">VERSION</code>.
                        </p>
                     </li>
                  </ul>
                  <p> For the DBC feature to be enabled in a database, the initialization parameter <code class="codeph">COMPATIBLE</code> must be set to 12.2 or higher and the initialization parameter <code class="codeph">MAX_STRING_SIZE</code> must be set to <code class="codeph">EXTENDED</code>.
                  </p>
                  <p>If the effective value of the Data Pump Import <code class="codeph">VERSION</code> parameter is 12.2 and DBC is enabled in the target database, then Data Pump Import generates DDL statements with collation clauses referencing collation metadata from the dump file. Exported objects are created with the original collation metadata that they had in the source database.&nbsp;
                  </p>
                  <p>No collation syntax is generated if DBC is disabled or if the Data Pump Import <code class="codeph">VERSION</code> parameter is set to a value lower than 12.2.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.">Overview of Oracle Data Pump</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id='13348.downgrading-oracle-db-after-upgrade.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">
      <meta name="description" content="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">
      <title>Downgrading Oracle Database to an Earlier Release</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="upgrading-oracle-forms-oracle-developer-applications.html" title="Previous" type="text/html">
      <link rel="next" href="migrating-data-after-upgrade-oracle.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="upgrading-oracle-forms-oracle-developer-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="migrating-data-after-upgrade-oracle.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Downgrading Oracle Database to an Earlier Release</li>
            </ol>
            <a id="GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" name="GUID-CAD9888A-2E6E-48F8-938C-B3E861738606"></a><a id="UPGRD007"></a>
            
            <h2 id="UPGRD-GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" class="sect2"><span class="enumeration_chapter">7 </span> Downgrading Oracle Database to an Earlier Release
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.</p>
               <p>For example, if you recently upgraded your Oracle Database 12c release 1 (12.1.0.2( to release 19c, and you did not change the compatible initialization parameter to 19.1.0, then you can downgrade to release 12.1.0.2.</p>
               <p>Topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F">Supported Releases for Downgrading Oracle Database</a><br>You can downgrade both major releases and release update or patchset releases, based on the original Oracle Database release from which the database was upgraded.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010">Check for Incompatibilities When Downgrading Oracle Database</a><br>To see if the database has incompatibilities that can prevent you from downgrading, check the compatibility level of your database.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B">Perform a Full Backup Before Downgrading Oracle Database</a><br>Oracle strongly recommends that you perform a full backup of your new Oracle Database release before you downgrade to a supported earlier release.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73">Performing Required Predowngrade Steps for Oracle Database</a><br>Complete the required preparation steps described here before you downgrade Oracle Database to the earlier release from which you upgraded. 
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</a><br>To automate downgrades, starting in Oracle Database 19c, Oracle provides the <code class="codeph">dbdowngrade</code> utility script. When necessary, you can also continue to run <code class="codeph">catdwgrd.sql</code> manually, as in previous releases. 
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C">About Downgrades and Invalid Objects with Component Status OPTION OFF</a><br>Downgrades from later release Oracle Database Standard Edition to Oracle Database 12c Standard Edition with CDB and PDBS contain later release invalid objects after the downgrade. 
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F">Downgrading a Single Pluggable Oracle Database (PDB)</a><br>If you are downgrading Oracle Database, then you can downgrade one PDB without downgrading the whole CDB.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65">Downgrading PDBs That Contain Oracle Application Express</a><br>Use this procedure to avoid INVALID OBJECTS OWNED BY APEX_050000 errors when you downgrade PDBs that contain Oracle Application Express.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5">Post-Downgrade Tasks for Oracle Database Downgrades</a><br>Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA">Troubleshooting the Downgrade of Oracle Database</a><br>Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.
                  </li>
               </ul>
            </div>
            <a id="UPGRD00710"></a><div class="props_rev_3"><a id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F" name="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F"></a><h3 id="UPGRD-GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F" class="sect3">Supported Releases for Downgrading Oracle Database</h3>
               <div>
                  <p>You can downgrade both major releases and release update or patchset releases, based on the original Oracle Database release from which the database was upgraded.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__GUID-7580F70A-93C8-4024-82C2-53847CE00E09">Releases Supported for Downgrades</p>
                     <p>You can downgrade a non-CDB Oracle Database from Oracle Database 19c to Oracle Database 18c, Oracle Database 12c, and to Oracle Database 11g release 11.2.0.4.</p>
                     <p>You can downgrade a PDB or CDB from Oracle Database 19c to Oracle Database 18c, or Oracle Database 12c Release 2 (12.2.0.1) </p>
                     <p>You can downgrade a PDB or CDB to Oracle Database 18c, Oracle Database 12c Release 12.2, and Oracle Database 12c Release 12.1.0.2.</p>
                     <div class="infoboxnote" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__GUID-36FA6D07-0897-417C-9C5A-E686B44E8613">
                        <p class="notep1">Note:</p>
                        <p>Starting with Oracle Database 12c, Release 1 (12.1), non-CDB architecture is deprecated. It can be desupported in a future release.</p>
                     </div>
                     <p>The following table provides additional information about releases supported for downgrading. When using this table, also read about compatibility in "Checking for Incompatibilities When Downgrading Oracle Database." </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__CACGDDHC">
                     <p class="titleintable">Table 7-1 Supported Releases and Editions for Downgrading</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Supported Releases and Editions for Downgrading" summary="Column 1 indicates if a release is supported for upgrade. Column 2 indicates if you can downgrade to the release specified in column 1. Column 3 provides further information about each release." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d51852e254">Oracle Database Release or Edition</th>
                              <th align="left" valign="bottom" width="21%" id="d51852e257">Downgradable (Yes/No)</th>
                              <th align="left" valign="bottom" width="59%" id="d51852e260">Notes</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e265" headers="d51852e254 ">
                                 <p>18</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e265 d51852e257 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e265 d51852e260 ">
                                 <p>No additional information at this time.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e275" headers="d51852e254 ">
                                 <p>12.2.0.1 and 12.1.0.2</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e275 d51852e257 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e275 d51852e260 ">
                                 <p>You cannot downgrade a database after you set the compatible initialization parameter to 12.1.0.2.</p>
                                 <p>You can downgrade a non-CDB from 19 to 18, or 12.2 to 12.1.0.2,  or 11.2.0.4 (all supported upgrade releases).</p>
                                 <p>Install the latest Release Update, Release Revision, bundle patch or patch set update (BP or PSU) before you downgrade a CDB, or before you unplug and downgrade a PDB. Patches are available for download on My Oracle Support. Refer to My Oracle Support note 756671.1 to obtain the latest patch set.</p>
                                 <p>You cannot downgrade to releases earlier than the minimum compatibility setting for the new Oracle Database release.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e291" headers="d51852e254 ">
                                 <p>Oracle Enterprise Manager</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e291 d51852e257 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e291 d51852e260 ">
                                 <p>If you downgrade to an earlier supported release, then you must reconfigure Oracle Enterprise Manager controls.</p>
                                 <p>Before you start your upgrade, you must use the <code>emdwgrd</code> utility to save DB Control files and data, so that you can restore Oracle Enterprise Manager Database Control (DB Control) after a downgrade.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e306" headers="d51852e254 ">
                                 <p>Oracle Database Express Edition</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e306 d51852e257 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e306 d51852e260 ">
                                 <p>You cannot downgrade a database that is upgraded from Oracle Database Express Edition.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__GUID-006B7A89-4476-43AD-B026-5AFC731765B8">Recommendations to Review Before Downgrading</p>
                     <p>The following recommendations for earlier supported releases affect downgrading for Oracle Database:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Multitenant architecture provides architecture features for a multitenant container database (CDB), and pluggable databases (PDBs). If you are upgrading to multitenant architecture, and you set the compatible initialization parameter to the highest level after upgrading to this release, then you cannot downgrade the database after an upgrade.</p>
                        </li>
                        <li>
                           <p>This release contains a new object privilege, <code class="codeph">READ</code>, in addition to <code class="codeph">SELECT</code>. After you downgrade, note the following implications of this object privilege:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you have the <code class="codeph">SELECT</code> and <code class="codeph">READ</code> object privileges, then the <code class="codeph">READ</code> privilege is removed.
                                 </p>
                              </li>
                              <li>
                                 <p>If you previously only had the <code class="codeph">READ</code> object privilege, then the <code class="codeph">READ</code> object privilege is transformed into the <code class="codeph">SELECT</code> object privilege.
                                 </p>
                              </li>
                           </ul>
                           <p>Refer to Oracle Database Security Guide for more information about the READ and SELECT object privileges. </p>
                        </li>
                        <li>
                           <p>If Oracle XML DB is not installed in the database that you upgrade, then during a downgrade, Oracle XML DB is uninstalled. For example, if you did not install Oracle XML DB with Oracle Database 11g Release 2 (11.2), then Oracle XML DB is installed with Oracle Database 12c. If you downgrade the database, then Oracle XML DB is uninstalled as part of the downgrade. Oracle XML DB is included by default with Oracle Database 12c release 1 (12.1), and later releases.</p>
                        </li>
                        <li>
                           <p>During upgrade to Oracle Database 12c, the Database (DB) Control repository is removed. If you downgrade to an earlier release, then you must reconfigure the Database (DB) Control to use it after the downgrade.</p>
                        </li>
                        <li>
                           <p>Downgrade is not supported for Oracle Enterprise Manager. If you downgrade to an earlier supported release, then you must reconfigure Oracle Enterprise Manager controls. </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=756671.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=756671.1</a></li>
                        <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG992" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12554"></a><div class="props_rev_3"><a id="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010" name="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010"></a><h3 id="UPGRD-GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010" class="sect3">Check for Incompatibilities When Downgrading Oracle Database</h3>
               <div>
                  <p>To see if the database has incompatibilities that can prevent you from downgrading, check the compatibility level of your database.</p>
                  <p>If the compatibility level of your Oracle Database 12<span class="italic">c</span> database is <code class="codeph">12.1.0</code>, then you are not able to downgrade.
                  </p>
                  <p>If you are downgrading to Oracle Database 11<span class="italic">g</span> release 2, then set the <code class="codeph">COMPATIBLE</code> initialization parameter to <code class="codeph">11.2.0</code> or lower. 
                  </p>
                  <div class="infoboxnote" id="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010__GUID-FBB1C572-0428-4DDF-A91B-C8254E2AA0F7">
                     <p class="notep1">Note:</p>
                     <p>For Oracle ASM disk groups, if you change disk group compatibility to 12.1.0.0.0 when you upgrade your database, then when you downgrade to the earlier release, you cannot mount your Oracle ASM disk groups.</p>
                     <p>You must manually restore compatibility of Oracle ASM disk groups before downgrade. Otherwise, the instance cannot mount the disk groups after downgrade. </p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010__GUID-CD3BD861-78B5-4A28-A46F-8B9CF766AC98">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ostmg/diskgroup-compatibility.html#OSTMG02700" target="_blank"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about Oracle ASM disk group compatibility
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12555"></a><div class="props_rev_3"><a id="GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B" name="GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B"></a><h3 id="UPGRD-GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B" class="sect3">Perform a Full Backup Before Downgrading Oracle Database</h3>
               <div>
                  <p>Oracle strongly recommends that you perform a full backup of your new Oracle Database release before you downgrade to a supported earlier release.</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B__GUID-7B294ABB-E676-4E24-8DEE-D1A2073F56BC">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about performing RMAN backups
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60142"></a><div class="props_rev_3"><a id="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73" name="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73"></a><h3 id="UPGRD-GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73" class="sect3">Performing Required Predowngrade Steps for Oracle Database</h3>
               <div>
                  <p>Complete the required preparation steps described here before you downgrade Oracle Database to the earlier release from which you upgraded. </p>
                  <p>Before you start a downgrade, you must resolve incompatibilities between database releases. For example, determine if you must disable components in the database before you start the downgrade.</p>
                  <ol>
                     <li>
                        <p>If you are downgrading a CDB or unplugging and downgrading a PDB in Oracle Database, then you must first apply the latest quarterly release update (Update), release update revision (Revision), bundle patch or patch set update (BP or PSU) available. Apply any required set of additional fixes on My Oracle Support Note 756671.1: </p>
                        <p><a href="https://support.oracle.com/rs?type=doc&amp;id=756671.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=756671.1</a></p>
                     </li>
                     <li>
                        <p>If you have enabled Oracle Database Vault on your database, then disable Oracle Database Vault before downgrading the database.</p>
                        <p>Use DBA_DV_STATUS to find out if Oracle Database Vault is enabled: </p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM DBA_DV_STATUS;
</code></pre><p>If the output is <samp class="sysout">TRUE</samp>, then Oracle Database Vault is enabled, so you must disable it.
                        </p>
                        <p>On multitenant architecture Oracle Database systems, use CDB_DV_STATUS on CDB$ROOT to find out the Oracle Database Vault status on all PDBs plugged in to the CDB: </p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM CDB_DV_STATUS;
</code></pre></li>
                     <li>
                        <p>If your database uses Oracle Label Security, and you are downgrading to release 11.2, then run the Oracle Label Security (OLS) preprocess downgrade <code>olspredowngrade.sql</code> script in the new Oracle Database 12<span class="italic">c</span> Oracle home.
                        </p>
                        <div class="infoboxnote" id="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73__GUID-DB90FA0E-7DD8-49FC-8AB7-2208F617E001">
                           <p class="notep1">Caution:</p>
                           <p>Run <code>olspredowngrade.sql</code> before you downgrade from Oracle Database 12<span class="italic">c</span> to database release 11.2 for databases that use Oracle Label Security and Oracle Database Vault.
                           </p>
                        </div>
                        <ol type="a">
                           <li>
                              <p>Query the <code class="codeph">V$OPTION</code> dynamic view. Determine if Oracle Label Security is enabled. For example:
                              </p><pre class="pre codeblock"><code>SQL&gt; SELECT VALUE FROM V$OPTION WHERE PARAMETER = 'Oracle Label Security';
</code></pre></li>
                           <li>
                              <p>Run the <code>olspredowngrade.sql</code> script:
                              </p><pre class="pre codeblock"><code>SQL&gt; @<span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin/olspredowngrade.sql
</code></pre></li>
                        </ol>
                     </li>
                     <li>
                        <p>If you have enabled Unified Auditing, then you can choose to back up and purge the unified audit trail:</p>
                        <ol type="a">
                           <li>
                              <p>Find if unified audit records exist.</p><pre class="pre codeblock"><code>SQL&gt; SELECT COUNT(*) FROM UNIFIED_AUDIT_TRAIL;
</code></pre></li>
                           <li>
                              <p>Back up the existing audit data to a table. For example:</p><pre class="pre codeblock"><code>SQL&gt; CREATE TABLE UA_DATA AS (SELECT * FROM UNIFIED_AUDIT_TRAIL);
</code></pre></li>
                           <li>
                              <p>Clean up the audit trail. </p><pre class="pre codeblock"><code>EXEC DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL(audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED, use_last_arch_timestamp =&gt; FALSE);
</code></pre></li>
                        </ol>
                     </li>
                     <li>
                        <p>Before downgrade, ensure that the target Oracle Home for the downgraded database contains the version of the time zone file that your database is using.</p>
                        <p>To find which time zone file version your database is currently using, query <code class="codeph">V$TIMEZONE_FILE</code> using the following command:
                        </p><pre class="pre codeblock"><code>SQL&gt; select * from  V$TIMEZONE_FILE;
</code></pre><p>For example:</p>
                        <p>If the query returns <code class="codeph">timezlrg_18.dat</code> in the column <code class="codeph">V$TIMEZONE_FILE.FILENAME</code>, then check if the file is present in the target Oracle Home:
                        </p>
                        <p>Linux and UNIX</p><pre class="pre codeblock"><code>$ORACLE_HOME/oracore/zoneinfo/timezlrg_18.dat
</code></pre><p>Windows</p><pre class="pre codeblock"><code>%ORACLE_HOME%\oracore\zoneinfo\timezlrg_18.dat</code></pre><p>If the required time zone file is missing from the target Oracle Home, then do one of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you installed the current version of the time zone file as a patch, and you still know the patch number, then use the same patch number to download the corresponding time zone file for the target release from the My Oracle Support website.</p>
                           </li>
                           <li>
                              <p>Locate the correct patch by using the My Oracle Support website patch search function. Enter the following search criteria: "Product is 'Oracle Database'", "Release is '<span class="variable" translate="no">target release</span>'", and "Description contains 'DST'".
                              </p>
                           </li>
                           <li>
                              <p>If you cannot locate the patch on the My Oracle Support website, then log a service request with Oracle Support.</p>
                           </li>
                        </ul>
                        <p>After you find and download the required patch, install it in the target Oracle Home.</p>
                     </li>
                     <li>
                        <p>If you created objects based on fixed objects, then drop these objects to avoid possible <samp class="sysout">ORA-00600</samp> errors. You can re-create these objects after the downgrade.
                        </p>
                     </li>
                     <li>
                        <p>If you have Oracle Enterprise Manager configured in your database, then drop the Enterprise Manager user:</p><pre class="pre codeblock"><code>DROP USER sysman CASCADE;</code></pre><div class="infoboxnote" id="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73__GUID-F8A87770-0FB2-4E6A-8DE3-B0DCE168DE9A">
                           <p class="notep1">Note:</p>
                           <p>After you drop the Enterprise Manager user, you can find that <code class="codeph">MGMT*</code> synonyms are invalid. You must reconfigure Oracle Enterprise Manager to use any Oracle Enterprise Manager controls in the downgraded database.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>If you are downgrading to Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2) that has the JSON bundled patch applied, and that uses Simple Oracle Document Access (SODA), then ensure that you apply the JSON bundle patch (JSON Patch Bundle 1 or JSON Patch Bundle 2) to the Oracle Database 12.1.0.2 binary. For more information, review the following My Oracle Support note:
                        </p>
                        <p><a href="https://support.oracle.com/rs?type=doc&amp;id=1992767.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1992767.1</a></p>
                     </li>
                     <li>
                        <p>Obtain the appropriate ARUs for your server operating system from the PSE listed for your release. Download and install all the patches listed for your earlier release before you start the downgrade:</p>
                        <ol type="a">
                           <li>
                              <p>Log in to My Oracle Support:</p>
                              <p><a href="https://support.oracle.com" target="_blank">https://support.oracle.com</a></p>
                           </li>
                           <li>
                              <p>Select <span class="uicontrol bold">Patches &amp; Updates</span>. In the <span class="wintitle">Patch Search</span> frame, provide the bug number listed for your release, and provide the platform for your server. 
                              </p>
                           </li>
                           <li>
                              <p>Download and install the patch</p>
                           </li>
                           <li>
                              <p>Repeat until you have installed all required patches for your server. </p>
                           </li>
                        </ol>
                        <p>Obtain the patches for your release:</p>
                        <p>Downgrade from 18c to 12.2 </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>2414935.1: Patches to apply before upgrading Oracle GI and DB to 18c</p>
                           </li>
                           <li>
                              <p> 2118136.2: Assistant: Download Reference for Oracle Database/GI Update, Revision, PSU, SPU (CPU), Bundle Patches, Patchsets and Base Releases</p>
                           </li>
                        </ul>
                        <p>Downgrade from 18c to 12.1.0.2.0 with CDB and PDB</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>25755742: DATABASE PATCH SET UPDATE 12.1.0.2.170718 or latest 12.1.0.2.0 Database patch set update</p>
                           </li>
                           <li>
                              <p>24438034: CDB_UPG: 12101 CDB UPGRADE LEFT OBJECT CDB_JAVA_POLICY INVALID</p>
                           </li>
                           <li>
                              <p>20348910: ALTER TYPE REPLACE IN PRVTAQJI.SQL TO BE REPLACE WITH CREATE OR REPLACE TYPE</p>
                           </li>
                           <li>
                              <p>20958816: INVALID OBJECTS AFTER DOWNGRADE FROM 12.2.0.1 TO 12.1.0.2</p>
                           </li>
                        </ul>
                        <p>Downgrade from 18c to 12.1.0.2.0 non-CDB</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>25755742: DATABASE PATCH SET UPDATE 12.1.0.2.170718 or latest 12.1.0.2.0 Database patch set update</p>
                           </li>
                           <li>
                              <p>24438034: CDB_UPG: 12101 CDB UPGRADE LEFT OBJECT CDB_JAVA_POLICY INVALID</p>
                           </li>
                           <li>
                              <p>20348910 : ALTER TYPE REPLACE IN PRVTAQJI.SQL TO BE REPLACE WITH CREATE OR REPLACE TYPE</p>
                           </li>
                           <li>
                              <p>20958816: INVALID OBJECTS AFTER DOWNGRADE FROM 12.2.0.1 TO 12.1.0.2</p>
                           </li>
                           <li>
                              <p>21856522: UPGRADE OF 12.1 TO 12.2 CAUSE XOQ COMPONENT TO BE INVALID</p>
                           </li>
                        </ul>
                        <p>Downgrade from 18c to 11.2.0.4.0</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>23054359: DATABASE PATCH SET UPDATE 11.2.0.4</p>
                           </li>
                           <li>
                              <p>20898997: XMLTYPESUP: QCTOXSNLB SHOULD NOT CHECK AGAINST SNAPSHOT SIZE</p>
                           </li>
                           <li>
                              <p>20348910: ALTER TYPE REPLACE IN PRVTAQJI.SQL TO BE REPLACE WITH CREATE OR REPLACE TYPE</p>
                           </li>
                        </ul>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../olsag/performing-dba-functions-under-oracle-label-security.html#OLSAG3416" target="_blank"><span><cite>Oracle Label Security Administrators Guide</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NLSPG004" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" name="GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E"></a><h3 id="UPGRD-GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" class="sect3">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</h3>
               <div>
                  <p>To automate downgrades, starting in Oracle Database 19c, Oracle provides the <code class="codeph">dbdowngrade</code> utility script. When necessary, you can also continue to run <code class="codeph">catdwgrd.sql</code> manually, as in previous releases. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EAF290FD-5F22-4FEE-829D-B3587168471F">Using Dbdowngrade to Downgrade CDB and Non-CDB Oracle Databases</a><br>To downgrade Oracle Database to an earlier supported major release, or to an earlier release update, Oracle recommends that you run the downgrade script <code class="codeph">dbdowngrade</code>. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-0227D321-577E-47C5-A8C0-36991B8D0357">Downgrading a CDB or Non-CDB Oracle Database Manually with catdwgrd.sql</a><br>You can run the manual <code class="codeph">catdwgrd.sql</code> script for downgrades of Oracle Database to an earlier a supported major release, or an earlier release update, where you either prefer to run a manual script, or you want to avoid excessive thread issues. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F" name="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F"></a><h4 id="UPGRD-GUID-EAF290FD-5F22-4FEE-829D-B3587168471F" class="sect4">Using Dbdowngrade to Downgrade CDB and Non-CDB Oracle Databases</h4>
                  <div>
                     <p>To downgrade Oracle Database to an earlier supported major release, or to an earlier release update, Oracle recommends that you run the downgrade script <code class="codeph">dbdowngrade</code>. 
                     </p>
                     <div class="section">
                        <p>Starting with Oracle Database 19c, Oracle provides the Downgrade Utility script <code class="codeph">dbdowngrade</code>. When you use the dbdowngrade utility, it sets appropriate values for the downgrade, and simplifies how you start a downgrade. Specifically, it ensures that the underlying calls to <code class="codeph">catcon.pl</code> use recommended values, so that potential errors due to excessive threads being spawned are reduced. This feature is especially of value for downgrades of multitenant architecture (CDB) databases. When the potential of excessive threads exists, you can continue the downgrade by running the <code class="codeph">catdwgrd.sql</code> script manually, as in previous releases.
                        </p>
                        <p>The <code class="codeph">dbdowngrade</code> shell command is located in the file path <code class="codeph">$ORACLE_HOME/bin</code> on Linux and Unix, and <code class="codeph">%ORACLE_HOME%\bin</code> on Microsoft Windows based systems. If you are downgrading a CDB, then you can provide the inclusion list as argument to the script. 
                        </p>
                        <p>When you downgrade multitenant architecture databases (CDBs), the <code class="codeph">dbdowngrade</code> script has two behaviors, depending on whether you use an inclusion list. 
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_BW3_4YD_CGB">
                           <li>
                              <p><span class="bold">Without an inclusion list</span>. The downgrade runs on all the containers that are open in the CDB (PDB and CDB).
                              </p>
                              <p>Run the downgrade without an inclusion list when you want to downgrade the entire CDB. In this scenario, all open containers are downgraded. You must open all the PDBs in the CDB manually before you start the <code class="codeph">dbdowngrade</code> script.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">With an inclusion list</span>. The downgrade runs only on the PDBs within the inclusion list, and CDB$ROOT is not downgraded during the downgrade operation.
                              </p>
                              <p>Run the downgrade with an inclusion list when you want to downgrade only the set of PDBs listed in the inclusion list. In this scenario, where you want to use unplug and plug upgrades, only the set of PDBs that you list in the inclusion list are downgraded. The CDB and the PDBs that are not on the inclusion list remain upgraded to the later release. </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>Prerequisites:</p>
                        <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_ZKW_RZD_CGB">
                           <li>
                              <p>If you are downgrading from Oracle Database 19c to Oracle Database 18c, Oracle Database 12.2, or Oracle Database 12.1, then you can downgrade all databases in a multitenant container database (CDB), or one pluggable database (PDB) within a CDB. Oracle Database releases earlier than Oracle Database 12c did not use multitenant architecture. </p>
                           </li>
                           <li>If you are downgrading without an inclusion list, then you must open all PDB containers before you run the <code class="codeph">dbdowngrade</code> script. 
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Set the ORACLE_HOME environment variable to the Oracle home of the upgraded Oracle Database release </span></li>
                        <li class="stepexpand"><span>Set the ORACLE_SID environment variable to Oracle Database that you want to downgrade. </span></li>
                        <li class="stepexpand"><span>Start the <code class="codeph">dbdowngrade</code> script, either with default values, or with an inclusion list. </span><div>
                              <p>If you use an inclusion list, then CDB$ROOT must not be on your inclusion list.</p>
                           </div>
                           <div>
                              <p>For example:</p><code>Running with default values</code><p>Linux and Unix</p><pre class="pre codeblock"><code>$cd $ORACLE_HOME/bin 
$./dbdowngrade</code></pre><p>Microsoft Windows</p><pre class="pre codeblock"><code>$cd %ORACLE_HOME%\bin
$dbdowngrade.cmd</code></pre><code>Running with inclusion list for CDB</code><p>Linux and Unix</p><pre class="pre codeblock"><code>$cd $ORACLE_HOME/bin 
$./dbdowngrade &#x2013;c 'PDB1 PDB2 PDBN'</code></pre><p>Microsoft Windows</p><pre class="pre codeblock"><code>$cd %ORACLE_HOME%\bin 
$dbdowngrade.cmd &#x2013;c "PDB1 PDB2 PDBN"</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>As a result of running the <code class="codeph">dbdowngrade</code> script, the utility runs <code class="codeph">catdwgrd</code> and <code class="codeph">catcon.pl</code>. These scripts perform the downgrade, using the recommended values for the release to which you are downgrading. The log files produced by the downgrade scripts are placed under the first directory found of one of these three options, in order: 
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_YDR_3PJ_CGB">
                           <li>
                              <p>The Oracle base home identified by the <code class="codeph">orabasehome</code> command
                              </p>
                           </li>
                           <li>
                              <p>The Oracle base home identified by the <code class="codeph">orabase</code> command
                              </p>
                           </li>
                           <li>
                              <p>The Oracle home identified by the <code class="codeph">oracle_home</code> command
                              </p>
                           </li>
                        </ul>
                        <div class="p"> For example: <pre class="pre codeblock"><code>$ $ORACLE_HOME/bin/orabasehome
/u01/app/oracle/product/19.0.0/dbhome_1</code></pre>In this example, the $ORACLE_BASE directory is <code class="codeph"> /u01/app/oracle/product/19.0.0/dbhome_1</code>, and the logs are located in <code class="codeph">/u01/app/oracle/product/19.0.0/dbhome_1/cfgtoollogs/downgrade</code>. In the directory, the log files are prefixed with the string <code class="codeph">catdwgrd</code>. 
                        </div>
                        <div class="infoboxnote" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__GUID-0799D96A-CE03-4F8C-BA04-517CAE3272D6">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_ODW_TJJ_CGB">
                              <li>
                                 <p>Read-write Oracle homes: the commands <code class="codeph">orabaseconfig</code> and <code class="codeph">orabasehome</code> both return the environment setting for ORACLE_HOME. 
                                 </p>
                              </li>
                              <li>
                                 <p>Read-only Oracle homes: the command <code class="codeph">orabaseconfig</code> returns the read-only path configuration for the Oracle base in the path <code class="codeph">$ORACLE_BASE/homes</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" title="To automate downgrades, starting in Oracle Database 19c, Oracle provides the dbdowngrade utility script. When necessary, you can also continue to run catdwgrd.sql manually, as in previous releases.">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357" name="GUID-0227D321-577E-47C5-A8C0-36991B8D0357"></a><h4 id="UPGRD-GUID-0227D321-577E-47C5-A8C0-36991B8D0357" class="sect4">Downgrading a CDB or Non-CDB Oracle Database Manually with catdwgrd.sql</h4>
                  <div>
                     <p>You can run the manual <code class="codeph">catdwgrd.sql</code> script for downgrades of Oracle Database to an earlier a supported major release, or an earlier release update, where you either prefer to run a manual script, or you want to avoid excessive thread issues. 
                     </p>
                     <div class="section">
                        <p>If you are downgrading from Oracle Database 19c to Oracle Database 18c, Oracle Database 12.2, or Oracle Database 12.1, then you can downgrade all databases in a multitenant container database (CDB), or one pluggable database (PDB) within a CDB. Oracle Database releases earlier than Oracle Database 12c did not use multitenant architecture. </p>
                        <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-33208AE2-97CD-4E76-A3AE-A709BEE94AE6">
                           <p class="notep1">Note:</p>
                           <p>Starting with Oracle Database 12c release 1 (12.1), non-CDB architecture is deprecated. It can be desupported in a future release.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the system as the owner of the Oracle Database Oracle home directory.</span></li>
                        <li class="stepexpand"><span>At a system prompt, change to the directory <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin</code>, where <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code> is the Oracle home on your system.</span><div>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-A7F329F3-06E7-469E-A4F1-10C2BA6EF7E4">
                                 <p class="notep1">Note:</p>
                                 <p>If you are downgrading a cluster database, then shut down the database completely, and change the value for the initialization parameter <code class="codeph">CLUSTER_DATABASE</code> to <code class="codeph">FALSE</code>. After the downgrade, set this parameter back to <code class="codeph">TRUE</code>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Using SQL*Plus, connect to the database instance as a user with <code class="codeph">SYSDBA</code> privileges:</span><div><pre class="pre codeblock"><code>sqlplus sys as sysdba
Enter password: <span class="variable" translate="no">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Log in to the system as the Oracle user (owner) of the new Oracle Database release Oracle home.</span></li>
                        <li class="stepexpand"><span>Change directory to <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin</code>, and start SQL*Plus.</span></li>
                        <li class="stepexpand"><span>Connect to the database that you want to upgrade using an account with DBA privileges:</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the instance in downgrade mode by issuing the following SQL*Plus command for your Oracle Database instance type. You can be required to use the <code class="codeph">PFILE</code> option to specify the location of your initialization parameter file.</span><ul>
                              <li>
                                 <p>Non-CDB instances: </p><pre class="pre codeblock"><code>SQL&gt; startup downgrade pfile=<span class="variable" translate="no">pfile_name</span>
</code></pre></li>
                              <li>
                                 <p>CDB instances: </p><pre class="pre codeblock"><code>SQL&gt; startup downgrade pfile=<span class="variable" translate="no">pfile_name</span>
SQL&gt; alter pluggable database all open downgrade;</code></pre></li>
                           </ul>
                           <div>
                              <p>Specify the location of your initialization parameter file <code class="codeph">PFILE</code>.
                              </p>
                              <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-072F0FC7-6B87-4CC6-B0F0-B6CB3FD90EA0">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for information about specifying initialization parameters at startup and the initialization parameter file
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Optional) If you are downgrading a non-CDB, then you can set the system to spool results to a log file so you can track the changes and issues. </span><div>
                              <p>If you are downgrading a CDB, then you do not need to perform this step. CDBs automatically spool output to the <code class="codeph">catcon_logs</code>.
                              </p>
                              <p>On a non-CDB, enter the following command to spool results to a log file, where <code class="codeph">downgrade.log</code> is the name of the log file:
                              </p>
                           </div>
                           <div><pre class="pre codeblock"><code>SQL&gt; SPOOL downgrade.log
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Use the following command to start the downgrade, depending on your configuration:</span><ul>
                              <li>
                                 <p>Non-CDB:</p><pre class="pre codeblock"><code>SQL&gt; @catdwgrd.sql
</code></pre></li>
                              <li>
                                 <p>CDB:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -d $ORACLE_HOME/rdbms/admin -e -b catdwgrd -l <span class="variable" translate="no">output directory</span> -r catdwgrd.sql
</code></pre></li>
                           </ul>
                           <div>
                              <p>In the CDB example, <code>catdwgrd.sql</code> is run on containers using <code>catcon.pl</code>. To run commands with the <code>catcon.pl</code> utility, you first start Perl. The <code class="codeph">-d</code> parameter tells <code>catcon.pl</code> where to find <code>catdwgrd</code>. The <code class="codeph">-l</code> parameter specifies the output directory for log files (instead of writing to the <code>rdbms/admin</code> directory). Specifying the <code class="codeph">-r</code> parameter causes <code>catdwgrd</code> to run first on the PDBs, and second on CDB_ROOT.
                              </p>
                              <p>Run <code>catdwgrd</code> using the <code class="codeph">-r</code> parameter when you downgrade a CDB. The <code class="codeph">&#x2013;r</code> parameter changes the default order that scripts are run, so that scripts run in all PDBs, and then in CDB_ROOT.
                              </p>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-EAB6D4C4-8286-41DC-8F60-DB0BE0F702B6">
                                 <p class="notep1">Note:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Use the version of the <code class="codeph">catdwgrd.sql</code> script included with your new Oracle Database release.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Run <code class="codeph">catdwgrd</code> using the <code class="codeph">-r</code> parameter when downgrading a CDB. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Run <code class="codeph">catdwgrd.sql</code> in the new Oracle Database release environment.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">catdwgrd.sql</code> script downgrades all Oracle Database components in the database to the release from which you upgraded. The downgrade is either to the supported major release from which you upgraded, or to the patch release from which you upgraded.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              <p>If you are downgrading a multitenant environment database, and the <code>catdwgrd.sql</code> command encounters a failure, then review the error message. Check to see what issues are present in the <code class="codeph">CDB$ROOT</code> or PDBs before proceeding. Check the section "Troubleshooting the Downgrade of Oracle Database." Fix the issues as stated in the errors. After you resolve the errors, rerun <code>catdgwrd.sq</code> with the <code>catcon.pl</code> utility, using the syntax <code class="codeph">catcon.pl -c 'cdb,pdb' -r</code>.
                              </p>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-6AE4C9D3-07D5-427F-8F28-4105F9DD12FD">
                                 <p class="notep1">Caution:</p>
                                 <p>If the downgrade for a component fails, then an <code class="codeph">ORA-39709</code> error is displayed. The SQL*Plus session terminates without downgrading the Oracle Database data dictionary. All components must be successfully downgraded before the Oracle Database data dictionary is downgraded. Identify and fix the problem before rerunning the <code>catdwgrd.sql</code> script.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>For Non-CDB only, if you turned the spool on, then turn off the spooling of script results to the log file:</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><p>Check the spool file, and verify that no errors occurred during the downgrade. You named the spool file in Step 8, and the suggested name was <code class="codeph">downgrade.log</code>. Correct any problems that you find in this file. If necessary, rerun the downgrade script.
                              </p>
                           </div>
                           <div>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-D93C480D-DF41-4A5D-B0F1-6561EA414026">
                                 <p class="notep1">Note:</p>
                                 <p>Save the results from the first time you ran the downgrade script. Before you rerun the downgrade script, rename the file <code class="codeph">downgrade.log</code> to a different name, so that it is not overwritten when you rerun the script.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Shut down the instance:</span><div><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Exit SQL*Plus.</span></li>
                        <li class="stepexpand"><span>If your operating system is Linux or UNIX, then change the following environment variables to point to the directories of the release to which you are downgrading:</span><ul>
                              <li>
                                 <p>Linux and UNIX systems</p>
                                 <p>Change the following environment variables to point to the directories of the release to which you are downgrading:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">ORACLE_HOME</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">PATH</code></p>
                                    </li>
                                 </ul>
                                 <p>Also check that your <code class="codeph">oratab</code> file, and any client scripts that set the value of <code class="codeph">ORACLE_HOME</code>, point to the downgraded Oracle home. 
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-1D10C9D2-23C9-4C0D-A855-57266297E589">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=GINST" target="_blank"><span><cite>Oracle Database Installation Guide</cite></span></a> for your operating system for information about setting other important environment variables on your operating system
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>Microsoft Windows systems</p>
                                 <ol type="a">
                                    <li>
                                       <p>Stop all Oracle services, including the <code class="codeph">OracleService<span class="variable" translate="no">SID</span></code> Oracle service of the Oracle Database 12c database, where <code class="codeph"><span class="variable" translate="no">SID</span></code> is the instance name.
                                       </p>
                                       <p>For example, if your <span class="variable" translate="no">SID</span> is <code class="codeph">ORCL</code>, then enter the following at a command prompt:
                                       </p><pre class="pre codeblock"><code>C:\&gt; NET STOP OracleServiceORCL
</code></pre><div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-21EBB256-7F58-4846-BC96-E9A64F3C24D2">
                                          <p class="notep1">See Also:</p>
                                          <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NTQRF206" target="_blank"><span><cite>Oracle Database Administrators Reference for Microsoft Windows</cite></span></a> for more information about stopping Oracle services on Windows
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>Delete the Oracle service at a command prompt by issuing the command <code class="codeph">ORADIM</code>. 
                                       </p>
                                       <p>For example, if your <span class="variable" translate="no">SID</span> is <code class="codeph">ORCL</code>, then enter the following command:
                                       </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -DELETE -SID ORCL
</code></pre><p>Create the Oracle service of the database that you are downgrading at a command prompt using the command <code class="codeph">ORADIM</code>:
                                       </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -NEW -SID <span class="variable" translate="no">SID</span> -INTPWD <span class="variable" translate="no">PASSWORD</span> -MAXUSERS <span class="variable" translate="no">USERS</span>
-STARTMODE MANUAL -PFILE <span class="variable" translate="no">ORACLE_HOME</span>\DATABASE\INIT<span class="variable" translate="no">SID</span>.ORA</code></pre><p>The syntax for <code class="codeph">ORADIM</code> includes the following variables: 
                                       </p>
                                       <div class="tblformal" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-6ECD3048-96E0-4F39-8437-1C8AEA8F171A">
                                          <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Syntax and variables for ORADIM, listing the variable, and listing the description" width="90%" frame="hsides" border="1" rules="rows">
                                             <thead>
                                                <tr align="left" valign="top">
                                                   <th align="left" valign="bottom" width="21%" id="d51852e1837">Variable</th>
                                                   <th align="left" valign="bottom" width="79%" id="d51852e1840">Description</th>
                                                </tr>
                                             </thead>
                                             <tbody>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1845" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">SID</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1845 d51852e1840 ">
                                                      <p>Same system identifier (SID) name as the SID of the database being downgraded.</p>
                                                   </td>
                                                </tr>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1853" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">PASSWORD</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1853 d51852e1840 ">
                                                      <p>Password for the database instance. This password is the password for the user connected with <code class="codeph">SYSDBA</code> privileges. The <code class="codeph">-INTPWD</code> option is not required. If you are prompted for a password, then use the password for the standard user account for this Windows platform.
                                                      </p>
                                                   </td>
                                                </tr>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1867" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">USERS</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1867 d51852e1840 ">
                                                      <p>Maximum number of users that can be granted <code class="codeph">SYSDBA</code> and <code class="codeph">SYSOPER</code> privileges.
                                                      </p>
                                                   </td>
                                                </tr>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1881" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">ORACLE_HOME</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1881 d51852e1840 ">
                                                      <p>Oracle home directory of the database to which you are downgrading. Ensure that you specify the full path name with the option <code class="codeph">-PFILE</code>, including the drive letter where the Oracle home directory is mounted. 
                                                      </p>
                                                      <p>See <cite>Oracle Database Administrators Guide</cite> for information about specifying initialization parameters at startup, and for information about the initialization parameter file.
                                                      </p>
                                                   </td>
                                                </tr>
                                             </tbody>
                                          </table>
                                       </div>
                                       <!-- class="inftblhruleinformal" -->
                                       <p>For example, if your <span class="variable" translate="no">SID</span> is <code class="codeph">ORCL</code>, your <span class="variable" translate="no">PASSWORD</span> is <code class="codeph">TWxy5791</code>, the maximum number of <span class="variable" translate="no">USERS</span> is <code class="codeph">10</code>, and the <span class="variable" translate="no">ORACLE_HOME</span> directory is <code class="codeph">C:\ORANT</code>, then enter the following command:
                                       </p><pre class="oac_no_warn" dir="ltr">C:\&gt; ORADIM -NEW -SID ORCL -INTPWD TWxy5791 -MAXUSERS 10
     -STARTMODE AUTO -PFILE C:\ORANT\DATABASE\INITORCL.ORA</pre><div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-D5D20E7F-36CB-4F3F-8E13-B6136C350F36">
                                          <p class="notep1">Note:</p>
                                          <p>The <code class="codeph">ORADIM</code> command prompts you for the password for the Oracle home user account. You can specify other options using <code class="codeph">ORADIM</code>.
                                          </p>
                                          <p>You are not required to change any Windows Registry settings when downgrading a database. The <code class="codeph">ORADIM</code> utility makes all necessary changes automatically.
                                          </p>
                                       </div>
                                       <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-18E83A45-EFE2-4D0B-92B5-7706D851759E">
                                          <p class="notep1">See Also:</p>
                                          <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NTQRF05011" target="_blank"><span><cite>Oracle Database Administrators Reference for Microsoft Windows</cite></span></a> for information about administering an Oracle Database instance using <code class="codeph">ORADIM</code></p>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>Restore the configuration files (for example, parameter files, password files, and so on) of the release to which you are downgrading.</span><div>
                              <p>If the database is an Oracle RAC database, then run the following command to return the database to single instance mode:</p><pre class="pre codeblock"><code>SET CLUSTER_DATABASE=FALSE</code></pre><div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-4C04E65D-B393-4841-88D5-2405CD35AE55">
                                 <p class="notep1">Note:</p>
                                 <p>If you are downgrading a cluster database, then perform this step on all nodes on which this cluster database has instances configured. Set the value for the initialization parameter <code class="codeph">CLUSTER_DATABASE</code> to <code class="codeph">FALSE</code>. After the downgrade, set this initialization parameter back to <code class="codeph">TRUE</code>. 
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-978244AA-F04B-48DD-8369-4E69713FFD5F">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../racad/administering-database-instances-and-cluster-databases.html#RACAD017" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for information about initialization parameter use in Oracle RAC
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>At a system prompt, change to the <code class="codeph">admin</code> directory in the Oracle home directory of the earlier release to which you are downgrading. (<code><span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin</code>, where <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code> is the path to the earlier release Oracle home.)</span></li>
                        <li class="stepexpand"><span>Start SQL*Plus, and connect to the database instance as a user with SYSDBA privileges.</span><ul>
                              <li>
                                 <p>For a non-CDB:</p><pre class="pre codeblock"><code>SQL&gt; CONNECT / AS SYSDBA
SQL&gt; STARTUP UPGRADE</code></pre></li>
                              <li>
                                 <p>For a CDB:</p><pre class="pre codeblock"><code>connect / as sysdba
startup upgrade;
alter pluggable database all open upgrade;
</code></pre></li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>(Optional) For a non-CDB, set the system to spool results to a log file to track changes and issues. This step is not needed for a CDB.</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL reload.log
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run <code>catrelod.sql</code> on non-CDB databases, or use <code>catcon.pl</code> to run <code>utlrp.sql</code> on CDB databases.</span><ul>
                              <li>
                                 <p>For a non-CDB:</p><pre class="pre codeblock"><code>SQL&gt; $ORACLE_HOME/rdbms/admin/catrelod.sql</code></pre></li>
                              <li>
                                 <p>For a CDB:</p><pre class="oac_no_warn" dir="ltr"> $ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -n 1 -e -b catrelod -d $ORACLE_HOME/rdbms/admin catrelod.sql</pre></li>
                           </ul>
                           <div>
                              <p>This command reloads the appropriate version for each of the database components in the downgraded database.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If you turned on spooling for a non-CDB, then turn off the spooling of script results to the log file:</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><p>Check the spool file, and verify that the packages and procedures compiled successfully. Correct any problems that you find in this log file, and rerun the appropriate script, if necessary.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Shut down and restart the instance for normal operation:</span><div><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; STARTUP
</code></pre></div>
                           <div>
                              <p>You can be required to use the option<code class="codeph">PFILE</code> to specify the location of your initialization parameter file. 
                              </p>
                              <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-CCEBC3D1-9DE2-47F8-82E2-1BC60D12E229">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for information about specifying initialization parameters at startup, and in the initialization parameter file
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If you configured your database to use Oracle Label Security, then complete this step. If you did not configure your database to use Oracle Label Security, then proceed to the next step.</span><ol type="a">
                              <li class="substepexpand"><span>Copy the script <code class="codeph">olstrig.sql</code> from the Oracle home under Oracle Database 12<span class="italic">c</span> to the Oracle home of the release number to which you are downgrading the database.</span></li>
                              <li class="substepexpand"><span>From the Oracle home of the downgrade release, run <code class="codeph">olstrig.sql</code> to recreate DML triggers on tables with Oracle Label Security policies:</span><div><pre class="pre codeblock"><code>SQL&gt; @olstrig.sql
</code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>(Optional) For a non-CDB, set the system to spool results to a log file to track changes and issues. This step is not needed for a CDB.</span><div>
                              <p>Example:</p><pre class="pre codeblock"><code>SQL&gt; SPOOL utlrp.log</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile any remaining stored PL/SQL and Java code. Use the procedure for your configuration:</span><ul>
                              <li>
                                 <p>non-CDB:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; $ORACLE_HOME/rdbms/admin/utlrp.sql </pre></li>
                              <li>
                                 <p>CDB:</p><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -n 1 -e -b utlrp -d $ORACLE_HOME/rdbms/admin utlrp.sql</pre><p>The <code class="codeph">utlrp.sql</code> script recompiles all existing PL/SQL modules previously in <code class="codeph">INVALID</code> state, such as packages, procedures, types, and so on. The log file <code class="codeph">utlrp0.log</code> is generated. That log file lists the recompilation results.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>If you turn on spooling for a non-CDB when you run <code class="codeph">utlrp.sql</code>, then turn off the spooling of script results to the log file:</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><p>Check the spool file, and verify that the packages and procedures compiled successfully. Correct any problems that you find in this log file. If necessary, rerun the appropriate script.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Exit SQL*Plus.</span></li>
                        <li class="stepexpand"><span>If you are downgrading a cluster database, then you must run the following command to downgrade the Oracle Clusterware database configuration:</span><div><pre class="pre codeblock"><code>$ srvctl downgrade database -d <span class="variable" translate="no">db-unique-name</span> -o <span class="variable" translate="no">oraclehome</span> -t <span class="variable" translate="no">to_version</span>
</code></pre></div>
                           <div>
                              <p>Replace the variables in this syntax example with the values for your system:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">db-unique-name</span></code> is the database name (not the instance name).
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">oraclehome</span></code> is the location of the old Oracle home for the downgraded database.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">to_version</span></code> is the database release to which the database is downgraded. (For example: 12.1.0.2.0.)
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-DFEFB115-42A3-42B4-86CC-E2109E326FA3">
                                 <p class="notep1">Note:</p>
                                 <p>Run this command from the new release Oracle home, not from the Oracle home to which the database is being downgraded.</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>At the completion of this procedure, your database is downgraded.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA">Troubleshooting the Downgrade of Oracle Database</a></li>
                           <li><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" title="To automate downgrades, starting in Oracle Database 19c, Oracle provides the dbdowngrade utility script. When necessary, you can also continue to run catdwgrd.sql manually, as in previous releases.">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C" name="GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C"></a><h3 id="UPGRD-GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C" class="sect3">About Downgrades and Invalid Objects with Component Status OPTION OFF</h3>
               <div>
                  <p>Downgrades from later release Oracle Database Standard Edition to Oracle Database 12c Standard Edition with CDB and PDBS contain later release invalid objects after the downgrade. </p>
                  <p>With downgrades from later release Oracle Database releases to Oracle Database Release 12c (12.2 or 12.1), it is expected behavior to find later release invalid objects in the downgraded database, where the Oracle Database Release 12c database had these objects set to FALSE. This problem does not exist with downgrades to Oracle Database Release 18c (18.1.0) and later Oracle Database releases. </p>
                  <div class="example" id="GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C__GUID-4ECE04D0-86FB-474A-9C18-ACAAC5BD0D4F">
                     <p>For example:</p>
                     <p>During a downgrade from Oracle Database 19c Standard Edition to Oracle Database 12c Release 2 (12.2.0.1) Standard Edition, you have OLAP and Spatial components upgraded to the 19c release versions, though they are set to FALSE. After the downgrade, the OLAP and Spatial components are still not available, but they are not reloaded into the 12.2.0.1 release. You then see this result in the DBA registry, where you have later release objects listed in your 12.2 registry:</p><pre class="pre codeblock"><code>OLAP Analytic Workspace             OPTION OFF   19.1.0
Oracle OLAP API                     OPTION OFF   19.1.0</code></pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>This result is expected behavior in downgrades from Oracle Database 18c and later to Oracle Database 12c. The reason that this behavior is expected is because the option setting for these options in Standard Edition databases is FALSE. During the upgrade, all options are upgraded, even though they are set to <code class="codeph">FALSE</code>. During the run of <code class="codeph">catrelod.sql</code>, the reload scripts do not run to replace these objects with the earlier release versions. As a result, downgrading back to Standard Edition leaves many OLAP and Spatial objects at their later release versions.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F" name="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F"></a><h3 id="UPGRD-GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F" class="sect3">Downgrading a Single Pluggable Oracle Database (PDB)</h3>
               <div>
                  <p>If you are downgrading Oracle Database, then you can downgrade one PDB without downgrading the whole CDB.</p>
                  <p>In Oracle Database releases later than Oracle Database 12c release 2 (12.2), you can downgrade individual PDBs. For example, you can unplug a PDB from an upgraded CDB, downgrade the PDB, and then plug it in to an earlier release CDB, or you can convert the PDB database to a standalone database.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__GUID-FDBE5EE1-9702-4F3C-AAAF-AB864443A5E2">Downgrade the PDB</p>
                     <p>In this procedure example, you downgrade the PDB to release 12.1.0.2:</p>
                     <ol>
                        <li>
                           <p>Start up the PDB in DOWNGRADE mode. The CDB can be in normal mode when you do this.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database CDB1_PDB1 open downgrade;
</pre></li>
                        <li>
                           <p>Downgrade the PDB, either by using the <code class="codeph">dbdowngrade</code> utility, or by running <code class="codeph">catdwgrd</code> manually, using <code class="codeph">catcon.pl</code>. 
                           </p>
                           <p>In each of these options, the PDB that you are downgrading is <code class="codeph">PDB1</code>.
                           </p>
                           <ul style="list-style-type: disc;" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__UL_UWJ_LB2_CGB">
                              <li>
                                 <p>Downgrading with <code class="codeph">dbdowngrade</code> utility.
                                 </p>
                                 <p>Downgrade the PDB using the dbdowngrade script as follows:</p><pre class="pre codeblock"><code>cd $ORACLE_HOME/bin
./dbdowngrade -c 'PDB1'</code></pre></li>
                              <li>
                                 <p>Manually downgrading with <code class="codeph">catdwgrd</code>, using <code class="codeph">catcon.p.</code></p>
                                 <p>Run <code class="codeph">catdwgrd</code> as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -d
 $ORACLE_HOME/rdbms/admin -n 1 -l &lt;output directory&gt; -e -b catdwgrd -c 'PDB1'
 catdwgrd.sql
</pre><p>In the example, <code>catdwgrd</code> is run with <code>catcon.pl</code>. The <code class="codeph">-d</code> parameter tells <code>catcon.pl</code> where to find <code>catdwgrd</code>. The <code class="codeph">-l</code> parameter specifies the output directory for log files, instead of writing to the <code class="codeph">rdbms/admin</code> directory). You must use the <code class="codeph">-r</code> parameter to run the two scripts together at the same time.
                                 </p>
                                 <p>The log files for the downgrade are placed in the Oracle base home (the Oracle base identified by the commands <code class="codeph">orabasehome</code>, or <code class="codeph">orabase</code>, or the Oracle home identified by the command <code class="codeph">oracle_home</code>, in that order.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Close the PDB.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__GUID-201A7D9B-2D52-44EE-BC23-2408393DF7AF">Unplug the PDB from the CDB</p>
                     <p>In this step you unplug the downgraded PDB from the release 12.2.0.1 CDB:</p>
                     <ol>
                        <li>
                           <p>Connect to the upgraded CDB.</p>
                        </li>
                        <li>
                           <p>Close the PDB that you want to unplug.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database PDB1 close;
</pre></li>
                        <li>
                           <p>Unplug the downgraded 12.1.0.2 PDB, replacing the variable <code class="codeph"><span class="variable" translate="no">path</span></code> with the path on your system:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database PDB1 unplug into '<span class="variable" translate="no">path</span>/pdb1.xml';
</pre><p>You receive the following response when the unplug is completed:</p><pre class="oac_no_warn" dir="ltr">Pluggable database altered</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__GUID-217DD5FD-30A1-4796-A0C4-3CBAB107CAA0">Plug in the Downgraded 12.1.0.2 PDB</p>
                     <p>In this step you plug the downgraded 12.1.0.2 PDB into the 12.1.0.2 CDB. To do this, you must create the PDB in this CDB. The following example shows how to create a pluggable database called PDB1:</p>
                     <ol>
                        <li>
                           <p>Connect to the 12.1.0.2 CDB.</p>
                        </li>
                        <li>
                           <p>Plug in the 12.1.0.2 PDB.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; create pluggable database PDB1 using '<span class="variable" translate="no">path</span>/pdb1.xml';
</pre><p>This command returns <code class="codeph">Pluggable database created</code>.
                           </p>
                        </li>
                        <li>
                           <p>Open the PDB in upgrade mode:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database PDB1 open upgrade;
</pre></li>
                        <li>
                           <p>Connect to the PDB:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter session set container=PDB1;
</pre></li>
                        <li>
                           <p>Run <code class="codeph">catrelod</code> in the PDB:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @$ORACLE_HOME/rdbms/admin/catrelod.sql
</pre><p>The <code class="codeph">catrelod.sql</code> script reloads the appropriate version for each of the database components in the downgraded database.
                           </p>
                        </li>
                        <li>
                           <p>Run <code class="codeph">utlrp</code> in the PDB:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @$ORACLE_HOME/rdbms/admin/utlrp.sql
</pre><p>The <code class="codeph">utlrp.sql</code> script recompiles all existing PL/SQL modules that were previously in an <code class="codeph">INVALID</code> state, such as packages, procedures, types, and so on.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65" name="GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65"></a><h3 id="UPGRD-GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65" class="sect3">Downgrading PDBs That Contain Oracle Application Express</h3>
               <div>
                  <p>Use this procedure to avoid INVALID OBJECTS OWNED BY APEX_050000 errors when you downgrade PDBs that contain Oracle Application Express.</p>
                  <div class="section">
                     <p>After you downgrade the PDB to an earlier release, enter a SQL statement similar to the following to drop the Oracle Application Express user: </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65__ORACLE_HOMEPERLBINPERLORACLE_HOMERD-50050B17"><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -b drop_apex5
-c 'PDB1' -- --x'drop user apex_050000 cascade'</code></pre><p>In this example, the PDB name is <code class="codeph">'PDB1'</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12557"></a><div class="props_rev_3"><a id="GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" name="GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5"></a><h3 id="UPGRD-GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" class="sect3">Post-Downgrade Tasks for Oracle Database Downgrades</h3>
               <div>
                  <p>Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322">Oracle XML DB Authentication Recommendations for an Oracle Database Downgrade</a><br>Upgrades from releases earlier than 12.1 result in digest authentication being disabled. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2">Reapply Release Update and Other Patches After Downgrade</a><br>After the downgrade is run, and <code class="codeph">catrelod.sql</code> completes successfully, if you installed new patches in your original Oracle home after the upgrade, but before the downgrade, then ensure that you apply any patches that you installed.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5">Re-enabling Oracle Database Vault after Downgrading Oracle Database</a><br>You must do this if you are instructed during the downgrade to disable Oracle Database Vault.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-67714F0E-0CE4-4527-86AF-8918914DACAF">Restoring the Configuration for Oracle Clusterware</a><br>To restore the configuration, you must restore the release from which you were upgrading.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a><br>The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0">Restoring Oracle Application Express to the Earlier Release</a><br>After a downgrade, if you upgraded Oracle Application Express at the same time as you upgraded Oracle Database, then you must complete steps to revert to the earlier Oracle Application Express release. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-6B972762-122D-4CFF-B910-6F93409DAC5F">Gathering Dictionary Statistics After Downgrading</a><br>To help to assure good performance after you downgrade, use this procedure to gather dictionary statistics.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506">Regathering Fixed Object Statistics After Downgrading</a><br>After the downgrade, run representative workloads on Oracle Database, and regather fixed object statistics.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-3B34038A-2C85-4B77-B91D-BB9665883B21">Regathering Stale CBO Statistics After Downgrade</a><br>Oracle recommends that you regather Oracle Cost-Based Optimizer (CBO) statistics after completing an Oracle Database downgrade.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               <a id="UPGRD52884"></a><div class="props_rev_3"><a id="GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322" name="GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322"></a><h4 id="UPGRD-GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322" class="sect4">Oracle XML DB Authentication Recommendations for an Oracle Database Downgrade</h4>
                  <div>
                     <p>Upgrades from releases earlier than 12.1 result in digest authentication being disabled. </p>
                     <p>If you downgrade to a release that is earlier than Oracle Database 12<span class="italic">c</span>, in which digest authentication is not supported, digest authentication is disabled and made unavailable as an authentication choice. This affects HTTP authentication for Oracle XML DB Repository. If you did not take advantage of digest authentication and instead used the default configuration, then no further actions are necessary.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322__GUID-9E98738F-8B58-4827-BB7C-722CA5BED224">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adxdb/administration-of-XML-DB.html#ADXDB6110" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about authentication with Oracle XML DB for database installation, upgrade, and downgrade
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2" name="GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2"></a><h4 id="UPGRD-GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2" class="sect4">Reapply Release Update and Other Patches After Downgrade</h4>
                  <div>
                     <p>After the downgrade is run, and <code class="codeph">catrelod.sql</code> completes successfully, if you installed new patches in your original Oracle home after the upgrade, but before the downgrade, then ensure that you apply any patches that you installed.
                     </p>
                     <p>If you installed new patches, then run the <code class="codeph">datapatch</code> tool to apply those patches to the downgraded database. If you did not change the binaries and files in your Oracle Home after the upgrade, then there is no need to run <code class="codeph">datapatch</code> after running <code class="codeph">catrelod.sql</code>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD12559"></a><div class="props_rev_3"><a id="GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5" name="GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5"></a><h4 id="UPGRD-GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5" class="sect4">Re-enabling Oracle Database Vault after Downgrading Oracle Database</h4>
                  <div>
                     <p>You must do this if you are instructed during the downgrade to disable Oracle Database Vault.</p>
                     <p>If you use Oracle Database Vault, then you may have been instructed to disable it before downgrading your database. To use Oracle Database Vault after downgrading, you must re-enable it.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5__GUID-93351A50-7410-4292-A0C0-237F8265FC6F">
                        <p class="notep1">See Also:</p>
                        <p><a href="../dvadm/getting-started-with-oracle-database-vault.html#DVADM30031" target="_blank"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for the procedure to re-enable Oracle Database Vault
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52664"></a><div class="props_rev_3"><a id="GUID-67714F0E-0CE4-4527-86AF-8918914DACAF" name="GUID-67714F0E-0CE4-4527-86AF-8918914DACAF"></a><h4 id="UPGRD-GUID-67714F0E-0CE4-4527-86AF-8918914DACAF" class="sect4">Restoring the Configuration for Oracle Clusterware</h4>
                  <div>
                     <p>To restore the configuration, you must restore the release from which you were upgrading.</p>
                     <p>You can restore the Oracle Clusterware configuration to the state it was in before the Oracle Clusterware 12<span class="italic">c</span> Release 2 (12.2) upgrade. Any configuration changes that you have performed during or after the Oracle Database 12<span class="italic">c</span> upgrade process are removed and cannot be recovered.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-67714F0E-0CE4-4527-86AF-8918914DACAF__GUID-22CCA6B5-57DE-4E14-930B-5E0DFE5405FF">
                        <p class="notep1">See Also:</p>
                        <p><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a> for your platform
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60106"></a><div class="props_rev_3"><a id="GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" name="GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD"></a><h4 id="UPGRD-GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" class="sect4">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</h4>
                  <div>
                     <p>The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.</p>
                     <p>To restore Oracle Enterprise Manager, you first run Oracle Enterprise Manager configuration assistant (EMCA), and then you run the <code class="codeph">emdwgrd</code> utility.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422">Requirements for Restoring Oracle Enterprise Manager After Downgrading</a><br>You must complete these requirements before you upgrade to be able to restore Oracle Enterprise Manager after a downgrade to a release earlier than 12.1 
                        </li>
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a><br>Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade. 
                        </li>
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-A97C04EC-BD77-4075-A354-03788DBCB74D">Running the emdwgrd utility to restore Enterprise Manager Database Control</a><br>You can restore the Oracle Enterprise Manager Database Control and data by using the <code>emdwgrd</code> utility after you run <kbd class="userinput">emca -restore</kbd>.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422" name="GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422"></a><h5 id="UPGRD-GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422" class="sect5">Requirements for Restoring Oracle Enterprise Manager After Downgrading</h5>
                     <div>
                        <p>You must complete these requirements before you upgrade to be able to restore Oracle Enterprise Manager after a downgrade to a release earlier than 12.1 </p>
                        <p>The following must be true to use <code class="codeph">emca -restore</code> to restore Oracle Enterprise Manager to its previous state:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Before the upgrade, you saved a backup of your Oracle Enterprise Manager configuration files and data</p>
                           </li>
                           <li>
                              <p>You run the <code class="codeph">emca</code> binary located in the Oracle Database 12<span class="italic">c</span> Oracle home for this procedure
                              </p>
                           </li>
                        </ul>
                        <p>On Oracle Clusterware systems, to restore Oracle Enterprise Manager on an Oracle RAC database, you must have the database registered using <code class="codeph">srvctl</code> before you run <code class="codeph">emca -restore</code>. You must run <code class="codeph">emca -restore</code> from the <code><span class="variable" translate="no">ORACLE_HOME</span>/bin</code> directory of the earlier Oracle Database release to which the database is being downgraded.
                        </p>
                        <p>Run the <code class="codeph">emca -restore</code> command with the appropriate options to restore Oracle Enterprise Manager Database Control or Grid Control to the old Oracle home. 
                        </p>
                        <p>Specify different <code>emca</code> options, depending on whether the database you want to downgrade is a single-instance database, an Oracle RAC database, or an Oracle ASM database.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../cwadd/server-control-command-reference.html#CWADD-GUID-803F603E-8638-4946-84D4-CB24D21C893C" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" title="The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" name="GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0"></a><h5 id="UPGRD-GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" class="sect5">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</h5>
                     <div>
                        <p>Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade. </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167">Running emca on a Single-Instance Oracle Database Without Oracle ASM</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B">Running EMCA on an Oracle RAC Database Without Oracle ASM</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database:
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A">Running EMCA on a Single-Instance Oracle ASM Instance</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02">Running emca on an Oracle ASM on Oracle RAC Instance</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601">Running emca on a Single-Instance Oracle Database With Oracle ASM</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E">Running emca on an Oracle RAC Database and Oracle ASM Instance</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" title="The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="UPGRD60107"></a><div class="props_rev_3"><a id="GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167" name="GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167"></a><h6 id="UPGRD-GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167" class="sect6">Running emca on a Single-Instance Oracle Database Without Oracle ASM</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="oac_no_warn" dir="ltr">ORACLE_HOME/bin/emca -restore db
</pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database SID</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60108"></a><div class="props_rev_3"><a id="GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B" name="GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B"></a><h6 id="UPGRD-GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B" class="sect6">Running EMCA on an Oracle RAC Database Without Oracle ASM</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database:
                           </p>
                           <p>Use this procedure to run Enterprise Manager Configuration Assistant:</p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore db -cluster
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database unique name</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60109"></a><div class="props_rev_3"><a id="GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A" name="GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A"></a><h6 id="UPGRD-GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A" class="sect6">Running EMCA on a Single-Instance Oracle ASM Instance</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore asm
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                              <li>
                                 <p>Oracle ASM SID</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60110"></a><div class="props_rev_3"><a id="GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02" name="GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02"></a><h6 id="UPGRD-GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02" class="sect6">Running emca on an Oracle ASM on Oracle RAC Instance</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore asm -cluster
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60111"></a><div class="props_rev_3"><a id="GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601" name="GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601"></a><h6 id="UPGRD-GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601" class="sect6">Running emca on a Single-Instance Oracle Database With Oracle ASM</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore db_asm
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the Oracle Database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database SID</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                              <li>
                                 <p>Oracle ASM home</p>
                              </li>
                              <li>
                                 <p>Oracle ASM SID [+ASM]</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60112"></a><div class="props_rev_3"><a id="GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E" name="GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E"></a><h6 id="UPGRD-GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E" class="sect6">Running emca on an Oracle RAC Database and Oracle ASM Instance</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant:</p><pre class="oac_no_warn" dir="ltr">ORACLE_HOME/bin/emca -restore db_asm -cluster
</pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database unique name</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                              <li>
                                 <p>Oracle ASM Oracle home</p>
                              </li>
                              <li>
                                 <p>Oracle ASM SID [+ASM]</p>
                              </li>
                           </ul>
                           <p>The output of <code>emca</code> varies according to the options that you specify and the values that you enter at the prompts. In Oracle RAC environments, you must repeat this step on all Oracle RAC cluster member nodes.
                           </p>
                           <p>You must now run the <code>emdwgrd</code> utility to restore Oracle Enterprise Manager Database Control and data.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="UPGRD60113"></a><div class="props_rev_3"><a id="GUID-A97C04EC-BD77-4075-A354-03788DBCB74D" name="GUID-A97C04EC-BD77-4075-A354-03788DBCB74D"></a><h5 id="UPGRD-GUID-A97C04EC-BD77-4075-A354-03788DBCB74D" class="sect5">Running the emdwgrd utility to restore Enterprise Manager Database Control</h5>
                     <div>
                        <p>You can restore the Oracle Enterprise Manager Database Control and data by using the <code>emdwgrd</code> utility after you run <kbd class="userinput">emca -restore</kbd>.
                        </p>
                        <p>To use <code>emdwgrd</code>, you must do the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set <span class="variable" translate="no">ORACLE_HOME</span> and other environment variables to point to the Oracle home from which the upgrade originally took place.
                              </p>
                           </li>
                           <li>
                              <p> Run the <code>emdwgrd</code> utility from the Oracle Database 12<span class="italic">c</span> home
                              </p>
                           </li>
                        </ul>
                        <p>The following procedure is for Linux and UNIX. To run it on Windows, substitute <code>emdwgrd.bat</code> for <code>emdwgrd</code>.
                        </p>
                        <ol>
                           <li>
                              <p>Set <span class="variable" translate="no">ORACLE_HOME</span> to the Oracle home from which the database upgrade originally took place.
                              </p>
                           </li>
                           <li>
                              <p>Set <span class="variable" translate="no">ORACLE_SID</span> to the SID of the database that was upgraded and then downgraded.
                              </p>
                           </li>
                           <li>
                              <p>Set <span class="variable" translate="no">PATH</span>, <span class="variable" translate="no">LD_LIBRARY_PATH</span> and <span class="variable" translate="no">SHLIB_PATH</span> to point to the Oracle home from which the database upgrade originally took place.
                              </p>
                           </li>
                           <li>
                              <p>Go to the Oracle Database 12<span class="italic">c</span> Oracle home:
                              </p><pre class="pre codeblock"><code>cd $ORACLE_HOME/bin
</code></pre><pre class="oac_no_warn" dir="ltr"></pre></li>
                           <li>
                              <p>Run <code>emdwgrd</code> using one of the following procedures:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>For a single-instance database, run the following command, where <code class="codeph"><span class="variable" translate="no">SID</span></code> is the SID of the database that was upgraded and then downgraded and <code class="codeph"><span class="variable" translate="no">save_directory</span></code> is the path to the storage location you chose when saving your database control files and data:
                                    </p><pre class="pre codeblock"><code>emdwgrd -restore -sid <span class="variable" translate="no">SID</span> -path <span class="variable" translate="no">save_directory</span> -tempTablespace TEMP
</code></pre><pre class="oac_no_warn" dir="ltr"></pre></li>
                                 <li>
                                    <p>For an Oracle RAC database, remote copy is required across the cluster nodes. Define an environment variable to indicate which remote copy is configured. For example:</p><pre class="pre codeblock"><code>setenv EM_REMCP /usr/bin/scp
</code></pre><p>Then, run <kbd class="userinput">emdwgrd restore</kbd> with the following options:
                                    </p><pre class="pre codeblock"><code>emdwgrd -restore -tempTablespace TEMP -cluster -sid <span class="variable" translate="no">SID_OldHome</span> -path <span class="variable" translate="no">save_directory</span>
</code></pre><p>If the Oracle home is on a shared device, then add <kbd class="userinput">-shared</kbd> to the <code>emdwgrd</code> command options.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Enter the SYS and SYSMAN passwords when prompted by <code>emdwgrd</code>.
                              </p>
                           </li>
                           <li>
                              <p>When <code>emdwgrd</code> completes, Oracle Enterprise Manager Database Control is downgraded to the old Oracle home.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" title="The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0" name="GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0"></a><h4 id="UPGRD-GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0" class="sect4">Restoring Oracle Application Express to the Earlier Release</h4>
                  <div>
                     <p>After a downgrade, if you upgraded Oracle Application Express at the same time as you upgraded Oracle Database, then you must complete steps to revert to the earlier Oracle Application Express release. </p>
                     <p>To complete the downgrade of Oracle Application Express after a database downgrade, complete all the steps listed in <cite>Oracle Application Express Installation Guide</cite> to revert your Oracle Application Express release to the earlier release. The steps to revert are different, depending on whether your architecture is a Non-CDB or a multitenant architecture (CDB) Oracle Database. 
                     </p>
                     <div class="infoboxnote" id="GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0__GUID-7CF0A9E9-5C05-4F0C-8E7B-4C64408AA2EB">
                        <p class="notep1">Note:</p>
                        <p>You only need to complete these steps if you upgraded Oracle Application Express at the same time that you upgraded the database.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=HTMIG266" target="_blank"><span><cite>Oracle Application Express Installation Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F" name="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F"></a><h4 id="UPGRD-GUID-6B972762-122D-4CFF-B910-6F93409DAC5F" class="sect4">Gathering Dictionary Statistics After Downgrading</h4>
                  <div>
                     <p>To help to assure good performance after you downgrade, use this procedure to gather dictionary statistics.</p>
                     <div class="section">
                        <p>Oracle recommends that you gather dictionary statistics after downgrading the database, so that the statistics are collected for the downgraded release Data Dictionary tables.</p>
                        <div class="infoboxnote" id="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F__GUID-1185D203-0BC8-4290-8C80-1DE6DB2F3FF1">
                           <p class="notep1">Note:</p>
                           <p>After a downgrade process, be aware that the the data dictionary can have changes that persist in the downgraded dictionary. These changes are insignificant. The downgraded data dictionary is functionally equivalent to an earlier release data dictionary. </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F__GUID-89186456-922B-4682-AB96-4154AF51FF98">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Non-CDB Oracle Database: Oracle recommends that you use the <code class="codeph">DBMS_STATS.GATHER_DICTIONARY_STATS</code> procedure to gather these statistics. For example, enter the following SQL statement:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC DBMS_STATS.GATHER_DICTIONARY_STATS;
</pre></li>
                           <li>
                              <p>CDB (multitenant architecture) Oracle Database: Oracle recommends that you use <code>catcon</code> to gather Data Dictionary statistics across the entire multitenant architecture. 
                              </p>
                              <p>To gather dictionary statistics for all PDBs in a container database, use the following syntax:</p>
                              <p><code class="codeph">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -b gatherstats -- --x"exec dbms_stats.gather_dictionary_stats"</code></p>
                              <p>To gather dictionary statistics on a particular PDB, use syntax similar to the following:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -c
'SALES1' -b gatherstats -- --x"exec dbms_stats.gather_dictionary_stats"</code></pre><p>In the preceding example the <code class="codeph">-c SALES1</code> option specifies a PDB inclusion list for the command that you run, specifying the database named <code class="codeph">SALES1</code>. The option <code class="codeph"> -b gatherstats</code>specifies the base name for the logs. The option <code class="codeph">--x</code> specifies the SQL command that you want to execute. The SQL command itself is inside the quotation marks.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-867989C7-ADFC-4464-8981-437CEA7F331E" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506" name="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506"></a><h4 id="UPGRD-GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506" class="sect4">Regathering Fixed Object Statistics After Downgrading</h4>
                  <div>
                     <p>After the downgrade, run representative workloads on Oracle Database, and regather fixed object statistics.</p>
                     <div class="section">
                        <p>Fixed objects are the X$ tables and their indexes. V$ performance views are defined through X$ tables. After you downgrade, regather fixed object statistics to ensure that the optimizer for the restored database can generate good execution plans. These execution plans can improve database performance. Failing to obtain representative statistics can lead to suboptimal execution plans, which can cause performance problems</p>
                        <p>Gather fixed objects statistics by using the <code class="codeph">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> PL/SQL procedure. <code class="codeph">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> also displays recommendations for removing all hidden or underscore parameters and events from <code class="codeph">init.ora</code> and <code class="codeph">SPFILE</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506__GUID-9570A561-DA47-4A64-AA78-DCB20ABDAFA8">
                        <p>To gather statistics for fixed objects, run the following PL/SQL procedure:</p><pre class="pre codeblock"><code>SQL&gt; execute dbms_stats.gather_fixed_objects_stats;</code></pre><div class="infoboxnotealso" id="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506__GUID-6952400C-259E-4561-A653-3EBAB6B3CF58">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-EAD4C693-4F03-45DE-9704-1466C8E35232" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about using the <code class="codeph">GATHER_FIXED_OBJECTS_STATS</code> procedure
                           </p>
                        </div><pre class="pre codeblock"><code></code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3B34038A-2C85-4B77-B91D-BB9665883B21" name="GUID-3B34038A-2C85-4B77-B91D-BB9665883B21"></a><h4 id="UPGRD-GUID-3B34038A-2C85-4B77-B91D-BB9665883B21" class="sect4">Regathering Stale CBO Statistics After Downgrade</h4>
                  <div>
                     <p>Oracle recommends that you regather Oracle Cost-Based Optimizer (CBO) statistics after completing an Oracle Database downgrade.</p>
                     <div class="section">
                        <p>When you upgrade Oracle Database and gather new CBO statistics, the upgraded database has new database statistics. The upgraded database also can include new histogram types. For this reason, when you downgrade the database, the statistics that you collected for the new release can be different from the previous release. This issue is applicable both to data dictionary tables, and to regular user tables.</p>
                        <p>Regather stale statistics either by using GATHER_DATABASE_STATS, or by using gather commands that you typically use to update stale statistics in the dictionary and application schemas.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3B34038A-2C85-4B77-B91D-BB9665883B21__DJWREGATHERSTALE2.4.2GATHERIN-36BE6E15">
                        <p>For example: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Non-CDB Oracle Database: To regather statistics, Oracle recommends that you use the <code class="codeph">GATHER_DATABASE_STATS</code> procedure, with the option <code class="codeph">'GATHER STALE'</code>. For example:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; execute dbms_stats.gather_database_stats(options=&gt;'GATHER STALE');</pre></li>
                           <li>
                              <p>CDB (multitenant architecture) Oracle Database: to regather Data Dictionary statistics across the entire multitenant architecture, Oracle recommends that you use <code>catcon</code>.
                              </p>
                              <p>To regather stale dictionary statistics for all PDBs in a container database, use the following syntax:</p>
                              <p><code class="codeph">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -b gatherstats -- --x"exec dbms_stats.gather_database_stats(options=&gt;'GATHER STALE')"</code></p>
                              <p>To gather dictionary statistics on a particular PDB, use syntax similar to the following:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -c
'SALES1' -b gatherstats -- --x"exec dbms_stats.gather_database_stats(options=&gt;'GATHER STALE')"</code></pre><p>In the preceding example, the <code class="codeph">-c SALES1</code> option specifies a PDB inclusion list for the command that you run, specifying the database named <code class="codeph">SALES1</code>. The option <code class="codeph"> -b gatherstats</code>specifies the base name for the logs. The option <code class="codeph">--x</code> specifies the SQL command that you want to execute. The SQL command itself is inside the quotation marks.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-867989C7-ADFC-4464-8981-437CEA7F331E" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52750"></a><div class="props_rev_3"><a id="GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" name="GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA"></a><h3 id="UPGRD-GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" class="sect3">Troubleshooting the Downgrade of Oracle Database</h3>
               <div>
                  <p>Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.</p>
                  <p> This section contains known errors that may occur during downgrades, and workarounds to address those errors. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1">Errors Downgrading Oracle Database Components with catdwgrd.sql Script</a><br>Use this section to troubleshoot errors when you run the <code class="codeph">catdwgrd.sql</code> script during a downgrade, such as <code class="codeph">ORA-20001</code>: Downgrade cannot proceed.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C">Oracle Multimedia Downgrade and imrelod.sql Script Error</a><br>Review if you encounter ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-DC657D49-A972-4F3F-9D39-D59860133BF8">Oracle Database Vault and dvrelod.sql Script Error</a><br>Review if you encounter ORA-31011: XML parsing failed.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91">Downgrading Oracle Grid Infrastructure (Oracle Restart) After Successful or Failed Upgrade</a><br>To downgrade Oracle Restart, you must deconfigure and then reinstall Oracle Grid Infrastructure. You can then add back the databases and services.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-865ED278-8D25-4D79-8C8F-70343C4535F1">Oracle ACFS and Oracle Grid Infrastructure Downgrades to 11g Release 2 (11.2)</a><br>You must run <code>acfsroot install</code> before you attempt to start the software stack. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA">Database Links Passwords After Downgrading Oracle Database 11g Release 1 (11.1)</a><br>Reset the passwords for any database links that were created in releases 11.2 or 12.1. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1" name="GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1"></a><h4 id="UPGRD-GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1" class="sect4">Errors Downgrading Oracle Database Components with catdwgrd.sql Script</h4>
                  <div>
                     <p>Use this section to troubleshoot errors when you run the <code class="codeph">catdwgrd.sql</code> script during a downgrade, such as <code class="codeph">ORA-20001</code>: Downgrade cannot proceed.
                     </p>
                     <p>The <code>catdwgrd.sql</code> script downgrades all Oracle Database components in the database to the major release from which you originally upgraded. This script must run before the Data Dictionary can be downgraded. If you encounter any problems when you run the script, then correct the causes of the problems, and rerun the script.
                     </p>
                     <p>Errors you can see include <code class="codeph">ORA-39709</code>: incomplete component downgrade; string downgrade aborted, and <code class="codeph">ORA-06512</code>. When these errors occur, downgrades cannot proceed.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cause</span>: One or more components that must be downgraded before proceeding with the Data Dictionary downgrade did not downgrade.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Action</span>: Review the log files to determine what errors occurred before the <code class="codeph">catdwgrd.sql</code> script halted, and the downgrade was stopped. 
                           </p>
                        </li>
                     </ul>
                     <p>Review these examples to understand how to correct this issue.</p>
                     <p>Errors typically describe what you must do to fix the issue that is preventing the downgrade to complete. Follow the instructions in the error message. After you have fixed the cause of the error, rerun the <code>catdwgrd.sql</code> script. 
                     </p>
                     <p>For example, If the CDB downgrade fails during the downgrade of CDB$ROOT due to a check, then follow the instructions in the error message to fix the condition error. After you fix the error, rerun <code>catdwgrd.sql</code> with <code class="codeph">catcon.pl</code>. Use the <code class="codeph">-c</code> option to run the command with the inclusion list <code class="codeph">'CDB$ROOT PDB1'</code>. Use the <code class="codeph">-r</code> option to run the command first on the PDB, and then on CDB$ROOT. For example:
                     </p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -d $ORACLE_HOME/rdbms/admin -e -b catdwgrd -l /scratch/rac/downgradeLogs -c 'CDB$ROOT, PDB1, PDB2' -r catdwgrd.sql
</code></pre><div class="example" id="GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1__GUID-4AE6D301-0665-463A-9C28-7079B1B1265B">
                        <p class="titleinexample">Example 7-1 ORA-20001 Error Due To ORA-06512</p>
                        <p>Your downgrade stops. When you review the log files, you find that <code>catdwgrd.sql</code> terminates on this error: 
                        </p><pre class="pre codeblock"><code>DECLARE * ERROR at line 1: ORA-20001: Downgrade cannot proceed - 
Unified Audit Trail data exists. Please clean up the data first 
using DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL. ORA-06512: at line 65 
ORA-06512: at line 42</code></pre><p>You must purge the unified audit trial on <code class="codeph"> CDB$ROOT</code> and on all PDBs.
                        </p>
                        <div class="p">For example: 
                           <ol>
                              <li>
                                 <p>Look for the presence of unified audit trails:</p><pre class="pre codeblock"><code>SQL&gt; SELECT COUNT(*) FROM UNIFIED_AUDIT_TRAIL;
COUNT(*)
----------
      4538</code></pre></li>
                              <li>
                                 <p>Purge the audit trail. on the CDB.</p>
                                 <p>For example, where the audit trail type is <code class="codeph">DBMS_AUDIT.MGMT.AUDIT</code>:
                                 </p><pre class="pre codeblock"><code>EXEC DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL DBMS_AUDIT_MGMT.AUDIT</code></pre></li>
                              <li>
                                 <p>Run <code class="codeph">catdwngrd.sql </code>on <code class="codeph">CDB$ROOT</code>. If PDBs still have unified audit data, then the script fails with ORA20001:
                                 </p><pre class="pre codeblock"><code> 62        execute immediate
 63        'select count(*) from audsys.'||'"'||tab_name||'"' into no_rows;
 64
 65        -- If audit trail has some data, raise the application error
 66        IF no_rows &gt; 0 THEN
 67          RAISE_APPLICATION_ERROR(-20001, ErrMsg);
 68        END IF;
 69      END IF;
 70    END IF;
 71  EXCEPTION
 72    WHEN NO_DATA_FOUND THEN
 73     NULL;
 74    WHEN OTHERS THEN
 75     RAISE;
 76  END;
 77  /
DECLARE
*
ERROR at line 1:
ORA-20001: Downgrade cannot proceed - Unified Audit Trail data exists.Please
clean up the data first using DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL.
ORA-06512: at line 75</code></pre></li>
                              <li>
                                 <p>Connect to individual PDBs, and find if they have unified audit trails. Clear the unified audit trail for all PDBs. For example, The PDB named PDB1 has unified audit trails:</p><pre class="pre codeblock"><code>ALTER SESSION SET container = PDB1;

SQL&gt; SELECT COUNT(*) FROM UNIFIED_AUDIT_TRAIL;
 COUNT(*)
----------
      1330</code></pre></li>
                              <li>
                                 <p>Identify the unified audit trails: </p><pre class="pre codeblock"><code>SQL&gt; CREATE TABLE UA_DATA AS (SELECT * FROM UNIFIED_AUDIT_TRAIL);</code></pre></li>
                              <li>
                                 <p>Purge the audit trails.</p>
                                 <p>In this example, the audit trail type is <code class="codeph">DBMS_AUDIT_MGMT.AAUDIT_TRAIL_UNIFIED</code>, the <code class="codeph">USE_LAST_ARCH_TIMESTAMP</code> value is set to <code class="codeph">FALSE</code>, so that all audit records are deleted, without considering last archive timestamp, and the <code class="codeph">CONTAINER</code> value is set to <code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_ALL</code>, so that audit records on all PDBs are purged. 
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL(
   AUDIT_TRAIL_TYPE           =&gt;  DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED,
   USE_LAST_ARCH_TIMESTAMP    =&gt;  FALSE,
   CONTAINER                  =&gt;  DBMS_AUDIT_MGMT.CONTAINER_ALL
END;
/</code></pre></li>
                              <li>
                                 <p>Rerun <code class="codeph">catdwngrd.sql</code> at the PDB and CDB level. For example:
                                 </p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -c 'CDB$ROOT,PDB1' -d $ORACLE_HOME/rdbms/admin -e -b catdwgrd -l /u01/oracle/product/19.0.0/downgrade_logs -r catdwgrd.sql</code></pre></li>
                              <li>
                                 <p>Repeat the process of finding and purging audit trails and run <code class="codeph">catdwgrd.sql</code> until the script completes successfully on the CDB and PDBs, and you no longer see <code class="codeph">ORA-20001</code> errors in logs 
                                 </p>
                              </li>
                           </ol> 
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/administering-the-audit-trail.html#DBSEG-GUID-7D2E55CE-2820-47E3-A989-5F7AAB19CD76" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="UPGRD60114"></a><div class="props_rev_3"><a id="GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C" name="GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C"></a><h4 id="UPGRD-GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C" class="sect4">Oracle Multimedia Downgrade and imrelod.sql Script Error</h4>
                  <div>
                     <p>Review if you encounter ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. </p>
                     <p>When downgrading Oracle Database from release 12.1 to release 11.2.0.2, an error may be raised from the <code class="codeph">imrelod.sql</code> script, which is included with release 11.2.0.2.
                     </p>
                     <p><code class="codeph">ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. Oracle ORDIM must be installed and valid prior to Oracle Multimedia upgrade, downgrade, or patch.</code></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cause </span>The <code class="codeph">imrelod.sql</code> script raises this error because it does not know the status of ORDIM.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Action</span> No action. You can ignore this error.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60115"></a><div class="props_rev_3"><a id="GUID-DC657D49-A972-4F3F-9D39-D59860133BF8" name="GUID-DC657D49-A972-4F3F-9D39-D59860133BF8"></a><h4 id="UPGRD-GUID-DC657D49-A972-4F3F-9D39-D59860133BF8" class="sect4">Oracle Database Vault and dvrelod.sql Script Error</h4>
                  <div>
                     <p>Review if you encounter ORA-31011: XML parsing failed.</p>
                     <p>When downgrading Oracle Database from release 12.1 to release 11.2.0.3, databases that use Oracle Database Vault may encounter the following error, which is a result of the <code class="codeph">dvrelod.sql</code> script that is included with release 11.2.0.3:
                     </p><pre class="pre codeblock"><code>ORA-31011: XML parsing failed; Oracle Database Vault downgrade to release 11.2.0.3</code></pre><ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cause </span>The <code class="codeph">dvrelod.sql</code> script does not know the status of XML parsing.
                           </p>
                           <p><span class="bold">Action</span> No action. You can ignore this message.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60143"></a><div class="props_rev_3"><a id="GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91" name="GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91"></a><h4 id="UPGRD-GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91" class="sect4">Downgrading Oracle Grid Infrastructure (Oracle Restart) After Successful or Failed Upgrade</h4>
                  <div>
                     <p>To downgrade Oracle Restart, you must deconfigure and then reinstall Oracle Grid Infrastructure. You can then add back the databases and services.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1364412.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1364412.1</a></li>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="UPGRD60116"></a><div class="props_rev_3"><a id="GUID-865ED278-8D25-4D79-8C8F-70343C4535F1" name="GUID-865ED278-8D25-4D79-8C8F-70343C4535F1"></a><h4 id="UPGRD-GUID-865ED278-8D25-4D79-8C8F-70343C4535F1" class="sect4">Oracle ACFS and Oracle Grid Infrastructure Downgrades to 11g Release 2 (11.2)</h4>
                  <div>
                     <p>You must run <code>acfsroot install</code> before you attempt to start the software stack. 
                     </p>
                     <p>If you use Oracle ASM Cluster File System (Oracle ACFS), and you upgrade to Oracle Grid Infrastructure 12c, either for a cluster or for an Oracle Restart standalone server, and you choose to downgrade to Oracle Grid Infrastructure 11g Release 2 (11.2), then before you attempt to start the release 11.2 software stack, you must run the command <code class="codeph">acfsroot install</code> from the release 11.2 Oracle Grid Infrastructure Oracle home (Grid home). 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60144"></a><div class="props_rev_3"><a id="GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" name="GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA"></a><h4 id="UPGRD-GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" class="sect4">Database Links Passwords After Downgrading Oracle Database 11<span class="italic">g</span> Release 1 (11.1)
                  </h4>
                  <div>
                     <p>Reset the passwords for any database links that were created in releases 11.2 or 12.1. </p>
                     <p>After downgrading to Oracle Database release 11.1, you are required to reset the passwords for any database links that were created in releases 11.2 or 12.1. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121">ORA-00600 Errors with Database Links Passwords After Downgrading to Oracle Database 11.1 Release 1</a><br>This error can occur if you do not reset the database link password.
                        </li>
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496">Using Oracle Data Pump Export to Create a Dump File Containing All Existing Database Links</a><br>Before performing the downgrade, use this Oracle Data Pump export procedure to create a dump file that contains all the existing database links. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121" name="GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121"></a><h5 id="UPGRD-GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121" class="sect5">ORA-00600 Errors with Database Links Passwords After Downgrading to Oracle Database 11.1 Release 1</h5>
                     <div>
                        <p>This error can occur if you do not reset the database link password.</p>
                        <div class="p"> If you do not reset the database link password, then an internal error is displayed when anyone attempts to make use of the database link. For reference, this is the internal error that is reported in the Oracle trace file when the Oracle server fails to retrieve the password of the database link: <pre class="pre codeblock"><code>ORA-00600: [kzdlk_zt2 err], [18446744073709551601]</code></pre></div>
                        <p>To reset the password for the database link after downgrading to release 11.1, use the <code>ALTER DATABASE LINK</code> command to change the password back to the original password by specifying the original password in the IDENTIFIED BY clause.
                        </p>
                        <p>To create new database links while running Oracle Database release 11.2 or 12.1 that do not have this password issue, contact Oracle support for information about how to use the IDENTIFIED BY VALUES clause of the <code>CREATE DATABASE LINK</code> command.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121__GUID-E8A3F122-7431-4AAC-B9E4-B28A8BC43490">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/ALTER-DATABASE-LINK.html#SQLRF30050" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                           <p> </p>
                           <p><a href="../admin/developing-applications-for-a-distributed-database-system.html#ADMIN12194" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about controlling connections established by database links
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" title="Reset the passwords for any database links that were created in releases 11.2 or 12.1.">Database Links Passwords After Downgrading Oracle Database 11g Release 1 (11.1)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="UPGRD60145"></a><div class="props_rev_3"><a id="GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496" name="GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496"></a><h5 id="UPGRD-GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496" class="sect5">Using Oracle Data Pump Export to Create a Dump File Containing All Existing Database Links</h5>
                     <div>
                        <p>Before performing the downgrade, use this Oracle Data Pump export procedure to create a dump file that contains all the existing database links. </p>
                        <p></p>
                        <p>The dump file you create includes any newly-created database links. The procedure uses the <span class="parmname" translate="no">FULL=Y</span> and <span class="parmname" translate="no">INCLUDE=DB_LINK</span> parameters with the <code>expdp</code> command.
                        </p>
                        <ol>
                           <li>
                              <p>Log in to SQL*Plus.</p>
                              <p>For example:</p><pre class="pre codeblock"><code>sqlplus system/manager
</code></pre></li>
                           <li>
                              <p>Drop the dump directory in case one exists.</p>
                              <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; DROP DIRECTORY dpump_dir;
SQL&gt; CREATE DIRECTORY dpump_dir AS '/location_to_write_datapump_dump_file';
</code></pre></li>
                           <li>
                              <p>Export the database links.</p>
                              <p>For example:</p><pre class="pre codeblock"><code>$ expdp system/manager FULL=Y directory=dpump_dir 
  dumpfile=saved_dblinks.dmp INCLUDE=DB_LINK;
</code></pre></li>
                           <li>
                              <p>After the downgrade, if any of the downgraded database links are not working properly, then drop these links, and import them from the dump file:</p><pre class="pre codeblock"><code>$ impdp system/manager directory=dpump_dir dumpfile=saved_dblinks.dmp;</code></pre><p> For example, if you find that links are showing the internal error ORA-00600, then dropping and importing the links from the dump file should cause those links to work as intended. </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" title="Reset the passwords for any database links that were created in releases 11.2 or 12.1.">Database Links Passwords After Downgrading Oracle Database 11g Release 1 (11.1)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00823.using-xquery-processor-for-Java.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="An explanation is given of how to use the Oracle XML Developer's Kit (XDK) XQuery processor for Java.">
      <meta name="description" content="An explanation is given of how to use the Oracle XML Developer's Kit (XDK) XQuery processor for Java.">
      <title>Using the XQuery Processor for Java</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="An explanation is given of how to use the Oracle XML Developer's Kit (XDK) XQuery processor for Java.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96292-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-XSLT-processor-for-Java.html" title="Previous" type="text/html">
      <link rel="next" href="using-xquery-API-for-Java-to-access-XML-DB.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide">
    <meta name="dcterms.isVersionOf" content="ADXDK">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-XSLT-processor-for-Java.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-xquery-API-for-Java-to-access-XML-DB.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-Java.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for Java</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using the XQuery Processor for Java</li>
            </ol>
            <a id="GUID-9E6570F0-37BB-4690-BFF6-A2052B5B57E8" name="GUID-9E6570F0-37BB-4690-BFF6-A2052B5B57E8"></a><a id="ADXDK991"></a><a id="ADXDK99930"></a>
            
            <h2 id="ADXDK-GUID-9E6570F0-37BB-4690-BFF6-A2052B5B57E8" class="sect2"><span class="enumeration_chapter">15 </span>Using the XQuery Processor for Java
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>An explanation is given of how to use the Oracle XML Developer's Kit (XDK) XQuery processor for Java.</p>
               <div class="section"> </div>
               <!-- class="section" -->
            </div><a id="ADXDK114"></a><a id="ADXDK99995"></a><div class="props_rev_3"><a id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA" name="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA"></a><h3 id="ADXDK-GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA" class="sect3">Introduction to the XQuery Processor for Java</h3>
               <div>
                  <p>XDK provides a standalone XQuery processor for use by Java applications. XQuery is the World Wide Web Consortium (W3C) standard query language for Extensible Markup Language (XML). Using XQuery to process XML within a Java application can improve developer productivity and application performance. </p>
                  <p>Applications written with XQuery often require less code, run faster, and use less memory than applications written fully in Java.</p>
                  <p>JSR 225: XQuery API for Java (XQJ) defines how queries can be executed from a Java application. To use XQJ, your application must run with Java version 1.6. In addition, these JAR files are required:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">jlib/oxquery.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">jlib/xqjapi.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">jlib/orai18n-mapping.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">lib/xmlparserv2.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">xdk/jlib/apache-xmlbeans.jar</code></p>
                     </li>
                  </ul>
                  <p>The directory paths for these Java Archive (JAR) files are relative to the <code class="codeph">ORACLE_HOME</code> directory of your Oracle Database installation. 
                  </p>
                  <p><a href="using-xquery-processor-for-Java.html#GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__BAJCCHIC">Example 15-1</a> shows how to execute a simple "Hello World" query using XQuery API for Java (XQJ). Because the XQuery processor runs directly in the Java Virtual Machine (JVM), you need no database or server to run this example. The example prints the output <code class="codeph">&lt;hello-world&gt;2&lt;/hello-world&gt;</code>.
                  </p>
                  <p>This chapter describes the features and extensions that are specific to the Oracle implementation of XQuery. General information about XQuery and XQJ is documented outside of this document.</p>
                  <div class="infoboxnotealso" id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__GUID-77A75716-1BC7-4010-9469-D56F11AA3588">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>, <code class="codeph">XQuery Packages</code>, for the related API documentation
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=jcp_org_jsr225" target="_blank"><span class="italic">JSR-000225 XQuery API for Java</span></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_30" target="_blank"><span class="italic">XQuery 3.0: An XML Query Language</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnote" id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__GUID-B3707335-F147-4DA1-9F43-DFB701A6152C">
                     <p class="notep1">Note:</p>
                     <p>Oracle also implements XQuery and XQJ as part of Oracle XML DB. See <a href="using-xquery-API-for-Java-to-access-XML-DB.html#GUID-DDFFD115-A115-4B6C-805C-350AF78281EB" title="An explanation is given of how to use the XQuery API for Java (XQJ) to access Oracle XML DB.">Using XQuery API for Java to Access Oracle XML DB</a> for details about Oracle XML DB.
                     </p>
                  </div>
                  <div class="example" id="GUID-42469EA3-F7DC-41AF-A58B-795ED2BDC7AA__BAJCCHIC">
                     <p class="titleinexample">Example 15-1 Simple Query Using XQJ</p><pre class="oac_no_warn" dir="ltr">import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
 
import oracle.xml.xquery.OXQDataSource;
 
public class HelloWorld {
    
    public static void main(String[] args) throws XQException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        String query = "&lt;hello-world&gt;{1 + 1}&lt;/hello-world&gt;";
        XQPreparedExpression expr = con.prepareExpression(query);
        XQSequence result = expr.executeQuery();

        // prints "<code class="codeph">&lt;hello-world&gt;2&lt;/hello-world&gt;</code>"
        System.out.println(result.getSequenceAsString(null));
        
        result.close();
        expr.close();
        con.close();
    }
    
}
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADXDK115"></a><div class="props_rev_3"><a id="GUID-5E83610F-647D-4AE5-801B-878244FB6949" name="GUID-5E83610F-647D-4AE5-801B-878244FB6949"></a><h3 id="ADXDK-GUID-5E83610F-647D-4AE5-801B-878244FB6949" class="sect3">XQJ Entity Resolution</h3>
               <div>
                  <p>XDK extends XQJ with an entity resolver framework for controlling how documents, schemas, modules, collations, and external functions are obtained during query processing. The examples in this section show how to use an entity resolver for several types of entities.</p>
                  <p>See the class <code class="codeph">oracle.xml.xquery.OXQEntity</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a> for a complete list of the types of entities that the query processor can request.
                  </p>
               </div><a id="ADXDK116"></a><a id="ADXDK117"></a><a id="ADXDK118"></a><a id="ADXDK112"></a><div class="props_rev_3"><a id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2" name="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2"></a><h4 id="ADXDK-GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2" class="sect4">Resolution of Documents for fn:doc</h4>
                  <div>
                     <p>The example in this section shows how you can use an entity resolver to determine which document is returned by XQuery function <code class="codeph">fn:doc</code>.
                     </p>
                     <div class="section">
                        <p><a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJEEDAJ">Example 15-2</a> displays the contents of <code class="codeph">books.xml</code>.
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">Example 15-3</a> displays the contents of <code class="codeph">books.xq</code>.
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFDEDF">Example 15-4</a> shows how to execute the query <code class="codeph">books.xq</code> with a custom entity resolver.
                        </p>
                        <p>The instance of <code class="codeph">MyEntityResolver</code> is passed to the XQuery processor by setting it on the connection. The XQuery processor invokes the entity resolver during query processing to get the document to be returned by the <code class="codeph">fn:doc</code> function.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJEEDAJ">
                        <p class="titleinexample">Example 15-2 books.xml</p><pre class="oac_no_warn" dir="ltr">&lt;books&gt;
  &lt;book&gt;
    &lt;title&gt;A Game of Thrones&lt;/title&gt;
    &lt;author&gt;&lt;first&gt;George&lt;/first&gt;&lt;last&gt;Martin&lt;/last&gt;&lt;/author&gt;
    &lt;price&gt;10.99&lt;/price&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;The Pillars of the Earth&lt;/title&gt;
    &lt;author&gt;&lt;first&gt;Ken&lt;/first&gt;&lt;last&gt;Follett&lt;/last&gt;&lt;/author&gt;
    &lt;price&gt;7.99&lt;/price&gt;
  &lt;/book&gt;
&lt;/books&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">
                        <p class="titleinexample">Example 15-3 books.xq</p><pre class="oac_no_warn" dir="ltr">for $book in fn:doc('books.xml')/books/book 
where xs:decimal($book/price) gt 10.00
return
  $book/title
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFDEDF">
                        <p class="titleinexample">Example 15-4 Executing a Query with a Custom Entity Resolver</p><pre class="oac_no_warn" dir="ltr">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URI;
 
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.xquery.OXQConnection;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQEntity;
import oracle.xml.xquery.OXQEntityKind;
import oracle.xml.xquery.OXQEntityLocator;
import oracle.xml.xquery.OXQEntityResolver;
import oracle.xml.xquery.OXQEntityResolverRequestOptions;
import oracle.xml.xquery.OXQView;

public class ResolveDocument {
 
    private static class MyEntityResolver extends OXQEntityResolver {
        @Override
        public OXQEntity resolveEntity(OXQEntityKind kind, OXQEntityLocator locator,
                OXQEntityResolverRequestOptions options) throws IOException {
            if (kind == OXQEntityKind.DOCUMENT) {
                URI systemId = locator.getSystemIdAsURI();
                if ("file".equals(systemId.getScheme())) {
                    File file = new File(systemId);
                    FileInputStream input = new FileInputStream(file);
                    OXQEntity result = new OXQEntity(input);
                    result.enlistCloseable(input);
                    return result;
                }
            }
            return null;
        }
    }
 
    public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
 
        // OXQView is used to access Oracle extensions on XQJ objects.
        OXQConnection ocon = OXQView.getConnection(con);
        ocon.setEntityResolver(new MyEntityResolver());
 
        File query = new File("books.xq");
        
        // Relative URIs are resolved against the base URI before invoking the entity resolver.
        // The relative URI 'books.xml' used in the query will be resolved against this URI.
        XQStaticContext ctx = con.getStaticContext();
        ctx.setBaseURI(query.toURI().toString());
 
        FileInputStream queryInput = new FileInputStream(query);
        XQPreparedExpression expr = con.prepareExpression(queryInput, ctx);
        queryInput.close();
        XQSequence result = expr.executeQuery();

        // Prints "<code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code>"
        System.out.println(result.getSequenceAsString(null));
        
        result.close();
        expr.close();
        con.close();
    }
}
</pre><p>The example generates this output:</p><pre class="oac_no_warn" dir="ltr">&lt;title&gt;A Game of Thrones&lt;/title&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK188"></a><a id="ADXDK189"></a><a id="ADXDK108"></a><a id="ADXDK187"></a><div class="props_rev_3"><a id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF" name="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF"></a><h4 id="ADXDK-GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF" class="sect4">Resolution of External XQuery Functions</h4>
                  <div>
                     <p>You can use an entity resolver to define the implementation of an XQuery external function.</p>
                     <div class="section">
                        <p>For each external XQuery function that is declared in a query, the entity resolver is called with the entity kind <code class="codeph">oracle.xml.xquery.OXQEntityKind.EXTERNAL_FUNCTION</code>. The <code class="codeph">oracle.xml.xquery.OXQEntityLocator</code> instance that is passed in the call to the entity resolver provides the name of the XQuery function and its argument types. The entity resolver can then return any class that extends <code class="codeph">oracle.xml.xquery.OXQFunctionEvaluator</code> and has a public constructor. The XQuery processor then instantiates the returned class. When the XQuery external function call is evaluated, method <code class="codeph">evaluate()</code> is invoked.
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJIFHBB">Example 15-5</a> displays an XQuery query that is the content of file <code class="codeph">trim.xq</code>.
                        </p>
                        <p>External XQuery function <code class="codeph">util:trim</code> removes white space from the beginning and end of a string value. This function is implemented in Java and called within the query.
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJFAIFJ">Example 15-6</a> uses <code class="codeph">trim.xq</code> and shows how to define the implementation of an external XQuery function. The entity resolver in this example returns a class that extends <code class="codeph">OXQFunctionEvaluator</code>. 
                        </p>
                        <p>In some cases it is more convenient to return a Java static method instead of a class. When a static method is returned, the query processor automatically maps the method arguments and the return value to the XQuery data model, as defined by the XQJ specification.</p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJEJAGB">Example 15-7</a> also runs <code class="codeph">trim.xq</code>, but in this case the external function is bound to a Java static method.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJIFHBB">
                        <p class="titleinexample">Example 15-5 trim.xq</p><pre class="oac_no_warn" dir="ltr">declare namespace util = "http://example.com/util";
 
declare function util:trim($arg as xs:string) as xs:string external;
 
(: a string with surrounding white space :)
declare variable $input := "   John Doe    ";
 
&lt;result&gt;{util:trim($input)}&lt;/result&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJFAIFJ">
                        <p class="titleinexample">Example 15-6 Defining the Implementation of an External XQuery Function</p><pre class="oac_no_warn" dir="ltr">import java.io.FileInputStream;
import java.io.IOException;
import java.util.Collections;
 
import javax.xml.namespace.QName;
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
 
import oracle.xml.xquery.OXQConnection;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQEntity;
import oracle.xml.xquery.OXQEntityKind;
import oracle.xml.xquery.OXQEntityLocator;
import oracle.xml.xquery.OXQEntityResolver;
import oracle.xml.xquery.OXQEntityResolverRequestOptions;
import oracle.xml.xquery.OXQFunctionContext;
import oracle.xml.xquery.OXQFunctionEvaluator;
import oracle.xml.xquery.OXQFunctionMetaData;
import oracle.xml.xquery.OXQView;

public class ResolveExternalFunction {
 
    public static class TrimFunction extends OXQFunctionEvaluator {
        @Override
        public XQSequence evaluate(OXQFunctionContext context, XQSequence[] params) throws XQException {
            XQConnection con = context.getConnection();
            XQSequence arg = params[0];
            String value = arg.getSequenceAsString(null);
            String trimmed = value.trim();
            return con.createSequence(Collections.singleton(trimmed).iterator());
        }
    }
    
    private static class MyEntityResolver extends OXQEntityResolver {
        @Override
        public OXQEntity resolveEntity(OXQEntityKind kind, OXQEntityLocator locator,
                OXQEntityResolverRequestOptions options) throws XQException, IOException {
            if (kind == OXQEntityKind.EXTERNAL_FUNCTION) {
                OXQFunctionMetaData metaData = (OXQFunctionMetaData)locator.getExtension();
                QName name = metaData.getName();
                int arity = metaData.getParameterTypes().length;
                if ("http://example.com/util".equals(name.getNamespaceURI()) &amp;&amp;
                    "trim".equals(name.getLocalPart()) &amp;&amp; arity == 1) {
                    return new OXQEntity(TrimFunction.class);
                }
            }
            return null;
        }
    }

    public static void main(String[] args) throws IOException, XQException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        OXQConnection ocon = OXQView.getConnection(con);
        ocon.setEntityResolver(new MyEntityResolver());
 
        FileInputStream query = new FileInputStream("trim.xq");
        XQPreparedExpression expr = con.prepareExpression(query);
        query.close();

        XQSequence result = expr.executeQuery();

        System.out.println(result.getSequenceAsString(null));
 
        result.close();
        expr.close();
        con.close();
    }
}
</pre><p>The example prints this output:<code class="codeph"> &lt;result&gt;John Doe&lt;/result&gt;</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJEJAGB">
                        <p class="titleinexample">Example 15-7 Binding an External Function to a Java Static Method</p><pre class="oac_no_warn" dir="ltr">import java.io.FileInputStream;
import java.io.IOException;
import java.lang.reflect.Method;
 
import javax.xml.namespace.QName;
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
 
import oracle.xml.xquery.OXQConnection;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQEntity;
import oracle.xml.xquery.OXQEntityKind;
import oracle.xml.xquery.OXQEntityLocator;
import oracle.xml.xquery.OXQEntityResolver;
import oracle.xml.xquery.OXQEntityResolverRequestOptions;
import oracle.xml.xquery.OXQFunctionMetaData;
import oracle.xml.xquery.OXQView;

public class ResolveExternalFunction2 {
 
    public static String trim(String value) {
        return value.trim();
    }
    
    private static class MyEntityResolver extends OXQEntityResolver {
        @Override
        public OXQEntity resolveEntity(OXQEntityKind kind, OXQEntityLocator locator,
                OXQEntityResolverRequestOptions options) throws XQException, IOException {
            if (kind == OXQEntityKind.EXTERNAL_FUNCTION) {
                OXQFunctionMetaData metaData = (OXQFunctionMetaData)locator.getExtension();
                QName name = metaData.getName();
                int arity = metaData.getParameterTypes().length;
                if ("http://example.com/util".equals(name.getNamespaceURI()) &amp;&amp;
                    "trim".equals(name.getLocalPart()) &amp;&amp; arity == 1) {
                    Method staticMethod = null;
                    try {
                        staticMethod = ResolveExternalFunction2.class.getMethod("trim", String.class); 
                    } catch (NoSuchMethodException e) {
                        throw new IllegalStateException(e);
                    }
                    return new OXQEntity(staticMethod);
                }
            }
            return null;
        }
    }

    public static void main(String[] args) throws IOException, XQException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        OXQConnection ocon = OXQView.getConnection(con);
        ocon.setEntityResolver(new MyEntityResolver());
 
        FileInputStream query = new FileInputStream("trim.xq");
        XQPreparedExpression expr = con.prepareExpression(query);
        query.close();
 
        XQSequence result = expr.executeQuery();

        // Prints "&lt;result&gt;John Doe&lt;/result&gt;"
        System.out.println(result.getSequenceAsString(null));
 
        result.close();
        expr.close();
        con.close();
    }
}
</pre><p>The example prints the same output as for <a href="using-xquery-processor-for-Java.html#GUID-4B1AD5F7-FAF2-44C3-B577-5A5CF44B5AFF__BAJFAIFJ">Example 15-6</a>:<code class="codeph"> &lt;result&gt;John Doe&lt;/result&gt;</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK110"></a><a id="ADXDK111"></a><a id="ADXDK113"></a><a id="ADXDK109"></a><div class="props_rev_3"><a id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0" name="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0"></a><h4 id="ADXDK-GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0" class="sect4">Resolution of Imported XQuery Modules</h4>
                  <div>
                     <p>The entity resolver can locate the XQuery modules imported by an XQuery library module.</p>
                     <p>An XQuery library module provides functions and variables that can be imported by other modules. For each imported module, the entity resolver is called with the entity kind <code class="codeph">oracle.xml.xquery.OXQEntityKind.MODULE</code>. Using the <code class="codeph">oracle.xml.xquery.OXQEntityLocator</code> instance, you can invoke the <code class="codeph">getSystemId()</code> method to get the location of the module being imported. If no location is provided in the module import, you can invoke the method <code class="codeph">getNamespace()</code> to get the target namespace of the module. The entity resolver can then return the corresponding library module.
                     </p>
                     <p>The example in this section shows how you can use an entity resolver to control the resolution of XQuery library modules.</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJHBFFI">Example 15-8</a> displays the contents of <code class="codeph">math.xq</code>.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDCFCE">Example 15-9</a> displays the contents of <code class="codeph">main.xq</code>.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDGAIF">Example 15-10</a> shows how to execute a query that imports a library module.
                     </p>
                     <p>The query <code class="codeph">main.xq</code> imports the library module <code class="codeph">math.xq</code>, and then invokes the function <code class="codeph">math:circumference</code> to compute the circumference of a circle.
                     </p>
                     <div class="example" id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJHBFFI">
                        <p class="titleinexample">Example 15-8 math.xq</p><pre class="oac_no_warn" dir="ltr">module namespace math = "http://example.com/math";
 
declare variable $math:pi as xs:decimal := 3.14159265;
 
declare function math:circumference($diameter as xs:decimal) {
   $math:pi * $diameter
};
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDCFCE">
                        <p class="titleinexample">Example 15-9 main.xq</p><pre class="oac_no_warn" dir="ltr">import module namespace math = "http://example.com/math" at "math.xq";
 
math:circumference(6.54)
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-ED851251-5829-4A8A-B4CD-3D9DF43232C0__BAJDGAIF">
                        <p class="titleinexample">Example 15-10 Executing a Query that Imports a Library Module</p><pre class="oac_no_warn" dir="ltr">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URI;
 
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.xquery.OXQConnection;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQEntity;
import oracle.xml.xquery.OXQEntityKind;
import oracle.xml.xquery.OXQEntityLocator;
import oracle.xml.xquery.OXQEntityResolver;
import oracle.xml.xquery.OXQEntityResolverRequestOptions;
import oracle.xml.xquery.OXQView;

public class ResolveLibraryModule {
 
    private static class MyEntityResolver extends OXQEntityResolver {
        @Override
        public OXQEntity resolveEntity(OXQEntityKind kind, OXQEntityLocator locator,
                OXQEntityResolverRequestOptions options) throws IOException {
            if (kind == OXQEntityKind.MODULE) {
                URI systemId = locator.getSystemIdAsURI();
                if (systemId != null &amp;&amp; "file".equals(systemId.getScheme())) {
                    File file = new File(systemId);
                    FileInputStream input = new FileInputStream(file);
                    OXQEntity result = new OXQEntity(input);
                    result.enlistCloseable(input);
                    return result;
                }
            }
            return null;
        }
    }

    public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
 
        // OXQView is used to access Oracle extensions on XQJ objects.
        OXQConnection ocon = OXQView.getConnection(con);
        ocon.setEntityResolver(new MyEntityResolver());
 
        File query = new File("main.xq");
        
        // Relative URIs are resolved against the base URI before invoking the entity resolver.
        // The relative URI 'math.xq' used in the query will be resolved against this URI.
        XQStaticContext ctx = con.getStaticContext();
        ctx.setBaseURI(query.toURI().toString());
        
        FileInputStream queryInput = new FileInputStream(query);
        XQPreparedExpression expr = con.prepareExpression(queryInput, ctx);
        queryInput.close();

        XQSequence result = expr.executeQuery();

        // Prints the result: "20.546015931"
        System.out.println(result.getSequenceAsString(null));
        
        result.close();
        expr.close();
        con.close();
    }
}
</pre><p>The example generates this output:</p><pre class="oac_no_warn" dir="ltr">20.546015931</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK102"></a><a id="ADXDK103"></a><a id="ADXDK104"></a><a id="ADXDK101"></a><div class="props_rev_3"><a id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935" name="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935"></a><h4 id="ADXDK-GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935" class="sect4">Resolution of XML Schemas Imported by an XQuery Query</h4>
                  <div>
                     <p>You can use an entity resolver to control which XML schema is imported by an XQuery query.</p>
                     <p>An XQuery schema import imports type definitions and declarations of elements and attributes from an XML schema. You can use imported declarations and definitions in a query to validate and test data instances.</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBFCBH">Example 15-11</a> displays the contents of XML schema file <code class="codeph">size.xsd</code>.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJIDADH">Example 15-12</a> displays the contents of XQuery file <code class="codeph">size.xq</code>.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBEEGC">Example 15-13</a> shows how to execute a query that imports a schema. 
                     </p>
                     <p><code class="codeph">size.xq</code> uses the type <code class="codeph">shirt-size</code> defined in <code class="codeph">size.xsd</code> to test a list of values.
                     </p>
                     <div class="example" id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBFCBH">
                        <p class="titleinexample">Example 15-11 size.xsd</p><pre class="oac_no_warn" dir="ltr">&lt;xs:schema 
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  targetNamespace="http://example.com/size"&gt;
 
  &lt;xs:simpleType name="shirt-size"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="XS"/&gt;
      &lt;xs:enumeration value="S"/&gt;
      &lt;xs:enumeration value="M"/&gt;
      &lt;xs:enumeration value="L"/&gt;
      &lt;xs:enumeration value="XL"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
 
&lt;/xs:schema&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJIDADH">
                        <p class="titleinexample">Example 15-12 size.xq</p><pre class="oac_no_warn" dir="ltr">import schema namespace ns = "http://example.com/size" at "size.xsd";
 
for $size in ("S", "big", "XL", 42)
return
  if ($size castable as ns:shirt-size) then
    ns:shirt-size($size)
  else
    concat("INVALID:", $size)
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E03FFCF3-0A2E-4764-A2CF-429D0A828935__BAJBEEGC">
                        <p class="titleinexample">Example 15-13 Executing an XQuery Query that Imports an XML Schema</p><pre class="oac_no_warn" dir="ltr">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URI;
 
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.xquery.OXQConnection;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQEntity;
import oracle.xml.xquery.OXQEntityKind;
import oracle.xml.xquery.OXQEntityLocator;
import oracle.xml.xquery.OXQEntityResolver;
import oracle.xml.xquery.OXQEntityResolverRequestOptions;
import oracle.xml.xquery.OXQView;

public class ResolveSchema {
 
    private static class MyEntityResolver extends OXQEntityResolver {
        @Override
        public OXQEntity resolveEntity(OXQEntityKind kind, OXQEntityLocator locator,
                OXQEntityResolverRequestOptions options) throws IOException {
            if (kind == OXQEntityKind.SCHEMA) {
                URI systemId = locator.getSystemIdAsURI();
                if (systemId != null &amp;&amp; "file".equals(systemId.getScheme())) {
                    File file = new File(systemId);
                    FileInputStream input = new FileInputStream(file);
                    OXQEntity result = new OXQEntity(input);
                    result.enlistCloseable(input);
                    return result;
                }
            }
            return null;
        }
    }
  
   public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
 
        // OXQView is used to access Oracle extensions on XQJ objects.
        OXQConnection ocon = OXQView.getConnection(con);
        ocon.setEntityResolver(new MyEntityResolver());
 
        File query = new File("size.xq");
        
        // Relative URIs are resolved against the base URI before invoking the entity resolver.
        // The relative URI 'math.xq' used in the query will be resolved against this URI.
        XQStaticContext ctx = con.getStaticContext();
        ctx.setBaseURI(query.toURI().toString());
        
        FileInputStream queryInput = new FileInputStream(query);
        XQPreparedExpression expr = con.prepareExpression(queryInput, ctx);
        queryInput.close();
        
        XQSequence result = expr.executeQuery();

        // Prints "S INVALID:big XL INVALID:42"
        System.out.println(result.getSequenceAsString(null));
        
        result.close();
        expr.close();
        con.close();
    }
}
</pre><p>The example prints this output: <code class="codeph">S INVALID:big XL INVALID:42</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK107"></a><a id="ADXDK106"></a><div class="props_rev_3"><a id="GUID-93E92988-81E7-4591-9F18-631525C86F1B" name="GUID-93E92988-81E7-4591-9F18-631525C86F1B"></a><h4 id="ADXDK-GUID-93E92988-81E7-4591-9F18-631525C86F1B" class="sect4">Prefabricated Entity Resolvers for XQuery</h4>
                  <div>
                     <p>XDK includes several implementations of <code class="codeph">OXQEntityResolver</code> that you can use for common tasks such as file system and HTTP resolution. This can sometimes save you needing to implement your own entity resolver.
                     </p>
                     <div class="section">
                        <p><a href="using-xquery-processor-for-Java.html#GUID-93E92988-81E7-4591-9F18-631525C86F1B__BAJBBBBH">Example 15-14</a> shows how you can run the query in <a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">Example 15-3</a> using a prefabricated file resolver.
                        </p>
                        <p>An instance of the factory <code class="codeph">oracle.xml.xquery.OXQFileResolverFactory</code> is created from the connection. Then, this factory is used to create an entity resolver that resolves schemas, modules, and documents against the file system. By contrast with this example, <a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFDEDF">Example 15-4</a> uses the custom entity resolver <code class="codeph">MyEntityResolver</code> to resolve only documents against the file system.
                        </p>
                        <p>XDK provides these entity resolver factories:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oracle.xml.xquery.OXQFileResolverFactory</code>: Creates an entity resolver that resolves 'file:' URIs for schema, module, and document locations.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.xquery.OXQHttpResolverFactory</code>: Creates an entity resolver that resolves 'http:' URIs for schema, module, and document locations.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.xquery.OXQCompositeResolverFactory</code>: Creates an entity resolver that delegates requests to other entity resolvers. For any kind of request, the resolver returns the first nonnull result it receives from one of the delegate resolvers.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.xml.xquery.OXQJavaResolverFactory</code>: Creates an entity resolver that resolves external functions and modules to Java static methods or classes.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-93E92988-81E7-4591-9F18-631525C86F1B__GUID-37F46B28-93FE-4626-9687-3CE8D39A4AD7">
                           <p class="notep1">See Also:</p>
                           <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>, package <code class="codeph">oracle.xml.xquery</code>, for API information about these factory interfaces
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-93E92988-81E7-4591-9F18-631525C86F1B__BAJBBBBH">
                        <p class="titleinexample">Example 15-14 Executing a Query with a Prefabricated File Resolver</p><pre class="oac_no_warn" dir="ltr">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
 
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.xquery.OXQConnection;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQFileResolverFactory;
import oracle.xml.xquery.OXQView;

public class ResolverFactory {
    public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
 
        // OXQView is used to access Oracle extensions on XQJ objects.
        OXQConnection ocon = OXQView.getConnection(con);
        OXQFileResolverFactory factory = ocon.createEntityResolverFactory(OXQFileResolverFactory.class);
        ocon.setEntityResolver(factory.createResolver());
 
        File query = new File("books.xq");
        
        // Relative URIs are resolved against the base URI before invoking the entity resolver.
        // The relative URI 'books.xml' used in the query will be resolved against this URI.
        XQStaticContext ctx = con.getStaticContext();
        ctx.setBaseURI(query.toURI().toString());
 
        FileInputStream queryInput = new FileInputStream(query);
        XQPreparedExpression expr = con.prepareExpression(queryInput, ctx);
        queryInput.close();
        
        XQSequence result = expr.executeQuery();

        // Prints "&lt;title&gt;A Game of Thrones&lt;/title&gt;"
        System.out.println(result.getSequenceAsString(null));
        
        result.close();
        expr.close();
        con.close();
    }
}
</pre><p>The example prints this output: <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" name="GUID-05361BD0-575E-4021-A099-86AB7DF83A2B"></a><h4 id="ADXDK-GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" class="sect4">Resolution of Other Types of Entity</h4>
                  <div>
                     <p>You can use the XQJ entity resolver to obtain other entities, besides documents, schemas, modules, and external functions.</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-05361BD0-575E-4021-A099-86AB7DF83A2B__GUID-08201187-0EB8-4C60-9998-4DDCBB022AA6" title="Describes various types of entity.">Table 15-1</a> describes these other entities.
                     </p>
                     <div class="tblformal" id="GUID-05361BD0-575E-4021-A099-86AB7DF83A2B__GUID-08201187-0EB8-4C60-9998-4DDCBB022AA6">
                        <p class="titleintable">Table 15-1 Descriptions of Various Types of Entity</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Descriptions of Various Types of Entity" summary="Describes various types of entity." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d53703e1158">OXQEntityKind</th>
                                 <th align="left" valign="bottom" width="20%" id="d53703e1160">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1164" headers="d53703e1158 "><code class="codeph">TEXT</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1164 d53703e1160 ">Result of <code class="codeph">fn:unparsed-text</code> and <code class="codeph">fn:unparsed-text-lines</code>.
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1176" headers="d53703e1158 "><code class="codeph">ENVIRONMENT_VARIABLE</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1176 d53703e1160 ">Result of <code class="codeph">fn:available-environment-variables</code> and <code class="codeph">fn:environment-variable</code>.
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1188" headers="d53703e1158 "><code class="codeph">DOCUMENT_TYPE</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1188 d53703e1160 ">Static type for function <code class="codeph">fn:doc</code>.
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1197" headers="d53703e1158 "><code class="codeph">COLLECTION</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1197 d53703e1160 ">Documents returned by <code class="codeph">fn:collection</code>.
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1206" headers="d53703e1158 "><code class="codeph">URI_COLLECTION</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1206 d53703e1160 ">URIs returned by <code class="codeph">fn:uri-collection</code>.
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1215" headers="d53703e1158 "><code class="codeph">XML_PARSER_FACTORY</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1215 d53703e1160 ">StAX implementation used for parsing XML data.</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1221" headers="d53703e1158 "><code class="codeph">XML_ENTITY</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1221 d53703e1160 ">Used when a StAX parser needs to resolve an external XML resource.</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1227" headers="d53703e1158 "><code class="codeph">UPD_PUT</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1227 d53703e1160 ">Controls the behavior of <code class="codeph">fn:put</code>.
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d53703e1236" headers="d53703e1158 "><code class="codeph">COLLATION</code></td>
                                 <td align="left" valign="top" width="20%" headers="d53703e1236 d53703e1160 ">Controls the behavior of collation URIs.</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>For details on how these entity types are used, see class <code class="codeph">oracle.xml.xquery.OXQEntity</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>.
                     </p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535" name="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535"></a><h3 id="ADXDK-GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535" class="sect3">XQuery Output Declarations</h3>
               <div>
                  <p>XQuery 3.0 defines output declarations, which you can use to set the values of serialization parameters from within a query.</p>
                  <p>An output declaration is an option declaration in namespace <code class="codeph">http://www.w3.org/2010/xslt-xquery-serialization</code>. You use it in a query to declare and set serialization parameters on the static context. 
                  </p>
                  <p>By default, these static context serialization parameters are ignored, but they can be accessed using XQJ methods <code class="codeph">OXQPreparedExpression#getExpressionStaticContext()</code> and <code class="codeph">OXQStaticContext#getSerializationParameters()</code>. 
                  </p>
                  <p><a href="using-xquery-processor-for-Java.html#GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__ACCESSINGTHEVALUESOFOPTIONDECLARATI-AB3FDA80">Example 15-15</a> shows how to access the values of option declarations.
                  </p>
                  <p>You can also use an option declaration when serializing the result of a query. <a href="using-xquery-processor-for-Java.html#GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__USINGOPTIONDECLARATIONSWHENSERIALIZ-AB3FD4F9">Example 15-16</a> is similar to <a href="using-xquery-processor-for-Java.html#GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__ACCESSINGTHEVALUESOFOPTIONDECLARATI-AB3FDA80">Example 15-15</a>, but it uses the static context serialization parameters when serializing the result of the query.
                  </p>
                  <div class="infoboxnote" id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__GUID-451D1906-2A81-45B0-9E55-4C838105C0C1">
                     <p class="notep1">Note:</p>The URI value of option <code class="codeph">output:parameter-document</code> is resolved to a document using entity resolver <code class="codeph">OXQEntityResolver</code> and entity kind <code class="codeph">OXQEntityKind#DOCUMENT</code>  see <a href="using-xquery-processor-for-Java.html#GUID-05361BD0-575E-4021-A099-86AB7DF83A2B" title="You can use the XQJ entity resolver to obtain other entities, besides documents, schemas, modules, and external functions.">Resolution of Other Types of Entity</a>.
                  </div>
                  <div class="example" id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__ACCESSINGTHEVALUESOFOPTIONDECLARATI-AB3FDA80">
                     <p class="titleinexample">Example 15-15 Accessing the Values of Option Declarations</p><pre class="pre codeblock"><code>import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQStaticContext;

import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQPreparedExpression;
import oracle.xml.xquery.OXQSerializationParameters;
import oracle.xml.xquery.OXQStaticContext;
import oracle.xml.xquery.OXQView;

public class OptionDeclarations1 {
    
    public static void main(String[] args) throws XQException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        String query = 
            "declare option output:indent 'yes'; \n" +
            "declare option output:encoding 'UTF-16'; \n" + 
            "&lt;person&gt;&lt;first&gt;John&lt;/first&gt;&lt;last&gt;Doe&lt;/last&gt;&lt;/person&gt;";
        
        XQPreparedExpression expr = con.prepareExpression(query); 

        OXQPreparedExpression oexpr = OXQView.getPreparedExpression(expr);
        XQStaticContext ctx = oexpr.getExpressionStaticContext();
        OXQStaticContext octx = OXQView.getStaticContext(ctx);
        OXQSerializationParameters params = octx.getSerializationParameters();
        
        System.out.println("indent=" + params.isIndent());
        System.out.println("encoding=" + params.getEncoding());
        
        expr.close();
        con.close();
    }
}</code></pre><p>This produces the following output: </p><pre class="pre codeblock"><code>  indent=true
  encoding=UTF-16</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1BFF8A32-CC6F-403C-8C36-16D4FFF41535__USINGOPTIONDECLARATIONSWHENSERIALIZ-AB3FD4F9">
                     <p class="titleinexample">Example 15-16 Using Option Declarations When Serializing a Query Result</p><pre class="pre codeblock"><code>package oracle.xml.xquery.examples.published;

import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQResultSequence;
import javax.xml.xquery.XQStaticContext;

import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQPreparedExpression;
import oracle.xml.xquery.OXQSerializationParameters;
import oracle.xml.xquery.OXQStaticContext;
import oracle.xml.xquery.OXQView;

public class OptionDeclarations2 {

    public static void main(String[] args) throws XQException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        String query = 
            "declare option output:indent 'yes'; \n" +
            "declare option output:omit-xml-declaration 'no'; \n" + 
            "&lt;person&gt;&lt;first&gt;John&lt;/first&gt;&lt;last&gt;Doe&lt;/last&gt;&lt;/person&gt;";
        
        XQPreparedExpression expr = con.prepareExpression(query); 

        OXQPreparedExpression oexpr = OXQView.getPreparedExpression(expr);
        XQStaticContext ctx = oexpr.getExpressionStaticContext();
        OXQStaticContext octx = OXQView.getStaticContext(ctx);
        OXQSerializationParameters params = octx.getSerializationParameters();
        
        XQResultSequence result = expr.executeQuery();
        result.writeSequence(System.out, params.createProperties());
        result.close();
        
        expr.close();
        con.close();
    }
}
</code></pre><p>This produces the following output:</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;person&gt;
    &lt;first&gt;John&lt;/first&gt;
    &lt;last&gt;Doe&lt;/last&gt;
&lt;/person&gt;</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADXDK119"></a><div class="props_rev_3"><a id="GUID-2F04CC88-EDFF-4449-9F3B-E797285A5879" name="GUID-2F04CC88-EDFF-4449-9F3B-E797285A5879"></a><h3 id="ADXDK-GUID-2F04CC88-EDFF-4449-9F3B-E797285A5879" class="sect3">Improving Application Performance and Scalability with XQuery</h3>
               <div>
                  <p>The XDK XQuery processor provides several features for improving the performance and scalability of your application.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK120"></a><a id="ADXDK121"></a><a id="ADXDK190"></a><div class="props_rev_3"><a id="GUID-80E29834-C423-41F9-BE6D-D34388E15A98" name="GUID-80E29834-C423-41F9-BE6D-D34388E15A98"></a><h4 id="ADXDK-GUID-80E29834-C423-41F9-BE6D-D34388E15A98" class="sect4">Streaming Query Evaluation</h4>
                  <div>
                     <p>The XDK XQuery processor for Java supports streaming evaluation for many types of queries. Streaming evaluation requires a small amount of main memory, even when the input XML is very large.</p>
                     <div class="section">
                        <p>To facilitate streaming evaluation, the following actions are recommended:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the binding mode on the static context to deferred mode (see the method <code class="codeph">javax.xml.xquery.XQStaticContext.setBindingMode(int)</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>). If the binding mode is not deferred, the input XML is fully materialized when it is bound.
                              </p>
                           </li>
                           <li>
                              <p>Provide the input XML as an instance of <code class="codeph">java.io.InputStream</code>, <code class="codeph">java.io.Reader</code>, or <code class="codeph">javax.xml.stream.XMLStreamReader</code>. Input XML is provided to the query processor by binding it to the expression, or by returning it from an entity resolver.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the <code class="codeph">javax.xml.xquery.XQSequence</code> instance is consumed in a way that does not require materialization:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The string serialization methods <code class="codeph">getSequenceAsString(...)</code> and <code class="codeph">getItemAsString(...)</code> produce data as a string that is held in memory. Instead, use the <code class="codeph">writeSequence(...)</code> or the <code class="codeph">writeItem(...)</code> method to serialize the sequence.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">getNode()</code> method builds a Document Object Model (DOM) node that is held in memory. Instead, consider using the <code class="codeph">getSequenceAsStream()</code> or the <code class="codeph">getItemAsStream()</code> method to get a Streaming API for XML (StAX) stream.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">getItem()</code> method copies and materializes the current item in memory. Instead, use methods directly on the <code class="codeph">java.xml.xquery.XQSequence</code> instance to access the current item (see the interface <code class="codeph">javax.xml.xquery.XQItemAccessor</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>).
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>The code shown in this section invokes a query using XQJ in a way that does not prevent streaming evaluation.</p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJCBHAA">Example 15-17</a> displays the contents of <code class="codeph">books2.xq</code>.
                        </p>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJFEHHJ">Example 15-18</a> sets up the query to enable streaming evaluation. The example writes this output to file <code class="codeph">results.xml</code>: <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code>.
                        </p>
                        <p>The binding mode is set to the value <code class="codeph">BINDING_MODE_DEFERRED</code> to avoid materializing <code class="codeph">books.xml</code> when it is bound to the prepared expression. Likewise, the result is written to an output stream, and it is not materialized.
                        </p>
                        <p>To simplify the example, the input file <code class="codeph">books.xml</code> is small. Even if this file contained millions of books, evaluating the query would require only a small maximum heap size because only one book element is held in memory at one time. In contrast with the query <code class="codeph">books.xq</code>, shown in <a href="using-xquery-processor-for-Java.html#GUID-74123D7F-5491-4F5D-BDA5-B2CC2F3B33C2__BAJFFCBB">Example 15-3</a>, the query <code class="codeph">books2.xq</code> does not require you to define an entity resolver. Both examples (<code class="codeph">books.xq</code> and <code class="codeph">books2.xq</code>) are streamable.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJCBHAA">
                        <p class="titleinexample">Example 15-17 books2.xq</p><pre class="oac_no_warn" dir="ltr">declare variable $doc external;
 
for $book in $doc/books/book
where xs:decimal($book/price) gt 10.00
return
  $book/title
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-80E29834-C423-41F9-BE6D-D34388E15A98__BAJFEHHJ">
                        <p class="titleinexample">Example 15-18 Facilitating Streaming Evaluation</p><pre class="oac_no_warn" dir="ltr">import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
 
import javax.xml.namespace.QName;
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQConstants;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.xquery.OXQDataSource;
 
public class Streaming {
 
    public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        
        XQStaticContext ctx = con.getStaticContext();
        ctx.setBindingMode(XQConstants.BINDING_MODE_DEFERRED);
        con.setStaticContext(ctx);
        
        FileInputStream input = new FileInputStream("books.xml");
        FileInputStream query = new FileInputStream("books2.xq");
        FileOutputStream output = new FileOutputStream("result.xml");
        
        XQPreparedExpression expr = con.prepareExpression(query);
        query.close();
        expr.bindDocument(new QName("doc"), input, null, null);
        
        XQSequence result = expr.executeQuery();

        // Writes "&lt;title&gt;A Game of Thrones&lt;/title&gt;" to file results.xml
        result.writeSequence(output, null);
        
        result.close();
        input.close();
        output.close();
        expr.close();
        con.close();
    }
}
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK122"></a><a id="ADXDK191"></a><div class="props_rev_3"><a id="GUID-C36470F9-CC26-4169-8C50-78852EC74583" name="GUID-C36470F9-CC26-4169-8C50-78852EC74583"></a><h4 id="ADXDK-GUID-C36470F9-CC26-4169-8C50-78852EC74583" class="sect4">External Storage</h4>
                  <div>
                     <p>Depending on the query, the processor might have to store part of the input XML in main memory during query evaluation. </p>
                     <div class="section">
                        <p>For example, this scenario can occur in cases such as these:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A sequence is sorted.</p>
                           </li>
                           <li>
                              <p>The value bound to a variable is used multiple times.</p>
                           </li>
                           <li>
                              <p>A path expression uses a reverse-axis step.</p>
                           </li>
                        </ul>
                        <p>To reduce memory usage in such cases, you can configure the XQuery processor to use external storage for materializing XML, rather than main memory. To enable the use of external storage, set the data source property <code class="codeph">OXQConstants.USE_EXTERNAL_STORAGE</code> to <code class="codeph">true</code>, and set an <code class="codeph">oracle.xml.scalable.PageManager</code> instance on the dynamic context.
                        </p>
                        <div class="infoboxnote" id="GUID-C36470F9-CC26-4169-8C50-78852EC74583__GUID-72A836B5-2C2C-491E-92C3-BEDE32CDD73A">
                           <p class="notep1">Note:</p>
                           <p>Using external storage can significantly reduce the amount of main memory that is consumed during query processing. However, it can also reduce performance.</p>
                        </div>
                        <p><a href="using-xquery-processor-for-Java.html#GUID-C36470F9-CC26-4169-8C50-78852EC74583__BAJHJDID">Example 15-19</a> shows how to enable the XQuery processor to use disk-based storage rather than main memory when XML is materialized. The example writes this output to file <code class="codeph">results.xml</code>: <code class="codeph">&lt;title&gt;A Game of Thrones&lt;/title&gt;</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C36470F9-CC26-4169-8C50-78852EC74583__BAJHJDID">
                        <p class="titleinexample">Example 15-19 Configuring the XQuery Processor to Use External Storage</p><pre class="oac_no_warn" dir="ltr">import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
 
import javax.xml.namespace.QName;
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQConstants;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQSequence;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.scalable.FilePageManager;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQPreparedExpression;
import oracle.xml.xquery.OXQView;

public class ExternalStorage {
 
    public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        ds.setProperty(OXQDataSource.USE_EXTERNAL_STORAGE, "true");
        
        XQConnection con = ds.getConnection();
        XQStaticContext ctx = con.getStaticContext();
        ctx.setBindingMode(XQConstants.BINDING_MODE_DEFERRED);
        con.setStaticContext(ctx);
        
        FileInputStream input = new FileInputStream("books.xml");
        FileInputStream query = new FileInputStream("books2.xq");
        FileOutputStream output = new FileOutputStream("results.xml");
        
        XQPreparedExpression expr = con.prepareExpression(query);
        query.close();
        expr.bindDocument(new QName("doc"), input, null, null);
        
        // Set a page manager that will be used by the XQuery processor if XML needs to be materialized
        OXQPreparedExpression oexpr = OXQView.getPreparedExpression(expr);
        File temporaryFile = File.createTempFile("books", ".pagefile");
        temporaryFile.deleteOnExit();
        oexpr.setPageManager(new FilePageManager(temporaryFile.getAbsolutePath()));
        
        XQSequence result = expr.executeQuery();

        // Writes to file results.xml: "&lt;title&gt;A Game of Thrones&lt;/title&gt;"
        result.writeSequence(output, null);
        
        result.close();
        input.close();
        output.close();
        expr.close();
        con.close();
    }
}
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK192"></a><div class="props_rev_3"><a id="GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D" name="GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D"></a><h4 id="ADXDK-GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D" class="sect4">Thread Safety for XQJ</h4>
                  <div>
                     <p>The Oracle implementation of XQJ is not thread-safe. For example, an instance of <code class="codeph">javax.xml.xquery.XQSequence</code> must be accessed by only one thread. However, a restricted form of thread safety is supported for managing instances of <code class="codeph">javax.xml.xquery.XQConnection</code>.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>An instance of <code class="codeph">XQConnection</code> serves as a factory for creating instances of <code class="codeph">XQExpression</code>, <code class="codeph">XQPreparedExpression</code>, <code class="codeph">XQItem</code>, <code class="codeph">XQSequence</code>, <code class="codeph">XQItemType</code>, and <code class="codeph">XQSequenceType</code>. One thread can manage the creation of these objects for use by other threads. For example, <code class="codeph">XQPreparedExpression</code> instances created in one thread by the same connection can be used in other threads. Each <code class="codeph">XQPreparedExpression</code> instance, however, must be executed by only one thread. Any user-defined implementations of <code class="codeph">oracle.xml.xquery.OXQEntityResolver</code> that are specified must be thread-safe when expressions from the same connection are evaluated concurrently.
                           </p>
                        </li>
                        <li>
                           <p>Method <code class="codeph">XQConnection.close()</code> closes all <code class="codeph">XQExpression</code> and <code class="codeph">XQPreparedExpression</code> instances that were obtained from the connection. Closing those instances closes all <code class="codeph">XQResultSequence</code> and <code class="codeph">XQResultItem</code> instances obtained from the expressions. Method <code class="codeph">XQConnection.close()</code> can be called while expressions obtained from the connection are being processed in other threads. In that case, all registered resources held by the expressions (such as <code class="codeph">java.io.InputStream</code> and <code class="codeph">java.io.Reader</code>) are closed. This contract assumes that all registered resources support a thread-safe close method. For example, many JDK implementations of <code class="codeph">java.io.Closeable</code> satisfy this requirement. But, many implementations of <code class="codeph">javax.xml.stream.XMLStreamReader</code> do not provide a thread-safe close method. Implementations without this support can give unpredictable results if they are closed while a second thread is still reading (see interface <code class="codeph">oracle.xml.xquery.OXQCloseable</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>).
                           </p>
                           <div class="infoboxnotealso" id="GUID-729BCBC6-A03A-4397-BE61-6E0AB9B43A6D__GUID-D41CBF61-90B5-4E84-99F7-23D92B3B1E12">
                              <p class="notep1">See Also:</p>
                              <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>, method <code class="codeph">oracle.xml.xquery.OXQConnection.copyExpression(XQPreparedExpression)</code></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADXDK183"></a><a id="ADXDK184"></a><a id="ADXDK185"></a><a id="ADXDK186"></a><a id="ADXDK182"></a><div class="props_rev_3"><a id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9" name="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9"></a><h3 id="ADXDK-GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9" class="sect3">Performing Updates</h3>
               <div>
                  <p>XDK extends XQJ with the ability to execute updating queries. XML documents can be read as an instance of <code class="codeph">javax.xml.xquery.XQItem</code>, and then modified using XQuery Update Facility extensions.
                  </p>
                  <div class="section">
                     <p> This feature is disabled by default. You can enable it by setting the update mode on the dynamic context to <code class="codeph">oracle.xml.xquery.OXQConstants.UPDATE_MODE_ENABLED</code>.
                     </p>
                     <p>Documents to be updated must be bound in deferred mode (see method <code class="codeph">javax.xml.xquery.XQStaticContext.setBindingMode(int)</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>). If the binding mode is not set to deferred, the input bindings are copied before query execution. Thus, only the copy is updated.
                     </p>
                     <p>The example in this section shows how you can modify an XML document using the XQuery Update Facility.</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJFCJCC">Example 15-20</a> displays the contents of <code class="codeph">configuration.xml</code>.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJICABB">Example 15-21</a> displays the contents of <code class="codeph">update.xq</code>.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJGJHDJ">Example 15-22</a> displays the contents of <code class="codeph">configuration.xml</code> after an update.
                     </p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJCDIFI">Example 15-23</a> shows how execute the query <code class="codeph">update.xq</code>.
                     </p>
                     <p>In the example, these actions occur:</p>
                     <ol>
                        <li>
                           <p>The XML file <code class="codeph">configuration.xml</code> is read as an instance of <code class="codeph">javax.xml.xquery.XQItem</code>.
                           </p>
                        </li>
                        <li>
                           <p>The item is bound to the prepared expression for the query <code class="codeph">update.xq</code>.
                           </p>
                        </li>
                        <li>
                           <p>The query <code class="codeph">update.xq</code> is executed.
                           </p>
                        </li>
                        <li>
                           <p>The modified document is written to the file <code class="codeph">configuration.xml</code>.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__GUID-9703B030-1DA9-4353-8A2D-6DDBDC23C543">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xquery_update10" target="_blank"><span class="italic">XQuery Update Facility 1.0</span></a></p>
                           </li>
                           <li>
                              <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>, interface <code class="codeph">oracle.xml.xquery.OXQDynamicContext</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJFCJCC">
                     <p class="titleinexample">Example 15-20 configuration.xml</p><pre class="oac_no_warn" dir="ltr">&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;hostname&lt;/name&gt;
    &lt;value&gt;example.com&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;timeout&lt;/name&gt;
    &lt;value&gt;1000&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJICABB">
                     <p class="titleinexample">Example 15-21 update.xq</p><pre class="oac_no_warn" dir="ltr">declare variable $doc external;
 
let $timeout := $doc/configuration/property[name eq "timeout"]
return
  replace value of node $timeout/value 
  with 2 * xs:integer($timeout/value)
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJGJHDJ">
                     <p class="titleinexample">Example 15-22 Updated File configuration.xml </p><pre class="oac_no_warn" dir="ltr">&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;hostname&lt;/name&gt;
    &lt;value&gt;example.com&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;timeout&lt;/name&gt;
    &lt;value&gt;2000&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16E26F1C-DA32-4D6A-BBE0-84EAFBA96EB9__BAJCDIFI">
                     <p class="titleinexample">Example 15-23 Executing the Updating Query update.xq</p><pre class="oac_no_warn" dir="ltr">import java.io.FileInputStream;
import java.io.IOException;
import java.io.FileOutputStream;
 
import javax.xml.namespace.QName;
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQConstants;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQItem;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQStaticContext;
 
import oracle.xml.xquery.OXQConstants;
import oracle.xml.xquery.OXQDataSource;
import oracle.xml.xquery.OXQView;
 
public class UpdateDocument {
    public static void main(String[] args) throws XQException, IOException {
        OXQDataSource ds = new OXQDataSource();
        XQConnection con = ds.getConnection();
        
        XQStaticContext ctx = con.getStaticContext();
        // Set the binding mode to deferred so the document
        // item is not copied when it is bound.
        ctx.setBindingMode(XQConstants.BINDING_MODE_DEFERRED);
        con.setStaticContext(ctx);
 
        FileInputStream input = new FileInputStream("configuration.xml");
        XQItem doc = con.createItemFromDocument(input, null, null);
        input.close();
        
        System.out.println("Before update: \n" + doc.getItemAsString(null));
        
        FileInputStream query = new FileInputStream("update.xq");
        XQPreparedExpression expr = con.prepareExpression(query);
        query.close();
        expr.bindItem(new QName("doc"), doc);
        // Enable updates (disabled by default)
        OXQView.getDynamicContext(expr).setUpdateMode(OXQConstants.UPDATE_MODE_ENABLED);
        expr.executeQuery();
 
        System.out.println("After update: \n" + doc.getItemAsString(null));
        
        // Write the modified document back to the file
        FileOutputStream out = new FileOutputStream("configuration.xml");
        doc.writeItem(out, null);

        expr.close();
        con.close();
    }
}
</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-19382C4B-0797-444D-9770-3620525E8978" name="GUID-19382C4B-0797-444D-9770-3620525E8978"></a><h3 id="ADXDK-GUID-19382C4B-0797-444D-9770-3620525E8978" class="sect3">Oracle XQuery Functions and Operators</h3>
               <div>
                  <p>Oracle supports the standard XQuery functions and operators, as well as some Oracle-specific functions.</p>
                  <p>Oracle-specific XQuery functions use namespace <code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code>. Namespace prefix <code class="codeph">ora-fn</code> is predeclared, and the module is automatically imported.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="using-xquery-processor-for-Java.html#GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0" title="The standards and specifications to which the XDK XQuery processor for Java conforms are listed.">Standards and Specifications for the XQuery Processor for Java</a></li>
                     </ul>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-65FBF15D-D1FA-4648-89E4-C613295F2787" name="GUID-65FBF15D-D1FA-4648-89E4-C613295F2787"></a><h4 id="ADXDK-GUID-65FBF15D-D1FA-4648-89E4-C613295F2787" class="sect4">Oracle XQuery Functions for Duration, Date, and Time</h4>
                  <div>
                     <p>You can manipulate durations, dates, and times in XQuery using Oracle XQuery functions.</p>
                     <p>The Oracle XQuery functions are in namespace <code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code>. Namespace prefix<code class="codeph">ora-fn</code> is predeclared, and the module is automatically imported.
                     </p>
                  </div>
                  <div class="sect4"><a id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317" name="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317"></a><h5 id="ADXDK-GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317" class="sect5">ora-fn:date-from-string-with-format</h5>
                     <div>
                        <p>This Oracle XQuery function returns a new date value from a string according to a given pattern.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317__GUID-D0426020-8ED3-4A70-8E74-08F2EC4798DE">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:date-from-string-with-format($format as xs:string?,
                                    $dateString as xs:string?, 
                                    $locale as xs:string*)
                                   as xs:date?

ora-fn:date-from-string-with-format($format as xs:string?,
                                    $dateString as xs:string?)
                                   as xs:date?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317__GUID-0938493F-5CA4-4F91-98C2-CBB038543205">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code>: The pattern; see <a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="The $format argument identifies the various fields that compose a date or time value.">Format Argument</a></p>
                        <p><code class="codeph">$dateString</code>: An input string that represents a date 
                        </p>
                        <p><code class="codeph">$locale</code>: A one- to three-field value that represents the locale; see <a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="The $locale represents a specific geographic, political, or cultural region.">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DCB091E4-0DC4-4F1A-977F-2F3E165C6317__GUID-3B95294E-D0F5-4380-BACD-BDF13E0F49F4">Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns the specified date in the current time zone:</p><pre class="oac_no_warn" dir="ltr">ora-fn:date-from-string-with-format("yyyy-MM-dd G", "2013-06-22 AD")</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-44910E87-C56D-4F83-857F-412A08B0234A" name="GUID-44910E87-C56D-4F83-857F-412A08B0234A"></a><h5 id="ADXDK-GUID-44910E87-C56D-4F83-857F-412A08B0234A" class="sect5">ora-fn:date-to-string-with-format</h5>
                     <div>
                        <p>This Oracle XQuery function returns a date string with a given pattern.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-44910E87-C56D-4F83-857F-412A08B0234A__GUID-9CA1AFED-6BD7-4684-9535-0CD674D1F915">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:date-to-string-with-format($format as xs:string?,
                                  $date as xs:date?,
                                  *$locale as xs:string?)
                                 as xs:string?

ora-fn:date-to-string-with-format($format as xs:string?,
                                  $date as xs:date?)
                                 as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-44910E87-C56D-4F83-857F-412A08B0234A__GUID-6AA4B590-E391-464E-855F-8ED5323DDD7F">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code>: The pattern; see <a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="The $format argument identifies the various fields that compose a date or time value.">Format Argument</a></p>
                        <p><code class="codeph">$date</code>: The date
                        </p>
                        <p><code class="codeph">$locale</code>: A one- to three-field value that represents the locale; see <a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="The $locale represents a specific geographic, political, or cultural region.">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-44910E87-C56D-4F83-857F-412A08B0234A__GUID-1A4CDB10-0773-47AF-9B7E-3949538E2BE9">Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns the string <code class="codeph">2013-07-15</code>:
                        </p><pre class="oac_no_warn" dir="ltr">ora-fn:date-to-string-with-format("yyyy-mm-dd", xs:date("2013-07-15"))</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39" name="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39"></a><h5 id="ADXDK-GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39" class="sect5">ora-fn:dateTime-from-string-with-format</h5>
                     <div>
                        <p>This Oracle XQuery function returns a new date-time value from an input string, according to a given pattern.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39__GUID-9583F604-CA13-42D6-933D-8ED70CE5DF1C">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:dateTime-from-string-with-format($format as xs:string?, 
                                        $dateTimeString as xs:string?,
                                        $locale as xs:string?)
                                       as xs:dateTime?

ora-fn:dateTime-from-string-with-format($format as xs:string?,
                                        $dateTimeString as xs:string?)
                                       as xs:dateTime?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39__GUID-C6C1828A-640E-4309-B4C4-D18191E4A06C">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code>: The pattern; see <a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="The $format argument identifies the various fields that compose a date or time value.">Format Argument</a></p>
                        <p><code class="codeph">$dateTimeString</code>: The date and time
                        </p>
                        <p><code class="codeph">$locale</code>: A one- to three-field value that represents the locale; see <a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="The $locale represents a specific geographic, political, or cultural region.">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9B138783-D1C1-4635-B5FC-EB8051B9FB39__GUID-C5D7690A-733D-4CE4-A655-03EDC25C7369">Examples</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns the specified date and 11:04:00AM in the current time zone:</p><pre class="pre codeblock"><code>ora-fn:dateTime-from-string-with-format("yyyy-MM-dd 'at' hh:mm", 
                                        "2013-06-22 at 11:04")
</code></pre><p>The next example returns the specified date and 12:00:00AM in the current time zone:</p><pre class="pre codeblock"><code>ora-fn:dateTime-from-string-with-format("yyyy-MM-dd G",
                                        "2013-06-22 AD") </code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E" name="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E"></a><h5 id="ADXDK-GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E" class="sect5">ora-fn:dateTime-to-string-with-format</h5>
                     <div>
                        <p>This Oracle XQuery function returns a date and time string with a given pattern.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E__GUID-CA66F25E-532E-4D3F-8A4C-7795F8ADF837">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:dateTime-to-string-with-format($format as xs:string?,
                                      $dateTime as xs:dateTime?,
                                      $locale as xs:string?)
                                     as xs:string?

ora-fn:dateTime-to-string-with-format($format as xs:string?,
                                      $dateTime as xs:dateTime?)
                                     as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E__GUID-15ECD024-8DEC-4F87-8BBF-00127A9B8363">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code>: The pattern; see <a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="The $format argument identifies the various fields that compose a date or time value.">Format Argument</a></p>
                        <p><code class="codeph">$dateTime</code>: The date and time
                        </p>
                        <p><code class="codeph">$locale</code>: A one- to three-field value that represents the locale; see <a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="The $locale represents a specific geographic, political, or cultural region.">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D70AE8F0-23CA-4B2D-AE40-F2F2C011E30E__GUID-4B1EE99A-0FBF-4AB0-A2A5-3738BBD47665">Examples</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns the string <code class="codeph">07 JAN 2013 10:09 PM AD</code>:
                        </p><pre class="oac_no_warn" dir="ltr">ora-fn:dateTime-to-string-with-format("dd MMM yyyy hh:mm a G",
                                      xs:dateTime("2013-01-07T22:09:44"))
</pre><p>The next example returns the string "01-07-2013":</p><pre class="oac_no_warn" dir="ltr">ora-fn:dateTime-to-string-with-format("MM-dd-yyyy",
                                      xs:dateTime("2013-01-07T22:09:44")) </pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E" name="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E"></a><h5 id="ADXDK-GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E" class="sect5">ora-fn:time-from-string-with-format</h5>
                     <div>
                        <p>This Oracle XQuery function returns a new time value from an input string, according to a given pattern.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E__GUID-EB82FFB7-EC29-4958-8877-1AFB91FF5496">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:time-from-string-with-format($format as xs:string?,
                                    $timeString as xs:string?,
                                    $locale as xs:string?)
                                   as xs:time?

ora-fn:time-from-string-with-format($format as xs:string?,
                                    $timeString as xs:string?)
                                   as xs:time?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E__GUID-3D5945FF-FF4C-4B33-9018-6BFBB77F07DD">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code>: The pattern; see <a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="The $format argument identifies the various fields that compose a date or time value.">Format Argument</a></p>
                        <p><code class="codeph">$timeString</code>: The time
                        </p>
                        <p><code class="codeph">$locale</code>: A one- to three-field value that represents the locale; see <a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="The $locale represents a specific geographic, political, or cultural region.">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2F0C19D0-F2A5-49EF-A5C5-DE29CE26DF0E__GUID-E64FD76A-2FEA-4BA0-8B9E-29EE0A4CEBFF">Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns 9:45:22 PM in the current time zone:</p><pre class="pre codeblock"><code>ora-fn:time-from-string-with-format("HH.mm.ss", "21.45.22")
</code></pre><p>The next example returns 8:07:22 PM in the current time zone:</p><pre class="pre codeblock"><code>fn-bea:time-from-string-with-format("hh:mm:ss a", "8:07:22 PM") </code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E" name="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E"></a><h5 id="ADXDK-GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E" class="sect5">ora-fn:time-to-string-with-format</h5>
                     <div>
                        <p>This Oracle XQuery function returns a time string with a given pattern.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E__GUID-BFC5D2B8-4F57-4F9F-B9F2-64CC4A9394A4">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:time-to-string-with-format($format as xs:string?,
                                  $time as xs:time?,
                                  $locale as xs:string?)
                                 as xs:string?

ora-fn:time-to-string-with-format($format as xs:string?, $time as xs:time?) as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E__GUID-33F606FA-3F63-4D01-BB50-3B34EF68D130">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$format</code>: The pattern; see <a href="using-xquery-processor-for-Java.html#GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" title="The $format argument identifies the various fields that compose a date or time value.">Format Argument</a></p>
                        <p><code class="codeph">$time</code>: The time
                        </p>
                        <p><code class="codeph">$locale</code>: A one- to three-field value that represents the locale; see <a href="using-xquery-processor-for-Java.html#GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" title="The $locale represents a specific geographic, political, or cultural region.">Locale Argument</a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8E822A4B-489B-46E1-8DA8-553C31B81F1E__GUID-14473823-9B73-4CEE-8CA1-8E5C9E425DA3">Examples</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns the string "10:09 PM":</p><pre class="pre codeblock"><code>ora-fn:time-to-string-with-format("hh:mm a", xs:time("22:09:44"))
</code></pre><p>The next example returns the string "22:09 PM":</p><pre class="pre codeblock"><code>ora-fn:time-to-string-with-format("HH:mm a", xs:time("22:09:44"))</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" name="GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346"></a><h5 id="ADXDK-GUID-0209668E-BBE9-4ADE-A4BB-ABDA3B4B3346" class="sect5">Format Argument</h5>
                     <p>The <code class="codeph">$format</code> argument identifies the various fields that compose a date or time value. 
                     </p>
                  </div>
                  <div class="sect4"><a id="GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" name="GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B"></a><h5 id="ADXDK-GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B" class="sect5">Locale Argument</h5>
                     <div>
                        <p>The <code class="codeph">$locale</code> represents a specific geographic, political, or cultural region. 
                        </p>
                        <p>It is defined by up to three fields:</p>
                        <ol>
                           <li>
                              <p><span class="bold">Language code</span>: The ISO 639 alpha-2 or alpha-3 language code, or the registered language subtags of up to eight letters. For example, <code class="codeph">en</code> for English and <code class="codeph">ja</code> for Japanese.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Country code</span>: The ISO 3166 alpha-2 country code or the UN M.49 numeric-3 area code. For example, <code class="codeph">US</code> for the United States and <code class="codeph">029</code> for the Caribbean.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Variant</span>: Indicates a variation of the locale, such as a particular dialect. Order multiple values in order of importance and separate them with an underscore (_). These values are case sensitive.
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-0F2E2FD8-D9BA-4EA8-B452-5BA5B2AC350B__GUID-7FFDC7E5-E939-4F3D-9BAF-8102FEDEB172">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=javase7_util_locale" target="_blank">Class Locale</a> in <cite>Java Standard Edition 7 Reference</cite></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F8F59CE8-C172-4C5E-BBC9-208332B96CC2" name="GUID-F8F59CE8-C172-4C5E-BBC9-208332B96CC2"></a><h4 id="ADXDK-GUID-F8F59CE8-C172-4C5E-BBC9-208332B96CC2" class="sect4">Oracle XQuery Functions for Strings</h4>
                  <div>
                     <p>You can manipulate strings in XQuery using Oracle XQuery functions.</p>
                     <p>The Oracle XQuery functions are in namespace <code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code>. Namespace prefix<code class="codeph">ora-fn</code> is predeclared, and the module is automatically imported.
                     </p>
                  </div>
                  <div class="sect4"><a id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194" name="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194"></a><h5 id="ADXDK-GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194" class="sect5">ora-fn:pad-left</h5>
                     <div>
                        <p>Adds padding characters to the left of a string to create a fixed-length string. If the input string exceeds the specified size, then it is truncated to return a substring of the specified length. The default padding character is a space (ASCII 32).</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194__GUID-3AD17F46-E2B4-431C-BD96-C648E1383B6E">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:pad-left($str as xs:string?,
                $size as xs:integer?,
                $pad as xs:string?)
               as xs:string?

ora-fn:pad-left($str as xs:string?,
                $size as xs:integer?)
               as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194__GUID-4F78678D-EEFA-4B9B-9326-161670A78C06">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$str</code>: The input string
                        </p>
                        <p><code class="codeph">$size</code>: The desired fixed length, which is obtained by adding padding characters to <code class="codeph">$str</code></p>
                        <p><code class="codeph">$pad</code>: The padding character
                        </p>
                        <p>If either argument is an empty sequence, then the function returns an empty sequence.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7DB5EB9D-A95C-42F4-AED7-3CF6208E8194__GUID-C255127C-3534-4ACC-B80E-76CE134A7650">Examples</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example prefixes <code class="codeph">"01</code>" to the input string up to the maximum of six characters. The returned string is "<code class="codeph">010abc</code>". The function returns one complete and one partial pad character.
                        </p><pre class="pre codeblock"><code>ora-fn:pad-left("abc", 6, "01")
</code></pre><p>The example returns only "<code class="codeph">ab</code>" because the input string exceeds the specified fixed length:
                        </p><pre class="pre codeblock"><code>ora-fn:pad-left("abcd", 2, "01")
</code></pre><p>This example prefixes spaces to the string up to the specified maximum of six characters. The returned string has a prefix of two spaces: "<code class="codeph">  abcd</code>":
                        </p><pre class="oac_no_warn" dir="ltr">ora-fn:pad-left("abcd", 6)
</pre><p>The next example returns only "<code class="codeph">ab</code>" because the input string exceeds the specified fixed length:
                        </p><pre class="oac_no_warn" dir="ltr">ora-fn:pad-left("abcd", 2)</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0" name="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0"></a><h5 id="ADXDK-GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0" class="sect5">ora-fn:pad-right</h5>
                     <div>
                        <p>Adds padding characters to the right of a string to create a fixed-length string. If the input string exceeds the specified size, then it is truncated to return a substring of the specified length. The default padding character is a space (ASCII 32).</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0__GUID-F7AD140B-8363-4264-B496-C447957B80F6">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:pad-right($str as xs:string?,
                 $size as xs:integer?,
                 $pad as xs:string?)
                as xs:string?

ora-fn:pad-right($str as xs:string?,
                 $size as xs:integer?)
                as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0__GUID-531EEE67-8599-44DA-AE67-6C9061D1BA5C">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$str</code>: The input string
                        </p>
                        <p><code class="codeph">$size</code>: The desired fixed length, which is obtained by adding padding characters to <code class="codeph">$str</code></p>
                        <p><code class="codeph">$pad</code>: The padding character
                        </p>
                        <p>If either argument is an empty sequence, then the function returns an empty sequence.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5D2BE1DE-5EA6-4E2D-ADD5-44D028899DC0__GUID-90633DBA-E9C9-4412-A4FE-1FA366E9CCFF">Examples</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example appends "<code class="codeph">01</code>" to the input string up to the maximum of six characters. The returned string is "<code class="codeph">abc010</code>". The function returns one complete and one partial pad character.
                        </p><pre class="pre codeblock"><code>ora-fn:pad-right("abc", 6, "01")
</code></pre><p>This example returns only "<code class="codeph">ab</code>" because the input string exceeds the specified fixed length:
                        </p><pre class="pre codeblock"><code>ora-fn:pad-right("abcd", 2, "01")
</code></pre><p>This example appends spaces to the string up to the specified maximum of six characters. The returned string has a suffix of two spaces: "<code class="codeph">abcd  </code>":
                        </p><pre class="pre codeblock"><code>ora-fn:pad-right("abcd", 6)
</code></pre><p>The next example returns only "<code class="codeph">ab</code>" because the input string exceeds the specified fixed length:
                        </p><pre class="pre codeblock"><code>ora-fn:pad-right("abcd", 2)</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7" name="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7"></a><h5 id="ADXDK-GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7" class="sect5">ora-fn:trim</h5>
                     <div>
                        <p>Removes any leading or trailing white space from a string.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7__GUID-71EA4AD3-9527-4814-B27A-B2DBC907E01B">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:trim($input as xs:string?) as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7__GUID-5EBA07EE-1A98-4040-BBFC-1BF78061B1DA">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$input</code>: The string to trim. If <code class="codeph">$input</code> is an empty sequence, then the function returns an empty sequence. Other data types trigger an error.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9C664B13-A1C4-4DDA-87E0-720379FF1BD7__GUID-91596001-D79D-4865-A7F5-EAC729D3B2F3">Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example returns the string "<code class="codeph">abc</code>":
                        </p><pre class="pre codeblock"><code>ora-fn:trim("  abc  ")</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80" name="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80"></a><h5 id="ADXDK-GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80" class="sect5">ora-fn:trim-left</h5>
                     <div>
                        <p>Removes any leading white space.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80__GUID-BBE9C459-9FF3-489C-9975-E8803D05D852">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:trim-left($input as xs:string?) as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80__GUID-B6D41FD5-514C-47D3-A6F5-18BF291950AA">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$input</code>: The string to trim. If <code class="codeph">$input</code> is an empty sequence, then the function returns an empty sequence. Other data types trigger an error.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-09B54A7A-F2D1-4717-BEE7-C6E4BD852F80__GUID-279F233D-9F1A-49D4-92EC-1DDE09C06F46">Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example removes the leading spaces and returns the string "<code class="codeph">abc&nbsp;&nbsp;&nbsp;&nbsp;</code>":
                        </p><pre class="pre codeblock"><code>ora-fn:trim-left("    abc    ")</code></pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92" name="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92"></a><h5 id="ADXDK-GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92" class="sect5">ora-fn:trim-right</h5>
                     <div>
                        <p>Removes any trailing white space.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92__GUID-53BC7949-5ED4-49DE-83A2-D8615CD6CA26">Signature</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>ora-fn:trim-right($input as xs:string?) as xs:string?</code></pre><div class="section">
                           <p class="subhead3" id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92__GUID-33F98649-53B9-46A4-BCA7-9508E7461482">Parameters</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">$input</code>: The string to trim. If <code class="codeph">$input</code> is an empty sequence, then the function returns an empty sequence. Other data types trigger an error.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-99D161E3-CDBE-489C-8AD2-93370FD0DD92__GUID-64E1BB38-95AC-48A0-9F9C-CB480C527417">Example</p>
                        </div>
                        <!-- class="section" -->
                        <p>This example removes the trailing spaces and returns the string "<code class="codeph">&nbsp;&nbsp;&nbsp;&nbsp;abc</code>":
                        </p><pre class="pre codeblock"><code>ora-fn:trim-left("    abc    ")</code></pre></div>
                  </div>
               </div>
            </div><a id="ADXDK99996"></a><div class="props_rev_3"><a id="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0" name="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0"></a><h3 id="ADXDK-GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0" class="sect3">Standards and Specifications for the XQuery Processor for Java</h3>
               <div>
                  <p>The standards and specifications to which the XDK XQuery processor for Java conforms are listed.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_30" target="_blank"><span class="italic">XQuery 3.0: An XML Query Language</span></a></p>
                        <div class="infoboxnote" id="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0__GUID-BD352653-E22D-451D-AD74-88E1515EDB8D">
                           <p class="notep1">Note:</p>All XQuery 1.0 level features are supported. XQuery 3.0 level features are supported except for the following: FLWOR window clause, FLWOR count clause, namespace constructors, decimal format declarations, <code class="codeph">fn:format-number</code>, <code class="codeph">fn:format-integer</code>, <code class="codeph">fn:format-date</code>, <code class="codeph">fn:format-time</code>, <code class="codeph">fn:path</code>, and higher order XQuery functions.
                        </div>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_tr_xquery_update10" target="_blank"><span class="italic">XQuery Update Facility 1.0</span></a></p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xqueryx_30" target="_blank"><span class="italic">XQueryX 3.0</span></a>, the XML syntax for XQuery 3.0
                        </p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=jcp_org_jsr225" target="_blank"><span class="italic">JSR-000225 XQuery API for Java</span></a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-7A47349F-CFFD-43FA-A5E4-FADC49BD75C0__GUID-40808998-C99E-40AE-BCD8-CF1CDC2DCD22">
                     <p class="notep1">Note:</p>
                     <p>The XDK XQuery processor for Java is not interoperable with other XQJ implementations, including the Oracle XQJ implementation for Oracle XML DB. (See JSR-225: XQuery API for Java for the meaning of <span class="italic">interoperable</span>.)
                     </p>
                  </div>
               </div><a id="ADXDK99968"></a><a id="ADXDK99967"></a><div class="props_rev_3"><a id="GUID-19038D1D-9BB6-4973-BD8A-6C885A1300E0" name="GUID-19038D1D-9BB6-4973-BD8A-6C885A1300E0"></a><h4 id="ADXDK-GUID-19038D1D-9BB6-4973-BD8A-6C885A1300E0" class="sect4">Optional XQuery Features</h4>
                  <div>
                     <p>The XQuery specification defines certain features as optional. Links are provided to the standards that specify those that are supported by XDK.</p>
                     <p>These are the optional features supported by XDK:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xqueryschemaimport" target="_blank">Schema Import</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xqueryschemavalid" target="_blank">Validate Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquerystatictyping" target="_blank">Static Typing</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquerystaticupdate" target="_blank">Static Typing for Update</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_modules" target="_blank">Modules</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=w3_org_xquery_serial8n" target="_blank">Serialization</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADXDK124"></a><a id="ADXDK125"></a><a id="ADXDK126"></a><a id="ADXDK127"></a><a id="ADXDK123"></a><div class="props_rev_3"><a id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53" name="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53"></a><h4 id="ADXDK-GUID-64686275-A3CA-4C60-934C-CA8CC6636E53" class="sect4">Implementation-Defined Items</h4>
                  <div>
                     <p>The XQJ and XQuery specifications leave the definition of certain aspects up to the implementation. The implementation-defined items for XDK are described briefly.</p>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJHHFGH" title="table of xqj support">Table 15-2</a> summarizes the XQJ implementation-defined items.
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJHHFGH">
                        <p class="titleintable">Table 15-2 XQJ Implementation-Defined Items</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XQJ Implementation-Defined Items" summary="table of xqj support" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d53703e4388">Description</th>
                                 <th align="left" valign="bottom" width="50%" id="d53703e4391">Behavior</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4396" headers="d53703e4388 ">
                                    <p>Class name of <code class="codeph">XQDataSource</code> implementation
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4396 d53703e4391 ">
                                    <p><code class="codeph">oracle.xml.xquery.OXQDataSource</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4408" headers="d53703e4388 ">
                                    <p>Properties defined on <code class="codeph">OXQDataSource</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4408 d53703e4391 ">
                                    <p>None. The username and password are silently ignored.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4417" headers="d53703e4388 ">
                                    <p>JDBC connection support</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4417 d53703e4391 ">
                                    <p>JDBC connections are not supported.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4424" headers="d53703e4388 ">
                                    <p>Commands</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4424 d53703e4391 ">
                                    <p>Not supported.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4431" headers="d53703e4388 ">
                                    <p>Cancelling of query execution with method <code class="codeph">XQPreparedExpression.cancel()</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4431 d53703e4391 ">
                                    <p>Yes.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4440" headers="d53703e4388 ">
                                    <p>Serialization</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4440 d53703e4391 ">
                                    <p>Yes.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4447" headers="d53703e4388 ">
                                    <p>Additional StAX or SAX events</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4447 d53703e4391 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4454" headers="d53703e4388 ">
                                    <p>User-defined schema types</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4454 d53703e4391 ">
                                    <p>Yes.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4461" headers="d53703e4388 ">
                                    <p>Node identity, document order, and full-node context preservation when a node is bound to an external variable</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4461 d53703e4391 ">
                                    <p>Not preserved.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4468" headers="d53703e4388 ">
                                    <p>Login timeout</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4468 d53703e4391 ">
                                    <p>Not supported.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4475" headers="d53703e4388 ">
                                    <p>Transactions</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4475 d53703e4391 ">
                                    <p>Not supported. An exception is thrown if a transaction method is called.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4483" headers="d53703e4388 ">
                                    <p><code class="codeph">XQItemAccessor.getNodeUri()</code> method behavior if the input node is not a document node
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4483 d53703e4391 ">
                                    <p>Exception.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4492" headers="d53703e4388 ">
                                    <p><code class="codeph">XQItemType.getTypeName()</code> method for anonymous types
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4492 d53703e4391 ">
                                    <p>A unique name.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4501" headers="d53703e4388 ">
                                    <p><code class="codeph">XQItemType.getSchemaURI()</code> method
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4501 d53703e4391 ">
                                    <p>The schema URI is returned when a type is created from XQJ. No otherwise.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4510" headers="d53703e4388 ">
                                    <p><code class="codeph">XQDataFactory.createItemFromDocument()</code> and <code class="codeph">bindDocument()</code> methods if the input is not a well-formed XML document
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4510 d53703e4391 ">
                                    <p>Exception.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4522" headers="d53703e4388 ">
                                    <p>Additional error codes returned by class <code class="codeph">XQQueryException</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4522 d53703e4391 ">
                                    <p>The qualified names of Oracle-specific error codes are in the namespace <code class="codeph">http://xmlns.oracle.com/xdk/xquery/errors</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4534" headers="d53703e4388 ">
                                    <p><code class="codeph">ConnectionPoolXQDataSource</code>, <code class="codeph">PooledXQConnection</code>, <code class="codeph">XQConnectionEvent</code>, <code class="codeph">XQConnectionEventListener</code> interfaces
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4534 d53703e4391 ">
                                    <p>No.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4552" headers="d53703e4388 ">
                                    <p><code class="codeph">XQDataSource.getConnection(java.sql.Connection)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4552 d53703e4391 ">
                                    <p>JDBC connections are not supported. An exception is thrown if this method is called.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d53703e4560" headers="d53703e4388 ">
                                    <p><code class="codeph">XQDataSource.getConnection(java.lang.String, java.lang.String)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d53703e4560 d53703e4391 ">
                                    <p>Same as <code class="codeph">getConnection()</code>. Parameters are ignored.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__GUID-025084F3-A4A8-44A1-9CF2-5F1CA576DEF0">
                        <p class="notep1">Note:</p>
                        <p>XDK support for the features in <a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJHHFGH" title="table of xqj support">Table 15-2</a> differs from the Oracle XML DB support for them.
                        </p>
                     </div>
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJBDCIH" title="Table of implementation-defined items">Table 15-3</a> summarizes the XQuery implementation-defined items.
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJBDCIH">
                        <p class="titleintable">Table 15-3 XQuery Implementation-Defined Items</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XQuery Implementation-Defined Items" summary="Table of implementation-defined items" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="49%" id="d53703e4594">Item</th>
                                 <th align="left" valign="bottom" width="51%" id="d53703e4597">Behavior</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4602" headers="d53703e4594 ">
                                    <p>The version of Unicode that is used to construct expressions</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4602 d53703e4597 ">
                                    <p>Depends on the version of Java used. Different Java versions support different versions of Unicode.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4609" headers="d53703e4594 ">
                                    <p>The statically-known collations</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4609 d53703e4597 ">
                                    <p>Unicode codepoint collation and collations derived from classes <code class="codeph">java.text.Collator</code> or <code class="codeph">oracle.i18n.text.OraCollator</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4622" headers="d53703e4594 ">
                                    <p>The implicit time zone.</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4622 d53703e4597 ">
                                    <p>Uses the default time zone, as determined by method <code class="codeph">java.util.Calendar.getInstance()</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4632" headers="d53703e4594 ">
                                    <p>The circumstances in which warnings are raised, and the ways in which warnings are handled</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4632 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4639" headers="d53703e4594 ">
                                    <p>The method by which errors are reported to the external processing environment</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4639 d53703e4597 ">
                                    <p>Exception <code class="codeph">javax.xml.xquery.XQException</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4649" headers="d53703e4594 ">
                                    <p>Whether the implementation is based on the rules of XML 1.0 and XML Names, or the rules of XML 1.1 and XML Names 1.1</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4649 d53703e4597 ">
                                    <p>1.0.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4656" headers="d53703e4594 ">
                                    <p>Any components of the static context or dynamic context that are overwritten or augmented by the implementation</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4656 d53703e4597 ">
                                    <p>See <a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJGHGHD" title="Table of definitions for default context property values">Table 15-5</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4668" headers="d53703e4594 ">
                                    <p>Which of the optional axes are supported by the implementation, if the Full-Axis Feature is not supported</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4668 d53703e4597 ">
                                    <p>Full support.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4675" headers="d53703e4594 ">
                                    <p>The default handling of empty sequences returned by an ordering key (sortspec) in an order by clause (empty least or empty greatest)</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4675 d53703e4597 ">
                                    <p><code class="codeph">least</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4684" headers="d53703e4594 ">
                                    <p>The names and semantics of any extension expressions (pragmas) recognized by the implementation</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4684 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4691" headers="d53703e4594 ">
                                    <p>The names and semantics of any option declarations recognized by the implementation</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4691 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4699" headers="d53703e4594 ">
                                    <p>Protocols (if any) by which parameters can be passed to an external function, and the result of the function can be returned to the invoking query</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4699 d53703e4597 ">
                                    <p>Defined by XQJ.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4706" headers="d53703e4594 ">
                                    <p>The process by which the specific modules to be imported by a module import are identified, if the Module feature is supported (includes processing of location hints, if any)</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4706 d53703e4597 ">
                                    <p>Entity resolvers. See <a href="using-xquery-processor-for-Java.html#GUID-5E83610F-647D-4AE5-801B-878244FB6949" title="XDK extends XQJ with an entity resolver framework for controlling how documents, schemas, modules, collations, and external functions are obtained during query processing. The examples in this section show how to use an entity resolver for several types of entities.">XQJ Entity Resolution</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4719" headers="d53703e4594 ">
                                    <p>Any static typing extensions supported by the implementation, if the Static Typing feature is supported</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4719 d53703e4597 ">
                                    <p>Strict mode (based on subtype) and optimistic mode (based on type intersection). Optimistic mode is the default.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4726" headers="d53703e4594 ">
                                    <p>The means by which serialization is invoked, if the Serialization feature is supported</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4726 d53703e4597 ">
                                    <p>Defined by XQJ.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4733" headers="d53703e4594 ">
                                    <p>The default values for the <code class="codeph">byte-order-mark</code>, <code class="codeph">encoding</code>, <code class="codeph">media-type</code>, <code class="codeph">normalization-form</code>, <code class="codeph">omit-xml-declaration</code>, <code class="codeph">standalone</code>, and <code class="codeph">version</code> parameters, if the Serialization feature is supported
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4733 d53703e4597 ">
                                    <p>See the interface <code class="codeph">oracle.xml.xquery.OXQSerializationParameters</code> in <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4771" headers="d53703e4594 ">
                                    <p>Limits on ranges of values for various data types.</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4771 d53703e4597 ">
                                    <p>Decimal and integer values have arbitrary precision.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4778" headers="d53703e4594 ">
                                    <p>The signatures of functions provided by the implementation or via an implementation-defined API (see the XQuery standard, section 2.1.1, <span class="italic">Static Context</span>). 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4778 d53703e4597 ">
                                    <p>See <a href="using-xquery-processor-for-Java.html#GUID-19382C4B-0797-444D-9770-3620525E8978" title="Oracle supports the standard XQuery functions and operators, as well as some Oracle-specific functions.">Oracle XQuery Functions and Operators</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4794" headers="d53703e4594 ">
                                    <p>Any environment variables provided by the implementation.</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4794 d53703e4597 ">
                                    <p>Entity resolvers. See <a href="using-xquery-processor-for-Java.html#GUID-5E83610F-647D-4AE5-801B-878244FB6949" title="XDK extends XQJ with an entity resolver framework for controlling how documents, schemas, modules, collations, and external functions are obtained during query processing. The examples in this section show how to use an entity resolver for several types of entities.">XQJ Entity Resolution</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4807" headers="d53703e4594 ">
                                    <p>Any rules used for static typing (see the XQuery standard, section 2.2.3.1, <span class="italic">Static Analysis Phase</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4807 d53703e4597 ">
                                    <p>Defaults to optimistic, pessimistic configurable.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4817" headers="d53703e4594 ">
                                    <p>Any serialization parameters provided by the implementation (see the XQuery standard, section 2.2.4 <span class="italic">Serialization</span>). 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4817 d53703e4597 ">
                                    <p>See <code class="codeph">OXQSerializationParameters</code>. See <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4836" headers="d53703e4594 ">
                                    <p>The means by which the location hint for a serialization parameter document identifies the corresponding XDM instance (see the XQuery standard, section 2.2.4, <span class="italic">Serialization</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4836 d53703e4597 ">
                                    <p>Entity resolvers, <code class="codeph">OXQEntityKind.DOCUMENT</code>. See <a href="using-xquery-processor-for-Java.html#GUID-5E83610F-647D-4AE5-801B-878244FB6949" title="XDK extends XQJ with an entity resolver framework for controlling how documents, schemas, modules, collations, and external functions are obtained during query processing. The examples in this section show how to use an entity resolver for several types of entities.">XQJ Entity Resolution</a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4856" headers="d53703e4594 ">
                                    <p>What error, if any, is returned if an external function's implementation does not return the declared result type (see the XQuery standard, section 2.2.5, <span class="italic">Consistency Constraints</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4856 d53703e4597 ">
                                    <p>&nbsp;<code class="codeph">XPTY0004</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4869" headers="d53703e4594 ">
                                    <p>Any annotations defined by the implementation, and their associated behavior (see the XQuery standard, section 4.15, <span class="italic">Annotations</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4869 d53703e4597 ">
                                    <p>You can use <code class="codeph">%ora-fn:context-item</code> to allow the context item of a function caller to be implicitly passed as the first argument to the function.
                                    </p>
                                    <p>For example, this query evaluates to <code class="codeph">e</code>, <code class="codeph">f</code>, <code class="codeph">g</code>:
                                    </p><pre class="pre codeblock"><code>&nbsp;declare %ora-fn:context-item
&nbsp;function local:foo($arg as node()) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node-name($arg)
  };

(&lt;e/&gt;, &lt;f/&gt;)/local:foo(), local:foo(&lt;g/&gt;)</code></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4895" headers="d53703e4594 ">
                                    <p>Any function assertions defined by the implementation.</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4895 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4902" headers="d53703e4594 ">
                                    <p>The effect of function assertions understood by the implementation on section 2.5.6.3. The judgment subtype-assertions (AnnotationsA, AnnotationsB) .</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4902 d53703e4597 ">
                                    <p>Not applicable.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4909" headers="d53703e4594 ">
                                    <p>Any implementation-defined variables defined by the implementation. (see the XQuery standard, section 3.1.2, <span class="italic">Variable References</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4909 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4919" headers="d53703e4594 ">
                                    <p>The ordering associated with <code class="codeph">fn:unordered</code> in the implementation (see the XQuery standard, section 3.11, <span class="italic">Ordered and Unordered Expressions</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4919 d53703e4597 ">
                                    <p>It does not change the order of the input sequence.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4932" headers="d53703e4594 ">
                                    <p>Any additional information provided for <code class="codeph">try</code>/<code class="codeph">catch</code> by variable <code class="codeph">err:additional</code> (see the XQuery standard, section 3.15, <span class="italic">Try/Catch Expressions</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4932 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4951" headers="d53703e4594 ">
                                    <p>The default boundary-space policy (see the XQuery standard, section 4.3, <span class="italic">Boundary-space Declaration</span>). 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4951 d53703e4597 ">
                                    <p><code class="codeph">strip</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4963" headers="d53703e4594 ">
                                    <p>The default collation (see the XQuery standard, section 4.4, <span class="italic">Default Collation Declaration</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4963 d53703e4597 ">
                                    <p>Unicode.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d53703e4973" headers="d53703e4594 ">
                                    <p>The default base URI (see the XQuery standard, section 4.5, <span class="italic">Base URI Declaration</span>).
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d53703e4973 d53703e4597 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJEADJF" title="Table of implementation-defined XQUF items">Table 15-4</a> summarizes the XQuery Update Facility implementation-defined items.
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJEADJF">
                        <p class="titleintable">Table 15-4 XQuery Update Facility Implementation-Defined Items</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="XQuery Update Facility Implementation-Defined Items" summary="Table of implementation-defined XQUF items" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="37%" id="d53703e4998">Item</th>
                                 <th align="left" valign="bottom" width="63%" id="d53703e5001">Behavior</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5006" headers="d53703e4998 ">
                                    <p>The revalidation modes that are supported by this implementation.</p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5006 d53703e5001 ">
                                    <p><code class="codeph">skip</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5015" headers="d53703e4998 ">
                                    <p>The default revalidation mode for this implementation.</p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5015 d53703e5001 ">
                                    <p><code class="codeph">skip</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5024" headers="d53703e4998 ">
                                    <p>The mechanism (if any) by which an external function can return an XDM instance, or a pending update list, or both to the invoking query.</p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5024 d53703e5001 ">
                                    <p>Returning a pending update list from an external function is not supported.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d53703e5031" headers="d53703e4998 ">
                                    <p>The semantics of <code class="codeph">fn:put()</code>, including the kinds of nodes accepted as operands by this function.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="63%" headers="d53703e5031 d53703e5001 ">
                                    <p>Any node type is accepted. Storage of the node is determined by the entity resolver. See class <code class="codeph">oracle.xml.xquery.OXQEntity</code> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdk&amp;id=JAXML" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>, specifically the documentation for entity kind <code class="codeph">UPD_PUT</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="using-xquery-processor-for-Java.html#GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJGHGHD" title="Table of definitions for default context property values">Table 15-5</a> summarizes the default initial values for the static context.
                     </p>
                     <div class="tblformalwide" id="GUID-64686275-A3CA-4C60-934C-CA8CC6636E53__BAJGHGHD">
                        <p class="titleintable">Table 15-5 Default Initial Values for the Static Context</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Default Initial Values for the Static Context" summary="Table of definitions for default context property values" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d53703e5068">Context Component</th>
                                 <th align="left" valign="bottom" width="65%" id="d53703e5071">Default Value</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5076" headers="d53703e5068 ">
                                    <p>Statically known namespaces</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5076 d53703e5071 ">
                                    <p><code class="codeph">err</code>=<code class="codeph">http://w3.org/2005/xqt-errors</code></p>
                                    <p><code class="codeph">fn</code>=<code class="codeph">http://www.w3.org/2005/xpath-functions</code></p>
                                    <p><code class="codeph">local</code>=<code class="codeph">http://www.w3.org/2005/xquery-local-functions</code></p>
                                    <p><code class="codeph">math</code>=<code class="codeph">http://www.w3.org/2005/xpath-functions/math</code></p>
                                    <p><code class="codeph">ora-ext</code>=<code class="codeph">http://xmlns.oracle.com/xdk/xquery/extension</code></p>
                                    <p><code class="codeph">ora-java</code>=<code class="codeph">http://xmlns.oracle.com/xdk/xquery/java</code></p>
                                    <p><code class="codeph">ora-xml</code>=<code class="codeph">http://xmlns.oracle.com/xdk/xquery/xml</code></p>
                                    <p><code class="codeph">ora-fn</code>=<code class="codeph">http://xmlns.oracle.com/xdk/xquery/function</code></p>
                                    <p><code class="codeph">output</code>=<code class="codeph">http://www.w3.org/2010/xslt-xquery-serialization</code></p>
                                    <p><code class="codeph">xml</code>=<code class="codeph">http://www.w3.org/XML/1998/namespace</code></p>
                                    <p><code class="codeph">xs</code>=<code class="codeph">http://www.w3.org/2001/XMLSchema</code></p>
                                    <p><code class="codeph">xsi</code>=<code class="codeph">http://www.w3.org/2001/XMLSchema-instance</code></p>
                                    <p>Prefixes that begin with <code class="codeph">ora-</code> are reserved for use by Oracle. Additional prefixes that begin with <code class="codeph">ora-</code> may be added to the default statically known namespaces in a future release.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5162" headers="d53703e5068 ">
                                    <p>Default element/type namespace</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5162 d53703e5071 ">
                                    <p>No namespace.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5169" headers="d53703e5068 ">
                                    <p>Default function namespace</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5169 d53703e5071 ">
                                    <p><code class="codeph">fn</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5178" headers="d53703e5068 ">
                                    <p>In-scope schema types</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5178 d53703e5071 ">
                                    <p>Built-in types in <code class="codeph">xs</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5188" headers="d53703e5068 ">
                                    <p>In-scope element declarations</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5188 d53703e5071 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5195" headers="d53703e5068 ">
                                    <p>In-scope attribute declarations</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5195 d53703e5071 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5202" headers="d53703e5068 ">
                                    <p>In-scope variables</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5202 d53703e5071 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5209" headers="d53703e5068 ">
                                    <p>Context item static type</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5209 d53703e5071 ">
                                    <p><code class="codeph">item()</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5218" headers="d53703e5068 ">
                                    <p>Function signatures</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5218 d53703e5071 ">
                                    <p>Functions in namespace <code class="codeph">fn</code>, and constructors for built-in atomic types.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5228" headers="d53703e5068 ">
                                    <p>Statically known collations</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5228 d53703e5071 ">
                                    <p>Unicode codepoint collation and collations derived from class <code class="codeph">java.text.Collator</code> or <code class="codeph">oracle.i18n.text.OraCollator</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5241" headers="d53703e5068 ">
                                    <p>Default collation</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5241 d53703e5071 ">
                                    <p>Unicode codepoint collation:</p>
                                    <p><code class="codeph">http://www.w3.org/2005/xpath-functions/collation/codepoint</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5253" headers="d53703e5068 ">
                                    <p>Construction mode</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5253 d53703e5071 ">
                                    <p><code class="codeph">preserve</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5262" headers="d53703e5068 ">
                                    <p>Ordering mode</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5262 d53703e5071 ">
                                    <p><code class="codeph">ordered</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5271" headers="d53703e5068 ">
                                    <p>Default order for empty sequences</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5271 d53703e5071 ">
                                    <p><code class="codeph">least</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5280" headers="d53703e5068 ">
                                    <p>Boundary-space policy</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5280 d53703e5071 ">
                                    <p><code class="codeph">strip</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5289" headers="d53703e5068 ">
                                    <p>Copy-namespaces mode</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5289 d53703e5071 ">
                                    <p><code class="codeph">preserve</code>, <code class="codeph">no-inherit</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5301" headers="d53703e5068 ">
                                    <p>Base URI</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5301 d53703e5071 ">
                                    <p>As defined in the standard.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5308" headers="d53703e5068 ">
                                    <p>Statically known documents</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5308 d53703e5071 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5315" headers="d53703e5068 ">
                                    <p>Statically known collections</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5315 d53703e5071 ">
                                    <p>None.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5322" headers="d53703e5068 ">
                                    <p>Statically known default collection type</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5322 d53703e5071 ">
                                    <p><code class="codeph">node()*</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d53703e5331" headers="d53703e5068 ">
                                    <p>Serialization parameters</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d53703e5331 d53703e5071 ">
                                    <p>Same as the defaults for <code class="codeph">OXQSerializationParameters</code>. See <a href="../jaxml/index.html" target="_blank"><span><cite>Oracle Database XML Java API Reference</cite></span></a>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='01698.concepts-for-database-administrators.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This part describes the duties, tools, and essential knowledge for database administrators.">
      <meta name="description" content="This part describes the duties, tools, and essential knowledge for database administrators.">
      <title>Concepts for Database Administrators</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Concepts">
      <meta property="og:description" content="This part describes the duties, tools, and essential knowledge for database administrators.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Concepts">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-concepts.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T07:47:16-08:00">
      <meta name="dcterms.title" content="Database Concepts">
      <meta name="dcterms.dateCopyrighted" content="1993, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96138-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="topics-for-database-administrators-and-developers.html" title="Previous" type="text/html">
      <link rel="next" href="concepts-for-database-developers.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CNCPT">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="topics-for-database-administrators-and-developers.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="concepts-for-database-developers.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Concepts</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-administration-and-application-development.html" property="item" typeof="WebPage"><span property="name">Oracle Database Administration and Application Development</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Concepts for Database Administrators</li>
            </ol>
            <a id="GUID-8ED4D6B3-BF1D-4095-9BCD-6E5CCFDBE27C" name="GUID-8ED4D6B3-BF1D-4095-9BCD-6E5CCFDBE27C"></a><a id="CNCPT827"></a>
            
            <h2 id="CNCPT-GUID-8ED4D6B3-BF1D-4095-9BCD-6E5CCFDBE27C" class="sect2"><span class="enumeration_chapter">18 </span>Concepts for Database Administrators
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='concepts-for-database-administrators'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>This part describes the duties, tools, and essential knowledge for database administrators.</p>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="concepts-for-database-administrators.html#GUID-18D90D4B-35EE-45C7-B00D-CDA6ECAD5D89" title="The principal responsibility of a database administrator (DBA) is to make enterprise data available to its users.">Duties of Database Administrators</a></p>
                  </li>
                  <li>
                     <p><a href="concepts-for-database-administrators.html#GUID-FA659979-25B7-4611-AA8D-48B5404301FE" title="Oracle provides several tools for use in administering a database.">Tools for Database Administrators</a></p>
                  </li>
                  <li>
                     <p><a href="concepts-for-database-administrators.html#GUID-C12266D6-81D4-4637-83EC-A8D7E6430A3B" title="This section covers topics that are most essential to DBAs and that have not been discussed elsewhere in the manual.">Topics for Database Administrators</a></p>
                  </li>
               </ul>
            </div><a id="CNCPT828"></a><div class="props_rev_3"><a id="GUID-18D90D4B-35EE-45C7-B00D-CDA6ECAD5D89" name="GUID-18D90D4B-35EE-45C7-B00D-CDA6ECAD5D89"></a><h3 id="CNCPT-GUID-18D90D4B-35EE-45C7-B00D-CDA6ECAD5D89" class="sect3">Duties of Database Administrators</h3>
               <div>
                  <p>The principal responsibility of a database administrator (DBA) is to make enterprise data available to its users.</p>
                  <p>DBAs must work closely with developers to ensure that their applications make efficient use of the database, and with system administrators to ensure that physical resources are adequate and used efficiently.</p>
                  <p>Oracle DBAs are responsible for understanding the Oracle Database architecture and how the database works. DBAs can expect to perform the following tasks:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Installing, upgrading, and patching Oracle Database software</p>
                     </li>
                     <li>
                        <p>Designing databases, including identifying requirements, creating the logical design (conceptual model), and physical database design</p>
                     </li>
                     <li>
                        <p>Creating Oracle databases</p>
                     </li>
                     <li>
                        <p>Developing and testing a backup and recovery strategy, backing up Oracle databases regularly, and recovering them in case of failures</p>
                     </li>
                     <li>
                        <p>Configuring the network environment to enable clients to connect to databases</p>
                     </li>
                     <li>
                        <p>Starting up and shutting down the database</p>
                     </li>
                     <li>
                        <p>Managing storage for the database</p>
                     </li>
                     <li>
                        <p>Managing users and security</p>
                     </li>
                     <li>
                        <p>Managing database objects such as tables, indexes, and views</p>
                     </li>
                     <li>
                        <p>Monitoring and tuning database performance</p>
                     </li>
                     <li>
                        <p>Investigating, gathering data for, and reporting to Oracle Support Services any critical database errors</p>
                     </li>
                     <li>
                        <p>Evaluating and testing new database features</p>
                     </li>
                  </ul>
                  <p>The types of users and their roles and responsibilities depend on the database environment. A small database may have one DBA. A very large database may divide the DBA duties among several specialists, for example, security officers, backup operators, and application administrators.</p>
                  <div class="infoboxnotealso" id="GUID-18D90D4B-35EE-45C7-B00D-CDA6ECAD5D89__GUID-2238F9D3-2671-4011-AD4E-02579B113FBD">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../admqs/getting-started-with-database-administration.html#ADMQS037" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a> for an introduction to DBA tasks
                           </p>
                        </li>
                        <li>
                           <p><a href="../admqs/getting-started-with-database-administration.html#ADMQS037" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for a more in-depth presentation of DBA concepts and tasks
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="CNCPT829"></a><div class="props_rev_3"><a id="GUID-FA659979-25B7-4611-AA8D-48B5404301FE" name="GUID-FA659979-25B7-4611-AA8D-48B5404301FE"></a><h3 id="CNCPT-GUID-FA659979-25B7-4611-AA8D-48B5404301FE" class="sect3">Tools for Database Administrators</h3>
               <div>
                  <p>Oracle provides several tools for use in administering a database. </p>
                  <p>This section describes some commonly used tools:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-BE08A8FA-501A-418E-AD32-3E42AE762026" title="Oracle Enterprise Manager (Enterprise Manager) is a web-based system management tool that provides management of Oracle databases, Exadata database machine, Fusion Middleware, Oracle applications, servers, storage, and non-Oracle hardware and software.">Oracle Enterprise Manager</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-6959296B-A487-4806-9BF6-564AE05C6D01" title="SQL*Plus is an interactive and batch query tool included in every Oracle Database installation.">SQL*Plus</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-87ACF317-FEBC-418C-9BE6-253F2C43F482" title="Oracle provides several tools to simplify the task of installing and configuring Oracle Database software.">Tools for Database Installation and Configuration</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-74CB09E3-EEAA-4FF5-8563-88015FD2439C" title="Oracle Net Services provides enterprise wide connectivity solutions in distributed, heterogeneous computing environments. Oracle Net, a component of Oracle Net Services, enables a network session from a client application to a database.">Tools for Oracle Net Configuration and Administration</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035" title="Oracle Database includes several utilities to assist in data movement and analysis.">Tools for Data Movement and Analysis</a></p>
                     </li>
                  </ul>
               </div><a id="CNCPT830"></a><div class="props_rev_3"><a id="GUID-BE08A8FA-501A-418E-AD32-3E42AE762026" name="GUID-BE08A8FA-501A-418E-AD32-3E42AE762026"></a><h4 id="CNCPT-GUID-BE08A8FA-501A-418E-AD32-3E42AE762026" class="sect4">Oracle Enterprise Manager</h4>
                  <div>
                     <p><strong class="term">Oracle Enterprise Manager</strong> (Enterprise Manager) is a web-based system management tool that provides management of Oracle databases, Exadata database machine, Fusion Middleware, Oracle applications, servers, storage, and non-Oracle hardware and software.
                     </p>
                  </div><a id="CNCPT89318"></a><div class="props_rev_3"><a id="GUID-B4C3D937-347B-4E33-B5BE-48153F8C9AC6" name="GUID-B4C3D937-347B-4E33-B5BE-48153F8C9AC6"></a><h5 id="CNCPT-GUID-B4C3D937-347B-4E33-B5BE-48153F8C9AC6" class="sect5">Oracle Enterprise Manager Cloud Control</h5>
                     <div>
                        <p>Oracle Enterprise Manager Cloud Control (Cloud Control) is a web-based interface that provides the administrator with complete monitoring across the Oracle technology stack and non-Oracle components.</p>
                        <p>Sometimes a component of fast application notification (FAN) can become unavailable or experiences performance problems. In this case, Cloud Control displays the automatically generated alert so that the administrator can take the appropriate recovery action.</p>
                        <p>The components of Cloud Control include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Oracle Management Service (OMS)</p>
                              <p>The OMS feature is a set of J2EE applications that renders the interface for Cloud Control, works with all Oracle management agents to process monitoring information, and uses the Enterprise Manager repository as its persistent data store.</p>
                           </li>
                           <li>
                              <p>Oracle Management Agents</p>
                              <p>These agents are processes deployed on each monitored host to monitor all targets on the host, communicate this information to the OMS, and maintain the host and its targets.</p>
                           </li>
                           <li>
                              <p>Oracle Management Repository</p>
                              <p>The repository is a schema in an Oracle database that contains all available information about administrators, targets, and applications managed by Cloud Control.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B4C3D937-347B-4E33-B5BE-48153F8C9AC6__GUID-754DF1A4-F3CF-4469-95CB-95F530489B0E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/distributed-database-concepts.html#ADMIN12110" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> to learn how to use Cloud Control to administer a database
                                 </p>
                              </li>
                              <li>
                                 <p>Online Help for Cloud Control</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT89317"></a><div class="props_rev_3"><a id="GUID-9EB727BA-83E4-4F03-89CD-E2A22FE348A3" name="GUID-9EB727BA-83E4-4F03-89CD-E2A22FE348A3"></a><h5 id="CNCPT-GUID-9EB727BA-83E4-4F03-89CD-E2A22FE348A3" class="sect5">Oracle Enterprise Manager Database Express 12c</h5>
                     <div>
                        <p>Oracle Enterprise Manager Database Express (EM Express) is a web management product built into the Oracle database. It requires no special installation or management.</p>
                        <p>EM Express contains the key performance management and basic administration pages in Cloud Control. These pages include the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Database Home page</p>
                           </li>
                           <li>
                              <p>Real-Time SQL Monitoring</p>
                           </li>
                           <li>
                              <p>ASH Analytics</p>
                           </li>
                        </ul>
                        <p>You can access these features online through the EM Express console and offline through Active Reports technology. From an architectural perspective, EM Express has no mid-tier or middleware components, ensuring that its overhead on the database server is negligible.</p>
                        <p>Using EM Express, you can perform administrative tasks such as managing user security and managing database memory and storage. You can also view performance and status information about your database.</p>
                        <div class="infoboxnotealso" id="GUID-9EB727BA-83E4-4F03-89CD-E2A22FE348A3__GUID-00D596E0-30A0-4586-9101-FACDDB06246D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admqs/getting-started-with-database-administration.html#ADMQS031" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> to learn how to administer the database with EM Express
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT831"></a><div class="props_rev_3"><a id="GUID-6959296B-A487-4806-9BF6-564AE05C6D01" name="GUID-6959296B-A487-4806-9BF6-564AE05C6D01"></a><h4 id="CNCPT-GUID-6959296B-A487-4806-9BF6-564AE05C6D01" class="sect4">SQL*Plus</h4>
                  <div>
                     <p><strong class="term">SQL*Plus</strong> is an interactive and batch query tool included in every Oracle Database installation. 
                     </p>
                     <p>It has a command-line user interface that acts as the client when connecting to the database. SQL*Plus has its own commands and environment. It enables you to enter and execute SQL, PL/SQL, SQL*Plus and operating system commands to perform tasks such as:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Formatting, performing calculations on, storing, and printing from query results</p>
                        </li>
                        <li>
                           <p>Examining table and object definitions</p>
                        </li>
                        <li>
                           <p>Developing and running batch scripts</p>
                        </li>
                        <li>
                           <p>Administering a database</p>
                        </li>
                     </ul>
                     <p>You can use SQL*Plus to generate reports interactively, to generate reports as batch processes, and to output the results to text file, to screen, or to HTML file for browsing on the Internet. You can generate reports dynamically using the HTML output facility.</p>
                     <div class="infoboxnotealso" id="GUID-6959296B-A487-4806-9BF6-564AE05C6D01__GUID-89B8791F-95FA-4993-952E-2C522D19967A">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqpug/SQL-Plus-quick-start.html#SQPUG002" target="_blank"><span><cite>SQL*Plus User's Guide and Reference</cite></span></a> to learn more about SQL*Plus
                        </p>
                     </div>
                  </div>
               </div><a id="CNCPT832"></a><div class="props_rev_3"><a id="GUID-87ACF317-FEBC-418C-9BE6-253F2C43F482" name="GUID-87ACF317-FEBC-418C-9BE6-253F2C43F482"></a><h4 id="CNCPT-GUID-87ACF317-FEBC-418C-9BE6-253F2C43F482" class="sect4">Tools for Database Installation and Configuration</h4>
                  <div>
                     <p>Oracle provides several tools to simplify the task of installing and configuring Oracle Database software. </p>
                     <p>The following table describes supported tools.</p>
                     <div class="tblformal" id="GUID-87ACF317-FEBC-418C-9BE6-253F2C43F482__GUID-1D57FF58-A526-4E41-8640-D78FB4792FFF">
                        <p class="titleintable">Table 18-1 Tools for Database Installation and Configuration</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Tools for Database Installation and Configuration" summary="This table describes tools for database installation and configuration." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d92580e2376">Tool</th>
                                 <th align="left" valign="bottom" id="d92580e2378">Description</th>
                                 <th align="left" valign="bottom" id="d92580e2380">To Learn More</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d92580e2384" headers="d92580e2376 ">
                                    <p>Oracle Universal Installer (OUI)</p>
                                 </td>
                                 <td align="left" valign="top" headers="d92580e2384 d92580e2378 ">
                                    <p>OUI is a GUI utility that enables you to view, install, and uninstall Oracle Database software. Online Help is available to guide you through the installation.</p>
                                 </td>
                                 <td align="left" valign="top" headers="d92580e2384 d92580e2380 ">
                                    <p>Online Help to guide you through the installation</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d92580e2394" headers="d92580e2376 ">
                                    <p>Database Upgrade Assistant (DBUA)</p>
                                 </td>
                                 <td align="left" valign="top" headers="d92580e2394 d92580e2378 ">
                                    <p>DBUA interactively guides you through a database upgrade and configures the database for the new release. DBUA automates the upgrade by performing all tasks normally performed manually. DBUA makes recommendations for configuration options such as tablespaces and the <a href="glossary.html#GUID-2A8BC112-AB70-4B06-9F85-FE975861CEE0"><span class="xrefglossterm">online redo log</span></a>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d92580e2394 d92580e2380 ">
                                    <p><a href="../admqs/managing-oracle-database-software.html#ADMQS024" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a> to learn how to upgrade a database with DBUA
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d92580e2412" headers="d92580e2376 ">
                                    <p>Database Configuration Assistant (DBCA)</p>
                                 </td>
                                 <td align="left" valign="top" headers="d92580e2412 d92580e2378 ">
                                    <p>DBCA provides a graphical interface and guided workflow for creating and configuring a database. This tool enables you to create a database from Oracle-supplied templates or create your own database and templates.</p>
                                 </td>
                                 <td align="left" valign="top" headers="d92580e2412 d92580e2380 ">
                                    <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN12479" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> to learn how to create a database with DBCA
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="CNCPT64545"></a><div class="props_rev_3"><a id="GUID-74CB09E3-EEAA-4FF5-8563-88015FD2439C" name="GUID-74CB09E3-EEAA-4FF5-8563-88015FD2439C"></a><h4 id="CNCPT-GUID-74CB09E3-EEAA-4FF5-8563-88015FD2439C" class="sect4">Tools for Oracle Net Configuration and Administration</h4>
                  <div>
                     <p><span class="bold">Oracle Net Services</span> provides enterprise wide connectivity solutions in distributed, heterogeneous computing environments. Oracle Net, a component of Oracle Net Services, enables a network session from a client application to a database.
                     </p>
                     <p>You can use the following tools to configure and administer Oracle Net Services:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle Net Manager</p>
                           <p>This tool enables you to configure Oracle Net Services for an Oracle home on a local client or server host. You can use Oracle Net Manager to configure naming, naming methods, profiles, and listeners. You can start Oracle Net Manager using the Oracle Enterprise Manager Console or as an independent application.</p>
                        </li>
                        <li>
                           <p>Oracle Net Configuration Assistant</p>
                           <p>This tools runs automatically during software installation. The Assistant enables you to configure basic network components during installation, including listener names and protocol addresses, naming methods, net service names in a <code class="codeph">tnsnames.ora</code> file, and directory server usage.
                           </p>
                        </li>
                        <li>
                           <p>Listener Control Utility</p>
                           <p>The Listener Control utility enables you to configure listeners to receive client connections. You can access the utility through Enterprise Manager or as a standalone command-line application.</p>
                        </li>
                        <li>
                           <p>Oracle Connection Manager Control Utility</p>
                           <p>This command-line utility enables you to administer an <a href="glossary.html#GUID-403DE106-1DB5-4A06-ACFD-BE1E348955C8"><span class="xrefglossterm">Oracle Connection Manager</span></a>, which is a router through which a client connection request may be sent either to its next hop or directly to the database. You can use utility commands to perform basic management functions on one or more Oracle Connection Managers. Additionally, you can view and change parameter settings.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-74CB09E3-EEAA-4FF5-8563-88015FD2439C__GUID-E490A01F-29D0-4F94-8646-6A48ECCA3D0E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p> <span class="q">"<a href="application-and-networking-architecture.html#GUID-D6E2465E-E8E6-4B95-95D3-B9581E264ED1" title="The Oracle Net Listener (the listener) is a server-side process that listens for incoming client connection requests and manages traffic to the database. When a database instance starts, and at various times during its life, the instance contacts a listener and establishes a communication pathway to this instance.">The Oracle Net Listener</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="application-and-networking-architecture.html#GUID-136C7637-89B5-4C5A-B186-E06F86CE2359" title="Oracle Net Services is a suite of networking components that provides enterprise-wide connectivity solutions in distributed, heterogeneous computing environments.">Overview of Oracle Net Services Architecture</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../netag/managing-oracle-net-services.html#NETAG005" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> to learn more about Oracle Net Services tools
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT1276"></a><div class="props_rev_3"><a id="GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035" name="GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035"></a><h4 id="CNCPT-GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035" class="sect4">Tools for Data Movement and Analysis</h4>
                  <div>
                     <p>Oracle Database includes several utilities to assist in data movement and analysis.</p>
                     <p>For example, you can use database utilities to:</p>
                     <div class="tblformal" id="GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035__GUID-3A5E0DE5-D063-463A-85D6-47C8816DD674">
                        <p class="titleintable">Table 18-2 Data Movement and Analysis Tasks</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Data Movement and Analysis Tasks" summary="This table describes possible data movement and analysis tasks." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d92580e3042">Task</th>
                                 <th align="left" valign="bottom" width="20%" id="d92580e3044">To Learn More</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d92580e3048" headers="d92580e3042 ">
                                    <p>Load data into Oracle Database tables from operating system files</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d92580e3048 d92580e3044 ">
                                    <p><span class="q">"<a href="concepts-for-database-administrators.html#GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670" title="SQL*Loader loads data from external files, called data files (not to be confused with the internal database data files), into database tables. It has a powerful data parsing engine that puts little limitation on the format of the data in the data file.">SQL*Loader</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d92580e3063" headers="d92580e3042 ">
                                    <p>Move data and metadata from one database to another database</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d92580e3063 d92580e3044 ">
                                    <p><span class="q">"<a href="concepts-for-database-administrators.html#GUID-DCDD0FBF-0AD2-45E1-B723-21CC72ADDCD6" title="Oracle Data Pump enables high-speed movement of data and metadata from one database to another.">Oracle Data Pump Export and Import</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d92580e3075" headers="d92580e3042 ">
                                    <p>Query redo log files through a SQL interface</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d92580e3075 d92580e3044 ">
                                    <p><span class="q">"<a href="concepts-for-database-administrators.html#GUID-D2E36A56-0571-4857-8D41-BBCC833403E5" title="Oracle LogMiner enables you to query redo log files through a SQL interface.">Oracle LogMiner</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d92580e3087" headers="d92580e3042 ">
                                    <p>Manage Oracle Database data</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d92580e3087 d92580e3044 ">
                                    <p><span class="q">"<a href="concepts-for-database-administrators.html#GUID-3F5B1954-D81A-43A1-8BB8-E7ECBA8FAC40" title="ADRCI is a command-line utility that enables you to investigate problems, view health check reports, and package and upload first-failure data to Oracle Support.">ADR Command Interpreter (ADRCI)</a>"</span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Other tasks include performing physical data structure integrity checks on an offline database or data file with DBVERIFY, or changing the database identifier (DBID) or database name for an operational database using the DBNEWID utility.</p>
                     <div class="infoboxnote" id="GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035__GUID-1D404AC0-897A-443A-8194-427D08C6D481">
                        <p class="notep1">Note:</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-70A70ABD-02A4-41F8-9DDD-16B7F6937035__GUID-2AD311BB-D9E1-4A8E-8993-05D711BC9EFF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="concepts-for-database-administrators.html#GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0" title="Backup and recovery is the set of concepts, procedures, and strategies involved in protecting the database against data loss caused by media failure or users errors. In general, the purpose of a backup and recovery strategy is to protect the database against data loss and reconstruct lost data.">Backup and Recovery</a>"</span> to learn about tools related to backup and recovery
                              </p>
                           </li>
                           <li>
                              <p><a href="../sutil/oracle-dbverify-utility.html#SUTIL013" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about DBVERIFY and DBNEWID
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT89399"></a><a id="CNCPT1282"></a><div class="props_rev_3"><a id="GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670" name="GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670"></a><h5 id="CNCPT-GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670" class="sect5">SQL*Loader</h5>
                     <div>
                        <p>SQL*Loader loads data from external files, called <span class="italic">data files</span> (not to be confused with the internal database data files), into database tables. It has a powerful data parsing engine that puts little limitation on the format of the data in the data file. 
                        </p>
                        <p>You can use SQL*Loader to do the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Load data from multiple data files into multiple tables</p>
                              <p>You store the data to be loaded in SQL*Loader data files. The SQL*Loader control file is a text file that contains <a href="glossary.html#GUID-64F19D78-A73F-44A5-AA2E-60EBC800CB22"><span class="xrefglossterm">DDL</span></a> instructions that SQL*Loader uses to determine where to find the data, how to parse and interpret it, where to insert it, and more.
                              </p>
                              <div class="infoboxnote" id="GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670__GUID-12D1313E-1118-425E-AB8D-5CEC8ACFA7F8">
                                 <p class="notep1">Note:</p>
                                 <p>The SQL*Loader data files and control file are unrelated to the Oracle Database data files and control file.</p>
                              </div>
                           </li>
                           <li>
                              <p>Control various aspects of the load operation</p>
                              <p>For example, you can selectively load data, specify the data character set, manipulate the data with SQL functions, generate unique sequential key values in specified columns, and so on. You can also generate sophisticated error reports.</p>
                           </li>
                           <li>
                              <p>Use conventional path, direct path, or external table loads</p>
                              <p>A conventional path load executes SQL <code class="codeph">INSERT</code> statements to populate tables. In contrast, a <a href="glossary.html#GUID-73D6FDFE-E38D-49F2-A5A5-B6BDB2FD297C"><span class="xrefglossterm">direct path INSERT</span></a> eliminates much of the database overhead by formatting data blocks and writing them directly to the data files. Direct writes operate on blocks above the <a href="glossary.html#GUID-F3F5ACB2-94C8-483F-B427-1981836D0609"><span class="xrefglossterm">high water mark (HWM)</span></a> and write directly to disk, bypassing the <a href="glossary.html#GUID-7913177D-8183-4CC5-8F59-816FE66DA363"><span class="xrefglossterm">database buffer cache</span></a>. Direct reads read directly from disk into the <a href="glossary.html#GUID-19927E75-4983-4D59-A03D-C630E9908897"><span class="xrefglossterm">PGA</span></a>, again bypassing the buffer cache.
                              </p>
                              <p>An external table load creates an <a href="glossary.html#GUID-1B18B978-29DD-4961-BD39-86838CB5F7D0"><span class="xrefglossterm">external table</span></a> for data that is contained in a data file. The load executes <code class="codeph">INSERT</code> statements to insert the data from the data file into the target table.
                              </p>
                           </li>
                        </ul>
                        <p>A typical SQL*Loader session takes as input a SQL*Loader control file and one or more data files. The output is an Oracle database, a log file, a bad file, and potentially, a discard file. The following figure illustrates the flow of a typical SQL*Loader session.</p>
                        <div class="figure" id="GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670__BGBGJDHI">
                           <p class="titleinfigure">Figure 18-1 SQL*Loader Session</p><img src="img/cncpt271.gif" alt="Description of Figure 18-1 follows" title="Description of Figure 18-1 follows" longdesc="img_text/cncpt271.html"><br><a href="img_text/cncpt271.html">Description of "Figure 18-1 SQL*Loader Session"</a></div>
                        <!-- class="figure" -->
                        <p>You can also use SQL*Loader express mode, which is activated when you specify the <code class="codeph">table</code> parameter in the SQL*Loader command, as in the following example:
                        </p><pre class="pre codeblock"><code>% sqlldr hr table=employees
</code></pre><p>No control file is permitted, which makes SQL*Loader easier to use. Instead of parsing a control file, SQL*Loader uses the table column definitions to determine the input data types. SQL*Loader makes several default assumptions, including the character set, field delimiters, and the names of data, log, and bad files. You can override many of the defaults with command-line parameters.</p>
                        <div class="infoboxnotealso" id="GUID-A6BF29E2-70E6-46F8-8BF9-E321113A3670__GUID-25B5624B-3EAE-47D2-993F-9858FEC3DED3">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="tables-and-table-clusters.html#GUID-97FC9DFF-A6CF-46CD-9F6F-D88A37C0E79C" title="An external table accesses data in external sources as if this data were in a table in the database.">Overview of External Tables</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="concepts-for-database-developers.html#GUID-57374356-61C4-45B1-8A05-3353FD034202" title="A key component of globalization support is a character set, which is an encoding scheme used to display characters on a computer screen.">Character Sets</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../sutil/oracle-sql-loader-concepts.html#SUTIL003" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about SQL*Loader
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT89113"></a><a id="CNCPT1277"></a><div class="props_rev_3"><a id="GUID-DCDD0FBF-0AD2-45E1-B723-21CC72ADDCD6" name="GUID-DCDD0FBF-0AD2-45E1-B723-21CC72ADDCD6"></a><h5 id="CNCPT-GUID-DCDD0FBF-0AD2-45E1-B723-21CC72ADDCD6" class="sect5">Oracle Data Pump Export and Import</h5>
                     <div>
                        <p>Oracle Data Pump enables high-speed movement of data and metadata from one database to another.</p>
                        <p>This technology is the basis for the following Oracle Database data movement utilities: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Data Pump Export (Export)</p>
                              <p>Export is a utility for unloading data and metadata into a set of operating system files called a <span class="italic">dump file set</span>. The dump file set is made up of one or more binary files that contain table data, database object metadata, and control information.
                              </p>
                           </li>
                           <li>
                              <p>Data Pump Import (Import)</p>
                              <p>Import is a utility for loading an export dump file set into a database. You can also use Import to load a destination database directly from a source database with no intervening files, which allows export and import operations to run concurrently, minimizing total elapsed time.</p>
                           </li>
                        </ul>
                        <p>Oracle Data Pump is made up of the following distinct parts:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The command-line clients <code class="codeph">expdp</code> and <code class="codeph">impdp</code></p>
                              <p>These clients make calls to the <code class="codeph">DBMS_DATAPUMP</code> package to perform Oracle Data Pump operations.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBMS_DATAPUMP</code> PL/SQL package, also known as the Data Pump API
                              </p>
                              <p>This API provides high-speed import and export functionality.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBMS_METADATA</code> PL/SQL package, also known as the <span class="bold">Metadata API</span></p>
                              <p>All processes that load and unload metadata use this API, which stores object definitions in XML.</p>
                           </li>
                        </ul>
                        <p>The following figure shows how Oracle Data Pump integrates with SQL*Loader and external tables. As shown, SQL*Loader is integrated with the External Table API and the Data Pump API to load data into external tables. Clients such as Oracle Enterprise Manager Cloud Control (Cloud Control) and transportable tablespaces can use the Oracle Data Pump infrastructure.</p>
                        <div class="figure" id="GUID-DCDD0FBF-0AD2-45E1-B723-21CC72ADDCD6__CHDIBCJD">
                           <p class="titleinfigure">Figure 18-2 Oracle Data Pump Architecture</p><img src="img/cncpt261.png" alt="Description of Figure 18-2 follows" title="Description of Figure 18-2 follows" longdesc="img_text/cncpt261.html"><br><a href="img_text/cncpt261.html">Description of "Figure 18-2 Oracle Data Pump Architecture"</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnotealso" id="GUID-DCDD0FBF-0AD2-45E1-B723-21CC72ADDCD6__GUID-432A312F-1E2F-4047-8502-D65FDA4C9410">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="tables-and-table-clusters.html#GUID-97FC9DFF-A6CF-46CD-9F6F-D88A37C0E79C" title="An external table accesses data in external sources as if this data were in a table in the database.">Overview of External Tables</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="server-side-programming.html#GUID-87FA8137-A449-4542-8869-441C63810C63" title="A PL/SQL package is a group of related subprograms, along with the cursors and variables they use, stored together in the database for continued use as a unit. Packaged subprograms can be called explicitly by applications or users.">PL/SQL Packages</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for an overview of Oracle Data Pump
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_DATAPUMP.html#ARPLS356" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for a description of <code class="codeph">DBMS_DATAPUMP</code> and <code class="codeph">DBMS_METADATA</code></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT1284"></a><div class="props_rev_3"><a id="GUID-D2E36A56-0571-4857-8D41-BBCC833403E5" name="GUID-D2E36A56-0571-4857-8D41-BBCC833403E5"></a><h5 id="CNCPT-GUID-D2E36A56-0571-4857-8D41-BBCC833403E5" class="sect5">Oracle LogMiner</h5>
                     <div>
                        <p>Oracle LogMiner enables you to query redo log files through a SQL interface. </p>
                        <p>Potential uses for data contained in redo log files include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Pinpointing when a logical corruption to a database, such as errors made at the application level, may have begun</p>
                           </li>
                           <li>
                              <p>Detecting user error</p>
                           </li>
                           <li>
                              <p>Determining what actions you would have to take to perform fine-grained recovery at the transaction level</p>
                           </li>
                           <li>
                              <p>Using trend analysis to determine which tables get the most updates and inserts</p>
                           </li>
                           <li>
                              <p>Analyzing system behavior and auditing database use through the LogMiner comprehensive relational interface to redo log files</p>
                           </li>
                        </ul>
                        <p>LogMiner is accessible through a command-line interface or through the Oracle LogMiner Viewer GUI, which is a part of Enterprise Manager.</p>
                        <div class="infoboxnotealso" id="GUID-D2E36A56-0571-4857-8D41-BBCC833403E5__GUID-81976897-D9C5-42AB-84C7-2CA3097F3E3C">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sutil/oracle-logminer-utility.html#SUTIL1553" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn more about LogMiner
                           </p>
                        </div>
                     </div>
                  </div><a id="CNCPT1287"></a><div class="props_rev_3"><a id="GUID-3F5B1954-D81A-43A1-8BB8-E7ECBA8FAC40" name="GUID-3F5B1954-D81A-43A1-8BB8-E7ECBA8FAC40"></a><h5 id="CNCPT-GUID-3F5B1954-D81A-43A1-8BB8-E7ECBA8FAC40" class="sect5">ADR Command Interpreter (ADRCI)</h5>
                     <div>
                        <p><span class="bold">ADRCI</span> is a command-line utility that enables you to investigate problems, view health check reports, and package and upload first-failure data to Oracle Support.
                        </p>
                        <p>You can also use the utility to view the names of the trace files in the <a href="glossary.html#GUID-C46C2565-A02E-4512-8E47-CB7CCB25425D"><span class="xrefglossterm">Automatic Diagnostic Repository (ADR)</span></a> and to view the <a href="glossary.html#GUID-ACC7727F-41AE-47B1-AADB-2585EE828792"><span class="xrefglossterm">alert log</span></a>. ADRCI has a rich command set that you can use interactively or in scripts.
                        </p>
                        <div class="infoboxnotealso" id="GUID-3F5B1954-D81A-43A1-8BB8-E7ECBA8FAC40__GUID-0CD2AF0D-853E-4715-94D9-BA8F930AB3C9">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="oracle-database-instance.html#GUID-8E4BC033-4704-4FF5-A459-0E1EBF2D35B8" title="Automatic Diagnostic Repository (ADR) is a file-based repository that stores database diagnostic data such as trace files, the alert log, DDL log, and Health Monitor reports.">Automatic Diagnostic Repository</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> and <a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11257" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for more information on ADR and ADRCI
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT834"></a><div class="props_rev_3"><a id="GUID-C12266D6-81D4-4637-83EC-A8D7E6430A3B" name="GUID-C12266D6-81D4-4637-83EC-A8D7E6430A3B"></a><h3 id="CNCPT-GUID-C12266D6-81D4-4637-83EC-A8D7E6430A3B" class="sect3">Topics for Database Administrators</h3>
               <div>
                  <p>This section covers topics that are most essential to DBAs and that have not been discussed elsewhere in the manual.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0" title="Backup and recovery is the set of concepts, procedures, and strategies involved in protecting the database against data loss caused by media failure or users errors. In general, the purpose of a backup and recovery strategy is to protect the database against data loss and reconstruct lost data.">Backup and Recovery</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5" title="Memory management involves maintaining optimal sizes for the Oracle instance memory structures as demands on the database change. Initialization parameter settings determine how SGA and instance PGA memory is managed.">Memory Management</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-EB2AB7CA-8F3A-4A2B-AA0A-8E9D138D8B75" title="Oracle Database provides tools to assist you with managing resources, and with scheduling tasks to reduce the impact on users.">Resource Management and Task Scheduling</a></p>
                     </li>
                     <li>
                        <p><a href="concepts-for-database-administrators.html#GUID-045B9963-F53D-427C-87B7-04858B22D4D8" title="As a DBA, you are responsible for the performance of your Oracle database. Typically, performance problems result from unacceptable response time, which is the time to complete a specified workload, or throughput, which is the amount of work that can be completed in a specified time.">Performance and Tuning</a></p>
                     </li>
                  </ul>
               </div><a id="CNCPT031"></a><div class="props_rev_3"><a id="GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0" name="GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0"></a><h4 id="CNCPT-GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0" class="sect4">Backup and Recovery</h4>
                  <div>
                     <p>Backup and recovery is the set of concepts, procedures, and strategies involved in protecting the database against data loss caused by media failure or users errors. In general, the purpose of a backup and recovery strategy is to protect the database against data loss and reconstruct lost data.</p>
                     <p>A <a href="glossary.html#GUID-3E8FA828-167D-4C7F-A7A3-36A80F34546C"><span class="xrefglossterm">backup</span></a> is a copy of data. A backup can include crucial parts of the database such as data files, the <a href="glossary.html#GUID-D068D7A7-ECF5-49F2-A055-B6F668E96D0C"><span class="xrefglossterm">server parameter file</span></a>, and control file. A sample backup and recovery scenario is a failed disk drive that causes the loss of a data file. If a backup of the lost file exists, then you can restore and recover it. The operations involved in restoring data to its state before the loss is known as <a href="glossary.html#GUID-938A3E7D-CC65-496C-9DB3-3CFC45AFA8DD"><span class="xrefglossterm">media recovery</span></a>.
                     </p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="concepts-for-database-administrators.html#GUID-71AC5772-3143-40C4-86EC-93367FB85B2A" title="You can use either Recovery Manager or user-managed techniques to back up, restore, and recover an Oracle database.">Backup and Recovery Techniques</a></p>
                        </li>
                        <li>
                           <p><a href="concepts-for-database-administrators.html#GUID-7E046FF6-AD1E-4A05-B55F-5049EBCD6427" title="RMAN and Oracle Secure Backup are accessible both from the command line and from Enterprise Manager Cloud Control (Cloud Control).">Recovery Manager Architecture</a></p>
                        </li>
                        <li>
                           <p><a href="concepts-for-database-administrators.html#GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6" title="Database backups can be either physical or logical.">Database Backups</a></p>
                        </li>
                        <li>
                           <p><a href="concepts-for-database-administrators.html#GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88" title="While several problems can halt the normal operation of a database or affect I/O operations, only some problems require DBA intervention and data repair.">Data Repair</a></p>
                        </li>
                        <li>
                           <p><a href="concepts-for-database-administrators.html#GUID-89C1FA97-474D-412E-905E-59D08E26BBBF" title="The cloud-scale Zero Data Loss Recovery Appliance, commonly known as Recovery Appliance, is an Engineered System that dramatically reduces data loss and backup overhead for all Oracle databases in the enterprise.">Zero Data Loss Recovery Appliance</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0__GUID-E0B0A8BD-F74A-453F-934C-8043C7240856">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for backup and recovery concepts and tasks
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=NTQRF285" target="_blank"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> to learn how to use Volume Shadow Copy Service (VSS) applications to back up and recover databases on Microsoft Windows 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT835"></a><div class="props_rev_3"><a id="GUID-71AC5772-3143-40C4-86EC-93367FB85B2A" name="GUID-71AC5772-3143-40C4-86EC-93367FB85B2A"></a><h5 id="CNCPT-GUID-71AC5772-3143-40C4-86EC-93367FB85B2A" class="sect5">Backup and Recovery Techniques</h5>
                     <div>
                        <p>You can use either Recovery Manager or user-managed techniques to back up, restore, and recover an Oracle database.</p>
                        <p>The principal differences between the two approaches are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="glossary.html#GUID-C93A3B47-4AE8-4AB7-A370-C8395A7B42AA"><span class="xrefglossterm">Recovery Manager (RMAN)</span></a></p>
                              <p>RMAN is an Oracle Database utility that integrates with an Oracle database to perform backup and recovery activities, including maintaining a repository of historical backup metadata in the control file of every database that it backs up. RMAN can also maintain a centralized backup repository called a <a href="glossary.html#GUID-2366988A-C3CA-4B75-B59F-69AC00678629"><span class="xrefglossterm">recovery catalog</span></a> in a different database. RMAN is an Oracle Database feature and does not require separate installation.
                              </p>
                              <p>RMAN is integrated with Oracle Secure Backup, which provides reliable, centralized tape backup management, protecting file system data and Oracle Database files. The Oracle Secure Backup SBT interface enables you to use RMAN to back up and restore database files to and from tape and internet-based Web Services such as Amazon S3. Oracle Secure Backup supports almost every tape drive and tape library in SAN and SCSI environments.</p>
                           </li>
                           <li>
                              <p>User-Managed techniques</p>
                              <p>As an alternative to RMAN, you can use operating system commands such as the Linux <code class="codeph">dd</code> for backing up and restoring files and the SQL*Plus <code class="codeph">RECOVER</code> command for media recovery. User-managed backup and recovery is fully supported by Oracle, although RMAN is recommended because it is integrated with Oracle Database and simplifies administration.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-71AC5772-3143-40C4-86EC-93367FB85B2A__GUID-D8159317-624A-466E-94AC-962EFCB3B650">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../bradv/introduction-backup-recovery.html#BRADV89341" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> for an overview of backup and recovery solutions
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=OBADM-GUID-8823172F-5367-4255-A209-83975273C3B3" target="_blank"><span><cite>Oracle Secure Backup Administrators Guide</cite></span></a> for an overview of Oracle Secure Backup
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT89383"></a><a id="CNCPT89382"></a><div class="props_rev_3"><a id="GUID-7E046FF6-AD1E-4A05-B55F-5049EBCD6427" name="GUID-7E046FF6-AD1E-4A05-B55F-5049EBCD6427"></a><h5 id="CNCPT-GUID-7E046FF6-AD1E-4A05-B55F-5049EBCD6427" class="sect5">Recovery Manager Architecture</h5>
                     <div>
                        <p>RMAN and Oracle Secure Backup are accessible both from the command line and from Enterprise Manager Cloud Control (Cloud Control).</p>
                        <p>Cloud Control provides a graphical front end and scheduling facility for RMAN. You enter job parameters, and then specify a job schedule. Cloud Control runs RMAN at the designated time or designated repeat interval to conduct the backup and recovery operations. Cloud Control provides access to RMAN through a set of wizards. These wizards lead you through a variety of recovery procedures based on an analysis of your database, your available backups, and your data recovery objectives.</p>
                        <p>By using Cloud Control, you can perform the simpler restore and recovery scenarios outlined in this documentation. You can also use more sophisticated restore and recovery techniques such as point-in-time recovery and Oracle Flashback operations, which allow for efficient repair of media failures and user errors. Using Cloud Control is often simpler than the RMAN command-line client.</p>
                        <p>The following graphic shows a sample RMAN architecture. The RMAN client, accessible through Cloud Control, uses server sessions on a target database to back up data to disk or tape. RMAN can update an external recovery catalog with backup metadata.</p>
                        <div class="figure" id="GUID-7E046FF6-AD1E-4A05-B55F-5049EBCD6427__BGBHFEDE">
                           <p class="titleinfigure">Figure 18-3 RMAN Architecture</p><img src="img/cncpt318.gif" alt="Description of Figure 18-3 follows" title="Description of Figure 18-3 follows" longdesc="img_text/cncpt318.html"><br><a href="img_text/cncpt318.html">Description of "Figure 18-3 RMAN Architecture"</a></div>
                        <!-- class="figure" -->
                        <p>Whichever backup and recovery technique you use, Oracle recommends that you configure a <a href="glossary.html#GUID-0F4B1B3D-4831-42FA-A53B-E34BA9D1BBB0"><span class="xrefglossterm">fast recovery area</span></a>. This database-managed directory, file system, or <a href="glossary.html#GUID-85D5EEA3-5127-4F08-AC1C-A2C660F21D92"><span class="xrefglossterm">Oracle ASM disk group</span></a> centralizes backup and recovery files, including active control files, online and archived redo log files, and backups. Oracle Database recovery components interact with the fast recovery area to ensure database recoverability.
                        </p>
                        <div class="infoboxnotealso" id="GUID-7E046FF6-AD1E-4A05-B55F-5049EBCD6427__GUID-958200FC-496B-476D-882D-D5E8BCC71FDE">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admqs/performing-backup-and-recovery.html#ADMQS009" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a> to learn how to perform backup and recovery with Recovery Manager
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11103" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for information about how to set up and administer the fast recovery area
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT1424"></a><div class="props_rev_3"><a id="GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6" name="GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6"></a><h5 id="CNCPT-GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6" class="sect5">Database Backups</h5>
                     <div>
                        <p>Database backups can be either physical or logical.</p>
                        <p>Physical backups, which are the primary concern in a backup and recovery strategy, are copies of physical database files. You can make physical backups with RMAN or operating system utilities.</p>
                        <p>In contrast, logical backups contain tables, stored procedures, and other logical data. You can extract logical data with an Oracle Database utility such as Data Pump Export and store it in a binary file. Logical backups can supplement physical backups.</p>
                        <p>Physical backups have large granularity and limited transportability, but are very fast. Logical backups have fine granularity and complete transportability, but are slower than physical backups.</p>
                        <div class="infoboxnotealso" id="GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6__GUID-D1DC8B9A-166F-4446-97C0-0A5EA802A622">
                           <p class="notep1">See Also:</p>
                           <p><a href="../bradv/introduction-backup-recovery.html#BRADV89335" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> to learn about physical and logical backups
                           </p>
                        </div>
                     </div><a id="CNCPT1426"></a><div class="props_rev_3"><a id="GUID-B90A67DD-FF6C-4539-B530-B944E964D789" name="GUID-B90A67DD-FF6C-4539-B530-B944E964D789"></a><h6 id="CNCPT-GUID-B90A67DD-FF6C-4539-B530-B944E964D789" class="sect6">Whole and Partial Database Backups</h6>
                        <div>
                           <p>A <span class="bold">whole database backup</span> is a backup of every data file in the database, plus the control file. Whole database backups are the most common type of backup.
                           </p>
                           <p>A partial database backup includes a subset of the database: individual tablespaces or data files. A tablespace backup is a backup of all the data files in a tablespace or in multiple tablespaces. Tablespace backups, whether consistent or inconsistent, are valid only if the database is operating in <code class="codeph">ARCHIVELOG</code> mode because redo is required to make the restored tablespace consistent with the rest of the database.
                           </p>
                        </div>
                     </div><a id="CNCPT1427"></a><div class="props_rev_3"><a id="GUID-46F3DC5D-B20D-45DC-9381-D2EA084290C7" name="GUID-46F3DC5D-B20D-45DC-9381-D2EA084290C7"></a><h6 id="CNCPT-GUID-46F3DC5D-B20D-45DC-9381-D2EA084290C7" class="sect6">Consistent and Inconsistent Backups</h6>
                        <div>
                           <p>A whole database backup is either consistent or inconsistent.</p>
                           <p>In a <a href="glossary.html#GUID-9758D2DA-4550-4F4F-8965-12A8AE13FFCD"><span class="xrefglossterm">consistent backup</span></a>, all read/write data files and control files have the same <a href="glossary.html#GUID-95DBDA37-4C57-444F-B660-D52B4A99D919"><span class="xrefglossterm">checkpoint</span></a> <a href="glossary.html#GUID-4B14A746-A8B3-4123-A02A-3FC1C293042C"><span class="xrefglossterm">SCN</span></a>, guaranteeing that these files contain all changes up to this SCN. This type of backup does not require recovery after it is restored. 
                           </p>
                           <p>A consistent backup of the database is only possible after a consistent shutdown and is the only valid backup option for a database operating in <code class="codeph">NOARCHIVELOG</code> mode. Other backup options require media recovery for consistency, which is not possible without applying archived redo log files.
                           </p>
                           <div class="infoboxnote" id="GUID-46F3DC5D-B20D-45DC-9381-D2EA084290C7__GUID-FBC6C8F8-ABDA-4E32-8372-E71D286438C2">
                              <p class="notep1">Note:</p>
                              <p>If you restore a consistent whole database backup without applying redo, then you lose all transactions made after the backup.</p>
                           </div>
                           <p>In an <a href="glossary.html#GUID-AE098906-D0EA-4E45-B6E6-C5794E460114"><span class="xrefglossterm">inconsistent backup</span></a>, read/write data files and control files are not guaranteed to have the same checkpoint SCN, so changes can be missing. All online backups are necessarily inconsistent because data files can be modified while backups occur.
                           </p>
                           <p>Inconsistent backups offer superior availability because you do not have to shut down the database to make backups that fully protect the database. If the database runs in <code class="codeph">ARCHIVELOG</code> mode, and if you back up the archived redo logs and data files, then inconsistent backups can be the foundation for a sound backup and recovery strategy.
                           </p>
                           <div class="infoboxnotealso" id="GUID-46F3DC5D-B20D-45DC-9381-D2EA084290C7__GUID-9B63435B-9EC0-4841-A487-C10B0DFCA80E">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> <span class="q">"<a href="oracle-database-instance.html#GUID-CD115A39-2FAE-4B94-BB3E-59818AD42803" title="A database administrator with SYSDBA or SYSOPER privileges can shut down the database using the SQL*Plus SHUTDOWN command or Enterprise Manager. The SHUTDOWN command has options that determine shutdown behavior.">Shutdown Modes</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=BRADV89479" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> to learn more about inconsistent backups
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="CNCPT1430"></a><div class="props_rev_3"><a id="GUID-007F0035-B75A-4E9F-B547-60F73AC22901" name="GUID-007F0035-B75A-4E9F-B547-60F73AC22901"></a><h6 id="CNCPT-GUID-007F0035-B75A-4E9F-B547-60F73AC22901" class="sect6">Backup Sets and Image Copies</h6>
                        <div>
                           <p>The RMAN <code class="codeph">BACKUP</code> command generates either image copies or backup sets.
                           </p>
                           <p>The backup types differ as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Image copy</p>
                                 <p>An <a href="glossary.html#GUID-5F0E0899-96CD-40CC-872A-B07919D519D4"><span class="xrefglossterm">image copy</span></a> is a bit-for-bit, on-disk duplicate of a data file, control file, or archived redo log file. You can create image copies of physical files with operating system utilities or RMAN and use either tool to restore them.
                                 </p>
                                 <div class="infoboxnote" id="GUID-007F0035-B75A-4E9F-B547-60F73AC22901__GUID-8F5C8AF6-2DCE-40C9-A691-28DAEA34FCC6">
                                    <p class="notep1">Note:</p>
                                    <p>Unlike operating system copies, RMAN validates the blocks in the file and records the image copy in the RMAN repository.</p>
                                 </div>
                              </li>
                              <li>
                                 <p>Backup set</p>
                                 <p>RMAN can also create backups in a proprietary format called a <a href="glossary.html#GUID-D2FB70E0-E30F-403F-9742-376C6576DAC3"><span class="xrefglossterm">backup set</span></a>. A backup set contains the data from one or more data files, archived redo log files, or control files or server parameter file. The smallest unit of a backup set is a binary file called a <a href="glossary.html#GUID-E12020FC-321F-4D7E-A821-487EE833143E"><span class="xrefglossterm">backup piece</span></a>. Backup sets are the only form in which RMAN can write backups to sequential devices such as tape drives.
                                 </p>
                                 <p>Backup sets enable tape devices to stream continuously. For example, RMAN can mingle blocks from slow, medium, and fast disks into one backup set so that the tape device has a constant input of blocks. Image copies are useful for disk because you can update them incrementally, and also recover them in place.</p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-007F0035-B75A-4E9F-B547-60F73AC22901__GUID-D411DB8C-3179-46A0-8D88-10BDB2DBBE6F">
                              <p class="notep1">See Also:</p>
                              <p><a href="../bradv/rman-backup-concepts.html#BRADV002" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn more about backup sets and image copies
                              </p>
                           </div>
                        </div>
                     </div>
                  </div><a id="CNCPT1437"></a><div class="props_rev_3"><a id="GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88" name="GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88"></a><h5 id="CNCPT-GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88" class="sect5">Data Repair</h5>
                     <div>
                        <p>While several problems can halt the normal operation of a database or affect I/O operations, only some problems require DBA intervention and data repair.</p>
                        <p>Data repair is typically required in the following cases:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Media failures</p>
                              <p>A media failure occurs when a problem external to the database prevents it from reading from or writing to a file. Typical media failures include physical failures, such as disk head crashes, and the overwriting, deletion, or corruption of a database file. Media failures are less common than user or application errors, but a sound backup and recovery strategy must prepare for them.</p>
                           </li>
                           <li>
                              <p>User errors</p>
                              <p>A user or application may make unwanted changes to your database, such as erroneous updates, deleting the contents of a table, or dropping database objects. A good backup and recovery strategy enables you to return your database to the desired state, with the minimum possible impact upon database availability, and minimal DBA effort.</p>
                           </li>
                        </ul>
                        <p>Typically, you have multiple ways to solve the preceding problems. This section summarizes some of these solutions.</p>
                        <div class="infoboxnotealso" id="GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88__GUID-9486C87A-3144-4849-8055-ACFA06194F3C">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="topics-for-database-administrators-and-developers.html#GUID-088B804A-DF09-475F-B168-961E16708DDA" title="A human error outage occurs when unintentional or malicious actions are committed that cause data in the database to become logically corrupt or unusable. The service level impact of a human error outage can vary significantly depending on the amount and critical nature of the affected data.">Human Errors</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../bradv/rman-data-repair-concepts.html#BRADV89703" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> for data repair concepts
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="CNCPT1439"></a><div class="props_rev_3"><a id="GUID-7E5A9B5A-0C0A-4DBB-8B30-D6AFC5F2FF64" name="GUID-7E5A9B5A-0C0A-4DBB-8B30-D6AFC5F2FF64"></a><h6 id="CNCPT-GUID-7E5A9B5A-0C0A-4DBB-8B30-D6AFC5F2FF64" class="sect6">Oracle Flashback Technology</h6>
                        <div>
                           <p>Oracle Database provides a group of features known as <span class="bold">Oracle Flashback Technology</span> that support viewing past states of data, and winding data back and forth in time, without needing to restore backups. 
                           </p>
                           <p>Depending on the database changes, flashback features can often reverse unwanted changes more quickly and with less impact on availability than media recovery. The following flashback features are most relevant for backup and recovery:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Flashback Database</p>
                                 <p>In a non-CDB, you can rewind an Oracle database to a previous time to correct problems caused by logical data corruptions or user errors. Flashback Database can also be used to complement Data Guard, Data Recovery Advisor, and for synchronizing clone databases. Flashback Database does not restore or perform media recovery on files, so you cannot use it to correct media failures such as disk crashes.</p>
                              </li>
                              <li>
                                 <p>Flashback PDB</p>
                                 <p>In a multitenant container database (CDB), you can rewind a pluggable database (PDB) without affecting other PDBs. You can also create a <a href="glossary.html#GUID-D756A71D-5645-45AD-AC2E-5925E908F73C"><span class="xrefglossterm">PDB restore point</span></a>, and rewind the PDB to this restore point without affecting other PDB.
                                 </p>
                              </li>
                              <li>
                                 <p>Flashback Table </p>
                                 <p>You can rewind tables to a specified point in time with a single SQL statement. You can restore table data along with associated indexes, triggers, and constraints, while the database is online, undoing changes to only the specified tables. Flashback Table does not address physical corruption such as bad disks or data segment and index inconsistencies.</p>
                              </li>
                              <li>
                                 <p>Flashback Drop </p>
                                 <p>You can reverse the effects of a <code class="codeph">DROP TABLE</code> operation. Flashback Drop is substantially faster than recovery mechanisms such as point-in-time recovery and does not lead to loss of recent transactions or downtime.
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-7E5A9B5A-0C0A-4DBB-8B30-D6AFC5F2FF64__GUID-9F1DA378-98E8-445F-BF02-8A5C62FEF24C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../bradv/introduction-backup-recovery.html#BRADV89342" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> to learn more about flashback features
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/FLASHBACK-DATABASE.html#SQLRF01801" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> and <a href="../rcmrf/FLASHBACK-DATABASE.html#RCMRF194" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn about the <code class="codeph">FLASHBACK DATABASE</code> statement
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="CNCPT1438"></a><div class="props_rev_3"><a id="GUID-2D8A4B90-A204-41F3-BE26-974FBD7C8DFA" name="GUID-2D8A4B90-A204-41F3-BE26-974FBD7C8DFA"></a><h6 id="CNCPT-GUID-2D8A4B90-A204-41F3-BE26-974FBD7C8DFA" class="sect6">Data Recovery Advisor</h6>
                        <div>
                           <p>Use Data Recovery Advisor to diagnose data failures, present best repair options for your environment, and carry out and verify repairs.</p>
                           <p>The <a href="glossary.html#GUID-0B1CA606-6DB8-434B-898D-B449AD9993CE"><span class="xrefglossterm">Data Recovery Advisor</span></a> tool automatically diagnoses persistent data failures, presents appropriate repair options, and executes repairs at the user's request. By providing a centralized tool for automated data repair, Data Recovery Advisor improves the manageability and reliability of an Oracle database and thus helps reduce recovery time.
                           </p>
                           <p>The database includes a Health Monitor framework for running checks. A <span class="italic">checker</span> is an operation or procedure registered with Health Monitor to assess the health of the database or its components. The health assessment is known as a <span class="italic">data integrity check</span> and can be invoked reactively or proactively.
                           </p>
                           <p>A failure is a persistent data corruption detected by a data integrity check. Failures are normally detected reactively. A database operation involving corrupted data results in an error, which automatically invokes a data integrity check that searches the database for failures related to the error. If failures are diagnosed, then the database records them in the Automatic Repository (ADR).</p>
                           <p>After failures have been detected by the database and stored in ADR, Data Recovery Advisor automatically determines the best repair options and their impact on the database. Typically, Data Recovery Advisor generates both manual and automated repair options for each failure or group of failures.</p>
                           <p>Before presenting an automated repair option, Data Recovery Advisor validates it for the specific environment and for the availability of media components required to complete the proposed repair. If you choose an automatic repair, then Oracle Database executes it for you. Data Recovery Advisor verifies the repair success and closes the appropriate failures.</p>
                           <div class="infoboxnotealso" id="GUID-2D8A4B90-A204-41F3-BE26-974FBD7C8DFA__GUID-607B37B3-8A95-484C-9BAC-3A2941DF9D4D">
                              <p class="notep1">See Also:</p>
                              <p><a href="../bradv/diagnosing-repairing-failures-dra.html#BRADV246" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> to learn how to use Data Recovery Advisor
                              </p>
                           </div>
                        </div>
                     </div><a id="CNCPT1445"></a><div class="props_rev_3"><a id="GUID-77CE5C26-00F1-486F-AE6D-7D3FA206438D" name="GUID-77CE5C26-00F1-486F-AE6D-7D3FA206438D"></a><h6 id="CNCPT-GUID-77CE5C26-00F1-486F-AE6D-7D3FA206438D" class="sect6">Block Media Recovery</h6>
                        <div>
                           <p>Block media recovery is a technique for restoring and recovering corrupt data blocks while data files are online.</p>
                           <p>A <a href="glossary.html#GUID-5E547C75-9814-499E-AF42-69950EE331C1"><span class="xrefglossterm">block corruption</span></a> is a data block that is not in a recognized Oracle format, or whose contents are not internally consistent. If you detect block corruptions, and if only a few blocks are corrupt, then block recovery may be preferable to data file recovery.
                           </p>
                           <div class="infoboxnotealso" id="GUID-77CE5C26-00F1-486F-AE6D-7D3FA206438D__GUID-BA4300D7-042F-4E38-92E3-30B1B73726A1">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="topics-for-database-administrators-and-developers.html#GUID-CEA4D714-A143-4F9F-8EED-EE5A6B29B3C3" title="A data corruption occurs when a hardware, software, or network component causes corrupt data to be read or written.">Data Corruption</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=BRADV89781" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> to learn how to perform block media recovery
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="CNCPT88772"></a><div class="props_rev_3"><a id="GUID-7F5703F9-CAE5-4736-895B-B45A51974A7C" name="GUID-7F5703F9-CAE5-4736-895B-B45A51974A7C"></a><h6 id="CNCPT-GUID-7F5703F9-CAE5-4736-895B-B45A51974A7C" class="sect6">Data File Recovery</h6>
                        <div>
                           <p>Data file recovery repairs a lost or damaged current data file or control file. It can also recover changes lost when a tablespace went offline without the <code class="codeph">OFFLINE</code> <code class="codeph">NORMAL</code> option.
                           </p>
                           <p>Media recovery is necessary if you restore a backup of a data file or control file or a data file is taken offline without the <code class="codeph">OFFLINE</code> <code class="codeph">NORMAL</code> option. The database cannot be opened if online data files needs media recovery, nor can a data file that needs media recovery be brought online until media recovery completes.
                           </p>
                           <p>To restore a physical backup of a data file or control file is to reconstruct it and make it available to Oracle Database. To recover a backup is to apply archived redo log files to reconstruct lost changes. RMAN can also recover data files with incremental backups, which contain only data blocks modified after a previous backup.</p>
                           <p>Unlike instance recovery, which automatically applies changes to online files, media recovery must be invoked by a user and applies archived redo log files to restored backups. Data file media recovery can only operate on offline data files or data files in a database that is not opened by any database instance.</p>
                           <p>Data file media recovery differs depending on whether all changes are applied:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Complete recovery</p>
                                 <p>Complete recovery applies <span class="italic">all</span> redo changes contained in the archived and online redo logs to a backup. Typically, you perform complete media recovery after a media failure damages data files or the control file. You can perform complete recovery on a database, tablespace, or data file.
                                 </p>
                              </li>
                              <li>
                                 <p>Incomplete recovery</p>
                                 <p>Incomplete recovery, also called <a href="glossary.html#GUID-576051B8-32B4-4FE8-9485-50109C6D4BC8"><span class="xrefglossterm">database point-in-time recovery</span></a>, results in a noncurrent version of the database. In this case, you do not apply all of the redo generated after the restored backup. Typically, you perform point-in-time database recovery to undo a user error when Oracle Flashback Database is not possible.
                                 </p>
                                 <p>To perform incomplete recovery, you must restore all data files from backups created before the time to which you want to recover and then open the database with the <code class="codeph">RESETLOGS</code> option when recovery completes. Resetting the logs creates a new stream of log sequence numbers starting with log sequence 1.
                                 </p>
                                 <div class="infoboxnote" id="GUID-7F5703F9-CAE5-4736-895B-B45A51974A7C__GUID-E599B8FB-2563-46F1-A58A-0454AFB76432">
                                    <p class="notep1">Note:</p>
                                    <p>If current data files are available, then Flashback Database is an alternative to DBPITR.</p>
                                 </div>
                                 <p>The tablespace point-in-time recovery (TSPITR) feature lets you recover one or more tablespaces to a point in time older than the rest of the database.</p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-7F5703F9-CAE5-4736-895B-B45A51974A7C__GUID-DC35D0D1-C575-4EF3-BB8A-3E6FC970F16C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="oracle-database-instance.html#GUID-728C6BE1-5687-4DC5-B570-D2042C88F935" title="Instance recovery is the process of applying records in the online redo log to data files to reconstruct changes made after the most recent checkpoint.">Overview of Instance Recovery</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=BRADV117" target="_blank"><span><cite>Oracle Database Backup and Recovery Users Guide</cite></span></a> for media recovery concepts
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div><a id="CNCPT94786"></a><div class="props_rev_3"><a id="GUID-89C1FA97-474D-412E-905E-59D08E26BBBF" name="GUID-89C1FA97-474D-412E-905E-59D08E26BBBF"></a><h5 id="CNCPT-GUID-89C1FA97-474D-412E-905E-59D08E26BBBF" class="sect5">Zero Data Loss Recovery Appliance</h5>
                     <div>
                        <p>The cloud-scale Zero Data Loss Recovery Appliance, commonly known as <span class="bold">Recovery Appliance</span>, is an Engineered System that dramatically reduces data loss and backup overhead for all Oracle databases in the enterprise.
                        </p>
                        <p>Integrated with RMAN, the Recovery Appliance deploys a centralized backup and recovery strategy for large numbers of databases, using cloud-scale, fault-tolerant hardware and storage. The Recovery Appliance continuously validates backups for recoverability.</p>
                     </div><a id="CNCPT94787"></a><div class="props_rev_3"><a id="GUID-72541B62-7AF4-4D5F-AC82-BAB036F83BCC" name="GUID-72541B62-7AF4-4D5F-AC82-BAB036F83BCC"></a><h6 id="CNCPT-GUID-72541B62-7AF4-4D5F-AC82-BAB036F83BCC" class="sect6">Benefits of Recovery Appliance</h6>
                        <div>
                           <p>A centralized Recovery Appliance performs most database backup and restore processing, making storage utilization, performance, and manageability of backups more efficient.</p>
                           <p>The primary benefits are as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Elimination of data loss</p>
                                 <p>The Recovery Appliance eliminates the data loss exposure experienced by most databases in the data center, using technologies such as the following:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The continuous transfer of redo changes from the SGA of a protected database to a Recovery Appliance, known as <a href="glossary.html#GUID-E2E4CEC0-AFE0-457D-9560-6E6F39C4DC38"><span class="xrefglossterm">real-time redo transport</span></a></p>
                                    </li>
                                    <li>
                                       <p>Replication to remote Recovery Appliances</p>
                                    </li>
                                    <li>
                                       <p>Automated tape backups made by the centralized Recovery Appliance</p>
                                    </li>
                                    <li>
                                       <p>End-to-End database block validation</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Minimal backup overhead</p>
                                 <p>Backup overhead on database servers is minimized by offloading work to the Recovery Appliance, which manages backups of multiple databases in a unified disk pool. The RMAN <a href="glossary.html#GUID-EF38C61D-5301-4C79-81DC-129F6FC5BF08"><span class="xrefglossterm">incremental-forever backup strategy</span></a> involves taking an initial level 0 backup to the Recovery Appliance, with all subsequent incremental backups at level 1. The Recovery Appliance creates a <a href="glossary.html#GUID-8804188E-EEFF-44EC-9E5F-8A6A8295A150"><span class="xrefglossterm">virtual full backup</span></a> by combining the level 0 with level 1 backups. The Recovery Appliance continually compresses, deduplicates, and validates backups at the block level.
                                 </p>
                              </li>
                              <li>
                                 <p>Improved end-to-end data protection visibility</p>
                                 <p>Cloud Control provides a complete, end-to-end view into the backup lifecycle managed by the Recovery Appliance, from the time the RMAN backup is initiated, to when it is stored on disk, tape, or replicated to a downstream Recovery Appliance. The installation of the Enterprise Manager for Zero Data Loss Recovery Appliance plug-in (Recovery Appliance plug-in) enables monitoring and administration.</p>
                              </li>
                              <li>
                                 <p>Cloud-Scale protection</p>
                                 <p>Recovery Appliance scales to support tens to hundreds or thousands of databases. The key components of the architecture as follows:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Recovery Appliance simplifies management through a <a href="glossary.html#GUID-C0444C9D-9420-4933-8947-974573A09BEE"><span class="xrefglossterm">protection policy</span></a>, which defines a <a href="glossary.html#GUID-F4D0DF97-755D-44D8-BB30-2C998FAF5D08"><span class="xrefglossterm">recovery window goal</span></a> enforced for each database associated with the policy. Protection policies improve manageability by grouping databases into tiers with shared characteristics.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Using protection policies, the Recovery Appliance manages backup storage space according to the recovery window goal for each protected database. This granular, database-oriented space management approach eliminates the need to manage space at the storage-volume level, as third-party appliances do.</p>
                                    </li>
                                    <li>
                                       <p>Recovery Appliance can scale to accommodate increases in backup traffic, storage usage, and the number of databases by adding compute and storage resources in a simple, modular fashion.</p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                     </div><a id="CNCPT94789"></a><a id="CNCPT94788"></a><div class="props_rev_3"><a id="GUID-66D62E1A-5613-454D-AEB6-1127A37E4F9B" name="GUID-66D62E1A-5613-454D-AEB6-1127A37E4F9B"></a><h6 id="CNCPT-GUID-66D62E1A-5613-454D-AEB6-1127A37E4F9B" class="sect6">Recovery Appliance Environment</h6>
                        <div>
                           <p>A <span class="bold">protected database</span> is a client database that backs up data to a Recovery Appliance. 
                           </p>
                           <p>The following figure shows a sample environment, which includes six protected databases and two Recovery Appliances. Each database uses the Zero Data Loss Recovery Appliance Backup Module (<a href="glossary.html#GUID-44120A0C-8834-4DF0-BF06-B9BDA797C44D"><span class="xrefglossterm">Recovery Appliance Backup Module</span></a>) for its backups. This module is an Oracle-supplied SBT library that RMAN uses to transfer backups over the network to the Recovery Appliance.
                           </p>
                           <div class="figure" id="GUID-66D62E1A-5613-454D-AEB6-1127A37E4F9B__BGBEHEIA">
                              <p class="titleinfigure">Figure 18-4 Recovery Appliance Environment</p><img src="img/amagd_vm_025.png" alt="Description of Figure 18-4 follows" title="Description of Figure 18-4 follows" longdesc="img_text/amagd_vm_025.html"><br><a href="img_text/amagd_vm_025.html">Description of "Figure 18-4 Recovery Appliance Environment"</a></div>
                           <!-- class="figure" -->
                           <p>The <a href="glossary.html#GUID-5344CAFE-B53D-4C47-B07D-ABBC56E1E8EE"><span class="xrefglossterm">Recovery Appliance metadata database</span></a>, which resides on each Recovery Appliance, manages metadata stored in the recovery catalog. All protected databases that send backups to Recovery Appliance must use this recovery catalog. The backups are located in the <a href="glossary.html#GUID-E2C49C85-3CEF-4245-A70C-631B4F192763"><span class="xrefglossterm">Recovery Appliance storage location</span></a>, which is a set of Oracle ASM disk groups.
                           </p>
                           <div class="infoboxnote" id="GUID-66D62E1A-5613-454D-AEB6-1127A37E4F9B__GUID-87455C90-1A88-4112-85BD-4DAC5C64F65F">
                              <p class="notep1">Note:</p>
                              <p>Databases may use Recovery Appliance as their recovery catalog without also using it as a backup repository.</p>
                           </div>
                           <p>Administrators use Cloud Control to manage and monitor the environment. Cloud Control provides a "single pane of glass" view of the entire backup lifecycle for each database, whether backups reside on disk, tape, or another Recovery Appliance.</p>
                           <div class="infoboxnotealso" id="GUID-66D62E1A-5613-454D-AEB6-1127A37E4F9B__GUID-E40C5E88-3732-40BA-82F6-57830E72D456">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=AMAGD107" target="_blank"><span><cite>Zero Data Loss Recovery Appliance Administrator's Guide</cite></span></a> for a thorough introduction to the product
                              </p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT89115"></a><a id="CNCPT1244"></a><div class="props_rev_3"><a id="GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5" name="GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5"></a><h4 id="CNCPT-GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5" class="sect4">Memory Management</h4>
                  <div>
                     <p>Memory management involves maintaining optimal sizes for the Oracle instance memory structures as demands on the database change. Initialization parameter settings determine how SGA and instance PGA memory is managed.</p>
                     <p><a href="concepts-for-database-administrators.html#GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5__BGBEJAJI">Figure 18-5</a> shows a decision tree for memory management options. The following sections explain the options in detail.
                     </p>
                     <div class="figure" id="GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5__BGBEJAJI">
                        <p class="titleinfigure">Figure 18-5 Memory Management Methods</p><img src="img/cncpt242.gif" alt="Description of Figure 18-5 follows" title="Description of Figure 18-5 follows" longdesc="img_text/cncpt242.html"><br><a href="img_text/cncpt242.html">Description of "Figure 18-5 Memory Management Methods"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-D39DB708-CC94-4EE6-ACDA-ACED36DA4DA5__GUID-FC1E6CE4-F45D-4C3D-997B-B2CB85C12452">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="memory-architecture.html#GUID-913335DF-050A-479A-A653-68A064DCCA41" title="This chapter discusses the memory architecture of a database instance.">Memory Architecture</a>"</span> to learn more about the SGA and PGA
                        </p>
                     </div>
                  </div><a id="CNCPT89116"></a><a id="CNCPT837"></a><div class="props_rev_3"><a id="GUID-C7AFB6E3-195E-4269-A871-D514CD9A84BE" name="GUID-C7AFB6E3-195E-4269-A871-D514CD9A84BE"></a><h5 id="CNCPT-GUID-C7AFB6E3-195E-4269-A871-D514CD9A84BE" class="sect5">Automatic Memory Management</h5>
                     <div>
                        <p>In <span class="bold">automatic memory management</span>, Oracle Database manages the SGA and instance PGA memory completely automatically. This method is the simplest and is strongly recommended by Oracle.
                        </p>
                        <p>The only user-specified controls are the target memory size initialization parameter (<code class="codeph">MEMORY_TARGET</code>) and optional maximum memory size initialization parameter (<code class="codeph">MEMORY_MAX_TARGET</code>). Oracle Database tunes to the target memory size, redistributing memory as needed between the SGA and the instance PGA.
                        </p>
                        <p>The SGA can contain the <a href="glossary.html#GUID-A19D33EA-7BAA-42C0-9E13-6AF686E2A976"><span class="xrefglossterm">In-Memory Column Store</span></a> (IM column store) or <a href="glossary.html#GUID-BE14DEE8-A53C-4B30-96FE-41079CF056C8"><span class="xrefglossterm">memoptimize pool</span></a>, both of which are optional. No matter which memory management method you use, size the IM column store with the <code class="codeph">INMEMORY_SIZE</code> initialization parameter, and the memoptimize pool with the <code class="codeph">MEMOPTIMIZE_POOL_SIZE</code> initialization parameter. The IM column store size are memoptimize pool are included in the memory target, but are not managed by the automatic resize algorithm. For example, if you set <code class="codeph">MEMORY_TARGET</code> to 5 GB and <code class="codeph">INMEMORY_SIZE</code> to 1 GB, then the overall memory target is 5 GB (not 6 GB), and the <code class="codeph">INMEMORY_SIZE</code> is always 1 GB.
                        </p>
                        <p>The following graphic shows a database that sometimes processes jobs submitted by online users and sometimes batch jobs. Using automatic memory management, the database automatically adjusts the size of the <a href="glossary.html#GUID-D9A10657-F0EF-4D84-AB58-852CD58BF0B4"><span class="xrefglossterm">large pool</span></a> and <a href="glossary.html#GUID-7913177D-8183-4CC5-8F59-816FE66DA363"><span class="xrefglossterm">database buffer cache</span></a> depending on which type of jobs are running. Note that the graphic does not depict the IM column store or memoptimize area.
                        </p>
                        <div class="figure" id="GUID-C7AFB6E3-195E-4269-A871-D514CD9A84BE__CHDDIDHC">
                           <p class="titleinfigure">Figure 18-6 Automatic Memory Management</p><img src="img/cncpt256.gif" alt="Description of Figure 18-6 follows" title="Description of Figure 18-6 follows" longdesc="img_text/cncpt256.html"><br><a href="img_text/cncpt256.html">Description of "Figure 18-6 Automatic Memory Management"</a></div>
                        <!-- class="figure" -->
                        <p>If you create a database with DBCA and choose the basic installation option, then Oracle Database enables automatic memory management by default.</p>
                        <div class="infoboxnotealso" id="GUID-C7AFB6E3-195E-4269-A871-D514CD9A84BE__GUID-587B320C-98CC-40CC-A3DC-43B3949F564E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="memory-architecture.html#GUID-80C1C6A3-3E48-4868-ACA1-370C4D341209" title="The In-Memory Area is an optional SGA component that contains the In-Memory Column Store (IM column store).">In-Memory Area</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="memory-architecture.html#GUID-D58DC90F-0ABB-4B1E-96C1-6094A04A5E12" title="The memoptimize pool stores buffers and related structures for heap-organized tables specified as MEMOPTIMIZE FOR READ.">Memoptimize Pool</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=ADMIN11199" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> to learn about automatic memory management
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT838"></a><div class="props_rev_3"><a id="GUID-22B45512-2878-4CF7-B1C5-F96F11A27AF8" name="GUID-22B45512-2878-4CF7-B1C5-F96F11A27AF8"></a><h5 id="CNCPT-GUID-22B45512-2878-4CF7-B1C5-F96F11A27AF8" class="sect5">Shared Memory Management of the SGA</h5>
                     <div>
                        <p>You can control the size of the SGA manually, either by setting the SGA size with automatic shared memory management, or by manually tuning SGA components.</p>
                        <p>If automatic memory management is not enabled, then the system must use shared memory management of the SGA. Shared memory management is possible in either of the following forms:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Automatic shared memory management</p>
                              <p>This mode enables you to exercise more direct control over the size of the SGA and is the default when automatic memory management is disabled. The database tunes the total SGA to the target size and dynamically tunes the sizes of SGA components. If you are using a server parameter file, then Oracle Database remembers the sizes of the automatically tuned components across database instance shutdowns.</p>
                           </li>
                           <li>
                              <p>Manual shared memory management</p>
                              <p>In this mode, you set the sizes of several individual SGA components and manually tune individual SGA components on an ongoing basis. You have complete control of individual SGA component sizes. The database defaults to this mode when both automatic memory management and automatic shared memory management are disabled.</p>
                              <div class="infoboxnote" id="GUID-22B45512-2878-4CF7-B1C5-F96F11A27AF8__GUID-3949C9BF-F76A-4598-B826-0737C560AF60">
                                 <p class="notep1">Note:</p>
                                 <p>When automatic memory management is disabled, then in some cases the database can automatically adjust the relative sizes of the shared pool and buffer cache, based on user workload.</p>
                              </div>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-22B45512-2878-4CF7-B1C5-F96F11A27AF8__GUID-8E34A4EA-D536-4F47-870C-4899B6D86017">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=ADMIN11203" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> to learn about shared memory management
                                 </p>
                              </li>
                              <li>
                                 <p>My Oracle Support note 1269139.1 to learn more about automatic resizing during manual mode:</p>
                                 <p><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1269139.1" target="_blank"><code class="codeph">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1269139.1</code></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT839"></a><div class="props_rev_3"><a id="GUID-E4B4F2E4-E83A-4869-8FA6-171AD52B7924" name="GUID-E4B4F2E4-E83A-4869-8FA6-171AD52B7924"></a><h5 id="CNCPT-GUID-E4B4F2E4-E83A-4869-8FA6-171AD52B7924" class="sect5">Memory Management of the Instance PGA</h5>
                     <div>
                        <p>If automatic memory management is not enabled, then Oracle Database uses either automatic or manual PGA memory management.</p>
                        <p>The following modes are possible for management of PGA memory:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Automatic PGA memory management</p>
                              <p>When automatic memory management (<code class="codeph">MEMORY_TARGET</code>) is disabled and <code class="codeph">PGA_AGGREGATE_TARGET</code> is set to a nonzero value, the database uses automatic PGA memory management. In this mode, <code class="codeph">PGA_AGGREGATE_TARGET</code> specifies a "soft" target size for the instance PGA. The target is soft because it only applies to specific types of memory allocations that can choose to use temporary space rather than the PGA. The database tunes the size of the instance PGA to this target and dynamically tunes the sizes of individual PGAs. If you do not explicitly set a target size, then the database automatically configures a reasonable default.
                              </p>
                              <p>The <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter dynamically sets an instance-wide hard limit for PGA memory. Because the parameter responds to changing memory conditions, you do not need to set the parameter value explicitly. By default, <code class="codeph">PGA_AGGREGATE_LIMIT</code> is set to the greater of the following:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>2 GB</p>
                                 </li>
                                 <li>
                                    <p>200% of <code class="codeph">PGA_AGGREGATE_TARGET</code> initialization parameter setting
                                    </p>
                                 </li>
                                 <li>
                                    <p>(Value of <code class="codeph">PROCESSES</code> initialization parameter setting) * 3 MB
                                    </p>
                                 </li>
                              </ul>
                              <p>A background process periodically compares the PGA size to the limit set by <code class="codeph">PGA_AGGREGATE_LIMIT</code>. If the limit is reached or exceeded, then this process terminates calls for the sessions using the most untunable PGA memory. If these sessions still do not release enough memory, then they are also terminated.
                              </p>
                           </li>
                           <li>
                              <p>Manual PGA memory management</p>
                              <p>When automatic memory management is disabled and <code class="codeph">PGA_AGGREGATE_TARGET</code> is set to <code class="codeph">0</code>, the database defaults to manual PGA management. Previous releases of Oracle Database required the DBA to manually specify the maximum work area size for each type of SQL <a href="glossary.html#GUID-4BC5B7D2-6483-4742-AD66-E0B7C39047E3"><span class="xrefglossterm">operator</span></a> (such as a sort or <a href="glossary.html#GUID-D2587A67-E1CB-4F35-8830-4599717C47BC"><span class="xrefglossterm">hash join</span></a>). This technique proved to be very difficult because the workload is always changing. Although Oracle Database supports the manual PGA memory management method, Oracle strongly recommends automatic memory management.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-E4B4F2E4-E83A-4869-8FA6-171AD52B7924__GUID-7C987DE6-F27B-4534-8E5D-480A20BFED28">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=TGDBA346" target="_blank"><span class="italic">Oracle Database Performance Tuning Guide</span></a> to learn about PGA memory management
                           </p>
                        </div>
                     </div>
                  </div><a id="CNCPT89117"></a><a id="CNCPT840"></a><div class="props_rev_3"><a id="GUID-17DC29B0-9741-4B80-8091-D9E1A886B357" name="GUID-17DC29B0-9741-4B80-8091-D9E1A886B357"></a><h5 id="CNCPT-GUID-17DC29B0-9741-4B80-8091-D9E1A886B357" class="sect5">Summary of Memory Management Methods</h5>
                     <div>
                        <p>Memory management is either automatic or manual. </p>
                        <p>If you do not enable automatic memory management, then you must separately configure one memory management method for the SGA and one for the PGA.</p>
                        <div class="infoboxnote" id="GUID-17DC29B0-9741-4B80-8091-D9E1A886B357__GUID-DB1B08EF-9B7F-4B7B-A610-0AA209E22AE6">
                           <p class="notep1">Note:</p>
                           <p>When automatic memory management is disabled for the database instance as a whole, Oracle Database enables automatic PGA memory management by default.</p>
                        </div>
                        <p>The following table includes the <code class="codeph">INMEMORY_SIZE</code> initialization parameter and the <code class="codeph">MEMOPTIMIZE_POOL_SIZE</code> initialization parameter. Both control memory areas that are optional.
                        </p>
                        <div class="tblformalwide" id="GUID-17DC29B0-9741-4B80-8091-D9E1A886B357__BGBDACCH">
                           <p class="titleintable">Table 18-3 Memory Management Methods</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Memory Management Methods" summary="This table shows memory management methods fir the SGA and the PGA, and the initialization parameters you must set. ." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="10%" id="d92580e11137">Instance</th>
                                    <th align="left" valign="bottom" width="9%" id="d92580e11140">SGA</th>
                                    <th align="left" valign="bottom" width="10%" id="d92580e11143">PGA</th>
                                    <th align="left" valign="bottom" width="26%" id="d92580e11146">Description</th>
                                    <th align="left" valign="bottom" width="45%" id="d92580e11149">Initialization Parameters</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d92580e11154" headers="d92580e11137 ">
                                       <p>Auto</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d92580e11154 d92580e11140 ">
                                       <p>n/a</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d92580e11154 d92580e11143 ">
                                       <p>n/a</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d92580e11154 d92580e11146 ">
                                       <p>The database tunes the size of the instance based on a single instance target size.</p>
                                    </td>
                                    <td align="left" valign="top" width="45%" headers="d92580e11154 d92580e11149 ">
                                       <p>You set:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Total memory target size for the database instance (<code class="codeph">MEMORY_TARGET</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional maximum memory size for the database instance (<code class="codeph">MEMORY_MAX_TARGET</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the IM column store (<code class="codeph">INMEMORY_SIZE</code>) in the SGA
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d92580e11189" headers="d92580e11137 ">
                                       <p>n/a</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d92580e11189 d92580e11140 ">
                                       <p>Auto</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d92580e11189 d92580e11143 ">
                                       <p>Auto</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d92580e11189 d92580e11146 ">
                                       <p>The database automatically tunes the SGA based on an SGA target.</p>
                                       <p>The database automatically tunes the PGA based on a PGA target.</p>
                                    </td>
                                    <td align="left" valign="top" width="45%" headers="d92580e11189 d92580e11149 ">
                                       <p>You set:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>SGA target size (<code class="codeph">SGA_TARGET</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional SGA maximum size (<code class="codeph">SGA_MAX_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the IM column store (<code class="codeph">INMEMORY_SIZE</code>) in the SGA
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the memoptimize pool in the SGA (<code class="codeph">MEMOPTIMIZE_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>PGA aggregate target size (<code class="codeph">PGA_AGGREGATE_TARGET</code>)<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "The database automatically configures the PGA_AGGREGATE_LIMIT initialization parameter. You also choose to set this parameter manually.")"><sup>Foot&nbsp;1</sup></a></p>
                                          </li>
                                       </ul>
                                       <p>The database automatically configures the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter. You may set this parameter manually.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d92580e11249" headers="d92580e11137 ">
                                       <p>n/a</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d92580e11249 d92580e11140 ">
                                       <p>Auto</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d92580e11249 d92580e11143 ">
                                       <p>Manual</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d92580e11249 d92580e11146 ">
                                       <p>The database automatically tunes the SGA based on an SGA target.</p>
                                       <p>You control the PGA manually, setting the maximum work area size for each type of SQL <a href="glossary.html#GUID-4BC5B7D2-6483-4742-AD66-E0B7C39047E3"><span class="xrefglossterm">operator</span></a>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="45%" headers="d92580e11249 d92580e11149 ">
                                       <p>You set:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>SGA target size (<code class="codeph">SGA_TARGET</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional SGA maximum size (<code class="codeph">SGA_MAX_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the IM column store in the SGA (<code class="codeph">INMEMORY_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the memoptimize pool in the SGA (<code class="codeph">MEMOPTIMIZE_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>PGA work area parameters such as <code class="codeph">SORT_AREA_SIZE</code>, <code class="codeph">HASH_AREA_SIZE</code>, and <code class="codeph">BITMAP_MERGE_AREA_SIZE</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d92580e11306" headers="d92580e11137 ">
                                       <p>n/a</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d92580e11306 d92580e11140 ">
                                       <p>Manual</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d92580e11306 d92580e11143 ">
                                       <p>Auto</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d92580e11306 d92580e11146 ">
                                       <p>You control the SGA manually by setting individual component sizes. </p>
                                       <p>The database automatically tunes the PGA based on a PGA target.</p>
                                    </td>
                                    <td align="left" valign="top" width="45%" headers="d92580e11306 d92580e11149 ">
                                       <p>You set:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Shared pool size (<code class="codeph">SHARED_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Buffer cache size (<code class="codeph">DB_CACHE_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Large pool size (<code class="codeph">LARGE_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Java pool size (<code class="codeph">JAVA_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the IM column store (<code class="codeph">INMEMORY_SIZE</code>) in the SGA
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the memoptimize pool in the SGA (<code class="codeph">MEMOPTIMIZE_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>PGA aggregate target size (<code class="codeph">PGA_AGGREGATE_TARGET</code>)<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "The database automatically configures the PGA_AGGREGATE_LIMIT initialization parameter. You also choose to set this parameter manually.")"><sup>Foot&nbsp;2</sup></a></p>
                                          </li>
                                       </ul>
                                       <p>The database automatically configures the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter. You may set this parameter manually.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="10%" id="d92580e11378" headers="d92580e11137 ">
                                       <p>n/a</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d92580e11378 d92580e11140 ">
                                       <p>Manual</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d92580e11378 d92580e11143 ">
                                       <p>Manual</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d92580e11378 d92580e11146 ">
                                       <p>You must manually configure SGA component sizes. </p>
                                       <p>You control the PGA manually, setting the maximum work area size for each type of SQL operator.</p>
                                    </td>
                                    <td align="left" valign="top" width="45%" headers="d92580e11378 d92580e11149 ">
                                       <p>You must manually configure SGA component sizes. You set:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Shared pool size (<code class="codeph">SHARED_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Buffer cache size (<code class="codeph">DB_CACHE_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Large pool size (<code class="codeph">LARGE_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Java pool size (<code class="codeph">JAVA_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the IM column store (<code class="codeph">INMEMORY_SIZE</code>) in the SGA
                                             </p>
                                          </li>
                                          <li>
                                             <p>Optional size for the memoptimize pool in the SGA (<code class="codeph">MEMOPTIMIZE_POOL_SIZE</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>PGA work area parameters such as <code class="codeph">SORT_AREA_SIZE</code>, <code class="codeph">HASH_AREA_SIZE</code>, and <code class="codeph">BITMAP_MERGE_AREA_SIZE</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>The database automatically configures the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter. You also choose to set this parameter manually.
                           </p>
                        <p></p>
                        <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p>The database automatically configures the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter. You also choose to set this parameter manually.
                           </p>
                        <p></p>
                        <div class="infoboxnotealso" id="GUID-17DC29B0-9741-4B80-8091-D9E1A886B357__GUID-16B51FDA-B3BE-41B7-9BB3-9546CD97E525">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=ADMIN11236" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> because automatic memory management is not available on all platforms
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT860"></a><div class="props_rev_3"><a id="GUID-EB2AB7CA-8F3A-4A2B-AA0A-8E9D138D8B75" name="GUID-EB2AB7CA-8F3A-4A2B-AA0A-8E9D138D8B75"></a><h4 id="CNCPT-GUID-EB2AB7CA-8F3A-4A2B-AA0A-8E9D138D8B75" class="sect4">Resource Management and Task Scheduling</h4>
                  <div>
                     <p>Oracle Database provides tools to assist you with managing resources, and with scheduling tasks to reduce the impact on users. </p>
                     <p>In a database with many active users, resource management is an important part of database administration. Sessions that consume excessive resources can prevent other sessions from doing their work. A related problem is how to schedule tasks so that they run at the best time. Oracle Database provides tools to help solve these problems.</p>
                  </div><a id="CNCPT89118"></a><a id="CNCPT1396"></a><div class="props_rev_3"><a id="GUID-308CCFA9-830F-442B-BA81-F03B9B6BCE49" name="GUID-308CCFA9-830F-442B-BA81-F03B9B6BCE49"></a><h5 id="CNCPT-GUID-308CCFA9-830F-442B-BA81-F03B9B6BCE49" class="sect5">Database Resource Manager</h5>
                     <div>
                        <p>Oracle Database Resource Manager (the Resource Manager) provides granular control of database resources allocated to user accounts, applications, and services. The Resource Manager acts primarily as a gatekeeper, slowing some jobs run slow so that others can run fast. </p>
                        <p>The <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package solves many resource allocation problems that an operating system does not manage well, including:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Excessive overhead</p>
                           </li>
                           <li>
                              <p>Inefficient scheduling</p>
                           </li>
                           <li>
                              <p>Inappropriate allocation of resources</p>
                           </li>
                           <li>
                              <p>Inability to manage database-specific resources</p>
                           </li>
                        </ul>
                        <p>The Resource Manager helps overcome the preceding problems by giving the database more control over allocation of hardware resources and prioritization of work within the database. You can classify sessions into groups based on session attributes, and then allocate resources to these groups to optimize hardware utilization. You can use the Resource Manager to set limits for PDB memory consumption.</p>
                        <p>Resources are allocated to users according to a resource plan specified by the database administrator. The plan specifies how the resources are to be distributed among resource consumer groups, which are user sessions grouped by resource requirements. A resource plan directive associates a resource consumer group with a plan and specifies how resources are to be allocated to the group.</p>
                        <p><a href="concepts-for-database-administrators.html#GUID-308CCFA9-830F-442B-BA81-F03B9B6BCE49__CHDGHHBF">Figure 18-7</a> shows a simple resource plan for an organization that runs OLTP applications and reporting applications simultaneously during the daytime. The currently active plan, <code class="codeph">DAYTIME</code>, allocates CPU resources among three resource consumer groups. Specifically, <code class="codeph">OLTP</code> is allotted 75% of the CPU time, <code class="codeph">REPORTS</code> is allotted 15%, and <code class="codeph">OTHER_GROUPS</code> receives the remaining 10%.
                        </p>
                        <div class="figure" id="GUID-308CCFA9-830F-442B-BA81-F03B9B6BCE49__CHDGHHBF">
                           <p class="titleinfigure">Figure 18-7 Simple Resource Plan</p><img src="img/admin078.gif" width="346" alt="Description of Figure 18-7 follows" title="Description of Figure 18-7 follows" longdesc="img_text/admin078.html"><br><a href="img_text/admin078.html">Description of "Figure 18-7 Simple Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p>One problem that Resource Manager can solve is runaway queries, which can monitor using SQL Monitor. Resource Manager enables you to specify thresholds to identify and respond to runaway SQL statements. For example, you can specify thresholds for CPU time, elapsed time, physical or logical I/Os, and PGA usage by each foreground process in a consumer group. In response, Resource Manager can switch to a lower priority consumer group, terminate the SQL statement, or log the threshold violation.</p>
                        <div class="infoboxnotealso" id="GUID-308CCFA9-830F-442B-BA81-F03B9B6BCE49__GUID-9A9157FE-9388-47BD-89BB-F0F154151C2D">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=ADMIN027" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to use the Resource Manager
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=ARPLS050" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> to learn how to use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT89119"></a><a id="CNCPT1413"></a><div class="props_rev_3"><a id="GUID-077CBA84-5099-4550-AA11-250B301B609A" name="GUID-077CBA84-5099-4550-AA11-250B301B609A"></a><h5 id="CNCPT-GUID-077CBA84-5099-4550-AA11-250B301B609A" class="sect5">Oracle Scheduler</h5>
                     <div>
                        <p>Oracle Scheduler (the Scheduler) enables database administrators and application developers to control when and where various tasks take place in the database environment.</p>
                        <p>The Scheduler provides complex enterprise scheduling functionality, which you can use to:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Schedule job execution based on time or events</p>
                           </li>
                           <li>
                              <p>Schedule job processing in a way that models your business requirements</p>
                           </li>
                           <li>
                              <p>Manage and monitor jobs</p>
                           </li>
                           <li>
                              <p>Execute and manage jobs in a clustered environment</p>
                           </li>
                        </ul>
                        <p>Program objects (programs) contain metadata about the command that the Scheduler will run, including default values for any arguments. Schedule objects (schedules) contain information about run date and time and recurrence patterns. Job objects (jobs) associate a program with a schedule. To define what is executed and when, you assign relationships among programs, schedules, and jobs.</p>
                        <p>The Scheduler is implemented as a set of functions and procedures in the <code class="codeph">DBMS_SCHEDULER</code> PL/SQL package. You create and manipulate Scheduler objects with this package or with Enterprise Manager. Because Scheduler objects are standard database objects, you can control access to them with system and object privileges. 
                        </p>
                        <p><a href="concepts-for-database-administrators.html#GUID-077CBA84-5099-4550-AA11-250B301B609A__CHDHJDBE">Figure 18-8</a> shows the basic architecture of the Scheduler. The job table is a container for all the jobs, with one table per database. The job coordinator background process is automatically started and stopped as needed. Job slaves are awakened by the coordinator when a job must be run The slaves gather metadata from the job table and run the job.
                        </p>
                        <div class="figure" id="GUID-077CBA84-5099-4550-AA11-250B301B609A__CHDHJDBE">
                           <p class="titleinfigure">Figure 18-8 Scheduler Components</p><img src="img/admin062.gif" alt="Description of Figure 18-8 follows" title="Description of Figure 18-8 follows" longdesc="img_text/admin062.html"><br><a href="img_text/admin062.html">Description of "Figure 18-8 Scheduler Components"</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnotealso" id="GUID-077CBA84-5099-4550-AA11-250B301B609A__GUID-FB180869-1E6B-47B5-9342-E07054EFB61C">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="process-architecture.html#GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9" title="A queue process runs user jobs, often in batch mode. A job is a user-defined task scheduled to run one or more times.">Job Queue Processes (CJQ0 and Jnnn)</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/cncpt&amp;id=ADMIN033" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> to learn about the Scheduler
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT1379"></a><div class="props_rev_3"><a id="GUID-045B9963-F53D-427C-87B7-04858B22D4D8" name="GUID-045B9963-F53D-427C-87B7-04858B22D4D8"></a><h4 id="CNCPT-GUID-045B9963-F53D-427C-87B7-04858B22D4D8" class="sect4">Performance and Tuning</h4>
                  <div>
                     <p>As a DBA, you are responsible for the performance of your Oracle database. Typically, performance problems result from unacceptable response time, which is the time to complete a specified workload, or throughput, which is the amount of work that can be completed in a specified time.</p>
                     <p>Typical problems include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>CPU bottlenecks</p>
                        </li>
                        <li>
                           <p>Undersized memory structures</p>
                        </li>
                        <li>
                           <p>I/O capacity issues</p>
                        </li>
                        <li>
                           <p>Inefficient or high-load SQL statements</p>
                        </li>
                        <li>
                           <p>Unexpected performance regression after tuning SQL statements</p>
                        </li>
                        <li>
                           <p>Concurrency and contention issues</p>
                        </li>
                        <li>
                           <p>Database configuration issues</p>
                        </li>
                     </ul>
                     <p>The general goal of tuning is usually to improve response time, increase throughput, or both. A specific and measurable goal might be "Reduce the response time of the specified <code class="codeph">SELECT</code> statement to under 5 seconds." Whether this goal is achievable depends on factors that may or may not be under the control of the DBA. In general, tuning is the effort to achieve specific, measurable, and achievable tuning goals by using database resources in the most efficient way possible.
                     </p>
                     <p>The Oracle performance method is based on identifying and eliminating bottlenecks in the database, and developing efficient SQL statements. Applying the Oracle performance method involves the following tasks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Performing pre-tuning preparations</p>
                        </li>
                        <li>
                           <p>Tuning the database proactively on a regular basis</p>
                        </li>
                        <li>
                           <p>Tuning the database reactively when users report performance problems</p>
                        </li>
                        <li>
                           <p>Identifying, tuning, and optimizing high-load SQL statements</p>
                        </li>
                     </ul>
                     <p>This section describes essential aspects of Oracle Database performance tuning, including the use of advisors. Oracle Database advisors provide specific advice on how to address key database management challenges, covering a wide range of areas including space, performance, and undo management.</p>
                     <div class="infoboxnotealso" id="GUID-045B9963-F53D-427C-87B7-04858B22D4D8__GUID-2B354826-F99D-48F5-B074-0B4A85D0F3AC">
                        <p class="notep1">See Also:</p>
                        <p><a href="../tdppt/oracle-database-performance-method.html#GUID-6203E485-FA06-4EE3-9003-4449FBDE214B" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> and <a href="../tgsql/sql-performance-methodology.html#GUID-C8B23C09-35B5-4F0E-90B2-272805EC4062" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> provide to learn how to implement the Oracle performance method
                        </p>
                     </div>
                  </div><a id="CNCPT1376"></a><div class="props_rev_3"><a id="GUID-BF0FC773-7BFE-4FF6-A183-D30C4B68215C" name="GUID-BF0FC773-7BFE-4FF6-A183-D30C4B68215C"></a><h5 id="CNCPT-GUID-BF0FC773-7BFE-4FF6-A183-D30C4B68215C" class="sect5">Database Self-Monitoring</h5>
                     <div>
                        <p>Self-monitoring take place as the database performs its regular operation, ensuring that the database is aware of problems as they arise. Oracle Database can send a server-generated alert to notify you of an impending problem.</p>
                        <p>Alerts are automatically generated when a problem occurs or when data does not match expected values for metrics such as physical reads per second or SQL response time. A <a href="glossary.html#GUID-09DBC6B7-8D29-45DD-B033-B10A882269E3"><span class="xrefglossterm">metric</span></a> is the rate of change in a cumulative statistic. Server-generated alerts can be based on user-specified threshold levels or because an event has occurred.
                        </p>
                        <p>Server-generated alerts not only identify the problem, but sometimes recommend how the reported problem can be resolved. An example is an alert that the fast recovery area is running out of space with the recommendation that obsolete backups should be deleted or additional disk space added.</p>
                        <div class="infoboxnotealso" id="GUID-BF0FC773-7BFE-4FF6-A183-D30C4B68215C__GUID-9B4E6138-08C7-4CB4-A661-142C1D9EF2D1">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/monitoring-the-database.html#ADMIN11247" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a></p>
                        </div>
                     </div>
                  </div><a id="CNCPT89120"></a><a id="CNCPT1374"></a><div class="props_rev_3"><a id="GUID-1C0B57E9-1D1D-4C48-8A3D-5F56160435ED" name="GUID-1C0B57E9-1D1D-4C48-8A3D-5F56160435ED"></a><h5 id="CNCPT-GUID-1C0B57E9-1D1D-4C48-8A3D-5F56160435ED" class="sect5">Automatic Workload Repository (AWR)</h5>
                     <div>
                        <p><span class="bold">Automatic Workload Repository (AWR)</span> is a repository of historical performance data that includes cumulative statistics for the system, sessions, individual SQL statements, segments, and services.
                        </p>
                        <p>AWR statistics are the foundation of performance tuning. By automating the gathering of database statistics for problem detection and tuning, AWR serves as the foundation for database self-management.</p>
                        <p>As shown in the following graphic, the database stores recent AWR statistics in the SGA. By default, the MMON process gathers statistics every hour and creates an AWR snapshot. An <a href="glossary.html#GUID-A32367A4-F1EB-43B2-9458-54986FC74A9D"><span class="xrefglossterm">AWR snapshot</span></a> is a set of performance statistics captured at a specific time. The database writes snapshots to the <code class="codeph">SYSAUX</code> tablespace. AWR manages snapshot space, purging older snapshots according to a configurable snapshot retention policy.
                        </p>
                        <div class="figure" id="GUID-1C0B57E9-1D1D-4C48-8A3D-5F56160435ED__CHDGCEFE">
                           <p class="titleinfigure">Figure 18-9 Automatic Workload Repository (AWR)</p><img src="img/cncpt279.gif" alt="Description of Figure 18-9 follows" title="Description of Figure 18-9 follows" longdesc="img_text/cncpt279.html"><br><a href="img_text/cncpt279.html">Description of "Figure 18-9 Automatic Workload Repository (AWR)"</a></div>
                        <!-- class="figure" -->
                        <p>An <a href="glossary.html#GUID-19E46AF0-A587-422B-8A06-CEF094E47F6A"><span class="xrefglossterm">AWR baseline</span></a> is a collection of statistic rates usually taken over a period when the system is performing well at peak load. You can specify a pair or range of AWR snapshots as a baseline. By using an AWR report to compare statistics captured during a period of bad performance to a baseline, you can diagnose problems.
                        </p>
                        <p>An automated maintenance infrastructure known as AutoTask illustrates how Oracle Database uses AWR for self-management. By analyzing AWR data, AutoTask can determine the need for maintenance tasks and schedule them to run in Oracle Scheduler maintenance windows. Examples of tasks include gathering statistics for the <a href="glossary.html#GUID-54114749-0A81-41D7-8E16-7B76D93CEE2B"><span class="xrefglossterm">optimizer</span></a> and running the Automatic Segment Advisor.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1C0B57E9-1D1D-4C48-8A3D-5F56160435ED__GUID-98F12DE2-95F6-43C3-805E-733562D751FC">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="process-architecture.html#GUID-D175CA2B-20FE-4D5D-9A89-5CAA279479EC" title="The manageability monitor process (MMON) performs many tasks related to the Automatic Workload Repository (AWR).">Manageability Monitor Processes (MMON and MMNL)</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="logical-storage-structures.html#GUID-E4055936-C426-4B5C-8811-32FF98284F16" title="The SYSAUX tablespace is an auxiliary tablespace to the SYSTEM tablespace.">The SYSAUX Tablespace</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/gathering-database-statistics.html#TGDBA169" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> to learn about AWR
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-automated-database-maintenance-tasks.html#ADMIN0235" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> to learn how to manage automatic maintenance tasks
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT850"></a><div class="props_rev_3"><a id="GUID-7916CC5E-AE65-46E1-BF1A-052C54DD9915" name="GUID-7916CC5E-AE65-46E1-BF1A-052C54DD9915"></a><h5 id="CNCPT-GUID-7916CC5E-AE65-46E1-BF1A-052C54DD9915" class="sect5">Automatic Database Monitor (ADDM)</h5>
                     <div>
                        <p>Using statistics captured in AWR (Automatic Workload Repository), ADDM automatically and proactively diagnoses database performance and determines how identified problems can be resolved. You can also run ADDM manually.</p>
                        <p><a href="glossary.html#GUID-F89BDBAC-398F-4568-8041-C0D1611598E0"><span class="xrefglossterm">Automatic Database Diagnostic Monitor (ADDM)</span></a> is a self- advisor built into Oracle Database.
                        </p>
                        <p>ADDM takes a holistic approach to system performance, using time as a common currency between components. ADDM identifies areas of Oracle Database consuming the most time. For example, the database may be spending an excessive amount of time waiting for free database buffers. ADDM drills down to identify the root cause of problems, rather than just the symptoms, and reports the effect of the problem on Oracle Database overall. Minimal overhead occurs during the process.</p>
                        <p>In many cases, ADDM recommends solutions and quantifies expected performance benefits. For example, ADDM may recommend changes to hardware, database configuration, database schema, or applications. If a recommendation is made, then ADDM reports the time benefit. The use of time as a measure enables comparisons of problems or recommendations.</p>
                        <p>Besides reporting potential performance issues, ADDM documents areas of the database that are not problems. Subcomponents such as I/O and memory that are not significantly impacting database performance are pruned from the classification tree at an early stage. ADDM lists these subcomponents so that you can quickly see that there is little benefit to performing actions in those areas.</p>
                        <div class="infoboxnotealso" id="GUID-7916CC5E-AE65-46E1-BF1A-052C54DD9915__GUID-83D3D164-8F4E-4AAB-BCE4-35FC724823D2">
                           <p class="notep1">See Also:</p>
                           <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT021" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> and <a href="../tgdba/automatic-performance-diagnostics.html#TGDBA02602" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a></p>
                        </div>
                     </div>
                  </div><a id="CNCPT852"></a><div class="props_rev_3"><a id="GUID-12C38C77-BD4A-4D0D-8A67-FF7BF2167C77" name="GUID-12C38C77-BD4A-4D0D-8A67-FF7BF2167C77"></a><h5 id="CNCPT-GUID-12C38C77-BD4A-4D0D-8A67-FF7BF2167C77" class="sect5">Active Session History (ASH)</h5>
                     <div>
                        <p><span class="bold">Active Session History (ASH)</span> samples active database sessions each second, writing the data to memory and persistent storage. ASH is an integral part of the database self-management framework and is useful for diagnosing performance problems.
                        </p>
                        <p>Unlike instance-level statistics gathered by Automatic Workload Repository (AWR), the database gathers ASH statistics at the session level. An <a href="glossary.html#GUID-ABE53BC0-1FEF-4304-86B2-06BFF5A4576D"><span class="xrefglossterm">active session</span></a> is a session that is using CPU and is not waiting for an event in the idle wait class.
                        </p>
                        <p>You can use Enterprise Manager or SQL scripts to generate ASH reports that gather session statistics gathered over a specified duration. You can use ASH reports for:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Analysis of short-lived performance problems not identified by Automatic Database Diagnostic Monitor (ADDM)</p>
                           </li>
                           <li>
                              <p>Scoped or targeted performance analysis by various dimensions or their combinations, such as time, session, module, action, or SQL ID</p>
                           </li>
                        </ul>
                        <p>For example, a user notifies you that the database was slow between 10:00 p.m. and 10:02 p.m. However, the 2-minute performance degradation represents a small portion of the AWR snapshot interval from 10:00 p.m. and 11:00 p.m. and does not appear in ADDM findings. ASH reports can help identify the source of the transient problem.</p>
                        <div class="infoboxnotealso" id="GUID-12C38C77-BD4A-4D0D-8A67-FF7BF2167C77__GUID-E9D2CD9E-5EC5-4C58-AFD6-4935B1E0BDCA">
                           <p class="notep1">See Also:</p>
                           <p><a href="../tdppt/resolving-transient-performance-problems.html#TDPPT065" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> and <a href="../tgdba/analyzing-sampled-data.html#TGDBA278" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a></p>
                        </div>
                     </div>
                  </div><a id="CNCPT1380"></a><div class="props_rev_3"><a id="GUID-6AF46C02-62A0-4302-A981-8A10EDF7F966" name="GUID-6AF46C02-62A0-4302-A981-8A10EDF7F966"></a><h5 id="CNCPT-GUID-6AF46C02-62A0-4302-A981-8A10EDF7F966" class="sect5">Application and SQL Tuning</h5>
                     <div>
                        <p>Oracle Database completely automates the SQL tuning process. </p>
                        <p>ADDM identifies SQL statements consuming unusually high system resources and therefore causing performance problems. In addition, AWR automatically captures the top SQL statements in terms of CPU and shared memory consumption. The identification of high-load SQL statements happens automatically and requires no intervention.</p>
                     </div><a id="CNCPT89280"></a><div class="props_rev_3"><a id="GUID-804A3E13-06F5-4922-9D1A-4FAFFC4E0E98" name="GUID-804A3E13-06F5-4922-9D1A-4FAFFC4E0E98"></a><h6 id="CNCPT-GUID-804A3E13-06F5-4922-9D1A-4FAFFC4E0E98" class="sect6">EXPLAIN PLAN Statement</h6>
                        <div>
                           <p>Tools such as the <code class="codeph">EXPLAIN PLAN</code> statement enable you to view execution plans chosen by the optimizer. 
                           </p>
                           <p><code class="codeph">EXPLAIN PLAN</code> shows the query plan for the specified SQL query if it were executed now in the current session. Other tools are Oracle Enterprise Manager and the SQL*Plus <code class="codeph">AUTOTRACE</code> command.
                           </p>
                           <div class="infoboxnotealso" id="GUID-804A3E13-06F5-4922-9D1A-4FAFFC4E0E98__GUID-B4B83031-6C62-425E-BE78-F3C44BBCAF3E">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/EXPLAIN-PLAN.html#SQLRF01601" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about <code class="codeph">EXPLAIN PLAN</code></p>
                           </div>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-781A678D-C395-4C8E-8E59-8AD6BF4BB448" name="GUID-781A678D-C395-4C8E-8E59-8AD6BF4BB448"></a><h6 id="CNCPT-GUID-781A678D-C395-4C8E-8E59-8AD6BF4BB448" class="sect6">Optimizer Statistics Advisor</h6>
                        <div>
                           <p>Optimizer Statistics Advisor is diagnostic software that analyzes how you are currently gathering statistics, the effectiveness of existing statistics gathering jobs, and the quality of the gathered statistics. Optimizer Statistics Advisor uses the same advisor framework as Automatic Database Diagnostic Monitor (ADDM), SQL Performance Analyzer, and other advisors.</p>
                           <p>Optimizer Statistics Advisor provides the following advantages over the traditional approach, which relies on best practices:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Provides easy-to-understand reports</p>
                              </li>
                              <li>
                                 <p>Supplies scripts to implement necessary fixes <span class="italic">without</span> requiring changes to application code
                                 </p>
                              </li>
                              <li>
                                 <p>Runs a predefined task named <code class="codeph">AUTO_STATS_ADVISOR_TASK</code>  once per day in the maintenance window
                                 </p>
                              </li>
                              <li>
                                 <p>Provides an API in the <code class="codeph">DBMS_STATS</code> package that enables you to create and run tasks manually, store findings and recommendations in data dictionary views, generate reports for the tasks, and implement corrections when necessary
                                 </p>
                              </li>
                              <li>
                                 <p>Integrates with existing tools such as Oracle Enterprise Manager (Enterprise Manager)</p>
                              </li>
                           </ul>
                           <p>Optimizer Statistics Advisor maintains rules, which are Oracle-supplied standards by which the advisor performs its checks. The rules embody Oracle best practices based on the current feature set. If the best practices change from release to release, then the Optimizer Statistics Advisor rules also change. In this way, the advisor always provides the most up-to-date recommendations.</p>
                           <p>Optimizer Statistics Advisor inspects the statistics gathering process, and then generates a report of findings, which are violations of the rules. If the advisor makes recommendations, and if it proposes actions based on these recommendations, then you can either implement the actions automatically or generate an editable, executable PL/SQL script.</p>
                           <p>The advisor task runs automatically in the maintenance window, but you can also run it on demand.</p>
                           <div class="infoboxnotealso" id="GUID-781A678D-C395-4C8E-8E59-8AD6BF4BB448__GUID-3018550A-1276-4C28-86E9-47DD04188842">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../tgsql/optimizer-statistics-advisor.html#TGSQL-GUID-054F4B76-DD57-46EE-98EA-0FF04F49D1B3" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> to learn more about Optimizer Statistics Advisor
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_STATS</code> package
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="CNCPT853"></a><div class="props_rev_3"><a id="GUID-9104F5D9-E1BE-4B15-8A0F-EAB03E3CA3B4" name="GUID-9104F5D9-E1BE-4B15-8A0F-EAB03E3CA3B4"></a><h6 id="CNCPT-GUID-9104F5D9-E1BE-4B15-8A0F-EAB03E3CA3B4" class="sect6">SQL Tuning Advisor</h6>
                        <div>
                           <p>The interface for automatic SQL tuning is SQL Tuning Advisor, which runs automatically during system maintenance windows as a maintenance task.</p>
                           <p>During each automatic run, the advisor selects high-load SQL queries in the database and generates recommendations for tuning these queries.</p>
                           <p>SQL Tuning Advisor recommendations fall into the following categories:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Statistics analysis</p>
                              </li>
                              <li>
                                 <p>SQL profiling</p>
                              </li>
                              <li>
                                 <p>Access path analysis</p>
                              </li>
                              <li>
                                 <p>SQL structure analysis</p>
                              </li>
                           </ul>
                           <p>A <a href="glossary.html#GUID-E54F3CED-F5B8-4367-923E-BCFB67319D3A"><span class="xrefglossterm">SQL profile</span></a> contains additional statistics specific to a SQL statement and enables the optimizer to generate a better <a href="glossary.html#GUID-2DF33B85-94BB-44F3-93B7-06916FB18361"><span class="xrefglossterm">execution plan</span></a>. Essentially, a SQL profile is a method for analyzing a query. Both <a href="glossary.html#GUID-56F7FB03-3499-4D51-8D23-F86C45194F09"><span class="xrefglossterm">access path</span></a> and SQL structure analysis are useful for tuning an application under development or a homegrown production application.
                           </p>
                           <p>A principal benefit of SQL Tuning Advisor is that solutions come from the optimizer rather than external tools. Thus, tuning is performed by the database component that is responsible for the execution plans and SQL performance. The tuning process can consider past execution statistics of a SQL statement and customizes the optimizer settings for this statement.</p>
                           <div class="infoboxnotealso" id="GUID-9104F5D9-E1BE-4B15-8A0F-EAB03E3CA3B4__GUID-FDE7D192-EEB3-4171-BF67-CBB3E41B7196">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> <span class="q">"<a href="sql.html#GUID-3F42B1AA-530A-4144-8179-F0074832AF81" title="To understand how Oracle Database processes SQL statements, it is necessary to understand the part of the database called the optimizer (also known as the query optimizer or cost-based optimizer). All SQL statements use the optimizer to determine the most efficient means of accessing the specified data.">Overview of the Optimizer</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../tdppt/tuning-sql-statements.html#TDPPT160" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> and <a href="../tgsql/introduction-to-sql-tuning.html#TGSQL540" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="CNCPT854"></a><div class="props_rev_3"><a id="GUID-F6B6AE39-784A-4ACA-B6FF-DD3F3D57C159" name="GUID-F6B6AE39-784A-4ACA-B6FF-DD3F3D57C159"></a><h6 id="CNCPT-GUID-F6B6AE39-784A-4ACA-B6FF-DD3F3D57C159" class="sect6">SQL Access Advisor</h6>
                        <div>
                           <p>Use SQL Access Advisor to assist you with analyzing SQL queries, and determining ways of optimizing schema objects or tuning queries. </p>
                           <p>SQL Access Advisor offers advice on how to optimize data access paths. Specifically, it recommends how database performance can be improved through partitioning, materialized views, indexes, and materialized view logs.</p>
                           <p>Schema objects such as partitions and indexes are essential for optimizing complex, data-intensive queries. However, creation and maintenance of these objects can be time-consuming, and space requirements can be significant. SQL Access Advisor helps meet performance goals by recommending data structures for a specified workload.</p>
                           <p>You can run SQL Access Advisor from Enterprise Manager using a wizard or by using the <code class="codeph">DBMS_ADVISOR</code> package. <code class="codeph">DBMS_ADVISOR</code> consists of a collection of analysis and advisory functions and procedures callable from any PL/SQL program.
                           </p>
                           <div class="infoboxnotealso" id="GUID-F6B6AE39-784A-4ACA-B6FF-DD3F3D57C159__GUID-A11040CF-7390-4B13-8DF8-EC56099B5F3A">
                              <p class="notep1">See Also:</p>
                              <p><a href="../tdppt/optimizing-data-access-paths.html#TDPPT170" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> and <a href="../tgsql/introduction-to-sql-tuning.html#TGSQL591" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a></p>
                           </div>
                        </div>
                     </div><a id="CNCPT89281"></a><div class="props_rev_3"><a id="GUID-67362328-A94E-4818-A4A1-0206FD89B766" name="GUID-67362328-A94E-4818-A4A1-0206FD89B766"></a><h6 id="CNCPT-GUID-67362328-A94E-4818-A4A1-0206FD89B766" class="sect6">SQL Plan Management</h6>
                        <div>
                           <p>Manage SQL execution plans by using SQL plan management to carry out only tested and verified plans.</p>
                           <p><a href="glossary.html#GUID-D75689FA-8F43-4BA6-9764-1BDFA1DB28FC"><span class="xrefglossterm">SQL plan management</span></a> is a preventative mechanism that enables the optimizer to automatically manage execution plans, ensuring that the database uses only verified plans. This mechanism can build a <a href="glossary.html#GUID-F9730C73-DF8D-4360-B0E6-CB8B381D1447"><span class="xrefglossterm">SQL plan baseline</span></a>, which is a set of one or more accepted plans for a repeatable SQL statement. The effect of a baseline is that the optimizer limits its choice to a verified plan in the baseline.
                           </p>
                           <p>Starting in <span>Oracle Database 12c</span>, the database can use adaptive SPM. SPM Evolve Advisor runs daily in the scheduled maintenance window, ranks all unaccepted plans, and then performs test executions of as many plans as possible during the window. SPM Evolve Advisor selects the lowest-cost accepted plan in the SQL plan baseline to compare against each unaccepted plan. If the unaccepted plan performs sufficiently better than the existing accepted plan, then the advisor accepts the plan. If not, the advisor leaves the plan as unaccepted, and updates the last verified date.
                           </p>
                           <div class="infoboxnotealso" id="GUID-67362328-A94E-4818-A4A1-0206FD89B766__GUID-2A4A5C60-4C99-487C-BAC6-2F71B4B47DA1">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="concepts-for-database-administrators.html#GUID-FA659979-25B7-4611-AA8D-48B5404301FE" title="Oracle provides several tools for use in administering a database.">Tools for Database Administrators</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../tgsql/query-optimizer-concepts.html#TGSQL202" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a>to learn about SQL Plan Management
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html id='03412.advanced-materialized-views.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Advanced Materialized Views</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Warehousing Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Warehousing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96243-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="basic-materialized-views.html" title="Previous" type="text/html">
      <link rel="next" href="refreshing-materialized-views.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide">
    <meta name="dcterms.isVersionOf" content="DWHSG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="basic-materialized-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="refreshing-materialized-views.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Warehousing Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-optimizing-dw.html" property="item" typeof="WebPage"><span property="name">Optimizing Data Warehouses</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Advanced Materialized Views</li>
            </ol>
            <a id="GUID-F7394DFE-7CF6-401C-A312-C36603BEB01B" name="GUID-F7394DFE-7CF6-401C-A312-C36603BEB01B"></a>
            
            <h2 id="DWHSG-GUID-F7394DFE-7CF6-401C-A312-C36603BEB01B" class="sect2"><span class="enumeration_chapter">6 </span>Advanced Materialized Views
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discusses advanced topics in using materialized views. It contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-43FA865F-8C02-4B99-9202-49728BAA7687">About Partitioning and Materialized Views</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-32823C98-D6FF-4F78-AE90-A98453C29A2A" title="Creating a materialized view over queries of an analytic view or a hierarchy is not supported.">About Materialized Views in Analytic Processing Environments</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-720A1289-A6A6-4A61-A185-FEC70D0F1E3A">About Materialized Views and Models</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-BC3675D3-C925-4D72-B953-34E7C818EB91">About Security Issues with Materialized Views</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-EFE28ABF-C044-426F-93B8-C0009F591DBF">Invalidating Materialized Views</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-D4412AFE-C4BC-4287-A9BB-104AD5E9678E">Altering Materialized Views</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-materialized-views.html#GUID-0702359B-D379-4299-86C4-2958BCD4381D" title="Real-time materialized views provide fresh data to user queries even when the materialized view is marked as stale.">Using Real-time Materialized Views</a></p>
                  </li>
               </ul>
            </div><a id="DWHSG8227"></a><div class="props_rev_3"><a id="GUID-43FA865F-8C02-4B99-9202-49728BAA7687" name="GUID-43FA865F-8C02-4B99-9202-49728BAA7687"></a><h3 id="DWHSG-GUID-43FA865F-8C02-4B99-9202-49728BAA7687" class="sect3"><span class="enumeration_section">6.1 </span>About Partitioning and Materialized Views
               </h3>
               <div>
                  <p><a id="d25854e81" class="indexterm-anchor"></a><a id="d25854e85" class="indexterm-anchor"></a>Because of the large volume of data held in a data warehouse, partitioning is an extremely useful option when designing a database. Partitioning the fact tables improves scalability, simplifies system administration, and makes it possible to define local indexes that can be efficiently rebuilt. Partitioning the fact tables also improves the opportunity of fast refreshing the materialized view because this may enable partition change tracking (PCT) refresh on the materialized view. Partitioning a materialized view also has benefits for refresh, because the refresh procedure can then use parallel DML in more scenarios and PCT-based refresh can use truncate partition to efficiently maintain the materialized view.
                  </p>
                  <div class="infoboxnotealso" id="GUID-43FA865F-8C02-4B99-9202-49728BAA7687__GUID-C0A88051-183F-4068-9B28-5A058CE6B1FD">
                     <p class="notep1">See Also:</p>
                     <p><a href="../vldbg/partition-concepts.html#VLDBG002" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> for further details about partitioning
                     </p>
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1">About Partition Change Tracking</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-0661E251-15FA-4845-A358-7209D9B22096">Partitioning a Materialized View</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-B609252D-DD65-4617-8F38-B1AB52473AA5">Partitioning a Prebuilt Table</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-5AC25C22-427B-45B8-B949-B05AC8853310">Rolling Materialized Views</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG00324"></a><div class="props_rev_3"><a id="GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1" name="GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1"></a><h4 id="DWHSG-GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1" class="sect4"><span class="enumeration_section">6.1.1 </span>About Partition Change Tracking
                  </h4>
                  <div>
                     <p>It is <a id="d25854e143" class="indexterm-anchor"></a><a id="d25854e145" class="indexterm-anchor"></a>possible and advantageous to track freshness to a finer grain than the entire materialized view. You can achieve this through <a href="glossary.html#GUID-32BF9E11-2C90-446A-9C66-4D0BA8DF7798"><span class="xrefglossterm">partition change tracking (PCT)</span></a>, which is a method to identify which rows in a materialized view are affected by a certain detail table partition. When one or more of the detail tables are partitioned, it may be possible to identify the specific rows in the materialized view that correspond to a modified detail partition(s); those rows become stale when a partition is modified while all other rows remain fresh.
                     </p>
                     <p>You can use PCT to identify which materialized view rows correspond to a particular partition. PCT is also used to support fast refresh after partition maintenance operations on detail tables. For instance, if a detail table partition is truncated or dropped, the affected rows in the materialized view are identified and deleted.</p>
                     <p>Identifying which materialized view rows are fresh or stale, rather than considering the entire materialized view as stale, allows query rewrite to use those rows that are fresh while in <code class="codeph">QUERY_REWRITE_INTEGRITY </code>= <code class="codeph">ENFORCED</code> or <code class="codeph">TRUSTED</code> modes. Several views, such as <code class="codeph">DBA_MVIEW_DETAIL_PARTITION</code>, detail which partitions are stale or fresh. Oracle does not rewrite against partial stale materialized views if partition change tracking on the changed table is enabled by the presence of join dependent expressions in the materialized view.
                     </p>
                     <div class="infoboxnotealso" id="GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1__GUID-C6E771CD-21C4-42DC-871F-C18680BECA1D">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="advanced-materialized-views.html#GUID-F719C3F9-E3D7-4D29-8AC8-E7B0127A0697">About Join Dependent Expression and Partition Change Tracking</a>"</span> for more information
                        </p>
                     </div>
                     <p>Note that, while partition change tracking tracks the staleness on a partition and subpartition level (for composite partitioned tables), the level of granularity for PCT refresh is only the top-level partitioning strategy. Consequently, any change to data in one of the subpartitions of a composite partitioned-table will only mark the single impacted subpartition as stale and have the rest of the table available for rewrite, but the PCT refresh will refresh the whole partition that contains the impacted subpartition.</p>
                     <p>To support PCT, a materialized view must satisfy the following requirements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>At least one of the detail tables referenced by the materialized view must be partitioned.</p>
                        </li>
                        <li>
                           <p>Partitioned tables must use either range, list or composite partitioning with range or list as the top-level partitioning strategy.</p>
                        </li>
                        <li>
                           <p>The top level partition key must consist of only a single column.</p>
                        </li>
                        <li>
                           <p>The materialized view must contain either the partition key column or a partition marker or <code class="codeph">ROWID</code> or join dependent expression of the detail table.
                           </p>
                        </li>
                        <li>
                           <p>If you use a <code class="codeph">GROUP</code> <code class="codeph">BY</code> clause, the partition key column or the partition marker or <code class="codeph">ROWID</code> or join dependent expression must be present in the <code class="codeph">GROUP</code> <code class="codeph">BY</code> clause. 
                           </p>
                        </li>
                        <li>
                           <p>If you use an analytic window function or the <code class="codeph">MODEL</code> clause, the partition key column or the partition marker or <code class="codeph">ROWID</code> or join dependent expression must be present in their respective <code class="codeph">PARTITION</code> <code class="codeph">BY</code> subclauses.
                           </p>
                        </li>
                        <li>
                           <p>Data modifications can only occur on the partitioned table. If PCT refresh is being done for a table which has join dependent expression in the materialized view, then data modifications should not have occurred in any of the join dependent tables.</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">COMPATIBILITY</code> initialization parameter must be a minimum of 9.0.0.0.0.
                           </p>
                        </li>
                     </ul>
                     <p>PCT is not supported for a materialized view that refers to views, remote tables, or outer joins.</p>
                     <div class="infoboxnotealso" id="GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1__GUID-13A32E69-2B80-4385-A3E8-F5B10B9991C0">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_MVIEW.html#ARPLS027" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for details regarding the <code class="codeph">DBMS_MVIEW.PMARKER</code> function and partition markers
                        </p>
                     </div>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-BDF063E9-7769-4272-A54E-C5E199476C46">About Partition Key and Partition Change Tracking</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-F719C3F9-E3D7-4D29-8AC8-E7B0127A0697">About Join Dependent Expression and Partition Change Tracking</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-6E6A5E4F-B8FE-4547-AE5A-DECFE04ABB79">About Partition Markers and Partition Change Tracking</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-462D637E-27E2-4581-BD50-6CA79A854000">About Partial Rewrite in Partition Change Tracking</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG8229"></a><a id="DWHSG8228"></a><div class="props_rev_3"><a id="GUID-BDF063E9-7769-4272-A54E-C5E199476C46" name="GUID-BDF063E9-7769-4272-A54E-C5E199476C46"></a><h5 id="DWHSG-GUID-BDF063E9-7769-4272-A54E-C5E199476C46" class="sect5"><span class="enumeration_section">6.1.1.1 </span>About Partition Key and Partition Change Tracking
                     </h5>
                     <div>
                        <p>Partition change tracking requires sufficient information in the materialized view to be able to correlate a detail row in the source partitioned detail table to the corresponding materialized view row. This can be accomplished by including the detail table partition key columns in the <code class="codeph">SELECT</code> list and, if <code class="codeph">GROUP</code> <code class="codeph">BY</code> is used, in the <code class="codeph">GROUP</code> <code class="codeph">BY</code> list.
                        </p>
                        <p>Consider an example of a materialized view storing daily customer sales. The following example uses the <code class="codeph">sh</code> sample schema and the three detail tables <code class="codeph">sales</code>, <code class="codeph">products</code>, and <code class="codeph">times</code> to create the materialized view. <code class="codeph">sales</code> table is partitioned by <code class="codeph">time_id</code> column and <code class="codeph">products</code> is partitioned by the <code class="codeph">prod_id</code> column. <code class="codeph">times</code> is not a partitioned table.
                        </p>
                        <div class="example" id="GUID-BDF063E9-7769-4272-A54E-C5E199476C46__GUID-57C843AC-0CA8-4C49-92D3-5B9D7964F9ED">
                           <p class="titleinexample">Example 6-1 Materialized View with Partition Key</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON SALES WITH ROWID
   (prod_id, time_id, quantity_sold, amount_sold) INCLUDING NEW VALUES;
CREATE MATERIALIZED VIEW LOG ON PRODUCTS WITH ROWID
   (prod_id, prod_name, prod_desc) INCLUDING NEW VALUES;
CREATE MATERIALIZED VIEW LOG ON TIMES WITH ROWID
   (time_id, calendar_month_name, calendar_year) INCLUDING NEW VALUES;

CREATE MATERIALIZED VIEW cust_dly_sales_mv
BUILD DEFERRED REFRESH FAST ON DEMAND
ENABLE QUERY REWRITE AS
SELECT s.time_id, p.prod_id, p.prod_name, COUNT(*),
         SUM(s.quantity_sold), SUM(s.amount_sold),
         COUNT(s.quantity_sold), COUNT(s.amount_sold)
FROM sales s, products p, times t
WHERE  s.time_id = t.time_id AND s.prod_id = p.prod_id
GROUP BY s.time_id, p.prod_id, p.prod_name;
</pre><p>For <code class="codeph">cust_dly_sales_mv</code>, PCT is enabled on the <code class="codeph">sales</code> table because the partitioning key column <code class="codeph">time_id</code> is in the materialized view.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DWHSG8231"></a><a id="DWHSG8230"></a><div class="props_rev_3"><a id="GUID-F719C3F9-E3D7-4D29-8AC8-E7B0127A0697" name="GUID-F719C3F9-E3D7-4D29-8AC8-E7B0127A0697"></a><h5 id="DWHSG-GUID-F719C3F9-E3D7-4D29-8AC8-E7B0127A0697" class="sect5"><span class="enumeration_section">6.1.1.2 </span>About Join Dependent Expression and Partition Change Tracking
                     </h5>
                     <div>
                        <p>An expression consisting of columns from tables directly or indirectly joined through equijoins to the partitioned detail table on the partitioning key and which is either a dimensional attribute or a dimension hierarchical parent of the joining key is called a join dependent expression. The set of tables in the path to detail table are called join dependent tables. Consider the following:</p><pre class="oac_no_warn" dir="ltr">SELECT s.time_id, t.calendar_month_name 
FROM sales s, times t WHERE s.time_id = t.time_id;
</pre><p>In this query, <code class="codeph">times</code> table is a join dependent table because it is joined to <code class="codeph">sales</code> table on the partitioning key column <code class="codeph">time_id</code>. Moreover, <code class="codeph">calendar_month_name</code> is a dimension hierarchical attribute of <code class="codeph">times.time_id</code>, because <code class="codeph">calendar_month_name</code> is an attribute of <code class="codeph">times.mon_id</code> and <code class="codeph">times.mon_id</code> is a dimension hierarchical parent of <code class="codeph">times.time_id</code>. Hence, the expression <code class="codeph">calendar_month_name</code> from <code class="codeph">times</code> tables is a join dependent expression. Let's consider another example:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT s.time_id, y.calendar_year_name
FROM sales s, times_d d, times_m m, times_y y
WHERE s.time_id = d.time_id AND d.day_id = m.day_id AND m.mon_id = y.mon_id;
</pre><p>Here, <code class="codeph">times</code> table is denormalized into <code class="codeph">times_d</code>, <code class="codeph">times_m</code> and <code class="codeph">times_y</code> tables. The expression <code class="codeph">calendar_year_name</code> from <code class="codeph">times_y</code> table is a join dependent expression and the tables <code class="codeph">times_d</code>, <code class="codeph">times_m</code> and <code class="codeph">times_y</code> are join dependent tables. This is because <code class="codeph">times_y</code> table is joined indirectly through <code class="codeph">times_m</code> and <code class="codeph">times_d</code> tables to sales table on its partitioning key column <code class="codeph">time_id</code>.
                        </p>
                        <p>This lets users create materialized views containing aggregates on some level higher than the partitioning key of the detail table. Consider the following example of materialized view storing monthly customer sales.</p>
                        <div class="example" id="GUID-F719C3F9-E3D7-4D29-8AC8-E7B0127A0697__GUID-88E6DF64-A0B7-4343-BF7A-CEAADF171F4A">
                           <p class="titleinexample">Example 6-2 Creating a Materialized View: Join Dependent Expression</p>
                           <p>Assuming the presence of materialized view logs defined earlier, the materialized view can be created using the following DDL:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW cust_mth_sales_mv
BUILD DEFERRED REFRESH FAST ON DEMAND
ENABLE QUERY REWRITE AS
SELECT t.calendar_month_name, p.prod_id, p.prod_name, COUNT(*),
    SUM(s.quantity_sold), SUM(s.amount_sold),
    COUNT(s.quantity_sold), COUNT(s.amount_sold)
FROM sales s, products p, times t
WHERE  s.time_id = t.time_id AND s.prod_id = p.prod_id
GROUP BY t.calendar_month_name, p.prod_id, p.prod_name;
</pre><p>Here, you can correlate a detail table row to its corresponding materialized view row using the join dependent table <code class="codeph">times</code> and the relationship that <code class="codeph">times.calendar_month_name</code> is a dimensional attribute determined by <code class="codeph">times.time_id</code>. This enables partition change tracking on <code class="codeph">sales</code> table. In addition to this, PCT is enabled on products table because of presence of its partitioning key column <code class="codeph">prod_id</code> in the materialized view.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DWHSG8233"></a><a id="DWHSG8232"></a><div class="props_rev_3"><a id="GUID-6E6A5E4F-B8FE-4547-AE5A-DECFE04ABB79" name="GUID-6E6A5E4F-B8FE-4547-AE5A-DECFE04ABB79"></a><h5 id="DWHSG-GUID-6E6A5E4F-B8FE-4547-AE5A-DECFE04ABB79" class="sect5"><span class="enumeration_section">6.1.1.3 </span>About Partition Markers and Partition Change Tracking
                     </h5>
                     <div>
                        <p>The <code class="codeph">DBMS_MVIEW.PMARKER</code> function is designed to significantly reduce the cardinality (the ratio of distinct values to the number of table rows) of the materialized view (see <a href="advanced-materialized-views.html#GUID-6E6A5E4F-B8FE-4547-AE5A-DECFE04ABB79__i1009199">Example 6-3</a> for an example). The function returns a partition identifier that uniquely identifies the partition or subpartition for a specified row within a specified partitioned table. Therefore, the <code class="codeph">DBMS_MVIEW.PMARKER</code> function is used instead of the partition key column in the <code class="codeph">SELECT</code> and <code class="codeph">GROUP</code> <code class="codeph">BY</code> clauses.
                        </p>
                        <p>Unlike the general case of a PL/SQL function in a materialized view, use of the <code class="codeph">DBMS_MVIEW.PMARKER</code> does not prevent rewrite with that materialized view even when the rewrite mode is <code class="codeph">QUERY_REWRITE_INTEGRITY = ENFORCED</code>.
                        </p>
                        <p>As an example of using the <code class="codeph">PMARKER</code> function, consider calculating a typical number, such as revenue generated by a product category during a given year. If there were 1000 different products sold each month, it would result in 12,000 rows in the materialized view.
                        </p>
                        <div class="example" id="GUID-6E6A5E4F-B8FE-4547-AE5A-DECFE04ABB79__i1009199">
                           <p class="titleinexample">Example 6-3 Using Partition Markers in a Materialized View</p>
                           <p>Consider an example of a materialized view storing the yearly sales revenue for each product category. With approximately hundreds of different products in each product category, including the partitioning key column <code class="codeph">prod_id</code> of the <code class="codeph">products</code> table in the materialized view would substantially increase the cardinality. Instead, this materialized view uses the <code class="codeph">DBMS_MVIEW.PMARKER</code> function, which increases the cardinality of materialized view by a factor of the number of partitions in the <code class="codeph">products</code> table.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW prod_yr_sales_mv
BUILD DEFERRED
REFRESH FAST ON DEMAND
ENABLE QUERY REWRITE AS
SELECT DBMS_MVIEW.PMARKER(p.rowid), p.prod_category, t.calendar_year, COUNT(*),
       SUM(s.amount_sold), SUM(s.quantity_sold),
       COUNT(s.amount_sold), COUNT(s.quantity_sold)
FROM   sales s, products p, times t
WHERE  s.time_id = t.time_id AND s.prod_id = p.prod_id
GROUP BY  DBMS_MVIEW.PMARKER (p.rowid), p.prod_category, t.calendar_year;
</pre><p><code class="codeph">prod_yr_sales_mv</code> includes the <code class="codeph">DBMS_MVIEW.PMARKER</code> function on the <code class="codeph">products</code> table in its <code class="codeph">SELECT</code> list. This enables partition change tracking on <code class="codeph">products</code> table with significantly less cardinality impact than grouping by the partition key column <code class="codeph">prod_id</code>. In this example, the desired level of aggregation for the <code class="codeph">prod_yr_sales_mv</code> is to group by <code class="codeph">products.prod_category</code>. Using the <code class="codeph">DBMS_MVIEW.PMARKER</code> function, the materialized view cardinality is increased only by a factor of the number of partitions in the <code class="codeph">products</code> table. This would generally be significantly less than the cardinality impact of including the partition key columns.
                           </p>
                           <p>Note that partition change tracking is enabled on <code class="codeph">sales</code> table because of presence of join dependent expression <code class="codeph">calendar_year</code> in the <code class="codeph">SELECT</code> list.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DWHSG8234"></a><div class="props_rev_3"><a id="GUID-462D637E-27E2-4581-BD50-6CA79A854000" name="GUID-462D637E-27E2-4581-BD50-6CA79A854000"></a><h5 id="DWHSG-GUID-462D637E-27E2-4581-BD50-6CA79A854000" class="sect5"><span class="enumeration_section">6.1.1.4 </span>About Partial Rewrite in Partition Change Tracking
                     </h5>
                     <div>
                        <p>A subsequent <code class="codeph">INSERT</code> statement adds a new row to the <code class="codeph">sales_part3</code> partition of table <code class="codeph">sales</code>. At this point, because <code class="codeph">cust_dly_sales_mv</code> has PCT available on table <code class="codeph">sales</code> using a partition key, Oracle can identify the stale rows in the materialized view <code class="codeph">cust_dly_sales_mv</code> corresponding to <code class="codeph">sales_part3</code> partition (The other rows are unchanged in their freshness state). Query rewrite cannot identify the fresh portion of materialized views <code class="codeph">cust_mth_sales_mv</code> and <code class="codeph">prod_yr_sales_mv</code> because PCT is available on table sales using join dependent expressions. Query rewrite can determine the fresh portion of a materialized view on changes to a detail table only if PCT is available on the detail table using a partition key or partition marker.
                        </p>
                     </div>
                  </div>
               </div><a id="DWHSG8235"></a><div class="props_rev_3"><a id="GUID-0661E251-15FA-4845-A358-7209D9B22096" name="GUID-0661E251-15FA-4845-A358-7209D9B22096"></a><h4 id="DWHSG-GUID-0661E251-15FA-4845-A358-7209D9B22096" class="sect4"><span class="enumeration_section">6.1.2 </span>Partitioning a Materialized View
                  </h4>
                  <div>
                     <div class="section">
                        <p>Partitioning a materialized view involves defining the materialized view with the standard Oracle partitioning clauses, as illustrated in the following example. This statement creates a materialized view called <code class="codeph">part_sales_mv</code>, which uses three partitions, can be fast refreshed, and is eligible for query rewrite:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW part_sales_mv
PARALLEL PARTITION BY RANGE (time_id)
(PARTITION month1
      VALUES LESS THAN (TO_DATE('31-12-1998', 'DD-MM-YYYY'))
      PCTFREE 0
      STORAGE (INITIAL 8M)
      TABLESPACE sf1,
 PARTITION month2
      VALUES LESS THAN (TO_DATE('31-12-1999', 'DD-MM-YYYY'))
      PCTFREE 0
      STORAGE (INITIAL 8M)
      TABLESPACE sf2,
 PARTITION month3
      VALUES LESS THAN (TO_DATE('31-12-2000', 'DD-MM-YYYY'))
      PCTFREE 0
      STORAGE (INITIAL 8M)
      TABLESPACE sf3)
BUILD DEFERRED
REFRESH FAST
ENABLE QUERY REWRITE AS
SELECT s.cust_id, s.time_id,
  SUM(s.amount_sold) AS sum_dol_sales, SUM(s.quantity_sold) AS sum_unit_sales
  FROM sales s GROUP BY s.time_id, s.cust_id;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG8236"></a><div class="props_rev_3"><a id="GUID-B609252D-DD65-4617-8F38-B1AB52473AA5" name="GUID-B609252D-DD65-4617-8F38-B1AB52473AA5"></a><h4 id="DWHSG-GUID-B609252D-DD65-4617-8F38-B1AB52473AA5" class="sect4"><span class="enumeration_section">6.1.3 </span>Partitioning a Prebuilt Table
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d25854e709" class="indexterm-anchor"></a>Alternatively, a materialized view can be registered to a partitioned prebuilt table. <span class="q">"<a href="advanced-materialized-views.html#GUID-1D0C81F8-6F6D-4E41-BEBC-A0F6B205A3AA">Benefits of Partitioning a Materialized View</a>"</span> describes the benefits of partitioning a prebuilt table. The following example illustrates this:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE part_sales_tab_mv(time_id, cust_id, sum_dollar_sales, sum_unit_sale)
PARALLEL PARTITION BY RANGE (time_id)
(PARTITION month1
      VALUES LESS THAN (TO_DATE('31-12-1998', 'DD-MM-YYYY'))
      PCTFREE 0
      STORAGE (INITIAL 8M)
      TABLESPACE sf1,
 PARTITION month2
      VALUES LESS THAN (TO_DATE('31-12-1999', 'DD-MM-YYYY'))
      PCTFREE 0
      STORAGE (INITIAL 8M)
      TABLESPACE sf2,
PARTITION month3
      VALUES LESS THAN (TO_DATE('31-12-2000', 'DD-MM-YYYY'))
      PCTFREE 0
      STORAGE (INITIAL 8M)
      TABLESPACE sf3)  AS
SELECT s.time_id, s.cust_id, SUM(s.amount_sold) AS sum_dollar_sales, 
  SUM(s.quantity_sold) AS sum_unit_sales
FROM sales s GROUP BY s.time_id, s.cust_id;

CREATE MATERIALIZED VIEW part_sales_tab_mv
ON PREBUILT TABLE
ENABLE QUERY REWRITE AS 
SELECT s.time_id,  s.cust_id, SUM(s.amount_sold) AS sum_dollar_sales, 
     SUM(s.quantity_sold) AS sum_unit_sales 
FROM sales s GROUP BY s.time_id, s.cust_id;
</pre><p>In this example, the table <code class="codeph">part_sales_tab_mv</code> has been partitioned over three months and then the materialized view was registered to use the prebuilt table. This materialized view is eligible for query rewrite because the <code class="codeph">ENABLE</code> <code class="codeph">QUERY</code> <code class="codeph">REWRITE</code> clause has been included.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG8237"></a><div class="props_rev_3"><a id="GUID-1D0C81F8-6F6D-4E41-BEBC-A0F6B205A3AA" name="GUID-1D0C81F8-6F6D-4E41-BEBC-A0F6B205A3AA"></a><h5 id="DWHSG-GUID-1D0C81F8-6F6D-4E41-BEBC-A0F6B205A3AA" class="sect5"><span class="enumeration_section">6.1.3.1 </span>Benefits of Partitioning a Materialized View
                     </h5>
                     <div>
                        <p>When a materialized view is partitioned on the partitioning key column or join dependent expressions of the detail table, it is more efficient to use a <code class="codeph">TRUNCATE</code> <code class="codeph">PARTITION</code> statement to remove one or more partitions of the materialized view during refresh and then repopulate the partition with new data. Oracle Database uses this variant of fast refresh (called PCT refresh) with partition truncation if the following conditions are satisfied in addition to other conditions described in <span class="q">"<a href="advanced-materialized-views.html#GUID-CE717BD7-15B7-4C8B-A172-6C50F5A802E1">About Partition Change Tracking</a>"</span>.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The materialized view is partitioned on the partitioning key column or join dependent expressions of the detail table.</p>
                           </li>
                           <li>
                              <p>If PCT is enabled using either the partitioning key column or join expressions, the materialized view should be range or list partitioned.</p>
                           </li>
                           <li>
                              <p>PCT refresh is nonatomic.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DWHSG8238"></a><div class="props_rev_3"><a id="GUID-5AC25C22-427B-45B8-B949-B05AC8853310" name="GUID-5AC25C22-427B-45B8-B949-B05AC8853310"></a><h4 id="DWHSG-GUID-5AC25C22-427B-45B8-B949-B05AC8853310" class="sect4"><span class="enumeration_section">6.1.4 </span>Rolling Materialized Views
                  </h4>
                  <div>
                     <p>When a data warehouse or data mart contains a time dimension, it is often desirable to archive the oldest information and then reuse the storage for new information. This is called the rolling window scenario. If the fact tables or materialized views include a time dimension and are horizontally partitioned by the time attribute, then management of rolling materialized views can be reduced to a few fast partition maintenance operations provided the unit of data that is rolled out equals, or is at least aligned with, the range partitions.</p>
                     <p>If you plan to have rolling materialized views in your data warehouse, you should determine how frequently you plan to perform partition maintenance operations, and you should plan to partition fact tables and materialized views to reduce the amount of system administration overhead required when old data is aged out. An additional consideration is that you might want to use data compression on your infrequently updated partitions.</p>
                     <p>You are not restricted to using range partitions. For example, a composite partition using both a time value and a key value could result in a good partition solution for your data.</p>
                     <div class="infoboxnotealso" id="GUID-5AC25C22-427B-45B8-B949-B05AC8853310__GUID-8BAE7F52-08F0-4A6B-A4A1-864208143D3D">
                        <p class="notep1">See Also:</p>
                        <p><a href="refreshing-materialized-views.html#GUID-64068234-BDB0-4C12-AE70-75571046A586" title="A materialized view that uses the ON STATEMENT refresh mode is automatically refreshed every time a DML operation is performed on any of the materialized viewâ€™s base tables. Oracle Database performs fast refresh for materialized views that are defined using approximate queries.While redefining a table online using the DBMS_REDEFINITION package, you can perform incremental refresh of fast refreshable materialized views that are dependent on the table being redefined.You can use the complete, fast, or PCT refresh methods to refresh a materialized view that is based on a hybrid partitioned table.">Refreshing Materialized Views</a> for further details regarding <code class="codeph">CONSIDER</code> <code class="codeph">FRESH</code> and for details regarding compression
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG8239"></a><div class="props_rev_3"><a id="GUID-32823C98-D6FF-4F78-AE90-A98453C29A2A" name="GUID-32823C98-D6FF-4F78-AE90-A98453C29A2A"></a><h3 id="DWHSG-GUID-32823C98-D6FF-4F78-AE90-A98453C29A2A" class="sect3"><span class="enumeration_section">6.2 </span>About Materialized Views in Analytic Processing Environments
               </h3>
               <div>
                  <p>This section discusses the concepts used by analytic SQL and how relational databases can handle these types of queries. It also illustrates the best approach for creating materialized views using a common scenario.</p>
                  <p>The following topics contain additional information about materialized views in different environments:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-97D76353-0B1A-4685-868E-CAC915FDE194" title="Creating a materialized view over queries of an analytic view or a hierarchy is not supported.">About Materialized Views and Analytic Views</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A">About Materialized Views and Hierarchical Cubes</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-6C3EE0BD-93F7-4285-9062-A43A4F09272D">Benefits of Partitioning Materialized Views</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-BB7DF1AE-FECA-4D16-B1E7-F64E3792D444">About Compressing Materialized Views</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-materialized-views.html#GUID-C2B7DB22-E6E6-471B-8D9F-BDE94157DA39">About Materialized Views with Set Operators</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-97D76353-0B1A-4685-868E-CAC915FDE194" name="GUID-97D76353-0B1A-4685-868E-CAC915FDE194"></a><h4 id="DWHSG-GUID-97D76353-0B1A-4685-868E-CAC915FDE194" class="sect4"><span class="enumeration_section">6.2.1 </span>About Materialized Views and Analytic Views
                  </h4>
                  <div>
                     <p>Creating a materialized view over queries of an analytic view or a hierarchy is not supported.</p>
                  </div>
               </div><a id="DWHSG8241"></a><a id="DWHSG8242"></a><a id="DWHSG8240"></a><div class="props_rev_3"><a id="GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A" name="GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A"></a><h4 id="DWHSG-GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A" class="sect4"><span class="enumeration_section">6.2.2 </span>About Materialized Views and Hierarchical Cubes
                  </h4>
                  <div>
                     <p>While data warehouse environments typically view data in the form of a star schema, for analytical SQL queries, data is held in the form of a hierarchical cube. A hierarchical cube includes the data aggregated along the rollup hierarchy of each of its dimensions and these aggregations are combined across dimensions. It includes the typical set of aggregations needed for business intelligence queries.</p>
                     <div class="example" id="GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A__GUID-C915B982-A86F-4A53-8A1E-68BB537E1152">
                        <p class="titleinexample">Example 6-4 Hierarchical Cube</p>
                        <p>Consider a sales data set with two dimensions, each of which has a four-level hierarchy:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Time, which contains (all times), year, quarter, and month.</p>
                           </li>
                           <li>
                              <p>Product, which contains (all products), division, brand, and item.</p>
                           </li>
                        </ul>
                        <p>This means there are 16 aggregate groups in the hierarchical cube. This is because the four levels of time are multiplied by four levels of product to produce the cube. <a href="advanced-materialized-views.html#GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A__I1006832" title="This table illustrates the hierarchies for the Time and Product dimensions.">Table 6-1</a> shows the four levels of each dimension.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-0EF20810-E53B-4A81-82BE-61A0FB90086A__I1006832">
                           <p class="titleintable">Table 6-1 ROLLUP By Time and Product</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ROLLUP By Time and Product" summary="This table illustrates the hierarchies for the Time and Product dimensions." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d25854e984">ROLLUP By Time</th>
                                    <th align="left" valign="bottom" width="70%" id="d25854e987">ROLLUP By Product</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d25854e992" headers="d25854e984 ">
                                       <p>year, quarter, month</p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d25854e992 d25854e987 ">
                                       <p>division, brand, item</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d25854e999" headers="d25854e984 ">
                                       <p>year, quarter</p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d25854e999 d25854e987 ">
                                       <p>division, brand</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d25854e1006" headers="d25854e984 ">
                                       <p>year</p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d25854e1006 d25854e987 ">
                                       <p>division</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d25854e1013" headers="d25854e984 ">
                                       <p>all times</p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d25854e1013 d25854e987 ">
                                       <p>all products</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Note that as you increase the number of dimensions and levels, the number of groups to calculate increases dramatically. This example involves 16 groups, but if you were to add just two more dimensions with the same number of levels, you would have 4 x 4 x 4 x 4 = 256 different groups. Also, consider that a similar increase in groups occurs if you have multiple hierarchies in your dimensions. For example, the time dimension might have an additional hierarchy of fiscal month rolling up to fiscal quarter and then fiscal year. Handling the explosion of groups has historically been the major challenge in data storage for online analytical processing systems.</p>
                        <p>Typical online analytical queries <a href="glossary.html#GUID-F7CC0204-822C-4C1F-AE7D-A7CC609C05C0"><span class="xrefglossterm">slice and dice</span></a> different parts of the cube comparing aggregations from one level to aggregation from another level. For instance, a query might find sales of the grocery division for the month of January, 2002 and compare them with total sales of the grocery division for all of 2001.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG8243"></a><div class="props_rev_3"><a id="GUID-6C3EE0BD-93F7-4285-9062-A43A4F09272D" name="GUID-6C3EE0BD-93F7-4285-9062-A43A4F09272D"></a><h4 id="DWHSG-GUID-6C3EE0BD-93F7-4285-9062-A43A4F09272D" class="sect4"><span class="enumeration_section">6.2.3 </span>Benefits of Partitioning Materialized Views
                  </h4>
                  <div>
                     <p>Materialized views with multiple aggregate groups give their best performance for refresh and query rewrite when partitioned appropriately.</p>
                     <p>PCT refresh in a rolling window scenario requires partitioning at the top level on some level from the time dimension. And, partition pruning for queries rewritten against this materialized view requires partitioning on <code class="codeph">GROUPING_ID</code> column. Hence, the most effective partitioning scheme for these materialized views is to use composite partitioning (range-list on (<code class="codeph">time</code>, <code class="codeph">GROUPING_ID</code>) columns). By partitioning the materialized views this way, you enable:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>PCT refresh, thereby improving refresh performance.</p>
                        </li>
                        <li>
                           <p>Partition pruning: only relevant aggregate groups are accessed, thereby greatly reducing the query processing cost.</p>
                        </li>
                     </ul>
                     <p>If you do not want to use PCT refresh, you can just partition by list on <code class="codeph">GROUPING_ID</code> column.
                     </p>
                  </div>
               </div><a id="DWHSG8244"></a><div class="props_rev_3"><a id="GUID-BB7DF1AE-FECA-4D16-B1E7-F64E3792D444" name="GUID-BB7DF1AE-FECA-4D16-B1E7-F64E3792D444"></a><h4 id="DWHSG-GUID-BB7DF1AE-FECA-4D16-B1E7-F64E3792D444" class="sect4"><span class="enumeration_section">6.2.4 </span>About Compressing Materialized Views
                  </h4>
                  <div>
                     <p>You should consider data compression when using highly redundant data, such as tables with many foreign keys. In particular, materialized views created with the <code class="codeph">ROLLUP</code> clause are likely candidates.
                     </p>
                     <div class="infoboxnotealso" id="GUID-BB7DF1AE-FECA-4D16-B1E7-F64E3792D444__GUID-D26EC127-092A-4EA1-A934-D93A63CA2951">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/ALTER-MATERIALIZED-VIEW.html#SQLRF52876" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for data compression syntax and restrictions
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="basic-materialized-views.html#GUID-E75B9A93-BEFB-42A7-B9CB-38FA48EBB266">About Storage And Table Compression for Materialized Views</a>"</span> for details regarding compression
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DWHSG8245"></a><div class="props_rev_3"><a id="GUID-C2B7DB22-E6E6-471B-8D9F-BDE94157DA39" name="GUID-C2B7DB22-E6E6-471B-8D9F-BDE94157DA39"></a><h4 id="DWHSG-GUID-C2B7DB22-E6E6-471B-8D9F-BDE94157DA39" class="sect4"><span class="enumeration_section">6.2.5 </span>About Materialized Views with Set Operators
                  </h4>
                  <div>
                     <p>Oracle Database provides support for <a id="d25854e1136" class="indexterm-anchor"></a><a id="d25854e1140" class="indexterm-anchor"></a>materialized views whose defining query involves set operators. Materialized views with set operators can now be created enabled for query rewrite. You can refresh the materialized view using either <code class="codeph">ON</code> <code class="codeph">COMMIT</code> or <code class="codeph">ON</code> <code class="codeph">DEMAND</code> refresh.
                     </p>
                     <p>Fast refresh is supported if the defining query has the <code class="codeph">UNION</code> <code class="codeph">ALL</code> operator at the top level and each query block in the <code class="codeph">UNION</code> <code class="codeph">ALL</code>, meets the requirements of a materialized view with aggregates or materialized view with joins only. Further, the materialized view must include a constant column (known as a <code class="codeph">UNION</code> <code class="codeph">ALL</code> marker) that has a distinct value in each query block, which, in the following example, is columns <code class="codeph">1 marker</code> and <code class="codeph">2 marker</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C2B7DB22-E6E6-471B-8D9F-BDE94157DA39__GUID-B5D588FD-4A69-47CE-984B-DAEDF545DA81">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="basic-materialized-views.html#GUID-81A544CA-14C4-41B1-ACC1-5FF7960F18A6">Restrictions on Fast Refresh on Materialized Views with UNION ALL</a>"</span> for detailed restrictions on fast refresh for materialized views with <code class="codeph">UNION</code> <code class="codeph">ALL</code>.
                        </p>
                     </div>
                  </div><a id="DWHSG8247"></a><a id="DWHSG8248"></a><a id="DWHSG8246"></a><div class="props_rev_3"><a id="GUID-5A727B3A-ADD4-4EA2-B73F-5AC0789B406E" name="GUID-5A727B3A-ADD4-4EA2-B73F-5AC0789B406E"></a><h5 id="DWHSG-GUID-5A727B3A-ADD4-4EA2-B73F-5AC0789B406E" class="sect5"><span class="enumeration_section">6.2.5.1 </span>Examples of Materialized Views Using UNION ALL
                     </h5>
                     <div>
                        <div class="section">
                           <p>The following examples illustrate creation of fast refreshable materialized views involving <code class="codeph">UNION</code> <code class="codeph">ALL</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-5A727B3A-ADD4-4EA2-B73F-5AC0789B406E__GUID-0AAA7B44-0790-4B59-98E4-5D47DC0BC6B1">
                           <p class="titleinexample">Example 6-5 Materialized View Using UNION ALL with Two Join Views</p>
                           <p>To create a <code class="codeph">UNION</code> <code class="codeph">ALL</code> materialized view with two join views, the materialized view logs must have the rowid column and, in the following example, the <code class="codeph">UNION</code> <code class="codeph">ALL</code> marker is the columns, <code class="codeph">1 marker</code> and <code class="codeph">2 marker</code>.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON sales WITH ROWID;
CREATE MATERIALIZED VIEW LOG ON customers WITH ROWID;

CREATE MATERIALIZED VIEW unionall_sales_cust_joins_mv
REFRESH FAST ON COMMIT 
ENABLE QUERY REWRITE AS
(SELECT c.rowid crid, s.rowid srid, c.cust_id, s.amount_sold, 1 marker
FROM sales s, customers c
WHERE s.cust_id = c.cust_id AND c.cust_last_name = 'Smith')
UNION ALL
(SELECT c.rowid crid, s.rowid srid, c.cust_id, s.amount_sold, 2 marker
FROM sales s, customers c
WHERE s.cust_id = c.cust_id AND c.cust_last_name = 'Brown');</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5A727B3A-ADD4-4EA2-B73F-5AC0789B406E__GUID-CE59DA03-7059-4C7B-A5E4-25C2341C64DC">
                           <p class="titleinexample">Example 6-6 Materialized View Using UNION ALL with Joins and Aggregates</p>
                           <p>The following example shows a <code class="codeph">UNION</code> <code class="codeph">ALL</code> of a materialized view with joins and a materialized view with aggregates. A couple of things can be noted in this example. Nulls or constants can be used to ensure that the data types of the corresponding <code class="codeph">SELECT</code> list columns match. Also, the <code class="codeph">UNION</code> <code class="codeph">ALL</code> marker column can be a string literal, which is <code class="codeph">'Year' umarker</code>, <code class="codeph">'Quarter' umarker</code>, or <code class="codeph">'Daily' umarker</code> in the following example:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON sales WITH ROWID, SEQUENCE
(amount_sold, time_id)
INCLUDING NEW VALUES;

CREATE MATERIALIZED VIEW LOG ON times WITH ROWID, SEQUENCE 
  (time_id, fiscal_year, fiscal_quarter_number, day_number_in_week) 
INCLUDING NEW VALUES;

CREATE MATERIALIZED VIEW unionall_sales_mix_mv
REFRESH FAST ON DEMAND AS
(SELECT 'Year' umarker, NULL, NULL, t.fiscal_year, 
        SUM(s.amount_sold) amt, COUNT(s.amount_sold), COUNT(*)
 FROM sales s, times t
 WHERE s.time_id = t.time_id 
 GROUP BY t.fiscal_year)
UNION ALL
(SELECT 'Quarter' umarker, NULL, NULL, t.fiscal_quarter_number, 
        SUM(s.amount_sold) amt, COUNT(s.amount_sold), COUNT(*)
FROM sales s, times t 
WHERE s.time_id = t.time_id and t.fiscal_year = 2001
GROUP BY t.fiscal_quarter_number)
UNION ALL
(SELECT 'Daily' umarker, s.rowid rid, t.rowid rid2, t.day_number_in_week,
        s.amount_sold amt, 1, 1
FROM sales s, times t
WHERE s.time_id = t.time_id 
AND t.time_id between '01-Jan-01' AND '01-Dec-31');</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG8249"></a><div class="props_rev_3"><a id="GUID-720A1289-A6A6-4A61-A185-FEC70D0F1E3A" name="GUID-720A1289-A6A6-4A61-A185-FEC70D0F1E3A"></a><h3 id="DWHSG-GUID-720A1289-A6A6-4A61-A185-FEC70D0F1E3A" class="sect3"><span class="enumeration_section">6.3 </span>About Materialized Views and Models
               </h3>
               <div>
                  <p>Models, which provide array-based computations in SQL, can be used in materialized views. Because the <code class="codeph">MODEL</code> clause calculations can be expensive, you may want to use two separate materialized views: one for the model calculations and one for the <code class="codeph">SELECT</code> ... <code class="codeph">GROUP</code> <code class="codeph">BY</code> query. For example, instead of using one, long materialized view, you could create the following materialized views:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW my_groupby_mv
REFRESH FAST
ENABLE QUERY REWRITE AS
SELECT country_name country, prod_name prod, calendar_year year,
  SUM(amount_sold) sale, COUNT(amount_sold) cnt, COUNT(*) cntstr 
FROM sales, times, customers, countries, products
WHERE sales.time_id = times.time_id AND
      sales.prod_id = products.prod_id AND
      sales.cust_id = customers.cust_id AND
      customers.country_id = countries.country_id
GROUP BY country_name, prod_name, calendar_year;

CREATE MATERIALIZED VIEW my_model_mv
ENABLE QUERY REWRITE AS
SELECT country, prod, year, sale, cnt
FROM my_groupby_mv
MODEL PARTITION BY(country) DIMENSION BY(prod, year)
   MEASURES(sale s) IGNORE NAV
(s['Shorts', 2000] =  0.2 * AVG(s)[CV(), year BETWEEN 1996 AND 1999],
s['Kids Pajama', 2000] = 0.5 * AVG(s)[CV(), year BETWEEN 1995 AND 1999],
s['Boys Pajama', 2000] = 0.6 * AVG(s)[CV(), year BETWEEN 1994 AND 1999],
...
&lt;hundreds of other update rules&gt;);
</pre><p>By using two materialized views, you can incrementally maintain the materialized view <code class="codeph">my_groupby_mv</code>. The materialized view <code class="codeph">my_model_mv</code> is on a much smaller data set because it is built on <code class="codeph">my_groupby_mv</code> and can be maintained by a complete refresh.
                  </p>
                  <p>Materialized views with models can use complete refresh or PCT refresh only, and are available for partial text query rewrite only.</p>
                  <div class="infoboxnotealso" id="GUID-720A1289-A6A6-4A61-A185-FEC70D0F1E3A__GUID-A8CBF5AB-82C5-4793-BF59-F7C8E7C4F82B">
                     <p class="notep1">See Also:</p>
                     <p><a href="sql-modeling-data-warehouses.html#GUID-538F78AA-9BF3-46F2-93D1-39A8739B3237">SQL for Modeling</a> for further details about model calculations
                     </p>
                  </div>
               </div>
            </div><a id="DWHSG8251"></a><div class="props_rev_3"><a id="GUID-BC3675D3-C925-4D72-B953-34E7C818EB91" name="GUID-BC3675D3-C925-4D72-B953-34E7C818EB91"></a><h3 id="DWHSG-GUID-BC3675D3-C925-4D72-B953-34E7C818EB91" class="sect3"><span class="enumeration_section">6.4 </span>About Security Issues with Materialized Views
               </h3>
               <div>
                  <p><a id="d25854e1363" class="indexterm-anchor"></a>To create a <a id="d25854e1368" class="indexterm-anchor"></a>materialized view in your own schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> privilege and the <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege to any tables referenced that are in another schema. To create a materialized view in another schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> privilege and the owner of the materialized view needs <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges to the tables referenced if they are from another schema. Moreover, if you enable query rewrite on a materialized view that references tables outside your schema, you must have the <code class="codeph">GLOBAL</code> <code class="codeph">QUERY</code> <code class="codeph">REWRITE</code> privilege or the <code class="codeph">QUERY</code> <code class="codeph">REWRITE</code> object privilege on each table outside your schema.
                  </p>
                  <p>If the materialized view is on a prebuilt container, the creator, if different from the owner, must have the <code class="codeph">READ WITH GRANT</code> or <code class="codeph">SELECT</code> <code class="codeph">WITH</code> <code class="codeph">GRANT</code> privilege on the container table.
                  </p>
                  <p>If you continue to get a privilege error while trying to create a materialized view and you believe that all the required privileges have been granted, then the problem is most likely due to a privilege not being granted explicitly and trying to inherit the privilege from a role instead. The owner of the materialized view must have explicitly been granted <code class="codeph">SELECT</code> or <code class="codeph">READ</code> access to the referenced tables if the tables are in a different schema.
                  </p>
                  <p>If the materialized view is being created with <code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code> specified, then the owner of the materialized view requires an additional privilege if any of the tables in the defining query are outside the owner's schema. In that case, the owner requires the <code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code> system privilege or the <code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code> object privilege on each table outside the owner's schema.
                  </p>
                  <div class="infoboxnotealso" id="GUID-BC3675D3-C925-4D72-B953-34E7C818EB91__GUID-1F2568A6-4F99-40D4-9C11-24AE6998C303">
                     <p class="notep1">See Also:</p>
                     <p><a href="advanced-materialized-views.html#GUID-B0671C37-8287-46D6-A3D9-236DC7917775">Querying Materialized Views with Virtual Private Database (VPD)</a></p>
                  </div>
               </div><a id="DWHSG8252"></a><div class="props_rev_3"><a id="GUID-B0671C37-8287-46D6-A3D9-236DC7917775" name="GUID-B0671C37-8287-46D6-A3D9-236DC7917775"></a><h4 id="DWHSG-GUID-B0671C37-8287-46D6-A3D9-236DC7917775" class="sect4"><span class="enumeration_section">6.4.1 </span>Querying Materialized Views with Virtual Private Database (VPD)
                  </h4>
                  <div>
                     <p>For all security concerns, a materialized view serves as a view that happens to be materialized when you are directly querying the materialized view. When creating a view or materialized view, the owner must have the necessary permissions to access the underlying base relations of the view or materialized view that they are creating. With these permissions, the owner can publish a view or materialized view that other users can access, assuming they have been granted access to the view or materialized view.</p>
                     <p>Using materialized views with Virtual Private Database is similar. When you create a materialized view, there must not be any VPD policies in effect against the base relations of the materialized view for the owner of the materialized view. If any VPD policies exist, then you must use the <code class="codeph">USING TRUSTED CONSTRAINTS</code> clause when creating the materialized view. The owner of the materialized view may establish a VPD policy on the new materialized view. Users who access the materialized view are subject to the VPD policy on the materialized view. However, they are not additionally subject to the VPD policies of the underlying base relations of the materialized view, because security processing of the underlying base relations is performed against the owner of the materialized view.
                     </p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-57A3CDF3-78C5-4168-A191-21379B2AA7FE">Using Query Rewrite with Virtual Private Database</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-8DAFE057-C831-4C8C-9A4E-65E7D0F80034">Restrictions with Materialized Views and Virtual Private Database</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG8253"></a><div class="props_rev_3"><a id="GUID-57A3CDF3-78C5-4168-A191-21379B2AA7FE" name="GUID-57A3CDF3-78C5-4168-A191-21379B2AA7FE"></a><h5 id="DWHSG-GUID-57A3CDF3-78C5-4168-A191-21379B2AA7FE" class="sect5"><span class="enumeration_section">6.4.1.1 </span>Using Query Rewrite with Virtual Private Database
                     </h5>
                     <div>
                        <p>When you <a id="d25854e1550" class="indexterm-anchor"></a>access a materialized view using query rewrite, the materialized view serves as an access structure much like an index. As such, the security implications for materialized views accessed in this way are much the same as for indexes: all security checks are performed against the relations specified in the request query. The index or materialized view is used to speed the performance of accessing the data, not provide any additional security checks. Thus, the presence of the index or materialized view presents no additional security checking.
                        </p>
                        <p>This holds true when you are accessing a materialized view using query rewrite in the presence of VPD. The request query is subject to any VPD policies that are present against the relations specified in the query. Query rewrite may rewrite the query to use a materialize view instead of accessing the detail relations, but only if it can guarantee to deliver exactly the same rows as if the rewrite had not occurred. Specifically, query rewrite must retain and respect any VPD policies against the relations specified in the request query. However, any VPD policies against the materialized view itself do not have effect when the materialized view is accessed using query rewrite. This is because the data is already protected by the VPD policies against the relations in the request query.</p>
                     </div>
                  </div><a id="DWHSG8254"></a><div class="props_rev_3"><a id="GUID-8DAFE057-C831-4C8C-9A4E-65E7D0F80034" name="GUID-8DAFE057-C831-4C8C-9A4E-65E7D0F80034"></a><h5 id="DWHSG-GUID-8DAFE057-C831-4C8C-9A4E-65E7D0F80034" class="sect5"><span class="enumeration_section">6.4.1.2 </span>Restrictions with Materialized Views and Virtual Private Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>Query <a id="d25854e1580" class="indexterm-anchor"></a>rewrite does not use its full and partial text match modes with request queries that include relations with active VPD policies, but it does use general rewrite methods. This is because VPD transparently transforms the request query to affect the VPD policy. If query rewrite were to perform a text match transformation against a request query with a VPD policy, the effect would be to negate the VPD policy.
                           </p>
                           <p>In addition, when you create or refresh a materialized view, the owner of the materialized view must not have any active VPD policies in effect against the base relations of the materialized view, or an error is returned. The materialized view owner must either have no such VPD policies, or any such policy must return <code class="codeph">NULL</code>. This is because VPD would transparently modify the defining query of the materialized view such that the set of rows contained by the materialized view would not match the set of rows indicated by the materialized view definition.
                           </p>
                           <p>One way to work around this restriction yet still create a materialized view containing the desired VPD-specified subset of rows is to create the materialized view in a user account that has no active VPD policies against the detail relations of the materialized view. In addition, you can include a predicate in the <code class="codeph">WHERE</code> clause of the materialized view that embodies the effect of the VPD policy. When query rewrite attempts to rewrite a request query that has that VPD policy, it matches up the VPD-generated predicate on the request query with the predicate you directly specify when you create the materialized view.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG8250"></a><div class="props_rev_3"><a id="GUID-EFE28ABF-C044-426F-93B8-C0009F591DBF" name="GUID-EFE28ABF-C044-426F-93B8-C0009F591DBF"></a><h3 id="DWHSG-GUID-EFE28ABF-C044-426F-93B8-C0009F591DBF" class="sect3"><span class="enumeration_section">6.5 </span>Invalidating Materialized Views
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d25854e1617" class="indexterm-anchor"></a><a id="d25854e1621" class="indexterm-anchor"></a>Dependencies related to materialized views are automatically maintained to ensure correct operation. When a materialized view is created, the materialized view depends on the detail tables referenced in its definition. Any DML operation, such as an <code class="codeph">INSERT</code>, or <code class="codeph">DELETE</code>, <code class="codeph">UPDATE</code>, or DDL operation on any dependency in the materialized view will cause it to become invalid. To revalidate a materialized view, use the <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">COMPILE</code> statement.
                     </p>
                     <p>A materialized view is automatically revalidated when it is referenced. In many cases, the materialized view will be successfully and transparently revalidated. However, if a column has been dropped in a table referenced by a materialized view or the owner of the materialized view did not have one of the query rewrite privileges and that privilege has now been granted to the owner, you should use the following statement to revalidate the materialized view:</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED VIEW mview_name COMPILE;
</pre><p>The state of a materialized view can be checked by querying the data dictionary views <code class="codeph">USER_MVIEWS</code> or <code class="codeph">ALL_MVIEWS</code>. The column <code class="codeph">STALENESS</code> will show one of the values <code class="codeph">FRESH</code>, <code class="codeph">STALE</code>, <code class="codeph">UNUSABLE</code>, <code class="codeph">UNKNOWN</code>, <code class="codeph">UNDEFINED</code>, or <code class="codeph">NEEDS_COMPILE</code> to indicate whether the materialized view can be used. The state is maintained automatically. However, if the staleness of a materialized view is marked as <code class="codeph">NEEDS_COMPILE</code>, you could issue an <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> ... <code class="codeph">COMPILE</code> statement to validate the materialized view and get the correct staleness state. If the state of a materialized view is <code class="codeph">UNUSABLE</code>, you must perform a complete refresh to bring the materialized view back to the <code class="codeph">FRESH</code> state. If the materialized view is based on a prebuilt table that you never refresh, you must drop and re-create the materialized view. The staleness of remote materialized views is not tracked. Thus, if you use remote materialized views for rewrite, they are considered to be trusted.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DWHSG8255"></a><div class="props_rev_3"><a id="GUID-D4412AFE-C4BC-4287-A9BB-104AD5E9678E" name="GUID-D4412AFE-C4BC-4287-A9BB-104AD5E9678E"></a><h3 id="DWHSG-GUID-D4412AFE-C4BC-4287-A9BB-104AD5E9678E" class="sect3"><span class="enumeration_section">6.6 </span>Altering Materialized Views
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d25854e1727" class="indexterm-anchor"></a>The following modifications can be made to a materialized view:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Change its refresh option (<code class="codeph">FAST/FORCE/COMPLETE/NEVER</code>).
                           </p>
                        </li>
                        <li>
                           <p>Change its refresh mode (<code class="codeph">ON</code> <code class="codeph">COMMIT/ON</code> <code class="codeph">DEMAND</code>).
                           </p>
                        </li>
                        <li>
                           <p>Recompile it.</p>
                        </li>
                        <li>
                           <p>Enable or disable its use for query rewrite.</p>
                        </li>
                        <li>
                           <p>Consider it fresh.</p>
                        </li>
                        <li>
                           <p>Partition maintenance operations.</p>
                        </li>
                        <li>
                           <p>Enable on-query computation</p>
                        </li>
                     </ul>
                     <p>All other changes are achieved by dropping and then re-creating the materialized view. The success of a modification operation depends on whether the requirement for the change is satisfied. For example, a fast refresh succeeds if materialized view logs exist on all the base tables.</p>
                     <p>The <code class="codeph">COMPILE</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement can be used when the materialized view has been invalidated. This compile process is quick, and allows the materialized view to be used by query rewrite again.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D4412AFE-C4BC-4287-A9BB-104AD5E9678E__GUID-FE37E5E9-CD02-4786-BA38-AE9F48C02595">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/SQL-Statements-ALTER-LIBRARY-to-ALTER-SESSION.html#SQLRF009" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for further information about the <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="advanced-materialized-views.html#GUID-EFE28ABF-C044-426F-93B8-C0009F591DBF">Invalidating Materialized Views</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-0702359B-D379-4299-86C4-2958BCD4381D" name="GUID-0702359B-D379-4299-86C4-2958BCD4381D"></a><h3 id="DWHSG-GUID-0702359B-D379-4299-86C4-2958BCD4381D" class="sect3"><span class="enumeration_section">6.7 </span>Using Real-time Materialized Views
               </h3>
               <div>
                  <p>Real-time materialized views provide fresh data to user queries even when the materialized view is marked as stale.</p>
                  <div class="infoboxnotealso" id="GUID-0702359B-D379-4299-86C4-2958BCD4381D__GUID-5884C45D-BD87-448E-AED6-E780C02360AD">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-17A24989-32A3-4B4D-BBF1-2491A932CB2E" title="A real-time materialized view is a type of materialized view that provides fresh data to user queries even when the materialized view is not in sync with its base tables because of data changes.">Overview of Real-time Materialized Views</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-36EF3539-D946-4DE3-8C12-4AD0076F9A92" title="To create a real-time materialized view, use the ON QUERY COMPUTATION clause in the CREATE MATERIALIZED VIEW statement.">Creating Real-time Materialized Views</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-D0C3D49B-9577-43C7-9ECC-11A7DEEFBBE0" title="If the prerequisites for a real-time materialized view are met, then an existing materialized view can be converted into a real-time materialized view by altering its definition and enabling on-query computation.">Converting an Existing Materialized View into a Real-time Materialized View</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-717B8857-DCB7-4BFB-A542-8074D6FE8D73" title="For the query rewrite mechanism to rewrite a user query to use real-time materialized views, query rewrite must be enabled for the real-time materialized view.">Enabling Query Rewrite to Use Real-time Materialized Views</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-BF04B46B-E71D-4619-92B4-47F5CC6964F4" title="Query rewrite can use a real-time materialized view to provide results to user queries, even if the real-time materialized view is stale, if query rewrite is enabled for the real-time materialized view. A nested real-time materialized view is eligible for query rewrite only if all its base real-time materialized views are fresh.">Using Real-time Materialized Views During Query Rewrite</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-23657E4E-C3DF-4757-BE8A-22CC394D6A5E" title="You can access a real-time materialized view directly by referencing the name of the real-time materialized view in a query.">Using Real-time Materialized Views for Direct Query Access</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-84838620-20F6-4929-85BD-FCB2D9603710" title="The ON_QUERY_COMPUTATION column in the data dictionary views ALL_MVIEWS, DBA_MVIEWS, and USER_MVIEWS indicates if a materialized view is a real-time materialized view.">Listing Real-time Materialized Views</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-materialized-views.html#GUID-D4EA2570-2984-4F10-9FC7-B4DA800DE1A5" title="To obtain better performance for user queries that use a real-time materialized view, you can follow certain guidelines.">Improving Real-time Materialized Views Performance</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-17A24989-32A3-4B4D-BBF1-2491A932CB2E" name="GUID-17A24989-32A3-4B4D-BBF1-2491A932CB2E"></a><h4 id="DWHSG-GUID-17A24989-32A3-4B4D-BBF1-2491A932CB2E" class="sect4"><span class="enumeration_section">6.7.1 </span>Overview of Real-time Materialized Views
                  </h4>
                  <div>
                     <p>A real-time materialized view is a type of materialized view that provides fresh data to user queries even when the materialized view is not in sync with its base tables because of data changes.</p>
                     <p>Unless a SQL session is set to stale tolerated mode, a materialized view that is marked stale cannot be used for query rewrite. Organizations that require real-time data typically use the <code class="codeph">ON COMMIT</code> refresh mode to ensure that the materialized view is updated with changes made to the base tables. However, when DML changes to the base tables are huge and very frequent, this mode may result in resource contention and reduced refresh performance. Real-time materialized views provide a lightweight solution for obtaining fresh data from stale materialized views by recomputing the data on the fly.
                     </p>
                     <p>Real-time materialized views can use any available out-of-place refresh method including log-based or PCT based refresh. They can be used either with on demand or scheduled automatic refresh, but not with automatic refresh specified using the <code class="codeph">ON COMMIT</code> clause.  
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-17A24989-32A3-4B4D-BBF1-2491A932CB2E__GUID-7BF29E2F-BE91-44CD-B756-77D8C564D819">Advantages of Real-time Materialized Views</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Provides improved availability for materialized views</p>
                           </li>
                           <li>
                              <p>Provides fresh data for user queries that access a materialized view that may be stale</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17A24989-32A3-4B4D-BBF1-2491A932CB2E__GUID-3A57CD0F-6878-4803-A912-F175BA445E66">How Do Real-time Materialized Views Work?</p>
                        <p>Real-time materialized views use a technique called <span class="italic">on-query computation</span> to provide fresh data with stale materialized views. When a query accesses a real-time materialized view, Oracle Database first checks if the real-time materialized view is marked as stale. If it is not stale, then the required data is provided using the real-time materialized view as it is. If the real-time materialized view is marked as stale, then the on-query computation technique is used to generate the fresh data and return the correct query result.
                        </p>
                        <p>Real-time materialized views use a technique that is similar log-based refresh to provide fresh data with stale materialized view. They combine the existing data with the changes that are recorded in change logs to obtain the latest data. However, unlike log-based refresh, real-time materialized views do not use the materialized view logs to update the data in the real-time materialized view. Instead, when a query accesses a stale real-time materialized view, the data that is recomputed using on-query computation is used directly to answer the query.</p>
                        <p>A real-time materialized view is created by using the <code class="codeph">ON QUERY COMPUTATION</code> clause in the materialized view definition.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-BB11FFAB-771D-44AD-89D7-0231031D7ECA" name="GUID-BB11FFAB-771D-44AD-89D7-0231031D7ECA"></a><h5 id="DWHSG-GUID-BB11FFAB-771D-44AD-89D7-0231031D7ECA" class="sect5"><span class="enumeration_section">6.7.1.1 </span>Restrictions on Using Real-time Materialized Views
                     </h5>
                     <div>
                        <p>Using real-time materialized views is subject to certain restrictions.</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Real-time materialized views cannot be used when:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>one or more materialized view logs created on the base tables are either unusable or nonexistent.</p>
                                 </li>
                                 <li>
                                    <p>out-of-place, log-based or PCT refresh is not feasible for the change scenarios.</p>
                                 </li>
                                 <li>
                                    <p>automatic refresh is specified using the <code class="codeph">ON COMMIT</code> clause.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If a real-time materialized view is a nested materialized view that is defined on top of one or more base materialized views, then query rewrite occurs only if all the base materialized views are fresh. If one or more base materialized views are stale, then query rewrite is not performed using this real-time materialized view.</p>
                           </li>
                        </ul>
                        <p>The cursors of queries that directly access real-time materialized views are not shared.</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-110EAD92-6D4B-4E46-ADB0-C32D964B75D0" name="GUID-110EAD92-6D4B-4E46-ADB0-C32D964B75D0"></a><h5 id="DWHSG-GUID-110EAD92-6D4B-4E46-ADB0-C32D964B75D0" class="sect5"><span class="enumeration_section">6.7.1.2 </span>About Accessing Real-time Materialized Views
                     </h5>
                     <div>
                        <p>As with materialized views, multiple methods exist to access data stored in real-time materialized views.</p>
                        <p></p>
                        <p>Data stored in real-time materialized views can be accessed in one of the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Query rewrite</p>
                              <p>A user query that is similar to the real-time materialized view definition is rewritten to use the real-time materialized view.</p>
                           </li>
                           <li>
                              <p>Direct access of real-time materialized views</p>
                              <p>A user query directly references the real-time materialized view by using its name.</p>
                           </li>
                        </ul>
                        <p>In both scenarios, the content of a real-time materialized view can be accessed as stale data or can trigger an on-query computation of the correct result. Whether or not on-query computation is triggered depends on the environment and the actual SQL statement.</p>
                        <p>The output of the <code class="codeph">EXPLAIN PLAN</code> statement contains messages indicating if on-query computation was used for a particular user query.
                        </p>
                        <div class="infoboxnotealso" id="GUID-110EAD92-6D4B-4E46-ADB0-C32D964B75D0__GUID-35FE7EF7-6975-4FC2-9FCC-A76DB3984952">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="advanced-materialized-views.html#GUID-23657E4E-C3DF-4757-BE8A-22CC394D6A5E" title="You can access a real-time materialized view directly by referencing the name of the real-time materialized view in a query.">Using Real-time Materialized Views for Direct Query Access</a></p>
                              </li>
                              <li>
                                 <p><a href="advanced-materialized-views.html#GUID-BF04B46B-E71D-4619-92B4-47F5CC6964F4" title="Query rewrite can use a real-time materialized view to provide results to user queries, even if the real-time materialized view is stale, if query rewrite is enabled for the real-time materialized view. A nested real-time materialized view is eligible for query rewrite only if all its base real-time materialized views are fresh.">Using Real-time Materialized Views During Query Rewrite</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-36EF3539-D946-4DE3-8C12-4AD0076F9A92" name="GUID-36EF3539-D946-4DE3-8C12-4AD0076F9A92"></a><h4 id="DWHSG-GUID-36EF3539-D946-4DE3-8C12-4AD0076F9A92" class="sect4"><span class="enumeration_section">6.7.2 </span>Creating Real-time Materialized Views
                  </h4>
                  <div>
                     <p>To create a real-time materialized view, use the<code class="codeph"> ON QUERY COMPUTATION</code> clause in the <code class="codeph">CREATE MATERIALIZED VIEW</code> statement.
                     </p>
                     <div class="section">
                        <p>You can create real-time materialized views even if they are not applicable for on-query computation for all change scenarios. The minimum requirement to create a real-time materialized view is that it supports out-of-place refresh for <code class="codeph">INSERT</code> operations. If other change scenarios, such as mixed DML operations, are encountered, then on-query computation may not be feasible for all types of real-time materialized views.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>Real-time materialized view must use an out-of-place log-based refresh mechanism (including PCT refresh). The <code class="codeph">ON COMMIT</code> refresh mode cannot be used for real-time materialized views.
                        </p>
                        <p><span class="bold">To create a real-time materialized view:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Ensure that materialized view logs exist on all the base tables of the real-time materialized view.</span></li>
                        <li><span>Create materialized view logs for all the tables on which the real-time materialized view is based.</span></li>
                        <li><span>Create the real-time materialized view by including the <code class="codeph">ENABLE ON QUERY COMPUTATION</code> clause in the <code class="codeph">CREATE MATERIALIZED VIEW</code> statement.</span></li>
                     </ol>
                     <div class="example" id="GUID-36EF3539-D946-4DE3-8C12-4AD0076F9A92__GUID-31E0354C-A993-43AF-949B-961571DF5243">
                        <p class="titleinexample">Example 6-7 Creating a Real-time Materialized View</p>
                        <p>This example creates a real-time materialized view called <code class="codeph">SUM_SALES_RTMV</code> which is based on data aggregated from the <code class="codeph">SALES</code> and <code class="codeph">PRODUCTS</code> tables in the <code class="codeph">SH</code> schema. Before you create the real-time materialized view ensure that the required prerequisites are met.
                        </p>
                        <ol>
                           <li>
                              <p>Create materialized view logs on the base tables <code class="codeph">SALES</code> and <code class="codeph">PRODUCTS</code>.
                              </p>
                              <p>The following command creates a materialized view log on the <code class="codeph">SALES</code> table:
                              </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW LOG ON sales
WITH SEQUENCE, ROWID
(prod_id, quantity_sold, amount_sold)
INCLUDING NEW VALUES;
</code></pre><p>The following command creates a materialized view log on the <code class="codeph">PRODUCTS</code> table. 
                              </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW LOG ON products 
WITH ROWID
(prod_id, prod_name, prod_category, prod_subcategory)
INCLUDING NEW VALUES;
</code></pre></li>
                           <li>
                              <p>Create a real-time materialized view by including the <code class="codeph">ON QUERY COMPUTATION</code> clause in the <code class="codeph">CREATE MATERIALIZED VIEW</code> statement. The fast refresh method is used for this real-time materialized view and the <code class="codeph">ENABLE QUERY REWRITE</code> clause indicates that query rewrite must be enabled. 
                              </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW sum_sales_rtmv
REFRESH FAST ON DEMAND
ENABLE QUERY REWRITE
ENABLE ON QUERY COMPUTATION
AS
SELECT prod_name, SUM(quantity_sold) AS sum_qty, COUNT(quantity_sold) AS cnt_qty, SUM(amount_sold) AS sum_amt, 
     COUNT(amount_sold) AS cnt_amt, COUNT(*) AS cnt_star
FROM sales, products
WHERE sales.prod_id = products.prod_id
GROUP BY prod_name;
</code></pre></li>
                        </ol>
                        <p>After the <code class="codeph">SUM_SALES_RTMV</code> real-time materialized view is created, assume that the following query is run.
                        </p><pre class="pre codeblock"><code>SELECT prod_name, SUM(quantity_sold), SUM(amount_sold)
FROM sales, products
WHERE sales.prod_id = products.prod_id
GROUP BY prod_name;</code></pre><p>If <code class="codeph">SUM_SALES_RTMV</code> is not stale, then the query result is returned using the data stored in this real-time materialized view. However, if <code class="codeph">SUM_SALES_RTMV</code> is stale and the cost of rewriting the query using the materialized view with on-query computation is lower than the base table access, then the query is answered by combining the delta changes in the materialized view logs on the <code class="codeph">SALES</code> and <code class="codeph">PRODUCTS</code> tables with the data in the real-time materialized view <code class="codeph">SUM_SALES_RTMV</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D0C3D49B-9577-43C7-9ECC-11A7DEEFBBE0" name="GUID-D0C3D49B-9577-43C7-9ECC-11A7DEEFBBE0"></a><h4 id="DWHSG-GUID-D0C3D49B-9577-43C7-9ECC-11A7DEEFBBE0" class="sect4"><span class="enumeration_section">6.7.3 </span>Converting an Existing Materialized View into a Real-time Materialized View
                  </h4>
                  <div>
                     <p>If the prerequisites for a real-time materialized view are met, then an existing materialized view can be converted into a real-time materialized view by altering its definition and enabling on-query computation.</p>
                     <div class="section">
                        <p><span class="bold">To convert a materialized view into a real-time materialized view:</span> 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li><span>Modify the materialized view definition and enable on-query computation by using the <code class="codeph">ON QUERY COMPUTATION</code> clause in the <code class="codeph">ALTER MATERIALIZED VIEW</code> statement.</span></li>
                     </ul>
                     <div class="section">
                        <p>You can convert a real-time materialized view into a regular materialized view by disabling on-query computation using the <code class="codeph">DISABLE ON QUERY COMPUTATION</code> clause in the <code class="codeph">ALTER MATERIALIZED VIEW</code> statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D0C3D49B-9577-43C7-9ECC-11A7DEEFBBE0__GUID-5DD6FF33-5D45-416B-946C-CA44A3772F37">
                        <p class="titleinexample">Example 6-8 Converting a Materialized View into a Real-time Materialized View</p>
                        <p>The materialized view <code class="codeph">SALES_RTMV</code> is based on the <code class="codeph">SALES</code>, <code class="codeph">TIMES</code>, and <code class="codeph">PRODUCTS</code> tables and uses fast refresh. Materialized view logs exist on all three base tables. You want to modify this materialized view and convert it into a real-time materialized view.
                        </p>
                        <ol>
                           <li>
                              <p>Modify the materialized view definition and include the <code class="codeph">ON QUERY COMPUTATION</code> clause to change it into a real-time materialized view.
                              </p><pre class="pre codeblock"><code>ALTER MATERIALIZED VIEW sales_rtmv ENABLE ON QUERY COMPUTATION;</code></pre></li>
                           <li>
                              <p>Query the <code class="codeph">DBA_MVIEWS</code> view to determine if on-query computation is enabled for <code class="codeph">SALES_RTMV</code>.
                              </p><pre class="pre codeblock"><code><code class="codeph">SELECT mview_name, on_query_computation</code><code class="codeph">
FROM dba_mviews
WHERE mview_name = 'SALES_RTMV';</code></code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-717B8857-DCB7-4BFB-A542-8074D6FE8D73" name="GUID-717B8857-DCB7-4BFB-A542-8074D6FE8D73"></a><h4 id="DWHSG-GUID-717B8857-DCB7-4BFB-A542-8074D6FE8D73" class="sect4"><span class="enumeration_section">6.7.4 </span>Enabling Query Rewrite to Use Real-time Materialized Views
                  </h4>
                  <div>
                     <p>For the query rewrite mechanism to rewrite a user query to use real-time materialized views, query rewrite must be enabled for the real-time materialized view.</p>
                     <div class="section">
                        <p>You can enable query rewrite for a real-time materialized view either at creation time or subsequently, by modifying the definition of the real-time materialized view. The <code class="codeph">ENABLE QUERY REWRITE</code> clause is used to enable query rewrite.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>To enable query rewrite for an existing real-time materialized view:</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li><span>Run the <code class="codeph">ALTER MATERIALIZED VIEW</code> command and include the <code class="codeph">ENABLE QUERY REWRITE</code> clause.</span></li>
                     </ul>
                     <div class="example" id="GUID-717B8857-DCB7-4BFB-A542-8074D6FE8D73__GUID-38AD3618-6915-4945-93AE-EC59DBF517BC">
                        <p class="titleinexample">Example 6-9 Enabling Query Rewrite for Real-time Materialized Views</p>
                        <p>The real-time materialized view <code class="codeph">my_rtmv</code> uses the fast refresh mechanism. You want to modify the definition of this real-time materialized view and specify that the query rewrite mechanism must consider this real-time materialized view while rewriting queries.
                        </p>
                        <p>The following command enables query rewrite for <code class="codeph">my_rtmv</code>:
                        </p><code class="codeph">ALTER MATERIALIZED VIEW my_rtmv ENABLE QUERY REWRITE;</code></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BF04B46B-E71D-4619-92B4-47F5CC6964F4" name="GUID-BF04B46B-E71D-4619-92B4-47F5CC6964F4"></a><h4 id="DWHSG-GUID-BF04B46B-E71D-4619-92B4-47F5CC6964F4" class="sect4"><span class="enumeration_section">6.7.5 </span>Using Real-time Materialized Views During Query Rewrite
                  </h4>
                  <div>
                     <p>Query rewrite can use a real-time materialized view to provide results to user queries, even if the real-time materialized view is stale, if query rewrite is enabled for the real-time materialized view. A nested real-time materialized view is eligible for query rewrite only if all its base real-time materialized views are fresh.</p>
                     <div class="section">
                        <p>When a user query is run, query rewrite first checks if a fresh materialized view is available to provide the required data. If a suitable materialized view does not exist, then query rewrite looks for a real-time materialized view that can be used to rewrite the user query. A fresh materialized view is preferred over a real-time materialized view because some overhead is incurred in computing fresh data for real-time materialized view. Next, the cost based optimizer determines the cost of the SQL query with on-query computation and then decides if the real-time materialized view will be used to answer this user query. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>If the <code class="codeph">QUERY_REWRITE_INTEGRITY</code> mode of the current SQL session is set to <code class="codeph">STALE_TOLERATED</code>, then on-query computation will not be used during query rewrite. The <code class="codeph">STALE_TOLERATED</code> rewrite mode indicates that fresh results are not required to satisfy a query, so on-query computation is not necessary.
                        </p>
                        <p><span class="bold">For query rewrite to use a real-time materialized view:</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that <code class="codeph">QUERY_REWRITE_INTEGRITY</code> is set to either <code class="codeph">ENFORCED</code> or <code class="codeph">TRUSTED</code> mode. <code class="codeph">QUERY_REWRITE_INTEGRITY</code> mode should not be set to <code class="codeph">STALE_TOLERATED</code> mode.</span></li>
                        <li class="stepexpand"><span>Run a user query that matches the SQL query that was used to define the real-time materialized view.</span><div>
                              <p>Any query that can be rewritten to take advantage of a real-time materialized view will use the real-time materialized view with on-query computation. </p>
                              <p>Use <code class="codeph">EXPLAIN PLAN</code> to verify that the query was rewritten using the real-time materialized view.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-BF04B46B-E71D-4619-92B4-47F5CC6964F4__GUID-B4B383C0-0ACF-4E5E-B4EC-08DEBD4A43B1">
                        <p class="titleinexample">Example 6-10 Using Real-time Materialized Views During Query Rewrite</p>
                        <p>This example creates a real-time materialized view with query rewrite enabled and then demonstrates that it was used by query rewrite to provide data for a user query.</p>
                        <ol>
                           <li>
                              <p>Create a materialized view log on the <code class="codeph">SALES</code> table, which is the base table for the real-time materialized view being created.
                              </p>
                           </li>
                           <li>
                              <p>Create a real-time materialized view <code class="codeph">mav_sum_sales</code> with query rewrite enabled.
                              </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW mav_sum_sales
REFRESH FAST ON DEMAND
ENABLE ON QUERY COMPUTATION
ENABLE QUERY REWRITE
AS 
SELECT prod_id, sum(quantity_sold) as sum_qty, count(quantity_sold) as cnt_qty, 
       sum(amount_sold) sum_amt, count(amount_sold) cnt_amt, count(*) as cnt_star
FROM sales
GROUP BY prod_id;</code></pre></li>
                           <li>
                              <p>Run the following query:</p><pre class="pre codeblock"><code>SELECT prod_id, sum(quantity_sold), sum(amount_sold)
FROM  sales
WHERE prod_id &lt; 1000
GROUP BY prod_id;
</code></pre><p>Observe that the query is similar to the one used to define the real-time materialized view <code class="codeph">mav_sum_sales</code>. Because no other materialized view with a definition that is similar to the query exists, query rewrite can use the <code class="codeph">mav_sum_sales</code> real-time materialized view to determine the query result. You can verify that query rewrite has taken place by checking the SQL cursor cache (for example, with <code class="codeph">DBMS_XPLAN</code>), using SQL Monitor, or using <code class="codeph">EXPLAIN PLAN</code>.
                              </p>
                              <p>The internally rewritten query that uses <code class="codeph">mav_sum_sales</code> is analogous to the following statement:
                              </p><pre class="pre codeblock"><code>SELECT prod_id, sum_qty, sum_amt
FROM  mav_sum_sales
WHERE prod_id &lt; 1000;</code></pre></li>
                           <li>
                              <p>Verify that the real-time materialized view was used to provide the query result. Use the <code class="codeph">EXPLAIN PLAN</code> statement to view the execution plan for the query.
                              </p>
                              <p>The following execution plan shows direct access to the real-time materialized view. If the materialized view is stale, then the execution plan will become more complex and include access to other objects (for example, the materialized view logs), depending on the outstanding DML operations.</p><pre class="pre codeblock"><code>EXPLAIN PLAN for SELECT prod_id, sum(quantity_sold), sum(amount_sold) FROM sales WHERE prod_id &lt; 1000 GROUP BY prod_id;
SELECT plan_table_output FROM table(dbms_xplan.display('plan_table',null,'serial'));

PLAN_TABLE_OUTPUT
-----------------------------------------------------------------------------------------------
Plan hash value: 13616844
-----------------------------------------------------------------------------------------------
| Id  | Operation             | Name          | Rows  | Bytes | Cost (%CPU) | Time      |
-----------------------------------------------------------------------------------------------
| 0   | SELECT STATEMENT      |               | 92    | 3588  | 3  (0)      | 00:00:01  |
| *1  | MAT_VIEW ACCESS FULL  | MAV_SUM_SALES | 92    | 3588  | 3  (0)      | 00:00:01  |
-----------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
   1 - filter("PROD_ID"&lt;1000)

Note
-----
   - dynamic statistics used: dynamic sampling (level=2)

17 rows selected.</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-23657E4E-C3DF-4757-BE8A-22CC394D6A5E" name="GUID-23657E4E-C3DF-4757-BE8A-22CC394D6A5E"></a><h4 id="DWHSG-GUID-23657E4E-C3DF-4757-BE8A-22CC394D6A5E" class="sect4"><span class="enumeration_section">6.7.6 </span>Using Real-time Materialized Views for Direct Query Access 
                  </h4>
                  <div>
                     <p>You can access a real-time materialized view directly by referencing the name of the real-time materialized view in a query. </p>
                     <div class="section">
                        <p>If the real-time materialized view specified in a user query is fresh, then the required data is directly fetched from the real-time materialized view. If the real-time materialized view is stale, then you must use the <code class="codeph">FRESH_MV</code> hint to perform on-query computation and obtain fresh data. Oracle Database does not automatically perform on-query computation for a real-time materialized view that is accessed directly in a user query.
                        </p>
                        <p>To obtain fresh data from a stale real-time materialized view when directly accessing the real-time materialized view:</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li><span>Use the <code class="codeph">FRESH_MV</code> hint in the user query to indicate that on-query computation must be performed.</span></li>
                     </ul>
                     <div class="example" id="GUID-23657E4E-C3DF-4757-BE8A-22CC394D6A5E__GUID-6D715D37-9A73-4C5C-8AA7-5EC1892DA477">
                        <p class="titleinexample">Example 6-11 Creating a Real-Time Materialized View and Using it in Queries</p>
                        <p>This example creates a real-time materialized view <code class="codeph">MY_RTMV</code> that is based on the <code class="codeph">SALES_NEW</code> table. The <code class="codeph">SALES_NEW</code> table is created as a copy of the <code class="codeph">SH.SALES</code> table. A row is inserted into the base table after the real-time materialized view is created. Next the <code class="codeph">fresh_mv</code> hint is used to access fresh data from the real-time materialized view by using the materialized view name in a user query.
                        </p>
                        <ol>
                           <li>
                              <p>Create a materialized view log on the base table <code class="codeph">sales_new</code>.
                              </p>
                              <p>Materialized view logs on the base table are mandatory for creating real-time materialized views. </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW LOG on sales_new 
WITH sequence, ROWID (prod_id, cust_id, time_id, channel_id, promo_id, quantity_sold, amount_sold) 
INCLUDING NEW VALUES;</code></pre></li>
                           <li>
                              <p>Create a real-time materialized view called <code class="codeph">my_rtmv</code> with <code class="codeph">sales_new</code> as the base table.
                              </p>
                              <p>The <code class="codeph">ON QUERY COMPUTATION</code> clause indicates that a real-time materialized view is created. The refresh mode specified is log-based fast refresh. Query rewrite is enabled for the real-time materialized view.
                              </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW my_rtmv 
REFRESH FAST 
ENABLE ON QUERY COMPUTATION
ENABLE QUERY REWRITE 
AS  
SELECT prod_id, cust_id, channel_id, sum(quantity_sold) sum_q, count(quantity_sold) cnt_q, avg(quantity_sold) avg_q, 
		sum(amount_sold) sum_a, count(amount_sold) cnt_a, avg(amount_sold) avg_a 
FROM sales_new
GROUP BY prod_id, cust_id, channel_id;</code></pre></li>
                           <li>
                              <p>Insert a row into <code class="codeph">sales_new</code>, the base table of the real-time materialized view and commit this change.
                              </p><pre class="pre codeblock"><code>INSERT INTO sales_new (prod_id, cust_id, time_id, channel_id, promo_id, quantity_sold, amount_sold) 
	VALUES (116,100450, sysdate,9,9999,10,350);

COMMIT;</code></pre></li>
                           <li>
                              <p>Query the real-time materialized view directly to display data for the row that was added to the real-time materialized viewâ€™s base table in the previous step.</p><pre class="pre codeblock"><code>SELECT * from my_rtmv 
WHERE prod_id = 116 AND cust_id=100450 AND channel_id = 9;

PROD_ID   CUST_ID   CHANNEL_ID   SUM_Q   CNT_Q    AVG_Q    SUM_A    CNT_A    AVG_A
-------   -------   ----------   -----   -----    -----    -----    -----    ------
116       100450    9            1       1        1        11.99    1        11.99

</code></pre><p>Note that the query result does not display the updated value for this data. This is because the real-time materialized view has not yet been refreshed with the changes made to its base table.</p>
                           </li>
                           <li>
                              <p>Include the <code class="codeph">FRESH_MV</code> hint while querying the real-time materialized view to display the row updated in the base table. 
                              </p><pre class="pre codeblock"><code>SELECT /*+ fresh_mv */ * FROM my_rtmv 
WHERE prod_id = 116 AND cust_id=100450 AND channel_id = 9;

PROD_ID   CUST_ID   CHANNEL_ID  SUM_Q   CNT_Q   AVG_Q    SUM_A    CNT_A    AVG_A
-------   -------   ----------  -----   -----   -----    -----    -----    ------
116       100450    9           11      2       5.5      361.99   2        180.995
</code></pre><p>Notice that this time the updated row is displayed. This is because the <code class="codeph">FRESH_MV</code> hint triggers on-query computation for the real-time materialized view and recomputed the fresh data.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-84838620-20F6-4929-85BD-FCB2D9603710" name="GUID-84838620-20F6-4929-85BD-FCB2D9603710"></a><h4 id="DWHSG-GUID-84838620-20F6-4929-85BD-FCB2D9603710" class="sect4"><span class="enumeration_section">6.7.7 </span>Listing Real-time Materialized Views
                  </h4>
                  <div>
                     <p>The <code class="codeph">ON_QUERY_COMPUTATION</code> column in the data dictionary views <code class="codeph">ALL_MVIEWS</code>, <code class="codeph">DBA_MVIEWS</code>, and <code class="codeph">USER_MVIEWS</code> indicates if a materialized view is a real-time materialized view. 
                     </p>
                     <div class="section">
                        <p>A value of Y in the <code class="codeph">ON_QUERY_COMPUTATION</code> column indicates a real-time materialized view.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">To list all real-time materialized views in your user schema:</div>
                     <!-- class="section" -->
                     <ul>
                        <li><span>Query the <code class="codeph">USER_MVIEWS</code> view and display details of the materialized view with the <code class="codeph">ON_QUERY_COMPUTATION</code> column set to Y.</span></li>
                     </ul>
                     <div class="example" id="GUID-84838620-20F6-4929-85BD-FCB2D9603710__GUID-3E8E705C-34BC-4668-9B9E-9CDD71FD5227">
                        <p class="titleinexample">Example 6-12 Listing Real-time Materialized Views in the Current Userâ€™s Schema</p><pre class="pre codeblock"><code>SELECT owner, mview_name, rewrite_enabled, staleness
FROM user_mviews
WHERE on_query_computation = 'Y';

OWNER   MVIEW_NAME        REWRITE_ENABLED   STALENESS
------  ------------    ------------------- ------------
SH      SALES_RTMV          N               FRESH
SH      MAV_SUM_SALES       Y               FRESH
SH      MY_SUM_SALES_RTMV   Y               FRESH
SH      NEW_SALES_RTMV      Y               STALE</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D4EA2570-2984-4F10-9FC7-B4DA800DE1A5" name="GUID-D4EA2570-2984-4F10-9FC7-B4DA800DE1A5"></a><h4 id="DWHSG-GUID-D4EA2570-2984-4F10-9FC7-B4DA800DE1A5" class="sect4"><span class="enumeration_section">6.7.8 </span>Improving Real-time Materialized Views Performance
                  </h4>
                  <div>
                     <p>To obtain better performance for user queries that use a real-time materialized view, you can follow certain guidelines.</p>
                     <p></p>
                     <p>Use the following guidelines with real-time materialized views:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Frequently refresh real-time materialized views to enhance the performance of queries that may use these real-time materialized views.</p>
                           <p>Since real-time materialized views work by combining the delta changes to the base tables with the existing materialized view data, query response time is enhanced when the delta changes to be computed are small. With more outstanding DML operations, on-query computation can become more complex (and expensive), up to the point where direct base table access can become more efficient (in case of query rewrite).</p>
                        </li>
                        <li>
                           <p>Collect statistics for the base tables, the real-time materialized view, and the materialized view logs to enable the optimizer to accurately determine the cost of a query.</p>
                           <p>For query rewrite, the cost-based rewrite mechanism uses the optimizer to determine whether the rewritten query should be used. The optimizer uses statistics to determine the cost.</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='05777.understanding-source-objects.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Understanding Source Objects</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Java API Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Java API Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="olap-java-api-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:53:39-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2000, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96402-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-metadata-and-analytic-workspaces.html" title="Previous" type="text/html">
      <link rel="next" href="making-queries-using-source-methods.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP Java API Developer's Guide">
    <meta name="dcterms.isVersionOf" content="OLAAP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-metadata-and-analytic-workspaces.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="making-queries-using-source-methods.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java API Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Understanding Source Objects</li>
            </ol>
            <a id="GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2" name="GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2"></a><a id="OLAAP247"></a>
            
            <h2 id="OLAAP-GUID-871159BB-8ED1-454B-B9FA-62F36683F4B2" class="sect2"><span class="enumeration_chapter">5 </span> Understanding Source Objects
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes <code class="codeph">Source</code> objects, which you use to specify a query. With a <code class="codeph">Source</code>, you specify the data that you want to retrieve from the data store and the analytical or other operations that you want to perform on the data. <a href="making-queries-using-source-methods.html#GUID-B5D5AF5D-330E-46D3-8BD7-E84B1373E6A7"> Making Queries Using Source Methods</a>, provides examples of using <code class="codeph">Source</code> objects. <a href="creating-dynamic-queries.html#GUID-16DC09F2-FA92-4987-A125-2EE813B7413E"> Creating Dynamic Queries</a>, describes using <code class="codeph">Template</code> objects to make modifiable queries.
               </p>
               <p>This chapter includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="understanding-source-objects.html#GUID-816E6FBC-B0ED-4109-A0A4-34E8FBBE3332">Overview of Source Objects</a></p>
                  </li>
                  <li>
                     <p><a href="understanding-source-objects.html#GUID-26FAD107-7192-41FA-AAE2-066949993CEB">Kinds of Source Objects</a></p>
                  </li>
                  <li>
                     <p><a href="understanding-source-objects.html#GUID-0604D759-310C-43F9-9111-29739F022A2C">Characteristics of Source Objects</a></p>
                  </li>
                  <li>
                     <p><a href="understanding-source-objects.html#GUID-02FCA7A8-5A52-484B-8952-BE12B7AE3240">Inputs and Outputs of a Source</a></p>
                  </li>
                  <li>
                     <p><a href="understanding-source-objects.html#GUID-38CC13B9-38A3-4D0A-87B7-13A5BFC2EB6E">Describing Parameterized Source Objects</a></p>
                  </li>
               </ul>
            </div><a id="OLAAP248"></a><div class="props_rev_3"><a id="GUID-816E6FBC-B0ED-4109-A0A4-34E8FBBE3332" name="GUID-816E6FBC-B0ED-4109-A0A4-34E8FBBE3332"></a><h3 id="OLAAP-GUID-816E6FBC-B0ED-4109-A0A4-34E8FBBE3332" class="sect3"><span class="enumeration_section">5.1 </span>Overview of Source Objects
               </h3>
               <div>
                  <p><a id="d13320e118" class="indexterm-anchor"></a><a id="d13320e122" class="indexterm-anchor"></a><a id="d13320e126" class="indexterm-anchor"></a>You use <code class="codeph">Source</code> objects to create a query that specifies the data that you want to retrieve from the database. As a query, a <code class="codeph">Source</code> is similar to a SQL <code class="codeph">SELECT</code> statement.
                  </p>
                  <p>To create a query, you typically use the classes in the <code class="codeph">oracle.olapi.metadata.mdm</code> package to get <code class="codeph">MdmSource</code> objects that represent OLAP metadata objects. From an <code class="codeph">MdmSource</code> object, you can get a <code class="codeph">Source</code> object. You can also create other kinds of <code class="codeph">Source</code> objects with methods of a <code class="codeph">DataProvider</code>. You can then use these <code class="codeph">Source</code> objects to create a query. To retrieve the data specified by the query, you create a <code class="codeph">Cursor</code> for the <code class="codeph">Source</code>.
                  </p>
                  <p>With the methods of a <code class="codeph">Source</code>, you can specify selections of dimension members, attribute values, or measure values. You can also specify operations on the elements of the <code class="codeph">Source</code>, such as mathematical calculations, comparisons, and ordering, adding, or removing elements of a query.
                  </p>
                  <p><a id="d13320e179" class="indexterm-anchor"></a>The <code class="codeph">Source</code> class has a few basic methods and many shortcut methods that use one or more of the basic methods. The most complex basic methods are the <code class="codeph">join(Source joined, Source comparison, int comparisonRule, boolean visible)</code> method and the <code class="codeph">recursiveJoin(Source joined, Source compariso4n, Source parent, int comparisonRule, boolean parentsFirst, boolean parentsRestrictedToBase, int maxIterations, boolean visible)</code> method. The many other signatures of the <code class="codeph">join</code> and <code class="codeph">recursiveJoin</code> methods are shortcuts for certain operations of the basic methods.
                  </p>
                  <p>In this chapter, the information about the <code class="codeph">join</code> method applies equally to the <code class="codeph">recursiveJoin</code> method, except where otherwise noted. With the <code class="codeph">join</code> method you can relate the elements of one <code class="codeph">Source</code> to those of another <code class="codeph">Source</code> by joining a <code class="codeph">Source</code> with an input to a <code class="codeph">Source</code> that matches with that input. For example, to specify the dimension members that are required to retrieve the data of a measure that has the dimension as an input, you use a <code class="codeph">join</code> method to relate the dimension members to the measure. The <code class="codeph">join</code> method and the inputs of a <code class="codeph">Source</code> are described in <span class="q">"<a href="understanding-source-objects.html#GUID-02FCA7A8-5A52-484B-8952-BE12B7AE3240">Inputs and Outputs of a Source</a>"</span>.
                  </p>
                  <p>A <code class="codeph">Source</code> has certain characteristics, such as a type and a data type, and it can have one or more inputs or outputs. This chapter describes these concepts. It also describes the different kinds of <code class="codeph">Source</code> objects and how you get them, and the <code class="codeph">join</code> method and other <code class="codeph">Source</code> methods and how you use those methods to specify a query.
                  </p>
               </div>
            </div><a id="OLAAP249"></a><div class="props_rev_3"><a id="GUID-26FAD107-7192-41FA-AAE2-066949993CEB" name="GUID-26FAD107-7192-41FA-AAE2-066949993CEB"></a><h3 id="OLAAP-GUID-26FAD107-7192-41FA-AAE2-066949993CEB" class="sect3"><span class="enumeration_section">5.2 </span>Kinds of Source Objects
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d13320e287" class="indexterm-anchor"></a><a id="d13320e291" class="indexterm-anchor"></a>The kinds of <code class="codeph">Source</code> objects that you use to specify data and to perform analysis, and the ways that you get them, are the following: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d13320e302" class="indexterm-anchor"></a>Primary <code class="codeph">Source</code> objects, which are returned by the <code class="codeph">getSource</code> method of an <code class="codeph">MdmSource</code> object such as an <code class="codeph">MdmDimension</code> or an <code class="codeph">MdmDimensionedObject</code>. A primary <code class="codeph">Source</code> provides access to the data that the <code class="codeph">MdmSource</code> represents. Getting primary <code class="codeph">Source</code> objects is usually the first step in creating a query. You then typically select elements from the primary <code class="codeph">Source</code> objects, thereby producing derived <code class="codeph">Source</code> objects.
                           </p>
                        </li>
                        <li>
                           <p><a id="d13320e340" class="indexterm-anchor"></a>Derived <code class="codeph">Source</code> objects, which you get by calling some of the methods of a <code class="codeph">Source</code> object. Methods such as <code class="codeph">join</code> return a new <code class="codeph">Source</code> that is derived from the <code class="codeph">Source</code> on which you call the method. All queries on the data store, other than a simple list of values specified by the primary <code class="codeph">Source</code> for an <code class="codeph">MdmDimension</code>, are derived <code class="codeph">Source</code> objects.
                           </p>
                        </li>
                        <li>
                           <p><a id="d13320e372" class="indexterm-anchor"></a>Fundamental <code class="codeph">Source</code> objects, which are returned by the <code class="codeph">getSource</code> method of a <code class="codeph">FundamentalMetadataObject</code>. These <code class="codeph">Source</code> objects represent the OLAP Java API data types.
                           </p>
                        </li>
                        <li>
                           <p><a id="d13320e391" class="indexterm-anchor"></a><a id="d13320e395" class="indexterm-anchor"></a>List or range <code class="codeph">Source</code> objects, which are returned by the <code class="codeph">createConstantSource</code>, <code class="codeph">createListSource</code>, or <code class="codeph">createRangeSource</code> methods of a <code class="codeph">DataProvider</code>. Typically, you use this kind of <code class="codeph">Source</code> as the <code class="codeph">joined</code> or <code class="codeph">comparison</code> parameter to a <code class="codeph">join</code> method.
                           </p>
                        </li>
                        <li>
                           <p><a id="d13320e430" class="indexterm-anchor"></a><a id="d13320e434" class="indexterm-anchor"></a><a id="d13320e438" class="indexterm-anchor"></a><a id="d13320e442" class="indexterm-anchor"></a><a id="d13320e444" class="indexterm-anchor"></a><a id="d13320e446" class="indexterm-anchor"></a><a id="d13320e448" class="indexterm-anchor"></a>Empty, null, or void <code class="codeph">Source</code> objects. The empty and void <code class="codeph">Source</code> objects are returned by the <code class="codeph">getEmptySource</code> or <code class="codeph">getVoidSource</code> method of a <code class="codeph">DataProvider</code>, and the null <code class="codeph">Source</code> object is returned by the <code class="codeph">nullSource</code> method of a <code class="codeph">Source</code>. The empty <code class="codeph">Source</code> has no elements. The void <code class="codeph">Source</code> and a null <code class="codeph">Source</code> each has one element that has the value of <code class="codeph">null</code>. The difference between the void <code class="codeph">Source</code> and a null <code class="codeph">Source</code> is that the type of the void <code class="codeph">Source</code> is the <code class="codeph">FundamentalMetadataObject</code> for the Value data type and the type of a null <code class="codeph">Source</code> is the <code class="codeph">Source</code> whose <code class="codeph">nullSource</code> method returned it. Typically, you use these kinds of <code class="codeph">Source</code> objects as the <code class="codeph">joined</code> or <code class="codeph">comparison</code> parameter to a <code class="codeph">join</code> method.
                           </p>
                        </li>
                        <li>
                           <p><a id="d13320e526" class="indexterm-anchor"></a>Dynamic <code class="codeph">Source</code> objects, which are returned by the <code class="codeph">getSource</code> method of a <code class="codeph">DynamicDefinition</code>. A dynamic <code class="codeph">Source</code> is usually a derived <code class="codeph">Source</code>. It is generated by a <code class="codeph">Template</code>, which you use to create a dynamic query that you can revise after interacting with an end user.
                           </p>
                        </li>
                        <li>
                           <p><a id="d13320e552" class="indexterm-anchor"></a>Parameterized <code class="codeph">Source</code> objects, which are returned by the <code class="codeph">createSource</code> methods of a <code class="codeph">Parameter</code>. Like a list or range <code class="codeph">Source</code>, you use a parameterized <code class="codeph">Source</code> as a parameter to the <code class="codeph">join</code> method. Unlike a list or range <code class="codeph">Source</code>, however, you can change the value that the <code class="codeph">Parameter</code> represents after the join operation and thereby change the selection that the derived <code class="codeph">Source</code> represents. You can create a <code class="codeph">Cursor</code> for that derived <code class="codeph">Source</code> and retrieve the results of the query. You can then change the value of the <code class="codeph">Parameter</code>, and, without having to create a new <code class="codeph">Cursor</code> for the derived <code class="codeph">Source</code>, use that same <code class="codeph">Cursor</code> to retrieve the results of the modified query.
                           </p>
                        </li>
                     </ul>
                     <p><a id="d13320e605" class="indexterm-anchor"></a>The <code class="codeph">Source</code> class has the following subclasses:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">BooleanSource</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DateSource</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NumberSource</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">StringSource</code></p>
                        </li>
                     </ul>
                     <p>These subclasses have different data types and implement <code class="codeph">Source</code> methods that require those data types. Each subclass also implements methods unique to it, such as the <code class="codeph">implies</code> method of a <code class="codeph">BooleanSource</code> or the <code class="codeph">indexOf</code> method of a <code class="codeph">StringSource</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OLAAP250"></a><div class="props_rev_3"><a id="GUID-0604D759-310C-43F9-9111-29739F022A2C" name="GUID-0604D759-310C-43F9-9111-29739F022A2C"></a><h3 id="OLAAP-GUID-0604D759-310C-43F9-9111-29739F022A2C" class="sect3"><span class="enumeration_section">5.3 </span>Characteristics of Source Objects
               </h3>
               <div>
                  <p>A <code class="codeph">Source</code> has a data type, a type, and an identifier (ID), and all <code class="codeph">Source</code> objects except the empty <code class="codeph">Source</code> have one or more elements. The following topics describe these concepts.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-4DEE19D0-26E5-4C77-A26E-50D353422885">Elements and Values of a Source</a></p>
                     </li>
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-A851D911-480D-4F7F-93B0-9794621CA09F">Data Type of a Source</a></p>
                     </li>
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-09278179-5DEB-4777-BB7D-F78ED9CA7501">Type of a Source</a></p>
                     </li>
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-D2D985B8-62B4-4900-BCE5-8772BA596E8A">Source Identification and SourceDefinition of a Source</a></p>
                     </li>
                  </ul>
                  <p> Some <code class="codeph">Source</code> objects have one or more inputs or outputs. Those complex concepts are discussed in <span class="q">"<a href="understanding-source-objects.html#GUID-02FCA7A8-5A52-484B-8952-BE12B7AE3240">Inputs and Outputs of a Source</a>"</span>.
                  </p>
               </div><a id="OLAAP251"></a><div class="props_rev_3"><a id="GUID-4DEE19D0-26E5-4C77-A26E-50D353422885" name="GUID-4DEE19D0-26E5-4C77-A26E-50D353422885"></a><h4 id="OLAAP-GUID-4DEE19D0-26E5-4C77-A26E-50D353422885" class="sect4"><span class="enumeration_section">5.3.1 </span>Elements and Values of a Source
                  </h4>
                  <div>
                     <p><a id="d13320e759" class="indexterm-anchor"></a><a id="d13320e763" class="indexterm-anchor"></a><a id="d13320e767" class="indexterm-anchor"></a>All <code class="codeph">Source</code> objects, except the empty <code class="codeph">Source</code>, have one or more elements. An element of a <code class="codeph">Source</code> has a value, which can be null. For example, the <code class="codeph">Source</code> for the <code class="codeph">MdmPrimaryDimension</code> object for the CHANNEL_AWJ dimension has four elements. The values of those elements are the unique values of the members of the dimension, which are the following.
                     </p><pre class="oac_no_warn" dir="ltr">CHANNEL_PRIMARY::CHANNEL::TOTAL
CHANNEL_PRIMARY::CHANNEL::CAT
CHANNEL_PRIMARY::CHANNEL::DIR
CHANNEL_PRIMARY::CHANNEL::INT</pre></div>
               </div><a id="OLAAP252"></a><div class="props_rev_3"><a id="GUID-A851D911-480D-4F7F-93B0-9794621CA09F" name="GUID-A851D911-480D-4F7F-93B0-9794621CA09F"></a><h4 id="OLAAP-GUID-A851D911-480D-4F7F-93B0-9794621CA09F" class="sect4"><span class="enumeration_section">5.3.2 </span>Data Type of a Source
                  </h4>
                  <div>
                     <p><a id="d13320e825" class="indexterm-anchor"></a><a id="d13320e831" class="indexterm-anchor"></a><a id="d13320e835" class="indexterm-anchor"></a><a id="d13320e839" class="indexterm-anchor"></a><a id="d13320e843" class="indexterm-anchor"></a>The <code class="codeph">FundamentalMetadataObject</code> class represents the data type of the values of the elements of an <code class="codeph">MdmSource</code>. The data type of a <code class="codeph">Source</code> is represented by a fundamental <code class="codeph">Source</code>. For example, a <code class="codeph">BooleanSource</code> has elements that have Java <code class="codeph">boolean</code> values. The data type of a <code class="codeph">BooleanSource</code> is the fundamental <code class="codeph">Source</code> that represents OLAP Java API Boolean values.
                     </p>
                     <p><a id="d13320e874" class="indexterm-anchor"></a>To get the fundamental <code class="codeph">Source</code> that represents the data type of a <code class="codeph">Source</code>, call the <code class="codeph">getDataType</code> method of the <code class="codeph">Source</code>. You can also get a fundamental <code class="codeph">Source</code> by calling the <code class="codeph">getSource</code> method of a <code class="codeph">FundamentalMetadataObject</code>.
                     </p>
                     <p>The data type for a primary <code class="codeph">Source</code> is related to the SQL data type of the associated metadata object. For example, an <code class="codeph">MdmBaseAttribute</code> that has a SQL data type of <code class="codeph">VARCHAR2(30)</code> would produce a <code class="codeph">Source</code> whose data type is the fundamental <code class="codeph">Source</code> that represents OLAP Java API String values. The following code gets that fundamental <code class="codeph">Source</code>.
                     </p><pre class="oac_no_warn" dir="ltr"><a id="d13320e923" class="indexterm-anchor"></a>fmp.getStringDataType().getSource(); // fmp is the FundamentalMetadataProvider.
</pre><p><a id="d13320e929" class="indexterm-anchor"></a>A typical use of a <code class="codeph">Source</code> for a data type is as the comparison <code class="codeph">Source</code> for a join or a recursive join operation. As such it represents the set of all values of that data type. For examples of the use of the <code class="codeph">getDataType</code> method, see <a href="making-queries-using-source-methods.html#GUID-83221D91-C9C5-4BA7-A91F-A8F33C6A8F85__CBBEBEJH">Example 6-3</a>, <a href="making-queries-using-source-methods.html#GUID-31E4FFCF-E724-4C10-A4EC-1DFC5B70E10A__CBBDDAHE">Example 6-5</a>, and <a href="making-queries-using-source-methods.html#GUID-DB8D90EC-7527-42B3-AC6C-79CB4976DD2D__CBBJDIAC">Example 6-11</a>.
                     </p>
                  </div>
               </div><a id="OLAAP254"></a><a id="OLAAP253"></a><div class="props_rev_3"><a id="GUID-09278179-5DEB-4777-BB7D-F78ED9CA7501" name="GUID-09278179-5DEB-4777-BB7D-F78ED9CA7501"></a><h4 id="OLAAP-GUID-09278179-5DEB-4777-BB7D-F78ED9CA7501" class="sect4"><span class="enumeration_section">5.3.3 </span>Type of a Source
                  </h4>
                  <div>
                     <p><a id="d13320e990" class="indexterm-anchor"></a><a id="d13320e996" class="indexterm-anchor"></a><a id="d13320e1000" class="indexterm-anchor"></a><a id="d13320e1006" class="indexterm-anchor"></a><a id="d13320e1010" class="indexterm-anchor"></a>Along with a data type, a <code class="codeph">Source</code> has a type, which is the <code class="codeph">Source</code> from which the elements of the <code class="codeph">Source</code> are drawn. The type of a <code class="codeph">Source</code> determines whether the <code class="codeph">join</code> method can match the <code class="codeph">Source</code> with the input of another <code class="codeph">Source</code>. The only <code class="codeph">Source</code> that does not have a type is the fundamental <code class="codeph">Source</code> for the OLAP Java API Value data type, which represents the set of all values, and from which all other <code class="codeph">Source</code> objects ultimately descend. You can find the type by calling the <code class="codeph">getType</code> method of a <code class="codeph">Source</code>.
                     </p>
                     <p>The type of a fundamental <code class="codeph">Source</code> is the data type of the <code class="codeph">Source</code>. The type of a list or range <code class="codeph">Source</code> is the data type of the values of the elements of the list or range <code class="codeph">Source</code>.
                     </p>
                     <p>The type of a primary <code class="codeph">Source</code> is one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The fundamental <code class="codeph">Source</code> that represents the data type of the values of the elements of the primary <code class="codeph">Source</code>. For example, the type of the <code class="codeph">Source</code> returned by the <code class="codeph">getSource</code> method of a typical numeric <code class="codeph">MdmMeasure</code> is the fundamental <code class="codeph">Source</code> that represents the set of all OLAP Java API number values.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">Source</code> for the object that contains the primary <code class="codeph">Source</code>. For example, the type of the <code class="codeph">Source</code> returned by the <code class="codeph">getSource</code> method of an <code class="codeph">MdmLevelHierarchy</code> is the <code class="codeph">Source</code> for the <code class="codeph">MdmPrimaryDimension</code> that contains the hierarchy.
                           </p>
                        </li>
                     </ul>
                     <p>The type of a derived <code class="codeph">Source</code> is one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d13320e1126" class="indexterm-anchor"></a>The <span>base</span> <code class="codeph">Source</code>, which is the <code class="codeph">Source</code> whose method returned the derived <code class="codeph">Source</code>. A <code class="codeph">Source</code> returned by the <code class="codeph">alias</code>, <code class="codeph">distinct</code>, <code class="codeph">extract</code>, <code class="codeph">join</code>, <code class="codeph">recursiveJoin</code>, or <code class="codeph">value</code> methods, or one of their shortcuts, has the base <code class="codeph">Source</code> as the type.
                           </p>
                        </li>
                        <li>
                           <p>A fundamental <code class="codeph">Source</code>. The type of the <code class="codeph">Source</code> returned by methods such as <code class="codeph">position</code> and <code class="codeph">count</code> is the fundamental <code class="codeph">Source</code> for the OLAP Java API Integer data type. The type of the <code class="codeph">Source</code> returned by methods that make comparisons, such as <code class="codeph">eq</code>, <code class="codeph">le</code>, and so on, is the fundamental <code class="codeph">Source</code> for the Boolean data type. The type of the <code class="codeph">Source</code> returned by methods that perform aggregate functions, such as the <code class="codeph">NumberSource</code> methods <code class="codeph">total</code> and <code class="codeph">average</code>, is a fundamental <code class="codeph">Source</code> that represents the function.
                           </p>
                        </li>
                     </ul>
                     <p><a id="d13320e1217" class="indexterm-anchor"></a><a id="d13320e1223" class="indexterm-anchor"></a><a id="d13320e1227" class="indexterm-anchor"></a><a id="d13320e1233" class="indexterm-anchor"></a>A derived <code class="codeph">Source</code> that has the base <code class="codeph">Source</code> as the type is a subtype of the <code class="codeph">Source</code> from which it is derived. A derived Source that has a fundamental <code class="codeph">Source</code> as the type is a subtype of the fundamental <code class="codeph">Source</code>. You can use the <code class="codeph">isSubtypeOf</code> method to determine if a <code class="codeph">Source</code> is a subtype of another <code class="codeph">Source</code>. 
                     </p>
                     <p><a id="d13320e1264" class="indexterm-anchor"></a>For example, in <a href="understanding-source-objects.html#GUID-09278179-5DEB-4777-BB7D-F78ED9CA7501__I1015161">Example 5-1</a> the <code class="codeph">myList</code> object is a list <code class="codeph">Source</code>. The example uses <code class="codeph">myList</code> to select values from <code class="codeph">prodHier</code>, a <code class="codeph">Source</code> for an <code class="codeph">MdmLevelHierarchy</code> of the <code class="codeph">MdmPrimaryDimension</code> for the PRODUCT_AWJ dimension. In the example, <code class="codeph">dp</code> is the <code class="codeph">DataProvider</code>.
                     </p>
                     <div class="example" id="GUID-09278179-5DEB-4777-BB7D-F78ED9CA7501__I1015161">
                        <p class="titleinexample">Example 5-1 Using the isSubtypeOf Method</p><pre class="oac_no_warn" dir="ltr">Source myList = dp.createListSource(new String[] {
                                     "PRODUCT_PRIMARY::FAMILY::LTPC",
                                     "PRODUCT_PRIMARY::FAMILY::DTPC",
                                     "PRODUCT_PRIMARY::FAMILY::ACC",
                                     "PRODUCT_PRIMARY::FAMILY::MON"});
Source prodSel = prodHier.selectValues(myList);
if (prodSel.isSubtypeOf(prodHier))
  println("prodSel is a subtype of prodHier.");
else
  println("prodSel is not a subtype of prodHier.");
</pre><p>Because <code class="codeph">prodSel</code> is a subtype of <code class="codeph">prodHier</code>, the condition in the <code class="codeph">if</code> statement is true and the example displays the following:
                        </p><pre class="oac_no_warn" dir="ltr">prodSel is a subtype of prodHier.
</pre><p>The type of <code class="codeph">myList</code> is the fundamental String <code class="codeph">Source</code>. The type of <code class="codeph">prodHier</code> is the <code class="codeph">Source</code> for the PRODUCT_AWJ dimension. The type of <code class="codeph">prodSel</code> is <code class="codeph">prodHier</code> because the elements of <code class="codeph">prodSel</code> are derived from the elements of <code class="codeph">prodHier</code>. 
                        </p>
                        <p>The supertype of a <code class="codeph">Source</code> is the type of the type of a <code class="codeph">Source</code>, and so on, up through the types to the <code class="codeph">Source</code> for the fundamental Value data type. For example, the fundamental Value <code class="codeph">Source</code> is the type of the fundamental String <code class="codeph">Source</code>, which is the type of <code class="codeph">prodHier</code>, which is the type of <code class="codeph">prodSel</code>. The fundamental Value <code class="codeph">Source</code> and the fundamental String <code class="codeph">Source</code> are both supertypes of <code class="codeph">prodSel</code>. The <code class="codeph">prodSel</code> <code class="codeph">Source</code> is a subtype of <code class="codeph">prodHier</code>, and of the fundamental String <code class="codeph">Source</code>, and of the fundamental Value <code class="codeph">Source</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAAP255"></a><div class="props_rev_3"><a id="GUID-D2D985B8-62B4-4900-BCE5-8772BA596E8A" name="GUID-D2D985B8-62B4-4900-BCE5-8772BA596E8A"></a><h4 id="OLAAP-GUID-D2D985B8-62B4-4900-BCE5-8772BA596E8A" class="sect4"><span class="enumeration_section">5.3.4 </span>Source Identification and SourceDefinition of a Source
                  </h4>
                  <div>
                     <p><a id="d13320e1428" class="indexterm-anchor"></a><a id="d13320e1432" class="indexterm-anchor"></a><a id="d13320e1436" class="indexterm-anchor"></a><a id="d13320e1440" class="indexterm-anchor"></a>A <code class="codeph">Source</code> has an identification, an ID, which is a <code class="codeph">String</code> that uniquely identifies it during the current connection to the database. You can get the identification by calling the <code class="codeph">getID</code> method of a <code class="codeph">Source</code>. For example, the following code gets the identification of the <code class="codeph">Source</code> for the <code class="codeph">MdmPrimaryDimension</code> for the PRODUCT_AWJ dimension and displays the value.
                     </p><pre class="oac_no_warn" dir="ltr">println("The Source ID of prodDim is " + prodDim.getID());
</pre><p>The preceding code displays the following:</p><pre class="oac_no_warn" dir="ltr">The Source ID of prodDim is Hidden..GLOBAL.PRODUCT_AWJ
</pre><p><a id="d13320e1471" class="indexterm-anchor"></a><a id="d13320e1475" class="indexterm-anchor"></a>Each <code class="codeph">Source</code> also has a <code class="codeph">SourceDefinition</code> object, which records information about the <code class="codeph">Source</code>. Oracle OLAP uses this information internally. For example, the <code class="codeph">SourceDefinition</code> of a derived <code class="codeph">Source</code> records the parameters of the join operation that produced the <code class="codeph">Source</code>, such as the base <code class="codeph">Source</code>, the joined <code class="codeph">Source</code>, the comparison <code class="codeph">Source</code>, the comparison rule, and the value of the <code class="codeph">visible</code> parameter.
                     </p>
                     <p>The <code class="codeph">DynamicDefinition</code> class is a subclass of <code class="codeph">SourceDefinition</code>. An OLAP Java API client application uses the <code class="codeph">DynamicDefinition</code> of a <code class="codeph">Template</code> to get the dynamic <code class="codeph">Source</code> of the <code class="codeph">Template</code>.
                     </p>
                  </div>
               </div>
            </div><a id="OLAAP256"></a><div class="props_rev_3"><a id="GUID-02FCA7A8-5A52-484B-8952-BE12B7AE3240" name="GUID-02FCA7A8-5A52-484B-8952-BE12B7AE3240"></a><h3 id="OLAAP-GUID-02FCA7A8-5A52-484B-8952-BE12B7AE3240" class="sect3"><span class="enumeration_section">5.4 </span>Inputs and Outputs of a Source
               </h3>
               <div>
                  <p>An input of a <code class="codeph">Source</code> indicates that the elements of the <code class="codeph">Source</code> have a relation to those of another <code class="codeph">Source</code>. An output of a <code class="codeph">Source</code> contains elements from which values of the <code class="codeph">Source</code> with the output are derived. A <code class="codeph">Source</code> with one or more outputs is somewhat like an array of arrays.
                  </p>
                  <p>A <code class="codeph">Source</code> can have inputs and it can have outputs. The inputs and the outputs of a <code class="codeph">Source</code> are other <code class="codeph">Source</code> objects.
                  </p>
                  <p>The inputs and outputs of a base <code class="codeph">Source</code> influence the elements of a <code class="codeph">Source</code> that you derive from that base <code class="codeph">Source</code>. To derive a <code class="codeph">Source</code>, you use methods of the base <code class="codeph">Source</code>. The derived <code class="codeph">Source</code> can have outputs or inputs or both or neither, depending on the method and the parameters of the method.
                  </p>
                  <p>Some <code class="codeph">Source</code> methods, such as the <code class="codeph">value</code> and <code class="codeph">position</code> methods, return a <code class="codeph">Source</code> that has an input. The <code class="codeph">join</code> and <code class="codeph">recursiveJoin</code> methods can return a <code class="codeph">Source</code> that has an output. If the join operation involves a <code class="codeph">Source</code> with an input and a <code class="codeph">Source</code> that matches with that input, then the input acts as a filter in producing the elements of the derived <code class="codeph">Source</code>.
                  </p>
                  <p>The following topics describe the <code class="codeph">join</code> method, the concepts of outputs and inputs, and the matching of inputs. They provide examples of producing <code class="codeph">Source</code> objects that have outputs, <code class="codeph">Source</code> objects that have inputs, and join operations that match an input with a <code class="codeph">Source</code>.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-38A6BB94-56A5-4A50-90E1-A7DBD83539DD">Describing the join Method</a></p>
                     </li>
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-CDD7803E-22A0-4F30-8471-2569E82C006E">Outputs of a Source</a></p>
                     </li>
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-74C3E73D-40DF-46C9-8831-5FDF66BE6048">Inputs of a Source</a></p>
                     </li>
                     <li>
                        <p><a href="understanding-source-objects.html#GUID-41EDCE42-C277-433F-81D6-306148FC263D">Matching a Source with an Input</a></p>
                     </li>
                  </ul>
               </div><a id="OLAAP257"></a><div class="props_rev_3"><a id="GUID-38A6BB94-56A5-4A50-90E1-A7DBD83539DD" name="GUID-38A6BB94-56A5-4A50-90E1-A7DBD83539DD"></a><h4 id="OLAAP-GUID-38A6BB94-56A5-4A50-90E1-A7DBD83539DD" class="sect4"><span class="enumeration_section">5.4.1 </span>Describing the join Method
                  </h4>
                  <div>
                     <p><a id="d13320e1720" class="indexterm-anchor"></a><a id="d13320e1724" class="indexterm-anchor"></a>With the <code class="codeph">join</code> method, you join the elements of one <code class="codeph">Source</code> with those of another <code class="codeph">Source</code> to produce a derived <code class="codeph">Source</code>. The derived <code class="codeph">Source</code> could have inputs or outputs. The elements of the derived <code class="codeph">Source</code>, and whether it has any inputs or outputs, depend on the values of the parameters that you pass to the <code class="codeph">join</code> method.
                     </p>
                     <p>The full signature of the <code class="codeph">join</code> method is the following. 
                     </p><pre class="oac_no_warn" dir="ltr">Source join(Source joined,
            Source comparison,
            int comparisonRule,
            boolean visible)
</pre><p><a id="d13320e1759" class="indexterm-anchor"></a><a id="d13320e1763" class="indexterm-anchor"></a>The <code class="codeph">Source</code> on which you call the <code class="codeph">join</code> method is the base of the join operation. The parameters of the method are the following.
                     </p>
                  </div><a id="OLAAP258"></a><div class="props_rev_3"><a id="GUID-B0FDCEC3-E3C0-492C-8CCD-F1D1026406C5" name="GUID-B0FDCEC3-E3C0-492C-8CCD-F1D1026406C5"></a><h5 id="OLAAP-GUID-B0FDCEC3-E3C0-492C-8CCD-F1D1026406C5" class="sect5"><span class="enumeration_section">5.4.1.1 </span>Describing the joined Parameter
                     </h5>
                     <div>
                        <p><a id="d13320e1809" class="indexterm-anchor"></a><a id="d13320e1813" class="indexterm-anchor"></a>The <code class="codeph">joined</code> parameter is a <code class="codeph">Source</code> object. The <code class="codeph">join</code> method joins the elements of the base <code class="codeph">Source</code> and the elements of the joined <code class="codeph">Source</code>, with results that are determined by the values of the other <code class="codeph">join</code> parameters. If the values of the joined <code class="codeph">Source</code> are not related to the values of the base <code class="codeph">Source</code>, that is, if neither the joined <code class="codeph">Source</code> nor the base <code class="codeph">Source</code> matches with an input of the other, then the join produces a Cartesian product of the elements of the base and the joined <code class="codeph">Source</code> objects. The examples in the <span class="q">"<a href="understanding-source-objects.html#GUID-CDD7803E-22A0-4F30-8471-2569E82C006E">Outputs of a Source</a>"</span> topic demonstrate this kind of join operation.
                        </p>
                        <p>If the values of the joined <code class="codeph">Source</code> are related to the values of the base <code class="codeph">Source</code>, that is, if either the joined <code class="codeph">Source</code> or the base <code class="codeph">Source</code> is an input of the other, then the elements of the derived <code class="codeph">Source</code> are the result of the matching of the input. The examples in <span class="q">"<a href="understanding-source-objects.html#GUID-41EDCE42-C277-433F-81D6-306148FC263D">Matching a Source with an Input</a>"</span> demonstrate this kind of join operation.
                        </p>
                     </div>
                  </div><a id="OLAAP259"></a><div class="props_rev_3"><a id="GUID-7579066B-F94F-4D53-8200-E72E10993630" name="GUID-7579066B-F94F-4D53-8200-E72E10993630"></a><h5 id="OLAAP-GUID-7579066B-F94F-4D53-8200-E72E10993630" class="sect5"><span class="enumeration_section">5.4.1.2 </span>Describing the comparison Parameter
                     </h5>
                     <div>
                        <p><a id="d13320e1916" class="indexterm-anchor"></a>The <code class="codeph">comparison</code> parameter is another <code class="codeph">Source</code> object. The join operation compares the values of the elements of the comparison <code class="codeph">Source</code> to the values of the joined <code class="codeph">Source</code>. The values that are the same in the joined and comparison objects participate in the join operation or are removed from participation, depending on the value of the <code class="codeph">comparisonRule</code> parameter.
                        </p>
                     </div>
                  </div><a id="OLAAP260"></a><div class="props_rev_3"><a id="GUID-6D856ADF-3241-4F74-A2DA-6B0DF28D7C0F" name="GUID-6D856ADF-3241-4F74-A2DA-6B0DF28D7C0F"></a><h5 id="OLAAP-GUID-6D856ADF-3241-4F74-A2DA-6B0DF28D7C0F" class="sect5"><span class="enumeration_section">5.4.1.3 </span>Describing the comparisonRule Parameter
                     </h5>
                     <div>
                        <p><a id="d13320e1972" class="indexterm-anchor"></a><a id="d13320e1976" class="indexterm-anchor"></a>The value of the <code class="codeph">comparisonRule</code> parameter specifies which values of the joined <code class="codeph">Source</code> participate in the join operation. The <code class="codeph">comparisonRule</code> value also determines the sort order of the participating values. The comparison rule is one of the static constant fields of the <code class="codeph">Source</code> class. The basic comparison rules are the following.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d13320e1996" class="indexterm-anchor"></a><a id="d13320e2000" class="indexterm-anchor"></a><code class="codeph">COMPARISON_RULE_SELECT</code>, which specifies that only the elements of the joined <code class="codeph">Source</code> that are also in the comparison <code class="codeph">Source</code> participate in the join operation.
                              </p>
                           </li>
                           <li>
                              <p><a id="d13320e2015" class="indexterm-anchor"></a><a id="d13320e2019" class="indexterm-anchor"></a><code class="codeph">COMPARISON_RULE_REMOVE</code>, which specifies that only the elements of the joined <code class="codeph">Source</code> that are not in the comparison <code class="codeph">Source</code> participate in the join operation.
                              </p>
                           </li>
                        </ul>
                        <p>The other comparison rules are all select operations that sort the resulting values in various ways. Those rules are the following. </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d13320e2037" class="indexterm-anchor"></a><code class="codeph">COMPARISON_RULE_ASCENDING</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPARISON_RULE_ASCENDING_NULLS_FIRST</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPARISON_RULE_ASCENDING_NULLS_LAST</code></p>
                           </li>
                           <li>
                              <p><a id="d13320e2053" class="indexterm-anchor"></a><code class="codeph">COMPARISON_RULE_DESCENDING</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPARISON_RULE_DESCENDING_NULLS_FIRST</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPARISON_RULE_DESCENDING_NULLS_LAST</code></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLAAP261"></a><div class="props_rev_3"><a id="GUID-72D1F4CF-6207-4C45-B78E-BB1B67D62466" name="GUID-72D1F4CF-6207-4C45-B78E-BB1B67D62466"></a><h5 id="OLAAP-GUID-72D1F4CF-6207-4C45-B78E-BB1B67D62466" class="sect5"><span class="enumeration_section">5.4.1.4 </span>Describing the visible Parameter
                     </h5>
                     <div>
                        <p><a id="d13320e2102" class="indexterm-anchor"></a>The <code class="codeph">visible</code> parameter is a <code class="codeph">boolean</code> value that specifies whether the joined <code class="codeph">Source</code> appears as an output of the <code class="codeph">Source</code> that is derived by the join operation. If the value of the <code class="codeph">visible</code> parameter is <code class="codeph">true</code>, then the derived <code class="codeph">Source</code> has an output that contains the elements drawn from the joined <code class="codeph">Source</code>. If the value is <code class="codeph">false</code>, then the derived <code class="codeph">Source</code> does not have an output for the joined <code class="codeph">Source</code>.
                        </p>
                     </div>
                  </div>
               </div><a id="OLAAP262"></a><div class="props_rev_3"><a id="GUID-CDD7803E-22A0-4F30-8471-2569E82C006E" name="GUID-CDD7803E-22A0-4F30-8471-2569E82C006E"></a><h4 id="OLAAP-GUID-CDD7803E-22A0-4F30-8471-2569E82C006E" class="sect4"><span class="enumeration_section">5.4.2 </span>Outputs of a Source
                  </h4>
                  <div>
                     <p><a id="d13320e2176" class="indexterm-anchor"></a><a id="d13320e2182" class="indexterm-anchor"></a>The <code class="codeph">join</code> method returns a derived <code class="codeph">Source</code> that has the values of the elements of the base <code class="codeph">Source</code> that are specified by the parameters of the method. Those values are the base values of the derived <code class="codeph">Source</code>.
                     </p>
                     <p>If the value of the <code class="codeph">visible</code> parameter of the <code class="codeph">join</code> method is <code class="codeph">true</code>, then the joined <code class="codeph">Source</code> becomes an output of the derived <code class="codeph">Source</code>. The elements of the derived <code class="codeph">Source</code> then have the values of the output and the base values, as specified by the other parameters of the join operation.
                     </p>
                     <p><a id="d13320e2223" class="indexterm-anchor"></a><a id="d13320e2229" class="indexterm-anchor"></a><a id="d13320e2235" class="indexterm-anchor"></a>A derived <code class="codeph">Source</code> can have from zero to many outputs. A <code class="codeph">Source</code> that is an output can itself have outputs. You can get the outputs of a <code class="codeph">Source</code> by calling the <code class="codeph">getOutputs</code> method, which returns a <code class="codeph">List</code> of <code class="codeph">Source</code> objects.
                     </p>
                     <p>The examples in the following topics all have simple join operations that produce <code class="codeph">Source</code> objects that have one or more outputs. Because none of the <code class="codeph">Source</code> objects in the join operations have inputs, the values of the derived <code class="codeph">Source</code> objects produced by the join operations are the Cartesian products of the base and the joined <code class="codeph">Source</code> objects.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-B19BD929-B106-4AD3-84CC-0E8DCA51E86C">Producing a Source with an Output</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534">Using COMPARISON_RULE_SELECT</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-0846E8CA-CA50-49EA-842F-5A45563A5818">Using COMPARISON_RULE_REMOVE</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-22B406BC-38A1-45D8-9E01-06F579EBBF76">Producing a Source with Two Outputs</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-78234ECD-F90D-41C1-B637-803D54AD89B9">Hiding an Output</a></p>
                        </li>
                     </ul>
                     <p>Very different results occur from a join operation that involves a <code class="codeph">Source</code> that has an input and a <code class="codeph">Source</code> that matches with that input. For examples of <code class="codeph">Source</code> objects with inputs and the matching of inputs, see the following topics.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-74C3E73D-40DF-46C9-8831-5FDF66BE6048">Inputs of a Source</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-41EDCE42-C277-433F-81D6-306148FC263D">Matching a Source with an Input</a></p>
                        </li>
                     </ul>
                  </div><a id="OLAAP264"></a><a id="OLAAP263"></a><div class="props_rev_3"><a id="GUID-B19BD929-B106-4AD3-84CC-0E8DCA51E86C" name="GUID-B19BD929-B106-4AD3-84CC-0E8DCA51E86C"></a><h5 id="OLAAP-GUID-B19BD929-B106-4AD3-84CC-0E8DCA51E86C" class="sect5"><span class="enumeration_section">5.4.2.1 </span>Producing a Source with an Output
                     </h5>
                     <div>
                        <div class="example" id="GUID-B19BD929-B106-4AD3-84CC-0E8DCA51E86C__BABFCECA">
                           <p class="titleinexample">Example 5-2 A Simple Join That Produces a Source with an Output</p>
                           <p><a id="d13320e2359" class="indexterm-anchor"></a>This example uses the simplest signature of the <code class="codeph">join</code> method to produce a <code class="codeph">Source</code> that has one output. The example creates a list <code class="codeph">Source</code>, <code class="codeph">letters</code>, that has three elements, the values of which are A, B, and C. It also creates a list <code class="codeph">Source</code>, <code class="codeph">names</code>, that has three elements, the values of which are Stephen, Leo, and Molly.
                           </p><pre class="oac_no_warn" dir="ltr">Source letters = dp.createListSource(new String[] {"A", "B", "C"});
Source names = dp.createListSource(new String[] {"Stephen", "Leo", "Molly"});
Source lettersWithNames = letters.join(names);

// Oracle OLAP translates this shortcut signature of the join method into the
// following full signature, where dp is the DataProvider for the session.
// Source letters.join(names,
<a id="d13320e2387" class="indexterm-anchor"></a>//                     dp.getEmptySource(),
//                     Source.COMPARISON_RULE_REMOVE,
//                     true);
</pre><p>The <code class="codeph">letters.join(names)</code> operation joins the elements of the base <code class="codeph">Source</code>, <code class="codeph">letters</code>, and the joined <code class="codeph">Source</code>, <code class="codeph">names</code>. Because the comparison <code class="codeph">Source</code> has no elements, the join operation does not remove any of the elements that are in the joined <code class="codeph">Source</code> in producing the derived <code class="codeph">Source</code>. (The comparison <code class="codeph">Source</code> is the empty <code class="codeph">Source</code> that is returned by the <code class="codeph">dp.getEmptySource()</code> parameter of the full <code class="codeph">join</code> signature shown in the example.) The resulting derived <code class="codeph">Source</code>, <code class="codeph">lettersWithNames</code>, is the Cartesian product of the elements of the base <code class="codeph">letters</code> and the joined <code class="codeph">names</code>. Because both <code class="codeph">letters</code> and <code class="codeph">names</code> have three elements, the number of elements in <code class="codeph">lettersWithNames</code> is nine.
                           </p>
                           <p>Because the <code class="codeph">visible</code> parameter of <code class="codeph">letters.join(names)</code> is <code class="codeph">true</code>, the derived <code class="codeph">Source</code> has an output. Because no <code class="codeph">elements</code> were removed from the joined <code class="codeph">Source</code>, the derived <code class="codeph">Source</code> has the values of all of the elements of the joined <code class="codeph">Source</code>.
                           </p>
                           <p>A <code class="codeph">Cursor</code> for a <code class="codeph">Source</code> has the same structure as the <code class="codeph">Source</code>. A <code class="codeph">Cursor</code> for the <code class="codeph">lettersWithNames</code> <code class="codeph">Source</code> has a <code class="codeph">ValueCursor</code> for the base values of the derived <code class="codeph">Source</code> and a <code class="codeph">ValueCursor</code> for the output values. The following table presents the values of the <code class="codeph">ValueCursor</code> objects. The table includes headings that are not in the <code class="codeph">ValueCursor</code> objects. 
                           </p><pre class="oac_no_warn" dir="ltr">Output Values     Base Values
   Stephen             A
   Stephen             B
   Stephen             C
   Leo                 A
   Leo                 B
   Leo                 C
   Molly               A
   Molly               B
   Molly               C</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP266"></a><a id="OLAAP265"></a><div class="props_rev_3"><a id="GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534" name="GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534"></a><h5 id="OLAAP-GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534" class="sect5"><span class="enumeration_section">5.4.2.2 </span>Using COMPARISON_RULE_SELECT
                     </h5>
                     <div>
                        <div class="example" id="GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534__BABHAHJD">
                           <p class="titleinexample">Example 5-3 A Simple Join That Selects Elements of the Joined Source</p>
                           <p><a id="d13320e2559" class="indexterm-anchor"></a>This example demonstrates using a comparison <code class="codeph">Source</code> that has values and the comparison rule <code class="codeph">COMPARISON_RULE_SELECT</code>. The example uses the <code class="codeph">letter</code> and <code class="codeph">names</code> <code class="codeph">Source</code> objects from <a href="understanding-source-objects.html#GUID-B19BD929-B106-4AD3-84CC-0E8DCA51E86C__BABFCECA">Example 5-2</a> and adds the <code class="codeph">someNames</code> <code class="codeph">Source</code>. It uses <code class="codeph">someNames</code> as the comparison <code class="codeph">Source</code>. The output of the <code class="codeph">Source</code> derived from the join operation has only the names that are in both the joined <code class="codeph">Source</code> and the comparison <code class="codeph">Source</code>.
                           </p><pre class="oac_no_warn" dir="ltr">Source someNames = dp.createListSource(new String[] {"Stephen", "Molly"});
Source lettersAndSelectedNames = 
  letters.join(names, someNames, Source.COMPARISON_RULE_SELECT, true);
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">lettersAndSelectedNames</code> <code class="codeph">Source</code> has the values specified by the <code class="codeph">Source</code>. The following table presents the <code class="codeph">Cursor</code> values and has headings added.
                           </p><pre class="oac_no_warn" dir="ltr">Output Values     Base Values
   Stephen             A
   Stephen             B
   Stephen             C
   Molly               A
   Molly               B
   Molly               C</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP268"></a><a id="OLAAP267"></a><div class="props_rev_3"><a id="GUID-0846E8CA-CA50-49EA-842F-5A45563A5818" name="GUID-0846E8CA-CA50-49EA-842F-5A45563A5818"></a><h5 id="OLAAP-GUID-0846E8CA-CA50-49EA-842F-5A45563A5818" class="sect5"><span class="enumeration_section">5.4.2.3 </span>Using COMPARISON_RULE_REMOVE
                     </h5>
                     <div>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0846E8CA-CA50-49EA-842F-5A45563A5818__BABFJAAH">
                           <p class="titleinexample">Example 5-4 A Simple Join That Removes Elements of the Joined Source</p>
                           <p><a id="d13320e2667" class="indexterm-anchor"></a>This example demonstrates using a comparison <code class="codeph">Source</code> that has values and the comparison rule <code class="codeph">COMPARISON_RULE_REMOVE</code>. That comparison rule removes from participation in the join operation those values that are the same in the joined and in the comparison <code class="codeph">Source</code> objects. The output of the derived <code class="codeph">Source</code> therefore has only the name from the joined <code class="codeph">Source</code> that is not in the comparison <code class="codeph">Source</code>.
                           </p>
                           <p>The example has the same base, joined, and comparison <code class="codeph">Source</code> objects as <a href="understanding-source-objects.html#GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534__BABHAHJD">Example 5-3</a>.
                           </p><pre class="oac_no_warn" dir="ltr">Source lettersAndNamesWithoutRemovedNames =
  letters.join(names,
               someNames,
               Source.COMPARISON_RULE_REMOVE, 
               true);
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">lettersAndNamesWithoutRemovedNames</code> <code class="codeph">Source</code> has the values specified by the <code class="codeph">Source</code>. The following table presents the values and has headings added.
                           </p><pre class="oac_no_warn" dir="ltr">Output Values     Base Values
   Leo                 A
   Leo                 B
   Leo                 C</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP270"></a><a id="OLAAP269"></a><div class="props_rev_3"><a id="GUID-22B406BC-38A1-45D8-9E01-06F579EBBF76" name="GUID-22B406BC-38A1-45D8-9E01-06F579EBBF76"></a><h5 id="OLAAP-GUID-22B406BC-38A1-45D8-9E01-06F579EBBF76" class="sect5"><span class="enumeration_section">5.4.2.4 </span>Producing a Source with Two Outputs
                     </h5>
                     <div>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-22B406BC-38A1-45D8-9E01-06F579EBBF76__BABBAIFI">
                           <p class="titleinexample">Example 5-5 A Simple Join That Produces a Source with Two Outputs</p>
                           <p><a id="d13320e2757" class="indexterm-anchor"></a>If you join a <code class="codeph">Source</code> to a <code class="codeph">Source</code> that has an output, and if the <code class="codeph">visible</code> <code class="codeph">parameter</code> is <code class="codeph">true</code>, then the join operation produces a <code class="codeph">Source</code> that has the joined <code class="codeph">Source</code> as an additional output. The additional output becomes the first output, as shown in this example.
                           </p>
                           <p>The example uses the <code class="codeph">Source</code> objects from <a href="understanding-source-objects.html#GUID-E4E4A262-B925-423A-B2FA-65CF2AE44534__BABHAHJD">Example 5-3</a> and creates another list <code class="codeph">Source</code>, <code class="codeph">colors</code>, that contains the names of two colors. The example joins the <code class="codeph">colors</code> <code class="codeph">Source</code> to the <code class="codeph">lettersWithSelectedNames</code> <code class="codeph">Source</code> to produce the <code class="codeph">lettersWithSelectedNamesAndColors</code> <code class="codeph">Source</code>.
                           </p>
                           <p>The <code class="codeph">lettersWithSelectedNames</code> <code class="codeph">Source</code> has <code class="codeph">names</code> as an output. The <code class="codeph">lettersWithSelectedNamesAndColors</code> <code class="codeph">Source</code> has both <code class="codeph">colors</code> and <code class="codeph">names</code> as outputs. The first output is <code class="codeph">colors</code> and the second output is <code class="codeph">names</code>.
                           </p><pre class="oac_no_warn" dir="ltr">Source colors = dp.createListSource(new String[] {"Green", "Maroon"});

Source lettersWithSelectedNames = 
  letters.join(names,
               someNames,
               Source.COMPARISON_RULE_SELECT,
               true);
Source lettersWithSelectedNamesAndColors =
  lettersWithSelectedNames.join(colors);
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">lettersWithSelectedNamesAndColors</code> <code class="codeph">Source</code> has the values shown in the following table. The table has headings added.
                           </p><pre class="oac_no_warn" dir="ltr">Output 1 Values     Output 2 Values     Base Values
      Green            Stephen               A
      Green            Stephen               B
      Green            Stephen               C
      Green            Molly                 A
      Green            Molly                 B
      Green            Molly                 C
      Maroon           Stephen               A
      Maroon           Stephen               B
      Maroon           Stephen               C
      Maroon           Molly                 A
      Maroon           Molly                 B
      Maroon           Molly                 C</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP272"></a><a id="OLAAP271"></a><div class="props_rev_3"><a id="GUID-78234ECD-F90D-41C1-B637-803D54AD89B9" name="GUID-78234ECD-F90D-41C1-B637-803D54AD89B9"></a><h5 id="OLAAP-GUID-78234ECD-F90D-41C1-B637-803D54AD89B9" class="sect5"><span class="enumeration_section">5.4.2.5 </span>Hiding an Output
                     </h5>
                     <div>
                        <div class="example" id="GUID-78234ECD-F90D-41C1-B637-803D54AD89B9__BABDJJDJ">
                           <p class="titleinexample">Example 5-6 A Simple Join That Hides An Output</p>
                           <p><a id="d13320e2901" class="indexterm-anchor"></a><a id="d13320e2907" class="indexterm-anchor"></a>If the <code class="codeph">visible</code> parameter of a <code class="codeph">join</code> method is <code class="codeph">false</code>, then the joined <code class="codeph">Source</code> participates in the join operation but does not appear as an output of the <code class="codeph">Source</code> derived by the join. This example uses the <code class="codeph">joinHidden</code> shortcut method to join the <code class="codeph">lettersWithSelectedNames</code> and the <code class="codeph">colors</code> <code class="codeph">Source</code> objects from <a href="understanding-source-objects.html#GUID-22B406BC-38A1-45D8-9E01-06F579EBBF76__BABBAIFI">Example 5-5</a>. The example includes in a comment the full <code class="codeph">join</code> signature for the <code class="codeph">joinHidden</code> shortcut.
                           </p><pre class="oac_no_warn" dir="ltr">Source lettersWithSelectedNamesAndHiddenColors =
  lettersWithSelectedNames.joinHidden(colors);

// The full signature of the joinHidden shortcut method is
// Source result = base.join(joined,
//                           dp.getEmptySource(),
//                           Source.COMPARISON_RULE_REMOVE,
//                           false);
// So if Source base = lettersWithSelectedNames and
// Source joined = colors, then the result Source is the same as the 
// lettersWithSelectedNamesAndHiddenColors Source.
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">lettersWithSelectedNamesAndHiddenColors</code> <code class="codeph">Source</code> has the values shown in the following table. The table has headings added.
                           </p>
                           <p>Note that the derived <code class="codeph">lettersWithSelectedNamesAndHiddenColors</code> <code class="codeph">Source</code> still has twelve elements, even though the values for the <code class="codeph">colors</code> <code class="codeph">Source</code> do not appear as output values. The derived <code class="codeph">Source</code> has one set of the six values of the <code class="codeph">lettersWithSelectedNames</code> <code class="codeph">Source</code> for each value of the hidden <code class="codeph">colors</code> <code class="codeph">Source</code>.
                           </p>
                           <p>The example displays the following output.</p><pre class="oac_no_warn" dir="ltr">Output Values     Base Values
   Stephen             A
   Stephen             B
   Stephen             C
   Molly               A
   Molly               B
   Molly               C
   Stephen             A
   Stephen             B
   Stephen             C
   Molly               A
   Molly               B
   Molly               C</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="OLAAP273"></a><div class="props_rev_3"><a id="GUID-74C3E73D-40DF-46C9-8831-5FDF66BE6048" name="GUID-74C3E73D-40DF-46C9-8831-5FDF66BE6048"></a><h4 id="OLAAP-GUID-74C3E73D-40DF-46C9-8831-5FDF66BE6048" class="sect4"><span class="enumeration_section">5.4.3 </span>Inputs of a Source
                  </h4>
                  <div>
                     <p><a id="d13320e3032" class="indexterm-anchor"></a><a id="d13320e3038" class="indexterm-anchor"></a><a id="d13320e3042" class="indexterm-anchor"></a>The examples in the <span class="q">"<a href="understanding-source-objects.html#GUID-CDD7803E-22A0-4F30-8471-2569E82C006E">Outputs of a Source</a>"</span> topic all produce derived <code class="codeph">Source</code> objects that have elements that are the Cartesian product of the unrelated base and joined <code class="codeph">Source</code> objects. While such an operation can be useful, a more powerful aspect of <code class="codeph">Source</code> objects is the ability to relate the elements of one <code class="codeph">Source</code> to another <code class="codeph">Source</code>. When such a relationship exists, you can derive other <code class="codeph">Source</code> objects that are the result of operations between the related elements. For example, you can derive a <code class="codeph">Source</code> that contains only selected elements of another <code class="codeph">Source</code>. This relationship between elements is represented by the input of a <code class="codeph">Source</code>.
                     </p>
                     <p>A <code class="codeph">Source</code> with an input is an incomplete specification of data. The input represents the type of <code class="codeph">Source</code> that can have the elements that a join operation requires to complete the data specification. Before you can retrieve the data with a <code class="codeph">Cursor</code>, you must match the input with a <code class="codeph">Source</code> that has the elements that complete the specification.
                     </p>
                     <p>You match an input with a <code class="codeph">Source</code> by using the <code class="codeph">join</code> or <code class="codeph">recursiveJoin</code> method. The match occurs between the base <code class="codeph">Source</code> and the joined <code class="codeph">Source</code>.
                     </p>
                     <p>The matching of an input acts as a filter so that the <code class="codeph">Source</code> derived by the join operation has only the elements of the base <code class="codeph">Source</code> whose values are related to those of the elements of the joined <code class="codeph">Source</code>. The rules related to matching a <code class="codeph">Source</code> with an input are described in <span class="q">"<a href="understanding-source-objects.html#GUID-41EDCE42-C277-433F-81D6-306148FC263D">Matching a Source with an Input</a>"</span>. That topic has examples that produce derived <code class="codeph">Source</code> objects that are the result of the matching of an input.
                     </p>
                     <p><a id="d13320e3137" class="indexterm-anchor"></a><a id="d13320e3143" class="indexterm-anchor"></a><a id="d13320e3149" class="indexterm-anchor"></a>A <code class="codeph">Source</code> can have from zero to many inputs. You can get all of the inputs of a <code class="codeph">Source</code> by calling the <code class="codeph">getInputs</code> method.
                     </p>
                     <p>Some primary <code class="codeph">Source</code> objects have inputs. You can derive a <code class="codeph">Source</code> that has an input by using some methods of the <code class="codeph">Source</code> class.
                     </p>
                  </div><a id="OLAAP274"></a><div class="props_rev_3"><a id="GUID-52930A3C-DC86-420C-80F3-FF2A3A9AF618" name="GUID-52930A3C-DC86-420C-80F3-FF2A3A9AF618"></a><h5 id="OLAAP-GUID-52930A3C-DC86-420C-80F3-FF2A3A9AF618" class="sect5"><span class="enumeration_section">5.4.3.1 </span>Primary Source Objects with Inputs
                     </h5>
                     <div>
                        <p><a id="d13320e3207" class="indexterm-anchor"></a><a id="d13320e3211" class="indexterm-anchor"></a><a id="d13320e3217" class="indexterm-anchor"></a><a id="d13320e3221" class="indexterm-anchor"></a>The primary <code class="codeph">Source</code> objects for the <code class="codeph">MdmDimensionedObject</code> subclasses <code class="codeph">MdmAttribute</code> and <code class="codeph">MdmMeasure</code> have inputs. The primary <code class="codeph">Source</code> for an <code class="codeph">MdmAttribute</code> has one input. The primary <code class="codeph">Source</code> for an <code class="codeph">MdmMeasure</code> has one or more inputs.
                        </p>
                        <p><a id="d13320e3252" class="indexterm-anchor"></a><a id="d13320e3256" class="indexterm-anchor"></a>The inputs of an <code class="codeph">MdmAttribute</code> or an <code class="codeph">MdmMeasure</code> are the <code class="codeph">Source</code> objects for the <code class="codeph">MdmPrimaryDimension</code> objects that dimension the attribute or measure. To get the value of an attribute or a measure, you must join the attribute or measure with a <code class="codeph">Source</code> that contains the related dimension members. The join operation matches the input of the attribute or measure with the <code class="codeph">Source</code> that contains the dimension members. <a href="understanding-source-objects.html#GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D__BABJHBEG">Example 5-7</a> matches the input of an attribute with the dimension of that attribute. <a href="understanding-source-objects.html#GUID-83F2CA40-C041-4733-A13F-3EC617942312__BABFIEJH">Example 5-8</a> matches the inputs of a measure with the dimensions of that measure.
                        </p>
                     </div>
                  </div><a id="OLAAP275"></a><div class="props_rev_3"><a id="GUID-F00CC751-9451-4ECE-84AE-0B0ECC724D78" name="GUID-F00CC751-9451-4ECE-84AE-0B0ECC724D78"></a><h5 id="OLAAP-GUID-F00CC751-9451-4ECE-84AE-0B0ECC724D78" class="sect5"><span class="enumeration_section">5.4.3.2 </span>Deriving a Source with an Input
                     </h5>
                     <div>
                        <p><a id="d13320e3319" class="indexterm-anchor"></a><a id="d13320e3323" class="indexterm-anchor"></a><a id="d13320e3329" class="indexterm-anchor"></a><a id="d13320e3331" class="indexterm-anchor"></a><a id="d13320e3333" class="indexterm-anchor"></a>Some <code class="codeph">Source</code> methods always return a <code class="codeph">Source</code> that has an input. The <code class="codeph">Source</code> returned by the <code class="codeph">extract</code>, <code class="codeph">position</code>, or <code class="codeph">value</code> method has the base <code class="codeph">Source</code> as an input. You can use these methods to produce a <code class="codeph">Source</code> whose elements are derived, or filtered, from the elements of another <code class="codeph">Source</code>.
                        </p>
                        <p>The <code class="codeph">value</code> method returns a <code class="codeph">Source</code> that has the elements of the base <code class="codeph">Source</code> and has the base <code class="codeph">Source</code> as an input. You typically use the <code class="codeph">Source</code> returned by the <code class="codeph">value</code> method as the base or joined <code class="codeph">Source</code> of a <code class="codeph">join</code> method, or sometimes as the comparison <code class="codeph">Source</code>. Several examples in this chapter and in <a href="making-queries-using-source-methods.html#GUID-B5D5AF5D-330E-46D3-8BD7-E84B1373E6A7"> Making Queries Using Source Methods</a> use the <code class="codeph">value</code> method.
                        </p>
                        <p>The <code class="codeph">position</code> method returns a <code class="codeph">Source</code> that has the position of each element of the base <code class="codeph">Source</code> and that has the base <code class="codeph">Source</code> as an input. For an example of using the <code class="codeph">position</code> method, see <a href="making-queries-using-source-methods.html#GUID-50FB0A20-3E17-465D-BAFE-EB082C20FC68__CBBHFCIH">Example 6-4</a>.
                        </p>
                        <p>You use the <code class="codeph">extract</code> method when elements of the <code class="codeph">Source</code> objects that you want to join have <code class="codeph">Source</code> objects as values. For examples of using the <code class="codeph">extract</code> method, see <a href="understanding-source-objects.html#GUID-677C41E0-21D4-4A9D-9703-E5EB312A197F__BABIJIFI">Example 5-12</a>, <a href="making-queries-using-source-methods.html#GUID-6039C35F-361A-430F-9015-5687F072245A__CBBBGBGC">Example 6-8</a>, <a href="making-queries-using-source-methods.html#GUID-E1F9B138-7563-46A7-9D04-7B33991A156F__CBBHGDGG">Example 6-13</a>, and <a href="making-queries-using-source-methods.html#GUID-E1F9B138-7563-46A7-9D04-7B33991A156F__CBBFEDFJ">Example 6-14</a>.
                        </p>
                     </div>
                  </div><a id="OLAAP276"></a><div class="props_rev_3"><a id="GUID-F0FE8FFC-D1D7-4B2B-9FEA-BB91521971A2" name="GUID-F0FE8FFC-D1D7-4B2B-9FEA-BB91521971A2"></a><h5 id="OLAAP-GUID-F0FE8FFC-D1D7-4B2B-9FEA-BB91521971A2" class="sect5"><span class="enumeration_section">5.4.3.3 </span>Type of Inputs
                     </h5>
                     <div>
                        <p><a id="d13320e3480" class="indexterm-anchor"></a><a id="d13320e3486" class="indexterm-anchor"></a><a id="d13320e3492" class="indexterm-anchor"></a>The input of a <code class="codeph">Source</code> derived by the <code class="codeph">position</code> or <code class="codeph">value</code> method, and an input intrinsic to an <code class="codeph">MdmDimensionedObject</code>, are regular inputs. A regular input relates the elements of the <code class="codeph">Source</code> with the input to the elements of the <code class="codeph">Source</code> that matches with the input. You can get the regular inputs by calling the <code class="codeph">getRegularInputs</code> method.
                        </p>
                        <p><a id="d13320e3520" class="indexterm-anchor"></a>The input of a <code class="codeph">Source</code> returned by the <code class="codeph">extract</code> method is an extraction input. You can get the extraction inputs by calling the <code class="codeph">getExtractionInputs</code> method.
                        </p>
                     </div>
                  </div>
               </div><a id="OLAAP277"></a><div class="props_rev_3"><a id="GUID-41EDCE42-C277-433F-81D6-306148FC263D" name="GUID-41EDCE42-C277-433F-81D6-306148FC263D"></a><h4 id="OLAAP-GUID-41EDCE42-C277-433F-81D6-306148FC263D" class="sect4"><span class="enumeration_section">5.4.4 </span>Matching a Source with an Input
                  </h4>
                  <div>
                     <p><a id="d13320e3569" class="indexterm-anchor"></a><a id="d13320e3575" class="indexterm-anchor"></a><a id="d13320e3581" class="indexterm-anchor"></a><a id="d13320e3585" class="indexterm-anchor"></a>In a join operation, the matching of a <code class="codeph">Source</code> with an input occurs only between the base <code class="codeph">Source</code> and the joined <code class="codeph">Source</code>. A <code class="codeph">Source</code> matches with an input if one of the following conditions is true.
                     </p>
                     <ol>
                        <li>
                           <p>The <code class="codeph">Source</code> is the same object as the input or it is a subtype of the input.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">Source</code> has an output that is the same object as the input or the output is a subtype of the input.
                           </p>
                        </li>
                     </ol>
                     <p>The join operation looks for the conditions in the order shown in the preceding list. It searches the list of outputs of the <code class="codeph">Source</code> recursively, including any outputs of an output, looking for a match with the input. The search ends with the first matching <code class="codeph">Source</code>. An input can match with only one <code class="codeph">Source</code>.
                     </p>
                     <p>When a <code class="codeph">Source</code> with an input is joined to a <code class="codeph">Source</code> that matches with the input, the derived <code class="codeph">Source</code> returned by the <code class="codeph">join</code> method has the elements of the base that are related to the elements specified by the parameters of the method. The derived <code class="codeph">Source</code> does not have the input.
                     </p>
                     <p>Matching a <code class="codeph">Source</code> with an input does not affect the outputs of the base <code class="codeph">Source</code> or the joined <code class="codeph">Source</code>. If a base <code class="codeph">Source</code> has an output that matches with the input of the joined <code class="codeph">Source</code>, then the resulting <code class="codeph">Source</code> does not have the input but it does have the output. If the base <code class="codeph">Source</code> or the joined <code class="codeph">Source</code> in a join operation has an input that is not matched in the operation, then the unmatched input is an input of the resulting <code class="codeph">Source</code>.
                     </p>
                     <p>The comparison <code class="codeph">Source</code> of a <code class="codeph">join</code> method does not participate in the input matching. If the comparison <code class="codeph">Source</code> has an input, then that input is not matched and the <code class="codeph">Source</code> returned by the <code class="codeph">join</code> method has that same input.
                     </p>
                     <p>The examples in the following topics demonstrate matching a <code class="codeph">Source</code> with an input.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D">Matching the Input of the Source for an MdmAttribute</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-83F2CA40-C041-4733-A13F-3EC617942312">Matching the Inputs of a Measure</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-55A3D7AA-68FF-4DCC-B7E9-22E38A799AD4">Using the value Method to Derive a Source with an Input</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-D196A026-C589-401A-B312-001702278183">Using the value Method to Select Values of a Source</a></p>
                        </li>
                        <li>
                           <p><a href="understanding-source-objects.html#GUID-677C41E0-21D4-4A9D-9703-E5EB312A197F">Using the extract Method to Combine Elements of Source Objects</a></p>
                        </li>
                     </ul>
                  </div><a id="OLAAP279"></a><a id="OLAAP278"></a><div class="props_rev_3"><a id="GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D" name="GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D"></a><h5 id="OLAAP-GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D" class="sect5"><span class="enumeration_section">5.4.4.1 </span>Matching the Input of the Source for an MdmAttribute
                     </h5>
                     <div>
                        <div class="section">
                           <p><a href="understanding-source-objects.html#GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D__BABJHBEG">Example 5-7</a> demonstrates the joining of the <code class="codeph">Source</code> for an <code class="codeph">MdmBaseAttribute</code> to the <code class="codeph">Source</code> for an <code class="codeph">MdmPrimaryDimension</code>. The example gets the local value attribute from the <code class="codeph">MdmPrimaryDimension</code> for the CHANNEL_AWJ dimension. The <code class="codeph">Source</code> for the attribute, <code class="codeph">locValAttr</code>, has the <code class="codeph">Source</code> for the <code class="codeph">MdmPrimaryDimension</code> as an input.
                           </p>
                           <p>In the example, <code class="codeph">locValAttr</code> is the base <code class="codeph">Source</code> of the join operation and <code class="codeph">chanDim</code> is the joined <code class="codeph">Source</code>. Because <code class="codeph">chanDim</code> is an instance of the <code class="codeph">Source</code> for the <code class="codeph">MdmPrimaryDimension</code> for the CHANNEL_AWJ dimension, <code class="codeph">chanDim</code> matches with the input of <code class="codeph">locValAttr</code>. The result of the join is <code class="codeph">dimMembersWithLocalValue</code>, which has <code class="codeph">chanDim</code> as an output and does not have any inputs.
                           </p>
                           <p>The <code class="codeph">locValAttr</code> <code class="codeph">Source</code> has four elements because each of the four members of the CHANNEL_AWJ dimension has a different local value. The <code class="codeph">Source</code> derived by the join operation, <code class="codeph">dimMembersWithLocalValue</code>, has four elements. The value of each element is the dimension member and the related attribute value. The dimension member is a value from the output and the attribute value is from the base.
                           </p>
                           <p><a href="understanding-source-objects.html#GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D__BABJHBEG">Example 5-7</a> demonstrates matching the input of a base <code class="codeph">Source</code> with the joined <code class="codeph">Source</code>. In the example, <code class="codeph">mdmDBSchema</code> is the <code class="codeph">MdmDatabaseSchema</code> for the GLOBAL schema.
                           </p>
                           <p>A <code class="codeph">Cursor</code> for the <code class="codeph">dimMembersWithLocalValue</code> <code class="codeph">Source</code> has the values shown in the following table. The output values are the unique dimension member values derived from the joined <code class="codeph">Source</code>, <code class="codeph">chanDim</code>. The base values are derived from the base <code class="codeph">Source</code>, <code class="codeph">locValAttr</code>. The table has headings added.
                           </p><pre class="oac_no_warn" dir="ltr">           Output Values                 Base Values
CHANNEL_PRIMARY::TOTAL_CHANNEL::TOTAL       TOTAL
CHANNEL_PRIMARY::CHANNEL::CAT               CAT
CHANNEL_PRIMARY::CHANNEL::DIR               DIR
CHANNEL_PRIMARY::CHANNEL::INT               INT</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D__BABJHBEG">
                           <p class="titleinexample">Example 5-7 Getting an Attribute for a Dimension Member</p><pre class="oac_no_warn" dir="ltr">MdmStandardDimension mdmChanDim =
  mdmDBSchema.findOrCreateStandardDimension("CHANNEL_AWJ");
Source chanDim = mdmChanDim.getSource();
Source locValAttr = mdmChanDim.getLocalValueAttribute().getSource();
Source dimMembersWithLocalValue = locValAttr.join(chanDim);
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP281"></a><a id="OLAAP280"></a><div class="props_rev_3"><a id="GUID-83F2CA40-C041-4733-A13F-3EC617942312" name="GUID-83F2CA40-C041-4733-A13F-3EC617942312"></a><h5 id="OLAAP-GUID-83F2CA40-C041-4733-A13F-3EC617942312" class="sect5"><span class="enumeration_section">5.4.4.2 </span>Matching the Inputs of a Measure
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d13320e3924" class="indexterm-anchor"></a><a href="understanding-source-objects.html#GUID-83F2CA40-C041-4733-A13F-3EC617942312__BABFIEJH">Example 5-8</a> demonstrates getting values from a measure. The example gets the <code class="codeph">MdmCube</code> that contains the UNIT_PRICE measure and gets the <code class="codeph">MdmBaseMeasure</code> for the measure from that cube. The cube, and the measures of the cube, are dimensioned by the PRODUCT_AWJ and TIME_AWJ dimensions. The example gets the <code class="codeph">MdmPrimaryDimension</code> objects for those dimensions and gets the <code class="codeph">Source</code> objects for those metadata objects.
                           </p>
                           <p>The <code class="codeph">Source</code> for the measure, <code class="codeph">unitPrice</code>, has the <code class="codeph">Source</code> objects for the two <code class="codeph">MdmPrimaryDimension</code> objects as inputs. The example joins the <code class="codeph">Source</code> for the measure with the <code class="codeph">Source</code> objects for the dimensions. The join operations match the inputs of the measure with the <code class="codeph">Source</code> objects for the dimensions.
                           </p>
                           <p>The example first joins the <code class="codeph">Source</code> for the PRODUCT_AWJ dimension to the <code class="codeph">Source</code> for the measure. That <code class="codeph">unitPrice.join(prodDim)</code> operation derives a <code class="codeph">Source</code> that has base values from <code class="codeph">unitPrice</code> and has <code class="codeph">prodDim</code> as an output. It also has the <code class="codeph">Source</code> for the TIME_AWJ dimension as an input. The next join operation joins the <code class="codeph">Source</code> derived by <code class="codeph">unitPrice.join(prodDim)</code> with <code class="codeph">timeDim</code>, the <code class="codeph">Source</code> for the TIME_AWJ dimension. That join operation matches the input of the <code class="codeph">Source</code> derived by <code class="codeph">unitPrice.join(prodDim)</code> with <code class="codeph">timeDim</code>. 
                           </p>
                           <p>The <code class="codeph">Source</code> derived by the second join operation is <code class="codeph">pricesByProductAndTime</code>. That <code class="codeph">Source</code> has no inputs and has the <code class="codeph">Source</code> objects for the PRODUCT_AWJ and TIME_AWJ dimensions as outputs. A <code class="codeph">Cursor</code> for <code class="codeph">pricesByProductAndTime</code> contains the price of each product value for every time value.
                           </p>
                           <p><a id="d13320e4034" class="indexterm-anchor"></a>The example finally calls the <code class="codeph">count</code> method of <code class="codeph">pricesByProductAndTime</code>. That method returns the <code class="codeph">NumberSource</code> <code class="codeph">numPricesByProductAndTime</code>, which contains the number of elements of the <code class="codeph">pricesByProductAndTime</code> <code class="codeph">Source</code>. A <code class="codeph">Cursor</code> for the <code class="codeph">numPricesByProductAndTime</code> <code class="codeph">Source</code> contains the value 4998, which is the number of measure values for the product and time tuples.
                           </p>
                           <p>To produce a <code class="codeph">Source</code> that contains only the measure values for certain products and times, you need to join the <code class="codeph">Source</code> for the measure with <code class="codeph">Source</code> objects that specify the dimension values that you want. You can produce such a selection by using methods of the primary <code class="codeph">Source</code> for the dimension. One means of producing a <code class="codeph">Source</code> that represents a selection of values of a <code class="codeph">Source</code> is to use the <code class="codeph">value</code> method.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-83F2CA40-C041-4733-A13F-3EC617942312__BABFIEJH">
                           <p class="titleinexample">Example 5-8 Getting Measure Values</p>
                           <p><a id="d13320e4095" class="indexterm-anchor"></a>This example demonstrates matching the inputs of the base <code class="codeph">Source</code> with the joined <code class="codeph">Source</code>. In the example, <code class="codeph">mdmDBSchema</code> is the <code class="codeph">MdmDatabaseSchema</code> for the GLOBAL schema.
                           </p><pre class="oac_no_warn" dir="ltr">MdmCube mdmPriceCube =
  mdmDBSchema.findOrCreateCube("PRICE_CUBE_AWJ");
MdmBaseMeasure mdmUnitPrice =
  mdmPriceCube.findOrCreateBaseMeasure("UNIT_PRICE");
MdmStandardDimension mdmProdDim =
  mdmDBSchema.findOrCreateStandardDimension("PRODUCT_AWJ");
MdmTimeDimension mdmTimeDim =
  mdmDBSchema.findOrCreateTimeDimension("TIME_AWJ");

Source prodDim = mdmProdDim.getSource();
Source timeDim = mdmTimeDim.getSource();
Source unitPrice = mdmUnitPrice.getSource();

Source pricesByProductAndTime = unitPrice.join(prodDim).join(timeDim);
NumberSource numPricesByProductAndTime = pricesByProductAndTime.count();
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP283"></a><a id="OLAAP282"></a><div class="props_rev_3"><a id="GUID-55A3D7AA-68FF-4DCC-B7E9-22E38A799AD4" name="GUID-55A3D7AA-68FF-4DCC-B7E9-22E38A799AD4"></a><h5 id="OLAAP-GUID-55A3D7AA-68FF-4DCC-B7E9-22E38A799AD4" class="sect5"><span class="enumeration_section">5.4.4.3 </span>Using the value Method to Derive a Source with an Input
                     </h5>
                     <div>
                        <div class="example" id="GUID-55A3D7AA-68FF-4DCC-B7E9-22E38A799AD4__BABFCCIA">
                           <p class="titleinexample">Example 5-9 Using the value Method to Relate a Source to Itself</p>
                           <p><a id="d13320e4155" class="indexterm-anchor"></a><a id="d13320e4161" class="indexterm-anchor"></a>In this example, the <code class="codeph">lettersValue</code> <code class="codeph">Source</code> is returned by the <code class="codeph">letters.value()</code> method. The <code class="codeph">lettersValue</code> <code class="codeph">Source</code> has <code class="codeph">letters</code> as an input. The input represents a relation between the values of the <code class="codeph">Source</code> with the input and the values of the <code class="codeph">Source</code> that matches with the input.
                           </p>
                           <p>The join operation has <code class="codeph">letters</code> as the base <code class="codeph">Source</code> and <code class="codeph">lettersValue</code> as the joined <code class="codeph">Source</code>. The base <code class="codeph">Source</code>, <code class="codeph">letters</code>, matches with the input of <code class="codeph">lettersValue</code>, which is also <code class="codeph">letters</code>, because they are the same. The <code class="codeph">Source</code> produced by the join operation, <code class="codeph">lettersByLettersValue</code> has <code class="codeph">lettersValue</code> as an output. It does not have an input. Each element of <code class="codeph">lettersByLettersValue</code> has a base value from <code class="codeph">letters</code> and the related value from <code class="codeph">lettersValue</code>.
                           </p><pre class="oac_no_warn" dir="ltr">Source letters = dp.createListSource(new String[] {"A", "B", "C"});
Source lettersValue = letters.value();
Source lettersByLettersValue = letters.join(lettersValue); 
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">lettersByLettersValue</code> <code class="codeph">Source</code> has the values shown in the following table. The table has headings added.
                           </p><pre class="oac_no_warn" dir="ltr">Output Values     Base Values
       A               A
       B               B
       C               C
</pre><p>Because <code class="codeph">lettersByLettersValue</code> contains only those values of the base and joined <code class="codeph">Source</code> objects that are related, the base values of the <code class="codeph">Cursor</code> for <code class="codeph">lettersByLettersValue</code> <code class="codeph">Source</code> are the same as the output values. If the base and joined <code class="codeph">Source</code> objects had been unrelated, as in <code class="codeph">letters.join(letters)</code>, then the <code class="codeph">Source</code> produced by the join operation would contain the Cartesian product of the base and joined <code class="codeph">Source</code> objects.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP285"></a><a id="OLAAP286"></a><a id="OLAAP284"></a><div class="props_rev_3"><a id="GUID-D196A026-C589-401A-B312-001702278183" name="GUID-D196A026-C589-401A-B312-001702278183"></a><h5 id="OLAAP-GUID-D196A026-C589-401A-B312-001702278183" class="sect5"><span class="enumeration_section">5.4.4.4 </span>Using the value Method to Select Values of a Source
                     </h5>
                     <div>
                        <div class="example" id="GUID-D196A026-C589-401A-B312-001702278183__BABBBAFI">
                           <p class="titleinexample">Example 5-10 Using the value Method to Select Elements of a Source</p>
                           <p><a id="d13320e4323" class="indexterm-anchor"></a><a id="d13320e4327" class="indexterm-anchor"></a><a id="d13320e4333" class="indexterm-anchor"></a><a id="d13320e4337" class="indexterm-anchor"></a>By using the <code class="codeph">value</code> method, you can derive a <code class="codeph">Source</code> that is a selection of the elements of another <code class="codeph">Source</code>. This example selects two elements from the <code class="codeph">Source</code> for the PRODUCT_AWJ dimension from <a href="understanding-source-objects.html#GUID-F4052FE8-9065-4EBF-87F4-6A087FFF4A1D__BABJHBEG">Example 5-7</a>. This example demonstrates a base <code class="codeph">Source</code> matching with the input of the joined <code class="codeph">Source</code>. 
                           </p><pre class="oac_no_warn" dir="ltr">Source productsToSelect = dp.createListSource(new String[]
                                  {"PRODUCT_PRIMARY::ITEM::ENVY EXE",
                                   "PRODUCT_PRIMARY::ITEM::ENVY STD"});
Source selectedProducts = prodDim.join(prodDim.value(),
                                       productsToSelect,
                                       Source.COMPARISON_RULE_SELECT,
                                       false);  // Hide the output.
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">productsToSelect</code> <code class="codeph">Source</code> has the following values.
                           </p><pre class="oac_no_warn" dir="ltr">PRODUCT_PRIMARY::ITEM::ENVY EXE
PRODUCT_PRIMARY::ITEM::ENVY STD
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">selectedProducts</code> <code class="codeph">Source</code> has the following values.
                           </p><pre class="oac_no_warn" dir="ltr">PRODUCT_PRIMARY::ITEM::ENVY EXE
PRODUCT_PRIMARY::ITEM::ENVY STD
</pre><p><a id="d13320e4392" class="indexterm-anchor"></a>The two <code class="codeph">Source</code> objects contain the same values. However, the types of the objects are different. The type of the <code class="codeph">productsToSelect</code> <code class="codeph">Source</code> is the <code class="codeph">Source</code> for the <code class="codeph">FundamentalMetadataObject</code> for the String data type. The type of the <code class="codeph">selectedProducts</code> <code class="codeph">Source</code> is <code class="codeph">prodDim</code> because <code class="codeph">selectedProducts</code> is derived from <code class="codeph">prodDim</code>. Therefore, <code class="codeph">selectedProducts</code> is a subtype of <code class="codeph">prodDim</code> and as such it can match with a <code class="codeph">Source</code> that has the <code class="codeph">Source</code> for the PRODUCT_AWJ dimension as an input, as shown in the next example.
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-D196A026-C589-401A-B312-001702278183__BABBCGED">
                           <p class="titleinexample">Example 5-11 Using Derived Source Objects to Select Measure Values</p>
                           <p><a id="d13320e4445" class="indexterm-anchor"></a>This example selects elements from the <code class="codeph">Source</code> objects for two dimensions and then gets the measure values for the selected dimension members. The example uses the same dimensions and measure as in <a href="understanding-source-objects.html#GUID-83F2CA40-C041-4733-A13F-3EC617942312__BABFIEJH">Example 5-8</a>. In this example, however, the <code class="codeph">Source</code> objects that match with the inputs of the <code class="codeph">Source</code> for the measure are not the <code class="codeph">Source</code> objects for the dimensions. Instead they are subtypes of the <code class="codeph">Source</code> objects for the dimensions. The subtypes specify selected members of the dimensions. The <code class="codeph">Source</code> that is derived by joining the measure with the dimensions, <code class="codeph">pricesForSelectedProductsAndTimes</code>, has six elements, which specify only the measure values for the two products for the three time values, instead of the 4998 elements of the <code class="codeph">pricesByProductAndTime</code> <code class="codeph">Source</code> in <a href="understanding-source-objects.html#GUID-83F2CA40-C041-4733-A13F-3EC617942312__BABFIEJH">Example 5-8</a>. In this example, <code class="codeph">mdmDBSchema</code> is the <code class="codeph">MdmDatabaseSchema</code> for the GLOBAL schema.
                           </p><pre class="oac_no_warn" dir="ltr">// Create lists of product and time dimension members.
Source productsToSelect = dp.createListSource(new String[]
                                           {"PRODUCT_PRIMARY::ITEM::ENVY EXE",
                                            "PRODUCT_PRIMARY::ITEM::ENVY STD"});
Source timesToSelect = dp.createListSource(new String[]
                                           {"CALENDAR_YEAR::MONTH::2000.01",
                                            "CALENDAR_YEAR::MONTH::2001.01",
                                            "CALENDAR_YEAR::MONTH::2002.01"});
// Get the PRICE_CUBE_AWJ cube.
MdmCube mdmPriceCube = mdmDBSchema.findOrCreateCube("PRICE_CUBE_AWJ");
// Get the UNIT_PRICE measure from the cube.
MdmBaseMeasure mdmUnitPrice = 
  mdmPriceCube.findOrCreateBaseMeasure("UNIT_PRICE");
// Get the PRODUCT_AWJ and TIME_AWJ dimensions.
MdmStandardDimension mdmProdDim =
  mdmDBSchema.findOrCreateStandardDimension("PRODUCT_AWJ");
MdmTimeDimension mdmTimeDim =
  mdmDBSchema.findOrCreateTimeDimension("TIME_AWJ");
// Get the Source objects for the dimensions and the measure.
Source prodDim = mdmProdDim.getSource();
Source timeDim = mdmTimeDim.getSource();
Source unitPrice = mdmUnitPrice.getSource();
// Using the value method, derive Source objects that specify the selected 
// dimension members.
Source selectedProducts = prodDim.join(prodDim.value(),
                                       productsToSelect,
                                       Source.COMPARISON_RULE_SELECT,
                                       false);
Source selectedTimes = timeDim.join(timeDim.value(),
                                    timesToSelect,
                                    Source.COMPARISON_RULE_SELECT,
                                    false);
// Derive a Source that specifies the unitPrice values for the selected products
// and times.
Source pricesForSelectedProductsAndTimes = unitPrice.join(selectedProducts)
                                                    .join(selectedTimes);
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">pricesForSelectedProductsAndTimes</code> <code class="codeph">Source</code> has the values shown in the following table. The table has headings added.
                           </p><pre class="oac_no_warn" dir="ltr">            Month                         Product                Price
-----------------------------  -------------------------------  -------
CALENDAR_YEAR::MONTH::2000.01  PRODUCT_PRIMARY::ITEM::ENVY EXE  3358.02
CALENDAR_YEAR::MONTH::2000.01  PRODUCT_PRIMARY::ITEM::ENVY STD  3000.11
CALENDAR_YEAR::MONTH::2001.01  PRODUCT_PRIMARY::ITEM::ENVY EXE  3223.28
CALENDAR_YEAR::MONTH::2001.01  PRODUCT_PRIMARY::ITEM::ENVY STD  2426.07
CALENDAR_YEAR::MONTH::2002.01  PRODUCT_PRIMARY::ITEM::ENVY EXE  3008.95
CALENDAR_YEAR::MONTH::2002.01  PRODUCT_PRIMARY::ITEM::ENVY STD  2140.71</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAAP288"></a><a id="OLAAP287"></a><div class="props_rev_3"><a id="GUID-677C41E0-21D4-4A9D-9703-E5EB312A197F" name="GUID-677C41E0-21D4-4A9D-9703-E5EB312A197F"></a><h5 id="OLAAP-GUID-677C41E0-21D4-4A9D-9703-E5EB312A197F" class="sect5"><span class="enumeration_section">5.4.4.5 </span>Using the extract Method to Combine Elements of Source Objects
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">extract</code> method derives a <code class="codeph">Source</code> that has the base <code class="codeph">Source</code> as an input. You use the <code class="codeph">extract</code> method when the values of the elements of a <code class="codeph">Source</code> are <code class="codeph">Source</code> objects themselves.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-677C41E0-21D4-4A9D-9703-E5EB312A197F__BABIJIFI">
                           <p class="titleinexample">Example 5-12 Extracting Elements of a Source</p>
                           <p><a id="d13320e4566" class="indexterm-anchor"></a>This example uses the <code class="codeph">selectValues</code> method to derive two selections of elements from a <code class="codeph">StringSource</code> for the PRODUCT_AWJ dimension. The <code class="codeph">selectValues</code> method is a shortcut for the full <code class="codeph">join</code> signature of the methods in <a href="understanding-source-objects.html#GUID-D196A026-C589-401A-B312-001702278183__BABBBAFI">Example 5-10</a> and <a href="understanding-source-objects.html#GUID-D196A026-C589-401A-B312-001702278183__BABBCGED">Example 5-11</a> that produce the <code class="codeph">selectedProducts</code> and <code class="codeph">selectedTimes</code> <code class="codeph">Source</code> objects.
                           </p>
                           <p><a id="d13320e4598" class="indexterm-anchor"></a>This example creates a list <code class="codeph">Source</code>, <code class="codeph">sourcesToCombine</code>, that has the two derived <code class="codeph">Source</code> objects as element values. The <code class="codeph">sourcesToCombine.extract()</code> method produces <code class="codeph">sourcesToCombineWithAnInput</code>, which is a <code class="codeph">Source</code> that has <code class="codeph">sourcesToCombine</code> as an input. The join operation <code class="codeph">sourcesToCombineWithAnInput.joinHidden(sourcesToCombine)</code> matches the input of <code class="codeph">sourcesToCombineWithAnInput</code> with the joined <code class="codeph">sourcesToCombine</code> and produces <code class="codeph">combinedSources</code>, which has no inputs or outputs. A shortcut for this combining of <code class="codeph">Source</code> elements is the <code class="codeph">appendValues</code> method.
                           </p><pre class="oac_no_warn" dir="ltr">MdmStandardDimension mdmProdDim =
  mdmDBSchema.findOrCreateStandardDimension("PRODUCT_AWJ");
StringSource prodDim = (StringSource) mdmProdDim.getSource();
Source productsToSelect = prodDim.selectValues(new String[]
                                           {"PRODUCT_PRIMARY::ITEM::ENVY ABM",
                                            "PRODUCT_PRIMARY::ITEM::ENVY EXE",
                                            "PRODUCT_PRIMARY::ITEM::ENVY STD"});
Source moreProductsToSelect = prodDim.selectValues(new String[]
                                           {"PRODUCT_PRIMARY::ITEM::SENT FIN",
                                            "PRODUCT_PRIMARY::ITEM::SENT MM",
                                            "PRODUCT_PRIMARY::ITEM::SENT STD"});
Source sourcesToCombine = 
  dp.createListSource(new Source[] {productsToSelect, moreProductsToSelect});
Source sourcesToCombineWithAnInput = sourcesToCombine.extract();
Source combinedProducts = 
  sourcesToCombineWithAnInput.joinHidden(sourcesToCombine);
</pre><p>A <code class="codeph">Cursor</code> for the <code class="codeph">combinedProducts</code> <code class="codeph">Source</code> has the following values.
                           </p><pre class="oac_no_warn" dir="ltr">PRODUCT_PRIMARY::ITEM::ENVY ABM
PRODUCT_PRIMARY::ITEM::ENVY EXE
PRODUCT_PRIMARY::ITEM::ENVY STD
PRODUCT_PRIMARY::ITEM::SENT FIN
PRODUCT_PRIMARY::ITEM::SENT MM
PRODUCT_PRIMARY::ITEM::SENT STD</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="OLAAP290"></a><a id="OLAAP289"></a><div class="props_rev_3"><a id="GUID-38CC13B9-38A3-4D0A-87B7-13A5BFC2EB6E" name="GUID-38CC13B9-38A3-4D0A-87B7-13A5BFC2EB6E"></a><h3 id="OLAAP-GUID-38CC13B9-38A3-4D0A-87B7-13A5BFC2EB6E" class="sect3"><span class="enumeration_section">5.5 </span>Describing Parameterized Source Objects
               </h3>
               <div>
                  <p><a id="d13320e4712" class="indexterm-anchor"></a><a id="d13320e4716" class="indexterm-anchor"></a><a id="d13320e4720" class="indexterm-anchor"></a><a id="d13320e4724" class="indexterm-anchor"></a>Parameterized <code class="codeph">Source</code> objects provide a way of specifying a query and retrieving different result sets for the query by changing the set of elements specified by the parameterized <code class="codeph">Source</code>. You create a parameterized <code class="codeph">Source</code> with a <code class="codeph">createSource</code> method of the <code class="codeph">Parameter</code>. The <code class="codeph">Parameter</code> supplies the value that the parameterized <code class="codeph">Source</code> specifies.
                  </p>
                  <p>The example in this topic is a very simple demonstration of using a <code class="codeph">Parameter</code> object. A typical use of a <code class="codeph">Parameter</code> is to specify the page edges of a cube, as shown in <a href="making-queries-using-source-methods.html#GUID-2DCC7EA8-B3E6-40E8-8F73-6584CD8667CA__CBAGDGHE">Example 6-9</a>. Another use of a <code class="codeph">Parameter</code> is to fetch from the server only the set of elements that you currently need. <a href="making-queries-using-source-methods.html#GUID-C3436997-90D0-4C9D-9C91-1B74FD8E0638__CBBCFEBC">Example 6-15</a> demonstrates using <code class="codeph">Parameter</code> objects to fetch different sets of elements.
                  </p>
                  <p>When you create a <code class="codeph">Parameter</code> object, you supply an initial value for the <code class="codeph">Parameter</code>. You then create the parameterized <code class="codeph">Source</code> using the <code class="codeph">Parameter</code>. You include the parameterized <code class="codeph">Source</code> in specifying a query. You create a <code class="codeph">Cursor</code> for the query. You can change the value of the <code class="codeph">Parameter</code> with the <code class="codeph">setValue</code> method, which changes the set of elements that the query specifies. Using the same <code class="codeph">Cursor</code>, you can then retrieve the new set of values.
                  </p>
                  <p><a id="d13320e4799" class="indexterm-anchor"></a><a id="d13320e4803" class="indexterm-anchor"></a><a id="d13320e4807" class="indexterm-anchor"></a><a id="d13320e4811" class="indexterm-anchor"></a><a id="d13320e4815" class="indexterm-anchor"></a>This example demonstrates the use of a <code class="codeph">Parameter</code> and a parameterized <code class="codeph">Source</code> to specify a member in a dimension. The example gets the <code class="codeph">MdmStandardDimension</code> for the PRODUCT_AWJ dimension and gets the <code class="codeph">Source</code> for the <code class="codeph">MdmStandardDimension</code> cast as a <code class="codeph">StringSource</code>.
                  </p>
                  <p>The example creates a <code class="codeph">StringParameter</code> object that has a dimension member as the initial value. It then creates a parameterized <code class="codeph">Source</code>, <code class="codeph">paramProdSel</code>, by using the <code class="codeph">createSource</code> method of the <code class="codeph">StringParameter</code>. Next it uses <code class="codeph">paramProdSel</code> as the comparison <code class="codeph">Source</code> in a join operation that selects the dimension member.
                  </p>
                  <p>The example gets the <code class="codeph">Source</code> for the local value attribute of the dimension. It joins that <code class="codeph">Source</code>, <code class="codeph">locValAttr</code>, with <code class="codeph">paramProdSel</code>. That join operation produces the <code class="codeph">dimMemberWithLocalValue</code> <code class="codeph">Source</code>.
                  </p>
                  <p>The example creates a <code class="codeph">Cursor</code> for <code class="codeph">dimMemberWithLocalValue</code> and displays the value of the <code class="codeph">Cursor</code>. After resetting the <code class="codeph">Cursor</code> position and changing the value of the <code class="codeph">prodParam</code> <code class="codeph">StringParameter</code>, the example displays the value of the <code class="codeph">Cursor</code> again.
                  </p>
                  <p>The <code class="codeph">dp</code> object is the <code class="codeph">DataProvider</code>. The <code class="codeph">getContext</code> method gets a <code class="codeph">Context11g</code> object that has a method that commits the current <code class="codeph">Transaction</code> and a method that displays the values of a <code class="codeph">Cursor</code>.
                  </p>
                  <div class="example" id="GUID-38CC13B9-38A3-4D0A-87B7-13A5BFC2EB6E__CBAGGBDB">
                     <p class="titleinexample">Example 5-13 Using a Parameterized Source to Change a Dimension Selection</p><pre class="oac_no_warn" dir="ltr">MdmStandardDimension mdmProdDim =
  mdmDBSchema.findOrCreateStandardDimension("PRODUCT_AWJ");
StringSource prodDim = (StringSource) mdmProdDim.getSource();

StringParameter prodParam =
  new StringParameter(dp, "PRODUCT_PRIMARY::FAMILY::LTPC");
Source prodParamSrc = prodParam.createSource();
Source paramProdSel = prodDim.join(prodDim.value(), prodParamSrc);

Source locValAttr = mdmProdDim.getLocalValueAttribute().getSource();
Source dimMemberWithLocalValue = locValAttr.join(paramProdSel);

// Commit the Transaction.
getContext().commit();

// Create a Cursor for the Source.
CursorManager  cursorMngr = dp.createCursorManager(dimMemberWithLocalValue);
Cursor cursor = cursorMngr.createCursor();

// Display the value of the Cursor.
getContext().displayCursor(cursor);

// Change the product parameter value.
prodParam.setValue("PRODUCT_PRIMARY::FAMILY::DTPC");

// Reset the Cursor position to 1
cursor.setPosition(1);

// Display the value of the Cursor again.
getContext().displayCursor(cursor);
</pre><p>The <code class="codeph">Cursor</code> for <code class="codeph">dimMemberWithLocalValue</code> displays the following.
                     </p><pre class="oac_no_warn" dir="ltr">PRODUCT_PRIMARY::FAMILY::LTPC,LTPC
</pre><p>After changing the value of the <code class="codeph">StringParameter</code> and resetting the position of the <code class="codeph">Cursor</code>, the <code class="codeph">Cursor</code> for <code class="codeph">dimMemberWithLocalValue</code> displays the following.
                     </p><pre class="oac_no_warn" dir="ltr">PRODUCT_PRIMARY::FAMILY::DTPC,DTPC</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00045.using-pipelined-and-parallel-table-functions.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Pipelined and Parallel Table Functions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Cartridge Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Cartridge Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00">
      <meta name="dcterms.title" content="Data Cartridge Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96431-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-user-defined-aggregate-functions.html" title="Previous" type="text/html">
      <link rel="next" href="designing-data-cartridges.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-user-defined-aggregate-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="designing-data-cartridges.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Cartridge Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">Building Data Cartridges</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Pipelined and Parallel Table Functions </li>
            </ol>
            <a id="GUID-EFB94CFB-3E44-4236-B490-ADBB480C94D4" name="GUID-EFB94CFB-3E44-4236-B490-ADBB480C94D4"></a><a id="ADDCI2140"></a>
            
            <h2 id="ADDCI-GUID-EFB94CFB-3E44-4236-B490-ADBB480C94D4" class="sect2"><span class="enumeration_chapter">13 </span>Using Pipelined and Parallel Table Functions 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The table functions and the generic datatypes <code class="codeph">ANYTYPE</code>, <code class="codeph">ANYDATA</code>, and <code class="codeph">ANYDATASET</code> are often used with table functions.
               </p>
            </div><a id="ADDCI4678"></a><a id="ADDCI4679"></a><a id="ADDCI4677"></a><div class="props_rev_3"><a id="GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C" name="GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C"></a><h3 id="ADDCI-GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C" class="sect3"><span class="enumeration_section">13.1 </span>Overview of Table Functions
               </h3>
               <div>
                  <p>Table functions are functions that produce a collection of rows (either a nested table or a varray) that can be queried like a physical database table. You use a table function like the name of a database table, in the <code class="codeph">FROM</code> clause of a query.
                  </p>
                  <p>A table function can take a collection of rows as input. An input collection parameter can be either a collection type or a <code class="codeph">REF CURSOR</code>.
                  </p>
                  <p>Table function may be executed in parallel, and returned rows can be streamed directly to the next process without intermediate staging. Rows from a collection returned by a table function can also be pipelined; this means that they are iteratively returned as they are produced, instead of being returned in a single batch after all processing of the table function's input is completed.</p>
                  <p>Streaming, pipelining, and parallel execution of table functions can improve performance in the following manner:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>By enabling multithreaded, concurrent execution of table functions</p>
                     </li>
                     <li>
                        <p>By eliminating intermediate staging between processes</p>
                     </li>
                     <li>
                        <p>By improving query response time: With non-pipelined table functions, the entire collection returned by a table function must be constructed and returned to the server before the query can return a single result row. Pipelining enables rows to be returned iteratively, as they are produced. This also reduces the memory that a table function requires, as the object cache does not have to materialize the entire collection.</p>
                     </li>
                     <li>
                        <p>By iteratively providing result rows from the collection returned by a table function as the rows are produced instead of waiting until the entire collection is staged in tables or memory and then returning the entire collection</p>
                     </li>
                  </ul>
                  <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C__CIHHJFCF">Figure 13-1</a> shows a typical data-processing scenario in which data goes through several (in this case, three) transformations, implemented by table functions, before finally being loaded into a database. In this scenario, the table functions are not run in parallel, and the entire result collection must be staged after each transformation.
                  </p>
                  <div class="figure" id="GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C__CIHHJFCF">
                     <p class="titleinfigure">Figure 13-1 Typical Data Processing with Non-Parallel, Non-Pipelined Table Functions</p><img src="img/addci044.gif" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" longdesc="img_text/addci044.html"><br><a href="img_text/addci044.html">Description of "Figure 13-1 Typical Data Processing with Non-Parallel, Non-Pipelined Table Functions"</a></div>
                  <!-- class="figure" -->
                  <p>By contrast, <a href="using-pipelined-and-parallel-table-functions.html#GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C__I1006439">Figure 13-2</a> shows how streaming and parallel execution can streamline the same scenario.
                  </p>
                  <div class="figure" id="GUID-67CEE062-4AEE-4E06-87A3-609DAF0DFC0C__I1006439">
                     <p class="titleinfigure">Figure 13-2 Data Processing Using Pipelining and Parallel Execution</p><img src="img/addci045.gif" alt="Description of Figure 13-2 follows" title="Description of Figure 13-2 follows" longdesc="img_text/addci045.html"><br><a href="img_text/addci045.html">Description of "Figure 13-2 Data Processing Using Pipelining and Parallel Execution"</a></div>
                  <!-- class="figure" -->
               </div>
            </div><a id="ADDCI4680"></a><div class="props_rev_3"><a id="GUID-DA4B586B-A7EC-4B2B-80D0-A48298806FEF" name="GUID-DA4B586B-A7EC-4B2B-80D0-A48298806FEF"></a><h3 id="ADDCI-GUID-DA4B586B-A7EC-4B2B-80D0-A48298806FEF" class="sect3"><span class="enumeration_section">13.2 </span>Table Function Concepts
               </h3>
               <div>
                  <p>Consider table functions and some concepts related to pipelining and parallel execution of these table functions.</p>
               </div><a id="ADDCI4682"></a><a id="ADDCI4683"></a><a id="ADDCI4684"></a><a id="ADDCI4685"></a><a id="ADDCI4681"></a><div class="props_rev_3"><a id="GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED" name="GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED"></a><h4 id="ADDCI-GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED" class="sect4"><span class="enumeration_section">13.2.1 </span>Table Functions
                  </h4>
                  <div>
                     <p>Table functions return a collection type instance and can be queried like a table by calling the function in the <code class="codeph">FROM</code> clause of a query. Table functions use the <code class="codeph">TABLE</code> keyword.
                     </p>
                     <p>The following example shows a table function <code class="codeph">GetBooks</code> that takes a <code class="codeph">CLOB</code> as input and returns an instance of the collection type <code class="codeph">BookSet_t</code>. The <code class="codeph">CLOB</code> column stores a catalog listing of books in some format (either proprietary or following a standard such as XML). The table function returns all the catalogs and their corresponding book listings. The collection type <code class="codeph">BookSet_t</code> is defined in <a href="using-pipelined-and-parallel-table-functions.html#GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHBGIFJ">Example 13-1</a>.
                     </p>
                     <p>The <code class="codeph">CLOB</code>s are stored in a table <code class="codeph">Catalogs</code>, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHECFFI">Example 13-2</a>.
                     </p>
                     <p>Function <code class="codeph">GetBooks()</code> is defined in <a href="using-pipelined-and-parallel-table-functions.html#GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHBIIEH">Example 13-3</a>. 
                     </p>
                     <p>The query in <a href="using-pipelined-and-parallel-table-functions.html#GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHEJHJB">Example 13-4</a> returns all the catalogs and their corresponding book listings.
                     </p>
                     <div class="example" id="GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHBGIFJ">
                        <p class="titleinexample">Example 13-1 Creating a Collection Type</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE Book_t AS OBJECT
( name VARCHAR2(100),
  author VARCHAR2(30),
  abstract VARCHAR2(1000));

CREATE TYPE BookSet_t AS TABLE OF Book_t;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHECFFI">
                        <p class="titleinexample">Example 13-2 Storing a Clob in a Table</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Catalogs
( name VARCHAR2(30), 
  cat CLOB);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHBIIEH">
                        <p class="titleinexample">Example 13-3 Creating a Function that Returns a Collection Type</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION GetBooks(a CLOB) RETURN BookSet_t;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3C5E3EC-9041-428D-AD25-0C3BA6F09BED__CIHEJHJB">
                        <p class="titleinexample">Example 13-4 Using a Collection Type in a Query</p><pre class="oac_no_warn" dir="ltr">SELECT c.name, Book.name, Book.author, Book.abstract
  FROM Catalogs c, TABLE(GetBooks(c.cat)) Book;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4686"></a><div class="props_rev_3"><a id="GUID-4382D7CF-942A-479F-9726-2C801BE614FB" name="GUID-4382D7CF-942A-479F-9726-2C801BE614FB"></a><h4 id="ADDCI-GUID-4382D7CF-942A-479F-9726-2C801BE614FB" class="sect4"><span class="enumeration_section">13.2.2 </span>Pipelined Table Functions
                  </h4>
                  <div>
                     <p>Data is said to be pipelined if it is consumed by a consumer (transformation) as soon as the producer (transformation) produces it, without being staged in tables or a cache before being input to the next transformation.</p>
                     <p>Pipelining enables a table function to return rows faster and can reduce the memory required to cache a table function's results.</p>
                     <p>A pipelined table function can return the table function's result collection in subsets. The returned collection behaves like a stream that can be fetched from on demand. This makes it possible to use a table function like a virtual table.</p>
                     <p>Pipelined table functions can be implemented in two ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>In the native PL/SQL approach, the consumer and producers can run on separate execution threads (either in the same or different process context) and communicate through a pipe or queuing mechanism. This approach is similar to co-routine execution.</p>
                        </li>
                        <li>
                           <p>In the interface approach, the consumer and producers run on the same execution thread. Producer explicitly returns the control back to the consumer after producing a set of results. In addition, the producer caches the current state so that it can resume where it left off when the consumer invokes it again.</p>
                           <p>The interface approach requires you to implement a set of well-defined interfaces in a procedural language.</p>
                        </li>
                     </ul>
                     <p>The co-routine execution model provides a simpler, native PL/SQL mechanism for implementing pipelined table functions, but this model cannot be used for table functions written in C or Java. The interface approach, on the other hand, can. The interface approach requires the producer to save the current state information in a context object before returning so that this state can be restored on the next invocation.</p>
                     <p>In this discussion, the term <span class="italic">table function</span> refers to a <span class="italic">pipelined</span> table functionâ€” a table function that returns a collection in an iterative, pipelined way.
                     </p>
                  </div>
               </div><a id="ADDCI4690"></a><a id="ADDCI4688"></a><a id="ADDCI4689"></a><a id="ADDCI4687"></a><div class="props_rev_3"><a id="GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265" name="GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265"></a><h4 id="ADDCI-GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265" class="sect4"><span class="enumeration_section">13.2.3 </span>Pipelined Table Functions with REF CURSOR Arguments
                  </h4>
                  <div>
                     <p>A <a id="d38518e483" class="indexterm-anchor"></a>pipelined table function can accept any argument that regular functions accept. A table function that accepts a <code class="codeph">REF CURSOR</code> as an argument can serve as a transformation function. That is, it can use the <code class="codeph">REF CURSOR</code> to fetch the input rows, perform some transformation on them, and then pipeline the results out (using either the interface approach or the native PL/SQL approach). 
                     </p>
                     <p>For example, the following code sketches the declarations that define a <code class="codeph">StockPivot</code> function. This function converts a row of the type (<code class="codeph">Ticker, OpenPrice, ClosePrice</code>) into two rows of the form (<code class="codeph">Ticker, PriceType, Price</code>). Calling <code class="codeph">StockPivot</code> for the row (<code class="codeph">"ORCL", 41, 42</code>) generates two rows: (<code class="codeph">"ORCL", "O", 41</code>) and (<code class="codeph">"ORCL", "C", 42</code>). 
                     </p>
                     <p>Input data for the table function might come from a source such as table <code class="codeph">StockTable</code>: 
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE StockTable (
  ticker VARCHAR(4),
  openprice NUMBER,
  closeprice NUMBER
);
</pre><p>The declarations are in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265__CIHEGADE">Example 13-5</a>.
                     </p>
                     <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265__CIHIGGCC">Example 13-6</a> uses the <code class="codeph">StockPivot</code> table function.
                     </p>
                     <p>In the preceding query, the pipelined table function <code class="codeph">StockPivot</code> fetches rows from the <code class="codeph">CURSOR</code> subquery <code class="codeph">SELECT * FROM StockTable</code>, performs the transformation, and pipelines the results back to the user as a table. The function produces two output rows (collection elements) for each input row.
                     </p>
                     <p>Note that when a <code class="codeph">CURSOR</code> subquery is passed from SQL to a <code class="codeph">REF CURSOR</code> function argument as in the preceding example, the referenced cursor is open when the function begins executing.
                     </p>
                     <div class="section">
                        <p>Note also that cursor operations are not allowed for <code class="codeph">REF CURSOR</code> variables based on table functions: <code class="codeph">SELECT FOR UPDATE</code>, and <code class="codeph">WHERE CURRENT OF</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265__GUID-1CB8B210-E43C-4EF3-9103-7979E2F93286">
                           <p class="notep1">See Also:</p>
                           <p><a href="example-for-pipelined-table-functions-interface-approach.html#GUID-B4BE4F35-B893-45D6-B8B4-235E23F80C6B"> Pipelined Table Functions: Interface Approach Example</a> for a complete implementation of this table function using the interface approach, in both C and Java.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265__CIHEGADE">
                        <p class="titleinexample">Example 13-5 Declaring a Pipelined Table Function with REF CURSOR Arguments</p><pre class="oac_no_warn" dir="ltr">-- Create the types for the table function's output collection 
-- and collection elements

CREATE TYPE TickerType AS OBJECT 
(
  ticker VARCHAR2(4),
  PriceType VARCHAR2(1),
  price NUMBER
);

CREATE TYPE TickerTypeSet AS TABLE OF TickerType;

-- Define the ref cursor type

CREATE PACKAGE refcur_pkg IS
  TYPE refcur_t IS REF CURSOR RETURN StockTable%ROWTYPE;
END refcur_pkg;
/

-- Create the table function

CREATE FUNCTION StockPivot(p refcur_pkg.refcur_t) RETURN TickerTypeSet
PIPELINED ... ;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265__CIHIGGCC">
                        <p class="titleinexample">Example 13-6 Using a Pipelined Table Function with REF CURSOR Arguments</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(StockPivot(CURSOR(SELECT * FROM StockTable)));
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4691"></a><div class="props_rev_3"><a id="GUID-15ED880C-113D-4B44-8732-D70A0AAAD405" name="GUID-15ED880C-113D-4B44-8732-D70A0AAAD405"></a><h4 id="ADDCI-GUID-15ED880C-113D-4B44-8732-D70A0AAAD405" class="sect4"><span class="enumeration_section">13.2.4 </span>Parallel Execution of Table Functions
                  </h4>
                  <div>
                     <p>With <a id="d38518e639" class="indexterm-anchor"></a>parallel execution of a function that appears in the <code class="codeph">SELECT</code> list, execution of the function is pushed down to and conducted by multiple slave scan processes. These each execute the function on a segment of the function's input data.
                     </p>
                     <p>For example, the query </p><pre class="oac_no_warn" dir="ltr">SELECT f(col1) FROM tab;
</pre><p>is parallelized if <code class="codeph">f</code> is a pure function. The SQL executed by a slave scan process is similar to: 
                     </p><pre class="oac_no_warn" dir="ltr">SELECT f(col1) FROM tab WHERE ROWID BETWEEN :b1 AND :b2;
</pre><p>Each slave scan operates on a range of rowids and applies function <code class="codeph">f</code> to each contained row. Function <code class="codeph">f</code> is then executed by the scan processes; it does not run independently of them.
                     </p>
                     <p>Unlike a function that appears in the <code class="codeph">SELECT</code> list, a table function is called in the <code class="codeph">FROM</code> clause and returns a collection. This affects the way that table function input data is partitioned among slave scans because the partitioning approach must be appropriate for the operation that the table function performs. (For example, an <code class="codeph">ORDER BY</code> operation requires input to be range-partitioned, whereas a <code class="codeph">GROUP BY</code> operation requires input to be hash partitioned.) 
                     </p>
                     <p>A table function itself specifies in its declaration the partitioning approach that is appropriate for it, as described in <span class="q">"<a href="using-pipelined-and-parallel-table-functions.html#GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0">Input Data Partitioning</a>"</span>. The function is then executed in a two-stage operation. First, one set of slave processes partitions the data as directed in the function's declaration; then a second set of slave scans executes the table function in parallel on the partitioned data. The table function in the following query has a <code class="codeph">REF CURSOR</code> parameter:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(f(CURSOR(SELECT * FROM tab)));
</pre><p>The scan is performed by one set of slave processes, which redistributes the rows (based on the partitioning method specified in the function declaration) to a second set of slave processes that actually executes function <code class="codeph">f</code> in parallel. 
                     </p>
                  </div>
               </div>
            </div><a id="ADDCI4692"></a><div class="props_rev_3"><a id="GUID-6785018C-8D7E-453B-A6D0-843648118EA6" name="GUID-6785018C-8D7E-453B-A6D0-843648118EA6"></a><h3 id="ADDCI-GUID-6785018C-8D7E-453B-A6D0-843648118EA6" class="sect3"><span class="enumeration_section">13.3 </span>Pipelined Table Functions
               </h3>
               <div>
                  <p>Consider issues involved in implementing pipelined table functions.</p>
               </div><a id="ADDCI4693"></a><div class="props_rev_3"><a id="GUID-B322B116-1D3D-4E5B-9625-2B31189589AF" name="GUID-B322B116-1D3D-4E5B-9625-2B31189589AF"></a><h4 id="ADDCI-GUID-B322B116-1D3D-4E5B-9625-2B31189589AF" class="sect4"><span class="enumeration_section">13.3.1 </span>Implementation Choices for Pipelined Table Functions
                  </h4>
                  <div>
                     <p>As noted previously, two approaches are supported for implementing <a id="d38518e808" class="indexterm-anchor"></a>pipelined table functions: the interface approach and the PL/SQL approach. 
                     </p>
                     <p>The interface approach requires the user to supply a type that implements a predefined Oracle interface consisting of start, fetch, and close operations. The type is associated with the table function when the table function is created. During query execution, the <code class="codeph">fetch</code> method is invoked repeatedly to iteratively retrieve the results. With the interface approach, the methods of the implementation type associated with the table function can be implemented in any of the supported internal or external languages (including PL/SQL, C/C++, and Java).
                     </p>
                     <p>With the PL/SQL approach, a single PL/SQL function includes a special instruction to pipeline results (single elements of the collection) out of the function instead of returning the whole collection as a single value. The native PL/SQL approach is simpler to implement because it requires writing only one PL/SQL function. </p>
                     <p>The approach used to implement pipelined table functions does not affect the way they are used. Pipelined table functions are used in SQL statements in exactly the same way regardless of the approach used to implement them.</p>
                  </div>
               </div><a id="ADDCI4695"></a><a id="ADDCI4696"></a><a id="ADDCI4694"></a><div class="props_rev_3"><a id="GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67" name="GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67"></a><h4 id="ADDCI-GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67" class="sect4"><span class="enumeration_section">13.3.2 </span>Declaring Pipelined Table Functions 
                  </h4>
                  <div>
                     <div class="section">
                        <p>You declare a pipelined table function by specifying the <code class="codeph">PIPELINED</code> keyword. This keyword indicates that the function returns rows iteratively. The return type of the pipelined table function must be a collection type (a nested <code class="codeph">table</code> or a <code class="codeph">varray</code>). 
                        </p>
                        <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67__CIHCGIAE">Example 13-7</a> shows declarations of pipelined table functions implemented using the interface approach. The interface routines for functions <code class="codeph">GetBooks</code> and <code class="codeph">StockPivot</code> have been implemented in the types <code class="codeph">BookMethods</code> and <code class="codeph">StockPivotImpl</code>, respectively. 
                        </p>
                        <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67__CIHEIAEC">Example 13-8</a> shows declarations of the same table functions implemented using the native PL/SQL approach. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67__CIHCGIAE">
                        <p class="titleinexample">Example 13-7 Declaring Pipelined Table Functions for the Interface Approach</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION GetBooks(cat CLOB) RETURN BookSet_t PIPELINED USING BookMethods;

CREATE FUNCTION StockPivot(p refcur_pkg.refcur_t) 
  RETURN TickerTypeSet PIPELINED USING StockPivotImpl;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E82D6DF1-721B-401C-8BF6-5ECD068FAE67__CIHEIAEC">
                        <p class="titleinexample">Example 13-8 Declaring Pipelined Table Functions for the Native PL/SQL Approach</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION GetBooks(cat CLOB) RETURN BookSet_t <span class="bold">PIPELINED IS</span> ...;

CREATE FUNCTION StockPivot(p refcur_pkg.refcur_t) RETURN TickerTypeSet
<span class="bold">PIPELINED IS...</span>;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4698"></a><a id="ADDCI4697"></a><div class="props_rev_3"><a id="GUID-708EEC7E-7DCF-478C-9AB1-A630446B708D" name="GUID-708EEC7E-7DCF-478C-9AB1-A630446B708D"></a><h4 id="ADDCI-GUID-708EEC7E-7DCF-478C-9AB1-A630446B708D" class="sect4"><span class="enumeration_section">13.3.3 </span>Implementing the Native PL/SQL Approach
                  </h4>
                  <div>
                     <div class="section">
                        <p>In PL/SQL, the <code class="codeph">PIPE ROW</code> statement causes a table function to pipe a row and continue processing. The statement enables a PL/SQL table function to return rows as soon as they are produced. This is demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-708EEC7E-7DCF-478C-9AB1-A630446B708D__CIHDGJAF">Example 13-9</a>. For performance reasons, the PL/SQL run-time system provides the rows to the consumer in batches.
                        </p>
                        <p>In <a href="using-pipelined-and-parallel-table-functions.html#GUID-708EEC7E-7DCF-478C-9AB1-A630446B708D__CIHDGJAF">Example 13-9</a>, the <code class="codeph">PIPE ROW(out_rec)</code> statement pipelines data out of the PL/SQL table function.
                        </p>
                        <p>The <code class="codeph">PIPE ROW</code> statement may be used only in the body of pipelined table functions; an error is raised if it is used anywhere else. The <code class="codeph">PIPE ROW</code> statement can be omitted for a pipelined table function that returns no rows.
                        </p>
                        <p>A pipelined table function must have a <code class="codeph">RETURN</code> statement that does not return a value. The <code class="codeph">RETURN</code> statement transfers the control back to the consumer and ensures that the next fetch gets a <code class="codeph">NO_DATA_FOUND</code> exception. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-708EEC7E-7DCF-478C-9AB1-A630446B708D__CIHDGJAF">
                        <p class="titleinexample">Example 13-9 Implementing a Pipelined Table Function for the Native PL/SQL Approach</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION StockPivot(p refcur_pkg.refcur_t) RETURN TickerTypeSet
PIPELINED IS
  out_rec TickerType := TickerType(NULL,NULL,NULL);
  in_rec p%ROWTYPE;
BEGIN
  LOOP
    FETCH p INTO in_rec; 
    EXIT WHEN p%NOTFOUND;
    -- first row
    out_rec.ticker := in_rec.Ticker;
    out_rec.PriceType := 'O';
    out_rec.price := in_rec.OpenPrice;
    PIPE ROW(out_rec);
    -- second row
    out_rec.PriceType := 'C';   
    out_rec.Price := in_rec.ClosePrice;
    PIPE ROW(out_rec);
  END LOOP;
  CLOSE p;
  RETURN;
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4700"></a><a id="ADDCI4699"></a><div class="props_rev_3"><a id="GUID-FDB7769F-62F1-4C8E-8356-70629FACDE0A" name="GUID-FDB7769F-62F1-4C8E-8356-70629FACDE0A"></a><h4 id="ADDCI-GUID-FDB7769F-62F1-4C8E-8356-70629FACDE0A" class="sect4"><span class="enumeration_section">13.3.4 </span>Pipelining Between PL/SQL Table Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p>With serial execution, results are <a id="d38518e1074" class="indexterm-anchor"></a>pipelined from one PL/SQL table function to another using an approach similar to co-routine execution. <a href="using-pipelined-and-parallel-table-functions.html#GUID-FDB7769F-62F1-4C8E-8356-70629FACDE0A__CIHBGDJD">Example 13-10</a> pipelines results from function <code class="codeph">g</code> to function <code class="codeph">f</code>.
                        </p>
                        <p>Parallel execution works similarly, except that each function executes in a different process or set of processes.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FDB7769F-62F1-4C8E-8356-70629FACDE0A__CIHBGDJD">
                        <p class="titleinexample">Example 13-10 Pipelining Function Results from One Function to Another</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(f(CURSOR(SELECT * FROM TABLE(g()))));
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4701"></a><div class="props_rev_3"><a id="GUID-B3132BF8-26CC-4DE7-A778-92D558BD59EA" name="GUID-B3132BF8-26CC-4DE7-A778-92D558BD59EA"></a><h4 id="ADDCI-GUID-B3132BF8-26CC-4DE7-A778-92D558BD59EA" class="sect4"><span class="enumeration_section">13.3.5 </span>Combining PIPE ROW with AUTONOMOUS_TRANSACTION
                  </h4>
                  <div>
                     <p>Because table functions pass control back and forth to a calling routine as rows are produced, there is a restriction on combining table functions and <code class="codeph">PRAGMA AUTONOMOUS_TRANSACTION</code>s. If a table function is part of an autonomous transaction, it must <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> before each <code class="codeph">PIPE ROW</code> statement, to avoid an error in the calling subprogram.
                     </p>
                  </div>
               </div><a id="ADDCI4702"></a><div class="props_rev_3"><a id="GUID-43335D83-F0E2-4ECC-91D6-DB2C639399D6" name="GUID-43335D83-F0E2-4ECC-91D6-DB2C639399D6"></a><h4 id="ADDCI-GUID-43335D83-F0E2-4ECC-91D6-DB2C639399D6" class="sect4"><span class="enumeration_section">13.3.6 </span>Implementing the Interface Approach
                  </h4>
                  <div>
                     <div class="section">
                        <p>To use the interface approach, you must define an implementation type that implements the <code class="codeph">ODCITable</code> interface. This interface consists of start, fetch, and close routines whose signatures are specified by Oracle and which you implement as methods of the type.
                        </p>
                        <p>Oracle invokes the methods to perform the following steps in the execution of a query that contains a table function:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Start by initializing the scan context parameter, using the <code class="codeph">ODCITableStart()</code> function.</span></li>
                        <li><span>Fetch to produce a subset of the rows in the result collection. The <code class="codeph">ODCITableFetch()</code> method is invoked as many times as necessary to return the entire collection.</span></li>
                        <li><span>Close and clean up (release memory and so on) using <code class="codeph">ODCITableClose()</code> after the last <code class="codeph">ODCITableFetch()</code>.</span></li>
                     </ol>
                     <div class="section">
                        <p>The <code class="codeph">ODCITable</code> interface also defines two optional routines, <code class="codeph">ODCITablePrepare()</code> and <code class="codeph">ODCITableDescribe()</code>, that are invoked at compilation time:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ODCITableDescribe()</code> determines the structure of the data type the table function returns, in situations where this cannot be defined in a static manner.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ODCITablePrepare()</code> initializes the scan context parameter. If this method is implemented, the scan context it prepares is passed to the <code class="codeph">ODCITableStart()</code> routine, and the context is maintained between restarts of the table function. It also provides projection information and supports the return of transient anonymous types.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-43335D83-F0E2-4ECC-91D6-DB2C639399D6__GUID-5123E535-52DC-4251-8D48-9A928A075966">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C">ODCITableClose()</a></p>
                              </li>
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8">ODCITableDescribe()</a></p>
                              </li>
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76">ODCITableFetch()</a></p>
                              </li>
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84">ODCITablePrepare()</a></p>
                              </li>
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-7C674A4F-7145-480E-883D-00C609B64DA0">ODCITableStart()</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADDCI4703"></a><div class="props_rev_3"><a id="GUID-93026BCE-7C11-4333-AA7F-19120ADFA135" name="GUID-93026BCE-7C11-4333-AA7F-19120ADFA135"></a><h5 id="ADDCI-GUID-93026BCE-7C11-4333-AA7F-19120ADFA135" class="sect5"><span class="enumeration_section">13.3.6.1 </span>Scan Context 
                     </h5>
                     <div>
                        <p>For the fetch method to produce the next set of rows, a table function must be able to maintain context between successive invocations of the interface routines to fetch another set of rows. This context, called the scan context, is defined by the attributes of the implementation type. A table function preserves the scan context by modeling it in an object instance of the implementation type.</p>
                     </div>
                  </div><a id="ADDCI4704"></a><div class="props_rev_3"><a id="GUID-B9109CC7-E2BD-48EB-AF91-C6ABEF0BB855" name="GUID-B9109CC7-E2BD-48EB-AF91-C6ABEF0BB855"></a><h5 id="ADDCI-GUID-B9109CC7-E2BD-48EB-AF91-C6ABEF0BB855" class="sect5"><span class="enumeration_section">13.3.6.2 </span>Start Routine
                     </h5>
                     <div>
                        <p>The start routine <code class="codeph">ODCITableStart()</code> is the first routine that is invoked to begin retrieving rows from a table function. This routine typically performs the setup needed for the scan, creating the scan context (as an object instance <code class="codeph">sctx</code>) and returning it to Oracle. However, if <code class="codeph">ODCITablePrepare()</code> is implemented, it creates the scan context, which is then passed to the <code class="codeph">ODCITableStart()</code> routine. The arguments to the table function, specified by the user in the <code class="codeph">SELECT</code> statement, are passed in as parameters to this routine.
                        </p>
                        <p>Note that any <code class="codeph">REF CURSOR</code> arguments of a table function must be declared as <code class="codeph">SYS_REFCURSOR</code> type in the declaration of the <code class="codeph">ODCITableStart()</code>. Ordinary <code class="codeph">REF CURSOR</code> types cannot be used as formal argument types in <code class="codeph">ODCITableStart()</code>. Ordinary <code class="codeph">REF CURSOR</code> types can only be declared in a package, and types defined in a package cannot be used as formal argument types in a type method. To use a <code class="codeph">REF CURSOR</code> type in <code class="codeph">ODCITableStart()</code>, you must use the system-defined <code class="codeph">SYS_REFCURSOR</code> type.
                        </p>
                        <div class="infoboxnotealso" id="GUID-B9109CC7-E2BD-48EB-AF91-C6ABEF0BB855__GUID-57C748B6-0D15-4C31-A757-54BC548E4787">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84">ODCITablePrepare()</a></p>
                              </li>
                              <li>
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-7C674A4F-7145-480E-883D-00C609B64DA0">ODCITableStart()</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADDCI4705"></a><div class="props_rev_3"><a id="GUID-29D181AC-ECD0-4F68-8AE3-E4365CF3AD0C" name="GUID-29D181AC-ECD0-4F68-8AE3-E4365CF3AD0C"></a><h5 id="ADDCI-GUID-29D181AC-ECD0-4F68-8AE3-E4365CF3AD0C" class="sect5"><span class="enumeration_section">13.3.6.3 </span>Fetch Routine
                     </h5>
                     <div>
                        <p>The fetch routine <code class="codeph">ODCITableFetch()</code> is invoked one or more times by Oracle to retrieve all the rows in the table function's result set. The scan context is passed in as a parameter. This routine returns the next subset of one or more rows. 
                        </p>
                        <p>The fetch routine is called by Oracle repeatedly until all the rows have been returned by the table function. Returning more rows in each invocation of <code class="codeph">ODCITableFetch()</code> reduces the number of fetch calls that must be made and thus improves performance. The table function should return a null collection to indicate that all rows have been returned. 
                        </p>
                        <p>The <code class="codeph">nrows</code> parameter indicates the number of rows that are required to satisfy the current OCI call. For example, if the current OCI call is an <code class="codeph">ODCITableFetch()</code> that requested <code class="codeph">100</code> rows, and <code class="codeph">20</code> rows have been returned, then the <code class="codeph">nrows</code> parameter is equal to <code class="codeph">80</code>. The fetch function is allowed to return a different number of rows. The main purpose of this parameter is to prevent <code class="codeph">ODCITableFetch()</code> from returning more rows than actually required. If <code class="codeph">ODCITableFetch()</code> returns more rows than the value of this parameter, the rows are cached and returned in subsequent <code class="codeph">ODCITableFetch()</code> calls, or they are discarded if the OCI statement handle is closed before they are all fetched.
                        </p>
                        <div class="infoboxnotealso" id="GUID-29D181AC-ECD0-4F68-8AE3-E4365CF3AD0C__GUID-6CD06611-EB41-4606-9DE5-D5FE651A88C3">
                           <p class="notep1">See Also:</p>
                           <p><a href="pipelined-and-parallel-table-functions.html#GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76">ODCITableFetch()</a></p>
                        </div>
                     </div>
                  </div><a id="ADDCI4707"></a><a id="ADDCI4706"></a><div class="props_rev_3"><a id="GUID-A8636931-4B13-4D68-8289-3F29D1B687D7" name="GUID-A8636931-4B13-4D68-8289-3F29D1B687D7"></a><h5 id="ADDCI-GUID-A8636931-4B13-4D68-8289-3F29D1B687D7" class="sect5"><span class="enumeration_section">13.3.6.4 </span>Close Routine
                     </h5>
                     <div>
                        <p>The close routine <a href="pipelined-and-parallel-table-functions.html#GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C">ODCITableClose()</a> is invoked by Oracle after the last fetch invocation. The scan context is passed in as a parameter. This routine performs the necessary cleanup operations.
                        </p>
                        <div class="figure" id="GUID-A8636931-4B13-4D68-8289-3F29D1B687D7__GUID-517CBAB1-37B7-42BA-95D7-38C2D04D333F">
                           <p class="titleinfigure">Figure 13-3 Flowchart of Table Function Row Source Execution</p><img src="img/addci046.gif" alt="Description of Figure 13-3 follows" title="Description of Figure 13-3 follows" longdesc="img_text/addci046.html"><br><a href="img_text/addci046.html">Description of "Figure 13-3 Flowchart of Table Function Row Source Execution"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="ADDCI4709"></a><a id="ADDCI4710"></a><a id="ADDCI4711"></a><a id="ADDCI4708"></a><div class="props_rev_3"><a id="GUID-A55E0878-7F31-4317-B599-3188035020B7" name="GUID-A55E0878-7F31-4317-B599-3188035020B7"></a><h5 id="ADDCI-GUID-A55E0878-7F31-4317-B599-3188035020B7" class="sect5"><span class="enumeration_section">13.3.6.5 </span>Describing Returned Data Sructures; Describe Method
                     </h5>
                     <div>
                        <p>Sometimes it is not possible to define the structure of the return type from the table function statically. If the shape of the rows is different in different queries, it may depend on the actual arguments with which the table function is invoked. Such table functions can be declared to return <code class="codeph">AnyDataSet</code>. <code class="codeph">AnyDataSet</code> is a generic collection type. It can be used to model any collection (of any element type) and has an associated set of APIs (both PL/SQL and C) that enable you to construct <code class="codeph">AnyDataSet</code> instances and access the elements.
                        </p>
                        <p>The following example shows a table function declared to return an <code class="codeph">AnyDataSet</code> collection whose structure is not fixed at function creation time:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION AnyDocuments(VARCHAR2) RETURN ANYDATASET 
PIPELINED USING DocumentMethods;
</pre><p>You can implement a <code class="codeph">ODCITableDescribe()</code> routine to determine the format of the elements in the result collection when the format depends on the actual parameters to the table function. <code class="codeph">ODCITableDescribe()</code> is invoked by Oracle at query compilation time to retrieve the specific type information. Typically, the routine uses the user arguments to determine the shape of the return rows. The format of elements in the returned collection is conveyed to Oracle by returning an instance of <code class="codeph">AnyType</code>. 
                        </p>
                        <p>The <code class="codeph">AnyType</code> instance specifies the actual structure of the returned rows of the specific query. Like <code class="codeph">AnyDataSet</code>, <code class="codeph">AnyType</code> has an associated set of PL/SQL and C interfaces with which to construct and access the metadata information.
                        </p>
                        <p>The query in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCGJII">Example 13-11</a>, for an <code class="codeph">AnyDocuments</code> function, returns information on either books or magazines. 
                        </p>
                        <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCEHGC">Example 13-12</a> is an implementation of the <code class="codeph">ODCITableDescribe()</code> method, which consults the DTD of the XML documents at the specified location to return the appropriate <code class="codeph">AnyType</code> value, either a book or a magazine. The <code class="codeph">AnyType</code> instance is constructed by invoking the constructor APIs with the field name and data type information. 
                        </p>
                        <p>When Oracle invokes <code class="codeph">ODCITableDescribe()</code>, it uses the type information that is returned in the <code class="codeph">AnyType</code> <code class="codeph">OUT</code> argument to resolve references in the command line, such as the reference to the <code class="codeph">x.Abstract</code> attribute in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCEHGC">Example 13-12</a>. This functionality is applicable only when the returned type is a named type, and therefore has named attributes. 
                        </p>
                        <p>Another feature of <code class="codeph">ODCITableDescribe()</code> is its ability to describe <code class="codeph">SELECT</code> list parameters, such as using OCI interfaces, when executing a <code class="codeph">SELECT *</code> query. The information retrieved reflects one <code class="codeph">SELECT</code> list item for each top-level attribute of the type returned by <code class="codeph">ODCITableDescribe()</code>.
                        </p>
                        <p>Because the <code class="codeph">ODCITableDescribe()</code> method is called at compile time, the table function should have at least one argument that has a value at compile time, like a constant. By using the table function with different arguments, you can get different return types from the function, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCHGAB">Example 13-13</a>.
                        </p>
                        <p>The <code class="codeph">ODCITableDescribe()</code> functionality is available only if the table function is implemented using the interface approach. A native PL/SQL implementation of a table function that returns <code class="codeph">ANYDATASET</code> returns rows whose structure is opaque to the server.
                        </p>
                        <div class="example" id="GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCGJII">
                           <p class="titleinexample">Example 13-11 Querying for AnyType Data</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM 
  TABLE(AnyDocuments('http://.../documents.xml')) x
  WHERE x.Abstract like '%internet%';
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCEHGC">
                           <p class="titleinexample">Example 13-12 Implementing the ODCITableDescribe() Method</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE Mag_t AS OBJECT
(   name VARCHAR2(100),
    publisher VARCHAR2(30),
    abstract VARCHAR2(1000)
);

STATIC FUNCTION ODCITableDescribe(rtype OUT ANYTYPE, 
                                        url VARCHAR2)
IS BEGIN    
    Contact specified web server and retrieve document...
    Check XML doc schema to determine if books or mags...
    IF books THEN
        rtype=AnyType.AnyTypeGetPersistent('SYS','BOOK_T');
    ELSE
        rtype=AnyType.AnyTypeGetPersistent('SYS','MAG_T');
    END IF;
END;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A55E0878-7F31-4317-B599-3188035020B7__CIHCHGAB">
                           <p class="titleinexample">Example 13-13 Using Functions that Return AnyType</p><pre class="oac_no_warn" dir="ltr">-- Issue a query for books
SELECT x.Name, x.Author
FROM TABLE(AnyDocuments('Books.xml')) x;

-- Issue a query for magazines
SELECT x.Name, x.Publisher
FROM TABLE(AnyDocuments('Magazines.xml')) x;
</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-A55E0878-7F31-4317-B599-3188035020B7__GUID-C49DFFED-0420-4587-AE63-2B5E0688E241">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="pipelined-and-parallel-table-functions.html#GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8">ODCITableDescribe()</a></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="using-pipelined-and-parallel-table-functions.html#GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0">Transient and Generic Types</a>"</span> for information on <code class="codeph">AnyDataSet</code> and <code class="codeph">AnyType</code></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADDCI4713"></a><a id="ADDCI4712"></a><div class="props_rev_3"><a id="GUID-1F6600B2-073F-444B-AF2C-4F3A760795D7" name="GUID-1F6600B2-073F-444B-AF2C-4F3A760795D7"></a><h5 id="ADDCI-GUID-1F6600B2-073F-444B-AF2C-4F3A760795D7" class="sect5"><span class="enumeration_section">13.3.6.6 </span>Preparing a Query for Execution; Prepare Method
                     </h5>
                     <div>
                        <p><code class="codeph">ODCITablePrepare()</code> is invoked at query compilation time. It generates and saves information to decrease the execution time of the query.
                        </p>
                        <p>If you do not implement <code class="codeph">ODCITablePrepare()</code>, <code class="codeph">ODCITableStart()</code> initializes the context each time it is called. However, if you do implement <code class="codeph">ODCITablePrepare()</code>, it initializes the scan context, which is passed to the <code class="codeph">ODCITableStart()</code> when the query is executed, reducing startup time. In addition, when <code class="codeph">ODCITablePrepare()</code> is implemented, <code class="codeph">ODCITableClose()</code> is called only one time during the query, rather than each time the table function is restarted. This has the following benefits:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>It decreases execution time by reducing the number of calls to <code class="codeph">ODCITableClose()</code>.
                              </p>
                           </li>
                           <li>
                              <p>It allows the scan context to be maintained between table function restarts.</p>
                           </li>
                        </ul>
                        <p><code class="codeph">ODCITablePrepare()</code> also provides projection information to the table function. If you do not implement <code class="codeph">ODCITablePrepare()</code> for table functions that return collections of user-defined types (UDTs), your table function must set every attribute of the UDT of each element, because it has no way of knowing which attributes are used. In contrast, selecting from a regular table fetches only the required columns, which is naturally faster in most cases. However, if you do implement <code class="codeph">ODCITablePrepare()</code>, it can build an array of attribute positions, record the return type information in an argument of type <code class="codeph">ODCITabFuncInfo</code>, and save this information in the scan context, as described in <a href="using-pipelined-and-parallel-table-functions.html#GUID-1F6600B2-073F-444B-AF2C-4F3A760795D7__CIHEHBAJ">Example 13-14</a>.
                        </p>
                        <p>Implementing <code class="codeph">ODCITablePrepare()</code> also allows your table function to return transient anonymous types. <code class="codeph">ODCITablePrepare()</code> is called at the end of query compilation, so it can be passed the table descriptor object (TDO) built by the describe method. The describe method can build and return a transient anonymous TDO. Oracle transforms this TDO so that it can be used during query execution, and passes the transformed TDO to the prepare method in the <code class="codeph">RetType</code> attribute. If the describe method returns a TDO for a type that is not anonymous, that TDO is identical to the transformed TDO. Thus, if a table function returns:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A named collection type, the <code class="codeph">RetType</code> attribute contains the TDO of this type.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AnyDataSet</code>, and the describe method returns a named type, the <code class="codeph">RetType</code> attribute contains the TDO of the named type.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AnyDataSet</code>, and the describe method returns an anonymous type, Oracle transforms this type, and <code class="codeph">RetType</code> contains the transformed TDO.
                              </p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-1F6600B2-073F-444B-AF2C-4F3A760795D7__CIHEHBAJ">
                           <p class="titleinexample">Example 13-14 Building an Array of Attribute Positions and Save it in a Scan Context</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE SYS.ODCITabFuncInto AS OBJECT (
  Attrs SYS.ODCINumberList,
  RetType SYS.AnyType
);
</pre><div class="infoboxnotealso" id="GUID-1F6600B2-073F-444B-AF2C-4F3A760795D7__GUID-B39CB605-DA78-4001-9121-266C5F0346C4">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="pipelined-and-parallel-table-functions.html#GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C">ODCITableClose()</a></p>
                                 </li>
                                 <li>
                                    <p><a href="pipelined-and-parallel-table-functions.html#GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84">ODCITablePrepare()</a></p>
                                 </li>
                                 <li>
                                    <p><a href="pipelined-and-parallel-table-functions.html#GUID-7C674A4F-7145-480E-883D-00C609B64DA0">ODCITableStart()</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4715"></a><a id="ADDCI4714"></a><div class="props_rev_3"><a id="GUID-127A407D-4EDC-4860-B3CA-2B978E153FF1" name="GUID-127A407D-4EDC-4860-B3CA-2B978E153FF1"></a><h4 id="ADDCI-GUID-127A407D-4EDC-4860-B3CA-2B978E153FF1" class="sect4"><span class="enumeration_section">13.3.7 </span>Querying Table Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p>Pipelined <a id="d38518e2038" class="indexterm-anchor"></a>table functions are used in the <code class="codeph">FROM</code> clause of <code class="codeph">SELECT</code> statements independently from implementation, either in native PL/SQL or through the interface approach. The result rows are retrieved by Oracle iteratively from the table function implementation, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-127A407D-4EDC-4860-B3CA-2B978E153FF1__CIHJCECB">Example 13-15</a>.
                        </p>
                        <p>However, if the output of a table function is determined solely by the values passed into it as arguments, such that the function always produces exactly the same result value for each respective combination of values passed in, you can declare the function <code class="codeph">DETERMINISTIC</code>, and Oracle automatically buffers rows for it. Note, though, that the database has no way of knowing whether a function marked <code class="codeph">DETERMINISTIC</code> really is <code class="codeph">DETERMINISTIC</code>, and if one is not, results are unpredictable.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-127A407D-4EDC-4860-B3CA-2B978E153FF1__CIHJCECB">
                        <p class="titleinexample">Example 13-15 Using a Table Function to Iteratively Retrieve Rows</p><pre class="oac_no_warn" dir="ltr">SELECT x.Ticker, x.Price 
FROM TABLE(StockPivot(CURSOR(SELECT * FROM StockTable))) x
WHERE x.PriceType='C';</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADDCI4717"></a><a id="ADDCI4716"></a><div class="props_rev_3"><a id="GUID-6197E7B3-8E7C-4C0E-BCC4-1C02C9F7BA9C" name="GUID-6197E7B3-8E7C-4C0E-BCC4-1C02C9F7BA9C"></a><h5 id="ADDCI-GUID-6197E7B3-8E7C-4C0E-BCC4-1C02C9F7BA9C" class="sect5"><span class="enumeration_section">13.3.7.1 </span>Implementing Multiple Calls to Table Functions
                     </h5>
                     <div>
                        <div class="section">
                           <p>Multiple invocations of a table function, either within the same query or in separate queries result in multiple executions of the underlying implementation. That is, in general, there is no buffering or reuse of rows, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-6197E7B3-8E7C-4C0E-BCC4-1C02C9F7BA9C__CIHJAEHD">Example 13-16</a>. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-6197E7B3-8E7C-4C0E-BCC4-1C02C9F7BA9C__CIHJAEHD">
                           <p class="titleinexample">Example 13-16 Using Multiple Invocations of a Table Function</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(f(...)) t1, TABLE(f(...)) t2 
  WHERE t1.id = t2.id;
  
SELECT * FROM TABLE(f());

SELECT * FROM TABLE(f());
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4719"></a><a id="ADDCI4720"></a><a id="ADDCI4721"></a><a id="ADDCI4718"></a><div class="props_rev_3"><a id="GUID-9AC506C7-030B-495F-A910-51640E2C9CEE" name="GUID-9AC506C7-030B-495F-A910-51640E2C9CEE"></a><h5 id="ADDCI-GUID-9AC506C7-030B-495F-A910-51640E2C9CEE" class="sect5"><span class="enumeration_section">13.3.7.2 </span>Using PL/SQL REF CURSOR Variables
                     </h5>
                     <div>
                        <div class="section">
                           <p>PL/SQL <code class="codeph">REF CURSOR</code> variables can be defined for queries over table functions, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHJBDCA">Example 13-17</a>.
                           </p>
                           <p>Cursors over table functions have the same fetch semantics as ordinary cursors. <code class="codeph">REF CURSOR</code> assignments based on table functions do not have special semantics.
                           </p>
                           <p>However, the SQL optimizer does not optimize across PL/SQL statements; therefore, <a href="using-pipelined-and-parallel-table-functions.html#GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHICDCB">Example 13-19</a> runs better than <a href="using-pipelined-and-parallel-table-functions.html#GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHEAJDG">Example 13-18</a>.
                           </p>
                           <p>Additionally, <a href="using-pipelined-and-parallel-table-functions.html#GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHEAJDG">Example 13-18</a> is slower because of the overhead associated with executing two SQL statements, and because it does not take advantage of efficiencies realized by pipelining results between two functions, as <a href="using-pipelined-and-parallel-table-functions.html#GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHICDCB">Example 13-19</a> does.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHJBDCA">
                           <p class="titleinexample">Example 13-17 Defining REF CURSOR Variables for Table Function Queries</p><pre class="oac_no_warn" dir="ltr">OPEN c FOR SELECT * FROM TABLE(f(...));
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHEAJDG">
                           <p class="titleinexample">Example 13-18 Using a REF CURSOR Variable</p><pre class="oac_no_warn" dir="ltr">BEGIN
    OPEN r FOR SELECT * FROM TABLE(f(CURSOR(SELECT * FROM tab)));
    SELECT * BULK COLLECT INTO rec_tab FROM TABLE(g(r));
END;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-9AC506C7-030B-495F-A910-51640E2C9CEE__CIHICDCB">
                           <p class="titleinexample">Example 13-19 Using a REF CURSOR Variable More Effectively</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(g(CURSOR(SELECT * FROM
  TABLE(f(CURSOR(SELECT * FROM tab))))));</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4723"></a><a id="ADDCI4722"></a><div class="props_rev_3"><a id="GUID-A3F00ED4-7A5A-42CA-A55F-05CCBB7DED3B" name="GUID-A3F00ED4-7A5A-42CA-A55F-05CCBB7DED3B"></a><h4 id="ADDCI-GUID-A3F00ED4-7A5A-42CA-A55F-05CCBB7DED3B" class="sect4"><span class="enumeration_section">13.3.8 </span>Performing DML Operations Inside Table Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p>A table function must be declared with the autonomous transaction pragma in order for the function to execute DML statements. This pragma causes the function to execute in an autonomous transaction not shared by other processes, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A3F00ED4-7A5A-42CA-A55F-05CCBB7DED3B__CIHIFFDH">Example 13-20</a>.
                        </p>
                        <p>During parallel execution, each instance of the table function creates an independent transaction.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A3F00ED4-7A5A-42CA-A55F-05CCBB7DED3B__CIHIFFDH">
                        <p class="titleinexample">Example 13-20 Declaring a Table Function with Autonomous Transaction Pragma</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION f(p SYS_REFCURSOR) return CollType PIPELINED IS
    PRAGMA AUTONOMOUS_TRANSACTION; 
BEGIN ... END;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4725"></a><a id="ADDCI4726"></a><a id="ADDCI4724"></a><div class="props_rev_3"><a id="GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7" name="GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7"></a><h4 id="ADDCI-GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7" class="sect4"><span class="enumeration_section">13.3.9 </span>Performing DML Operations on Table Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p>Table functions cannot be the target table in <code class="codeph">UPDATE</code>, <code class="codeph">INSERT</code>, or <code class="codeph">DELETE</code> statements. For example, the following statements raise an error: 
                        </p><pre class="oac_no_warn" dir="ltr">UPDATE F(CURSOR(SELECT * FROM tab)) SET col = value; 
INSERT INTO f(...) VALUES ('any', 'thing'); 
</pre><p>However, you can create a view over a table function and use <code class="codeph">INSTEAD OF</code> triggers to update it, as in <a href="using-pipelined-and-parallel-table-functions.html#GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7__CIHIEICC">Example 13-21</a>.
                        </p>
                        <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7__CIHDDHDG">Example 13-22</a> demonstrates how an <code class="codeph">INSTEAD OF</code> trigger is fired when the user inserts a row into the <code class="codeph">BookTable</code> view:.
                        </p>
                        <p><code class="codeph">INSTEAD OF</code> triggers can be defined for all DML operations on a view built on a table function.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7__CIHIEICC">
                        <p class="titleinexample">Example 13-21 Creating a View over a Table</p><pre class="oac_no_warn" dir="ltr">CREATE VIEW BookTable AS 
  SELECT x.Name, x.Author
  FROM TABLE(GetBooks('data.txt')) x;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F277FF3E-CA33-4B18-B39C-6286C5A913E7__CIHDDHDG">
                        <p class="titleinexample">Example 13-22 How an INSTEAD OF Trigger is Fired when a Row is Inserted into a View</p><pre class="oac_no_warn" dir="ltr">CREATE TRIGGER BookTable_insert
INSTEAD OF INSERT ON BookTable
REFERENCING NEW AS n
FOR EACH ROW
BEGIN
  ...
END;
INSERT INTO BookTable VALUES (...);
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4727"></a><div class="props_rev_3"><a id="GUID-F9B720FA-351A-4B07-8409-F2E6F46B0D62" name="GUID-F9B720FA-351A-4B07-8409-F2E6F46B0D62"></a><h4 id="ADDCI-GUID-F9B720FA-351A-4B07-8409-F2E6F46B0D62" class="sect4"><span class="enumeration_section">13.3.10 </span>Handling Exceptions in Table Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p>Exception handling in table functions works just as it does with ordinary user-defined functions. </p>
                        <p>Some languages, such as C and Java, provide a mechanism for user-supplied exception handling. If an exception raised within a table function is handled, the table function executes the exception handler and continues processing. Exiting the exception handler takes control to the enclosing scope. If the exception is cleared, execution proceeds normally. </p>
                        <p>An unhandled exception in a table function causes the parent transaction to roll back.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADDCI4728"></a><div class="props_rev_3"><a id="GUID-C36634BB-613C-4D88-AC58-A58E1409DF24" name="GUID-C36634BB-613C-4D88-AC58-A58E1409DF24"></a><h3 id="ADDCI-GUID-C36634BB-613C-4D88-AC58-A58E1409DF24" class="sect3"><span class="enumeration_section">13.4 </span>Parallel Table Functions
               </h3>
               <div>
                  <p>For a <a id="d38518e2509" class="indexterm-anchor"></a>table function to be executed in parallel, it must have a partitioned input parameter. Parallelism is turned on for a table function if, and only if, both the following conditions are met:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The function has a <code class="codeph">PARALLEL_ENABLE</code> clause in its declaration.
                        </p>
                     </li>
                     <li>
                        <p>Exactly one <code class="codeph">REF CURSOR</code> is specified with a <code class="codeph">PARTITION BY</code> clause.
                        </p>
                        <p>If the <code class="codeph">PARTITION BY</code> clause is not specified for any input <code class="codeph">REF CURSOR</code> as part of the <code class="codeph">PARALLEL_ENABLE</code> clause, the SQL compiler cannot determine how to partition the data correctly.
                        </p>
                     </li>
                  </ul>
               </div><a id="ADDCI4730"></a><a id="ADDCI4731"></a><a id="ADDCI4729"></a><div class="props_rev_3"><a id="GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112" name="GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112"></a><h4 id="ADDCI-GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112" class="sect4"><span class="enumeration_section">13.4.1 </span>Inputting Data with Cursor Variables
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can pass a set of rows to a PL/SQL function in a <code class="codeph">REF CURSOR</code> parameter, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112__CIHBBFBA">Example 13-23</a>.
                        </p>
                        <p>Results of a subquery can be passed to a function directly, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112__CIHJHBGA">Example 13-24</a>. The <code class="codeph">CURSOR</code> keyword is required to indicate that the results of a subquery should be passed as a <code class="codeph">REF CURSOR</code> parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112__CIHBBFBA">
                        <p class="titleinexample">Example 13-23 Passing a Set of Rows to a PL/SQL Function in a REF CURSOR</p><pre class="oac_no_warn" dir="ltr">FUNCTION f(p1 IN SYS_REFCURSOR) RETURN ... ;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-60D8ADBC-A689-4FA5-A806-E803AE94F112__CIHJHBGA">
                        <p class="titleinexample">Example 13-24 Directly Passing Results from a Subquery to a Function</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(f(CURSOR(SELECT empno FROM tab)));
</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADDCI4733"></a><a id="ADDCI4734"></a><a id="ADDCI4735"></a><a id="ADDCI4732"></a><div class="props_rev_3"><a id="GUID-A56ECF67-9706-4140-8280-CB2135762AD3" name="GUID-A56ECF67-9706-4140-8280-CB2135762AD3"></a><h5 id="ADDCI-GUID-A56ECF67-9706-4140-8280-CB2135762AD3" class="sect5"><span class="enumeration_section">13.4.1.1 </span>Using Multiple REF CURSOR Input Variables
                     </h5>
                     <div>
                        <div class="section">
                           <p>PL/SQL functions can accept multiple <code class="codeph">REF CURSOR</code> input variables, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A56ECF67-9706-4140-8280-CB2135762AD3__CIHIFIJG">Example 13-25</a>.
                           </p>
                           <p>Function <code class="codeph">g</code> can be invoked as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A56ECF67-9706-4140-8280-CB2135762AD3__CIHFJFEH">Example 13-26</a>.
                           </p>
                           <p>You can pass table function return values to other table functions by creating a <code class="codeph">REF CURSOR</code> that iterates over the returned data, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A56ECF67-9706-4140-8280-CB2135762AD3__CIHEEJBG">Example 13-27</a>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-A56ECF67-9706-4140-8280-CB2135762AD3__CIHIFIJG">
                           <p class="titleinexample">Example 13-25 Passing a Set of Rows to a PL/SQL Function Through REF CURSOR</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION g(p1 pkg.refcur_t1, p2 pkg.refcur_t2) RETURN...
  PIPELINED ... ;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A56ECF67-9706-4140-8280-CB2135762AD3__CIHFJFEH">
                           <p class="titleinexample">Example 13-26 Invoking a Function that Uses Several REF CURSOR Parameters</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(g(CURSOR(SELECT empno FROM tab),
  CURSOR(SELECT * FROM emp));
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A56ECF67-9706-4140-8280-CB2135762AD3__CIHEEJBG">
                           <p class="titleinexample">Example 13-27 Using REF CURSOR to Pass Return Values Between Table Functions</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE(f(CURSOR(SELECT * FROM TABLE(g(...)))));</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4737"></a><a id="ADDCI4736"></a><div class="props_rev_3"><a id="GUID-05693808-65AB-4F7C-8881-E20DF095EF2F" name="GUID-05693808-65AB-4F7C-8881-E20DF095EF2F"></a><h5 id="ADDCI-GUID-05693808-65AB-4F7C-8881-E20DF095EF2F" class="sect5"><span class="enumeration_section">13.4.1.2 </span>Explicitly Opening a REF CURSOR for a Query
                     </h5>
                     <div>
                        <p>You can explicitly open a <code class="codeph">REF CURSOR</code> for a query and pass it as a parameter to a table function, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-05693808-65AB-4F7C-8881-E20DF095EF2F__CIHJGDDE">Example 13-28</a>.
                        </p>
                        <div class="example" id="GUID-05693808-65AB-4F7C-8881-E20DF095EF2F__CIHJGDDE">
                           <p class="titleinexample">Example 13-28 Explicitly Using a Query REF CURSOR as Table Function Parameter</p><pre class="oac_no_warn" dir="ltr">BEGIN
  OPEN r FOR SELECT * FROM TABLE(f(...));
  -- Must return a single row result set.
  SELECT * INTO rec FROM TABLE(g(r));
END;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4739"></a><a id="ADDCI4738"></a><div class="props_rev_3"><a id="GUID-750FEF8E-A748-44C8-B7F7-444AFACA00BC" name="GUID-750FEF8E-A748-44C8-B7F7-444AFACA00BC"></a><h5 id="ADDCI-GUID-750FEF8E-A748-44C8-B7F7-444AFACA00BC" class="sect5"><span class="enumeration_section">13.4.1.3 </span>PL/SQL REF CURSOR Arguments to Java and C/C++ Functions
                     </h5>
                     <div>
                        <p>Parallel and pipelined table functions may be written in C/C++, Java, or PL/SQL. Unlike PL/SQL, C/C++ and Java do not support the <code class="codeph">REF CURSOR</code> type, but you can still pass a <code class="codeph">REF CURSOR</code> argument to C/C++ and Java functions. 
                        </p>
                        <p>If a table function is implemented as a C callout, then an <code class="codeph">IN REF CURSOR</code> argument passed to the callout is automatically available as an executed OCI statement handle. You can use this handle like any other executed statement handle. 
                        </p>
                        <p>A <code class="codeph">REF CURSOR</code> argument to a callout passed as an <code class="codeph">IN OUT</code> parameter is converted to an executed statement handle on the way in to the callout, and the statement handle is converted back to a <code class="codeph">REF CURSOR</code> on the way out. (The inbound and outbound statement handles may be different.)
                        </p>
                        <p>If a <code class="codeph">REF CURSOR</code> type is used as an <code class="codeph">OUT</code> argument, or a return type to a call, then the call must return the statement handle, which are converted to a <code class="codeph">REF&nbsp;CURSOR</code> for the caller, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-05693808-65AB-4F7C-8881-E20DF095EF2F__CIHJGDDE">Example 13-28</a>. 
                        </p>
                        <p>If the function is written as a Java call, the <code class="codeph">IN REF CURSOR</code> argument is automatically converted to an instance of the Java <code class="codeph">ResultSet</code> class. The <code class="codeph">IN REF CURSOR</code> to <code class="codeph">ResultSet</code> mapping is available only if you use a fat JDBC driver based on OCI. This mapping is not available for a thin JDBC driver. As with an executed statement handle in a C call, when a <code class="codeph">REF CURSOR</code> is either an <code class="codeph">IN OUT</code> argument, an <code class="codeph">OUT</code> argument, or a return type for the function, a Java <code class="codeph">ResultSet</code> is converted back to a PL/SQL <code class="codeph">REF CURSOR</code> on its way out to the caller.
                        </p>
                        <p>A predefined weak <code class="codeph">REF CURSOR</code> type, <code class="codeph">SYS_REFCURSOR</code>, is also supported. With <code class="codeph">SYS_REFCURSOR</code>, you do not have to first create a <code class="codeph">REF CURSOR</code> type in a package before you can use it. This weak <code class="codeph">REF CURSOR</code> type can be used in the <a href="pipelined-and-parallel-table-functions.html#GUID-7C674A4F-7145-480E-883D-00C609B64DA0">ODCITableStart()</a> method, which, as a type method, cannot accept a package type. 
                        </p>
                        <p>To use a strong <code class="codeph">REF CURSOR</code> type, you still must create a PL/SQL package and declare a strong <code class="codeph">REF CURSOR</code> type in it. Also, if you are using a strong <code class="codeph">REF CURSOR</code> type as an argument to a table function, then the actual type of the <code class="codeph">REF CURSOR</code> argument must match the column type, or an error is generated. 
                        </p>
                        <p>To partition a weak <code class="codeph">REF CURSOR</code> argument, you must partition by <code class="codeph">ANY</code>, because a weak <code class="codeph">REF CURSOR</code> argument cannot be partitioned by <code class="codeph">RANGE</code> or <code class="codeph">HASH</code>. Oracle recommends that you not use weak <code class="codeph">REF CURSOR</code> arguments to table functions.
                        </p>
                        <div class="example" id="GUID-750FEF8E-A748-44C8-B7F7-444AFACA00BC__GUID-51BB05D7-E1F4-448E-A1D4-E142CF235D25">
                           <p class="titleinexample">Example 13-29 Using a REF CURSOR in a Call</p><pre class="oac_no_warn" dir="ltr">CREATE OR replace PACKAGE p1 AS 
  TYPE rc IS REF cursor; 
  END; 

CREATE OR REPLACE LIBRARY MYLIB AS 'mylib.so'; 

CREATE OR REPLACE FUNCTION MyCallout (stmthp p1.rc) 
  RETURN binary_integer AS LANGUAGE C LIBRARY MYLIB 
  WITH CONTEXT 
  PARAMETERS (context, stmthp ocirefcursor, RETURN sb4); 

sb4 MyCallout (OCIExtProcContext *ctx, OCIStmt ** stmthp) 
  OCIEnv *envhp;                /* env. handle */ 
  OCISvcCtx *svchp;             /* service handle */ 
  OCIError *errhp;              /* error handle */ 
  OCISession *usrhp;            /* user handle */ 

  int errnum = 29400;           /* choose some oracle error number */ 
  char errmsg[512];             /* error message buffer */ 
  size_t errmsglen;             /* Length of error message */ 
  OCIDefine *defn1p = (OCIDefine *) 0; 
  OCINumber *val=(OCINumber *)0; 

  OCINumber *rval = (OCINumber *)0; 
  sword status =  0; 
  double num=0; 
  val = (OCINumber*) OCIExtProcAllocCallMemory(ctx, sizeof(OCINumber)); 
  /* Get OCI handles */ 
  if (GetHandles(ctx, &amp;envhp, &amp;svchp, &amp;errhp, &amp;usrhp,&amp;rval)) 
    return -1; 
  /* Define the fetch buffer */ 
  psdro_checkerr(NULL, errhp, OCIDefineByPos(*stmthp, &amp;defn1p, errhp, (ub4) 1, 
                                            (dvoid *) &amp;num, (sb4) sizeof(num), 
                                            SQLT_FLT, (dvoid *) 0, (ub2 *)0, 
                                            (ub2 *)0, (ub4) OCI_DEFAULT)); 

  /* Fetch loop */ 
  while ((status = OCIStmtFetch(*stmthp, errhp, (ub4) 1,  (ub4) OCI_FETCH_NEXT, 
                                (ub4) OCI_DEFAULT)) == OCI_SUCCESS || 
         status == OCI_SUCCESS_WITH_INFO) 
  { 
    printf("val=%lf\n",num); 
  } 
  return 0; 
} 
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4741"></a><a id="ADDCI4742"></a><a id="ADDCI4743"></a><a id="ADDCI4744"></a><a id="ADDCI4740"></a><div class="props_rev_3"><a id="GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0" name="GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0"></a><h4 id="ADDCI-GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0" class="sect4"><span class="enumeration_section">13.4.2 </span>Input Data Partitioning
                  </h4>
                  <div>
                     <p>The <a id="d38518e3028" class="indexterm-anchor"></a>table function declaration can specify data partitioning for exactly one <code class="codeph">REF CURSOR</code> parameter, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHGECED">Example 13-30</a>. The <code class="codeph">PARTITION&nbsp;BY</code> phrase in the <code class="codeph">PARALLEL_ENABLE</code> clause specifies which one of the input cursors to partition, and what columns to use for partitioning.
                     </p>
                     <p>When explicit column names are specified in the column list, the <a id="d38518e3046" class="indexterm-anchor"></a><a id="d38518e3050" class="indexterm-anchor"></a>partitioning method may be either <code class="codeph">RANGE</code> or <code class="codeph">HASH</code>. The input rows are hash- or range-partitioned on the specified columns.
                     </p>
                     <p>The <code class="codeph">ANY</code> keyword enables you to indicate that the function behavior is independent of the partitioning of the input data. When this keyword is used, the run-time system randomly partitions the data among the slaves. This keyword is appropriate for use with functions that take in one row, manipulate its columns, and generate output row(s) based on the columns of this row only.
                     </p>
                     <p>To demonstrate, the pivot-like function <code class="codeph">StockPivot()</code> in <a href="using-pipelined-and-parallel-table-functions.html#GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHEDEFF">Example 13-31</a> takes as input a row of the type <code class="codeph">(Ticker&nbsp;varchar(4), OpenPrice&nbsp;number, ClosePrice&nbsp;number)</code>, and generates rows of the type <code class="codeph">(Ticker varchar(4), PriceType varchar(1), Price number)</code>. Thus, the row (<code class="codeph">"ORCL",&nbsp;41,&nbsp;42</code>) generates two rows: (<code class="codeph">"ORCL",&nbsp;"O",&nbsp;41</code>) and (<code class="codeph">"ORCL",&nbsp;"C",&nbsp;42</code>).
                     </p>
                     <p>You can use directly <code class="codeph">TickerTypeSet</code>, as created in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A11569C5-BBF7-4838-9AE6-8BAEAEB58265__CIHEGADE">Example 13-5</a>, instead of <code class="codeph">rec_tab_type</code> or define it the same way. 
                     </p>
                     <p>The function <code class="codeph">f()</code> may be used to generate another table from <code class="codeph">Stocks</code> table, as shown in <a href="using-pipelined-and-parallel-table-functions.html#GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHCCJBG">Example 13-32</a>.
                     </p>
                     <p>If <code class="codeph">StockTable</code> is scanned in parallel and partitioned on <code class="codeph">OpenPrice</code>, then the function <code class="codeph">StockPivot()</code> is combined with the data-flow operator that scans <code class="codeph">StockTable</code> and therefore sees the same partitioning.
                     </p>
                     <p>If <code class="codeph">StockTable</code> is not partitioned, and the scan on it does not execute in parallel, the insert into <code class="codeph">AlternateStockTable</code> also runs sequentially, as demonstrated in <a href="using-pipelined-and-parallel-table-functions.html#GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHGIDHB">Example 13-33</a>.
                     </p>
                     <p>If function <code class="codeph">g()</code> runs in parallel and is partitioned by <code class="codeph">ANY</code>, then the parallel insert can belong in the same data-flow operator as <code class="codeph">g()</code>.
                     </p>
                     <p>Whenever the <code class="codeph">ANY</code> keyword is specified, the data is partitioned randomly among the slaves. This effectively means that the function is executed in the same slave set which does the scan associated with the input parameter.
                     </p>
                     <p>No redistribution or repartitioning of the data is required here. In the case, when the cursor <code class="codeph">p</code> itself is not parallel-enabled, the incoming data is randomly partitioned on the columns in the column list. The round-robin table queue is used for this partitioning.
                     </p>
                     <p>If you create an <code class="codeph">XMLIndex</code> index on a partitioned <code class="codeph">XMLType</code> table, or a partitioned table with an <code class="codeph">XMLType</code> column using range, list, or hash partitioning, that index is equipartitioned with the base table.
                     </p>
                     <div class="example" id="GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHGECED">
                        <p class="titleinexample">Example 13-30 Specifying Data Partitioning for a REF CURSOR Parameter</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION f(p <span class="italic">ref_cursor_type</span>) RETURN rec_tab_type PIPELINED
  PARALLEL_ENABLE(PARTITION p BY [{HASH | RANGE} (<span class="italic">column_list</span>) | ANY ]) IS
BEGIN ... END;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHEDEFF">
                        <p class="titleinexample">Example 13-31 Implementing the StockPivot() Function</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION StockPivot(p refcur_pkg.refcur_t) RETURN rec_tab_type PIPELINED
   PARALLEL_ENABLE(PARTITION p BY ANY) IS
   ret_rec rec_type;
 
BEGIN
   FOR rec IN p LOOP
      ret_rec.Ticker := rec.Ticker;
      ret_rec.PriceType := "O";
      ret_rec.Price := rec.OpenPrice;
      PIPE ROW(ret_rec);
 
      ret_rec.Ticker := rec.Ticker;   -- Redundant; not required
      ret_rec.PriceType := "C";
      ret_rec.Price := rec.ClosePrice;
      PIPE ROW ret_rec;
   END LOOP;
   RETURN;
 
END;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHCCJBG">
                        <p class="titleinexample">Example 13-32 Using a REF CURSOR to Generate a Table from Another Table</p><pre class="oac_no_warn" dir="ltr">INSERT INTO AlternateStockTable
&nbsp;&nbsp;&nbsp;SELECT * FROM 
&nbsp;&nbsp;&nbsp;TABLE(StockPivot(CURSOR(SELECT * FROM StockTable)));
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-01F8C3F7-9D0D-41A8-806E-CDF6CD2A88B0__CIHGIDHB">
                        <p class="titleinexample">Example 13-33 Using a REF CURSOR to Scan and Insert</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION g(p refcur_pkg.refcur_t) RETURN ... PIPELINED
&nbsp;&nbsp;PARALLEL_ENABLE (PARTITION p BY ANY)
BEGIN 
&nbsp;&nbsp;... 
END;

INSERT INTO AlternateStockTable
&nbsp;&nbsp;SELECT * FROM TABLE(f(CURSOR(SELECT * FROM Stocks))), TABLE(g(CURSOR( ... )))
    WHERE <span class="italic">join_condition</span>;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4746"></a><a id="ADDCI4745"></a><div class="props_rev_3"><a id="GUID-9983C9CB-9B31-4169-A3A4-3B3DE8618AD4" name="GUID-9983C9CB-9B31-4169-A3A4-3B3DE8618AD4"></a><h4 id="ADDCI-GUID-9983C9CB-9B31-4169-A3A4-3B3DE8618AD4" class="sect4"><span class="enumeration_section">13.4.3 </span>Parallel Execution of Leaf-Level Table Functions
                  </h4>
                  <div>
                     <p>Parallel execution of a table function requires a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> as an input parameter. If the table function does not inherently require a set of rows as input, then you must redesign the function to require a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> as input.
                     </p>
                     <p>For example, the following function reads a set of external files in parallel and returns the records they contain. To provide work for a <code class="codeph">REF CURSOR</code>, you might first create a table and populate it with the filenames. A <code class="codeph">REF CURSOR</code> over this table can then be passed as a parameter to the table function <code class="codeph">readfiles()</code>, as demonstrated by <a href="using-pipelined-and-parallel-table-functions.html#GUID-9983C9CB-9B31-4169-A3A4-3B3DE8618AD4__CIHCAJGD">Example 13-34</a>.
                     </p>
                     <div class="example" id="GUID-9983C9CB-9B31-4169-A3A4-3B3DE8618AD4__CIHCAJGD">
                        <p class="titleinexample">Example 13-34 Using a REF CURSOR to Read a Set of External FIles</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE filetab(filename VARCHAR(20));

INSERT INTO filetab VALUES('file0');   
INSERT INTO filetab VALUES('file1');  
...
INSERT INTO filetab VALUES('fileN');

SELECT * FROM TABLE(readfiles(CURSOR(SELECT filename FROM filetab)));

CREATE FUNCTION readfiles(p pkg.rc_t) RETURN coll_type
  PARALLEL_ENABLE(PARTITION p BY ANY) IS
  ret_rec rec_type;
BEGIN
  FOR rec IN p LOOP
    done := FALSE;
    WHILE (done = FALSE) LOOP
         done := readfilerecord(rec.filename, ret_rec);
         PIPE ROW(ret_rec);
    END LOOP;
  END LOOP;
  RETURN;
END;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4747"></a><div class="props_rev_3"><a id="GUID-29BF4664-DC92-4ABA-810D-0998AAA33563" name="GUID-29BF4664-DC92-4ABA-810D-0998AAA33563"></a><h3 id="ADDCI-GUID-29BF4664-DC92-4ABA-810D-0998AAA33563" class="sect3"><span class="enumeration_section">13.5 </span>Input Data Streaming for Table Functions
               </h3>
               <div>
                  <p>Data streaming is the manner in which a table function orders or clusters rows that it fetches from cursor arguments. A function can stream its input data in any of the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Place no restriction on the ordering of the incoming rows.</p>
                     </li>
                     <li>
                        <p>Order them on a particular key column or columns.</p>
                     </li>
                     <li>
                        <p>Cluster them on a particular key.</p>
                     </li>
                  </ul>
                  <p>To control the behavior of the input stream, use the syntax in <a href="using-pipelined-and-parallel-table-functions.html#GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B__CIHECDFJ">Example 13-36</a>.
                  </p>
                  <p>Input streaming may be specified for either sequential or parallel execution of a function. If an <code class="codeph">ORDER BY</code> or <code class="codeph">CLUSTER BY</code> clause is not specified, rows are input in a random order. The semantics of <code class="codeph">ORDER BY</code> are different for parallel execution from the semantics of the <code class="codeph">ORDER BY</code> clause in a SQL statement. In a SQL statement, the <code class="codeph">ORDER BY</code> clause globally orders the entire data set. In a table function, the <code class="codeph">ORDER BY</code> clause orders the respective rows local to each instance of the table function running on a slave.
                  </p>
                  <p>Clustering causes rows that have the same key values to appear next to one another, but it does not otherwise do any ordering of rows.</p>
                  <p><code class="codeph">expr</code> should be the <code class="codeph">REFCURSOR</code> received in the function.
                  </p>
                  <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B__CIHGDIBD">Example 13-35</a> illustrates the syntax for ordering the input stream. In the example, function <code class="codeph">f()</code> takes in rows of the kind <code class="codeph">(Region, Sales)</code> and returns rows of the form <code class="codeph">(Region, AvgSales)</code>, showing average sales for each region.
                  </p>
               </div><a id="ADDCI4748"></a><a id="ADDCI4749"></a><div class="props_rev_3"><a id="GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B" name="GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B"></a><h4 id="ADDCI-GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B" class="sect4"><span class="enumeration_section">13.5.1 </span>Setting up the Input Stream
                  </h4>
                  <div>
                     <div class="example" id="GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B__CIHGDIBD">
                        <p class="titleinexample">Example 13-35 Ordering the Input Stream</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION f(p <span class="italic">ref_cursor_type</span>) RETURN tab_rec_type PIPELINED
  CLUSTER p BY (Region)
  PARALLEL_ENABLE(PARTITION p BY HASH(Region)) IS
  ret_rec rec_type;
  cnt number;
  sum number;
BEGIN
  LOOP
  FETCH p INTO rec;
  EXIT WHEN p%NOTFOUND;
    IF (first rec in the group) THEN
        cnt := 1;
        sum := rec.Sales;
    ELSIF (last rec in the group) THEN
      IF (cnt &lt;&gt; 0) THEN
        ret_rec.Region := rec.Region;
          ret_rec.AvgSales := sum/cnt;
          PIPE ROW(ret_rec);
        END IF;
    ELSE
       cnt := cnt + 1;
      sum := sum + rec.Sales;
    END IF;
  END LOOP;
  RETURN;
END</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-03918C18-8C89-4D6C-AB22-F1E8FDF4728B__CIHECDFJ">
                        <p class="titleinexample">Example 13-36 Controlling Input Data Streaming</p><pre class="oac_no_warn" dir="ltr">FUNCTION f(p ref_cursor_type) RETURN tab_rec_type [PIPELINED]
         {[ORDER | CLUSTER] expr BY column_list}
         PARALLEL_ENABLE({PARTITION p BY 
           [ANY | {HASH | RANGE} column_list]} )
IS
BEGIN 
  ...
END;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4750"></a><div class="props_rev_3"><a id="GUID-8066CFAA-7DDD-4929-8543-5F2373C1367B" name="GUID-8066CFAA-7DDD-4929-8543-5F2373C1367B"></a><h4 id="ADDCI-GUID-8066CFAA-7DDD-4929-8543-5F2373C1367B" class="sect4"><span class="enumeration_section">13.5.2 </span>Parallel Execution: Partitioning and Clustering
                  </h4>
                  <div>
                     <p>Partitioning and clustering are easily confused, but they do different things. Sometimes partitioning can be sufficient without clustering in parallel execution.</p>
                     <p>Consider a function <code class="codeph">SmallAggr</code> that performs in-memory aggregation of salary for each <code class="codeph">department_id</code>, where <code class="codeph">department_id</code> can be either <code class="codeph">1</code>, <code class="codeph">2</code>, or <code class="codeph">3</code>. The input rows to the function can be partitioned by <code class="codeph">HASH</code> on <code class="codeph">department_id</code> so that all rows with <code class="codeph">department_id</code> equal to <code class="codeph">1</code> go to one slave, all rows with <code class="codeph">department_id</code> equal to <code class="codeph">2</code> go to another slave, and so on.
                     </p>
                     <p>The input rows do not have to be clustered on <code class="codeph">department_id</code> to perform the aggregation in the function. Each slave could have a <code class="codeph">1</code> by <code class="codeph">3</code> array <code class="codeph">SmallSum[1..3]</code>, in which the aggregate sum for each <code class="codeph">department_id</code> is added in memory into <code class="codeph">SmallSum[department_id]</code>. On the other hand, if the number of unique values of <code class="codeph">department_id</code> were very large, you would want to use clustering to compute department aggregates and write them to disk one <code class="codeph">department_id</code> at a time.
                     </p>
                  </div>
               </div>
            </div><a id="ADDCI4751"></a><div class="props_rev_3"><a id="GUID-8A9A03F7-91B0-4205-A7AC-58CAA8852DD6" name="GUID-8A9A03F7-91B0-4205-A7AC-58CAA8852DD6"></a><h3 id="ADDCI-GUID-8A9A03F7-91B0-4205-A7AC-58CAA8852DD6" class="sect3"><span class="enumeration_section">13.6 </span>Creating Domain Indexes in Parallel
               </h3>
               <div>
                  <p>Creating a <a id="d38518e3638" class="indexterm-anchor"></a>domain index can be a lengthy process because of the large amount of data that a domain index typically handles. You can exploit the parallel-processing capabilities of table functions to alleviate this bottleneck by using table functions to create domain indexes in parallel.
                  </p>
                  <p>Typically, the <code class="codeph">ODCIIndexCreate()</code> routine performs the following steps:
                  </p>
                  <ol>
                     <li>
                        <p>Creates tables for storing the index data</p>
                     </li>
                     <li id="GUID-8A9A03F7-91B0-4205-A7AC-58CAA8852DD6__CIHFGIID">
                        <p>Fetches the relevant data, such as <code class="codeph">keycols</code> and <code class="codeph">rowid</code>, from the base table, transforms it, and inserts relevant transformed data into the table created for storing the index data.
                        </p>
                     </li>
                     <li>
                        <p>Builds secondary indexes on the tables that store the index data, for faster access at query time.</p>
                     </li>
                  </ol>
                  <p>Step <a href="using-pipelined-and-parallel-table-functions.html#GUID-8A9A03F7-91B0-4205-A7AC-58CAA8852DD6__CIHFGIID">2</a> is the bottleneck in creating domain indexes. You can speed up this step by encapsulating these operations in a parallel table function and invoking the function from the <code class="codeph">ODCIIndexCreate()</code> function. In <a href="using-pipelined-and-parallel-table-functions.html#GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D__CIHDDFGE">Example 13-37</a>, a table function <code class="codeph">IndexLoad()</code> is defined to do just that.
                  </p>
                  <p>where <code class="codeph">p</code> is a cursor of the form:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT /*+ PARALLEL (<span class="italic">base_table</span>, <span class="italic">par_degree</span>) */ keycols ,rowid 
  FROM <span class="italic">base_table</span>
</pre><p>The <span class="italic"><code class="codeph">par_degree</code></span> value can be explicitly specified; otherwise, it is derived from the parallel degree of the base table.
                  </p>
                  <p>The function <code class="codeph">IndexMerge()</code>, defined in <a href="using-pipelined-and-parallel-table-functions.html#GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D__CIHGHDIB">Example 13-38</a>, is needed to merge the results from the several instances of <code class="codeph">IndexLoad()</code>.
                  </p>
                  <p>The new steps in <code class="codeph">ODCIIndexCreate()</code> would be:
                  </p>
                  <ol>
                     <li>
                        <p>Create metadata structures for the index (tables to store the index data).</p>
                     </li>
                     <li>
                        <p>Explicitly commit the transaction so that the <code class="codeph">IndexLoad()</code> function can access the committed data.
                        </p>
                     </li>
                     <li>
                        <p>Invoke <code class="codeph">IndexLoad()</code> in parallel, as shown in the following code example.
                        </p>
                        <p>Invoking the Merging of Parallel Domain Index Loads</p><pre class="oac_no_warn" dir="ltr">status := ODCIIndexMerge(CURSOR(
&nbsp;&nbsp;SELECT * FROM TABLE(ODCIIndexLoad(ia, parms, CURSOR(
&nbsp;&nbsp;&nbsp;&nbsp;SELECT <span class="italic">key_cols</span>, ROWID FROM <span class="italic">basetable</span>)))))
</pre></li>
                     <li>
                        <p>Create secondary index structures.</p>
                     </li>
                  </ol>
                  <div class="infoboxnotealso" id="GUID-8A9A03F7-91B0-4205-A7AC-58CAA8852DD6__GUID-1FB7D6B6-2DCB-4715-BC85-9598904A0C19">
                     <p class="notep1">See Also:</p>
                     <p><a href="extensible-indexing-interface.html#GUID-C14A0478-6EA1-4EAE-BAA6-AA59EE5D300C">ODCIIndexCreate()</a></p>
                  </div>
               </div><a id="ADDCI4753"></a><a id="ADDCI4752"></a><div class="props_rev_3"><a id="GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D" name="GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D"></a><h4 id="ADDCI-GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D" class="sect4"><span class="enumeration_section">13.6.1 </span>Loading Domain Indexes
                  </h4>
                  <div>
                     <div class="section">
                        <p>The formation of secondary indexes is very time consuming, and Oracle recommends that you implement parallel loading of domain index, as illustrated in the â€œLoading a Domain Index in Parallelâ€ section, and subsequently recombine them as shown in â€œMerging the Results from Parallel Domain Index Loadsâ€ example.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D__CIHDDFGE">
                        <p class="titleinexample">Example 13-37 Loading a Domain Index in Parallel</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION IndexLoad(ia ODCIIndexInfo, parms VARCHAR2,
                          p refcur-type)
RETURN status_code_type
PARALLEL_ENABLE(PARTITION p BY ANY)  
PRAGMA AUTONOMOUS_TRANSACTION
IS
BEGIN
  FOR rec IN p LOOP
    - process each rec and determine the index entry
    - derive name of index storage table from parameter ia
    - insert into table created in ODCIIndexCreate
  END LOOP;
  COMMIT; -- explicitly commit the autonomous txn
  RETURN ODCIConst.Success;
END;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A2D01076-AB16-4D79-89F3-67DBE0CB109D__CIHGHDIB">
                        <p class="titleinexample">Example 13-38 Merging the Results from Parallel Domain Index Loads</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION IndexMerge(p refcur-type) 
RETURN NUMBER
IS
BEGIN
  FOR rec IN p LOOP
    IF (rec != ODCIConst.Success)
      RETURN Error;
  END LOOP;
  RETURN Success; 
END;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4756"></a><a id="ADDCI4755"></a><div class="props_rev_3"><a id="GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0" name="GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0"></a><h3 id="ADDCI-GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0" class="sect3"><span class="enumeration_section">13.7 </span>Transient and Generic Types
               </h3>
               <div>
                  <p>Oracle has three special SQL <a id="d38518e3872" class="indexterm-anchor"></a>data types that <a id="d38518e3877" class="indexterm-anchor"></a>enable you to <a id="d38518e3882" class="indexterm-anchor"></a>dynamically encapsulate and access type descriptions, data instances, and sets of data instances of any other SQL type, including object and collection types. You can also use these three special types to create anonymous, or unnamed, types, including anonymous collection types. See <a href="using-pipelined-and-parallel-table-functions.html#GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0__CIHDHEEI" title="Type and its description">Table 13-1</a>.
                  </p>
                  <p>The three SQL types are implemented as opaque types; the internal structure of these types is not known to the database: their data can be queried only by implementing functions, typically 3GL routines. Oracle provides both an OCI and a PL/SQL API for implementing such functions.</p>
                  <div class="tblformal" id="GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0__CIHDHEEI">
                     <p class="titleintable">Table 13-1 Generic SQL Types</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Generic SQL Types" summary="Type and its description" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d38518e3902">Type</th>
                              <th align="left" valign="bottom" width="70%" id="d38518e3905">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d38518e3910" headers="d38518e3902 ">
                                 <p><code class="codeph">SYS.ANYTYPE</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d38518e3910 d38518e3905 ">
                                 <p>A type description type. A <code class="codeph">SYS.ANYTYPE</code> can contain a type description of any SQL type, named or unnamed, including object types and collection types.
                                 </p>
                                 <p>An <code class="codeph">ANYTYPE</code> can contain a type description of a persistent type, but an <code class="codeph">ANYTYPE</code> itself is transient: the value in an <code class="codeph">ANYTYPE</code> itself is not automatically stored in the database. To create a persistent type, use a <code class="codeph">CREATE TYPE</code> statement from SQL.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d38518e3935" headers="d38518e3902 ">
                                 <p><code class="codeph">SYS.ANYDATA</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d38518e3935 d38518e3905 ">
                                 <p>A self-describing data instance type. A <code class="codeph">SYS.ANYDATA</code> contains an instance of a given type, with data, plus a description of the type. In this sense, a <code class="codeph">SYS.ANYDATA</code> is self-describing. An <code class="codeph">ANYDATA</code> can be persistently stored in the database.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d38518e3952" headers="d38518e3902 ">
                                 <p><code class="codeph">SYS.ANYDATASET</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d38518e3952 d38518e3905 ">
                                 <p>A self-describing data set type. A <code class="codeph">SYS.ANYDATASET</code> type contains a description of a given type plus a set of data instances of that type. An <code class="codeph">ANYDATASET</code> can be persistently stored in the database.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>Each of these three types can be used with any built-in type native to the database   with object types and collection types, both named and unnamed. The types provide a generic way to work dynamically with type descriptions, lone instances, and sets of instances of other types. Using the APIs, you can create a transient <code class="codeph">ANYTYPE</code> description of any kind of type. Similarly, you can create or convert (cast) a data value of any SQL type to an <code class="codeph">ANYDATA</code> and can convert an <code class="codeph">ANYDATA</code> (back) to a SQL type. And similarly again with sets of values and <code class="codeph">ANYDATASET</code>.
                  </p>
                  <p>The generic types simplify working with stored procedures. You can use the generic types to encapsulate descriptions and data of standard types and pass the encapsulated information into parameters of the generic types. In the body of the procedure, you can detail how to handle the encapsulated data and type descriptions of whatever type. </p>
                  <p>You can also store encapsulated data of a variety of underlying types in one table column of type <code class="codeph">ANYDATA</code> or <code class="codeph">ANYDATASET</code>. For example, you can use <code class="codeph">ANYDATA</code> with advanced queuing to model queues of heterogeneous types of data. You can query the data of the underlying data types like any other data.
                  </p>
                  <p>Note, however, that <code class="codeph">ANYDATA</code> and <code class="codeph">ANYDATASET</code> objects that were created on a transient type, such as unnamed type constructed through an <code class="codeph">ANYTYPE</code> API, cannot be stored persistently in an <code class="codeph">ANYDATA</code> or <code class="codeph">ANYDATASET</code> table column.
                  </p>
                  <p>Corresponding to the three generic SQL types are three OCI types that model them. Each has a set of functions for creating and accessing the respective type:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">OCIType</code>, corresponding to <code class="codeph">SYS.ANYTYPE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">OCIAnyData</code>, corresponding to <code class="codeph">SYS.ANYDATA</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">OCIAnyDataSet</code>, corresponding to <code class="codeph">SYS.ANYDATASET</code></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0__GUID-2E932ECB-22AD-4EF7-8872-A7D2E7286CD5">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNOCI-GUID-169F309C-279B-410C-9844-E0ACC505F789" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for the <code class="codeph">OCIType</code>, <code class="codeph">OCIAnyData</code>, and <code class="codeph">OCIAnyDataSet</code> APIs and details on how to use them
                           </p>
                        </li>
                        <li>
                           <p> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ARPLS-GUID-4AA6AA30-CAEE-4DCD-B214-9AD51D0229B4" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the interfaces to the <code class="codeph">ANYTYPE</code>, <code class="codeph">ANYDATA</code>, and <code class="codeph">ANYDATASET</code> types and about the <code class="codeph">DBMS_TYPES</code> package, which defines constants for built-in and user-defined types, for use with <code class="codeph">ANYTYPE</code>, <code class="codeph">ANYDATA</code>, and <code class="codeph">ANYDATASET</code></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADOBJ010" target="_blank"><span class="italic">Oracle Database Object-Relational Developer's Guide</span></a> for definition of generic, transient, and opaque types.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='01152.DBMS_XMLSCHEMA.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="DBMS_XMLSCHEMA package provides procedures to manage XML schemas.">
      <meta name="description" content="DBMS_XMLSCHEMA package provides procedures to manage XML schemas.">
      <title>DBMS_XMLSCHEMA</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="DBMS_XMLSCHEMA package provides procedures to manage XML schemas.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_XMLSAVE.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_XMLSCHEMA_ANNOTATE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_XMLSAVE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_XMLSCHEMA_ANNOTATE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_XMLSCHEMA</li>
            </ol>
            <a id="GUID-0D53E906-350F-477B-9A55-85FAEBDCE32E" name="GUID-0D53E906-350F-477B-9A55-85FAEBDCE32E"></a><a id="ARPLS377"></a><a id="ARPLS377"></a>
            
            <h2 id="ARPLS-GUID-0D53E906-350F-477B-9A55-85FAEBDCE32E" class="sect2"><span class="enumeration_chapter">202 </span>DBMS_XMLSCHEMA
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_XMLSCHEMA</code> package provides procedures to manage XML schemas.
               </p>
               <p>It is created by script <code class="codeph">dbmsxsch.sql</code> during Oracle database installation.
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_XMLSCHEMA.html#GUID-F9B6DEA7-DA54-4FB5-A8B0-DE01A5125BA3" title="The DBMS_XMLSCHEMA package uses subprograms to manage XML schemas.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XMLSCHEMA.html#GUID-FF8CA31C-6DA1-491B-8CD7-FCB6195F8CB4" title="Owned by XDB, the DBMS_XMLSCHEMA package must be created by SYS or XDB. The EXECUTE privilege is granted to PUBLIC. Subprograms in this package are executed using the privileges of the current user.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XMLSCHEMA.html#GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9" title="The DBMS_XMLSCHEMA package defines several constants to use when specifying parameter values.">Constants</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XMLSCHEMA.html#GUID-CD8EA0C4-26E2-402D-AF89-7297D658E092" title="This table lists the views used by the DBMS_XMLSCHEMA package">Views</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XMLSCHEMA.html#GUID-92F9F223-6925-4D93-A735-842603D25622" title="There are guidelines for using in-place XML schema evolution.">Operational Notes</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XMLSCHEMA.html#GUID-6C78A496-2FD3-413A-9586-E2FFA3083B74" title="This table lists the DBMS_XMLSCHEMA subprograms and briefly describes them.">Summary of DBMS_XMLSCHEMA Subprograms</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-0D53E906-350F-477B-9A55-85FAEBDCE32E__GUID-E484BD41-0D0C-45D3-9E75-6079840A82F3">
                  <p class="notep1">See Also:</p>
                  <p><a href="../adxdb/XML-DB-basics.html#ADXDB-GUID-8611495B-A091-4B11-9E65-E8AD20D50D97" target="_blank"><span><cite>Oracle XML&nbsp;DB Developerâ€™s Guide</cite></span></a></p>
               </div>
            </div><a id="ARPLS70045"></a><a id="ARPLS70045"></a><div class="props_rev_3"><a id="GUID-F9B6DEA7-DA54-4FB5-A8B0-DE01A5125BA3" name="GUID-F9B6DEA7-DA54-4FB5-A8B0-DE01A5125BA3"></a><h3 id="ARPLS-GUID-F9B6DEA7-DA54-4FB5-A8B0-DE01A5125BA3" class="sect3"><span class="enumeration_section">202.1 </span>DBMS_XMLSCHEMA Overview
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_XMLSCHEMA</code> package uses subprograms to manage XML schemas. 
                  </p>
                  <div class="section">
                     <p>These subprograms provide the following XML schema management::</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Register an XML schema</p>
                        </li>
                        <li>
                           <p>Delete a previously registered XML schema</p>
                        </li>
                        <li>
                           <p>Re-compile a previously registered XML schema</p>
                        </li>
                        <li>
                           <p>Generate an XML schema</p>
                        </li>
                        <li>
                           <p>Evolves an XML schema</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS74020"></a><a id="ARPLS74020"></a><div class="props_rev_3"><a id="GUID-FF8CA31C-6DA1-491B-8CD7-FCB6195F8CB4" name="GUID-FF8CA31C-6DA1-491B-8CD7-FCB6195F8CB4"></a><h3 id="ARPLS-GUID-FF8CA31C-6DA1-491B-8CD7-FCB6195F8CB4" class="sect3"><span class="enumeration_section">202.2 </span>DBMS_XMLSCHEMA Security Model
               </h3>
               <div>
                  <p>Owned by <code class="codeph">XDB</code>, the <code class="codeph">DBMS_XMLSCHEMA</code> package must be created by <code class="codeph">SYS</code> or <code class="codeph">XDB</code>. The <code class="codeph">EXECUTE</code> privilege is granted to <code class="codeph">PUBLIC</code>. Subprograms in this package are executed using the privileges of the current user.
                  </p>
               </div>
            </div><a id="ARPLS70046"></a><a id="ARPLS70047"></a><a id="ARPLS70048"></a><a id="ARPLS70049"></a><a id="ARPLS70047"></a><a id="ARPLS70048"></a><a id="ARPLS70049"></a><a id="ARPLS70046"></a><div class="props_rev_3"><a id="GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9" name="GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9"></a><h3 id="ARPLS-GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9" class="sect3"><span class="enumeration_section">202.3 </span>DBMS_XMLSCHEMA Constants
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_XMLSCHEMA</code> package defines several constants to use when specifying parameter values. 
                  </p>
                  <div class="section">
                     <p>These constants are shown in following tables.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_XMLSCHEMA.html#GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9__CHDEHIIF" title="This table describes delete option related constants used by DBMS_XMLSCHEMA subprograms.">Table 202-1</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_XMLSCHEMA.html#GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9__CHDIAGJC" title="This table describes enable hierarchy related constants used by DBMS_XMLSCHEMA subprograms.">Table 202-2</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_XMLSCHEMA.html#GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9__CHDGIBBD" title="This table describes register csid related constants used by DBMS_XMLSCHEMA subprograms.">Table 202-3</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9__CHDEHIIF">
                     <p class="titleintable">Table 202-1 <span class="italic"><span class="bold">DBMS_XMLSCHEMA Constants </span></span>- Delete Option
                     </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XMLSCHEMA Constants - Delete Option" summary="This table describes delete option related constants used by DBMS_XMLSCHEMA subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="37%" id="d1262190e538">Constant</th>
                              <th align="left" valign="bottom" width="18%" id="d1262190e541">Type</th>
                              <th align="left" valign="bottom" width="9%" id="d1262190e544">Value</th>
                              <th align="left" valign="bottom" width="35%" id="d1262190e547">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e552" headers="d1262190e538 ">
                                 <p><code class="codeph">DELETE_RESTRICT</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1262190e552 d1262190e541 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e552 d1262190e544 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="35%" headers="d1262190e552 d1262190e547 ">
                                 <p>Deletion of an XML schema fails if there are any tables or XML schemas that depend on it</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e568" headers="d1262190e538 ">
                                 <p><code class="codeph">DELETE_INVALIDATE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1262190e568 d1262190e541 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e568 d1262190e544 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="35%" headers="d1262190e568 d1262190e547 ">
                                 <p>Deletion of an XML schema does not fail if there are tables or XML schemas that depend on it. All dependent tables and schemas are invalidated.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e584" headers="d1262190e538 ">
                                 <p><code class="codeph">DELETE_CASCADE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1262190e584 d1262190e541 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e584 d1262190e544 ">
                                 <p><code class="codeph">3</code></p>
                              </td>
                              <td align="left" valign="top" width="35%" headers="d1262190e584 d1262190e547 ">
                                 <p>Deletion of an XML schema also drops all SQL types and default tables associated with it. SQL types are dropped only if <code class="codeph">gentypes</code> argument was set to <code class="codeph">TRUE</code> during registration of the XML schema. However, deletion of the XML schema fails if there are any instance documents conforming to the schema or any dependent XML schemas.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e606" headers="d1262190e538 ">
                                 <p><code class="codeph">DELETE_CASCADE_FORCE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1262190e606 d1262190e541 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e606 d1262190e544 ">
                                 <p><code class="codeph">4</code></p>
                              </td>
                              <td align="left" valign="top" width="35%" headers="d1262190e606 d1262190e547 ">
                                 <p>This option is similar to <code class="codeph">DELETE_CASCADE</code> except that it does not check for any stored instance documents conforming to the schema or any dependent XML schemas. Also, it ignores any errors.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformal" id="GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9__CHDIAGJC">
                     <p class="titleintable">Table 202-2 <span class="italic"><span class="bold">DBMS_XMLSCHEMA Constants </span></span>- Enable Hierarchy
                     </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XMLSCHEMA Constants - Enable Hierarchy" summary="This table describes enable hierarchy related constants used by DBMS_XMLSCHEMA subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="37%" id="d1262190e639">Constant</th>
                              <th align="left" valign="bottom" width="19%" id="d1262190e642">Type</th>
                              <th align="left" valign="bottom" width="9%" id="d1262190e645">Value</th>
                              <th align="left" valign="bottom" width="34%" id="d1262190e648">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e653" headers="d1262190e639 ">
                                 <p><code class="codeph">ENABLE_HIERARCHY_NONE</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d1262190e653 d1262190e642 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e653 d1262190e645 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d1262190e653 d1262190e648 ">
                                 <p>The <code class="codeph">ENABLE_HIERARCHY</code> procedure of the <code class="codeph">DBMS_XDBZ</code> package will not be called on any tables created while registering that schema
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e675" headers="d1262190e639 ">
                                 <p><code class="codeph">ENABLE_HIERARCHY_CONTENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d1262190e675 d1262190e642 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e675 d1262190e645 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d1262190e675 d1262190e648 ">
                                 <p>The <code class="codeph">ENABLE_HIERARCHY</code> procedure of the <code class="codeph">DBMS_XDBZ</code> package will be called for all tables created during schema registration with <code class="codeph">hierarchy_type</code> as <code class="codeph">DBMS_XDBZ</code>.<code class="codeph">ENABLE_CONTENTS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d1262190e705" headers="d1262190e639 ">
                                 <p><code class="codeph">ENABLE_HIERARCHY_RESMETADATA</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d1262190e705 d1262190e642 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="9%" headers="d1262190e705 d1262190e645 ">
                                 <p><code class="codeph">3</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d1262190e705 d1262190e648 ">
                                 <p>The <code class="codeph">ENABLE_HIERARCHY</code> procedure of the <code class="codeph">DBMS_XDBZ</code> package will be called on all tables created during schema registration with <code class="codeph">hierarchy_type</code> as <code class="codeph">DBMS_XDBZ</code>.<code class="codeph">ENABLE_RESMETADATA</code>. Users should pass in <code class="codeph">DBMS_XMLSCHEMA</code>.<code class="codeph">ENABLE_RESMETADATA</code> for schemas they intend to use as resource metadata tables.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformal" id="GUID-345D2846-284E-46B8-9AF3-F5961D8D70A9__CHDGIBBD">
                     <p class="titleintable">Table 202-3 <span class="italic"><span class="bold">DBMS_XMLSCHEMA Constants </span></span>- Register CSID
                     </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XMLSCHEMA Constants - Register CSID" summary="This table describes register csid related constants used by DBMS_XMLSCHEMA subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="38%" id="d1262190e757">Constant</th>
                              <th align="left" valign="bottom" width="20%" id="d1262190e760">Type</th>
                              <th align="left" valign="bottom" width="10%" id="d1262190e763">Value</th>
                              <th align="left" valign="bottom" width="32%" id="d1262190e766">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e771" headers="d1262190e757 ">
                                 <p><code class="codeph">REGISTER_NODOCID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d1262190e771 d1262190e760 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d1262190e771 d1262190e763 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1262190e771 d1262190e766 ">
                                 <p>If a schema is registered for metadata use (using the value <code class="codeph">ENABLE_HIER_RESMETADATA</code> for parameter <code class="codeph">enablehierarchy</code> during registration), a column named <code class="codeph">DOCID</code> is added to all tables created during schema registration. This constant can be used in the options argument of <code class="codeph">REGISTERSCHEMA</code> to prevent the creation of this column if the user wishes to optimize on storage
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e799" headers="d1262190e757 ">
                                 <p><code class="codeph">REGISTER_CSID_NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d1262190e799 d1262190e760 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d1262190e799 d1262190e763 ">
                                 <p><code class="codeph">-1</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1262190e799 d1262190e766 ">
                                 <p>If user wishes to not specify the character set of the input schema document when invoking <code class="codeph">REGISTERSCHEMA</code>, this value can be used for the csid parameter
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS70050"></a><a id="ARPLS70051"></a><a id="ARPLS70051"></a><a id="ARPLS70050"></a><div class="props_rev_3"><a id="GUID-CD8EA0C4-26E2-402D-AF89-7297D658E092" name="GUID-CD8EA0C4-26E2-402D-AF89-7297D658E092"></a><h3 id="ARPLS-GUID-CD8EA0C4-26E2-402D-AF89-7297D658E092" class="sect3"><span class="enumeration_section">202.4 </span>Views
               </h3>
               <div>
                  <p>This table lists the views used by the <code class="codeph">DBMS_XMLSCHEMA</code> package
                  </p>
                  <div class="section">
                     <p>The columns of these views are described in detail in the <a href="../refrn/static-data-dictionary-views.html#REFRN-GUID-8865F65B-EF6D-44A5-B0A1-3179EFF0C36A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CD8EA0C4-26E2-402D-AF89-7297D658E092__CHDCADGJ">
                     <p class="titleintable">Table 202-4 Summary of Views used by DBMS_XMLSCHEMA</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of Views used by DBMS_XMLSCHEMA" summary="This table lists the Catalog Views of DBMS_XMLSCHEMA subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="38%" id="d1262190e930">Schema</th>
                              <th align="left" valign="bottom" width="62%" id="d1262190e933">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e938" headers="d1262190e930 ">
                                 <p><a href="../refrn/USER_XML_SCHEMAS.html#REFRN26307" target="_blank"><code class="codeph">USER_XML_SCHEMAS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e938 d1262190e933 ">
                                 <p>All registered XML Schemas owned by the user</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e948" headers="d1262190e930 ">
                                 <p><a href="../refrn/ALL_XML_SCHEMAS.html#REFRN20307" target="_blank"><code class="codeph">ALL_XML_SCHEMAS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e948 d1262190e933 ">
                                 <p>All registered XML Schemas usable by the current user</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e958" headers="d1262190e930 ">
                                 <p><a href="../refrn/DBA_XML_SCHEMAS.html#REFRN23307" target="_blank"><code class="codeph">DBA_XML_SCHEMAS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e958 d1262190e933 ">
                                 <p>All registered XML Schemas in the database</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e968" headers="d1262190e930 ">
                                 <p><a href="../refrn/DBA_XML_TABLES.html#REFRN23309" target="_blank"><code class="codeph">DBA_XML_TABLES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e968 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> tables in the system
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e981" headers="d1262190e930 ">
                                 <p><a href="../refrn/USER_XML_TABLES.html#REFRN26309" target="_blank"><code class="codeph">USER_XML_TABLES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e981 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> tables owned by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e994" headers="d1262190e930 ">
                                 <p><a href="../refrn/ALL_XML_TABLES.html#REFRN20309" target="_blank"><code class="codeph">ALL_XML_TABLES</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e994 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> tables usable by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1007" headers="d1262190e930 ">
                                 <p><a href="../refrn/DBA_XML_TAB_COLS.html#REFRN23308" target="_blank"><code class="codeph">DBA_XML_TAB_COLS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1007 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> table columns in the system
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1020" headers="d1262190e930 ">
                                 <p><a href="../refrn/USER_XML_TAB_COLS.html#REFRN26308" target="_blank"><code class="codeph">USER_XML_TAB_COLS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1020 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> table columns in tables owned by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1033" headers="d1262190e930 ">
                                 <p><a href="../refrn/ALL_XML_TAB_COLS.html#REFRN20308" target="_blank"><code class="codeph">ALL_XML_TAB_COLS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1033 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> table columns in tables usable by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1046" headers="d1262190e930 ">
                                 <p><a href="../refrn/DBA_XML_VIEWS.html#REFRN23311" target="_blank"><code class="codeph">DBA_XML_VIEWS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1046 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> views in the system
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1059" headers="d1262190e930 ">
                                 <p><a href="../refrn/USER_XML_VIEWS.html#REFRN26311" target="_blank"><code class="codeph">USER_XML_VIEWS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1059 d1262190e933 ">
                                 <p>All <code class="codeph">XMlType</code> views owned by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1073" headers="d1262190e930 ">
                                 <p><a href="../refrn/ALL_XML_VIEWS.html#REFRN20311" target="_blank"><code class="codeph">ALL_XML_VIEWS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1073 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> views usable by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1086" headers="d1262190e930 ">
                                 <p><a href="../refrn/DBA_XML_VIEW_COLS.html#REFRN23310" target="_blank"><code class="codeph">DBA_XML_VIEW_COLS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1086 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> view columns in the system
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1099" headers="d1262190e930 ">
                                 <p><a href="../refrn/USER_XML_VIEW_COLS.html#REFRN26310" target="_blank"><code class="codeph">USER_XML_VIEW_COLS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1099 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> view columns in views owned by the current user
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1262190e1112" headers="d1262190e930 ">
                                 <p><a href="../refrn/ALL_XML_VIEW_COLS.html#REFRN20310" target="_blank"><code class="codeph">ALL_XML_VIEW_COLS</code></a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1262190e1112 d1262190e933 ">
                                 <p>All <code class="codeph">XMLType</code> view columns in views usable by the current user
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS70052"></a><a id="ARPLS70053"></a><a id="ARPLS70053"></a><a id="ARPLS70052"></a><div class="props_rev_3"><a id="GUID-92F9F223-6925-4D93-A735-842603D25622" name="GUID-92F9F223-6925-4D93-A735-842603D25622"></a><h3 id="ARPLS-GUID-92F9F223-6925-4D93-A735-842603D25622" class="sect3"><span class="enumeration_section">202.5 </span>DBMS_XMLSCHEMA Operational Notes
               </h3>
               <div>
                  <p>There are guidelines for using in-place XML schema evolution.</p>
                  <div class="section">
                     <p>Before you perform an in-place XML-schema evolution, you should follow these preparatory steps:</p>
                     <ol>
                        <li>
                           <p>Back up all existing data (instance documents) for the XML schema that will be evolved.</p>
                        </li>
                        <li>
                           <p>Perform a dry run using trace only, that is, without actually evolving the XML schema or updating any instance documents, to produce a trace of the update operations that would be performed during evolution. To do this, set the flag parameter value to only <code class="codeph">INPLACE_TRACE</code>. Do not also use <code class="codeph">INPLACE_EVOLVE</code>. After performing the dry run, examine the trace file, verifying that the listed DDL operations are in fact those that you intend.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS70054"></a><a id="ARPLS70055"></a><a id="ARPLS70055"></a><a id="ARPLS70054"></a><div class="props_rev_3"><a id="GUID-6C78A496-2FD3-413A-9586-E2FFA3083B74" name="GUID-6C78A496-2FD3-413A-9586-E2FFA3083B74"></a><h3 id="ARPLS-GUID-6C78A496-2FD3-413A-9586-E2FFA3083B74" class="sect3"><span class="enumeration_section">202.6 </span>Summary of DBMS_XMLSCHEMA Subprograms
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">DBMS_XMLSCHEMA</code> subprograms and briefly describes them.
                  </p>
                  <div class="tblformal" id="GUID-6C78A496-2FD3-413A-9586-E2FFA3083B74__GUID-FBEFC382-1516-47E5-BA12-0A597C2286D6">
                     <p class="titleintable">Table 202-5 DBMS_XMLSCHEMA Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XMLSCHEMA Package Subprograms" summary="This table lists the DBMS_XMLSCHEMA subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d1262190e1338">Method</th>
                              <th align="left" valign="bottom" width="69%" id="d1262190e1341">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1346" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-C61CF495-127E-4276-8853-43827D40BD40" title="This procedure can be used to re-compile an already registered XML schema. This is useful for bringing a schema in an invalid state to a valid state. Can result in a ORA-31001 exception: invalid resource handle or path name.">COMPILESCHEMA Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1346 d1262190e1341 ">
                                 <p>Used to re-compile an already registered XML schema. This is useful for bringing a schema in an invalid state to a valid state.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1361" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-769A2A32-B169-4809-AA90-4565E3A01EF4" title="This procedure evolves registered schemas so that existing XML instances remain valid.">COPYEVOLVE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1361 d1262190e1341 ">
                                 <p>Evolves registered schemas so that existing XML instances remain valid</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1373" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D" title="This procedure deletes the XML Schema specified by the URL.">DELETESCHEMA Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1373 d1262190e1341 ">
                                 <p>Removes the schema from the database</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1385" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58" title="This procedure evolves registered schemas by propagating schema changes to object types and tables.">INPLACEEVOLVE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1385 d1262190e1341 ">
                                 <p>Evolves registered schemas by propagating schema changes to object types and tables</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1397" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E" title="This procedure removes the XML schema.">PURGESCHEMA Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1397 d1262190e1341 ">
                                 <p>Removes the XML schema</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1409" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-8E30B10A-FD31-4892-9898-66022BE6BC15" title="This procedure registers the specified schema for use by the database.">REGISTERSCHEMA Procedures</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1409 d1262190e1341 ">
                                 <p>Registers the specified schema for use by Oracle. This schema can then be used to store documents conforming to this.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1262190e1421" headers="d1262190e1338 ">
                                 <p><a href="DBMS_XMLSCHEMA.html#GUID-8E9313FC-622C-4773-BED1-A09A0E331F60" title="This procedure registers an XML Schema specified by a URI name.">REGISTERURI Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1262190e1421 d1262190e1341 ">
                                 <p>Registers an XML schema specified by a URI name</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS70056"></a><a id="ARPLS70057"></a><a id="ARPLS70057"></a><a id="ARPLS70056"></a><div class="props_rev_3"><a id="GUID-C61CF495-127E-4276-8853-43827D40BD40" name="GUID-C61CF495-127E-4276-8853-43827D40BD40"></a><h4 id="ARPLS-GUID-C61CF495-127E-4276-8853-43827D40BD40" class="sect4"><span class="enumeration_section">202.6.1 </span>COMPILESCHEMA Procedure
                  </h4>
                  <div>
                     <p>This procedure can be used to re-compile an already registered XML schema. This is useful for bringing a schema in an invalid state to a valid state. Can result in a <code class="codeph">ORA-31001 </code>exception: invalid resource handle or path name. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C61CF495-127E-4276-8853-43827D40BD40__GUID-8401E9C3-504C-469D-B8D7-CE8975F1A717">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.COMPILESCHEMA(
&nbsp;&nbsp;&nbsp;schemaurl IN VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C61CF495-127E-4276-8853-43827D40BD40__GUID-0F1F6B03-61BB-4229-B0B8-50C02048F2C3">Parameters</p>
                        <div class="tblformal" id="GUID-C61CF495-127E-4276-8853-43827D40BD40__GUID-AE69B71A-D40F-4692-A2B3-0A0D6747A019">
                           <p class="titleintable">Table 202-6 COMPILESCHEMA Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COMPILESCHEMA Procedure Parameters" summary="This table describes the Parameters of the DBMS_XMLSCHEMA.COMPILESCHEMA subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e1545">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e1548">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1553" headers="d1262190e1545 ">
                                       <p><code class="codeph">schemaurl</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1553 d1262190e1548 ">
                                       <p>URL identifying the schema</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70058"></a><a id="ARPLS70059"></a><a id="ARPLS70059"></a><a id="ARPLS70058"></a><div class="props_rev_3"><a id="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4" name="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4"></a><h4 id="ARPLS-GUID-769A2A32-B169-4809-AA90-4565E3A01EF4" class="sect4"><span class="enumeration_section">202.6.2 </span>COPYEVOLVE Procedure
                  </h4>
                  <div>
                     <p>This procedure evolves registered schemas so that existing XML instances remain valid. </p>
                     <div class="section">
                        <p>This procedure is accomplished in according to the following basic scenario (alternative actions are controlled by the procedure's parameters):</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>copies data in schema based <code class="codeph">XMLType</code> tables to temporary table storage
                              </p>
                           </li>
                           <li>
                              <p>drops old tables</p>
                           </li>
                           <li>
                              <p>deletes old schemas</p>
                           </li>
                           <li>
                              <p>registers new schemas</p>
                           </li>
                           <li>
                              <p>creates new <code class="codeph">XMLType</code> tables 
                              </p>
                           </li>
                           <li>
                              <p>Populates new tables with data in temporary storage; auxiliary structures (constraints, triggers, indexes, and others) are not preserved</p>
                           </li>
                           <li>
                              <p>drops temporary tables</p>
                              <div class="infoboxnotealso" id="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4__GUID-44995848-B1DD-47BB-A940-9A4B357BC49B">
                                 <p class="notep1">See Also:</p>
                                 <p></p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>"Schema Evolution" chapter of the <a href="../adxdb/XML-Schema-evolution.html#ADXDB0800" target="_blank"><span class="italic">Oracle XML DB Developer's Guide </span></a>for examples on how to evolve existing schemas
                                       </p>
                                    </li>
                                    <li>
                                       <p><a href="../errmg/index.html" target="_blank"><span class="italic">Oracle Database Error Messages</span></a> for information on exceptions specific to schema evolution, ORA-30142 through ORA-30946.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4__GUID-9A4088CE-F891-4054-947C-DF2B2DF092F2">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.COPYEVOLVE(
&nbsp;&nbsp;&nbsp;schemaurls       IN  XDB$STRUBG_LIST_T,
&nbsp;&nbsp;&nbsp;newschemas       IN  XMLSequenceType,
&nbsp;&nbsp;&nbsp;transforms       IN  XMLSequenceType :=NULL,
&nbsp;&nbsp;&nbsp;preserveolddocs  IN  BOOLEAN :=FALSE,
&nbsp;&nbsp;&nbsp;maptablename     IN  VARCHAR2 :=NULL,
&nbsp;&nbsp;&nbsp;generatetables   IN  BOOLEAN :=TRUE,
&nbsp;&nbsp;&nbsp;force            IN  BOOLEAN :=FALSE,
&nbsp;&nbsp;&nbsp;schemaowners     IN  XDB$STRING_LIST_T :=NULL
   parallelDegree   IN  PLS_INTEGER := 0,
   options          IN  PLS_INTEGER := 0);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4__GUID-2E8B4AA3-751C-4C98-9EA5-6BF9ACE8212A">Parameters</p>
                        <div class="tblformal" id="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4__GUID-54E28538-5C68-4D78-86BE-AED57770CAB4">
                           <p class="titleintable">Table 202-7 COPYEVOLVE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COPYEVOLVE Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.COPYEVOLVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e1720">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e1723">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1728" headers="d1262190e1720 ">
                                       <p><code class="codeph">schemaurls </code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1728 d1262190e1723 ">
                                       <p><code class="codeph">VARRAY</code> of URLs of all schemas to be evolved. Should include the dependent schemas. Unless the <code class="codeph">FORCE</code> parameter is <code class="codeph">TRUE</code>, URLs should be in the order of dependency.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1744" headers="d1262190e1720 ">
                                       <p><code class="codeph">newschemas</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1744 d1262190e1723 ">
                                       <p><code class="codeph">VARRAY</code> of new schema documents. Should be specified in same order as the corresponding URLs.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1754" headers="d1262190e1720 ">
                                       <p><code class="codeph">transforms</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1754 d1262190e1723 ">
                                       <p><code class="codeph">VARRAY</code> of transforming XSL documents to be applied to schema-based documents. Should be specified in same order as the corresponding URLs. Optional if no transformations are required.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1764" headers="d1262190e1720 ">
                                       <p><code class="codeph">preserveolddocs</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1764 d1262190e1723 ">
                                       <p>Default is <code class="codeph">FALSE</code>, and temporary tables with old data are dropped. If <code class="codeph">TRUE</code>, these table are still available after schema evolution is complete.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1778" headers="d1262190e1720 ">
                                       <p><code class="codeph">maptabname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1778 d1262190e1723 ">
                                       <p>Specifies the name of the table mapping permanent to temporary tables during the evolution process. Valid columns are:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">SCHEMA_URL</code> - <code class="codeph">VARCHAR2(700)</code> - URL of schema to which this table conforms
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SCHEMA_OWNER</code> -<code class="codeph">VARCHAR2(30)</code> - Owner of the schema
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ELEMENT_NAME</code> - <code class="codeph">VARCHAR2(256)</code>- Element to which this table conforms
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TAB_NAME</code> - <code class="codeph">VARCHAR2(65)</code> - Qualified table name: <span class="italic"><code class="codeph">&lt;owner_name&gt;.&lt;table_name&gt;</code></span></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COL_NAME</code> - <code class="codeph">VARCHAR2(4000)</code> - Name of the column (<code class="codeph">NULL</code> for <code class="codeph">XMLType</code> tables)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TEMP_TABNAME</code> - <code class="codeph">VARCHAR2(30)</code> - Name of temporary tables which holds data for this table.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1844" headers="d1262190e1720 ">
                                       <p><code class="codeph">generatetables</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1844 d1262190e1723 ">
                                       <p>Default is <code class="codeph">TRUE</code>, and new tables will be generated.
                                       </p>
                                       <p>If <code class="codeph">FALSE</code>:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>new tables will not be generated after registration of new schemas</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">preserveolddocs</code> must be <code class="codeph">TRUE</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">maptablename</code> must be non-<code class="codeph">NULL</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1878" headers="d1262190e1720 ">
                                       <p><code class="codeph">force</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1878 d1262190e1723 ">
                                       <p>Default is <code class="codeph">FALSE</code>. 
                                       </p>
                                       <p>If <code class="codeph">TRUE</code>, ignores errors generated during schema evolution. Used when there are circular dependencies among schemas to ensure that all schemas are stored despite possible errors in registration.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1894" headers="d1262190e1720 ">
                                       <p><code class="codeph">schemaowners</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1894 d1262190e1723 ">
                                       <p><code class="codeph">VARRAY</code> of names of schema owners. Should be specified in same order as the corresponding URLs. Default is NULL, assuming that all schemas are owned by the current user.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1904" headers="d1262190e1720 ">
                                       <p><code class="codeph">paralleldegree</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1904 d1262190e1723 ">
                                       <p>Specifies the degree of parallelism to be used in a <code class="codeph">PARALLEL</code> hint during the data copy stage of the evolution. If this is 0 (default), the <code class="codeph">PARALLEL</code> hint will not be given in the data copy statements.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e1918" headers="d1262190e1720 ">
                                       <p><code class="codeph">options</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e1918 d1262190e1723 ">
                                       <p>Currently, the only supported option is <code class="codeph">COPYEVOLVE_BINARY_XML</code> which lets you register the new schemas for binary XML and create the new tables/columns with binary XML as the storage type.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-769A2A32-B169-4809-AA90-4565E3A01EF4__GUID-89E29FB2-121D-4974-B791-B68FC2601EA5">Usage Notes</p>
                        <p>You should back up all schemas and documents prior to invocation because <a href="DBMS_XMLSCHEMA.html#GUID-769A2A32-B169-4809-AA90-4565E3A01EF4" title="This procedure evolves registered schemas so that existing XML instances remain valid.">COPYEVOLVE Procedure</a> deletes all conforming documents prior to implementing the schema evolution.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70060"></a><a id="ARPLS70061"></a><a id="ARPLS70062"></a><a id="ARPLS70061"></a><a id="ARPLS70062"></a><a id="ARPLS70060"></a><div class="props_rev_3"><a id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D" name="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D"></a><h4 id="ARPLS-GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D" class="sect4"><span class="enumeration_section">202.6.3 </span>DELETESCHEMA Procedure
                  </h4>
                  <div>
                     <p>This procedure deletes the XML Schema specified by the URL. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D__GUID-3EA250EF-8DED-4383-86C1-1523E78DEBD3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.DELETESCHEMA(
&nbsp;&nbsp;&nbsp;schemaurl      IN  VARCHAR2,
&nbsp;&nbsp;&nbsp;delete_option  IN  PLS_INTEGER := DELETE_RESTRICT);</pre><div class="infoboxnotealso" id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D__GUID-D6A3385E-E66E-4BB8-87C2-90DBA807F396">
                           <p class="notep1">See Also:</p>
                           <p>"XMLSCHEMA Storage and Query: Basic" chapter of the <a href="../adxdb/XML-Schema-and-query-basic.html#ADXDB0600" target="_blank"><span class="italic">Oracle XML DB Developer's Guide </span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D__GUID-EA8C52A1-594C-4DA7-90A3-9C6F21A6164A">Parameters</p>
                        <div class="tblformal" id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D__GUID-23F4F068-ACC5-4481-845A-4F659BB5BC3F">
                           <p class="titleintable">Table 202-8 DELETESCHEMA Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DELETESCHEMA Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.DELETESCHEMA subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e2059">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e2062">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2067" headers="d1262190e2059 ">
                                       <p><code class="codeph">schemaurl</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2067 d1262190e2062 ">
                                       <p>URL identifying the schema to be deleted</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2075" headers="d1262190e2059 ">
                                       <p><code class="codeph">delete_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2075 d1262190e2062 ">
                                       <p>Delete options:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">DELETE_RESTRICT</code> - Schema deletion fails if there are any tables or schemas that depend on this schema
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DELETE_INVALIDATE</code> - Schema deletion does not fail if there are any dependencies. Instead, it simply invalidates all dependent objects.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DELETE_CASCADE</code> - Schema deletion will also drop all default SQL types and default tables. However the deletion fails if there are any stored instances conforming to this schema.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DELETE_CASCADE_FORCE</code> - Similar to <code class="codeph">DELETE_CASCADE</code> except that it does not check for any stored instances conforming to this schema. Also, it ignores any errors.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D__GUID-213CCF62-6CB4-4235-AEF8-A5A5C9AC9F28">Exceptions</p>
                        <div class="tblformal" id="GUID-0F9F9631-F0C4-4F86-942A-DB0DDAF3D21D__GUID-4985B65C-646B-40BF-A225-7CA87D2565C8">
                           <p class="titleintable">Table 202-9 DELETESCHEMA Procedure Exceptions</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DELETESCHEMA Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_XMLSCHEMA.DELETESCHEMA subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e2119">Exception</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e2122">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2127" headers="d1262190e2119 ">
                                       <p><code class="codeph">ORA-31001</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2127 d1262190e2122 ">
                                       <p>Invalid resource handle or path name</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70072"></a><a id="ARPLS70073"></a><a id="ARPLS70073"></a><a id="ARPLS70072"></a><div class="props_rev_3"><a id="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58" name="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58"></a><h4 id="ARPLS-GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58" class="sect4"><span class="enumeration_section">202.6.4 </span>INPLACEEVOLVE Procedure
                  </h4>
                  <div>
                     <p>This procedure evolves registered schemas by propagating schema changes to object types and tables. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58__GUID-D17D4455-82EE-4EE9-ABAB-2F32F8341ED5">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.INPLACEEVOLVE(
   schemaURL    IN   VARCHAR2, 
   diffXML      IN   XMLType, 
   flags        IN   NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58__GUID-5677829A-4680-40C9-9576-F34EAD2EA8AC">Parameters</p>
                        <div class="tblformal" id="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58__GUID-288C00CF-117E-4650-9628-5CBC735DC2C7">
                           <p class="titleintable">Table 202-10 INPLACEEVOLVE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="INPLACEEVOLVE Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.INPLACEEVOLVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e2244">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e2247">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2252" headers="d1262190e2244 ">
                                       <p><code class="codeph">schemaurl</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2252 d1262190e2247 ">
                                       <p>URL of the schema to evolve</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2260" headers="d1262190e2244 ">
                                       <p><code class="codeph">diffXML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2260 d1262190e2247 ">
                                       <p>Changes to be applied to the schema. This is an XML document conforming to the <code class="codeph">XDIFF</code> schema and specifies what changes need to be applied and the locations in the schema document where the changes are to be applied. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2271" headers="d1262190e2244 ">
                                       <p><code class="codeph">flags</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2271 d1262190e2247 ">
                                       <p>The following bits may be set in this parameter to control the behavior of this procedure:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">INPLACE_EVOLVE</code> (value 1, meaning that bit 1 is on) &#x2013; Perform in-place XML schema evolution: construct a new XML schema and validate it (against the XML schema for XML schemas); construct the DDL statements needed to evolve the instance-document disk structures, execute the DDL statements, and replace the old XML schema with the new.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INPLACE_TRACE</code> (value 2, meaning that bit 2 is on) &#x2013; Perform all steps necessary for in-place evolution, except executing the DDL statements and overwriting the old XML schema with the new, then write both the DDL statements and the new XML schema to a trace file.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>That is, each of the bits constructs the new XML schema, validates it, and determines the steps needed to evolve the disk structures underlying the instance documents. In addition:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Bit <code class="codeph">INPLACE_EVOLVE</code> carries out those evolution steps and replaces the old XML schema with the new.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Bit <code class="codeph">INPLACE_TRACE</code> saves the evolution steps and the new XML schema in a trace file (it does not carry out the evolution steps)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58__GUID-867D4903-7642-4A74-B298-F5D15CEBC5CC">Exceptions</p>
                        <p>The procedure raises exceptions in the following cases:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An error will be raised for invalid <code class="codeph">XPATH</code> expressions and for <code class="codeph">XDIFF</code> documents that do not conform to the xdiff schema. 
                              </p>
                           </li>
                           <li>
                              <p>Path expressions that are syntactically correct but result in an invalid node in the schema document will result in an error. </p>
                           </li>
                           <li>
                              <p>If the schema change makes the schema an ill-formed XML document or an invalid XML schema, this will raise an error. </p>
                           </li>
                           <li>
                              <p>Any errors resulting from <code class="codeph">CREATE</code> <code class="codeph">TYPE</code>, <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> and like commands will generate error messages.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0387B5C9-36C1-4F77-8D32-B8CA5F637B58__GUID-A88FB8C2-FF23-4B6E-9377-BBB20A93EA40">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Users are required to backup all their data before attempting in-place evolution, as there is no rollback with this operation. </p>
                           </li>
                           <li>
                              <p>A user must register their new XML schema with the database using the <a href="DBMS_XMLSCHEMA.html#GUID-8E30B10A-FD31-4892-9898-66022BE6BC15" title="This procedure registers the specified schema for use by the database.">REGISTERSCHEMA Procedures</a> and the <a href="DBMS_XMLSCHEMA.html#GUID-8E9313FC-622C-4773-BED1-A09A0E331F60" title="This procedure registers an XML Schema specified by a URI name.">REGISTERURI Procedure</a> at a schema URL that is different from that of the one to be evolved. If the new schema registers successfully and is usable, only then should the user attempt to evolve the existing schema to the new schema by means of this subprogram. If the registration of the new schema is successful, then the user must delete this schema (and all its dependent objects) before attempting to evolve the schema at the old schema URL.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70074"></a><a id="ARPLS70075"></a><a id="ARPLS70075"></a><a id="ARPLS70074"></a><div class="props_rev_3"><a id="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E" name="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E"></a><h4 id="ARPLS-GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E" class="sect4"><span class="enumeration_section">202.6.5 </span>PURGESCHEMA Procedure
                  </h4>
                  <div>
                     <p>This procedure removes the XML schema. </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E__GUID-0373A32F-657B-4E91-9EA0-30D7E5C74D06">
                           <p class="notep1">See Also:</p>
                           <p>"XMLSCHEMA Storage and Query: Advanced" chapter of the <a href="../adxdb/XML-Schema-and-query-object-relational-storage.html#ADXDB0700" target="_blank"><span class="italic">Oracle XML DB Developer's Guide </span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E__GUID-F487DF8F-B978-401D-8CFC-19C3486C6F2C">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.PURGESCHEMA( 
&nbsp;&nbsp;&nbsp;schemaid   IN  RAW);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E__GUID-452BFE0B-8472-4A61-824E-7A17C3D2F215">Parameters</p>
                        <div class="tblformal" id="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E__GUID-DB41914A-0310-4EA9-80AB-C27E7D3E326D">
                           <p class="titleintable">Table 202-11 PURGESCHEMA Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGESCHEMA Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.PURGESCHEMA subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e2483">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e2486">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2491" headers="d1262190e2483 ">
                                       <p><code class="codeph">schemaid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2491 d1262190e2486 ">
                                       <p>ID of the schema to be purged</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-11ABAA82-56FB-4D4D-8D59-F5E5395E3D9E__GUID-1CC1A5EC-66DB-45B0-BB49-6EA4551876C9">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The schema should have been originally registered for binary encoding and should have been deleted in the <code class="codeph">HIDE</code> mode.
                              </p>
                           </li>
                           <li>
                              <p>Once a schema has been deleted in <code class="codeph">HIDE</code> mode, it continues to exist in the XML DB dictionary and is used for decoding already encoded documents. The user invokes this interface when there are no stored instances encoded with this schema. 
                              </p>
                           </li>
                           <li>
                              <p>Once the schema is purged, any space used by that schema will be reclaimed and documents encoded using the schema will raise an error if an attempt is made to decode them. </p>
                           </li>
                           <li>
                              <p>The Schema ID can be obtained from the catalog views.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70076"></a><a id="ARPLS70077"></a><a id="ARPLS70077"></a><a id="ARPLS70076"></a><div class="props_rev_3"><a id="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15" name="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15"></a><h4 id="ARPLS-GUID-8E30B10A-FD31-4892-9898-66022BE6BC15" class="sect4"><span class="enumeration_section">202.6.6 </span>REGISTERSCHEMA Procedures
                  </h4>
                  <div>
                     <p>This procedure registers the specified schema for use by the database.</p>
                     <div class="section">
                        <p>The procedure is overloaded. The different functionality of each form of syntax is presented along with the definition.</p>
                        <div class="infoboxnote" id="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15__GUID-1204FEE3-DCD9-4230-BBA0-33C23CF0352F">
                           <p class="notep1">Note:</p>
                           <p>As of Oracle Database 11<span class="italic">g</span> Release 2 (11.2) the <code class="codeph">genbean</code> parameter is deprecated. Oracle recommends that you do not use this parameter in new applications. Support for this feature is for backward compatibility only.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15__GUID-4C8B5712-5C42-4273-894A-F85C5ED09E08">
                           <p class="notep1">See Also:</p>
                           <p>"XMLSCHEMA Storage and Query: Basic" chapter of the <a href="../adxdb/XML-Schema-and-query-basic.html#ADXDB0600" target="_blank"><span class="italic">Oracle XML DB Developer's Guide </span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15__GUID-DC85539A-63EF-4A8C-B56D-16436BF7E033">Syntax</p>
                        <p>Registers a schema specified as a <code class="codeph">VARCHAR2</code>:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
    schemaurl        IN  VARCHAR2,
    schemadoc        IN  VARCHAR2,
    local            IN  BOOLEAN := TRUE,
    gentypes         IN  BOOLEAN := TRUE,
    genbean          IN  BOOLEAN := FALSE,
    gentables        IN  BOOLEAN := TRUE,
    force            IN  BOOLEAN := FALSE,
    owner            IN  VARCHAR2 := NULL,
    enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
    options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as a <code class="codeph">BFILE</code>. The contents of the schema document must be in the database character set:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2,
   schemadoc        IN  BFILE,
   local            IN  BOOLEAN := TRUE,
   gentypes         IN  BOOLEAN := TRUE,
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as a <code class="codeph">BFILE </code>and identifies the character set id of the schema document:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  BFILE, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := TRUE,
   gentables        IN  BOOLEAN := TRUE,
   force            IN  BOOLEAN := TRUE,
   owner            IN  VARCHAR2 := '',
   csid             IN  NUMBER,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as a <code class="codeph">BLOB</code>. The contents of the schema document must be in the database character set:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  BLOB, 
   local            IN  BOOLEAN := TRUE, 
   genTypes         IN  BOOLEAN := TRUE, 
   genBean          IN  BOOLEAN := FASLE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as a <code class="codeph">BLOB </code>and identifies the character set id of the schema document:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  BLOB, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := TRUE,
   gentables        IN  BOOLEAN := TRUE,
   force            IN  BOOLEAN := TRUE,
   owner            IN  VARCHAR2 := '',
   csid             IN  NUMBER,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as a <code class="codeph">CLOB</code></p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  CLOB, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as an <code class="codeph">XMLTYPE</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  SYS.XMLTYPE, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 </pre><p>Registers the schema specified as a <code class="codeph">BLOB</code>. The contents of the schema document must be in the database character set:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  SYS.URIType, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15__GUID-F16495B3-A434-4A75-BE24-51DD71C6C3B5">Parameters</p>
                        <div class="tblformal" id="GUID-8E30B10A-FD31-4892-9898-66022BE6BC15__GUID-C25815AC-7E12-44AE-875A-B26F3B7AB0CA">
                           <p class="titleintable">Table 202-12 REGSITERSCHEMA Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REGSITERSCHEMA Procedure Parameters" summary="This table describes the parameters of the DBMS_XMLSCHEMA.REGISTERSCHEMA subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e2703">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e2706">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2711" headers="d1262190e2703 ">
                                       <p><code class="codeph">schemaurl </code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2711 d1262190e2706 ">
                                       <p>URL that uniquely identifies the schema document. This value is used to derive the path name of the schema document within the database hierarchy. Can be used inside <code class="codeph">schemalocation</code> attribute of XML Schema import element.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2722" headers="d1262190e2703 ">
                                       <p><code class="codeph">schemadoc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2722 d1262190e2706 ">
                                       <p>A valid XML schema document</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2730" headers="d1262190e2703 ">
                                       <p><code class="codeph">local</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2730 d1262190e2706 ">
                                       <p>Is this a local or global schema? </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>By default, all schemas are registered as local schemas, under <code class="codeph">/sys/schemas/&lt;username&gt;/...</code></p>
                                          </li>
                                          <li>
                                             <p>If a schema is registered as global, it is added under <code class="codeph">/sys/schemas/PUBLIC/...</code></p>
                                          </li>
                                       </ul>
                                       <p>You need write privileges on the directory to be able to register a schema as global. </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2751" headers="d1262190e2703 ">
                                       <p><code class="codeph">gentypes</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2751 d1262190e2706 ">
                                       <p>Determines whether the schema compiler generates object types. By default, <code class="codeph">TRUE.</code> If you use binary XML, you must be set <code class="codeph">gentypes</code> to <code class="codeph">FALSE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2768" headers="d1262190e2703 ">
                                       <p><code class="codeph">genbean</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2768 d1262190e2706 ">
                                       <p>Determines whether the schema compiler generates Java beans. By default, <code class="codeph">FALSE</code>. Oracle recommends that this parameter always be set to <code class="codeph">FALSE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2782" headers="d1262190e2703 ">
                                       <p><code class="codeph">gentables </code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2782 d1262190e2706 ">
                                       <p>Determines whether the schema compiler generates default tables. By default, <code class="codeph">TRUE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2792" headers="d1262190e2703 ">
                                       <p><code class="codeph">force</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2792 d1262190e2706 ">
                                       <p>If this parameter is set to <code class="codeph">TRUE</code>, the schema registration will not raise errors. Instead, it creates an invalid XML schema object in case of any errors. By default, the value of this parameter is <code class="codeph">FALSE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2806" headers="d1262190e2703 ">
                                       <p><code class="codeph">owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2806 d1262190e2706 ">
                                       <p>This parameter specifies the name of the database user owning the XML schema object. By default, the user registering the schema owns the XML schema object. This parameter can be used to register a XML schema to be owned by a different database user.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2814" headers="d1262190e2703 ">
                                       <p><code class="codeph">csid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2814 d1262190e2706 ">
                                       <p>Identifies the character set of the input schema document. If this value is <code class="codeph">0</code>, the schema document's encoding is determined by the current rule for "text/xml" MIME type.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2825" headers="d1262190e2703 ">
                                       <p><code class="codeph">enablehierarchy</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2825 d1262190e2706 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ENABLE_HIERARCHY_NONE</code> - enable hierarchy will not be called on any tables created while registering that schema
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ENABLE_HIERARCHY_CONTENTS</code> - enable hierarchy will be called for all tables created during schema registration with <code class="codeph">hierarchy_type</code> as <code class="codeph">DBMS_XDBZ</code>.<code class="codeph">ENABLE_CONTENTS</code>. This is the default.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ENABLE_HIERARCHY_RESMETADATA</code> - enable hierarchy will be called on all tables created during schema registration with <code class="codeph">hierarchy_type</code> as <code class="codeph">DBMS_XDBZ</code>.<code class="codeph">ENABLE_RESMETADATA</code>. Users should pass in <code class="codeph">DBMS_XMLSCHEMA</code>.<code class="codeph">ENABLE_RESMETADATA</code> for schemas they intend to use as resource metadata tables.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e2871" headers="d1262190e2703 ">
                                       <p><code class="codeph">options</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e2871 d1262190e2706 ">
                                       <p>Additional options to specify how the schema should be registered. The various options are represented as bits of an integer and the options parameter should be constructed by doing a <code class="codeph">BITOR</code> of the desired bits. Possible bits:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">REGISTER_NODOCID</code> - this will suppress the creation of the <code class="codeph">DOCID</code> column for out of line tables. This is a storage optimization which might be desirable when we do not need to join back to the document table (for example if we do not care about rewriting certain queries that could be rewritten by making use of the <code class="codeph">DOCID</code> column)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REGISTER_BINARYXML</code> - Register the schema for Binary XML
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REGISTER_NT_AS_IOT</code> - Store nested tables created during schema registration as index organized tables. The default is to store nested tables as heap tables
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70078"></a><a id="ARPLS70079"></a><a id="ARPLS70079"></a><a id="ARPLS70078"></a><div class="props_rev_3"><a id="GUID-8E9313FC-622C-4773-BED1-A09A0E331F60" name="GUID-8E9313FC-622C-4773-BED1-A09A0E331F60"></a><h4 id="ARPLS-GUID-8E9313FC-622C-4773-BED1-A09A0E331F60" class="sect4"><span class="enumeration_section">202.6.7 </span>REGISTERURI Procedure
                  </h4>
                  <div>
                     <p>This procedure registers an XML Schema specified by a URI name.</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-8E9313FC-622C-4773-BED1-A09A0E331F60__GUID-4CD783D9-CA3D-4240-BF57-FFBC79720672">
                           <p class="notep1">Note:</p>
                           <p>As of Oracle Database 11g Release 2 (11.2) the <code class="codeph">genbean</code> parameter is deprecated. Oracle recommends that you do not use this parameter in new applications. Support for this feature is for backward compatibility only.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E9313FC-622C-4773-BED1-A09A0E331F60__GUID-1124F4BC-5FCA-4FDB-973B-98B3487290A6">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XMLSCHEMA.REGISTERURI(
&nbsp;&nbsp;&nbsp;schemaurl      IN  VARCHAR2,
&nbsp;&nbsp;&nbsp;schemadocuri   IN  VARCHAR2,
&nbsp;&nbsp;&nbsp;local          IN  BOOLEAN := TRUE,
&nbsp;&nbsp;&nbsp;gentypes       IN  BOOLEAN := TRUE,
&nbsp;&nbsp;&nbsp;genbean        IN  BOOLEAN := FALSE,
&nbsp;&nbsp;&nbsp;gentables      IN  BOOLEAN := TRUE,
&nbsp;&nbsp;&nbsp;force          IN  BOOLEAN := FALSE,
&nbsp;&nbsp;&nbsp;owner          IN  VARCHAR2 := NULL, 
   options          IN  PLS_INTEGER := 0);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E9313FC-622C-4773-BED1-A09A0E331F60__GUID-C7A003CE-ABE7-4D62-86F4-D8FCF5346EFE">Parameters</p>
                        <div class="tblformal" id="GUID-8E9313FC-622C-4773-BED1-A09A0E331F60__GUID-602DBE8F-2A3A-45D8-8D51-F34785D8AF11">
                           <p class="titleintable">Table 202-13 REGISTERURI Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REGISTERURI Procedure Parameters" summary="This table describes the parameters of the DBMS_XMLSCHEMA.REGISTERURI subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1262190e3020">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1262190e3023">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3028" headers="d1262190e3020 ">
                                       <p><code class="codeph">schemaurl </code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3028 d1262190e3023 ">
                                       <p>Uniquely identifies the schema document. Can be used inside <code class="codeph">schemaLocation</code> attribute of XML Schema import element.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3039" headers="d1262190e3020 ">
                                       <p><code class="codeph">schemadocuri</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3039 d1262190e3023 ">
                                       <p>Pathname (URI) corresponding to the physical location of the schema document. The URI path could be based on HTTP, FTP, DB or Oracle XML DB protocols. This function constructs a <code class="codeph">URIType</code> instance using the <code class="codeph">urifactory</code>, and invokes the <a href="DBMS_XMLSCHEMA.html#GUID-8E30B10A-FD31-4892-9898-66022BE6BC15" title="This procedure registers the specified schema for use by the database.">REGISTERSCHEMA Procedures</a>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3060" headers="d1262190e3020 ">
                                       <p><code class="codeph">local</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3060 d1262190e3023 ">
                                       <p>Determines whether this is a local or global schema. By default, all schemas are registered as local schemas, under <code class="codeph">/sys/schemas/ &lt;username&gt;/... </code>If a schema is registered as global, it is added under <code class="codeph">/sys/schemas/PUBLIC/...</code> The user needs write privileges on the directory to register a global schema. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3074" headers="d1262190e3020 ">
                                       <p><code class="codeph">gentypes</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3074 d1262190e3023 ">
                                       <p>Determines whether the compiler generate object types. By default, <code class="codeph">TRUE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3085" headers="d1262190e3020 ">
                                       <p><code class="codeph">genbean</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3085 d1262190e3023 ">
                                       <p>Determines whether the compiler generate Java beans. By default, <code class="codeph">FALSE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3096" headers="d1262190e3020 ">
                                       <p><code class="codeph">gentables</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3096 d1262190e3023 ">
                                       <p>Determines whether the compiler generate default tables. <code class="codeph">TRUE</code> by default.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3107" headers="d1262190e3020 ">
                                       <p><code class="codeph">force</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3107 d1262190e3023 ">
                                       <p><code class="codeph">TRUE:</code> schema registration will not raise errors. Instead, it creates an invalid XML schema object in case of any errors. By default, the value of this parameter is <code class="codeph">FALSE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3120" headers="d1262190e3020 ">
                                       <p><code class="codeph">owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3120 d1262190e3023 ">
                                       <p>This parameter specifies the name of the database user owning the XML schema object. By default, the user registering the schema owns the XML schema object. This parameter can be used to register a XML schema to be owned by a different database user.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1262190e3128" headers="d1262190e3020 ">
                                       <p><code class="codeph">options</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1262190e3128 d1262190e3023 ">
                                       <p>Additional options to specify how the schema should be registered. The various options are represented as bits of an integer and the options parameter should be constructed by doing a <code class="codeph">BITOR</code> of the desired bits. Possible bits:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">REGISTER_NODOCID</code> - this will suppress the creation of the <code class="codeph">DOCID</code> column for out of line tables. This is a storage optimization which might be desirable when we do not need to join back to the document table (for example if we do not care about rewriting certain queries that could be rewritten by making use of the <code class="codeph">DOCID</code> column)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='04202.preparing-Java-class-methods.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Preparing Java Class Methods for Execution</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Java Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Java Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96468-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="Java-classes-in-database.html" title="Previous" type="text/html">
      <link rel="next" href="server-user-interface.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JJDEV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Java-classes-in-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="server-user-interface.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Java-applications-in-database.html" property="item" typeof="WebPage"><span property="name"> Java Applications on Oracle Database </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Preparing Java Class Methods for Execution</li>
            </ol>
            <a id="GUID-0183CF7A-911E-4F3A-AA17-989023010C2D" name="GUID-0183CF7A-911E-4F3A-AA17-989023010C2D"></a><a id="JJDEV02040"></a>
            
            <h2 id="JJDEV-GUID-0183CF7A-911E-4F3A-AA17-989023010C2D" class="sect2"><span class="enumeration_section">2.5 </span>Preparing Java Class Methods for Execution
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p><a id="d8687e87" class="indexterm-anchor"></a><a id="d8687e89" class="indexterm-anchor"></a><a id="d8687e93" class="indexterm-anchor"></a><a id="d8687e95" class="indexterm-anchor"></a>To ensure that your Java methods run, you must do the following:
                  </p>
               </div>
               <!-- class="section" -->
               <ol>
                  <li><span>Decide when the Java source code is going to be compiled.</span></li>
                  <li><span>Decide if you are going to use the default resolver or another resolver for locating supporting Java classes within the database.</span></li>
                  <li><span>Load the classes into the database. If you do not wish to use the default resolver for your classes, then you should specify a separate resolver with the load command.</span></li>
                  <li><span>Publish your class or method.</span></li>
               </ol>
               <div class="section">
                  <p>This sections covers the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-77024007-F203-44DF-B3EB-75E72D491B63">Compiling Java Classes</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-F17E6450-17E3-49EE-9258-EF5E01748198">Overview of Resolving Class Dependencies</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63">Overview of Loading Classes Using the loadjava Tool</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-3F57CC21-BC4C-4203-B477-695E039D5973">Overview of Granting Execute Rights</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7">Overview of Controlling the Current User</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1">Overview of Checking Java Uploads</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-8D343A4B-EC7A-4F65-8942-56D184250B64">About Publishing Java Methods Loaded in the Database</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA">Overview of Auditing Java Classes Loaded in the Database</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV02041"></a><div class="props_rev_3"><a id="GUID-77024007-F203-44DF-B3EB-75E72D491B63" name="GUID-77024007-F203-44DF-B3EB-75E72D491B63"></a><h3 id="JJDEV-GUID-77024007-F203-44DF-B3EB-75E72D491B63" class="sect3"><span class="enumeration_section">2.5.1 </span>Compiling Java Classes
               </h3>
               <div>
                  <div class="section">
                     <p>Compilation of the Java source code can be done in one of the following ways:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d8687e261" class="indexterm-anchor"></a>You can compile the source explicitly on a client system before loading it into the database, through a Java compiler, such as <code class="codeph">javac</code>.
                           </p>
                        </li>
                        <li>
                           <p>You can ask the database to compile the source during the loading process, which is managed by the <code class="codeph">loadjava</code> tool.
                           </p>
                        </li>
                        <li>
                           <p><a id="d8687e277" class="indexterm-anchor"></a>You can force the compilation to occur dynamically at run time.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-77024007-F203-44DF-B3EB-75E72D491B63__GUID-34E41FE0-5FD0-4EC2-9F50-A7535D279BC9">
                        <p class="notep1">Note:</p>
                        <p>If you decide to compile through the <code class="codeph">loadjava</code> tool, then you can specify the compiler options.
                        </p>
                     </div>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B">Compiling Source Through javac</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-1F6328ED-397C-48DF-9503-904FF2398FE5">Compiling Source Through the loadjava Tool</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6">Compiling Source at Run Time</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-C2285812-D08C-4D76-86E2-9517B233FA08">Specifying Compiler Options</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4">Recompiling Source Programs Automatically</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="preparing-Java-class-methods.html#GUID-C2285812-D08C-4D76-86E2-9517B233FA08">Specifying Compiler Options</a></li>
                     </ul>
                  </div>
               </div>
               <a id="JJDEV13063"></a><div class="props_rev_3"><a id="GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B" name="GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B"></a><h4 id="JJDEV-GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B" class="sect4"><span class="enumeration_section">2.5.1.1 </span>Compiling Source Through javac
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can compile Java source code with a conventional Java compiler as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">javac <span class="variable" translate="no">&lt;file_name&gt;</span>.java</pre><p>After compilation, you load the compiled binary into the database, rather than the source itself. This is a better option, because it is usually easier to debug the Java code on your own system, rather than debugging it on the database.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13064"></a><div class="props_rev_3"><a id="GUID-1F6328ED-397C-48DF-9503-904FF2398FE5" name="GUID-1F6328ED-397C-48DF-9503-904FF2398FE5"></a><h4 id="JJDEV-GUID-1F6328ED-397C-48DF-9503-904FF2398FE5" class="sect4"><span class="enumeration_section">2.5.1.2 </span>Compiling Source Through the loadjava Tool
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you specify the <code class="codeph">-resolve</code> option with the <code class="codeph">loadjava</code> tool for a source file, the following occurs:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>The source file is loaded as a source schema object.</span></li>
                        <li><span>The source file is compiled.</span></li>
                        <li><span>Class schema objects are created for each class defined in the compiled <code class="codeph">.java</code> file.</span></li>
                        <li><span>The compiled code is stored in the class schema objects.</span></li>
                     </ol>
                     <div class="section">
                        <p><a id="d8687e537" class="indexterm-anchor"></a><a id="d8687e541" class="indexterm-anchor"></a>Oracle Database writes all compilation errors to the log file of the <code class="codeph">loadjava</code> tool as well as the <code class="codeph">USER_ERRORS</code> view.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13065"></a><div class="props_rev_3"><a id="GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6" name="GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6"></a><h4 id="JJDEV-GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6" class="sect4"><span class="enumeration_section">2.5.1.3 </span>Compiling Source at Run Time
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you load the Java source into the database without the <code class="codeph">-resolve</code> option, for example:
                        </p><pre class="oac_no_warn" dir="ltr">loadjava <span class="variable" translate="no">&lt;file_name&gt;</span>.java</pre><p>Then, Oracle Database compiles the source automatically when the class is needed during run time. The source file is loaded into a source schema object. Oracle Database writes all compilation errors to the log file of the <code class="codeph">loadjava</code> tool as well as the <code class="codeph">USER_ERRORS</code> view.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13066"></a><div class="props_rev_3"><a id="GUID-C2285812-D08C-4D76-86E2-9517B233FA08" name="GUID-C2285812-D08C-4D76-86E2-9517B233FA08"></a><h4 id="JJDEV-GUID-C2285812-D08C-4D76-86E2-9517B233FA08" class="sect4"><span class="enumeration_section">2.5.1.4 </span>Specifying Compiler Options
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can specify the compiler options in the following ways:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d8687e764" class="indexterm-anchor"></a>Specify compiler options on the command line with the <code class="codeph">loadjava</code> tool. You can also specify the encoding option with the <code class="codeph">loadjava</code> tool.
                              </p>
                           </li>
                           <li>
                              <p>Specify persistent compiler options in the <a id="d8687e778" class="indexterm-anchor"></a><code class="codeph">JAVA$OPTIONS</code> table. The <code class="codeph">JAVA$OPTIONS</code> table exists for each schema. Every time you compile, the compiler uses these options. However, any compiler options specified with the <code class="codeph">loadjava</code> tool override the options defined in this table. You must create this table yourself if you wish to specify compiler options in this manner.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-D3FE2307-FEDE-4E0E-8FAF-3B68D4F0191E" name="GUID-D3FE2307-FEDE-4E0E-8FAF-3B68D4F0191E"></a><h5 id="JJDEV-GUID-D3FE2307-FEDE-4E0E-8FAF-3B68D4F0191E" class="sect5"><span class="enumeration_section">2.5.1.4.1 </span>Specifying Default Compiler Options
                     </h5>
                     <div>
                        <div class="section">
                           <p>When compiling a source schema object for which neither a <code class="codeph">JAVA$OPTIONS</code> entry exists nor a command-line value for any option is specified, the compiler assumes a default value as follows:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">encoding=System.getProperty("file.encoding");</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">online=true</code></p>
                                 <p>This option applies only to Java sources that contain SQLJ constructs.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">debug=true</code></p>
                                 <p>This option is equivalent to:</p><pre class="oac_no_warn" dir="ltr">javac -g
</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-FE9BED3B-A1E5-4412-A36D-2EBB230DAEE6" name="GUID-FE9BED3B-A1E5-4412-A36D-2EBB230DAEE6"></a><h5 id="JJDEV-GUID-FE9BED3B-A1E5-4412-A36D-2EBB230DAEE6" class="sect5"><span class="enumeration_section">2.5.1.4.2 </span>Specifying Compiler Options on the Command Line
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">encoding</code> compiler option specified with the <code class="codeph">loadjava</code> tool identifies the encoding of the <code class="codeph">.java</code> file. This option overrides any matching value in the <code class="codeph">JAVA$OPTIONS</code> table. The values are identical to:
                           </p><pre class="oac_no_warn" dir="ltr">javac -encoding
</pre><p>This option is relevant only when loading a source file.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-7F1602B0-2B02-4FAD-BA9C-A515C0889E11" name="GUID-7F1602B0-2B02-4FAD-BA9C-A515C0889E11"></a><h5 id="JJDEV-GUID-7F1602B0-2B02-4FAD-BA9C-A515C0889E11" class="sect5"><span class="enumeration_section">2.5.1.4.3 </span>Specifying Compiler Options Specified in a Database Table
                     </h5>
                     <div>
                        <div class="section">
                           <p>Each <code class="codeph">JAVA$OPTIONS</code> entry contains the names of source schema objects to which an option setting applies. You can use multiple rows to set the options differently for different source schema objects.
                           </p>
                           <p>You can set <code class="codeph">JAVA$OPTIONS</code> entries by using the following procedures and functions, which are defined in the database package <code class="codeph">DBMS_JAVA</code>:
                           </p><pre class="oac_no_warn" dir="ltr">PROCEDURE <a id="d8687e1109" class="indexterm-anchor"></a>set_compiler_option(name VARCHAR2, option VARCHAR2, value VARCHAR2);

FUNCTION <a id="d8687e1112" class="indexterm-anchor"></a>get_compiler_option(name VARCHAR2, option VARCHAR2) RETURNS VARCHAR2;

PROCEDURE <a id="d8687e1115" class="indexterm-anchor"></a>reset_compiler_option(name VARCHAR2, option VARCHAR2);
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDEV13071"></a><a id="JJDEV13070"></a><div class="props_rev_3"><a id="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091" name="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091"></a><h5 id="JJDEV-GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091" class="sect5"><span class="enumeration_section">2.5.1.4.4 </span>Details About Specifying Compiler Options Specified in the Database Table
                     </h5>
                     <div>
                        <div class="section">
                           <p>The following table describes the parameters for the methods described in the preceding section.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091__CEGJBDHI">
                           <p class="titleintable">Table 2-2 Definitions for the Name and Option Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Definitions for the Name and Option Parameters" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d8687e1219">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d8687e1222">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d8687e1227" headers="d8687e1219 ">
                                       <p>name </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d8687e1227 d8687e1222 ">
                                       <p>This is a Java package name, a fully qualified class name, or an empty string. When the compiler searches the <code class="codeph">JAVA$OPTIONS</code> table for the options to use for compiling a Java source schema object, it uses the row that has a value for <code class="codeph">name</code> that most closely matches the fully qualified class name of a schema object. A <code class="codeph">name</code> whose value is the empty string matches any schema object name.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d8687e1243" headers="d8687e1219 ">
                                       <p>option</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d8687e1243 d8687e1222 ">
                                       <p>The <code class="codeph">option</code> parameter is either <code class="codeph">online</code>, <code class="codeph">encoding</code>, or <code class="codeph">debug</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>Initially, a schema does not have a <code class="codeph">JAVA$OPTIONS</code> table. To create a <code class="codeph">JAVA$OPTIONS</code> table, use the <code class="codeph">java.set_compiler_option</code> procedure from the <code class="codeph">DBMS_JAVA</code> package to set a value. The procedure will create the table, if it does not exist. Specify parameters in single quotes. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; execute dbms_java.set_compiler_option('x.y', 'online', 'false');
</pre><p>The following table represents a hypothetical <code class="codeph">JAVA$OPTIONS</code> database table. The pattern match rule is to match as much of the schema name against the table entry as possible. The schema name with a higher resolution for the pattern match is the entry that applies. Because the table has no entry for the <code class="codeph">encoding</code> option, the compiler uses the default or the value specified on the command line. The <code class="codeph">online</code> option shown in the table matches schema object names as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The name <code class="codeph">a.b.c.d</code> matches class and package names beginning with <code class="codeph">a.b.c.d</code>. The packages and classes are compiled with <code class="codeph">online=true</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The name <code class="codeph">a.b</code> matches class and package names beginning with <code class="codeph">a.b</code>. The name <code class="codeph">a.b</code> does not match <code class="codeph">a.b.c.d</code>. The packages and classes are compiled with <code class="codeph">online=false</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>All other packages and classes match the empty string entry and are compiled with <code class="codeph">online=true</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091__BABBIFHD">
                           <p class="titleintable">Table 2-3 Example JAVA$OPTIONS Table</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Example JAVA$OPTIONS Table" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="18%" id="d8687e1338">Name</th>
                                    <th align="left" valign="bottom" width="18%" id="d8687e1341">Option</th>
                                    <th align="left" valign="bottom" width="18%" id="d8687e1344">Value</th>
                                    <th align="left" valign="bottom" width="46%" id="d8687e1347">Match Examples</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d8687e1352" headers="d8687e1338 ">
                                       <p>a.b.c.d</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1352 d8687e1341 ">
                                       <p><code class="codeph">online</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1352 d8687e1344 ">
                                       <p><code class="codeph">true</code></p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d8687e1352 d8687e1347 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">a.b.c.d</code></p>
                                             <p>Matches the pattern exactly.</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">a.b.c.d.e</code> 
                                             </p>
                                             <p>First part matches the pattern exactly. No other rule matches the full qualified name.</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d8687e1379" headers="d8687e1338 ">
                                       <p>a.b</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1379 d8687e1341 ">
                                       <p><code class="codeph">online</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1379 d8687e1344 ">
                                       <p><code class="codeph">false</code></p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d8687e1379 d8687e1347 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">a.b</code></p>
                                             <p>Matches the pattern exactly</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">a.b.c.x</code></p>
                                             <p>First part matches the pattern exactly. No other rule matches beyond this rule.</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d8687e1405" headers="d8687e1338 ">
                                       <p>Empty string</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1405 d8687e1341 ">
                                       <p><code class="codeph">online</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1405 d8687e1344 ">
                                       <p><code class="codeph">true</code></p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d8687e1405 d8687e1347 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">a.c</code></p>
                                             <p>No pattern match with any defined name. Defaults to the empty string rule.</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">x.y</code></p>
                                             <p>No pattern match with any defined name. Defaults to the empty string rule.</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="JJDEV13072"></a><div class="props_rev_3"><a id="GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4" name="GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4"></a><h4 id="JJDEV-GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4" class="sect4"><span class="enumeration_section">2.5.1.5 </span>Recompiling Source Programs Automatically
                  </h4>
                  <div>
                     <div class="section">
                        <p>Oracle Database provides a dependency management and automatic build facility that transparently recompiles source programs when you make changes to the source or binary programs upon which they depend. Consider the following example:</p><pre class="oac_no_warn" dir="ltr">public class A
{
  B b;
  public void assignB()
  {
    b = new B()
  }
}
public class B
{
  C c;
  public void assignC()
  {
    c = new C()
  }
}
public class C
{
  A a;
  public void assignA()
  {
    a = new A()
  }
}
</pre><p>The system tracks dependencies at a class level of granularity. In the preceding example, you can see that classes <code class="codeph">A</code>, <code class="codeph">B</code>, and <code class="codeph">C</code> depend on one another, because <code class="codeph">A</code> holds an instance of <code class="codeph">B</code>, <code class="codeph">B</code> holds an instance of <code class="codeph">C</code>, and <code class="codeph">C</code> holds an instance of <code class="codeph">A</code>. If you change the definition of class <code class="codeph">A</code> by adding a new field to it, then the dependency mechanism in Oracle Database flags classes <code class="codeph">B</code> and <code class="codeph">C</code> as invalid. Before you use any of these classes again, Oracle Database attempts to resolve them and recompile, if necessary. Note that classes can be recompiled only if the source file is present on the server.
                        </p>
                        <p>The dependency system enables you to rely on Oracle Database to manage dependencies between classes, to recompile, and to resolve automatically. You must force compilation and resolution yourself only if you are developing and you want to find problems early. The <code class="codeph">loadjava</code> tool also provides the facilities for forcing compilation and resolution if you do not want the dependency management facilities to perform this for you.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDEV02042"></a><div class="props_rev_3"><a id="GUID-F17E6450-17E3-49EE-9258-EF5E01748198" name="GUID-F17E6450-17E3-49EE-9258-EF5E01748198"></a><h3 id="JJDEV-GUID-F17E6450-17E3-49EE-9258-EF5E01748198" class="sect3"><span class="enumeration_section">2.5.2 </span>Overview of Resolving Class Dependencies
               </h3>
               <div>
                  <p>Many Java classes contain references to other classes, which is the essence of reusing code. A conventional JVM searches for <code class="codeph">.class</code>, <code class="codeph">.zip</code>, and <code class="codeph">.jar</code> files within the directories specified in <code class="codeph">CLASSPATH</code>. In contrast, Oracle JVM searches database schemas for class objects. In Oracle Database, because you load all Java classes into the database, you may need to specify where to find the dependent classes for your Java class within the database.
                  </p>
                  <p>All classes loaded within the database are referred to as class schema objects and are loaded within certain schemas. All predefined Java application programming interfaces (APIs), such as <code class="codeph">java.lang.*</code> , are loaded within the <code class="codeph">PUBLIC</code> schema. If your classes depend on other classes you have defined, then you will probably load them all within your own schema. For example, if your schema is <code class="codeph">HR</code>, then the database resolver searches the <code class="codeph">HR</code> schema before searching the <code class="codeph">PUBLIC</code> schema. The listing of schemas to search is known as a <a id="d8687e1703" class="indexterm-anchor"></a><span class="bold">resolver specification</span>. Resolver specifications are defined for each class. This is in contrast to a classic JVM, where <code class="codeph">CLASSPATH</code> is global to all classes.
                  </p>
                  <p>When locating and resolving the interclass dependencies for classes, the resolver marks each class as valid or invalid, depending on whether all interdependent classes are located. If the class that you load contains a reference to a class that is not found within the appropriate schemas, then the class is listed as invalid. Unsuccessful resolution at run time produces a <code class="codeph">ClassNotFound</code> exception. Also, run-time resolution can fail for lack of database resources, if the tree of classes is very large.
                  </p>
                  <div class="infoboxnote" id="GUID-F17E6450-17E3-49EE-9258-EF5E01748198__GUID-F211E9C7-4342-4BE1-BAA6-C0938F7A0336">
                     <p class="notep1">Note:</p>
                     <p>As with the Java compiler, the <code class="codeph">loadjava</code> tool resolves references to classes, but not to resources. Ensure that you correctly load the resource files that your classes require.
                     </p>
                  </div>
                  <p><a id="d8687e1725" class="indexterm-anchor"></a>For each interclass reference in a class, the resolver searches the schemas specified by the resolver specification for a valid <a id="d8687e1730" class="indexterm-anchor"></a>class schema object that satisfies the reference. If all references are resolved, then the resolver marks the class valid. A class that has never been resolved, or has been resolved unsuccessfully, is marked invalid. A class that depends on a schema object that becomes invalid is also marked invalid.
                  </p>
                  <p><a id="d8687e1736" class="indexterm-anchor"></a><a id="d8687e1740" class="indexterm-anchor"></a>To make searching for dependent classes easier, Oracle Database provides a default resolver and resolver specification that searches the definer's schema first and then searches the <code class="codeph">PUBLIC</code> schema. This covers most of the classes loaded within the database. However, if you are accessing classes within a schema other than your own or <code class="codeph">PUBLIC</code>, you must define your own resolver specification.
                  </p>
                  <p>Classes can be resolved in the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Loading using the default resolver, which searches the definer's schema and <code class="codeph">PUBLIC</code>:
                        </p><pre class="oac_no_warn" dir="ltr">loadjava -resolve
</pre></li>
                     <li>
                        <p>Loading using your own resolver specification definition:</p><pre class="oac_no_warn" dir="ltr">loadjava-resolve -resolver "((* HR)(* OTHER)(* PUBLIC))"
</pre><p>In the preceding example, the resolver specification definition includes the <code class="codeph">HR</code> schema, <code class="codeph">OTHER</code> schema, and <code class="codeph">PUBLIC</code>.
                        </p>
                     </li>
                  </ul>
                  <p>The <code class="codeph">-resolver</code> option specifies the objects to search within the schemas defined. In the preceding example, all class schema objects are searched within <code class="codeph">HR</code>, <code class="codeph">OTHER</code>, and <code class="codeph">PUBLIC</code>. However, if you want to search for only a certain class or group of classes within the schema, then you could narrow the scope for the search. For example, to search only for the <code class="codeph">my/gui/*</code> classes within the <code class="codeph">OTHER</code> schema, you would define the resolver specification as follows:
                  </p><pre class="oac_no_warn" dir="ltr">loadjava -resolve -resolver '((* HR) ("my/gui/*" OTHER) (* PUBLIC))'
</pre><p>The first parameter within the resolver specification is for the class schema object, and the second parameter defines the schema within which to search for these class schema objects.</p>
               </div>
               <div class="props_rev_3"><a id="GUID-B0AEB608-C38C-4064-9259-C404B9C8024A" name="GUID-B0AEB608-C38C-4064-9259-C404B9C8024A"></a><h4 id="JJDEV-GUID-B0AEB608-C38C-4064-9259-C404B9C8024A" class="sect4"><span class="enumeration_section">2.5.2.1 </span>Allowing References to Nonexistent Classes
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can specify a special option within a resolver specification that allows an unresolved reference to a nonexistent class. Sometimes, internal classes are never used within a product. In a standard Java environment, this is not a problem, because as long as the methods are not called, JVM ignores them. However, when resolving a class, Oracle JVM tries to resolve all names referenced by that class, including names that may never be used. If Oracle JVM cannot find a matching class for each such names referenced by that class, then the class being resolved is marked as invalid and cannot be run.</p>
                        <p>To ignore references, you can specify the wildcard, minus sign (<code class="codeph">-</code>), within the resolver specification. The following example specifies that any references to classes within <code class="codeph">my/gui</code> are to be allowed, even if it is not present within the resolver specification schema list.
                        </p><pre class="oac_no_warn" dir="ltr">loadjava -resolve -resolver '((* HR) (* PUBLIC) ("my/gui/*" -))'
</pre><p>Without the wildcard, if a dependent class is not found within one of the schemas, your class is listed as invalid and cannot be run.</p>
                        <p>In addition, you can define that all classes not found are to be ignored. However, this is dangerous, because a class that has a dependent class will be marked as valid, even if the dependent class does not exist. However, the class can never run without the dependent class. In this case, you will receive an exception at run time.</p>
                        <p>To ignore all classes not found within <code class="codeph">HR</code> or <code class="codeph">PUBLIC</code>, specify the following resolver specification:
                        </p><pre class="oac_no_warn" dir="ltr">loadjava -resolve -resolver "((* HR) (* PUBLIC) (* -))"
</pre><p>If you later intend to load the nonexistent classes that required you to use such a resolver, then you should not use a resolver containing the minus sign (-) wildcard. Instead, include all referenced classes in the schema before resolving.</p>
                        <p>Even when a minus sign (-) wildcard is used, the super class of a class can never be nonexistent. If the super class is not found, then the class will be invalid regardless of the use of a minus sign (-) wildcard in the resolver.</p>
                        <div class="infoboxnote" id="GUID-B0AEB608-C38C-4064-9259-C404B9C8024A__GUID-1C350115-5FB7-4246-953E-893AFD2B3528">
                           <p class="notep1">Note:</p>
                           <p>An alternative mechanism for dealing with nonexistent classes is using the <code class="codeph">-gemissing</code> option of the <code class="codeph">loadjava</code> tool. This option causes the <code class="codeph">loadjava</code> tool to create and load definitions of classes that are referenced, but not defined.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13075"></a><div class="props_rev_3"><a id="GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9" name="GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9"></a><h4 id="JJDEV-GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9" class="sect4"><span class="enumeration_section">2.5.2.2 </span>Bytecode Verifier
                  </h4>
                  <div>
                     <div class="section">
                        <p>According to JVM specification, <code class="codeph">.class</code> files are subject to verification before the class they define is available in a JVM. In Oracle JVM, the verification process occurs at class resolution. 
                        </p>
                        <p>The following table describes the problems the resolver may find and the appropriate Oracle error code issued.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9__CEGFGFAC">
                        <p class="titleintable">Table 2-4 ORA Errors</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ORA Errors" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d8687e2043">Error Code</th>
                                 <th align="left" valign="bottom" width="69%" id="d8687e2046">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8687e2051" headers="d8687e2043 ">
                                    <p><code class="codeph">ORA-29545</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8687e2051 d8687e2046 ">
                                    <p>If the resolver determines that the class is malformed, then the resolver does not mark it valid. When the resolver rejects a class, it issues an <code class="codeph">ORA-29545</code> error. The <code class="codeph">loadjava</code> tool reports the error. For example, this error is thrown if the contents of a <code class="codeph">.class</code> file are not the result of a Java compilation or if the file has been corrupted.
                                    </p>
                                    <p>The <code class="codeph">ORA-29545</code> error may also show up if you used the minus sign (-) wild card expression with the resolver and the validity of some classes was not verified.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8687e2073" headers="d8687e2043 ">
                                    <p><code class="codeph">ORA-29552</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8687e2073 d8687e2046 ">
                                    <p>In some situations, the resolver allows a class to be marked valid, but will replace bytecodes in the class to throw an exception at run time. In these cases, the resolver issues an <code class="codeph">ORA-29552</code> warning that the <code class="codeph">loadjava</code> tool reports. The <code class="codeph">loadjava</code> tool issues this warning when the Java Language Specification (JLS) requires an <code class="codeph">IncompatibleClassChangeError</code> to be thrown. Oracle JVM relies on the resolver to detect these situations, supporting the proper run-time behavior that the JLS requires.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a id="d8687e2094" class="indexterm-anchor"></a>A resolver with the minus sign (<code class="codeph">-</code>) wildcard marks your class valid, regardless of whether classes referenced by your class are present. Because of inheritance and interfaces, you may want to write valid Java methods that use an instance of a class as if it were an instance of a superclass or of a specific interface. When the method being verified uses a reference to class <code class="codeph">A</code> as if it were a reference to class <code class="codeph">B</code>, the resolver must check that <code class="codeph">A</code> either extends or implements <code class="codeph">B</code>. For example, consider the following potentially valid method, whose signature implies a return of an instance of <code class="codeph">B</code>, but whose body returns an instance of <code class="codeph">A</code>:
                        </p><pre class="oac_no_warn" dir="ltr">B myMethod(A a)
{ 
  return a; 
}
</pre><p>The method is valid only if <code class="codeph">A</code> extends the class <code class="codeph">B</code> or <code class="codeph">A</code> implements the interface <code class="codeph">B</code>. If <code class="codeph">A</code> or <code class="codeph">B</code> have been resolved using the minus sign (-) wildcard, then the resolver does not know that this method is safe. In this case, the resolver replaces the bytecodes of <code class="codeph">myMethod</code> with bytecodes that throw an exception if <code class="codeph">myMethod</code> is called.
                        </p>
                        <p>A resolver without the minus sign (<code class="codeph">-)</code> wildcard ensures that the class definitions of <code class="codeph">A</code> and <code class="codeph">B</code> are found and resolved properly if they are present in the schemas they specifically identify. The only time you may consider using the alternative resolver is if you must load an existing JAR file containing classes that reference other nonsystem classes, which are not included in the JAR file.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="schema-objects-and-Oracle-JVM-utilities.html#GUID-2A76FBC2-3A4A-4620-9A83-CA01724B13DB">Schema Objects and Oracle JVM Utilities</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JJDEV13565"></a><div class="props_rev_3"><a id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438" name="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438"></a><h3 id="JJDEV-GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438" class="sect3"><span class="enumeration_section">2.5.3 </span>Logging in Oracle JVM
               </h3>
               <div>
                  <div class="section">
                     <p>Oracle JVM extends the JDK Java Logging API in the area of logging properties lookup to enhance security of logging configuration management and to support logging configurations on a user basis.</p>
                     <div class="infoboxnotealso" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__GUID-56563E43-CD7A-424C-AADF-01FCB6DDF9FA">
                        <p class="notep1">See Also:</p>
                        <p> For more information about Java Logging APIs, visit the following site:</p>
                        <p><a href="http://docs.oracle.com/javase/7/docs/" target="_blank"><code class="codeph">http://docs.oracle.com/javase/7/docs/</code></a></p>
                     </div>
                     <p>You must activate the <a id="d8687e2275" class="indexterm-anchor"></a><code class="codeph">LogManager</code> in the session to initialize the logging properties in Oracle JVM. The logging properties are initialized once per session with the <code class="codeph">LogManager</code> API that is extended with the database resident resource lookup.
                     </p>
                     <p>Oracle JVM performs the following steps to configure logging options:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__CEGDJFCG"><span>If the <code class="codeph">java.util.logging.config.class</code> property is set, then the logging behavior is the same as in standard JDK.</span></li>
                     <li class="stepexpand" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__CEGGCACF"><span>If the <code class="codeph">java.util.logging.config.class</code> property is not set, then Oracle JVM inspects the availability of the <code class="codeph">javavm/lib/logging.properties</code> resource in the current user schema.</span><div>
                           <p>If available, this resource is used as the configuration setting for the <code class="codeph">LogManager</code> and the <code class="codeph">java.util.logging.config.file</code> property is set.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__CEGBGJHC"><span>If both the above conditions do not hold true, then the <code class="codeph">java.util.logging.config.file</code> property is inspected and if specified, it is used as described in <code class="codeph">LogManager</code> API.</span></li>
                     <li class="stepexpand"><span>If none of the conditions in step 1, 2, and 3 holds true, then the <code class="codeph">javavm/lib/logging.properties</code> resource in the <code class="codeph">SYS</code> schema is used. This resource is a copy of the <code class="codeph">$(java.home)/lib/logging.properties</code> file that is loaded into the <code class="codeph">SYS</code> schema at database creation time. This means, by default, the <code class="codeph">LogManager</code> behaves as if it is configured as per the <code class="codeph">$(java.home)/javavm/lib/logging.properties</code> file. However, altering this file has no effect until the database is re-created</span></li>
                  </ol>
                  <div class="section">
                     <p>If you are not satisfied with the default settings in the <code class="codeph">javavm/lib/logging.properties</code> file, then prepare a different set of properties and load them in your schema using the <code class="codeph">loadjava</code> command. For example, if your schema is <code class="codeph">HR</code> and your current file directory is <code class="codeph">mydir</code>, then create a directory <code class="codeph">javavm/lib/</code> under <code class="codeph">mydir</code> and specify the required properties in the <code class="codeph">logging.properties</code> file under the <code class="codeph">mydir/javavm/lib/</code> directory. Then, invoke the <code class="codeph">loadjava</code> command from <code class="codeph">mydir</code> as follows:
                     </p><pre class="oac_no_warn" dir="ltr">mydir% loadjava -u HR -v -r javavm/lib/logging.properties
password:<span class="italic">&lt;password&gt;</span>
</pre><p>After invoking the <code class="codeph">loadjava</code> command, you can delete the <code class="codeph">mydir/javavm/lib/logging.properties</code> file. Any session running as <code class="codeph">HR</code> and performing activation of <code class="codeph">LogManager</code> will have the <code class="codeph">LogManager</code> configured with properties coming from this database resident resource private to <code class="codeph">HR</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__GUID-14F99A6E-DB95-47EE-9B02-1EEF43422289">
                        <p class="notep1">Note:</p>
                        <p>Oracle JVM always runs with a security manager. So, <code class="codeph">HR</code> must be granted logging permissions, regardless of the logging configuration method used. In most cases, the following call issued by a privileged user is sufficient to grant these permissions:
                        </p><pre class="oac_no_warn" dir="ltr">call dbms_java.grant_permission( 'HR',  'SYS:java.util.logging.LoggingPermission', 'control', '' );
</pre></div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13076"></a><a id="JJDEV13077"></a><a id="JJDEV02043"></a><div class="props_rev_3"><a id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63" name="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63"></a><h3 id="JJDEV-GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63" class="sect3"><span class="enumeration_section">2.5.4 </span>Overview of Loading Classes Using the loadjava Tool
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d8687e2524" class="indexterm-anchor"></a>You can use the <code class="codeph">loadjava</code> tool to create schema objects from files and load the schema objects to different schemas. For example,
                     </p><pre class="oac_no_warn" dir="ltr">loadjava -u HR -schema TEST MyClass.java
Password: <span class="italic">password</span>
</pre><div class="infoboxnote" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__GUID-720C6F10-4316-4731-AAF8-EB18F3907CC4">
                        <p class="notep1">Note:</p>
                        <p>You do <span class="italic">not</span> have to load the classes to the database as schema objects if you use the command-line interface. For example,
                        </p><pre class="oac_no_warn" dir="ltr">C:\oraclehome\bin&gt;loadjava -u HR MyClass.java
Password: <span class="italic">password</span>
</pre></div>
                     <p>You can also run the <code class="codeph">loadjava</code> tool from within SQL commands. Unlike a conventional JVM, which compiles and loads from files, Oracle JVM compiles and loads from database schema objects.
                     </p>
                     <p>The following t able describes database schema objects that correspond to the files used by a conventional JVM.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__CEGFBCFA">
                     <p class="titleintable">Table 2-5 Description of Java Files</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Description of Java Files" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d8687e2563">Java File Types</th>
                              <th align="left" valign="bottom" width="48%" id="d8687e2566">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d8687e2571" headers="d8687e2563 ">
                                 <p><a id="d8687e2573" class="indexterm-anchor"></a><a id="d8687e2575" class="indexterm-anchor"></a><code class="codeph">.java</code> source files or <code class="codeph">.sqlj</code> source files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d8687e2571 d8687e2566 ">
                                 <p>correspond to Java s<a id="d8687e2586" class="indexterm-anchor"></a>ource schema objects
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d8687e2590" headers="d8687e2563 ">
                                 <p><a id="d8687e2592" class="indexterm-anchor"></a><code class="codeph">.class</code> compiled Java files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d8687e2590 d8687e2566 ">
                                 <p>correspond to Java <a id="d8687e2600" class="indexterm-anchor"></a><a id="d8687e2604" class="indexterm-anchor"></a>class schema objects
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d8687e2608" headers="d8687e2563 ">
                                 <p><code class="codeph">.properties</code> Java resource files, <code class="codeph">.ser</code> SQLJ profile files, or data files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d8687e2608 d8687e2566 ">
                                 <p>correspond to Java <a id="d8687e2619" class="indexterm-anchor"></a>resource schema objects
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>You must load all classes or resources into the database to be used by other classes within the database. In addition, at load time, you define who can run your classes within the database.</p>
                     <p>The following table describes the activities the <code class="codeph">loadjava</code> tool performs for each type of file.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__CEGEDDGB">
                     <p class="titleintable">Table 2-6 loadjava Operations on Schema Objects</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="loadjava Operations on Schema Objects" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d8687e2640">Schema Object</th>
                              <th align="left" valign="bottom" width="69%" id="d8687e2643">loadjava Operations on Objects</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2648" headers="d8687e2640 ">
                                 <p><a id="d8687e2650" class="indexterm-anchor"></a><code class="codeph">.java</code> source files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2648 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>Creates a Java <a id="d8687e2660" class="indexterm-anchor"></a>source schema object in the definer's schema unless another schema is specified.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Loads the contents of the source file into a schema object.</p>
                                    </li>
                                    <li>
                                       <p>Creates a class schema object for all classes defined in the source file.</p>
                                    </li>
                                    <li>
                                       <p>If <code class="codeph">-resolve</code> is requested, compiles the source schema object and resolves the class and its dependencies. It then stores the compiled class into a class schema object.
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2676" headers="d8687e2640 ">
                                 <p><code class="codeph">.sqlj</code> source files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2676 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>Creates a <a id="d8687e2686" class="indexterm-anchor"></a>source schema object in the definer's schema unless another schema is specified.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Loads contents of the source file into the schema object.</p>
                                    </li>
                                    <li>
                                       <p>Creates a class schema object for all classes and resources defined in the source file.</p>
                                    </li>
                                    <li>
                                       <p>If <code class="codeph">-resolve</code> is requested, translates and compiles the source schema object and stores the compiled class into a class schema object. It then stores the profile into a <code class="codeph">.ser</code> resource schema object and customizes it.
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2705" headers="d8687e2640 ">
                                 <p><a id="d8687e2707" class="indexterm-anchor"></a><code class="codeph">.class</code> compiled Java files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2705 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>Creates a <a id="d8687e2717" class="indexterm-anchor"></a><a id="d8687e2721" class="indexterm-anchor"></a>class schema object in the definer's schema unless another schema is specified.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Loads the class file into the schema object.</p>
                                    </li>
                                    <li>
                                       <p>Resolves and verifies the class and its dependencies if <code class="codeph">-resolve</code> is specified.
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2734" headers="d8687e2640 ">
                                 <p><code class="codeph">.properties</code> Java resource files
                                 </p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2734 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>Creates a <a id="d8687e2744" class="indexterm-anchor"></a>resource schema object in the definer's schema unless another schema is specified.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Loads a resource file into a schema object.</p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2751" headers="d8687e2640 ">
                                 <p><code class="codeph">.ser</code> SQLJ profile
                                 </p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2751 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>Creates a <a id="d8687e2761" class="indexterm-anchor"></a>resource schema object in the definer's schema unless another schema is specified.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Loads the <code class="codeph">.ser</code> resource file into a schema object and customizes it.
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__GUID-0846FAAB-1703-4F90-A413-73C6B0977AEA">
                        <p class="notep1">Note:</p>
                        <p><a id="d8687e2773" class="indexterm-anchor"></a>The <code class="codeph">dropjava</code> tool performs the reverse of the <code class="codeph">loadjava</code> tool. It deletes schema objects that correspond to Java files. Always use the <code class="codeph">dropjava</code> tool to delete a Java schema object created with the <code class="codeph">loadjava</code> tool. For example,
                        </p><pre class="oac_no_warn" dir="ltr">dropjava -u HR -schema TEST MyClass.java
Password: <span class="italic">password</span>
</pre><p>Dropping with SQL data definition language (DDL) commands will not update the auxiliary data maintained by the <code class="codeph">loadjava</code> tool and the <code class="codeph">dropjava</code> tool. You can also run the <code class="codeph">dropjava</code> tool from within SQL commands.
                        </p>
                        <p><a id="d8687e2805" class="indexterm-anchor"></a>After loading the classes and resources, you can access the <code class="codeph">USER_OBJECTS</code> view in your database schema to verify whether your classes and resources have been loaded properly.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="schema-objects-and-Oracle-JVM-utilities.html#GUID-2A76FBC2-3A4A-4620-9A83-CA01724B13DB">Schema Objects and Oracle JVM Utilities</a></li>
                        <li><a href="invoking-Java-methods.html#GUID-FC2894A1-87C3-4695-968E-A3E69344B353">About Using the Command-Line Interface</a></li>
                     </ul>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-8D6C27CF-FA07-4D6F-823F-32BB6AB4FCC8" name="GUID-8D6C27CF-FA07-4D6F-823F-32BB6AB4FCC8"></a><h4 id="JJDEV-GUID-8D6C27CF-FA07-4D6F-823F-32BB6AB4FCC8" class="sect4"><span class="enumeration_section">2.5.4.1 </span>About Sharing of Metadata for User Classloaded Classes
                  </h4>
                  <div>
                     <p>Classes loaded by the built-in mechanism for loading database resident classes are known as <span class="bold">system classloaded</span>, whereas those loaded by other means are called <span class="bold">user classloaded</span>. When you load a class into the database, a representation of the class is created in memory, part of which is referred to here as the class metadata. The class metadata is the same for any session using the class and is potentially sharable. Earlier, such sharing was available only for system classloaded classes. Since Oracle Database 11<span class="italic">g</span>, you can also share class metadata of user classloaded classes, at the discretion of the system administrator.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="classpath-extensions-user-classes-metadata.html#GUID-C948182D-D9C7-45DB-9B7A-648BBCA47F6E">Classpath Extensions and User Classloaded Metadata</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4" name="GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4"></a><h4 id="JJDEV-GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4" class="sect4"><span class="enumeration_section">2.5.4.2 </span>Defining the Same Class Twice
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d8687e3024" class="indexterm-anchor"></a>You cannot have two class objects with the same name in the same schema. This rule affects you in two ways:
                        </p>
                        <div class="infoboxnote" id="GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4__GUID-972F8E4F-6276-421C-A5D1-21C945BE2187">
                           <p class="notep1">Note:</p>
                           <p>An exception to this rule is when you use the <code class="codeph">-prependjarnames</code> option for database resident JARs. If you use this option, then you can have two classes with the same class name in the same schema.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You can load either a particular Java <code class="codeph">.class</code> file or its <code class="codeph">.java</code> file, but not both.
                              </p>
                              <p>Oracle Database tracks whether you loaded a class file or a source file. If you want to update the class, then you must load the same type of file that you originally loaded. If you want to update the other type, then you must drop the first before loading the second. For example, if you loaded <code class="codeph">x.java</code> as the source for class <code class="codeph">y</code>, then to load <code class="codeph">x.class</code>, you must first drop <code class="codeph">x.java</code>.
                              </p>
                           </li>
                           <li>
                              <p>You cannot define the same class within two different schema objects in the same schema. For example, suppose <code class="codeph">x.java</code> defines class <code class="codeph">y</code> and you want to move the definition of <code class="codeph">y</code> to <code class="codeph">z.java</code>. If <code class="codeph">x.java</code> has already been loaded, then the <code class="codeph">loadjava</code> tool rejects any attempt to load <code class="codeph">z.java</code>, which also defines <code class="codeph">y</code>. Instead, do either of the following:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Drop <code class="codeph">x.java</code>, load <code class="codeph">z.java</code>, which defines <code class="codeph">y</code>, and then load the new <code class="codeph">x.java</code>, which does not define <code class="codeph">y</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Load the new <code class="codeph">x.java</code>, which does not define <code class="codeph">y</code>, and then load <code class="codeph">z.java</code>, which defines <code class="codeph">y</code>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="preparing-Java-class-methods.html#GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E">Database Resident JARs</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A5003838-A6C1-43E6-A546-03F2EFA87247" name="GUID-A5003838-A6C1-43E6-A546-03F2EFA87247"></a><h4 id="JJDEV-GUID-A5003838-A6C1-43E6-A546-03F2EFA87247" class="sect4"><span class="enumeration_section">2.5.4.3 </span>About Designating Database Privileges and JVM Permissions
                  </h4>
                  <div>
                     <div class="section">
                        <p>You must have the following SQL database privileges to load classes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CREATE PROCEDURE</code> and <code class="codeph">CREATE TABLE</code> privileges to load into your schema.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE ANY PROCEDURE</code> and <code class="codeph">CREATE ANY TABLE</code> privileges to load into another schema.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.aurora.security.JServerPermission.loadLibraryInClass.</code> <span class="italic"><code class="codeph">classname</code></span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="database-contents-Oracle-JVM-security.html#GUID-E3427117-0517-4B6D-B346-81BB36A51489">Permission for Loading Classes</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780" name="GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780"></a><h4 id="JJDEV-GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780" class="sect4"><span class="enumeration_section">2.5.4.4 </span>About Loading JAR or ZIP Files
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">loadjava</code> tool accepts <code class="codeph">.class</code>, <code class="codeph">.java</code>, <code class="codeph">.properties</code>, <code class="codeph">.sqlj</code>, <code class="codeph">.ser</code>, <code class="codeph">.jar</code>, or <code class="codeph">.zip</code> files. The JAR or ZIP files can contain source, class, and data files. When you pass a JAR or ZIP file to the <code class="codeph">loadjava</code> tool, it opens the archive and loads the members of the archive individually. There is no JAR or ZIP schema object. If the JAR or ZIP content has not changed since the last time it was loaded, then it is not reloaded. Therefore, there is little performance penalty for loading JAR or ZIP files. In fact, loading JAR or ZIP files is the simplest way to use the <code class="codeph">loadjava</code> tool.
                        </p>
                        <div class="infoboxnote" id="GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780__GUID-8A7B311F-D034-4C70-921B-0594E7752561">
                           <p class="notep1">Note:</p>
                           <p>O<a id="d8687e3378" class="indexterm-anchor"></a>racle Database does not reload a class if it has not changed since the last load. However, you can force a class to be reloaded using the <code class="codeph">-force</code> option.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E" name="GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E"></a><h4 id="JJDEV-GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E" class="sect4"><span class="enumeration_section">2.5.4.5 </span>Database Resident JARs
                  </h4>
                  <div>
                     <div class="section">
                        <p>Starting with 11<span class="italic">g</span> release 1 (11.1), when you load the contents of a JAR into the database, you have the option of creating a database object representing the JAR itself. In this way, you can retain an association between this JAR object and the class, resource, and source objects loaded from the JAR. This enables you to:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use signed JARs and JAR namespace segregation in the same way as you use them in standard JVM.</p>
                           </li>
                           <li>
                              <p>Manage the classes that you have derived from a JAR while loading it into the database as a single unit. This helps you to prevent individual redefinition of the classes loaded from the JAR. It also enables you to drop the whole set of classes loaded from the JAR, irrespective of the contents or the continued existence of the JAR on the external file system, at the time of dropping it.</p>
                           </li>
                        </ul>
                        <p>In order to load a JAR into the database, you have the following options of the <code class="codeph">loadjava</code> tool:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">-jarsasdbobjects</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">-prependjarnames</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="loadjava-tool.html#GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C">The loadjava Tool</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JJDEV13084"></a><a id="JJDEV13083"></a><div class="props_rev_3"><a id="GUID-3F57CC21-BC4C-4203-B477-695E039D5973" name="GUID-3F57CC21-BC4C-4203-B477-695E039D5973"></a><h3 id="JJDEV-GUID-3F57CC21-BC4C-4203-B477-695E039D5973" class="sect3"><span class="enumeration_section">2.5.5 </span>Overview of Granting Execute Rights
               </h3>
               <div>
                  <p><a id="d8687e3608" class="indexterm-anchor"></a>If you load all classes within your own schema and do not reference any class outside your schema, then you already have rights to run the classes. You have the privileges necessary for your objects to call other objects loaded in the same schema. That is, the ability for class <code class="codeph">A</code> to call class <code class="codeph">B</code>. Class <code class="codeph">A</code> must be given the right to call class <code class="codeph">B</code>.
                  </p>
                  <p><a id="d8687e3626" class="indexterm-anchor"></a>The classes that define a Java application are stored within Oracle Database under the SQL schema of their owner. By default, classes that reside in one user's schema cannot be run by other users, because of security concerns. You can provide other users the right to run your class in the following ways: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Using the <code class="codeph">loadjava -grant</code> option
                        </p>
                     </li>
                     <li>
                        <p>Using the following command:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant execute on myclass to HR;
</pre><p>where, <code class="codeph">myclass</code> is the name of the underlying Java class.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-3F57CC21-BC4C-4203-B477-695E039D5973__GUID-2572C53A-E3F5-414D-89DB-99CEDC94A45D">
                     <p class="notep1">Note:</p>
                     <p>Prior to Oracle Database 11<span class="italic">g</span> release 1 (11.1), granting execute right to a stored procedure meant granting execute right to both the stored procedure and the Java class referred by the stored procedure. Since Oracle Database 11<span class="italic">g</span> release, if you want to grant execute right on the underlying Java class as well, then you must grant execute right on the class explicitly. This is implemented for better security.
                     </p>
                  </div>
                  <p>The following figure illustrates the rights required to run classes.</p>
                  <div class="figure" id="GUID-3F57CC21-BC4C-4203-B477-695E039D5973__CEGFCIGG">
                     <p class="titleinfigure">Figure 2-3 Rights to Run Classes</p><img src="img/exeright.gif" alt="Description of Figure 2-3 follows" title="Description of Figure 2-3 follows" longdesc="img_text/exeright.html"><br><a href="img_text/exeright.html">Description of "Figure 2-3 Rights to Run Classes"</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="loadjava-tool.html#GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C">The loadjava Tool</a></li>
                        <li><a href="Java-application-performance.html#GUID-7AB351A8-AA78-477C-AC3F-B5AD74E79A2B">Oracle Database Java Application Performance</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13086"></a><a id="JJDEV13087"></a><a id="JJDEV13085"></a><div class="props_rev_3"><a id="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7" name="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7"></a><h3 id="JJDEV-GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7" class="sect3"><span class="enumeration_section">2.5.6 </span>Overview of Controlling the Current User
               </h3>
               <div>
                  <p>During the execution of PL/SQL code, there is always a current user. The same concept is used for the execution of Java code. Initially, the current user is the user, who creates the session that invokes the Java code. A Java method is called from SQL or PL/SQL through a corresponding wrapper. Java wrappers are special PL/SQL entities, which expose Java methods to SQL and PL/SQL as PL/SQL stored procedures or functions. Such a wrapper might change the current effective user. The wrappers that change the current effective user to the owner of the wrapper are called definer's rights wrappers. If a wrapper does not change the current effective user, then the effective user remains unchanged.</p>
                  <p>By default, Java wrappers are <a id="d8687e3774" class="indexterm-anchor"></a>definer's rights wrappers. If you want to override this, then create the wrapper using the <code class="codeph">AUTHID CURRENT_USER</code> option.
                  </p>
                  <p>At any time during the execution of Java code, a Java call stack is maintained. The stack contains frames corresponding to Java methods entered, with the innermost frame corresponding to the currently executing method. By default, Java methods execute on the stack without changing the current user, that is, with the privileges of their current effective invoker, not their definer.</p>
                  <p>You can load a Java class to the database with the <code class="codeph">loadjava -definer</code> option. Any method of a class having the definer attribute marked, becomes a definer's rights method. When such a method is entered, a special kind of frame called a definer's frame is created onto the Java stack. This frame switches the current effective user to the owner (definer) of such a class. A new user ID remains effective for all inner frames until either the definer's frame is popped off the stack or a nested definer's frame is entered.
                  </p>
                  <p>Thus, at any given time during the execution of a Java method that is called from SQL or PL/SQL through its wrapper, the effective user is one of the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The innermost definer's frame on the Java stack</p>
                     </li>
                     <li>
                        <p>Either the owner of the PL/SQL wrapper of the topmost Java method, if it is definer's rights, or the user who called the wrapper.</p>
                     </li>
                  </ul>
                  <p>Consider a company that uses a definer's rights procedure to analyze sales. To provide local sales statistics, the procedure <code class="codeph">analyze</code> must access <code class="codeph">sales</code> tables that reside at each regional site. To do this, the procedure must also reside at each regional site. This causes a maintenance problem. To solve the problem, the company installs an invoker's rights version of the procedure <code class="codeph">analyze</code> at headquarters.
                  </p>
                  <p>The following figure shows how all regional sites can use the same procedure to query their own <code class="codeph">sales</code> tables.
                  </p>
                  <div class="figure" id="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7__BABFBIBJ">
                     <p class="titleinfigure">Figure 2-4 Invoker's rights Solution</p><img src="img/invoker_rights_solution.gif" alt="Description of Figure 2-4 follows" title="Description of Figure 2-4 follows" longdesc="img_text/invoker_rights_solution.html"><br><a href="img_text/invoker_rights_solution.html">Description of "Figure 2-4 Invoker's rights Solution"</a></div>
                  <!-- class="figure" -->
                  <p>Occasionally, you may want to override the default invoker's rights behavior. Suppose headquarters wants the <code class="codeph">analyze</code> procedure to calculate sales commissions and update a central <code class="codeph">payroll</code> table. This presents a problem, because invokers of <code class="codeph">analyze</code> should not have direct access to the <code class="codeph">payroll</code> table, which stores employee salaries and other sensitive data.
                  </p>
                  <p>The following figure illustrates the solution, where the <code class="codeph">analyze</code> procedure call the definer's rights procedure, <code class="codeph">calcComm</code>, which in turn updates the <code class="codeph">payroll</code> table.
                  </p>
                  <div class="figure" id="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7__BABDDBAD">
                     <p class="titleinfigure">Figure 2-5 Indirect Access</p><img src="img/controlled_access.gif" width="328" alt="Description of Figure 2-5 follows" title="Description of Figure 2-5 follows" longdesc="img_text/controlled_access.html"><br><a href="img_text/controlled_access.html">Description of "Figure 2-5 Indirect Access"</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="writing-top-level-call-specifications.html#GUID-140C918E-A174-42BA-AC1F-87907BD0E878">Writing Top-Level Call Specifications</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13089"></a><a id="JJDEV13090"></a><a id="JJDEV13091"></a><a id="JJDEV13092"></a><a id="JJDEV13088"></a><div class="props_rev_3"><a id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1" name="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1"></a><h3 id="JJDEV-GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1" class="sect3"><span class="enumeration_section">2.5.7 </span>Overview of Checking Java Uploads
               </h3>
               <div>
                  <div class="section">
                     <p>You can query the <code class="codeph">USER_OBJECTS</code> database view to obtain information about schema objects that you own, including Java sources, classes, and resources. This enables you, for example, to verify whether sources, classes, or resources that you load are properly stored in schema objects.
                     </p>
                     <p>The following table lists the key columns in <code class="codeph">USER_OBJECTS</code> and their description.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__BABJHIGG">
                     <p class="titleintable">Table 2-7 Key USER_OBJECT Columns</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Key USER_OBJECT Columns" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d8687e3983">Name </th>
                              <th align="left" valign="bottom" width="69%" id="d8687e3986">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e3991" headers="d8687e3983 ">
                                 <p><code class="codeph">OBJECT_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e3991 d8687e3986 ">
                                 <p>Name of the object</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e3999" headers="d8687e3983 ">
                                 <p><code class="codeph">OBJECT_TYPE</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e3999 d8687e3986 ">
                                 <p>Type of the object, such as <code class="codeph">JAVA SOURCE</code>, <code class="codeph">JAVA CLASS</code>, or <code class="codeph">JAVA RESOURCE</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e4016" headers="d8687e3983 ">
                                 <p><code class="codeph">STATUS</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e4016 d8687e3986 ">
                                 <p>Status of the object. The values can be either <code class="codeph">VALID</code> or <code class="codeph">INVALID</code>. It is always <code class="codeph">VALID</code> for <code class="codeph">JAVA RESOURCE</code>.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-A1DFE3E8-2936-4F68-95B6-8436ACA7E795">Object Name and Type</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>An <code class="codeph">OBJECT_NAME</code> in <code class="codeph">USER_OBJECTS</code> is the alias. The fully qualified name is stored as an alias if it exceeds 30 characters.
                     </p>
                     <p><a id="d8687e4048" class="indexterm-anchor"></a><a id="d8687e4052" class="indexterm-anchor"></a>If the server uses an alias for a schema object, then you can use the <code class="codeph">LONGNAME()</code> function of the <code class="codeph">DBMS_JAVA</code> package to receive it from a query as a fully qualified name, without having to know the alias or the conversion rules.
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT dbms_java.longname(object_name) FROM user_objects WHERE object_type='JAVA SOURCE';
</pre><p>This statement displays the fully qualified name of the Java source schema objects. Where no alias is used, no conversion occurs.</p>
                     <div class="infoboxnote" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-9690559D-1872-414E-A30C-8AD688CB4905">
                        <p class="notep1">Note:</p>
                        <p>SQL and PL/SQL are <span class="italic">not</span> case-sensitive.
                        </p>
                     </div>
                     <p><a id="d8687e4074" class="indexterm-anchor"></a>You can use the <code class="codeph">SHORTNAME()</code> function of the <code class="codeph">DBMS_JAVA</code> package to use a fully qualified name as a query criterion, without having to know whether it was converted to an alias in the database.
                     </p><pre class="oac_no_warn" dir="ltr">SQL*Plus&gt; SELECT object_type FROM user_objects WHERE object_name=dbms_java.shortname('known_fullname');
</pre><p>This statement displays the <code class="codeph">OBJECT_TYPE</code> of the schema object with the specified fully qualified name. This presumes that the fully qualified name is representable in the database character set.
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; select * from javasnm;
SHORT LONGNAME
----------------------------------------------------------------------
/78e6d350_BinaryExceptionHandl sun/tools/java/BinaryExceptionHandler
/b6c774bb_ClassDeclaration sun/tools/java/ClassDeclaration
/af5a8ef3_JarVerifierStream1 sun/tools/jar/JarVerifierStream$1
</pre><p>This statement displays all the data stored in the <code class="codeph">javasnm</code> view.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-22A7BF64-09D7-4F8A-B864-7289134A587D">Status</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">STATUS</code> is a character string that indicates the validity of a Java schema object. A Java source schema object is <code class="codeph">VALID</code> if it compiled successfully, and a Java class schema object is <code class="codeph">VALID</code> if it was resolved successfully. A Java resource schema object is always <code class="codeph">VALID</code>, because resources are not resolved.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-F6183BC9-24B2-4B17-AA61-7E2173079F02">Example: Accessing USER_OBJECTS</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following SQL*Plus script accesses the <code class="codeph">USER_OBJECTS</code> view to display information about uploaded Java sources, classes, and resources:
                     </p><pre class="oac_no_warn" dir="ltr">COL object_name format a30
COL object_type format a15
SELECT object_name, object_type, status
       FROM user_objects
       WHERE object_type IN ('JAVA SOURCE', 'JAVA CLASS', 'JAVA RESOURCE')
       ORDER BY object_type, object_name;
</pre><p>You can optionally use wildcards in querying <code class="codeph">USER_OBJECTS</code>, as in the following example:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT object_name, object_type, status
       FROM user_objects
       WHERE object_name LIKE '%Alerter';
</pre><p>The preceding statement finds any <code class="codeph">OBJECT_NAME</code> entries that end with the characters <code class="codeph">Alerter</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="shortened-class-names.html#GUID-7A13AB37-4680-4E22-83EA-830C79E61126">Shortened Class Names</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13093"></a><div class="props_rev_3"><a id="GUID-8D343A4B-EC7A-4F65-8942-56D184250B64" name="GUID-8D343A4B-EC7A-4F65-8942-56D184250B64"></a><h3 id="JJDEV-GUID-8D343A4B-EC7A-4F65-8942-56D184250B64" class="sect3"><span class="enumeration_section">2.5.8 </span>About Publishing Java Methods Loaded in the Database
               </h3>
               <div>
                  <p>Oracle Database enables clients and SQL to call Java methods that are loaded in the database after they are published. You publish either the object itself or individual methods. If you write a Java stored procedure that you intend to call with a trigger, directly or indirectly in SQL data manipulation language (DML) or in PL/SQL, then you must publish individual methods in the class. Using a call specification, specify how to access the method. Java programs consist of many methods in many classes. However, only a few <code class="codeph">static</code> methods are typically exposed with call specifications.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="publishing-Java-classes.html#GUID-C6DB962A-CCA6-44A1-990C-3E52636A0634">Publishing Java Classes With Call Specifications</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13095"></a><a id="JJDEV13096"></a><a id="JJDEV13094"></a><div class="props_rev_3"><a id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA" name="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA"></a><h3 id="JJDEV-GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA" class="sect3"><span class="enumeration_section">2.5.9 </span>Overview of Auditing Java Classes Loaded in the Database
               </h3>
               <div>
                  <div class="section">
                     <p>In releases prior to Oracle Database 10g release 2 (10.2), Java classes in the database cannot be audited directly. However, you can audit the PL/SQL wrapper. Typically, all Java stored procedures are started from some wrappers. Therefore, all Java stored procedures can be audited, though not directly.</p>
                     <p>Since Oracle Database 10g release 2 (10.2), you can audit DDL statements for creating, altering, or dropping Java source, class, and resource schema objects, as with any other DDL statement. Oracle Database provides auditing options for auditing Java activities easily and directly. You can also audit any modification of Java sources, classes, and resources.</p>
                     <p><a id="d8687e4362" class="indexterm-anchor"></a>You can audit database activities related to Java schema objects at two different levels, statement level and object level. At the statement level you can audit all activities related to a special pattern of statements.
                     </p>
                     <p><a href="preparing-Java-class-methods.html#GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGCDDIG" title="table">Table 2-8</a> lists the statement auditing options and the corresponding SQL statements related to Java schema objects.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGCDDIG">
                     <p class="titleintable">Table 2-8 Statement Auditing Options Related to Java Schema Objects</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Statement Auditing Options Related to Java Schema Objects" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="50%" id="d8687e4383">Statement Option</th>
                              <th align="left" valign="bottom" width="50%" id="d8687e4386">SQL Statements</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4391" headers="d8687e4383 ">
                                 <p><code class="codeph">CREATE JAVA SOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4391 d8687e4386 ">
                                 <p><code class="codeph">CREATE JAVA SOURCE</code></p>
                                 <p><code class="codeph">CREATE OR REPLACE JAVA SOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4403" headers="d8687e4383 ">
                                 <p><code class="codeph">ALTER JAVA SOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4403 d8687e4386 ">
                                 <p><code class="codeph">ALTER JAVA SOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4412" headers="d8687e4383 ">
                                 <p><code class="codeph">DROP JAVA SOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4412 d8687e4386 ">
                                 <p><code class="codeph">DROP JAVA SOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4421" headers="d8687e4383 ">
                                 <p><code class="codeph">CREATE JAVA CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4421 d8687e4386 ">
                                 <p><code class="codeph">CREATE JAVA CLASS</code></p>
                                 <p><code class="codeph">CREATE OR REPLACE JAVA CLASS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4433" headers="d8687e4383 ">
                                 <p><code class="codeph">ALTER JAVA CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4433 d8687e4386 ">
                                 <p><code class="codeph">ALTER JAVA CLASS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4442" headers="d8687e4383 ">
                                 <p><code class="codeph">DROP JAVA CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4442 d8687e4386 ">
                                 <p><code class="codeph">DROP JAVA CLASS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4451" headers="d8687e4383 ">
                                 <p><code class="codeph">CREATE JAVA RESOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4451 d8687e4386 ">
                                 <p><code class="codeph">CREATE JAVA RESOURCE</code></p>
                                 <p><code class="codeph">CREATE OR REPLACE JAVA RESOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4463" headers="d8687e4383 ">
                                 <p><code class="codeph">ALTER JAVA RESOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4463 d8687e4386 ">
                                 <p><code class="codeph">ALTER JAVA RESOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4472" headers="d8687e4383 ">
                                 <p><code class="codeph">DROP JAVA RESOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4472 d8687e4386 ">
                                 <p><code class="codeph">DROP JAVA RESOURCE</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>For example, if you want to audit the <code class="codeph">ALTER JAVA SOURCE</code> DDL statement, then enter the following statement at the SQL prompt:
                     </p><pre class="oac_no_warn" dir="ltr">AUDIT ALTER JAVA SOURCE
</pre><p><a id="d8687e4489" class="indexterm-anchor"></a>Object level auditing provides finer granularity. It enables you to identify specific problems by zooming into specific objects.
                     </p>
                     <p><a href="preparing-Java-class-methods.html#GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGBGHFF" title="table">Table 2-9</a> lists the object auditing options for each Java schema object. The entry X in a cell indicates that the corresponding SQL command can be audited for that Java schema object. The entry NA indicates that the corresponding SQL command is not applicable for that Java schema object.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGBGHFF">
                     <p class="titleintable">Table 2-9 Object Auditing Options Related to Java Schema Options</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Object Auditing Options Related to Java Schema Options" summary="table" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d8687e4512">Object Option</th>
                              <th align="left" valign="bottom" width="24%" id="d8687e4515">Java Source</th>
                              <th align="left" valign="bottom" width="24%" id="d8687e4518">Java Resource</th>
                              <th align="left" valign="bottom" width="23%" id="d8687e4521">Java Class</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4526" headers="d8687e4512 ">
                                 <p><code class="codeph">ALTER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4526 d8687e4515 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4526 d8687e4518 ">
                                 <p>NA</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4526 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4540" headers="d8687e4512 ">
                                 <p><code class="codeph">EXECUTE</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4540 d8687e4515 ">
                                 <p>NA</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4540 d8687e4518 ">
                                 <p>NA</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4540 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4554" headers="d8687e4512 ">
                                 <p><code class="codeph">AUDIT</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4554 d8687e4515 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4554 d8687e4518 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4554 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4568" headers="d8687e4512 ">
                                 <p><code class="codeph">GRANT</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4568 d8687e4515 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4568 d8687e4518 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4568 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__GUID-0084ECD1-0D53-4A4E-8C05-C84C45E5F390">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../dbseg/part_6.html#DBSEG006" target="_blank"><span class="italic">Oracle Database Security Guide</span></a></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF01107" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00214.data-interface-for-persistent-LOBs.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Data Interface for Persistent LOBs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96333-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="PLSQL-semantics-for-LOBs.html" title="Previous" type="text/html">
      <link rel="next" href="reference-semantics-LOBs.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADLOB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PLSQL-semantics-for-LOBs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="reference-semantics-LOBs.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles and Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="value-semantic-LOBs.html" property="item" typeof="WebPage"><span property="name"> Value Semantics LOBs</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Data Interface for Persistent LOBs</li>
            </ol>
            <a id="GUID-4BFDD493-F3FE-451C-9B03-21669D635586" name="GUID-4BFDD493-F3FE-451C-9B03-21669D635586"></a><a id="ADLOB1300"></a>
            
            <h2 id="ADLOB-GUID-4BFDD493-F3FE-451C-9B03-21669D635586" class="sect2"><span class="enumeration_chapter">9 </span> Data Interface for Persistent LOBs
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d27394e61" class="indexterm-anchor"></a>Data interface is a generic term referring to whichever interface is in use, to query the database or to update the database.
               </p>
               <p>Topics: </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC">Overview of the Data Interface for Persistent LOBs </a></p>
                  </li>
                  <li>
                     <p><a href="data-interface-for-persistent-LOBs.html#GUID-4810EB6F-A51E-49B5-92C1-DFF47F22167F">Benefits of Using the Data Interface for Persistent LOBs </a></p>
                  </li>
                  <li>
                     <p><a href="data-interface-for-persistent-LOBs.html#GUID-F630AC8B-B5A3-4B63-BDA8-146CFF8ED8F3">Using the Data Interface for Persistent LOBs in PL/SQL</a></p>
                  </li>
                  <li>
                     <p><a href="data-interface-for-persistent-LOBs.html#GUID-FC81B19E-F282-4F46-8F81-E111D5F7CE26">The Data Interface Used for Persistent LOBs in OCI</a></p>
                  </li>
                  <li>
                     <p><a href="data-interface-for-persistent-LOBs.html#GUID-0DA4D3D4-3E2B-4E21-AB08-6308253DF339">The Data Interface Used with Persistent LOBs in Java</a></p>
                  </li>
                  <li>
                     <p><a href="data-interface-for-persistent-LOBs.html#GUID-8EC0212A-BFB6-441B-AEAE-976FDDD11EAB">The Data Interface Used with Remote LOBs</a></p>
                  </li>
               </ul>
            </div><a id="ADLOB45643"></a><a id="ADLOB45644"></a><a id="ADLOB45642"></a><div class="props_rev_3"><a id="GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC" name="GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC"></a><h3 id="ADLOB-GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC" class="sect3">Overview of the Data Interface for Persistent LOBs </h3>
               <div>
                  <p>The data interface for persistent LOBs includes a set of Java, PL/SQL, and OCI APIs that are extended to work with LOB data types. </p>
                  <p>These APIs, originally designed for use with legacy data types such as <code class="codeph">LONG</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, and <code class="codeph">VARCHAR2</code>, can also be used with the corresponding LOB data types shown in <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020364" title="This table is described in the preceding text">Table 9-1</a> and <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020324" title="This table is described in the preceding text">Table 9-2</a>. These tables show the legacy data types in the <span class="italic">bind or define type</span> column and the corresponding supported LOB data type in the <span class="italic">LOB column type</span> column. You can use the data interface for LOBs to store and manipulate character data and binary data in a LOB column just as if it were stored in the corresponding legacy data type. 
                  </p>
                  <div class="infoboxnote" id="GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__GUID-0960EE0F-D2C1-44AC-83DA-9593491DD1DC">
                     <p class="notep1">Note:</p>
                     <p>The data interface works for LOB columns and LOBs that are attributes of objects. In this chapter <span class="italic">LOB columns</span> means LOB columns and LOB attributes.
                     </p>
                     <p>You can use array bind and define interfaces to insert and select multiple rows in one round-trip.</p>
                  </div>
                  <p>While most of this discussion focuses on character data types, the same concepts apply to the full set of character and binary data types listed in <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020364" title="This table is described in the preceding text">Table 9-1</a> and <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020324" title="This table is described in the preceding text">Table 9-2</a>. <code class="codeph">CLOB</code> also means <code class="codeph">NCLOB</code> in these tables.
                  </p>
                  <div class="tblformal" id="GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020364">
                     <p class="titleintable">Table 9-1 Corresponding LONG and LOB Data Types in SQL and PL/SQL</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Corresponding LONG and LOB Data Types in SQL and PL/SQL" summary="This table is described in the preceding text" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d27394e231">Bind or Define Type</th>
                              <th align="left" valign="bottom" width="33%" id="d27394e234">LOB Column Type </th>
                              <th align="left" valign="bottom" width="33%" id="d27394e237">Used For Storing</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e242" headers="d27394e231 ">
                                 <p><code class="codeph">CHAR</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e242 d27394e234 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e242 d27394e237 ">
                                 <p>Character data</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e254" headers="d27394e231 ">
                                 <p><code class="codeph">LONG</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e254 d27394e234 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e254 d27394e237 ">
                                 <p>Character data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e266" headers="d27394e231 ">
                                 <p><code class="codeph">VARCHAR2</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e266 d27394e234 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e266 d27394e237 ">
                                 <p>Character data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e278" headers="d27394e231 ">
                                 <p><code class="codeph">LONG RAW </code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e278 d27394e234 ">
                                 <p><code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e278 d27394e237 ">
                                 <p>Binary data</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e290" headers="d27394e231 ">
                                 <p><code class="codeph">RAW</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e290 d27394e234 ">
                                 <p><code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e290 d27394e237 ">
                                 <p>Binary data </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformal" id="GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020324">
                     <p class="titleintable">Table 9-2 Corresponding LONG and LOB Data Types in OCI</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Corresponding LONG and LOB Data Types in OCI" summary="This table is described in the preceding text" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d27394e312">Bind or Define Type </th>
                              <th align="left" valign="bottom" width="33%" id="d27394e315">LOB Column Type </th>
                              <th align="left" valign="bottom" width="33%" id="d27394e318">Used For Storing </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e323" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_AFC(n)</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e323 d27394e315 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e323 d27394e318 ">
                                 <p>Character data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e335" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_CHR</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e335 d27394e315 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e335 d27394e318 ">
                                 <p>Character data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e347" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_LNG</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e347 d27394e315 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e347 d27394e318 ">
                                 <p>Character data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e359" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_VCS</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e359 d27394e315 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e359 d27394e318 ">
                                 <p>Character data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e371" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_BIN</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e371 d27394e315 ">
                                 <p><code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e371 d27394e318 ">
                                 <p>Binary data</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e383" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_LBI</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e383 d27394e315 ">
                                 <p><code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e383 d27394e318 ">
                                 <p>Binary data </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d27394e395" headers="d27394e312 ">
                                 <p><code class="codeph">SQLT_LVB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e395 d27394e315 ">
                                 <p><code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d27394e395 d27394e318 ">
                                 <p>Binary data </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ADLOB45645"></a><div class="props_rev_3"><a id="GUID-4810EB6F-A51E-49B5-92C1-DFF47F22167F" name="GUID-4810EB6F-A51E-49B5-92C1-DFF47F22167F"></a><h3 id="ADLOB-GUID-4810EB6F-A51E-49B5-92C1-DFF47F22167F" class="sect3">Benefits of Using the Data Interface for Persistent LOBs </h3>
               <div>
                  <p>Using the data interface for persistent LOBs has the following benefits: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If your application uses <code class="codeph">LONG</code> data types, then you can use the same application with LOB data types with little or no modification of your existing application required. To do so, just convert <code class="codeph">LONG</code> audiotape columns in your tables to LOB audiotape columns as discussed in <a href="migrating-columns-from-LONGs-to-LOBs.html#GUID-C6FC4583-4E71-4BDA-97CB-709EBC707773"> Migrating Columns from LONGs to LOBs</a>. 
                        </p>
                     </li>
                     <li>
                        <p>Performance is better for OCI applications that use sequential access techniques. A piecewise <code class="codeph">INSERT</code> or fetch using the data interface has comparable performance to using OCI functions like <code class="codeph">OCILobRead2()</code> and <code class="codeph">OCILobWrite2()</code>. Because the data interface allows more than 4K bytes of data to be inserted into a LOB in a single OCI call, a round-trip to the server is saved. 
                        </p>
                     </li>
                     <li>
                        <p>You can read LOB data in one <code class="codeph">OCIStmtFetch()</code> call, instead of fetching the LOB locator first and then calling <code class="codeph">OCILobRead2()</code>. This improves performance when you want to read LOB data starting at the beginning.
                        </p>
                     </li>
                     <li>
                        <p>You can use array bind and define interfaces to insert and select multiple rows with LOBs in one round trip.</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADLOB45646"></a><div class="props_rev_3"><a id="GUID-F630AC8B-B5A3-4B63-BDA8-146CFF8ED8F3" name="GUID-F630AC8B-B5A3-4B63-BDA8-146CFF8ED8F3"></a><h3 id="ADLOB-GUID-F630AC8B-B5A3-4B63-BDA8-146CFF8ED8F3" class="sect3">Using the Data Interface for Persistent LOBs in PL/SQL</h3>
               <div>
                  <p>The data interface enables you to use <code class="codeph">LONG</code> and LOB data types listed in <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020364" title="This table is described in the preceding text">Table 9-1</a> to perform the following operations in PL/SQL: 
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-09B73C9E-A41B-42C2-9FFF-A239FB23A068" name="GUID-09B73C9E-A41B-42C2-9FFF-A239FB23A068"></a><h4 id="ADLOB-GUID-09B73C9E-A41B-42C2-9FFF-A239FB23A068" class="sect4">About Using the Data Interface for Persistent LOBs in PL/SQL</h4>
                  <div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> character data stored in datatypes such as <code class="codeph">VARCHAR2</code>, <code class="codeph">CHAR</code>, or <code class="codeph">LONG</code> into a <code class="codeph">CLOB</code> column. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> binary data stored in datatypes such as <code class="codeph">RAW</code> or <code class="codeph">LONG</code> <code class="codeph">RAW</code> into a <code class="codeph">BLOB</code> column. 
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">SELECT</code> statement on <code class="codeph">CLOB</code> columns to select data into a character buffer variable such as <code class="codeph">CHAR</code>, <code class="codeph">LONG</code>, or <code class="codeph">VARCHAR2</code>. 
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">SELECT</code> statement on <code class="codeph">BLOB</code> columns to select data into a binary buffer variable such as <code class="codeph">RAW</code> and <code class="codeph">LONG</code> <code class="codeph">RAW</code>. 
                           </p>
                        </li>
                        <li>
                           <p>Make cross-type assignments (implicit type conversions) between <code class="codeph">CLOB</code> and <code class="codeph">VARCHAR2</code>, <code class="codeph">CHAR</code>, or <code class="codeph">LONG</code> variables.
                           </p>
                        </li>
                        <li>
                           <p>Make cross-type assignments (implicit type conversions) between <code class="codeph">BLOB</code> and <code class="codeph">RAW</code> or <code class="codeph">LONG</code> <code class="codeph">RAW</code> variables.
                           </p>
                        </li>
                        <li>
                           <p>Pass LOB datatypes to functions defined to accept <code class="codeph">LONG</code> datatypes or pass <code class="codeph">LONG</code> datatypes to functions defined to accept LOB datatypes. For example, you can pass a <code class="codeph">CLOB</code> instance to a function defined to accept another character type, such as <code class="codeph">VARCHAR2</code>, <code class="codeph">CHAR</code>, or <code class="codeph">LONG</code>. 
                           </p>
                        </li>
                        <li>
                           <p>Use <code class="codeph">CLOB</code>s with other PL/SQL functions and operators that accept <code class="codeph">VARCHAR2</code> arguments such as <code class="codeph">INSTR</code> and <code class="codeph">SUBSTR</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-09B73C9E-A41B-42C2-9FFF-A239FB23A068__GUID-B2A1391C-F028-4EF5-9C13-38A92A7E7713">
                              <p class="notep1">Note:</p>
                              <p>When using the data interface for LOBs with the <code class="codeph">SELECT</code> statement in PL/SQL, you cannot specify the amount you want to read. You can only specify the buffer length of your buffer. If your buffer length is smaller than the LOB data length, then the database throws an exception. 
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-09B73C9E-A41B-42C2-9FFF-A239FB23A068__GUID-A1D4A9EE-3785-4DDA-BBC7-55A2511AFDE8">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="SQL-semantics-and-LOBs.html#GUID-47B94072-7782-40DD-BFD7-7D3D8A65B502" title="Various SQL semantics are supported for LOBs."> SQL Semantics and LOBs</a> for details on LOB support in SQL statements
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="migrating-columns-from-LONGs-to-LOBs.html#GUID-97D40D64-B271-45F3-96F6-AD1D20B478A9">Some Implicit Conversions Are Not Supported for LOB Data Types</a></p>
                                 </li>
                                 <li>
                                    <p><a href="data-interface-for-persistent-LOBs.html#GUID-B49558D6-E75F-443A-ADD0-786E6D63AE60">Passing CLOBs to SQL and PL/SQL Built-In Functions</a> for the complete list of functions that accept <code class="codeph">VARCHAR2</code> arguments such as <code class="codeph">INSTR</code> and <code class="codeph">SUBSTR</code></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45647"></a><div class="props_rev_3"><a id="GUID-7F4D7C0F-8D8A-4DF0-8E4B-47F88612589F" name="GUID-7F4D7C0F-8D8A-4DF0-8E4B-47F88612589F"></a><h4 id="ADLOB-GUID-7F4D7C0F-8D8A-4DF0-8E4B-47F88612589F" class="sect4">Guidelines for Accessing LOB Columns Using the Data Interface in SQL and PL/SQL</h4>
                  <div>
                     <p>This section describes techniques you use to access LOB columns or attributes using the data interface for persistent LOBs. </p>
                     <p>Data from <code class="codeph">CLOB</code> and <code class="codeph">BLOB</code> columns or attributes can be referenced by regular SQL statements, such as <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">SELECT</code>. 
                     </p>
                     <p>There is no piecewise <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or fetch routine in PL/SQL. Therefore, the amount of data that can be accessed from a LOB column or attribute is limited by the maximum character buffer size. PL/SQL supports character buffer sizes up to 32KB - 1 (32767 bytes). For this reason, only LOBs less than 32K bytes in size can be accessed by PL/SQL applications using the data interface for persistent LOBs. 
                     </p>
                     <p>If you must access more than 32KB -1 using the data interface, then you must make OCI calls from the PL/SQL code to use the APIs for piece-wise insert and fetch. </p>
                     <p>Use the following guidelines for using the data interface to access LOB columns or attributes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INSERT</code> operations
                           </p>
                           <p>You can <code class="codeph">INSERT</code> into tables containing LOB columns or attributes using regular <code class="codeph">INSERT</code> statements in the <code class="codeph">VALUES</code> clause. The field of the LOB column can be a literal, a character datatype, a binary datatype, or a LOB locator. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">UPDATE</code> operations
                           </p>
                           <p>LOB columns or attributes can be updated as a whole by <code class="codeph">UPDATE</code>... <code class="codeph">SET</code> statements. In the <code class="codeph">SET</code> clause, the new value can be a literal, a character datatype, a binary datatype, or a LOB locator. 
                           </p>
                        </li>
                        <li>
                           <p>4000 byte limit on hexadecimal to raw and raw to hexadecimal conversions </p>
                           <p>The database does not do implicit hexadecimal to <code class="codeph">RAW</code> or <code class="codeph">RAW</code> to hexadecimal conversions on data that is more than 4000 bytes in size. You cannot bind a buffer of character data to a binary datatype column, and you cannot bind a buffer of binary data to a character datatype column if the buffer is over 4000 bytes in size. Attempting to do so results in your column data being truncated at 4000 bytes.
                           </p>
                           <p>For example, you cannot bind a <code class="codeph">VARCHAR2</code> buffer to a <code class="codeph">LONG</code> <code class="codeph">RAW</code> or a <code class="codeph">BLOB</code> column if the buffer is more than 4000 bytes in size. Similarly, you cannot bind a <code class="codeph">RAW</code> buffer to a <code class="codeph">LONG</code> or a <code class="codeph">CLOB</code> column if the buffer is more than 4000 bytes in size.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SELECT</code> operations
                           </p>
                           <p>LOB columns or attributes can be selected into character or binary buffers in PL/SQL. If the LOB column or attribute is longer than the buffer size, then an exception is raised without filling the buffer with any data. LOB columns or attributes can also be selected into LOB locators.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45648"></a><div class="props_rev_3"><a id="GUID-6928AA5E-3128-4710-9A7E-DBFF36D43C30" name="GUID-6928AA5E-3128-4710-9A7E-DBFF36D43C30"></a><h4 id="ADLOB-GUID-6928AA5E-3128-4710-9A7E-DBFF36D43C30" class="sect4">Implicit Assignment and Parameter Passing</h4>
                  <div>
                     <p><a id="d27394e1055" class="indexterm-anchor"></a>Implicit assignment and parameter passing are supported for LOB columns.
                     </p>
                     <p>For the data types listed in <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020364" title="This table is described in the preceding text">Table 9-1</a> and <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020324" title="This table is described in the preceding text">Table 9-2</a>, you can pass or assign: any character type to any other character type, or any binary type to any other binary type using the data interface for persistent LOBs. 
                     </p>
                     <p>Implicit assignment works for variables declared explicitly and for variables declared by referencing an existing column type using the <code class="codeph">%TYPE</code> attribute as show in the following example. This example assumes that column <code class="codeph">long_col</code> in table <code class="codeph">t</code> has been migrated from a <code class="codeph">LONG</code> to a <code class="codeph">CLOB</code> column. 
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t (long_col LONG); -- Alter this table to change LONG column to LOB
DECLARE
   a VARCHAR2(100);
   b t.long_col%type; -- This variable changes from LONG to CLOB
BEGIN
   SELECT * INTO b FROM t;
   a := b;  -- This changes from "VARCHAR2 := LONG to VARCHAR2 := CLOB
   b := a;  -- This changes from "LONG := VARCHAR2 to CLOB := VARCHAR2 
END;
</pre><p>Implicit parameter passing is allowed between functions and procedures. For example, you can pass a <code class="codeph">CLOB</code> to a function or procedure where the formal parameter is defined as a <code class="codeph">VARCHAR2</code>. 
                     </p>
                     <div class="infoboxnote" id="GUID-6928AA5E-3128-4710-9A7E-DBFF36D43C30__GUID-15CEBD8A-E573-4DF7-B10C-2AA19CCDE46D">
                        <p class="notep1">Note:</p>
                        <p>The assigning a <code class="codeph">VARCHAR2</code> buffer to a LOB variable is somewhat less efficient than assigning a <code class="codeph">VARCHAR2</code> to a <code class="codeph">LONG</code> variable because the former involves creating a temporary LOB. Therefore, PL/SQL users experience a slight deterioration in the performance of their applications. 
                        </p>
                     </div>
                  </div>
               </div><a id="ADLOB45649"></a><div class="props_rev_3"><a id="GUID-B49558D6-E75F-443A-ADD0-786E6D63AE60" name="GUID-B49558D6-E75F-443A-ADD0-786E6D63AE60"></a><h4 id="ADLOB-GUID-B49558D6-E75F-443A-ADD0-786E6D63AE60" class="sect4">Passing CLOBs to SQL and PL/SQL Built-In Functions</h4>
                  <div>
                     <p>Implicit parameter passing is also supported for built-in PL/SQL functions that accept character data. For example, <code class="codeph">INSTR</code> can accept a <code class="codeph">CLOB</code> and other character data. 
                     </p>
                     <p>Any SQL or PL/SQL built-in function that accepts a <code class="codeph">VARCHAR2</code> can accept a <code class="codeph">CLOB</code> as an argument. Similarly, a <code class="codeph">VARCHAR2</code> variable can be passed to any <code class="codeph">DBMS_LOB</code> API for any parameter that takes a LOB locator. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-B49558D6-E75F-443A-ADD0-786E6D63AE60__GUID-DAE4EAA9-B69B-4075-AEF0-774942D3A36B">
                        <p class="notep1">See Also:</p>
                        <p><a href="SQL-semantics-and-LOBs.html#GUID-47B94072-7782-40DD-BFD7-7D3D8A65B502" title="Various SQL semantics are supported for LOBs."> SQL Semantics and LOBs</a></p>
                     </div>
                  </div>
               </div><a id="ADLOB45650"></a><div class="props_rev_3"><a id="GUID-A2D03293-C089-43EF-87E5-DFF17D0BDC50" name="GUID-A2D03293-C089-43EF-87E5-DFF17D0BDC50"></a><h4 id="ADLOB-GUID-A2D03293-C089-43EF-87E5-DFF17D0BDC50" class="sect4">Explicit Conversion Functions</h4>
                  <div>
                     <p>In PL/SQL, these explicit conversion functions convert other data types to <code class="codeph">CLOB</code> and <code class="codeph">BLOB</code> datatypes as follows: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">TO_CLOB()</code> converts <code class="codeph">LONG</code>, <code class="codeph">VARCHAR2</code>, and <code class="codeph">CHAR</code> to <code class="codeph">CLOB</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">TO_BLOB()</code> converts <code class="codeph">LONG RAW</code> and <code class="codeph">RAW</code> to <code class="codeph">BLOB</code></p>
                        </li>
                     </ul>
                     <p>Also note that the conversion function <code class="codeph">TO_CHAR()</code> can convert a <code class="codeph">CLOB</code> to a <code class="codeph">CHAR</code> type. 
                     </p>
                  </div>
               </div><a id="ADLOB45651"></a><div class="props_rev_3"><a id="GUID-FB5CE71B-CCCF-4CB3-B82C-9925D633DEE2" name="GUID-FB5CE71B-CCCF-4CB3-B82C-9925D633DEE2"></a><h4 id="ADLOB-GUID-FB5CE71B-CCCF-4CB3-B82C-9925D633DEE2" class="sect4">Calling PL/SQL and C Procedures from SQL</h4>
                  <div>
                     <p>When a PL/SQL or C procedure is called from SQL, buffers with more than 4000 bytes of data are not allowed. </p>
                  </div>
               </div><a id="ADLOB45652"></a><div class="props_rev_3"><a id="GUID-1D453E6D-BDB0-4A6A-9A5C-E82897C24760" name="GUID-1D453E6D-BDB0-4A6A-9A5C-E82897C24760"></a><h4 id="ADLOB-GUID-1D453E6D-BDB0-4A6A-9A5C-E82897C24760" class="sect4">Calling PL/SQL and C Procedures from PL/SQL</h4>
                  <div>
                     <div class="section">
                        <p>You can call a PL/SQL or C procedure from PL/SQL. You can pass a <code class="codeph">CLOB</code> as an actual parameter where <code class="codeph">CHR</code> is the formal parameter, or vice versa. The same holds for <code class="codeph">BLOB</code>s and <code class="codeph">RAW</code>s. 
                        </p>
                        <p>One example of when these cases can arise is when either the formal or the actual parameter is an anchored type, that is, the variable is declared using the <span class="italic"><code class="codeph">table_name.column_name</code></span><code class="codeph">%type</code> syntax.
                        </p>
                        <p>PL/SQL procedures or functions can accept a <code class="codeph">CLOB</code> or a <code class="codeph">VARCHAR2</code> as a formal parameter. For example the PL/SQL procedure could be one of the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When the formal parameter is a <code class="codeph">CLOB</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE get_lob(table_name IN VARCHAR2, lob INOUT
CLOB) AS
   ...
BEGIN
  ...
END;
/
</pre></li>
                           <li>
                              <p>When the formal parameter is a <code class="codeph">VARCHAR2</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE get_lob(table_name IN VARCHAR2, lob INOUT
VARCHAR2) AS
   ...
BEGIN
  ...
END;
/</pre></li>
                        </ul>
                        <p>The calling function could be of any of the following types:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When the actual parameter is a CHR:</p><pre class="oac_no_warn" dir="ltr">create procedure ...
declare 
c VARCHAR2[200];
BEGIN
  get_lob('table_name', c);
END;
 </pre></li>
                           <li>
                              <p>When the actual parameter is a <code class="codeph">CLOB</code>:
                              </p><pre class="oac_no_warn" dir="ltr">create procedure ...
declare 
c CLOB; 
BEGIN
  get_lob('table_name', c);
END;
</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45653"></a><div class="props_rev_3"><a id="GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7" name="GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7"></a><h4 id="ADLOB-GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7" class="sect4">Binds of All Sizes in INSERT and UPDATE Operations</h4>
                  <div>
                     <p>Binds of all sizes are supported for <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations on LOB columns. Multiple binds of any size are allowed in a single <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> statement. 
                     </p>
                     <div class="infoboxnote" id="GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7__GUID-E423B9EE-938F-4BB1-B79C-DEAFDE3F09C0">
                        <p class="notep1">Note:</p>
                        <p>When you create a table, the length of the default value you specify for any LOB column is restricted to 4000 bytes. </p>
                     </div>
                  </div>
               </div><a id="ADLOB45654"></a><div class="props_rev_3"><a id="GUID-66B9E883-6045-4B54-A741-FAFBB0D0DF0D" name="GUID-66B9E883-6045-4B54-A741-FAFBB0D0DF0D"></a><h4 id="ADLOB-GUID-66B9E883-6045-4B54-A741-FAFBB0D0DF0D" class="sect4">4000 Byte Limit on Results of a SQL Operator</h4>
                  <div>
                     <p>If you bind more than 4000 bytes of data to a <code class="codeph">BLOB</code> or a <code class="codeph">CLOB</code>, and the data consists of a SQL operator, then Oracle Database limits the size of the result to at most 4000 bytes. 
                     </p>
                     <p>The following statement inserts only 4000 bytes because the result of <code class="codeph">LPAD</code> is limited to 4000 bytes: 
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO print_media (ad_sourcetext) VALUES (lpad('a', 5000, 'a'));
</pre><p>The following statement inserts only 2000 bytes because the result of <code class="codeph">LPAD</code> is limited to 4000 bytes, and the implicit hexadecimal to raw conversion converts it to 2000 bytes of <code class="codeph">RAW</code> data:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO print_media (ad_photo) VALUES (lpad('a', 5000, 'a'));  </pre></div>
               </div><a id="ADLOB45655"></a><div class="props_rev_3"><a id="GUID-D0C584EC-CA94-4166-99ED-F630EB655A76" name="GUID-D0C584EC-CA94-4166-99ED-F630EB655A76"></a><h4 id="ADLOB-GUID-D0C584EC-CA94-4166-99ED-F630EB655A76" class="sect4">Example of 4000 Byte Result Limit of a SQL Operator</h4>
                  <div>
                     <p>This example illustrates how the result for SQL operators is limited to 4000 bytes. </p><pre class="oac_no_warn" dir="ltr">/* The following command inserts only 4000 bytes because the result of
 * LPAD is limited to 4000 bytes */
INSERT INTO print_media(product_id, ad_id, ad_sourcetext)
  VALUES (2004, 5, lpad('a', 5000, 'a'));
SELECT LENGTH(ad_sourcetext) FROM print_media 
  WHERE product_id=2004 AND ad_id=5;
ROLLBACK;

/* The following command inserts only 2000 bytes because the result of
 * LPAD is limited to 4000 bytes, and the implicit hex to raw conversion
 * converts it to 2000 bytes of RAW data. */
INSERT INTO print_media(product_id, ad_id, ad_composite)
  VALUES (2004, 5, lpad('a', 5000, 'a'));
SELECT LENGTH(ad_composite) from print_media 
  WHERE product_id=2004 AND ad_id=5;
ROLLBAACK;
</pre></div>
               </div><a id="ADLOB45656"></a><div class="props_rev_3"><a id="GUID-DF8BA907-9B89-440B-A93B-E3D9027CBA01" name="GUID-DF8BA907-9B89-440B-A93B-E3D9027CBA01"></a><h4 id="ADLOB-GUID-DF8BA907-9B89-440B-A93B-E3D9027CBA01" class="sect4">Restrictions on Binds of More Than 4000 Bytes </h4>
                  <div>
                     <p>There are restrictions for binds of more than 4000 bytes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If a table has both <code class="codeph">LONG</code> and LOB columns, then you can bind more than 4000 bytes of data to either the <code class="codeph">LONG</code> or LOB columns, but not both in the same statement. 
                           </p>
                        </li>
                        <li>
                           <p> In an <code class="codeph">INSERT</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> operation, binding of any length data to LOB columns is not allowed. 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB1306"></a><div class="props_rev_3"><a id="GUID-6011EE96-FE71-46C1-9914-70412A98C2E2" name="GUID-6011EE96-FE71-46C1-9914-70412A98C2E2"></a><h4 id="ADLOB-GUID-6011EE96-FE71-46C1-9914-70412A98C2E2" class="sect4">Parallel DML (PDML) Support for LOBs</h4>
                  <div>
                     <p>Oracle supports parallel execution of most of the following DML operations when performed on partitioned tables with SecureFiles LOBs or BasicFiles LOBs, and non-partitioned tables with SecureFiles LOBs only:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INSERT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT AS SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE TABLE AS SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DELETE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">UPDATE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">MERGE</code> (conditional <code class="codeph">UPDATE</code> and <code class="codeph">INSERT</code>) 
                           </p>
                        </li>
                        <li>
                           <p>Multi-table <code class="codeph">INSERT</code></p>
                        </li>
                        <li>
                           <p>SQL Loader</p>
                        </li>
                        <li>
                           <p>Import/Export</p>
                        </li>
                     </ul>
                     <p>Starting with release 12<span class="italic">c</span>, enhanced support for parallel DML includes the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>LOB columns stored as SecureFiles LOBs in non-partitioned tables. (Previous releases already included partitioned tables)</p>
                        </li>
                        <li>
                           <p>Direct load support for SecureFiles LOB columns that have context index defined on them. </p>
                        </li>
                     </ul>
                     <p><span class="bold">Restrictions</span></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Parallel insert direct load (PIDL) is disabled if a table also has a BasicFiles LOB column, in addition to a SecureFiles LOB column. </p>
                        </li>
                        <li>
                           <p>Some domain index implementations may limit load distribution and degrade performance due to their design.</p>
                        </li>
                        <li>
                           <p>Parallelism must be specified only for top-level non-partitioned tables.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-6011EE96-FE71-46C1-9914-70412A98C2E2__GUID-A4CF8295-988F-40E7-BBB7-446F86957C39">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/managing-processes.html#ADMIN11186" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> section "Managing Processes for Parallel SQL Execution"
                        </p>
                     </div>
                  </div>
               </div><a id="ADLOB45657"></a><div class="props_rev_3"><a id="GUID-C1D59473-DA5D-42FC-900F-27C1D02DCF2D" name="GUID-C1D59473-DA5D-42FC-900F-27C1D02DCF2D"></a><h4 id="ADLOB-GUID-C1D59473-DA5D-42FC-900F-27C1D02DCF2D" class="sect4">Example: PL/SQL - Using Binds of More Than 4000 Bytes in INSERT and UPDATE</h4>
                  <div>
                     <div class="section">
                        <p>This example demonstrates using binds larger than 4000 bytes in <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  bigtext VARCHAR2(32767);
  smalltext VARCHAR2(2000);
  bigraw RAW (32767);
BEGIN
  bigtext := LPAD('a', 32767, 'a');
  smalltext := LPAD('a', 2000, 'a');
  bigraw := utl_raw.cast_to_raw (bigtext);

  /* Multiple long binds for LOB columns are allowed for INSERT: */
  INSERT INTO print_media(product_id, ad_id, ad_sourcetext, ad_composite)
    VALUES (2004, 1, bigtext, bigraw);

  /* Single long bind for LOB columns is allowed for INSERT: */
  INSERT INTO print_media (product_id, ad_id, ad_sourcetext)
    VALUES (2005, 2, smalltext);  

  bigtext := LPAD('b', 32767, 'b');
  smalltext := LPAD('b', 20, 'a');
  bigraw := utl_raw.cast_to_raw (bigtext);

  /* Multiple long binds for LOB columns are allowed for UPDATE: */
  UPDATE print_media SET ad_sourcetext = bigtext, ad_composite = bigraw,
    ad_finaltext = smalltext;

  /* Single long bind for LOB columns is allowed for UPDATE: */
  UPDATE print_media SET ad_sourcetext = smalltext, ad_finaltext = bigtext;

  /* The following is NOT allowed because we are trying to insert more than
     4000 bytes of data in a LONG and a LOB column: */
  INSERT INTO print_media(product_id, ad_id, ad_sourcetext, press_release)
    VALUES (2030, 3, bigtext, bigtext);
  
  /* Insert of data into LOB attribute is allowed */
  INSERT INTO print_media(product_id, ad_id, ad_header)
     VALUES (2049, 4, adheader_typ(null, null, null, bigraw));

  /* The following is not allowed because we try to perform INSERT AS
     SELECT data INTO LOB */
  INSERT INTO print_media(product_id, ad_id, ad_sourcetext)
    SELECT 2056, 5, bigtext FROM dual;

END;
/
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45658"></a><div class="props_rev_3"><a id="GUID-F808592E-C7AA-44C7-8178-8359F21C6814" name="GUID-F808592E-C7AA-44C7-8178-8359F21C6814"></a><h4 id="ADLOB-GUID-F808592E-C7AA-44C7-8178-8359F21C6814" class="sect4">Using the Data Interface for LOBs with INSERT, UPDATE, and SELECT Operations</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> statements on LOBs are used in the same way as on <code class="codeph">LONG</code>s. For example:
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ad_buffer VARCHAR2(100);
BEGIN
  INSERT INTO print_media(product_id, ad_id, ad_sourcetext)
    VALUES(2004, 5, 'Source for advertisement 1');
  UPDATE print_media SET ad_sourcetext= 'Source for advertisement 2'
    WHERE product_id=2004 AND ad_id=5;
  /* This retrieves the LOB column if it is up to 100 bytes, otherwise it
   * raises an exception */
  SELECT ad_sourcetext INTO ad_buffer FROM print_media 
    WHERE product_id=2004 AND ad_id=5;
END;
/
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45659"></a><div class="props_rev_3"><a id="GUID-792A55FF-E311-4AB9-A37E-E9BF79CE6A9B" name="GUID-792A55FF-E311-4AB9-A37E-E9BF79CE6A9B"></a><h4 id="ADLOB-GUID-792A55FF-E311-4AB9-A37E-E9BF79CE6A9B" class="sect4">Using the Data Interface for LOBs in Assignments and Parameter Passing </h4>
                  <div>
                     <div class="section">
                        <p>The data interface for LOBs enables implicit assignment and parameter passing as shown in the following example: </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t (clob_col CLOB, blob_col BLOB);
INSERT INTO t VALUES('abcdefg', 'aaaaaa');

DECLARE
  var_buf VARCHAR2(100);
  clob_buf CLOB;
  raw_buf RAW(100);
  blob_buf BLOB;
BEGIN
  SELECT * INTO clob_buf, blob_buf FROM t;
  var_buf := clob_buf;
  clob_buf:= var_buf;
  raw_buf := blob_buf;
  blob_buf := raw_buf;
END;
/

CREATE OR REPLACE PROCEDURE FOO ( a IN OUT CLOB) IS
BEGIN
  -- Any procedure body
  a := 'abc';
END;
/

CREATE OR REPLACE PROCEDURE BAR (b IN OUT VARCHAR2) IS
BEGIN
  -- Any procedure body
  b := 'xyz';
END;
/

DECLARE
  a VARCHAR2(100) := '1234567';
  b CLOB;
BEGIN
  FOO(a);
  SELECT clob_col INTO b FROM t;
  BAR(b);
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45660"></a><div class="props_rev_3"><a id="GUID-69B6EC1F-1B07-4F86-805D-EB98C9248B2C" name="GUID-69B6EC1F-1B07-4F86-805D-EB98C9248B2C"></a><h4 id="ADLOB-GUID-69B6EC1F-1B07-4F86-805D-EB98C9248B2C" class="sect4">Using the Data Interface for LOBs with PL/SQL Built-In Functions</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates the use of <code class="codeph">CLOB</code>s in PL/SQL built-in functions, using the data interface for LOBs:
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  my_ad CLOB;
  revised_ad CLOB;
  myGist VARCHAR2(100):= 'This is my gist.';
  revisedGist VARCHAR2(100);
BEGIN
  INSERT INTO print_media (product_id, ad_id, ad_sourcetext)
    VALUES (2004, 5, 'Source for advertisement 1');  

  -- select a CLOB column into a CLOB variable
  SELECT ad_sourcetext INTO my_ad FROM print_media 
    WHERE product_id=2004 AND ad_id=5;

  -- perform VARCHAR2 operations on a CLOB variable
  revised_ad := UPPER(SUBSTR(my_ad, 1, 20));
 
  -- revised_ad is a temporary LOB
  -- Concat a VARCHAR2 at the end of a CLOB
  revised_ad := revised_ad || myGist;

  -- The following statement raises an error if my_ad is
  -- longer than 100 bytes
  myGist := my_ad;
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45661"></a><div class="props_rev_3"><a id="GUID-FC81B19E-F282-4F46-8F81-E111D5F7CE26" name="GUID-FC81B19E-F282-4F46-8F81-E111D5F7CE26"></a><h3 id="ADLOB-GUID-FC81B19E-F282-4F46-8F81-E111D5F7CE26" class="sect3">The Data Interface Used for Persistent LOBs in OCI</h3>
               <div>
                  <p>This section discusses OCI functions included in the data interface for persistent LOBs. These OCI functions work for LOB datatypes exactly the same way as they do for <code class="codeph">LONG</code> datatypes. Using these functions, you can perform <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, fetch, bind, and define operations in OCI on LOBs using the same techniques you would use on other datatypes that store character or binary data. 
                  </p>
                  <div class="infoboxnote" id="GUID-FC81B19E-F282-4F46-8F81-E111D5F7CE26__GUID-72B9F551-C82D-46E2-9383-5ABE7FC4AA7A">
                     <p class="notep1">Note:</p>
                     <p>You can use array bind and define interfaces to insert and select multiple rows with LOBs in one round trip.</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-FC81B19E-F282-4F46-8F81-E111D5F7CE26__GUID-F4746FFA-C968-4645-BAF6-D96A31C2B22E">
                     <p class="notep1">See Also:</p>
                     <p><a href="../lnoci/binding-and-defining-in-oci.html#LNOCI059" target="_blank"><span class="italic"> Oracle Call Interface Programmer's Guide</span></a><span class="italic">,</span> section "Runtime Data Allocation and Piecewise Operations in OCI"
                     </p>
                  </div>
               </div><a id="ADLOB45662"></a><div class="props_rev_3"><a id="GUID-440FBDD9-016D-482E-B4E2-D94753709D9B" name="GUID-440FBDD9-016D-482E-B4E2-D94753709D9B"></a><h4 id="ADLOB-GUID-440FBDD9-016D-482E-B4E2-D94753709D9B" class="sect4">LOB Data Types Bound in OCI</h4>
                  <div>
                     <p>You can bind LOB datatypes in the following operations: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Regular, piecewise, and callback binds for <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations
                           </p>
                        </li>
                        <li>
                           <p>Array binds for <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations 
                           </p>
                        </li>
                        <li>
                           <p>Parameter passing across PL/SQL and OCI boundaries</p>
                        </li>
                     </ul>
                     <p>Piecewise operations can be performed by polling or by providing a callback. To support these operations, the following OCI functions accept the <code class="codeph">LONG</code> and LOB data types listed in <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020324" title="This table is described in the preceding text">Table 9-2</a>. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">OCIBindByName()</code> and <code class="codeph">OCIBindByPos()</code> 
                           </p>
                           <p>These functions create an association between a program variable and a placeholder in the SQL statement or a PL/SQL block for <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIBindDynamic()</code></p>
                           <p>You use this call to register callbacks for dynamic data allocation for <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIStmtGetPieceInfo()</code> and <code class="codeph">OCIStmtSetPieceInfo()</code> 
                           </p>
                           <p>These calls are used to get or set piece information for piecewise operations.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45663"></a><div class="props_rev_3"><a id="GUID-1D08A343-F384-4C17-8468-0B50AB4869A9" name="GUID-1D08A343-F384-4C17-8468-0B50AB4869A9"></a><h4 id="ADLOB-GUID-1D08A343-F384-4C17-8468-0B50AB4869A9" class="sect4">LOB Data Types Defined in OCI</h4>
                  <div>
                     <p>The data interface for persistent LOBs allows the following OCI functions to accept the LONG and LOB data types listed in <a href="data-interface-for-persistent-LOBs.html#GUID-E6A304F3-8A56-44EA-8ADE-1E785BE0E7AC__g1020324" title="This table is described in the preceding text">Table 9-2</a>. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">OCIDefineByPos()</code> 
                           </p>
                           <p>This call associates an item in a <code class="codeph">SELECT</code> list with the type and output data buffer. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIDefineDynamic()</code></p>
                           <p>This call registers user callbacks for <code class="codeph">SELECT</code> operations if the <code class="codeph">OCI_DYNAMIC_FETCH</code> mode was selected in <code class="codeph">OCIDefineByPos()</code> function call. 
                           </p>
                        </li>
                     </ul>
                     <p>When you use these functions with LOB types, the LOB data, and not the locator, is selected into your buffer. Note that in OCI, you cannot specify the amount you want to read using the data interface for LOBs. You can only specify the buffer length of your buffer. The database only reads whatever amount fits into your buffer and the data is truncated. </p>
                  </div>
               </div><a id="ADLOB45664"></a><div class="props_rev_3"><a id="GUID-E203AC55-C089-4A29-93EE-648BF26EE9B1" name="GUID-E203AC55-C089-4A29-93EE-648BF26EE9B1"></a><h4 id="ADLOB-GUID-E203AC55-C089-4A29-93EE-648BF26EE9B1" class="sect4">Multibyte Character Sets Used in OCI with the Data Interface for LOBs</h4>
                  <div>
                     <p>When the client character set is in a multibyte format, functions included in the data interface operate the same way with LOB datatypes as they do for LONG datatypes as follows: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For a <span class="italic">piecewise</span> fetch in a multibyte character set, a multibyte character could be cut in the middle, with some bytes at the end of one buffer and remaining bytes in the next buffer. 
                           </p>
                        </li>
                        <li>
                           <p>For a <span class="italic">regular</span> fetch, if the buffer cannot hold all bytes of the last character, then Oracle returns as many bytes as fit into the buffer, hence returning partial characters.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45665"></a><div class="props_rev_3"><a id="GUID-DAC248A9-BB2A-4FA5-A190-00B16DA0999E" name="GUID-DAC248A9-BB2A-4FA5-A190-00B16DA0999E"></a><h4 id="ADLOB-GUID-DAC248A9-BB2A-4FA5-A190-00B16DA0999E" class="sect4">OCI Functions Used to Perform INSERT or UPDATE on LOB Columns</h4>
                  <div>
                     <p>This section discusses the various techniques you can use to perform <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operations on LOB columns or attributes using the data interface. The operations described in this section assume that you have initialized the OCI environment and allocated all necessary handles. 
                     </p>
                  </div><a id="ADLOB45666"></a><div class="props_rev_3"><a id="GUID-37EC2BA1-4AF4-4214-8BE4-6972FE5D1E24" name="GUID-37EC2BA1-4AF4-4214-8BE4-6972FE5D1E24"></a><h5 id="ADLOB-GUID-37EC2BA1-4AF4-4214-8BE4-6972FE5D1E24" class="sect5">Performing Simple INSERTs or UPDATEs in One Piece</h5>
                     <div>
                        <div class="section">
                           <p>To perform simple <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operations in one piece using the data interface for persistent LOBs, perform the following steps:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Call <code class="codeph">OCIStmtPrepare()</code> to prepare the statement in <code class="codeph">OCI_DEFAULT</code> mode.</span></li>
                           <li><span>Call <code class="codeph">OCIBindByName()</code> or <code class="codeph">OCIBindbyPos()</code> in <code class="codeph">OCI_DEFAULT</code> mode to bind a placeholder for LOB as character data or binary data. </span></li>
                           <li><span>Call <code class="codeph">OCIStmtExecute()</code> to do the actual <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operation. </span></li>
                        </ol>
                     </div>
                  </div><a id="ADLOB45667"></a><div class="props_rev_3"><a id="GUID-E86276C6-CBAE-4BA1-ADCF-C0A6D6B6D311" name="GUID-E86276C6-CBAE-4BA1-ADCF-C0A6D6B6D311"></a><h5 id="ADLOB-GUID-E86276C6-CBAE-4BA1-ADCF-C0A6D6B6D311" class="sect5">Using Piecewise INSERTs and UPDATEs with Polling</h5>
                     <div>
                        <div class="section">
                           <p>To perform piecewise <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operations with polling using the data interface for persistent LOBs, do the following steps:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIStmtPrepare()</code> to prepare the statement in <code class="codeph">OCI_DEFAULT</code> mode.</span></li>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIBindByName()</code> or <code class="codeph">OCIBindbyPos()</code> in <code class="codeph">OCI_DATA_AT_EXEC</code> mode to bind a LOB as character data or binary data.</span></li>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIStmtExecute()</code> in default mode. Do each of the following in a loop while the value returned from <code class="codeph">OCIStmtExecute()</code> is <code class="codeph">OCI_NEED_DATA</code>. Terminate your loop when the value returned from <code class="codeph">OCIStmtExecute()</code> is <code class="codeph">OCI_SUCCESS</code>. </span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Call <code class="codeph">OCIStmtGetPieceInfo()</code> to retrieve information about the piece to be inserted. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Call <code class="codeph">OCIStmtSetPieceInfo()</code> to set information about piece to be inserted. 
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADLOB45668"></a><div class="props_rev_3"><a id="GUID-FF8C8866-7C10-468E-93B2-94AC2F18A327" name="GUID-FF8C8866-7C10-468E-93B2-94AC2F18A327"></a><h5 id="ADLOB-GUID-FF8C8866-7C10-468E-93B2-94AC2F18A327" class="sect5">Performing Piecewise INSERTs and UPDATEs with Callback</h5>
                     <div>
                        <div class="section">
                           <p>To perform piecewise <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operations with callback using the data interface for persistent LOBs, do the following steps: 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Call <code class="codeph">OCIStmtPrepare()</code> to prepare the statement in <code class="codeph">OCI_DEFAULT</code> mode.</span></li>
                           <li><span>Call <code class="codeph">OCIBindByName()</code> or <code class="codeph">OCIBindbyPos()</code> in <code class="codeph">OCI_DATA_AT_EXEC</code> mode to bind a placeholder for the LOB column as character data or binary data. </span></li>
                           <li><span>Call <code class="codeph">OCIBindDynamic()</code> to specify the callback.</span></li>
                           <li><span>Call <code class="codeph">OCIStmtExecute()</code> in default mode.</span></li>
                        </ol>
                     </div>
                  </div><a id="ADLOB45669"></a><div class="props_rev_3"><a id="GUID-886FD92D-CB99-4221-854B-04BFF06FF6CB" name="GUID-886FD92D-CB99-4221-854B-04BFF06FF6CB"></a><h5 id="ADLOB-GUID-886FD92D-CB99-4221-854B-04BFF06FF6CB" class="sect5">Array INSERT and UPDATE Operations</h5>
                     <div>
                        <div class="section">
                           <p>To perform array <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operations using the data interface for persistent LOBs, use any of the techniques discussed in this section in conjunction with <code class="codeph">OCIBindArrayOfStruct()</code>, or by specifying the number of iterations (<span class="italic"><code class="codeph">iter</code></span>), with <span class="italic"><code class="codeph">iter</code></span> value greater than 1, in the <code class="codeph">OCIStmtExecute()</code> call. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB45670"></a><div class="props_rev_3"><a id="GUID-39B36A93-D43F-4B13-9266-3828C8F1B6BF" name="GUID-39B36A93-D43F-4B13-9266-3828C8F1B6BF"></a><h4 id="ADLOB-GUID-39B36A93-D43F-4B13-9266-3828C8F1B6BF" class="sect4">The Data Interface Used to Fetch LOB Data in OCI</h4>
                  <div>
                     <p>This section discusses techniques you can use to fetch data from LOB columns or attributes in OCI using the data interface for persistent LOBs. </p>
                  </div><a id="ADLOB45671"></a><div class="props_rev_3"><a id="GUID-FC93720E-7A33-467E-A260-56F4ADC1C1B7" name="GUID-FC93720E-7A33-467E-A260-56F4ADC1C1B7"></a><h5 id="ADLOB-GUID-FC93720E-7A33-467E-A260-56F4ADC1C1B7" class="sect5">Simple Fetch in One Piece</h5>
                     <div>
                        <div class="section">
                           <p>To perform a simple fetch operation on LOBs in one piece using the data interface for persistent LOBs, do the following:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Call <code class="codeph">OCIStmtPrepare()</code> to prepare the <code class="codeph">SELECT</code> statement in <code class="codeph">OCI_DEFAULT</code> mode.</span></li>
                           <li><span>Call <code class="codeph">OCIDefineByPos()</code> to define a select list position in <code class="codeph">OCI_DEFAULT</code> mode to define a LOB as character data or binary data. </span></li>
                           <li><span>Call <code class="codeph">OCIStmtExecute()</code> to run the <code class="codeph">SELECT</code> statement. </span></li>
                           <li><span>Call <code class="codeph">OCIStmtFetch()</code> to do the actual fetch.</span></li>
                        </ol>
                     </div>
                  </div><a id="ADLOB45672"></a><div class="props_rev_3"><a id="GUID-254F3A11-F9CC-4DC2-B855-333C508D6622" name="GUID-254F3A11-F9CC-4DC2-B855-333C508D6622"></a><h5 id="ADLOB-GUID-254F3A11-F9CC-4DC2-B855-333C508D6622" class="sect5">Performing a Piecewise Fetch with Polling</h5>
                     <div>
                        <div class="section">
                           <p>To perform a piecewise fetch operation on a LOB column with polling using the data interface for LOBs, do the following steps:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIStmtPrepare()</code> to prepare the <code class="codeph">SELECT</code> statement in <code class="codeph">OCI_DEFAULT</code> mode.</span></li>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIDefinebyPos()</code> to define a select list position in <code class="codeph">OCI_DYNAMIC_FETCH</code> mode to define the LOB column as character data or binary data.</span></li>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIStmtExecute()</code> to run the <code class="codeph">SELECT</code> statement.</span></li>
                           <li class="stepexpand"><span>Call <code class="codeph">OCIStmtFetch()</code> in default mode. Do each of the following in a loop while the value returned from <code class="codeph">OCIStmtFetch()</code> is <code class="codeph">OCI_NEED_DATA.</code> Terminate your loop when the value returned from <code class="codeph">OCIStmtFetch()</code> is <code class="codeph">OCI_SUCCESS</code>. </span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Call <code class="codeph">OCIStmtGetPieceInfo()</code> to retrieve information about the piece to be fetched. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Call <code class="codeph">OCIStmtSetPieceInfo()</code> to set information about piece to be fetched. 
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADLOB45673"></a><div class="props_rev_3"><a id="GUID-916BBF9D-5CFD-4F2B-89C4-59452AAB3140" name="GUID-916BBF9D-5CFD-4F2B-89C4-59452AAB3140"></a><h5 id="ADLOB-GUID-916BBF9D-5CFD-4F2B-89C4-59452AAB3140" class="sect5">Performing a Piecewise with Callback</h5>
                     <div>
                        <div class="section">
                           <p>To perform a piecewise fetch operation on a LOB column with callback using the data interface for persistent LOBs, do the following:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Call <code class="codeph">OCIStmtPrepare()</code> to prepare the statement in <code class="codeph">OCI_DEFAULT</code> mode.</span></li>
                           <li><span>Call <code class="codeph">OCIDefinebyPos()</code> to define a select list position in <code class="codeph">OCI_DYNAMIC_FETCH</code> mode to define the LOB column as character data or binary data.</span></li>
                           <li><span>Call <code class="codeph">OCIStmtExecute()</code> to run the <code class="codeph">SELECT</code> statement.</span></li>
                           <li><span>Call <code class="codeph">OCIDefineDynamic()</code> to specify the callback.</span></li>
                           <li><span>Call <code class="codeph">OCIStmtFetch()</code> in default mode.</span></li>
                        </ol>
                     </div>
                  </div><a id="ADLOB45674"></a><div class="props_rev_3"><a id="GUID-C9658EA0-F9E4-4185-9631-8D9A35ED71B5" name="GUID-C9658EA0-F9E4-4185-9631-8D9A35ED71B5"></a><h5 id="ADLOB-GUID-C9658EA0-F9E4-4185-9631-8D9A35ED71B5" class="sect5">Array Fetch</h5>
                     <div>
                        <div class="section">
                           <p>To perform an array fetch in OCI using the data interface for persistent LOBs, use any of the techniques discussed in this section in conjunction with <code class="codeph">OCIDefineArrayOfStruct()</code>, or by specifying the number of iterations (<span class="italic"><code class="codeph">iter</code></span>), with the value of <span class="italic"><code class="codeph">iter</code></span> greater than 1, in the <code class="codeph">OCIStmtExecute()</code> call. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB45675"></a><div class="props_rev_3"><a id="GUID-34D56682-00EB-42DD-869A-9C5C4E288423" name="GUID-34D56682-00EB-42DD-869A-9C5C4E288423"></a><h4 id="ADLOB-GUID-34D56682-00EB-42DD-869A-9C5C4E288423" class="sect4">PL/SQL and C Binds from OCI</h4>
                  <div>
                     <div class="section">
                        <p>When you call a PL/SQL procedure from OCI, and have an <code class="codeph">IN</code> or <code class="codeph">OUT</code> or <code class="codeph">IN OUT</code> bind, you should be able to:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Bind a variable as <code class="codeph">SQLT_CHR</code> or <code class="codeph">SQLT_LNG</code> where the formal parameter of the PL/SQL procedure is <code class="codeph">SQLT_CLOB</code>, or
                              </p>
                           </li>
                           <li>
                              <p>Bind a variable as <code class="codeph">SQLT_BIN</code> or <code class="codeph">SQLT_LBI</code> where the formal parameter is <code class="codeph">SQLT_BLOB</code></p>
                           </li>
                        </ul>
                        <p>The following two cases work:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34D56682-00EB-42DD-869A-9C5C4E288423__GUID-3017AE1C-FB9E-4711-ABA7-0FEDBB70322B">Calling PL/SQL Out-binds in the "begin foo(:1); end;" Manner</p>
                        <p>Here is an example of calling PL/SQL out-binds in the "begin foo(:1); end;" Manner:</p><pre class="oac_no_warn" dir="ltr">text *sqlstmt = (text *)"BEGIN get_lob(:c); END; " ;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-34D56682-00EB-42DD-869A-9C5C4E288423__GUID-E2BFEEBF-209F-4559-92A2-C4000BED9C61">Calling PL/SQL Out-binds in the "call foo(:1);" Manner</p>
                        <p>Here is an example of calling PL/SQL out-binds in the "call foo(:1);" manner:</p><pre class="oac_no_warn" dir="ltr">text *sqlstmt = (text *)"CALL get_lob(:c);" ;
</pre><p>In both these cases, the rest of the program has these statements:</p><pre class="oac_no_warn" dir="ltr">OCIStmtPrepare(stmthp, errhp, sqlstmt, (ub4)strlen((char *)sqlstmt),
               (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
   curlen = 0;
OCIBindByName(stmthp, &amp;bndhp[3], errhp,
        (text *) ":c", (sb4) strlen((char *) ":c"),
        (dvoid *) buf5, (sb4) LONGLEN, SQLT_CHR,
        (dvoid *) 0, (ub2 *) 0, (ub2 *) 0,
        (ub4) 1, (ub4 *) &amp;curlen, (ub4) OCI_DATA_AT_EXEC);
</pre><p>The PL/SQL procedure, <code class="codeph">get_lob()</code>, is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">procedure get_lob(c INOUT CLOB) is  -- This might have been column%type 
  BEGIN
  ... /* The procedure body could be in PL/SQL or C*/
  END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45678"></a><div class="props_rev_3"><a id="GUID-28B40747-D702-44FB-BF19-F7DC46C67722" name="GUID-28B40747-D702-44FB-BF19-F7DC46C67722"></a><h4 id="ADLOB-GUID-28B40747-D702-44FB-BF19-F7DC46C67722" class="sect4">Example: C (OCI) - Binds of More than 4000 Bytes for INSERT and UPDATE</h4>
                  <div>
                     <div class="section">
                        <p>You can use binds of more than 4000 byes for <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> operations.
                        </p><pre class="oac_no_warn" dir="ltr">void insert3() 
{ 
/* Insert of data into LOB attributes is allowed. */
   ub1 buffer[8000]; 
   text *insert_sql = (text *)"INSERT INTO Print_media (ad_header) \
               VALUES (adheader_typ(NULL, NULL, NULL,:1))"; 
   OCIStmtPrepare(stmthp, errhp, insert_sql, strlen((char*)insert_sql),  
            (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT); 
   OCIBindByPos(stmthp, &amp;bindhp[0], errhp, 1, (dvoid *)buffer, 2000,  
             SQLT_LNG, 0, 0, 0, 0, 0, (ub4) OCI_DEFAULT); 
   OCIStmtExecute(svchp, stmthp, errhp, 1, 0, (const OCISnapshot*) 0, 
                  (OCISnapshot*)0, OCI_DEFAULT); 
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45679"></a><div class="props_rev_3"><a id="GUID-67A21099-37E9-4400-9D75-D86A106A4FC6" name="GUID-67A21099-37E9-4400-9D75-D86A106A4FC6"></a><h4 id="ADLOB-GUID-67A21099-37E9-4400-9D75-D86A106A4FC6" class="sect4">Using the Data Interface for LOBs in PL/SQL Binds from OCI on LOBs</h4>
                  <div>
                     <div class="section">
                        <p>The data interface for LOBs allows LOB PL/SQL binds from OCI to work. When you call a PL/SQL procedure from OCI, and have an <code class="codeph">IN</code> or <code class="codeph">OUT</code> or <code class="codeph">IN OUT</code> bind, you should be able to bind a variable as <code class="codeph">SQLT_CHR</code>, where the formal parameter of the PL/SQL procedure is <code class="codeph">SQLT_CLOB</code>. 
                        </p>
                        <div class="infoboxnote" id="GUID-67A21099-37E9-4400-9D75-D86A106A4FC6__GUID-09184C69-A045-4A00-AA79-8EC4A232E6E6">
                           <p class="notep1">Note:</p>
                           <p>C procedures are wrapped inside a PL/SQL stub, so the OCI application always calls the PL/SQL stub.</p>
                        </div>
                        <p>For the OCI calling program, the following are likely cases:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-67A21099-37E9-4400-9D75-D86A106A4FC6__GUID-CDC4A047-241F-4030-834F-DA5364DF516B">Calling PL/SQL Out-binds in the "begin foo(:1); end;" Manner</p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">text *sqlstmt = (text *)"BEGIN PKG1.P5 (:c); END; " ;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-67A21099-37E9-4400-9D75-D86A106A4FC6__GUID-97C50125-BA23-44FB-A5C4-45E6089F8911">Calling PL/SQL Out-binds in the "call foo(:1);" Manner</p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">text *sqlstmt = (text *)"CALL PKG1.P5( :c );" ;
</pre><p>In both these cases, the rest of the program is as follows:</p><pre class="oac_no_warn" dir="ltr">   OCIStmtPrepare(stmthp, errhp, sqlstmt, (ub4)strlen((char *)sqlstmt),
            (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
   curlen = 0;

   OCIBindByName(stmthp, &amp;bndhp[3], errhp,
            (text *) ":c4", (sb4) strlen((char *) ":c"),
            (dvoid *) buf5, (sb4) LONGLEN, SQLT_CHR,
            (dvoid *) 0, (ub2 *) 0, (ub2 *) 0,
            (ub4) 1, (ub4 *) &amp;curlen, (ub4) OCI_DATA_AT_EXEC);

    OCIStmtExecute(svchp, stmthp, errhp,(ub4) 0,(ub4) 0, (const OCISnapshot*) 0,
            (OCISnapshot*) 0,(ub4) OCI_DEFAULT);
</pre><p>The PL/SQL procedure <code class="codeph">PKG1.P5</code> is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">   CREATE OR REPLACE PACKAGE BODY pkg1 AS
     ...
   procedure p5 (c OUT CLOB) is
     -- This might have been table%rowtype (so it   is CLOB now)
   BEGIN
     ...
   END p5;

END pkg1;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45682"></a><div class="props_rev_3"><a id="GUID-FE40F37E-AC24-4098-AF37-08179B7F6AED" name="GUID-FE40F37E-AC24-4098-AF37-08179B7F6AED"></a><h4 id="ADLOB-GUID-FE40F37E-AC24-4098-AF37-08179B7F6AED" class="sect4">Binding LONG Data for LOB Columns in Binds Greater Than 4000 Bytes</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates binding character data for a LOB column:</p><pre class="oac_no_warn" dir="ltr">void simple_insert()
{
  word buflen;
  text buf[5000];
  text *insstmt = (text *) "INSERT INTO Print_media(Product_id, Ad_id,\
                  Ad_sourcetext) VALUES (2004, 1, :SRCTXT)";
 
  OCIStmtPrepare(stmthp, errhp, insstmt, (ub4)strlen((char *)insstmt), 
                (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
  
  OCIBindByName(stmthp, &amp;bndhp[0], errhp,
                (text *) ":SRCTXT", (sb4) strlen((char *) ":SRCTXT"),
                (dvoid *) buf, (sb4) sizeof(buf), SQLT_CHR,
                (dvoid *) 0, (ub2 *) 0, (ub2 *) 0,
                (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
 
  memset((void *)buf, (int)'A', (size_t)5000);
  OCIStmtExecute(svchp, stmthp, errhp, (ub4) 1, (ub4) 0,
                 (const OCISnapshot*) 0, (OCISnapshot*) 0, (ub4) OCI_DEFAULT);
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45683"></a><div class="props_rev_3"><a id="GUID-4F79C855-71C0-4307-BD72-114889A9DFDE" name="GUID-4F79C855-71C0-4307-BD72-114889A9DFDE"></a><h4 id="ADLOB-GUID-4F79C855-71C0-4307-BD72-114889A9DFDE" class="sect4">Binding LONG Data to LOB Columns Using Piecewise INSERT with Polling</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates using piecewise <code class="codeph">INSERT</code> with polling using the data interface for LOBs. 
                        </p><pre class="oac_no_warn" dir="ltr">void piecewise_insert()
{
  text *sqlstmt = (text *)"INSERT INTO Print_media(Product_id, Ad_id,\
                  Ad_sourcetext) VALUES (:1, :2, :3)";
  ub2 rcode;
  ub1 piece, i;
  word product_id = 2004;
  word ad_id = 2;
  ub4 buflen;
  char buf[5000];
 
  OCIStmtPrepare(stmthp, errhp, sqlstmt, (ub4)strlen((char *)sqlstmt), 
                 (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
  OCIBindByPos(stmthp, &amp;bndhp[0], errhp, (ub4) 1,
               (dvoid *) &amp;product_id, (sb4) sizeof(product_id), SQLT_INT,
               (dvoid *) 0, (ub2 *)0, (ub2 *)0,
               (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
  OCIBindByPos(stmthp, &amp;bndhp[1], errhp, (ub4) 2,
               (dvoid *) &amp;ad_id, (sb4) sizeof(ad_id), SQLT_INT,
               (dvoid *) 0, (ub2 *)0, (ub2 *)0,
               (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
  OCIBindByPos(stmthp, &amp;bndhp[2], errhp, (ub4) 3,
               (dvoid *) 0, (sb4) 15000, SQLT_LNG,
               (dvoid *) 0, (ub2 *)0, (ub2 *)0,
               (ub4) 0, (ub4 *) 0, (ub4) OCI_DATA_AT_EXEC);
 
  i = 0;
  while (1)
  {
    i++;
    retval = OCIStmtExecute(svchp, stmthp, errhp, (ub4) 1, (ub4) 0,
                            (CONST OCISnapshot*) 0, (OCISnapshot*) 0,
                            (ub4) OCI_DEFAULT);
    switch(retval)
    {
    case OCI_NEED_DATA:
      memset((void *)buf, (int)'A'+i, (size_t)5000);
      buflen = 5000;
      if (i == 1) piece = OCI_FIRST_PIECE;
      else if (i == 3) piece = OCI_LAST_PIECE;
      else piece = OCI_NEXT_PIECE;
 
      if (OCIStmtSetPieceInfo((dvoid *)bndhp[2],
                              (ub4)OCI_HTYPE_BIND, errhp, (dvoid *)buf,
                              &amp;buflen, piece, (dvoid *) 0, &amp;rcode))
        {
          printf("ERROR: OCIStmtSetPieceInfo: %d \n", retval);
          break;
        }
      
      break;
    case OCI_SUCCESS:
      break;
    default:
      printf( "oci exec returned %d \n", retval);
      report_error(errhp);
      retval = OCI_SUCCESS;
    } /* end switch */
    if (retval == OCI_SUCCESS) 
      break;
  } /* end while(1) */
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45684"></a><div class="props_rev_3"><a id="GUID-2B962DD4-7D3B-44FC-9928-DB5B53241871" name="GUID-2B962DD4-7D3B-44FC-9928-DB5B53241871"></a><h4 id="ADLOB-GUID-2B962DD4-7D3B-44FC-9928-DB5B53241871" class="sect4">Binding LONG Data to LOB Columns Using Piecewise INSERT with Callback</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates binding <code class="codeph">LONG</code> data to LOB columns using a piecewise <code class="codeph">INSERT</code> with callback:
                        </p><pre class="oac_no_warn" dir="ltr">void callback_insert()
{
  word buflen = 15000;
  word product_id = 2004;
  word ad_id = 3;
  text *sqlstmt = (text *) "INSERT INTO Print_media(Product_id, Ad_id,\
                  Ad_sourcetext) VALUES (:1, :2, :3)";
  word pos = 3;
 
  OCIStmtPrepare(stmthp, errhp, sqlstmt, (ub4)strlen((char *)sqlstmt),
                 (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT)
 
  OCIBindByPos(stmthp, &amp;bndhp[0], errhp, (ub4) 1,
               (dvoid *) &amp;product_id, (sb4) sizeof(product_id), SQLT_INT,
               (dvoid *) 0, (ub2 *)0, (ub2 *)0,
               (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
  OCIBindByPos(stmthp, &amp;bndhp[1], errhp, (ub4) 2,
               (dvoid *) &amp;ad_id, (sb4) sizeof(ad_id), SQLT_INT,
               (dvoid *) 0, (ub2 *)0, (ub2 *)0,
               (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
  OCIBindByPos(stmthp, &amp;bndhp[2], errhp, (ub4) 3,
               (dvoid *) 0, (sb4) buflen, SQLT_CHR,
               (dvoid *) 0, (ub2 *)0, (ub2 *)0,
               (ub4) 0, (ub4 *) 0, (ub4) OCI_DATA_AT_EXEC);
 
  OCIBindDynamic(bndhp[2], errhp, (dvoid *) (dvoid *) &amp;pos,
                 insert_cbk, (dvoid *) 0, (OCICallbackOutBind) 0);
 
  OCIStmtExecute(svchp, stmthp, errhp, (ub4) 1, (ub4) 0,
                 (const OCISnapshot*) 0, (OCISnapshot*) 0,
                 (ub4) OCI_DEFAULT);
} /* end insert_data() */
 
/* Inbind callback to specify input data. */
static sb4 insert_cbk(dvoid *ctxp, OCIBind *bindp, ub4 iter, ub4 index,
                       dvoid **bufpp, ub4 *alenpp, ub1 *piecep, dvoid **indpp)
{
  static int a = 0;
  word   j;
  ub4    inpos = *((ub4 *)ctxp);
  char   buf[5000];
 
  switch(inpos)
  {
  case 3:
    memset((void *)buf, (int) 'A'+a, (size_t) 5000);
    *bufpp = (dvoid *) buf;
    *alenpp = 5000 ;
    a++;
    break;
  default: printf("ERROR: invalid position number: %d\n", inpos);
  }
 
  *indpp = (dvoid *) 0;
  *piecep = OCI_ONE_PIECE;
  if (inpos == 3)
  {
    if (a&lt;=1)
    {
      *piecep = OCI_FIRST_PIECE;
      printf("Insert callback: 1st piece\n");
    }
    else if (a&lt;3)
    {
      *piecep = OCI_NEXT_PIECE;
      printf("Insert callback: %d'th piece\n", a);
    }
    else {
      *piecep = OCI_LAST_PIECE;
      printf("Insert callback: %d'th piece\n", a);
      a = 0;
    }
  }
  return OCI_CONTINUE;
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45685"></a><div class="props_rev_3"><a id="GUID-9D4F118A-8F62-49C2-A6CF-23C07B56C6FE" name="GUID-9D4F118A-8F62-49C2-A6CF-23C07B56C6FE"></a><h4 id="ADLOB-GUID-9D4F118A-8F62-49C2-A6CF-23C07B56C6FE" class="sect4">Binding LONG Data to LOB Columns Using an Array INSERT</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates binding character data for LOB columns using an array <code class="codeph">INSERT</code> operation:
                        </p><pre class="oac_no_warn" dir="ltr">void array_insert()
{
  ub4 i;
  word buflen;
  word arrbuf1[5];
  word arrbuf2[5];
  text arrbuf3[5][5000];
  text *insstmt = (text *)"INSERT INTO Print_media(Product_id, Ad_id,\
                  Ad_sourcetext) VALUES (:PID, :AID, :SRCTXT)";
 
  OCIStmtPrepare(stmthp, errhp, insstmt,
                 (ub4)strlen((char *)insstmt), (ub4) OCI_NTV_SYNTAX,
                 (ub4) OCI_DEFAULT);
 
  OCIBindByName(stmthp, &amp;bndhp[0], errhp,
                (text *) ":PID", (sb4) strlen((char *) ":PID"),
                (dvoid *) &amp;arrbuf1[0], (sb4) sizeof(arrbuf1[0]), SQLT_INT,
                (dvoid *) 0, (ub2 *)0, (ub2 *) 0,
                (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
 
  OCIBindByName(stmthp, &amp;bndhp[1], errhp,
                (text *) ":AID", (sb4) strlen((char *) ":AID"),
                (dvoid *) &amp;arrbuf2[0], (sb4) sizeof(arrbuf2[0]), SQLT_INT,
                (dvoid *) 0, (ub2 *)0, (ub2 *) 0,
                (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
 
  OCIBindByName(stmthp, &amp;bndhp[2], errhp,
                (text *) ":SRCTXT", (sb4) strlen((char *) ":SRCTXT"),
                (dvoid *) arrbuf3[0], (sb4) sizeof(arrbuf3[0]), SQLT_CHR,
                (dvoid *) 0, (ub2 *) 0, (ub2 *) 0,
                (ub4) 0, (ub4 *) 0, (ub4) OCI_DEFAULT);
 
  OCIBindArrayOfStruct(bndhp[0], errhp sizeof(arrbuf1[0]),
                       indsk, rlsk, rcsk);
  OCIBindArrayOfStruct(bndhp[1], errhp, sizeof(arrbuf2[0]),
                       indsk, rlsk, rcsk);
  OCIBindArrayOfStruct(bndhp[2], errhp, sizeof(arrbuf3[0]),
                       indsk, rlsk, rcsk);
 
  for (i=0; i&lt;5; i++)
  {
    arrbuf1[i] = 2004;
    arrbuf2[i] = i+4;
    memset((void *)arrbuf3[i], (int)'A'+i, (size_t)5000);
  }
  OCIStmtExecute(svchp, stmthp, errhp, (ub4) 5, (ub4) 0,
                 (const OCISnapshot*) 0, (OCISnapshot*) 0,
                 (ub4) OCI_DEFAULT);
 
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45686"></a><div class="props_rev_3"><a id="GUID-F0D4D744-9933-446E-856B-70C8BC0B4D98" name="GUID-F0D4D744-9933-446E-856B-70C8BC0B4D98"></a><h4 id="ADLOB-GUID-F0D4D744-9933-446E-856B-70C8BC0B4D98" class="sect4">Selecting a LOB Column into a LONG Buffer Using a Simple Fetch</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates selecting a LOB column using a simple fetch:</p><pre class="oac_no_warn" dir="ltr">void simple_fetch()
{
  word retval;
  text buf[15000];
  text *selstmt = (text *) "SELECT Ad_sourcetext FROM Print_media WHERE\
                  Product_id = 2004";
 
  OCIStmtPrepare(stmthp, errhp, selstmt, (ub4)strlen((char *)selstmt),
                 (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
 
  retval = OCIStmtExecute(svchp, stmthp, errhp, (ub4) 0, (ub4) 0,
                          (const OCISnapshot*) 0, (OCISnapshot*) 0,
                          (ub4) OCI_DEFAULT);
  while (retval == OCI_SUCCESS || retval == OCI_SUCCESS_WITH_INFO)
  {
    OCIDefineByPos(stmthp, &amp;defhp, errhp, (ub4) 1, (dvoid *) buf,
                   (sb4) sizeof(buf), (ub2) SQLT_CHR, (dvoid *) 0,
                   (ub2 *) 0, (ub2 *) 0, (ub4) OCI_DEFAULT);
    retval = OCIStmtFetch(stmthp, errhp, (ub4) 1,
                          (ub4) OCI_FETCH_NEXT, (ub4) OCI_DEFAULT);
    if (retval == OCI_SUCCESS || retval == OCI_SUCCESS_WITH_INFO)
      printf("buf = %.*s\n", 15000, buf);
  }
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45687"></a><div class="props_rev_3"><a id="GUID-08D48F2D-D8DC-4402-B8C5-E80E741D6250" name="GUID-08D48F2D-D8DC-4402-B8C5-E80E741D6250"></a><h4 id="ADLOB-GUID-08D48F2D-D8DC-4402-B8C5-E80E741D6250" class="sect4">Selecting a LOB Column into a LONG Buffer Using Piecewise Fetch with Polling</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates selecting a LOB column into a <code class="codeph">LONG</code> buffer using a piecewise fetch with polling:
                        </p><pre class="oac_no_warn" dir="ltr">void piecewise_fetch()
{
  text buf[15000];
  ub4 buflen=5000;
  word retval;
  text *selstmt = (text *) "SELECT Ad_sourcetext FROM Print_media
                  WHERE Product_id = 2004 AND Ad_id = 2";
 
  OCIStmtPrepare(stmthp, errhp, selstmt,
                 (ub4) strlen((char *)selstmt),
                 (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
 
  OCIDefineByPos(stmthp, &amp;dfnhp, errhp, (ub4) 1,
                 (dvoid *) NULL, (sb4) 100000, SQLT_LNG,
                 (dvoid *) 0, (ub2 *) 0,
                 (ub2 *) 0, (ub4) OCI_DYNAMIC_FETCH);
 
  retval = OCIStmtExecute(svchp, stmthp, errhp, (ub4) 0, (ub4) 0,
                          (CONST OCISnapshot*) 0, (OCISnapshot*) 0,
                          (ub4) OCI_DEFAULT);
 
  retval = OCIStmtFetch(stmthp, errhp, (ub4) 1 ,
                        (ub2) OCI_FETCH_NEXT, (ub4) OCI_DEFAULT);
 
  while (retval != OCI_NO_DATA &amp;&amp; retval != OCI_SUCCESS)
  {
    ub1 piece;
    ub4 iter;
    ub4 idx;
  
    genclr((void *)buf, 5000);
    switch(retval)
    {
    case OCI_NEED_DATA:
      OCIStmtGetPieceInfo(stmthp, errhp, &amp;hdlptr, &amp;hdltype,
                          &amp;in_out, &amp;iter, &amp;idx, &amp;piece);
      buflen = 5000;
      OCIStmtSetPieceInfo(hdlptr, hdltype, errhp,
                          (dvoid *) buf, &amp;buflen, piece,
                          (CONST dvoid *) &amp;indp1, (ub2 *) 0);
      retval = OCI_NEED_DATA;
      break;
    default:
      printf("ERROR: piece-wise fetching, %d\n", retval);
      return;
    } /* end switch */
    retval = OCIStmtFetch(stmthp, errhp, (ub4) 1 ,
                          (ub2) OCI_FETCH_NEXT, (ub4) OCI_DEFAULT);
    printf("Data : %.5000s\n", buf);
  } /* end while */
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45688"></a><div class="props_rev_3"><a id="GUID-87674AA6-3741-4F57-A99B-A7A34B471A1D" name="GUID-87674AA6-3741-4F57-A99B-A7A34B471A1D"></a><h4 id="ADLOB-GUID-87674AA6-3741-4F57-A99B-A7A34B471A1D" class="sect4">Selecting a LOB Column into a LONG Buffer Using Piecewise Fetch with Callback</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates selecting a <code class="codeph">LONG</code> column into a LOB buffer when using a piecewise fetch with callback:
                        </p><pre class="oac_no_warn" dir="ltr">char buf[5000];
void callback_fetch()
{
  word outpos = 1;
  text *sqlstmt = (text *) "SELECT Ad_sourcetext FROM Print_media WHERE
                  Product_id = 2004 AND Ad_id = 3";
  
  OCIStmtPrepare(stmthp, errhp, sqlstmt, (ub4)strlen((char *)sqlstmt),
                 (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
  OCIDefineByPos(stmthp, &amp;dfnhp[0], errhp, (ub4) 1,
                 (dvoid *) 0, (sb4)3 * sizeof(buf), SQLT_CHR,
                 (dvoid *) 0, (ub2 *)0, (ub2 *)0,
                 (ub4) OCI_DYNAMIC_FETCH);
  
  OCIDefineDynamic(dfnhp[0], errhp, (dvoid *) &amp;outpos,
                   (OCICallbackDefine) fetch_cbk);
 
  OCIStmtExecute(svchp, stmthp, errhp, (ub4) 1, (ub4) 0,
                 (const OCISnapshot*) 0, (OCISnapshot*) 0,
                 (ub4) OCI_DEFAULT);
  buf[ 4999 ] = '\0';
  printf("Select callback: Last piece: %s\n", buf);
}
 
/* -------------------------------------------------------------- */
/* Fetch callback to specify buffers. */
/* -------------------------------------------------------------- */
static sb4 fetch_cbk(dvoid *ctxp, OCIDefine *dfnhp, ub4 iter, dvoid **bufpp, 
                      ub4 **alenpp, ub1 *piecep, dvoid **indpp, ub2 **rcpp)
{
  static int a = 0;
  ub4 outpos = *((ub4 *)ctxp);
  ub4 len = 5000;
  switch(outpos)
  {
  case 1:
    a ++;
    *bufpp = (dvoid *) buf;
    *alenpp = &amp;len;
    break;
  default:
    *bufpp = (dvoid *) 0;
    *alenpp = (ub4 *) 0;
    printf("ERROR: invalid position number: %d\n", outpos);
  }
  *indpp = (dvoid *) 0;
  *rcpp = (ub2 *) 0;
 
  buf[len] = '\0';
  if (a&lt;=1)
  {
    *piecep = OCI_FIRST_PIECE;
    printf("Select callback: 0th piece\n");
  }
  else if (a&lt;3)
  {
    *piecep = OCI_NEXT_PIECE;
    printf("Select callback: %d'th piece: %s\n", a-1, buf);
  }
  else {
    *piecep = OCI_LAST_PIECE;
    printf("Select callback: %d'th piece: %s\n", a-1, buf);
    a = 0;
  }
  return OCI_CONTINUE;
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45689"></a><div class="props_rev_3"><a id="GUID-2BD7184B-174E-4003-AACA-B9E7EAB04075" name="GUID-2BD7184B-174E-4003-AACA-B9E7EAB04075"></a><h4 id="ADLOB-GUID-2BD7184B-174E-4003-AACA-B9E7EAB04075" class="sect4">Selecting a LOB Column into a LONG Buffer Using an Array Fetch</h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates selecting a LOB column into a <code class="codeph">LONG</code> buffer using an array fetch: 
                        </p><pre class="oac_no_warn" dir="ltr">void array_fetch()
{
  word i;
  text arrbuf[5][5000];
  text *selstmt = (text *) "SELECT Ad_sourcetext FROM Print_media WHERE
                  Product_id = 2004 AND Ad_id &gt;=4";
 
  OCIStmtPrepare(stmthp, errhp, selstmt, (ub4)strlen((char *)selstmt),
                 (ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);
 
  OCIStmtExecute(svchp, stmthp, errhp, (ub4) 0, (ub4) 0,
                 (const OCISnapshot*) 0, (OCISnapshot*) 0, (ub4) OCI_DEFAULT);
 
  OCIDefineByPos(stmthp, &amp;defhp1, errhp, (ub4) 1,
                   (dvoid *) arrbuf[0], (sb4) sizeof(arrbuf[0]),
                   (ub2) SQLT_CHR, (dvoid *) 0,
                   (ub2 *) 0, (ub2 *) 0, (ub4) OCI_DEFAULT);
 
  OCIDefineArrayOfStruct(dfnhp1, errhp, sizeof(arrbuf[0]), indsk,
                         rlsk, rcsk);
 
  retval = OCIStmtFetch(stmthp, errhp, (ub4) 5,
                        (ub4) OCI_FETCH_NEXT, (ub4) OCI_DEFAULT);
  if (retval == OCI_SUCCESS || retval == OCI_SUCCESS_WITH_INFO)
  {
     printf("%.5000s\n", arrbuf[0]);
     printf("%.5000s\n", arrbuf[1]);
     printf("%.5000s\n", arrbuf[2]);
     printf("%.5000s\n", arrbuf[3]);
     printf("%.5000s\n", arrbuf[4]);
  }
}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45690"></a><div class="props_rev_3"><a id="GUID-0DA4D3D4-3E2B-4E21-AB08-6308253DF339" name="GUID-0DA4D3D4-3E2B-4E21-AB08-6308253DF339"></a><h3 id="ADLOB-GUID-0DA4D3D4-3E2B-4E21-AB08-6308253DF339" class="sect3">The Data Interface
Used with Persistent LOBs in Java</h3>
               <div>
                  <div class="section">
                     <p>You can also read and write <code class="codeph">CLOB</code> and <code class="codeph">BLOB</code> data using the same streaming
mechanism as for <code class="codeph">LONG</code> and <code class="codeph">LONG</code> <code class="codeph">RAW</code> data. 
                     </p>
                     <p>To read, use <code class="codeph">defineColumnType(nn,
Types.LONGVARCHAR)</code> or <code class="codeph">defineColumnType(nn, Types.LONGVARBINARY)</code>on the column. This produces a direct stream on the data as if it
is a <code class="codeph">LONG</code> or <code class="codeph">LONG</code> <code class="codeph">RAW</code> column. For input in a <code class="codeph">PreparedStatement</code>, you may
use <code class="codeph">setBinaryStream()</code>, <code class="codeph">setCharacterStream()</code>, or <code class="codeph">setAsciiStream()</code> for a parameter which is a <code class="codeph">BLOB</code> or <code class="codeph">CLOB</code>. These methods use the stream
interface to create a LOB in the database from the data in the stream.
If the length of the data is known, for better performance, use the
versions of <span class="apiname" translate="no">setBinaryStream()</span> or <span class="apiname" translate="no">setCharacterStream</span> functions which accept the
length parameter. The data interface also supports standard JDBC methods
such as getString/getBytes on ResultSet and CallableStatement and
setString/setBytes on PreparedStatement to read and write LOB data.
It is easier to code, and in many cases faster, to use these APIs
for LOB access. All these techniques reduce database round trips and
may result in improved performance in some cases. See the Javadoc
on stream data for the significant restrictions which apply, at <a href="http://www.oracle.com/technology/" target="_blank"><code class="codeph">http://www.oracle.com/technology/</code></a>.
                     </p>
                     <p>Refer to the following in the <span class="italic">JDBC
Developer's Guide and Reference</span>:
                     </p>
                     <div class="infoboxnotealso" id="GUID-0DA4D3D4-3E2B-4E21-AB08-6308253DF339__GUID-289B2555-8963-4A41-8EC1-8908F6358229">
                        <p class="notep1">See Also:</p>
                        <p> </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../jjdbc/LOBs-and-BFiles.html#JJDBC28534" target="_blank"><span class="italic">Oracle Database JDBC Developer's
Guide</span></a>, "Working with LOBs and BFILEs", section "Data Interface
for LOBs"
                              </p>
                           </li>
                           <li>
                              <p><a href="../jjdbc/JDBC-standards-support.html#JJDBC28082" target="_blank"><span class="italic">Oracle Database JDBC Developer's
Guide</span></a>, "JDBC Standards Support"
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB1323"></a><div class="sect2"><a id="GUID-8EC0212A-BFB6-441B-AEAE-976FDDD11EAB" name="GUID-8EC0212A-BFB6-441B-AEAE-976FDDD11EAB"></a><h3 id="ADLOB-GUID-8EC0212A-BFB6-441B-AEAE-976FDDD11EAB" class="sect3">The Data Interface Used with Remote LOBs</h3>
               <div>
                  <p>The data interface for insert, update, and select of remote LOBs (access over a <code class="codeph">dblink</code>) is supported after Oracle Database 10<span class="italic">g</span> Release 2. 
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-23097695-09B0-4107-9720-FBE4D8283C0F" name="GUID-23097695-09B0-4107-9720-FBE4D8283C0F"></a><h4 id="ADLOB-GUID-23097695-09B0-4107-9720-FBE4D8283C0F" class="sect4">About the Data Interface with Remote LOBs</h4>
                  <div>
                     <p>The examples discussed use the <code class="codeph">print_media</code> table created in two schemas: <code class="codeph">dbs1</code> and <code class="codeph">dbs2</code>. The <code class="codeph">CLOB</code> column of that table used in the examples shown is <code class="codeph">ad_finaltext</code>. The examples to be given for PL/SQL, OCI, and Java use binds and defines for this one column, but multiple columns can also be accessed. Here is the functionality supported and its limitations:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can define a <code class="codeph">CLOB</code> as <code class="codeph">CHAR</code> or <code class="codeph">NCHAR</code> and an <code class="codeph">NCLOB</code> as <span>CHAR or NCHAR</span>. <code class="codeph">CLOB</code> and <code class="codeph">NCLOB</code> can be defined as a <code class="codeph">LONG</code>. A <code class="codeph">BLOB</code> can be defined as a <code class="codeph">RAW</code> or a <code class="codeph">LONG</code> <code class="codeph">RAW</code>.
                           </p>
                        </li>
                        <li>
                           <p>Array binds and defines are supported.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-23097695-09B0-4107-9720-FBE4D8283C0F__GUID-0742C293-8B42-47CC-9D30-ECADB24003F6">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="data-interface-for-persistent-LOBs.html#GUID-B30F5FA6-4097-4A4B-BD5F-988195FF9A33">Remote Data Interface Example in PL/SQL</a>"</span> and the sections following it.
                        </p>
                     </div>
                  </div>
               </div><a id="ADLOB45691"></a><div class="props_rev_3"><a id="GUID-33C01903-5DB5-491C-970C-D27EC3FCC72E" name="GUID-33C01903-5DB5-491C-970C-D27EC3FCC72E"></a><h4 id="ADLOB-GUID-33C01903-5DB5-491C-970C-D27EC3FCC72E" class="sect4">Non-Supported Syntax</h4>
                  <div>
                     <p>Certain syntax is not supported for remote LOBs.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Queries involving more than one database are not supported:</p><pre class="oac_no_warn" dir="ltr">SELECT t1.lobcol, a2.lobcol FROM t1, t2.lobcol@dbs2 a2 WHERE 
LENGTH(t1.lobcol) = LENGTH(a2.lobcol);
</pre><p>Neither is this query (in a PL/SQL block):</p><pre class="oac_no_warn" dir="ltr">SELECT t1.lobcol INTO varchar_buf1 FROM t1@dbs1
UNION ALL
SELECT t2.lobcol INTO varchar_buf2 FROM t2@dbs2;
</pre></li>
                        <li>
                           <p>Only binds and defines for data going into remote persistent LOB columns are supported, so that parameter passing in PL/SQL where <code class="codeph">CHAR</code> data is bound or defined for remote LOBs is not allowed because this could produce a remote temporary LOB, which are not supported. These statements all produce errors:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT foo() INTO varchar_buf FROM table1@dbs2; -- foo returns a LOB

SELECT foo()@dbs INTO char_val FROM DUAL; -- foo returns a LOB

SELECT XMLType().getclobval INTO varchar_buf FROM table1@dbs2;
</pre></li>
                        <li>
                           <p>If the remote object is a view such as</p><pre class="oac_no_warn" dir="ltr">CREATE VIEW v AS SELECT foo() a FROM ... ; -- foo returns a LOB
/* The local database then tries to get the CLOB data and returns an error */
SELECT a INTO varchar_buf FROM v@dbs2;
</pre><p>This returns an error because it produces a remote temporary LOB, which is not supported.</p>
                        </li>
                        <li>
                           <p><code class="codeph">RETURNING</code> <code class="codeph">INTO</code> does not support implicit conversions between <code class="codeph">CHAR</code> and <code class="codeph">CLOB</code>.
                           </p>
                        </li>
                        <li>
                           <p>PL/SQL parameter passing is not allowed where the actual argument is a LOB type and the remote argument is a <code class="codeph">VARCHAR2</code>, <code class="codeph">NVARCHAR2</code>, <code class="codeph">CHAR</code>, <code class="codeph">NCHAR</code>, or <code class="codeph">RAW</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45692"></a><div class="props_rev_3"><a id="GUID-B30F5FA6-4097-4A4B-BD5F-988195FF9A33" name="GUID-B30F5FA6-4097-4A4B-BD5F-988195FF9A33"></a><h4 id="ADLOB-GUID-B30F5FA6-4097-4A4B-BD5F-988195FF9A33" class="sect4">Remote Data Interface Example in PL/SQL</h4>
                  <div>
                     <p>The data interface only supports data of size less than 32KB in PL/SQL. The following snippet shows a PL/SQL example:</p><pre class="oac_no_warn" dir="ltr">CONNECT pm
declare
  my_ad <span class="bold">varchar(6000)</span> := lpad('b', 6000, 'b');
BEGIN
  INSERT INTO <span class="bold">print_media@dbs2</span>(product_id, ad_id, ad_finaltext) 
       VALUES (10000, 10, my_ad);
  -- Reset the buffer value
  my_ad := 'a';
  SELECT ad_finaltext INTO my_ad FROM <span class="bold">print_media@dbs2</span> 
       WHERE product_id = 10000;
END;
/
</pre><p>If <code class="codeph">ad_finaltext</code> were a <code class="codeph">BLOB</code> column instead of a <code class="codeph">CLOB</code>, <code class="codeph">my_ad</code> has to be of type <code class="codeph">RAW</code>. If the LOB is greater than 32KB - 1 in size, then PL/SQL raises a truncation error and the contents of the buffer are undefined.
                     </p>
                  </div>
               </div><a id="ADLOB45693"></a><div class="props_rev_3"><a id="GUID-0E65F171-0B92-4AC4-8929-B348481C7209" name="GUID-0E65F171-0B92-4AC4-8929-B348481C7209"></a><h4 id="ADLOB-GUID-0E65F171-0B92-4AC4-8929-B348481C7209" class="sect4">Remote Data Interface Example in OCI</h4>
                  <div>
                     <p>The data interface only supports data of size less than <code class="codeph">2 GBytes</code> (the maximum value possible of a variable declared as <code class="codeph">sb4</code>) for OCI. The following pseudocode can be enhanced to be a part of an OCI program:
                     </p><pre class="oac_no_warn" dir="ltr">...
text *sql = (text *)"insert into <span class="bold">print_media@dbs2</span>
                    (product_id, ad_id, ad_finaltext) 
                    values (:1, :2, :3)";
OCIStmtPrepare(...);
OCIBindByPos(...); /* Bind data for positions 1 and 2
                     * which are independent of LOB */
OCIBindByPos(stmthp, &amp;bndhp[2], errhp, (ub4) 3, 
             (dvoid *) charbuf1, (sb4) len_charbuf1, <span class="bold">SQLT_CHR</span>, 
             (dvoid *) 0, (ub2 *)0, (ub2 *)0, 0, 0, OCI_DEFAULT);
OCIStmtExecute(...);

...

text *sql = (text *)"select ad_finaltext from <span class="bold">print_media@dbs2</span>
                    where product_id = 10000";
OCIStmtPrepare(...);
OCIDefineByPos(stmthp, &amp;dfnhp[2], errhp, (ub4) 1, 
             (dvoid *) charbuf2, (sb4) len_charbuf2, <span class="bold">SQLT_CHR</span>, 
             (dvoid *) 0, (ub2 *)0, (ub2 *)0, OCI_DEFAULT);
OCIStmtExecute(...);
...
</pre><p>If <code class="codeph">ad_finaltext</code> were a <code class="codeph">BLOB</code> instead of a <code class="codeph">CLOB</code>, then you bind and define using type <code class="codeph">SQLT_BIN</code>. If the LOB is greater than 2GB - 1 in size, then OCI raises a truncation error and the contents of the buffer are undefined.
                     </p>
                  </div>
               </div><a id="ADLOB45694"></a><div class="props_rev_3"><a id="GUID-7C8CA747-6873-4679-A316-EA3F078D34AB" name="GUID-7C8CA747-6873-4679-A316-EA3F078D34AB"></a><h4 id="ADLOB-GUID-7C8CA747-6873-4679-A316-EA3F078D34AB" class="sect4">Remote Data Interface Examples in JDBC</h4>
                  <div>
                     <p>The following code snippets works with all three JDBC drivers (OCI, Thin, and <code class="codeph">kprb</code> in the database):
                     </p>
                     <p><span class="bold">Bind:</span> 
                     </p>
                     <p>This is for the non-streaming mode:</p><pre class="oac_no_warn" dir="ltr">...
String sql = "insert into <span class="bold">print_media@dbs2</span> (product_id, ad_id, ad_final_text)" +
             " values (:1, :2, :3)";
    PreparedStatement pstmt = conn.prepareStatement(sql);
    pstmt.setInt( 1, 2 );
    pstmt.setInt( 2, 20);
    <span class="bold">pstmt.setString( 3, "Java string" );</span>
    int rows = pstmt.executeUpdate();
...
</pre><p>For the streaming mode, the same code as the preceding works, except that the <code class="codeph">setString()</code> statement is replaced by one of the following:
                     </p><pre class="oac_no_warn" dir="ltr">pstmt.setCharacterStream( 3, new LabeledReader(), 1000000 );
pstmt.setAsciiStream( 3, new LabeledAsciiInputStream(), 1000000 );
</pre><p>Here, <code class="codeph">LabeledReader()</code> and <code class="codeph">LabeledAsciiInputStream()</code> produce character and ASCII streams respectively. If <code class="codeph">ad_finaltext</code> were a <code class="codeph">BLOB</code> column instead of a <code class="codeph">CLOB</code>, then the preceding example works if the bind is of type <code class="codeph">RAW</code>:
                     </p><pre class="oac_no_warn" dir="ltr">pstmt.setBytes( 3, &lt;some byte[] array&gt; );

pstmt.setBinaryStream( 3, new LabeledInputStream(), 1000000 );
</pre><p>Here, <code class="codeph">LabeledInputStream()</code> produces a binary stream. 
                     </p>
                     <p><span class="bold">Define:</span> 
                     </p>
                     <p>For non-streaming mode:</p><pre class="oac_no_warn" dir="ltr">OracleStatement stmt = (OracleStatement)(conn.createStatement());
  stmt.defineColumnType( 1, Types.<span class="bold">VARCHAR</span> );
  ResultSet rst = stmt.executeQuery("select ad_finaltext from print_media@dbs2" );
  while( rst.next() )
     {
       String s = rst.getString( 1 );
       System.out.println( s );
     }
</pre><p>For streaming mode:</p><pre class="oac_no_warn" dir="ltr">OracleStatement stmt = (OracleStatement)(conn.createStatement());
  stmt.defineColumnType( 1, Types.<span class="bold">LONGVARCHAR</span> );
  ResultSet rst = stmt.executeQuery("select ad_finaltext from print_media@dbs2" );
  while( rst.next() )
     {
       Reader reader = rst.getCharacterStream( 1 );
       while( reader.ready() )
       {
         System.out.print( (char)(reader.next()) );
       }
       System.out.println();
     }
</pre><p>If <code class="codeph">ad_finaltext</code> were a <code class="codeph">BLOB</code> column instead of a <code class="codeph">CLOB</code>, then the preceding examples work if the define is of type <code class="codeph">LONGVARBINARY</code>:
                     </p><pre class="oac_no_warn" dir="ltr">...
   OracleStatement stmt = (OracleStatement)conn.createStatement();
 
   stmt.defineColumnType( 1, Types.INTEGER );
   stmt.defineColumnType( 2, Types.LONGVARBINARY );
 
   ResultSet rset = stmt.executeQuery("SELECT ID, LOBCOL FROM LOBTAB@MYSELF");
 
   while(rset.next())
    {
     /* using getBytes() */
     /*
     byte[] b = rset.getBytes("LOBCOL");
     System.out.println("ID: " + rset.getInt("ID") + "  length: " + b.length);
     */
 
        /* using getBinaryStream() */
        InputStream byte_stream = rset.getBinaryStream("LOBCOL");
        byte [] b = new byte [100000];
        int b_len = byte_stream.read(b);
        System.out.println("ID: " + rset.getInt("ID") + "  length: " + b_len);
 
        byte_stream.close();
    }
...</pre><div class="infoboxnotealso" id="GUID-7C8CA747-6873-4679-A316-EA3F078D34AB__GUID-2EA17AA0-FC07-4D20-A18F-F949168714A8">
                        <p class="notep1">See Also:</p>
                        <p><a href="../jjdbc/LOBs-and-BFiles.html#JJDBC15000" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='04085.JDBC-reference-information.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>JDBC Reference Information</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="appendixes.html" title="Previous" type="text/html">
      <link rel="next" href="Oracle-RAC-FAN-API.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="appendixes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Oracle-RAC-FAN-API.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="appendixes.html" property="item" typeof="WebPage"><span property="name"> Appendixes</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> JDBC Reference Information </li>
            </ol>
            <a id="GUID-7D2E4420-DC2D-4B0C-82E2-960EBE5CD9A7" name="GUID-7D2E4420-DC2D-4B0C-82E2-960EBE5CD9A7"></a><a id="JJDBC28905"></a>
            
            <h2 id="JJDBC-GUID-7D2E4420-DC2D-4B0C-82E2-960EBE5CD9A7" class="sect2"><span class="enumeration_chapter">A </span> JDBC Reference Information 
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='JDBC-reference-information'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <div class="section">
                  <p>This appendix contains detailed Java Database Connectivity (JDBC) reference information, including the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="JDBC-reference-information.html#GUID-260661A5-E0CE-40D5-8590-FC15266C3392">Supported SQL-JDBC Data Type Mappings</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-reference-information.html#GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE">Supported SQL and PL/SQL Data Types</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-reference-information.html#GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2">About Using PL/SQL Types</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-reference-information.html#GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787">Using Embedded JDBC Escape Syntax</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-reference-information.html#GUID-E8DF3990-1EB5-4185-989C-06D13740BD01">Oracle JDBC Notes and Limitations</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDBC28907"></a><a id="JJDBC28906"></a><div class="props_rev_3"><a id="GUID-260661A5-E0CE-40D5-8590-FC15266C3392" name="GUID-260661A5-E0CE-40D5-8590-FC15266C3392"></a><h3 id="JJDBC-GUID-260661A5-E0CE-40D5-8590-FC15266C3392" class="sect3"><span class="enumeration_section">A.1 </span>Supported SQL-JDBC Data Type Mappings
               </h3>
               <div>
                  <div class="section">
                     <p>The following table lists all the possible Java types to which a given SQL data type can be validly mapped. Oracle JDBC drivers will support these nondefault mappings. For example, to materialize SQL <code class="codeph">CHAR</code> data in an <code class="codeph">oracle.sql.CHAR</code> object, use the <code class="codeph">getCHAR</code> method. To materialize it as a <code class="codeph">java.math.BigDecimal</code> object, use the <code class="codeph">getBigDecimal</code> method. 
                     </p>
                     <div class="infoboxnote" id="GUID-260661A5-E0CE-40D5-8590-FC15266C3392__GUID-DF153A1A-6DD8-469C-AB9F-5DD4B2FEF02C">
                        <p class="notep1">Note:</p>
                        <p>The classes, where <code class="codeph">oracle.jdbc.OracleData</code> appears in italic, can be generated by Oracle JVM Web Services Call-Out Utility.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-260661A5-E0CE-40D5-8590-FC15266C3392__CACBBAIE">
                     <p class="titleintable">Table A-1 Valid SQL Data Type-Java Class Mappings </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Valid SQL Data Type-Java Class Mappings " summary="This table lists the valid SQL data type and Java class mappings." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d88087e106">SQL data type</th>
                              <th align="left" valign="bottom" width="65%" id="d88087e109">Java types</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e114" headers="d88087e106 ">
                                 <p><code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">LONG</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e114 d88087e109 ">
                                 <p><code class="codeph">java.lang.String</code></p>
                                 <p><code class="codeph">oracle.sql.CHAR</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e132" headers="d88087e106 ">
                                 <p><code class="codeph">NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e132 d88087e109 ">
                                 <p><code class="codeph">boolean</code></p>
                                 <p><code class="codeph">char</code></p>
                                 <p><code class="codeph">byte</code></p>
                                 <p><code class="codeph">short</code></p>
                                 <p><code class="codeph">int</code></p>
                                 <p><code class="codeph">long</code></p>
                                 <p><code class="codeph">float</code></p>
                                 <p><code class="codeph">double</code></p>
                                 <p><code class="codeph">java.lang.Byte</code></p>
                                 <p><code class="codeph">java.lang.Short</code></p>
                                 <p><code class="codeph">java.lang.Integer</code></p>
                                 <p><code class="codeph">java.lang.Long</code></p>
                                 <p><code class="codeph">java.lang.Float</code></p>
                                 <p><code class="codeph">java.lang.Double</code></p>
                                 <p><code class="codeph">java.math.BigDecimal</code></p>
                                 <p><code class="codeph">oracle.sql.NUMBER</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e187" headers="d88087e106 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e187 d88087e109 ">
                                 <p><code class="codeph">boolean</code></p>
                                 <p><code class="codeph">char</code></p>
                                 <p><code class="codeph">byte</code></p>
                                 <p><code class="codeph">short</code></p>
                                 <p><code class="codeph">int</code></p>
                                 <p><code class="codeph">long</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e211" headers="d88087e106 ">
                                 <p><code class="codeph">BINARY_FLOAT</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e211 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.BINARY_FLOAT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e220" headers="d88087e106 ">
                                 <p><code class="codeph">BINARY_DOUBLE</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e220 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.BINARY_DOUBLE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e229" headers="d88087e106 ">
                                 <p><code class="codeph">DATE</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e229 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.DATE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e238" headers="d88087e106 ">
                                 <p><code class="codeph">RAW</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e238 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.RAW</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e247" headers="d88087e106 ">
                                 <p><code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e247 d88087e109 ">
                                 <p><code class="codeph">oracle.jdbc.OracleBlob</code><a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "Starting from Oracle Database 12c Release 1 (12.1), the oracle.sql.BLOB class is deprecated and replaced with the oracle.jdbc.OracleBlob interface.")"><sup>Foot&nbsp;1</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e268" headers="d88087e106 ">
                                 <p><code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e268 d88087e109 ">
                                 <p><code class="codeph">oracle.jdbc.OracleClob</code><a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "Starting from Oracle Database 12c Release 1 (12.1), the oracle.sql.CLOB class is deprecated and replaced with the oracle.jdbc.OracleClob interface.")"><sup>Foot&nbsp;2</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e289" headers="d88087e106 ">
                                 <p><code class="codeph">BFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e289 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.BFILE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e298" headers="d88087e106 ">
                                 <p><code class="codeph">ROWID</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e298 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.ROWID</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e308" headers="d88087e106 ">
                                 <p><code class="codeph">TIMESTAMP</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e308 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.TIMESTAMP</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e317" headers="d88087e106 ">
                                 <p><code class="codeph">TIMESTAMP WITH TIME ZONE</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e317 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.TIMESTAMPTZ</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e326" headers="d88087e106 ">
                                 <p><code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e326 d88087e109 ">
                                 <p><code class="codeph">oracle.sql.TIMESTAMPLTZ</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e335" headers="d88087e106 ">
                                 <p>ref cursor</p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e335 d88087e109 ">
                                 <p>j<code class="codeph">ava.sql.ResultSet</code></p>
                                 <p><code class="codeph">sqlj.runtime.ResultSetIterator</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e347" headers="d88087e106 ">
                                 <p>user defined named types, ADTs</p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e347 d88087e109 ">
                                 <p><code class="codeph">oracle.jdbc.OracleStruct</code><a id="fn_3" name="fn_3" href="#fn_3" onclick="footdisplay(3, "Starting from Oracle Database 12c Release 1 (12.1), the oracle.sql.STRUCT class is deprecated and replaced with the oracle.jdbc.OracleStruct interface.")"><sup>Foot&nbsp;3</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e367" headers="d88087e106 ">
                                 <p>opaque named types</p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e367 d88087e109 ">
                                 <p><code class="codeph">oracle.jdbc.OracleOpaque</code><a id="fn_4" name="fn_4" href="#fn_4" onclick="footdisplay(4, "Starting from Oracle Database 12c Release 1 (12.1), the oracle.sql.OPAQUE class is deprecated and replaced with the oracle.jdbc.OracleOpaque interface.")"><sup>Foot&nbsp;4</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e387" headers="d88087e106 ">
                                 <p>nested tables and VARRAY named types</p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e387 d88087e109 ">
                                 <p><code class="codeph">oracle.jdbc.OracleArray</code><a id="fn_5" name="fn_5" href="#fn_5" onclick="footdisplay(5, "Starting from Oracle Database 12c Release 1 (12.1), the oracle.sql.ARRAY class is deprecated and replaced with the oracle.jdbc.OracleArray interface.")"><sup>Foot&nbsp;5</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d88087e407" headers="d88087e106 ">
                                 <p>references to named types</p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d88087e407 d88087e109 ">
                                 <p><code class="codeph">oracle.jdbc.OracleRef</code><a id="fn_6" name="fn_6" href="#fn_6" onclick="footdisplay(6, "Starting from Oracle Database 12c Release 1 (12.1), the oracle.sql.REF class is deprecated and replaced with the oracle.jdbc.OracleRef interface.")"><sup>Foot&nbsp;6</sup></a></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.BLOB</code> class is deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleBlob</code> interface.
                     </p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.CLOB</code> class is deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleClob</code> interface.
                     </p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;3 </sup></p><p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.STRUCT</code> class is deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleStruct</code> interface.
                     </p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;4 </sup></p><p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.OPAQUE</code> class is deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleOpaque</code> interface.
                     </p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;5 </sup></p><p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.ARRAY</code> class is deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleArray</code> interface.
                     </p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;6 </sup></p><p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.REF</code> class is deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleRef</code> interface.
                     </p>
                  <p></p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-260661A5-E0CE-40D5-8590-FC15266C3392__GUID-C9081210-1653-4CDF-8D35-12A5C38B7588">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The type <code class="codeph">UROWID</code> is not supported.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">oracle.sql.Datum</code> class is abstract. The value passed to a parameter of type <code class="codeph">oracle.sql.Datum</code> must be of the Java type corresponding to the underlying SQL type. Likewise, the value returned by a method with return type <code class="codeph">oracle.sql.Datum</code> must be of the Java type corresponding to the underlying SQL type. 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28909"></a><a id="JJDBC28910"></a><a id="JJDBC28911"></a><a id="JJDBC28912"></a><a id="JJDBC28908"></a><div class="props_rev_3"><a id="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE" name="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE"></a><h3 id="JJDBC-GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE" class="sect3"><span class="enumeration_section">A.2 </span>Supported SQL and PL/SQL Data Types
               </h3>
               <div>
                  <div class="section">
                     <p>The tables in this section list SQL and PL/SQL data types, and Oracle JDBC driver support for them. The following table describes Oracle JDBC driver support for SQL data types.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE__G1009689">
                     <p class="titleintable">Table A-2 Support for SQL Data Types </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Support for SQL Data Types " summary="This table lists Oracle JDBC driver support for SQL Data Types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d88087e486">SQL Data Type</th>
                              <th align="left" valign="bottom" width="48%" id="d88087e489">Supported by JDBC Drivers?</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e494" headers="d88087e486 ">
                                 <p>BFILE </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e494 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e501" headers="d88087e486 ">
                                 <p>BLOB </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e501 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e508" headers="d88087e486 ">
                                 <p>CHAR </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e508 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e515" headers="d88087e486 ">
                                 <p>CLOB </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e515 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e522" headers="d88087e486 ">
                                 <p>DATE </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e522 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e529" headers="d88087e486 ">
                                 <p>NCHAR </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e529 d88087e489 ">
                                 <p>no<a id="fn_7" name="fn_7" href="#fn_7" onclick="footdisplay(7, "The NCHAR type is supported indirectly. There is no corresponding java.sql.Types type, but if your application calls the formOfUse(NCHAR) method, then this type can be accessed.")"><sup>Foot&nbsp;7</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e539" headers="d88087e486 ">
                                 <p>NCHAR VARYING</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e539 d88087e489 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e546" headers="d88087e486 ">
                                 <p>NUMBER </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e546 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e553" headers="d88087e486 ">
                                 <p>NVARCHAR2 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e553 d88087e489 ">
                                 <p>yes<a id="fn_8" name="fn_8" href="#fn_8" onclick="footdisplay(8, "In JSE 6, the NVARCHAR2 type is supported directly. In J2SE 5.0, the NVARCHAR2 type is supported indirectly. There is no corresponding java.sql.Types type, but if your application calls the formOfUse(NCHAR) method, then this type can be accessed.")"><sup>Foot&nbsp;8</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e563" headers="d88087e486 ">
                                 <p>RAW </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e563 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e570" headers="d88087e486 ">
                                 <p>REF </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e570 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e578" headers="d88087e486 ">
                                 <p>ROWID </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e578 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e585" headers="d88087e486 ">
                                 <p>UROWID </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e585 d88087e489 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e592" headers="d88087e486 ">
                                 <p>VARCHAR2 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e592 d88087e489 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;7 </sup></p><p>The NCHAR type is supported indirectly. There is no corresponding java.sql.Types type, but if your application calls the formOfUse(NCHAR) method, then this type can be accessed.</p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;8 </sup></p><p>In JSE 6, the NVARCHAR2 type is supported directly. In J2SE 5.0, the NVARCHAR2 type is supported indirectly. There is no corresponding java.sql.Types type, but if your application calls the formOfUse(NCHAR) method, then this type can be accessed.</p>
                  <p></p>
                  <div class="section">
                     <p>The following table describes Oracle JDBC support for the ANSI-supported SQL data types.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE__G1009738">
                     <p class="titleintable">Table A-3 Support for ANSI-92 SQL Data Types </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Support for ANSI-92 SQL Data Types " summary="This table lists Oracle JDBC driver support for ANSI-92 SQL Data Types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d88087e611">ANSI-Supported SQL Data Type</th>
                              <th align="left" valign="bottom" width="48%" id="d88087e614">Supported by JDBC Drivers?</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e619" headers="d88087e611 ">
                                 <p>CHARACTER </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e619 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e626" headers="d88087e611 ">
                                 <p>DEC</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e626 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e633" headers="d88087e611 ">
                                 <p>DECIMAL</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e633 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e640" headers="d88087e611 ">
                                 <p>DOUBLE PRECISION</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e640 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e647" headers="d88087e611 ">
                                 <p>FLOAT</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e647 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e654" headers="d88087e611 ">
                                 <p>INT</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e654 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e661" headers="d88087e611 ">
                                 <p>INTEGER</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e661 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e668" headers="d88087e611 ">
                                 <p>NATIONAL CHARACTER</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e668 d88087e614 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e675" headers="d88087e611 ">
                                 <p>NATIONAL CHARACTER VARYING</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e675 d88087e614 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e682" headers="d88087e611 ">
                                 <p>NATIONAL CHAR</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e682 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e689" headers="d88087e611 ">
                                 <p>NATIONAL CHAR VARYING</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e689 d88087e614 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e697" headers="d88087e611 ">
                                 <p>NCHAR</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e697 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e704" headers="d88087e611 ">
                                 <p>NCHAR VARYING</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e704 d88087e614 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e711" headers="d88087e611 ">
                                 <p>NUMERIC</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e711 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e718" headers="d88087e611 ">
                                 <p>REAL</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e718 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e725" headers="d88087e611 ">
                                 <p>SMALLINT</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e725 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e732" headers="d88087e611 ">
                                 <p>VARCHAR</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e732 d88087e614 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>The following table describes Oracle JDBC driver support for SQL User-Defined types.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE__G1009950">
                     <p class="titleintable">Table A-4 Support for SQL User-Defined Types</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Support for SQL User-Defined Types" summary="This table lists Oracle JDBC driver support for SQL user-defined types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d88087e751">SQL User-Defined type</th>
                              <th align="left" valign="bottom" width="48%" id="d88087e754">Supported by JDBC Drivers?</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e759" headers="d88087e751 ">
                                 <p>OPAQUE</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e759 d88087e754 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e766" headers="d88087e751 ">
                                 <p>Reference types</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e766 d88087e754 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e773" headers="d88087e751 ">
                                 <p>Object types (<code class="codeph">JAVA_OBJECT</code>)
                                 </p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e773 d88087e754 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d88087e783" headers="d88087e751 ">
                                 <p>Nested table types and VARRAY types</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d88087e783 d88087e754 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>The following table describes Oracle JDBC driver support for PL/SQL data types. The PL/SQL data types include the following categories:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Scalar types</p>
                        </li>
                        <li>
                           <p>Scalar character types, which includes <code class="codeph">DATE</code> data type
                           </p>
                        </li>
                        <li>
                           <p>Composite types</p>
                        </li>
                        <li>
                           <p>Reference types</p>
                        </li>
                        <li>
                           <p>Large object (LOB) types</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE__G1009796">
                     <p class="titleintable">Table A-5 Support for PL/SQL Data Types </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Support for PL/SQL Data Types " summary="This table lists Oracle JDBC driver support for PL/SQL data types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="49%" id="d88087e821">PL/SQL Data Type</th>
                              <th align="left" valign="bottom" width="51%" id="d88087e824">Supported by JDBC Drivers?</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e829" headers="d88087e821 ">
                                 <p><span class="bold">Scalar Types:</span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e829 d88087e824 ">&nbsp;</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e835" headers="d88087e821 ">
                                 <p>BINARY INTEGER</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e835 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e842" headers="d88087e821 ">
                                 <p>DEC</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e842 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e849" headers="d88087e821 ">
                                 <p>DECIMAL</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e849 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e856" headers="d88087e821 ">
                                 <p>DOUBLE PRECISION</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e856 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e863" headers="d88087e821 ">
                                 <p>FLOAT</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e863 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e870" headers="d88087e821 ">
                                 <p>INT</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e870 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e877" headers="d88087e821 ">
                                 <p>INTEGER</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e877 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e884" headers="d88087e821 ">
                                 <p>NATURAL</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e884 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e891" headers="d88087e821 ">
                                 <p>NATURAL<span class="italic">n</span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e891 d88087e824 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e900" headers="d88087e821 ">
                                 <p>NUMBER</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e900 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e908" headers="d88087e821 ">
                                 <p>NUMERIC</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e908 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e915" headers="d88087e821 ">
                                 <p>PLS_INTEGER</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e915 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e922" headers="d88087e821 ">
                                 <p>POSITIVE</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e922 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e929" headers="d88087e821 ">
                                 <p>POSITIVE<span class="italic">n </span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e929 d88087e824 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e938" headers="d88087e821 ">
                                 <p>REAL</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e938 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e945" headers="d88087e821 ">
                                 <p>SIGNTYPE</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e945 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e952" headers="d88087e821 ">
                                 <p>SMALLINT</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e952 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e959" headers="d88087e821 ">
                                 <p>BOOLEAN</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e959 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e966" headers="d88087e821 ">
                                 <p><span class="bold">Scalar Character Types:</span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e966 d88087e824 ">&nbsp;</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e972" headers="d88087e821 ">
                                 <p>CHAR</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e972 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e979" headers="d88087e821 ">
                                 <p>CHARACTER</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e979 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e987" headers="d88087e821 ">
                                 <p>LONG</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e987 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e994" headers="d88087e821 ">
                                 <p>LONG RAW</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e994 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1001" headers="d88087e821 ">
                                 <p>NCHAR</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1001 d88087e824 ">
                                 <p>no (see Note)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1008" headers="d88087e821 ">
                                 <p>NVARCHAR2 </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1008 d88087e824 ">
                                 <p>no (see Note)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1015" headers="d88087e821 ">
                                 <p>RAW</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1015 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1022" headers="d88087e821 ">
                                 <p>ROWID</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1022 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1029" headers="d88087e821 ">
                                 <p>STRING</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1029 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1036" headers="d88087e821 ">
                                 <p>UROWID</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1036 d88087e824 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1043" headers="d88087e821 ">
                                 <p>VARCHAR</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1043 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1050" headers="d88087e821 ">
                                 <p>VARCHAR2 </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1050 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1057" headers="d88087e821 ">
                                 <p>DATE</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1057 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1065" headers="d88087e821 ">
                                 <p><span class="bold">Composite Types:</span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1065 d88087e824 ">&nbsp;</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1071" headers="d88087e821 ">
                                 <p>RECORD</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1071 d88087e824 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1078" headers="d88087e821 ">
                                 <p>TABLE</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1078 d88087e824 ">
                                 <p>no</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1085" headers="d88087e821 ">
                                 <p>VARRAY</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1085 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1092" headers="d88087e821 ">
                                 <p><span class="bold">Reference Types:</span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1092 d88087e824 ">&nbsp;</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1098" headers="d88087e821 ">
                                 <p>REF CURSOR types</p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1098 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1105" headers="d88087e821 ">
                                 <p>object reference types </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1105 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1112" headers="d88087e821 ">
                                 <p><span class="bold">LOB Types: </span></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1112 d88087e824 ">&nbsp;</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1118" headers="d88087e821 ">
                                 <p>BFILE </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1118 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1125" headers="d88087e821 ">
                                 <p>BLOB </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1125 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1132" headers="d88087e821 ">
                                 <p>CLOB </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1132 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d88087e1140" headers="d88087e821 ">
                                 <p>NCLOB </p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d88087e1140 d88087e824 ">
                                 <p>yes</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-9A3DFD72-E254-4BC6-B533-A6B7A9EDFBEE__GUID-83D26B5A-64D4-4463-8327-972A2FB881F9">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The types <code class="codeph">NATURAL</code>, <code class="codeph">NATURAL</code><span class="italic"><code class="codeph">n</code></span>, <code class="codeph">POSITIVE</code>, <code class="codeph">POSITIVE</code><span class="italic"><code class="codeph">n</code></span>, and <code class="codeph">SIGNTYPE</code> are subtypes of <code class="codeph">BINARY INTEGER</code>.
                              </p>
                           </li>
                           <li>
                              <p>The types <code class="codeph">DEC</code>, <code class="codeph">DECIMAL</code>, <code class="codeph">DOUBLE PRECISION</code>, <code class="codeph">FLOAT</code>, <code class="codeph">INT</code>, <code class="codeph">INTEGER</code>, <code class="codeph">NUMERIC</code>, <code class="codeph">REAL</code>, and <code class="codeph">SMALLINT</code> are subtypes of <code class="codeph">NUMBER</code>.
                              </p>
                           </li>
                           <li>
                              <p>The types <code class="codeph">NCHAR</code> and <code class="codeph">NVARCHAR2</code> are supported indirectly. There is no corresponding <code class="codeph">java.sql.Types</code> type, but if your application calls <code class="codeph">formOfUse(NCHAR)</code>, then these types can be accessed.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="globalization-support.html#GUID-C29926B3-8B5B-4B05-9193-29B247B52C66">NCHAR, NVARCHAR2, NCLOB and the defaultNChar Property</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDBC29146"></a><a id="JJDBC29033"></a><a id="JJDBC29147"></a><a id="JJDBC29032"></a><div class="props_rev_3"><a id="GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2" name="GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2"></a><h3 id="JJDBC-GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2" class="sect3"><span class="enumeration_section">A.3 </span>About Using PL/SQL Types
               </h3>
               <div>
                  <p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), you can map schema-level PL/SQL types as generic <code class="codeph">java.sql.Struct</code> type and PL/SQL collections as <code class="codeph">java.sql.Array</code> types. So, instead of creating schema-level types that are mapped to PL/SQL package types for binding, you can describe and bind PL/SQL types using only the JDBC APIs.
                  </p>
                  <p>For example, you can call the <code class="codeph">Connection.createStruct(type_name)</code> method to first create a descriptor that can be used to describe a PL/SQL type and then to create a new <code class="codeph">STRUCT</code> representation of this type on the client. In Oracle Database 12<span class="italic">c </span>Release 1 (12.1), you can reuse this API by specifying <code class="codeph">type_name</code> as <code class="codeph">â€œschema.package.typename"</code> or <code class="codeph">â€œpackage.typename"</code>.
                  </p>
                  <p>All PL/SQL package types are mapped to a system-wide unique name that can be used by JDBC to retrieve the server-side type metadata. The name is in the following form:</p><pre class="oac_no_warn" dir="ltr">[SCHEMA.]&lt;PACKAGE&gt;.&lt;TYPE&gt;
</pre><div class="infoboxnote" id="GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2__GUID-0923B1EE-2898-4181-B061-961039E72742">
                     <p class="notep1">Note:</p>
                     <p>If the schema is the same as the package name, and if there is a type with the same name as the PL/SQL type, then it will not be able to identify an object with the two part name format, that is, &lt;package&gt;.&lt;type&gt;. In such cases, you must use three part names &lt;schema&gt;.&lt;package&gt;.&lt;type&gt;.</p>
                  </div>
                  <p>The following code snippet explains how to bind types declared in PL/SQL packages:</p><pre class="oac_no_warn" dir="ltr">/*
---------------------------
# Perform the following SQL operations prior to running this sample
---------------------------
conn HR/hr;
create or replace package TEST_PKG is
   type V_TYP is varray(10) of varchar2(200);
   type R_TYP is record(c1 pls_integer, c2 varchar2(100));
   procedure VARR_PROC(p1 in V_TYP, p2 OUT V_TYP);
   procedure REC_PROC(p1 in R_TYP, p2 OUT R_TYP);
end;
/
create or replace package body TEST_PKG is
 procedure VARR_PROC(p1 in V_TYP, p2 OUT V_TYP) is
  begin
    p2 := p1;
  end;
  procedure REC_PROC(p1 in R_TYP, p2 OUT R_TYP) is
  begin
    p2 := p1;
  end;
end;
/ 
*/

import java.sql.Array;
import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Struct;
import java.sql.Types;
 
import oracle.jdbc.OracleConnection;
public class PLSQLTypesSample
{
  public static void main(String[] args) throws SQLException
  {
    System.out.println("begin...");
    Connection conn = null;
    oracle.jdbc.pool.OracleDataSource ods = new oracle.jdbc.pool.OracleDataSource();
    ods.setURL("jdbc:oracle:oci:localhost:5521:orcl");
    ods.setUser("HR");
    ods.setPassword("hr"); 
    //get connection
    conn = ods.getConnection();
 
    //call procedure TEST_PKG.VARR_PROC
    CallableStatement cstmt = null;
    try {
      cstmt = conn.prepareCall("{ call TEST_PKG.VARR_PROC(?,?) }");
      //PLSQL VARRAY type binding
      Array arr = ((OracleConnection)conn).createArray("TEST_PKG.V_TYP", new String[]{"A", "B"});
      cstmt.setArray(1, arr);
      cstmt.registerOutParameter(2, Types.ARRAY, "TEST_PKG.V_TYP");
      cstmt.execute();
      //get PLSQL VARRAY type out parameter value
      Array outArr = cstmt.getArray(2);
      //... 
    }
    catch( Exception e) {
      e.printStackTrace();
    }finally {
      if (cstmt != null)
        cstmt.close();
    }
 
    //call procedure TEST_PKG.REC_PROC
    try {
      cstmt = conn.prepareCall("{ call TEST_PKG.REC_PROC(?,?) }");
      //PLSQL RECORD type binding
      Struct struct = conn.createStruct("TEST_PKG.R_TYP", new Object[]{12345, "B"});
      cstmt.setObject(1, struct);
      cstmt.registerOutParameter(2, Types.STRUCT, "TEST_PKG.R_TYP");
      cstmt.execute();
      //get PLSQL RECORD type out parameter value
      Struct outStruct = (Struct)cstmt.getObject(2);
      //... 
    }
    catch( Exception e) {
      e.printStackTrace();
    }finally {
      if (cstmt != null)
        cstmt.close();
    }
    
    if (conn != null) 
      conn.close(); 
      
    System.out.println("done!");
  }
}
</pre><div class="section">
                     <p class="subhead2" id="GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2__GUID-05D6757B-C351-4A52-97CD-78230C461053">Creating Java level objects for each row using %ROWTYPE Attribute</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>You can create Java-level objects using the <code class="codeph">%ROWTYPE</code> attribute. In this case, each row of the table is created as a <code class="codeph">java.sql.Struct</code> object. For example, if you have a package <code class="codeph">pack1</code> with the following specification:
                     </p>
                     <div class="infoboxnotealso" id="GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2__GUID-82313689-290B-4BCF-88D5-0896F2A7EB7C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../lnpls/ROWTYPE-attribute.html#LNPLS01342" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the <code class="codeph">%ROWTYPE</code> attribute
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE PACK1 AS
  TYPE EMPLOYEE_ROWTYPE_ARRAY IS TABLE OF EMPLOYEES%ROWTYPE;
END PACK1;
/
</pre><p>The following code snippet shows how you can retrieve the value of the <code class="codeph">EMPLOYEE_ROWTYPE_ARRAY</code> array using JDBC APIs:
                     </p>
                     <p>This example returns a <code class="codeph">java.sql.Array</code> of <code class="codeph">java.sql.Struct</code> objects, where every <code class="codeph">Struct</code> element represents one row of the <code class="codeph">EMPLOYEES</code> table.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E77C2AE8-E22B-48BF-A4CB-010CBC8FE7C2__CHEDCCHD">
                     <p class="titleinexample">Example A-1 Creating Struct Objects for Database Table Rows</p><pre class="oac_no_warn" dir="ltr">CallableStatement cstmt = conn.prepareCall("BEGIN SELECT * BULK COLLECT INTO :1 FROM EMPLOYEE; END;");
cstmt.registerOutParameter(1,OracleTypes.ARRAY, "PACK1.EMPLOYEE_ROWTYPE_ARRAY");
cstmt.execute();
Array a = cstmt.getArray(1);
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="JJDBC28914"></a><a id="JJDBC28913"></a><div class="props_rev_3"><a id="GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787" name="GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787"></a><h3 id="JJDBC-GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787" class="sect3"><span class="enumeration_section">A.4 </span>Using Embedded JDBC Escape Syntax
               </h3>
               <div>
                  <div class="section">
                     <p>Oracle <a id="d88087e1381" class="indexterm-anchor"></a><a id="d88087e1383" class="indexterm-anchor"></a>JDBC drivers support some embedded JDBC escape syntax, which is the syntax that you specify between curly braces. The current support is basic.
                     </p>
                     <div class="infoboxnote" id="GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787__GUID-3F85EA7F-2E98-41AF-AC57-1930CD39A87E">
                        <p class="notep1">Note:</p>
                        <p>JDBC escape syntax was previously known as SQL92 Syntax or SQL92 escape syntax.</p>
                     </div>
                     <p>This section describes the support offered by the drivers for the following constructs: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-FCB7E652-4532-47AF-9783-B7E2B6ADA41C">Time and Date Literals</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-9F59DD78-4FD3-4451-A27C-53505F842F15">Scalar Functions</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-5D371A5B-D7F6-42EB-8C0D-D317F3C53708">LIKE Escape Characters</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-3454411C-5F24-4D46-83A9-5DA0BA704F5D">MATCH_RECOGNIZE Clause</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-B0C6C3C6-9E3F-4428-876C-5C493A9D2624">Outer Joins</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-BE5C683E-0A2F-42D1-AF9B-7854BFAC4D53">Function Call Syntax</a></p>
                        </li>
                     </ul>
                     <p>Where driver support is limited, these sections also describe possible workarounds.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787__CHEFDIAB">
                     <p class="subhead2" id="GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787__GUID-092E10EB-F3E9-4295-8AD9-15B7027F4796">Disabling Escape Processing</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The <a id="d88087e1432" class="indexterm-anchor"></a>processing for JDBC escape syntax is enabled by default, which results in the JDBC driver performing escape substitution before sending the SQL code to the database. If you want the driver to use regular Oracle <a id="d88087e1435" class="indexterm-anchor"></a>SQL syntax, which is more efficient than JDBC escape syntax processing, then use this statement: 
                     </p><pre class="oac_no_warn" dir="ltr">stmt.setEscapeProcessing(false);
</pre></div>
                  <!-- class="section" -->
               </div><a id="JJDBC28915"></a><div class="props_rev_3"><a id="GUID-FCB7E652-4532-47AF-9783-B7E2B6ADA41C" name="GUID-FCB7E652-4532-47AF-9783-B7E2B6ADA41C"></a><h4 id="JJDBC-GUID-FCB7E652-4532-47AF-9783-B7E2B6ADA41C" class="sect4"><span class="enumeration_section">A.4.1 </span>Time and Date Literals
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e1464" class="indexterm-anchor"></a><a id="d88087e1468" class="indexterm-anchor"></a>Databases differ in the syntax they use for date, time, and timestamp literals. JDBC supports dates and times written only in a specific format. This section describes the formats you must use for date, time, and timestamp literals in SQL statements. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC28916"></a><div class="props_rev_3"><a id="GUID-A5DB6CFB-E0D6-4AC8-AF51-4E82452E48BF" name="GUID-A5DB6CFB-E0D6-4AC8-AF51-4E82452E48BF"></a><h5 id="JJDBC-GUID-A5DB6CFB-E0D6-4AC8-AF51-4E82452E48BF" class="sect5"><span class="enumeration_section">A.4.1.1 </span>Date Literals
                     </h5>
                     <div>
                        <div class="section">
                           <p>The JDBC drivers support date literals in SQL statements written in the format:</p><pre class="oac_no_warn" dir="ltr">{d 'yyyy-mm-dd'}
</pre><p>Where <code class="codeph">yyyy-mm-dd</code> represents the year, month, and day. For example:
                           </p><pre class="oac_no_warn" dir="ltr">{d '1995-10-22'}
</pre><p>The JDBC drivers will replace this escape clause with the equivalent Oracle representation: "22 OCT 1995".</p>
                           <p>The following code snippet contains an example of using a date literal in a SQL statement. </p><pre class="oac_no_warn" dir="ltr">// Connect to the database
// You can put a database name after the @ sign in the connection URL.
OracleDataSource ods = new OracleDataSource();
ods.setURL("jdbc:oracle:oci:@");
ods.setUser("HR");
ods.setPassword("hr");
Connection conn = ods.getConnection();

// Create a Statement
Statement stmt = conn.createStatement ();

// Select the first name column from the employees table where the hire date is Jan-23-1982
ResultSet rset = stmt.executeQuery 
                 ("SELECT first_name FROM employees WHERE hire_date = {d '1982-01-23'}");

// Iterate through the result and print the employee names
while (rset.next ())
   System.out.println (rset.getString (1));
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28917"></a><div class="props_rev_3"><a id="GUID-A9D9AB11-1CBB-4091-851D-2E0A0F280F08" name="GUID-A9D9AB11-1CBB-4091-851D-2E0A0F280F08"></a><h5 id="JJDBC-GUID-A9D9AB11-1CBB-4091-851D-2E0A0F280F08" class="sect5"><span class="enumeration_section">A.4.1.2 </span>Time Literals
                     </h5>
                     <div>
                        <div class="section">
                           <p>The JDBC drivers support time literals in SQL statements written in the format:</p><pre class="oac_no_warn" dir="ltr">{t 'hh:mm:ss'}
</pre><p>where, <code class="codeph">hh:mm:ss</code> represents the hours, minutes, and seconds. For example:
                           </p><pre class="oac_no_warn" dir="ltr">{t '05:10:45'}
</pre><p>The JDBC drivers will replace this escape clause with the equivalent Oracle representation: "05:10:45".</p>
                           <p>If the time is specified as:</p><pre class="oac_no_warn" dir="ltr">{t '14:20:50'}
</pre><p>Then the equivalent Oracle representation would be "14:20:50", assuming the server is using a 24-hour clock. </p>
                           <p>This code snippet contains an example of using a time literal in a SQL statement.</p><pre class="oac_no_warn" dir="ltr">ResultSet rset = stmt.executeQuery 
                 ("SELECT first_name FROM employees WHERE hire_date = {t '12:00:00'}");
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28919"></a><a id="JJDBC28918"></a><div class="props_rev_3"><a id="GUID-271C19F0-459D-4DA8-8C1D-F04AA5B8CD08" name="GUID-271C19F0-459D-4DA8-8C1D-F04AA5B8CD08"></a><h5 id="JJDBC-GUID-271C19F0-459D-4DA8-8C1D-F04AA5B8CD08" class="sect5"><span class="enumeration_section">A.4.1.3 </span>Timestamp Literals
                     </h5>
                     <div>
                        <div class="section">
                           <p>The JDBC drivers support timestamp literals in SQL statements written in the format:</p><pre class="oac_no_warn" dir="ltr">{ts 'yyyy-mm-dd hh:mm:ss.f...'} 
</pre><p>where <code class="codeph">yyyy-mm-dd hh:mm:ss.f...</code> represents the year, month, day, hours, minutes, and seconds. The fractional seconds portion (<code class="codeph">.f...</code>) is optional and can be omitted. For example: <code class="codeph">{ts '1997-11-01 13:22:45'}</code> represents, in Oracle format, NOV 01 1997 13:22:45. 
                           </p>
                           <p>This code snippet contains an example of using a timestamp literal in a SQL statement.</p><pre class="oac_no_warn" dir="ltr">ResultSet rset = stmt.executeQuery 
    ("SELECT first_name FROM employees WHERE hire_date = {ts '1982-01-23 12:00:00'}");
</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-271C19F0-459D-4DA8-8C1D-F04AA5B8CD08__GUID-83B0777E-468F-4FDD-B55C-C5A36D962C84">Mapping SQL DATE Data type to Java</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Oracle Database 8<span class="italic">i</span> and earlier versions did not support <code class="codeph">TIMESTAMP</code> data, but Oracle <code class="codeph">DATE</code> data used to have a time component as an extension to the SQL standard. So, Oracle Database 8<span class="italic">i</span> and earlier versions of JDBC drivers mapped <code class="codeph">oracle.sql.DATE</code> to <code class="codeph">java.sql.Timestamp</code> to preserve the time component. Starting with Oracle Database 9.0.1, <code class="codeph">TIMESTAMP</code> support was included and 9<span class="italic">i</span> JDBC drivers started mapping <code class="codeph">oracle.sql.DATE</code> to <code class="codeph">java.sql.Date</code>. This mapping was incorrect as it truncated the time component of Oracle <code class="codeph">DATE</code> data. To overcome this problem, Oracle Database 11<span class="italic">g</span> Release 1 introduced a new flag <code class="codeph">mapDateToTimestamp</code>. The default value of this flag is <code class="codeph">true</code>, which means that by default the drivers will correctly map <code class="codeph">oracle.sql.DATE</code> to <code class="codeph">java.sql.Timestamp</code>, retaining the time information. If you still want the incorrect but 10<span class="italic">g</span> compatible <code class="codeph">oracle.sql.DATE</code> to <code class="codeph">java.sql.Date</code> mapping, then you can get it by setting the value of <code class="codeph">mapDateToTimestamp</code> flag to <code class="codeph">false</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-271C19F0-459D-4DA8-8C1D-F04AA5B8CD08__GUID-CDBD8914-C61E-4AE4-A2DB-51C6D5A45A7D">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Since Oracle Database 11<span class="italic">g</span>, if you have an index on a DATE column to be used by a SQL query, then to obtain faster and accurate results, you must use the <code class="codeph">setObject</code> method in the following way:
                                    </p><pre class="oac_no_warn" dir="ltr">Date d = parseIsoDate(val);
Timestamp t = new Timestamp(d.getTime());
stmt.setObject(pos, new oracle.sql.DATE(t, (Calendar)UTC_CAL.clone()));
</pre><p>This is because if you use the <code class="codeph">setDate</code> method, then the time component of the Oracle DATE data will be lost and if you use the <code class="codeph">setTimestamp</code> method, then the index on the DATE column will not be used.
                                    </p>
                                 </li>
                                 <li>
                                    <p>To overcome the problem of <code class="codeph">oracle.sql.DATE</code> to <code class="codeph">java.sql.Date</code> mapping, Oracle Database 9.2 introduced a flag, <code class="codeph">V8Compatible</code>. The default value of this flag was <code class="codeph">false</code>, which allowed the mapping of Oracle <code class="codeph">DATE</code> data to <code class="codeph">java.sql.Date</code> data. But, users could retain the time component of the Oracle <code class="codeph">DATE</code> data by setting the value of this flag to <code class="codeph">true</code>. This flag is desupported since 11<span class="italic">g</span> because it controlled Oracle Database 8<span class="italic">i</span> compatibility, which is no longer supported.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="JJDBC28920"></a><div class="props_rev_3"><a id="GUID-9F59DD78-4FD3-4451-A27C-53505F842F15" name="GUID-9F59DD78-4FD3-4451-A27C-53505F842F15"></a><h4 id="JJDBC-GUID-9F59DD78-4FD3-4451-A27C-53505F842F15" class="sect4"><span class="enumeration_section">A.4.2 </span>Scalar Functions
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e1752" class="indexterm-anchor"></a><a id="d88087e1754" class="indexterm-anchor"></a>Oracle JDBC drivers do not support all scalar functions. To find out which functions the drivers support, use the following methods supported by the Oracle-specific <code class="codeph">oracle.jdbc.OracleDatabaseMetaData</code> class and the standard Java <code class="codeph">java.sql.DatabaseMetadata</code> interface: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">getNumericFunctions()</code></p>
                              <p>Returns a comma-delimited list of math functions supported by the driver. For example, <code class="codeph">ABS</code>, <code class="codeph">COS</code>, <code class="codeph">SQRT</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">getStringFunctions()</code></p>
                              <p>Returns a comma-delimited list of string functions supported by the driver. For example, <code class="codeph">ASCII</code>, <code class="codeph">LOCATE</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">getSystemFunctions()</code></p>
                              <p>Returns a comma-delimited list of system functions supported by the driver. For example, <code class="codeph">DATABASE</code>, <code class="codeph">USER</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">getTimeDateFunctions()</code></p>
                              <p>Returns a comma-delimited list of time and date functions supported by the driver. For example, <code class="codeph">CURDATE</code>, <code class="codeph">DAYOFYEAR</code>, <code class="codeph">HOUR</code>.
                              </p>
                              <div class="infoboxnote" id="GUID-9F59DD78-4FD3-4451-A27C-53505F842F15__GUID-E998A021-2B5A-4DD7-8BE7-686CB800D1EC">
                                 <p class="notep1">Note:</p>
                                 <p>Oracle JDBC drivers support <code class="codeph">fn</code>, the function keyword.
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28921"></a><div class="props_rev_3"><a id="GUID-5D371A5B-D7F6-42EB-8C0D-D317F3C53708" name="GUID-5D371A5B-D7F6-42EB-8C0D-D317F3C53708"></a><h4 id="JJDBC-GUID-5D371A5B-D7F6-42EB-8C0D-D317F3C53708" class="sect4"><span class="enumeration_section">A.4.3 </span>LIKE Escape Characters
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e1851" class="indexterm-anchor"></a><a id="d88087e1855" class="indexterm-anchor"></a>The characters <code class="codeph">%</code> and <code class="codeph">_</code> have special meaning in SQL <code class="codeph">LIKE</code> clauses. You use <code class="codeph">%</code> to match zero or more characters and <code class="codeph">_</code> to match exactly one character. If you want to interpret these characters literally in strings, then you precede them with a special escape character. For example, if you want to use ampersand (<code class="codeph">&amp;</code>) as the escape character, then you identify it in the SQL statement as:
                        </p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn.createStatement ();

// Select the empno column from the emp table where the ename starts with '_'
ResultSet rset = stmt.executeQuery
          ("SELECT empno FROM emp WHERE ename LIKE '&amp;_%' {ESCAPE '&amp;'}");

// Iterate through the result and print the employee numbers
while (rset.next ())
   System.out.println (rset.getString (1));
</pre><div class="infoboxnote" id="GUID-5D371A5B-D7F6-42EB-8C0D-D317F3C53708__GUID-BB92CBF9-B537-48F4-A1FC-CCBEFC7A97D5">
                           <p class="notep1">Note:</p>
                           <p> If you want to use the backslash character (\) as an escape character, then you must enter it twice, that is, \\. For example:</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">ResultSet rset = stmt.executeQuery("SELECT empno FROM emp</code>
<code class="codeph">                WHERE ename LIKE '\\_%' {escape '\\'}");</code>
</pre></div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3454411C-5F24-4D46-83A9-5DA0BA704F5D" name="GUID-3454411C-5F24-4D46-83A9-5DA0BA704F5D"></a><h4 id="JJDBC-GUID-3454411C-5F24-4D46-83A9-5DA0BA704F5D" class="sect4"><span class="enumeration_section">A.4.4 </span>MATCH_RECOGNIZE Clause
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">?</code> character is used as a token in <code class="codeph">MATCH_RECOGNIZE</code> clause in Oracle Database 11<span class="italic">g</span> and later versions. As the JDBC standard defines the <code class="codeph">?</code> character as a parameter marker, the JDBC Driver and the Server SQL Engine cannot distinguish between different uses of the same token. 
                        </p>
                        <p>In earlier versions of JDBC Driver, if you want to interpret the <code class="codeph">?</code> character as a <code class="codeph">MATCH_RECOGNIZE</code> token and not as a parameter marker, then you must use a <code class="codeph">Statement</code> instead of a <code class="codeph">PreparedStatement</code> and disable escape processing. However, starting from Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), you can use the '<code class="codeph">{\\ ... \\}'</code> syntax while using the <code class="codeph">?</code> character, so that the JDBC driver does not process it as a parameter marker and allows the SQL engine to process it. The following code snippet shows how to use the '<code class="codeph">{\\ ... \\}'</code> syntax: 
                        </p><pre class="oac_no_warn" dir="ltr">  String sql =
    "select T.firstW, T.lastZ, ? " +  // use of parameter marker
    "from tkpattern_S11 " +
    "MATCH_RECOGNIZE ( " +
    "    MEASURES A.c1 as firstW, last(Z.c1) as lastZ " +
    "    ALL MATCHES " +
    "    {\\ PATTERN(A? X*? Y+? Z??)\\} " +  // use of escape sequence
    "    DEFINE " +
    "        X as X.c2 &gt; prev(X.c2), " +
    "        Y as Y.c2 &lt; prev(Y.c2), " +
    "        Z as Z.c2 &gt; prev(Z.c2)" +
    ") as T";
  PreparedStatement ps = conn.prepareStatatement(sql);
  ps.setString(1, "test");
  ResultSet rs = ps.executeQuery();
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="JDBC-reference-information.html#GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787">Using Embedded JDBC Escape Syntax</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28922"></a><div class="props_rev_3"><a id="GUID-B0C6C3C6-9E3F-4428-876C-5C493A9D2624" name="GUID-B0C6C3C6-9E3F-4428-876C-5C493A9D2624"></a><h4 id="JJDBC-GUID-B0C6C3C6-9E3F-4428-876C-5C493A9D2624" class="sect4"><span class="enumeration_section">A.4.5 </span>Outer Joins
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e1987" class="indexterm-anchor"></a><a id="d88087e1989" class="indexterm-anchor"></a>Oracle JDBC drivers do not support the outer join syntax. The workaround is to use Oracle outer join syntax:
                        </p>
                        <p>Instead of:</p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn.createStatement ();
ResultSet rset = stmt.executeQuery
     ("SELECT ename, dname 
       FROM {OJ dept LEFT OUTER JOIN emp ON dept.deptno = emp.deptno} 
       ORDER BY ename");
</pre><p>Use Oracle SQL syntax:</p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn.createStatement ();
ResultSet rset = stmt.executeQuery
     ("SELECT ename, dname 
       FROM emp b, dept a WHERE a.deptno = b.deptno(+)
       ORDER BY ename");
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28923"></a><div class="props_rev_3"><a id="GUID-BE5C683E-0A2F-42D1-AF9B-7854BFAC4D53" name="GUID-BE5C683E-0A2F-42D1-AF9B-7854BFAC4D53"></a><h4 id="JJDBC-GUID-BE5C683E-0A2F-42D1-AF9B-7854BFAC4D53" class="sect4"><span class="enumeration_section">A.4.6 </span>Function Call Syntax
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e2027" class="indexterm-anchor"></a><a id="d88087e2031" class="indexterm-anchor"></a>Oracle JDBC drivers support the following procedure and function call syntax:
                        </p>
                        <p>Procedure calls: </p><pre class="oac_no_warn" dir="ltr">{ call <span class="italic">procedure_name</span> (<span class="italic">argument1</span>, <span class="italic">argument2</span>,...) } 
</pre><p>Function calls:</p><pre class="oac_no_warn" dir="ltr">{ ? = call <span class="italic">procedure_name</span> (<span class="italic">argument1</span>, <span class="italic">argument2</span>,...) }
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28924"></a><div class="props_rev_3"><a id="GUID-65F27495-9D7C-45B1-BE83-CBFC182EC686" name="GUID-65F27495-9D7C-45B1-BE83-CBFC182EC686"></a><h4 id="JJDBC-GUID-65F27495-9D7C-45B1-BE83-CBFC182EC686" class="sect4"><span class="enumeration_section">A.4.7 </span>JDBC Escape Syntax to Oracle SQL Syntax Example
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can write a simple program to translate JDBC escape syntax to Oracle SQL syntax. The following program prints the comparable Oracle SQL syntax for statements using JDBC escape syntax for function calls, date literals, time literals, and timestamp literals. In the program, the <a id="d88087e2091" class="indexterm-anchor"></a><code class="codeph">oracle.jdbc.OracleSql</code> class <code class="codeph">parse()</code> method performs the conversions.
                        </p><pre class="oac_no_warn" dir="ltr">public class Foo 
{ 
   static oracle.jdbc.OracleDriver driver = new oracle.jdbc.OracleDriver();
   public static void main (String args[]) throws Exception 
   { 
      show ("{call foo(?, ?)}"); 
      show ("{? = call bar (?, ?)}"); 
      show ("{d '1998-10-22'}"); 
      show ("{t '16:22:34'}"); 
      show ("{ts '1998-10-22 16:22:34'}"); 
   } 
 
   public static void show (String s) throws Exception 
   { 
      System.out.println (s + " =&gt; " + 
         driver.processSqlEscapes(s)); 
   } 
}
</pre><p>The following code is the output that prints the comparable SQL syntax.</p><pre class="oac_no_warn" dir="ltr">{call foo(?, ?)} =&gt; BEGIN foo(:1, :2); END; 
{? = call bar (?, ?)} =&gt; BEGIN :1 := bar (:2, :3); END;
{d '1998-10-22'} =&gt; TO_DATE ('1998-10-22', 'YYYY-MM-DD')
{t '16:22:34'} =&gt; TO_DATE ('16:22:34', 'HH24:MI:SS')
{ts '1998-10-22 16:22:34'} =&gt; TO_TIMESTAMP ('1998-10-22 16:22:34', 'YYYY-MM-DD 
HH24:MI:SS.FF')
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28925"></a><div class="props_rev_3"><a id="GUID-E8DF3990-1EB5-4185-989C-06D13740BD01" name="GUID-E8DF3990-1EB5-4185-989C-06D13740BD01"></a><h3 id="JJDBC-GUID-E8DF3990-1EB5-4185-989C-06D13740BD01" class="sect3"><span class="enumeration_section">A.5 </span>Oracle JDBC Notes and Limitations
               </h3>
               <div>
                  <div class="section">
                     <p>The following <a id="d88087e2130" class="indexterm-anchor"></a><a id="d88087e2134" class="indexterm-anchor"></a>limitations exist in the Oracle JDBC implementation, but all of them are either insignificant or have easy workarounds. This section covers the following topics:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-7011D030-6150-4E23-82B3-22BACD77FBDA">CursorName</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-F159927E-8C74-470E-BFBB-533A2C61718C">JDBC Outer Join Escapes</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-BAB18806-5800-4CF8-86CE-AFE5652FD7BD">IEEE 754 Floating Point Compliance</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-07453AC2-CFF8-42FA-8107-FE2AACF6AEF9">Catalog Arguments to DatabaseMetaData Calls</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-229AC112-6C98-4D70-AEC9-A22AC0BDA3BB">SQLWarning Class</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-F192A2C5-603E-42BD-A1CD-D7E94857C85E">Executing DDL Statements</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-reference-information.html#GUID-F9266B56-774F-4419-873E-C5625FE057D7">Binding Named Parameters</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC28926"></a><div class="props_rev_3"><a id="GUID-7011D030-6150-4E23-82B3-22BACD77FBDA" name="GUID-7011D030-6150-4E23-82B3-22BACD77FBDA"></a><h4 id="JJDBC-GUID-7011D030-6150-4E23-82B3-22BACD77FBDA" class="sect4"><span class="enumeration_section">A.5.1 </span>CursorName
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e2211" class="indexterm-anchor"></a>Oracle JDBC drivers do not support the <code class="codeph">getCursorName</code> and <code class="codeph">setCursorName</code> methods, because there is no convenient way to map them to Oracle constructs. Oracle recommends using <code class="codeph">ROWID</code> instead.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="Oracle-extensions.html#GUID-8069D705-A031-469D-855F-53525798F64F">Oracle ROWID Type</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28927"></a><div class="props_rev_3"><a id="GUID-F159927E-8C74-470E-BFBB-533A2C61718C" name="GUID-F159927E-8C74-470E-BFBB-533A2C61718C"></a><h4 id="JJDBC-GUID-F159927E-8C74-470E-BFBB-533A2C61718C" class="sect4"><span class="enumeration_section">A.5.2 </span>JDBC Outer Join Escapes
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e2260" class="indexterm-anchor"></a>Oracle JDBC drivers do not support JDBC outer join escapes. Use Oracle SQL syntax with + instead.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="JDBC-reference-information.html#GUID-DFF83C4A-D0F8-420C-BA66-8681B939B787">Using Embedded JDBC Escape Syntax</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28929"></a><div class="props_rev_3"><a id="GUID-BAB18806-5800-4CF8-86CE-AFE5652FD7BD" name="GUID-BAB18806-5800-4CF8-86CE-AFE5652FD7BD"></a><h4 id="JJDBC-GUID-BAB18806-5800-4CF8-86CE-AFE5652FD7BD" class="sect4"><span class="enumeration_section">A.5.3 </span>IEEE 754 Floating Point Compliance
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e2301" class="indexterm-anchor"></a><a id="d88087e2307" class="indexterm-anchor"></a><a id="d88087e2309" class="indexterm-anchor"></a>The arithmetic for the Oracle <code class="codeph">NUMBER</code> type does not comply with the IEEE 754 standard for floating-point arithmetic. Therefore, there can be small disagreements between the results of computations performed by Oracle and the same computations performed by Java.
                        </p>
                        <p>Oracle stores numbers in a format compatible with decimal arithmetic and guarantees 38 decimal digits of precision. It represents zero, minus infinity, and plus infinity exactly. For each positive number it represents, it represents a negative number of the same absolute value.</p>
                        <p>It represents every positive number between 10<sup>-30</sup> and (1 &#x2013; 10<sup>-38</sup>) * 10<sup>126 </sup>to full 38-digit precision.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28930"></a><div class="props_rev_3"><a id="GUID-07453AC2-CFF8-42FA-8107-FE2AACF6AEF9" name="GUID-07453AC2-CFF8-42FA-8107-FE2AACF6AEF9"></a><h4 id="JJDBC-GUID-07453AC2-CFF8-42FA-8107-FE2AACF6AEF9" class="sect4"><span class="enumeration_section">A.5.4 </span>Catalog Arguments to DatabaseMetaData Calls
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e2352" class="indexterm-anchor"></a><a id="d88087e2358" class="indexterm-anchor"></a><a id="d88087e2360" class="indexterm-anchor"></a>Certain <code class="codeph">DatabaseMetaData</code> methods define a <code class="codeph">catalog</code> parameter. This parameter is one of the selection criteria for the method. Oracle does not have multiple catalogs, but it does have packages.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="performance-extensions.html#GUID-15865071-39F2-430F-9EDA-EB34D0B2D560">About Reporting DatabaseMetaData TABLE_REMARKS</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28931"></a><div class="props_rev_3"><a id="GUID-229AC112-6C98-4D70-AEC9-A22AC0BDA3BB" name="GUID-229AC112-6C98-4D70-AEC9-A22AC0BDA3BB"></a><h4 id="JJDBC-GUID-229AC112-6C98-4D70-AEC9-A22AC0BDA3BB" class="sect4"><span class="enumeration_section">A.5.5 </span>SQLWarning Class
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d88087e2402" class="indexterm-anchor"></a><a id="d88087e2408" class="indexterm-anchor"></a>The <code class="codeph">java.sql.SQLWarning</code> class provides information about a database access warning. Warnings typically contain a description of the warning and a code that identifies the warning. Warnings are silently chained to the object whose method caused it to be reported. Oracle JDBC drivers generally do not support <code class="codeph">SQLWarning</code>. As an exception to this, scrollable result set operations do generate SQL warnings, but the <code class="codeph">SQLWarning</code> instance is created on the client, not in the database.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="JDBC-getting-started.html#GUID-E187D04E-B48D-4394-9DC5-1ECEEBC53AFD">About Processing SQL Exceptions</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28932"></a><div class="props_rev_3"><a id="GUID-F192A2C5-603E-42BD-A1CD-D7E94857C85E" name="GUID-F192A2C5-603E-42BD-A1CD-D7E94857C85E"></a><h4 id="JJDBC-GUID-F192A2C5-603E-42BD-A1CD-D7E94857C85E" class="sect4"><span class="enumeration_section">A.5.6 </span>Executing DDL Statements
                  </h4>
                  <div>
                     <div class="section">
                        <p>You must execute Data Definition Language (DDL) statements with <code class="codeph">Statement</code> objects. If you use <code class="codeph">PreparedStatements</code> objects or <code class="codeph">CallableStatements</code> objects, then the DDL statement takes effect only on the first execution. This can cause unexpected behavior if the SQL statements are in a statement cache.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28933"></a><div class="props_rev_3"><a id="GUID-F9266B56-774F-4419-873E-C5625FE057D7" name="GUID-F9266B56-774F-4419-873E-C5625FE057D7"></a><h4 id="JJDBC-GUID-F9266B56-774F-4419-873E-C5625FE057D7" class="sect4"><span class="enumeration_section">A.5.7 </span>Binding Named Parameters
                  </h4>
                  <div>
                     <div class="section">
                        <p>Binding by name is not supported when using the <code class="codeph">set</code><span class="italic"><code class="codeph">XXX</code></span> methods. Under certain circumstances, previous versions of Oracle JDBC drivers have allowed binding statement variables by name when using the <code class="codeph">set</code><span class="italic"><code class="codeph">XXX</code></span> methods. In the following statement, the named variable <code class="codeph">EmpId</code> would be bound to the integer <code class="codeph">314159</code>. 
                        </p><pre class="oac_no_warn" dir="ltr">PreparedStatement p = conn.prepareStatement
  ("SELECT name FROM emp WHERE id = :EmpId");
  p.setInt(1, 314159);
</pre><p>This capability to bind by name using the <code class="codeph">set</code><span class="italic"><code class="codeph">XXX</code></span> methods is not part of the JDBC specification, and Oracle does not support it. The JDBC drivers can throw a <code class="codeph">SQLException</code> or produce unexpected results. Starting from Oracle Database 10<span class="italic">g</span> JDBC drivers, bind by name is supported using the <code class="codeph">set</code><span class="italic"><code class="codeph">XXX</code></span><code class="codeph">AtName</code> methods.
                        </p>
                        <p>The bound values are not copied by the drivers until you call the <code class="codeph">execute</code> method. So, changing the bound value before calling the <code class="codeph">execute</code> method could change the bound value. For example, consider the following code snippet:
                        </p><pre class="oac_no_warn" dir="ltr">PreparedStatement p;
.......
Date d = new Date(1181676033917L);
p.setDate(1, d);
d.setTime(0);
p.executeUpdate();
</pre><p>This code snippet inserts <code class="codeph">Date(0)</code> in the database instead of <code class="codeph">Date(1181676033917L)</code> because the bound values are not copied by JDBC driver implementation for performance reasons.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="Oracle-extensions.html#GUID-0C1F7E0A-5A10-4E81-B789-F275D81E12F7">Interface oracle.jdbc.OracleCallableStatement</a></li>
                           <li><a href="Oracle-extensions.html#GUID-B5463D4F-6319-4A21-AB35-A5A7F3FDFC61">Interface oracle.jdbc.OraclePreparedStatement</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id='00027.extensible-optimizer-interface.html'></html><!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Extensible Optimizer Interface</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Cartridge Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Cartridge Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00">
      <meta name="dcterms.title" content="Data Cartridge Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96431-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="extensible-indexing-interface.html" title="Previous" type="text/html">
      <link rel="next" href="user-defined-aggregate-functions-interface.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="extensible-indexing-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="user-defined-aggregate-functions-interface.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Cartridge Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="reference.html" property="item" typeof="WebPage"><span property="name">Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Extensible Optimizer Interface</li>
            </ol>
            <a id="GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94" name="GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94"></a><a id="ADDCI4210"></a>
            
            <h2 id="ADDCI-GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94" class="sect2"><span class="enumeration_chapter">21 </span>Extensible Optimizer Interface
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Consider the functions and procedures that comprise the interface to the extensible optimizer.</p>
            </div><a id="ADDCI5082"></a><div class="props_rev_3"><a id="GUID-EF80CBFF-6B23-41DB-9777-29E630F47350" name="GUID-EF80CBFF-6B23-41DB-9777-29E630F47350"></a><h3 id="ADDCI-GUID-EF80CBFF-6B23-41DB-9777-29E630F47350" class="sect3"><span class="enumeration_section">21.1 </span>Extensible Optimizer Interface
               </h3>
               <div>
                  <p>The extensible optimizer interfaces support working with partitioned tables and domain indexes. This is accomplished in two ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Additional attributes have been added to some system-defined object types that are parameters to the <code class="codeph">ODCIStats</code> interface methods. For example, the <code class="codeph">ODCIColInfo</code> type is enhanced to add information about the column's partition.
                        </p>
                     </li>
                     <li>
                        <p>Arguments or semantics of the arguments have changed for some <code class="codeph">ODCIStats</code> methods.
                        </p>
                     </li>
                  </ul>
                  <p>Note that you must update your code for <code class="codeph">ODCIStats2</code> version of the <code class="codeph">ODCIStats</code> interfaces to use your statistics type with an indextype that implements the <code class="codeph">ODCIIndex2</code> version of the extensible indexing interfaces.
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007" name="GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007"></a><h4 id="ADDCI-GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007" class="sect4"><span class="enumeration_section">21.1.1 </span>Using Statistics Functions in an Extensible Optimizer Interface
                  </h4>
                  <div>
                     <div class="section">
                        <p>Consider an example of how the statistics functions might be used. </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In the schema <code class="codeph">HR</code>, we define the following operators:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OPERATOR Contains binding (VARCHAR2(4000), VARCHAR2(30))
   RETURN NUMBER USING Contains_fn;

CREATE TYPE stat1 (
   ...,
   STATIC FUNCTION ODCIStatsSelectivity(pred ODCIPredInfo, sel OUT NUMBER,
      args ODCIArgDescList, start NUMBER, stop NUMBER, doc VARCHAR2(4000),
      key VARCHAR2(30)) return NUMBER,
   STACTIC FUNCTION ODCIStatsFunctionCost(func ODCIFuncInfo, cost OUT
      ODCICost, args ODCIArgDescList, doc VARCHAR2(4000), key VARCHAR2(30))
      return NUMBER,
   STATIC FUNCTION ODCIStatsIndexCost(ia ODCIIndexInfo, sel NUMBER,
      cost OUT ODCICost, qi ODCIQueryInfo, pred ODCIPredInfo,
      args ODCIArgDescList, start NUMBER, stop NUMBER,
      key VARCHAR2(30)) return NUMBER,
   ...
);

CREATE TABLE T (resume VARCHAR2(4000));

CREATE INDEX T_resume on T(resume) INDEXTYPE IS indtype;

ASSOCIATE STATISTICS WITH FUNCTIONS Contains_fn USING stat1;

ASSOCIATE STATISTICS WITH INDEXTYPE indtype USING stat1 
&nbsp;&nbsp;&nbsp;WITH SYSTEM MANAGED STORAGE TABLES;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>The optimizer encounters the query</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM T WHERE Contains(resume, 'ORACLE') = 1,
</pre></div>
                        </li>
                        <li class="stepexpand"><span>It computes the selectivity of the predicate by invoking the user-defined selectivity function for the functional implementation of the <code class="codeph">Contains</code> operator. In this case, the selectivity function is <code class="codeph">stat1.ODCIStatsSelectivity</code>. It is called as follows:</span><div><pre class="oac_no_warn" dir="ltr"><code class="codeph">stat1.ODCIStatsSelectivity (</code>
<code class="codeph">   ODCIPredInfo('HR', 'Contains_fn', NULL, 29),</code>
<code class="codeph">   sel,</code>
<code class="codeph">   ODCIArgDescList(</code>
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgLit,</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL),
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgLit,</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL),
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgCol, 'T', 'HR', '"RESUME"', NULL, NULL, NULL),</code>
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgLit,</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL)),
<code class="codeph">      1,</code>
<code class="codeph">      1,</code>
<code class="codeph">      NULL,</code>
<code class="codeph">      'ORACLE')</code>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Suppose the selectivity function returns a selectivity of 3 (percent). When the domain index is being evaluated, then the optimizer calls the user-defined index cost function as follows:</span><div><pre class="oac_no_warn" dir="ltr">stat1.ODCIStatsIndexCost (   ODCIIndexInfo('HR', 'T_RESUME',      ODCIColInfoList(ODCIColInfo('HR', 'T', '"RESUME"', NULL, NULL, NULL, 0, 0, 0, 0)), NULL, 0, 0, 0, 0),      3,      cost,      NULL,      ODCIPredInfo('HR', 'Contains', NULL, 13),      ODCIArgDescList( ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL),                       ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL),                       ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL)),      1,      1,      'ORACLE')
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Suppose that the optimizer decides not to use the domain index because it is too expensive. Then it calls the user-defined cost function for the functional implementation of the operator as follows:</span><div><pre class="oac_no_warn" dir="ltr">stat1.ODCIStatsFunctionCost (
   ODCIFuncInfo('HR', 'Contains_fn', NULL, 1),
   cost,
   ODCIArgDescList(&nbsp;&nbsp;ODCIArgDesc(ODCIConst.ArgCol, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'T', 'HR', '"RESUME"', NULL, NULL, NULL),
                     ODCIArgDesc(ODCIConst.ArgLit, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL)),
   NULL,
   'ORACLE')
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADDCI5084"></a><div class="props_rev_3"><a id="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0" name="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0"></a><h4 id="ADDCI-GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0" class="sect4"><span class="enumeration_section">21.1.2 </span>EXPLAIN PLAN
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> shows the user-defined CPU and I/O costs for domain indexes in the <code class="codeph">CPU_COST</code> and <code class="codeph">IO_COST</code> columns of <code class="codeph">PLAN_TABLE</code>. For example, suppose we have a table <code class="codeph">Emp_tab</code> and a user-defined operator <code class="codeph">Contains</code>. Further, suppose that there is a domain index <code class="codeph">EmpResume_indx</code> on the <code class="codeph">Resume_col</code> column of <code class="codeph">Emp_tab</code>, and that the indextype of <code class="codeph">EmpResume_indx</code> supports the operator <code class="codeph">Contains</code>. Then, the query
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM Emp_tab WHERE Contains(Resume_col, 'Oracle') = 1
</pre><p>might have the following plan:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0__GUID-A0E58BE4-69F5-4E58-B966-E4996DFDF7CB">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="The following table provides an example of the EXPLAIN PLAN." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d75198e373">OPERATION</th>
                                 <th align="left" valign="bottom" width="15%" id="d75198e377">OPTIONS</th>
                                 <th align="left" valign="bottom" width="27%" id="d75198e380">OBJECT_NAME</th>
                                 <th align="left" valign="bottom" width="18%" id="d75198e383">CPU_COST</th>
                                 <th align="left" valign="bottom" width="17%" id="d75198e386">IO_COST</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d75198e391" headers="d75198e373 "><pre class="oac_no_warn" dir="ltr">SELECT STATEMENT</pre></td>
                                 <td align="left" valign="top" width="15%" headers="d75198e391 d75198e377 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="27%" headers="d75198e391 d75198e380 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="18%" headers="d75198e391 d75198e383 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="17%" headers="d75198e391 d75198e386 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d75198e403" headers="d75198e373 "><pre class="oac_no_warn" dir="ltr">TABLE ACCESS</pre></td>
                                 <td align="left" valign="top" width="15%" headers="d75198e403 d75198e377 "><pre class="oac_no_warn" dir="ltr">BY ROWID</pre></td>
                                 <td align="left" valign="top" width="27%" headers="d75198e403 d75198e380 "><pre class="oac_no_warn" dir="ltr">EMP_TAB</pre></td>
                                 <td align="left" valign="top" width="18%" headers="d75198e403 d75198e383 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="17%" headers="d75198e403 d75198e386 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d75198e417" headers="d75198e373 "><pre class="oac_no_warn" dir="ltr">DOMAIN INDEX</pre></td>
                                 <td align="left" valign="top" width="15%" headers="d75198e417 d75198e377 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="27%" headers="d75198e417 d75198e380 "><pre class="oac_no_warn" dir="ltr">EMPRESUME_INDX</pre></td>
                                 <td align="left" valign="top" width="18%" headers="d75198e417 d75198e383 "><pre class="oac_no_warn" dir="ltr">300</pre></td>
                                 <td align="left" valign="top" width="17%" headers="d75198e417 d75198e386 "><pre class="oac_no_warn" dir="ltr">4</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI5085"></a><div class="props_rev_3"><a id="GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21" name="GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21"></a><h4 id="ADDCI-GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21" class="sect4"><span class="enumeration_section">21.1.3 </span>INDEX Hint
                  </h4>
                  <div>
                     <div class="section">
                        <p>The index hint applies to domain indexes. In other words, the index hint forces the optimizer to use the hinted index for a user-defined operator, if possible.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5086"></a><div class="props_rev_3"><a id="GUID-53F41476-C56D-42F9-9442-57612A993026" name="GUID-53F41476-C56D-42F9-9442-57612A993026"></a><h4 id="ADDCI-GUID-53F41476-C56D-42F9-9442-57612A993026" class="sect4"><span class="enumeration_section">21.1.4 </span>ORDERED_PREDICATES Hint
                  </h4>
                  <div>
                     <div class="section">
                        <p>The hint <code class="codeph">ORDERED_PREDICATES</code> forces the optimizer to preserve the order of predicate evaluation (except predicates used for index keys) as specified in the <code class="codeph">WHERE</code> clause of a SQL DML statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADDCI5088"></a><a id="ADDCI5087"></a><div class="props_rev_3"><a id="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D" name="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D"></a><h3 id="ADDCI-GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D" class="sect3"><span class="enumeration_section">21.2 </span>User-Defined ODCIStats Functions
               </h3>
               <div>
                  <div class="section">
                     <p>User-defined <code class="codeph">ODCIStats</code> functions are used for table columns, functions, package, type, indextype or domain indexes.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D__GUID-4DAE6E6B-0196-423F-9E3C-546072D77B50">
                     <p class="titleintable">Table 21-1 Summary of User-Defined ODCIStats Functions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of User-Defined ODCIStats Functions" summary="Column 1 gives the function name, Column two provides its description" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="42%" id="d75198e620">Function</th>
                              <th align="left" valign="bottom" width="58%" id="d75198e623">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e628" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-866750E9-7193-458B-B29C-6A494094DF6C">ODCIGetInterfaces()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e628 d75198e623 ">
                                 <p>Discover which version of the <code class="codeph">ODCIStats</code> interface the user has implemented.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e640" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e640 d75198e623 ">
                                 <p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics on a table, a partition of a table, an index, or a partition of an index.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e652" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e652 d75198e623 ">
                                 <p>Deletes user-defined statistics on a table, a partition of a table, an index, or a partition of an index.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e661" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e661 d75198e623 ">
                                 <p>Computes the cost of a function.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e670" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e670 d75198e623 ">
                                 <p>Exchanges domain index statistics when an <code class="codeph">ALTER TABLE EXCHANGE PARTITION ... INCLULDING INDEXES</code> command is issued.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e682" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e682 d75198e623 ">
                                 <p>Calculates the cost of a domain index scan.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e691" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e691 d75198e623 ">
                                 <p>Specifies the selectivity of a predicate.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e700" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C">ODCIStatsTableFunction()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e700 d75198e623 ">
                                 <p>Provides cardinality statistics for table functions and input cursor expressions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d75198e709" headers="d75198e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d75198e709 d75198e623 ">
                                 <p>Updates statistics during partition maintenance operations. Patches the domain index statistics.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ADDCI5090"></a><a id="ADDCI5091"></a><a id="ADDCI5089"></a><div class="props_rev_3"><a id="GUID-866750E9-7193-458B-B29C-6A494094DF6C" name="GUID-866750E9-7193-458B-B29C-6A494094DF6C"></a><h4 id="ADDCI-GUID-866750E9-7193-458B-B29C-6A494094DF6C" class="sect4"><span class="enumeration_section">21.2.1 </span>ODCIGetInterfaces()
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCIGetInterfaces</code> is invoked by the server to discover which version of the <code class="codeph">ODCIStats</code> interface the user has implemented in the methods of the user-defined statistics type. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-866750E9-7193-458B-B29C-6A494094DF6C__GUID-69121109-0C5A-4B78-A2BA-FB430E918DF1">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIGetInterfaces(
&nbsp;&nbsp;&nbsp;ifclist OUT ODCIObjectList)
RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-866750E9-7193-458B-B29C-6A494094DF6C__GUID-819AE6D9-3271-4EED-AF67-2C3B59346622">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d75198e795">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e798">IN/OUT</th>
                                 <th align="left" valign="bottom" width="72%" id="d75198e801">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d75198e806" headers="d75198e795 "><pre class="oac_no_warn" dir="ltr">ifclist</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e806 d75198e798 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="72%" headers="d75198e806 d75198e801 ">
                                    <p>The version of the <code class="codeph">ODCIStats</code> interfaces implemented by the statistics type. This value should be <code class="codeph">SYS.ODCISTATS2</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-866750E9-7193-458B-B29C-6A494094DF6C__GUID-292C20CE-163A-4BCB-99E3-E8D10285E604">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code> on success, <code class="codeph">ODCIConst.Error</code> otherwise.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5094"></a><a id="ADDCI5095"></a><a id="ADDCI5093"></a><div class="props_rev_3"><a id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87" name="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87"></a><h4 id="ADDCI-GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87" class="sect4"><span class="enumeration_section">21.2.2 </span>ODCIStatsCollect()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-56AAA2E0-2EFC-4EF9-9B79-FBAA4E23E511">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="Column 1 has lists the version of a function and column 2 gives its description." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="41%" id="d75198e901">Syntax</th>
                                 <th align="left" valign="bottom" width="59%" id="d75198e904">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d75198e909" headers="d75198e901 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsCollect(
&nbsp;&nbsp;&nbsp;col ODCIColInfo, 
&nbsp;&nbsp;&nbsp;options ODCIStatsOptions, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="59%" headers="d75198e909 d75198e904 ">
                                    <p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics on a table or a partition of a table.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d75198e919" headers="d75198e901 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsCollect(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;options ODCIStatsOptions, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW,
&nbsp;&nbsp;&nbsp;env ODCIEnv)
 return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="59%" headers="d75198e919 d75198e904 ">
                                    <p>Called to collect user-defined statistics on an index or a partition of an index.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-1C66368D-E893-40B3-897A-EA2EF13D0B10">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d75198e934">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e937">IN/OUT</th>
                                 <th align="left" valign="bottom" width="70%" id="d75198e940">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d75198e945" headers="d75198e934 ">
                                    <p><code class="codeph">col</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e945 d75198e937 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="70%" headers="d75198e945 d75198e940 ">
                                    <p>Column for which statistics are being collected</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d75198e956" headers="d75198e934 ">
                                    <p><code class="codeph">options</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e956 d75198e937 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="70%" headers="d75198e956 d75198e940 ">
                                    <p>Options passed to <code class="codeph">DBMS_STATS</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d75198e969" headers="d75198e934 ">
                                    <p><code class="codeph">statistics</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e969 d75198e937 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="70%" headers="d75198e969 d75198e940 ">
                                    <p>User-defined statistics collected</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d75198e980" headers="d75198e934 ">
                                    <p>env</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e980 d75198e937 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="70%" headers="d75198e980 d75198e940 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d75198e990" headers="d75198e934 ">
                                    <p><code class="codeph">ia</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e990 d75198e937 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="70%" headers="d75198e990 d75198e940 ">
                                    <p>Domain index for which statistics are being collected</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-87986909-2531-467D-A37A-A083EC43C430">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The function returns <code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-ED815DD9-7364-4C66-AD06-6172DBCB6E01">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This function should be implemented as a <code class="codeph">STATIC</code> type method.
                              </p>
                           </li>
                           <li>
                              <p>If statistics are being collected for only one partition, the <code class="codeph">TablePartition</code> field in the <code class="codeph">ODCIColInfo</code> type is filled in with the name of the partition. Otherwise (if statistics must be collected for all the partitions or for the entire table), the <code class="codeph">TablePartition</code> field is null. 
                              </p>
                           </li>
                           <li>
                              <p>If the <code class="codeph">DBMS_STATS</code> package methods are executed to collect user-defined statistics on a partitioned table, then <code class="codeph">n+1</code> <code class="codeph">ODCIStatsCollect</code> calls are made, where <code class="codeph">n</code> is the number of partitions in the table. The first <code class="codeph">n</code> calls are made with the <code class="codeph">TablePartition</code> attribute in <code class="codeph">ODCIColInfo</code> filled in with the partition name and the <code class="codeph">ODCIStatsOptions.CallProperty</code> set to <code class="codeph">IntermediateCall</code>. The last call is made with <code class="codeph">ODCIEnv.CallPropertyflag</code> set to <code class="codeph">FinalCall</code> to allow you to collect aggregate statistics for the entire table.
                              </p>
                           </li>
                           <li>
                              <p>If user-defined statistics are being collected for only one partition of the table, two <code class="codeph">ODCIStatsCollect</code> calls are made. In the first, you should collect statistics for the partition. For this call, the <code class="codeph">TablePartition</code> attribute of the <code class="codeph">ODCIColInfo</code> structure is filled in and the <code class="codeph">ODCIEnv.CallProperty</code> is set to <code class="codeph">FirstCall</code>. 
                              </p>
                           </li>
                           <li>
                              <p>In the second call you can update the aggregate statistics of the table based upon the new statistics collected for the partition. In this call, the <code class="codeph">ODCIEnv.CallPropertyflag</code> is set to <code class="codeph">FinalCall</code> to indicate that it is the second call. The <code class="codeph">ODCIColInfo.TablePartition</code> is filled in with the partition name in both the calls. 
                              </p>
                           </li>
                           <li>
                              <p>The <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> method is invoked only one time for a non-partitioned domain index, a partitioned domain index and a partition in a domain index. If the statistics are being collected only for one partition in a domain index, the <code class="codeph">IndexPartitionNum</code> field in the <code class="codeph">ODCIIndexInfo</code> type is filled in with the partition number. Otherwise, the <code class="codeph">IndexPartitionNum</code> field is <code class="codeph">null</code>.
                              </p>
                           </li>
                           <li>
                              <p>Because the statistics <code class="codeph">OUT RAW</code> argument of statistics is not used in the new interface, the cartridge developer should store the user-defined statistics result in some user-defined tables.
                              </p>
                           </li>
                           <li>
                              <p>If a non-partitioned domain index is being <code class="codeph">ANALYZE</code>d, the user should collect statistics for the domain index.
                              </p>
                           </li>
                           <li>
                              <p>If a partitioned domain index is being <code class="codeph">ANALYZE</code>d,
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should collect statistics for all partitions in the domain index and then aggregate statistics of the domain index based upon the statistics collected for all the partitions
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should aggregate domain index statistics from the statistics of all the domain index partitions.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> means that the user should collect statistics for all index partitions in the domain index.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If only one partition of the domain index is being <code class="codeph">ANALYZE</code>d,
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should collect statistics for the single index partition and then aggregate statistics of the domain index based upon the statistics of all the partitions.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should aggregate domain index statistics from the statistics of all the index partitions.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> means that the user should collect statistics for the single index partition.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Note that when <code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> or <code class="codeph">StatsGlobal</code>, the user should aggregate statistics for the domain index, depending on the availability of the statistics collected for the other index partitions. If the statistics for all the index partitions are available, aggregate these statistics. If any one statistics for an index partition is absent, do nothing.
                              </p>
                           </li>
                           <li>
                              <p>To properly collect the statistics for a local system-managed domain index, the <code class="codeph">IndexInfoFlags</code> and <code class="codeph">IndexPartition</code> fields in the <code class="codeph">ODCIIndexInfo</code> argument and the <code class="codeph">CallProperty</code> in the <code class="codeph">ODCIEnv</code> argument must be selected.
                              </p>
                           </li>
                           <li>
                              <p>The values in <code class="codeph">ODCIIndexInfo.IndexPartition</code> can be used to determine whether statistics need to be collected for all index partitions or subpartitions. Select the following flags to determine the partition level for statistics collection.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If <code class="codeph">ODCIConst.SubPartn</code> and <code class="codeph">ODCIConst.CompPartn</code> are set, then statistics need to be collected for a single subpartition.
                                    </p>
                                    <div class="infoboxnote" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-6D3402CE-AF16-41C3-B343-93A6CFB8F654">
                                       <p class="notep1">Note:</p>
                                       <p>The <code class="codeph">ODCIConst.SubPartn</code> will never be set if <code class="codeph">ODCIIndexInfo.IndexPartition</code> is not set.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>If <code class="codeph">ODCIConst.CompPartn</code> is set, but <code class="codeph">ODCIConst.SubPartn</code> is not set; then statistics need to be collected for all subpartitions of the composite partition and the composite partition itself. If <code class="codeph">ODCIIndexInfo.IndexPartition</code> is not set, then statistics are collected in the same manner for all composite partitions of the index.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If neither <code class="codeph">ODCIConst.CompPartn</code> nor <code class="codeph">ODCIConst.SubPartn</code> are set, then the index is not composite partitioned and statistics need to be collected for the specified partition. If <code class="codeph">ODCIIndexInfo.IndexPartition</code> is not set, then statistics are collected for all partitions.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5097"></a><a id="ADDCI5098"></a><a id="ADDCI5096"></a><div class="props_rev_3"><a id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2" name="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2"></a><h4 id="ADDCI-GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2" class="sect4"><span class="enumeration_section">21.2.3 </span>ODCIStatsDelete()
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCIStatsDelete</code> is called to delete user-defined statistics.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-D553F464-5495-44C0-9B16-113EBBB45FAB">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="Column 1 has lists the version of a function and column 2 gives its description." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d75198e1325">Syntax</th>
                                 <th align="left" valign="bottom" width="61%" id="d75198e1328">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d75198e1333" headers="d75198e1325 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsDelete(
&nbsp;&nbsp;&nbsp;col ODCIColInfo, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d75198e1333 d75198e1328 ">
                                    <p>Deletes user-defined statistics on a table or a partition of a table.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d75198e1340" headers="d75198e1325 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsDelete(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW, 
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d75198e1340 d75198e1328 ">
                                    <p>Deletes user-defined statistics on an index or a partition of an index.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-7CF81EA1-350B-4618-B1D1-6576A1A38597">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e1355">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e1358">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e1361">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1366" headers="d75198e1355 ">
                                    <p><code class="codeph">col</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1366 d75198e1358 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1366 d75198e1361 ">
                                    <p>Column for which statistics are being deleted</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1377" headers="d75198e1355 ">
                                    <p><code class="codeph">statistics</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1377 d75198e1358 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1377 d75198e1361 ">
                                    <p>Contains table-level aggregate statistics for a partitioned table or index</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1388" headers="d75198e1355 ">
                                    <p><code class="codeph">env</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1388 d75198e1358 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1388 d75198e1361 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1399" headers="d75198e1355 ">
                                    <p><code class="codeph">ia</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1399 d75198e1358 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1399 d75198e1361 ">
                                    <p>Domain index for which statistics are deleted</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-5B046258-EBCB-48D5-874D-940B7290C102">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-6C0D440E-12AD-4E9A-A9A0-53F9A7FB6BE0">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This function should be implemented as a <code class="codeph">STATIC</code> method.
                              </p>
                           </li>
                           <li>
                              <p>When the function is called for a non-partitioned table, the <code class="codeph">statistics</code> argument in the <code class="codeph">ODCIStatsDelete</code> interface is ignored. 
                              </p>
                           </li>
                           <li>
                              <p>If the statistics are being deleted for a partitioned table, the <code class="codeph">ODCIStatsDelete</code> is called <code class="codeph">n+1</code> times. The first <code class="codeph">n</code> calls are with the partition name filled in the <code class="codeph">ODCIColInfo</code> structure and the <code class="codeph">ODCIEnv.CallProperty</code> set to <code class="codeph">IntermediateCall</code>. The last call is made with the <code class="codeph">ODCIEnv.CallProperty</code> set to <code class="codeph">FinalCall</code>.
                              </p>
                           </li>
                           <li>
                              <p>In the first call, delete the statistics for the specific partitions; and in the last call drop or clean up any structures created for holding statistics for the deleted table. The <code class="codeph">ODCIColInfo.TablePartition</code> is set to null in the last call. In the first call, the <code class="codeph">TablePartition</code> field is filled in.
                              </p>
                           </li>
                           <li>
                              <p>If statistics are being deleted for only one partition and the <code class="codeph">_minimal_stats_aggregation</code> parameter is set to <code class="codeph">FALSE</code>, two <code class="codeph">ODCIStatsDelete</code> calls are made. In each call, <code class="codeph">ODCIColInfo.TablePartition</code> is filled in with the partition name. On the first call, delete any user-defined statistics collected for that partition. On the second call, update the aggregate statistics for the table. 
                              </p>
                           </li>
                           <li>
                              <p>If statistics are being deleted for one partition and <code class="codeph">_minimal_stats_aggregation</code> is set to <code class="codeph">TRUE</code>, <code class="codeph">ODCIStatsDelete</code> is only called one to delete any user-defined statistics collected for that partition.
                              </p>
                           </li>
                           <li>
                              <p>The initial value of <code class="codeph">_minimal_stats_aggregation</code> is <code class="codeph">TRUE</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a> method is invoked only one time for non-partitioned domain index, partitioned domain index, or an index partition.
                              </p>
                           </li>
                           <li>
                              <p>If the statistics is being deleted for a non-partitioned domain index, the user should delete user-defined statistics for the domain index.</p>
                           </li>
                           <li>
                              <p>If the statistics is being deleted for a partitioned domain index, the user should delete the aggregated statistics of the domain index and optionally delete user-defined statistics for all domain index partitions, depending on <code class="codeph">Options</code> in <code class="codeph">ODCIEnv.CallProperty</code>:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should delete statistics for all the domain index partitions and aggregated statistics of the domain index.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should delete the aggregated statistics of the domain index.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> is not valid option.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If the statistics is being deleted for only one partition of the index, the user should delete user-defined statistics for the index partition.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5100"></a><a id="ADDCI5101"></a><a id="ADDCI5102"></a><a id="ADDCI5099"></a><div class="props_rev_3"><a id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1" name="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1"></a><h4 id="ADDCI-GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1" class="sect4"><span class="enumeration_section">21.2.4 </span>ODCIStatsFunctionCost()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Computes the cost of a function.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1__GUID-B8F15675-8916-4CE2-82E5-C5651AF103AE">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsFunctionCost(
&nbsp;&nbsp;&nbsp;func ODCIFuncInfo, 
&nbsp;&nbsp;&nbsp;cost OUT ODCICost, 
&nbsp;&nbsp;&nbsp;args ODCIArgDescList, 
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1__GUID-897555F1-7343-4C0C-AF2A-A96470C2EC61">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e1631">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e1634">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e1637">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1642" headers="d75198e1631 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">func</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1642 d75198e1634 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1642 d75198e1637 ">
                                    <p>Function or type method for which the cost is being computed</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1653" headers="d75198e1631 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">cost</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1653 d75198e1634 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1653 d75198e1637 ">
                                    <p>Computed cost (must be positive whole numbers)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1664" headers="d75198e1631 "><pre class="oac_no_warn" dir="ltr">args</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1664 d75198e1634 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1664 d75198e1637 ">
                                    <p>Descriptor of actual arguments with which the function or type method was called. If the function has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n </span>elements, each describing the actual arguments of the function or type method
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1683" headers="d75198e1631 "><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">list</code></span></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1683 d75198e1634 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1683 d75198e1637 ">
                                    <p>List of actual parameters to the function or type method; the number, position, and type of each argument must be identical in the function or type method.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1695" headers="d75198e1631 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1695 d75198e1634 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1695 d75198e1637 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1__GUID-3457F817-BCD9-4A63-BDC4-04FE0C027C87">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1__GUID-0BF536EA-E5E0-4F30-82FC-66F2DC717F4B">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This function should be implemented as a static type method.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5104"></a><a id="ADDCI5105"></a><a id="ADDCI5106"></a><a id="ADDCI5103"></a><div class="props_rev_3"><a id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6" name="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6"></a><h4 id="ADDCI-GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6" class="sect4"><span class="enumeration_section">21.2.5 </span>ODCIStatsExchangePartition()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Exchanges domain index statistics when an <code class="codeph">ALTER TABLE EXCHANGE PARTITION ... INCLULDING INDEXES</code> command is issued.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6__GUID-8915CEE9-65AD-4CBE-BFD7-D6CEF0E0A0E1">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsExchangePartition(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;ia1 ODCIIndexInfo,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6__GUID-7A85A8AF-0C24-4B2A-9677-7DA9056BC1E9">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e1801">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e1804">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e1807">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1812" headers="d75198e1801 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ia</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1812 d75198e1804 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1812 d75198e1807 ">
                                    <p>Information about the index partition that must be exchanged</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1823" headers="d75198e1801 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ia1</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1823 d75198e1804 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1823 d75198e1807 ">
                                    <p>Information about the index of the non-partitioned table with which the partition is exchanged</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1834" headers="d75198e1801 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1834 d75198e1804 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1834 d75198e1807 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6__GUID-7C4EB513-CD2B-4C78-83C1-D98B89DCE5BB">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6__GUID-7CFADE52-722E-4B05-A080-9FD31CFABF32">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This method should be implemented as a <code class="codeph">STATIC</code> type.
                              </p>
                           </li>
                           <li>
                              <p>This method should be capable of converting the statistics associated with a domain index partition into statistics associated with a non-partitioned domain index, and the reverse. If the statistics are missing for one of the indexes or index partitions, the user should be able to delete these statistics.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5108"></a><a id="ADDCI5109"></a><a id="ADDCI5110"></a><a id="ADDCI5107"></a><div class="props_rev_3"><a id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777" name="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777"></a><h4 id="ADDCI-GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777" class="sect4"><span class="enumeration_section">21.2.6 </span>ODCIStatsIndexCost()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Calculates the cost of a domain index scan, either a scan of the entire index or a scan of one or more index partitions if a local domain index has been built.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-90BCAE76-0BBC-414D-B878-8D650764EE03">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsIndexCost(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;sel NUMBER, 
&nbsp;&nbsp;&nbsp;cost OUT ODCICost, 
&nbsp;&nbsp;&nbsp;qi ODCIQueryInfo, 
&nbsp;&nbsp;&nbsp;pred ODCIPredInfo, 
&nbsp;&nbsp;&nbsp;args ODCIArgDescList,
&nbsp;&nbsp;&nbsp;start <span class="italic">operator_return_type</span>,
&nbsp;&nbsp;&nbsp;stop <span class="italic">operator_return_type</span>,
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>, 
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-31D25B12-8FBC-4C5E-B78D-85F4CF292936">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e1955">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e1958">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e1961">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1966" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ia</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1966 d75198e1958 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1966 d75198e1961 ">
                                    <p>domain index for which statistics are being collected</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1977" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">sel</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1977 d75198e1958 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1977 d75198e1961 ">
                                    <p>the user-computed selectivity of the predicate</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1988" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">cost</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1988 d75198e1958 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1988 d75198e1961 ">
                                    <p>computed cost (must be positive whole numbers)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e1999" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">qi</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e1999 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e1999 d75198e1961 ">
                                    <p>Information about the query</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2010" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr">pred</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2010 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2010 d75198e1961 ">
                                    <p>Information about the predicate</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2020" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr">args</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2020 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2020 d75198e1961 ">
                                    <p>Descriptor of <code class="codeph">start</code>, <code class="codeph">stop</code>, and actual value arguments with which the operator was called. If the operator has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n+1</span> elements, the first element describing the start value, the second element describing the stop value, and the remaining <span class="italic">n-1</span> elements describing the actual value arguments of the operator (that is, the arguments after the first)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2049" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr">start</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2049 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2049 d75198e1961 ">
                                    <p>Lower bound of the operator (for example, 2 for a predicate<code class="codeph"> fn(...)</code> &gt; <code class="codeph">2)</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2064" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr">stop</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2064 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2064 d75198e1961 ">
                                    <p>Upper bound of the operator (for example, 5 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&lt;</code> <code class="codeph">5</code>)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2083" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">list</code></span></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2083 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2083 d75198e1961 ">
                                    <p>List of actual parameters to the operator (excluding the first); the number, position, and type of each argument must be identical to the one in the operator.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2095" headers="d75198e1955 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2095 d75198e1958 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2095 d75198e1961 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-4079378C-3CFE-4ADC-AA35-6F4249C62B29">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-A49E4397-85BB-4611-8E7B-8A899EBB0886">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For each table in the query, the optimizer uses partition pruning to determine the range of partitions that may be accessed. These partitions are called <span class="bold">interesting partitions</span>. The set of interesting partitions for a table is also the set of interesting partitions for all domain indexes on that table. The cost of a domain index can depend on the set of interesting partitions, so the optimizer passes a list of interesting index partitions to <code class="codeph">ODCIStatsIndexCost</code> in the <code class="codeph">args</code> argument (the type of this argument, <code class="codeph">ODCIArgDescList</code>, is a list of <code class="codeph">ODCIArgDesc</code> argument descriptor types) for those arguments that are columns. For non-partitioned domain indexes or for cases where no partition pruning is possible, no partition list is passed to <code class="codeph">ODCIStatsIndexCost</code>, and you should assume that the entire index is accessed.
                              </p>
                           </li>
                           <li>
                              <p>The domain index key can contain multiple column arguments (for example, the indexed column and column arguments from other tables appearing earlier in a join order). For each column appearing in the index key, the <code class="codeph">args</code> argument contains the list of interesting partitions for the table. For example, for an index key
                              </p><pre class="oac_no_warn" dir="ltr">op(T1.c1, T2.c2) = 1
</pre><p>the optimizer passes a list of interesting partitions for tables <code class="codeph">T1</code> and <code class="codeph">T2</code> if they are partitioned and there is partition pruning for them.
                              </p>
                           </li>
                           <li>
                              <p>This function should be implemented as a static type method.</p>
                           </li>
                           <li>
                              <p>Only a single call is made to the <code class="codeph">ODCIStatsIndexCost()</code> function for queries on partitioned or non-partitioned tables. For queries on partitioned tables, additional information is passed in the <code class="codeph">ODCIStatsIndexCost()</code> function. Note that some partitions in the list passed to <code class="codeph">ODCIStatsIndexCost()</code> may not actually be accessed by the query. The list of interesting partitions chiefly serves to exclude partitions that are definitely not accessed.
                              </p>
                           </li>
                           <li>
                              <p>When the <code class="codeph">ODCIStatsIndexCost()</code> function is invoked, users can fill in a string in the <code class="codeph">IndexCostInfo</code> field of the cost attribute to supply any additional information that might be helpful. The string (255 characters maximum) is displayed in the <code class="codeph">OPTIONS</code> column in the <code class="codeph">EXPLAIN PLAN</code> output when an execution plan chooses a domain index scan.
                              </p>
                           </li>
                           <li>
                              <p>Users implementing this function must return <code class="codeph">'SYS.ODCISTATS2'</code> in the <code class="codeph">ODCIGetInterfaces()</code> call.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-A25F65A1-01CB-4C20-8582-A26EAEEE1E7E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="extensible-optimizer-interface.html#GUID-866750E9-7193-458B-B29C-6A494094DF6C">ODCIGetInterfaces()</a></p>
                              </li>
                              <li>
                                 <p><a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5112"></a><a id="ADDCI5113"></a><a id="ADDCI5114"></a><a id="ADDCI5111"></a><div class="props_rev_3"><a id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3" name="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3"></a><h4 id="ADDCI-GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3" class="sect4"><span class="enumeration_section">21.2.7 </span>ODCIStatsSelectivity()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Specifies the selectivity of a predicate. The selectivity of a predicate involving columns from a single table is the fraction of rows of that table that satisfy the predicate. For predicates involving columns from multiple tables (for example, join predicates), the selectivity should be computed as a fraction of rows in the Cartesian product of those tables. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3__GUID-4651A5EE-712C-4E31-A41D-C2053DBB8FD2">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsSelectivity(
&nbsp;&nbsp;&nbsp;pred ODCIPredInfo, 
&nbsp;&nbsp;&nbsp;sel OUT NUMBER, 
&nbsp;&nbsp;&nbsp;args ODCIArgDescList, 
&nbsp;&nbsp;&nbsp;start <span class="italic">function_return_type</span>, 
&nbsp;&nbsp;&nbsp;stop <span class="italic">function_return_type</span>, 
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>, 
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3__GUID-494B36B1-4C1B-4DB5-AEBC-4768A2410335">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e2293">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e2296">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e2299">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2304" headers="d75198e2293 ">
                                    <p><code class="codeph">pred</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2304 d75198e2296 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2304 d75198e2299 ">
                                    <p>Predicate for which the selectivity is being computed</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2315" headers="d75198e2293 ">
                                    <p><code class="codeph">sel</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2315 d75198e2296 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2315 d75198e2299 ">
                                    <p>The computed selectivity, expressed as a number between (and including) 0 and 100, represents a percentage. </p>
                                    <p>The optimizer ignores numbers less than 0 or greater than 100 as invalid values. If the computed selectivity is less than 0.5%, a value of 0 may be returned in the output parameter <code class="codeph">sel</code>. A selectivity of 0 does not mean that the predicate will be removed
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2331" headers="d75198e2293 ">
                                    <p><code class="codeph">args</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2331 d75198e2296 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2331 d75198e2299 ">
                                    <p>Descriptor of <code class="codeph">start</code>, <code class="codeph">stop</code>, and actual arguments with which the function, type method, or operator was called. If the function has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n+2</span> elements, the first element describing the start value, the second element describing the stop value, and the remaining <span class="italic">n</span> elements describing the actual arguments of the function, method, or operator
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2361" headers="d75198e2293 ">
                                    <p><code class="codeph">start</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2361 d75198e2296 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2361 d75198e2299 ">
                                    <p>Lower bound of the function (for example, 2 for a predicate<code class="codeph"> fn(...)</code> <code class="codeph">&gt;</code> <code class="codeph">2</code>)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2381" headers="d75198e2293 ">
                                    <p><code class="codeph">stop</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2381 d75198e2296 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2381 d75198e2299 ">
                                    <p>Upper bound of the function (for example, 5 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&lt;</code> <code class="codeph">5)</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2400" headers="d75198e2293 ">
                                    <p><span class="italic"><code class="codeph">list</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2400 d75198e2296 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2400 d75198e2299 ">
                                    <p>List of actual parameters to the function or type method; the number, position, and type of each argument must be identical to the one in the function, type method, or operator.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2412" headers="d75198e2293 ">
                                    <p><code class="codeph">env</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2412 d75198e2296 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2412 d75198e2299 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3__GUID-09C17EBC-BB70-422F-A7FC-E7F993E0F064">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3__GUID-9C7C6628-0D2B-42F7-8BAD-EBFD624947BF">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>As in <code class="codeph">ODCIStatsIndexCost</code>, the args argument contains a list of <span class="italic">interesting</span> partitions for the tables whose columns are referenced in the predicate for which the selectivity has to be computed. These interesting partitions are partitions that cannot be eliminated by partition pruning as possible candidates to be accessed. The set of interesting partitions is passed to the function only if partition pruning has occurred (in other words, the interesting partitions are a strict subset of all the partitions). 
                              </p>
                           </li>
                           <li>
                              <p>For example, when <code class="codeph">ODCIStatsSelectivity</code> is called to compute the selectivity of the predicate:
                              </p><pre class="oac_no_warn" dir="ltr">f(T1.c1, T2.c2) &gt; 4
</pre><p>the optimizer passes the list of interesting partitions for the table <code class="codeph">T1</code> (in the argument descriptor for column <code class="codeph">T1.c1</code>) if partition pruning is possible; similarly for the table <code class="codeph">T2</code>.
                              </p>
                              <p>If a predicate contains columns from several tables, this information is indicated by the flag bit <code class="codeph">PredMultiTable</code>, set in the <code class="codeph">Flags</code> attribute of the <code class="codeph">pred</code> argument.
                              </p>
                           </li>
                           <li>
                              <p>This function should be implemented as a static type method.</p>
                           </li>
                           <li>
                              <p>Users implementing this interface must return <code class="codeph">'SYS.ODCISTATS2'</code> in the <code class="codeph">ODCIGetInterfaces</code> call.
                              </p>
                           </li>
                           <li>
                              <p>The selectivity of a predicate involving columns from a single table is the fraction of rows of that table that satisfy the predicate. For predicates involving columns from multiple tables (for example, join predicates), the selectivity should be computed as a fraction of rows in the Cartesian product of those tables. For tables with partition pruning, the selectivity should be expressed relative to the cardinalities of the interesting partitions of the tables involved.</p>
                              <p>The selectivity of predicates involving columns on partitioned tables is computed relative to the rows in the interesting partitions. Thus, the selectivity of the predicate</p><pre class="oac_no_warn" dir="ltr">g(T1.c1) &lt; 5
</pre><p>is the percentage of rows in the set of interesting partitions (or all partitions if no partition pruning is possible) that satisfies this predicate. For predicates with columns from multiple tables, the selectivity must be relative to the number of rows in the cartesian product of the tables. </p>
                           </li>
                           <li>
                              <p>For example, consider the predicate:</p><pre class="oac_no_warn" dir="ltr">f(T1.c1, T2.c2) &gt; 4
</pre><p>Suppose that the number of rows in the interesting partitions is 1000 for <code class="codeph">T1</code> and 5000 for <code class="codeph">T2</code>. The selectivity of this predicate must be expressed as the percentage of the 5,000,000 rows in the Cartesian product of <code class="codeph">T1</code> and <code class="codeph">T2</code> that satisfy the predicate.
                              </p>
                           </li>
                           <li>
                              <p>If a predicate contains columns from several tables, this information is indicated by the flag bit <code class="codeph">PredMultiTable</code> set in the <code class="codeph">Flags</code> attribute of the <code class="codeph">pred</code> argument.
                              </p>
                           </li>
                           <li>
                              <p>A selectivity expressed relative to the base cardinalities of the tables involved may be only an approximation of the true selectivity if cardinalities (and other statistics) of the tables have been reduced based on single-table predicates or other joins earlier in the join order. However, this approximation to the true selectivity should be acceptable to most applications.</p>
                           </li>
                           <li>
                              <p>Only one call is made to the <code class="codeph">ODCIStatsSelectivity</code> function for queries on partitioned or non-partitioned tables. In the case of queries on partitioned tables, additional information is passed while calling the <code class="codeph">ODCIStatsSelectivity</code> function. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5116"></a><a id="ADDCI5117"></a><a id="ADDCI5115"></a><div class="props_rev_3"><a id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C" name="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C"></a><h4 id="ADDCI-GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C" class="sect4"><span class="enumeration_section">21.2.8 </span>ODCIStatsTableFunction()
                  </h4>
                  <div>
                     <div class="section">
                        <p>This function provides cardinality statistics for table functions and input cursor expressions.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C__GUID-FF668DEA-DDDB-4E6A-98A5-17FA4425903B">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION ODCIStatsTableFunction(
&nbsp;&nbsp;&nbsp;func IN SYS.ODCIFuncInfo, 
&nbsp;&nbsp;&nbsp;outStats OUT SYS.ODCITabFuncStats, 
&nbsp;&nbsp;&nbsp;argDesc IN SYS.ODCIArgDescList, 
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>)
RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C__GUID-4E1C7D11-3390-47AE-B19F-C583DE6370CE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e2619">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e2622">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e2625">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2630" headers="d75198e2619 ">
                                    <p><code class="codeph">func</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2630 d75198e2622 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2630 d75198e2625 ">
                                    <p>Table function name</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2641" headers="d75198e2619 ">
                                    <p><code class="codeph">outStats</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2641 d75198e2622 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2641 d75198e2625 ">
                                    <p>Number of rows expected to be returned</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2652" headers="d75198e2619 ">
                                    <p><code class="codeph">argDesc</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2652 d75198e2622 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2652 d75198e2625 ">
                                    <p>Description of the arguments to the table function</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2663" headers="d75198e2619 ">
                                    <p><span class="italic"><code class="codeph">list</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2663 d75198e2622 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2663 d75198e2625 ">
                                    <p>The arguments' compile-time values. Expressions that only have values at run time are represented by nulls.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C__GUID-E87CBA36-CF69-48EE-873F-C564D598D224">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5119"></a><a id="ADDCI5120"></a><a id="ADDCI5118"></a><div class="props_rev_3"><a id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2" name="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2"></a><h4 id="ADDCI-GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2" class="sect4"><span class="enumeration_section">21.2.9 </span>ODCIStatsUpdPartStatistics()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Updates statistics during partition maintenance operations. This lets the statistics type patch up the domain index statistics to correctly reflect the partition maintenance operation.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2__GUID-13CEA84D-DF63-4015-80E8-B00C69501221">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION ODCIStatsCollect(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo,
&nbsp;&nbsp;&nbsp;palist ODCIPartInfoList,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
RETURN NUMBER</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2__GUID-E73F4EEC-3724-4773-9D7D-38FC5E34B8C7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d75198e2761">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d75198e2764">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d75198e2767">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2772" headers="d75198e2761 ">
                                    <p><code class="codeph">ia</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2772 d75198e2764 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2772 d75198e2767 ">
                                    <p>Contains information about the domain index. It does not contain any partition specific information</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2783" headers="d75198e2761 ">
                                    <p>palist</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2783 d75198e2764 "><pre class="oac_no_warn" dir="ltr">â€ƒ</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2783 d75198e2767 ">
                                    <p>Contains information about the partitions that are to be dropped or added</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d75198e2793" headers="d75198e2761 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d75198e2793 d75198e2764 ">
                                    <p>â€ƒ</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d75198e2793 d75198e2767 ">
                                    <p>Environment handle passed to the routine</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2__GUID-FB1C091B-4067-4A74-A94C-5DCB6768F05B">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When the statistics type is specified by the <code class="codeph">SYSTEM MANAGED</code> approach, then the <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a> method is invoked only one time during PMO. Only DML and query are allowed in the method implementation. 
                              </p>
                           </li>
                           <li>
                              <p>If the user maintains the domain index statistics in a global non-partitioned table, then the user should delete the entry for the user-defined statistics for the dropped partition (and optionally add a <code class="codeph">NULL</code> entry for added partition). They can then check if <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsGlobalAndPartition</code> or <code class="codeph">StatsPartition</code>. If <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsGlobalAndPartition</code> then they should aggregate all the available index partition statistics. If <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsPartition</code> they can simply delete the aggregate statistics, or leave the aggregate statistics as they are. <code class="codeph">ODCIEnv.CallProperty</code> cannot be <code class="codeph">StatsGlobal</code> for this call.
                              </p>
                           </li>
                           <li>
                              <p>The user should use the information passed in by the <code class="codeph">ODCIEnv.CallProperty</code> to determine the type of statistics to delete and adjust.
                              </p>
                           </li>
                           <li>
                              <p>If the method returns <code class="codeph">ODCIConst.Error</code>, the error is ignored and the partition management operation continues.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
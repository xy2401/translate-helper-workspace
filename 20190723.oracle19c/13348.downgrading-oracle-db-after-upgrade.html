<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">
      <meta name="description" content="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">
      <title>Downgrading Oracle Database to an Earlier Release</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="upgrading-oracle-forms-oracle-developer-applications.html" title="Previous" type="text/html">
      <link rel="next" href="migrating-data-after-upgrade-oracle.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="upgrading-oracle-forms-oracle-developer-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="migrating-data-after-upgrade-oracle.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Downgrading Oracle Database to an Earlier Release</li>
            </ol>
            <a id="GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" name="GUID-CAD9888A-2E6E-48F8-938C-B3E861738606"></a><a id="UPGRD007"></a>
            
            <h2 id="UPGRD-GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" class="sect2"><span class="enumeration_chapter">7 </span> Downgrading Oracle Database to an Earlier Release
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.</p>
               <p>For example, if you recently upgraded your Oracle Database 12c release 1 (12.1.0.2( to release 19c, and you did not change the compatible initialization parameter to 19.1.0, then you can downgrade to release 12.1.0.2.</p>
               <p>Topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F">Supported Releases for Downgrading Oracle Database</a><br>You can downgrade both major releases and release update or patchset releases, based on the original Oracle Database release from which the database was upgraded.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010">Check for Incompatibilities When Downgrading Oracle Database</a><br>To see if the database has incompatibilities that can prevent you from downgrading, check the compatibility level of your database.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B">Perform a Full Backup Before Downgrading Oracle Database</a><br>Oracle strongly recommends that you perform a full backup of your new Oracle Database release before you downgrade to a supported earlier release.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73">Performing Required Predowngrade Steps for Oracle Database</a><br>Complete the required preparation steps described here before you downgrade Oracle Database to the earlier release from which you upgraded. 
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</a><br>To automate downgrades, starting in Oracle Database 19c, Oracle provides the <code class="codeph">dbdowngrade</code> utility script. When necessary, you can also continue to run <code class="codeph">catdwgrd.sql</code> manually, as in previous releases. 
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C">About Downgrades and Invalid Objects with Component Status OPTION OFF</a><br>Downgrades from later release Oracle Database Standard Edition to Oracle Database 12c Standard Edition with CDB and PDBS contain later release invalid objects after the downgrade. 
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F">Downgrading a Single Pluggable Oracle Database (PDB)</a><br>If you are downgrading Oracle Database, then you can downgrade one PDB without downgrading the whole CDB.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65">Downgrading PDBs That Contain Oracle Application Express</a><br>Use this procedure to avoid INVALID OBJECTS OWNED BY APEX_050000 errors when you downgrade PDBs that contain Oracle Application Express.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5">Post-Downgrade Tasks for Oracle Database Downgrades</a><br>Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.
                  </li>
                  <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA">Troubleshooting the Downgrade of Oracle Database</a><br>Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.
                  </li>
               </ul>
            </div>
            <a id="UPGRD00710"></a><div class="props_rev_3"><a id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F" name="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F"></a><h3 id="UPGRD-GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F" class="sect3">Supported Releases for Downgrading Oracle Database</h3>
               <div>
                  <p>You can downgrade both major releases and release update or patchset releases, based on the original Oracle Database release from which the database was upgraded.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__GUID-7580F70A-93C8-4024-82C2-53847CE00E09">Releases Supported for Downgrades</p>
                     <p>You can downgrade a non-CDB Oracle Database from Oracle Database 19c to Oracle Database 18c, Oracle Database 12c, and to Oracle Database 11g release 11.2.0.4.</p>
                     <p>You can downgrade a PDB or CDB from Oracle Database 19c to Oracle Database 18c, or Oracle Database 12c Release 2 (12.2.0.1) </p>
                     <p>You can downgrade a PDB or CDB to Oracle Database 18c, Oracle Database 12c Release 12.2, and Oracle Database 12c Release 12.1.0.2.</p>
                     <div class="infoboxnote" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__GUID-36FA6D07-0897-417C-9C5A-E686B44E8613">
                        <p class="notep1">Note:</p>
                        <p>Starting with Oracle Database 12c, Release 1 (12.1), non-CDB architecture is deprecated. It can be desupported in a future release.</p>
                     </div>
                     <p>The following table provides additional information about releases supported for downgrading. When using this table, also read about compatibility in "Checking for Incompatibilities When Downgrading Oracle Database." </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__CACGDDHC">
                     <p class="titleintable">Table 7-1 Supported Releases and Editions for Downgrading</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Supported Releases and Editions for Downgrading" summary="Column 1 indicates if a release is supported for upgrade. Column 2 indicates if you can downgrade to the release specified in column 1. Column 3 provides further information about each release." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d51852e254">Oracle Database Release or Edition</th>
                              <th align="left" valign="bottom" width="21%" id="d51852e257">Downgradable (Yes/No)</th>
                              <th align="left" valign="bottom" width="59%" id="d51852e260">Notes</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e265" headers="d51852e254 ">
                                 <p>18</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e265 d51852e257 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e265 d51852e260 ">
                                 <p>No additional information at this time.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e275" headers="d51852e254 ">
                                 <p>12.2.0.1 and 12.1.0.2</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e275 d51852e257 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e275 d51852e260 ">
                                 <p>You cannot downgrade a database after you set the compatible initialization parameter to 12.1.0.2.</p>
                                 <p>You can downgrade a non-CDB from 19 to 18, or 12.2 to 12.1.0.2,  or 11.2.0.4 (all supported upgrade releases).</p>
                                 <p>Install the latest Release Update, Release Revision, bundle patch or patch set update (BP or PSU) before you downgrade a CDB, or before you unplug and downgrade a PDB. Patches are available for download on My Oracle Support. Refer to My Oracle Support note 756671.1 to obtain the latest patch set.</p>
                                 <p>You cannot downgrade to releases earlier than the minimum compatibility setting for the new Oracle Database release.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e291" headers="d51852e254 ">
                                 <p>Oracle Enterprise Manager</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e291 d51852e257 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e291 d51852e260 ">
                                 <p>If you downgrade to an earlier supported release, then you must reconfigure Oracle Enterprise Manager controls.</p>
                                 <p>Before you start your upgrade, you must use the <code>emdwgrd</code> utility to save DB Control files and data, so that you can restore Oracle Enterprise Manager Database Control (DB Control) after a downgrade.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d51852e306" headers="d51852e254 ">
                                 <p>Oracle Database Express Edition</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d51852e306 d51852e257 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d51852e306 d51852e260 ">
                                 <p>You cannot downgrade a database that is upgraded from Oracle Database Express Edition.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-59F92E2A-DC4D-46A3-9AC9-63F47BE4A86F__GUID-006B7A89-4476-43AD-B026-5AFC731765B8">Recommendations to Review Before Downgrading</p>
                     <p>The following recommendations for earlier supported releases affect downgrading for Oracle Database:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Multitenant architecture provides architecture features for a multitenant container database (CDB), and pluggable databases (PDBs). If you are upgrading to multitenant architecture, and you set the compatible initialization parameter to the highest level after upgrading to this release, then you cannot downgrade the database after an upgrade.</p>
                        </li>
                        <li>
                           <p>This release contains a new object privilege, <code class="codeph">READ</code>, in addition to <code class="codeph">SELECT</code>. After you downgrade, note the following implications of this object privilege:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you have the <code class="codeph">SELECT</code> and <code class="codeph">READ</code> object privileges, then the <code class="codeph">READ</code> privilege is removed.
                                 </p>
                              </li>
                              <li>
                                 <p>If you previously only had the <code class="codeph">READ</code> object privilege, then the <code class="codeph">READ</code> object privilege is transformed into the <code class="codeph">SELECT</code> object privilege.
                                 </p>
                              </li>
                           </ul>
                           <p>Refer to Oracle Database Security Guide for more information about the READ and SELECT object privileges. </p>
                        </li>
                        <li>
                           <p>If Oracle XML DB is not installed in the database that you upgrade, then during a downgrade, Oracle XML DB is uninstalled. For example, if you did not install Oracle XML DB with Oracle Database 11g Release 2 (11.2), then Oracle XML DB is installed with Oracle Database 12c. If you downgrade the database, then Oracle XML DB is uninstalled as part of the downgrade. Oracle XML DB is included by default with Oracle Database 12c release 1 (12.1), and later releases.</p>
                        </li>
                        <li>
                           <p>During upgrade to Oracle Database 12c, the Database (DB) Control repository is removed. If you downgrade to an earlier release, then you must reconfigure the Database (DB) Control to use it after the downgrade.</p>
                        </li>
                        <li>
                           <p>Downgrade is not supported for Oracle Enterprise Manager. If you downgrade to an earlier supported release, then you must reconfigure Oracle Enterprise Manager controls. </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=756671.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=756671.1</a></li>
                        <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG992" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12554"></a><div class="props_rev_3"><a id="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010" name="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010"></a><h3 id="UPGRD-GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010" class="sect3">Check for Incompatibilities When Downgrading Oracle Database</h3>
               <div>
                  <p>To see if the database has incompatibilities that can prevent you from downgrading, check the compatibility level of your database.</p>
                  <p>If the compatibility level of your Oracle Database 12<span class="italic">c</span> database is <code class="codeph">12.1.0</code>, then you are not able to downgrade.
                  </p>
                  <p>If you are downgrading to Oracle Database 11<span class="italic">g</span> release 2, then set the <code class="codeph">COMPATIBLE</code> initialization parameter to <code class="codeph">11.2.0</code> or lower. 
                  </p>
                  <div class="infoboxnote" id="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010__GUID-FBB1C572-0428-4DDF-A91B-C8254E2AA0F7">
                     <p class="notep1">Note:</p>
                     <p>For Oracle ASM disk groups, if you change disk group compatibility to 12.1.0.0.0 when you upgrade your database, then when you downgrade to the earlier release, you cannot mount your Oracle ASM disk groups.</p>
                     <p>You must manually restore compatibility of Oracle ASM disk groups before downgrade. Otherwise, the instance cannot mount the disk groups after downgrade. </p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-16E57DCD-0136-4E2D-8EB8-CE5572FCB010__GUID-CD3BD861-78B5-4A28-A46F-8B9CF766AC98">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ostmg/diskgroup-compatibility.html#OSTMG02700" target="_blank"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about Oracle ASM disk group compatibility
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12555"></a><div class="props_rev_3"><a id="GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B" name="GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B"></a><h3 id="UPGRD-GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B" class="sect3">Perform a Full Backup Before Downgrading Oracle Database</h3>
               <div>
                  <p>Oracle strongly recommends that you perform a full backup of your new Oracle Database release before you downgrade to a supported earlier release.</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-FFECBDB5-6FA3-4A32-B817-BCBCE4C93C4B__GUID-7B294ABB-E676-4E24-8DEE-D1A2073F56BC">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about performing RMAN backups
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60142"></a><div class="props_rev_3"><a id="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73" name="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73"></a><h3 id="UPGRD-GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73" class="sect3">Performing Required Predowngrade Steps for Oracle Database</h3>
               <div>
                  <p>Complete the required preparation steps described here before you downgrade Oracle Database to the earlier release from which you upgraded. </p>
                  <p>Before you start a downgrade, you must resolve incompatibilities between database releases. For example, determine if you must disable components in the database before you start the downgrade.</p>
                  <ol>
                     <li>
                        <p>If you are downgrading a CDB or unplugging and downgrading a PDB in Oracle Database, then you must first apply the latest quarterly release update (Update), release update revision (Revision), bundle patch or patch set update (BP or PSU) available. Apply any required set of additional fixes on My Oracle Support Note 756671.1: </p>
                        <p><a href="https://support.oracle.com/rs?type=doc&amp;id=756671.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=756671.1</a></p>
                     </li>
                     <li>
                        <p>If you have enabled Oracle Database Vault on your database, then disable Oracle Database Vault before downgrading the database.</p>
                        <p>Use DBA_DV_STATUS to find out if Oracle Database Vault is enabled: </p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM DBA_DV_STATUS;
</code></pre><p>If the output is <samp class="sysout">TRUE</samp>, then Oracle Database Vault is enabled, so you must disable it.
                        </p>
                        <p>On multitenant architecture Oracle Database systems, use CDB_DV_STATUS on CDB$ROOT to find out the Oracle Database Vault status on all PDBs plugged in to the CDB: </p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM CDB_DV_STATUS;
</code></pre></li>
                     <li>
                        <p>If your database uses Oracle Label Security, and you are downgrading to release 11.2, then run the Oracle Label Security (OLS) preprocess downgrade <code>olspredowngrade.sql</code> script in the new Oracle Database 12<span class="italic">c</span> Oracle home.
                        </p>
                        <div class="infoboxnote" id="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73__GUID-DB90FA0E-7DD8-49FC-8AB7-2208F617E001">
                           <p class="notep1">Caution:</p>
                           <p>Run <code>olspredowngrade.sql</code> before you downgrade from Oracle Database 12<span class="italic">c</span> to database release 11.2 for databases that use Oracle Label Security and Oracle Database Vault.
                           </p>
                        </div>
                        <ol type="a">
                           <li>
                              <p>Query the <code class="codeph">V$OPTION</code> dynamic view. Determine if Oracle Label Security is enabled. For example:
                              </p><pre class="pre codeblock"><code>SQL&gt; SELECT VALUE FROM V$OPTION WHERE PARAMETER = 'Oracle Label Security';
</code></pre></li>
                           <li>
                              <p>Run the <code>olspredowngrade.sql</code> script:
                              </p><pre class="pre codeblock"><code>SQL&gt; @<span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin/olspredowngrade.sql
</code></pre></li>
                        </ol>
                     </li>
                     <li>
                        <p>If you have enabled Unified Auditing, then you can choose to back up and purge the unified audit trail:</p>
                        <ol type="a">
                           <li>
                              <p>Find if unified audit records exist.</p><pre class="pre codeblock"><code>SQL&gt; SELECT COUNT(*) FROM UNIFIED_AUDIT_TRAIL;
</code></pre></li>
                           <li>
                              <p>Back up the existing audit data to a table. For example:</p><pre class="pre codeblock"><code>SQL&gt; CREATE TABLE UA_DATA AS (SELECT * FROM UNIFIED_AUDIT_TRAIL);
</code></pre></li>
                           <li>
                              <p>Clean up the audit trail. </p><pre class="pre codeblock"><code>EXEC DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL(audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED, use_last_arch_timestamp =&gt; FALSE);
</code></pre></li>
                        </ol>
                     </li>
                     <li>
                        <p>Before downgrade, ensure that the target Oracle Home for the downgraded database contains the version of the time zone file that your database is using.</p>
                        <p>To find which time zone file version your database is currently using, query <code class="codeph">V$TIMEZONE_FILE</code> using the following command:
                        </p><pre class="pre codeblock"><code>SQL&gt; select * from  V$TIMEZONE_FILE;
</code></pre><p>For example:</p>
                        <p>If the query returns <code class="codeph">timezlrg_18.dat</code> in the column <code class="codeph">V$TIMEZONE_FILE.FILENAME</code>, then check if the file is present in the target Oracle Home:
                        </p>
                        <p>Linux and UNIX</p><pre class="pre codeblock"><code>$ORACLE_HOME/oracore/zoneinfo/timezlrg_18.dat
</code></pre><p>Windows</p><pre class="pre codeblock"><code>%ORACLE_HOME%\oracore\zoneinfo\timezlrg_18.dat</code></pre><p>If the required time zone file is missing from the target Oracle Home, then do one of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you installed the current version of the time zone file as a patch, and you still know the patch number, then use the same patch number to download the corresponding time zone file for the target release from the My Oracle Support website.</p>
                           </li>
                           <li>
                              <p>Locate the correct patch by using the My Oracle Support website patch search function. Enter the following search criteria: "Product is 'Oracle Database'", "Release is '<span class="variable" translate="no">target release</span>'", and "Description contains 'DST'".
                              </p>
                           </li>
                           <li>
                              <p>If you cannot locate the patch on the My Oracle Support website, then log a service request with Oracle Support.</p>
                           </li>
                        </ul>
                        <p>After you find and download the required patch, install it in the target Oracle Home.</p>
                     </li>
                     <li>
                        <p>If you created objects based on fixed objects, then drop these objects to avoid possible <samp class="sysout">ORA-00600</samp> errors. You can re-create these objects after the downgrade.
                        </p>
                     </li>
                     <li>
                        <p>If you have Oracle Enterprise Manager configured in your database, then drop the Enterprise Manager user:</p><pre class="pre codeblock"><code>DROP USER sysman CASCADE;</code></pre><div class="infoboxnote" id="GUID-FC6DF99A-F32B-4258-8E5B-2DB5D7AD2A73__GUID-F8A87770-0FB2-4E6A-8DE3-B0DCE168DE9A">
                           <p class="notep1">Note:</p>
                           <p>After you drop the Enterprise Manager user, you can find that <code class="codeph">MGMT*</code> synonyms are invalid. You must reconfigure Oracle Enterprise Manager to use any Oracle Enterprise Manager controls in the downgraded database.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>If you are downgrading to Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2) that has the JSON bundled patch applied, and that uses Simple Oracle Document Access (SODA), then ensure that you apply the JSON bundle patch (JSON Patch Bundle 1 or JSON Patch Bundle 2) to the Oracle Database 12.1.0.2 binary. For more information, review the following My Oracle Support note:
                        </p>
                        <p><a href="https://support.oracle.com/rs?type=doc&amp;id=1992767.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1992767.1</a></p>
                     </li>
                     <li>
                        <p>Obtain the appropriate ARUs for your server operating system from the PSE listed for your release. Download and install all the patches listed for your earlier release before you start the downgrade:</p>
                        <ol type="a">
                           <li>
                              <p>Log in to My Oracle Support:</p>
                              <p><a href="https://support.oracle.com" target="_blank">https://support.oracle.com</a></p>
                           </li>
                           <li>
                              <p>Select <span class="uicontrol bold">Patches &amp; Updates</span>. In the <span class="wintitle">Patch Search</span> frame, provide the bug number listed for your release, and provide the platform for your server. 
                              </p>
                           </li>
                           <li>
                              <p>Download and install the patch</p>
                           </li>
                           <li>
                              <p>Repeat until you have installed all required patches for your server. </p>
                           </li>
                        </ol>
                        <p>Obtain the patches for your release:</p>
                        <p>Downgrade from 18c to 12.2 </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>2414935.1: Patches to apply before upgrading Oracle GI and DB to 18c</p>
                           </li>
                           <li>
                              <p> 2118136.2: Assistant: Download Reference for Oracle Database/GI Update, Revision, PSU, SPU (CPU), Bundle Patches, Patchsets and Base Releases</p>
                           </li>
                        </ul>
                        <p>Downgrade from 18c to 12.1.0.2.0 with CDB and PDB</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>25755742: DATABASE PATCH SET UPDATE 12.1.0.2.170718 or latest 12.1.0.2.0 Database patch set update</p>
                           </li>
                           <li>
                              <p>24438034: CDB_UPG: 12101 CDB UPGRADE LEFT OBJECT CDB_JAVA_POLICY INVALID</p>
                           </li>
                           <li>
                              <p>20348910: ALTER TYPE REPLACE IN PRVTAQJI.SQL TO BE REPLACE WITH CREATE OR REPLACE TYPE</p>
                           </li>
                           <li>
                              <p>20958816: INVALID OBJECTS AFTER DOWNGRADE FROM 12.2.0.1 TO 12.1.0.2</p>
                           </li>
                        </ul>
                        <p>Downgrade from 18c to 12.1.0.2.0 non-CDB</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>25755742: DATABASE PATCH SET UPDATE 12.1.0.2.170718 or latest 12.1.0.2.0 Database patch set update</p>
                           </li>
                           <li>
                              <p>24438034: CDB_UPG: 12101 CDB UPGRADE LEFT OBJECT CDB_JAVA_POLICY INVALID</p>
                           </li>
                           <li>
                              <p>20348910 : ALTER TYPE REPLACE IN PRVTAQJI.SQL TO BE REPLACE WITH CREATE OR REPLACE TYPE</p>
                           </li>
                           <li>
                              <p>20958816: INVALID OBJECTS AFTER DOWNGRADE FROM 12.2.0.1 TO 12.1.0.2</p>
                           </li>
                           <li>
                              <p>21856522: UPGRADE OF 12.1 TO 12.2 CAUSE XOQ COMPONENT TO BE INVALID</p>
                           </li>
                        </ul>
                        <p>Downgrade from 18c to 11.2.0.4.0</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>23054359: DATABASE PATCH SET UPDATE 11.2.0.4</p>
                           </li>
                           <li>
                              <p>20898997: XMLTYPESUP: QCTOXSNLB SHOULD NOT CHECK AGAINST SNAPSHOT SIZE</p>
                           </li>
                           <li>
                              <p>20348910: ALTER TYPE REPLACE IN PRVTAQJI.SQL TO BE REPLACE WITH CREATE OR REPLACE TYPE</p>
                           </li>
                        </ul>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../olsag/performing-dba-functions-under-oracle-label-security.html#OLSAG3416" target="_blank"><span><cite>Oracle Label Security Administrator’s Guide</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NLSPG004" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" name="GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E"></a><h3 id="UPGRD-GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" class="sect3">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</h3>
               <div>
                  <p>To automate downgrades, starting in Oracle Database 19c, Oracle provides the <code class="codeph">dbdowngrade</code> utility script. When necessary, you can also continue to run <code class="codeph">catdwgrd.sql</code> manually, as in previous releases. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EAF290FD-5F22-4FEE-829D-B3587168471F">Using Dbdowngrade to Downgrade CDB and Non-CDB Oracle Databases</a><br>To downgrade Oracle Database to an earlier supported major release, or to an earlier release update, Oracle recommends that you run the downgrade script <code class="codeph">dbdowngrade</code>. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-0227D321-577E-47C5-A8C0-36991B8D0357">Downgrading a CDB or Non-CDB Oracle Database Manually with catdwgrd.sql</a><br>You can run the manual <code class="codeph">catdwgrd.sql</code> script for downgrades of Oracle Database to an earlier a supported major release, or an earlier release update, where you either prefer to run a manual script, or you want to avoid excessive thread issues. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F" name="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F"></a><h4 id="UPGRD-GUID-EAF290FD-5F22-4FEE-829D-B3587168471F" class="sect4">Using Dbdowngrade to Downgrade CDB and Non-CDB Oracle Databases</h4>
                  <div>
                     <p>To downgrade Oracle Database to an earlier supported major release, or to an earlier release update, Oracle recommends that you run the downgrade script <code class="codeph">dbdowngrade</code>. 
                     </p>
                     <div class="section">
                        <p>Starting with Oracle Database 19c, Oracle provides the Downgrade Utility script <code class="codeph">dbdowngrade</code>. When you use the dbdowngrade utility, it sets appropriate values for the downgrade, and simplifies how you start a downgrade. Specifically, it ensures that the underlying calls to <code class="codeph">catcon.pl</code> use recommended values, so that potential errors due to excessive threads being spawned are reduced. This feature is especially of value for downgrades of multitenant architecture (CDB) databases. When the potential of excessive threads exists, you can continue the downgrade by running the <code class="codeph">catdwgrd.sql</code> script manually, as in previous releases.
                        </p>
                        <p>The <code class="codeph">dbdowngrade</code> shell command is located in the file path <code class="codeph">$ORACLE_HOME/bin</code> on Linux and Unix, and <code class="codeph">%ORACLE_HOME%\bin</code> on Microsoft Windows based systems. If you are downgrading a CDB, then you can provide the inclusion list as argument to the script. 
                        </p>
                        <p>When you downgrade multitenant architecture databases (CDBs), the <code class="codeph">dbdowngrade</code> script has two behaviors, depending on whether you use an inclusion list. 
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_BW3_4YD_CGB">
                           <li>
                              <p><span class="bold">Without an inclusion list</span>. The downgrade runs on all the containers that are open in the CDB (PDB and CDB).
                              </p>
                              <p>Run the downgrade without an inclusion list when you want to downgrade the entire CDB. In this scenario, all open containers are downgraded. You must open all the PDBs in the CDB manually before you start the <code class="codeph">dbdowngrade</code> script.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">With an inclusion list</span>. The downgrade runs only on the PDBs within the inclusion list, and CDB$ROOT is not downgraded during the downgrade operation.
                              </p>
                              <p>Run the downgrade with an inclusion list when you want to downgrade only the set of PDBs listed in the inclusion list. In this scenario, where you want to use unplug and plug upgrades, only the set of PDBs that you list in the inclusion list are downgraded. The CDB and the PDBs that are not on the inclusion list remain upgraded to the later release. </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>Prerequisites:</p>
                        <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_ZKW_RZD_CGB">
                           <li>
                              <p>If you are downgrading from Oracle Database 19c to Oracle Database 18c, Oracle Database 12.2, or Oracle Database 12.1, then you can downgrade all databases in a multitenant container database (CDB), or one pluggable database (PDB) within a CDB. Oracle Database releases earlier than Oracle Database 12c did not use multitenant architecture. </p>
                           </li>
                           <li>If you are downgrading without an inclusion list, then you must open all PDB containers before you run the <code class="codeph">dbdowngrade</code> script. 
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Set the ORACLE_HOME environment variable to the Oracle home of the upgraded Oracle Database release </span></li>
                        <li class="stepexpand"><span>Set the ORACLE_SID environment variable to Oracle Database that you want to downgrade. </span></li>
                        <li class="stepexpand"><span>Start the <code class="codeph">dbdowngrade</code> script, either with default values, or with an inclusion list. </span><div>
                              <p>If you use an inclusion list, then CDB$ROOT must not be on your inclusion list.</p>
                           </div>
                           <div>
                              <p>For example:</p><code>Running with default values</code><p>Linux and Unix</p><pre class="pre codeblock"><code>$cd $ORACLE_HOME/bin 
$./dbdowngrade</code></pre><p>Microsoft Windows</p><pre class="pre codeblock"><code>$cd %ORACLE_HOME%\bin
$dbdowngrade.cmd</code></pre><code>Running with inclusion list for CDB</code><p>Linux and Unix</p><pre class="pre codeblock"><code>$cd $ORACLE_HOME/bin 
$./dbdowngrade &#x2013;c 'PDB1 PDB2 PDBN'</code></pre><p>Microsoft Windows</p><pre class="pre codeblock"><code>$cd %ORACLE_HOME%\bin 
$dbdowngrade.cmd &#x2013;c "PDB1 PDB2 PDBN"</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>As a result of running the <code class="codeph">dbdowngrade</code> script, the utility runs <code class="codeph">catdwgrd</code> and <code class="codeph">catcon.pl</code>. These scripts perform the downgrade, using the recommended values for the release to which you are downgrading. The log files produced by the downgrade scripts are placed under the first directory found of one of these three options, in order: 
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_YDR_3PJ_CGB">
                           <li>
                              <p>The Oracle base home identified by the <code class="codeph">orabasehome</code> command
                              </p>
                           </li>
                           <li>
                              <p>The Oracle base home identified by the <code class="codeph">orabase</code> command
                              </p>
                           </li>
                           <li>
                              <p>The Oracle home identified by the <code class="codeph">oracle_home</code> command
                              </p>
                           </li>
                        </ul>
                        <div class="p"> For example: <pre class="pre codeblock"><code>$ $ORACLE_HOME/bin/orabasehome
/u01/app/oracle/product/19.0.0/dbhome_1</code></pre>In this example, the $ORACLE_BASE directory is <code class="codeph"> /u01/app/oracle/product/19.0.0/dbhome_1</code>, and the logs are located in <code class="codeph">/u01/app/oracle/product/19.0.0/dbhome_1/cfgtoollogs/downgrade</code>. In the directory, the log files are prefixed with the string <code class="codeph">catdwgrd</code>. 
                        </div>
                        <div class="infoboxnote" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__GUID-0799D96A-CE03-4F8C-BA04-517CAE3272D6">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;" id="GUID-EAF290FD-5F22-4FEE-829D-B3587168471F__UL_ODW_TJJ_CGB">
                              <li>
                                 <p>Read-write Oracle homes: the commands <code class="codeph">orabaseconfig</code> and <code class="codeph">orabasehome</code> both return the environment setting for ORACLE_HOME. 
                                 </p>
                              </li>
                              <li>
                                 <p>Read-only Oracle homes: the command <code class="codeph">orabaseconfig</code> returns the read-only path configuration for the Oracle base in the path <code class="codeph">$ORACLE_BASE/homes</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" title="To automate downgrades, starting in Oracle Database 19c, Oracle provides the dbdowngrade utility script. When necessary, you can also continue to run catdwgrd.sql manually, as in previous releases.">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357" name="GUID-0227D321-577E-47C5-A8C0-36991B8D0357"></a><h4 id="UPGRD-GUID-0227D321-577E-47C5-A8C0-36991B8D0357" class="sect4">Downgrading a CDB or Non-CDB Oracle Database Manually with catdwgrd.sql</h4>
                  <div>
                     <p>You can run the manual <code class="codeph">catdwgrd.sql</code> script for downgrades of Oracle Database to an earlier a supported major release, or an earlier release update, where you either prefer to run a manual script, or you want to avoid excessive thread issues. 
                     </p>
                     <div class="section">
                        <p>If you are downgrading from Oracle Database 19c to Oracle Database 18c, Oracle Database 12.2, or Oracle Database 12.1, then you can downgrade all databases in a multitenant container database (CDB), or one pluggable database (PDB) within a CDB. Oracle Database releases earlier than Oracle Database 12c did not use multitenant architecture. </p>
                        <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-33208AE2-97CD-4E76-A3AE-A709BEE94AE6">
                           <p class="notep1">Note:</p>
                           <p>Starting with Oracle Database 12c release 1 (12.1), non-CDB architecture is deprecated. It can be desupported in a future release.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the system as the owner of the Oracle Database Oracle home directory.</span></li>
                        <li class="stepexpand"><span>At a system prompt, change to the directory <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin</code>, where <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code> is the Oracle home on your system.</span><div>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-A7F329F3-06E7-469E-A4F1-10C2BA6EF7E4">
                                 <p class="notep1">Note:</p>
                                 <p>If you are downgrading a cluster database, then shut down the database completely, and change the value for the initialization parameter <code class="codeph">CLUSTER_DATABASE</code> to <code class="codeph">FALSE</code>. After the downgrade, set this parameter back to <code class="codeph">TRUE</code>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Using SQL*Plus, connect to the database instance as a user with <code class="codeph">SYSDBA</code> privileges:</span><div><pre class="pre codeblock"><code>sqlplus sys as sysdba
Enter password: <span class="variable" translate="no">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Log in to the system as the Oracle user (owner) of the new Oracle Database release Oracle home.</span></li>
                        <li class="stepexpand"><span>Change directory to <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin</code>, and start SQL*Plus.</span></li>
                        <li class="stepexpand"><span>Connect to the database that you want to upgrade using an account with DBA privileges:</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the instance in downgrade mode by issuing the following SQL*Plus command for your Oracle Database instance type. You can be required to use the <code class="codeph">PFILE</code> option to specify the location of your initialization parameter file.</span><ul>
                              <li>
                                 <p>Non-CDB instances: </p><pre class="pre codeblock"><code>SQL&gt; startup downgrade pfile=<span class="variable" translate="no">pfile_name</span>
</code></pre></li>
                              <li>
                                 <p>CDB instances: </p><pre class="pre codeblock"><code>SQL&gt; startup downgrade pfile=<span class="variable" translate="no">pfile_name</span>
SQL&gt; alter pluggable database all open downgrade;</code></pre></li>
                           </ul>
                           <div>
                              <p>Specify the location of your initialization parameter file <code class="codeph">PFILE</code>.
                              </p>
                              <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-072F0FC7-6B87-4CC6-B0F0-B6CB3FD90EA0">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about specifying initialization parameters at startup and the initialization parameter file
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Optional) If you are downgrading a non-CDB, then you can set the system to spool results to a log file so you can track the changes and issues. </span><div>
                              <p>If you are downgrading a CDB, then you do not need to perform this step. CDBs automatically spool output to the <code class="codeph">catcon_logs</code>.
                              </p>
                              <p>On a non-CDB, enter the following command to spool results to a log file, where <code class="codeph">downgrade.log</code> is the name of the log file:
                              </p>
                           </div>
                           <div><pre class="pre codeblock"><code>SQL&gt; SPOOL downgrade.log
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Use the following command to start the downgrade, depending on your configuration:</span><ul>
                              <li>
                                 <p>Non-CDB:</p><pre class="pre codeblock"><code>SQL&gt; @catdwgrd.sql
</code></pre></li>
                              <li>
                                 <p>CDB:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -d $ORACLE_HOME/rdbms/admin -e -b catdwgrd -l <span class="variable" translate="no">output directory</span> -r catdwgrd.sql
</code></pre></li>
                           </ul>
                           <div>
                              <p>In the CDB example, <code>catdwgrd.sql</code> is run on containers using <code>catcon.pl</code>. To run commands with the <code>catcon.pl</code> utility, you first start Perl. The <code class="codeph">-d</code> parameter tells <code>catcon.pl</code> where to find <code>catdwgrd</code>. The <code class="codeph">-l</code> parameter specifies the output directory for log files (instead of writing to the <code>rdbms/admin</code> directory). Specifying the <code class="codeph">-r</code> parameter causes <code>catdwgrd</code> to run first on the PDBs, and second on CDB_ROOT.
                              </p>
                              <p>Run <code>catdwgrd</code> using the <code class="codeph">-r</code> parameter when you downgrade a CDB. The <code class="codeph">&#x2013;r</code> parameter changes the default order that scripts are run, so that scripts run in all PDBs, and then in CDB_ROOT.
                              </p>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-EAB6D4C4-8286-41DC-8F60-DB0BE0F702B6">
                                 <p class="notep1">Note:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Use the version of the <code class="codeph">catdwgrd.sql</code> script included with your new Oracle Database release.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Run <code class="codeph">catdwgrd</code> using the <code class="codeph">-r</code> parameter when downgrading a CDB. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Run <code class="codeph">catdwgrd.sql</code> in the new Oracle Database release environment.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">catdwgrd.sql</code> script downgrades all Oracle Database components in the database to the release from which you upgraded. The downgrade is either to the supported major release from which you upgraded, or to the patch release from which you upgraded.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              <p>If you are downgrading a multitenant environment database, and the <code>catdwgrd.sql</code> command encounters a failure, then review the error message. Check to see what issues are present in the <code class="codeph">CDB$ROOT</code> or PDBs before proceeding. Check the section "Troubleshooting the Downgrade of Oracle Database." Fix the issues as stated in the errors. After you resolve the errors, rerun <code>catdgwrd.sq</code> with the <code>catcon.pl</code> utility, using the syntax <code class="codeph">catcon.pl -c 'cdb,pdb' -r</code>.
                              </p>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-6AE4C9D3-07D5-427F-8F28-4105F9DD12FD">
                                 <p class="notep1">Caution:</p>
                                 <p>If the downgrade for a component fails, then an <code class="codeph">ORA-39709</code> error is displayed. The SQL*Plus session terminates without downgrading the Oracle Database data dictionary. All components must be successfully downgraded before the Oracle Database data dictionary is downgraded. Identify and fix the problem before rerunning the <code>catdwgrd.sql</code> script.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>For Non-CDB only, if you turned the spool on, then turn off the spooling of script results to the log file:</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><p>Check the spool file, and verify that no errors occurred during the downgrade. You named the spool file in Step 8, and the suggested name was <code class="codeph">downgrade.log</code>. Correct any problems that you find in this file. If necessary, rerun the downgrade script.
                              </p>
                           </div>
                           <div>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-D93C480D-DF41-4A5D-B0F1-6561EA414026">
                                 <p class="notep1">Note:</p>
                                 <p>Save the results from the first time you ran the downgrade script. Before you rerun the downgrade script, rename the file <code class="codeph">downgrade.log</code> to a different name, so that it is not overwritten when you rerun the script.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Shut down the instance:</span><div><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Exit SQL*Plus.</span></li>
                        <li class="stepexpand"><span>If your operating system is Linux or UNIX, then change the following environment variables to point to the directories of the release to which you are downgrading:</span><ul>
                              <li>
                                 <p>Linux and UNIX systems</p>
                                 <p>Change the following environment variables to point to the directories of the release to which you are downgrading:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">ORACLE_HOME</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">PATH</code></p>
                                    </li>
                                 </ul>
                                 <p>Also check that your <code class="codeph">oratab</code> file, and any client scripts that set the value of <code class="codeph">ORACLE_HOME</code>, point to the downgraded Oracle home. 
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-1D10C9D2-23C9-4C0D-A855-57266297E589">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=GINST" target="_blank"><span><cite>Oracle Database Installation Guide</cite></span></a> for your operating system for information about setting other important environment variables on your operating system
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>Microsoft Windows systems</p>
                                 <ol type="a">
                                    <li>
                                       <p>Stop all Oracle services, including the <code class="codeph">OracleService<span class="variable" translate="no">SID</span></code> Oracle service of the Oracle Database 12c database, where <code class="codeph"><span class="variable" translate="no">SID</span></code> is the instance name.
                                       </p>
                                       <p>For example, if your <span class="variable" translate="no">SID</span> is <code class="codeph">ORCL</code>, then enter the following at a command prompt:
                                       </p><pre class="pre codeblock"><code>C:\&gt; NET STOP OracleServiceORCL
</code></pre><div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-21EBB256-7F58-4846-BC96-E9A64F3C24D2">
                                          <p class="notep1">See Also:</p>
                                          <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NTQRF206" target="_blank"><span><cite>Oracle Database Administrator’s Reference for Microsoft Windows</cite></span></a> for more information about stopping Oracle services on Windows
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>Delete the Oracle service at a command prompt by issuing the command <code class="codeph">ORADIM</code>. 
                                       </p>
                                       <p>For example, if your <span class="variable" translate="no">SID</span> is <code class="codeph">ORCL</code>, then enter the following command:
                                       </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -DELETE -SID ORCL
</code></pre><p>Create the Oracle service of the database that you are downgrading at a command prompt using the command <code class="codeph">ORADIM</code>:
                                       </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -NEW -SID <span class="variable" translate="no">SID</span> -INTPWD <span class="variable" translate="no">PASSWORD</span> -MAXUSERS <span class="variable" translate="no">USERS</span>
-STARTMODE MANUAL -PFILE <span class="variable" translate="no">ORACLE_HOME</span>\DATABASE\INIT<span class="variable" translate="no">SID</span>.ORA</code></pre><p>The syntax for <code class="codeph">ORADIM</code> includes the following variables: 
                                       </p>
                                       <div class="tblformal" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-6ECD3048-96E0-4F39-8437-1C8AEA8F171A">
                                          <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Syntax and variables for ORADIM, listing the variable, and listing the description" width="90%" frame="hsides" border="1" rules="rows">
                                             <thead>
                                                <tr align="left" valign="top">
                                                   <th align="left" valign="bottom" width="21%" id="d51852e1837">Variable</th>
                                                   <th align="left" valign="bottom" width="79%" id="d51852e1840">Description</th>
                                                </tr>
                                             </thead>
                                             <tbody>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1845" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">SID</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1845 d51852e1840 ">
                                                      <p>Same system identifier (SID) name as the SID of the database being downgraded.</p>
                                                   </td>
                                                </tr>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1853" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">PASSWORD</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1853 d51852e1840 ">
                                                      <p>Password for the database instance. This password is the password for the user connected with <code class="codeph">SYSDBA</code> privileges. The <code class="codeph">-INTPWD</code> option is not required. If you are prompted for a password, then use the password for the standard user account for this Windows platform.
                                                      </p>
                                                   </td>
                                                </tr>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1867" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">USERS</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1867 d51852e1840 ">
                                                      <p>Maximum number of users that can be granted <code class="codeph">SYSDBA</code> and <code class="codeph">SYSOPER</code> privileges.
                                                      </p>
                                                   </td>
                                                </tr>
                                                <tr align="left" valign="top">
                                                   <td align="left" valign="top" width="21%" id="d51852e1881" headers="d51852e1837 ">
                                                      <p><span class="variable" translate="no">ORACLE_HOME</span></p>
                                                   </td>
                                                   <td align="left" valign="top" width="79%" headers="d51852e1881 d51852e1840 ">
                                                      <p>Oracle home directory of the database to which you are downgrading. Ensure that you specify the full path name with the option <code class="codeph">-PFILE</code>, including the drive letter where the Oracle home directory is mounted. 
                                                      </p>
                                                      <p>See <cite>Oracle Database Administrator’s Guide</cite> for information about specifying initialization parameters at startup, and for information about the initialization parameter file.
                                                      </p>
                                                   </td>
                                                </tr>
                                             </tbody>
                                          </table>
                                       </div>
                                       <!-- class="inftblhruleinformal" -->
                                       <p>For example, if your <span class="variable" translate="no">SID</span> is <code class="codeph">ORCL</code>, your <span class="variable" translate="no">PASSWORD</span> is <code class="codeph">TWxy5791</code>, the maximum number of <span class="variable" translate="no">USERS</span> is <code class="codeph">10</code>, and the <span class="variable" translate="no">ORACLE_HOME</span> directory is <code class="codeph">C:\ORANT</code>, then enter the following command:
                                       </p><pre class="oac_no_warn" dir="ltr">C:\&gt; ORADIM -NEW -SID ORCL -INTPWD TWxy5791 -MAXUSERS 10
     -STARTMODE AUTO -PFILE C:\ORANT\DATABASE\INITORCL.ORA</pre><div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-D5D20E7F-36CB-4F3F-8E13-B6136C350F36">
                                          <p class="notep1">Note:</p>
                                          <p>The <code class="codeph">ORADIM</code> command prompts you for the password for the Oracle home user account. You can specify other options using <code class="codeph">ORADIM</code>.
                                          </p>
                                          <p>You are not required to change any Windows Registry settings when downgrading a database. The <code class="codeph">ORADIM</code> utility makes all necessary changes automatically.
                                          </p>
                                       </div>
                                       <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-18E83A45-EFE2-4D0B-92B5-7706D851759E">
                                          <p class="notep1">See Also:</p>
                                          <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NTQRF05011" target="_blank"><span><cite>Oracle Database Administrator’s Reference for Microsoft Windows</cite></span></a> for information about administering an Oracle Database instance using <code class="codeph">ORADIM</code></p>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>Restore the configuration files (for example, parameter files, password files, and so on) of the release to which you are downgrading.</span><div>
                              <p>If the database is an Oracle RAC database, then run the following command to return the database to single instance mode:</p><pre class="pre codeblock"><code>SET CLUSTER_DATABASE=FALSE</code></pre><div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-4C04E65D-B393-4841-88D5-2405CD35AE55">
                                 <p class="notep1">Note:</p>
                                 <p>If you are downgrading a cluster database, then perform this step on all nodes on which this cluster database has instances configured. Set the value for the initialization parameter <code class="codeph">CLUSTER_DATABASE</code> to <code class="codeph">FALSE</code>. After the downgrade, set this initialization parameter back to <code class="codeph">TRUE</code>. 
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-978244AA-F04B-48DD-8369-4E69713FFD5F">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../racad/administering-database-instances-and-cluster-databases.html#RACAD017" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for information about initialization parameter use in Oracle RAC
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>At a system prompt, change to the <code class="codeph">admin</code> directory in the Oracle home directory of the earlier release to which you are downgrading. (<code><span class="variable" translate="no">ORACLE_HOME</span>/rdbms/admin</code>, where <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code> is the path to the earlier release Oracle home.)</span></li>
                        <li class="stepexpand"><span>Start SQL*Plus, and connect to the database instance as a user with SYSDBA privileges.</span><ul>
                              <li>
                                 <p>For a non-CDB:</p><pre class="pre codeblock"><code>SQL&gt; CONNECT / AS SYSDBA
SQL&gt; STARTUP UPGRADE</code></pre></li>
                              <li>
                                 <p>For a CDB:</p><pre class="pre codeblock"><code>connect / as sysdba
startup upgrade;
alter pluggable database all open upgrade;
</code></pre></li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>(Optional) For a non-CDB, set the system to spool results to a log file to track changes and issues. This step is not needed for a CDB.</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL reload.log
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run <code>catrelod.sql</code> on non-CDB databases, or use <code>catcon.pl</code> to run <code>utlrp.sql</code> on CDB databases.</span><ul>
                              <li>
                                 <p>For a non-CDB:</p><pre class="pre codeblock"><code>SQL&gt; $ORACLE_HOME/rdbms/admin/catrelod.sql</code></pre></li>
                              <li>
                                 <p>For a CDB:</p><pre class="oac_no_warn" dir="ltr"> $ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -n 1 -e -b catrelod -d $ORACLE_HOME/rdbms/admin catrelod.sql</pre></li>
                           </ul>
                           <div>
                              <p>This command reloads the appropriate version for each of the database components in the downgraded database.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If you turned on spooling for a non-CDB, then turn off the spooling of script results to the log file:</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><p>Check the spool file, and verify that the packages and procedures compiled successfully. Correct any problems that you find in this log file, and rerun the appropriate script, if necessary.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Shut down and restart the instance for normal operation:</span><div><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; STARTUP
</code></pre></div>
                           <div>
                              <p>You can be required to use the option<code class="codeph">PFILE</code> to specify the location of your initialization parameter file. 
                              </p>
                              <div class="infoboxnotealso" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-CCEBC3D1-9DE2-47F8-82E2-1BC60D12E229">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about specifying initialization parameters at startup, and in the initialization parameter file
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If you configured your database to use Oracle Label Security, then complete this step. If you did not configure your database to use Oracle Label Security, then proceed to the next step.</span><ol type="a">
                              <li class="substepexpand"><span>Copy the script <code class="codeph">olstrig.sql</code> from the Oracle home under Oracle Database 12<span class="italic">c</span> to the Oracle home of the release number to which you are downgrading the database.</span></li>
                              <li class="substepexpand"><span>From the Oracle home of the downgrade release, run <code class="codeph">olstrig.sql</code> to recreate DML triggers on tables with Oracle Label Security policies:</span><div><pre class="pre codeblock"><code>SQL&gt; @olstrig.sql
</code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>(Optional) For a non-CDB, set the system to spool results to a log file to track changes and issues. This step is not needed for a CDB.</span><div>
                              <p>Example:</p><pre class="pre codeblock"><code>SQL&gt; SPOOL utlrp.log</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile any remaining stored PL/SQL and Java code. Use the procedure for your configuration:</span><ul>
                              <li>
                                 <p>non-CDB:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; $ORACLE_HOME/rdbms/admin/utlrp.sql </pre></li>
                              <li>
                                 <p>CDB:</p><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -n 1 -e -b utlrp -d $ORACLE_HOME/rdbms/admin utlrp.sql</pre><p>The <code class="codeph">utlrp.sql</code> script recompiles all existing PL/SQL modules previously in <code class="codeph">INVALID</code> state, such as packages, procedures, types, and so on. The log file <code class="codeph">utlrp0.log</code> is generated. That log file lists the recompilation results.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>If you turn on spooling for a non-CDB when you run <code class="codeph">utlrp.sql</code>, then turn off the spooling of script results to the log file:</span><div><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><p>Check the spool file, and verify that the packages and procedures compiled successfully. Correct any problems that you find in this log file. If necessary, rerun the appropriate script.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Exit SQL*Plus.</span></li>
                        <li class="stepexpand"><span>If you are downgrading a cluster database, then you must run the following command to downgrade the Oracle Clusterware database configuration:</span><div><pre class="pre codeblock"><code>$ srvctl downgrade database -d <span class="variable" translate="no">db-unique-name</span> -o <span class="variable" translate="no">oraclehome</span> -t <span class="variable" translate="no">to_version</span>
</code></pre></div>
                           <div>
                              <p>Replace the variables in this syntax example with the values for your system:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">db-unique-name</span></code> is the database name (not the instance name).
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">oraclehome</span></code> is the location of the old Oracle home for the downgraded database.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">to_version</span></code> is the database release to which the database is downgraded. (For example: 12.1.0.2.0.)
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-0227D321-577E-47C5-A8C0-36991B8D0357__GUID-DFEFB115-42A3-42B4-86CC-E2109E326FA3">
                                 <p class="notep1">Note:</p>
                                 <p>Run this command from the new release Oracle home, not from the Oracle home to which the database is being downgraded.</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>At the completion of this procedure, your database is downgraded.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA">Troubleshooting the Downgrade of Oracle Database</a></li>
                           <li><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-EF4B784F-BF90-48B5-80B5-3D4E209F8F8E" title="To automate downgrades, starting in Oracle Database 19c, Oracle provides the dbdowngrade utility script. When necessary, you can also continue to run catdwgrd.sql manually, as in previous releases.">Using Scripts to Downgrade a CDB or Non-CDB Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C" name="GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C"></a><h3 id="UPGRD-GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C" class="sect3">About Downgrades and Invalid Objects with Component Status OPTION OFF</h3>
               <div>
                  <p>Downgrades from later release Oracle Database Standard Edition to Oracle Database 12c Standard Edition with CDB and PDBS contain later release invalid objects after the downgrade. </p>
                  <p>With downgrades from later release Oracle Database releases to Oracle Database Release 12c (12.2 or 12.1), it is expected behavior to find later release invalid objects in the downgraded database, where the Oracle Database Release 12c database had these objects set to FALSE. This problem does not exist with downgrades to Oracle Database Release 18c (18.1.0) and later Oracle Database releases. </p>
                  <div class="example" id="GUID-F1FB354D-8C53-4E80-A4C9-A6366055028C__GUID-4ECE04D0-86FB-474A-9C18-ACAAC5BD0D4F">
                     <p>For example:</p>
                     <p>During a downgrade from Oracle Database 19c Standard Edition to Oracle Database 12c Release 2 (12.2.0.1) Standard Edition, you have OLAP and Spatial components upgraded to the 19c release versions, though they are set to FALSE. After the downgrade, the OLAP and Spatial components are still not available, but they are not reloaded into the 12.2.0.1 release. You then see this result in the DBA registry, where you have later release objects listed in your 12.2 registry:</p><pre class="pre codeblock"><code>OLAP Analytic Workspace             OPTION OFF   19.1.0
Oracle OLAP API                     OPTION OFF   19.1.0</code></pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>This result is expected behavior in downgrades from Oracle Database 18c and later to Oracle Database 12c. The reason that this behavior is expected is because the option setting for these options in Standard Edition databases is FALSE. During the upgrade, all options are upgraded, even though they are set to <code class="codeph">FALSE</code>. During the run of <code class="codeph">catrelod.sql</code>, the reload scripts do not run to replace these objects with the earlier release versions. As a result, downgrading back to Standard Edition leaves many OLAP and Spatial objects at their later release versions.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F" name="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F"></a><h3 id="UPGRD-GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F" class="sect3">Downgrading a Single Pluggable Oracle Database (PDB)</h3>
               <div>
                  <p>If you are downgrading Oracle Database, then you can downgrade one PDB without downgrading the whole CDB.</p>
                  <p>In Oracle Database releases later than Oracle Database 12c release 2 (12.2), you can downgrade individual PDBs. For example, you can unplug a PDB from an upgraded CDB, downgrade the PDB, and then plug it in to an earlier release CDB, or you can convert the PDB database to a standalone database.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__GUID-FDBE5EE1-9702-4F3C-AAAF-AB864443A5E2">Downgrade the PDB</p>
                     <p>In this procedure example, you downgrade the PDB to release 12.1.0.2:</p>
                     <ol>
                        <li>
                           <p>Start up the PDB in DOWNGRADE mode. The CDB can be in normal mode when you do this.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database CDB1_PDB1 open downgrade;
</pre></li>
                        <li>
                           <p>Downgrade the PDB, either by using the <code class="codeph">dbdowngrade</code> utility, or by running <code class="codeph">catdwgrd</code> manually, using <code class="codeph">catcon.pl</code>. 
                           </p>
                           <p>In each of these options, the PDB that you are downgrading is <code class="codeph">PDB1</code>.
                           </p>
                           <ul style="list-style-type: disc;" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__UL_UWJ_LB2_CGB">
                              <li>
                                 <p>Downgrading with <code class="codeph">dbdowngrade</code> utility.
                                 </p>
                                 <p>Downgrade the PDB using the dbdowngrade script as follows:</p><pre class="pre codeblock"><code>cd $ORACLE_HOME/bin
./dbdowngrade -c 'PDB1'</code></pre></li>
                              <li>
                                 <p>Manually downgrading with <code class="codeph">catdwgrd</code>, using <code class="codeph">catcon.p.</code></p>
                                 <p>Run <code class="codeph">catdwgrd</code> as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -d
 $ORACLE_HOME/rdbms/admin -n 1 -l &lt;output directory&gt; -e -b catdwgrd -c 'PDB1'
 catdwgrd.sql
</pre><p>In the example, <code>catdwgrd</code> is run with <code>catcon.pl</code>. The <code class="codeph">-d</code> parameter tells <code>catcon.pl</code> where to find <code>catdwgrd</code>. The <code class="codeph">-l</code> parameter specifies the output directory for log files, instead of writing to the <code class="codeph">rdbms/admin</code> directory). You must use the <code class="codeph">-r</code> parameter to run the two scripts together at the same time.
                                 </p>
                                 <p>The log files for the downgrade are placed in the Oracle base home (the Oracle base identified by the commands <code class="codeph">orabasehome</code>, or <code class="codeph">orabase</code>, or the Oracle home identified by the command <code class="codeph">oracle_home</code>, in that order.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Close the PDB.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__GUID-201A7D9B-2D52-44EE-BC23-2408393DF7AF">Unplug the PDB from the CDB</p>
                     <p>In this step you unplug the downgraded PDB from the release 12.2.0.1 CDB:</p>
                     <ol>
                        <li>
                           <p>Connect to the upgraded CDB.</p>
                        </li>
                        <li>
                           <p>Close the PDB that you want to unplug.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database PDB1 close;
</pre></li>
                        <li>
                           <p>Unplug the downgraded 12.1.0.2 PDB, replacing the variable <code class="codeph"><span class="variable" translate="no">path</span></code> with the path on your system:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database PDB1 unplug into '<span class="variable" translate="no">path</span>/pdb1.xml';
</pre><p>You receive the following response when the unplug is completed:</p><pre class="oac_no_warn" dir="ltr">Pluggable database altered</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-66560D5D-A5C8-4ACC-82C0-46315465E77F__GUID-217DD5FD-30A1-4796-A0C4-3CBAB107CAA0">Plug in the Downgraded 12.1.0.2 PDB</p>
                     <p>In this step you plug the downgraded 12.1.0.2 PDB into the 12.1.0.2 CDB. To do this, you must create the PDB in this CDB. The following example shows how to create a pluggable database called PDB1:</p>
                     <ol>
                        <li>
                           <p>Connect to the 12.1.0.2 CDB.</p>
                        </li>
                        <li>
                           <p>Plug in the 12.1.0.2 PDB.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; create pluggable database PDB1 using '<span class="variable" translate="no">path</span>/pdb1.xml';
</pre><p>This command returns <code class="codeph">Pluggable database created</code>.
                           </p>
                        </li>
                        <li>
                           <p>Open the PDB in upgrade mode:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter pluggable database PDB1 open upgrade;
</pre></li>
                        <li>
                           <p>Connect to the PDB:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; alter session set container=PDB1;
</pre></li>
                        <li>
                           <p>Run <code class="codeph">catrelod</code> in the PDB:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @$ORACLE_HOME/rdbms/admin/catrelod.sql
</pre><p>The <code class="codeph">catrelod.sql</code> script reloads the appropriate version for each of the database components in the downgraded database.
                           </p>
                        </li>
                        <li>
                           <p>Run <code class="codeph">utlrp</code> in the PDB:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @$ORACLE_HOME/rdbms/admin/utlrp.sql
</pre><p>The <code class="codeph">utlrp.sql</code> script recompiles all existing PL/SQL modules that were previously in an <code class="codeph">INVALID</code> state, such as packages, procedures, types, and so on.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65" name="GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65"></a><h3 id="UPGRD-GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65" class="sect3">Downgrading PDBs That Contain Oracle Application Express</h3>
               <div>
                  <p>Use this procedure to avoid INVALID OBJECTS OWNED BY APEX_050000 errors when you downgrade PDBs that contain Oracle Application Express.</p>
                  <div class="section">
                     <p>After you downgrade the PDB to an earlier release, enter a SQL statement similar to the following to drop the Oracle Application Express user: </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EEC355DD-AA56-4972-9EB3-139CEC457D65__ORACLE_HOMEPERLBINPERLORACLE_HOMERD-50050B17"><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -b drop_apex5
-c 'PDB1' -- --x'drop user apex_050000 cascade'</code></pre><p>In this example, the PDB name is <code class="codeph">'PDB1'</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12557"></a><div class="props_rev_3"><a id="GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" name="GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5"></a><h3 id="UPGRD-GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" class="sect3">Post-Downgrade Tasks for Oracle Database Downgrades</h3>
               <div>
                  <p>Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322">Oracle XML DB Authentication Recommendations for an Oracle Database Downgrade</a><br>Upgrades from releases earlier than 12.1 result in digest authentication being disabled. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2">Reapply Release Update and Other Patches After Downgrade</a><br>After the downgrade is run, and <code class="codeph">catrelod.sql</code> completes successfully, if you installed new patches in your original Oracle home after the upgrade, but before the downgrade, then ensure that you apply any patches that you installed.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5">Re-enabling Oracle Database Vault after Downgrading Oracle Database</a><br>You must do this if you are instructed during the downgrade to disable Oracle Database Vault.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-67714F0E-0CE4-4527-86AF-8918914DACAF">Restoring the Configuration for Oracle Clusterware</a><br>To restore the configuration, you must restore the release from which you were upgrading.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a><br>The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0">Restoring Oracle Application Express to the Earlier Release</a><br>After a downgrade, if you upgraded Oracle Application Express at the same time as you upgraded Oracle Database, then you must complete steps to revert to the earlier Oracle Application Express release. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-6B972762-122D-4CFF-B910-6F93409DAC5F">Gathering Dictionary Statistics After Downgrading</a><br>To help to assure good performance after you downgrade, use this procedure to gather dictionary statistics.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506">Regathering Fixed Object Statistics After Downgrading</a><br>After the downgrade, run representative workloads on Oracle Database, and regather fixed object statistics.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-3B34038A-2C85-4B77-B91D-BB9665883B21">Regathering Stale CBO Statistics After Downgrade</a><br>Oracle recommends that you regather Oracle Cost-Based Optimizer (CBO) statistics after completing an Oracle Database downgrade.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               <a id="UPGRD52884"></a><div class="props_rev_3"><a id="GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322" name="GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322"></a><h4 id="UPGRD-GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322" class="sect4">Oracle XML DB Authentication Recommendations for an Oracle Database Downgrade</h4>
                  <div>
                     <p>Upgrades from releases earlier than 12.1 result in digest authentication being disabled. </p>
                     <p>If you downgrade to a release that is earlier than Oracle Database 12<span class="italic">c</span>, in which digest authentication is not supported, digest authentication is disabled and made unavailable as an authentication choice. This affects HTTP authentication for Oracle XML DB Repository. If you did not take advantage of digest authentication and instead used the default configuration, then no further actions are necessary.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2C4D727B-48E3-4AD2-852D-D3A54C838322__GUID-9E98738F-8B58-4827-BB7C-722CA5BED224">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adxdb/administration-of-XML-DB.html#ADXDB6110" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about authentication with Oracle XML DB for database installation, upgrade, and downgrade
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2" name="GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2"></a><h4 id="UPGRD-GUID-5C696750-2055-4FB2-8EB6-83E5139B1EA2" class="sect4">Reapply Release Update and Other Patches After Downgrade</h4>
                  <div>
                     <p>After the downgrade is run, and <code class="codeph">catrelod.sql</code> completes successfully, if you installed new patches in your original Oracle home after the upgrade, but before the downgrade, then ensure that you apply any patches that you installed.
                     </p>
                     <p>If you installed new patches, then run the <code class="codeph">datapatch</code> tool to apply those patches to the downgraded database. If you did not change the binaries and files in your Oracle Home after the upgrade, then there is no need to run <code class="codeph">datapatch</code> after running <code class="codeph">catrelod.sql</code>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD12559"></a><div class="props_rev_3"><a id="GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5" name="GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5"></a><h4 id="UPGRD-GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5" class="sect4">Re-enabling Oracle Database Vault after Downgrading Oracle Database</h4>
                  <div>
                     <p>You must do this if you are instructed during the downgrade to disable Oracle Database Vault.</p>
                     <p>If you use Oracle Database Vault, then you may have been instructed to disable it before downgrading your database. To use Oracle Database Vault after downgrading, you must re-enable it.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B8C9E95E-AC37-48F0-945F-4A17E111E7D5__GUID-93351A50-7410-4292-A0C0-237F8265FC6F">
                        <p class="notep1">See Also:</p>
                        <p><a href="../dvadm/getting-started-with-oracle-database-vault.html#DVADM30031" target="_blank"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for the procedure to re-enable Oracle Database Vault
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52664"></a><div class="props_rev_3"><a id="GUID-67714F0E-0CE4-4527-86AF-8918914DACAF" name="GUID-67714F0E-0CE4-4527-86AF-8918914DACAF"></a><h4 id="UPGRD-GUID-67714F0E-0CE4-4527-86AF-8918914DACAF" class="sect4">Restoring the Configuration for Oracle Clusterware</h4>
                  <div>
                     <p>To restore the configuration, you must restore the release from which you were upgrading.</p>
                     <p>You can restore the Oracle Clusterware configuration to the state it was in before the Oracle Clusterware 12<span class="italic">c</span> Release 2 (12.2) upgrade. Any configuration changes that you have performed during or after the Oracle Database 12<span class="italic">c</span> upgrade process are removed and cannot be recovered.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-67714F0E-0CE4-4527-86AF-8918914DACAF__GUID-22CCA6B5-57DE-4E14-930B-5E0DFE5405FF">
                        <p class="notep1">See Also:</p>
                        <p><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a> for your platform
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60106"></a><div class="props_rev_3"><a id="GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" name="GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD"></a><h4 id="UPGRD-GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" class="sect4">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</h4>
                  <div>
                     <p>The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.</p>
                     <p>To restore Oracle Enterprise Manager, you first run Oracle Enterprise Manager configuration assistant (EMCA), and then you run the <code class="codeph">emdwgrd</code> utility.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422">Requirements for Restoring Oracle Enterprise Manager After Downgrading</a><br>You must complete these requirements before you upgrade to be able to restore Oracle Enterprise Manager after a downgrade to a release earlier than 12.1 
                        </li>
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a><br>Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade. 
                        </li>
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-A97C04EC-BD77-4075-A354-03788DBCB74D">Running the emdwgrd utility to restore Enterprise Manager Database Control</a><br>You can restore the Oracle Enterprise Manager Database Control and data by using the <code>emdwgrd</code> utility after you run <kbd class="userinput">emca -restore</kbd>.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422" name="GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422"></a><h5 id="UPGRD-GUID-648BBBCF-0F0E-43CB-ACF7-B8F15882F422" class="sect5">Requirements for Restoring Oracle Enterprise Manager After Downgrading</h5>
                     <div>
                        <p>You must complete these requirements before you upgrade to be able to restore Oracle Enterprise Manager after a downgrade to a release earlier than 12.1 </p>
                        <p>The following must be true to use <code class="codeph">emca -restore</code> to restore Oracle Enterprise Manager to its previous state:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Before the upgrade, you saved a backup of your Oracle Enterprise Manager configuration files and data</p>
                           </li>
                           <li>
                              <p>You run the <code class="codeph">emca</code> binary located in the Oracle Database 12<span class="italic">c</span> Oracle home for this procedure
                              </p>
                           </li>
                        </ul>
                        <p>On Oracle Clusterware systems, to restore Oracle Enterprise Manager on an Oracle RAC database, you must have the database registered using <code class="codeph">srvctl</code> before you run <code class="codeph">emca -restore</code>. You must run <code class="codeph">emca -restore</code> from the <code><span class="variable" translate="no">ORACLE_HOME</span>/bin</code> directory of the earlier Oracle Database release to which the database is being downgraded.
                        </p>
                        <p>Run the <code class="codeph">emca -restore</code> command with the appropriate options to restore Oracle Enterprise Manager Database Control or Grid Control to the old Oracle home. 
                        </p>
                        <p>Specify different <code>emca</code> options, depending on whether the database you want to downgrade is a single-instance database, an Oracle RAC database, or an Oracle ASM database.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../cwadd/server-control-command-reference.html#CWADD-GUID-803F603E-8638-4946-84D4-CB24D21C893C" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" title="The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" name="GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0"></a><h5 id="UPGRD-GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" class="sect5">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</h5>
                     <div>
                        <p>Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade. </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167">Running emca on a Single-Instance Oracle Database Without Oracle ASM</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B">Running EMCA on an Oracle RAC Database Without Oracle ASM</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database:
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A">Running EMCA on a Single-Instance Oracle ASM Instance</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02">Running emca on an Oracle ASM on Oracle RAC Instance</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601">Running emca on a Single-Instance Oracle Database With Oracle ASM</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                           <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E">Running emca on an Oracle RAC Database and Oracle ASM Instance</a><br>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" title="The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="UPGRD60107"></a><div class="props_rev_3"><a id="GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167" name="GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167"></a><h6 id="UPGRD-GUID-C2AC0068-9BB8-4CE5-B15D-5603E5613167" class="sect6">Running emca on a Single-Instance Oracle Database Without Oracle ASM</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="oac_no_warn" dir="ltr">ORACLE_HOME/bin/emca -restore db
</pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database SID</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60108"></a><div class="props_rev_3"><a id="GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B" name="GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B"></a><h6 id="UPGRD-GUID-5E91C301-67ED-4C35-BAE6-2A533E84829B" class="sect6">Running EMCA on an Oracle RAC Database Without Oracle ASM</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database:
                           </p>
                           <p>Use this procedure to run Enterprise Manager Configuration Assistant:</p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore db -cluster
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database unique name</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60109"></a><div class="props_rev_3"><a id="GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A" name="GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A"></a><h6 id="UPGRD-GUID-5F8A1676-8ACF-4D19-879A-72524BB7AF6A" class="sect6">Running EMCA on a Single-Instance Oracle ASM Instance</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore asm
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                              <li>
                                 <p>Oracle ASM SID</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60110"></a><div class="props_rev_3"><a id="GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02" name="GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02"></a><h6 id="UPGRD-GUID-2F275E58-A811-41F9-9AF5-0D8E400F7F02" class="sect6">Running emca on an Oracle ASM on Oracle RAC Instance</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore asm -cluster
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60111"></a><div class="props_rev_3"><a id="GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601" name="GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601"></a><h6 id="UPGRD-GUID-3F8EFEF3-1410-4983-87DA-042A9DD69601" class="sect6">Running emca on a Single-Instance Oracle Database With Oracle ASM</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant. </p><pre class="pre codeblock"><code>ORACLE_HOME/bin/emca -restore db_asm
</code></pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the Oracle Database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database SID</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                              <li>
                                 <p>Oracle ASM home</p>
                              </li>
                              <li>
                                 <p>Oracle ASM SID [+ASM]</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="UPGRD60112"></a><div class="props_rev_3"><a id="GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E" name="GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E"></a><h6 id="UPGRD-GUID-A1DDA4D7-7EC2-4D1C-89E3-A1C8D9CC142E" class="sect6">Running emca on an Oracle RAC Database and Oracle ASM Instance</h6>
                        <div>
                           <p>Use Enterprise Manager Configuration Assistant (<code>emca</code>) to manage your database and storage.
                           </p>
                           <p>Use this command to run Enterprise Manager Configuration Assistant:</p><pre class="oac_no_warn" dir="ltr">ORACLE_HOME/bin/emca -restore db_asm -cluster
</pre><p>You are prompted to enter the following information:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle home for the database that you want to restore</p>
                              </li>
                              <li>
                                 <p>Database unique name</p>
                              </li>
                              <li>
                                 <p>Listener port number</p>
                              </li>
                              <li>
                                 <p>Oracle ASM port</p>
                              </li>
                              <li>
                                 <p>Oracle ASM Oracle home</p>
                              </li>
                              <li>
                                 <p>Oracle ASM SID [+ASM]</p>
                              </li>
                           </ul>
                           <p>The output of <code>emca</code> varies according to the options that you specify and the values that you enter at the prompts. In Oracle RAC environments, you must repeat this step on all Oracle RAC cluster member nodes.
                           </p>
                           <p>You must now run the <code>emdwgrd</code> utility to restore Oracle Enterprise Manager Database Control and data.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-2EEC4E63-0F98-4EC8-8630-46F69A5A1FB0" title="Review these topics and select your restoration scenario to restore Oracle Enterprise Manager after a downgrade.">Running EMCA to Restore Oracle Enterprise Manager After Downgrading</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="UPGRD60113"></a><div class="props_rev_3"><a id="GUID-A97C04EC-BD77-4075-A354-03788DBCB74D" name="GUID-A97C04EC-BD77-4075-A354-03788DBCB74D"></a><h5 id="UPGRD-GUID-A97C04EC-BD77-4075-A354-03788DBCB74D" class="sect5">Running the emdwgrd utility to restore Enterprise Manager Database Control</h5>
                     <div>
                        <p>You can restore the Oracle Enterprise Manager Database Control and data by using the <code>emdwgrd</code> utility after you run <kbd class="userinput">emca -restore</kbd>.
                        </p>
                        <p>To use <code>emdwgrd</code>, you must do the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set <span class="variable" translate="no">ORACLE_HOME</span> and other environment variables to point to the Oracle home from which the upgrade originally took place.
                              </p>
                           </li>
                           <li>
                              <p> Run the <code>emdwgrd</code> utility from the Oracle Database 12<span class="italic">c</span> home
                              </p>
                           </li>
                        </ul>
                        <p>The following procedure is for Linux and UNIX. To run it on Windows, substitute <code>emdwgrd.bat</code> for <code>emdwgrd</code>.
                        </p>
                        <ol>
                           <li>
                              <p>Set <span class="variable" translate="no">ORACLE_HOME</span> to the Oracle home from which the database upgrade originally took place.
                              </p>
                           </li>
                           <li>
                              <p>Set <span class="variable" translate="no">ORACLE_SID</span> to the SID of the database that was upgraded and then downgraded.
                              </p>
                           </li>
                           <li>
                              <p>Set <span class="variable" translate="no">PATH</span>, <span class="variable" translate="no">LD_LIBRARY_PATH</span> and <span class="variable" translate="no">SHLIB_PATH</span> to point to the Oracle home from which the database upgrade originally took place.
                              </p>
                           </li>
                           <li>
                              <p>Go to the Oracle Database 12<span class="italic">c</span> Oracle home:
                              </p><pre class="pre codeblock"><code>cd $ORACLE_HOME/bin
</code></pre><pre class="oac_no_warn" dir="ltr"></pre></li>
                           <li>
                              <p>Run <code>emdwgrd</code> using one of the following procedures:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>For a single-instance database, run the following command, where <code class="codeph"><span class="variable" translate="no">SID</span></code> is the SID of the database that was upgraded and then downgraded and <code class="codeph"><span class="variable" translate="no">save_directory</span></code> is the path to the storage location you chose when saving your database control files and data:
                                    </p><pre class="pre codeblock"><code>emdwgrd -restore -sid <span class="variable" translate="no">SID</span> -path <span class="variable" translate="no">save_directory</span> -tempTablespace TEMP
</code></pre><pre class="oac_no_warn" dir="ltr"></pre></li>
                                 <li>
                                    <p>For an Oracle RAC database, remote copy is required across the cluster nodes. Define an environment variable to indicate which remote copy is configured. For example:</p><pre class="pre codeblock"><code>setenv EM_REMCP /usr/bin/scp
</code></pre><p>Then, run <kbd class="userinput">emdwgrd —restore</kbd> with the following options:
                                    </p><pre class="pre codeblock"><code>emdwgrd -restore -tempTablespace TEMP -cluster -sid <span class="variable" translate="no">SID_OldHome</span> -path <span class="variable" translate="no">save_directory</span>
</code></pre><p>If the Oracle home is on a shared device, then add <kbd class="userinput">-shared</kbd> to the <code>emdwgrd</code> command options.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Enter the SYS and SYSMAN passwords when prompted by <code>emdwgrd</code>.
                              </p>
                           </li>
                           <li>
                              <p>When <code>emdwgrd</code> completes, Oracle Enterprise Manager Database Control is downgraded to the old Oracle home.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-C2C793F4-67A1-4F10-88DB-EE09D7C3B4CD" title="The restore task described in this section is required only if you are performing a downgrade, and Oracle Enterprise Manager is configured on the host.">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0" name="GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0"></a><h4 id="UPGRD-GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0" class="sect4">Restoring Oracle Application Express to the Earlier Release</h4>
                  <div>
                     <p>After a downgrade, if you upgraded Oracle Application Express at the same time as you upgraded Oracle Database, then you must complete steps to revert to the earlier Oracle Application Express release. </p>
                     <p>To complete the downgrade of Oracle Application Express after a database downgrade, complete all the steps listed in <cite>Oracle Application Express Installation Guide</cite> to revert your Oracle Application Express release to the earlier release. The steps to revert are different, depending on whether your architecture is a Non-CDB or a multitenant architecture (CDB) Oracle Database. 
                     </p>
                     <div class="infoboxnote" id="GUID-593D396B-A1C2-4453-BBDA-8C4455000CA0__GUID-7CF0A9E9-5C05-4F0C-8E7B-4C64408AA2EB">
                        <p class="notep1">Note:</p>
                        <p>You only need to complete these steps if you upgraded Oracle Application Express at the same time that you upgraded the database.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=HTMIG266" target="_blank"><span><cite>Oracle Application Express Installation Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F" name="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F"></a><h4 id="UPGRD-GUID-6B972762-122D-4CFF-B910-6F93409DAC5F" class="sect4">Gathering Dictionary Statistics After Downgrading</h4>
                  <div>
                     <p>To help to assure good performance after you downgrade, use this procedure to gather dictionary statistics.</p>
                     <div class="section">
                        <p>Oracle recommends that you gather dictionary statistics after downgrading the database, so that the statistics are collected for the downgraded release Data Dictionary tables.</p>
                        <div class="infoboxnote" id="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F__GUID-1185D203-0BC8-4290-8C80-1DE6DB2F3FF1">
                           <p class="notep1">Note:</p>
                           <p>After a downgrade process, be aware that the the data dictionary can have changes that persist in the downgraded dictionary. These changes are insignificant. The downgraded data dictionary is functionally equivalent to an earlier release data dictionary. </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B972762-122D-4CFF-B910-6F93409DAC5F__GUID-89186456-922B-4682-AB96-4154AF51FF98">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Non-CDB Oracle Database: Oracle recommends that you use the <code class="codeph">DBMS_STATS.GATHER_DICTIONARY_STATS</code> procedure to gather these statistics. For example, enter the following SQL statement:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC DBMS_STATS.GATHER_DICTIONARY_STATS;
</pre></li>
                           <li>
                              <p>CDB (multitenant architecture) Oracle Database: Oracle recommends that you use <code>catcon</code> to gather Data Dictionary statistics across the entire multitenant architecture. 
                              </p>
                              <p>To gather dictionary statistics for all PDBs in a container database, use the following syntax:</p>
                              <p><code class="codeph">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -b gatherstats -- --x"exec dbms_stats.gather_dictionary_stats"</code></p>
                              <p>To gather dictionary statistics on a particular PDB, use syntax similar to the following:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -c
'SALES1' -b gatherstats -- --x"exec dbms_stats.gather_dictionary_stats"</code></pre><p>In the preceding example the <code class="codeph">-c SALES1</code> option specifies a PDB inclusion list for the command that you run, specifying the database named <code class="codeph">SALES1</code>. The option <code class="codeph"> -b gatherstats</code>specifies the base name for the logs. The option <code class="codeph">--x</code> specifies the SQL command that you want to execute. The SQL command itself is inside the quotation marks.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-867989C7-ADFC-4464-8981-437CEA7F331E" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506" name="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506"></a><h4 id="UPGRD-GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506" class="sect4">Regathering Fixed Object Statistics After Downgrading</h4>
                  <div>
                     <p>After the downgrade, run representative workloads on Oracle Database, and regather fixed object statistics.</p>
                     <div class="section">
                        <p>Fixed objects are the X$ tables and their indexes. V$ performance views are defined through X$ tables. After you downgrade, regather fixed object statistics to ensure that the optimizer for the restored database can generate good execution plans. These execution plans can improve database performance. Failing to obtain representative statistics can lead to suboptimal execution plans, which can cause performance problems</p>
                        <p>Gather fixed objects statistics by using the <code class="codeph">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> PL/SQL procedure. <code class="codeph">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> also displays recommendations for removing all hidden or underscore parameters and events from <code class="codeph">init.ora</code> and <code class="codeph">SPFILE</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506__GUID-9570A561-DA47-4A64-AA78-DCB20ABDAFA8">
                        <p>To gather statistics for fixed objects, run the following PL/SQL procedure:</p><pre class="pre codeblock"><code>SQL&gt; execute dbms_stats.gather_fixed_objects_stats;</code></pre><div class="infoboxnotealso" id="GUID-42DB61B8-ADA7-426D-B9E6-24365BDE0506__GUID-6952400C-259E-4561-A653-3EBAB6B3CF58">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-EAD4C693-4F03-45DE-9704-1466C8E35232" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about using the <code class="codeph">GATHER_FIXED_OBJECTS_STATS</code> procedure
                           </p>
                        </div><pre class="pre codeblock"><code></code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3B34038A-2C85-4B77-B91D-BB9665883B21" name="GUID-3B34038A-2C85-4B77-B91D-BB9665883B21"></a><h4 id="UPGRD-GUID-3B34038A-2C85-4B77-B91D-BB9665883B21" class="sect4">Regathering Stale CBO Statistics After Downgrade</h4>
                  <div>
                     <p>Oracle recommends that you regather Oracle Cost-Based Optimizer (CBO) statistics after completing an Oracle Database downgrade.</p>
                     <div class="section">
                        <p>When you upgrade Oracle Database and gather new CBO statistics, the upgraded database has new database statistics. The upgraded database also can include new histogram types. For this reason, when you downgrade the database, the statistics that you collected for the new release can be different from the previous release. This issue is applicable both to data dictionary tables, and to regular user tables.</p>
                        <p>Regather stale statistics either by using GATHER_DATABASE_STATS, or by using gather commands that you typically use to update stale statistics in the dictionary and application schemas.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3B34038A-2C85-4B77-B91D-BB9665883B21__DJWREGATHERSTALE2.4.2GATHERIN-36BE6E15">
                        <p>For example: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Non-CDB Oracle Database: To regather statistics, Oracle recommends that you use the <code class="codeph">GATHER_DATABASE_STATS</code> procedure, with the option <code class="codeph">'GATHER STALE'</code>. For example:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; execute dbms_stats.gather_database_stats(options=&gt;'GATHER STALE');</pre></li>
                           <li>
                              <p>CDB (multitenant architecture) Oracle Database: to regather Data Dictionary statistics across the entire multitenant architecture, Oracle recommends that you use <code>catcon</code>.
                              </p>
                              <p>To regather stale dictionary statistics for all PDBs in a container database, use the following syntax:</p>
                              <p><code class="codeph">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -b gatherstats -- --x"exec dbms_stats.gather_database_stats(options=&gt;'GATHER STALE')"</code></p>
                              <p>To gather dictionary statistics on a particular PDB, use syntax similar to the following:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -c
'SALES1' -b gatherstats -- --x"exec dbms_stats.gather_database_stats(options=&gt;'GATHER STALE')"</code></pre><p>In the preceding example, the <code class="codeph">-c SALES1</code> option specifies a PDB inclusion list for the command that you run, specifying the database named <code class="codeph">SALES1</code>. The option <code class="codeph"> -b gatherstats</code>specifies the base name for the logs. The option <code class="codeph">--x</code> specifies the SQL command that you want to execute. The SQL command itself is inside the quotation marks.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-867989C7-ADFC-4464-8981-437CEA7F331E" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-5DF45F07-90FB-4AE2-9814-4956D60726E5" title="Additional tasks may be required after downgrading an Oracle database due to changes that affect compatibility, components, and supported protocols.">Post-Downgrade Tasks for Oracle Database Downgrades</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52750"></a><div class="props_rev_3"><a id="GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" name="GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA"></a><h3 id="UPGRD-GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" class="sect3">Troubleshooting the Downgrade of Oracle Database</h3>
               <div>
                  <p>Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.</p>
                  <p> This section contains known errors that may occur during downgrades, and workarounds to address those errors. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1">Errors Downgrading Oracle Database Components with catdwgrd.sql Script</a><br>Use this section to troubleshoot errors when you run the <code class="codeph">catdwgrd.sql</code> script during a downgrade, such as <code class="codeph">ORA-20001</code>: Downgrade cannot proceed.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C">Oracle Multimedia Downgrade and imrelod.sql Script Error</a><br>Review if you encounter ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-DC657D49-A972-4F3F-9D39-D59860133BF8">Oracle Database Vault and dvrelod.sql Script Error</a><br>Review if you encounter ORA-31011: XML parsing failed.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91">Downgrading Oracle Grid Infrastructure (Oracle Restart) After Successful or Failed Upgrade</a><br>To downgrade Oracle Restart, you must deconfigure and then reinstall Oracle Grid Infrastructure. You can then add back the databases and services.
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-865ED278-8D25-4D79-8C8F-70343C4535F1">Oracle ACFS and Oracle Grid Infrastructure Downgrades to 11g Release 2 (11.2)</a><br>You must run <code>acfsroot install</code> before you attempt to start the software stack. 
                     </li>
                     <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA">Database Links Passwords After Downgrading Oracle Database 11g Release 1 (11.1)</a><br>Reset the passwords for any database links that were created in releases 11.2 or 12.1. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606" title="For supported releases of Oracle Database, you can downgrade a database to the release from which you last upgraded.">Downgrading Oracle Database to an Earlier Release</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1" name="GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1"></a><h4 id="UPGRD-GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1" class="sect4">Errors Downgrading Oracle Database Components with catdwgrd.sql Script</h4>
                  <div>
                     <p>Use this section to troubleshoot errors when you run the <code class="codeph">catdwgrd.sql</code> script during a downgrade, such as <code class="codeph">ORA-20001</code>: Downgrade cannot proceed.
                     </p>
                     <p>The <code>catdwgrd.sql</code> script downgrades all Oracle Database components in the database to the major release from which you originally upgraded. This script must run before the Data Dictionary can be downgraded. If you encounter any problems when you run the script, then correct the causes of the problems, and rerun the script.
                     </p>
                     <p>Errors you can see include <code class="codeph">ORA-39709</code>: incomplete component downgrade; string downgrade aborted, and <code class="codeph">ORA-06512</code>. When these errors occur, downgrades cannot proceed.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cause</span>: One or more components that must be downgraded before proceeding with the Data Dictionary downgrade did not downgrade.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Action</span>: Review the log files to determine what errors occurred before the <code class="codeph">catdwgrd.sql</code> script halted, and the downgrade was stopped. 
                           </p>
                        </li>
                     </ul>
                     <p>Review these examples to understand how to correct this issue.</p>
                     <p>Errors typically describe what you must do to fix the issue that is preventing the downgrade to complete. Follow the instructions in the error message. After you have fixed the cause of the error, rerun the <code>catdwgrd.sql</code> script. 
                     </p>
                     <p>For example, If the CDB downgrade fails during the downgrade of CDB$ROOT due to a check, then follow the instructions in the error message to fix the condition error. After you fix the error, rerun <code>catdwgrd.sql</code> with <code class="codeph">catcon.pl</code>. Use the <code class="codeph">-c</code> option to run the command with the inclusion list <code class="codeph">'CDB$ROOT PDB1'</code>. Use the <code class="codeph">-r</code> option to run the command first on the PDB, and then on CDB$ROOT. For example:
                     </p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -d $ORACLE_HOME/rdbms/admin -e -b catdwgrd -l /scratch/rac/downgradeLogs -c 'CDB$ROOT, PDB1, PDB2' -r catdwgrd.sql
</code></pre><div class="example" id="GUID-B34BCFE6-C55F-4D69-BA59-FCC883CD3EA1__GUID-4AE6D301-0665-463A-9C28-7079B1B1265B">
                        <p class="titleinexample">Example 7-1 ORA-20001 Error Due To ORA-06512</p>
                        <p>Your downgrade stops. When you review the log files, you find that <code>catdwgrd.sql</code> terminates on this error: 
                        </p><pre class="pre codeblock"><code>DECLARE * ERROR at line 1: ORA-20001: Downgrade cannot proceed - 
Unified Audit Trail data exists. Please clean up the data first 
using DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL. ORA-06512: at line 65 
ORA-06512: at line 42</code></pre><p>You must purge the unified audit trial on <code class="codeph"> CDB$ROOT</code> and on all PDBs.
                        </p>
                        <div class="p">For example: 
                           <ol>
                              <li>
                                 <p>Look for the presence of unified audit trails:</p><pre class="pre codeblock"><code>SQL&gt; SELECT COUNT(*) FROM UNIFIED_AUDIT_TRAIL;
COUNT(*)
----------
      4538</code></pre></li>
                              <li>
                                 <p>Purge the audit trail. on the CDB.</p>
                                 <p>For example, where the audit trail type is <code class="codeph">DBMS_AUDIT.MGMT.AUDIT</code>:
                                 </p><pre class="pre codeblock"><code>EXEC DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL DBMS_AUDIT_MGMT.AUDIT</code></pre></li>
                              <li>
                                 <p>Run <code class="codeph">catdwngrd.sql </code>on <code class="codeph">CDB$ROOT</code>. If PDBs still have unified audit data, then the script fails with ORA20001:
                                 </p><pre class="pre codeblock"><code> 62        execute immediate
 63        'select count(*) from audsys.'||'"'||tab_name||'"' into no_rows;
 64
 65        -- If audit trail has some data, raise the application error
 66        IF no_rows &gt; 0 THEN
 67          RAISE_APPLICATION_ERROR(-20001, ErrMsg);
 68        END IF;
 69      END IF;
 70    END IF;
 71  EXCEPTION
 72    WHEN NO_DATA_FOUND THEN
 73     NULL;
 74    WHEN OTHERS THEN
 75     RAISE;
 76  END;
 77  /
DECLARE
*
ERROR at line 1:
ORA-20001: Downgrade cannot proceed - Unified Audit Trail data exists.Please
clean up the data first using DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL.
ORA-06512: at line 75</code></pre></li>
                              <li>
                                 <p>Connect to individual PDBs, and find if they have unified audit trails. Clear the unified audit trail for all PDBs. For example, The PDB named PDB1 has unified audit trails:</p><pre class="pre codeblock"><code>ALTER SESSION SET container = PDB1;

SQL&gt; SELECT COUNT(*) FROM UNIFIED_AUDIT_TRAIL;
 COUNT(*)
----------
      1330</code></pre></li>
                              <li>
                                 <p>Identify the unified audit trails: </p><pre class="pre codeblock"><code>SQL&gt; CREATE TABLE UA_DATA AS (SELECT * FROM UNIFIED_AUDIT_TRAIL);</code></pre></li>
                              <li>
                                 <p>Purge the audit trails.</p>
                                 <p>In this example, the audit trail type is <code class="codeph">DBMS_AUDIT_MGMT.AAUDIT_TRAIL_UNIFIED</code>, the <code class="codeph">USE_LAST_ARCH_TIMESTAMP</code> value is set to <code class="codeph">FALSE</code>, so that all audit records are deleted, without considering last archive timestamp, and the <code class="codeph">CONTAINER</code> value is set to <code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_ALL</code>, so that audit records on all PDBs are purged. 
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL(
   AUDIT_TRAIL_TYPE           =&gt;  DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED,
   USE_LAST_ARCH_TIMESTAMP    =&gt;  FALSE,
   CONTAINER                  =&gt;  DBMS_AUDIT_MGMT.CONTAINER_ALL
END;
/</code></pre></li>
                              <li>
                                 <p>Rerun <code class="codeph">catdwngrd.sql</code> at the PDB and CDB level. For example:
                                 </p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -c 'CDB$ROOT,PDB1' -d $ORACLE_HOME/rdbms/admin -e -b catdwgrd -l /u01/oracle/product/19.0.0/downgrade_logs -r catdwgrd.sql</code></pre></li>
                              <li>
                                 <p>Repeat the process of finding and purging audit trails and run <code class="codeph">catdwgrd.sql</code> until the script completes successfully on the CDB and PDBs, and you no longer see <code class="codeph">ORA-20001</code> errors in logs 
                                 </p>
                              </li>
                           </ol> 
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/administering-the-audit-trail.html#DBSEG-GUID-7D2E55CE-2820-47E3-A989-5F7AAB19CD76" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="UPGRD60114"></a><div class="props_rev_3"><a id="GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C" name="GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C"></a><h4 id="UPGRD-GUID-627D70F7-D0B2-442C-B520-06BEBDEBF59C" class="sect4">Oracle Multimedia Downgrade and imrelod.sql Script Error</h4>
                  <div>
                     <p>Review if you encounter ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. </p>
                     <p>When downgrading Oracle Database from release 12.1 to release 11.2.0.2, an error may be raised from the <code class="codeph">imrelod.sql</code> script, which is included with release 11.2.0.2.
                     </p>
                     <p><code class="codeph">ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. Oracle ORDIM must be installed and valid prior to Oracle Multimedia upgrade, downgrade, or patch.</code></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cause </span>The <code class="codeph">imrelod.sql</code> script raises this error because it does not know the status of ORDIM.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Action</span> No action. You can ignore this error.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60115"></a><div class="props_rev_3"><a id="GUID-DC657D49-A972-4F3F-9D39-D59860133BF8" name="GUID-DC657D49-A972-4F3F-9D39-D59860133BF8"></a><h4 id="UPGRD-GUID-DC657D49-A972-4F3F-9D39-D59860133BF8" class="sect4">Oracle Database Vault and dvrelod.sql Script Error</h4>
                  <div>
                     <p>Review if you encounter ORA-31011: XML parsing failed.</p>
                     <p>When downgrading Oracle Database from release 12.1 to release 11.2.0.3, databases that use Oracle Database Vault may encounter the following error, which is a result of the <code class="codeph">dvrelod.sql</code> script that is included with release 11.2.0.3:
                     </p><pre class="pre codeblock"><code>ORA-31011: XML parsing failed; Oracle Database Vault downgrade to release 11.2.0.3</code></pre><ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Cause </span>The <code class="codeph">dvrelod.sql</code> script does not know the status of XML parsing.
                           </p>
                           <p><span class="bold">Action</span> No action. You can ignore this message.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60143"></a><div class="props_rev_3"><a id="GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91" name="GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91"></a><h4 id="UPGRD-GUID-4B6D5991-6336-4FCC-A8B3-6DA35F4D4C91" class="sect4">Downgrading Oracle Grid Infrastructure (Oracle Restart) After Successful or Failed Upgrade</h4>
                  <div>
                     <p>To downgrade Oracle Restart, you must deconfigure and then reinstall Oracle Grid Infrastructure. You can then add back the databases and services.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1364412.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1364412.1</a></li>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="UPGRD60116"></a><div class="props_rev_3"><a id="GUID-865ED278-8D25-4D79-8C8F-70343C4535F1" name="GUID-865ED278-8D25-4D79-8C8F-70343C4535F1"></a><h4 id="UPGRD-GUID-865ED278-8D25-4D79-8C8F-70343C4535F1" class="sect4">Oracle ACFS and Oracle Grid Infrastructure Downgrades to 11g Release 2 (11.2)</h4>
                  <div>
                     <p>You must run <code>acfsroot install</code> before you attempt to start the software stack. 
                     </p>
                     <p>If you use Oracle ASM Cluster File System (Oracle ACFS), and you upgrade to Oracle Grid Infrastructure 12c, either for a cluster or for an Oracle Restart standalone server, and you choose to downgrade to Oracle Grid Infrastructure 11g Release 2 (11.2), then before you attempt to start the release 11.2 software stack, you must run the command <code class="codeph">acfsroot install</code> from the release 11.2 Oracle Grid Infrastructure Oracle home (Grid home). 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD60144"></a><div class="props_rev_3"><a id="GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" name="GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA"></a><h4 id="UPGRD-GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" class="sect4">Database Links Passwords After Downgrading Oracle Database 11<span class="italic">g</span> Release 1 (11.1)
                  </h4>
                  <div>
                     <p>Reset the passwords for any database links that were created in releases 11.2 or 12.1. </p>
                     <p>After downgrading to Oracle Database release 11.1, you are required to reset the passwords for any database links that were created in releases 11.2 or 12.1. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121">ORA-00600 Errors with Database Links Passwords After Downgrading to Oracle Database 11.1 Release 1</a><br>This error can occur if you do not reset the database link password.
                        </li>
                        <li class="ulchildlink"><a href="downgrading-oracle-db-after-upgrade.html#GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496">Using Oracle Data Pump Export to Create a Dump File Containing All Existing Database Links</a><br>Before performing the downgrade, use this Oracle Data Pump export procedure to create a dump file that contains all the existing database links. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F3DAC69A-A5D0-4998-A14D-DCC8599AD3FA" title="Use this troubleshooting information to address issues that may occur when downgrading Oracle Database.">Troubleshooting the Downgrade of Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121" name="GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121"></a><h5 id="UPGRD-GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121" class="sect5">ORA-00600 Errors with Database Links Passwords After Downgrading to Oracle Database 11.1 Release 1</h5>
                     <div>
                        <p>This error can occur if you do not reset the database link password.</p>
                        <div class="p"> If you do not reset the database link password, then an internal error is displayed when anyone attempts to make use of the database link. For reference, this is the internal error that is reported in the Oracle trace file when the Oracle server fails to retrieve the password of the database link: <pre class="pre codeblock"><code>ORA-00600: [kzdlk_zt2 err], [18446744073709551601]</code></pre></div>
                        <p>To reset the password for the database link after downgrading to release 11.1, use the <code>ALTER DATABASE LINK</code> command to change the password back to the original password by specifying the original password in the IDENTIFIED BY clause.
                        </p>
                        <p>To create new database links while running Oracle Database release 11.2 or 12.1 that do not have this password issue, contact Oracle support for information about how to use the IDENTIFIED BY VALUES clause of the <code>CREATE DATABASE LINK</code> command.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-339D0338-A80C-4B5C-8406-57E7ABEC8121__GUID-E8A3F122-7431-4AAC-B9E4-B28A8BC43490">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/ALTER-DATABASE-LINK.html#SQLRF30050" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                           <p> </p>
                           <p><a href="../admin/developing-applications-for-a-distributed-database-system.html#ADMIN12194" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about controlling connections established by database links
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" title="Reset the passwords for any database links that were created in releases 11.2 or 12.1.">Database Links Passwords After Downgrading Oracle Database 11g Release 1 (11.1)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="UPGRD60145"></a><div class="props_rev_3"><a id="GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496" name="GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496"></a><h5 id="UPGRD-GUID-EB0943DA-C2C5-4CC9-93B5-9B2675BCD496" class="sect5">Using Oracle Data Pump Export to Create a Dump File Containing All Existing Database Links</h5>
                     <div>
                        <p>Before performing the downgrade, use this Oracle Data Pump export procedure to create a dump file that contains all the existing database links. </p>
                        <p></p>
                        <p>The dump file you create includes any newly-created database links. The procedure uses the <span class="parmname" translate="no">FULL=Y</span> and <span class="parmname" translate="no">INCLUDE=DB_LINK</span> parameters with the <code>expdp</code> command.
                        </p>
                        <ol>
                           <li>
                              <p>Log in to SQL*Plus.</p>
                              <p>For example:</p><pre class="pre codeblock"><code>sqlplus system/manager
</code></pre></li>
                           <li>
                              <p>Drop the dump directory in case one exists.</p>
                              <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; DROP DIRECTORY dpump_dir;
SQL&gt; CREATE DIRECTORY dpump_dir AS '/location_to_write_datapump_dump_file';
</code></pre></li>
                           <li>
                              <p>Export the database links.</p>
                              <p>For example:</p><pre class="pre codeblock"><code>$ expdp system/manager FULL=Y directory=dpump_dir 
  dumpfile=saved_dblinks.dmp INCLUDE=DB_LINK;
</code></pre></li>
                           <li>
                              <p>After the downgrade, if any of the downgraded database links are not working properly, then drop these links, and import them from the dump file:</p><pre class="pre codeblock"><code>$ impdp system/manager directory=dpump_dir dumpfile=saved_dblinks.dmp;</code></pre><p> For example, if you find that links are showing the internal error ORA-00600, then dropping and importing the links from the dump file should cause those links to work as intended. </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="downgrading-oracle-db-after-upgrade.html#GUID-F5278C79-EB57-4E68-BE58-758F7A9F22FA" title="Reset the passwords for any database links that were created in releases 11.2 or 12.1.">Database Links Passwords After Downgrading Oracle Database 11g Release 1 (11.1)</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
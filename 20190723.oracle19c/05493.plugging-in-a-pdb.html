<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can create a PDB by plugging an unplugged PDB into a CDB.">
      <meta name="description" content="You can create a PDB by plugging an unplugged PDB into a CDB.">
      <title>Plugging In an Unplugged PDB</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="You can create a PDB by plugging an unplugged PDB into a CDB.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="relocating-a-pdb.html" title="Previous" type="text/html">
      <link rel="next" href="creating-a-proxy-pdb.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="relocating-a-pdb.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="creating-a-proxy-pdb.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="creating-pdbs.html" property="item" typeof="WebPage"><span property="name">Creating and Removing PDBs and Application Containers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Plugging In an Unplugged PDB</li>
            </ol>
            <a id="GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" name="GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3"></a>
            
            <h2 id="MULTI-GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" class="sect2"><span class="enumeration_chapter">9 </span>Plugging In an Unplugged PDB
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can create a PDB by plugging an unplugged PDB into a CDB.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-5CFC53B9-C457-460A-92A5-DAFDC472F458">About Plugging In an Unplugged PDB</a><br>The <code class="codeph">USING</code> clause of the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement specifies a XML metadata file or a compressed archive file with a .pdb extension.
                  </li>
                  <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61">About Adopting a Non-CDB as a PDB</a><br>To generate an XML file that describes a non-CDB, use the <code class="codeph">DBMS_PDB.DESCRIBE</code> procedure. Afterward, plug in the non-CDB just as you plug in an unplugged PDB. 
                  </li>
                  <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0">Plugging In an Unplugged PDB</a><br>Plug in a PDB with the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING</code> statement.
                  </li>
                  <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B">Adopting a Non-CDB as a PDB</a><br>You can adopt (move) a non-CDB into a PDB by using the <code class="codeph">DBMS_PDB.DESCRIBE</code> procedure. 
                  </li>
                  <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70">After Plugging in an Unplugged PDB</a><br>Certain rules regarding users and tablespaces apply after plugging in an unplugged PDB.
                  </li>
                  <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81">Plugging in an Unplugged PDB: Examples</a><br>These examples plug in an unplugged PDB named <code class="codeph">salespdb</code> using the <code class="codeph">/disk1/usr/salespdb.xml</code> file or the <code class="codeph">/disk1/usr/sales.pdb</code> file given different factors.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="You can create PDBs, application containers, and application seeds using a variety of techniques.">Creating and Removing PDBs and Application Containers</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-5CFC53B9-C457-460A-92A5-DAFDC472F458" name="GUID-5CFC53B9-C457-460A-92A5-DAFDC472F458"></a><h3 id="MULTI-GUID-5CFC53B9-C457-460A-92A5-DAFDC472F458" class="sect3"><span class="enumeration_section">9.1 </span>About Plugging In an Unplugged PDB
               </h3>
               <div>
                  <p>The <code class="codeph">USING</code> clause of the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement specifies a XML metadata file or a compressed archive file with a .pdb extension.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-157624D9-7D38-4758-9FF2-645EC55106A9">About the XML File and Archive File</a><br>An XML metadata file describes the unplugged PDB and the files associated with the PDB (such as the data files and wallet file). An archive file includes both the XML metadata file and the PDB files. 
                     </li>
                     <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-1691A7A2-372E-4E51-8A4F-15DAC6AB0FC3">Source File Locations When Plugging In an Unplugged PDB</a><br>Use the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING</code> statement to plug an unplugged PDB into a CDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13753"></a><a id="ADMIN13573"></a><a id="ADMIN13553"></a><div class="props_rev_3"><a id="GUID-157624D9-7D38-4758-9FF2-645EC55106A9" name="GUID-157624D9-7D38-4758-9FF2-645EC55106A9"></a><h4 id="MULTI-GUID-157624D9-7D38-4758-9FF2-645EC55106A9" class="sect4"><span class="enumeration_section">9.1.1 </span>About the XML File and Archive File
                  </h4>
                  <div>
                     <p>An XML metadata file describes the unplugged PDB and the files associated with the PDB (such as the data files and wallet file). An archive file includes both the XML metadata file and the PDB files. </p>
                     <p>When the XML metadata file is specified, the XML file includes the full paths of the PDB files. When the .pdb archive file is specified, the XML metadata file contains the relative file names only.</p>
                     <p>The following figure illustrates how to plug in an unplugged PDB.</p>
                     <div class="figure" id="GUID-157624D9-7D38-4758-9FF2-645EC55106A9__CEGHDJHJ">
                        <p class="titleinfigure">Figure 9-1 Plugging an Unplugged PDB Into a CDB Root</p><img src="img/admin090.png" width="484" alt="Description of Figure 9-1 follows" title="Description of Figure 9-1 follows" longdesc="img_text/admin090.html"><br><a href="img_text/admin090.html">Description of "Figure 9-1 Plugging an Unplugged PDB Into a CDB Root"</a></div>
                     <!-- class="figure" -->
                     <p>The following figure illustrates how this technique creates a new application PDB in an application container.</p>
                     <div class="figure" id="GUID-157624D9-7D38-4758-9FF2-645EC55106A9__PLUGGINGANUNPLUGGEDPDBINTOANAPPLICA-8052B592">
                        <p class="titleinfigure">Figure 9-2 Plugging an Unplugged PDB Into an Application Root</p><img src="img/admin117.png" alt="Description of Figure 9-2 follows" title="Description of Figure 9-2 follows" longdesc="img_text/admin117.html"><br><a href="img_text/admin117.html">Description of "Figure 9-2 Plugging an Unplugged PDB Into an Application Root"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnote" id="GUID-157624D9-7D38-4758-9FF2-645EC55106A9__GUID-2F036AD6-5FC7-45BB-87F4-A7ABAF345086">
                        <p class="notep1">Note:</p>Automatic downgrade of a PDB is not supported. Therefore, you cannot plug in a PDB if the source CDB is a higher Oracle Database release than the target CDB.
                     </div>
                     <p>When you plug in an unplugged PDB, you must address the questions that apply to plugging in an unplugged PDB in <a href="overview-of-pdb-creation.html#GUID-87F21FDE-7115-4207-954E-B229C1879EF6__GUID-57A2E4B5-E8EB-4294-95C2-A3E04AF93D8C" title="This table describes each clause and when to use each clause.">Table 5-3</a>. The table describes which <code class="codeph">CREATE PLUGGABLE DATABASE</code> clauses you must specify based on different factors.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-157624D9-7D38-4758-9FF2-645EC55106A9__GUID-6F112C5A-4677-4737-B697-3AF04A388C4B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="overview-of-pdb-creation.html#GUID-59F42929-7237-4371-8934-921B46DB6F31" title="However you choose to create a PDB, you must decide on the tablespaces and files that will store the data.">PDB Storage</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-88E61123-F651-47D7-9977-B589268EBD29" title="You create an application PDB by running the CREATE&nbsp;PLUGGABLE&nbsp;DATABASE&nbsp;statement with an application root as the current container.">Creating an Application PDB</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-5CFC53B9-C457-460A-92A5-DAFDC472F458" title="The USING clause of the CREATE PLUGGABLE DATABASE statement specifies a XML metadata file or a compressed archive file with a .pdb extension.">About Plugging In an Unplugged PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13564"></a><a id="ADMIN13563"></a><div class="props_rev_3"><a id="GUID-1691A7A2-372E-4E51-8A4F-15DAC6AB0FC3" name="GUID-1691A7A2-372E-4E51-8A4F-15DAC6AB0FC3"></a><h4 id="MULTI-GUID-1691A7A2-372E-4E51-8A4F-15DAC6AB0FC3" class="sect4"><span class="enumeration_section">9.1.2 </span>Source File Locations When Plugging In an Unplugged PDB
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING</code> statement to plug an unplugged PDB into a CDB.
                     </p>
                     <p>When you use a .pdb archive file when plugging in a PDB, Oracle Database extracts this file when you plug in the PDB, and places the PDB files in the same directory as the .pdb archive file. Therefore, the clauses that specify the source file locations are not required when you use a .pdb archive file.</p>
                     <p>When you specify an XML metadata file when plugging in a PDB, this file describes the names and locations of an unplugged PDB source files. The XML file might not describe the locations of these files accurately if you transported the unplugged files from one storage system to a different one. The files are in a new location, but the file paths in the XML file still indicate the old location.</p>
                     <p>When plugging in an unplugged PDB using an XML metadata file (not a .pdb archive file), use either the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or the <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause. These clauses are mutually exclusive.
                     </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-CD341EDB-8B27-484B-9C55-CF206E2983DD">SOURCE_FILE_NAME_CONVERT Clause</a><br>The <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause specifies how to locate PDB files when they reside in a location different from that specified in the XML file. 
                        </li>
                        <li class="ulchildlink"><a href="plugging-in-a-pdb.html#GUID-57A111DC-5D82-47D3-9239-9B8F604528FC">SOURCE_FILE_DIRECTORY Clause</a><br>The <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause specifies the source directory of the files that will be used to create the new PDB.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-5CFC53B9-C457-460A-92A5-DAFDC472F458" title="The USING clause of the CREATE PLUGGABLE DATABASE statement specifies a XML metadata file or a compressed archive file with a .pdb extension.">About Plugging In an Unplugged PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-CD341EDB-8B27-484B-9C55-CF206E2983DD" name="GUID-CD341EDB-8B27-484B-9C55-CF206E2983DD"></a><h5 id="MULTI-GUID-CD341EDB-8B27-484B-9C55-CF206E2983DD" class="sect5"><span class="enumeration_section">9.1.2.1 </span>SOURCE_FILE_NAME_CONVERT Clause
                     </h5>
                     <div>
                        <p>The <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause specifies how to locate PDB files when they reside in a location different from that specified in the XML file. 
                        </p>
                        <p>You can use this clause to specify one of the following options:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>One or more file name patterns and replacement file name patterns, in the following form:</p><pre class="oac_no_warn" dir="ltr">'<span class="italic">string1</span>' , '<span class="italic">string2</span>' , '<span class="italic">string3</span>' , '<span class="italic">string4</span>' , ...
</pre><p>The <span class="italic">string2</span> file name pattern replaces the <span class="italic">string1</span> file name pattern, and the <span class="italic">string4</span> file name pattern replaces the <span class="italic">string3</span> file name pattern. You can use as many pairs of file name pattern and replacement file name pattern strings as required.
                              </p>
                              <p>When you use this clause, ensure that the files you want to use for the PDB reside in the replacement file name patterns. Move or copy the files to these locations if necessary.</p>
                           </li>
                           <li>
                              <p><code class="codeph">NONE</code> when no file names need to be located because the PDB's XML file describes the file names accurately. Omitting the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause is the same as specifying <code class="codeph">NONE</code>.
                              </p>
                           </li>
                        </ul>
                        <p>You can use the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause only in a <code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement with a <code class="codeph">USING</code> clause that specifies an XML metadata file. Therefore, you can use this clause only when you are plugging in an unplugged PDB with an XML metadata file. You cannot use this clause when you are plugging in a PDB with a .pdb archive file.
                        </p>
                        <div class="example" id="GUID-CD341EDB-8B27-484B-9C55-CF206E2983DD__GUID-72F60ACF-4573-4252-9993-AC08E183F617">
                           <p class="titleinexample">Example 9-1 SOURCE_FILE_NAME_CONVERT Clause</p>
                           <p>This <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause uses the files in the /disk2/oracle/pdb7 directory instead of the /disk1/oracle/pdb7 directory. In this case, the XML file describing a PDB specifies the /disk1/oracle/pdb7 directory, but the PDB should use the files in the /disk2/oracle/pdb7 directory.
                           </p><pre class="oac_no_warn" dir="ltr">SOURCE_FILE_NAME_CONVERT = ('/disk1/oracle/pdb7/', '/disk2/oracle/pdb7/')
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-CD341EDB-8B27-484B-9C55-CF206E2983DD__GUID-36424435-B7BE-4778-85F8-CF6EEE8C55F6">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55794" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for the syntax of the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-1691A7A2-372E-4E51-8A4F-15DAC6AB0FC3" title="Use the CREATE PLUGGABLE DATABASE ... USING statement to plug an unplugged PDB into a CDB.">Source File Locations When Plugging In an Unplugged PDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-57A111DC-5D82-47D3-9239-9B8F604528FC" name="GUID-57A111DC-5D82-47D3-9239-9B8F604528FC"></a><h5 id="MULTI-GUID-57A111DC-5D82-47D3-9239-9B8F604528FC" class="sect5"><span class="enumeration_section">9.1.2.2 </span>SOURCE_FILE_DIRECTORY Clause
                     </h5>
                     <div>
                        <p>The <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause specifies the source directory of the files that will be used to create the new PDB.
                        </p>
                        <p>The clause specifies a directory that contains all of the files listed in the XML file. Using this clause is convenient when you have many data files and specifying a <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> pattern for each file is not feasible.
                        </p>
                        <p>When you plug in a PDB, if the source files are all present in a single directory, then you can specify the directory name in this clause. The directory is scanned to find the appropriate files based on the unplugged PDB’s XML file. </p>
                        <p>You can use this clause to specify one of the following options:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The absolute path of the source file directory.</p>
                           </li>
                           <li>
                              <p><code class="codeph">NONE</code> when no files should be copied or moved during PDB creation. Omitting the <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is the same as specifying <code class="codeph">NONE</code>.
                              </p>
                           </li>
                        </ul>
                        <p></p>
                        <p>You can use the <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause only in a <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with a <code class="codeph">USING</code> clause that specifies an XML metadata file. Therefore, you can use this clause only when you are plugging in an unplugged PDB with an XML metadata file. You cannot use this clause when you are plugging in a PDB with a .pdb archive file.
                        </p>
                        <p>You can specify this clause for configurations that use Oracle Managed Files and for configurations that do not use Oracle Managed Files.</p>
                        <div class="example" id="GUID-57A111DC-5D82-47D3-9239-9B8F604528FC__GUID-079577AE-60A8-409A-A503-1287C2734DB3">
                           <p class="titleinexample">Example 9-2 SOURCE_FILE_DIRECTORY Clause</p>
                           <p>This <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause generates file names for the new PDB by using the source files in the /oracle/pdb5/ directory.
                           </p><pre class="oac_no_warn" dir="ltr">SOURCE_FILE_DIRECTORY = '/oracle/pdb5/'</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-57A111DC-5D82-47D3-9239-9B8F604528FC__GUID-36424435-B7BE-4778-85F8-CF6EEE8C55F6">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF57048" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for the syntax of the <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-1691A7A2-372E-4E51-8A4F-15DAC6AB0FC3" title="Use the CREATE PLUGGABLE DATABASE ... USING statement to plug an unplugged PDB into a CDB.">Source File Locations When Plugging In an Unplugged PDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN13757"></a><a id="ADMIN13756"></a><div class="props_rev_3"><a id="GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61" name="GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61"></a><h3 id="MULTI-GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61" class="sect3"><span class="enumeration_section">9.2 </span>About Adopting a Non-CDB as a PDB
               </h3>
               <div>
                  <p>To generate an XML file that describes a non-CDB, use the <code class="codeph">DBMS_PDB.DESCRIBE</code> procedure. Afterward, plug in the non-CDB just as you plug in an unplugged PDB. 
                  </p>
                  <p>Create the PDB with the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING</code> statement. When the non-CDB is plugged in to a CDB, it is a PDB.
                  </p>
                  <div class="figure" id="GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61__GUID-1B3EDBBB-C6FB-4B0C-B11C-8429309B56DA">
                     <p class="titleinfigure">Figure 9-3 Plug In a Non-CDB Using the DBMS_PDB.DESCRIBE Procedure</p><img src="img/admin098.png" width="495" alt="Description of Figure 9-3 follows" title="Description of Figure 9-3 follows" longdesc="img_text/admin098.html"><br><a href="img_text/admin098.html">Description of "Figure 9-3 Plug In a Non-CDB Using the DBMS_PDB.DESCRIBE Procedure"</a></div>
                  <!-- class="figure" -->
                  <p>You can use the same technique to create a new application PDB in an application container.</p>
                  <div class="infoboxnote" id="GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61__GUID-8B8734D6-E5DB-4503-9889-94A596C4A75B">
                     <p class="notep1">Note:</p>
                     <p>To use this technique, the non-CDB must be at release <span>Oracle Database 12c</span> or later.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-FEB1F7ED-33EA-4582-8861-52B18BC74A61__GUID-71EA71C0-C6BB-4D56-87D3-C40B7A8BCE2B">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a>"</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN13576"></a><a id="ADMIN13577"></a><a id="ADMIN13578"></a><a id="ADMIN13579"></a><a id="ADMIN13580"></a><a id="ADMIN13582"></a><a id="ADMIN13855"></a><div class="props_rev_3"><a id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0" name="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0"></a><h3 id="MULTI-GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0" class="sect3"><span class="enumeration_section">9.3 </span>Plugging In an Unplugged PDB
               </h3>
               <div>
                  <p>Plug in a PDB with the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING</code> statement.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__GUID-3EF284D9-10F4-476C-B651-7C8DCEC75AC7">General Prerequisites</p> 
                     <p>To plug in an unplugged PDB, the following prerequisites must be met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Complete the prerequisites described in <span class="q">"<a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">General Prerequisites for PDB Creation</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Either the XML file that describes the PDB or the .pdb archive file must exist in a location that is accessible to the CDB.</p>
                           <p>The <code class="codeph">USING</code> clause must specify the XML file or the .pdb archive file. If the PDB's XML file is unusable or cannot be located, then use the <code class="codeph">DBMS_PDB.RECOVER</code> procedure to generate an XML file using the PDB's data files. 
                           </p>
                        </li>
                        <li>
                           <p>If an XML file (not a .pdb file) is specified in the <code class="codeph">USING</code> clause, then the files associated with the PDB (such as the data files and wallet file) must exist in a location that is accessible to the CDB.
                           </p>
                        </li>
                        <li>
                           <p>If the target database for the plugin operation is the primary database in an Oracle Data Guard configuration, then ensure that the standby database can locate the files for the plugged-in PDB.</p>
                           <p>On the standby database, set the <code class="codeph">STANDBY_PDB_SOURCE_FILE_DIRECTORY</code> initialization parameter to a location that contains the source data files for instantiating the PDB. If the files are not found, then the standby database tries to locate the files in the OMF location. If not found in the OMF location, then you must copy the data files to the OMF location on the standby database, and restart redo apply on the standby database.
                           </p>
                        </li>
                        <li>
                           <p>The source and target CDB platforms must meet the following requirements:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>They must have the same endianness.</p>
                              </li>
                              <li>
                                 <p>The database options installed on the source platform must be the same as, or a subset of, the database options installed on the target platform.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>If you are creating an application PDB, then the application name and version of the unplugged PDB must match the application name and version of the application container into which the application PDB is being plugged.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__GUID-F6E50620-9367-483B-BFE0-3A460F43FD70">Character Set Prerequisites</p>
                     <p>You must meet the following prerequisites for matching the character sets:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the character set of the CDB into which the PDB is being plugged is not AL32UTF8, then the CDB that contained the unplugged PDB and the target CDB must have compatible character sets and national character sets. To be compatible, the character sets and national character sets must meet the requirements specified in <a href="../nlspg/choosing-character-set.html#NLSPG1035" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a>.
                           </p>
                           <p>If the character set of the CDB into which the PDB is being plugged is AL32UTF8, then this requirement does not apply. </p>
                        </li>
                        <li>
                           <p>If you are creating an application PDB, then the application PDB must have the same character set and national character set as the application container.</p>
                           <p>If the database character set of the CDB is AL32UTF8, then the character set and national character set of the application container can be different from the CDB. However, all application PDBs in an application container must have same character set and national character set, matching that of the application container.</p>
                        </li>
                     </ul>
                     <p>To determine whether the preceding requirements are met, use the <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> function. Step 2 in the following procedure describes using this function.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__GUID-86E17E9E-4BE0-4EB1-83B3-3832BA217576">To plug in a PDB:</p>
                     <ol>
                        <li>
                           <p>In SQL*Plus, ensure that the current container is the CDB root or application root of the target CDB.</p>
                           <p>When the current container is the CDB root, the PDB is created in the CDB. When the current container is an application root, the application PDB is created in the application container.</p>
                        </li>
                        <li id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__OPTIONALRUNTHEDBMS_PDB.CHECK_PLUG_C-EF8AB1D3">
                           <p>(Optional) Run the <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> function to determine whether the unplugged PDB is compatible with the CDB.
                           </p>
                           <ol type="a">
                              <li id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__IFTHEPDBISNOTYETUNPLUGGEDTHENRUNTHE-EF8C495A">
                                 <p>If the PDB is not yet unplugged, then run the <code class="codeph">DBMS_PDB.DESCRIBE</code> procedure to produce an XML file that describes the PDB.
                                 </p>
                                 <p>If the PDB is already unplugged, then proceed to Step 2b.</p>
                                 <p>For example, to generate an XML file named <code class="codeph">salespdb.xml</code> in the /disk1/oracle directory, run the following procedure:
                                 </p><pre class="pre codeblock"><code>BEGIN
  DBMS_PDB.DESCRIBE(
    pdb_descr_file =&gt; '/disk1/oracle/salespdb.xml',
    pdb_name       =&gt; 'SALESPDB');
END;
/
</code></pre><p>If the PDB is in a remote CDB, then you can include <code class="codeph">@</code><span class="italic"><code class="codeph">database_link_name</code></span> in the <code class="codeph">pdb_name</code> parameter, where <span class="italic"><code class="codeph">database_link_name</code></span> is the name of a valid database link to the remote CDB or to the PDB. For example, if the database link name to the remote CDB is <code class="codeph">rcdb</code>, then set the <code class="codeph">pdb_name</code> value to <code class="codeph">SALESPDB@rcdb</code>.
                                 </p>
                              </li>
                              <li id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__RUNTHEDBMS_PDB.CHECK_PLUG_COMPATIBI-EF8AA667">
                                 <p>Run the <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> function.
                                 </p>
                                 <p>When you run the function, set the following parameters:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">pdb_descr_file</code> - Set this parameter to the full path to the XML file.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">pdb_name</code> - Specify the name of the new PDB. If this parameter is omitted, then the PDB name in the XML file is used.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>For example, to determine whether a PDB described by the <code class="codeph">/disk1/usr/salespdb.xml</code> file is compatible with the current CDB, run the following PL/SQL block:
                                 </p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON
DECLARE
  compatible CONSTANT VARCHAR2(3) := 
    CASE DBMS_PDB.CHECK_PLUG_COMPATIBILITY(
           pdb_descr_file =&gt; '/disk1/usr/salespdb.xml',
           pdb_name       =&gt; 'SALESPDB')
    WHEN TRUE THEN 'YES'
    ELSE 'NO'
END;
BEGIN
  DBMS_OUTPUT.PUT_LINE(compatible);
END;
/
</code></pre><p>If the output is <code class="codeph">YES</code>, then the PDB is compatible, and you can continue with the next step. If the output is <code class="codeph">NO</code>, then the PDB is not compatible: check the <code class="codeph">PDB_PLUG_IN_VIOLATIONS</code> view to see why it is not compatible.
                                 </p>
                              </li>
                           </ol>
                           <div class="infoboxnote" id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__GUID-67313AF6-ED3D-4E06-A49E-453CFA5F69B5">
                              <p class="notep1">Note:</p>You can specify a .pdb archive file in the <code class="codeph">pdb_descr_file</code> parameter.
                           </div>
                        </li>
                        <li>
                           <p>If the PDB is not unplugged, then unplug it.</p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">CREATE PLUGGABLE DATABASE ... USING</code> statement, specifying the XML file or the .pdb archive file in the <code class="codeph">USING</code> clause. Specify other clauses when they are required.
                           </p>
                           <p>After you create the PDB, it is in mounted mode, and its status is <code class="codeph">NEW</code>. You can view the open mode of a PDB by querying the <code class="codeph">OPEN_MODE</code> column in the <code class="codeph">V$PDBS</code> view. You can view the status of a PDB by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view.
                           </p>
                           <p>A new default service is created for the PDB. The service has the same name as the PDB and can be used to access the PDB. Oracle Net Services must be configured properly for clients to access this service.</p>
                        </li>
                        <li>
                           <p>Open the new PDB in read/write mode.</p>
                           <p>You must open the new PDB in read/write mode for Oracle Database to complete the integration of the new PDB into the CDB. An error is returned if you attempt to open the PDB in read-only mode. After the PDB is opened in read/write mode, its status is <code class="codeph">NORMAL</code>.
                           </p>
                        </li>
                        <li>
                           <p>Back up the PDB.</p>
                           <p>A PDB cannot be recovered unless it is backed up.</p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__GUID-FB02CD3A-80EE-4501-9DBC-385DB12AA1E7">
                        <p class="notep1">Note:</p>
                        <p>If an error is returned during PDB creation, then the PDB being created might be in an <code class="codeph">UNUSABLE</code> state. You can check a PDB's state by querying the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view, and you can learn more about PDB creation errors by checking the alert log. An unusable PDB can only be dropped, and it must be dropped before a PDB with the same name as the unusable PDB can be created.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0__GUID-061C1910-9739-429B-9392-775DF147253C">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="removing-a-pdb.html#GUID-893E1D67-BD95-4757-B862-03AD13AFF722" title="Just as you can plug a PDB into a CDB, you can unplug a PDB from a CDB.">Unplugging a PDB from a CDB</a>"</span></p>
                        </li>
                        <li><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of One or More PDBs</a>"</span> for more information.
                        </li>
                        <li>
                           <p><a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about backing up a PDB.
                           </p>
                        </li>
                        <li>
                           <p><a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB-GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn more about plugging in a PDB in an Oracle Data Guard environment
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter
                           </p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_PDB.html#ARPLS73527" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about this procedure.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN13851"></a><div class="props_rev_3"><a id="GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B" name="GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B"></a><h3 id="MULTI-GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B" class="sect3"><span class="enumeration_section">9.4 </span>Adopting a Non-CDB as a PDB
               </h3>
               <div>
                  <p>You can adopt (move) a non-CDB into a PDB by using the <code class="codeph">DBMS_PDB.DESCRIBE</code> procedure. 
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B__GUID-0A3EC9AD-C344-4C3C-94E8-DC479F15D0DD">To adopt a non-CDB as a PDB using the <code class="codeph">DBMS_PDB</code> package:
                     </p>
                     <ol>
                        <li>
                           <p>Create the CDB if it does not exist.</p>
                        </li>
                        <li>
                           <p>Ensure that the non-CDB is in a transactionally-consistent state.</p>
                        </li>
                        <li>
                           <p>Place the non-CDB in read-only mode.</p>
                        </li>
                        <li>
                           <p>Connect to the non-CDB, and run the <code class="codeph">DBMS_PDB.DESCRIBE</code> procedure to construct an XML file that describes the non-CDB.
                           </p>
                           <p>The current user must have <code class="codeph">SYSDBA</code> administrative privilege. The user must exercise the privilege using <code class="codeph">AS SYSDBA</code> at connect time.
                           </p>
                           <p>For example, to generate an XML file named <code class="codeph">ncdb.xml</code> in the <code class="codeph">/disk1/oracle</code> directory, run the following procedure:
                           </p><pre class="pre codeblock"><code>BEGIN
  DBMS_PDB.DESCRIBE(
    pdb_descr_file =&gt; '/disk1/oracle/ncdb.xml');
END;
/
</code></pre><p>After the procedure completes successfully, you can use the XML file and the non-CDB database files to plug the non-CDB into a CDB.</p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> function to determine whether the non-CDB is compatible with the CDB.
                           </p>
                           <p>When you run the function, set the following parameters:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">pdb_descr_file</code> - Set this parameter to the full path to the XML file.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">pdb_name</code> - Specify the name of the new PDB. If this parameter is omitted, then the PDB name in the XML file is used.
                                 </p>
                              </li>
                           </ul>
                           <p>For example, to determine whether a non-CDB described by the <code class="codeph">/disk1/oracle/ncdb.xml</code> file is compatible with the current CDB, run the following PL/SQL block:
                           </p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON
DECLARE
  compatible CONSTANT VARCHAR2(3) := 
    CASE DBMS_PDB.CHECK_PLUG_COMPATIBILITY(
           pdb_descr_file =&gt; '/disk1/oracle/ncdb.xml',
           pdb_name       =&gt; 'NCDB')
    WHEN TRUE THEN 'YES'
    ELSE 'NO'
END;
BEGIN
  DBMS_OUTPUT.PUT_LINE(compatible);
END;
/
</code></pre><p>If the output is <code class="codeph">YES</code>, then the non-CDB is compatible, and you can continue with the next step. If the output is <code class="codeph">NO</code>, then the non-CDB is not compatible, and you can check the <code class="codeph">PDB_PLUG_IN_VIOLATIONS</code> view to see why it is not compatible. All violations must be corrected before you continue. For example, any version or patch mismatches should be resolved by running an upgrade or the datapatch utility. After correcting the violations, run <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> again to ensure that the non-CDB is compatible with the CDB.
                           </p>
                        </li>
                        <li>
                           <p>Shut down the non-CDB.</p>
                        </li>
                        <li>
                           <p>Plug in the non-CDB.</p>
                           <p>For example, the following SQL statement plugs in a non-CDB, copies its files to a new location, and includes only the <code class="codeph">tbs3</code> user tablespace from the non-CDB:
                           </p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE ncdb USING '/disk1/oracle/ncdb.xml'
  COPY
  FILE_NAME_CONVERT = ('/disk1/oracle/dbs/', '/disk2/oracle/ncdb/')
  USER_TABLESPACES=('tbs3');
</code></pre><p>If there are no violations, then do not open the new PDB. You will open it in the following step.</p>
                           <p>The <code class="codeph">USER_TABLESPACES</code> clause enables you to separate data that was used for multiple tenants in a non-CDB into different PDBs. You can use multiple <code class="codeph">CREATE PLUGGABLE DATABASE</code> statements with this clause to create other PDBs that include the data from other tablespaces that existed in the non-CDB.
                           </p>
                        </li>
                        <li>
                           <p>Run the <code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span>/rdbms/admin/noncdb_to_pdb.sql</code> script. This script must be run before the PDB can be opened for the first time.
                           </p>
                           <p>If the PDB was not a non-CDB, then running the <code class="codeph">noncdb_to_pdb.sql</code> script is not required. To run the <code class="codeph">noncdb_to_pdb.sql</code> script, complete the following steps:
                           </p>
                           <ol type="a">
                              <li>
                                 <p>Access the PDB.</p>
                                 <p>The current user must have <code class="codeph">SYSDBA</code> administrative privilege, and the privilege must be either commonly granted or locally granted in the PDB. The user must exercise the privilege using <code class="codeph">AS SYSDBA</code> at connect time.
                                 </p>
                              </li>
                              <li>
                                 <p>Run the <code class="codeph">noncdb_to_pdb.sql</code> script:
                                 </p><pre class="pre codeblock"><code>@$ORACLE_HOME/rdbms/admin/noncdb_to_pdb.sql
</code></pre></li>
                           </ol>
                           <p>The script opens the PDB, performs changes, and closes the PDB when the changes are complete.</p>
                        </li>
                        <li id="GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B__OPENTHENEWPDBINREADWRITEMODE.YOUMUS-EF8E3A86">
                           <p>Open the new PDB in read/write mode.</p>
                           <p>You must open the new PDB in read/write mode for Oracle Database to complete the integration of the new PDB into the CDB. An error is returned if you attempt to open the PDB in read-only mode. After the PDB is opened in read/write mode, its status is <code class="codeph">NORMAL</code>.
                           </p>
                        </li>
                        <li>
                           <p>Back up the PDB.</p>
                           <p>A PDB cannot be recovered unless it is backed up.</p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-EE58804F-A999-4F7C-93DE-D641B3C1047B__GUID-E9DD002C-0C50-487B-B857-6AA13F0DC51F">
                        <p class="notep1">Note:</p>
                        <p>If an error is returned during PDB creation, then the PDB being created might be in an <code class="codeph">UNUSABLE</code> state. You can check a PDB's state by querying the <code class="codeph">CDB_PDBS</code> or <code class="codeph">DBA_PDBS</code> view, and you can learn more about PDB creation errors by checking the alert log. An unusable PDB can only be dropped, and it must be dropped before a PDB with the same name as the unusable PDB can be created.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="plugging-in-a-pdb.html#GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0" title="Plug in a PDB with the CREATE PLUGGABLE DATABASE ... USING statement.">Plugging In an Unplugged PDB</a></li>
                        <li><a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="Creating and configuring a &nbsp;multitenant container database (CDB) includes tasks such as planning, creating the CDB, and optionally configuring EM Express.">Creating and Configuring a CDB</a></li>
                        <li><a href="plugging-in-a-pdb.html#GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70" title="Certain rules regarding users and tablespaces apply after plugging in an unplugged PDB.">After Plugging in an Unplugged PDB</a></li>
                        <li><a href="../bradv/backing-up-database.html#BRADV-GUID-EB261F93-318D-4EBA-8E26-B0589703CC73" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN14168"></a><div class="props_rev_3"><a id="GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70" name="GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70"></a><h3 id="MULTI-GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70" class="sect3"><span class="enumeration_section">9.5 </span>After Plugging in an Unplugged PDB
               </h3>
               <div>
                  <p>Certain rules regarding users and tablespaces apply after plugging in an unplugged PDB.</p>
                  <p>The following applies after plugging in an unplugged PDB:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>User accounts in the PDB who used the default temporary tablespace of the source PDB use the default temporary tablespace of the target PDB. User accounts who used nondefault temporary tablespaces in the source PDB continue to use the same local temporary tablespaces in the target PDB.</p>
                     </li>
                     <li>
                        <p>Manually created common user accounts that existed in the source CDB but not in the target CDB do not have privileges granted commonly. However, if the target CDB has a common user with the same name as a common user in the PDB, then the latter is linked to the former and has the privileges granted to this common user in the target CDB.</p>
                        <p>If the cloned or plugged-in PDB has a common user account that does not exist in the target CDB, and if this user does not own objects in the PDB, then Oracle Database drops the user during the synchronization step; otherwise, the user account is locked in the target PDB. You have the following options regarding locked accounts:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Close the PDB, connect to the root, and create a common user account with the same name. When the PDB is opened in read/write mode, differences in roles and privileges granted commonly to the user account are resolved, and you can unlock the account. Privileges and roles granted locally to the user account remain unchanged during this process.</p>
                           </li>
                           <li>
                              <p>Create a new local user account in the PDB and use Data Pump to export/import the locked user's data into the new local user's schema.</p>
                           </li>
                           <li>
                              <p>Leave the user account locked.</p>
                           </li>
                           <li>
                              <p>Drop the user account.</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70__GUID-BB96C2B0-E059-4CBA-903B-E957AD15836E">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-6FDBCEFC-29DF-4CBB-A000-B105A7328955" title="You can create, modify, or remove services for a PDB.">Managing Services for PDBs</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="A tablespace is a logical storage container for database objects, such as tables and indexes, that consume storage space.">About Managing Tablespaces in a CDB</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="overview-of-the-multitenant-architecture.html#CNCPT89257" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for information about common users and local users
                           </p>
                        </li>
                        <li>
                           <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG002" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for information about creating common users and local users in a CDB
                           </p>
                        </li>
                        <li>
                           <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL4334" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for information about using Oracle Data Pump with a CDB
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81" name="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81"></a><h3 id="MULTI-GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81" class="sect3"><span class="enumeration_section">9.6 </span>Plugging in an Unplugged PDB: Examples
               </h3>
               <div>
                  <p>These examples plug in an unplugged PDB named <code class="codeph">salespdb</code> using the <code class="codeph">/disk1/usr/salespdb.xml</code> file or the <code class="codeph">/disk1/usr/sales.pdb</code> file given different factors.
                  </p>
                  <div class="section">
                     <p>In each example, the root to which the new PDB belongs depends on the current container when the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is run:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When the current container is the CDB root, the new PDB is created in the CDB.</p>
                        </li>
                        <li>
                           <p>When the current container is an application root, the new application PDB is created in the application root’s application container.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__CEGHJJEF">
                     <p class="titleinexample">Example 9-3 Plugging In an Unplugged PDB Using the NOCOPY Clause</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new PDB is not based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The XML file accurately describes the current locations of the files. Therefore, the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The files are in the correct location. Therefore, <code class="codeph">NOCOPY</code> is included.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>A file with the same name as the temp file specified in the XML file exists in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB:</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE salespdb USING '/disk1/usr/salespdb.xml' 
  NOCOPY 
  TEMPFILE REUSE;
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__CEGHGABE">
                     <p class="titleinexample">Example 9-4 Plugging In an Unplugged PDB Using the AS CLONE and NOCOPY Clauses</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new PDB is based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is required. The <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause ensures that the new PDB has unique identifiers.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The XML file accurately describes the current locations of the files. Therefore, the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The files are in the correct location. Therefore, <code class="codeph">NOCOPY</code> is included.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>A file with the same name as the temp file specified in the XML file exists in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB:</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE salespdb AS CLONE USING '/disk1/usr/salespdb.xml' 
  NOCOPY
  TEMPFILE REUSE;
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__CEGIHHBF">
                     <p class="titleinexample">Example 9-5 Plugging In an Unplugged PDB Using the SOURCE_FILE_NAME_CONVERT, NOCOPY, and STORAGE Clauses</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new PDB is not based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The XML file does not accurately describe the current locations of the files. Therefore, the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is required. In this example, the XML file indicates that the files are in /disk1/oracle/sales, but the files are in /disk2/oracle/sales, and the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause is used.
                           </p>
                        </li>
                        <li>
                           <p>The files are in the correct location. Therefore, <code class="codeph">NOCOPY</code> is included.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits must be enforced for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is required. Specifically, all tablespaces that belong to the PDB must not exceed 2 gigabytes.
                           </p>
                        </li>
                        <li>
                           <p>A file with the same name as the temp file specified in the XML file exists in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB:</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE salespdb USING '/disk1/usr/salespdb.xml' 
  SOURCE_FILE_NAME_CONVERT = ('/disk1/oracle/sales/', '/disk2/oracle/sales/')
  NOCOPY
  STORAGE (MAXSIZE 2G)
  TEMPFILE REUSE;
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__CEGBBHIF">
                     <p class="titleinexample">Example 9-6 Plugging In an Unplugged PDB With the COPY, PATH_PREFIX, and FILE_NAME_CONVERT Clauses</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new PDB is not based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The path prefix must be added to the PDB's directory object paths. Therefore, the <code class="codeph">PATH_PREFIX</code> clause is required. In this example, the path prefix /disk2/oracle/sales/ is added to the PDB’s directory object paths.
                           </p>
                        </li>
                        <li>
                           <p>The XML file accurately describes the current locations of the files. Therefore, the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The files are not in the correct location. Therefore, <code class="codeph">COPY</code> or <code class="codeph">MOVE</code> must be included. In this example, the files are copied.
                           </p>
                           <p>The <code class="codeph">CREATE_FILE_DEST</code> clause is not used, Oracle Managed Files is not enabled, and the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is not set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is required. In this example, the files are copied from /disk1/oracle/sales to /disk2/oracle/sales.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits are not required for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB:</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE salespdb USING '/disk1/usr/salespdb.xml' 
  COPY
  PATH_PREFIX = '/disk2/oracle/sales/'
  FILE_NAME_CONVERT = ('/disk1/oracle/sales/', '/disk2/oracle/sales/');
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__CEGCFDEB">
                     <p class="titleinexample">Example 9-7 Plugging In an Unplugged PDB Using the SOURCE_FILE_NAME_CONVERT, MOVE, FILE_NAME_CONVERT, and STORAGE Clauses</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new PDB is not based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The XML file does not accurately describe the current locations of the files. Therefore, the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is required. In this example, the XML file indicates that the files are in /disk1/oracle/sales, but the files are in /disk2/oracle/sales, and the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause is used.
                           </p>
                        </li>
                        <li>
                           <p>The files are not in the correct final location for the PDB. Therefore, <code class="codeph">COPY</code> or <code class="codeph">MOVE</code> must be included. In this example, <code class="codeph">MOVE</code> is specified to move the files.
                           </p>
                           <p>The <code class="codeph">CREATE_FILE_DEST</code> clause is not used, Oracle Managed Files is not enabled, and the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is not set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is required. In this example, the files are moved from /disk2/oracle/sales to /disk3/oracle/sales.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits must be enforced for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is required. Specifically, all tablespaces that belong to the PDB must not exceed 2 gigabytes.
                           </p>
                        </li>
                        <li>
                           <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB:</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE salespdb USING '/disk1/usr/salespdb.xml' 
  SOURCE_FILE_NAME_CONVERT = ('/disk1/oracle/sales/', '/disk2/oracle/sales/')
  MOVE
  FILE_NAME_CONVERT = ('/disk2/oracle/sales/', '/disk3/oracle/sales/')
  STORAGE (MAXSIZE 2G);
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__GUID-25116949-7B46-4A58-8926-7F394CE495B6">
                     <p class="titleinexample">Example 9-8 Plugging In an Unplugged PDB Using the SOURCE_FILE_DIRECTORY, MOVE, FILE_NAME_CONVERT, and STORAGE Clauses</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The new PDB is not based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The XML file does not accurately describe the current locations of the files. Therefore, the <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> clause or <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is required. In this example, the XML file indicates that the files are in /disk1/oracle/sales, but the files are in /disk2/oracle/sales, and the <code class="codeph">SOURCE_FILE_DIRECTORY</code> clause is used.
                           </p>
                        </li>
                        <li>
                           <p>The files are not in the correct final location for the PDB. Therefore, <code class="codeph">COPY</code> or <code class="codeph">MOVE</code> must be included. In this example, <code class="codeph">MOVE</code> is specified to move the files.
                           </p>
                           <p>The <code class="codeph">CREATE_FILE_DEST</code> clause is not used, Oracle Managed Files is not enabled, and the <code class="codeph">PDB_FILE_NAME_CONVERT</code> initialization parameter is not set. Therefore, the <code class="codeph">FILE_NAME_CONVERT</code> clause is required. In this example, the files are moved from /disk2/oracle/sales to /disk3/oracle/sales.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits must be enforced for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is required. Specifically, all tablespaces that belong to the PDB must not exceed 2 gigabytes.
                           </p>
                        </li>
                        <li>
                           <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB:</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE salespdb USING '/disk1/usr/salespdb.xml' 
  SOURCE_FILE_DIRECTORY = '/disk2/oracle/sales/'  
  MOVE
  FILE_NAME_CONVERT = ('/disk2/oracle/sales/', '/disk3/oracle/sales/')
  STORAGE (MAXSIZE 2G);
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-2DB6E163-48F0-4458-8DC3-A88F89EFEA81__GUID-B39279E7-7C71-443D-AA65-4DCC2EBAF770">
                     <p class="titleinexample">Example 9-9 Plugging In an Unplugged PDB Using an Archive File</p>
                     <p>This example assumes the following factors:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The unplugged PDB is in a .pdb archive file named <code class="codeph">sales.pdb</code>. The archive file includes the XML metadata file and the PDB’s files (such as the data files and wallet file) in compressed form, and these files are extracted to the current directory of the .pdb archive file when the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement is run.
                           </p>
                        </li>
                        <li>
                           <p>The new PDB is not based on the same unplugged PDB that was used to create an existing PDB in the CDB. Therefore, the <code class="codeph">AS</code> <code class="codeph">CLONE</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">PATH_PREFIX</code> clause is not required.
                           </p>
                        </li>
                        <li>
                           <p>Storage limits must be enforced for the PDB. Therefore, the <code class="codeph">STORAGE</code> clause is required. Specifically, all tablespaces that belong to the PDB must not exceed 2 gigabytes.
                           </p>
                        </li>
                        <li>
                           <p>There is no file with the same name as the new temp file that will be created in the target location. Therefore, the <code class="codeph">TEMPFILE REUSE</code> clause is not required.
                           </p>
                        </li>
                     </ul>
                     <p>Given the preceding factors, the following statement plugs in the PDB using an archive file:</p><pre class="pre codeblock"><code>i</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="plugging-in-a-pdb.html#GUID-3132C4E5-8734-458B-8B0C-EFC77A45FFA3" title="You can create a PDB by plugging an unplugged PDB into a CDB.">Plugging In an Unplugged PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
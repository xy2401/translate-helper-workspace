<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">
      <meta name="description" content="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">
      <title>Native Oracle XML&nbsp;DB Web Services</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="data-access-using-URIs.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-tools-that-support-XML-DB.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-access-using-URIs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-tools-that-support-XML-DB.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name"> Oracle XML&nbsp;DB Repository</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Native Oracle XML&nbsp;DB Web Services </li>
            </ol>
            <a id="GUID-108279B4-0315-4D8D-86A2-6487767ED280" name="GUID-108279B4-0315-4D8D-86A2-6487767ED280"></a><a id="ADXDB3900"></a>
            
            <h2 id="ADXDB-GUID-108279B4-0315-4D8D-86A2-6487767ED280" class="sect2"><span class="enumeration_chapter">33 </span>Native Oracle XML&nbsp;DB Web Services 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1">Overview of Native Oracle XML&nbsp;DB Web Services</a><br>Web services provide a standard way for applications to exchange information over the Internet and access services that implement business logic. Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services. 
                  </li>
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7">Configuring and Enabling Web Services for Oracle XML&nbsp;DB</a><br>To make Web services available, you must have the Oracle XML&nbsp;DB HTTP server up and running, and you must explicitly add Web service configuration. Then, to allow specific users to use Web services, you must grant them appropriate roles.
                  </li>
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6">Query Oracle XML&nbsp;DB Using a Web Service</a><br>The Oracle XML&nbsp;DB Web service for database queries is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span>, where <span class="italic"><code class="codeph">host</code></span> and <span class="italic"><code class="codeph">port</code></span> are the database host and HTTP(S) port. It has an associated WSDL that specifies the formats of the incoming and outgoing documents using XML Schema. This WSDL is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv?wsdl</code></span>. 
                  </li>
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686">Access to PL/SQL Stored Procedures Using a Web Service</a><br>The Oracle XML&nbsp;DB Web service for accessing PL/SQL stored functions and procedures is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">package</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">fn_or_proc</code></span> or, for a function or procedure that is standalone (not in a package ), <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">fn_or_proc</code></span>.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML&nbsp;DB Repository lets you version your data, implement and manage security, and use APIs to access and manipulate repository resources.">Oracle XML&nbsp;DB Repository</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5676"></a><div class="props_rev_3"><a id="GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1" name="GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1"></a><h3 id="ADXDB-GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1" class="sect3"><span class="enumeration_section">33.1 </span>Overview of Native Oracle XML&nbsp;DB Web Services
               </h3>
               <div>
                  <p>Web services provide a standard way for applications to exchange information over the Internet and access services that implement business logic. Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services. </p>
                  <p>One available service lets you issue SQL and XQuery queries and receive results as XML data. Another service provides access to all PL/SQL stored functions and procedures. </p>
                  <p>You can customize the input and output document formats when you use the latter service. If you do that then the WSDL is automatically generated by the native database Web services engine.</p>
                  <p>SOAP 1.1 is the version supported by Oracle XML&nbsp;DB. Applications use HTTP method <code class="codeph">POST</code> to submit SOAP requests to native Oracle XML&nbsp;DB Web services. You can configure the locations of all native Oracle XML&nbsp;DB Web services and WSDL documents using the Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>. You can also configure security settings for the Web services using the same configuration file.
                  </p>
                  <p>You can use the <code class="codeph">Accept-Charsets</code> field of the input HTTP header to specify the character set of Web-service responses. If this header field is omitted, then responses are in the database character set. The language of the input document and any error responses is the locale language of the database.
                  </p>
                  <p>Error handling for native Oracle XML&nbsp;DB Web services uses the SOAP framework for faults.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML&nbsp;DB is managed internally through a configuration file, xdbconfig.xml, which is stored as a resource in Oracle XML&nbsp;DB Repository. As an alternative to using Oracle Enterprise Manager to configure Oracle XML&nbsp;DB, you can configure it directly using the Oracle XML&nbsp;DB configuration file.">Configuration of Oracle XML&nbsp;DB Using xdbconfig.xml</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1__GUID-A89F646A-BBBD-4656-97B2-0F7F487FAC9A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_2002_web_services" target="_blank">Web Services Activity</a> for more information about Web services
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_note_soap" target="_blank">Simple Object Access Protocol (SOAP) 1.1</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_wsdl" target="_blank">Web Services Description Language (WSDL) 1.1</a> for information about the Web Services Description Language (WSDL)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_soap-fault" target="_blank">Fault Scenarios</a> for information about SOAP fault handling
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">Native Oracle XML&nbsp;DB Web Services</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5677"></a><div class="props_rev_3"><a id="GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" name="GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7"></a><h3 id="ADXDB-GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" class="sect3"><span class="enumeration_section">33.2 </span>Configuring and Enabling Web Services for Oracle XML&nbsp;DB
               </h3>
               <div>
                  <p>To make Web services available, you must have the Oracle XML&nbsp;DB HTTP server up and running, and you must explicitly add Web service configuration. Then, to allow specific users to use Web services, you must grant them appropriate roles.</p>
                  <div class="section">
                     <ol>
                        <li>
                           <p>Configure Web services &#x2013; see <span class="q">"<a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03" title="To make Web services available for Oracle XML&nbsp;DB, configure the servlet by logging on as user SYS and adding the servlet configuration to your Oracle XML&nbsp;DB configuration file, xdbconfig.xml. Then use procedures in PL/SQL package DBMS_XDB_CONFIG to add the servlet that is named by the servlet configuration.">Configuring Web Services for Oracle XML&nbsp;DB</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Enable Web services for specific users, by granting them appropriate roles &#x2013; <a href="native-XML-DB-web-services.html#GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0" title="To enable Web services for a specific user, log on as user SYS and grant role XDB_WEBSERVICES to the user. This role enables Web services over HTTPS. This role is required to be able to use Web services.">Enabling Web Services for a Specific User</a>.
                           </p>
                        </li>
                     </ol>
                     <p>For security reasons, Oracle XML&nbsp;DB is not preconfigured with native Web services enabled. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03">Configuring Web Services for Oracle XML&nbsp;DB</a><br>To make Web services available for Oracle XML&nbsp;DB, configure the servlet by logging on as user <code class="codeph">SYS</code> and adding the servlet configuration to your Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>. Then use procedures in PL/SQL package <code class="codeph">DBMS_XDB_CONFIG</code> to add the servlet that is named by the servlet configuration. 
                     </li>
                     <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0">Enabling Web Services for a Specific User</a><br>To enable Web services for a specific user, log on as user <code class="codeph">SYS</code> and grant role <code class="codeph">XDB_WEBSERVICES</code> to the user. This role enables Web services over HTTPS. This role is <span class="italic">required</span> to be able to use Web services.
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="repository-access-using-protocols.html#GUID-30DE120A-8FF3-44BB-8C21-CFF25F781C45" title="Oracle XML&nbsp;DB implements HyperText Transfer Protocol (HTTP), HTTP 1.1 as defined in the RFC2616 specification.">HTTP(S) and Oracle XML&nbsp;DB Protocol Server</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">Native Oracle XML&nbsp;DB Web Services</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5679"></a><a id="ADXDB5680"></a><a id="ADXDB5678"></a><div class="props_rev_3"><a id="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03" name="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03"></a><h4 id="ADXDB-GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03" class="sect4"><span class="enumeration_section">33.2.1 </span>Configuring Web Services for Oracle XML&nbsp;DB
                  </h4>
                  <div>
                     <p>To make Web services available for Oracle XML&nbsp;DB, configure the servlet by logging on as user <code class="codeph">SYS</code> and adding the servlet configuration to your Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>. Then use procedures in PL/SQL package <code class="codeph">DBMS_XDB_CONFIG</code> to add the servlet that is named by the servlet configuration. 
                     </p>
                     <div class="section">
                        <p>The servlet configuration to add is shown as the query output of <a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDGGFCI">Example 33-2</a>. 
                        </p>
                        <p><a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDIICEJ">Example 33-1</a> shows how to use procedures in PL/SQL package <code class="codeph">DBMS_XDB_CONFIG</code> to add the servlet. <a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDGGFCI">Example 33-2</a> shows how to verify that the servlet was added correctly.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDIICEJ">
                        <p class="titleinexample">Example 33-1 Adding a Web Services Configuration Servlet</p><pre class="oac_no_warn" dir="ltr">DECLARE
  SERVLET_NAME VARCHAR2(32) := 'orawsv';
BEGIN
  DBMS_XDB_CONFIG.deleteServletMapping(SERVLET_NAME);
  DBMS_XDB_CONFIG.deleteServlet(SERVLET_NAME);
  DBMS_XDB_CONFIG.addServlet(
    NAME     =&gt; SERVLET_NAME,
    LANGUAGE =&gt; 'C',
    DISPNAME =&gt; 'Oracle Query Web Service',
    DESCRIPT =&gt; 'Servlet for issuing queries as a Web Service',
    SCHEMA   =&gt; 'XDB');
  DBMS_XDB_CONFIG.addServletSecRole(SERVNAME =&gt; SERVLET_NAME,
                                    ROLENAME =&gt; 'XDB_WEBSERVICES',
                                    ROLELINK =&gt; 'XDB_WEBSERVICES');
  DBMS_XDB_CONFIG.addServletMapping(PATTERN =&gt; '/orawsv/*',
                                    NAME    =&gt; SERVLET_NAME);
END;
/</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDGGFCI">
                        <p class="titleinexample">Example 33-2 Verifying Addition of Web Services Configuration Servlet</p><pre class="oac_no_warn" dir="ltr">XQUERY declare default element namespace "http://xmlns.oracle.com/xdb/xdbconfig.xsd"; (: :)
       (: This path is split over two lines for documentation purposes only.
          The path should actually be a single long line. :)
       for $doc in fn:doc("/xdbconfig.xml")/xdbconfig/sysconfig/protocolconfig/httpconfig/
        webappconfig/servletconfig/servlet-list/servlet[servlet-name='orawsv']
       return $doc
/
 
Result Sequence
-------------------------------------------------------------------------
&lt;servlet xmlns="http://xmlns.oracle.com/xdb/xdbconfig.xsd"&gt;
  &lt;servlet-name&gt;orawsv&lt;/servlet-name&gt;
  &lt;servlet-language&gt;C&lt;/servlet-language&gt;
  &lt;display-name&gt;Oracle Query Web Service&lt;/display-name&gt;
  &lt;description&gt;Servlet for issuing queries as a Web Service&lt;/description&gt;
  &lt;servlet-schema&gt;XDB&lt;/servlet-schema&gt;
  &lt;security-role-ref&gt;
    &lt;description/&gt;
    &lt;role-name&gt;XDB_WEBSERVICES&lt;/role-name&gt;
    &lt;role-link&gt;XDB_WEBSERVICES&lt;/role-link&gt;
  &lt;/security-role-ref&gt;
&lt;/servlet&gt;
 
1 item(s) selected.</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML&nbsp;DB is managed internally through a configuration file, xdbconfig.xml, which is stored as a resource in Oracle XML&nbsp;DB Repository. As an alternative to using Oracle Enterprise Manager to configure Oracle XML&nbsp;DB, you can configure it directly using the Oracle XML&nbsp;DB configuration file.">Configuration of Oracle XML&nbsp;DB Using xdbconfig.xml</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" title="To make Web services available, you must have the Oracle XML&nbsp;DB HTTP server up and running, and you must explicitly add Web service configuration. Then, to allow specific users to use Web services, you must grant them appropriate roles.">Configuring and Enabling Web Services for Oracle XML&nbsp;DB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5681"></a><div class="props_rev_3"><a id="GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0" name="GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0"></a><h4 id="ADXDB-GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0" class="sect4"><span class="enumeration_section">33.2.2 </span>Enabling Web Services for a Specific User
                  </h4>
                  <div>
                     <p>To enable Web services for a specific user, log on as user <code class="codeph">SYS</code> and grant role <code class="codeph">XDB_WEBSERVICES</code> to the user. This role enables Web services over HTTPS. This role is <span class="italic">required</span> to be able to use Web services.
                     </p>
                     <div class="section">
                        <p>User <code class="codeph">SYS</code> can, in <span class="italic">addition</span>, grant one or both of the following roles to the user:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">XDB_WEBSERVICES_OVER_HTTP</code> &#x2013; Enable use of Web services over HTTP (not just HTTPS).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">XDB_WEBSERVICES_WITH_PUBLIC</code> &#x2013; Enable access, using Web services, to database objects that are accessible to <code class="codeph">PUBLIC</code>.
                              </p>
                           </li>
                        </ul>
                        <p>If a user is not granted <code class="codeph">XDB_WEBSERVICES_WITH_PUBLIC</code>, then the user has access, using Web services, to all database objects (regardless of owner) that would normally be available to the user, <span class="italic">except</span> for <code class="codeph">PUBLIC</code> objects. To make <code class="codeph">PUBLIC</code> objects accessible to a user through Web services, <code class="codeph">SYS</code> must grant role <code class="codeph">XDB_WEBSERVICES_WITH_PUBLIC</code> to the user. With this role, a user can access any <code class="codeph">PUBLIC</code> objects that would normally be available to the user if logged on to the database.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" title="To make Web services available, you must have the Oracle XML&nbsp;DB HTTP server up and running, and you must explicitly add Web service configuration. Then, to allow specific users to use Web services, you must grant them appropriate roles.">Configuring and Enabling Web Services for Oracle XML&nbsp;DB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5683"></a><a id="ADXDB5684"></a><a id="ADXDB5685"></a><a id="ADXDB5682"></a><div class="props_rev_3"><a id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6" name="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6"></a><h3 id="ADXDB-GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6" class="sect3"><span class="enumeration_section">33.3 </span>Query Oracle XML&nbsp;DB Using a Web Service
               </h3>
               <div>
                  <p>The Oracle XML&nbsp;DB Web service for database queries is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span>, where <span class="italic"><code class="codeph">host</code></span> and <span class="italic"><code class="codeph">port</code></span> are the database host and HTTP(S) port. It has an associated WSDL that specifies the formats of the incoming and outgoing documents using XML Schema. This WSDL is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv?wsdl</code></span>. 
                  </p>
                  <p>Your application sends database queries to the Web service as XML documents that conform to the XML schema listed in <a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDEGIEE">Example 33-3</a>.
                  </p>
                  <p>This XML schema is contained in the WSDL document. The important parts of incoming query documents are as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">query_text</code> &#x2013; The text of your query. Attribute <code class="codeph">type</code> specifies the type of your query: either <code class="codeph">SQL</code> or <code class="codeph">XQUERY</code>.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">bind</code> &#x2013; A scalar bind-variable value. Attribute <code class="codeph">name</code> names the variable.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">bindXML</code> &#x2013; An <code class="codeph">XMLType</code> bind-variable value.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">null_handling</code> &#x2013; How <code class="codeph">NULL</code> values returned by the query are to be treated:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">DROP_NULLS</code> &#x2013; Put nothing in the output (no element). This is the default behavior.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NULL_ATTR</code> &#x2013; Use an empty element for <code class="codeph">NULL</code>-value output. Use attribute <code class="codeph">xsi:nil = "true"</code> in the element.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EMPTY_TAG</code> &#x2013; Use an empty element for <code class="codeph">NULL</code>-value output, without a <code class="codeph">nil</code> attribute.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">max_rows</code> &#x2013; The maximum number of rows to output for the query. By default, all rows are returned.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">skip_rows</code> &#x2013; The number of query output rows to skip, before including rows in the data returned in the SOAP message. You can use this in connection with <code class="codeph">max_rows</code> to provide paginated output. The default value is zero (<code class="codeph">0</code>).
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">pretty_print</code> &#x2013; Whether the output document should be formatted for pretty-printing. The default value is <code class="codeph">true</code>, meaning that the document is pretty-printed. When the value is <code class="codeph">false</code>, no pretty-printing is done, and output rows are not broken with newline characters.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">indentation_width</code> &#x2013; The number of characters to indent nested elements that start a new line. The default value is one (<code class="codeph">1</code>).
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">rowset_tag</code> &#x2013; Name of the root element of the output document.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">row_tag</code> &#x2013; Name of the element whose value is a single row of query output.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">item_tags_for_coll</code> &#x2013; Whether to generate collection elements with name <span class="italic"><code class="codeph">collection_name</code></span><code class="codeph">_item</code>, where <span class="italic"><code class="codeph">collection_name</code></span> is the name of the collection.
                        </p>
                     </li>
                  </ul>
                  <p>These elements have the same meanings as corresponding parameters of procedures in PL/SQL package <code class="codeph">DBMS_XMLGEN</code>.
                  </p>
                  <p><a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDCCADC">Example 33-4</a> and <a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDFJJEE">Example 33-5</a> show the input and output of a simple SQL query.
                  </p>
                  <p>In <a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDCCADC">Example 33-4</a>, the query text is enclosed in <code class="codeph">&lt;![CDATA[</code>...<code class="codeph">]]&gt;</code>. Although not strictly necessary in this example, it is appropriate to do this generally, because queries often contain characters such as <code class="codeph">&lt;</code> and <code class="codeph">&gt;</code>. Element <code class="codeph">bind</code> is used to bind a value (<code class="codeph">8300</code>) to the bind variable named <code class="codeph">e</code>. Element <code class="codeph">pretty_print</code> turns off pretty-printing of the output.
                  </p>
                  <div class="example" id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDEGIEE">
                     <p class="titleinexample">Example 33-3 XML Schema for Database Queries To Be Processed by Web Service</p><pre class="pre codeblock"><code>&lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:xdb="http://xmlns.oracle.com/xdb"
        targetNamespace="http://xmlns.oracle.com/orawsv"&gt;
  &lt;element name="query"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="<span class="bold">query_text</span>"&gt;
          &lt;complexType&gt;
            &lt;simpleContent&gt;
              &lt;extension base="string"&gt;
                &lt;attribute name="<span class="bold">type</span>"&gt;
                  &lt;simpleType&gt;
                    &lt;restriction base="NMTOKEN"&gt;
                      &lt;enumeration value="SQL"/&gt;
                      &lt;enumeration value="XQUERY"/&gt;
                    &lt;/restriction&gt;
                  &lt;/simpleType&gt;
                &lt;/attribute&gt;
              &lt;/extension&gt;
            &lt;/simpleContent&gt;
          &lt;/complexType&gt;
        &lt;/element&gt;
        &lt;choice maxOccurs="unbounded"&gt;
          &lt;element name="<span class="bold">bind</span>"&gt;
            &lt;complexType&gt;
              &lt;simpleContent&gt;
                &lt;extension base="string"&gt;
                  &lt;attribute name="<span class="bold">name</span>" type="string"/&gt;
                &lt;/extension&gt;
              &lt;/simpleContent&gt;
            &lt;/complexType&gt;
          &lt;/element&gt;
          &lt;element name="<span class="bold">bindXML</span>" type="any"/&gt;
        &lt;/choice&gt;
        &lt;element name="<span class="bold">null_handling</span>" minOccurs="0"&gt;
          &lt;simpleType&gt;
            &lt;restriction base="NMTOKEN"&gt;
              &lt;enumeration value="DROP_NULLS"/&gt;
              &lt;enumeration value="NULL_ATTR"/&gt;
              &lt;enumeration value="EMPTY_TAG"/&gt;
            &lt;/restriction&gt;
          &lt;/simpleType&gt;
        &lt;/element&gt;
        &lt;element name="<span class="bold">max_rows</span>" type="positiveInteger" minOccurs="0"/&gt;
        &lt;element name="<span class="bold">skip_rows</span>" type="positiveInteger" minOccurs="0"/&gt;
        &lt;element name="<span class="bold">pretty_print</span>" type="boolean" minOccurs="0"/&gt;
        &lt;element name="<span class="bold">indentation_width</span>" type="positiveInteger" minOccurs="0"/&gt;
        &lt;element name="<span class="bold">rowset_tag</span>" type="string" minOccurs="0"/&gt;
        &lt;element name="<span class="bold">row_tag</span>" type="string" minOccurs="0"/&gt;
        &lt;element name="<span class="bold">item_tags_for_coll</span>" type="boolean" minOccurs="0"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
&lt;/schema&gt;
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDCCADC">
                     <p class="titleinexample">Example 33-4 Input XML Document for SQL Query Using Query Web Service</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" ?&gt;
&lt;env:Envelope xmlns:env="http://www.w3.org/2002/06/soap-envelope "&gt;
  &lt;env:Body&gt;
    &lt;<span class="bold">query</span> xmlns="http://xmlns.oracle.com/orawsv"&gt;
      &lt;<span class="bold">query_text</span> type="SQL"&gt;
        &lt;![CDATA[SELECT * FROM employees WHERE salary = <span class="bold">:e</span>]]&gt;
      &lt;/query_text&gt;
      &lt;<span class="bold">bind</span> name="<span class="bold">e</span>"&gt;8300&lt;/bind&gt;
      &lt;<span class="bold">pretty_print</span>&gt;false&lt;/pretty_print&gt;
    &lt;/query&gt;
  &lt;/env:Body&gt;
&lt;/env:Envelope&gt;
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDFJJEE">
                     <p class="titleinexample">Example 33-5 Output XML Document for SQL Query Using Query Web Service</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;soap:Envelope xmlns:soap="http://www.w3.org/2002/06/soap-envelope"&gt;
&lt;soap:Body&gt;
&lt;ROWSET&gt;&lt;ROW&gt;&lt;EMPLOYEE_ID&gt;206&lt;/EMPLOYEE_ID&gt;&lt;FIRST_NAME&gt;William&lt;/FIRST_NAME&gt;&lt;LAST_NAME&gt;G
ietz&lt;/LAST_NAME&gt;&lt;EMAIL&gt;WGIETZ&lt;/EMAIL&gt;&lt;PHONE_NUMBER&gt;515.123.8181&lt;/PHONE_NUMBER&gt;&lt;HIRE_DATE&gt;07-JUN-
94&lt;/HIRE_DATE&gt;&lt;JOB_ID&gt;AC_ACCOUNT&lt;/JOB_ID&gt;&lt;SALARY&gt;8300&lt;/SALARY&gt;&lt;MANAGER_ID&gt;205&lt;/MANAGER_ID
&gt;&lt;DEPARTMENT_ID&gt;110&lt;/DEPARTMENT_ID&gt;&lt;/ROW&gt;&lt;/ROWSET&gt;
&lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">Native Oracle XML&nbsp;DB Web Services</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5687"></a><a id="ADXDB5686"></a><div class="props_rev_3"><a id="GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686" name="GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686"></a><h3 id="ADXDB-GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686" class="sect3"><span class="enumeration_section">33.4 </span>Access to PL/SQL Stored Procedures Using a Web Service
               </h3>
               <div>
                  <p>The Oracle XML&nbsp;DB Web service for accessing PL/SQL stored functions and procedures is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">package</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">fn_or_proc</code></span> or, for a function or procedure that is standalone (not in a package ), <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">fn_or_proc</code></span>.
                  </p>
                  <p>Here, <span class="italic"><code class="codeph">host</code></span> and <span class="italic"><code class="codeph">port</code></span> are the database host and HTTP(S) port, <span class="italic"><code class="codeph">fn_or_proc</code></span> is the stored function or procedure name, <span class="italic"><code class="codeph">package</code></span> is its package, and <span class="italic"><code class="codeph">dbschema</code></span> is the database schema owning that package.
                  </p>
                  <p>The input XML document must contain the inputs needed by the function or procedure. The output XML document contains the return value and the values of all <code class="codeph">OUT</code> variables. 
                  </p>
                  <p>The names of the XML elements in the input and output documents correspond to the variable names of the function or procedure. The generated WSDL document shows you the exact XML element names. This is the naming convention used:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The XML element introducing the input to a PL/SQL function is named <span class="italic"><code class="codeph">function-name</code></span><span class="bold"><code class="codeph">Input</code></span>, where <span class="italic"><code class="codeph">function-name </code></span>is the name of the function (uppercase).
                        </p>
                     </li>
                     <li>
                        <p>The XML elements introducing input parameters for the function are named <span class="italic"><code class="codeph">param-name</code></span><span class="bold"><code class="codeph">-</code></span><span class="italic"><code class="codeph">param-type</code></span><span class="bold"><code class="codeph">-</code></span><span class="italic"><code class="codeph">io-mode</code></span>, where <span class="italic"><code class="codeph">param-name</code></span> is the name of the parameter (uppercase), <span class="italic"><code class="codeph">param-type</code></span> is its SQL data type, and <span class="italic"><code class="codeph">io-mode</code></span> is its input-output mode, as follows:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold"><code class="codeph">IN</code></span> &#x2013; <code class="codeph">IN</code> mode
                              </p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">OUT</code></span> &#x2013; <code class="codeph">OUT</code> mode
                              </p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">INOUT</code></span> &#x2013; <code class="codeph">IN OUT</code> mode
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>The XML element introducing the output from a PL/SQL function is named <span class="bold"><code class="codeph">S</code></span><span class="italic"><code class="codeph">return-type</code></span><span class="bold"><code class="codeph">-</code></span><span class="italic"><code class="codeph">function-name</code></span><span class="bold"><code class="codeph">Output</code></span>, where <span class="italic"><code class="codeph">return-type </code></span>is the SQL data type of the return value (uppercase), and <span class="italic"><code class="codeph">function-name </code></span>is the name of the function (uppercase).
                        </p>
                     </li>
                     <li>
                        <p>The XML elements introducing output parameters for the function are named the same as the output parameters themselves (uppercase). The element introducing the return value is named <code class="codeph">RETURN</code>.
                        </p>
                     </li>
                  </ul>
                  <p>The return value of a function is in the <code class="codeph">RETURN</code> element of the output document, which is always the first element in the document. This return-value position disambiguates it from any <code class="codeph">OUT</code> parameter that might be named "<code class="codeph">RETURN</code>".
                  </p>
                  <p>Each stored function or procedure is associated with a separate, dynamic Web service that has its own, generated WSDL document. This WSDL document is located at URL <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">package</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">fn_or_proc</code></span><span class="bold"><code class="codeph">?wsdl</code></span> or <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">fn_or_proc</code></span><span class="bold"><code class="codeph">?wsdl</code></span>. In addition, you can optionally generate a single WSDL document to be used for all stored functions and procedures in a given package. The URL for that WSDL document is <code class="codeph">http://</code><span class="italic"><code class="codeph">host</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">port</code></span><code class="codeph">/</code><span class="bold"><code class="codeph">orawsv</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">dbschema</code></span><code class="codeph">/</code><span class="italic"><code class="codeph">package</code></span><span class="bold"><code class="codeph">?wsdl</code></span>.
                  </p>
                  <p>Data types in the incoming and outgoing XML documents are mapped to SQL data types for use by the stored function or procedure, according to <a href="native-XML-DB-web-services.html#GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686__CHDGBFID" title="Web Service Mapping Between XML and SQL Data Types">Table 33-1</a>. These are the only data types that are supported.
                  </p>
                  <div class="tblformal" id="GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686__CHDGBFID">
                     <p class="titleintable">Table 33-1 Web Service Mapping Between XML and Oracle Database Data Types</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Web Service Mapping Between XML and Oracle Database Data Types" summary="Web Service Mapping Between XML and SQL Data Types" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="81%" id="d164247e1240">Oracle Database Data Type</th>
                              <th align="left" valign="bottom" width="19%" id="d164247e1243">XML Schema Data Type</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1248" headers="d164247e1240 ">
                                 <p><code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">VARCHAR</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1248 d164247e1243 ">
                                 <p><code class="codeph">xsd:string</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1263" headers="d164247e1240 ">
                                 <p><code class="codeph">DATE</code> &#x2013; Dates must be in the database format.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1263 d164247e1243 ">
                                 <p><code class="codeph">xsd:date</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1273" headers="d164247e1240 ">
                                 <p><code class="codeph">TIMESTAMP</code>, <code class="codeph">TIMESTAMP WITH TIMEZONE</code>, <code class="codeph">TIMESTAMP WITH LOCAL TIMEZONE</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1273 d164247e1243 ">
                                 <p><code class="codeph">xsd:dateTime</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1288" headers="d164247e1240 ">
                                 <p><code class="codeph">INTERVAL YEAR TO MONTH</code>, <code class="codeph">INTERVAL DAY TO SECOND</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1288 d164247e1243 ">
                                 <p><code class="codeph">xsd:duration</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1300" headers="d164247e1240 ">
                                 <p><code class="codeph">NUMBER</code>, <code class="codeph">BINARY_DOUBLE</code>, <code class="codeph">BINARY_FLOAT</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1300 d164247e1243 ">
                                 <p><code class="codeph">xsd:double</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1315" headers="d164247e1240 ">
                                 <p><code class="codeph">INT</code>, <code class="codeph">INTEGER</code>, <code class="codeph">SMALLINT</code>, <code class="codeph">PLS_INTEGER</code>, <code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1315 d164247e1243 ">
                                 <p><code class="codeph">xsd:integer</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1336" headers="d164247e1240 ">
                                 <p><code class="codeph">RAW</code>, <code class="codeph">BLOB</code>, <code class="codeph">REF</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1336 d164247e1243 ">
                                 <p><code class="codeph">xsd:hexBinary</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1351" headers="d164247e1240 ">
                                 <p>PL/SQL <code class="codeph">BOOLEAN</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1351 d164247e1243 ">
                                 <p><code class="codeph">xsd:boolean</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1361" headers="d164247e1240 ">
                                 <p>Object types</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1361 d164247e1243 ">
                                 <p><code class="codeph">complexType</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1369" headers="d164247e1240 ">
                                 <p><code class="codeph">XMLType</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1369 d164247e1243 ">
                                 <p>empty <code class="codeph">complexType</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>An object type is represented in XML as a complex-type element named the same as the object type. The object attributes are represented as children of this element.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F">Using a PL/SQL Function with a Web Service: Example</a><br>Examples present a PL/SQL function and its access using a Web service. The function takes as input a department ID and name. It returns the salary total for the department. It also returns, as in-out and output parameters, respectively, the department name and the number of employees in the department. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="Your applications can access Oracle Database using native Oracle XML&nbsp;DB Web services.">Native Oracle XML&nbsp;DB Web Services</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5689"></a><a id="ADXDB5690"></a><a id="ADXDB5691"></a><a id="ADXDB5692"></a><a id="ADXDB5688"></a><div class="props_rev_3"><a id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F" name="GUID-6376B342-3B65-441D-82D5-8F0607C4256F"></a><h4 id="ADXDB-GUID-6376B342-3B65-441D-82D5-8F0607C4256F" class="sect4"><span class="enumeration_section">33.4.1 </span>Using a PL/SQL Function with a Web Service: Example
                  </h4>
                  <div>
                     <p>Examples present a PL/SQL function and its access using a Web service. The function takes as input a department ID and name. It returns the salary total for the department. It also returns, as in-out and output parameters, respectively, the department name and the number of employees in the department. </p>
                     <div class="section">
                        <p>The default value of the department ID is <code class="codeph">20</code>. In this simple example, the input value of the in-out parameter <code class="codeph">dept_name</code> is not actually used. It is ignored, and the correct name is returned.
                        </p>
                        <p><a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIHFIH">Example 33-6</a> shows the function definition. <a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDGGCFJ">Example 33-7</a> shows the WSDL document that is created automatically from this function definition. <a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDEFFFB">Example 33-8</a> shows an input document that invokes the stored function. <a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIBFIH">Example 33-9</a> shows the resulting output document.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIHFIH">
                        <p class="titleinexample">Example 33-6 Definition of PL/SQL Function Used for Web-Service Access</p><pre class="pre codeblock"><code>CREATE OR REPLACE PACKAGE salary_calculator AUTHID CURRENT_USER AS
  FUNCTION TotalDepartmentSalary (dept_id    IN     NUMBER DEFAULT 20,
                                  dept_name  IN OUT VARCHAR2,
                                  nummembers OUT    NUMBER)
    RETURN NUMBER;
END salary_calculator;
/
CREATE OR REPLACE PACKAGE BODY salary_calculator AS
  FUNCTION TotalDepartmentSalary (dept_id    IN     NUMBER DEFAULT 20,
                                  dept_name  IN OUT VARCHAR2,
                                  nummembers OUT    NUMBER)
    RETURN NUMBER IS
      sum_sal NUMBER;
      BEGIN
        SELECT SUM(salary) INTO sum_sal FROM employees
          WHERE department_id = dept_id;
        SELECT department_name INTO dept_name FROM departments
          WHERE department_name = dept_name;
        SELECT count(*) INTO nummembers FROM employees
          WHERE department_id = dept_id;
    RETURN sum_sal;
  END;
END;         
/</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDGGCFJ">
                        <p class="titleinexample">Example 33-7 WSDL Document Corresponding to a Stored PL/SQL Function</p><pre class="pre codeblock"><code>&lt;definitions name="SALARY_CALCULATOR"
             targetNamespace="http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR"
             xmlns="http://schemas.xmlsoap.org/wsdl/"
             xmlns:tns="http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"&gt;
  &lt;types&gt;
    &lt;xsd:schema targetNamespace="http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR"
                elementFormDefault="qualified"&gt;
      &lt;xsd:element name="<span class="bold">SNUMBER-TOTALDEPARTMENTSALARYInput</span>"&gt;
        &lt;xsd:complexType&gt;
          &lt;xsd:sequence&gt;
            &lt;xsd:element name="<span class="bold">NUMMEMBERS-NUMBER-OUT</span>"&gt;
              &lt;xsd:complexType/&gt;
            &lt;/xsd:element&gt;
            &lt;xsd:element name="<span class="bold">DEPT_NAME-VARCHAR2-INOUT</span>" type="xsd:string"/&gt;
            &lt;xsd:element name="<span class="bold">DEPT_ID-NUMBER-IN</span>" type="xsd:double"/&gt;
          &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
      &lt;/xsd:element&gt;
      &lt;xsd:element name="<span class="bold">TOTALDEPARTMENTSALARYOutput</span>"&gt;
        &lt;xsd:complexType&gt;
          &lt;xsd:sequence&gt;
            &lt;xsd:element name="<span class="bold">RETURN</span>" type="xsd:double"/&gt;
            &lt;xsd:element name="<span class="bold">NUMMEMBERS</span>" type="xsd:double"/&gt;
            &lt;xsd:element name="<span class="bold">DEPT_NAME</span>" type="xsd:string"/&gt;
          &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
      &lt;/xsd:element&gt;
    &lt;/xsd:schema&gt;
  &lt;/types&gt;
  &lt;message name="TOTALDEPARTMENTSALARYInputMessage"&gt;
    &lt;part name="parameters" element="tns:SNUMBER-TOTALDEPARTMENTSALARYInput"/&gt;
  &lt;/message&gt;
  &lt;message name="TOTALDEPARTMENTSALARYOutputMessage"&gt;
    &lt;part name="parameters" element="tns:TOTALDEPARTMENTSALARYOutput"/&gt;
  &lt;/message&gt;
  &lt;portType name="SALARY_CALCULATORPortType"&gt;
    &lt;operation name="TOTALDEPARTMENTSALARY"&gt;
      &lt;input message="tns:TOTALDEPARTMENTSALARYInputMessage"/&gt;
      &lt;output message="tns:TOTALDEPARTMENTSALARYOutputMessage"/&gt;
    &lt;/operation&gt;
  &lt;/portType&gt;
 &lt;binding name="SALARY_CALCULATORBinding" type="tns:SALARY_CALCULATORPortType"&gt;
    &lt;soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/&gt;
    &lt;operation name="TOTALDEPARTMENTSALARY"&gt;
      &lt;soap:operation soapAction="TOTALDEPARTMENTSALARY"/&gt;
      &lt;input&gt;
        &lt;soap:body parts="parameters" use="literal"/&gt;
      &lt;/input&gt;
      &lt;output&gt;
        &lt;soap:body parts="parameters" use="literal"/&gt;
      &lt;/output&gt;
    &lt;/operation&gt;
  &lt;/binding&gt;
  &lt;service name="SALARY_CALCULATORService"&gt;
    &lt;documentation&gt;Oracle Web Service&lt;/documentation&gt;
    &lt;port name="SALARY_CALCULATORPort" binding="tns:SALARY_CALCULATORBinding"&gt;
      &lt;soap:address location="https://example:8088/orawsv/HR/SALARY_CALCULATOR"/&gt;
     &lt;/port&gt;
  &lt;/service&gt;
&lt;/definitions&gt;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDEFFFB">
                        <p class="titleinexample">Example 33-8 Input XML Document for PL/SQL Query Using Web Service</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" ?&gt;&lt;soap:Envelope 
xmlns:soap="http://www.w3.org/2002/06/soap-envelope"&gt;&lt;soap:Body&gt;&lt;SNUMBER-
TOTALDEPARTMENTSALARYinput 
xmlns="http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR/TOTALDEPARTMENTSALARY"&gt;
&lt;DEPT_ID-NUMBER-IN&gt;30&lt;/DEPT_ID-NUMBER-IN&gt;&lt;DEPT_NAME-VARCHAR2-INOUT&gt;Purchasing
&lt;/DEPT_NAME-VARCHAR2-INOUT&gt;&lt;NUMMEMBERS-NUMBER-OUT/&gt;&lt;/SNUMBER-
TOTALDEPARTMENTSALARYinput&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIBFIH">
                        <p class="titleinexample">Example 33-9 Output XML Document for PL/SQL Query Using Web Service</p><pre class="pre codeblock"><code>&lt;?xml version="1.0" ?&gt;
&lt;soap:Envelope xmlns:soap="http://www.w3.org/2002/06/soap-envelope"&gt;
  &lt;soap:Body&gt;
    &lt;TOTALDEPARTMENTSALARYOutput 
       xmlns="http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR/TOTALDEPARTMENTSALARY"&gt;
      &lt;RETURN&gt;24900&lt;/RETURN&gt;
      &lt;NUMMEMBERS&gt;6&lt;/NUMMEMBERS&gt;
      &lt;DEPT_NAME&gt;Purchasing&lt;/DEPT_NAME&gt;
    &lt;/TOTALDEPARTMENTSALARYOutput&gt;
  &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="native-XML-DB-web-services.html#GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686" title="The Oracle XML&nbsp;DB Web service for accessing PL/SQL stored functions and procedures is located at URL http://host:port/orawsv/dbschema/package/fn_or_proc or, for a function or procedure that is standalone (not in a package ), http://host:port/orawsv/dbschema/fn_or_proc.">Access to PL/SQL Stored Procedures Using a Web Service</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
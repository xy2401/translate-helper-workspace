<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Troubleshooting</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="JDBC-error-messages.html" title="Previous" type="text/html">
      <link rel="next" href="book-index.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JDBC-error-messages.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="book-index.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="appendixes.html" property="item" typeof="WebPage"><span property="name"> Appendixes</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Troubleshooting </li>
            </ol>
            <a id="GUID-F8CC9C5E-B043-4D84-A86E-ACED8F40E2E9" name="GUID-F8CC9C5E-B043-4D84-A86E-ACED8F40E2E9"></a><a id="JJDBC28976"></a>
            
            <h2 id="JJDBC-GUID-F8CC9C5E-B043-4D84-A86E-ACED8F40E2E9" class="sect2"><span class="enumeration_chapter">E </span> Troubleshooting 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>This appendix describes how to troubleshoot a Java Database Connectivity (JDBC) application in the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="JDBC-troubleshooting.html#GUID-E0615FF5-D311-4F35-9337-08F46CAB6857">Common Problems</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-troubleshooting.html#GUID-BEF28F31-0A7F-47F7-9CB4-A9635768B983">Basic Debugging Procedures</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDBC28977"></a><div class="props_rev_3"><a id="GUID-E0615FF5-D311-4F35-9337-08F46CAB6857" name="GUID-E0615FF5-D311-4F35-9337-08F46CAB6857"></a><h3 id="JJDBC-GUID-E0615FF5-D311-4F35-9337-08F46CAB6857" class="sect3"><span class="enumeration_section">E.1 </span>Common Problems
               </h3>
               <div>
                  <div class="section">
                     <p>This section describes some common problems that you might encounter while using Oracle <a id="d116827e59" class="indexterm-anchor"></a>JDBC drivers. These problems include:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-88104995-B9C8-49D2-9C8E-C5ED356674F8">Memory Consumption for CHAR Columns Defined as OUT or IN/OUT Variables</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-9E933DA0-5D61-4C5C-9D1D-E61AD0AD0F04">Memory Leaks and Running Out of Cursors</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-2776500F-19DA-4D06-A86F-805B1BC92703">Opening More than 16 OCI Connections for a Process</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-E846B7AB-4032-473B-8E2F-E741FDD97012">Using statement.cancel</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-5ADA932F-B2BF-4E34-8995-435FD2EF1F92">Using JDBC with Firewalls</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-D4FEB9D7-D7F2-4AF8-858C-89E3988CD00D">Frequent Abrupt Disconnection from Server</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-80F0D16E-0513-4F74-B22B-32F35AB172E6">Network Adapter Cannot Establish Connection</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC28979"></a><div class="props_rev_3"><a id="GUID-88104995-B9C8-49D2-9C8E-C5ED356674F8" name="GUID-88104995-B9C8-49D2-9C8E-C5ED356674F8"></a><h4 id="JJDBC-GUID-88104995-B9C8-49D2-9C8E-C5ED356674F8" class="sect4"><span class="enumeration_section">E.1.1 </span>Memory Consumption for CHAR Columns Defined as OUT or IN/OUT Variables
                  </h4>
                  <div>
                     <div class="section">
                        <p>In PL/SQL, when a <code class="codeph">CHAR</code> or a <code class="codeph">VARCHAR2</code> column is defined as a <code class="codeph">OUT</code> or <code class="codeph">IN/OUT</code> variable, the driver allocates a <code class="codeph">CHAR</code> array of 32512 chars. This can cause a memory consumption problem. JDBC Thin driver does not allocate memory when using <code class="codeph">VARCHAR2</code> output type. But JDBC OCI driver allocates memory for both <code class="codeph">CHAR</code> and <code class="codeph">VARCHAR2</code> types. So, CPU load in OCI driver is higher than Thin driver.
                        </p>
                        <p>At previous releases, the solution to the problem was to invoke the <code class="codeph">Statement.setMaxFieldSize</code> method. A better solution is to use <code class="codeph">OracleCallableStatement.registerOutParameter</code>. Oracle encourages you always to call <code class="codeph">registerOutParameter (int paramIndex, int sqlType, int scale, int maxLength)</code> on each <code class="codeph">CHAR</code> or <code class="codeph">VARCHAR2</code> column. This method is defined in <code class="codeph">oracle.jdbc.OracleCallableStatement</code>. Use the fourth argument, <code class="codeph">maxLength</code>, to limit the memory consumption. This parameter tells the driver how many characters are necessary to store this column. The column is truncated if the character array cannot hold the column data. The third argument, <code class="codeph">scale</code>, is ignored by the driver.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28980"></a><div class="props_rev_3"><a id="GUID-9E933DA0-5D61-4C5C-9D1D-E61AD0AD0F04" name="GUID-9E933DA0-5D61-4C5C-9D1D-E61AD0AD0F04"></a><h4 id="JJDBC-GUID-9E933DA0-5D61-4C5C-9D1D-E61AD0AD0F04" class="sect4"><span class="enumeration_section">E.1.2 </span>Memory Leaks and Running Out of Cursors
                  </h4>
                  <div>
                     <div class="section">
                        <p>If you receive <a id="d116827e202" class="indexterm-anchor"></a><a id="d116827e204" class="indexterm-anchor"></a><a id="d116827e206" class="indexterm-anchor"></a><a id="d116827e208" class="indexterm-anchor"></a>messages that you are running out of cursors or that you are running out of memory, make sure that all your <code class="codeph">Statement</code> and <code class="codeph">ResultSet</code> objects are explicitly closed. Oracle JDBC drivers do not have finalizer methods. They perform cleanup routines by using the <code class="codeph">close</code> method of the <code class="codeph">ResultSet</code> and <code class="codeph">Statement</code> classes. If you do not explicitly close your result set and statement objects, significant memory leaks can occur. You could also run out of cursors in the database. Closing a statement releases the corresponding cursor in the database.
                        </p>
                        <p>Similarly, you must explicitly close <code class="codeph">Connection</code> objects to avoid leaking and running out of cursors on the server-side. When you close the connection, the JDBC driver closes any open statement objects associated with it, thus releasing the cursor on the server-side.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28982"></a><div class="props_rev_3"><a id="GUID-2776500F-19DA-4D06-A86F-805B1BC92703" name="GUID-2776500F-19DA-4D06-A86F-805B1BC92703"></a><h4 id="JJDBC-GUID-2776500F-19DA-4D06-A86F-805B1BC92703" class="sect4"><span class="enumeration_section">E.1.3 </span>Opening More than 16 OCI Connections for a Process
                  </h4>
                  <div>
                     <div class="section">
                        <p>You may find that you are unable to open more than approximately 16 JDBC-OCI connections for a process at any given time. The most likely reasons for this would be either that the number of processes on the server exceeded the limit specified in the initialization file, or that the per-process file descriptors limit was exceeded. It is important to note that one JDBC-OCI connection can use more than one file descriptor (it might use anywhere between 3 and 4 file descriptors). </p>
                        <p>If the server allows more than 16 processes, then the problem could be with the per-process file descriptor limit. The possible solution would be to increase this limit.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28983"></a><div class="props_rev_3"><a id="GUID-E846B7AB-4032-473B-8E2F-E741FDD97012" name="GUID-E846B7AB-4032-473B-8E2F-E741FDD97012"></a><h4 id="JJDBC-GUID-E846B7AB-4032-473B-8E2F-E741FDD97012" class="sect4"><span class="enumeration_section">E.1.4 </span>Using statement.cancel
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d116827e284" class="indexterm-anchor"></a><a id="d116827e286" class="indexterm-anchor"></a><a id="d116827e290" class="indexterm-anchor"></a>The JDBC standard method <code class="codeph">Statement.cancel</code> attempts to cleanly stop the execution of a SQL statement by sending a message to the database. In response, the database stops execution and replies with an error message. The Java thread that invoked <code class="codeph">Statement.execute</code> waits on the server, and continues execution only when it receives the error reply message invoked by the call of the other thread to <code class="codeph">Statement.cancel</code> method.
                        </p>
                        <p>As a result, the <code class="codeph">Statement.cancel</code> method relies on the correct functioning of the network and the database. If either the network connection is broken or the database server is hung, the client does not receive the error reply to the cancel message. Frequently, when the server process dies, JDBC receives an <code class="codeph">IOException</code> that frees the thread that invoked <code class="codeph">Statement.execute</code>. In some circumstances, the server is hung, but JDBC does not receive an <code class="codeph">IOException</code>. The <code class="codeph">Statement.cancel</code> method does not free the thread that initiated the <code class="codeph">Statement.execute</code> method.
                        </p>
                        <div class="infoboxnote" id="GUID-E846B7AB-4032-473B-8E2F-E741FDD97012__GUID-27A4C0CC-782E-4BC7-B9F8-80882A043727">
                           <p class="notep1">Note:</p>
                           <p>Remember the following points while working with the  <code class="codeph">Statement.cancel</code> method:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Distinguish between Connection-level and Statement-level cancel. If a nonstatement execution, for example, a <code class="codeph">ROLLBACK</code> is cancelled by a <code class="codeph">statement.cancel</code> method, then we replay the command (only if it is <code class="codeph">ROLLBACK</code>, <code class="codeph">COMMIT</code>, <code class="codeph">autoCommit ON</code>, <code class="codeph">autoCommit OFF</code>, <code class="codeph">VERSION</code>). To guarantee data integrity, we do not replay statement executions.
                                 </p>
                              </li>
                              <li>
                                 <p>Synchronize statement execution and statement cancel, so that the execution does not return until the cancel call is sent to the Database. This provides a better chance for the executing statement to be cancelled.</p>
                              </li>
                              <li>
                                 <p>Synchronize cancel calls, so that any new cancel request is ignored until the cancel in progress has completed the full protocol, that is, after the database receives an interrupt, act on it, and notify JDBC.</p>
                              </li>
                           </ul>
                        </div>
                        <p>When JDBC does not receive an <code class="codeph">IOException</code>, Oracle Net may eventually time out and close the connection. This causes an <code class="codeph">IOException</code> and frees the thread. This process can take many minutes. For information about how to control this time-out, see the description of the <code class="codeph">readTimeout</code> property for <code class="codeph">OracleDatasource.setConnectionProperties</code>. You can also tune this time-out with certain Oracle Net settings.
                        </p>
                        <p>The JDBC standard method <code class="codeph">Statement.setQueryTimeout</code> relies on the  <code class="codeph">Statement.cancel</code> method. If execution continues longer than the specified time-out interval, then the monitor thread calls the <code class="codeph">Statement.cancel</code> method. This is subject to all the same limitations described previously. As a result, there are cases when the time-out does not free the thread that invoked the <code class="codeph">Statement.execute</code> method.
                        </p>
                        <p>The length of time between execution and cancellation is not precise. This interval is no less than the specified time-out interval but can be several seconds longer. If the application has active threads running at high priority, then the interval can be arbitrarily longer. The monitor thread runs at high priority, but other high priority threads may keep it from running indefinitely. Note that the monitor thread is started only if there are statements executed with non zero time-out. There is only one monitor thread that monitors all Oracle JDBC statement execution.</p>
                        <div class="infoboxnote" id="GUID-E846B7AB-4032-473B-8E2F-E741FDD97012__GUID-075FCA6C-B968-4F4F-B83E-452CF0B6F9C4">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">Statement.cancel</code> method and the  <code class="codeph">Statement.setQueryTimeout</code> method are not supported in the server-side internal driver. The server-side internal driver runs in the single-threaded server process and the Oracle JVM implements Java threads within this single-threaded process. If the server-side internal driver is executing a SQL statement, then no Java thread can call the  <code class="codeph">Statement.cancel</code> method. This also applies to the Oracle JDBC monitor thread.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28984"></a><div class="props_rev_3"><a id="GUID-5ADA932F-B2BF-4E34-8995-435FD2EF1F92" name="GUID-5ADA932F-B2BF-4E34-8995-435FD2EF1F92"></a><h4 id="JJDBC-GUID-5ADA932F-B2BF-4E34-8995-435FD2EF1F92" class="sect4"><span class="enumeration_section">E.1.5 </span>Using JDBC with Firewalls
                  </h4>
                  <div>
                     <div class="section">
                        <p>Firewall timeout for idle-connections may sever a connection. This can cause JDBC applications to hang while waiting for a connection. You can perform one or more of the following actions to avoid connections from being severed due to firewall timeout:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you are using connection caching or connection pooling, then always set the inactivity timeout value on the connection cache to be shorter than the firewall idle timeout value.</p>
                           </li>
                           <li>
                              <p>Pass <code class="codeph">oracle.jdbc.ReadTimeout</code> as connection property to enable read timeout on socket. The timeout value is in milliseconds.
                              </p>
                           </li>
                           <li>
                              <p>For both JDBC OCI and JDBC Thin drivers, use net descriptor to connect to the database and specify the <code class="codeph">ENABLE=BROKEN</code> parameter in the <code class="codeph">DESCRIPTION</code> clause in the connect descriptor. Also, set a lower value for <code class="codeph">TCP_KEEPALIVE_INTERVAL</code>.
                              </p>
                           </li>
                           <li>
                              <p>Enable Oracle Net DCD by setting <code class="codeph">SQLNET.EXPIRE_TIME=1</code> in the <code class="codeph">sqlnet.ora</code> file on the server-side.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28985"></a><div class="props_rev_3"><a id="GUID-D4FEB9D7-D7F2-4AF8-858C-89E3988CD00D" name="GUID-D4FEB9D7-D7F2-4AF8-858C-89E3988CD00D"></a><h4 id="JJDBC-GUID-D4FEB9D7-D7F2-4AF8-858C-89E3988CD00D" class="sect4"><span class="enumeration_section">E.1.6 </span>Frequent Abrupt Disconnection from Server
                  </h4>
                  <div>
                     <div class="section">
                        <p>If the network is not reliable, then it is difficult for a client to detect the frequent disconnections when the server is abruptly disconnected. By default, a client running on Linux takes 7200 seconds (2 hours) to sense the abrupt disconnections. This value is equal to the value of the <code class="codeph">tcp_keepalive_time</code> property. If you want your application to detect the disconnections faster, then you must set the value of the <code class="codeph">tcp_keepalive_time</code>, <code class="codeph">tcp_keepalive_interval</code>, and <code class="codeph">tcp_keepalive_probes</code> properties to a lower value at the operating system level.
                        </p>
                        <div class="infoboxnote" id="GUID-D4FEB9D7-D7F2-4AF8-858C-89E3988CD00D__GUID-3444A412-199D-4FC7-96DC-2C56B73E2DC9">
                           <p class="notep1">Note:</p>
                           <p>Setting a low value for the <code class="codeph">tcp_keepalive_interval</code> property leads to frequent probe packets on the network, which can make the system slower. So, the value of this property should be set appropriately based on the system requirements.
                           </p>
                        </div>
                        <p>Also, you must specify the <code class="codeph">ENABLE=BROKEN</code> parameter in the <code class="codeph">DESCRIPTION</code> clause in the connection descriptor. For example:
                        </p><pre class="oac_no_warn" dir="ltr">jdbc:oracle:thin:@(DESCRIPTION=(ENABLE=BROKEN)(ADDRESS=(PROTOCOL=tcp)(PORT=5221)(HOST=myhost))(CONNECT_DATA=(SERVICE_NAME=orcl)))
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC29175"></a><div class="props_rev_3"><a id="GUID-80F0D16E-0513-4F74-B22B-32F35AB172E6" name="GUID-80F0D16E-0513-4F74-B22B-32F35AB172E6"></a><h4 id="JJDBC-GUID-80F0D16E-0513-4F74-B22B-32F35AB172E6" class="sect4"><span class="enumeration_section">E.1.7 </span>Network Adapter Cannot Establish Connection
                  </h4>
                  <div>
                     <div class="section">
                        <p>You may receive the following error while trying to establish a connection from a JDBC application to an Oracle instance:</p><pre class="oac_no_warn" dir="ltr">java.sql.SQLException: Io exception: 
  The Network Adapter could not establish connection
 
SQLException: SQLState (null) vendor code (17002)
</pre><p>This error may occur even if all or any of the following conditions is true:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You are able to establish a SQL*Plus connection from the same client to the same Oracle instance.</p>
                           </li>
                           <li>
                              <p>You are able to establish a JDBC OCI connection, but not a JDBC Thin connection from the same client to the same Oracle instance.</p>
                           </li>
                           <li>
                              <p>The same JDBC application is able to connect from a different client to the same Oracle instance.</p>
                           </li>
                           <li>
                              <p>The same behavior applies whether the initial JDBC connection string specifies a host name or an IP address.</p>
                           </li>
                        </ul>
                        <p>One or more of the following reasons can cause this error:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The host name to which you are trying to establish the connection is incorrect.</p>
                           </li>
                           <li>
                              <p>The port number you are using to establish the connection is wrong.</p>
                           </li>
                           <li>
                              <p>The NIC card supports both IPv4 and IPv6.</p>
                           </li>
                           <li>
                              <p>The Oracle instance is configured for MTS, but the JDBC connection uses a shared server instead of a dedicated server.</p>
                           </li>
                        </ul>
                        <p>You can quickly diagnose these above-mentioned reasons by using SQL*Plus, except for the issue with the NIC card. The following sections specify how to resolve this error, and also contains a sample application:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="JDBC-troubleshooting.html#GUID-8E036A1B-6698-45F9-AF79-05685F3331F8">Oracle Instance Configured with MTS Server Uses Shared Server</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-troubleshooting.html#GUID-5BC8E69F-F199-468C-8AB8-72D489F33029">JDBC Thin Driver with NIC Card Supporting Both IPv4 and IPv6</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-troubleshooting.html#GUID-0794BD02-81FC-480F-9DB5-50AAA6BBDFA3">Sample Application</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC29177"></a><a id="JJDBC29178"></a><a id="JJDBC29176"></a><div class="props_rev_3"><a id="GUID-8E036A1B-6698-45F9-AF79-05685F3331F8" name="GUID-8E036A1B-6698-45F9-AF79-05685F3331F8"></a><h5 id="JJDBC-GUID-8E036A1B-6698-45F9-AF79-05685F3331F8" class="sect5"><span class="enumeration_section">E.1.7.1 </span>Oracle Instance Configured with MTS Server Uses Shared Server
                     </h5>
                     <div>
                        <div class="section">
                           <p>For resolving this error, you must verify whether the Oracle instance is configured for Multi-threaded Server (MTS) or not. If the Oracle instance is not configured for MTS, then it must be configured.</p>
                           <p>If the Oracle instance is configured for MTS, then you must force the JDBC connection to use a dedicated server instead of a shared server. You can achieve this by reconfiguring the server to use dedicated connections only. If it is not feasible to configure your server to use only dedicated connections, then you perform the following steps to set it from the client side:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8E036A1B-6698-45F9-AF79-05685F3331F8__GUID-C833FE23-6FDD-4F56-BC3A-DCF3609FDC35">For JDBC OCI Client</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Add the <code class="codeph">(SERVER=DEDICATED)</code> property to the TNS connection string stored in the <code class="codeph">tnsnames.ora</code> file on the client.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">USER_DEDICATED_SERVER=ON</code> in the <code class="codeph">sqlnet.ora</code> file on the client.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8E036A1B-6698-45F9-AF79-05685F3331F8__GUID-E6322168-3D34-47EC-AABC-2778F6452F48">For JDBC Thin:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>You must specify a full name-value pair connection string (the same as it may appear in the <code class="codeph">tnsnames.ora</code> file) instead of the short JDBC Thin syntax. For example, instead of the "<code class="codeph">jdbc:oracle:thin:@host:port:sid</code>" connection string, you must use a connection string of the following form:
                           </p><pre class="oac_no_warn" dir="ltr">   "jdbc:oracle:thin:@(DESCRIPTION="                   +
                         "(ADDRESS_LIST="              +
                             "(ADDRESS=(PROTOCOL=TCP)" +
                                      "(HOST=host)"    +
                                      "(PORT=port)"    +
                             ")"                       +
                         ")"                           +
                         "(CONNECT_DATA="              +
                             "(SERVICE_NAME=sid)"      +
                             "(SERVER=DEDICATED)"      +
                         ")"                           +
                       ")"
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29179"></a><div class="props_rev_3"><a id="GUID-5BC8E69F-F199-468C-8AB8-72D489F33029" name="GUID-5BC8E69F-F199-468C-8AB8-72D489F33029"></a><h5 id="JJDBC-GUID-5BC8E69F-F199-468C-8AB8-72D489F33029" class="sect5"><span class="enumeration_section">E.1.7.2 </span>JDBC Thin Driver with NIC Card Supporting Both IPv4 and IPv6
                     </h5>
                     <div>
                        <div class="section">
                           <p>If the Network Interface Controller (NIC) card of the server is configured to support both IPv4 and IPv6, then some services may start with IPv6. Any client application that tries to connect using IPv4 to the service that is running with IPv6 (or the other way round) receives a connection refused error. If a JDBC thin client application tries to connect to the Database server, then the application may stop responding or fail with the following error:</p><pre class="oac_no_warn" dir="ltr">java.sql.SQLException: Io exception: The Network Adapter could not establish the connection Error Code: 17002
</pre><p>Use any of the following solutions to resolve this error:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Indicate the Java Virtual Machine (JVM) to use IP protocol version 4. Launch the JVM, where the JDBC application is running, with the <code class="codeph">-Djava.net.preferIPv4Stack</code> parameter as <code class="codeph">true</code>. For example, suppose you are running a JDBC application named <code class="codeph">jdbcTest</code>. Then execute the application in the following way:
                                 </p><pre class="oac_no_warn" dir="ltr">java -Djava.net.preferIPv4Stack=true jdbcTest
</pre></li>
                              <li>
                                 <p>Use the OCI JDBC driver.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29181"></a><a id="JJDBC29180"></a><div class="props_rev_3"><a id="GUID-0794BD02-81FC-480F-9DB5-50AAA6BBDFA3" name="GUID-0794BD02-81FC-480F-9DB5-50AAA6BBDFA3"></a><h5 id="JJDBC-GUID-0794BD02-81FC-480F-9DB5-50AAA6BBDFA3" class="sect5"><span class="enumeration_section">E.1.7.3 </span>Sample Application
                     </h5>
                     <div>
                        <div class="section">
                           <p><a href="JDBC-troubleshooting.html#GUID-0794BD02-81FC-480F-9DB5-50AAA6BBDFA3__CHDHJBCE">Example E-1</a> shows a basic JDBC program that connects to a Database and can be used to test your connection. It enables to try all forms of connection using Oracle JDBC drivers.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0794BD02-81FC-480F-9DB5-50AAA6BBDFA3__CHDHJBCE">
                           <p class="titleinexample">Example E-1 Basic JDBC Program to Connect to a Database in Five Different Ways</p><pre class="oac_no_warn" dir="ltr">import java.sql.*;
public class Jdbctest
{
   public static void main (String args[])
   {
         try 
         {
                   /* Uncomment the next line for more connection information */
                   // DriverManager.setLogStream(System.out);          
                   /* Set the host, port, and sid below to match the entries in the listener.ora */         
                   String host = "myhost.oracle.com";
                   String port = "5221";
                   String sid  = "orcl";
                   // or pass on command line arguments for all three items         
                   if ( args.length &gt;= 3 ) 
                   { 
                              host = args[0];
                              port = args[1];            
                              sid  = args[2];
                   }
                   
                   String s1 = "jdbc:oracle:thin:@" + host + ":" + port + ":" + sid ;
                   if ( args.length == 1 )
                   { 
                              s1 =  "jdbc:oracle:oci8:@" + args[0];
                   }
                   if ( args.length == 4 )
                   {
                               s1 = "jdbc:oracle:" + args[3] + ":@" + 
                                    "(description=(address=(host=" + host+ ")(protocol=tcp)(port=" + port+ "))(connect_data=(sid="+ sid + ")))";
                   } 
                   System.out.println( "Connecting with: " );
                   System.out.println( s1 );          
                   DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
                   Connection conn = DriverManager.getConnection( s1,"hr","hr");          
                   DatabaseMetaData dmd = conn.getMetaData();
                   System.out.println("DriverVersion:["+dmd.getDriverVersion()+"]");
                   System.out.println("DriverMajorVersion: ["+dmd.getDriverMajorVersion()+"]");
                   System.out.println("DriverMinorVersion: ["+dmd.getDriverMinorVersion()+"]");
                   System.out.println("DriverName:["+dmd.getDriverName()+"]");
                   if ( conn!=null ) 
                      conn.close();
                   System.out.println("Done.");
           } 
           catch ( SQLException e ) 
           { 
                   System.out.println ("\n*** Java Stack Trace ***\n");
                   e.printStackTrace();          
                   System.out.println ("\n*** SQLException caught ***\n");          
                   while ( e != null ) 
                   {
                               System.out.println ("SQLState: " + e.getSQLState ());             
                               System.out.println ("Message:  " + e.getMessage ());             
                               System.out.println ("Error Code:   " + e.getErrorCode ());             
                               e = e.getNextException ();             
                               System.out.println ("");          
                    }       
             }   
  }
}
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="JJDBC28986"></a><div class="props_rev_3"><a id="GUID-BEF28F31-0A7F-47F7-9CB4-A9635768B983" name="GUID-BEF28F31-0A7F-47F7-9CB4-A9635768B983"></a><h3 id="JJDBC-GUID-BEF28F31-0A7F-47F7-9CB4-A9635768B983" class="sect3"><span class="enumeration_section">E.2 </span>Basic Debugging Procedures
               </h3>
               <div>
                  <div class="section">
                     <p>This section describes strategies for <a id="d116827e765" class="indexterm-anchor"></a>debugging a JDBC program:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-E51079F5-28FC-4C76-9FAE-85D8E9B4E6F9">Oracle Net Tracing to Trap Network Events</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-troubleshooting.html#GUID-0B05B4E3-F132-4725-A5AE-539BB402ABB8">Third Party Debugging Tools </a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="JDBC-getting-started.html#GUID-E187D04E-B48D-4394-9DC5-1ECEEBC53AFD">About Processing SQL Exceptions</a></li>
                     </ul>
                  </div>
               </div>
               <a id="JJDBC28987"></a><div class="props_rev_3"><a id="GUID-E51079F5-28FC-4C76-9FAE-85D8E9B4E6F9" name="GUID-E51079F5-28FC-4C76-9FAE-85D8E9B4E6F9"></a><h4 id="JJDBC-GUID-E51079F5-28FC-4C76-9FAE-85D8E9B4E6F9" class="sect4"><span class="enumeration_section">E.2.1 </span>Oracle Net Tracing to Trap Network Events
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d116827e812" class="indexterm-anchor"></a>You can enable client and server Oracle-Net trace to trap the packets sent over Oracle Net. You can use client-side tracing only for the JDBC OCI driver; it is not supported for the JDBC Thin driver.
                        </p>
                        <p>The <a id="d116827e817" class="indexterm-anchor"></a>trace facility produces a detailed sequence of statements that describe network events as they execute. "Tracing" an operation lets you obtain more information about the internal operations of the event. This information is printed to a readable file that identifies the events that led to the error. Several Oracle Net parameters in the <code class="codeph">SQLNET.ORA</code> file control the gathering of trace information. After setting the parameters in <code class="codeph">SQLNET.ORA</code>, you must make a new connection for tracing to be performed. 
                        </p>
                        <p>The higher the trace level, the more detail is captured in the trace file. Because the trace file can be hard to understand, start with a trace level of 4 when enabling tracing. The first part of the trace file contains connection handshake information, so look beyond this for the SQL statements and error messages related to your JDBC program. </p>
                        <div class="infoboxnote" id="GUID-E51079F5-28FC-4C76-9FAE-85D8E9B4E6F9__GUID-1296CE44-9B23-41B6-A7A6-10C8718691F1">
                           <p class="notep1">Note:</p>
                           <p>The trace facility uses a large amount of disk space and might have significant impact upon system performance. Therefore, enable tracing only when necessary.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../lnoci/build-and-configure-oci-applications.html#LNOCI-GUID-7F47F9F7-EF51-4D68-8B2A-2443C837710B" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a></li>
                        </ul>
                     </div>
                  </div><a id="JJDBC28988"></a><div class="props_rev_3"><a id="GUID-1897E108-9DCA-47D2-9248-51FC4050C2F4" name="GUID-1897E108-9DCA-47D2-9248-51FC4050C2F4"></a><h5 id="JJDBC-GUID-1897E108-9DCA-47D2-9248-51FC4050C2F4" class="sect5"><span class="enumeration_section">E.2.1.1 </span>Client-Side Tracing 
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d116827e861" class="indexterm-anchor"></a> Set the following parameters in the <code class="codeph">SQLNET.ORA</code> file on the client system. 
                           </p>
                           <div class="infoboxnote" id="GUID-1897E108-9DCA-47D2-9248-51FC4050C2F4__GUID-E08178E8-1A9E-4D59-B080-D0F6EBA214B4">
                              <p class="notep1">Note:</p>
                              <p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), Oracle recommends you to use the configuration parameters present in the new XML configuration file <code class="codeph">oraaccess.xml</code> instead of the OCI-specific configuration parameters present in the <code class="codeph">sqlnet.ora</code> file. However, the configuration parameters present in the <code class="codeph">sqlnet.ora</code> file are still supported.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="JJDBC28989"></a><div class="props_rev_3"><a id="GUID-76ADC54B-9B43-4E87-BC14-7DCB7971815D" name="GUID-76ADC54B-9B43-4E87-BC14-7DCB7971815D"></a><h6 id="JJDBC-GUID-76ADC54B-9B43-4E87-BC14-7DCB7971815D" class="sect6"><span class="enumeration_section">E.2.1.1.1 </span>TRACE_LEVEL_CLIENT 
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose:</span></p>
                              <p>Turns tracing <code class="codeph">on</code> or <code class="codeph">off</code> to a certain specified level.
                              </p>
                              <p><span class="bold">Default Value:</span></p>
                              <p>0 or OFF</p>
                              <p><span class="bold">Available Values:</span></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>0 or <code class="codeph">OFF</code> - No trace output
                                    </p>
                                 </li>
                                 <li>
                                    <p>4 or <code class="codeph">USER</code> - User trace information
                                    </p>
                                 </li>
                                 <li>
                                    <p>10 or <code class="codeph">ADMIN</code> - Administration trace information
                                    </p>
                                 </li>
                                 <li>
                                    <p>16 or <code class="codeph">SUPPORT</code> - WorldWide Customer Support trace information
                                    </p>
                                 </li>
                              </ul>
                              <p><span class="bold">Example:</span></p><pre class="oac_no_warn" dir="ltr">TRACE_LEVEL_CLIENT=10
</pre></div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="JJDBC28990"></a><div class="props_rev_3"><a id="GUID-1D4FEE6F-6CE8-4DAC-9551-C8A8086382B5" name="GUID-1D4FEE6F-6CE8-4DAC-9551-C8A8086382B5"></a><h6 id="JJDBC-GUID-1D4FEE6F-6CE8-4DAC-9551-C8A8086382B5" class="sect6"><span class="enumeration_section">E.2.1.1.2 </span>TRACE_DIRECTORY_CLIENT 
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose: </span></p>
                              <p>Specifies the destination directory of the trace file.</p>
                              <p><span class="bold">Default Value:</span></p>
                              <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/network/trace </code></p>
                              <p><span class="bold">Example: </span></p>
                              <p>UNIX: <code class="codeph">TRACE_DIRECTORY_CLIENT=/oracle/traces</code></p>
                              <p>Windows: <code class="codeph">TRACE_DIRECTORY_CLIENT=C:\ORACLE\TRACES</code></p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="JJDBC28991"></a><div class="props_rev_3"><a id="GUID-8E648E37-F094-49EB-8336-DE812D1175A9" name="GUID-8E648E37-F094-49EB-8336-DE812D1175A9"></a><h6 id="JJDBC-GUID-8E648E37-F094-49EB-8336-DE812D1175A9" class="sect6"><span class="enumeration_section">E.2.1.1.3 </span>TRACE_FILE_CLIENT
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose:</span></p>
                              <p>Specifies the name of the client trace file.</p>
                              <p><span class="bold">Default Value:</span></p>
                              <p><code class="codeph">SQLNET.TRC</code> 
                              </p>
                              <p><span class="bold">Example:</span></p>
                              <p><code class="codeph">TRACE_FILE_CLIENT=cli_Connection1.trc</code></p>
                              <div class="infoboxnote" id="GUID-8E648E37-F094-49EB-8336-DE812D1175A9__GUID-0C10AFAC-07F2-40F6-BBC7-E6B788F56908">
                                 <p class="notep1">Note:</p>
                                 <p>Ensure that the name you choose for the <code class="codeph">TRACE_FILE_CLIENT</code> file is different from the name you choose for the <code class="codeph">TRACE_FILE_SERVER</code> file.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="JJDBC28992"></a><div class="props_rev_3"><a id="GUID-B36DEDF2-80D2-4CD0-967B-E630B5ED3FF2" name="GUID-B36DEDF2-80D2-4CD0-967B-E630B5ED3FF2"></a><h6 id="JJDBC-GUID-B36DEDF2-80D2-4CD0-967B-E630B5ED3FF2" class="sect6"><span class="enumeration_section">E.2.1.1.4 </span>TRACE_UNIQUE_CLIENT 
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose:</span></p>
                              <p>Gives each client-side trace a unique name to prevent each trace file from being overwritten with the next occurrence of a client trace. The <code class="codeph">PID</code> is attached to the end of the file name. 
                              </p>
                              <p><span class="bold">Default Value:</span></p>
                              <p><code class="codeph">OFF</code> 
                              </p>
                              <p><span class="bold">Example:</span></p>
                              <p><code class="codeph">TRACE_UNIQUE_CLIENT = ON </code></p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="JJDBC28993"></a><div class="props_rev_3"><a id="GUID-EC7C9DD4-E4DE-4D55-A327-CBE4B3CD495F" name="GUID-EC7C9DD4-E4DE-4D55-A327-CBE4B3CD495F"></a><h5 id="JJDBC-GUID-EC7C9DD4-E4DE-4D55-A327-CBE4B3CD495F" class="sect5"><span class="enumeration_section">E.2.1.2 </span>Server-Side Tracing 
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d116827e1124" class="indexterm-anchor"></a>Set the following parameters in the <code class="codeph">SQLNET.ORA</code> file on the server system. Each connection will generate a separate file with a unique file name. 
                           </p>
                           <div class="infoboxnote" id="GUID-EC7C9DD4-E4DE-4D55-A327-CBE4B3CD495F__GUID-7624DF7D-C47D-4F07-800F-F6014061A6C1">
                              <p class="notep1">Note:</p>
                              <p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), Oracle recommends you to use the configuration parameters present in the new XML configuration file <code class="codeph">oraaccess.xml</code> instead of the OCI-specific configuration parameters present in the <code class="codeph">sqlnet.ora</code> file. However, the configuration parameters present in the <code class="codeph">sqlnet.ora</code> file are still supported.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="JJDBC28994"></a><div class="props_rev_3"><a id="GUID-64C4ABAF-0C8C-4DC2-AA6F-053911E457F0" name="GUID-64C4ABAF-0C8C-4DC2-AA6F-053911E457F0"></a><h6 id="JJDBC-GUID-64C4ABAF-0C8C-4DC2-AA6F-053911E457F0" class="sect6"><span class="enumeration_section">E.2.1.2.1 </span>TRACE_LEVEL_SERVER 
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose:</span></p>
                              <p>Turns tracing <code class="codeph">on</code> or <code class="codeph">off</code> to a certain specified level.
                              </p>
                              <p><span class="bold">Default Value:</span></p>
                              <p>0 or <code class="codeph">OFF</code></p>
                              <p><span class="bold">Available Values:</span></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>0 or <code class="codeph">OFF</code> - No trace output
                                    </p>
                                 </li>
                                 <li>
                                    <p>4 or <code class="codeph">USER</code> - User trace information
                                    </p>
                                 </li>
                                 <li>
                                    <p>10 or <code class="codeph">ADMIN</code> - Administration trace information
                                    </p>
                                 </li>
                                 <li>
                                    <p>16 or <code class="codeph">SUPPORT</code> - WorldWide Customer Support trace information 
                                    </p>
                                 </li>
                              </ul>
                              <p><span class="bold">Example:</span></p><pre class="oac_no_warn" dir="ltr">TRACE_LEVEL_SERVER=10
</pre></div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="JJDBC28995"></a><div class="props_rev_3"><a id="GUID-7438E1EC-8FFA-4472-BA10-7457125F0E5E" name="GUID-7438E1EC-8FFA-4472-BA10-7457125F0E5E"></a><h6 id="JJDBC-GUID-7438E1EC-8FFA-4472-BA10-7457125F0E5E" class="sect6"><span class="enumeration_section">E.2.1.2.2 </span>TRACE_DIRECTORY_SERVER 
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose:</span></p>
                              <p>Specifies the destination directory of the trace file.</p>
                              <p><span class="bold">Default Value:</span></p>
                              <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/network/trace</code> 
                              </p>
                              <p><span class="bold">Example:</span></p>
                              <p><code class="codeph">TRACE_DIRECTORY_SERVER=/oracle/traces</code> 
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="JJDBC28996"></a><div class="props_rev_3"><a id="GUID-FF07DC7F-7E32-43E6-BAFC-E96A09EB8F7E" name="GUID-FF07DC7F-7E32-43E6-BAFC-E96A09EB8F7E"></a><h6 id="JJDBC-GUID-FF07DC7F-7E32-43E6-BAFC-E96A09EB8F7E" class="sect6"><span class="enumeration_section">E.2.1.2.3 </span>TRACE_FILE_SERVER
                        </h6>
                        <div>
                           <div class="section">
                              <p><span class="bold">Purpose:</span></p>
                              <p>Specifies the name of the server trace file.</p>
                              <p><span class="bold">Default Value:</span></p>
                              <p><code class="codeph">SERVER.TRC</code> 
                              </p>
                              <p><span class="bold">Example:</span></p>
                              <p><code class="codeph">TRACE_FILE_SERVER= svr_Connection1.trc</code> 
                              </p>
                              <div class="infoboxnote" id="GUID-FF07DC7F-7E32-43E6-BAFC-E96A09EB8F7E__GUID-695EAA99-E658-4337-B353-8209823E6F31">
                                 <p class="notep1">Note:</p>
                                 <p>Ensure that the name you choose for the <code class="codeph">TRACE_FILE_SERVER</code> file is different from the name you choose for the <code class="codeph">TRACE_FILE_CLIENT</code> file.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
               </div><a id="JJDBC28997"></a><div class="props_rev_3"><a id="GUID-0B05B4E3-F132-4725-A5AE-539BB402ABB8" name="GUID-0B05B4E3-F132-4725-A5AE-539BB402ABB8"></a><h4 id="JJDBC-GUID-0B05B4E3-F132-4725-A5AE-539BB402ABB8" class="sect4"><span class="enumeration_section">E.2.2 </span>Third Party Debugging Tools 
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can use tools such as <a id="d116827e1344" class="indexterm-anchor"></a>JDBCSpy and <a id="d116827e1347" class="indexterm-anchor"></a>JDBCTest from Intersolv to troubleshoot at the JDBC API level. These tools are similar to <a id="d116827e1350" class="indexterm-anchor"></a>ODBC Spy and <a id="d116827e1353" class="indexterm-anchor"></a>ODBC Test tools. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>